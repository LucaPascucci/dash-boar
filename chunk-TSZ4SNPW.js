var on=Object.defineProperty,an=Object.defineProperties;var cn=Object.getOwnPropertyDescriptors;var je=Object.getOwnPropertySymbols,un=Object.getPrototypeOf,ln=Object.prototype.hasOwnProperty,fn=Object.prototype.propertyIsEnumerable,dn=Reflect.get;var Ve=(t,e,n)=>e in t?on(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ze=(t,e)=>{for(var n in e||={})ln.call(e,n)&&Ve(t,n,e[n]);if(je)for(var n of je(e))fn.call(e,n)&&Ve(t,n,e[n]);return t},He=(t,e)=>an(t,cn(e));var ms=(t,e,n)=>dn(un(t),n,e);var f=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var re={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var hn=function(t,e){if(!t)throw pn(e)},pn=function(t){return new Error("Firebase Database ("+re.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var Ge=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},gn=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Je={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,l=c?t[i+2]:0,h=s>>2,u=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,j=l&63;c||(j=64,o||(m=64)),r.push(n[h],n[u],n[m],n[j])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ge(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gn(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let u=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||u==null)throw new ie;let m=s<<2|a>>4;if(r.push(m),l!==64){let j=a<<4&240|l>>2;if(r.push(j),u!==64){let sn=l<<6&192|u;r.push(sn)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ie=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},mn=function(t){let e=Ge(t);return Je.encodeByteArray(e,!0)},x=function(t){return mn(t).replace(/\./g,"")},se=function(t){try{return Je.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function _s(t){return Xe(void 0,t)}function Xe(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!bn(n)||(t[n]=Xe(t[n],e[n]));return t}function bn(t){return t!=="__proto__"}function _n(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var En=()=>_n().__FIREBASE_DEFAULTS__,In=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yn=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&se(t[1]);return e&&JSON.parse(e)},z=()=>{try{return En()||In()||yn()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vn=t=>{var e,n;return(n=(e=z())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Es=t=>{let e=vn(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ae=()=>{var t;return(t=z())===null||t===void 0?void 0:t.config},Is=t=>{var e;return(e=z())===null||e===void 0?void 0:e[`_${t}`]};var V=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function ys(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[x(JSON.stringify(n)),x(JSON.stringify(o)),""].join(".")}function Ye(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vs(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ye())}function wn(){var t;let e=(t=z())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ws(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Ss(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ts(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function As(){let t=Ye();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Cs(){return re.NODE_CLIENT===!0||re.NODE_ADMIN===!0}function Os(){return!wn()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){try{return typeof indexedDB=="object"}catch{return!1}}function W(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Qe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var Sn="FirebaseError",v=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Sn,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}},w=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Tn(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new v(i,a,r)}};function Tn(t,e){return t.replace(An,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var An=/\{\$([^}]+)}/g;function We(t){return JSON.parse(t)}function Ds(t){return JSON.stringify(t)}var Ze=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=We(se(s[0])||""),n=We(se(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var Rs=function(t){let e=Ze(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Ns=function(t){let e=Ze(t).claims;return typeof e=="object"&&e.admin===!0};function Ms(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ks(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ps(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Bs(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function P(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(qe(s)&&qe(o)){if(!P(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function qe(t){return t!==null&&typeof t=="object"}function Ls(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Ke=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let u=0;u<16;u++)r[u]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let u=0;u<16;u++)r[u]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let u=16;u<80;u++){let m=r[u-3]^r[u-8]^r[u-14]^r[u-16];r[u]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],c=this.chain_[4],l,h;for(let u=0;u<80;u++){u<40?u<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):u<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let m=(i<<5|i>>>27)+l+c+h+r[u]&4294967295;c=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function xs(t,e){let n=new oe(t,e);return n.subscribe.bind(n)}var oe=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Cn(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=ne),i.error===void 0&&(i.error=ne),i.complete===void 0&&(i.complete=ne);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Cn(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ne(){}function Fs(t,e){return`${t} failed: ${e} argument `}var Us=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,hn(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$s=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var On=1e3,Dn=2,Rn=4*60*60*1e3,Nn=.5;function js(t,e=On,n=Dn){let r=e*Math.pow(n,t),i=Math.round(Nn*r*(Math.random()-.5)*2);return Math.min(Rn,r+i)}function q(t){return t&&t._delegate?t._delegate:t}var Mn=[],d=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(d||{}),kn={debug:d.DEBUG,verbose:d.VERBOSE,info:d.INFO,warn:d.WARN,error:d.ERROR,silent:d.SILENT},Pn=d.INFO,Bn={[d.DEBUG]:"log",[d.VERBOSE]:"log",[d.INFO]:"info",[d.WARN]:"warn",[d.ERROR]:"error"},Ln=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Bn[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},B=class{constructor(e){this.name=e,this._logLevel=Pn,this._logHandler=Ln,this._userLogHandler=null,Mn.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in d))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kn[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,d.DEBUG,...e),this._logHandler(this,d.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,d.VERBOSE,...e),this._logHandler(this,d.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,d.INFO,...e),this._logHandler(this,d.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,d.WARN,...e),this._logHandler(this,d.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,d.ERROR,...e),this._logHandler(this,d.ERROR,...e)}};var _=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var D="[DEFAULT]";var ce=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new V;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fn(e))try{this.getOrInitializeService({instanceIdentifier:D})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=D){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return f(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=D){return this.instances.has(e)}getOptions(e=D){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xn(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=D){return this.component?this.component.multipleInstances?e:D:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xn(t){return t===D?void 0:t}function Fn(t){return t.instantiationMode==="EAGER"}var K=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ce(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Un=(t,e)=>e.some(n=>t instanceof n),et,tt;function $n(){return et||(et=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jn(){return tt||(tt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var nt=new WeakMap,le=new WeakMap,rt=new WeakMap,ue=new WeakMap,de=new WeakMap;function Vn(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(E(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nt.set(n,t)}).catch(()=>{}),de.set(e,t),e}function zn(t){if(le.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});le.set(t,e)}var fe={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return le.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rt.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return E(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function it(t){fe=t(fe)}function Hn(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(G(this),e,...n);return rt.set(r,e.sort?e.sort():[e]),E(r)}:jn().includes(t)?function(...e){return t.apply(G(this),e),E(nt.get(this))}:function(...e){return E(t.apply(G(this),e))}}function Wn(t){return typeof t=="function"?Hn(t):(t instanceof IDBTransaction&&zn(t),Un(t,$n())?new Proxy(t,fe):t)}function E(t){if(t instanceof IDBRequest)return Vn(t);if(ue.has(t))return ue.get(t);let e=Wn(t);return e!==t&&(ue.set(t,e),de.set(e,t)),e}var G=t=>de.get(t);function J(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=E(o);return r&&o.addEventListener("upgradeneeded",c=>{r(E(o.result),c.oldVersion,c.newVersion,E(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}function Js(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),E(n).then(()=>{})}var qn=["get","getKey","getAll","getAllKeys","count"],Kn=["put","add","delete","clear"],he=new Map;function st(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(he.get(e))return he.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Kn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qn.includes(n)))return;let s=function(o,...a){return f(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),l=c.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&c.done]))[0]})};return he.set(e,s),s}it(t=>He(ze({},t),{get:(e,n,r)=>st(e,n)||t.get(e,n,r),has:(e,n)=>!!st(e,n)||t.has(e,n)}));var ge=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gn(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Gn(t){let e=t.getComponent();return e?.type==="VERSION"}var me="@firebase/app",ot="0.10.18";var T=new B("@firebase/app"),Jn="@firebase/app-compat",Xn="@firebase/analytics-compat",Yn="@firebase/analytics",Qn="@firebase/app-check-compat",Zn="@firebase/app-check",er="@firebase/auth",tr="@firebase/auth-compat",nr="@firebase/database",rr="@firebase/data-connect",ir="@firebase/database-compat",sr="@firebase/functions",or="@firebase/functions-compat",ar="@firebase/installations",cr="@firebase/installations-compat",ur="@firebase/messaging",lr="@firebase/messaging-compat",fr="@firebase/performance",dr="@firebase/performance-compat",hr="@firebase/remote-config",pr="@firebase/remote-config-compat",gr="@firebase/storage",mr="@firebase/storage-compat",br="@firebase/firestore",_r="@firebase/vertexai",Er="@firebase/firestore-compat",Ir="firebase",yr="11.2.0";var be="[DEFAULT]",vr={[me]:"fire-core",[Jn]:"fire-core-compat",[Yn]:"fire-analytics",[Xn]:"fire-analytics-compat",[Zn]:"fire-app-check",[Qn]:"fire-app-check-compat",[er]:"fire-auth",[tr]:"fire-auth-compat",[nr]:"fire-rtdb",[rr]:"fire-data-connect",[ir]:"fire-rtdb-compat",[sr]:"fire-fn",[or]:"fire-fn-compat",[ar]:"fire-iid",[cr]:"fire-iid-compat",[ur]:"fire-fcm",[lr]:"fire-fcm-compat",[fr]:"fire-perf",[dr]:"fire-perf-compat",[hr]:"fire-rc",[pr]:"fire-rc-compat",[gr]:"fire-gcs",[mr]:"fire-gcs-compat",[br]:"fire-fst",[Er]:"fire-fst-compat",[_r]:"fire-vertex","fire-js":"fire-js",[Ir]:"fire-js-all"};var F=new Map,wr=new Map,_e=new Map;function at(t,e){try{t.container.addComponent(e)}catch(n){T.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function C(t){let e=t.name;if(_e.has(e))return T.debug(`There were multiple attempts to register component ${e}.`),!1;_e.set(e,t);for(let n of F.values())at(n,t);for(let n of wr.values())at(n,t);return!0}function L(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ao(t){return t.settings!==void 0}var Sr={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},A=new w("app","Firebase",Sr);var Ee=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new _("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw A.create("app-deleted",{appName:this._name})}};var co=yr;function Tr(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:be,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw A.create("bad-app-name",{appName:String(i)});if(n||(n=ae()),!n)throw A.create("no-options");let s=F.get(i);if(s){if(P(n,s.options)&&P(r,s.config))return s;throw A.create("duplicate-app",{appName:i})}let o=new K(i);for(let c of _e.values())o.addComponent(c);let a=new Ee(n,r,o);return F.set(i,a),a}function ve(t=be){let e=F.get(t);if(!e&&t===be&&ae())return Tr();if(!e)throw A.create("no-app",{appName:t});return e}function uo(){return Array.from(F.values())}function S(t,e,n){var r;let i=(r=vr[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),T.warn(a.join(" "));return}C(new _(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Ar="firebase-heartbeat-database",Cr=1,U="firebase-heartbeat-store",pe=null;function ft(){return pe||(pe=J(Ar,Cr,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(U)}catch(n){console.warn(n)}}}}).catch(t=>{throw A.create("idb-open",{originalErrorMessage:t.message})})),pe}function Or(t){return f(this,null,function*(){try{let n=(yield ft()).transaction(U),r=yield n.objectStore(U).get(dt(t));return yield n.done,r}catch(e){if(e instanceof v)T.warn(e.message);else{let n=A.create("idb-get",{originalErrorMessage:e?.message});T.warn(n.message)}}})}function ct(t,e){return f(this,null,function*(){try{let r=(yield ft()).transaction(U,"readwrite");yield r.objectStore(U).put(e,dt(t)),yield r.done}catch(n){if(n instanceof v)T.warn(n.message);else{let r=A.create("idb-set",{originalErrorMessage:n?.message});T.warn(r.message)}}})}function dt(t){return`${t.name}!${t.options.appId}`}var Dr=1024,Rr=30*24*60*60*1e3,Ie=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ye(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return f(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ut();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Rr}),this._storage.overwrite(this._heartbeatsCache))}catch(r){T.warn(r)}})}getHeartbeatsHeader(){return f(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=ut(),{heartbeatsToSend:r,unsentEntries:i}=Nr(this._heartbeatsCache.heartbeats),s=x(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return T.warn(n),""}})}};function ut(){return new Date().toISOString().substring(0,10)}function Nr(t,e=Dr){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),lt(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lt(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ye=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return f(this,null,function*(){return H()?W().then(()=>!0).catch(()=>!1):!1})}read(){return f(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield Or(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ct(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return f(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return ct(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function lt(t){return x(JSON.stringify({version:2,heartbeats:t})).length}function Mr(t){C(new _("platform-logger",e=>new ge(e),"PRIVATE")),C(new _("heartbeat",e=>new Ie(e),"PRIVATE")),S(me,ot,t),S(me,ot,"esm2017"),S("fire-js","")}Mr("");var gt="@firebase/installations",Ae="0.6.12";var mt=1e4,bt=`w:${Ae}`,_t="FIS_v2",kr="https://firebaseinstallations.googleapis.com/v1",Pr=60*60*1e3,Br="installations",Lr="Installations";var xr={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},N=new w(Br,Lr,xr);function Et(t){return t instanceof v&&t.code.includes("request-failed")}function It({projectId:t}){return`${kr}/projects/${t}/installations`}function yt(t){return{token:t.token,requestStatus:2,expiresIn:Ur(t.expiresIn),creationTime:Date.now()}}function vt(t,e){return f(this,null,function*(){let r=(yield e.json()).error;return N.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function wt({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Fr(t,{refreshToken:e}){let n=wt(t);return n.append("Authorization",$r(e)),n}function St(t){return f(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Ur(t){return Number(t.replace("s","000"))}function $r(t){return`${_t} ${t}`}function jr(r,i){return f(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=It(t),o=wt(t),a=e.getImmediate({optional:!0});if(a){let u=yield a.getHeartbeatsHeader();u&&o.append("x-firebase-client",u)}let c={fid:n,authVersion:_t,appId:t.appId,sdkVersion:bt},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield St(()=>fetch(s,l));if(h.ok){let u=yield h.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:yt(u.authToken)}}else throw yield vt("Create Installation",h)})}function Tt(t){return new Promise(e=>{setTimeout(e,t)})}function Vr(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var zr=/^[cdef][\w-]{21}$/,Te="";function Hr(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=Wr(t);return zr.test(n)?n:Te}catch{return Te}}function Wr(t){return Vr(t).substr(0,22)}function Y(t){return`${t.appName}!${t.appId}`}var At=new Map;function Ct(t,e){let n=Y(t);Ot(n,e),qr(n,e)}function Ot(t,e){let n=At.get(t);if(n)for(let r of n)r(e)}function qr(t,e){let n=Kr();n&&n.postMessage({key:t,fid:e}),Gr()}var R=null;function Kr(){return!R&&"BroadcastChannel"in self&&(R=new BroadcastChannel("[Firebase] FID Change"),R.onmessage=t=>{Ot(t.data.key,t.data.fid)}),R}function Gr(){At.size===0&&R&&(R.close(),R=null)}var Jr="firebase-installations-database",Xr=1,M="firebase-installations-store",we=null;function Ce(){return we||(we=J(Jr,Xr,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(M)}}})),we}function X(t,e){return f(this,null,function*(){let n=Y(t),i=(yield Ce()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&Ct(t,e.fid),e})}function Dt(t){return f(this,null,function*(){let e=Y(t),r=(yield Ce()).transaction(M,"readwrite");yield r.objectStore(M).delete(e),yield r.done})}function Q(t,e){return f(this,null,function*(){let n=Y(t),i=(yield Ce()).transaction(M,"readwrite"),s=i.objectStore(M),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&Ct(t,a.fid),a})}function Oe(t){return f(this,null,function*(){let e,n=yield Q(t.appConfig,r=>{let i=Yr(r),s=Qr(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Te?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function Yr(t){let e=t||{fid:Hr(),registrationStatus:0};return Rt(e)}function Qr(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(N.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Zr(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ei(t)}:{installationEntry:e}}function Zr(t,e){return f(this,null,function*(){try{let n=yield jr(t,e);return X(t.appConfig,n)}catch(n){throw Et(n)&&n.customData.serverCode===409?yield Dt(t.appConfig):yield X(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function ei(t){return f(this,null,function*(){let e=yield ht(t.appConfig);for(;e.registrationStatus===1;)yield Tt(100),e=yield ht(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Oe(t);return r||n}return e})}function ht(t){return Q(t,e=>{if(!e)throw N.create("installation-not-found");return Rt(e)})}function Rt(t){return ti(t)?{fid:t.fid,registrationStatus:0}:t}function ti(t){return t.registrationStatus===1&&t.registrationTime+mt<Date.now()}function ni(r,i){return f(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=ri(t,n),o=Fr(t,n),a=e.getImmediate({optional:!0});if(a){let u=yield a.getHeartbeatsHeader();u&&o.append("x-firebase-client",u)}let c={installation:{sdkVersion:bt,appId:t.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield St(()=>fetch(s,l));if(h.ok){let u=yield h.json();return yt(u)}else throw yield vt("Generate Auth Token",h)})}function ri(t,{fid:e}){return`${It(t)}/${e}/authTokens:generate`}function De(t,e=!1){return f(this,null,function*(){let n,r=yield Q(t.appConfig,s=>{if(!Nt(s))throw N.create("not-registered");let o=s.authToken;if(!e&&oi(o))return s;if(o.requestStatus===1)return n=ii(t,e),s;{if(!navigator.onLine)throw N.create("app-offline");let a=ci(s);return n=si(t,a),a}});return n?yield n:r.authToken})}function ii(t,e){return f(this,null,function*(){let n=yield pt(t.appConfig);for(;n.authToken.requestStatus===1;)yield Tt(100),n=yield pt(t.appConfig);let r=n.authToken;return r.requestStatus===0?De(t,e):r})}function pt(t){return Q(t,e=>{if(!Nt(e))throw N.create("not-registered");let n=e.authToken;return ui(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function si(t,e){return f(this,null,function*(){try{let n=yield ni(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield X(t.appConfig,r),n}catch(n){if(Et(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Dt(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield X(t.appConfig,r)}throw n}})}function Nt(t){return t!==void 0&&t.registrationStatus===2}function oi(t){return t.requestStatus===2&&!ai(t)}function ai(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Pr}function ci(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ui(t){return t.requestStatus===1&&t.requestTime+mt<Date.now()}function li(t){return f(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Oe(e);return r?r.catch(console.error):De(e).catch(console.error),n.fid})}function fi(t,e=!1){return f(this,null,function*(){let n=t;return yield di(n),(yield De(n,e)).token})}function di(t){return f(this,null,function*(){let{registrationPromise:e}=yield Oe(t);e&&(yield e)})}function hi(t){if(!t||!t.options)throw Se("App Configuration");if(!t.name)throw Se("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw Se(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Se(t){return N.create("missing-app-config-values",{valueName:t})}var Mt="installations",pi="installations-internal",gi=t=>{let e=t.getProvider("app").getImmediate(),n=hi(e),r=L(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},mi=t=>{let e=t.getProvider("app").getImmediate(),n=L(e,Mt).getImmediate();return{getId:()=>li(n),getToken:i=>fi(n,i)}};function bi(){C(new _(Mt,gi,"PUBLIC")),C(new _(pi,mi,"PRIVATE"))}bi();S(gt,Ae);S(gt,Ae,"esm2017");var kt="@firebase/performance",Be="0.6.12";var Vt=Be,_i="FB-PERF-TRACE-START",Ei="FB-PERF-TRACE-STOP",Le="FB-PERF-TRACE-MEASURE",zt="_wt_",Ht="_fp",Wt="_fcp",qt="_fid",Kt="@firebase/performance/config",Gt="@firebase/performance/configexpire",Ii="performance",Jt="Performance";var yi={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},g=new w(Ii,Jt,yi);var y=new B(Jt);y.logLevel=d.INFO;var Re,Xt,p=class t{constructor(e){if(this.window=e,!e)throw g.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,n,r){!this.performance||!this.performance.measure||this.performance.measure(e,n,r)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!Qe()?(y.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):H()?!0:(y.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,n){if(!this.PerformanceObserver)return;new this.PerformanceObserver(i=>{for(let s of i.getEntries())n(s)}).observe({entryTypes:[e]})}static getInstance(){return Re===void 0&&(Re=new t(Xt)),Re}};function vi(t){Xt=t}var Yt;function wi(t){let e=t.getId();return e.then(n=>{Yt=n}),e}function Fe(){return Yt}function Si(t){let e=t.getToken();return e.then(n=>{}),e}function Pt(t,e){let n=t.length-e.length;if(n<0||n>1)throw g.create("invalid String merger input");let r=[];for(let i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Ne,b=class t{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Pt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Pt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Ne===void 0&&(Ne=new t),Ne}};var $=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}($||{}),Ti=["firebase_","google_","ga_"],Ai=new RegExp("^[a-zA-Z]\\w*$"),Ci=40,Oi=100;function Di(){let t=p.getInstance().navigator;return t?.serviceWorker?t.serviceWorker.controller?2:3:1}function Qt(){switch(p.getInstance().document.visibilityState){case"visible":return $.VISIBLE;case"hidden":return $.HIDDEN;default:return $.UNKNOWN}}function Ri(){let e=p.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Ni(t){return t.length===0||t.length>Ci?!1:!Ti.some(n=>t.startsWith(n))&&!!t.match(Ai)}function Mi(t){return t.length!==0&&t.length<=Oi}function Zt(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.appId;if(!n)throw g.create("no app id");return n}function ki(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.projectId;if(!n)throw g.create("no project id");return n}function Pi(t){var e;let n=(e=t.options)===null||e===void 0?void 0:e.apiKey;if(!n)throw g.create("no api key");return n}var Bi="0.0.1",I={loggingEnabled:!0},Li="FIREBASE_INSTALLATIONS_AUTH";function xi(t,e){let n=Fi();return n?(Bt(n),Promise.resolve()):ji(t,e).then(Bt).then(r=>Ui(r),()=>{})}function Fi(){let t=p.getInstance().localStorage;if(!t)return;let e=t.getItem(Gt);if(!e||!Vi(e))return;let n=t.getItem(Kt);if(n)try{return JSON.parse(n)}catch{return}}function Ui(t){let e=p.getInstance().localStorage;!t||!e||(e.setItem(Kt,JSON.stringify(t)),e.setItem(Gt,String(Date.now()+b.getInstance().configTimeToLive*60*60*1e3)))}var $i="Could not fetch config, will use default configs";function ji(t,e){return Si(t.installations).then(n=>{let r=ki(t.app),i=Pi(t.app),s=`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,o=new Request(s,{method:"POST",headers:{Authorization:`${Li} ${n}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:n,app_id:Zt(t.app),app_version:Vt,sdk_version:Bi})});return fetch(o).then(a=>{if(a.ok)return a.json();throw g.create("RC response not ok")})}).catch(()=>{y.info($i)})}function Bt(t){if(!t)return t;let e=b.getInstance(),n=t.entries||{};return n.fpr_enabled!==void 0?e.loggingEnabled=String(n.fpr_enabled)==="true":e.loggingEnabled=I.loggingEnabled,n.fpr_log_source?e.logSource=Number(n.fpr_log_source):I.logSource&&(e.logSource=I.logSource),n.fpr_log_endpoint_url?e.logEndPointUrl=n.fpr_log_endpoint_url:I.logEndPointUrl&&(e.logEndPointUrl=I.logEndPointUrl),n.fpr_log_transport_key?e.transportKey=n.fpr_log_transport_key:I.transportKey&&(e.transportKey=I.transportKey),n.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate):I.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=I.networkRequestsSamplingRate),n.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate):I.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=I.tracesSamplingRate),e.logTraceAfterSampling=Lt(e.tracesSamplingRate),e.logNetworkAfterSampling=Lt(e.networkRequestsSamplingRate),t}function Vi(t){return Number(t)>Date.now()}function Lt(t){return Math.random()<=t}var Ue=1,Me;function en(t){return Ue=2,Me=Me||Hi(t),Me}function zi(){return Ue===3}function Hi(t){return Wi().then(()=>wi(t.installations)).then(e=>xi(t,e)).then(()=>xt(),()=>xt())}function Wi(){let t=p.getInstance().document;return new Promise(e=>{if(t&&t.readyState!=="complete"){let n=()=>{t.readyState==="complete"&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()})}function xt(){Ue=3}var $e=10*1e3,qi=5.5*1e3,tn=3,Ki=1e3,ee=tn,O=[],Ft=!1;function Gi(){Ft||(te(qi),Ft=!0)}function te(t){setTimeout(()=>{if(ee!==0){if(!O.length)return te($e);Ji()}},t)}function Ji(){let t=O.splice(0,Ki),e=t.map(r=>({source_extension_json_proto3:r.message,event_time_ms:String(r.eventTime)})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:b.getInstance().logSource,log_event:e};Xi(n,t).catch(()=>{O=[...t,...O],ee--,y.info(`Tries left: ${ee}.`),te($e)})}function Xi(t,e){return Yi(t).then(n=>(n.ok||y.info("Call to Firebase backend failed."),n.json())).then(n=>{let r=Number(n.nextRequestWaitMillis),i=$e;isNaN(r)||(i=Math.max(r,i));let s=n.logResponseDetails;Array.isArray(s)&&s.length>0&&s[0].responseAction==="RETRY_REQUEST_LATER"&&(O=[...e,...O],y.info("Retry transport request later.")),ee=tn,te(i)})}function Yi(t){let e=b.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}function Qi(t){if(!t.eventTime||!t.message)throw g.create("invalid cc log");O=[...O,t]}function Zi(t){return(...e)=>{let n=t(...e);Qi({message:n,eventTime:Date.now()})}}var ke;function nn(t,e){ke||(ke=Zi(ts)),ke(t,e)}function Z(t){let e=b.getInstance();!e.instrumentationEnabled&&t.isAuto||!e.dataCollectionEnabled&&!t.isAuto||p.getInstance().requiredApisAvailable()&&(t.isAuto&&Qt()!==$.VISIBLE||(zi()?Pe(t):en(t.performanceController).then(()=>Pe(t),()=>Pe(t))))}function Pe(t){if(!Fe())return;let e=b.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||setTimeout(()=>nn(t,1),0)}function es(t){let e=b.getInstance();if(!e.instrumentationEnabled)return;let n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n===r||n===i||!e.loggingEnabled||!e.logNetworkAfterSampling||setTimeout(()=>nn(t,0),0)}function ts(t,e){return e===0?ns(t):rs(t)}function ns(t){let e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:rn(t.performanceController.app),network_request_metric:e};return JSON.stringify(n)}function rs(t){let e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};Object.keys(t.counters).length!==0&&(e.counters=t.counters);let n=t.getAttributes();Object.keys(n).length!==0&&(e.custom_attributes=n);let r={application_info:rn(t.performanceController.app),trace_metric:e};return JSON.stringify(r)}function rn(t){return{google_app_id:Zt(t),app_instance_id:Fe(),web_app_info:{sdk_version:Vt,page_url:p.getInstance().getUrl(),service_worker_status:Di(),visibility_state:Qt(),effective_connection_type:Ri()},application_process_state:0}}var is=100,ss="_",os=[Ht,Wt,qt];function as(t,e){return t.length===0||t.length>is?!1:e&&e.startsWith(zt)&&os.indexOf(t)>-1||!t.startsWith(ss)}function cs(t){let e=Math.floor(t);return e<t&&y.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}var k=class t{constructor(e,n,r=!1,i){this.performanceController=e,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=p.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${_i}-${this.randomId}-${this.name}`,this.traceStopMark=`${Ei}-${this.randomId}-${this.name}`,this.traceMeasure=i||`${Le}-${this.randomId}-${this.name}`,i&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw g.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw g.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Z(this)}record(e,n,r){if(e<=0)throw g.create("nonpositive trace startTime",{traceName:this.name});if(n<=0)throw g.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(n*1e3),this.startTimeUs=Math.floor(e*1e3),r&&r.attributes&&(this.customAttributes=Object.assign({},r.attributes)),r&&r.metrics)for(let i of Object.keys(r.metrics))isNaN(Number(r.metrics[i]))||(this.counters[i]=Math.floor(Number(r.metrics[i])));Z(this)}incrementMetric(e,n=1){this.counters[e]===void 0?this.putMetric(e,n):this.putMetric(e,this.counters[e]+n)}putMetric(e,n){if(as(e,this.name))this.counters[e]=cs(n??0);else throw g.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,n){let r=Ni(e),i=Mi(n);if(r&&i){this.customAttributes[e]=n;return}if(!r)throw g.create("invalid attribute name",{attributeName:e});if(!i)throw g.create("invalid attribute value",{attributeValue:n})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){let e=this.api.getEntriesByName(this.traceMeasure),n=e&&e[0];n&&(this.durationUs=Math.floor(n.duration*1e3),this.startTimeUs=Math.floor((n.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,n,r,i){let s=p.getInstance().getUrl();if(!s)return;let o=new t(e,zt+s,!0),a=Math.floor(p.getInstance().getTimeOrigin()*1e3);o.setStartTime(a),n&&n[0]&&(o.setDuration(Math.floor(n[0].duration*1e3)),o.putMetric("domInteractive",Math.floor(n[0].domInteractive*1e3)),o.putMetric("domContentLoadedEventEnd",Math.floor(n[0].domContentLoadedEventEnd*1e3)),o.putMetric("loadEventEnd",Math.floor(n[0].loadEventEnd*1e3)));let c="first-paint",l="first-contentful-paint";if(r){let h=r.find(m=>m.name===c);h&&h.startTime&&o.putMetric(Ht,Math.floor(h.startTime*1e3));let u=r.find(m=>m.name===l);u&&u.startTime&&o.putMetric(Wt,Math.floor(u.startTime*1e3)),i&&o.putMetric(qt,Math.floor(i*1e3))}Z(o)}static createUserTimingTrace(e,n){let r=new t(e,n,!1,n);Z(r)}};function Ut(t,e){let n=e;if(!n||n.responseStart===void 0)return;let r=p.getInstance().getTimeOrigin(),i=Math.floor((n.startTime+r)*1e3),s=n.responseStart?Math.floor((n.responseStart-n.startTime)*1e3):void 0,o=Math.floor((n.responseEnd-n.startTime)*1e3),a=n.name&&n.name.split("?")[0],c={performanceController:t,url:a,responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o};es(c)}var us=5e3;function $t(t){Fe()&&(setTimeout(()=>fs(t),0),setTimeout(()=>ls(t),0),setTimeout(()=>ds(t),0))}function ls(t){let e=p.getInstance(),n=e.getEntriesByType("resource");for(let r of n)Ut(t,r);e.setupObserver("resource",r=>Ut(t,r))}function fs(t){let e=p.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");if(e.onFirstInputDelay){let i=setTimeout(()=>{k.createOobTrace(t,n,r),i=void 0},us);e.onFirstInputDelay(s=>{i&&(clearTimeout(i),k.createOobTrace(t,n,r,s))})}else k.createOobTrace(t,n,r)}function ds(t){let e=p.getInstance(),n=e.getEntriesByType("measure");for(let r of n)jt(t,r);e.setupObserver("measure",r=>jt(t,r))}function jt(t,e){let n=e.name;n.substring(0,Le.length)!==Le&&k.createUserTimingTrace(t,n)}var xe=class{constructor(e,n){this.app=e,this.installations=n,this.initialized=!1}_init(e){this.initialized||(e?.dataCollectionEnabled!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),e?.instrumentationEnabled!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),p.getInstance().requiredApisAvailable()?W().then(n=>{n&&(Gi(),en(this).then(()=>$t(this),()=>$t(this)),this.initialized=!0)}).catch(n=>{y.info(`Environment doesn't support IndexedDB: ${n}`)}):y.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){b.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return b.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){b.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return b.getInstance().dataCollectionEnabled}},hs="[DEFAULT]";function To(t=ve()){return t=q(t),L(t,"performance").getImmediate()}function Ao(t,e){t=q(t);let n=L(t,"performance");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(P(s,e??{}))return i;throw g.create("already initialized")}return n.initialize({options:e})}function Co(t,e){return t=q(t),new k(t,e)}var ps=(t,{options:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();if(n.name!==hs)throw g.create("FB not default");if(typeof window>"u")throw g.create("no window");vi(window);let i=new xe(n,r);return i._init(e),i};function gs(){C(new _("performance",ps,"PUBLIC")),S(kt,Be),S(kt,Be,"esm2017")}gs();export{ze as a,He as b,ms as c,f as d,hn as e,pn as f,Je as g,mn as h,se as i,_s as j,vn as k,Es as l,Is as m,V as n,ys as o,Ye as p,vs as q,ws as r,Ss as s,Ts as t,As as u,Cs as v,Os as w,H as x,W as y,Qe as z,v as A,w as B,We as C,Ds as D,Rs as E,Ns as F,Ms as G,ks as H,Ps as I,Bs as J,P as K,Ls as L,Ke as M,xs as N,Fs as O,Us as P,$s as Q,js as R,q as S,_ as T,d as U,B as V,J as W,Js as X,C as Y,L as Z,ao as _,co as $,Tr as aa,ve as ba,uo as ca,S as da,To as ea,Ao as fa,Co as ga};
