import{$ as Nn,A as Rn,B as Lr,C as sh,D as Qt,E as IS,F as ES,G as Vr,H as Ko,I as Al,J as xl,K as Rl,L as Yo,M as CS,N as TS,O as bS,P as SS,Q as Nl,R as Ml,S as Pe,T as xt,U as un,V as Ur,W as Nv,X as ah,Y as Rt,Z as Lt,_ as hi,a as B,aa as DS,b as Ee,ba as Vt,c as Xi,ca as ch,d as y,da as ee,e as $,ea as AS,f as ca,g as fS,h as pS,i as mS,j as gS,k as vS,l as eo,m as xv,n as Rv,o as la,p as ln,q as bl,r as yS,s as Sl,t as oh,u as _S,v as Fr,w as wS,x as di,y as zo,z as Dl}from"./chunk-VUN4IAWB.js";function xS(n,e){return Object.is(n,e)}var Kt=null,Pl=!1,lh=1,jr=Symbol("SIGNAL");function Oe(n){let e=Kt;return Kt=n,e}function RS(){return Kt}function DV(){return Pl}var ua={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function kv(n){if(Pl)throw new Error("");if(Kt===null)return;Kt.consumerOnSignalRead(n);let e=Kt.nextProducerIndex++;if(mh(Kt),e<Kt.producerNode.length&&Kt.producerNode[e]!==n&&Ol(Kt)){let t=Kt.producerNode[e];ph(t,Kt.producerIndexOfThis[e])}Kt.producerNode[e]!==n&&(Kt.producerNode[e]=n,Kt.producerIndexOfThis[e]=Ol(Kt)?kS(n,Kt,e):0),Kt.producerLastReadVersion[e]=n.version}function AV(){lh++}function NS(n){if(!(Ol(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===lh)){if(!n.producerMustRecompute(n)&&!hh(n)){n.dirty=!1,n.lastCleanEpoch=lh;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=lh}}function MS(n){if(n.liveConsumerNode===void 0)return;let e=Pl;Pl=!0;try{for(let t of n.liveConsumerNode)t.dirty||OS(t)}finally{Pl=e}}function PS(){return Kt?.consumerAllowSignalWrites!==!1}function OS(n){n.dirty=!0,MS(n),n.consumerMarkedDirty?.(n)}function kl(n){return n&&(n.nextProducerIndex=0),Oe(n)}function dh(n,e){if(Oe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Ol(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)ph(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function hh(n){mh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(NS(t),r!==t.version))return!0}return!1}function fh(n){if(mh(n),Ol(n))for(let e=0;e<n.producerNode.length;e++)ph(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function kS(n,e,t){if(FS(n),n.liveConsumerNode.length===0&&LS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=kS(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function ph(n,e){if(FS(n),n.liveConsumerNode.length===1&&LS(n))for(let r=0;r<n.producerNode.length;r++)ph(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];mh(i),i.producerIndexOfThis[r]=e}}function Ol(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function mh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function FS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function LS(n){return n.producerNode!==void 0}function VS(n){let e=Object.create(xV);e.computation=n;let t=()=>{if(NS(e),kv(e),e.value===uh)throw e.error;return e.value};return t[jr]=e,t}var Mv=Symbol("UNSET"),Pv=Symbol("COMPUTING"),uh=Symbol("ERRORED"),xV=Ee(B({},ua),{value:Mv,dirty:!0,error:null,equal:xS,producerMustRecompute(n){return n.value===Mv||n.value===Pv},producerRecomputeValue(n){if(n.value===Pv)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Pv;let t=kl(n),r;try{r=n.computation()}catch(i){r=uh,n.error=i}finally{dh(n,t)}if(e!==Mv&&e!==uh&&r!==uh&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function RV(){throw new Error}var US=RV;function jS(){US()}function BS(n){US=n}var NV=null;function $S(n){let e=Object.create(qS);e.value=n;let t=()=>(kv(e),e.value);return t[jr]=e,t}function Fv(n,e){PS()||jS(),n.equal(n.value,e)||(n.value=e,MV(n))}function HS(n,e){PS()||jS(),Fv(n,e(n.value))}var qS=Ee(B({},ua),{equal:xS,value:void 0});function MV(n){n.version++,AV(),MS(n),NV?.()}function WS(n,e,t){let r=Object.create(PV);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(fh(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Ov)}let a=()=>{if(r.fn===null)return;if(DV())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!hh(r))return;r.hasRun=!0;let c=kl(r);try{r.cleanupFn(),r.cleanupFn=Ov,r.fn(i)}finally{dh(r,c)}};return r.ref={notify:()=>OS(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[jr]:r},r.ref}var Ov=()=>{},PV=Ee(B({},ua),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Ov});function ye(n){return typeof n=="function"}function da(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gh=da(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var bt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(o){e=o instanceof gh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{GS(o)}catch(s){e=e??[],s instanceof gh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new gh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)GS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qo(t,e)}remove(e){let{_finalizers:t}=this;t&&Qo(t,e),e instanceof n&&e._removeParent(this)}};bt.EMPTY=(()=>{let n=new bt;return n.closed=!0,n})();var Lv=bt.EMPTY;function vh(n){return n instanceof bt||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function GS(n){ye(n)?n():n.unsubscribe()}var vr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ha={setTimeout(n,e,...t){let{delegate:r}=ha;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=ha;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function yh(n){ha.setTimeout(()=>{let{onUnhandledError:e}=vr;if(e)e(n);else throw n})}function Fl(){}var zS=Vv("C",void 0,void 0);function KS(n){return Vv("E",void 0,n)}function YS(n){return Vv("N",n,void 0)}function Vv(n,e,t){return{kind:n,value:e,error:t}}var Zo=null;function fa(n){if(vr.useDeprecatedSynchronousErrorHandling){let e=!Zo;if(e&&(Zo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Zo;if(Zo=null,t)throw r}}else n()}function QS(n){vr.useDeprecatedSynchronousErrorHandling&&Zo&&(Zo.errorThrown=!0,Zo.error=n)}var Jo=class extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,vh(e)&&e.add(this)):this.destination=FV}static create(e,t,r){return new pa(e,t,r)}next(e){this.isStopped?jv(YS(e),this):this._next(e)}error(e){this.isStopped?jv(KS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?jv(zS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},OV=Function.prototype.bind;function Uv(n,e){return OV.call(n,e)}var Bv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){_h(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){_h(r)}else _h(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){_h(t)}}},pa=class extends Jo{constructor(e,t,r){super();let i;if(ye(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&vr.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Uv(e.next,o),error:e.error&&Uv(e.error,o),complete:e.complete&&Uv(e.complete,o)}):i=e}this.destination=new Bv(i)}};function _h(n){vr.useDeprecatedSynchronousErrorHandling?QS(n):yh(n)}function kV(n){throw n}function jv(n,e){let{onStoppedNotification:t}=vr;t&&ha.setTimeout(()=>t(n,e))}var FV={closed:!0,next:Fl,error:kV,complete:Fl};var ma=typeof Symbol=="function"&&Symbol.observable||"@@observable";function In(n){return n}function wh(...n){return $v(n)}function $v(n){return n.length===0?In:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ge=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=VV(t)?t:new pa(t,r,i);return fa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=ZS(r),new r((i,o)=>{let s=new pa({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[ma](){return this}pipe(...t){return $v(t)(this)}toPromise(t){return t=ZS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function ZS(n){var e;return(e=n??vr.Promise)!==null&&e!==void 0?e:Promise}function LV(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function VV(n){return n&&n instanceof Jo||LV(n)&&vh(n)}function Hv(n){return ye(n?.lift)}function Ce(n){return e=>{if(Hv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function _e(n,e,t,r,i){return new Ll(n,e,t,r,i)}var Ll=class extends Jo{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ga(){return Ce((n,e)=>{let t=null;n._refCount++;let r=_e(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var va=class extends ge{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Hv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;let t=this.getSubject();e.add(this.source.subscribe(_e(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return ga()(this)}};var JS=da(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var gt=(()=>{class n extends ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Ih(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new JS}next(t){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){fa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Lv:(this.currentObservers=null,o.push(t),new bt(()=>{this.currentObservers=null,Qo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ge;return t.source=this,t}}return n.create=(e,t)=>new Ih(e,t),n})(),Ih=class extends gt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Lv}};var nn=class extends gt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Vl={now(){return(Vl.delegate||Date).now()},delegate:void 0};var Ul=class extends gt{constructor(e=1/0,t=1/0,r=Vl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Eh=class extends bt{constructor(e,t){super()}schedule(e,t=0){return this}};var jl={setInterval(n,e,...t){let{delegate:r}=jl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=jl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ya=class extends Eh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return jl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&jl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var _a=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};_a.now=Vl.now;var wa=class extends _a{constructor(e,t=_a.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Ia=new wa(ya),qv=Ia;var Ch=class extends ya{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Th=class extends wa{};var Wv=new Th(Ch);var Wn=new ge(n=>n.complete());function bh(n){return n&&ye(n.schedule)}function XS(n){return n[n.length-1]}function Sh(n){return ye(XS(n))?n.pop():void 0}function to(n){return bh(XS(n))?n.pop():void 0}function Gv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function tD(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function eD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xo(n){return this instanceof Xo?(this.v=n,this):new Xo(n)}function nD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(w){return Promise.resolve(w).then(v,f)}}function a(v,w){r[v]&&(i[v]=function(P){return new Promise(function(N,L){o.push([v,P,N,L])>1||c(v,P)})},w&&(i[v]=w(i[v])))}function c(v,w){try{u(r[v](w))}catch(P){m(o[0][3],P)}}function u(v){v.value instanceof Xo?Promise.resolve(v.value.v).then(d,f):m(o[0][2],v)}function d(v){c("next",v)}function f(v){c("throw",v)}function m(v,w){v(w),o.shift(),o.length&&c(o[0][0],o[0][1])}}function rD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof eD=="function"?eD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Dh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ah(n){return ye(n?.then)}function xh(n){return ye(n[ma])}function Rh(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function Nh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function UV(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Mh=UV();function Ph(n){return ye(n?.[Mh])}function Oh(n){return nD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Xo(t.read());if(i)return yield Xo(void 0);yield yield Xo(r)}}finally{t.releaseLock()}})}function kh(n){return ye(n?.getReader)}function St(n){if(n instanceof ge)return n;if(n!=null){if(xh(n))return jV(n);if(Dh(n))return BV(n);if(Ah(n))return $V(n);if(Rh(n))return iD(n);if(Ph(n))return HV(n);if(kh(n))return qV(n)}throw Nh(n)}function jV(n){return new ge(e=>{let t=n[ma]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BV(n){return new ge(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function $V(n){return new ge(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,yh)})}function HV(n){return new ge(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function iD(n){return new ge(e=>{WV(n,e).catch(t=>e.error(t))})}function qV(n){return iD(Oh(n))}function WV(n,e){var t,r,i,o;return tD(this,void 0,void 0,function*(){try{for(t=rD(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Mn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function no(n,e=0){return Ce((t,r)=>{t.subscribe(_e(r,i=>Mn(r,n,()=>r.next(i),e),()=>Mn(r,n,()=>r.complete(),e),i=>Mn(r,n,()=>r.error(i),e)))})}function ro(n,e=0){return Ce((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function oD(n,e){return St(n).pipe(ro(e),no(e))}function sD(n,e){return St(n).pipe(ro(e),no(e))}function aD(n,e){return new ge(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function cD(n,e){return new ge(t=>{let r;return Mn(t,e,()=>{r=n[Mh](),Mn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ye(r?.return)&&r.return()})}function Fh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ge(t=>{Mn(t,e,()=>{let r=n[Symbol.asyncIterator]();Mn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function lD(n,e){return Fh(Oh(n),e)}function uD(n,e){if(n!=null){if(xh(n))return oD(n,e);if(Dh(n))return aD(n,e);if(Ah(n))return sD(n,e);if(Rh(n))return Fh(n,e);if(Ph(n))return cD(n,e);if(kh(n))return lD(n,e)}throw Nh(n)}function pt(n,e){return e?uD(n,e):St(n)}function oe(...n){let e=to(n);return pt(n,e)}function Ea(n,e){let t=ye(n)?n:()=>n,r=i=>i.error(t());return new ge(e?i=>e.schedule(r,0,i):r)}function zv(n){return!!n&&(n instanceof ge||ye(n.lift)&&ye(n.subscribe))}var fi=da(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function dD(n){return n instanceof Date&&!isNaN(n)}function J(n,e){return Ce((t,r)=>{let i=0;t.subscribe(_e(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:GV}=Array;function zV(n,e){return GV(e)?n(...e):n(e)}function Lh(n){return J(e=>zV(n,e))}var{isArray:KV}=Array,{getPrototypeOf:YV,prototype:QV,keys:ZV}=Object;function Vh(n){if(n.length===1){let e=n[0];if(KV(e))return{args:e,keys:null};if(JV(e)){let t=ZV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function JV(n){return n&&typeof n=="object"&&YV(n)===QV}function Uh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function qe(...n){let e=to(n),t=Sh(n),{args:r,keys:i}=Vh(n);if(r.length===0)return pt([],e);let o=new ge(XV(r,e,i?s=>Uh(i,s):In));return t?o.pipe(Lh(t)):o}function XV(n,e,t=In){return r=>{hD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)hD(e,()=>{let u=pt(n[c],e),d=!1;u.subscribe(_e(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function hD(n,e,t){n?Mn(t,n,e):e()}function fD(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},v=P=>u<r?w(P):c.push(P),w=P=>{o&&e.next(P),u++;let N=!1;St(t(P,d++)).subscribe(_e(e,L=>{i?.(L),o?v(L):e.next(L)},()=>{N=!0},void 0,()=>{if(N)try{for(u--;c.length&&u<r;){let L=c.shift();s?Mn(e,s,()=>w(L)):w(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(_e(e,v,()=>{f=!0,m()})),()=>{a?.()}}function Nt(n,e,t=1/0){return ye(e)?Nt((r,i)=>J((o,s)=>e(r,o,i,s))(St(n(r,i))),t):(typeof e=="number"&&(t=e),Ce((r,i)=>fD(r,i,n,t)))}function Kv(n=1/0){return Nt(In,n)}function pD(){return Kv(1)}function Ca(...n){return pD()(pt(n,to(n)))}function jh(n){return new ge(e=>{St(n()).subscribe(e)})}function Yv(...n){let e=Sh(n),{args:t,keys:r}=Vh(n),i=new ge(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;St(t[d]).subscribe(_e(o,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?Uh(r,a):a),o.complete())}))}});return e?i.pipe(Lh(e)):i}function Qv(n=0,e,t=qv){let r=-1;return e!=null&&(bh(e)?t=e:r=e),new ge(i=>{let o=dD(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Mt(n=0,e=Ia){return n<0&&(n=0),Qv(n,n,e)}function En(n,e){return Ce((t,r)=>{let i=0;t.subscribe(_e(r,o=>n.call(e,o,i++)&&r.next(o)))})}function io(n){return Ce((e,t)=>{let r=null,i=!1,o;r=e.subscribe(_e(t,void 0,void 0,s=>{o=St(n(s,io(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function mD(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(_e(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function es(n,e){return ye(e)?Nt(n,e,1):Nt(n,1)}function oo(n){return Ce((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pi(n){return n<=0?()=>Wn:Ce((e,t)=>{let r=0;e.subscribe(_e(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Zv(n){return J(()=>n)}function Bh(n,e=In){return n=n??e2,Ce((t,r)=>{let i,o=!0;t.subscribe(_e(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function e2(n,e){return n===e}function $h(n=t2){return Ce((e,t)=>{let r=!1;e.subscribe(_e(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function t2(){return new fi}function Bl(n){return Ce((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Br(n,e){let t=arguments.length>=2;return r=>r.pipe(n?En((i,o)=>n(i,o,r)):In,pi(1),t?oo(e):$h(()=>new fi))}function Jv(n,e,t,r){return Ce((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(o)},u=w=>c(P=>P.error(w)),d=0,f=!1,m=new Ll(o,w=>{try{let P=n(w),N=a.get(P);if(!N){a.set(P,N=r?r():new gt);let L=v(P,N);if(o.next(L),t){let W=_e(N,()=>{N.complete(),W?.unsubscribe()},void 0,void 0,()=>a.delete(P));m.add(St(t(L)).subscribe(W))}}N.next(s?s(w):w)}catch(P){u(P)}},()=>c(w=>w.complete()),u,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(m);function v(w,P){let N=new ge(L=>{d++;let W=P.subscribe(L);return()=>{W.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return N.key=w,N}})}function Ta(n){return n<=0?()=>Wn:Ce((e,t)=>{let r=[];e.subscribe(_e(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Xv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?En((i,o)=>n(i,o,r)):In,Ta(1),t?oo(e):$h(()=>new fi))}function Hh(){return Ce((n,e)=>{let t,r=!1;n.subscribe(_e(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function qh(n,e){return Ce(mD(n,e,arguments.length>=2,!0))}function ba(...n){let e=to(n);return Ce((t,r)=>{(e?Ca(n,t,e):Ca(n,t)).subscribe(r)})}function Pn(n,e){return Ce((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(_e(r,c=>{i?.unsubscribe();let u=0,d=o++;St(n(c,d)).subscribe(i=_e(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Zt(n){return Ce((e,t)=>{St(n).subscribe(_e(t,()=>t.complete(),Fl)),!t.closed&&e.subscribe(t)})}function Yt(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ce((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(_e(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):In}var n2="https://g.co/ng/security#xss",X=class extends Error{constructor(e,t){super(i_(e,t)),this.code=e}};function i_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Xl(n){return{toString:n}.toString()}var Wh="__parameters__";function r2(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function eA(n,e,t){return Xl(()=>{let r=r2(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(Wh)?c[Wh]:Object.defineProperty(c,Wh,{value:[]})[Wh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var $l=globalThis;function tt(n){for(let e in n)if(n[e]===tt)return e;throw Error("Could not find renamed property on target object.")}function i2(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function kn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(kn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function gD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var o2=tt({__forward_ref__:tt});function ir(n){return n.__forward_ref__=ir,n.toString=function(){return kn(this())},n}function Cn(n){return tA(n)?n():n}function tA(n){return typeof n=="function"&&n.hasOwnProperty(o2)&&n.__forward_ref__===ir}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function mo(n){return{providers:n.providers||[],imports:n.imports||[]}}function Df(n){return vD(n,rA)||vD(n,iA)}function nA(n){return Df(n)!==null}function vD(n,e){return n.hasOwnProperty(e)?n[e]:null}function s2(n){let e=n&&(n[rA]||n[iA]);return e||null}function yD(n){return n&&(n.hasOwnProperty(_D)||n.hasOwnProperty(a2))?n[_D]:null}var rA=tt({\u0275prov:tt}),_D=tt({\u0275inj:tt}),iA=tt({ngInjectableDef:tt}),a2=tt({ngInjectorDef:tt}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function oA(n){return n&&!!n.\u0275providers}var c2=tt({\u0275cmp:tt}),l2=tt({\u0275dir:tt}),u2=tt({\u0275pipe:tt}),d2=tt({\u0275mod:tt}),tf=tt({\u0275fac:tt}),Wl=tt({__NG_ELEMENT_ID__:tt}),wD=tt({__NG_ENV_ID__:tt});function o_(n){return typeof n=="string"?n:n==null?"":String(n)}function h2(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():o_(n)}function f2(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new X(-200,n)}function s_(n,e){throw new X(-201,!1)}var be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(be||{}),fy;function sA(){return fy}function On(n){let e=fy;return fy=n,e}function aA(n,e,t){let r=Df(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&be.Optional)return null;if(e!==void 0)return e;s_(n,"Injector")}var p2={},Gl=p2,py="__NG_DI_FLAG__",nf="ngTempTokenPath",m2="ngTokenPath",g2=/\n/gm,v2="\u0275",ID="__source",xa;function y2(){return xa}function so(n){let e=xa;return xa=n,e}function _2(n,e=be.Default){if(xa===void 0)throw new X(-203,!1);return xa===null?aA(n,void 0,e):xa.get(n,e&be.Optional?null:void 0,e)}function ce(n,e=be.Default){return(sA()||_2)(Cn(n),e)}function R(n,e=be.Default){return ce(n,Af(e))}function Af(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function my(n){let e=[];for(let t=0;t<n.length;t++){let r=Cn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new X(900,!1);let i,o=be.Default;for(let s=0;s<r.length;s++){let a=r[s],c=w2(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ce(i,o))}else e.push(ce(r))}return e}function cA(n,e){return n[py]=e,n.prototype[py]=e,n}function w2(n){return n[py]}function I2(n,e,t,r){let i=n[nf];throw e[ID]&&i.unshift(e[ID]),n.message=E2(`
`+n.message,i,t,r),n[m2]=i,n[nf]=null,n}function E2(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==v2?n.slice(2):n;let i=kn(e);if(Array.isArray(e))i=e.map(kn).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):kn(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(g2,`
  `)}`}var fe=cA(eA("Optional"),8);var lA=cA(eA("SkipSelf"),4);function rs(n,e){let t=n.hasOwnProperty(tf);return t?n[tf]:null}function a_(n,e){n.forEach(t=>Array.isArray(t)?a_(t,e):e(t))}function uA(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function rf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function C2(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function T2(n,e,t){let r=eu(n,e);return r>=0?n[r|1]=t:(r=~r,C2(n,r,e,t)),r}function ey(n,e){let t=eu(n,e);if(t>=0)return n[t|1]}function eu(n,e){return b2(n,e,1)}function b2(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Na={},er=[],Ma=new H(""),dA=new H("",-1),hA=new H(""),of=class{get(e,t=Gl){if(t===Gl){let r=new Error(`NullInjectorError: No provider for ${kn(e)}!`);throw r.name="NullInjectorError",r}return t}},fA=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(fA||{}),qr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(qr||{}),lo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(lo||{});function S2(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function gy(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];A2(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function D2(n){return n===3||n===4||n===6}function A2(n){return n.charCodeAt(0)===64}function zl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?ED(n,t,i,null,e[++r]):ED(n,t,i,null,null))}}return n}function ED(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var pA="ng-template";function x2(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&S2(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(c_(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function c_(n){return n.type===4&&n.value!==pA}function R2(n,e,t){let r=n.type===4&&!t?pA:n.value;return e===r}function N2(n,e,t){let r=4,i=n.attrs,o=i!==null?O2(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!yr(r)&&!yr(c))return!1;if(s&&yr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!R2(n,c,t)||c===""&&e.length===1){if(yr(r))return!1;s=!0}}else if(r&8){if(i===null||!x2(n,i,c,t)){if(yr(r))return!1;s=!0}}else{let u=e[++a],d=M2(c,i,c_(n),t);if(d===-1){if(yr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(yr(r))return!1;s=!0}}}}return yr(r)||s}function yr(n){return(n&1)===0}function M2(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return k2(e,n)}function P2(n,e,t=!1){for(let r=0;r<e.length;r++)if(N2(n,e[r],t))return!0;return!1}function O2(n){for(let e=0;e<n.length;e++){let t=n[e];if(D2(t))return e}return n.length}function k2(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function CD(n,e){return n?":not("+e.trim()+")":e}function F2(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!yr(s)&&(e+=CD(o,i),i=""),r=s,o=o||!yr(r);t++}return i!==""&&(e+=CD(o,i)),e}function L2(n){return n.map(F2).join(",")}function V2(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!yr(i))break;i=o}r++}return{attrs:e,classes:t}}function Fe(n){return Xl(()=>{let e=wA(n),t=Ee(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===fA.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qr.Emulated,styles:n.styles||er,_:null,schemas:n.schemas||null,tView:null,id:""});IA(t);let r=n.dependencies;return t.directiveDefs=bD(r,!1),t.pipeDefs=bD(r,!0),t.id=B2(t),t})}function U2(n){return is(n)||gA(n)}function j2(n){return n!==null}function go(n){return Xl(()=>({type:n.type,bootstrap:n.bootstrap||er,declarations:n.declarations||er,imports:n.imports||er,exports:n.exports||er,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function TD(n,e){if(n==null)return Na;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=lo.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==lo.None?[r,a]:r,e[o]=s):t[o]=r}return t}function ut(n){return Xl(()=>{let e=wA(n);return IA(e),e})}function mA(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function is(n){return n[c2]||null}function gA(n){return n[l2]||null}function vA(n){return n[u2]||null}function yA(n){let e=is(n)||gA(n)||vA(n);return e!==null?e.standalone:!1}function _A(n,e){let t=n[d2]||null;if(!t&&e===!0)throw new Error(`Type ${kn(n)} does not have '\u0275mod' property.`);return t}function wA(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Na,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||er,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:TD(n.inputs,e),outputs:TD(n.outputs),debugInfo:null}}function IA(n){n.features?.forEach(e=>e(n))}function bD(n,e){if(!n)return null;let t=e?vA:U2;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(j2)}function B2(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ot(n){return{\u0275providers:n}}function $2(...n){return{\u0275providers:EA(!0,n),\u0275fromNgModule:!0}}function EA(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return a_(e,s=>{let a=s;vy(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&CA(i,o),t}function CA(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];l_(i,o=>{e(o,r)})}}function vy(n,e,t,r){if(n=Cn(n),!n)return!1;let i=null,o=yD(n),s=!o&&is(n);if(!o&&!s){let c=n.ngModule;if(o=yD(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)vy(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{a_(o.imports,d=>{vy(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&CA(u,e)}if(!a){let u=rs(i)||(()=>new i);e({provide:i,useFactory:u,deps:er},i),e({provide:hA,useValue:i,multi:!0},i),e({provide:Ma,useValue:()=>ce(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;l_(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function l_(n,e){for(let t of n)oA(t)&&(t=t.\u0275providers),Array.isArray(t)?l_(t,e):e(t)}var H2=tt({provide:String,useValue:tt});function TA(n){return n!==null&&typeof n=="object"&&H2 in n}function q2(n){return!!(n&&n.useExisting)}function W2(n){return!!(n&&n.useFactory)}function Pa(n){return typeof n=="function"}function G2(n){return!!n.useClass}var xf=new H(""),Yh={},z2={},ty;function u_(){return ty===void 0&&(ty=new of),ty}var nr=class{},Kl=class extends nr{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_y(e,s=>this.processProvider(s)),this.records.set(dA,Sa(void 0,this)),i.has("environment")&&this.records.set(nr,Sa(void 0,this));let o=this.records.get(xf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(hA,er,be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=so(this),r=On(void 0),i;try{return e()}finally{so(t),On(r)}}get(e,t=Gl,r=be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(wD))return e[wD](this);r=Af(r);let i,o=so(this),s=On(void 0);try{if(!(r&be.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=J2(e)&&Df(e);u&&this.injectableDefInScope(u)?c=Sa(yy(e),Yh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&be.Self?u_():this.parent;return t=r&be.Optional&&t===Gl?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[nf]=a[nf]||[]).unshift(kn(e)),o)throw a;return I2(a,e,"R3InjectorError",this.source)}else throw a}finally{On(s),so(o)}}resolveInjectorInitializers(){let e=Oe(null),t=so(this),r=On(void 0),i;try{let o=this.get(Ma,er,be.Self);for(let s of o)s()}finally{so(t),On(r),Oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(kn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){e=Cn(e);let t=Pa(e)?e:Cn(e&&e.provide),r=Y2(e);if(!Pa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Sa(void 0,Yh,!0),i.factory=()=>my(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Oe(null);try{return t.value===Yh&&(t.value=z2,t.value=t.factory()),typeof t.value=="object"&&t.value&&Z2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Cn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function yy(n){let e=Df(n),t=e!==null?e.factory:rs(n);if(t!==null)return t;if(n instanceof H)throw new X(204,!1);if(n instanceof Function)return K2(n);throw new X(204,!1)}function K2(n){if(n.length>0)throw new X(204,!1);let t=s2(n);return t!==null?()=>t.factory(n):()=>new n}function Y2(n){if(TA(n))return Sa(void 0,n.useValue);{let e=bA(n);return Sa(e,Yh)}}function bA(n,e,t){let r;if(Pa(n)){let i=Cn(n);return rs(i)||yy(i)}else if(TA(n))r=()=>Cn(n.useValue);else if(W2(n))r=()=>n.useFactory(...my(n.deps||[]));else if(q2(n))r=()=>ce(Cn(n.useExisting));else{let i=Cn(n&&(n.useClass||n.provide));if(Q2(n))r=()=>new i(...my(n.deps));else return rs(i)||yy(i)}return r}function Sa(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Q2(n){return!!n.deps}function Z2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function J2(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function _y(n,e){for(let t of n)Array.isArray(t)?_y(t,e):t&&oA(t)?_y(t.\u0275providers,e):e(t)}function _i(n,e){n instanceof Kl&&n.assertNotDestroyed();let t,r=so(n),i=On(void 0);try{return e()}finally{so(r),On(i)}}function SA(){return sA()!==void 0||y2()!=null}function Rf(n){if(!SA())throw new X(-203,!1)}function X2(n){return typeof n=="function"}var wi=0,Se=1,he=2,Tn=3,_r=4,wr=5,sf=6,af=7,rr=8,Oa=9,mi=10,jt=11,Yl=12,SD=13,$a=14,Wr=15,ka=16,Da=17,Fa=18,Nf=19,DA=20,ao=21,Qh=22,tr=23,zn=25,AA=1;var os=7,cf=8,lf=9,Gn=10,uf=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(uf||{});function co(n){return Array.isArray(n)&&typeof n[AA]=="object"}function Ii(n){return Array.isArray(n)&&n[AA]===!0}function d_(n){return(n.flags&4)!==0}function Mf(n){return n.componentOffset>-1}function Pf(n){return(n.flags&1)===1}function uo(n){return!!n.template}function wy(n){return(n[he]&512)!==0}var Iy=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function xA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Ei(){return RA}function RA(n){return n.type.prototype.ngOnChanges&&(n.setInput=tU),eU}Ei.ngInherit=!0;function eU(){let n=MA(this),e=n?.current;if(e){let t=n.previous;if(t===Na)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function tU(n,e,t,r,i){let o=this.declaredInputs[r],s=MA(n)||nU(n,{previous:Na,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Iy(u&&u.currentValue,t,c===Na),xA(n,e,i,t)}var NA="__ngSimpleChanges__";function MA(n){return n[NA]||null}function nU(n,e){return n[NA]=e}var DD=null;var $r=function(n,e,t){DD?.(n,e,t)},rU="svg",iU="math";function Gr(n){for(;Array.isArray(n);)n=n[wi];return n}function PA(n,e){return Gr(e[n])}function or(n,e){return Gr(e[n.index])}function h_(n,e){return n.data[e]}function oU(n,e){return n[e]}function vo(n,e){let t=e[n];return co(t)?t:t[wi]}function f_(n){return(n[he]&128)===128}function sU(n){return Ii(n[Tn])}function La(n,e){return e==null?null:n[e]}function OA(n){n[Da]=0}function kA(n){n[he]&1024||(n[he]|=1024,f_(n)&&kf(n))}function aU(n,e){for(;n>0;)e=e[$a],n--;return e}function Of(n){return!!(n[he]&9216||n[tr]?.dirty)}function Ey(n){n[mi].changeDetectionScheduler?.notify(8),n[he]&64&&(n[he]|=1024),Of(n)&&kf(n)}function kf(n){n[mi].changeDetectionScheduler?.notify(0);let e=ss(n);for(;e!==null&&!(e[he]&8192||(e[he]|=8192,!f_(e)));)e=ss(e)}function FA(n,e){if((n[he]&256)===256)throw new X(911,!1);n[ao]===null&&(n[ao]=[]),n[ao].push(e)}function cU(n,e){if(n[ao]===null)return;let t=n[ao].indexOf(e);t!==-1&&n[ao].splice(t,1)}function ss(n){let e=n[Tn];return Ii(e)?e[Tn]:e}var xe={lFrame:WA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var LA=!1;function lU(){return xe.lFrame.elementDepthCount}function uU(){xe.lFrame.elementDepthCount++}function dU(){xe.lFrame.elementDepthCount--}function VA(){return xe.bindingsEnabled}function hU(){return xe.skipHydrationRootTNode!==null}function fU(n){return xe.skipHydrationRootTNode===n}function pU(){xe.skipHydrationRootTNode=null}function Ke(){return xe.lFrame.lView}function dn(){return xe.lFrame.tView}function vt(n){return xe.lFrame.contextLView=n,n[rr]}function yt(n){return xe.lFrame.contextLView=null,n}function bn(){let n=UA();for(;n!==null&&n.type===64;)n=n.parent;return n}function UA(){return xe.lFrame.currentTNode}function mU(){let n=xe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function ds(n,e){let t=xe.lFrame;t.currentTNode=n,t.isParent=e}function p_(){return xe.lFrame.isParent}function jA(){xe.lFrame.isParent=!1}function BA(){return LA}function AD(n){LA=n}function m_(){let n=xe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function gU(n){return xe.lFrame.bindingIndex=n}function tu(){return xe.lFrame.bindingIndex++}function vU(n){let e=xe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function yU(){return xe.lFrame.inI18n}function _U(n,e){let t=xe.lFrame;t.bindingIndex=t.bindingRootIndex=n,Cy(e)}function wU(){return xe.lFrame.currentDirectiveIndex}function Cy(n){xe.lFrame.currentDirectiveIndex=n}function IU(n){let e=xe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function $A(n){xe.lFrame.currentQueryIndex=n}function EU(n){let e=n[Se];return e.type===2?e.declTNode:e.type===1?n[wr]:null}function HA(n,e,t){if(t&be.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&be.Host);)if(i=EU(o),i===null||(o=o[$a],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=xe.lFrame=qA();return r.currentTNode=e,r.lView=n,!0}function g_(n){let e=qA(),t=n[Se];xe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function qA(){let n=xe.lFrame,e=n===null?null:n.child;return e===null?WA(n):e}function WA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function GA(){let n=xe.lFrame;return xe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var zA=GA;function v_(){let n=GA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function CU(n){return(xe.lFrame.contextLView=aU(n,xe.lFrame.contextLView))[rr]}function Ha(){return xe.lFrame.selectedIndex}function as(n){xe.lFrame.selectedIndex=n}function y_(){let n=xe.lFrame;return h_(n.tView,n.selectedIndex)}function TU(){return xe.lFrame.currentNamespace}var KA=!0;function Ff(){return KA}function Lf(n){KA=n}function bU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=RA(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Vf(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Zh(n,e,t){YA(n,e,3,t)}function Jh(n,e,t,r){(n[he]&3)===t&&YA(n,e,t,r)}function ny(n,e){let t=n[he];(t&3)===e&&(t&=16383,t+=1,n[he]=t)}function YA(n,e,t,r){let i=r!==void 0?n[Da]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Da]+=65536),(a<o||o==-1)&&(SU(n,t,e,c),n[Da]=(n[Da]&4294901760)+c+2),c++}function xD(n,e){$r(4,n,e);let t=Oe(null);try{e.call(n)}finally{Oe(t),$r(5,n,e)}}function SU(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[he]>>14<n[Da]>>16&&(n[he]&3)===e&&(n[he]+=16384,xD(a,o)):xD(a,o)}var Ra=-1,cs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function DU(n){return n instanceof cs}function AU(n){return(n.flags&8)!==0}function xU(n){return(n.flags&16)!==0}var ry={},Ty=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Af(r);let i=this.injector.get(e,ry,r);return i!==ry||t===ry?i:this.parentInjector.get(e,t,r)}};function QA(n){return n!==Ra}function df(n){return n&32767}function RU(n){return n>>16}function hf(n,e){let t=RU(n),r=e;for(;t>0;)r=r[$a],t--;return r}var by=!0;function ff(n){let e=by;return by=n,e}var NU=256,ZA=NU-1,JA=5,MU=0,Hr={};function PU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Wl)&&(r=t[Wl]),r==null&&(r=t[Wl]=MU++);let i=r&ZA,o=1<<i;e.data[n+(i>>JA)]|=o}function pf(n,e){let t=XA(n,e);if(t!==-1)return t;let r=e[Se];r.firstCreatePass&&(n.injectorIndex=e.length,iy(r.data,n),iy(e,null),iy(r.blueprint,null));let i=__(n,e),o=n.injectorIndex;if(QA(i)){let s=df(i),a=hf(i,e),c=a[Se].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function iy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function XA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function __(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=ix(i),r===null)return Ra;if(t++,i=i[$a],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ra}function Sy(n,e,t){PU(n,e,t)}function ex(n,e,t){if(t&be.Optional||n!==void 0)return n;s_(e,"NodeInjector")}function tx(n,e,t,r){if(t&be.Optional&&r===void 0&&(r=null),!(t&(be.Self|be.Host))){let i=n[Oa],o=On(void 0);try{return i?i.get(e,r,t&be.Optional):aA(e,r,t&be.Optional)}finally{On(o)}}return ex(r,e,t)}function nx(n,e,t,r=be.Default,i){if(n!==null){if(e[he]&2048&&!(r&be.Self)){let s=VU(n,e,t,r,Hr);if(s!==Hr)return s}let o=rx(n,e,t,r,Hr);if(o!==Hr)return o}return tx(e,t,r,i)}function rx(n,e,t,r,i){let o=FU(t);if(typeof o=="function"){if(!HA(e,n,r))return r&be.Host?ex(i,t,r):tx(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&be.Optional))s_(t);else return s}finally{zA()}}else if(typeof o=="number"){let s=null,a=XA(n,e),c=Ra,u=r&be.Host?e[Wr][wr]:null;for((a===-1||r&be.SkipSelf)&&(c=a===-1?__(n,e):e[a+8],c===Ra||!ND(r,!1)?a=-1:(s=e[Se],a=df(c),e=hf(c,e)));a!==-1;){let d=e[Se];if(RD(o,a,d.data)){let f=OU(a,e,t,s,r,u);if(f!==Hr)return f}c=e[a+8],c!==Ra&&ND(r,e[Se].data[a+8]===u)&&RD(o,a,e)?(s=d,a=df(c),e=hf(c,e)):a=-1}}return i}function OU(n,e,t,r,i,o){let s=e[Se],a=s.data[n+8],c=r==null?Mf(a)&&by:r!=s&&(a.type&3)!==0,u=i&be.Host&&o===a,d=kU(a,s,t,c,u);return d!==null?Va(e,s,d,a):Hr}function kU(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,m=i?a+d:u;for(let v=f;v<m;v++){let w=s[v];if(v<c&&t===w||v>=c&&w.type===t)return v}if(i){let v=s[c];if(v&&uo(v)&&v.type===t)return c}return null}function Va(n,e,t,r){let i=n[t],o=e.data;if(DU(i)){let s=i;s.resolving&&f2(h2(o[t]));let a=ff(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?On(s.injectImpl):null,d=HA(n,r,be.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&bU(t,o[t],e)}finally{u!==null&&On(u),ff(a),s.resolving=!1,zA()}}return i}function FU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Wl)?n[Wl]:void 0;return typeof e=="number"?e>=0?e&ZA:LU:e}function RD(n,e,t){let r=1<<n;return!!(t[e+(n>>JA)]&r)}function ND(n,e){return!(n&be.Self)&&!(n&be.Host&&e)}var ns=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return nx(this._tNode,this._lView,e,Af(r),t)}};function LU(){return new ns(bn(),Ke())}function Ir(n){return Xl(()=>{let e=n.prototype.constructor,t=e[tf]||Dy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[tf]||Dy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Dy(n){return tA(n)?()=>{let e=Dy(Cn(n));return e&&e()}:rs(n)}function VU(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[he]&2048&&!(s[he]&512);){let a=rx(o,s,t,r|be.Self,Hr);if(a!==Hr)return a;let c=o.parent;if(!c){let u=s[DA];if(u){let d=u.get(t,Hr,r);if(d!==Hr)return d}c=ix(s),s=s[$a]}o=c}return i}function ix(n){let e=n[Se],t=e.type;return t===2?e.declTNode:t===1?n[wr]:null}function MD(n,e=null,t=null,r){let i=ox(n,e,t,r);return i.resolveInjectorInitializers(),i}function ox(n,e=null,t=null,r,i=new Set){let o=[t||er,$2(n)];return r=r||(typeof n=="object"?void 0:kn(n)),new Kl(o,e||u_(),r||null,i)}var Ne=class n{static{this.THROW_IF_NOT_FOUND=Gl}static{this.NULL=new of}static create(e,t){if(Array.isArray(e))return MD({name:""},t,e,"");{let r=e.name??"";return MD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=j({token:n,providedIn:"any",factory:()=>ce(dA)})}static{this.__NG_ELEMENT_ID__=-1}};var UU=new H("");UU.__NG_ELEMENT_ID__=n=>{let e=bn();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&be.Optional)return null;throw new X(204,!1)};var jU="ngOriginalError";function oy(n){return n[jU]}var sx=!0,yo=(()=>{class n{static{this.__NG_ELEMENT_ID__=BU}static{this.__NG_ENV_ID__=t=>t}}return n})(),Ay=class extends yo{constructor(e){super(),this._lView=e}onDestroy(e){return FA(this._lView,e),()=>cU(this._lView,e)}};function BU(){return new Ay(Ke())}var hs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new nn(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}}return n})();var xy=class extends gt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,SA()&&(this.destroyRef=R(yo,{optional:!0})??void 0,this.pendingTasks=R(hs,{optional:!0})??void 0)}emit(e){let t=Oe(null);try{super.next(e)}finally{Oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof bt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ut=xy;function mf(...n){}function ax(n){let e,t;function r(){n=mf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function PD(n){return queueMicrotask(()=>n()),()=>{n=mf}}var w_="isAngularZone",gf=w_+"_ID",$U=0,ae=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ut(!1),this.onMicrotaskEmpty=new Ut(!1),this.onStable=new Ut(!1),this.onError=new Ut(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=sx}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,WU(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(w_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HU,mf,mf);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},HU={};function I_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function qU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){ax(()=>{n.callbackScheduled=!1,Ry(n),n.isCheckStableRunning=!0,I_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ry(n)}function WU(n){let e=()=>{qU(n)},t=$U++;n._inner=n._inner.fork({name:"angular",properties:{[w_]:!0,[gf]:t,[gf+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(GU(c))return r.invokeTask(o,s,a,c);try{return OD(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),kD(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return OD(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!zU(c)&&e(),kD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ry(n),I_(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ry(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function OD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function kD(n){n._nesting--,I_(n)}var Ny=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ut,this.onMicrotaskEmpty=new Ut,this.onStable=new Ut,this.onError=new Ut}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function GU(n){return cx(n,"__ignore_ng_zone__")}function zU(n){return cx(n,"__scheduler_tick__")}function cx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&oy(e);for(;t&&oy(t);)t=oy(t);return t||null}},KU=new H("",{providedIn:"root",factory:()=>{let n=R(ae),e=R(zr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function YU(){return Uf(bn(),Ke())}function Uf(n,e){return new sr(or(n,e))}var sr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=YU}}return n})();function lx(n){return(n.flags&128)===128}var ux=new Map,QU=0;function ZU(){return QU++}function JU(n){ux.set(n[Nf],n)}function My(n){ux.delete(n[Nf])}var FD="__ngContext__";function ho(n,e){co(e)?(n[FD]=e[Nf],JU(e)):n[FD]=e}function dx(n){return fx(n[Yl])}function hx(n){return fx(n[_r])}function fx(n){for(;n!==null&&!Ii(n);)n=n[_r];return n}var Py;function px(n){Py=n}function XU(){if(Py!==void 0)return Py;if(typeof document<"u")return document;throw new X(210,!1)}var E_=new H("",{providedIn:"root",factory:()=>ej}),ej="ng",C_=new H(""),Er=new H("",{providedIn:"platform",factory:()=>"unknown"});var T_=new H("",{providedIn:"root",factory:()=>XU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tj="h",nj="b";var rj=()=>null;function b_(n,e,t=!1){return rj(n,e,t)}var mx=!1,ij=new H("",{providedIn:"root",factory:()=>mx});var Oy=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${n2})`}};function S_(n){return n instanceof Oy?n.changingThisBreaksApplicationSecurity:n}var oj=/^>|^->|<!--|-->|--!>|<!-$/g,sj=/(<|>)/g,aj="\u200B$1\u200B";function cj(n){return n.replace(oj,e=>e.replace(sj,aj))}function gx(n){return n instanceof Function?n():n}var gi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(gi||{}),lj;function D_(n,e){return lj(n,e)}function Aa(n,e,t,r,i){if(r!=null){let o,s=!1;Ii(r)?o=r:co(r)&&(s=!0,r=r[wi]);let a=Gr(r);n===0&&t!==null?i==null?wx(e,t,a):yf(e,t,a,i||null,!0):n===1&&t!==null?yf(e,t,a,i||null,!0):n===2?bj(e,a,s):n===3&&e.destroyNode(a),o!=null&&Dj(e,n,o,t,i)}}function uj(n,e){return n.createText(e)}function dj(n,e,t){n.setValue(e,t)}function hj(n,e){return n.createComment(cj(e))}function vx(n,e,t){return n.createElement(e,t)}function fj(n,e){yx(n,e),e[wi]=null,e[wr]=null}function pj(n,e,t,r,i,o){r[wi]=i,r[wr]=e,Bf(n,r,t,1,i,o)}function yx(n,e){e[mi].changeDetectionScheduler?.notify(9),Bf(n,e,e[jt],2,null,null)}function mj(n){let e=n[Yl];if(!e)return sy(n[Se],n);for(;e;){let t=null;if(co(e))t=e[Yl];else{let r=e[Gn];r&&(t=r)}if(!t){for(;e&&!e[_r]&&e!==n;)co(e)&&sy(e[Se],e),e=e[Tn];e===null&&(e=n),co(e)&&sy(e[Se],e),t=e&&e[_r]}e=t}}function gj(n,e,t,r){let i=Gn+r,o=t.length;r>0&&(t[i-1][_r]=e),r<o-Gn?(e[_r]=t[i],uA(t,Gn+r,e)):(t.push(e),e[_r]=null),e[Tn]=t;let s=e[ka];s!==null&&t!==s&&_x(s,e);let a=e[Fa];a!==null&&a.insertView(n),Ey(e),e[he]|=128}function _x(n,e){let t=n[lf],r=e[Tn];if(co(r))n[he]|=uf.HasTransplantedViews;else{let i=r[Tn][Wr];e[Wr]!==i&&(n[he]|=uf.HasTransplantedViews)}t===null?n[lf]=[e]:t.push(e)}function A_(n,e){let t=n[lf],r=t.indexOf(e);t.splice(r,1)}function vf(n,e){if(n.length<=Gn)return;let t=Gn+e,r=n[t];if(r){let i=r[ka];i!==null&&i!==n&&A_(i,r),e>0&&(n[t-1][_r]=r[_r]);let o=rf(n,Gn+e);fj(r[Se],r);let s=o[Fa];s!==null&&s.detachView(o[Se]),r[Tn]=null,r[_r]=null,r[he]&=-129}return r}function x_(n,e){if(!(e[he]&256)){let t=e[jt];t.destroyNode&&Bf(n,e,t,3,null,null),mj(e)}}function sy(n,e){if(e[he]&256)return;let t=Oe(null);try{e[he]&=-129,e[he]|=256,e[tr]&&fh(e[tr]),yj(n,e),vj(n,e),e[Se].type===1&&e[jt].destroy();let r=e[ka];if(r!==null&&Ii(e[Tn])){r!==e[Tn]&&A_(r,e);let i=e[Fa];i!==null&&i.detachView(n)}My(e)}finally{Oe(t)}}function vj(n,e){let t=n.cleanup,r=e[af];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[af]=null);let i=e[ao];if(i!==null){e[ao]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function yj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof cs)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];$r(4,a,c);try{c.call(a)}finally{$r(5,a,c)}}else{$r(4,i,o);try{o.call(i)}finally{$r(5,i,o)}}}}}function _j(n,e,t){return wj(n,e.parent,t)}function wj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[wi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===qr.None||o===qr.Emulated)return null}return or(r,t)}}function yf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function wx(n,e,t){n.appendChild(e,t)}function LD(n,e,t,r,i){r!==null?yf(n,e,t,r,i):wx(n,e,t)}function Ix(n,e){return n.parentNode(e)}function Ij(n,e){return n.nextSibling(e)}function Ej(n,e,t){return Tj(n,e,t)}function Cj(n,e,t){return n.type&40?or(n,t):null}var Tj=Cj,VD;function jf(n,e,t,r){let i=_j(n,r,e),o=e[jt],s=r.parent||e[wr],a=Ej(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)LD(o,i,t[c],a,!1);else LD(o,i,t,a,!1);VD!==void 0&&VD(o,r,e,t,i)}function Hl(n,e){if(e!==null){let t=e.type;if(t&3)return or(e,n);if(t&4)return ky(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Hl(n,r);{let i=n[e.index];return Ii(i)?ky(-1,i):Gr(i)}}else{if(t&128)return Hl(n,e.next);if(t&32)return D_(e,n)()||Gr(n[e.index]);{let r=Ex(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ss(n[Wr]);return Hl(i,r)}else return Hl(n,e.next)}}}return null}function Ex(n,e){if(e!==null){let r=n[Wr][wr],i=e.projection;return r.projection[i]}return null}function ky(n,e){let t=Gn+n+1;if(t<e.length){let r=e[t],i=r[Se].firstChild;if(i!==null)return Hl(r,i)}return e[os]}function bj(n,e,t){n.removeChild(null,e,t)}function R_(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&ho(Gr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)R_(n,e,t.child,r,i,o,!1),Aa(e,n,i,a,o);else if(c&32){let u=D_(t,r),d;for(;d=u();)Aa(e,n,i,d,o);Aa(e,n,i,a,o)}else c&16?Sj(n,e,r,t,i,o):Aa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Bf(n,e,t,r,i,o){R_(t,r,n.firstChild,e,i,o,!1)}function Sj(n,e,t,r,i,o){let s=t[Wr],c=s[wr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];Aa(e,n,i,d,o)}else{let u=c,d=s[Tn];lx(r)&&(u.flags|=128),R_(n,e,u,d,i,o,!0)}}function Dj(n,e,t,r,i){let o=t[os],s=Gr(t);o!==s&&Aa(e,n,r,o,i);for(let a=Gn;a<t.length;a++){let c=t[a];Bf(c[Se],c,n,e,r,o)}}function Aj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:gi.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=gi.Important),n.setStyle(t,r,i,o))}}function xj(n,e,t){n.setAttribute(e,"style",t)}function Cx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Tx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&gy(n,e,r),i!==null&&Cx(n,e,i),o!==null&&xj(n,e,o)}var _o={};function O(n=1){bx(dn(),Ke(),Ha()+n,!1)}function bx(n,e,t,r){if(!r)if((e[he]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Zh(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Jh(e,o,0,t)}as(t)}function Re(n,e=be.Default){let t=Ke();if(t===null)return ce(n,e);let r=bn();return nx(r,t,Cn(n),e)}function Sx(n,e,t,r,i,o){let s=Oe(null);try{let a=null;i&lo.SignalBased&&(a=e[r][jr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&lo.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):xA(e,a,r,o)}finally{Oe(s)}}function Rj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)as(~i);else{let o=i,s=t[++r],a=t[++r];_U(s,o);let c=e[o];a(2,c)}}}finally{as(-1)}}function $f(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[wi]=i,f[he]=r|4|128|8|64,(u!==null||n&&n[he]&2048)&&(f[he]|=2048),OA(f),f[Tn]=f[$a]=n,f[rr]=t,f[mi]=s||n&&n[mi],f[jt]=a||n&&n[jt],f[Oa]=c||n&&n[Oa]||null,f[wr]=o,f[Nf]=ZU(),f[sf]=d,f[DA]=u,f[Wr]=e.type==2?n[Wr]:f,f}function nu(n,e,t,r,i){let o=n.data[e];if(o===null)o=Nj(n,e,t,r,i),yU()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=mU();o.injectorIndex=s===null?-1:s.injectorIndex}return ds(o,!0),o}function Nj(n,e,t,r,i){let o=UA(),s=p_(),a=s?o:o&&o.parent,c=n.data[e]=Fj(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function Dx(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function Ax(n,e,t,r,i){let o=Ha(),s=r&2;try{as(-1),s&&e.length>zn&&bx(n,e,zn,!1),$r(s?2:0,i),t(r,i)}finally{as(o),$r(s?3:1,i)}}function N_(n,e,t){if(d_(e)){let r=Oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Oe(r)}}}function M_(n,e,t){VA()&&($j(n,e,t,or(t,e)),(t.flags&64)===64&&Mx(n,e,t))}function P_(n,e,t=or){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function xx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=O_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function O_(n,e,t,r,i,o,s,a,c,u,d){let f=zn+r,m=f+i,v=Mj(f,m),w=typeof u=="function"?u():u;return v[Se]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function Mj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:_o);return t}function Pj(n,e,t,r){let o=r.get(ij,mx)||t===qr.ShadowDom,s=n.selectRootElement(e,o);return Oj(s),s}function Oj(n){kj(n)}var kj=()=>null;function Fj(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return hU()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function UD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=lo.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?jD(r,t,u,a,c):jD(r,t,u,a)}return r}function jD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function Lj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=o[d],m=t?t.get(f):null,v=m?m.inputs:null,w=m?m.outputs:null;c=UD(0,f.inputs,d,c,v),u=UD(1,f.outputs,d,u,w);let P=c!==null&&s!==null&&!c_(e)?Xj(c,d,s):null;a.push(P)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function Vj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Rx(n,e,t,r,i,o,s,a){let c=or(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(F_(n,t,d,r,i),Mf(e)&&Uj(t,e.index)):e.type&3?(r=Vj(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function Uj(n,e){let t=vo(e,n);t[he]&16||(t[he]|=64)}function k_(n,e,t,r){if(VA()){let i=r===null?null:{"":-1},o=qj(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Nx(n,e,t,s,i,a),i&&Wj(t,r,i)}t.mergedAttrs=zl(t.mergedAttrs,t.attrs)}function Nx(n,e,t,r,i,o){for(let u=0;u<r.length;u++)Sy(pf(t,e),n,r[u].type);zj(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=Dx(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=zl(t.mergedAttrs,d.hostAttrs),Kj(n,t,e,c,d),Gj(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Lj(n,t,o)}function jj(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Bj(s)!=a&&s.push(a),s.push(t,r,o)}}function Bj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function $j(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Mf(t)&&Yj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||pf(t,e),ho(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],u=Va(e,n,a,t);if(ho(u,e),s!==null&&Jj(e,a-i,u,c,t,s),uo(c)){let d=vo(t.index,e);d[rr]=Va(e,n,a,t)}}}function Mx(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=wU();try{as(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Cy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Hj(c,u)}}finally{as(-1),Cy(s)}}function Hj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function qj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(P2(e,s.selectors,!1))if(r||(r=[]),uo(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;Fy(n,e,c)}else r.unshift(s),Fy(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Fy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Wj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new X(-301,!1);r.push(e[i],o)}}}function Gj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;uo(e)&&(t[""]=n)}}function zj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Kj(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=rs(i.type,!0)),s=new cs(o,uo(i),Re);n.blueprint[r]=s,t[r]=s,jj(n,e,r,Dx(n,t,i.hostVars,_o),i)}function Yj(n,e,t){let r=or(e,n),i=xx(t),o=n[mi].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Hf(n,$f(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Qj(n,e,t,r,i,o){let s=or(n,e);Zj(e[jt],s,o,n.value,t,r,i)}function Zj(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?o_(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Jj(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];Sx(r,t,c,u,d,f)}}function Xj(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Px(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Ox(n,e){let t=n.contentQueries;if(t!==null){let r=Oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];$A(o),a.contentQueries(2,e[s],s)}}}finally{Oe(r)}}}function Hf(n,e){return n[Yl]?n[SD][_r]=e:n[Yl]=e,n[SD]=e,e}function Ly(n,e,t){$A(0);let r=Oe(null);try{e(n,t)}finally{Oe(r)}}function eB(n){return n[af]??=[]}function tB(n){return n.cleanup??=[]}function kx(n,e){let t=n[Oa],r=t?t.get(zr,null):null;r&&r.handleError(e)}function F_(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],d=n.data[s];Sx(d,u,r,a,c,i)}}function nB(n,e,t){let r=PA(e,n);dj(n[jt],r,t)}function rB(n,e){let t=vo(e,n),r=t[Se];iB(r,t);let i=t[wi];i!==null&&t[sf]===null&&(t[sf]=b_(i,t[Oa])),L_(r,t,t[rr])}function iB(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function L_(n,e,t){g_(e);try{let r=n.viewQuery;r!==null&&Ly(1,r,t);let i=n.template;i!==null&&Ax(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Fa]?.finishViewCreation(n),n.staticContentQueries&&Ox(n,e),n.staticViewQueries&&Ly(2,n.viewQuery,t);let o=n.components;o!==null&&oB(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[he]&=-5,v_()}}function oB(n,e){for(let t=0;t<e.length;t++)rB(n,e[t])}function Fx(n,e,t,r){let i=Oe(null);try{let o=e.tView,a=n[he]&4096?4096:16,c=$f(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ka]=u;let d=n[Fa];return d!==null&&(c[Fa]=d.createEmbeddedView(o)),L_(o,c,t),c}finally{Oe(i)}}function sB(n,e){let t=Gn+e;if(t<n.length)return n[t]}function Vy(n,e){return!e||e.firstChild===null||lx(n)}function Lx(n,e,t,r=!0){let i=e[Se];if(gj(i,e,n,t),r){let s=ky(t,n),a=e[jt],c=Ix(a,n[os]);c!==null&&pj(i,n[wr],a,e,c,s)}let o=e[sf];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function aB(n,e){let t=vf(n,e);return t!==void 0&&x_(t[Se],t),t}function _f(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Gr(o)),Ii(o)&&cB(o,r);let s=t.type;if(s&8)_f(n,e,t.child,r);else if(s&32){let a=D_(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=Ex(e,t);if(Array.isArray(a))r.push(...a);else{let c=ss(e[Wr]);_f(c[Se],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function cB(n,e){for(let t=Gn;t<n.length;t++){let r=n[t],i=r[Se].firstChild;i!==null&&_f(r[Se],r,i,e)}n[os]!==n[wi]&&e.push(n[os])}var Vx=[];function lB(n){return n[tr]??uB(n)}function uB(n){let e=Vx.pop()??Object.create(hB);return e.lView=n,e}function dB(n){n.lView[tr]!==n&&(n.lView=null,Vx.push(n))}var hB=Ee(B({},ua),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{kf(n.lView)},consumerOnSignalRead(){this.lView[tr]=this}});function fB(n){let e=n[tr]??Object.create(pB);return e.lView=n,e}var pB=Ee(B({},ua),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=ss(n.lView);for(;e&&!Ux(e[Se]);)e=ss(e);e&&kA(e)},consumerOnSignalRead(){this.lView[tr]=this}});function Ux(n){return n.type!==2}var mB=100;function jx(n,e=!0,t=0){let r=n[mi],i=r.rendererFactory,o=!1;o||i.begin?.();try{gB(n,t)}catch(s){throw e&&kx(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function gB(n,e){let t=BA();try{AD(!0),Uy(n,e);let r=0;for(;Of(n);){if(r===mB)throw new X(103,!1);r++,Uy(n,1)}}finally{AD(t)}}function vB(n,e,t,r){let i=e[he];if((i&256)===256)return;let o=!1,s=!1;!o&&e[mi].inlineEffectRunner?.flush(),g_(e);let a=!0,c=null,u=null;o||(Ux(n)?(u=lB(e),c=kl(u)):RS()===null?(a=!1,u=fB(e),c=kl(u)):e[tr]&&(fh(e[tr]),e[tr]=null));try{OA(e),gU(n.bindingStartIndex),t!==null&&Ax(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let v=n.preOrderCheckHooks;v!==null&&Zh(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Jh(e,v,0,null),ny(e,0)}if(s||yB(e),Bx(e,0),n.contentQueries!==null&&Ox(n,e),!o)if(d){let v=n.contentCheckHooks;v!==null&&Zh(e,v)}else{let v=n.contentHooks;v!==null&&Jh(e,v,1),ny(e,1)}Rj(n,e);let f=n.components;f!==null&&Hx(e,f,0);let m=n.viewQuery;if(m!==null&&Ly(2,m,r),!o)if(d){let v=n.viewCheckHooks;v!==null&&Zh(e,v)}else{let v=n.viewHooks;v!==null&&Jh(e,v,2),ny(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Qh]){for(let v of e[Qh])v();e[Qh]=null}o||(e[he]&=-73)}catch(d){throw o||kf(e),d}finally{u!==null&&(dh(u,c),a&&dB(u)),v_()}}function Bx(n,e){for(let t=dx(n);t!==null;t=hx(t))for(let r=Gn;r<t.length;r++){let i=t[r];$x(i,e)}}function yB(n){for(let e=dx(n);e!==null;e=hx(e)){if(!(e[he]&uf.HasTransplantedViews))continue;let t=e[lf];for(let r=0;r<t.length;r++){let i=t[r];kA(i)}}}function _B(n,e,t){let r=vo(e,n);$x(r,t)}function $x(n,e){f_(n)&&Uy(n,e)}function Uy(n,e){let r=n[Se],i=n[he],o=n[tr],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&hh(o)),s||=!1,o&&(o.dirty=!1),n[he]&=-9217,s)vB(r,n,r.template,n[rr]);else if(i&8192){Bx(n,1);let a=r.components;a!==null&&Hx(n,a,1)}}function Hx(n,e,t){for(let r=0;r<e.length;r++)_B(n,e[r],t)}function V_(n,e){let t=BA()?64:1088;for(n[mi].changeDetectionScheduler?.notify(e);n;){n[he]|=t;let r=ss(n);if(wy(n)&&!r)return n;n=r}return null}var ls=class{get rootNodes(){let e=this._lView,t=e[Se];return _f(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[rr]}set context(e){this._lView[rr]=e}get destroyed(){return(this._lView[he]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Tn];if(Ii(e)){let t=e[cf],r=t?t.indexOf(this):-1;r>-1&&(vf(e,r),rf(t,r))}this._attachedToViewContainer=!1}x_(this._lView[Se],this._lView)}onDestroy(e){FA(this._lView,e)}markForCheck(){V_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){Ey(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,jx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=wy(this._lView),t=this._lView[ka];t!==null&&!e&&A_(t,this._lView),yx(this._lView[Se],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=wy(this._lView),r=this._lView[ka];r!==null&&!t&&_x(r,this._lView),Ey(this._lView)}},U_=(()=>{class n{static{this.__NG_ELEMENT_ID__=EB}}return n})(),wB=U_,IB=class extends wB{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Fx(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ls(i)}};function EB(){return CB(bn(),Ke())}function CB(n,e){return n.type&4?new IB(e,n,Uf(n,e)):null}var Uie=new RegExp(`^(\\d+)*(${nj}|${tj})*(.*)`);var TB=()=>null;function jy(n,e){return TB(n,e)}var Ua=class{},qf=new H("",{providedIn:"root",factory:()=>!1});var qx=new H(""),Wx=new H(""),By=class{},wf=class{};function bB(n){let e=Error(`No component factory found for ${kn(n)}.`);return e[SB]=n,e}var SB="ngComponent";var $y=class{resolveComponentFactory(e){throw bB(e)}},fo=class{static{this.NULL=new $y}},ja=class{},Ci=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>DB()}}return n})();function DB(){let n=Ke(),e=bn(),t=vo(e.index,n);return(co(t)?t:n)[jt]}var AB=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>null})}}return n})();function If(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=gD(i,a);else if(o==2){let c=a,u=e[++s];r=gD(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Ef=class extends fo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=is(e);return new Ql(t,this.ngModule)}};function BD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:lo.None;e?t.push({propName:s,templateName:r,isSignal:(a&lo.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function xB(n){let e=n.toLowerCase();return e==="svg"?rU:e==="math"?iU:null}var Ql=class extends wf{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=BD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return BD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=L2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Oe(null);try{i=i||this.ngModule;let s=i instanceof nr?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ty(e,s):e,c=a.get(ja,null);if(c===null)throw new X(407,!1);let u=a.get(AB,null),d=a.get(Ua,null),f={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?Pj(m,r,this.componentDef.encapsulation,a):vx(m,v,xB(v)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let N=null;w!==null&&(N=b_(w,a,!0));let L=O_(0,null,null,1,0,null,null,null,null,null,null),W=$f(null,L,null,P,null,null,f,m,a,null,N);g_(W);let Y,re,Xe=null;try{let se=this.componentDef,b,_=null;se.findHostDirectiveDefs?(b=[],_=new Map,se.findHostDirectiveDefs(se,b,_),b.push(se)):b=[se];let I=RB(W,w);Xe=NB(I,w,se,b,W,f,m),re=h_(L,zn),w&&OB(m,se,w,r),t!==void 0&&kB(re,this.ngContentSelectors,t),Y=PB(Xe,se,b,_,W,[FB]),L_(L,W,null)}catch(se){throw Xe!==null&&My(Xe),My(W),se}finally{v_()}return new Hy(this.componentType,Y,Uf(re,W),W,re)}finally{Oe(o)}}},Hy=class extends By{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ls(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;F_(o[Se],o,i,e,t),this.previousInputValues.set(e,t);let s=vo(this._tNode.index,o);V_(s,1)}}get injector(){return new ns(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function RB(n,e){let t=n[Se],r=zn;return n[r]=e,nu(t,r,2,"#host",null)}function NB(n,e,t,r,i,o,s){let a=i[Se];MB(r,n,e,s);let c=null;e!==null&&(c=b_(e,i[Oa]));let u=o.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=$f(i,xx(t),null,d,i[n.index],n,o,u,null,null,c);return a.firstCreatePass&&Fy(a,n,r.length-1),Hf(i,f),i[n.index]=f}function MB(n,e,t,r){for(let i of n)e.mergedAttrs=zl(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(If(e,e.mergedAttrs,!0),t!==null&&Tx(r,t,e))}function PB(n,e,t,r,i,o){let s=bn(),a=i[Se],c=or(s,i);Nx(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,m=Va(i,a,f,s);ho(m,i)}Mx(a,i,s),c&&ho(c,i);let u=Va(i,a,s.directiveStart+s.componentOffset,s);if(n[rr]=i[rr]=u,o!==null)for(let d of o)d(u,e);return N_(a,s,i),u}function OB(n,e,t,r){if(r)gy(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=V2(e.selectors[0]);i&&gy(n,t,i),o&&o.length>0&&Cx(n,t,o.join(" "))}}function kB(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function FB(){let n=bn();Vf(Ke()[Se],n)}var fs=(()=>{class n{static{this.__NG_ELEMENT_ID__=LB}}return n})();function LB(){let n=bn();return UB(n,Ke())}var VB=fs,Gx=class extends VB{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Uf(this._hostTNode,this._hostLView)}get injector(){return new ns(this._hostTNode,this._hostLView)}get parentInjector(){let e=__(this._hostTNode,this._hostLView);if(QA(e)){let t=hf(e,this._hostLView),r=df(e),i=t[Se].data[r+8];return new ns(i,t)}else return new ns(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=$D(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Gn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Vy(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!X2(e),a;if(s)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,o=w.environmentInjector||w.ngModuleRef}let c=s?e:new Ql(is(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let P=(s?u:this.parentInjector).get(nr,null);P&&(o=P)}let d=is(c.componentType??{}),f=jy(this._lContainer,d?.id??null),m=f?.firstChild??null,v=c.create(u,i,m,o);return this.insertImpl(v.hostView,a,Vy(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(sU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Tn],u=new Gx(c,c[wr],c[Tn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Lx(s,i,o,r),e.attachToViewContainerRef(),uA(ay(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=$D(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=vf(this._lContainer,t);r&&(rf(ay(this._lContainer),t),x_(r[Se],r))}detach(e){let t=this._adjustIndex(e,-1),r=vf(this._lContainer,t);return r&&rf(ay(this._lContainer),t)!=null?new ls(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function $D(n){return n[cf]}function ay(n){return n[cf]||(n[cf]=[])}function UB(n,e){let t,r=e[n.index];return Ii(r)?t=r:(t=Px(r,e,null,n),e[n.index]=t,Hf(e,t)),BB(t,e,n,r),new Gx(t,n,e)}function jB(n,e){let t=n[jt],r=t.createComment(""),i=or(e,n),o=Ix(t,i);return yf(t,o,r,Ij(t,i),!1),r}var BB=qB,$B=()=>!1;function HB(n,e,t){return $B(n,e,t)}function qB(n,e,t,r){if(n[os])return;let i;t.type&8?i=Gr(r):i=jB(e,t),n[os]=i}var HD=new Set;function ps(n){HD.has(n)||(HD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function WB(n){return typeof n=="function"&&n[jr]!==void 0}function Z(n,e){ps("NgSignals");let t=$S(n),r=t[jr];return e?.equal&&(r.equal=e.equal),t.set=i=>Fv(r,i),t.update=i=>HS(r,i),t.asReadonly=GB.bind(t),t}function GB(){let n=this[jr];if(n.readonlyFn===void 0){let e=()=>this();e[jr]=n,n.readonlyFn=e}return n.readonlyFn}function zx(n){return WB(n)&&typeof n.set=="function"}function zB(n){return Object.getPrototypeOf(n.prototype).constructor}function Fn(n){let e=zB(n.type),t=!0,r=[n];for(;e;){let i;if(uo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Gh(n.inputs),s.inputTransforms=Gh(n.inputTransforms),s.declaredInputs=Gh(n.declaredInputs),s.outputs=Gh(n.outputs);let a=i.hostBindings;a&&JB(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&QB(n,c),u&&ZB(n,u),KB(n,i),i2(n.outputs,i.outputs),uo(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Fn&&(t=!1)}}e=Object.getPrototypeOf(e)}YB(r)}function KB(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function YB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=zl(i.hostAttrs,t=zl(t,i.hostAttrs))}}function Gh(n){return n===Na?{}:n===er?[]:n}function QB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function ZB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function JB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var po=class{},Zl=class{};var qy=class extends po{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ef(this);let o=_A(e);this._bootstrapComponents=gx(o.bootstrap),this._r3Injector=ox(e,t,[{provide:po,useValue:this},{provide:fo,useValue:this.componentFactoryResolver},...r],kn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Wy=class extends Zl{constructor(e){super(),this.moduleType=e}create(e){return new qy(this.moduleType,e,[])}};var Cf=class extends po{constructor(e){super(),this.componentFactoryResolver=new Ef(this),this.instance=null;let t=new Kl([...e.providers,{provide:po,useValue:this},{provide:fo,useValue:this.componentFactoryResolver}],e.parent||u_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function j_(n,e,t=null){return new Cf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Kx(n){return e$(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function XB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function e$(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function Yx(n,e,t){return n[e]=t}function vi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function t$(n,e,t,r){let i=vi(n,e,t);return vi(n,e+1,r)||i}function n$(n){return(n.flags&32)===32}function r$(n,e,t,r,i,o,s,a,c){let u=e.consts,d=nu(e,n,4,s||null,a||null);k_(e,t,d,La(u,c)),Vf(e,d);let f=d.tView=O_(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function i$(n,e,t,r,i,o,s,a,c,u){let d=t+zn,f=e.firstCreatePass?r$(d,e,n,r,i,o,s,a,c):e.data[d];ds(f,!1);let m=o$(e,n,f,t);Ff()&&jf(e,n,m,f),ho(m,n);let v=Px(m,n,m,f);return n[d]=v,Hf(n,v),HB(v,f,n),Pf(f)&&M_(e,n,f),c!=null&&P_(n,f,u),f}function te(n,e,t,r,i,o,s,a){let c=Ke(),u=dn(),d=La(u.consts,o);return i$(c,u,n,e,t,r,i,d,s,a),te}var o$=s$;function s$(n,e,t,r){return Lf(!0),e[jt].createComment("")}var ql=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ql||{}),a$=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}}return n})(),qD=class n{constructor(){this.ngZone=R(ae),this.scheduler=R(Ua),this.errorHandler=R(zr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ql.EarlyRead,ql.Write,ql.MixedReadWrite,ql.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}};function ru(n,e,t,r){let i=Ke(),o=tu();if(vi(i,o,e)){let s=dn(),a=y_();Qj(a,i,n,e,t,r)}return ru}function c$(n,e,t,r){return vi(n,tu(),t)?e+o_(t)+r:_o}function zh(n,e){return n<<17|e<<2}function us(n){return n>>17&32767}function l$(n){return(n&2)==2}function u$(n,e){return n&131071|e<<17}function Gy(n){return n|2}function Ba(n){return(n&131068)>>2}function cy(n,e){return n&-131069|e<<2}function d$(n){return(n&1)===1}function zy(n){return n|1}function h$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=us(s),c=Ba(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||eu(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=us(n[a+1]);n[r+1]=zh(m,a),m!==0&&(n[m+1]=cy(n[m+1],r)),n[a+1]=u$(n[a+1],r)}else n[r+1]=zh(a,0),a!==0&&(n[a+1]=cy(n[a+1],r)),a=r;else n[r+1]=zh(c,0),a===0?a=r:n[c+1]=cy(n[c+1],r),c=r;u&&(n[r+1]=Gy(n[r+1])),WD(n,d,r,!0),WD(n,d,r,!1),f$(e,d,n,r,o),s=zh(a,c),o?e.classBindings=s:e.styleBindings=s}function f$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&eu(o,e)>=0&&(t[r+1]=zy(t[r+1]))}function WD(n,e,t,r){let i=n[t+1],o=e===null,s=r?us(i):Ba(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];p$(c,e)&&(a=!0,n[s+1]=r?zy(u):Gy(u)),s=r?us(u):Ba(u)}a&&(n[t+1]=r?Gy(i):zy(i))}function p$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?eu(n,e)>=0:!1}function Q(n,e,t){let r=Ke(),i=tu();if(vi(r,i,e)){let o=dn(),s=y_();Rx(o,s,r,n,e,r[jt],t,!1)}return Q}function GD(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";F_(n,t,o[s],s,r)}function qa(n,e,t){return Qx(n,e,t,!1),qa}function Wf(n,e){return Qx(n,e,null,!0),Wf}function Qx(n,e,t,r){let i=Ke(),o=dn(),s=vU(2);if(o.firstUpdatePass&&g$(o,n,s,r),e!==_o&&vi(i,s,e)){let a=o.data[Ha()];I$(o,a,i,i[jt],n,i[s+1]=E$(e,t),r,s)}}function m$(n,e){return e>=n.expandoStartIndex}function g$(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ha()],s=m$(n,t);C$(o,r)&&e===null&&!s&&(e=!1),e=v$(i,o,e,r),h$(i,o,e,t,s,r)}}function v$(n,e,t,r){let i=IU(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=ly(null,n,e,t,r),t=Jl(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=ly(i,n,e,t,r),o===null){let c=y$(n,e,r);c!==void 0&&Array.isArray(c)&&(c=ly(null,n,e,c[1],r),c=Jl(c,e.attrs,r),_$(n,e,r,c))}else o=w$(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function y$(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ba(r)!==0)return n[us(r)]}function _$(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[us(i)]=r}function w$(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=Jl(r,s,t)}return Jl(r,e.attrs,t)}function ly(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=Jl(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Jl(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),T2(n,s,t?!0:e[++o]))}return n===void 0?null:n}function I$(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=d$(u)?zD(c,e,t,i,Ba(u),s):void 0;if(!Tf(d)){Tf(o)||l$(u)&&(o=zD(c,null,t,i,a,s));let f=PA(Ha(),t);Aj(r,s,f,i,o)}}function zD(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=t[i+1];m===_o&&(m=f?er:void 0);let v=f?ey(m,r):d===r?m:void 0;if(u&&!Tf(v)&&(v=ey(c,r)),Tf(v)&&(a=v,s))return a;let w=n[i+1];i=s?us(w):Ba(w)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=ey(c,r))}return a}function Tf(n){return n!==void 0}function E$(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=kn(S_(n)))),n}function C$(n,e){return(n.flags&(e?8:16))!==0}function le(n,e){ps("NgControlFlow");let t=Ke(),r=tu(),i=t[r]!==_o?t[r]:-1,o=i!==-1?KD(t,zn+i):void 0,s=0;if(vi(t,r,n)){let a=Oe(null);try{if(o!==void 0&&aB(o,s),n!==-1){let c=zn+n,u=KD(t,c),d=T$(t[Se],c),f=jy(u,d.tView.ssrId),m=Fx(t,d,e,{dehydratedView:f});Lx(u,m,s,Vy(d,f))}}finally{Oe(a)}}else if(o!==void 0){let a=sB(o,s);a!==void 0&&(a[rr]=e)}}function KD(n,e){return n[e]}function T$(n,e){return h_(n,e)}function b$(n,e,t,r,i,o){let s=e.consts,a=La(s,i),c=nu(e,n,2,r,a);return k_(e,t,c,La(s,o)),c.attrs!==null&&If(c,c.attrs,!1),c.mergedAttrs!==null&&If(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function C(n,e,t,r){let i=Ke(),o=dn(),s=zn+n,a=i[jt],c=o.firstCreatePass?b$(s,o,i,e,t,r):o.data[s],u=S$(o,i,c,a,e,n);i[s]=u;let d=Pf(c);return ds(c,!0),Tx(a,u,c),!n$(c)&&Ff()&&jf(o,i,u,c),lU()===0&&ho(u,i),uU(),d&&(M_(o,i,c),N_(o,c,i)),r!==null&&P_(i,c),C}function T(){let n=bn();p_()?jA():(n=n.parent,ds(n,!1));let e=n;fU(e)&&pU(),dU();let t=dn();return t.firstCreatePass&&(Vf(t,n),d_(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&AU(e)&&GD(t,e,Ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&xU(e)&&GD(t,e,Ke(),e.stylesWithoutHost,!1),T}function Te(n,e,t,r){return C(n,e,t,r),T(),Te}var S$=(n,e,t,r,i,o)=>(Lf(!0),vx(r,i,TU()));function D$(n,e,t,r,i){let o=e.consts,s=La(o,r),a=nu(e,n,8,"ng-container",s);s!==null&&If(a,s,!0);let c=La(o,i);return k_(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function B_(n,e,t){let r=Ke(),i=dn(),o=n+zn,s=i.firstCreatePass?D$(o,i,r,e,t):i.data[o];ds(s,!0);let a=A$(i,r,s,n);return r[o]=a,Ff()&&jf(i,r,a,s),ho(a,r),Pf(s)&&(M_(i,r,s),N_(i,s,r)),t!=null&&P_(r,s),B_}function $_(){let n=bn(),e=dn();return p_()?jA():(n=n.parent,ds(n,!1)),e.firstCreatePass&&(Vf(e,n),d_(n)&&e.queries.elementEnd(n)),$_}var A$=(n,e,t,r)=>(Lf(!0),hj(e[jt],""));function Ti(){return Ke()}var ts=void 0;function x$(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var R$=["en",[["a","p"],["AM","PM"],ts],[["AM","PM"],ts,ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ts,"{1} 'at' {0}",ts],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",x$],uy={};function ar(n){let e=N$(n),t=YD(e);if(t)return t;let r=e.split("-")[0];if(t=YD(r),t)return t;if(r==="en")return R$;throw new X(701,!1)}function YD(n){return n in uy||(uy[n]=$l.ng&&$l.ng.common&&$l.ng.common.locales&&$l.ng.common.locales[n]),uy[n]}var Pt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Pt||{});function N$(n){return n.toLowerCase().replace(/_/g,"-")}var bf="en-US";var M$=bf;function P$(n){typeof n=="string"&&(M$=n.toLowerCase().replace(/_/g,"-"))}var O$=(n,e,t)=>{};function ue(n,e,t,r){let i=Ke(),o=dn(),s=bn();return Zx(o,i,i[jt],s,n,e,r),ue}function k$(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[af],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Zx(n,e,t,r,i,o,s){let a=Pf(r),u=n.firstCreatePass&&tB(n),d=e[rr],f=eB(e),m=!0;if(r.type&3||s){let P=or(r,e),N=s?s(P):P,L=f.length,W=s?re=>s(Gr(re[r.index])):r.index,Y=null;if(!s&&a&&(Y=k$(n,e,i,r.index)),Y!==null){let re=Y.__ngLastListenerFn__||Y;re.__ngNextListenerFn__=o,Y.__ngLastListenerFn__=o,m=!1}else{o=ZD(r,e,d,o),O$(P,i,o);let re=t.listen(N,i,o);f.push(o,re),u&&u.push(i,W,L,L+1)}}else o=ZD(r,e,d,o);let v=r.outputs,w;if(m&&v!==null&&(w=v[i])){let P=w.length;if(P)for(let N=0;N<P;N+=2){let L=w[N],W=w[N+1],Xe=e[L][W].subscribe(o),se=f.length;f.push(o,Xe),u&&u.push(i,r.index,se,-(se+1))}}}function QD(n,e,t,r){let i=Oe(null);try{return $r(6,e,t),t(r)!==!1}catch(o){return kx(n,o),!1}finally{$r(7,e,t),Oe(i)}}function ZD(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?vo(n.index,e):e;V_(s,5);let a=QD(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=QD(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function q(n=1){return CU(n)}function F$(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function x(n,e=""){let t=Ke(),r=dn(),i=n+zn,o=r.firstCreatePass?nu(r,i,1,e,null):r.data[i],s=L$(r,t,o,e,n);t[i]=s,Ff()&&jf(r,t,s,o),ds(o,!1)}var L$=(n,e,t,r,i)=>(Lf(!0),uj(e[jt],r));function _t(n){return G("",n,""),_t}function G(n,e,t){let r=Ke(),i=c$(r,n,e,t);return i!==_o&&nB(r,Ha(),i),G}function Cr(n,e,t){zx(e)&&(e=e());let r=Ke(),i=tu();if(vi(r,i,e)){let o=dn(),s=y_();Rx(o,s,r,n,e,r[jt],t,!1)}return Cr}function Kr(n,e){let t=zx(n);return t&&n.set(e),t}function Tr(n,e){let t=Ke(),r=dn(),i=bn();return Zx(r,t,t[jt],i,n,e),Tr}function V$(n,e,t){let r=dn();if(r.firstCreatePass){let i=uo(n);Ky(t,r.data,r.blueprint,i,!0),Ky(e,r.data,r.blueprint,i,!1)}}function Ky(n,e,t,r,i){if(n=Cn(n),Array.isArray(n))for(let o=0;o<n.length;o++)Ky(n[o],e,t,r,i);else{let o=dn(),s=Ke(),a=bn(),c=Pa(n)?n:Cn(n.provide),u=bA(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Pa(n)||!n.multi){let v=new cs(u,i,Re),w=hy(c,e,i?d:d+m,f);w===-1?(Sy(pf(a,s),o,c),dy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[w]=v,s[w]=v)}else{let v=hy(c,e,d+m,f),w=hy(c,e,d,d+m),P=v>=0&&t[v],N=w>=0&&t[w];if(i&&!N||!i&&!P){Sy(pf(a,s),o,c);let L=B$(i?j$:U$,t.length,i,r,u);!i&&N&&(t[w].providerFactory=L),dy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=Jx(t[i?w:v],u,!i&&r);dy(o,n,v>-1?v:w,L)}!i&&r&&N&&t[w].componentProviders++}}}function dy(n,e,t,r){let i=Pa(e),o=G2(e);if(i||o){let c=(o?Cn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function Jx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function hy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function U$(n,e,t,r){return Yy(this.multi,[])}function j$(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Va(t,t[Se],this.providerFactory.index,r);o=a.slice(0,s),Yy(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],Yy(i,o);return o}function Yy(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function B$(n,e,t,r,i){let o=new cs(n,t,Re);return o.multi=[],o.index=e,o.componentProviders=0,Jx(o,i,r&&!t),o}function Yr(n,e=[]){return t=>{t.providersResolver=(r,i)=>V$(r,i?i(n):n,e)}}var $$=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=EA(!1,t.type),i=r.length>0?j_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(ce(nr))})}}return n})();function Le(n){ps("NgStandalone"),n.getStandaloneInjector=e=>e.get($$).getOrCreateStandaloneInjector(n)}function st(n,e,t,r){return H$(Ke(),m_(),n,e,t,r)}function br(n,e,t,r,i){return eR(Ke(),m_(),n,e,t,r,i)}function Xx(n,e){let t=n[e];return t===_o?void 0:t}function H$(n,e,t,r,i,o){let s=e+t;return vi(n,s,i)?Yx(n,s+1,o?r.call(o,i):r(i)):Xx(n,s+1)}function eR(n,e,t,r,i,o,s){let a=e+t;return t$(n,a,i,o)?Yx(n,a+2,s?r.call(s,i,o):r(i,o)):Xx(n,a+2)}function bi(n,e){let t=dn(),r,i=n+zn;t.firstCreatePass?(r=q$(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=rs(r.type,!0)),s,a=On(Re);try{let c=ff(!1),u=o();return ff(c),F$(t,Ke(),i,u),u}finally{On(a)}}function q$(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Si(n,e,t,r){let i=n+zn,o=Ke(),s=oU(o,i);return W$(o,i)?eR(o,m_(),e,s.transform,t,r,s):s.transform(t,r)}function W$(n,e){return n[Se].data[e].pure}var yi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},tR=new yi("18.2.13");var Gf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var nR=new H("");function ms(n){return!!n&&typeof n.then=="function"}function rR(n){return!!n&&typeof n.subscribe=="function"}var wo=new H(""),iR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=R(wo,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(ms(o))t.push(o);else if(rR(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),H_=new H("");function G$(){BS(()=>{throw new X(600,!1)})}function z$(n){return n.isBoundToModule}var K$=10;function Y$(n,e,t){try{let r=t();return ms(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var gs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=R(KU),this.afterRenderManager=R(a$),this.zonelessEnabled=R(qf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new gt,this.afterTick=new gt,this.componentTypes=[],this.components=[],this.isStable=R(hs).hasPendingTasks.pipe(J(t=>!t)),this._injector=R(nr)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof wf;if(!this._injector.get(iR).done){let m=!i&&yA(t),v=!1;throw new X(405,v)}let s;i?s=t:s=this._injector.get(fo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=z$(s)?void 0:this._injector.get(po),c=r||s.selector,u=s.create(Ne.NULL,[],c,a),d=u.location.nativeElement,f=u.injector.get(nR,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Xh(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new X(101,!1);let t=Oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Oe(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ja,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<K$;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)Q$(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Of(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Xh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(H_,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Xh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Xh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Q$(n,e,t,r){if(!t&&!Of(n))return;jx(n,e,t&&!r?0:1)}var Qy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},q_=(()=>{class n{compileModuleSync(t){return new Wy(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=_A(t),o=gx(i.declarations).reduce((s,a)=>{let c=is(a);return c&&s.push(new Ql(c)),s},[]);return new Qy(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Z$=(()=>{class n{constructor(){this.zone=R(ae),this.changeDetectionScheduler=R(Ua),this.applicationRef=R(gs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),J$=new H("",{factory:()=>!1});function oR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ae(Ee(B({},aR()),{scheduleInRootZone:t})),[{provide:ae,useFactory:n},{provide:Ma,multi:!0,useFactory:()=>{let r=R(Z$,{optional:!0});return()=>r.initialize()}},{provide:Ma,multi:!0,useFactory:()=>{let r=R(X$);return()=>{r.initialize()}}},e===!0?{provide:qx,useValue:!0}:[],{provide:Wx,useValue:t??sx}]}function sR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=oR({ngZoneFactory:()=>{let i=aR(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&ps("NgZone_CoalesceEvent"),new ae(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return ot([{provide:J$,useValue:!0},{provide:qf,useValue:!1},r])}function aR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var X$=(()=>{class n{constructor(){this.subscription=new bt,this.initialized=!1,this.zone=R(ae),this.pendingTasks=R(hs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ae.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ae.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var eH=(()=>{class n{constructor(){this.appRef=R(gs),this.taskService=R(hs),this.ngZone=R(ae),this.zonelessEnabled=R(qf),this.disableScheduling=R(qx,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new bt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gf):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(Wx,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ny||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?PD:ax;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,PD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tH(){return typeof $localize<"u"&&$localize.locale||bf}var zf=new H("",{providedIn:"root",factory:()=>R(zf,be.Optional|be.SkipSelf)||tH()});var Zy=new H("");function Kh(n){return!n.moduleRef}function nH(n){let e=Kh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ae);return t.run(()=>{Kh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Kh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Zy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Zy);s.add(o),n.moduleRef.onDestroy(()=>{Xh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return Y$(r,t,()=>{let o=e.get(iR);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(zf,bf);if(P$(s||bf),Kh(n)){let a=e.get(gs);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return rH(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function rH(n,e){let t=n.injector.get(gs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}var ef=null;function iH(n=[],e){return Ne.create({name:e,providers:[{provide:xf,useValue:"platform"},{provide:Zy,useValue:new Set([()=>ef=null])},...n]})}function oH(n=[]){if(ef)return ef;let e=iH(n);return ef=e,G$(),sH(e),e}function sH(n){n.get(C_,null)?.forEach(t=>t())}var Io=(()=>{class n{static{this.__NG_ELEMENT_ID__=aH}}return n})();function aH(n){return cH(bn(),Ke(),(n&16)===16)}function cH(n,e,t){if(Mf(n)&&!t){let r=vo(n.index,e);return new ls(r,r)}else if(n.type&175){let r=e[Wr];return new ls(r,e)}return null}var Jy=class{constructor(){}supports(e){return Kx(e)}create(e){return new Xy(e)}},lH=(n,e)=>e,Xy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||lH}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<JD(r,i,o)?t:r,a=JD(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let v=m<o.length?o[m]:o[m]=0,w=v+m;d<=w&&w<u&&(o[m]=v+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Kx(e))throw new X(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,XB(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new e_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Sf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Sf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},e_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},t_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Sf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new t_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function JD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function XD(){return new W_([new Jy])}var W_=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:XD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||XD()),deps:[[n,new lA,new fe]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new X(901,!1)}}return n})();function cR(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=oH(r),o=[oR({}),{provide:Ua,useExisting:eH},...t||[]],s=new Cf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return nH({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function iu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function De(n,e){ps("NgSignals");let t=VS(n);return e?.equal&&(t[jr].equal=e.equal),t}function cr(n){let e=Oe(null);try{return n()}finally{Oe(e)}}var uH=new H("",{providedIn:"root",factory:()=>R(dH)}),dH=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n_})}}return n})(),n_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=R(hs),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},r_=class{constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=o,this.watcher=WS(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(zr,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Sr(n,e){ps("NgSignals"),!e?.injector&&Rf(Sr);let t=e?.injector??R(Ne),r=e?.manualCleanup!==!0?t.get(yo):null,i=new r_(t.get(uH),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(Io,null,{optional:!0});return!o||!(o._lView[he]&8)?i.watcher.notify():(o._lView[Qh]??=[]).push(i.watcher.notify),i}var pR=null;function xi(){return pR}function mR(n){pR??=n}var np=class{};var Ln=new H(""),gR=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>R(pH),providedIn:"platform"})}}return n})();var pH=(()=>{class n extends gR{constructor(){super(),this._doc=R(Ln),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xi().getBaseHref(this._doc)}onPopState(t){let r=xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function vR(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function lR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function vs(n){return n&&n[0]!=="?"?"?"+n:n}var op=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>R(yR),providedIn:"root"})}}return n})(),mH=new H(""),yR=(()=>{class n extends op{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Ln).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return vR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+vs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+vs(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+vs(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ce(gR),ce(mH,8))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ou=(()=>{class n{constructor(t){this._subject=new Ut,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=yH(lR(uR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+vs(r))}normalize(t){return n.stripTrailingSlash(vH(this._basePath,uR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+vs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=vs}static{this.joinWithSlash=vR}static{this.stripTrailingSlash=lR}static{this.\u0275fac=function(r){return new(r||n)(ce(op))}}static{this.\u0275prov=j({token:n,factory:()=>gH(),providedIn:"root"})}}return n})();function gH(){return new ou(ce(op))}function vH(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function uR(n){return n.replace(/\/index.html$/,"")}function yH(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Sn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(Sn||{}),nt=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(nt||{}),Kn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Kn||{}),Eo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function _H(n){return ar(n)[Pt.LocaleId]}function wH(n,e,t){let r=ar(n),i=[r[Pt.DayPeriodsFormat],r[Pt.DayPeriodsStandalone]],o=lr(i,e);return lr(o,t)}function IH(n,e,t){let r=ar(n),i=[r[Pt.DaysFormat],r[Pt.DaysStandalone]],o=lr(i,e);return lr(o,t)}function EH(n,e,t){let r=ar(n),i=[r[Pt.MonthsFormat],r[Pt.MonthsStandalone]],o=lr(i,e);return lr(o,t)}function CH(n,e){let r=ar(n)[Pt.Eras];return lr(r,e)}function Kf(n,e){let t=ar(n);return lr(t[Pt.DateFormat],e)}function Yf(n,e){let t=ar(n);return lr(t[Pt.TimeFormat],e)}function Qf(n,e){let r=ar(n)[Pt.DateTimeFormat];return lr(r,e)}function sp(n,e){let t=ar(n),r=t[Pt.NumberSymbols][e];if(typeof r>"u"){if(e===Eo.CurrencyDecimal)return t[Pt.NumberSymbols][Eo.Decimal];if(e===Eo.CurrencyGroup)return t[Pt.NumberSymbols][Eo.Group]}return r}function _R(n){if(!n[Pt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Pt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function TH(n){let e=ar(n);return _R(e),(e[Pt.ExtraData][2]||[]).map(r=>typeof r=="string"?G_(r):[G_(r[0]),G_(r[1])])}function bH(n,e,t){let r=ar(n);_R(r);let i=[r[Pt.ExtraData][0],r[Pt.ExtraData][1]],o=lr(i,e)||[];return lr(o,t)||[]}function lr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function G_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var SH=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Zf={},DH=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Ai=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Ai||{}),Ge=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ge||{}),We=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(We||{});function AH(n,e,t,r){let i=LH(n);e=Di(t,e)||e;let s=[],a;for(;e;)if(a=DH.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=IR(r,c),i=FH(i,r,!0));let u="";return s.forEach(d=>{let f=OH(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function rp(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Di(n,e){let t=_H(n);if(Zf[t]??={},Zf[t][e])return Zf[t][e];let r="";switch(e){case"shortDate":r=Kf(n,Kn.Short);break;case"mediumDate":r=Kf(n,Kn.Medium);break;case"longDate":r=Kf(n,Kn.Long);break;case"fullDate":r=Kf(n,Kn.Full);break;case"shortTime":r=Yf(n,Kn.Short);break;case"mediumTime":r=Yf(n,Kn.Medium);break;case"longTime":r=Yf(n,Kn.Long);break;case"fullTime":r=Yf(n,Kn.Full);break;case"short":let i=Di(n,"shortTime"),o=Di(n,"shortDate");r=Jf(Qf(n,Kn.Short),[i,o]);break;case"medium":let s=Di(n,"mediumTime"),a=Di(n,"mediumDate");r=Jf(Qf(n,Kn.Medium),[s,a]);break;case"long":let c=Di(n,"longTime"),u=Di(n,"longDate");r=Jf(Qf(n,Kn.Long),[c,u]);break;case"full":let d=Di(n,"fullTime"),f=Di(n,"fullDate");r=Jf(Qf(n,Kn.Full),[d,f]);break}return r&&(Zf[t][e]=r),r}function Jf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Dr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function xH(n,e){return Dr(n,3).substring(0,e)}function Bt(n,e,t=0,r=!1,i=!1){return function(o,s){let a=RH(n,o);if((t>0||a>-t)&&(a+=t),n===Ge.Hours)a===0&&t===-12&&(a=12);else if(n===Ge.FractionalSeconds)return xH(a,e);let c=sp(s,Eo.MinusSign);return Dr(a,e,c,r,i)}}function RH(n,e){switch(n){case Ge.FullYear:return e.getFullYear();case Ge.Month:return e.getMonth();case Ge.Date:return e.getDate();case Ge.Hours:return e.getHours();case Ge.Minutes:return e.getMinutes();case Ge.Seconds:return e.getSeconds();case Ge.FractionalSeconds:return e.getMilliseconds();case Ge.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function at(n,e,t=Sn.Format,r=!1){return function(i,o){return NH(i,o,n,e,t,r)}}function NH(n,e,t,r,i,o){switch(t){case We.Months:return EH(e,i,r)[n.getMonth()];case We.Days:return IH(e,i,r)[n.getDay()];case We.DayPeriods:let s=n.getHours(),a=n.getMinutes();if(o){let u=TH(e),d=bH(e,i,r),f=u.findIndex(m=>{if(Array.isArray(m)){let[v,w]=m,P=s>=v.hours&&a>=v.minutes,N=s<w.hours||s===w.hours&&a<w.minutes;if(v.hours<w.hours){if(P&&N)return!0}else if(P||N)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return wH(e,i,r)[s<12?0:1];case We.Eras:return CH(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Xf(n){return function(e,t,r){let i=-1*r,o=sp(t,Eo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Ai.Short:return(i>=0?"+":"")+Dr(s,2,o)+Dr(Math.abs(i%60),2,o);case Ai.ShortGMT:return"GMT"+(i>=0?"+":"")+Dr(s,1,o);case Ai.Long:return"GMT"+(i>=0?"+":"")+Dr(s,2,o)+":"+Dr(Math.abs(i%60),2,o);case Ai.Extended:return r===0?"Z":(i>=0?"+":"")+Dr(s,2,o)+":"+Dr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var MH=0,tp=4;function PH(n){let e=rp(n,MH,1).getDay();return rp(n,0,1+(e<=tp?tp:tp+7)-e)}function wR(n){let e=n.getDay(),t=e===0?-3:tp-e;return rp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function z_(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=wR(t),s=PH(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Dr(i,n,sp(r,Eo.MinusSign))}}function ep(n,e=!1){return function(t,r){let o=wR(t).getFullYear();return Dr(o,n,sp(r,Eo.MinusSign),e)}}var K_={};function OH(n){if(K_[n])return K_[n];let e;switch(n){case"G":case"GG":case"GGG":e=at(We.Eras,nt.Abbreviated);break;case"GGGG":e=at(We.Eras,nt.Wide);break;case"GGGGG":e=at(We.Eras,nt.Narrow);break;case"y":e=Bt(Ge.FullYear,1,0,!1,!0);break;case"yy":e=Bt(Ge.FullYear,2,0,!0,!0);break;case"yyy":e=Bt(Ge.FullYear,3,0,!1,!0);break;case"yyyy":e=Bt(Ge.FullYear,4,0,!1,!0);break;case"Y":e=ep(1);break;case"YY":e=ep(2,!0);break;case"YYY":e=ep(3);break;case"YYYY":e=ep(4);break;case"M":case"L":e=Bt(Ge.Month,1,1);break;case"MM":case"LL":e=Bt(Ge.Month,2,1);break;case"MMM":e=at(We.Months,nt.Abbreviated);break;case"MMMM":e=at(We.Months,nt.Wide);break;case"MMMMM":e=at(We.Months,nt.Narrow);break;case"LLL":e=at(We.Months,nt.Abbreviated,Sn.Standalone);break;case"LLLL":e=at(We.Months,nt.Wide,Sn.Standalone);break;case"LLLLL":e=at(We.Months,nt.Narrow,Sn.Standalone);break;case"w":e=z_(1);break;case"ww":e=z_(2);break;case"W":e=z_(1,!0);break;case"d":e=Bt(Ge.Date,1);break;case"dd":e=Bt(Ge.Date,2);break;case"c":case"cc":e=Bt(Ge.Day,1);break;case"ccc":e=at(We.Days,nt.Abbreviated,Sn.Standalone);break;case"cccc":e=at(We.Days,nt.Wide,Sn.Standalone);break;case"ccccc":e=at(We.Days,nt.Narrow,Sn.Standalone);break;case"cccccc":e=at(We.Days,nt.Short,Sn.Standalone);break;case"E":case"EE":case"EEE":e=at(We.Days,nt.Abbreviated);break;case"EEEE":e=at(We.Days,nt.Wide);break;case"EEEEE":e=at(We.Days,nt.Narrow);break;case"EEEEEE":e=at(We.Days,nt.Short);break;case"a":case"aa":case"aaa":e=at(We.DayPeriods,nt.Abbreviated);break;case"aaaa":e=at(We.DayPeriods,nt.Wide);break;case"aaaaa":e=at(We.DayPeriods,nt.Narrow);break;case"b":case"bb":case"bbb":e=at(We.DayPeriods,nt.Abbreviated,Sn.Standalone,!0);break;case"bbbb":e=at(We.DayPeriods,nt.Wide,Sn.Standalone,!0);break;case"bbbbb":e=at(We.DayPeriods,nt.Narrow,Sn.Standalone,!0);break;case"B":case"BB":case"BBB":e=at(We.DayPeriods,nt.Abbreviated,Sn.Format,!0);break;case"BBBB":e=at(We.DayPeriods,nt.Wide,Sn.Format,!0);break;case"BBBBB":e=at(We.DayPeriods,nt.Narrow,Sn.Format,!0);break;case"h":e=Bt(Ge.Hours,1,-12);break;case"hh":e=Bt(Ge.Hours,2,-12);break;case"H":e=Bt(Ge.Hours,1);break;case"HH":e=Bt(Ge.Hours,2);break;case"m":e=Bt(Ge.Minutes,1);break;case"mm":e=Bt(Ge.Minutes,2);break;case"s":e=Bt(Ge.Seconds,1);break;case"ss":e=Bt(Ge.Seconds,2);break;case"S":e=Bt(Ge.FractionalSeconds,1);break;case"SS":e=Bt(Ge.FractionalSeconds,2);break;case"SSS":e=Bt(Ge.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Xf(Ai.Short);break;case"ZZZZZ":e=Xf(Ai.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Xf(Ai.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Xf(Ai.Long);break;default:return null}return K_[n]=e,e}function IR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function kH(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function FH(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=IR(e,i);return kH(n,r*(o-i))}function LH(n){if(dR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return rp(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(SH))return VH(r)}let e=new Date(n);if(!dR(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function VH(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function dR(n){return n instanceof Date&&!isNaN(n.valueOf())}function ER(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Y_=/\s+/,hR=[],ct=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=hR,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Y_):hR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Y_):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Y_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Re(sr),Re(Ci))}}static{this.\u0275dir=ut({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Q_=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Vn=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Q_(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),fR(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);fR(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Re(fs),Re(U_),Re(W_))}}static{this.\u0275dir=ut({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function fR(n,e){n.context.$implicit=e.item}function UH(n,e){return new X(2100,!1)}var jH="mediumDate",BH=new H(""),$H=new H(""),Wa=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??jH,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return AH(t,s,o||this.locale,a)}catch(s){throw UH(n,s.message)}}static{this.\u0275fac=function(r){return new(r||n)(Re(zf,16),Re(BH,24),Re($H,24))}}static{this.\u0275pipe=mA({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Z_="browser",HH="server";function J_(n){return n===Z_}function X_(n){return n===HH}var ip=class{};var nw=class extends np{constructor(){super(...arguments),this.supportsDOMEvents=!0}},rw=class n extends nw{static makeCurrent(){mR(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=qH();return t==null?null:WH(t)}resetBaseElement(){su=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ER(document.cookie,e)}},su=null;function qH(){return su=su||document.querySelector("base"),su?su.getAttribute("href"):null}function WH(n){return new URL(n,document.baseURI).pathname}var GH=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),iw=new H(""),SR=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new X(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ce(iw),ce(ae))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),ap=class{constructor(e){this._doc=e}},ew="ng-app-id",DR=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=X_(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${ew}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(ew),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(ew,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ce(Ln),ce(E_),ce(T_,8),ce(Er))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),tw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sw=/%COMP%/g,AR="%COMP%",zH=`_nghost-${AR}`,KH=`_ngcontent-${AR}`,YH=!0,QH=new H("",{providedIn:"root",factory:()=>YH});function ZH(n){return KH.replace(sw,n)}function JH(n){return zH.replace(sw,n)}function xR(n,e){return e.map(t=>t.replace(sw,n))}var CR=(()=>{class n{constructor(t,r,i,o,s,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=X_(a),this.defaultRenderer=new au(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===qr.ShadowDom&&(r=Ee(B({},r),{encapsulation:qr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof cp?i.applyToHost(t):i instanceof cu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case qr.Emulated:o=new cp(c,u,r,this.appId,d,s,a,f);break;case qr.ShadowDom:return new ow(c,u,t,r,s,a,this.nonce,f);default:o=new cu(c,u,r,d,s,a,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ce(SR),ce(DR),ce(E_),ce(QH),ce(Ln),ce(Er),ce(ae),ce(T_))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),au=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(tw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(TR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(TR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new X(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=tw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=tw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(gi.DashCase|gi.Important)?e.style.setProperty(t,r,i&gi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&gi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=xi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function TR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var ow=class extends au{constructor(e,t,r,i,o,s,a,c){super(e,o,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=xR(i.id,i.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cu=class extends au{constructor(e,t,r,i,o,s,a,c){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?xR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cp=class extends cu{constructor(e,t,r,i,o,s,a,c){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,u),this.contentAttr=ZH(u),this.hostAttr=JH(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},XH=(()=>{class n extends ap{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ce(Ln))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),bR=["alt","control","meta","shift"],eq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},nq=(()=>{class n extends ap{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xi().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),bR.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=eq[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),bR.forEach(s=>{if(s!==i){let a=tq[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ce(Ln))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();function RR(n,e){return cR(B({rootComponent:n},rq(e)))}function rq(n){return{appProviders:[...cq,...n?.providers??[]],platformProviders:aq}}function iq(){rw.makeCurrent()}function oq(){return new zr}function sq(){return px(document),document}var aq=[{provide:Er,useValue:Z_},{provide:C_,useValue:iq,multi:!0},{provide:Ln,useFactory:sq,deps:[]}];var cq=[{provide:xf,useValue:"root"},{provide:zr,useFactory:oq,deps:[]},{provide:iw,useClass:XH,multi:!0,deps:[Ln,ae,Er]},{provide:iw,useClass:nq,multi:!0,deps:[Ln]},CR,DR,SR,{provide:ja,useExisting:CR},{provide:ip,useClass:GH,deps:[]},[]];var lp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ce(Ln))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ie="primary",Su=Symbol("RouteTitle"),dw=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Za(n){return new dw(n)}function lq(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function uq(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qr(n[t],e[t]))return!1;return!0}function Qr(n,e){let t=n?hw(n):void 0,r=e?hw(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!UR(n[i],e[i]))return!1;return!0}function hw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function UR(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function jR(n){return n.length>0?n[n.length-1]:null}function Co(n){return zv(n)?n:ms(n)?pt(Promise.resolve(n)):oe(n)}var dq={exact:$R,subset:HR},BR={exact:hq,subset:fq,ignored:()=>!0};function MR(n,e,t){return dq[t.paths](n.root,e.root,t.matrixParams)&&BR[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function hq(n,e){return Qr(n,e)}function $R(n,e,t){if(!_s(n.segments,e.segments)||!hp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!$R(n.children[r],e.children[r],t))return!1;return!0}function fq(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>UR(n[t],e[t]))}function HR(n,e,t){return qR(n,e,e.segments,t)}function qR(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!_s(i,t)||e.hasChildren()||!hp(i,t,r))}else if(n.segments.length===t.length){if(!_s(n.segments,t)||!hp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!HR(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!_s(n.segments,i)||!hp(n.segments,i,r)||!n.children[Ie]?!1:qR(n.children[Ie],e,o,r)}}function hp(n,e,t){return e.every((r,i)=>BR[t](n[i].parameters,r.parameters))}var Ni=class{constructor(e=new Ye([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){return gq.serialize(this)}},Ye=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fp(this)}},ys=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Za(this.parameters),this._parameterMap}toString(){return GR(this)}};function pq(n,e){return _s(n,e)&&n.every((t,r)=>Qr(t.parameters,e[r].parameters))}function _s(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function mq(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Ie&&(t=t.concat(e(i,r)))}),t}var Lw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>new mu,providedIn:"root"})}}return n})(),mu=class{parse(e){let t=new pw(e);return new Ni(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${lu(e.root,!0)}`,r=_q(e.queryParams),i=typeof e.fragment=="string"?`#${vq(e.fragment)}`:"";return`${t}${r}${i}`}},gq=new mu;function fp(n){return n.segments.map(e=>GR(e)).join("/")}function lu(n,e){if(!n.hasChildren())return fp(n);if(e){let t=n.children[Ie]?lu(n.children[Ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Ie&&r.push(`${i}:${lu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=mq(n,(r,i)=>i===Ie?[lu(n.children[Ie],!1)]:[`${i}:${lu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ie]!=null?`${fp(n)}/${t[0]}`:`${fp(n)}/(${t.join("//")})`}}function WR(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function up(n){return WR(n).replace(/%3B/gi,";")}function vq(n){return encodeURI(n)}function fw(n){return WR(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function pp(n){return decodeURIComponent(n)}function PR(n){return pp(n.replace(/\+/g,"%20"))}function GR(n){return`${fw(n.path)}${yq(n.parameters)}`}function yq(n){return Object.entries(n).map(([e,t])=>`;${fw(e)}=${fw(t)}`).join("")}function _q(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${up(t)}=${up(i)}`).join("&"):`${up(t)}=${up(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var wq=/^[^\/()?;#]+/;function aw(n){let e=n.match(wq);return e?e[0]:""}var Iq=/^[^\/()?;=#]+/;function Eq(n){let e=n.match(Iq);return e?e[0]:""}var Cq=/^[^=?&#]+/;function Tq(n){let e=n.match(Cq);return e?e[0]:""}var bq=/^[^&#]+/;function Sq(n){let e=n.match(bq);return e?e[0]:""}var pw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ie]=new Ye(e,t)),r}parseSegment(){let e=aw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new X(4009,!1);return this.capture(e),new ys(pp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Eq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=aw(this.remaining);i&&(r=i,this.capture(r))}e[pp(t)]=pp(r)}parseQueryParam(e){let t=Tq(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=Sq(this.remaining);s&&(r=s,this.capture(r))}let i=PR(t),o=PR(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=aw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new X(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Ie);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Ie]:new Ye([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new X(4011,!1)}};function zR(n){return n.segments.length>0?new Ye([],{[Ie]:n}):n}function KR(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=KR(i);if(r===Ie&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Ye(n.segments,e);return Dq(t)}function Dq(n){if(n.numberOfChildren===1&&n.children[Ie]){let e=n.children[Ie];return new Ye(n.segments.concat(e.segments),e.children)}return n}function gu(n){return n instanceof Ni}function Aq(n,e,t=null,r=null){let i=YR(n);return QR(i,e,t,r)}function YR(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Ye(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=zR(r);return e??i}function QR(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return cw(i,i,i,t,r);let o=xq(e);if(o.toRoot())return cw(i,i,new Ye([],{}),t,r);let s=Rq(o,i,n),a=s.processChildren?hu(s.segmentGroup,s.index,o.commands):JR(s.segmentGroup,s.index,o.commands);return cw(i,s.segmentGroup,a,t,r)}function mp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function vu(n){return typeof n=="object"&&n!=null&&n.outlets}function cw(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=ZR(n,e,t);let a=zR(KR(s));return new Ni(a,o,i)}function ZR(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=ZR(o,e,t)}),new Ye(n.segments,r)}var gp=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mp(r[0]))throw new X(4003,!1);let i=r.find(vu);if(i&&i!==jR(r))throw new X(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xq(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new gp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new gp(t,e,r)}var Ka=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Rq(n,e,t){if(n.isAbsolute)return new Ka(e,!0,0);if(!t)return new Ka(e,!1,NaN);if(t.parent===null)return new Ka(t,!0,0);let r=mp(n.commands[0])?0:1,i=t.segments.length-1+r;return Nq(t,i,n.numberOfDoubleDots)}function Nq(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new X(4005,!1);i=r.segments.length}return new Ka(r,!1,i-o)}function Mq(n){return vu(n[0])?n[0].outlets:{[Ie]:n}}function JR(n,e,t){if(n??=new Ye([],{}),n.segments.length===0&&n.hasChildren())return hu(n,e,t);let r=Pq(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Ye(n.segments.slice(0,r.pathIndex),{});return o.children[Ie]=new Ye(n.segments.slice(r.pathIndex),n.children),hu(o,0,i)}else return r.match&&i.length===0?new Ye(n.segments,{}):r.match&&!n.hasChildren()?mw(n,e,t):r.match?hu(n,0,i):mw(n,e,t)}function hu(n,e,t){if(t.length===0)return new Ye(n.segments,{});{let r=Mq(t),i={};if(Object.keys(r).some(o=>o!==Ie)&&n.children[Ie]&&n.numberOfChildren===1&&n.children[Ie].segments.length===0){let o=hu(n.children[Ie],e,t);return new Ye(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=JR(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ye(n.segments,i)}}function Pq(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(vu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!kR(c,u,s))return o;r+=2}else{if(!kR(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function mw(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(vu(o)){let c=Oq(o.outlets);return new Ye(r,c)}if(i===0&&mp(t[0])){let c=n.segments[e];r.push(new ys(c.path,OR(t[0]))),i++;continue}let s=vu(o)?o.outlets[Ie]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&mp(a)?(r.push(new ys(s,OR(a))),i+=2):(r.push(new ys(s,{})),i++)}return new Ye(r,{})}function Oq(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=mw(new Ye([],{}),0,r))}),e}function OR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function kR(n,e,t){return n==t.path&&Qr(e,t.parameters)}var fu="imperative",rn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(rn||{}),ur=class{constructor(e,t){this.id=e,this.url=t}},yu=class extends ur{constructor(e,t,r="imperative",i=null){super(e,t),this.type=rn.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ws=class extends ur{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=rn.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Qn||{}),gw=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gw||{}),Ri=class extends ur{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=rn.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Is=class extends ur{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=rn.NavigationSkipped}},_u=class extends ur{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=rn.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},vp=class extends ur{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rn.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},vw=class extends ur{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rn.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yw=class extends ur{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=rn.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},_w=class extends ur{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rn.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ww=class extends ur{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=rn.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Iw=class{constructor(e){this.route=e,this.type=rn.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ew=class{constructor(e){this.route=e,this.type=rn.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Cw=class{constructor(e){this.snapshot=e,this.type=rn.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tw=class{constructor(e){this.snapshot=e,this.type=rn.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},bw=class{constructor(e){this.snapshot=e,this.type=rn.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wu=class{constructor(e){this.snapshot=e,this.type=rn.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Iu=class{},Ja=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function kq(n,e){return n.providers&&!n._injector&&(n._injector=j_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ar(n){return n.outlet||Ie}function Fq(n,e){let t=n.filter(r=>Ar(r)===e);return t.push(...n.filter(r=>Ar(r)!==e)),t}function Du(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Sw=class{get injector(){return Du(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Tp(this.rootInjector),this.attachRef=null}},Tp=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Sw(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ce(nr))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),yp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Dw(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Dw(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Aw(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Aw(e,this._root).map(t=>t.value)}};function Dw(n,e){if(n===e.value)return e;for(let t of e.children){let r=Dw(n,t);if(r)return r}return null}function Aw(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Aw(n,t);if(r.length)return r.unshift(e),r}return[]}var Yn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function za(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _p=class extends yp{constructor(e,t){super(e),this.snapshot=t,Vw(this,e)}toString(){return this.snapshot.toString()}};function XR(n){let e=Lq(n),t=new nn([new ys("",{})]),r=new nn({}),i=new nn({}),o=new nn({}),s=new nn(""),a=new Xa(t,r,o,s,i,Ie,n,e.root);return a.snapshot=e.root,new _p(new Yn(a,[]),e)}function Lq(n){let e={},t={},r={},i="",o=new Ya([],e,r,i,t,Ie,n,null,{});return new Ip("",new Yn(o,[]))}var Xa=class{constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(J(u=>u[Su]))??oe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(J(e=>Za(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(J(e=>Za(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&tN(i)&&(r.resolve[Su]=i.title),r}var Ya=class{get title(){return this.data?.[Su]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Za(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Za(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Ip=class extends yp{constructor(e,t){super(t),this.url=e,Vw(this,t)}toString(){return eN(this._root)}};function Vw(n,e){e.value._routerState=n,e.children.forEach(t=>Vw(n,t))}function eN(n){let e=n.children.length>0?` { ${n.children.map(eN).join(", ")} } `:"";return`${n.value}${e}`}function lw(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qr(e.params,t.params)||n.paramsSubject.next(t.params),uq(e.url,t.url)||n.urlSubject.next(t.url),Qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function xw(n,e){let t=Qr(n.params,e.params)&&pq(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||xw(n.parent,e.parent))}function tN(n){return typeof n.title=="string"||n.title===null}var Uw=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ie,this.activateEvents=new Ut,this.deactivateEvents=new Ut,this.attachEvents=new Ut,this.detachEvents=new Ut,this.parentContexts=R(Tp),this.location=R(fs),this.changeDetector=R(Io),this.inputBinder=R(jw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new X(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new X(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new X(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new X(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Rw(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ut({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ei]})}}return n})(),Rw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Xa?this.route:e===Tp?this.childContexts:this.parent.get(e,t)}},jw=new H("");function Vq(n,e,t){let r=Eu(n,e._root,t?t._root:void 0);return new _p(r,e)}function Eu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Uq(n,e,t);return new Yn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Eu(n,a)),s}}let r=jq(e.value),i=e.children.map(o=>Eu(n,o));return new Yn(r,i)}}function Uq(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Eu(n,r,i);return Eu(n,r)})}function jq(n){return new Xa(new nn(n.url),new nn(n.params),new nn(n.queryParams),new nn(n.fragment),new nn(n.data),n.outlet,n.component,n)}var Cu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},nN="ngNavigationCancelingError";function Ep(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=gu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rN(!1,Qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function rN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[nN]=!0,t.cancellationCode=e,t}function Bq(n){return iN(n)&&gu(n.url)}function iN(n){return!!n&&n[nN]}var $q=(n,e,t,r)=>J(i=>(new Nw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Nw=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),lw(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=za(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=za(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=za(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=za(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new wu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Tw(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(lw(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),lw(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Cp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Qa=class{constructor(e,t){this.component=e,this.route=t}};function Hq(n,e,t){let r=n._root,i=e?e._root:null;return uu(r,i,t,[r.value])}function qq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function tc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!nA(n)?n:e.get(n):r}function uu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=za(e);return n.children.forEach(s=>{Wq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>pu(a,t.getContext(s),i)),i}function Wq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Gq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Cp(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?uu(n,e,a?a.children:null,r,i):uu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Qa(a.outlet.component,s))}else s&&pu(e,a,i),i.canActivateChecks.push(new Cp(r)),o.component?uu(n,null,a?a.children:null,r,i):uu(n,null,t,r,i);return i}function Gq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!_s(n.url,e.url);case"pathParamsOrQueryParamsChange":return!_s(n.url,e.url)||!Qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xw(n,e)||!Qr(n.queryParams,e.queryParams);case"paramsChange":default:return!xw(n,e)}}function pu(n,e,t){let r=za(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?pu(s,e.children.getContext(o),t):pu(s,null,t):pu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Qa(e.outlet.component,i)):t.canDeactivateChecks.push(new Qa(null,i)):t.canDeactivateChecks.push(new Qa(null,i))}function Au(n){return typeof n=="function"}function zq(n){return typeof n=="boolean"}function Kq(n){return n&&Au(n.canLoad)}function Yq(n){return n&&Au(n.canActivate)}function Qq(n){return n&&Au(n.canActivateChild)}function Zq(n){return n&&Au(n.canDeactivate)}function Jq(n){return n&&Au(n.canMatch)}function oN(n){return n instanceof fi||n?.name==="EmptyError"}var dp=Symbol("INITIAL_VALUE");function ec(){return Pn(n=>qe(n.map(e=>e.pipe(pi(1),ba(dp)))).pipe(J(e=>{for(let t of e)if(t!==!0){if(t===dp)return dp;if(t===!1||Xq(t))return t}return!0}),En(e=>e!==dp),pi(1)))}function Xq(n){return gu(n)||n instanceof Cu}function eW(n,e){return Nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?oe(Ee(B({},t),{guardsResult:!0})):tW(s,r,i,n).pipe(Nt(a=>a&&zq(a)?nW(r,o,n,e):oe(a)),J(a=>Ee(B({},t),{guardsResult:a})))})}function tW(n,e,t,r){return pt(n).pipe(Nt(i=>aW(i.component,i.route,t,e,r)),Br(i=>i!==!0,!0))}function nW(n,e,t,r){return pt(e).pipe(es(i=>Ca(iW(i.route.parent,r),rW(i.route,r),sW(n,i.path,t),oW(n,i.route,t))),Br(i=>i!==!0,!0))}function rW(n,e){return n!==null&&e&&e(new bw(n)),oe(!0)}function iW(n,e){return n!==null&&e&&e(new Cw(n)),oe(!0)}function oW(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return oe(!0);let i=r.map(o=>jh(()=>{let s=Du(e)??t,a=tc(o,s),c=Yq(a)?a.canActivate(e,n):_i(s,()=>a(e,n));return Co(c).pipe(Br())}));return oe(i).pipe(ec())}function sW(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>qq(s)).filter(s=>s!==null).map(s=>jh(()=>{let a=s.guards.map(c=>{let u=Du(s.node)??t,d=tc(c,u),f=Qq(d)?d.canActivateChild(r,n):_i(u,()=>d(r,n));return Co(f).pipe(Br())});return oe(a).pipe(ec())}));return oe(o).pipe(ec())}function aW(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return oe(!0);let s=o.map(a=>{let c=Du(e)??i,u=tc(a,c),d=Zq(u)?u.canDeactivate(n,e,t,r):_i(c,()=>u(n,e,t,r));return Co(d).pipe(Br())});return oe(s).pipe(ec())}function cW(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return oe(!0);let o=i.map(s=>{let a=tc(s,n),c=Kq(a)?a.canLoad(e,t):_i(n,()=>a(e,t));return Co(c)});return oe(o).pipe(ec(),sN(r))}function sN(n){return wh(Yt(e=>{if(typeof e!="boolean")throw Ep(n,e)}),J(e=>e===!0))}function lW(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return oe(!0);let o=i.map(s=>{let a=tc(s,n),c=Jq(a)?a.canMatch(e,t):_i(n,()=>a(e,t));return Co(c)});return oe(o).pipe(ec(),sN(r))}var Tu=class{constructor(e){this.segmentGroup=e||null}},bu=class extends Error{constructor(e){super(),this.urlTree=e}};function Ga(n){return Ea(new Tu(n))}function uW(n){return Ea(new X(4e3,!1))}function dW(n){return Ea(rN(!1,Qn.GuardRejected))}var Mw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return oe(r);if(i.numberOfChildren>1||!i.children[Ie])return uW(`${e.redirectTo}`);i=i.children[Ie]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,params:v,data:w,title:P}=i,N=_i(o,()=>a({params:v,data:w,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,title:P}));if(N instanceof Ni)throw new bu(N);t=N}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new bu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Ni(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Ye(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new X(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Pw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function hW(n,e,t,r,i){let o=aN(n,e,t);return o.matched?(r=kq(e,r),lW(r,e,t,i).pipe(J(s=>s===!0?o:B({},Pw)))):oe(o)}function aN(n,e,t){if(e.path==="**")return fW(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},Pw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lq)(t,n,e);if(!i)return B({},Pw);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?B(B({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function fW(n){return{matched:!0,parameters:n.length>0?jR(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function FR(n,e,t,r){return t.length>0&&gW(n,t,r)?{segmentGroup:new Ye(e,mW(r,new Ye(t,n.children))),slicedSegments:[]}:t.length===0&&vW(n,t,r)?{segmentGroup:new Ye(n.segments,pW(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ye(n.segments,n.children),slicedSegments:t}}function pW(n,e,t,r){let i={};for(let o of t)if(bp(n,e,o)&&!r[Ar(o)]){let s=new Ye([],{});i[Ar(o)]=s}return B(B({},r),i)}function mW(n,e){let t={};t[Ie]=e;for(let r of n)if(r.path===""&&Ar(r)!==Ie){let i=new Ye([],{});t[Ar(r)]=i}return t}function gW(n,e,t){return t.some(r=>bp(n,e,r)&&Ar(r)!==Ie)}function vW(n,e,t){return t.some(r=>bp(n,e,r))}function bp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function yW(n,e,t){return e.length===0&&!n.children[t]}var Ow=class{};function _W(n,e,t,r,i,o,s="emptyOnly"){return new kw(n,e,t,r,i,s,o).recognize()}var wW=31,kw=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Mw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new X(4002,`'${e.segmentGroup}'`)}recognize(){let e=FR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(J(({children:t,rootSnapshot:r})=>{let i=new Yn(r,t),o=new Ip("",i),s=Aq(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Ya([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ie,t).pipe(J(r=>({children:r,rootSnapshot:t})),io(r=>{if(r instanceof bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Tu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(J(s=>s instanceof Yn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return pt(o).pipe(es(s=>{let a=r.children[s],c=Fq(t,s);return this.processSegmentGroup(e,c,a,s,i)}),qh((s,a)=>(s.push(...a),s)),oo(null),Xv(),Nt(s=>{if(s===null)return Ga(r);let a=cN(s);return IW(a),oe(a)}))}processSegment(e,t,r,i,o,s,a){return pt(t).pipe(es(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(io(u=>{if(u instanceof Tu)return oe(null);throw u}))),Br(c=>!!c),io(c=>{if(oN(c))return yW(r,i,o)?oe(new Ow):Ga(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Ar(r)!==s&&(s===Ie||!bp(i,o,r))?Ga(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ga(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=aN(t,i,o);if(!c)return Ga(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wW&&(this.allowRedirects=!1));let v=new Ya(o,u,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,LR(i),Ar(i),i.component??i._loadedComponent??null,i,VR(i)),w=wp(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let P=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,v,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(Nt(N=>this.processSegment(e,r,t,N.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=hW(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Pn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Pn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:v}=c,w=new Ya(m,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,LR(r),Ar(r),r.component??r._loadedComponent??null,r,VR(r)),P=wp(w,s,this.paramsInheritanceStrategy);w.params=Object.freeze(P.params),w.data=Object.freeze(P.data);let{segmentGroup:N,slicedSegments:L}=FR(t,m,v,u);if(L.length===0&&N.hasChildren())return this.processChildren(d,u,N,w).pipe(J(Y=>new Yn(w,Y)));if(u.length===0&&L.length===0)return oe(new Yn(w,[]));let W=Ar(r)===o;return this.processSegment(d,u,N,L,W?Ie:o,!0,w).pipe(J(Y=>new Yn(w,Y instanceof Yn?[Y]:[])))}))):Ga(t)))}getChildConfig(e,t,r){return t.children?oe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?oe({routes:t._loadedRoutes,injector:t._loadedInjector}):cW(e,t,r,this.urlSerializer).pipe(Nt(i=>i?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):dW(t))):oe({routes:[],injector:e})}};function IW(n){n.sort((e,t)=>e.value.outlet===Ie?-1:t.value.outlet===Ie?1:e.value.outlet.localeCompare(t.value.outlet))}function EW(n){let e=n.value.routeConfig;return e&&e.path===""}function cN(n){let e=[],t=new Set;for(let r of n){if(!EW(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=cN(r.children);e.push(new Yn(r.value,i))}return e.filter(r=>!t.has(r))}function LR(n){return n.data||{}}function VR(n){return n.resolve||{}}function CW(n,e,t,r,i,o){return Nt(s=>_W(n,e,t,r,s.extractedUrl,i,o).pipe(J(({state:a,tree:c})=>Ee(B({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function TW(n,e){return Nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return oe(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of lN(c))s.add(u);let a=0;return pt(s).pipe(es(c=>o.has(c)?bW(c,r,n,e):(c.data=wp(c,c.parent,n).resolve,oe(void 0))),Yt(()=>a++),Ta(1),Nt(c=>a===s.size?oe(t):Wn))})}function lN(n){let e=n.children.map(t=>lN(t)).flat();return[n,...e]}function bW(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!tN(i)&&(o[Su]=i.title),SW(o,n,e,r).pipe(J(s=>(n._resolvedData=s,n.data=wp(n,n.parent,t).resolve,null)))}function SW(n,e,t,r){let i=hw(n);if(i.length===0)return oe({});let o={};return pt(i).pipe(Nt(s=>DW(n[s],e,t,r).pipe(Br(),Yt(a=>{if(a instanceof Cu)throw Ep(new mu,a);o[s]=a}))),Ta(1),Zv(o),io(s=>oN(s)?Wn:Ea(s)))}function DW(n,e,t,r){let i=Du(e)??r,o=tc(n,i),s=o.resolve?o.resolve(e,t):_i(i,()=>o(e,t));return Co(s)}function uw(n){return Pn(e=>{let t=n(e);return t?pt(t).pipe(J(()=>e)):oe(e)})}var uN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Ie);return r}getResolvedTitleForRoute(t){return t.data[Su]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>R(AW),providedIn:"root"})}}return n})(),AW=(()=>{class n extends uN{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ce(lp))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bw=new H("",{providedIn:"root",factory:()=>({})}),$w=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Fe({type:n,selectors:[["ng-component"]],standalone:!0,features:[Le],decls:1,vars:0,template:function(r,i){r&1&&Te(0,"router-outlet")},dependencies:[Uw],encapsulation:2})}}return n})();function Hw(n){let e=n.children&&n.children.map(Hw),t=e?Ee(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ie&&(t.component=$w),t}var qw=new H(""),xW=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=R(q_)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return oe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Co(t.loadComponent()).pipe(J(dN),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Bl(()=>{this.componentLoaders.delete(t)})),i=new va(r,()=>new gt).pipe(ga());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return oe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=RW(r,this.compiler,t,this.onLoadEndListener).pipe(Bl(()=>{this.childrenLoaders.delete(r)})),s=new va(o,()=>new gt).pipe(ga());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function RW(n,e,t,r){return Co(n.loadChildren()).pipe(J(dN),Nt(i=>i instanceof Zl||Array.isArray(i)?oe(i):pt(e.compileModuleAsync(i))),J(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(qw,[],{optional:!0,self:!0}).flat()),{routes:s.map(Hw),injector:o}}))}function NW(n){return n&&typeof n=="object"&&"default"in n}function dN(n){return NW(n)?n.default:n}var Ww=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>R(MW),providedIn:"root"})}}return n})(),MW=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),PW=new H("");var OW=new H(""),kW=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new gt,this.transitionAbortSubject=new gt,this.configLoader=R(xW),this.environmentInjector=R(nr),this.urlSerializer=R(Lw),this.rootContexts=R(Tp),this.location=R(ou),this.inputBindingEnabled=R(jw,{optional:!0})!==null,this.titleStrategy=R(uN),this.options=R(Bw,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=R(Ww),this.createViewTransition=R(PW,{optional:!0}),this.navigationErrorHandler=R(OW,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>oe(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Iw(i)),r=i=>this.events.next(new Ew(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Ee(B(B({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new nn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(En(o=>o.id!==0),J(o=>Ee(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Pn(o=>{let s=!1,a=!1;return oe(o).pipe(Pn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Qn.SupersededByNewNavigation),Wn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Is(c.id,this.urlSerializer.serialize(c.rawUrl),f,gw.IgnoredSameUrlNavigation)),c.resolve(!1),Wn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return oe(c).pipe(Pn(f=>{let m=this.transitions?.getValue();return this.events.next(new yu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?Wn:Promise.resolve(f)}),CW(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Ee(B({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new vp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:m,source:v,restoredState:w,extras:P}=c,N=new yu(f,this.urlSerializer.serialize(m),v,w);this.events.next(N);let L=XR(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(B({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:Ee(B({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,oe(o)}else{let f="";return this.events.next(new Is(c.id,this.urlSerializer.serialize(c.extractedUrl),f,gw.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Wn}}),Yt(c=>{let u=new vw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),J(c=>(this.currentTransition=o=Ee(B({},c),{guards:Hq(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),eW(this.environmentInjector,c=>this.events.next(c)),Yt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Ep(this.urlSerializer,c.guardsResult);let u=new yw(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),En(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Qn.GuardRejected),!1)),uw(c=>{if(c.guards.canActivateChecks.length)return oe(c).pipe(Yt(u=>{let d=new _w(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Pn(u=>{let d=!1;return oe(u).pipe(TW(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Qn.NoDataFromResolver)}}))}),Yt(u=>{let d=new ww(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),uw(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Yt(m=>{d.component=m}),J(()=>{})));for(let m of d.children)f.push(...u(m));return f};return qe(u(c.targetSnapshot.root)).pipe(oo(null),pi(1))}),uw(()=>this.afterPreactivation()),Pn(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?pt(d).pipe(J(()=>o)):oe(o)}),J(c=>{let u=Vq(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Ee(B({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Yt(()=>{this.events.next(new Iu)}),$q(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),pi(1),Yt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ws(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Zt(this.transitionAbortSubject.pipe(Yt(c=>{throw c}))),Bl(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Qn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),io(c=>{if(a=!0,iN(c))this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Bq(c)?this.events.next(new Ja(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new _u(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=_i(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Cu){let{message:f,cancellationCode:m}=Ep(this.urlSerializer,d);this.events.next(new Ri(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new Ja(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=t.errorHandler(c);o.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Wn}))}))}cancelNavigationTransition(t,r,i){let o=new Ri(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function FW(n){return n!==fu}var LW=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>R(VW),providedIn:"root"})}}return n})(),Fw=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},VW=(()=>{class n extends Fw{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>R(UW),providedIn:"root"})}}return n})(),UW=(()=>{class n extends hN{constructor(){super(...arguments),this.location=R(ou),this.urlSerializer=R(Lw),this.options=R(Bw,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=R(Ww),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ni,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=XR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof yu)this.stateMemento=this.createStateMemento();else if(t instanceof Is)this.rawUrlTree=r.initialUrl;else if(t instanceof vp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Iu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ri&&(t.code===Qn.GuardRejected||t.code===Qn.NoDataFromResolver)?this.restoreHistory(r):t instanceof _u?this.restoreHistory(r,!0):t instanceof ws&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ni?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=B(B({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=B(B({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),du=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(du||{});function jW(n,e){n.events.pipe(En(t=>t instanceof ws||t instanceof Ri||t instanceof _u||t instanceof Is),J(t=>t instanceof ws||t instanceof Is?du.COMPLETE:(t instanceof Ri?t.code===Qn.Redirect||t.code===Qn.SupersededByNewNavigation:!1)?du.REDIRECTING:du.FAILED),En(t=>t!==du.REDIRECTING),pi(1)).subscribe(()=>{e()})}function BW(n){throw n}var $W={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Sp=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=R(Gf),this.stateManager=R(hN),this.options=R(Bw,{optional:!0})||{},this.pendingTasks=R(hs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=R(kW),this.urlSerializer=R(Lw),this.location=R(ou),this.urlHandlingStrategy=R(Ww),this._events=new gt,this.errorHandler=this.options.errorHandler||BW,this.navigated=!1,this.routeReuseStrategy=R(LW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=R(qw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!R(jw,{optional:!0}),this.eventsSubscription=new bt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ri&&r.code!==Qn.Redirect&&r.code!==Qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ws)this.navigated=!0;else if(r instanceof Ja){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||FW(i.source)},s);this.scheduleNavigation(a,fu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}WW(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Hw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=YR(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return QR(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=gu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,fu,null,r)}navigate(t,r={skipLocationChange:!1}){return qW(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},$W):r===!1?i=B({},HW):i=r,gu(t))return MR(this.currentUrlTree,t,i);let o=this.parseUrl(t);return MR(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return jW(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function qW(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new X(4008,!1)}function WW(n){return!(n instanceof Iu)&&!(n instanceof Ja)}var GW=new H("");function fN(n,...e){return ot([{provide:qw,multi:!0,useValue:n},[],{provide:Xa,useFactory:zW,deps:[Sp]},{provide:H_,multi:!0,useFactory:KW},e.map(t=>t.\u0275providers)])}function zW(n){return n.routerState.root}function KW(){let n=R(Ne);return e=>{let t=n.get(gs);if(e!==t.components[0])return;let r=n.get(Sp),i=n.get(YW);n.get(QW)===1&&r.initialNavigation(),n.get(ZW,null,be.Optional)?.setUpPreloading(),n.get(GW,null,be.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YW=new H("",{factory:()=>new gt}),QW=new H("",{providedIn:"root",factory:()=>1});var ZW=new H("");var pN=[];var XW="firebase",eG="10.14.1";ee(XW,eG,"app");var dt=new yi("ANGULARFIRE2_VERSION"),rc=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function $t(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ot=(n,e)=>{let t=e?[e]:ch(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Un=class{constructor(){return Ot(tG)}},tG="app-check";function nc(){}var Dp=class{zone;delegate;constructor(e,t=Wv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},Gw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nc,{},nc,nc)),t.pipe(Yt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Dt=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Dp(Zone.current)),this.insideAngular=t.run(()=>new Dp(Zone.current,Ia)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ce(ae))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ap(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function nG(n){return Ap().ngZone.runOutsideAngular(()=>n())}function Es(n){return Ap().ngZone.run(()=>n())}function rG(n){return iG(Ap())(n)}function iG(n){return function(t){return t=t.lift(new Gw(n.ngZone)),t.pipe(ro(n.outsideAngular),no(n.insideAngular))}}var oG=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Es(()=>n.apply(void 0,r))},$e=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Es(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",nc,{},nc,nc))),r[o]=oG(r[o],t));let i=nG(()=>n.apply(this,r));if(!e)if(i instanceof ge){let o=Ap();return i.pipe(ro(o.outsideAngular),no(o.insideAngular))}else return Es(()=>i);return i instanceof ge?i.pipe(rG):i instanceof Promise?Es(()=>new Promise((o,s)=>i.then(a=>Es(()=>o(a)),a=>Es(()=>s(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Es(()=>i)};var ht=class{constructor(e){return e}},wt=class{constructor(){return ch()}};function sG(n){return n&&n.length===1?n[0]:new ht(Vt())}var zw=new H("angularfire2._apps"),aG={provide:ht,useFactory:sG,deps:[[new fe,zw]]},cG={provide:wt,deps:[[new fe,zw]]};function lG(n){return(e,t)=>{let r=t.get(Er);ee("angularfire",dt.full,"core"),ee("angularfire",dt.full,"app"),ee("angular",tR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ht(i)}}function mN(n,...e){return ot([aG,cG,{provide:zw,useFactory:lG(n),multi:!0,deps:[ae,Ne,Dt,...e]}])}var gN=$e(DS,!0);function NN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var MN=NN,PN=new Lr("auth","Firebase",NN());var Op=new Ur("@firebase/auth");function uG(n,...e){Op.logLevel<=un.WARN&&Op.warn(`Auth (${Nn}): ${n}`,...e)}function Rp(n,...e){Op.logLevel<=un.ERROR&&Op.error(`Auth (${Nn}): ${n}`,...e)}function bo(n,...e){throw fI(n,...e)}function Ts(n,...e){return fI(n,...e)}function ON(n,e,t){let r=Object.assign(Object.assign({},MN()),{[e]:t});return new Lr("auth","Firebase",r).create(e,{appName:n.name})}function Cs(n){return ON(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return PN.create(n,...e)}function pe(n,e,...t){if(!n)throw fI(e,...t)}function Mi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Rp(e),new Error(e)}function So(n,e){n||Mi(e)}function Zw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function dG(){return vN()==="http:"||vN()==="https:"}function vN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function hG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dG()||Sl()||"connection"in navigator)?navigator.onLine:!0}function fG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var bs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,So(t>e,"Short delay should be less than long delay!"),this.isMobile=bl()||oh()}get(){return hG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pI(n,e){So(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var kp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var pG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mG=new bs(3e4,6e4);function mI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function oc(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){return kN(n,i,()=>y(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=Yo(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},u);return yS()||(v.referrerPolicy="no-referrer"),kp.fetch()(FN(n,n.config.apiHost,t,f),v)}))})}function kN(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},pG),e);try{let i=new Jw(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw xp(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xp(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw xp(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw xp(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ON(n,d,u);bo(n,d)}}catch(i){if(i instanceof Rn)throw i;bo(n,"network-request-failed",{message:String(i)})}})}function gG(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){let u=yield oc(n,e,t,r,i);return"mfaPendingCredential"in u&&bo(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function FN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?pI(n.config,i):`${n.config.apiScheme}://${i}`}var Jw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ts(this.auth,"network-request-failed")),mG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ts(n,e,r);return i.customData._tokenResponse=t,i}function vG(n,e){return y(this,null,function*(){return oc(n,"POST","/v1/accounts:delete",e)})}function LN(n,e){return y(this,null,function*(){return oc(n,"POST","/v1/accounts:lookup",e)})}function xu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gI(n,e=!1){return y(this,null,function*(){let t=Pe(n),r=yield t.getIdToken(e),i=vI(r);pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:xu(Kw(i.auth_time)),issuedAtTime:xu(Kw(i.iat)),expirationTime:xu(Kw(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function Kw(n){return Number(n)*1e3}function vI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Rp("JWT malformed, contained fewer than 3 sections"),null;try{let i=mS(t);return i?JSON.parse(i):(Rp("Failed to decode base64 JWT payload"),null)}catch(i){return Rp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function yN(n){let e=vI(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Nu(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Rn&&yG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function yG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Xw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Mu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Fp(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Nu(n,LN(t,{idToken:r}));pe(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VN(o.providerUserInfo):[],a=_G(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Mu(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function yI(n){return y(this,null,function*(){let e=Pe(n);yield Fp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _G(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function VN(n){return n.map(e=>{var{providerId:t}=e,r=Gv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function wG(n,e){return y(this,null,function*(){let t=yield kN(n,{},()=>y(this,null,function*(){let r=Yo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=FN(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",kp.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function IG(n,e){return y(this,null,function*(){return oc(n,"POST","/v2/accounts:revokeToken",mI(n,e))})}var Ru=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):yN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");let t=yN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield wG(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(pe(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(pe(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(pe(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Mi("not implemented")}};function To(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ic=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Gv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Mu(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield Nu(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return gI(this,e)}reload(){return yI(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Fp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(hi(this.auth.app))return Promise.reject(Cs(this.auth));let e=yield this.getIdToken();return yield Nu(this,vG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,w=(s=t.photoURL)!==null&&s!==void 0?s:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,N=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,L=(u=t.createdAt)!==null&&u!==void 0?u:void 0,W=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:Y,emailVerified:re,isAnonymous:Xe,providerData:se,stsTokenManager:b}=t;pe(Y&&b,e,"internal-error");let _=Ru.fromJSON(this.name,b);pe(typeof Y=="string",e,"internal-error"),To(f,e.name),To(m,e.name),pe(typeof re=="boolean",e,"internal-error"),pe(typeof Xe=="boolean",e,"internal-error"),To(v,e.name),To(w,e.name),To(P,e.name),To(N,e.name),To(L,e.name),To(W,e.name);let I=new n({uid:Y,auth:e,email:m,emailVerified:re,displayName:f,isAnonymous:Xe,photoURL:w,phoneNumber:v,tenantId:P,stsTokenManager:_,createdAt:L,lastLoginAt:W});return se&&Array.isArray(se)&&(I.providerData=se.map(S=>Object.assign({},S))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new Ru;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Fp(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];pe(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?VN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Ru;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Mu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var _N=new Map;function Pi(n){So(n instanceof Function,"Expected a class definition");let e=_N.get(n);return e?(So(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,_N.set(n,e),e)}var EG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),eI=EG;function Np(n,e,t){return`firebase:${n}:${e}:${t}`}var Lp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Np(this.userKey,i.apiKey,o),this.fullPersistenceKey=Np("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ic._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Pi(eI),e,r);let i=(yield Promise.all(t.map(u=>y(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||Pi(eI),s=Np(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f=ic._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>y(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function wN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($N(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(qN(e))return"Blackberry";if(WN(e))return"Webos";if(jN(e))return"Safari";if((e.includes("chrome/")||BN(e))&&!e.includes("edge/"))return"Chrome";if(HN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function UN(n=ln()){return/firefox\//i.test(n)}function jN(n=ln()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BN(n=ln()){return/crios\//i.test(n)}function $N(n=ln()){return/iemobile/i.test(n)}function HN(n=ln()){return/android/i.test(n)}function qN(n=ln()){return/blackberry/i.test(n)}function WN(n=ln()){return/webos/i.test(n)}function _I(n=ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function CG(n=ln()){var e;return _I(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TG(){return _S()&&document.documentMode===10}function GN(n=ln()){return _I(n)||HN(n)||WN(n)||qN(n)||/windows phone/i.test(n)||$N(n)}function zN(n,e=[]){let t;switch(n){case"Browser":t=wN(ln());break;case"Worker":t=`${wN(ln())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nn}/${r}`}var tI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function bG(t){return y(this,arguments,function*(n,e={}){return oc(n,"GET","/v2/passwordPolicy",mI(n,e))})}var SG=6,nI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:SG,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var rI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Vp(this),this.idTokenSubscription=new Vp(this),this.beforeStateQueue=new tI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=PN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Pi(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Lp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield LN(this,{idToken:e}),r=yield ic._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(hi(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Fp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=fG()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(hi(this.app))return Promise.reject(Cs(this));let t=e?Pe(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return hi(this.app)?Promise.reject(Cs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return hi(this.app)?Promise.reject(Cs(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Pi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield bG(this),t=new nI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Lr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield IG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Pi(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=yield Lp.create(this,[Pi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&uG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function wI(n){return Pe(n)}var Vp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=TS(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var II={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DG(n){II=n}function AG(n){return II.loadJS(n)}function xG(){return II.gapiScript}function KN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function EI(n,e){let t=Lt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Rl(o,e??{}))return i;bo(i,"already-initialized")}return t.initialize({options:e})}function RG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Pi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function CI(n,e,t){let r=wI(n);pe(r._canInitEmulator,r,"emulator-config-failed"),pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=YN(e),{host:s,port:a}=NG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||MG()}function YN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NG(n){let e=YN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:IN(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:IN(s)}}}function IN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function MG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Up=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mi("not implemented")}_getIdTokenResponse(e){return Mi("not implemented")}_linkToIdToken(e,t){return Mi("not implemented")}_getReauthenticationResolver(e){return Mi("not implemented")}};function Yw(n,e){return y(this,null,function*(){return gG(n,"POST","/v1/accounts:signInWithIdp",mI(n,e))})}var jp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iI=class extends jp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Pu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield ic._fromIdTokenResponse(e,r,i),s=EN(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=EN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function EN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var oI=class n extends Rn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function QN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?oI._fromErrorAndOperation(n,o,e,r):o})}function PG(n,e,t=!1){return y(this,null,function*(){let r=yield Nu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Pu._forOperation(n,"link",r)})}function OG(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(hi(r.app))return Promise.reject(Cs(r));let i="reauthenticate";try{let o=yield Nu(n,QN(r,i,e,n),t);pe(o.idToken,r,"internal-error");let s=vI(o.idToken);pe(s,r,"internal-error");let{sub:a}=s;return pe(n.uid===a,r,"user-mismatch"),Pu._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&bo(r,"user-mismatch"),o}})}function kG(n,e,t=!1){return y(this,null,function*(){if(hi(n.app))return Promise.reject(Cs(n));let r="signIn",i=yield QN(n,r,e),o=yield Pu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Wp(n,e,t,r){return Pe(n).onIdTokenChanged(e,t,r)}function TI(n,e,t){return Pe(n).beforeAuthStateChanged(e,t)}function Gp(n,e,t,r){return Pe(n).onAuthStateChanged(e,t,r)}var Bp="__sak";var $p=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bp,"1"),this.storage.removeItem(Bp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var FG=1e3,LG=10,VG=(()=>{class n extends $p{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);TG()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,LG):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},FG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Xi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Xi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Xi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),ZN=VG;var UG=(()=>{class n extends $p{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),bI=UG;function jG(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var BG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,s)})),u=yield jG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function JN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var sI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=JN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Zr(){return window}function $G(n){Zr().location.href=n}function XN(){return typeof Zr().WorkerGlobalScope<"u"&&typeof Zr().importScripts=="function"}function HG(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function qG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function WG(){return XN()?self:null}var eM="firebaseLocalStorageDb",GG=1,Hp="firebaseLocalStorage",tM="fbase_key",Ss=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function zp(n,e){return n.transaction([Hp],e?"readwrite":"readonly").objectStore(Hp)}function zG(){let n=indexedDB.deleteDatabase(eM);return new Ss(n).toPromise()}function aI(){let n=indexedDB.open(eM,GG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Hp,{keyPath:tM})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Hp)?e(r):(r.close(),yield zG(),e(yield aI()))}))})}function CN(n,e,t){return y(this,null,function*(){let r=zp(n,!0).put({[tM]:e,value:t});return new Ss(r).toPromise()})}function KG(n,e){return y(this,null,function*(){let t=zp(n,!1).get(e),r=yield new Ss(t).toPromise();return r===void 0?null:r.value})}function TN(n,e){let t=zp(n,!0).delete(e);return new Ss(t).toPromise()}var YG=800,QG=3,ZG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield aI(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>QG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return XN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=BG._getInstance(WG()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield HG(),!this.activeServiceWorker)return;this.sender=new sI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||qG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield aI();return yield CN(t,Bp,"1"),yield TN(t,Bp),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>CN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>KG(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>TN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=zp(o,!1).getAll();return new Ss(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),YG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),nM=ZG;var jse=KN("rcb"),Bse=new bs(3e4,6e4);function JG(n,e){return e?Pi(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ou=class extends Up{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function XG(n){return kG(n.auth,new Ou(n),n.bypassAuthState)}function ez(n){let{auth:e,user:t}=n;return pe(t,e,"internal-error"),OG(t,new Ou(n),n.bypassAuthState)}function tz(n){return y(this,null,function*(){let{auth:e,user:t}=n;return pe(t,e,"internal-error"),PG(t,new Ou(n),n.bypassAuthState)})}var cI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XG;case"linkViaPopup":case"linkViaRedirect":return tz;case"reauthViaPopup":case"reauthViaRedirect":return ez;default:bo(this.auth,"internal-error")}}resolve(e){So(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){So(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var $se=new bs(2e3,1e4);var nz="pendingRedirect",Mp=new Map,lI=class n extends cI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Mp.get(this.auth._key());if(!e){try{let r=(yield rz(this.resolver,this.auth))?yield Xi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Mp.set(this.auth._key(),e)}return this.bypassAuthState||Mp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Xi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Xi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function rz(n,e){return y(this,null,function*(){let t=sz(e),r=oz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function iz(n,e){Mp.set(n._key(),e)}function oz(n){return Pi(n._redirectPersistence)}function sz(n){return Np(nz,n.config.apiKey,n.name)}function az(n,e,t=!1){return y(this,null,function*(){if(hi(n.app))return Promise.reject(Cs(n));let r=wI(n),i=JG(r,e),s=yield new lI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var cz=10*60*1e3,uI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!rM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ts(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cz&&this.cachedEventUids.clear(),this.cachedEventUids.has(bN(e))}saveEventToCache(e){this.cachedEventUids.add(bN(e)),this.lastProcessedEventTime=Date.now()}};function bN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function rM({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function lz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rM(n);default:return!1}}function uz(t){return y(this,arguments,function*(n,e={}){return oc(n,"GET","/v1/projects",e)})}var dz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hz=/^https?/;function fz(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield uz(n);for(let t of e)try{if(pz(t))return}catch{}bo(n,"unauthorized-domain")})}function pz(n){let e=Zw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!hz.test(t))return!1;if(dz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var mz=new bs(3e4,6e4);function SN(){let n=Zr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function gz(n){return new Promise((e,t)=>{var r,i,o;function s(){SN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SN(),t(Ts(n,"network-request-failed"))},timeout:mz.get()})}if(!((i=(r=Zr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Zr().gapi)===null||o===void 0)&&o.load)s();else{let a=KN("iframefcb");return Zr()[a]=()=>{gapi.load?s():t(Ts(n,"network-request-failed"))},AG(`${xG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Pp=null,e})}var Pp=null;function vz(n){return Pp=Pp||gz(n),Pp}var yz=new bs(5e3,15e3),_z="__/auth/iframe",wz="emulator/auth/iframe",Iz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ez=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cz(n){let e=n.config;pe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?pI(e,wz):`https://${n.config.authDomain}/${_z}`,r={apiKey:e.apiKey,appName:n.name,v:Nn},i=Ez.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Yo(r).slice(1)}`}function Tz(n){return y(this,null,function*(){let e=yield vz(n),t=Zr().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:Cz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Iz,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ts(n,"network-request-failed"),a=Zr().setTimeout(()=>{o(s)},yz.get());function c(){Zr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var bz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Sz=500,Dz=600,Az="_blank",xz="http://localhost",qp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Rz(n,e,t,r=Sz,i=Dz){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},bz),{width:r.toString(),height:i.toString(),top:o,left:s}),u=ln().toLowerCase();t&&(a=BN(u)?Az:t),UN(u)&&(e=e||xz,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(CG(u)&&a!=="_self")return Nz(e||"",a),new qp(null);let f=window.open(e||"",a,d);pe(f,n,"popup-blocked");try{f.focus()}catch{}return new qp(f)}function Nz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Mz="__/auth/handler",Pz="emulator/auth/handler",Oz=encodeURIComponent("fac");function DN(n,e,t,r,i,o){return y(this,null,function*(){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Nn,eventId:i};if(e instanceof jp){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Al(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof iI){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${Oz}=${encodeURIComponent(c)}`:"";return`${kz(n)}?${Yo(a).slice(1)}${u}`})}function kz({config:n}){return n.emulator?pI(n,Pz):`https://${n.authDomain}/${Mz}`}var Qw="webStorageSupport",dI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bI,this._completeRedirectFn=az,this._overrideRedirectResult=iz}_openPopup(e,t,r,i){return y(this,null,function*(){var o;So((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield DN(e,t,r,Zw(),i);return Rz(e,s,JN())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield DN(e,t,r,Zw(),i);return $G(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(So(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield Tz(e),r=new uI(e);return t.register("authEvent",i=>(pe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qw,{type:Qw},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Qw];s!==void 0&&t(!!s),bo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=fz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return GN()||jN()||_I()}},iM=dI;var AN="@firebase/auth",xN="1.7.9";var hI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Fz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Lz(n){Rt(new xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;pe(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zN(n)},u=new rI(r,i,o,c);return RG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rt(new xt("auth-internal",e=>{let t=wI(e.getProvider("auth").getImmediate());return(r=>new hI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ee(AN,xN,Fz(n)),ee(AN,xN,"esm2017")}var Vz=5*60,Uz=xv("authIdTokenMaxAge")||Vz,RN=null,jz=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Uz)return;let i=t?.token;RN!==i&&(RN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function SI(n=Vt()){let e=Lt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=EI(n,{popupRedirectResolver:iM,persistence:[nM,ZN,bI]}),r=xv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=jz(o.toString());TI(t,s,()=>s(t.currentUser)),Wp(t,a=>s(a))}}let i=vS("auth");return i&&CI(t,`http://${i}`),t}function Bz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}DG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ts("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Bz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Lz("Browser");function sM(n){return new ge(function(e){var t=Gp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var aM="auth",Ds=class{constructor(e){return e}},xr=class{constructor(){return Ot(aM)}};var DI=new H("angularfire2.auth-instances");function P4(n,e){let t=$t(aM,n,e);return t&&new Ds(t)}function O4(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ds(r)}}var k4={provide:xr,deps:[[new fe,DI]]},F4={provide:Ds,useFactory:P4,deps:[[new fe,DI],ht]};function cM(n,...e){return ee("angularfire",dt.full,"auth"),ot([F4,k4,{provide:DI,useFactory:O4(n),multi:!0,deps:[ae,Ne,Dt,wt,[new fe,Un],...e]}])}var lM=$e(sM,!0);var uM=$e(SI,!0);var Kp="analytics",V4="firebase_id",U4="origin",j4=60*1e3,B4="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",OI="https://www.googletagmanager.com/gtag/js";var Dn=new Ur("@firebase/analytics");var $4={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Zn=new Lr("analytics","Analytics",$4);function H4(n){if(!n.startsWith(OI)){let e=Zn.create("invalid-gtag-resource",{gtagURL:n});return Dn.warn(e.message),""}return n}function vM(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function q4(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function W4(n,e){let t=q4("firebase-js-sdk-policy",{createScriptURL:H4}),r=document.createElement("script"),i=`${OI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function G4(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function z4(n,e,t,r,i,o){return y(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield vM(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Dn.error(a)}n("config",i,o)})}function K4(n,e,t,r,i){return y(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield vM(t);for(let c of s){let u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){Dn.error(o)}})}function Y4(n,e,t,r){function i(o,...s){return y(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield K4(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield z4(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,u]=s;n("get",a,c,u)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){Dn.error(a)}})}return i}function Q4(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=Y4(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function Z4(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(OI)&&t.src.includes(n))return t;return null}var J4=30,X4=1e3,xI=class{constructor(e={},t=X4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},yM=new xI;function e3(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function t3(n){return y(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:e3(r)},o=B4.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Zn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function n3(r){return y(this,arguments,function*(n,e=yM,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Zn.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Zn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new RI;return setTimeout(()=>y(this,null,function*(){c.abort()}),t!==void 0?t:j4),_M({appId:i,apiKey:o,measurementId:s},a,c,e)})}function _M(o,s,a){return y(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=yM){var c;let{appId:u,measurementId:d}=n;try{yield r3(r,e)}catch(f){if(d)return Dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{let f=yield t3(n);return i.deleteThrottleMetadata(u),f}catch(f){let m=f;if(!i3(m)){if(i.deleteThrottleMetadata(u),d)return Dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw f}let v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Ml(t,i.intervalMillis,J4):Ml(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(u,w),Dn.debug(`Calling attemptFetch again in ${v} millis`),_M(n,w,r,i)}})}function r3(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Zn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function i3(n){if(!(n instanceof Rn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var RI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var NI;function o3(n,e,t,r,i){return y(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function s3(n,e,t,r){return y(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var MI;function a3(n){MI=n}function c3(n){NI=n}function l3(){return y(this,null,function*(){if(di())try{yield zo()}catch(n){return Dn.warn(Zn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Dn.warn(Zn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function u3(n,e,t,r,i,o,s){return y(this,null,function*(){var a;let c=n3(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Dn.error(v)),e.push(c);let u=l3().then(v=>{if(v)return r.getId()}),[d,f]=yield Promise.all([c,u]);Z4(o)||W4(o,d.measurementId),MI&&(i("consent","default",MI),a3(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[U4]="firebase",m.update=!0,f!=null&&(m[V4]=f),i("config",d.measurementId,m),NI&&(i("set",NI),c3(void 0)),d.measurementId})}var PI=class{constructor(e){this.app=e}_delete(){return delete sc[this.app.options.appId],Promise.resolve()}},sc={},dM=[],hM={},AI="dataLayer",d3="gtag",fM,kI,pM=!1;function h3(){let n=[];if(Sl()&&n.push("This is a browser extension environment."),Dl()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Zn.create("invalid-analytics-context",{errorInfo:e});Dn.warn(t.message)}}function f3(n,e,t){h3();let r=n.options.appId;if(!r)throw Zn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Zn.create("no-api-key");if(sc[r]!=null)throw Zn.create("already-exists",{id:r});if(!pM){G4(AI);let{wrappedGtag:o,gtagCore:s}=Q4(sc,dM,hM,AI,d3);kI=o,fM=s,pM=!0}return sc[r]=u3(n,dM,hM,e,fM,AI,t),new PI(n)}function wM(n=Vt()){n=Pe(n);let e=Lt(n,Kp);return e.isInitialized()?e.getImmediate():IM(n)}function IM(n,e={}){let t=Lt(n,Kp);if(t.isInitialized()){let i=t.getImmediate();if(Rl(e,t.getOptions()))return i;throw Zn.create("already-initialized")}return t.initialize({options:e})}function EM(){return y(this,null,function*(){if(Sl()||!Dl()||!di())return!1;try{return yield zo()}catch{return!1}})}function CM(n,e,t){n=Pe(n),s3(kI,sc[n.app.options.appId],e,t).catch(r=>Dn.error(r))}function FI(n,e,t,r){n=Pe(n),o3(kI,sc[n.app.options.appId],e,t,r).catch(i=>Dn.error(i))}var mM="@firebase/analytics",gM="0.10.8";function p3(){Rt(new xt(Kp,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return f3(r,i,t)},"PUBLIC")),Rt(new xt("analytics-internal",n,"PRIVATE")),ee(mM,gM),ee(mM,gM,"esm2017");function n(e){try{let t=e.getProvider(Kp).getImmediate();return{logEvent:(r,i,o)=>FI(t,r,i,o)}}catch(t){throw Zn.create("interop-component-reg-failed",{reason:t})}}}p3();var As=class{constructor(e){return e}},SM="analytics",VI=class{constructor(){return Ot(SM)}};var UI="__angularfire_symbol__analyticsIsSupportedValue",DM="__angularfire_symbol__analyticsIsSupported";globalThis[DM]||=EM().then(n=>globalThis[UI]=n).catch(()=>globalThis[UI]=!1);var Yp={async:()=>globalThis[DM],sync:()=>{let n=globalThis[UI];if(n===void 0)throw new Error(rc("Analytics"));return n}},AM=Yp.async,xM=$e(wM,!0);var m3=$e(FI,!0);var g3=$e(CM,!0);var BI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){ee("angularfire",dt.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),AM().then(()=>{let s=i.get(As);s?this.disposables=[lM(t).subscribe(a=>{g3(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ce(Ds),ce(ae),ce(Ne))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),v3="firebase_event_origin",y3="firebase_previous_class",_3="firebase_previous_id",w3="firebase_previous_screen",I3="firebase_screen_class",TM="firebase_screen_id",E3="firebase_screen",jI="outlet",C3="page_path",T3="page_title",ku="screen_class",bM="screen_name",b3="screen_view",S3="auto",D3="#",A3=Math.floor(Math.random()*(2**32-1))-2**31,LI={},x3=n=>{let e=[n[ku],n[jI]].join(D3);if(LI.hasOwnProperty(e))return LI[e];{let t=A3++;return LI[e]=t,t}},R3=(n,e,t)=>n.events.pipe(En(i=>i instanceof wu)).pipe(Pn(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return oe(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",d={[bM]:u,[C3]:`/${s}`,[v3]:S3,[E3]:u,[jI]:i.snapshot.outlet};e&&(d[T3]=e.getTitle());let f=a.component;if(f){if(f===$w){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;f=m.component}}else f=i.snapshot.component;if(typeof f=="string")return oe(Ee(B({},d),{[ku]:f}));if(f){let m=t.resolveComponentFactory(f);return oe(Ee(B({},d),{[ku]:m.selector}))}return oe(null)}),En(i=>!!i),J(i=>B({[I3]:i[ku],[TM]:x3(i)},i)),Jv(i=>i[jI]),Nt(i=>i.pipe(Bh((o,s)=>JSON.stringify(o)===JSON.stringify(s)),ba(void 0),Hh(),J(([o,s])=>o?B({[y3]:o[ku],[w3]:o[bM],[_3]:o[TM]},s):s)))),RM=(()=>{class n{disposable;constructor(t,r,i,o,s,a){ee("angularfire",dt.full,"screen-tracking"),AM().then(()=>{let c=a.get(As);!t||!c||o.runOutsideAngular(()=>{this.disposable=R3(t,r,i).pipe(Pn(u=>y(this,null,function*(){return s&&(yield s.initialized),m3(c,b3,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ce(Sp,8),ce(lp,8),ce(fo),ce(ae),ce(BI,8),ce(Ne))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),$I=new H("angularfire2.analytics-instances");function N3(n,e){if(!Yp.sync())return null;let t=$t(SM,n,e);return t&&new As(t)}function M3(n){return(e,t)=>{if(!Yp.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new As(r)}}var P3={provide:VI,deps:[[new fe,$I]]},O3={provide:As,useFactory:N3,deps:[[new fe,$I],ht]};function NM(n,...e){return ee("angularfire",dt.full,"analytics"),ot([O3,P3,{provide:wo,useValue:Yp.async,multi:!0},{provide:$I,useFactory:M3(n),multi:!0,deps:[ae,Ne,Dt,wt,...e]}])}var MM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},PM={};var Do,HI;(function(){var n;function e(b,_){function I(){}I.prototype=_.prototype,b.D=_.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(S,D,M){for(var E=Array(arguments.length-2),ci=2;ci<arguments.length;ci++)E[ci-2]=arguments[ci];return _.prototype[D].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,_,I){I||(I=0);var S=Array(16);if(typeof _=="string")for(var D=0;16>D;++D)S[D]=_.charCodeAt(I++)|_.charCodeAt(I++)<<8|_.charCodeAt(I++)<<16|_.charCodeAt(I++)<<24;else for(D=0;16>D;++D)S[D]=_[I++]|_[I++]<<8|_[I++]<<16|_[I++]<<24;_=b.g[0],I=b.g[1],D=b.g[2];var M=b.g[3],E=_+(M^I&(D^M))+S[0]+3614090360&4294967295;_=I+(E<<7&4294967295|E>>>25),E=M+(D^_&(I^D))+S[1]+3905402710&4294967295,M=_+(E<<12&4294967295|E>>>20),E=D+(I^M&(_^I))+S[2]+606105819&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(_^D&(M^_))+S[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(M^I&(D^M))+S[4]+4118548399&4294967295,_=I+(E<<7&4294967295|E>>>25),E=M+(D^_&(I^D))+S[5]+1200080426&4294967295,M=_+(E<<12&4294967295|E>>>20),E=D+(I^M&(_^I))+S[6]+2821735955&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(_^D&(M^_))+S[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(M^I&(D^M))+S[8]+1770035416&4294967295,_=I+(E<<7&4294967295|E>>>25),E=M+(D^_&(I^D))+S[9]+2336552879&4294967295,M=_+(E<<12&4294967295|E>>>20),E=D+(I^M&(_^I))+S[10]+4294925233&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(_^D&(M^_))+S[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(M^I&(D^M))+S[12]+1804603682&4294967295,_=I+(E<<7&4294967295|E>>>25),E=M+(D^_&(I^D))+S[13]+4254626195&4294967295,M=_+(E<<12&4294967295|E>>>20),E=D+(I^M&(_^I))+S[14]+2792965006&4294967295,D=M+(E<<17&4294967295|E>>>15),E=I+(_^D&(M^_))+S[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=_+(D^M&(I^D))+S[1]+4129170786&4294967295,_=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(_^I))+S[6]+3225465664&4294967295,M=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(M^_))+S[11]+643717713&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^_&(D^M))+S[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^M&(I^D))+S[5]+3593408605&4294967295,_=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(_^I))+S[10]+38016083&4294967295,M=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(M^_))+S[15]+3634488961&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^_&(D^M))+S[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^M&(I^D))+S[9]+568446438&4294967295,_=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(_^I))+S[14]+3275163606&4294967295,M=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(M^_))+S[3]+4107603335&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^_&(D^M))+S[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(D^M&(I^D))+S[13]+2850285829&4294967295,_=I+(E<<5&4294967295|E>>>27),E=M+(I^D&(_^I))+S[2]+4243563512&4294967295,M=_+(E<<9&4294967295|E>>>23),E=D+(_^I&(M^_))+S[7]+1735328473&4294967295,D=M+(E<<14&4294967295|E>>>18),E=I+(M^_&(D^M))+S[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=_+(I^D^M)+S[5]+4294588738&4294967295,_=I+(E<<4&4294967295|E>>>28),E=M+(_^I^D)+S[8]+2272392833&4294967295,M=_+(E<<11&4294967295|E>>>21),E=D+(M^_^I)+S[11]+1839030562&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^_)+S[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^M)+S[1]+2763975236&4294967295,_=I+(E<<4&4294967295|E>>>28),E=M+(_^I^D)+S[4]+1272893353&4294967295,M=_+(E<<11&4294967295|E>>>21),E=D+(M^_^I)+S[7]+4139469664&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^_)+S[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^M)+S[13]+681279174&4294967295,_=I+(E<<4&4294967295|E>>>28),E=M+(_^I^D)+S[0]+3936430074&4294967295,M=_+(E<<11&4294967295|E>>>21),E=D+(M^_^I)+S[3]+3572445317&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^_)+S[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(I^D^M)+S[9]+3654602809&4294967295,_=I+(E<<4&4294967295|E>>>28),E=M+(_^I^D)+S[12]+3873151461&4294967295,M=_+(E<<11&4294967295|E>>>21),E=D+(M^_^I)+S[15]+530742520&4294967295,D=M+(E<<16&4294967295|E>>>16),E=I+(D^M^_)+S[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=_+(D^(I|~M))+S[0]+4096336452&4294967295,_=I+(E<<6&4294967295|E>>>26),E=M+(I^(_|~D))+S[7]+1126891415&4294967295,M=_+(E<<10&4294967295|E>>>22),E=D+(_^(M|~I))+S[14]+2878612391&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~_))+S[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~M))+S[12]+1700485571&4294967295,_=I+(E<<6&4294967295|E>>>26),E=M+(I^(_|~D))+S[3]+2399980690&4294967295,M=_+(E<<10&4294967295|E>>>22),E=D+(_^(M|~I))+S[10]+4293915773&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~_))+S[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~M))+S[8]+1873313359&4294967295,_=I+(E<<6&4294967295|E>>>26),E=M+(I^(_|~D))+S[15]+4264355552&4294967295,M=_+(E<<10&4294967295|E>>>22),E=D+(_^(M|~I))+S[6]+2734768916&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~_))+S[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=_+(D^(I|~M))+S[4]+4149444226&4294967295,_=I+(E<<6&4294967295|E>>>26),E=M+(I^(_|~D))+S[11]+3174756917&4294967295,M=_+(E<<10&4294967295|E>>>22),E=D+(_^(M|~I))+S[2]+718787259&4294967295,D=M+(E<<15&4294967295|E>>>17),E=I+(M^(D|~_))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+_&4294967295,b.g[1]=b.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+M&4294967295}r.prototype.u=function(b,_){_===void 0&&(_=b.length);for(var I=_-this.blockSize,S=this.B,D=this.h,M=0;M<_;){if(D==0)for(;M<=I;)i(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<_;)if(S[D++]=b.charCodeAt(M++),D==this.blockSize){i(this,S),D=0;break}}else for(;M<_;)if(S[D++]=b[M++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=_},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var _=1;_<b.length-8;++_)b[_]=0;var I=8*this.o;for(_=b.length-8;_<b.length;++_)b[_]=I&255,I/=256;for(this.u(b),b=Array(16),_=I=0;4>_;++_)for(var S=0;32>S;S+=8)b[I++]=this.g[_]>>>S&255;return b};function o(b,_){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=_(b)}function s(b,_){this.h=_;for(var I=[],S=!0,D=b.length-1;0<=D;D--){var M=b[D]|0;S&&M==_||(I[D]=M,S=!1)}this.g=I}var a={};function c(b){return-128<=b&&128>b?o(b,function(_){return new s([_|0],0>_?-1:0)}):new s([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return N(u(-b));for(var _=[],I=1,S=0;b>=I;S++)_[S]=b/I|0,I*=4294967296;return new s(_,0)}function d(b,_){if(b.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(b.charAt(0)=="-")return N(d(b.substring(1),_));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(_,8)),S=f,D=0;D<b.length;D+=8){var M=Math.min(8,b.length-D),E=parseInt(b.substring(D,D+M),_);8>M?(M=u(Math.pow(_,M)),S=S.j(M).add(u(E))):(S=S.j(I),S=S.add(u(E)))}return S}var f=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(P(this))return-N(this).m();for(var b=0,_=1,I=0;I<this.g.length;I++){var S=this.i(I);b+=(0<=S?S:4294967296+S)*_,_*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w(this))return"0";if(P(this))return"-"+N(this).toString(b);for(var _=u(Math.pow(b,6)),I=this,S="";;){var D=re(I,_).g;I=L(I,D.j(_));var M=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=D,w(I))return M+S;for(;6>M.length;)M="0"+M;S=M+S}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function w(b){if(b.h!=0)return!1;for(var _=0;_<b.g.length;_++)if(b.g[_]!=0)return!1;return!0}function P(b){return b.h==-1}n.l=function(b){return b=L(this,b),P(b)?-1:w(b)?0:1};function N(b){for(var _=b.g.length,I=[],S=0;S<_;S++)I[S]=~b.g[S];return new s(I,~b.h).add(m)}n.abs=function(){return P(this)?N(this):this},n.add=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],S=0,D=0;D<=_;D++){var M=S+(this.i(D)&65535)+(b.i(D)&65535),E=(M>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);S=E>>>16,M&=65535,E&=65535,I[D]=E<<16|M}return new s(I,I[I.length-1]&-2147483648?-1:0)};function L(b,_){return b.add(N(_))}n.j=function(b){if(w(this)||w(b))return f;if(P(this))return P(b)?N(this).j(N(b)):N(N(this).j(b));if(P(b))return N(this.j(N(b)));if(0>this.l(v)&&0>b.l(v))return u(this.m()*b.m());for(var _=this.g.length+b.g.length,I=[],S=0;S<2*_;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var D=0;D<b.g.length;D++){var M=this.i(S)>>>16,E=this.i(S)&65535,ci=b.i(D)>>>16,sl=b.i(D)&65535;I[2*S+2*D]+=E*sl,W(I,2*S+2*D),I[2*S+2*D+1]+=M*sl,W(I,2*S+2*D+1),I[2*S+2*D+1]+=E*ci,W(I,2*S+2*D+1),I[2*S+2*D+2]+=M*ci,W(I,2*S+2*D+2)}for(S=0;S<_;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=_;S<2*_;S++)I[S]=0;return new s(I,0)};function W(b,_){for(;(b[_]&65535)!=b[_];)b[_+1]+=b[_]>>>16,b[_]&=65535,_++}function Y(b,_){this.g=b,this.h=_}function re(b,_){if(w(_))throw Error("division by zero");if(w(b))return new Y(f,f);if(P(b))return _=re(N(b),_),new Y(N(_.g),N(_.h));if(P(_))return _=re(b,N(_)),new Y(N(_.g),_.h);if(30<b.g.length){if(P(b)||P(_))throw Error("slowDivide_ only works with positive integers.");for(var I=m,S=_;0>=S.l(b);)I=Xe(I),S=Xe(S);var D=se(I,1),M=se(S,1);for(S=se(S,2),I=se(I,2);!w(S);){var E=M.add(S);0>=E.l(b)&&(D=D.add(I),M=E),S=se(S,1),I=se(I,1)}return _=L(b,D.j(_)),new Y(D,_)}for(D=f;0<=b.l(_);){for(I=Math.max(1,Math.floor(b.m()/_.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),M=u(I),E=M.j(_);P(E)||0<E.l(b);)I-=S,M=u(I),E=M.j(_);w(M)&&(M=m),D=D.add(M),b=L(b,E)}return new Y(D,b)}n.A=function(b){return re(this,b).h},n.and=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],S=0;S<_;S++)I[S]=this.i(S)&b.i(S);return new s(I,this.h&b.h)},n.or=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],S=0;S<_;S++)I[S]=this.i(S)|b.i(S);return new s(I,this.h|b.h)},n.xor=function(b){for(var _=Math.max(this.g.length,b.g.length),I=[],S=0;S<_;S++)I[S]=this.i(S)^b.i(S);return new s(I,this.h^b.h)};function Xe(b){for(var _=b.g.length+1,I=[],S=0;S<_;S++)I[S]=b.i(S)<<1|b.i(S-1)>>>31;return new s(I,b.h)}function se(b,_){var I=_>>5;_%=32;for(var S=b.g.length-I,D=[],M=0;M<S;M++)D[M]=0<_?b.i(M+I)>>>_|b.i(M+I+1)<<32-_:b.i(M+I);return new s(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HI=PM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Do=PM.Integer=s}).apply(typeof MM<"u"?MM:typeof self<"u"?self:typeof window<"u"?window:{});var Qp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Oi={};var qI,k3,ac,WI,Fu,Zp,GI,zI,KI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Qp=="object"&&Qp];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var A=l[g];if(!(A in p))break e;p=p[A]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,g=!1,A={next:function(){if(!g&&p<l.length){var k=p++;return{value:h(k,l[k]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),l.apply(h,A)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,A,k){for(var U=Array(arguments.length-2),et=2;et<arguments.length;et++)U[et-2]=arguments[et];return h.prototype[A].apply(g,U)}}function P(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function N(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let A=l.length||0,k=g.length||0;l.length=A+k;for(let U=0;U<k;U++)l[A+U]=g[U]}else l.push(g)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function W(l){return/^[\s\xa0]*$/.test(l)}function Y(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function re(l){return re[" "](l),l}re[" "]=function(){};var Xe=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function se(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function b(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function _(l){let h={};for(let p in l)h[p]=l[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let p,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(p in g)l[p]=g[p];for(let k=0;k<I.length;k++)p=I[k],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function D(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function M(l){a.setTimeout(()=>{throw l},0)}function E(){var l=iv;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class ci{constructor(){this.h=this.g=null}add(h,p){let g=sl.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var sl=new L(()=>new zL,l=>l.reset());class zL{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let al,cl=!1,iv=new ci,hb=()=>{let l=a.Promise.resolve(void 0);al=()=>{l.then(KL)}};var KL=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){M(p)}var h=sl;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}cl=!1};function Yi(){this.s=this.s,this.C=this.C}Yi.prototype.s=!1,Yi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Yi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function on(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}on.prototype.h=function(){this.defaultPrevented=!0};var YL=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function ll(l,h){if(on.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Xe){e:{try{re(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:QL[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ll.aa.h.call(this)}}w(ll,on);var QL={2:"touch",3:"pen",4:"mouse"};ll.prototype.h=function(){ll.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ul="closure_listenable_"+(1e6*Math.random()|0),ZL=0;function JL(l,h,p,g,A){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=A,this.key=++ZL,this.da=this.fa=!1}function $d(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Hd(l){this.src=l,this.g={},this.h=0}Hd.prototype.add=function(l,h,p,g,A){var k=l.toString();l=this.g[k],l||(l=this.g[k]=[],this.h++);var U=sv(l,h,g,A);return-1<U?(h=l[U],p||(h.fa=!1)):(h=new JL(h,this.src,k,!!g,A),h.fa=p,l.push(h)),h};function ov(l,h){var p=h.type;if(p in l.g){var g=l.g[p],A=Array.prototype.indexOf.call(g,h,void 0),k;(k=0<=A)&&Array.prototype.splice.call(g,A,1),k&&($d(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function sv(l,h,p,g){for(var A=0;A<l.length;++A){var k=l[A];if(!k.da&&k.listener==h&&k.capture==!!p&&k.ha==g)return A}return-1}var av="closure_lm_"+(1e6*Math.random()|0),cv={};function fb(l,h,p,g,A){if(g&&g.once)return mb(l,h,p,g,A);if(Array.isArray(h)){for(var k=0;k<h.length;k++)fb(l,h[k],p,g,A);return null}return p=hv(p),l&&l[ul]?l.K(h,p,u(g)?!!g.capture:!!g,A):pb(l,h,p,!1,g,A)}function pb(l,h,p,g,A,k){if(!h)throw Error("Invalid event type");var U=u(A)?!!A.capture:!!A,et=uv(l);if(et||(l[av]=et=new Hd(l)),p=et.add(h,p,g,U,k),p.proxy)return p;if(g=XL(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)YL||(A=U),A===void 0&&(A=!1),l.addEventListener(h.toString(),g,A);else if(l.attachEvent)l.attachEvent(vb(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function XL(){function l(p){return h.call(l.src,l.listener,p)}let h=eV;return l}function mb(l,h,p,g,A){if(Array.isArray(h)){for(var k=0;k<h.length;k++)mb(l,h[k],p,g,A);return null}return p=hv(p),l&&l[ul]?l.L(h,p,u(g)?!!g.capture:!!g,A):pb(l,h,p,!0,g,A)}function gb(l,h,p,g,A){if(Array.isArray(h))for(var k=0;k<h.length;k++)gb(l,h[k],p,g,A);else g=u(g)?!!g.capture:!!g,p=hv(p),l&&l[ul]?(l=l.i,h=String(h).toString(),h in l.g&&(k=l.g[h],p=sv(k,p,g,A),-1<p&&($d(k[p]),Array.prototype.splice.call(k,p,1),k.length==0&&(delete l.g[h],l.h--)))):l&&(l=uv(l))&&(h=l.g[h.toString()],l=-1,h&&(l=sv(h,p,g,A)),(p=-1<l?h[l]:null)&&lv(p))}function lv(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[ul])ov(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent(vb(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=uv(h))?(ov(p,l),p.h==0&&(p.src=null,h[av]=null)):$d(l)}}}function vb(l){return l in cv?cv[l]:cv[l]="on"+l}function eV(l,h){if(l.da)l=!0;else{h=new ll(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&lv(l),l=p.call(g,h)}return l}function uv(l){return l=l[av],l instanceof Hd?l:null}var dv="__closure_events_fn_"+(1e9*Math.random()>>>0);function hv(l){return typeof l=="function"?l:(l[dv]||(l[dv]=function(h){return l.handleEvent(h)}),l[dv])}function sn(){Yi.call(this),this.i=new Hd(this),this.M=this,this.F=null}w(sn,Yi),sn.prototype[ul]=!0,sn.prototype.removeEventListener=function(l,h,p,g){gb(this,l,h,p,g)};function _n(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new on(h,l);else if(h instanceof on)h.target=h.target||l;else{var A=h;h=new on(g,l),S(h,A)}if(A=!0,p)for(var k=p.length-1;0<=k;k--){var U=h.g=p[k];A=qd(U,g,!0,h)&&A}if(U=h.g=l,A=qd(U,g,!0,h)&&A,A=qd(U,g,!1,h)&&A,p)for(k=0;k<p.length;k++)U=h.g=p[k],A=qd(U,g,!1,h)&&A}sn.prototype.N=function(){if(sn.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)$d(p[g]);delete l.g[h],l.h--}}this.F=null},sn.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},sn.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function qd(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,k=0;k<h.length;++k){var U=h[k];if(U&&!U.da&&U.capture==p){var et=U.listener,tn=U.ha||U.src;U.fa&&ov(l.i,U),A=et.call(tn,g)!==!1&&A}}return A&&!g.defaultPrevented}function yb(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function _b(l){l.g=yb(()=>{l.g=null,l.i&&(l.i=!1,_b(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class tV extends Yi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:_b(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dl(l){Yi.call(this),this.h=l,this.g={}}w(dl,Yi);var wb=[];function Ib(l){se(l.g,function(h,p){this.g.hasOwnProperty(p)&&lv(h)},l),l.g={}}dl.prototype.N=function(){dl.aa.N.call(this),Ib(this)},dl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fv=a.JSON.stringify,nV=a.JSON.parse,rV=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function pv(){}pv.prototype.h=null;function Eb(l){return l.h||(l.h=l.i())}function Cb(){}var hl={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mv(){on.call(this,"d")}w(mv,on);function gv(){on.call(this,"c")}w(gv,on);var Ho={},Tb=null;function Wd(){return Tb=Tb||new sn}Ho.La="serverreachability";function bb(l){on.call(this,Ho.La,l)}w(bb,on);function fl(l){let h=Wd();_n(h,new bb(h))}Ho.STAT_EVENT="statevent";function Sb(l,h){on.call(this,Ho.STAT_EVENT,l),this.stat=h}w(Sb,on);function wn(l){let h=Wd();_n(h,new Sb(h,l))}Ho.Ma="timingevent";function Db(l,h){on.call(this,Ho.Ma,l),this.size=h}w(Db,on);function pl(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function ml(){this.g=!0}ml.prototype.xa=function(){this.g=!1};function iV(l,h,p,g,A,k){l.info(function(){if(l.g)if(k)for(var U="",et=k.split("&"),tn=0;tn<et.length;tn++){var Be=et[tn].split("=");if(1<Be.length){var an=Be[0];Be=Be[1];var cn=an.split("_");U=2<=cn.length&&cn[1]=="type"?U+(an+"="+Be+"&"):U+(an+"=redacted&")}}else U=null;else U=k;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+h+`
`+p+`
`+U})}function oV(l,h,p,g,A,k,U){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+h+`
`+p+`
`+k+" "+U})}function ia(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+aV(l,p)+(g?" "+g:"")})}function sV(l,h){l.info(function(){return"TIMEOUT: "+h})}ml.prototype.info=function(){};function aV(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var k=A[0];if(k!="noop"&&k!="stop"&&k!="close")for(var U=1;U<A.length;U++)A[U]=""}}}}return fv(p)}catch{return h}}var Gd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ab={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},vv;function zd(){}w(zd,pv),zd.prototype.g=function(){return new XMLHttpRequest},zd.prototype.i=function(){return{}},vv=new zd;function Qi(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new dl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xb}function xb(){this.i=null,this.g="",this.h=!1}var Rb={},yv={};function _v(l,h,p){l.L=1,l.v=Zd(li(h)),l.m=p,l.P=!0,Nb(l,null)}function Nb(l,h){l.F=Date.now(),Kd(l),l.A=li(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),Wb(p.i,"t",g),l.C=0,p=l.j.J,l.h=new xb,l.g=lS(l.j,p?h:null,!l.m),0<l.O&&(l.M=new tV(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(wb[0]=A.toString()),A=wb);for(var k=0;k<A.length;k++){var U=fb(p,A[k],g||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),fl(),iV(l.i,l.u,l.A,l.l,l.R,l.m)}Qi.prototype.ca=function(l){l=l.target;let h=this.M;h&&ui(l)==3?h.j():this.Y(l)},Qi.prototype.Y=function(l){try{if(l==this.g)e:{let cn=ui(this.g);var h=this.g.Ba();let aa=this.g.Z();if(!(3>cn)&&(cn!=3||this.g&&(this.h.h||this.g.oa()||Jb(this.g)))){this.J||cn!=4||h==7||(h==8||0>=aa?fl(3):fl(2)),wv(this);var p=this.g.Z();this.X=p;t:if(Mb(this)){var g=Jb(this.g);l="";var A=g.length,k=ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qo(this),gl(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(k&&h==A-1)});g.length=0,this.h.g+=l,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,oV(this.i,this.u,this.A,this.l,this.R,cn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var et,tn=this.g;if((et=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!W(et)){var Be=et;break t}}Be=null}if(p=Be)ia(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Iv(this,p);else{this.o=!1,this.s=3,wn(12),qo(this),gl(this);break e}}if(this.P){p=!0;let gr;for(;!this.J&&this.C<U.length;)if(gr=cV(this,U),gr==yv){cn==4&&(this.s=4,wn(14),p=!1),ia(this.i,this.l,null,"[Incomplete Response]");break}else if(gr==Rb){this.s=4,wn(15),ia(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else ia(this.i,this.l,gr,null),Iv(this,gr);if(Mb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),cn!=4||U.length!=0||this.h.h||(this.s=1,wn(16),p=!1),this.o=this.o&&p,!p)ia(this.i,this.l,U,"[Invalid Chunked Response]"),qo(this),gl(this);else if(0<U.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Dv(an),an.M=!0,wn(11))}}else ia(this.i,this.l,U,null),Iv(this,U);cn==4&&qo(this),this.o&&!this.J&&(cn==4?oS(this.j,this):(this.o=!1,Kd(this)))}else bV(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),qo(this),gl(this)}}}catch{}finally{}};function Mb(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function cV(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?yv:(p=Number(h.substring(p,g)),isNaN(p)?Rb:(g+=1,g+p>h.length?yv:(h=h.slice(g,g+p),l.C=g+p,h)))}Qi.prototype.cancel=function(){this.J=!0,qo(this)};function Kd(l){l.S=Date.now()+l.I,Pb(l,l.I)}function Pb(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=pl(m(l.ba,l),h)}function wv(l){l.B&&(a.clearTimeout(l.B),l.B=null)}Qi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(sV(this.i,this.A),this.L!=2&&(fl(),wn(17)),qo(this),this.s=2,gl(this)):Pb(this,this.S-l)};function gl(l){l.j.G==0||l.J||oS(l.j,l)}function qo(l){wv(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Ib(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Iv(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Ev(p.h,l))){if(!l.K&&Ev(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)nh(p),eh(p);else break e;Sv(p),wn(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=pl(m(p.Za,p),6e3));if(1>=Fb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Go(p,11)}else if((l.K||p.g==l)&&nh(p),!W(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Be=A[h];if(p.T=Be[0],Be=Be[1],p.G==2)if(Be[0]=="c"){p.K=Be[1],p.ia=Be[2];let an=Be[3];an!=null&&(p.la=an,p.j.info("VER="+p.la));let cn=Be[4];cn!=null&&(p.Aa=cn,p.j.info("SVER="+p.Aa));let aa=Be[5];aa!=null&&typeof aa=="number"&&0<aa&&(g=1.5*aa,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let gr=l.g;if(gr){let ih=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ih){var k=g.h;k.g||ih.indexOf("spdy")==-1&&ih.indexOf("quic")==-1&&ih.indexOf("h2")==-1||(k.j=k.l,k.g=new Set,k.h&&(Cv(k,k.h),k.h=null))}if(g.D){let Av=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;Av&&(g.ya=Av,lt(g.I,g.D,Av))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=l;if(g.qa=cS(g,g.J?g.ia:null,g.W),U.K){Lb(g.h,U);var et=U,tn=g.L;tn&&(et.I=tn),et.B&&(wv(et),Kd(et)),g.g=U}else rS(g);0<p.i.length&&th(p)}else Be[0]!="stop"&&Be[0]!="close"||Go(p,7);else p.G==3&&(Be[0]=="stop"||Be[0]=="close"?Be[0]=="stop"?Go(p,7):bv(p):Be[0]!="noop"&&p.l&&p.l.ta(Be),p.v=0)}}fl(4)}catch{}}var lV=class{constructor(l,h){this.g=l,this.map=h}};function Ob(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function kb(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Fb(l){return l.h?1:l.g?l.g.size:0}function Ev(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Cv(l,h){l.g?l.g.add(h):l.h=h}function Lb(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Ob.prototype.cancel=function(){if(this.i=Vb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function Vb(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return P(l.i)}function uV(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function dV(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function Ub(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=dV(l),g=uV(l),A=g.length,k=0;k<A;k++)h.call(void 0,g[k],p&&p[k],l)}var jb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hV(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),A=null;if(0<=g){var k=l[p].substring(0,g);A=l[p].substring(g+1)}else k=l[p];h(k,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Wo(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Wo){this.h=l.h,Yd(this,l.j),this.o=l.o,this.g=l.g,Qd(this,l.s),this.l=l.l;var h=l.i,p=new _l;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Bb(this,p),this.m=l.m}else l&&(h=String(l).match(jb))?(this.h=!1,Yd(this,h[1]||"",!0),this.o=vl(h[2]||""),this.g=vl(h[3]||"",!0),Qd(this,h[4]),this.l=vl(h[5]||"",!0),Bb(this,h[6]||"",!0),this.m=vl(h[7]||"")):(this.h=!1,this.i=new _l(null,this.h))}Wo.prototype.toString=function(){var l=[],h=this.j;h&&l.push(yl(h,$b,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(yl(h,$b,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(yl(p,p.charAt(0)=="/"?mV:pV,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",yl(p,vV)),l.join("")};function li(l){return new Wo(l)}function Yd(l,h,p){l.j=p?vl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Qd(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Bb(l,h,p){h instanceof _l?(l.i=h,yV(l.i,l.h)):(p||(h=yl(h,gV)),l.i=new _l(h,l.h))}function lt(l,h,p){l.i.set(h,p)}function Zd(l){return lt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function vl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function yl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,fV),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function fV(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var $b=/[#\/\?@]/g,pV=/[#\?:]/g,mV=/[#\?]/g,gV=/[#\?@]/g,vV=/#/g;function _l(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Zi(l){l.g||(l.g=new Map,l.h=0,l.i&&hV(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=_l.prototype,n.add=function(l,h){Zi(this),this.i=null,l=oa(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Hb(l,h){Zi(l),h=oa(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function qb(l,h){return Zi(l),h=oa(l,h),l.g.has(h)}n.forEach=function(l,h){Zi(this),this.g.forEach(function(p,g){p.forEach(function(A){l.call(h,A,g,this)},this)},this)},n.na=function(){Zi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let A=l[g];for(let k=0;k<A.length;k++)p.push(h[g])}return p},n.V=function(l){Zi(this);let h=[];if(typeof l=="string")qb(this,l)&&(h=h.concat(this.g.get(oa(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return Zi(this),this.i=null,l=oa(this,l),qb(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Wb(l,h,p){Hb(l,h),0<p.length&&(l.i=null,l.g.set(oa(l,h),P(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let k=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var A=k;U[g]!==""&&(A+="="+encodeURIComponent(String(U[g]))),l.push(A)}}return this.i=l.join("&")};function oa(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function yV(l,h){h&&!l.j&&(Zi(l),l.i=null,l.g.forEach(function(p,g){var A=g.toLowerCase();g!=A&&(Hb(this,g),Wb(this,A,p))},l)),l.j=h}function _V(l,h){let p=new ml;if(a.Image){let g=new Image;g.onload=v(Ji,p,"TestLoadImage: loaded",!0,h,g),g.onerror=v(Ji,p,"TestLoadImage: error",!1,h,g),g.onabort=v(Ji,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(Ji,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function wV(l,h){let p=new ml,g=new AbortController,A=setTimeout(()=>{g.abort(),Ji(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(k=>{clearTimeout(A),k.ok?Ji(p,"TestPingServer: ok",!0,h):Ji(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Ji(p,"TestPingServer: error",!1,h)})}function Ji(l,h,p,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(p)}catch{}}function IV(){this.g=new rV}function EV(l,h,p){let g=p||"";try{Ub(l,function(A,k){let U=A;u(A)&&(U=fv(A)),h.push(g+k+"="+encodeURIComponent(U))})}catch(A){throw h.push(g+"type="+encodeURIComponent("_badmap")),A}}function wl(l){this.l=l.Ub||null,this.j=l.eb||!1}w(wl,pv),wl.prototype.g=function(){return new Jd(this.l,this.j)},wl.prototype.i=function(l){return function(){return l}}({});function Jd(l,h){sn.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Jd,sn),n=Jd.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,El(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Il(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,El(this)),this.g&&(this.readyState=3,El(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gb(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gb(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Il(this):El(this),this.readyState==3&&Gb(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Il(this))},n.Qa=function(l){this.g&&(this.response=l,Il(this))},n.ga=function(){this.g&&Il(this)};function Il(l){l.readyState=4,l.l=null,l.j=null,l.v=null,El(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function El(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Jd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function zb(l){let h="";return se(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Tv(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=zb(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):lt(l,h,p))}function Tt(l){sn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Tt,sn);var CV=/^https?$/i,TV=["POST","PUT"];n=Tt.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():vv.g(),this.v=this.o?Eb(this.o):Eb(vv),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(k){Kb(this,k);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)p.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let k of g.keys())p.set(k,g.get(k));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(k=>k.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TV,h,void 0))||g||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[k,U]of p)this.g.setRequestHeader(k,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zb(this),this.u=!0,this.g.send(l),this.u=!1}catch(k){Kb(this,k)}};function Kb(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Yb(l),Xd(l)}function Yb(l){l.A||(l.A=!0,_n(l,"complete"),_n(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_n(this,"complete"),_n(this,"abort"),Xd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xd(this,!0)),Tt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Qb(this):this.bb())},n.bb=function(){Qb(this)};function Qb(l){if(l.h&&typeof s<"u"&&(!l.v[1]||ui(l)!=4||l.Z()!=2)){if(l.u&&ui(l)==4)yb(l.Ea,0,l);else if(_n(l,"readystatechange"),ui(l)==4){l.h=!1;try{let U=l.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=U===0){var A=String(l.D).match(jb)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),g=!CV.test(A?A.toLowerCase():"")}p=g}if(p)_n(l,"complete"),_n(l,"success");else{l.m=6;try{var k=2<ui(l)?l.g.statusText:""}catch{k=""}l.l=k+" ["+l.Z()+"]",Yb(l)}}finally{Xd(l)}}}}function Xd(l,h){if(l.g){Zb(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||_n(l,"ready");try{p.onreadystatechange=g}catch{}}}function Zb(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function ui(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<ui(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),nV(h)}};function Jb(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function bV(l){let h={};l=(l.g&&2<=ui(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(W(l[g]))continue;var p=D(l[g]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let k=h[A]||[];h[A]=k,k.push(p)}b(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Cl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Xb(l){this.Aa=0,this.i=[],this.j=new ml,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Cl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Cl("baseRetryDelayMs",5e3,l),this.cb=Cl("retryDelaySeedMs",1e4,l),this.Wa=Cl("forwardChannelMaxRetries",2,l),this.wa=Cl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Ob(l&&l.concurrentRequestLimit),this.Da=new IV,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xb.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,g){wn(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=cS(this,null,this.W),th(this)};function bv(l){if(eS(l),l.G==3){var h=l.U++,p=li(l.I);if(lt(p,"SID",l.K),lt(p,"RID",h),lt(p,"TYPE","terminate"),Tl(l,p),h=new Qi(l,l.j,h),h.L=2,h.v=Zd(li(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=lS(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Kd(h)}aS(l)}function eh(l){l.g&&(Dv(l),l.g.cancel(),l.g=null)}function eS(l){eh(l),l.u&&(a.clearTimeout(l.u),l.u=null),nh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function th(l){if(!kb(l.h)&&!l.s){l.s=!0;var h=l.Ga;al||hb(),cl||(al(),cl=!0),iv.add(h,l),l.B=0}}function SV(l,h){return Fb(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=pl(m(l.Ga,l,h),sS(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new Qi(this,this.j,l),k=this.o;if(this.S&&(k?(k=_(k),S(k,this.S)):k=this.S),this.m!==null||this.O||(A.H=k,k=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=nS(this,A,h),p=li(this.I),lt(p,"RID",l),lt(p,"CVER",22),this.D&&lt(p,"X-HTTP-Session-Id",this.D),Tl(this,p),k&&(this.O?h="headers="+encodeURIComponent(String(zb(k)))+"&"+h:this.m&&Tv(p,this.m,k)),Cv(this.h,A),this.Ua&&lt(p,"TYPE","init"),this.P?(lt(p,"$req",h),lt(p,"SID","null"),A.T=!0,_v(A,p,null)):_v(A,p,h),this.G=2}}else this.G==3&&(l?tS(this,l):this.i.length==0||kb(this.h)||tS(this))};function tS(l,h){var p;h?p=h.l:p=l.U++;let g=li(l.I);lt(g,"SID",l.K),lt(g,"RID",p),lt(g,"AID",l.T),Tl(l,g),l.m&&l.o&&Tv(g,l.m,l.o),p=new Qi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=nS(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Cv(l.h,p),_v(p,g,h)}function Tl(l,h){l.H&&se(l.H,function(p,g){lt(h,g,p)}),l.l&&Ub({},function(p,g){lt(h,g,p)})}function nS(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var A=l.i;let k=-1;for(;;){let U=["count="+p];k==-1?0<p?(k=A[0].g,U.push("ofs="+k)):k=0:U.push("ofs="+k);let et=!0;for(let tn=0;tn<p;tn++){let Be=A[tn].g,an=A[tn].map;if(Be-=k,0>Be)k=Math.max(0,A[tn].g-100),et=!1;else try{EV(an,U,"req"+Be+"_")}catch{g&&g(an)}}if(et){g=U.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function rS(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;al||hb(),cl||(al(),cl=!0),iv.add(h,l),l.v=0}}function Sv(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=pl(m(l.Fa,l),sS(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,iS(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=pl(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),eh(this),iS(this))};function Dv(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function iS(l){l.g=new Qi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=li(l.qa);lt(h,"RID","rpc"),lt(h,"SID",l.K),lt(h,"AID",l.T),lt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&lt(h,"TO",l.ja),lt(h,"TYPE","xmlhttp"),Tl(l,h),l.m&&l.o&&Tv(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Zd(li(h)),p.m=null,p.P=!0,Nb(p,l)}n.Za=function(){this.C!=null&&(this.C=null,eh(this),Sv(this),wn(19))};function nh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function oS(l,h){var p=null;if(l.g==h){nh(l),Dv(l),l.g=null;var g=2}else if(Ev(l.h,h))p=h.D,Lb(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=l.B;g=Wd(),_n(g,new Db(g,p)),th(l)}else rS(l);else if(A=h.s,A==3||A==0&&0<h.X||!(g==1&&SV(l,h)||g==2&&Sv(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),A){case 1:Go(l,5);break;case 4:Go(l,10);break;case 3:Go(l,6);break;default:Go(l,2)}}}function sS(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Go(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let A=!g;g=new Wo(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Yd(g,"https"),Zd(g),A?_V(g.toString(),p):wV(g.toString(),p)}else wn(2);l.G=0,l.l&&l.l.sa(h),aS(l),eS(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function aS(l){if(l.G=0,l.ka=[],l.l){let h=Vb(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function cS(l,h,p){var g=p instanceof Wo?li(p):new Wo(p);if(g.g!="")h&&(g.g=h+"."+g.g),Qd(g,g.s);else{var A=a.location;g=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var k=new Wo(null);g&&Yd(k,g),h&&(k.g=h),A&&Qd(k,A),p&&(k.l=p),g=k}return p=l.D,h=l.ya,p&&h&&lt(g,p,h),lt(g,"VER",l.la),Tl(l,g),g}function lS(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Tt(new wl({eb:p})):new Tt(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uS(){}n=uS.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rh(){}rh.prototype.g=function(l,h){return new qn(l,h)};function qn(l,h){sn.call(this),this.g=new Xb(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!W(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!W(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new sa(this)}w(qn,sn),qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qn.prototype.close=function(){bv(this.g)},qn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=fv(l),l=p);h.i.push(new lV(h.Ya++,l)),h.G==3&&th(h)},qn.prototype.N=function(){this.g.l=null,delete this.j,bv(this.g),delete this.g,qn.aa.N.call(this)};function dS(l){mv.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(dS,mv);function hS(){gv.call(this),this.status=1}w(hS,gv);function sa(l){this.g=l}w(sa,uS),sa.prototype.ua=function(){_n(this.g,"a")},sa.prototype.ta=function(l){_n(this.g,new dS(l))},sa.prototype.sa=function(l){_n(this.g,new hS)},sa.prototype.ra=function(){_n(this.g,"b")},rh.prototype.createWebChannel=rh.prototype.g,qn.prototype.send=qn.prototype.o,qn.prototype.open=qn.prototype.m,qn.prototype.close=qn.prototype.close,KI=Oi.createWebChannelTransport=function(){return new rh},zI=Oi.getStatEventTarget=function(){return Wd()},GI=Oi.Event=Ho,Zp=Oi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gd.NO_ERROR=0,Gd.TIMEOUT=8,Gd.HTTP_ERROR=6,Fu=Oi.ErrorCode=Gd,Ab.COMPLETE="complete",WI=Oi.EventType=Ab,Cb.EventType=hl,hl.OPEN="a",hl.CLOSE="b",hl.ERROR="c",hl.MESSAGE="d",sn.prototype.listen=sn.prototype.K,ac=Oi.WebChannel=Cb,k3=Oi.FetchXmlHttpFactory=wl,Tt.prototype.listenOnce=Tt.prototype.L,Tt.prototype.getLastError=Tt.prototype.Ka,Tt.prototype.getLastErrorCode=Tt.prototype.Ba,Tt.prototype.getStatus=Tt.prototype.Z,Tt.prototype.getResponseJson=Tt.prototype.Oa,Tt.prototype.getResponseText=Tt.prototype.oa,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Ha,qI=Oi.XhrIo=Tt}).apply(typeof Qp<"u"?Qp:typeof self<"u"?self:typeof window<"u"?window:{});var OM="@firebase/firestore";var Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");var Sc="10.14.0";var Ps=new Ur("@firebase/firestore");function Lu(){return Ps.logLevel}function K(n,...e){if(Ps.logLevel<=un.DEBUG){let t=e.map(R0);Ps.debug(`Firestore (${Sc}): ${n}`,...t)}}function ki(n,...e){if(Ps.logLevel<=un.ERROR){let t=e.map(R0);Ps.error(`Firestore (${Sc}): ${n}`,...t)}}function pc(n,...e){if(Ps.logLevel<=un.WARN){let t=e.map(R0);Ps.warn(`Firestore (${Sc}): ${n}`,...t)}}function R0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function de(n="Unexpected state"){let e=`FIRESTORE (${Sc}) INTERNAL ASSERTION FAILED: `+n;throw ki(e),new Error(e)}function Qe(n,e){n||de()}function ve(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends Rn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var ei=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var nm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},XI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jt.UNAUTHENTICATED))}shutdown(){}},eE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},tE=class{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ei,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ei)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new nm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Jt(e)}},nE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},rE=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new nE(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},iE=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},oE=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);let r=o=>{o.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,K("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new iE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function F3(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var rm=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=F3(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function He(n,e){return n<e?-1:n>e?1:0}function mc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var kt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var we=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new kt(0,0))}static max(){return new n(new kt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var im=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&de(),r===void 0?r=e.length-t:r>e.length-t&&de(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},It=class n extends im{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},L3=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Jn=class n extends im{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return L3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ne=class n{constructor(e){this.path=e}static fromPath(e){return new n(It.fromString(e))}static fromName(e){return new n(It.fromString(e).popFirst(5))}static empty(){return new n(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new It(e.slice()))}};var sE=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};sE.UNKNOWN_ID=-1;function V3(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=we.fromTimestamp(r===1e9?new kt(t+1,0):new kt(t,r));return new Os(i,ne.empty(),e)}function U3(n){return new Os(n.readTime,n.key,-1)}var Os=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(we.min(),ne.empty(),-1)}static max(){return new n(we.max(),ne.empty(),-1)}};function j3(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ne.comparator(n.documentKey,e.documentKey),t!==0?t:He(n.largestBatchId,e.largestBatchId))}var B3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",aE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function nd(n){return y(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==B3)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function $3(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function rd(n){return n.name==="IndexedDbTransactionError"}var mP=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function km(n){return n==null}function Hu(n){return n===0&&1/n==-1/0}function H3(n){return typeof n=="number"&&Number.isInteger(n)&&!Hu(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var q3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Cce=[...q3,"documentOverlays"],W3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],G3=W3,z3=[...G3,"indexConfiguration","indexState","indexEntries"];var Tce=[...z3,"globals"];function kM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function gP(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var At=class n{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dc(this.root,e,this.comparator,!1)}getReverseIterator(){return new dc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dc(this.root,e,this.comparator,!0)}},dc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ti=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();let e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}};ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1;ti.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ti(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var fn=class n{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new om(this.data.getIterator())}getIteratorFrom(e){return new om(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},om=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Xr=class n{constructor(e){this.fields=e,e.sort(Jn.comparator)}static empty(){return new n([])}unionWith(e){let t=new fn(Jn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var sm=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var pn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new sm("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pn.EMPTY_BYTE_STRING=new pn("");var K3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Fi(n){if(Qe(!!n),typeof n=="string"){let e=0,t=K3.exec(n);if(Qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ro(n){return typeof n=="string"?pn.fromBase64String(n):pn.fromUint8Array(n)}function N0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function M0(n){let e=n.mapValue.fields.__previous_value__;return N0(e)?M0(e):e}function qu(n){let e=Fi(n.mapValue.fields.__local_write_time__.timestampValue);return new kt(e.seconds,e.nanos)}var cE=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},am=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Jp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?N0(n)?4:yP(n)?9007199254740991:vP(n)?10:11:de()}function ii(n,e){if(n===e)return!0;let t=ks(n);if(t!==ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qu(n).isEqual(qu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Fi(i.timestampValue),a=Fi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ro(i.bytesValue).isEqual(Ro(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return mt(i.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return mt(i.integerValue)===mt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=mt(i.doubleValue),a=mt(o.doubleValue);return s===a?Hu(s)===Hu(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return mc(n.arrayValue.values||[],e.arrayValue.values||[],ii);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(kM(s)!==kM(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!ii(s[c],a[c])))return!1;return!0}(n,e);default:return de()}}function Wu(n,e){return(n.values||[]).find(t=>ii(t,e))!==void 0}function gc(n,e){if(n===e)return 0;let t=ks(n),r=ks(e);if(t!==r)return He(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return He(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=mt(o.integerValue||o.doubleValue),c=mt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return FM(n.timestampValue,e.timestampValue);case 4:return FM(qu(n),qu(e));case 5:return He(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ro(o),c=Ro(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=He(a[u],c[u]);if(d!==0)return d}return He(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=He(mt(o.latitude),mt(s.latitude));return a!==0?a:He(mt(o.longitude),mt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return LM(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},m=s.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,P=He(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:LM(v,w)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Jp.mapValue&&s===Jp.mapValue)return 0;if(o===Jp.mapValue)return 1;if(s===Jp.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=He(c[f],d[f]);if(m!==0)return m;let v=gc(a[c[f]],u[d[f]]);if(v!==0)return v}return He(c.length,d.length)}(n.mapValue,e.mapValue);default:throw de()}}function FM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return He(n,e);let t=Fi(n),r=Fi(e),i=He(t.seconds,r.seconds);return i!==0?i:He(t.nanos,r.nanos)}function LM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=gc(t[i],r[i]);if(o)return o}return He(t.length,r.length)}function vc(n){return lE(n)}function lE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Fi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ro(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ne.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=lE(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${lE(t.fields[s])}`;return i+"}"}(n.mapValue):de()}function VM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function uE(n){return!!n&&"integerValue"in n}function P0(n){return!!n&&"arrayValue"in n}function UM(n){return!!n&&"nullValue"in n}function jM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function em(n){return!!n&&"mapValue"in n}function vP(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Uu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Dc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Uu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Uu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Rr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!em(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uu(t)}setAll(e){let t=Jn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=Uu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());em(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];em(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Dc(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Uu(this.value))}};function _P(n){let e=[];return Dc(n.fields,(t,r)=>{let i=new Jn([t]);if(em(r)){let o=_P(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Xr(e)}var Nr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,we.min(),we.min(),we.min(),Rr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,we.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,we.min(),we.min(),Rr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,we.min(),we.min(),Rr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var yc=class{constructor(e,t){this.position=e,this.inclusive=t}};function BM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ne.comparator(ne.fromName(s.referenceValue),t.key):r=gc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function $M(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ii(n.position[t],e.position[t]))return!1;return!0}var _c=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Y3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var cm=class{},Wt=class n extends cm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new hE(e,t,r):t==="array-contains"?new mE(e,r):t==="in"?new gE(e,r):t==="not-in"?new vE(e,r):t==="array-contains-any"?new yE(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new fE(e,r):new pE(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gc(t,this.value)):t!==null&&ks(this.value)===ks(t)&&this.matchesComparison(gc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Mr=class n extends cm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return wP(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wP(n){return n.op==="and"}function IP(n){return Q3(n)&&wP(n)}function Q3(n){for(let e of n.filters)if(e instanceof Mr)return!1;return!0}function dE(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+vc(n.value);if(IP(n))return n.filters.map(e=>dE(e)).join(",");{let e=n.filters.map(t=>dE(t)).join(",");return`${n.op}(${e})`}}function EP(n,e){return n instanceof Wt?function(r,i){return i instanceof Wt&&r.op===i.op&&r.field.isEqual(i.field)&&ii(r.value,i.value)}(n,e):n instanceof Mr?function(r,i){return i instanceof Mr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&EP(s,i.filters[a]),!0):!1}(n,e):void de()}function CP(n){return n instanceof Wt?function(t){return`${t.field.canonicalString()} ${t.op} ${vc(t.value)}`}(n):n instanceof Mr?function(t){return t.op.toString()+" {"+t.getFilters().map(CP).join(" ,")+"}"}(n):"Filter"}var hE=class extends Wt{constructor(e,t,r){super(e,t,r),this.key=ne.fromName(r.referenceValue)}matches(e){let t=ne.comparator(e.key,this.key);return this.matchesComparison(t)}},fE=class extends Wt{constructor(e,t){super(e,"in",t),this.keys=TP("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},pE=class extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=TP("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function TP(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ne.fromName(r.referenceValue))}var mE=class extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return P0(t)&&Wu(t.arrayValue,this.value)}},gE=class extends Wt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Wu(this.value.arrayValue,t)}},vE=class extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Wu(this.value.arrayValue,t)}},yE=class extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!P0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Wu(this.value.arrayValue,r))}};var _E=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function HM(n,e=null,t=[],r=[],i=null,o=null,s=null){return new _E(n,e,t,r,i,o,s)}function O0(n){let e=ve(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),km(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>vc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>vc(r)).join(",")),e.ue=t}return e.ue}function k0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Y3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EP(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$M(n.startAt,e.startAt)&&$M(n.endAt,e.endAt)}function wE(n){return ne.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Fs=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Z3(n,e,t,r,i,o,s,a){return new Fs(n,e,t,r,i,o,s,a)}function F0(n){return new Fs(n)}function qM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bP(n){return n.collectionGroup!==null}function ju(n){let e=ve(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new fn(Jn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new _c(o,r))}),t.has(Jn.keyField().canonicalString())||e.ce.push(new _c(Jn.keyField(),r))}return e.ce}function ni(n){let e=ve(n);return e.le||(e.le=J3(e,ju(n))),e.le}function J3(n,e){if(n.limitType==="F")return HM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new _c(i.field,o)});let t=n.endAt?new yc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new yc(n.startAt.position,n.startAt.inclusive):null;return HM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function IE(n,e){let t=n.filters.concat([e]);return new Fs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function EE(n,e,t){return new Fs(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fm(n,e){return k0(ni(n),ni(e))&&n.limitType===e.limitType}function SP(n){return`${O0(ni(n))}|lt:${n.limitType}`}function cc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>CP(i)).join(", ")}]`),km(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>vc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>vc(i)).join(",")),`Target(${r})`}(ni(n))}; limitType=${n.limitType})`}function Lm(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ne.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ju(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=BM(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,ju(r),i)||r.endAt&&!function(s,a,c){let u=BM(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,ju(r),i))}(n,e)}function X3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function DP(n){return(e,t)=>{let r=!1;for(let i of ju(n)){let o=e6(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function e6(n,e,t){let r=n.field.isKeyField()?ne.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?gc(c,u):de()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return de()}}var No=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dc(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return gP(this.inner)}size(){return this.innerSize}};var t6=new At(ne.comparator);function Li(){return t6}var AP=new At(ne.comparator);function Vu(...n){let e=AP;for(let t of n)e=e.insert(t.key,t);return e}function xP(n){let e=AP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function xs(){return Bu()}function RP(){return Bu()}function Bu(){return new No(n=>n.toString(),(n,e)=>n.isEqual(e))}var n6=new At(ne.comparator),r6=new fn(ne.comparator);function Me(...n){let e=r6;for(let t of n)e=e.add(t);return e}var i6=new fn(He);function o6(){return i6}function L0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(e)?"-0":e}}function NP(n){return{integerValue:""+n}}function s6(n,e){return H3(e)?NP(e):L0(n,e)}var wc=class{constructor(){this._=void 0}};function a6(n,e,t){return n instanceof Ic?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&N0(o)&&(o=M0(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Ls?PP(n,e):n instanceof Vs?OP(n,e):function(i,o){let s=MP(i,o),a=WM(s)+WM(i.Pe);return uE(s)&&uE(i.Pe)?NP(a):L0(i.serializer,a)}(n,e)}function c6(n,e,t){return n instanceof Ls?PP(n,e):n instanceof Vs?OP(n,e):t}function MP(n,e){return n instanceof Ec?function(r){return uE(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Ic=class extends wc{},Ls=class extends wc{constructor(e){super(),this.elements=e}};function PP(n,e){let t=kP(e);for(let r of n.elements)t.some(i=>ii(i,r))||t.push(r);return{arrayValue:{values:t}}}var Vs=class extends wc{constructor(e){super(),this.elements=e}};function OP(n,e){let t=kP(e);for(let r of n.elements)t=t.filter(i=>!ii(i,r));return{arrayValue:{values:t}}}var Ec=class extends wc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function WM(n){return mt(n.integerValue||n.doubleValue)}function kP(n){return P0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function l6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Ls&&i instanceof Ls||r instanceof Vs&&i instanceof Vs?mc(r.elements,i.elements,ii):r instanceof Ec&&i instanceof Ec?ii(r.Pe,i.Pe):r instanceof Ic&&i instanceof Ic}(n.transform,e.transform)}var CE=class{constructor(e,t){this.version=e,this.transformResults=t}},Ms=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function tm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Cc=class{};function FP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new lm(n.key,Ms.none()):new Us(n.key,n.data,Ms.none());{let t=n.data,r=Rr.empty(),i=new fn(Jn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Vi(n.key,r,new Xr(i.toArray()),Ms.none())}}function u6(n,e,t){n instanceof Us?function(i,o,s){let a=i.value.clone(),c=zM(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Vi?function(i,o,s){if(!tm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=zM(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(LP(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function $u(n,e,t,r){return n instanceof Us?function(o,s,a,c){if(!tm(o.precondition,s))return a;let u=o.value.clone(),d=KM(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Vi?function(o,s,a,c){if(!tm(o.precondition,s))return a;let u=KM(o.fieldTransforms,c,s),d=s.data;return d.setAll(LP(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return tm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function d6(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=MP(r.transform,i||null);o!=null&&(t===null&&(t=Rr.empty()),t.set(r.field,o))}return t||null}function GM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&mc(r,i,(o,s)=>l6(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Us=class extends Cc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vi=class extends Cc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function LP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function zM(n,e,t){let r=new Map;Qe(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,c6(s,a,t[i]))}return r}function KM(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,a6(o,s,e))}return r}var lm=class extends Cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},TE=class extends Cc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var bE=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&u6(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=$u(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=$u(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=RP();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=FP(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(we.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&mc(this.mutations,e.mutations,(t,r)=>GM(t,r))&&mc(this.baseMutations,e.baseMutations,(t,r)=>GM(t,r))}},SE=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qe(e.mutations.length===r.length);let i=function(){return n6}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var DE=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var AE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ht,Ve;function h6(n){switch(n){default:return de();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function VP(n){if(n===void 0)return ki("GRPC error has no .code"),F.UNKNOWN;switch(n){case Ht.OK:return F.OK;case Ht.CANCELLED:return F.CANCELLED;case Ht.UNKNOWN:return F.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return F.INTERNAL;case Ht.UNAVAILABLE:return F.UNAVAILABLE;case Ht.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ht.NOT_FOUND:return F.NOT_FOUND;case Ht.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ht.ABORTED:return F.ABORTED;case Ht.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ht.DATA_LOSS:return F.DATA_LOSS;default:return de()}}(Ve=Ht||(Ht={}))[Ve.OK=0]="OK",Ve[Ve.CANCELLED=1]="CANCELLED",Ve[Ve.UNKNOWN=2]="UNKNOWN",Ve[Ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ve[Ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ve[Ve.NOT_FOUND=5]="NOT_FOUND",Ve[Ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ve[Ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ve[Ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ve[Ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ve[Ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ve[Ve.ABORTED=10]="ABORTED",Ve[Ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ve[Ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ve[Ve.INTERNAL=13]="INTERNAL",Ve[Ve.UNAVAILABLE=14]="UNAVAILABLE",Ve[Ve.DATA_LOSS=15]="DATA_LOSS";var YM=null;function f6(){return new TextEncoder}var p6=new Do([4294967295,4294967295],0);function QM(n){let e=f6().encode(n),t=new HI;return t.update(e),new Uint8Array(t.digest())}function ZM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Do([t,r],0),new Do([i,o],0)]}var xE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rs(`Invalid padding: ${t}`);if(r<0)throw new Rs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rs(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rs(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Do.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Do.fromNumber(r)));return i.compare(p6)===1&&(i=new Do([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=QM(e),[r,i]=ZM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=QM(e),[r,i]=ZM(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Rs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var um=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Gu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(we.min(),i,new At(He),Li(),Me())}},Gu=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Me(),Me(),Me())}};var hc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},dm=class{constructor(e,t){this.targetId=e,this.me=t}},hm=class{constructor(e,t,r=pn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},fm=class{constructor(){this.fe=0,this.ge=XM(),this.pe=pn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),r=Me();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:de()}}),new Gu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=XM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},RE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Li(),this.qe=JM(),this.Qe=new At(He)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:de()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(wE(o))if(r===0){let s=new ne(o.path);this.Ue(t,s,Nr.newNoDocument(s,we.min()))}else Qe(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),c=a?this.Xe(a,e,s):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}YM?.et(function(d,f,m,v,w){var P,N,L,W,Y,re;let Xe={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},se=f.unchangedNames;return se&&(Xe.bloomFilter={applied:w===0,hashCount:(P=se?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(W=(L=(N=se?.bits)===null||N===void 0?void 0:N.bitmap)===null||L===void 0?void 0:L.length)!==null&&W!==void 0?W:0,padding:(re=(Y=se?.bits)===null||Y===void 0?void 0:Y.padding)!==null&&re!==void 0?re:0,mightContain:b=>{var _;return(_=v?.mightContain(b))!==null&&_!==void 0&&_}}),Xe}(s,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ro(r).toUint8Array()}catch(c){if(c instanceof sm)return pc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new xE(s,i,o)}catch(c){return pc(c instanceof Rs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&wE(a.target)){let c=new ne(a.target.path);this.ke.get(c)!==null||this.it(s,c)||this.Ue(s,c,Nr.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=Me();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new um(e,t,this.Qe,this.ke,r);return this.ke=Li(),this.qe=JM(),this.Qe=new At(He),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new fm,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new fn(He),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new fm),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function JM(){return new At(ne.comparator)}function XM(){return new At(ne.comparator)}var m6={asc:"ASCENDING",desc:"DESCENDING"},g6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v6={and:"AND",or:"OR"},NE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function ME(n,e){return n.useProto3Json||km(e)?e:{value:e}}function pm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function UP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function y6(n,e){return pm(n,e.toTimestamp())}function ri(n){return Qe(!!n),we.fromTimestamp(function(t){let r=Fi(t);return new kt(r.seconds,r.nanos)}(n))}function V0(n,e){return PE(n,e).canonicalString()}function PE(n,e){let t=function(i){return new It(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function jP(n){let e=It.fromString(n);return Qe(WP(e)),e}function OE(n,e){return V0(n.databaseId,e.path)}function YI(n,e){let t=jP(e);if(t.get(1)!==n.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ne($P(t))}function BP(n,e){return V0(n.databaseId,e)}function _6(n){let e=jP(n);return e.length===4?It.emptyPath():$P(e)}function kE(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $P(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function eP(n,e,t){return{name:OE(n,e),fields:t.value.mapValue.fields}}function w6(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Qe(d===void 0||typeof d=="string"),pn.fromBase64String(d||"")):(Qe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),pn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?F.UNKNOWN:VP(u.code);return new z(d,u.message||"")}(s);t=new hm(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=YI(n,r.document.name),o=ri(r.document.updateTime),s=r.document.createTime?ri(r.document.createTime):we.min(),a=new Rr({mapValue:{fields:r.document.fields}}),c=Nr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new hc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=YI(n,r.document),o=r.readTime?ri(r.readTime):we.min(),s=Nr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new hc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=YI(n,r.document),o=r.removedTargetIds||[];t=new hc([],o,i,null)}else{if(!("filter"in e))return de();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new AE(i,o),a=r.targetId;t=new dm(a,s)}}return t}function I6(n,e){let t;if(e instanceof Us)t={update:eP(n,e.key,e.value)};else if(e instanceof lm)t={delete:OE(n,e.key)};else if(e instanceof Vi)t={update:eP(n,e.key,e.data),updateMask:R6(e.fieldMask)};else{if(!(e instanceof TE))return de();t={verify:OE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Ic)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ls)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Vs)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ec)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw de()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:y6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de()}(n,e.precondition)),t}function E6(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?ri(i.updateTime):ri(o);return s.isEqual(we.min())&&(s=ri(o)),new CE(s,i.transformResults||[])}(t,e))):[]}function C6(n,e){return{documents:[BP(n,e.path)]}}function T6(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=BP(n,i);let o=function(u){if(u.length!==0)return qP(Mr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:lc(m.field),direction:D6(m.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=ME(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function b6(n){let e=_6(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Qe(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let m=HP(f);return m instanceof Mr&&IP(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(w){return new _c(uc(w.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,km(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){let m=!!f.before,v=f.values||[];return new yc(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let m=!f.before,v=f.values||[];return new yc(v,m)}(t.endAt)),Z3(e,i,s,o,a,"F",c,u)}function S6(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=uc(t.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=uc(t.unaryFilter.field);return Wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=uc(t.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=uc(t.unaryFilter.field);return Wt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(n):n.fieldFilter!==void 0?function(t){return Wt.create(uc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Mr.create(t.compositeFilter.filters.map(r=>HP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return de()}}(t.compositeFilter.op))}(n):de()}function D6(n){return m6[n]}function A6(n){return g6[n]}function x6(n){return v6[n]}function lc(n){return{fieldPath:n.canonicalString()}}function uc(n){return Jn.fromServerFormat(n.fieldPath)}function qP(n){return n instanceof Wt?function(t){if(t.op==="=="){if(jM(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NAN"}};if(UM(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jM(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NOT_NAN"}};if(UM(t.value))return{unaryFilter:{field:lc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lc(t.field),op:A6(t.op),value:t.value}}}(n):n instanceof Mr?function(t){let r=t.getFilters().map(i=>qP(i));return r.length===1?r[0]:{compositeFilter:{op:x6(t.op),filters:r}}}(n):de()}function R6(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function WP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var zu=class n{constructor(e,t,r,i,o=we.min(),s=we.min(),a=pn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var FE=class{constructor(e){this.ct=e}};function N6(n){let e=b6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?EE(e,e.limit,"L"):e}var mm=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(mt(e.integerValue));else if("doubleValue"in e){let r=mt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Hu(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Fi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ro(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?yP(e)?this.dt(t,Number.MAX_SAFE_INTEGER):vP(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):de()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(mt(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ne.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};mm.vt=new mm;var LE=class{constructor(){this.un=new VE}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Os.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Os.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},VE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new fn(It.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new fn(It.comparator)).toArray()}};var Sce=new Uint8Array(0);var Jr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Jr.DEFAULT_COLLECTION_PERCENTILE=10,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jr.DEFAULT=new Jr(41943040,Jr.DEFAULT_COLLECTION_PERCENTILE,Jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jr.DISABLED=new Jr(-1,0,0);var Ku=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var UE=class{constructor(){this.changes=new No(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var jE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var BE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&$u(r.mutation,i,Xr.empty(),kt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){let i=xs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=Vu();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=xs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Li(),s=Bu(),a=function(){return Bu()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Vi)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),$u(d.mutation,u,d.mutation.getFieldMask(),kt.now())):s.set(u.key,Xr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new jE(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Bu(),i=new At((s,a)=>s-a),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Xr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||Me()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=RP();d.forEach(m=>{if(!o.has(m)){let v=FP(t.get(m),r.get(m));v!==null&&f.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ne.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(xs()),a=-1,c=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Me())).next(d=>({batchId:a,changes:xP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ne(t)).next(r=>{let i=Vu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=Vu();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let u=function(f,m){return new Fs(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Nr.newInvalidDocument(d)))});let a=Vu();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&$u(d.mutation,u,Xr.empty(),kt.now()),Lm(t,u)&&(a=a.insert(c,u))}),a})}};var $E=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ri(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:N6(i.bundledQuery),readTime:ri(i.readTime)}}(t)),V.resolve()}};var HE=class{constructor(){this.overlays=new At(ne.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=xs();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=xs(),o=t.length+1,s=new ne(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new At((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=xs(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=xs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new DE(t,r));let o=this.Ir.get(t);o===void 0&&(o=Me(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var qE=class{constructor(){this.sessionToken=pn.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Yu=class{constructor(){this.Tr=new fn(qt.Er),this.dr=new fn(qt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new qt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new qt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ne(new It([])),r=new qt(t,e),i=new qt(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ne(new It([])),r=new qt(t,e),i=new qt(t,e+1),o=Me();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new qt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},qt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ne.comparator(e.key,t.key)||He(e.wr,t.wr)}static Ar(e,t){return He(e.wr,t.wr)||ne.comparator(e.key,t.key)}};var WE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new fn(qt.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new bE(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new qt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new qt(t,0),i=new qt(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new fn(He);return t.forEach(i=>{let o=new qt(i,0),s=new qt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ne.isDocumentKey(o)||(o=o.child(""));let s=new qt(new ne(o),0),a=new fn(He);return this.br.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},s),V.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let o=new qt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new qt(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var GE=class{constructor(e){this.Mr=e,this.docs=function(){return new At(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Nr.newInvalidDocument(t))}getEntries(e,t){let r=Li();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Nr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Li(),s=t.path,a=new ne(s.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||j3(U3(d),r)<=0||(i.has(d.key)||Lm(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){de()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new zE(this)}getSize(e){return V.resolve(this.size)}},zE=class extends UE{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var KE=class{constructor(e){this.persistence=e,this.Nr=new No(t=>O0(t),k0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Yu,this.targetCount=0,this.kr=Ku.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ku(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var YE=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new mP(0),this.Kr=!1,this.Kr=!0,this.$r=new qE,this.referenceDelegate=e(this),this.Ur=new KE(this),this.indexManager=new LE,this.remoteDocumentCache=function(i){return new GE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new FE(t),this.Gr=new $E(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new WE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){K("MemoryPersistence","Starting transaction:",e);let i=new QE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},QE=class extends aE{constructor(e){super(),this.currentSequenceNumber=e}},ZE=class n{constructor(e){this.persistence=e,this.Jr=new Yu,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=ne.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,we.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var JE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Me(),i=Me();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var XE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var e0=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return wS()?8:$3(ln())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new XE;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Lu()<=un.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Lu()<=un.DEBUG&&K("QueryEngine","Query:",cc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Lu()<=un.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ni(t))):V.resolve())}Yi(e,t){if(qM(t))return V.resolve(null);let r=ni(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=EE(t,null,"F"),r=ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Me(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ts(t,a);return this.ns(t,u,s,c.readTime)?this.Yi(e,EE(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return qM(t)||i.isEqual(we.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?V.resolve(null):(Lu()<=un.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),cc(t)),this.rs(e,s,t,V3(i,-1)).next(a=>a))})}ts(e,t){let r=new fn(DP(e));return t.forEach((i,o)=>{Lm(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Lu()<=un.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",cc(t)),this.Ji.getDocumentsMatchingQuery(e,t,Os.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var t0=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new At(He),this._s=new No(o=>O0(o),k0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function M6(n,e,t,r){return new t0(n,e,t,r)}function GP(n,e){return y(this,null,function*(){let t=ve(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Me();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:s,addedBatchIds:a}))})})})}function P6(n,e){let t=ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),v=V.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(P=>{let N=u.docVersions.get(w);Qe(N!==null),P.version.compareTo(N)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),d.addEntry(P)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Me();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zP(n){let e=ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function O6(n,e){let t=ve(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(o,d.addedDocuments,f)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(pn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(P,N,L){return P.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,v,d)&&a.push(t.Ur.updateTargetData(o,v))});let c=Li(),u=Me();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(k6(o,s,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(we.min())){let d=t.Ur.getLastRemoteSnapshotVersion(o).next(f=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.os=i,o))}function k6(n,e,t){let r=Me(),i=Me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Li();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:s,Is:i}})}function F6(n,e){let t=ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L6(n,e){let t=ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new zu(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function n0(n,e,t){return y(this,null,function*(){let r=ve(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!rd(s))throw s;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function tP(n,e,t){let r=ve(n),i=we.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=ve(c),m=f._s.get(d);return m!==void 0?V.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(r,s,ni(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:we.min(),t?o:Me())).next(a=>(V6(r,X3(e),a),{documents:a,Ts:o})))}function V6(n,e,t){let r=n.us.get(e)||we.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}var gm=class{constructor(){this.activeTargetIds=o6()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var r0=class{constructor(){this.so=new gm,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new gm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var i0=class{_o(e){}shutdown(){}};var vm=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Xp=null;function QI(){return Xp===null?Xp=function(){return 268435456+Math.round(2147483648*Math.random())}():Xp++,"0x"+Xp.toString(16)}var U6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var o0=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var hn="WebChannelConnection",s0=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=QI(),c=this.xo(t,r.toUriEncodedString());K("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,o,s),this.No(t,c,u,i).then(d=>(K("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw pc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=U6[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=QI();return new Promise((s,a)=>{let c=new qI;c.setWithCredentials(!0),c.listenOnce(WI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fu.NO_ERROR:let d=c.getResponseJson();K(hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case Fu.TIMEOUT:K(hn,`RPC '${e}' ${o} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Fu.HTTP_ERROR:let f=c.getStatus();if(K(hn,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let w=function(N){let L=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(L)>=0?L:F.UNKNOWN}(v.status);a(new z(w,v.message))}else a(new z(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{K(hn,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);K(hn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=QI(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=KI(),a=zI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");K(hn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),m=!1,v=!1,w=new o0({Io:N=>{v?K(hn,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(m||(K(hn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),K(hn,`RPC '${e}' stream ${i} sending:`,N),f.send(N))},To:()=>f.close()}),P=(N,L,W)=>{N.listen(L,Y=>{try{W(Y)}catch(re){setTimeout(()=>{throw re},0)}})};return P(f,ac.EventType.OPEN,()=>{v||(K(hn,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),P(f,ac.EventType.CLOSE,()=>{v||(v=!0,K(hn,`RPC '${e}' stream ${i} transport closed`),w.So())}),P(f,ac.EventType.ERROR,N=>{v||(v=!0,pc(hn,`RPC '${e}' stream ${i} transport errored:`,N),w.So(new z(F.UNAVAILABLE,"The operation could not be completed")))}),P(f,ac.EventType.MESSAGE,N=>{var L;if(!v){let W=N.data[0];Qe(!!W);let Y=W,re=Y.error||((L=Y[0])===null||L===void 0?void 0:L.error);if(re){K(hn,`RPC '${e}' stream ${i} received error:`,re);let Xe=re.status,se=function(I){let S=Ht[I];if(S!==void 0)return VP(S)}(Xe),b=re.message;se===void 0&&(se=F.INTERNAL,b="Unknown error status: "+Xe+" with message "+re.message),v=!0,w.So(new z(se,b)),f.close()}else K(hn,`RPC '${e}' stream ${i} received:`,W),w.bo(W)}}),P(a,GI.STAT_EVENT,N=>{N.stat===Zp.PROXY?K(hn,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Zp.NOPROXY&&K(hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function ZI(){return typeof document<"u"?document:null}function Vm(n){return new NE(n,!0)}var ym=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var _m=class{constructor(e,t,r,i,o,s,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ym(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(ki(t.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},a0=class extends _m{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=w6(this.serializer,e),r=function(o){if(!("targetChange"in o))return we.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?we.min():s.readTime?ri(s.readTime):we.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=kE(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=wE(c)?{documents:C6(o,c)}:{query:T6(o,c)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=UP(o,s.resumeToken);let u=ME(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(we.min())>0){a.readTime=pm(o,s.snapshotVersion.toTimestamp());let u=ME(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=S6(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=kE(this.serializer),t.removeTarget=e,this.a_(t)}},c0=class extends _m{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=E6(e.writeResults,e.commitTime),r=ri(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=kE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>I6(this.serializer,r))};this.a_(t)}};var l0=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,PE(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,PE(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},u0=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ki(t),this.D_=!1):K("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var d0=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>y(this,null,function*(){$s(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=ve(c);u.L_.add(4),yield id(u),u.q_.set("Unknown"),u.L_.delete(4),yield Um(u)})}(this))}))}),this.q_=new u0(r,i)}};function Um(n){return y(this,null,function*(){if($s(n))for(let e of n.B_)yield e(!0)})}function id(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function KP(n,e){let t=ve(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),$0(t)?B0(t):Ac(t).r_()&&j0(t,e))}function U0(n,e){let t=ve(n),r=Ac(t);t.N_.delete(e),r.r_()&&YP(t,e),t.N_.size===0&&(r.r_()?r.o_():$s(t)&&t.q_.set("Unknown"))}function j0(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ac(n).A_(e)}function YP(n,e){n.Q_.xe(e),Ac(n).R_(e)}function B0(n){n.Q_=new RE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ac(n).start(),n.q_.v_()}function $0(n){return $s(n)&&!Ac(n).n_()&&n.N_.size>0}function $s(n){return ve(n).L_.size===0}function QP(n){n.Q_=void 0}function j6(n){return y(this,null,function*(){n.q_.set("Online")})}function B6(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{j0(n,e)})})}function $6(n,e){return y(this,null,function*(){QP(n),$0(n)?(n.q_.M_(e),B0(n)):n.q_.set("Unknown")})}function H6(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof hm&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield wm(n,r)}else if(e instanceof hc?n.Q_.Ke(e):e instanceof dm?n.Q_.He(e):n.Q_.We(e),!t.isEqual(we.min()))try{let r=yield zP(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.N_.get(u);d&&o.N_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.N_.get(c);if(!d)return;o.N_.set(c,d.withResumeToken(pn.EMPTY_BYTE_STRING,d.snapshotVersion)),YP(o,c);let f=new zu(d.target,c,u,d.sequenceNumber);j0(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){K("RemoteStore","Failed to raise snapshot:",r),yield wm(n,r)}})}function wm(n,e,t){return y(this,null,function*(){if(!rd(e))throw e;n.L_.add(1),yield id(n),n.q_.set("Offline"),t||(t=()=>zP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Um(n)}))})}function ZP(n,e){return e().catch(t=>wm(n,t,e))}function jm(n){return y(this,null,function*(){let e=ve(n),t=Mo(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;q6(e);)try{let i=yield F6(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,W6(e,i)}catch(i){yield wm(e,i)}JP(e)&&XP(e)})}function q6(n){return $s(n)&&n.O_.length<10}function W6(n,e){n.O_.push(e);let t=Mo(n);t.r_()&&t.V_&&t.m_(e.mutations)}function JP(n){return $s(n)&&!Mo(n).n_()&&n.O_.length>0}function XP(n){Mo(n).start()}function G6(n){return y(this,null,function*(){Mo(n).p_()})}function z6(n){return y(this,null,function*(){let e=Mo(n);for(let t of n.O_)e.m_(t.mutations)})}function K6(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=SE.from(r,e,t);yield ZP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jm(n)})}function Y6(n,e){return y(this,null,function*(){e&&Mo(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return h6(s)&&s!==F.ABORTED}(i.code)){let o=r.O_.shift();Mo(r).s_(),yield ZP(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield jm(r)}})}(n,e)),JP(n)&&XP(n)})}function nP(n,e){return y(this,null,function*(){let t=ve(n);t.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let r=$s(t);t.L_.add(3),yield id(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Um(t)})}function Q6(n,e){return y(this,null,function*(){let t=ve(n);e?(t.L_.delete(2),yield Um(t)):e||(t.L_.add(2),yield id(t),t.q_.set("Unknown"))})}function Ac(n){return n.K_||(n.K_=function(t,r,i){let o=ve(t);return o.w_(),new a0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:j6.bind(null,n),Ro:B6.bind(null,n),mo:$6.bind(null,n),d_:H6.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),$0(n)?B0(n):n.q_.set("Unknown")):(yield n.K_.stop(),QP(n))}))),n.K_}function Mo(n){return n.U_||(n.U_=function(t,r,i){let o=ve(t);return o.w_(),new c0(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:G6.bind(null,n),mo:Y6.bind(null,n),f_:z6.bind(null,n),g_:K6.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield jm(n)):(yield n.U_.stop(),n.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var h0=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function H0(n,e){if(ki("AsyncQueue",`${e}: ${n}`),rd(n))return new z(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Im=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ne.comparator(t.key,r.key):(t,r)=>ne.comparator(t.key,r.key),this.keyedMap=Vu(),this.sortedSet=new At(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Em=class{constructor(){this.W_=new At(ne.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Tc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Im.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var f0=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},p0=class{constructor(){this.queries=rP(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ve(t),o=i.queries;i.queries=rP(),o.forEach((s,a)=>{for(let c of a.j_)c.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}};function rP(){return new No(n=>SP(n),Fm)}function eO(n,e){return y(this,null,function*(){let t=ve(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new f0,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=H0(s,`Initialization of query '${cc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&q0(t)})}function tO(n,e){return y(this,null,function*(){let t=ve(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Z6(n,e){let t=ve(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&q0(t)}function J6(n,e,t){let r=ve(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function q0(n){n.Y_.forEach(e=>{e.next()})}var m0,iP;(iP=m0||(m0={})).ea="default",iP.Cache="cache";var Cm=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Tc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Tc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==m0.Cache}};var Tm=class{constructor(e){this.key=e}},bm=class{constructor(e){this.key=e}},g0=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Me(),this.mutatedKeys=Me(),this.Aa=DP(e),this.Ra=new Im(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Em,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),v=Lm(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),N=!1;m&&v?m.data.isEqual(v.data)?w!==P&&(r.track({type:3,doc:v}),N=!0):this.ga(m,v)||(r.track({type:2,doc:v}),N=!0,(c&&this.Aa(v,c)>0||u&&this.Aa(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),N=!0):m&&!v&&(r.track({type:1,doc:m}),N=!0,(c||u)&&(a=!0)),N&&(v?(s=s.add(v),o=P?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((d,f)=>function(v,w){let P=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return P(v)-P(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,s.length!==0||u?{snapshot:new Tc(this.query,e.Ra,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Em,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Me(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new bm(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Tm(r))}),t}ba(e){this.Ta=e.Ts,this.da=Me();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Tc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},v0=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},y0=class{constructor(e){this.key=e,this.va=!1}},_0=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new No(a=>SP(a),Fm),this.Ma=new Map,this.xa=new Set,this.Oa=new At(ne.comparator),this.Na=new Map,this.La=new Yu,this.Ba={},this.ka=new Map,this.qa=Ku.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function X6(n,e,t=!0){return y(this,null,function*(){let r=aO(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield nO(r,e,t,!0),i})}function e5(n,e){return y(this,null,function*(){let t=aO(n);yield nO(t,e,!0,!1)})}function nO(n,e,t,r){return y(this,null,function*(){let i=yield L6(n.localStore,ni(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield t5(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&KP(n.remoteStore,i),a})}function t5(n,e,t,r,i){return y(this,null,function*(){n.Ka=(f,m,v)=>function(P,N,L,W){return y(this,null,function*(){let Y=N.view.ma(L);Y.ns&&(Y=yield tP(P.localStore,N.query,!1).then(({documents:b})=>N.view.ma(b,Y)));let re=W&&W.targetChanges.get(N.targetId),Xe=W&&W.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(Y,P.isPrimaryClient,re,Xe);return sP(P,N.targetId,se.wa),se.snapshot})}(n,f,m,v);let o=yield tP(n.localStore,e,!0),s=new g0(e,o.Ts),a=s.ma(o.documents),c=Gu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);sP(n,t,u.wa);let d=new v0(e,t,s);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function n5(n,e,t){return y(this,null,function*(){let r=ve(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Fm(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield n0(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&U0(r.remoteStore,i.targetId),w0(r,i.targetId)}).catch(nd))):(w0(r,i.targetId),yield n0(r.localStore,i.targetId,!0))})}function r5(n,e){return y(this,null,function*(){let t=ve(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),U0(t.remoteStore,r.targetId))})}function i5(n,e,t){return y(this,null,function*(){let r=d5(n);try{let i=yield function(s,a){let c=ve(s),u=kt.now(),d=a.reduce((v,w)=>v.add(w.key),Me()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Li(),P=Me();return c.cs.getEntries(v,d).next(N=>{w=N,w.forEach((L,W)=>{W.isValidDocument()||(P=P.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(N=>{f=N;let L=[];for(let W of a){let Y=d6(W,f.get(W.key).overlayedDocument);Y!=null&&L.push(new Vi(W.key,Y,_P(Y.value.mapValue),Ms.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,L,a)}).next(N=>{m=N;let L=N.applyToLocalDocumentSet(f,P);return c.documentOverlayCache.saveOverlays(v,N.batchId,L)})}).then(()=>({batchId:m.batchId,changes:xP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.Ba[s.currentUser.toKey()];u||(u=new At(He)),u=u.insert(a,c),s.Ba[s.currentUser.toKey()]=u}(r,i.batchId,t),yield od(r,i.changes),yield jm(r.remoteStore)}catch(i){let o=H0(i,"Failed to persist write");t.reject(o)}})}function rO(n,e){return y(this,null,function*(){let t=ve(n);try{let r=yield O6(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Qe(s.va):i.removedDocuments.size>0&&(Qe(s.va),s.va=!1))}),yield od(t,r,e)}catch(r){yield nd(r)}})}function oP(n,e,t){let r=ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=ve(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&q0(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function o5(n,e,t){return y(this,null,function*(){let r=ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new At(ne.comparator);s=s.insert(o,Nr.newNoDocument(o,we.min()));let a=Me().add(o),c=new um(we.min(),new Map,new At(He),s,a);yield rO(r,c),r.Oa=r.Oa.remove(o),r.Na.delete(e),W0(r)}else yield n0(r.localStore,e,!1).then(()=>w0(r,e,t)).catch(nd)})}function s5(n,e){return y(this,null,function*(){let t=ve(n),r=e.batch.batchId;try{let i=yield P6(t.localStore,e);oO(t,r,null),iO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield od(t,i)}catch(i){yield nd(i)}})}function a5(n,e,t){return y(this,null,function*(){let r=ve(n);try{let i=yield function(s,a){let c=ve(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);oO(r,e,t),iO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield od(r,i)}catch(i){yield nd(i)}})}function iO(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function oO(n,e,t){let r=ve(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function w0(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||sO(n,r)})}function sO(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(U0(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),W0(n))}function sP(n,e,t){for(let r of t)r instanceof Tm?(n.La.addReference(r.key,e),c5(n,r)):r instanceof bm?(K("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||sO(n,r.key)):de()}function c5(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(K("SyncEngine","New document in limbo: "+t),n.xa.add(r),W0(n))}function W0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ne(It.fromString(e)),r=n.qa.next();n.Na.set(r,new y0(t)),n.Oa=n.Oa.insert(t,r),KP(n.remoteStore,new zu(ni(F0(t.path)),r,"TargetPurposeLimboResolution",mP.oe))}}function od(n,e,t){return y(this,null,function*(){let r=ve(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{s.push(r.Ka(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=JE.Wi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(c,u){return y(this,null,function*(){let d=ve(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>V.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!rd(f))throw f;K("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let v=d.os.get(m),w=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(m,P)}}})}(r.localStore,o))})}function l5(n,e){return y(this,null,function*(){let t=ve(n);if(!t.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let r=yield GP(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(c=>{c.reject(new z(F.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield od(t,r.hs)}})}function u5(n,e){let t=ve(n),r=t.Na.get(e);if(r&&r.va)return Me().add(r.key);{let i=Me(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function aO(n){let e=ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=u5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o5.bind(null,e),e.Ca.d_=Z6.bind(null,e.eventManager),e.Ca.$a=J6.bind(null,e.eventManager),e}function d5(n){let e=ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a5.bind(null,e),e}var aP=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Vm(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return M6(this.persistence,new e0,t.initialUser,this.serializer)}Ga(t){return new YE(ZE.Zr,this.serializer)}Wa(t){return new r0}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var h5=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>oP(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=l5.bind(null,this.syncEngine),yield Q6(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new p0}()}createDatastore(t){let r=Vm(t.databaseInfo.databaseId),i=function(s){return new s0(s)}(t.databaseInfo);return function(s,a,c,u){return new l0(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new d0(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>oP(this.syncEngine,r,0),function(){return vm.D()?new vm:new i0}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let m=new _0(o,s,a,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(o){return y(this,null,function*(){let s=ve(o);K("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield id(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Sm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var I0=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=rm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){K("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=H0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function JI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield GP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function cP(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield f5(n);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>nP(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>nP(e.remoteStore,i)),n._onlineComponents=e})}function f5(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield JI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;pc("Error using user provided cache. Falling back to memory cache: "+t),yield JI(n,new aP)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield JI(n,new aP);return n._offlineComponents})}function cO(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield cP(n,n._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield cP(n,new h5))),n._onlineComponents})}function p5(n){return cO(n).then(e=>e.syncEngine)}function E0(n){return y(this,null,function*(){let e=yield cO(n),t=e.eventManager;return t.onListen=X6.bind(null,e.syncEngine),t.onUnlisten=n5.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=e5.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=r5.bind(null,e.syncEngine),t})}function m5(n,e,t={}){let r=new ei;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let d=new Sm({next:m=>{d.Za(),s.enqueueAndForget(()=>tO(o,f)),m.fromCache&&c.source==="server"?u.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new Cm(a,d,{includeMetadataChanges:!0,_a:!0});return eO(o,f)}(yield E0(n),n.asyncQueue,e,t,r)})),r.promise}function lO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var lP=new Map;function uO(n,e,t){if(!t)throw new z(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function g5(n,e,t,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uP(n){if(!ne.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function dP(n){if(ne.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Bm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":de()}function Ao(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Bm(n);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Dm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},bc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XI;switch(r.type){case"firstParty":return new rE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=lP.get(t);r&&(K("ComponentProvider","Removing Datastore"),lP.delete(t),r.terminate())}(this),Promise.resolve()}};function dO(n,e,t,r={}){var i;let o=(n=Ao(n,bc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&pc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Jt.MOCK_USER;else{a=la(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Jt(u)}n._authCredentials=new eE(new nm(a,c))}}var js=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},jn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},xo=class n extends js{constructor(e,t,r){super(e,t,F0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new ne(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function hO(n,e,...t){if(n=Pe(n),uO("collection","path",e),n instanceof bc){let r=It.fromString(e,...t);return dP(r),new xo(n,null,r)}{if(!(n instanceof jn||n instanceof xo))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(It.fromString(e,...t));return dP(r),new xo(n.firestore,null,r)}}function fO(n,e,...t){if(n=Pe(n),arguments.length===1&&(e=rm.newId()),uO("doc","path",e),n instanceof bc){let r=It.fromString(e,...t);return uP(r),new jn(n,null,new ne(r))}{if(!(n instanceof jn||n instanceof xo))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(It.fromString(e,...t));return uP(r),new jn(n.firestore,n instanceof xo?n.converter:null,new ne(r))}}var Am=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ym(this,"async_queue_retry"),this.Vu=()=>{let r=ZI();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=ZI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=ZI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new ei;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rd(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw ki("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=h0.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&de()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function hP(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Bs=class extends bc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Am,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Am(e),this._firestoreClient=void 0,yield e}})}};function pO(n,e){let t=typeof n=="object"?n:Vt(),r=typeof n=="string"?n:e||"(default)",i=Lt(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=eo("firestore");o&&dO(i,...o)}return i}function G0(n){if(n._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||v5(n),n._firestoreClient}function v5(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new cE(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lO(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new I0(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Qu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(pn.fromBase64String(e))}catch(t){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(pn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Zu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var xm=class{constructor(e){this._methodName=e}};var Ju=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}};var Xu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var y5=/^__.*__$/,C0=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Us(e,this.data,t,this.fieldTransforms)}};function mO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}var T0=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mO(this.Cu)&&y5.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},b0=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Vm(e)}Qu(e,t,r,i=!1){return new T0({Cu:e,methodName:t,qu:r,path:Jn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function gO(n){let e=n._freezeSettings(),t=Vm(n._databaseId);return new b0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _5(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);_O("Data must be an object, but it was:",s,r);let a=vO(r,s),c,u;if(o.merge)c=new Xr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=I5(e,f,t);if(!s.contains(m))throw new z(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);C5(d,m)||d.push(m)}c=new Xr(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new C0(new Rr(a),c,u)}function w5(n,e,t,r=!1){return z0(t,n.Qu(r?4:3,e))}function z0(n,e){if(yO(n=Pe(n)))return _O("Unsupported field value:",e,n),vO(n,e);if(n instanceof xm)return function(r,i){if(!mO(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=z0(a,i.Lu(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Pe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return s6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=kt.fromDate(r);return{timestampValue:pm(i.serializer,o)}}if(r instanceof kt){let o=new kt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pm(i.serializer,o)}}if(r instanceof Ju)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qu)return{bytesValue:UP(i.serializer,r._byteString)};if(r instanceof jn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:V0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xu)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return L0(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Bm(r)}`)}(n,e)}function vO(n,e){let t={};return gP(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dc(n,(r,i)=>{let o=z0(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function yO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof kt||n instanceof Ju||n instanceof Qu||n instanceof jn||n instanceof xm||n instanceof Xu)}function _O(n,e,t){if(!yO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Bm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function I5(n,e,t){if((e=Pe(e))instanceof Zu)return e._internalPath;if(typeof e=="string")return wO(n,e);throw Rm("Field path arguments must be of type string or ",n,!1,void 0,t)}var E5=new RegExp("[~\\*/\\[\\]]");function wO(n,e,t){if(e.search(E5)>=0)throw Rm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Zu(...e.split("."))._internalPath}catch{throw Rm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Rm(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new z(F.INVALID_ARGUMENT,a+n+c)}function C5(n,e){return n.some(t=>t.isEqual(e))}var Nm=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new S0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(K0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},S0=class extends Nm{data(){return super.data()}};function K0(n,e){return typeof e=="string"?wO(n,e):e instanceof Zu?e._internalPath:e._delegate._internalPath}function IO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ed=class{},D0=class extends ed{};function EO(n,e,...t){let r=[];e instanceof ed&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof A0).length,a=o.filter(c=>c instanceof Mm).length;if(s>1||s>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Mm=class n extends D0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return TO(e._query,t),new js(e.firestore,e.converter,IE(e._query,t))}_parse(e){let t=gO(e.firestore);return function(o,s,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){pP(f,d);let v=[];for(let w of f)v.push(fP(c,o,w));m={arrayValue:{values:v}}}else m=fP(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||pP(f,d),m=w5(a,s,f,d==="in"||d==="not-in");return Wt.create(u,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function CO(n,e,t){let r=e,i=K0("where",n);return Mm._create(i,r,t)}var A0=class n extends ed{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Mr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)TO(s,c),s=IE(s,c)}(e._query,t),new js(e.firestore,e.converter,IE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function fP(n,e,t){if(typeof(t=Pe(t))=="string"){if(t==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bP(e)&&t.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(It.fromString(t));if(!ne.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return VM(n,new ne(r))}if(t instanceof jn)return VM(n,t._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bm(t)}.`)}function pP(n,e){if(!Array.isArray(n)||n.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var x0=class{convertValue(e,t="none"){switch(ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ro(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Dc(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>mt(s.doubleValue));return new Xu(o)}convertGeoPoint(e){return new Ju(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=M0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qu(e));default:return null}}convertTimestamp(e){let t=Fi(e);return new kt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=It.fromString(e);Qe(WP(r));let i=new am(r.get(1),r.get(3)),o=new ne(r.popFirst(5));return i.isEqual(t)||ki(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function T5(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ns=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Pm=class extends Nm{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new fc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(K0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},fc=class extends Pm{data(e={}){return super.data(e)}},Om=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ns(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new fc(this._firestore,this._userDataWriter,r.key,r,new Ns(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new fc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ns(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new fc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ns(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:b5(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function b5(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}var td=class extends x0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}};function bO(n){n=Ao(n,js);let e=Ao(n.firestore,Bs),t=G0(e),r=new td(e);return IO(n._query),m5(t,n._query).then(i=>new Om(e,r,n,i))}function SO(n,e,t){n=Ao(n,jn);let r=Ao(n.firestore,Bs),i=T5(n.converter,e,t);return S5(r,[_5(gO(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ms.none())])}function Y0(n,...e){var t,r,i;n=Pe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||hP(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(hP(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof jn)u=Ao(n.firestore,Bs),d=F0(n._key.path),c={next:f=>{e[s]&&e[s](D5(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=Ao(n,js);u=Ao(f.firestore,Bs),d=f._query;let m=new td(u);c={next:v=>{e[s]&&e[s](new Om(u,m,f,v))},error:e[s+1],complete:e[s+2]},IO(n._query)}return function(m,v,w,P){let N=new Sm(P),L=new Cm(v,N,w);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return eO(yield E0(m),L)})),()=>{N.Za(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return tO(yield E0(m),L)}))}}(G0(u),d,a,c)}function S5(n,e){return function(r,i){let o=new ei;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return i5(yield p5(r),i,o)})),o.promise}(G0(n),e)}function D5(n,e,t){let r=t.docs.get(e._key),i=new td(n);return new Pm(n,i,e._key,r,new Ns(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Sc=i})(Nn),Rt(new xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Bs(new tE(r.getProvider("auth-internal")),new oE(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new am(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ee(OM,"4.7.3",e),ee(OM,"4.7.3","esm2017")})();var $m=function(){return $m=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},$m.apply(this,arguments)};var R5={includeMetadataChanges:!1};function DO(n,e){return e===void 0&&(e=R5),new ge(function(t){var r=Y0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function AO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:$m($m({},r),(t={},t[e.idField]=n.id,t))}function xO(n){return DO(n,{includeMetadataChanges:!0}).pipe(J(function(e){return e.docs}))}function RO(n,e){return e===void 0&&(e={}),xO(n).pipe(J(function(t){return t.map(function(r){return AO(r,e)})}))}var Hs=class{constructor(e){return e}},NO="firestore",Q0=class{constructor(){return Ot(NO)}};var Z0=new H("angularfire2.firestore-instances");function N5(n,e){let t=$t(NO,n,e);return t&&new Hs(t)}function M5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hs(r)}}var P5={provide:Q0,deps:[[new fe,Z0]]},O5={provide:Hs,useFactory:N5,deps:[[new fe,Z0],ht]};function MO(n,...e){return ee("angularfire",dt.full,"fst"),ot([O5,P5,{provide:Z0,useFactory:M5(n),multi:!0,deps:[ae,Ne,Dt,wt,[new fe,xr],[new fe,Un],...e]}])}var dr=$e(RO,!0);var hr=$e(hO,!0);var J0=$e(fO,!0);var X0=$e(bO,!0);var PO=$e(pO,!0);var OO=$e(EO,!0);var eC=$e(SO,!0);var kO=$e(CO,!0);var FO="@firebase/database",LO="1.0.8";var JC="";function k5(n){JC=n}var cC=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:sh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var lC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Vr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var mk=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cC(e)}}catch{}return new lC},Ws=mk("localStorage"),uC=mk("sessionStorage");var Mc=new Ur("@firebase/database"),F5=function(){let n=1;return function(){return n++}}(),gk=function(n){let e=SS(n),t=new CS;t.update(e);let r=t.digest();return fS.encodeByteArray(r)},yd=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=yd.apply(null,r):typeof r=="object"?e+=Qt(r):e+=r,e+=" "}return e},Gs=null,VO=!0,L5=function(n,e){$(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Mc.logLevel=un.VERBOSE,Gs=Mc.log.bind(Mc),e&&uC.set("logging_enabled",!0)):typeof n=="function"?Gs=n:(Gs=null,uC.remove("logging_enabled"))},mn=function(...n){if(VO===!0&&(VO=!1,Gs===null&&uC.get("logging_enabled")===!0&&L5(!0)),Gs){let e=yd.apply(null,n);Gs(e)}},_d=function(n){return function(...e){mn(n,...e)}},dC=function(...n){let e="FIREBASE INTERNAL ERROR: "+yd(...n);Mc.error(e)},ji=function(...n){let e=`FIREBASE FATAL ERROR: ${yd(...n)}`;throw Mc.error(e),new Error(e)},Xn=function(...n){let e="FIREBASE WARNING: "+yd(...n);Mc.warn(e)},V5=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Xn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vk=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},U5=function(n){if(Fr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Oc="[MIN_NAME]",zs="[MAX_NAME]",Bc=function(n,e){if(n===e)return 0;if(n===Oc||e===zs)return-1;if(e===Oc||n===zs)return 1;{let t=UO(n),r=UO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},j5=function(n,e){return n===e?0:n<e?-1:1},sd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Qt(e))},XC=function(n){if(typeof n!="object"||n===null)return Qt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Qt(e[r]),t+=":",t+=XC(n[e[r]]);return t+="}",t},yk=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function mr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var _k=function(n){$(!vk(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},B5=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$5=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var H5=new RegExp("^-?(0*)\\d{1,10}$"),q5=-2147483648,W5=2147483647,UO=function(n){if(H5.test(n)){let e=Number(n);if(e>=q5&&e<=W5)return e}return null},wd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Xn("Exception was thrown by user callback.",t),e},Math.floor(0))}},G5=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},dd=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var hC=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Xn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var fC=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(mn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Xn(e)}},hd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),qm="5",wk="v",Ik="s",Ek="r",Ck="f",Tk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,bk="ls",Sk="p",pC="ac",Dk="websocket",Ak="long_polling";var Wm=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ws.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ws.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function z5(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function xk(n,e,t){$(typeof e=="string","typeof type must == string"),$(typeof t=="object","typeof params must == object");let r;if(e===Dk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Ak)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);z5(n)&&(t.ns=n.namespace);let i=[];return mr(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var mC=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Vr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return gS(this.counters_)}};var tC={},nC={};function eT(n){let e=n.toString();return tC[e]||(tC[e]=new mC),tC[e]}function K5(n,e){let t=n.toString();return nC[t]||(nC[t]=e()),nC[t]}var gC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&wd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var jO="start",Y5="close",Q5="pLPCommand",Z5="pRTLPCB",Rk="id",Nk="pw",Mk="ser",J5="cb",X5="seg",e9="ts",t9="d",n9="dframe",Pk=1870,Ok=30,r9=Pk-Ok,i9=25e3,o9=3e4,vC=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=_d(e),this.stats_=eT(t),this.urlFn=c=>(this.appCheckToken&&(c[pC]=this.appCheckToken),xk(t,Ak,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(o9)),U5(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yC((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===jO)this.id=a,this.password=c;else if(s===Y5)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[jO]="t",r[Mk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[J5]=this.scriptTagHolder.uniqueCallbackIdentifier),r[wk]=qm,this.transportSessionId&&(r[Ik]=this.transportSessionId),this.lastSessionId&&(r[bk]=this.lastSessionId),this.applicationId&&(r[Sk]=this.applicationId),this.appCheckToken&&(r[pC]=this.appCheckToken),typeof location<"u"&&location.hostname&&Tk.test(location.hostname)&&(r[Ek]=Ck);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Fr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!B5()&&!$5()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Qt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=pS(t),i=yk(r,r9);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Fr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[n9]="t",r[Rk]=e,r[Nk]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Qt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},yC=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Fr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=F5(),window[Q5+this.uniqueCallbackIdentifier]=e,window[Z5+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){mn("frame writing exception"),a.stack&&mn(a.stack),mn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||mn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Rk]=this.myID,e[Nk]=this.myPW,e[Mk]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Ok+r.length<=Pk;){let s=this.pendingSegs.shift();r=r+"&"+X5+i+"="+s.seg+"&"+e9+i+"="+s.ts+"&"+t9+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(i9)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Fr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{mn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var s9=16384,a9=45e3,Gm=null;typeof MozWebSocket<"u"?Gm=MozWebSocket:typeof WebSocket<"u"&&(Gm=WebSocket);var ad=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=_d(this.connId),this.stats_=eT(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[wk]=qm,!Fr()&&typeof location<"u"&&location.hostname&&Tk.test(location.hostname)&&(a[Ek]=Ck),r&&(a[Ik]=r),i&&(a[bk]=i),o&&(a[pC]=o),s&&(a[Sk]=s),xk(t,Dk,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ws.set("previous_websocket_failure",!0);try{let i;if(Fr()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${qm}/${JC}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Gm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Gm!==null&&!n.forceDisallow_}static previouslyFailed(){return Ws.isInMemoryStorage||Ws.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ws.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=sh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if($(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Qt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=yk(r,s9);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(a9))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),c9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[vC,ad]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=ad&&ad.isAvailable(),i=r&&!ad.previouslyFailed();if(t.webSocketOnly&&(r||Xn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ad];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),l9=6e4,u9=5e3,d9=10*1024,h9=100*1024,rC="t",BO="d",f9="s",$O="r",p9="e",HO="o",qO="a",WO="n",GO="p",m9="h",_C=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=_d("c:"+this.id+":"),this.transportManager_=new c9(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=dd(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>h9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>d9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(rC in e){let t=e[rC];t===qO?this.upgradeIfSecondaryHealthy_():t===$O?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===HO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=sd("t",e),r=sd("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:GO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:qO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:WO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=sd("t",e),r=sd("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=sd(rC,e);if(BO in e){let r=e[BO];if(t===m9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===WO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===f9?this.onConnectionShutdown_(r):t===$O?this.onReset_(r):t===p9?dC("Server Error: "+r):t===HO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dC("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),qm!==r&&Xn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),dd(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(l9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):dd(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(u9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:GO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var zm=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Km=class{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){$(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Ym=class n extends Km{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!bl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var zO=32,KO=768,rt=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ze(){return new rt("")}function Ue(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Oo(n){return n.pieces_.length-n.pieceNum_}function ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new rt(n.pieces_,e)}function kk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function g9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Fk(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Lk(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new rt(e,0)}function Xt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof rt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new rt(t,0)}function ke(n){return n.pieceNum_>=n.pieces_.length}function fr(n,e){let t=Ue(n),r=Ue(e);if(t===null)return e;if(t===r)return fr(ft(n),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Vk(n,e){if(Oo(n)!==Oo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Or(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Oo(n)>Oo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var wC=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Fk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Nl(this.parts_[r]);Uk(this)}};function v9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Nl(e),Uk(n)}function y9(n){let e=n.parts_.pop();n.byteLength_-=Nl(e),n.parts_.length>0&&(n.byteLength_-=1)}function Uk(n){if(n.byteLength_>KO)throw new Error(n.errorPrefix_+"has a key path longer than "+KO+" bytes ("+n.byteLength_+").");if(n.parts_.length>zO)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zO+") or object contains a cycle "+qs(n))}function qs(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var IC=class n extends Km{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}};var cd=1e3,_9=60*5*1e3,YO=30*1e3,w9=1.3,I9=3e4,E9="server_kill",QO=3,tT=(()=>{class n extends zm{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=_d("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=cd,this.maxReconnectDelay_=_9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Fr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");IC.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Ym.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Qt(s)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Rv,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),$(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Vr(t,"w")){let i=Ko(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Xn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||ES(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=YO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=IS(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),$(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Qt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):dC("Unrecognized action received from server: "+Qt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>I9&&(this.reconnectDelay_=cd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*w9)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(m){$(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?mn("getToken() completed but was canceled"):(mn("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new _C(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{Xn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(E9)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Xn(m),u())}}})}interrupt(t){mn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){mn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Al(this.interruptReasons_)&&(this.reconnectDelay_=cd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>XC(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new rt(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){mn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=QO&&(this.reconnectDelay_=YO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){mn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=QO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Fr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+JC.replace(/\./g,"-")]=1,bl()?t["framework.cordova"]=1:oh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Ym.getInstance().currentlyOnline();return Al(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),je=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var kc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new je(Oc,e),i=new je(Oc,t);return this.compare(r,i)!==0}minPost(){return je.MIN}};var Hm,Qm=class extends kc{static get __EMPTY_NODE(){return Hm}static set __EMPTY_NODE(e){Hm=e}compare(e,t){return Bc(e.name,t.name)}isDefinedOn(e){throw ca("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return je.MIN}maxPost(){return new je(zs,Hm)}makePost(e,t){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new je(e,Hm)}toString(){return".key"}},Pc=new Qm;var Rc=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Pr=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??pr.EMPTY_NODE,this.right=s??pr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return pr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return pr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),EC=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Pr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},pr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Pr.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Pr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Rc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Rc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Rc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Rc(this.root_,null,this.comparator_,!0,e)}};pr.EMPTY_NODE=new EC;function C9(n,e){return Bc(n.name,e.name)}function nT(n,e){return Bc(n,e)}var CC;function T9(n){CC=n}var jk=function(n){return typeof n=="number"?"number:"+_k(n):"string:"+n},Bk=function(n){if(n.isLeafNode()){let e=n.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Vr(e,".sv"),"Priority must be a string or number.")}else $(n===CC||n.isEmpty(),"priority of unexpected type.");$(n===CC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var ZO,Fc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Bk(this.priorityNode_)}static set __childrenNodeConstructor(t){ZO=t}static get __childrenNodeConstructor(){return ZO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ke(t)?this:Ue(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Ue(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:($(i!==".priority"||Oo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+jk(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=_k(this.value_):t+=this.value_,this.lazyHash_=gk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:($(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return $(o>=0,"Unknown leaf type: "+r),$(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),$k,Hk;function b9(n){$k=n}function S9(n){Hk=n}var TC=class extends kc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Bc(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return je.MIN}maxPost(){return new je(zs,new Fc("[PRIORITY-POST]",Hk))}makePost(e,t){let r=$k(e);return new je(t,new Fc("[PRIORITY-POST]",r))}toString(){return".priority"}},vn=new TC;var D9=Math.log(2),bC=class{constructor(e){let t=o=>parseInt(Math.log(o)/D9,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Zm=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,m;if(d===0)return null;if(d===1)return f=n[c],m=t?t(f):f,new Pr(m,f.node,Pr.BLACK,null,null);{let v=parseInt(d/2,10)+c,w=i(c,v),P=i(v+1,u);return f=n[v],m=t?t(f):f,new Pr(m,f.node,Pr.BLACK,w,P)}},o=function(c){let u=null,d=null,f=n.length,m=function(w,P){let N=f-w,L=f;f-=w;let W=i(N+1,L),Y=n[N],re=t?t(Y):Y;v(new Pr(re,Y.node,P,null,W))},v=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){let P=c.nextBitIsOne(),N=Math.pow(2,c.count-(w+1));P?m(N,Pr.BLACK):(m(N,Pr.BLACK),m(N,Pr.RED))}return d},s=new bC(n.length),a=o(s);return new pr(r||e,a)};var iC,xc={},Lc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return $(xc&&vn,"ChildrenNode.ts has not been loaded"),iC=iC||new n({".priority":xc},{".priority":vn}),iC}get(e){let t=Ko(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof pr?t:null}hasIndex(e){return Vr(this.indexSet_,e.toString())}addIndex(e,t){$(e!==Pc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(je.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Zm(r,e.getCompare()):a=xc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=xl(this.indexes_,(i,o)=>{let s=Ko(this.indexSet_,o);if($(s,"Missing index implementation for "+o),i===xc)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(je.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Zm(a,s.getCompare())}else return xc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new je(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=xl(this.indexes_,i=>{if(i===xc)return i;{let o=t.get(e.name);return o?i.remove(new je(e.name,o)):i}});return new n(r,this.indexSet_)}};var ld,Et=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Bk(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ld||(ld=new n(new pr(nT),null,Lc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ld}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?ld:r}}getChild(t){let r=Ue(t);return r===null?this:this.getImmediateChild(r).getChild(ft(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if($(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new je(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?ld:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=Ue(t);if(i===null)return r;{$(Ue(t)!==".priority"||Oo(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ft(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(vn,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+jk(this.getPriority().val())+":"),this.forEachChild(vn,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":gk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new je(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new je(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new je(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,je.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,je.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Id?-1:0}withIndex(t){if(t===Pc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Pc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(vn),o=r.getIterator(vn),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Pc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),SC=class extends Et{constructor(){super(new pr(nT),Et.EMPTY_NODE,Lc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Et.EMPTY_NODE}isEmpty(){return!1}},Id=new SC;Object.defineProperties(je,{MIN:{value:new je(Oc,Et.EMPTY_NODE)},MAX:{value:new je(zs,Id)}});Qm.__EMPTY_NODE=Et.EMPTY_NODE;Fc.__childrenNodeConstructor=Et;T9(Id);S9(Id);var A9=!0;function gn(n,e=null){if(n===null)return Et.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Fc(t,gn(e))}if(!(n instanceof Array)&&A9){let t=[],r=!1;if(mr(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=gn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new je(s,c)))}}),t.length===0)return Et.EMPTY_NODE;let o=Zm(t,C9,s=>s.name,nT);if(r){let s=Zm(t,vn.getCompare());return new Et(o,gn(e),new Lc({".priority":s},{".priority":vn}))}else return new Et(o,gn(e),Lc.Default)}else{let t=Et.EMPTY_NODE;return mr(n,(r,i)=>{if(Vr(n,r)&&r.substring(0,1)!=="."){let o=gn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(gn(e))}}b9(gn);var DC=class extends kc{constructor(e){super(),this.indexPath_=e,$(!ke(e)&&Ue(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Bc(e.name,t.name):o}makePost(e,t){let r=gn(e),i=Et.EMPTY_NODE.updateChild(this.indexPath_,r);return new je(t,i)}maxPost(){let e=Et.EMPTY_NODE.updateChild(this.indexPath_,Id);return new je(zs,e)}toString(){return Fk(this.indexPath_,0).join("/")}};var AC=class extends kc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Bc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,t){let r=gn(e);return new je(t,r)}toString(){return".value"}},x9=new AC;function R9(n){return{type:"value",snapshotNode:n}}function N9(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function M9(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function JO(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function P9(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var xC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=vn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Oc}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:zs}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===vn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function XO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===vn?t="$priority":n.index_===x9?t="$value":n.index_===Pc?t="$key":($(n.index_ instanceof DC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Qt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Qt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Qt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Qt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Qt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function ek(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==vn&&(e.i=n.index_.toString()),e}var RC=class n extends zm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=_d("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=XO(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,r),Ko(this.listens_,s)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=XO(e._queryParams),r=e._path.toString(),i=new Rv;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Yo(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=sh(a.responseText)}catch{Xn("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Xn("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var NC=class{constructor(){this.rootNode_=Et.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Jm(){return{value:null,children:new Map}}function qk(n,e,t){if(ke(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Ue(e);n.children.has(r)||n.children.set(r,Jm());let i=n.children.get(r);e=ft(e),qk(i,e,t)}}function MC(n,e,t){n.value!==null?t(e,n.value):O9(n,(r,i)=>{let o=new rt(e.toString()+"/"+r);MC(i,o,t)})}function O9(n,e){n.children.forEach((t,r)=>{e(r,t)})}var PC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var tk=10*1e3,k9=30*1e3,F9=5*60*1e3,OC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new PC(e);let r=tk+(k9-tk)*Math.random();dd(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;mr(e,(i,o)=>{o>0&&Vr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),dd(this.reportStats_.bind(this),Math.floor(Math.random()*2*F9))}};var Ui=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Ui||{});function Wk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var kC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ui.ACK_USER_WRITE,this.source=Wk()}operationForChild(e){if(ke(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new rt(e));return new n(Ze(),t,this.revert)}}else return $(Ue(this.path)===e,"operationForChild called for unrelated child."),new n(ft(this.path),this.affectedTree,this.revert)}};var Vc=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ui.OVERWRITE}operationForChild(e){return ke(this.path)?new n(this.source,Ze(),this.snap.getImmediateChild(e)):new n(this.source,ft(this.path),this.snap)}};var Xm=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ui.MERGE}operationForChild(e){if(ke(this.path)){let t=this.children.subtree(new rt(e));return t.isEmpty()?null:t.value?new Vc(this.source,Ze(),t.value):new n(this.source,Ze(),t)}else return $(Ue(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var md=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ke(e))return this.isFullyInitialized()&&!this.filtered_;let t=Ue(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function L9(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(P9(s.childName,s.snapshotNode))}),ud(n,i,"child_removed",e,r,t),ud(n,i,"child_added",e,r,t),ud(n,i,"child_moved",o,r,t),ud(n,i,"child_changed",e,r,t),ud(n,i,"value",e,r,t),i}function ud(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>U9(n,a,c)),s.forEach(a=>{let c=V9(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function V9(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function U9(n,e,t){if(e.childName==null||t.childName==null)throw ca("Should only compare child_ events.");let r=new je(e.childName,e.snapshotNode),i=new je(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Kk(n,e){return{eventCache:n,serverCache:e}}function fd(n,e,t,r){return Kk(new md(e,t,r),n.serverCache)}function Yk(n,e,t,r){return Kk(n.eventCache,new md(e,t,r))}function FC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ks(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var oC,j9=()=>(oC||(oC=new pr(j5)),oC),Bn=class n{constructor(e,t=j9()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return mr(e,(r,i)=>{t=t.set(new rt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ze(),value:this.value};if(ke(e))return null;{let r=Ue(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ft(e),t);return o!=null?{path:Xt(new rt(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ke(e))return this;{let t=Ue(e),r=this.children.get(t);return r!==null?r.subtree(ft(e)):new n(null)}}set(e,t){if(ke(e))return new n(t,this.children);{let r=Ue(e),o=(this.children.get(r)||new n(null)).set(ft(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(ke(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Ue(e),r=this.children.get(t);if(r){let i=r.remove(ft(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(ke(e))return this.value;{let t=Ue(e),r=this.children.get(t);return r?r.get(ft(e)):null}}setTree(e,t){if(ke(e))return t;{let r=Ue(e),o=(this.children.get(r)||new n(null)).setTree(ft(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(Ze(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Xt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ze(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(ke(e))return null;{let o=Ue(e),s=this.children.get(o);return s?s.findOnPath_(ft(e),Xt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ze(),t)}foreachOnPath_(e,t,r){if(ke(e))return this;{this.value&&r(t,this.value);let i=Ue(e),o=this.children.get(i);return o?o.foreachOnPath_(ft(e),Xt(t,i),r):new n(null)}}foreach(e){this.foreach_(Ze(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Xt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var kr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Bn(null))}};function pd(n,e,t){if(ke(e))return new kr(new Bn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=fr(i,e);return o=o.updateChild(s,t),new kr(n.writeTree_.set(i,o))}else{let i=new Bn(t),o=n.writeTree_.setTree(e,i);return new kr(o)}}}function nk(n,e,t){let r=n;return mr(t,(i,o)=>{r=pd(r,Xt(e,i),o)}),r}function rk(n,e){if(ke(e))return kr.empty();{let t=n.writeTree_.setTree(e,new Bn(null));return new kr(t)}}function LC(n,e){return Ys(n,e)!=null}function Ys(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(fr(t.path,e)):null}function ik(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(vn,(r,i)=>{e.push(new je(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new je(r,i.value))}),e}function Po(n,e){if(ke(e))return n;{let t=Ys(n,e);return t!=null?new kr(new Bn(t)):new kr(n.writeTree_.subtree(e))}}function VC(n){return n.writeTree_.isEmpty()}function Uc(n,e){return Qk(Ze(),n.writeTree_,e)}function Qk(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?($(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=Qk(Xt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Xt(n,".priority"),r)),t}}function Zk(n,e){return n1(e,n)}function B9(n,e,t,r,i){$(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=pd(n.visibleWrites,e,t)),n.lastWriteId=r}function $9(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function H9(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);$(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&q9(a,r.path)?i=!1:Or(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return W9(n),!0;if(r.snap)n.visibleWrites=rk(n.visibleWrites,r.path);else{let a=r.children;mr(a,c=>{n.visibleWrites=rk(n.visibleWrites,Xt(r.path,c))})}return!0}else return!1}function q9(n,e){if(n.snap)return Or(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Or(Xt(n.path,t),e))return!0;return!1}function W9(n){n.visibleWrites=Jk(n.allWrites,G9,Ze()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function G9(n){return n.visible}function Jk(n,e,t){let r=kr.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Or(t,s)?(a=fr(t,s),r=pd(r,a,o.snap)):Or(s,t)&&(a=fr(s,t),r=pd(r,Ze(),o.snap.getChild(a)));else if(o.children){if(Or(t,s))a=fr(t,s),r=nk(r,a,o.children);else if(Or(s,t))if(a=fr(s,t),ke(a))r=nk(r,Ze(),o.children);else{let c=Ko(o.children,Ue(a));if(c){let u=c.getChild(ft(a));r=pd(r,Ze(),u)}}}else throw ca("WriteRecord should have .snap or .children")}}return r}function Xk(n,e,t,r,i){if(!r&&!i){let o=Ys(n.visibleWrites,e);if(o!=null)return o;{let s=Po(n.visibleWrites,e);if(VC(s))return t;if(t==null&&!LC(s,Ze()))return null;{let a=t||Et.EMPTY_NODE;return Uc(s,a)}}}else{let o=Po(n.visibleWrites,e);if(!i&&VC(o))return t;if(!i&&t==null&&!LC(o,Ze()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Or(u.path,e)||Or(e,u.path))},a=Jk(n.allWrites,s,e),c=t||Et.EMPTY_NODE;return Uc(a,c)}}}function z9(n,e,t){let r=Et.EMPTY_NODE,i=Ys(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(vn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Po(n.visibleWrites,e);return t.forEachChild(vn,(s,a)=>{let c=Uc(Po(o,new rt(s)),a);r=r.updateImmediateChild(s,c)}),ik(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Po(n.visibleWrites,e);return ik(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function K9(n,e,t,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Xt(e,t);if(LC(n.visibleWrites,o))return null;{let s=Po(n.visibleWrites,o);return VC(s)?i.getChild(t):Uc(s,i.getChild(t))}}function Y9(n,e,t,r){let i=Xt(e,t),o=Ys(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Po(n.visibleWrites,i);return Uc(s,r.getNode().getImmediateChild(t))}else return null}function Q9(n,e){return Ys(n.visibleWrites,e)}function Z9(n,e,t,r,i,o,s){let a,c=Po(n.visibleWrites,e),u=Ys(c,Ze());if(u!=null)a=u;else if(t!=null)a=Uc(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),v=m.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=m.getNext();return d}else return[]}function J9(){return{visibleWrites:kr.empty(),allWrites:[],lastWriteId:-1}}function UC(n,e,t,r){return Xk(n.writeTree,n.treePath,e,t,r)}function e1(n,e){return z9(n.writeTree,n.treePath,e)}function ok(n,e,t,r){return K9(n.writeTree,n.treePath,e,t,r)}function eg(n,e){return Q9(n.writeTree,Xt(n.treePath,e))}function X9(n,e,t,r,i,o){return Z9(n.writeTree,n.treePath,e,t,r,i,o)}function rT(n,e,t){return Y9(n.writeTree,n.treePath,e,t)}function t1(n,e){return n1(Xt(n.treePath,e),n.writeTree)}function n1(n,e){return{treePath:n,writeTree:e}}var jC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;$(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,JO(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,M9(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,N9(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,JO(r,e.snapshotNode,i.oldSnap));else throw ca("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var BC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},r1=new BC,gd=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new md(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return rT(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ks(this.viewCache_),o=X9(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function e8(n,e){$(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function t8(n,e,t,r,i){let o=new jC,s,a;if(t.type===Ui.OVERWRITE){let u=t;u.source.fromUser?s=$C(n,e,u.path,u.snap,r,i,o):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ke(u.path),s=tg(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===Ui.MERGE){let u=t;u.source.fromUser?s=r8(n,e,u.path,u.children,r,i,o):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=HC(n,e,u.path,u.children,r,i,a,o))}else if(t.type===Ui.ACK_USER_WRITE){let u=t;u.revert?s=s8(n,e,u.path,r,i,o):s=i8(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===Ui.LISTEN_COMPLETE)s=o8(n,e,t.path,r,o);else throw ca("Unknown operation type: "+t.type);let c=o.getChanges();return n8(e,s,c),{viewCache:s,changes:c}}function n8(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=FC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(R9(FC(e)))}}function i1(n,e,t,r,i,o){let s=e.eventCache;if(eg(r,t)!=null)return e;{let a,c;if(ke(t))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Ks(e),d=u instanceof Et?u:Et.EMPTY_NODE,f=e1(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let u=UC(r,Ks(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=Ue(t);if(u===".priority"){$(Oo(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let f=ok(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=ft(t),f;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let m=ok(r,t,s.getNode(),c);m!=null?f=s.getNode().getImmediateChild(u).updateChild(d,m):f=s.getNode().getImmediateChild(u)}else f=rT(r,u,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),u,f,d,i,o):a=s.getNode()}}return fd(e,a,s.isFullyInitialized()||ke(t),n.filter.filtersNodes())}}function tg(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(ke(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),v,null)}else{let v=Ue(t);if(!c.isCompleteForPath(t)&&Oo(t)>1)return e;let w=ft(t),N=c.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?u=d.updatePriority(c.getNode(),N):u=d.updateChild(c.getNode(),v,N,w,r1,null)}let f=Yk(e,u,c.isFullyInitialized()||ke(t),d.filtersNodes()),m=new gd(i,f,o);return i1(n,f,t,i,m,a)}function $C(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new gd(i,e,o);if(ke(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=fd(e,u,!0,n.filter.filtersNodes());else{let f=Ue(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=fd(e,u,a.isFullyInitialized(),a.isFiltered());else{let m=ft(t),v=a.getNode().getImmediateChild(f),w;if(ke(m))w=r;else{let P=d.getCompleteChild(f);P!=null?kk(m)===".priority"&&P.getChild(Lk(m)).isEmpty()?w=P:w=P.updateChild(m,r):w=Et.EMPTY_NODE}if(v.equals(w))c=e;else{let P=n.filter.updateChild(a.getNode(),f,w,m,d,s);c=fd(e,P,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function sk(n,e){return n.eventCache.isCompleteForChild(e)}function r8(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Xt(t,c);sk(e,Ue(d))&&(a=$C(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Xt(t,c);sk(e,Ue(d))||(a=$C(n,a,d,u,i,o,s))}),a}function ak(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function HC(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;ke(t)?u=r:u=new Bn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let v=e.serverCache.getNode().getImmediateChild(f),w=ak(n,v,m);c=tg(n,c,new rt(f),w,i,o,s,a)}}),u.children.inorderTraversal((f,m)=>{let v=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){let w=e.serverCache.getNode().getImmediateChild(f),P=ak(n,w,m);c=tg(n,c,new rt(f),P,i,o,s,a)}}),c}function i8(n,e,t,r,i,o,s){if(eg(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(ke(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return tg(n,e,t,c.getNode().getChild(t),i,o,a,s);if(ke(t)){let u=new Bn(null);return c.getNode().forEachChild(Pc,(d,f)=>{u=u.set(new rt(d),f)}),HC(n,e,t,u,i,o,a,s)}else return e}else{let u=new Bn(null);return r.foreach((d,f)=>{let m=Xt(t,d);c.isCompleteForPath(m)&&(u=u.set(d,c.getNode().getChild(m)))}),HC(n,e,t,u,i,o,a,s)}}function o8(n,e,t,r,i){let o=e.serverCache,s=Yk(e,o.getNode(),o.isFullyInitialized()||ke(t),o.isFiltered());return i1(n,s,t,r,r1,i)}function s8(n,e,t,r,i,o){let s;if(eg(r,t)!=null)return e;{let a=new gd(r,e,i),c=e.eventCache.getNode(),u;if(ke(t)||Ue(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=UC(r,Ks(e));else{let f=e.serverCache.getNode();$(f instanceof Et,"serverChildren would be complete if leaf node"),d=e1(r,f)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=Ue(t),f=rT(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,ft(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,Et.EMPTY_NODE,ft(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=UC(r,Ks(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||eg(r,Ze())!=null,fd(e,u,s,n.filter.filtersNodes())}}function a8(n,e){let t=Ks(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ke(e)&&!t.getImmediateChild(Ue(e)).isEmpty())?t.getChild(e):null}function ck(n,e,t,r){e.type===Ui.MERGE&&e.source.queryId!==null&&($(Ks(n.viewCache_),"We should always have a full cache before handling merges"),$(FC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=t8(n.processor_,i,e,t,r);return e8(n.processor_,o.viewCache),$(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,c8(n,o.changes,o.viewCache.eventCache.getNode(),null)}function c8(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return L9(n.eventGenerator_,e,t,i)}var lk;function l8(n){$(!lk,"__referenceConstructor has already been defined"),lk=n}function iT(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return $(o!=null,"SyncTree gave us an op for an invalid query."),ck(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(ck(s,e,t,r));return o}}function oT(n,e){let t=null;for(let r of n.views.values())t=t||a8(r,e);return t}var uk;function u8(n){$(!uk,"__referenceConstructor has already been defined"),uk=n}var ng=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Bn(null),this.pendingWriteTree_=J9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function d8(n,e,t,r,i){return B9(n.pendingWriteTree_,e,t,r,i),i?ig(n,new Vc(Wk(),e,t)):[]}function Nc(n,e,t=!1){let r=$9(n.pendingWriteTree_,e);if(H9(n.pendingWriteTree_,e)){let o=new Bn(null);return r.snap!=null?o=o.set(Ze(),!0):mr(r.children,s=>{o=o.set(new rt(s),!0)}),ig(n,new kC(r.path,o,t))}else return[]}function rg(n,e,t){return ig(n,new Vc(Gk(),e,t))}function h8(n,e,t){let r=Bn.fromObject(t);return ig(n,new Xm(Gk(),e,r))}function f8(n,e,t,r){let i=c1(n,r);if(i!=null){let o=l1(i),s=o.path,a=o.queryId,c=fr(s,e),u=new Vc(zk(a),c,t);return u1(n,s,u)}else return[]}function p8(n,e,t,r){let i=c1(n,r);if(i){let o=l1(i),s=o.path,a=o.queryId,c=fr(s,e),u=Bn.fromObject(t),d=new Xm(zk(a),c,u);return u1(n,s,d)}else return[]}function o1(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=fr(s,e),u=oT(a,c);if(u)return u});return Xk(i,e,o,t,!0)}function ig(n,e){return s1(e,n.syncPointTree_,null,Zk(n.pendingWriteTree_,Ze()))}function s1(n,e,t,r){if(ke(n.path))return a1(n,e,t,r);{let i=e.get(Ze());t==null&&i!=null&&(t=oT(i,Ze()));let o=[],s=Ue(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=t1(r,s);o=o.concat(s1(a,c,u,d))}return i&&(o=o.concat(iT(i,n,r,t))),o}}function a1(n,e,t,r){let i=e.get(Ze());t==null&&i!=null&&(t=oT(i,Ze()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=t1(r,s),d=n.operationForChild(s);d&&(o=o.concat(a1(d,a,c,u)))}),i&&(o=o.concat(iT(i,n,r,t))),o}function c1(n,e){return n.tagToQueryMap.get(e)}function l1(n){let e=n.indexOf("$");return $(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new rt(n.substr(0,e))}}function u1(n,e,t){let r=n.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");let i=Zk(n.pendingWriteTree_,e);return iT(r,t,i,null)}var qC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},WC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Xt(this.path_,e);return new n(this.syncTree_,t)}node(){return o1(this.syncTree_,this.path_)}},m8=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},dk=function(n,e,t){if(!n||typeof n!="object")return n;if($(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return g8(n[".sv"],e,t);if(typeof n[".sv"]=="object")return v8(n[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},g8=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:$(!1,"Unexpected server value: "+n)}},v8=function(n,e,t){n.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);let i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},y8=function(n,e,t,r){return sT(e,new WC(t,n),r)},_8=function(n,e,t){return sT(n,new qC(e),t)};function sT(n,e,t){let r=n.getPriority().val(),i=dk(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=dk(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Fc(a,gn(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Fc(i))),s.forEachChild(vn,(a,c)=>{let u=sT(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var vd=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function aT(n,e){let t=e instanceof rt?e:new rt(e),r=n,i=Ue(t);for(;i!==null;){let o=Ko(r.node.children,i)||{children:{},childCount:0};r=new vd(i,r,o),t=ft(t),i=Ue(t)}return r}function $c(n){return n.node.value}function d1(n,e){n.node.value=e,GC(n)}function h1(n){return n.node.childCount>0}function w8(n){return $c(n)===void 0&&!h1(n)}function og(n,e){mr(n.node.children,(t,r)=>{e(new vd(t,n,r))})}function f1(n,e,t,r){t&&!r&&e(n),og(n,i=>{f1(i,e,!0,r)}),t&&r&&e(n)}function I8(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ed(n){return new rt(n.parent===null?n.name:Ed(n.parent)+"/"+n.name)}function GC(n){n.parent!==null&&E8(n.parent,n.name,n)}function E8(n,e,t){let r=w8(t),i=Vr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,GC(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,GC(n))}var C8=/[\[\].#$\/\u0000-\u001F\u007F]/,T8=/[\[\].#$\u0000-\u001F\u007F]/,sC=10*1024*1024,p1=function(n){return typeof n=="string"&&n.length!==0&&!C8.test(n)},b8=function(n){return typeof n=="string"&&n.length!==0&&!T8.test(n)},S8=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),b8(n)};var m1=function(n,e,t){let r=t instanceof rt?new wC(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+qs(r));if(typeof e=="function")throw new Error(n+"contains a function "+qs(r)+" with contents = "+e.toString());if(vk(e))throw new Error(n+"contains "+e.toString()+" "+qs(r));if(typeof e=="string"&&e.length>sC/3&&Nl(e)>sC)throw new Error(n+"contains a string greater than "+sC+" utf8 bytes "+qs(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(mr(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!p1(s)))throw new Error(n+" contains an invalid key ("+s+") "+qs(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);v9(r,s),m1(n,a,r),y9(r)}),i&&o)throw new Error(n+' contains ".value" child '+qs(r)+" in addition to actual children.")}};var D8=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!p1(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!S8(t))throw new Error(bS(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var zC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function A8(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!Vk(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function Qs(n,e,t){A8(n,t),x8(n,r=>Or(r,e)||Or(e,r))}function x8(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(R8(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function R8(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Gs&&mn("event: "+t.toString()),wd(r)}}}var N8="repo_interrupt",M8=25,KC=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new zC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Jm(),this.transactionQueueTree_=new vd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function P8(n,e,t){if(n.stats_=eT(n.repoInfo_),n.forceRestClient_||G5())n.server_=new RC(n.repoInfo_,(r,i,o,s)=>{hk(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>fk(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new tT(n.repoInfo_,e,(r,i,o,s)=>{hk(n,r,i,o,s)},r=>{fk(n,r)},r=>{k8(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=K5(n.repoInfo_,()=>new OC(n.stats_,n.server_)),n.infoData_=new NC,n.infoSyncTree_=new ng({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=rg(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),cT(n,"connected",!1),n.serverSyncTree_=new ng({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);Qs(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function O8(n){let t=n.infoData_.getNode(new rt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function g1(n){return m8({timestamp:O8(n)})}function hk(n,e,t,r,i){n.dataUpdateCount++;let o=new rt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=xl(t,u=>gn(u));s=p8(n.serverSyncTree_,o,c,i)}else{let c=gn(t);s=f8(n.serverSyncTree_,o,c,i)}else if(r){let c=xl(t,u=>gn(u));s=h8(n.serverSyncTree_,o,c)}else{let c=gn(t);s=rg(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=uT(n,o)),Qs(n.eventQueue_,a,s)}function fk(n,e){cT(n,"connected",e),e===!1&&L8(n)}function k8(n,e){mr(e,(t,r)=>{cT(n,t,r)})}function cT(n,e,t){let r=new rt("/.info/"+e),i=gn(t);n.infoData_.updateSnapshot(r,i);let o=rg(n.infoSyncTree_,r,i);Qs(n.eventQueue_,r,o)}function F8(n){return n.nextWriteId_++}function L8(n){v1(n,"onDisconnectEvents");let e=g1(n),t=Jm();MC(n.onDisconnect_,Ze(),(i,o)=>{let s=y8(i,o,n.serverSyncTree_,e);qk(t,i,s)});let r=[];MC(t,Ze(),(i,o)=>{r=r.concat(rg(n.serverSyncTree_,i,o));let s=B8(n,i);uT(n,s)}),n.onDisconnect_=Jm(),Qs(n.eventQueue_,Ze(),r)}function V8(n){n.persistentConnection_&&n.persistentConnection_.interrupt(N8)}function v1(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),mn(t,...e)}function y1(n,e,t){return o1(n.serverSyncTree_,e,t)||Et.EMPTY_NODE}function lT(n,e=n.transactionQueueTree_){if(e||sg(n,e),$c(e)){let t=w1(n,e);$(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&U8(n,Ed(e),t)}else h1(e)&&og(e,t=>{lT(n,t)})}function U8(n,e,t){let r=t.map(u=>u.currentWriteId),i=y1(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];$(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=fr(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{v1(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(Nc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();sg(n,aT(n.transactionQueueTree_,e)),lT(n,n.transactionQueueTree_),Qs(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)wd(f[m])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Xn("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}uT(n,e)}},s)}function uT(n,e){let t=_1(n,e),r=Ed(t),i=w1(n,t);return j8(n,i,r),r}function j8(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=fr(t,c.path),d=!1,f;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Nc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=M8)d=!0,f="maxretry",i=i.concat(Nc(n.serverSyncTree_,c.currentWriteId,!0));else{let m=y1(n,c.path,s);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){m1("transaction failed: Data returned ",v,c.path);let w=gn(v);typeof v=="object"&&v!=null&&Vr(v,".priority")||(w=w.updatePriority(m.getPriority()));let N=c.currentWriteId,L=g1(n),W=_8(w,m,L);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=W,c.currentWriteId=F8(n),s.splice(s.indexOf(N),1),i=i.concat(d8(n.serverSyncTree_,c.path,W,c.currentWriteId,c.applyLocally)),i=i.concat(Nc(n.serverSyncTree_,N,!0))}else d=!0,f="nodata",i=i.concat(Nc(n.serverSyncTree_,c.currentWriteId,!0))}Qs(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}sg(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)wd(r[a]);lT(n,n.transactionQueueTree_)}function _1(n,e){let t,r=n.transactionQueueTree_;for(t=Ue(e);t!==null&&$c(r)===void 0;)r=aT(r,t),e=ft(e),t=Ue(e);return r}function w1(n,e){let t=[];return I1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function I1(n,e,t){let r=$c(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);og(e,i=>{I1(n,i,t)})}function sg(n,e){let t=$c(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,d1(e,t.length>0?t:void 0)}og(e,r=>{sg(n,r)})}function B8(n,e){let t=Ed(_1(n,e)),r=aT(n.transactionQueueTree_,e);return I8(r,i=>{aC(n,i)}),aC(n,r),f1(r,i=>{aC(n,i)}),t}function aC(n,e){let t=$c(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?($(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):($(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Nc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?d1(e,void 0):t.length=o+1,Qs(n.eventQueue_,Ed(e),i);for(let s=0;s<r.length;s++)wd(r[s])}}function $8(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function H8(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Xn(`Invalid query segment '${t}' in query '${n}'`)}return e}var pk=function(n,e){let t=q8(n),r=t.namespace;t.domain==="firebase.com"&&ji(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&ji("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||V5();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Wm(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new rt(t.pathString)}},q8=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=$8(n.substring(d,f)));let m=H8(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let v=e.slice(0,u);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var YC=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ke(this._path)?null:kk(this._path)}get ref(){return new jc(this._repo,this._path)}get _queryIdentifier(){let e=ek(this._queryParams),t=XC(e);return t==="{}"?"default":t}get _queryObject(){return ek(this._queryParams)}isEqual(e){if(e=Pe(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Vk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+g9(this._path)}};var jc=class n extends YC{constructor(e,t){super(e,t,new xC,!1)}get parent(){let e=Lk(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};l8(jc);u8(jc);var W8="FIREBASE_DATABASE_EMULATOR_HOST",QC={},G8=!1;function z8(n,e,t,r){n.repoInfo_=new Wm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function K8(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||ji("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),mn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=pk(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[W8]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=pk(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new hd(hd.OWNER):new fC(n.name,n.options,e);D8("Invalid Firebase Database URL",s),ke(s.path)||ji("Database URL must point to the root of a Firebase Database (not including a child path).");let f=Q8(a,n,d,new hC(n.name,t));return new ZC(f,n)}function Y8(n,e){let t=QC[e];(!t||t[n.key]!==n)&&ji(`Database ${e}(${n.repoInfo_}) has already been deleted.`),V8(n),delete t[n.key]}function Q8(n,e,t,r){let i=QC[e.name];i||(i={},QC[e.name]=i);let o=i[n.toURLString()];return o&&ji("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new KC(n,G8,t,r),i[n.toURLString()]=o,o}var ZC=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(P8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new jc(this._repo,Ze())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Y8(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&ji("Cannot call "+e+" on a deleted database.")}};function E1(n=Vt(),e){let t=Lt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=eo("database");r&&C1(t,...r)}return t}function C1(n,e,t,r={}){n=Pe(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&ji("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&ji('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new hd(hd.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:la(r.mockUserToken,n.app.options.projectId);o=new hd(s)}z8(i,e,t,o)}function Z8(n){k5(Nn),Rt(new xt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return K8(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),ee(FO,LO,n),ee(FO,LO,"esm2017")}tT.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};tT.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Z8();var Cd=class{constructor(e){return e}},T1="database",dT=class{constructor(){return Ot(T1)}};var hT=new H("angularfire2.database-instances");function J8(n,e){let t=$t(T1,n,e);return t&&new Cd(t)}function X8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Cd(r)}}var eK={provide:dT,deps:[[new fe,hT]]},tK={provide:Cd,useFactory:J8,deps:[[new fe,hT],ht]};function b1(n,...e){return ee("angularfire",dt.full,"rtdb"),ot([tK,eK,{provide:hT,useFactory:X8(n),multi:!0,deps:[ae,Ne,Dt,wt,[new fe,xr],[new fe,Un],...e]}])}var S1=$e(E1,!0);var x1="functions";var fT=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return y(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var pT="us-central1";var mT=class{constructor(e,t,r,i,o=pT,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new fT(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=pT}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function nK(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var D1="@firebase/functions",A1="0.11.8";var rK="auth-internal",iK="app-check-internal",oK="messaging-internal";function sK(n,e){let t=(r,{instanceIdentifier:i})=>{let o=r.getProvider("app").getImmediate(),s=r.getProvider(rK),a=r.getProvider(oK),c=r.getProvider(iK);return new mT(o,s,a,c,i,n)};Rt(new xt(x1,t,"PUBLIC").setMultipleInstances(!0)),ee(D1,A1,e),ee(D1,A1,"esm2017")}function R1(n=Vt(),e=pT){let r=Lt(Pe(n),x1).getImmediate({identifier:e}),i=eo("functions");return i&&N1(r,...i),r}function N1(n,e,t){nK(Pe(n),e,t)}sK(fetch.bind(self));var Td=class{constructor(e){return e}},M1="functions",gT=class{constructor(){return Ot(M1)}};var vT=new H("angularfire2.functions-instances");function aK(n,e){let t=$t(M1,n,e);return t&&new Td(t)}function cK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Td(r)}}var lK={provide:gT,deps:[[new fe,vT]]},uK={provide:Td,useFactory:aK,deps:[[new fe,vT],ht]};function P1(n,...e){return ee("angularfire",dt.full,"fn"),ot([uK,lK,{provide:vT,useFactory:cK(n),multi:!0,deps:[ae,Ne,Dt,wt,[new fe,xr],[new fe,Un],...e]}])}var O1=$e(R1,!0);var dK="/firebase-messaging-sw.js",hK="/firebase-cloud-messaging-push-scope",j1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fK="https://fcmregistrations.googleapis.com/v1",B1="google.c.a.c_id",pK="google.c.a.c_l",mK="google.c.a.ts",gK="google.c.a.e";var ag=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(ag||{});function Bi(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vK(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var yT="fcm_token_details_db",yK=5,k1="fcm_token_object_Store";function _K(n){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(yT))return null;let e=null;return(yield Nv(yT,yK,{upgrade:(r,i,o,s)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(k1))return;let c=s.objectStore(k1),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!u){if(i===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Bi(d.vapidKey)}}}else if(i===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Bi(d.auth),p256dh:Bi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Bi(d.vapidKey)}}}else if(i===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Bi(d.auth),p256dh:Bi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Bi(d.vapidKey)}}}}})})).close(),yield ah(yT),yield ah("fcm_vapid_details_db"),yield ah("undefined"),wK(e)?e:null})}function wK(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var IK="firebase-messaging-database",EK=1,bd="firebase-messaging-store",_T=null;function $1(){return _T||(_T=Nv(IK,EK,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(bd)}}})),_T}function CK(n){return y(this,null,function*(){let e=H1(n),r=yield(yield $1()).transaction(bd).objectStore(bd).get(e);if(r)return r;{let i=yield _K(n.appConfig.senderId);if(i)return yield ET(n,i),i}})}function ET(n,e){return y(this,null,function*(){let t=H1(n),i=(yield $1()).transaction(bd,"readwrite");return yield i.objectStore(bd).put(e,t),yield i.done,e})}function H1({appConfig:n}){return n.appId}var TK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},An=new Lr("messaging","Messaging",TK);function bK(n,e){return y(this,null,function*(){let t=yield TT(n),r=q1(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(CT(n.appConfig),i)).json()}catch(s){throw An.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw An.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw An.create("token-subscribe-no-token");return o.token})}function SK(n,e){return y(this,null,function*(){let t=yield TT(n),r=q1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${CT(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw An.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw An.create("token-update-failed",{errorInfo:s})}if(!o.token)throw An.create("token-update-no-token");return o.token})}function DK(n,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield TT(n)};try{let o=yield(yield fetch(`${CT(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw An.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw An.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function CT({projectId:n}){return`${fK}/projects/${n}/registrations`}function TT(t){return y(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function q1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==j1&&(i.web.applicationPubKey=r),i}var AK=7*24*60*60*1e3;function xK(n){return y(this,null,function*(){let e=yield NK(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Bi(e.getKey("auth")),p256dh:Bi(e.getKey("p256dh"))},r=yield CK(n.firebaseDependencies);if(r){if(MK(r.subscriptionOptions,t))return Date.now()>=r.createTime+AK?RK(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield DK(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return F1(n.firebaseDependencies,t)}else return F1(n.firebaseDependencies,t)})}function RK(n,e){return y(this,null,function*(){try{let t=yield SK(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield ET(n.firebaseDependencies,r),t}catch(t){throw t}})}function F1(n,e){return y(this,null,function*(){let r={token:yield bK(n,e),createTime:Date.now(),subscriptionOptions:e};return yield ET(n,r),r.token})}function NK(n,e){return y(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vK(e)})})}function MK(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function L1(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return PK(e,n),OK(e,n),kK(e,n),e}function PK(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function OK(n,e){e.data&&(n.data=e.data)}function kK(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function FK(n){return typeof n=="object"&&!!n&&B1 in n}LK("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function LK(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function VK(n){if(!n||!n.options)throw wT("App Configuration Object");if(!n.name)throw wT("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw wT(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function wT(n){return An.create("missing-app-config-values",{valueName:n})}var IT=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=VK(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function UK(n){return y(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(dK,{scope:hK}),n.swRegistration.update().catch(()=>{})}catch(e){throw An.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function jK(n,e){return y(this,null,function*(){if(!e&&!n.swRegistration&&(yield UK(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");n.swRegistration=e}})}function BK(n,e){return y(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=j1)})}function $K(n,e){return y(this,null,function*(){if(!navigator)throw An.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw An.create("permission-blocked");return yield BK(n,e?.vapidKey),yield jK(n,e?.serviceWorkerRegistration),xK(n)})}function HK(n,e,t){return y(this,null,function*(){let r=qK(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[B1],message_name:t[pK],message_time:t[mK],message_device_time:Math.floor(Date.now()/1e3)})})}function qK(n){switch(n){case ag.NOTIFICATION_CLICKED:return"notification_open";case ag.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function WK(n,e){return y(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===ag.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(L1(t)):n.onMessageHandler.next(L1(t)));let r=t.data;FK(r)&&r[gK]==="1"&&(yield HK(n,t.messageType,r))})}var V1="@firebase/messaging",U1="0.12.12";var GK=n=>{let e=new IT(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>WK(e,t)),e},zK=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>$K(e,r)}};function KK(){Rt(new xt("messaging",GK,"PUBLIC")),Rt(new xt("messaging-internal",zK,"PRIVATE")),ee(V1,U1),ee(V1,U1,"esm2017")}function bT(){return y(this,null,function*(){try{yield zo()}catch{return!1}return typeof window<"u"&&di()&&Dl()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function W1(n=Vt()){return bT().then(e=>{if(!e)throw An.create("unsupported-browser")},e=>{throw An.create("indexed-db-unsupported")}),Lt(Pe(n),"messaging").getImmediate()}KK();var Sd=class{constructor(e){return e}},G1="messaging",ST=class{constructor(){return Ot(G1)}};var z1="__angularfire_symbol__messagingIsSupported",DT="__angularfire_symbol__messagingIsSupportedValue";globalThis[z1]||=bT().then(n=>globalThis[DT]=n).catch(()=>globalThis[DT]=!1);var cg={async:()=>globalThis[z1],sync:()=>{let n=globalThis[DT];if(n===void 0)throw new Error(rc("Messaging"));return n}},AT=new H("angularfire2.messaging-instances");function YK(n,e){if(!cg.sync())return null;let t=$t(G1,n,e);return t&&new Sd(t)}function QK(n){return(e,t)=>{if(!cg.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new Sd(r)}}var ZK={provide:ST,deps:[[new fe,AT]]},JK={provide:Sd,useFactory:YK,deps:[[new fe,AT],ht]};function K1(n,...e){return ee("angularfire",dt.full,"fcm"),ot([JK,ZK,{provide:wo,useValue:cg.async,multi:!0},{provide:AT,useFactory:QK(n),multi:!0,deps:[ae,Ne,Dt,wt,...e]}])}var Bde=cg.async;var Y1=$e(W1,!0);var Dd=class{constructor(e){return e}},Q1="performance",xT=class{constructor(){return Ot(Q1)}};var RT=new H("angularfire2.performance-instances");function XK(n,e,t){if(!J_(t))return null;let r=$t(Q1,n,e);return r&&new Dd(r)}function e7(n){return(e,t,r)=>{if(!J_(t))return null;let i=e.runOutsideAngular(()=>n(r));return new Dd(i)}}var t7={provide:xT,deps:[[new fe,RT]]},n7={provide:Dd,useFactory:XK,deps:[[new fe,RT],ht,Er]};function Z1(n,...e){return ee("angularfire",dt.full,"perf"),ot([n7,t7,{provide:RT,useFactory:e7(n),multi:!0,deps:[ae,Er,Ne,Dt,wt,...e]}])}var J1=$e(AS,!0);var iF="firebasestorage.googleapis.com",r7="storageBucket",i7=2*60*1e3,o7=10*60*1e3;var oi=class n extends Rn{constructor(e,t,r=0){super(NT(e),`Firebase Storage: ${t} (${NT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return NT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Hi=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Hi||{});function NT(n){return"storage/"+n}function s7(){let n="An unknown error occurred, please check the error payload for server response.";return new oi(Hi.UNKNOWN,n)}function a7(){return new oi(Hi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c7(){return new oi(Hi.CANCELED,"User canceled the upload/download.")}function l7(n){return new oi(Hi.INVALID_URL,"Invalid URL '"+n+"'.")}function u7(n){return new oi(Hi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function X1(n){return new oi(Hi.INVALID_ARGUMENT,n)}function oF(){return new oi(Hi.APP_DELETED,"The Firebase app was deleted.")}function d7(n){return new oi(Hi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var $i=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw u7(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(re){re.path_=decodeURIComponent(re.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),w={bucket:1,path:3},P=t===iF?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",L=new RegExp(`^https?://${P}/${i}/${N}`,"i"),Y=[{regex:a,indices:c,postModify:o},{regex:v,indices:w,postModify:u},{regex:L,indices:{bucket:1,path:2},postModify:u}];for(let re=0;re<Y.length;re++){let Xe=Y[re],se=Xe.regex.exec(e);if(se){let b=se[Xe.indices.bucket],_=se[Xe.indices.path];_||(_=""),r=new n(b,_),Xe.postModify(r);break}}if(r==null)throw l7(e);return r}},MT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function h7(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...N){u||(u=!0,e.apply(null,N))}function f(N){i=setTimeout(()=>{i=null,n(v,c())},N)}function m(){o&&clearTimeout(o)}function v(N,...L){if(u){m();return}if(N){m(),d.call(null,N,...L);return}if(c()||s){m(),d.call(null,N,...L);return}r<64&&(r*=2);let Y;a===1?(a=2,Y=0):Y=(r+Math.random())*1e3,f(Y)}let w=!1;function P(N){w||(w=!0,m(),!u&&(i!==null?(N||(a=2),clearTimeout(i),f(0)):N||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,P(!0)},t),P}function f7(n){n(!1)}function p7(n){return n!==void 0}function eF(n,e,t,r){if(r<e)throw X1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw X1(`Invalid value for '${n}'. Expected ${t} or less.`)}function m7(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var PT=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(PT||{});function g7(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var OT=class{constructor(e,t,r,i,o,s,a,c,u,d,f,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Hc(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===PT.NO_ERROR,c=o.getStatus();if(!a||g7(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===PT.ABORT;r(!1,new Hc(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new Hc(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());p7(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=s7();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?oF():c7();s(c)}else{let c=a7();s(c)}};this.canceled_?t(!1,new Hc(!1,null,!0)):this.backoffId_=h7(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f7(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Hc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function v7(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function y7(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function _7(n,e){e&&(n["X-Firebase-GMPID"]=e)}function w7(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function I7(n,e,t,r,i,o,s=!0){let a=m7(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return _7(u,e),v7(u,t),y7(u,o),w7(u,r),new OT(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function E7(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function C7(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var ihe=256*1024;var kT=class n{constructor(e,t){this._service=e,t instanceof $i?this._location=t:this._location=$i.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new $i(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C7(this._location.path)}get storage(){return this._service}get parent(){let e=E7(this._location.path);if(e===null)return null;let t=new $i(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw d7(e)}};function tF(n,e){let t=e?.[r7];return t==null?null:$i.makeFromBucketSpec(t,n)}function T7(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:la(i,n.app.options.projectId))}var FT=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=iF,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i7,this._maxUploadRetryTime=o7,this._requests=new Set,i!=null?this._bucket=$i.makeFromBucketSpec(i,this._host):this._bucket=tF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$i.makeFromBucketSpec(this._url,e):this._bucket=tF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eF("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eF("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kT(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new MT(oF());{let s=I7(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},nF="@firebase/storage",rF="0.13.2";var sF="storage";function aF(n=Vt(),e){n=Pe(n);let r=Lt(n,sF).getImmediate({identifier:e}),i=eo("storage");return i&&cF(r,...i),r}function cF(n,e,t,r={}){T7(n,e,t,r)}function b7(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new FT(t,r,i,e,Nn)}function S7(){Rt(new xt(sF,b7,"PUBLIC").setMultipleInstances(!0)),ee(nF,rF,""),ee(nF,rF,"esm2017")}S7();var Ad=class{constructor(e){return e}},lF="storage",LT=class{constructor(){return Ot(lF)}};var VT=new H("angularfire2.storage-instances");function D7(n,e){let t=$t(lF,n,e);return t&&new Ad(t)}function A7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ad(r)}}var x7={provide:LT,deps:[[new fe,VT]]},R7={provide:Ad,useFactory:D7,deps:[[new fe,VT],ht]};function uF(n,...e){return ee("angularfire",dt.full,"gcs"),ot([R7,x7,{provide:VT,useFactory:A7(n),multi:!0,deps:[ae,Ne,Dt,wt,[new fe,xr],[new fe,Un],...e]}])}var dF=$e(aF,!0);var UT="@firebase/remote-config",hF="0.4.9";var fF="remote-config";var N7={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},$n=new Lr("remoteconfig","Remote Config",N7);function pF(n=Vt()){return n=Pe(n),Lt(n,fF).getImmediate()}function mF(n){let e=Pe(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var jT=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(o),i})}};function M7(n=navigator){return n.languages&&n.languages[0]||n.language}var BT=class{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:M7()},c={method:"POST",headers:s,body:JSON.stringify(a)},u=fetch(o,c),d=new Promise((N,L)=>{e.signal.addEventListener(()=>{let W=new Error("The operation was aborted.");W.name="AbortError",L(W)})}),f;try{yield Promise.race([u,d]),f=yield u}catch(N){let L="fetch-client-network";throw N?.name==="AbortError"&&(L="fetch-timeout"),$n.create(L,{originalErrorMessage:N?.message})}let m=f.status,v=f.headers.get("ETag")||void 0,w,P;if(f.status===200){let N;try{N=yield f.json()}catch(L){throw $n.create("fetch-client-parse",{originalErrorMessage:L?.message})}w=N.entries,P=N.state}if(P==="INSTANCE_STATE_UNSPECIFIED"?m=500:P==="NO_CHANGE"?m=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(w={}),m!==304&&m!==200)throw $n.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:w}})}};function P7(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function O7(n){if(!(n instanceof Rn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var $T=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return y(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,o){return y(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield P7(e.signal,t);try{let s=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),s}catch(s){if(!O7(s))throw s;let a={throttleEndTimeMillis:Date.now()+Ml(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var k7=60*1e3,F7=12*60*60*1e3,HT=class{constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:k7,minimumFetchIntervalMillis:F7},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function lg(n,e){let t=n.target.error||void 0;return $n.create(e,{originalErrorMessage:t&&t?.message})}var Zs="app_namespace_store",L7="firebase_remote_config",V7=1;function U7(){return new Promise((n,e)=>{try{let t=indexedDB.open(L7,V7);t.onerror=r=>{e(lg(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Zs,{keyPath:"compositeKey"})}}}catch(t){e($n.create("storage-open",{originalErrorMessage:t?.message}))}})}var qT=class{constructor(e,t,r,i=U7()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let s=t.transaction([Zs],"readonly").objectStore(Zs),a=this.createCompositeKey(e);try{let c=s.get(a);c.onerror=u=>{i(lg(u,"storage-get"))},c.onsuccess=u=>{let d=u.target.result;r(d?d.value:void 0)}}catch(c){i($n.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,t){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,o)=>{let a=r.transaction([Zs],"readwrite").objectStore(Zs),c=this.createCompositeKey(e);try{let u=a.put({compositeKey:c,value:t});u.onerror=d=>{o(lg(d,"storage-set"))},u.onsuccess=()=>{i()}}catch(u){o($n.create("storage-set",{originalErrorMessage:u?.message}))}})})}delete(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let s=t.transaction([Zs],"readwrite").objectStore(Zs),a=this.createCompositeKey(e);try{let c=s.delete(a);c.onerror=u=>{i(lg(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i($n.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var WT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let o=yield t;o&&(this.lastSuccessfulFetchTimestampMillis=o);let s=yield r;s&&(this.activeConfig=s)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function j7(){Rt(new xt(fF,n,"PUBLIC").setMultipleInstances(!0)),ee(UT,hF),ee(UT,hF,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw $n.create("registration-window");if(!di())throw $n.create("indexed-db-unavailable");let{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw $n.create("registration-project-id");if(!s)throw $n.create("registration-api-key");if(!a)throw $n.create("registration-app-id");t=t||"firebase";let c=new qT(a,r.name,t),u=new WT(c),d=new Ur(UT);d.logLevel=un.ERROR;let f=new BT(i,Nn,t,o,s,a),m=new $T(f,c),v=new jT(m,c,u,d),w=new HT(r,v,u,c,d);return mF(w),w}}function gF(){return y(this,null,function*(){if(!di())return!1;try{return yield zo()}catch{return!1}})}j7();var xd=class{constructor(e){return e}},vF="remote-config",GT=class{constructor(){return Ot(vF)}};var zT="__angularfire_symbol__remoteConfigIsSupportedValue",yF="__angularfire_symbol__remoteConfigIsSupported";globalThis[yF]||=gF().then(n=>globalThis[zT]=n).catch(()=>globalThis[zT]=!1);var ug={async:()=>globalThis[yF],sync:()=>{let n=globalThis[zT];if(n===void 0)throw new Error(rc("RemoteConfig"));return n}},KT=new H("angularfire2.remote-config-instances");function B7(n,e){if(!ug.sync())return null;let t=$t(vF,n,e);return t&&new xd(t)}function $7(n){return(e,t)=>{if(!ug.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new xd(r)}}var H7={provide:GT,deps:[[new fe,KT]]},q7={provide:xd,useFactory:B7,deps:[[new fe,KT],ht]};function _F(n,...e){return ee("angularfire",dt.full,"rc"),ot([q7,H7,{provide:wo,useValue:ug.async,multi:!0},{provide:KT,useFactory:$7(n),multi:!0,deps:[ae,Ne,Dt,wt,...e]}])}var tfe=ug.async;var wF=$e(pF,!0);var IF="@firebase/vertexai-preview",EF="0.0.4";var CF="vertexAI",TF="us-central1";var YT=class{constructor(e,t,r,i){var o;this.app=e,this.options=i;let s=r?.getImmediate({optional:!0}),a=t?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=s||null,this.location=((o=this.options)===null||o===void 0?void 0:o.location)||TF}_delete(){return Promise.resolve()}};var QT=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(QT||{});var afe=[QT.RECITATION,QT.SAFETY];function bF(n=Vt(),e){return n=Pe(n),Lt(n,CF).getImmediate({identifier:e?.location||TF})}function W7(){Rt(new xt(CF,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new YT(t,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),ee(IF,EF),ee(IF,EF,"esm2017")}W7();var Rd=class{constructor(e){return e}},SF="vertexai",ZT=class{constructor(){return Ot(SF)}};var JT=new H("angularfire2.vertexai-instances");function G7(n,e){let t=$t(SF,n,e);return t&&new Rd(t)}function z7(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Rd(r)}}var K7={provide:ZT,deps:[[new fe,JT]]},Y7={provide:Rd,useFactory:G7,deps:[[new fe,JT],ht]};function DF(n,...e){return ee("angularfire",dt.full,"vertexai"),ot([Y7,K7,{provide:JT,useFactory:z7(n),multi:!0,deps:[ae,Ne,Dt,wt,[new fe,Un],...e]}])}var AF=$e(bF,!0);var xF={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var RF={providers:[sR({eventCoalescing:!0}),fN(pN),mN(()=>gN(xF.firebaseConfig)),cM(()=>uM()),NM(()=>xM()),RM,BI,MO(()=>PO()),b1(()=>S1()),P1(()=>O1()),K1(()=>Y1()),Z1(()=>J1()),uF(()=>dF()),_F(()=>wF()),DF(()=>AF())]};var Hn=class n{destroyRef=R(yo);firestore=R(Hs);destroyed=new gt;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return y(this,null,function*(){let e=yield X0(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),o=parseInt(i.id,10);!isNaN(o)&&o>t&&(t=o)}),(t+1).toString()})}createData(e,t){let r=J0(this.collectionRef,e);return eC(r,t)}updateData(e,t){return eC(J0(this.collectionRef,e),t,{merge:!0})}getDataById(e){return y(this,null,function*(){let t=OO(this.collectionRef,kO("id","==",e)),r=yield X0(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function it(n){n||(Rf(it),n=R(yo));let e=new ge(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Zt(e))}function me(n,e){!e?.injector&&Rf(me);let t=e?.injector??R(Ne),r=new Ul(1),i=Sr(()=>{let o;try{o=n()}catch(s){cr(()=>r.error(s));return}cr(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(yo).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var Je=class n extends Hn{collectionPath="/race-configs";collectionRef=hr(this.firestore,this.collectionPath);activeRaceConfig=Z(void 0);constructor(){super(),this.getAll().pipe(it()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.activeRaceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.activeRaceConfig();return t?(t.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.activeRaceConfig();return t?(t.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.activeRaceConfig();return t?(t.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}updateReferenceLapTime(e){let t=this.activeRaceConfig();return t?(t.referenceLapTimeMillisecond=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return dr(this.collectionRef).pipe(Zt(this.destroyed),J(e=>e.filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Q7=Math.pow(10,8)*24*60*60*1e3,spe=-Q7,dg=6048e5,NF=864e5,qc=6e4,Wc=36e5,MF=1e3;var Z7=3600;var PF=Z7*24,ape=PF*7,J7=PF*365.2425,X7=J7/12,cpe=X7*3,XT=Symbol.for("constructDateFrom");function Ct(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&XT in n?n[XT](e):n instanceof Date?new n.constructor(e):new Date(e)}function ie(n,e){return Ct(e||n,n)}function OF(n,e,t){let r=ie(n,t?.in);return isNaN(e)?Ct(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function kF(n,e,t){let r=ie(n,t?.in);if(isNaN(e))return Ct(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),o=Ct(t?.in||n,r.getTime());o.setMonth(r.getMonth()+e+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function Gc(n,e,t){let{years:r=0,months:i=0,weeks:o=0,days:s=0,hours:a=0,minutes:c=0,seconds:u=0}=e,d=ie(n,t?.in),f=i||r?kF(d,i+r*12):d,m=s||o?OF(f,s+o*7):f,v=c+a*60,P=(u+v*60)*1e3;return Ct(t?.in||n,+m+P)}function ko(n,e,t){return Ct(t?.in||n,+ie(n)+e)}function Fo(n,e,t){return ko(n,e*Wc,t)}var eY={};function Lo(){return eY}function qi(n,e){let t=Lo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=ie(n,e?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function Js(n,e){return qi(n,Ee(B({},e),{weekStartsOn:1}))}function hg(n,e){let t=ie(n,e?.in),r=t.getFullYear(),i=Ct(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=Js(i),s=Ct(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=Js(s);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function eb(n){let e=ie(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function yn(n,...e){let t=Ct.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function tb(n,e){let t=ie(n,e?.in);return t.setHours(0,0,0,0),t}function fg(n,e,t){let[r,i]=yn(t?.in,n,e),o=tb(r),s=tb(i),a=+o-eb(o),c=+s-eb(s);return Math.round((a-c)/NF)}function FF(n,e){let t=hg(n,e),r=Ct(e?.in||n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Js(r)}function Xs(n,e,t){let r=ie(n,t?.in);return r.setTime(r.getTime()+e*qc),r}function ea(n,e,t){return ko(n,e*1e3,t)}function ta(n,e){let t=+ie(n)-+ie(e);return t<0?-1:t>0?1:t}function LF(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function VF(n){return!(!LF(n)&&typeof n!="number"||isNaN(+ie(n)))}function UF(n,e,t){let[r,i]=yn(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return o*12+s}function jF(n,e,t){let[r,i]=yn(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function $F(n,e,t){let[r,i]=yn(t?.in,n,e),o=BF(r,i),s=Math.abs(fg(r,i));r.setDate(r.getDate()-o*s);let a=+(BF(r,i)===-o),c=o*(s-a);return c===0?0:c}function BF(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function zc(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function HF(n,e,t){let[r,i]=yn(t?.in,n,e),o=(+r-+i)/Wc;return zc(t?.roundingMethod)(o)}function Wi(n,e){return+ie(n)-+ie(e)}function pg(n,e,t){let r=Wi(n,e)/qc;return zc(t?.roundingMethod)(r)}function qF(n,e){let t=ie(n,e?.in);return t.setHours(23,59,59,999),t}function WF(n,e){let t=ie(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function GF(n,e){let t=ie(n,e?.in);return+qF(t,e)==+WF(t,e)}function zF(n,e,t){let[r,i,o]=yn(t?.in,n,n,e),s=ta(i,o),a=Math.abs(UF(i,o));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let c=ta(i,o)===-s;GF(r)&&a===1&&ta(r,o)===1&&(c=!1);let u=s*(a-+c);return u===0?0:u}function KF(n,e,t){let r=Wi(n,e)/1e3;return zc(t?.roundingMethod)(r)}function YF(n,e,t){let[r,i]=yn(t?.in,n,e),o=ta(r,i),s=Math.abs(jF(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=ta(r,i)===-o,c=o*(s-+a);return c===0?0:c}function QF(n,e){let[t,r]=yn(n,e.start,e.end);return{start:t,end:r}}function ZF(n,e){let t=ie(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}var tY={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JF=(n,e,t)=>{let r,i=tY[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function mg(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var nY={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rY={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},iY={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},XF={date:mg({formats:nY,defaultWidth:"full"}),time:mg({formats:rY,defaultWidth:"full"}),dateTime:mg({formats:iY,defaultWidth:"full"})};var oY={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eL=(n,e,t,r)=>oY[n];function Kc(n){return(e,t)=>{let r=t?.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}var sY={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},aY={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cY={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lY={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},uY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},dY={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},hY=(n,e)=>{let t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},tL={ordinalNumber:hY,era:Kc({values:sY,defaultWidth:"wide"}),quarter:Kc({values:aY,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Kc({values:cY,defaultWidth:"wide"}),day:Kc({values:lY,defaultWidth:"wide"}),dayPeriod:Kc({values:uY,defaultWidth:"wide",formattingValues:dY,defaultFormattingWidth:"wide"})};function Yc(n){return(e,t={})=>{let r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?pY(a,f=>f.test(s)):fY(a,f=>f.test(s)),u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;let d=e.slice(s.length);return{value:u,rest:d}}}function fY(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function pY(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function nL(n){return(e,t={})=>{let r=e.match(n.matchPattern);if(!r)return null;let i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(i.length);return{value:s,rest:a}}}var mY=/^(\d+)(th|st|nd|rd)?/i,gY=/\d+/i,vY={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},yY={any:[/^b/i,/^(a|c)/i]},_Y={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},wY={any:[/1/i,/2/i,/3/i,/4/i]},IY={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},EY={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},CY={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},TY={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bY={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},SY={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},rL={ordinalNumber:nL({matchPattern:mY,parsePattern:gY,valueCallback:n=>parseInt(n,10)}),era:Yc({matchPatterns:vY,defaultMatchWidth:"wide",parsePatterns:yY,defaultParseWidth:"any"}),quarter:Yc({matchPatterns:_Y,defaultMatchWidth:"wide",parsePatterns:wY,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Yc({matchPatterns:IY,defaultMatchWidth:"wide",parsePatterns:EY,defaultParseWidth:"any"}),day:Yc({matchPatterns:CY,defaultMatchWidth:"wide",parsePatterns:TY,defaultParseWidth:"any"}),dayPeriod:Yc({matchPatterns:bY,defaultMatchWidth:"any",parsePatterns:SY,defaultParseWidth:"any"})};var nb={code:"en-US",formatDistance:JF,formatLong:XF,formatRelative:eL,localize:tL,match:rL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function iL(n,e){let t=ie(n,e?.in);return fg(t,ZF(t))+1}function oL(n,e){let t=ie(n,e?.in),r=+Js(t)-+FF(t);return Math.round(r/dg)+1}function gg(n,e){let t=ie(n,e?.in),r=t.getFullYear(),i=Lo(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Ct(e?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=qi(s,e),c=Ct(e?.in||n,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);let u=qi(c,e);return+t>=+a?r+1:+t>=+u?r:r-1}function sL(n,e){let t=Lo(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=gg(n,e),o=Ct(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),qi(o,e)}function aL(n,e){let t=ie(n,e?.in),r=+qi(t,e)-+sL(t,e);return Math.round(r/dg)+1}function ze(n,e){let t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}var Gi={y(n,e){let t=n.getFullYear(),r=t>0?t:1-t;return ze(e==="yy"?r%100:r,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):ze(t+1,2)},d(n,e){return ze(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ze(n.getHours()%12||12,e.length)},H(n,e){return ze(n.getHours(),e.length)},m(n,e){return ze(n.getMinutes(),e.length)},s(n,e){return ze(n.getSeconds(),e.length)},S(n,e){let t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return ze(i,e.length)}};var Qc={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rb={G:function(n,e,t){let r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return Gi.y(n,e)},Y:function(n,e,t,r){let i=gg(n,r),o=i>0?i:1-i;if(e==="YY"){let s=o%100;return ze(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):ze(o,e.length)},R:function(n,e){let t=hg(n);return ze(t,e.length)},u:function(n,e){let t=n.getFullYear();return ze(t,e.length)},Q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ze(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ze(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){let r=n.getMonth();switch(e){case"M":case"MM":return Gi.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){let r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return ze(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){let i=aL(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):ze(i,e.length)},I:function(n,e,t){let r=oL(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):ze(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):Gi.d(n,e)},D:function(n,e,t){let r=iL(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):ze(r,e.length)},E:function(n,e,t){let r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return ze(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return ze(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){let r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ze(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){let i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){let r=n.getHours(),i;switch(r===12?i=Qc.noon:r===0?i=Qc.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){let r=n.getHours(),i;switch(r>=17?i=Qc.evening:r>=12?i=Qc.afternoon:r>=4?i=Qc.morning:i=Qc.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Gi.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):Gi.H(n,e)},K:function(n,e,t){let r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):ze(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):ze(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):Gi.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):Gi.s(n,e)},S:function(n,e){return Gi.S(n,e)},X:function(n,e,t){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return lL(r);case"XXXX":case"XX":return na(r);case"XXXXX":case"XXX":default:return na(r,":")}},x:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"x":return lL(r);case"xxxx":case"xx":return na(r);case"xxxxx":case"xxx":default:return na(r,":")}},O:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+cL(r,":");case"OOOO":default:return"GMT"+na(r,":")}},z:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+cL(r,":");case"zzzz":default:return"GMT"+na(r,":")}},t:function(n,e,t){let r=Math.trunc(+n/1e3);return ze(r,e.length)},T:function(n,e,t){return ze(+n,e.length)}};function cL(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+ze(o,2)}function lL(n,e){return n%60===0?(n>0?"-":"+")+ze(Math.abs(n)/60,2):na(n,e)}function na(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=ze(Math.trunc(r/60),2),o=ze(r%60,2);return t+i+e+o}var uL=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},dL=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},DY=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return uL(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",uL(r,e)).replace("{{time}}",dL(i,e))},hL={p:dL,P:DY};var AY=/^D+$/,xY=/^Y+$/,RY=["D","DD","YY","YYYY"];function fL(n){return AY.test(n)}function pL(n){return xY.test(n)}function mL(n,e,t){let r=NY(n,e,t);if(console.warn(r),RY.includes(n))throw new RangeError(r)}function NY(n,e,t){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var MY=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,PY=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,OY=/^'([^]*?)'?$/,kY=/''/g,FY=/[a-zA-Z]/;function vg(n,e,t){let r=Lo(),i=t?.locale??r.locale??nb,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=ie(n,t?.in);if(!VF(a))throw new RangeError("Invalid time value");let c=e.match(PY).map(d=>{let f=d[0];if(f==="p"||f==="P"){let m=hL[f];return m(d,i.formatLong)}return d}).join("").match(MY).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let f=d[0];if(f==="'")return{isToken:!1,value:LY(d)};if(rb[f])return{isToken:!0,value:d};if(f.match(FY))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));let u={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return c.map(d=>{if(!d.isToken)return d.value;let f=d.value;(!t?.useAdditionalWeekYearTokens&&pL(f)||!t?.useAdditionalDayOfYearTokens&&fL(f))&&mL(f,e,String(n));let m=rb[f[0]];return m(a,f,i.localize,u)}).join("")}function LY(n){let e=n.match(OY);return e?e[1].replace(kY,"'"):n}function ib(n){return Math.trunc(n*Wc)}function ob(n,e){let{start:t,end:r}=QF(e?.in,n),i={},o=YF(r,t);o&&(i.years=o);let s=Gc(t,{years:i.years}),a=zF(r,s);a&&(i.months=a);let c=Gc(s,{months:i.months}),u=$F(r,c);u&&(i.days=u);let d=Gc(c,{days:i.days}),f=HF(r,d);f&&(i.hours=f);let m=Gc(d,{hours:i.hours}),v=pg(r,m);v&&(i.minutes=v);let w=Gc(m,{minutes:i.minutes}),P=KF(r,w);return P&&(i.seconds=P),i}function gL(n,e){return+ie(n)>+ie(e)}function vL(n,e){return+ie(n)<+ie(e)}function yg(n){return Math.trunc(n*qc)}function _g(n){return n*MF}function yL(n,e,t){return Xs(n,-e,t)}var Gt=class n extends Hn{collectionPath="/races";collectionRef=hr(this.firestore,this.collectionPath);raceConfigService=R(Je);activeRace=Z(void 0);endRaceDate=Z(void 0);constructor(){super(),qe({races:this.getAll(),raceConfig:me(this.raceConfigService.activeRaceConfig)}).pipe(it(),J(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e,t),i=r?Fo(r.start.toDate(),t.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}getAll(){return dr(this.collectionRef).pipe(Zt(this.destroyed),J(e=>e.filter(t=>!t.deleted)))}getActiveRace(e,t){let r=new Date,i=e.sort((o,s)=>s.start.toDate().getTime()-o.start.toDate().getTime());for(let o of i)if(Fo(o.start.toDate(),t.durationHour)>=r)return o}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function Vo(n,e){if(!n||!e)return"--:--:--";let t=ob({end:e,start:n});return wg(t)}function ra(n){if(!n)return"--:--:--";let e=ob({end:n,start:new Date});return wg(e)}function Ft(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return wg(t)}function _L(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return wg(t)}function wL(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return VY(r,t)}function VY(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:---":[Nd(n.minutes),Nd(n.seconds),UY(e)].join(":")}function wg(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:--":[Nd(n.hours),Nd(n.minutes),Nd(n.seconds)].join(":")}function Nd(n){return n?n<10?`0${n}`:`${n}`:"00"}function UY(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var en=class n extends Hn{collectionPath="/pits";collectionRef=hr(this.firestore,this.collectionPath);raceService=R(Gt);raceConfigService=R(Je);activePit=Z(void 0);activePitRemainingMilliseconds=Z(0);lastRefuelPit=Z(void 0);pits=Z([]);completedDriverChanges=Z(0);lastDriverChangePit=Z(void 0);remainingDriverChanges=Z(0);constructor(){super(),qe({pits:this.getRacePits(),activeRaceConfig:me(this.raceConfigService.activeRaceConfig),ping:Mt(1e3)}).pipe(it()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return qe({pits:dr(this.collectionRef),activeRace:me(this.raceService.activeRace)}).pipe(Zt(this.destroyed),J(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return ea(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let t=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of t)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var si=class n{raceService=R(Gt);pitService=R(en);raceConfigService=R(Je);optimizedStint=Z(void 0);constructor(){qe({activeRace:me(this.raceService.activeRace),endRaceDate:me(this.raceService.endRaceDate),activeRaceConfig:me(this.raceConfigService.activeRaceConfig),remainingDriverChanges:me(this.pitService.remainingDriverChanges),lastDriverChangePit:me(this.pitService.lastDriverChangePit),ping:Mt(1e3)}).pipe(it()).subscribe(({activeRace:e,endRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,lastDriverChangePit:o})=>{r?this.optimizedStint.set(this.calculateOptimizedStint(e?e.start.toDate():new Date,t||Fo(new Date,r.durationHour),r,i,o)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,o){let s=new Date;if(s>=t)return;let a=_g(r.minPitSeconds*i),c=Wi(t,s)-a,u=o?ea(o.entryTime.toDate(),r.minPitSeconds):e,f=(Wi(t,u)-a)/(i+1),m=c/i;return{avgStintMillisecondsTime:f,laps:Math.floor(f/r.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:m,lapsIfDriverChangeNow:Math.floor(m/r.referenceLapTimeMillisecond)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var zt=class n extends Hn{collectionPath="/stints";collectionRef=hr(this.firestore,this.collectionPath);raceService=R(Gt);raceConfigService=R(Je);stintOptimizerService=R(si);activeRace=this.raceService.activeRace;stints=Z([]);activeStint=Z(void 0);activeStintTimeOnTrack=Z(0);activeStintLaps=Z(0);activeStintRemainingTimeOnTrack=Z(0);activeStintRemainingLaps=Z(0);activeStintGainedTimeOnTrack=Z(0);activeStintGainedLaps=Z(0);constructor(){super(),qe({stints:this.getRaceStints(),activeRaceConfig:me(this.raceConfigService.activeRaceConfig),optimizedStint:me(this.stintOptimizerService.optimizedStint),ping:Mt(1e3)}).pipe(it()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return y(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return qe({stints:dr(this.collectionRef),activeRace:me(this.activeRace)}).pipe(Zt(this.destroyed),J(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zc=class n{raceService=R(Gt);stintService=R(zt);pitService=R(en);stintOptimizerService=R(si);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;optimizedStintMilliseconds=De(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.avgStintMillisecondsTime:0});startRace(e){return y(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}pitIn(e,t,r){return y(this,null,function*(){let i=this.activeRace(),o=this.activeStint();if(i&&o){let s=this.createPit(o.driverId,e,i.id,t,r),a=yield this.pitService.create(s);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return y(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=kt.now();yield this.closeActivePit(r),yield this.startStint(e.id,t.exitDriverId,r)}})}startStint(e,t,r){return y(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return y(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return y(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:kt.now(),deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,optimumMilliseconds:this.optimizedStintMilliseconds(),raceId:e,startDate:r}}createPit(e,t,r,i,o){return{id:"1",entryDriverId:e,entryTime:kt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:o,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var RL=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Re(Ci),Re(sr))}}static{this.\u0275dir=ut({type:n})}}return n})(),Vd=(()=>{class n extends RL{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,features:[Fn]})}}return n})(),nl=new H(""),jY={provide:nl,useExisting:ir(()=>cb),multi:!0},cb=(()=>{class n extends Vd{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[Yr([jY]),Fn]})}}return n})(),BY={provide:nl,useExisting:ir(()=>rl),multi:!0};function $Y(){let n=xi()?xi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var HY=new H(""),rl=(()=>{class n extends RL{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!$Y())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(Ci),Re(sr),Re(HY,8))}}static{this.\u0275dir=ut({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ue("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[Yr([BY]),Fn]})}}return n})();function sb(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Ag=new H(""),NL=new H("");function qY(n){return e=>{if(sb(e.value)||sb(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function WY(n){return sb(n.value)?{required:!0}:null}function IL(n){return null}function ML(n){return n!=null}function PL(n){return ms(n)?pt(n):n}function OL(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function kL(n,e){return e.map(t=>t(n))}function GY(n){return!n.validate}function FL(n){return n.map(e=>GY(e)?e:t=>e.validate(t))}function zY(n){if(!n)return null;let e=n.filter(ML);return e.length==0?null:function(t){return OL(kL(t,e))}}function lb(n){return n!=null?zY(FL(n)):null}function KY(n){if(!n)return null;let e=n.filter(ML);return e.length==0?null:function(t){let r=kL(t,e).map(PL);return Yv(r).pipe(J(OL))}}function ub(n){return n!=null?KY(FL(n)):null}function EL(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function YY(n){return n._rawValidators}function QY(n){return n._rawAsyncValidators}function ab(n){return n?Array.isArray(n)?n:[n]:[]}function Eg(n,e){return Array.isArray(n)?n.includes(e):n===e}function CL(n,e){let t=ab(e);return ab(n).forEach(i=>{Eg(t,i)||t.push(i)}),t}function TL(n,e){return ab(e).filter(t=>!Eg(n,t))}var Cg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=lb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ub(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},el=class extends Cg{get formDirective(){return null}get path(){return null}},Ld=class extends Cg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Tg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ZY={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},i_e=Ee(B({},ZY),{"[class.ng-submitted]":"isSubmitted"}),Uo=(()=>{class n extends Tg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(Ld,2))}}static{this.\u0275dir=ut({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Wf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Fn]})}}return n})(),jo=(()=>{class n extends Tg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Re(el,10))}}static{this.\u0275dir=ut({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Wf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Fn]})}}return n})();var Md="VALID",Ig="INVALID",Jc="PENDING",Pd="DISABLED",tl=class{},bg=class extends tl{constructor(e,t){super(),this.value=e,this.source=t}},kd=class extends tl{constructor(e,t){super(),this.pristine=e,this.source=t}},Fd=class extends tl{constructor(e,t){super(),this.touched=e,this.source=t}},Xc=class extends tl{constructor(e,t){super(),this.status=e,this.source=t}};function LL(n){return(xg(n)?n.validators:n)||null}function JY(n){return Array.isArray(n)?lb(n):n||null}function VL(n,e){return(xg(e)?e.asyncValidators:n)||null}function XY(n){return Array.isArray(n)?ub(n):n||null}function xg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function eQ(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new X(1e3,"");if(!r[t])throw new X(1001,"")}function tQ(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new X(1002,"")})}var Sg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=De(()=>this.statusReactive()),this.statusReactive=Z(void 0),this._pristine=De(()=>this.pristineReactive()),this.pristineReactive=Z(!0),this._touched=De(()=>this.touchedReactive()),this.touchedReactive=Z(!1),this._events=new gt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return cr(this.statusReactive)}set status(e){cr(()=>this.statusReactive.set(e))}get valid(){return this.status===Md}get invalid(){return this.status===Ig}get pending(){return this.status==Jc}get disabled(){return this.status===Pd}get enabled(){return this.status!==Pd}get pristine(){return cr(this.pristineReactive)}set pristine(e){cr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return cr(this.touchedReactive)}set touched(e){cr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(CL(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(CL(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(TL(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(TL(e,this._rawAsyncValidators))}hasValidator(e){return Eg(this._rawValidators,e)}hasAsyncValidator(e){return Eg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ee(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ee(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new kd(!0,r))}markAsPending(e={}){this.status=Jc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ee(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pd,this.errors=null,this._forEachChild(i=>{i.disable(Ee(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bg(this.value,r)),this._events.next(new Xc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Md,this._forEachChild(r=>{r.enable(Ee(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Md||this.status===Jc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bg(this.value,t)),this._events.next(new Xc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ee(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Pd:Md}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Jc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=PL(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Xc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ut,this.statusChanges=new Ut}_calculateStatus(){return this._allControlsDisabled()?Pd:this.errors?Ig:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jc)?Jc:this._anyControlsHaveStatus(Ig)?Ig:Md}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new kd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){xg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=JY(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=XY(this._rawAsyncValidators)}},Dg=class extends Sg{constructor(e,t,r){super(LL(t),VL(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){tQ(this,!0,e),Object.keys(e).forEach(r=>{eQ(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Rg=new H("CallSetDisabledState",{providedIn:"root",factory:()=>Ng}),Ng="always";function nQ(n,e){return[...e.path,n]}function UL(n,e,t=Ng){jL(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),iQ(n,e),sQ(n,e),oQ(n,e),rQ(n,e)}function bL(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function rQ(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function jL(n,e){let t=YY(n);e.validator!==null?n.setValidators(EL(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=QY(n);e.asyncValidator!==null?n.setAsyncValidators(EL(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();bL(e._rawValidators,i),bL(e._rawAsyncValidators,i)}function iQ(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&BL(n,e)})}function oQ(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&BL(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function BL(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function sQ(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function aQ(n,e){n==null,jL(n,e)}function cQ(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function lQ(n){return Object.getPrototypeOf(n.constructor)===Vd}function uQ(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function dQ(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===rl?t=o:lQ(o)?r=o:i=o}),i||r||t||null}var hQ={provide:el,useExisting:ir(()=>zi)},Od=Promise.resolve(),zi=(()=>{class n extends el{get submitted(){return cr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=De(()=>this.submittedReactive()),this.submittedReactive=Z(!1),this._directives=new Set,this.ngSubmit=new Ut,this.form=new Dg({},lb(t),ub(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Od.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),UL(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Od.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Od.then(()=>{let r=this._findContainer(t.path),i=new Dg({});aQ(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Od.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Od.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),uQ(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Re(Ag,10),Re(NL,10),Re(Rg,8))}}static{this.\u0275dir=ut({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ue("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Yr([hQ]),Fn]})}}return n})();function SL(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function DL(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var fQ=class extends Sg{constructor(e=null,t,r){super(LL(t),VL(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),xg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(DL(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){SL(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){SL(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){DL(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var pQ={provide:Ld,useExisting:ir(()=>Ki)},AL=Promise.resolve(),Ki=(()=>{class n extends Ld{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new fQ,this._registered=!1,this.name="",this.update=new Ut,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=dQ(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),cQ(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){UL(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){AL.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&iu(r);AL.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?nQ(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Re(el,9),Re(Ag,10),Re(NL,10),Re(nl,10),Re(Io,8),Re(Rg,8))}}static{this.\u0275dir=ut({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Yr([pQ]),Fn,Ei]})}}return n})(),Bo=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ut({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),mQ={provide:nl,useExisting:ir(()=>Ud),multi:!0},Ud=(()=>{class n extends Vd{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ue("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[Yr([mQ]),Fn]})}}return n})();var gQ=new H("");var vQ={provide:nl,useExisting:ir(()=>il),multi:!0};function $L(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function yQ(n){return n.split(":")[0]}var il=(()=>{class n extends Vd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=$L(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=yQ(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Yr([vQ]),Fn]})}}return n})(),Mg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue($L(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Re(sr),Re(Ci),Re(il,9))}}static{this.\u0275dir=ut({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),_Q={provide:nl,useExisting:ir(()=>HL),multi:!0};function xL(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function wQ(n){return n.split(":")[0]}var HL=(()=>{class n extends Vd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=wQ(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ue("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Yr([_Q]),Fn]})}}return n})(),Pg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(xL(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(xL(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Re(sr),Re(Ci),Re(HL,9))}}static{this.\u0275dir=ut({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function IQ(n){return typeof n=="number"?n:parseFloat(n)}var qL=(()=>{class n{constructor(){this._validator=IL}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):IL,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ut({type:n,features:[Ei]})}}return n})();var EQ={provide:Ag,useExisting:ir(()=>jd),multi:!0},jd=(()=>{class n extends qL{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>IQ(t),this.createValidator=t=>qY(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ru("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Yr([EQ]),Fn]})}}return n})(),CQ={provide:Ag,useExisting:ir(()=>Bd),multi:!0};var Bd=(()=>{class n extends qL{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=iu,this.createValidator=t=>WY}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=Ir(n)))(i||n)}})()}static{this.\u0275dir=ut({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ru("required",i._enabled?"":null)},inputs:{required:"required"},features:[Yr([CQ]),Fn]})}}return n})();var WL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=go({type:n})}static{this.\u0275inj=mo({})}}return n})();var $o=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rg,useValue:t.callSetDisabledState??Ng}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=go({type:n})}static{this.\u0275inj=mo({imports:[WL]})}}return n})(),GL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gQ,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rg,useValue:t.callSetDisabledState??Ng}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=go({type:n})}static{this.\u0275inj=mo({imports:[WL]})}}return n})();var kg=class n extends Hn{collectionPath="/laps";collectionRef=hr(this.firestore,this.collectionPath);raceService=R(Gt);laps=Z([]);constructor(){super(),qe({laps:this.getRaceLaps(),activeRace:me(this.raceService.activeRace)}).pipe(it()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return qe({laps:dr(this.collectionRef),activeRace:me(this.raceService.activeRace)}).pipe(Zt(this.destroyed),J(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ai=class n extends Hn{collectionPath="/drivers";collectionRef=hr(this.firestore,this.collectionPath);lapService=R(kg);stintService=R(zt);raceConfigService=R(Je);drivers=Z([]);driversReferenceLapTimeMap=Z(new Map);driversTimeOnTrackMap=Z(new Map);driversTimeOnTrackWarningMap=Z(new Map);driversStintCountMap=Z(new Map);driverWithMoreTimeFromLastStint=Z(void 0);driversTimeFromLastStintMap=Z(new Map);driversTimeOnTrackWarningCount=De(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),qe({drivers:this.getAll(),laps:me(this.lapService.laps),stints:me(this.stintService.stints),activeRaceConfig:me(this.raceConfigService.activeRaceConfig),ping:Mt(1e3)}).pipe(it()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithMoreTimeFromLastStint.set(this.getDriverWithMoreTimeFromLastStint(r,e)),this.driversTimeFromLastStintMap.set(this.createDriversTimeFromLastStintMap(r,e))})}getAll(){return dr(this.collectionRef).pipe(Zt(this.destroyed),J(e=>e.filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(o=>{r.set(o.id,0)});let i=e.reduce((o,s)=>(o[s.driverId]||(o[s.driverId]=[]),o[s.driverId].push(s.millisecondsTime),o),{});for(let o in i){let s=i[o],a=s.reduce((c,u)=>c+u,0)/s.length;r.set(o,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let o;i.endDate?o=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():o=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+o):r.set(i.driverId,o)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=ib(t.minDriverOnTrackHour),o=ib(t.maxDriverOnTrackHour),s=yg(t.warningDriverOnTrackThresholdMinute);e.forEach((a,c)=>{let u=a<i,d=o-a<=s;r.set(c,u||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithMoreTimeFromLastStint(e,t){if(t.length===0)return;let r,i=this.createDriversTimeFromLastStintMap(e,t),o=e.find(c=>c.endDate===null)?.driverId,s=new Map(t.map(c=>[c.id,c])),a=-1;return i.forEach((c,u)=>{u!==o&&c>a&&(a=c,r=s.get(u))}),r}createDriversTimeFromLastStintMap(e,t){let r=new Map;return t.forEach(i=>{let o=e.filter(s=>s.driverId===i.id).sort((s,a)=>a.startDate.toDate().getTime()-s.startDate.toDate().getTime()).at(0);o&&o.endDate?r.set(i.id,new Date().getTime()-o.endDate.toDate().getTime()):r.set(i.id,0)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function TQ(n,e){if(n&1&&(C(0,"option",7),x(1),T()),n&2){let t=e.$implicit;Q("value",t.id),O(),G(" ",t.raceName," ")}}function bQ(n,e){if(n&1){let t=Ti();C(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),x(4,"Start driver"),T(),C(5,"select",4),Tr("ngModelChange",function(i){vt(t);let o=q();return Kr(o.selectedDriver,i)||(o.selectedDriver=i),yt(i)}),ue("change",function(){vt(t);let i=q();return yt(i.updateDriverId())}),te(6,TQ,2,2,"option",5),T()()(),C(7,"button",6),ue("click",function(){vt(t);let i=q();return yt(i.startRace())}),x(8," Start race "),T()()}if(n&2){let t=q();O(5),Cr("ngModel",t.selectedDriver),O(),Q("ngForOf",t.drivers())}}function SQ(n,e){if(n&1&&(C(0,"div",1),x(1),T()),n&2){let t=q();O(),G(" ",t.endRaceCountdown," ")}}var Fg=class n{raceService=R(Gt);raceConfigService=R(Je);raceManagerService=R(Zc);driverService=R(ai);drivers=this.driverService.drivers;endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";selectedDriver="1";constructor(){qe({endRaceDate:me(this.endRaceDate),ping:Mt(1e3)}).pipe(it()).subscribe(e=>{this.endRaceCountdown=ra(e.endRaceDate)}),Sr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-race"]],standalone:!0,features:[Le],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[3,"value"]],template:function(t,r){t&1&&te(0,bQ,9,2,"div",0)(1,SQ,2,1,"div",1),t&2&&le(r.endRaceDate()?1:0)},dependencies:[$o,Bo,Mg,Pg,il,Uo,jo,Ki,zi,Vn]})};var ol=class n{raceService=R(Gt);raceConfigService=R(Je);pitService=R(en);openingTime=Z(void 0);closingTime=Z(void 0);tyreChangeWindowOpen=Z(!1);remainingTyreChange=Z(0);constructor(){qe({pits:me(this.pitService.pits),activeRace:me(this.raceService.activeRace),raceConfig:me(this.raceConfigService.activeRaceConfig),ping:Mt(1e3)}).pipe(it()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(Fo(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(Fo(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var DQ=n=>({"mb-2":n}),AQ=n=>({"animate-bounce":n});function xQ(n,e){if(n&1&&(C(0,"div",4),x(1),T()),n&2){let t=q();O(),G(" Remaining: ",t.remainingTyreChange()," ")}}function RQ(n,e){n&1&&(C(0,"div",5),x(1," Completed! "),T())}function NQ(n,e){if(n&1&&(C(0,"div",6),x(1," Window open "),T()),n&2){let t=q();Q("ngClass",st(1,AQ,t.remainingTyreChange()>0))}}function MQ(n,e){n&1&&(C(0,"div",7),x(1," Window closed "),T())}function PQ(n,e){if(n&1&&(x(0),bi(1,"date")),n&2){let t=q(2);G(" ",Si(1,1,t.openingTime(),"HH:mm:ss")," ")}}function OQ(n,e){n&1&&x(0," --:--:-- ")}function kQ(n,e){if(n&1&&(x(0),bi(1,"date")),n&2){let t=q(2);G(" ",Si(1,1,t.closingTime(),"HH:mm:ss")," ")}}function FQ(n,e){n&1&&x(0," --:--:-- ")}function LQ(n,e){if(n&1&&(C(0,"div",8)(1,"div")(2,"div",9),x(3,"Opening time"),T(),C(4,"div",10),te(5,PQ,2,4)(6,OQ,1,0),T()(),C(7,"div")(8,"div",11),x(9,"Opening in"),T(),C(10,"div",12),x(11),T()()(),Te(12,"hr",13),C(13,"div",14)(14,"div")(15,"div",9),x(16,"Closing time"),T(),C(17,"div",10),te(18,kQ,2,4)(19,FQ,1,0),T()(),C(20,"div")(21,"div",11),x(22,"Closing in"),T(),C(23,"div",12),x(24),T()()()),n&2){let t=q();O(5),le(t.openingTime()?5:6),O(6),G(" ",t.countdownOpeningTime()," "),O(7),le(t.closingTime()?18:19),O(6),G(" ",t.countdownClosingTime()," ")}}var Lg=class n{tyreService=R(ol);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=De(()=>ra(this.tyreService.openingTime()));countdownClosingTime=De(()=>ra(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-tyre-change-window"]],standalone:!0,features:[Le],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F6DE} \u{1F504} Tyre change"),T(),C(4,"div",3),te(5,xQ,2,1,"div",4)(6,RQ,2,0,"div",5)(7,NQ,2,3,"div",6)(8,MQ,2,0,"div",7),T()(),te(9,LQ,25,4),T()),t&2&&(O(),Q("ngClass",st(4,DQ,r.isOpen)),O(4),le(r.remainingTyreChange()>0?5:6),O(2),le(r.tyreChangeWindowOpen()?7:8),O(2),le(r.isOpen?9:-1))},dependencies:[Wa,ct]})};var Vg=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[Ei,Le],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),x(4),T()()(),Te(5,"div",4),T()),t&2&&(O(),Q("ngClass",r.batteryBorderColor),O(),qa("width",r.charge,"%"),Q("ngClass",r.batteryColor),O(2),_t(r.charge),O(),Q("ngClass",r.batteryBorderColor))},dependencies:[ct],changeDetection:0})};var Ug=class n{raceService=R(Gt);pitService=R(en);raceConfigService=R(Je);lastRefuelTime=Z(void 0);emptyFuelTime=Z(void 0);remainingFuelPercentage=Z(100);remainingFuelLap=Z(0);constructor(){qe({lastRefuelPit:me(this.pitService.lastRefuelPit),activeRace:me(this.raceService.activeRace),raceConfig:me(this.raceConfigService.activeRaceConfig),ping:Mt(1e3)}).pipe(it()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e&&e.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return Xs(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=pg(e,new Date)/t.fuelDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=Wi(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=yg(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var VQ=n=>({"mb-2":n}),UQ=n=>({"animate-bounce":n});function jQ(n,e){if(n&1&&(x(0),bi(1,"date")),n&2){let t=q(2);G(" ",Si(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function BQ(n,e){n&1&&x(0," --:--:-- ")}function $Q(n,e){if(n&1&&(x(0),bi(1,"date")),n&2){let t=q(2);G(" ",Si(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function HQ(n,e){n&1&&x(0," --:--:-- ")}function qQ(n,e){if(n&1){let t=Ti();C(0,"div",7)(1,"div")(2,"div",8),x(3,"Last refuel time"),T(),C(4,"div",9),te(5,jQ,2,4)(6,BQ,1,0),T()(),C(7,"div")(8,"div",10),x(9,"Since last refuel"),T(),C(10,"div",11),x(11),T()()(),Te(12,"hr",12),C(13,"div",7)(14,"div")(15,"div",8),x(16,"Empty time"),T(),C(17,"div",9),te(18,$Q,2,4)(19,HQ,1,0),T()(),C(20,"div")(21,"div",10),x(22,"Empty in"),T(),C(23,"div",11),x(24),T()()(),Te(25,"hr",12),C(26,"div",13)(27,"div")(28,"div",8),x(29,"Remaining laps"),T(),C(30,"div",9),x(31),T()(),C(32,"div")(33,"div",10),x(34,"Fuel duration (min)"),T(),C(35,"div",14)(36,"button",15),ue("click",function(){vt(t);let i=q();return yt(i.increaseFuelDuration())}),x(37,"+"),T(),C(38,"form",16),ue("ngSubmit",function(){vt(t);let i=q();return yt(i.onSubmit())}),C(39,"input",17),Tr("ngModelChange",function(i){vt(t);let o=q();return Kr(o.fuelDurationMinute,i)||(o.fuelDurationMinute=i),yt(i)}),T()(),C(40,"button",18),ue("click",function(){vt(t);let i=q();return yt(i.decreaseFuelDuration())}),x(41,"-"),T()()()()}if(n&2){let t=q();O(5),le(t.lastRefuelTime()?5:6),O(6),G(" ",t.sinceLastRefuel()," "),O(7),le(t.emptyFuelTime()?18:19),O(6),G(" ",t.emptyFuelCountdown()," "),O(7),G(" ",t.remainingFuelLap()," "),O(8),Cr("ngModel",t.fuelDurationMinute)}}var jg=class n{raceConfigService=R(Je);fuelService=R(Ug);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=De(()=>ra(this.emptyFuelTime()));sinceLastRefuel=De(()=>Vo(this.lastRefuelTime(),new Date));warning=De(()=>this.remainingFuelPercentage()<=20);remainingColor=De(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){Sr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-fuel"]],standalone:!0,features:[Le],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u26FD\uFE0F Fuel"),T(),C(4,"div",3)(5,"div",4),x(6),T(),C(7,"div",5),x(8),T(),Te(9,"app-battery",6),T()(),te(10,qQ,42,6),T()),t&2&&(O(),Q("ngClass",st(8,VQ,r.isOpen)),O(3),Q("ngClass",st(10,UQ,r.warning())),O(),Q("ngClass",r.remainingColor()),O(),G(" Empty: ",r.emptyFuelCountdown()," "),O(),Q("ngClass",r.remainingColor()),O(),G(" Laps: ",r.remainingFuelLap()," "),O(),Q("charge",r.remainingFuelPercentage()),O(),le(r.isOpen?10:-1))},dependencies:[ct,Wa,Vg,$o,Bo,rl,Ud,Uo,jo,Bd,jd,Ki,zi]})};var WQ=n=>({"mb-2":n});function GQ(n,e){if(n&1&&(C(0,"div",6)(1,"div")(2,"div",7),x(3,"Optimized AVG time"),T(),C(4,"div",8),x(5),T()(),C(6,"div")(7,"div",9),x(8,"Laps"),T(),C(9,"div",10),x(10),T()()(),Te(11,"hr",11),C(12,"div",12)(13,"div")(14,"div",7),x(15," Optimized AVG time "),C(16,"strong"),x(17,"if driver change now"),T()(),C(18,"div",8),x(19),T()(),C(20,"div")(21,"div",9),x(22,"Laps"),T(),C(23,"div",10),x(24),T()()()),n&2){let t=q();O(5),G(" ",t.AVGStintTime()," "),O(5),G(" ",t.laps()," "),O(9),G(" ",t.AVGStintTimeIfDriverChangeNow()," "),O(5),G(" ",t.lapsIfDriverChangeNow()," ")}}var Bg=class n{stintOptimizerService=R(si);AVGStintTime=De(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Ft(e.avgStintMillisecondsTime):"--:--:--"});laps=De(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=De(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Ft(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=De(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-stint-optimizer"]],standalone:!0,features:[Le],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F9E0} Stint optimizer"),T(),C(4,"div",3)(5,"div",4),x(6),T(),C(7,"div",5),x(8),T()()(),te(9,GQ,25,4),T()),t&2&&(O(),Q("ngClass",st(4,WQ,r.isOpen)),O(5),G(" Optimum: ",r.AVGStintTime()," "),O(2),G(" Laps: ",r.laps()," "),O(),le(r.isOpen?9:-1))},dependencies:[ct]})};var zQ=n=>({"mb-2":n}),KQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),YQ=n=>({"bg-yellow-500 text-white":n});function QQ(n,e){if(n&1&&(C(0,"div",4),x(1),T()),n&2){let t=q();O(),G(" Warning: ",t.driversTimeOnTrackWarningCount()," ")}}function ZQ(n,e){n&1&&(C(0,"div",5),x(1," Completed! "),T())}function JQ(n,e){if(n&1&&(C(0,"tr",17)(1,"td",18),x(2),T(),C(3,"td",19),x(4),T(),C(5,"td",20),x(6),T(),C(7,"td",21)(8,"div",22),x(9),T()(),C(10,"td",23),x(11),T()()),n&2){let t=e.$implicit,r=q(2);Q("ngClass",br(7,KQ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),O(2),_t(t.id),O(2),_t(t.raceName),O(2),G(" ",r.getDriverStintCount(t.id)," "),O(2),Q("ngClass",st(10,YQ,r.getDriverTimeOnTrackWarning(t.id))),O(),G(" ",r.getDriverTimeOnTrack(t.id)," "),O(2),G("",r.getDriverTimeFromLastStint(t.id)," ")}}function XQ(n,e){if(n&1&&(C(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),Te(4,"th",9),C(5,"th",10),x(6," Name "),T(),C(7,"th",11),x(8," Stint "),T(),C(9,"th",12),x(10," On track "),T(),C(11,"th",13),x(12," From last stint "),T()()()(),C(13,"div",14)(14,"table",15)(15,"tbody"),te(16,JQ,12,12,"tr",16),T()()()()),n&2){let t=q();O(16),Q("ngForOf",t.drivers())}}var $g=class n{driverService=R(ai);stintService=R(zt);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=De(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverTimeOnTrack(e){return Ft(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)??0}getDriverTimeFromLastStint(e){return Ft(this.driverService.driversTimeFromLastStintMap().get(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-driver"]],standalone:!0,features:[Le],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F417} Driver"),T(),C(4,"div",3),te(5,QQ,2,1,"div",4)(6,ZQ,2,0,"div",5),T()(),te(7,XQ,17,1,"div",6),T()),t&2&&(O(),Q("ngClass",st(3,zQ,r.isOpen)),O(4),le(r.driversTimeOnTrackWarningCount()>0?5:6),O(2),le(r.isOpen?7:-1))},dependencies:[ct,Vn]})};var Hg=class n{raceService=R(Gt);stintService=R(zt);raceConfigService=R(Je);open=Z(!1);openInMilliseconds=Z(0);constructor(){qe({endRaceDate:me(this.raceService.endRaceDate),activeStint:me(this.stintService.activeStint),activeRaceConfig:me(this.raceConfigService.activeRaceConfig),ping:Mt(1e3)}).pipe(it()).subscribe(({endRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return Xs(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,o=yL(e,r.pitLaneCloseBeforeEndRaceMinute),s=vL(i,o),a=Xs(t.startDate.toDate(),r.minStintMinute),c=gL(i,a);return s&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var qg=class n{audio=new Audio;constructor(){this.audio.addEventListener("error",e=>console.error("Audio error:",e))}play(){this.audio.play()}playFile(e){this.audio=new Audio(e),this.audio.play()}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0}seek(e){this.audio.currentTime=e}setVolume(e){this.audio.volume=e}setLoop(e){this.audio.loop=e}on(e,t){this.audio.addEventListener(e,t)}off(e,t){this.audio.removeEventListener(e,t)}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var eZ=n=>({"mb-4":n}),tZ=n=>({"animate-bounce":n});function nZ(n,e){if(n&1&&(C(0,"div",3),x(1),T()),n&2){let t=q();O(),G(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function rZ(n,e){n&1&&(C(0,"div",5),x(1," Open "),T())}function iZ(n,e){n&1&&(C(0,"div",6),x(1," Closed "),T())}function oZ(n,e){if(n&1&&(C(0,"option",20),x(1),T()),n&2){let t=e.$implicit;Q("value",t.id),O(),G(" ",t.raceName," ")}}function sZ(n,e){if(n&1){let t=Ti();C(0,"div",11),x(1,"PIT SETTINGS"),T(),C(2,"form")(3,"div",12)(4,"label",13),x(5,"\u{1F417} Driver"),T(),C(6,"select",14),Tr("ngModelChange",function(i){vt(t);let o=q(2);return Kr(o.selectedDriver,i)||(o.selectedDriver=i),yt(i)}),ue("change",function(){vt(t);let i=q(2);return yt(i.updateDriverId())}),te(7,oZ,2,2,"option",15),T()(),C(8,"div",12)(9,"label",16),x(10,"\u26FD\uFE0F Refueling"),T(),C(11,"input",17),ue("change",function(){vt(t);let i=q(2);return yt(i.updateRefueling())}),Tr("ngModelChange",function(i){vt(t);let o=q(2);return Kr(o.refueling,i)||(o.refueling=i),yt(i)}),T()(),C(12,"div",12)(13,"label",18),x(14,"\u{1F6DE} Tyre change"),T(),C(15,"input",19),Tr("ngModelChange",function(i){vt(t);let o=q(2);return Kr(o.tyreChange,i)||(o.tyreChange=i),yt(i)}),ue("change",function(){vt(t);let i=q(2);return yt(i.updateTyreChange())}),T()()()}if(n&2){let t=q(2);O(6),Q("disabled",t.activePit()!==void 0),Cr("ngModel",t.selectedDriver),O(),Q("ngForOf",t.drivers()),O(4),Q("disabled",t.activePit()!==void 0),Cr("ngModel",t.refueling),O(4),Q("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),Cr("ngModel",t.tyreChange)}}function aZ(n,e){if(n&1&&(C(0,"div",21),x(1),T()),n&2){let t=q(3);Q("ngClass",st(2,tZ,t.activePitRemainingMilliseconds()<1e4)),O(),G(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function cZ(n,e){n&1&&(C(0,"div",22),x(1," Pit out ready! "),T())}function lZ(n,e){if(n&1&&te(0,aZ,2,4,"div",21)(1,cZ,2,0,"div",22),n&2){let t=q(2);le(t.activePitRemainingMilliseconds()>0?0:1)}}function uZ(n,e){if(n&1){let t=Ti();C(0,"div",7),te(1,sZ,16,7)(2,lZ,2,1),T(),C(3,"div",8)(4,"button",9),ue("click",function(){vt(t);let i=q();return yt(i.pitIn())}),x(5," Pit in "),T(),C(6,"button",10),ue("click",function(){vt(t);let i=q();return yt(i.pitOut())}),x(7," Pit out "),T()()}if(n&2){let t=q();O(),le(t.activePit()?2:1),O(3),Q("disabled",!t.pitLaneOpen()),O(2),Q("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var Wg=class n{pitLaneService=R(Hg);pitService=R(en);driverService=R(ai);raceManagerService=R(Zc);tyreService=R(ol);raceConfigService=R(Je);audioService=R(qg);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=De(()=>Ft(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=De(()=>_L(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";constructor(){Sr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.nextPitDriverId,this.refueling=e.nextPitRefueling,this.tyreChange=e.nextPitTyreChange)})}pitIn(){return y(this,null,function*(){this.audioService.playFile("assets/box_box_box_box.mp3"),yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)})}pitOut(){return y(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithMoreTimeFromLastStint();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-pit-lane"]],standalone:!0,features:[Le],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F17F}\uFE0F Pit Lane"),T(),te(4,nZ,2,1,"div",3),C(5,"div",4),te(6,rZ,2,0,"div",5)(7,iZ,2,0,"div",6),T()(),te(8,uZ,8,3),T()),t&2&&(O(),Q("ngClass",st(4,eZ,r.isOpen)),O(3),le(r.pitLaneOpenInMilliseconds()>0?4:-1),O(2),le(r.pitLaneOpen()?6:7),O(2),le(r.isOpen?8:-1))},dependencies:[ct,$o,Bo,Mg,Pg,cb,il,Uo,jo,Ki,zi,Vn]})};var dZ=n=>({"mb-2":n});function hZ(n,e){if(n&1&&(C(0,"div",4),x(1),T()),n&2){let t=q();O(),G(" Remaining: ",t.remainingDriverChanges()," ")}}function fZ(n,e){n&1&&(C(0,"div",5),x(1," Completed! "),T())}function pZ(n,e){if(n&1&&(C(0,"div",6)(1,"div")(2,"div",7),x(3,"Competed"),T(),C(4,"div",8),x(5),T()(),C(6,"div")(7,"div",9),x(8,"Remaining"),T(),C(9,"div",10),x(10),T()()()),n&2){let t=q();O(5),G(" ",t.completedDriverChanges()," "),O(5),G(" ",t.remainingDriverChanges()," ")}}var Gg=class n{pitService=R(en);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-driver-change"]],standalone:!0,features:[Le],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F417} \u{1F504} Driver change"),T(),C(4,"div",3),te(5,hZ,2,1,"div",4)(6,fZ,2,0,"div",5),T()(),te(7,pZ,11,2,"div",6),T()),t&2&&(O(),Q("ngClass",st(3,dZ,r.isOpen)),O(4),le(r.remainingDriverChanges()>0?5:6),O(2),le(r.isOpen?7:-1))},dependencies:[ct]})};var mZ=n=>({"mb-2":n});function gZ(n,e){if(n&1&&(C(0,"div",4),x(1),T(),C(2,"div",5),x(3),T()),n&2){let t=q(2);O(),G(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),O(2),G(" Laps: ",t.activeStintRemainingLaps()," ")}}function vZ(n,e){if(n&1&&(C(0,"div",6),x(1),T(),C(2,"div",7),x(3),T()),n&2){let t=q(2);O(),G(" Gaining: ",t.activeStintGainedTimeOnTrackString()," "),O(2),G(" Laps: ",t.activeStintGainedLaps()," ")}}function yZ(n,e){if(n&1&&te(0,gZ,4,2)(1,vZ,4,2),n&2){let t=q();le(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function _Z(n,e){if(n&1&&x(0),n&2){let t=q(2);G(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function wZ(n,e){n&1&&x(0," --:--:-- ")}function IZ(n,e){if(n&1&&x(0),n&2){let t=q(2);G(" ",t.activeStintRemainingLaps()," ")}}function EZ(n,e){n&1&&x(0," 0 ")}function CZ(n,e){if(n&1&&(C(0,"div",8)(1,"div")(2,"div",9),x(3,"Time on track"),T(),C(4,"div",10),x(5),T()(),C(6,"div")(7,"div",11),x(8,"Laps"),T(),C(9,"div",12),x(10),T()()(),Te(11,"hr",13),C(12,"div",8)(13,"div")(14,"div",9),x(15,"Remaining time on track"),T(),C(16,"div",10),te(17,_Z,1,1)(18,wZ,1,0),T()(),C(19,"div")(20,"div",11),x(21,"Remaining laps"),T(),C(22,"div",12),te(23,IZ,1,1)(24,EZ,1,0),T()()(),Te(25,"hr",13),C(26,"div",14)(27,"div")(28,"div",9),x(29,"Gained time on track"),T(),C(30,"div",10),x(31),T()(),C(32,"div")(33,"div",11),x(34,"Gained laps"),T(),C(35,"div",12),x(36),T()()()),n&2){let t=q();O(5),G(" ",t.activeStintTimeOnTrackString()," "),O(5),G(" ",t.activeStintLaps()," "),O(7),le(t.activeStint()?17:18),O(6),le(t.activeStint()?23:24),O(8),G(" ",t.activeStintGainedTimeOnTrackString()," "),O(5),G(" ",t.activeStintGainedLaps()," ")}}var zg=class n{stintService=R(zt);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=De(()=>Ft(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=De(()=>Ft(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=De(()=>Ft(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-active-stint"]],standalone:!0,features:[Le],decls:7,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),T(),C(4,"div",3),te(5,yZ,2,1),T()(),te(6,CZ,37,6),T()),t&2&&(O(),Q("ngClass",st(3,mZ,r.isOpen)),O(4),le(r.activeStint()?5:-1),O(),le(r.isOpen?6:-1))},dependencies:[ct]})};var TZ=n=>({"mb-2":n}),bZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function SZ(n,e){if(n&1&&(x(0),bi(1,"date")),n&2){let t=q().$implicit;G(" ",Si(1,1,t.endDate.toDate(),"HH:mm:ss")," ")}}function DZ(n,e){if(n&1&&(C(0,"tr",19)(1,"td",20),x(2),T(),C(3,"td",21),x(4),T(),C(5,"td",18),x(6),bi(7,"date"),T(),C(8,"td",18),te(9,SZ,2,4),T(),C(10,"td",18),x(11),T()()),n&2){let t=e.$implicit,r=q(2);Q("ngClass",br(9,bZ,t.id===r.activeStintId(),t.id!==r.activeStintId())),O(2),_t(t.id),O(2),G("",r.getDriverRacingName(t.driverId)," "),O(2),_t(Si(7,6,t.startDate.toDate(),"HH:mm:ss")),O(3),le(t.endDate?9:-1),O(2),G(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function AZ(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),Te(4,"th",8),C(5,"th",9),x(6,"Driver"),T(),C(7,"th",10),x(8,"Start"),T(),C(9,"th",10),x(10,"End"),T(),C(11,"th",10),x(12,"On track"),T()()()(),C(13,"div",11)(14,"table",12)(15,"tbody"),te(16,DZ,12,12,"tr",13),T()()(),C(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),x(22,"Totals"),T(),C(23,"td",18),x(24),T()()()()()()),n&2){let t=q();O(16),Q("ngForOf",t.stints()),O(8),_t(t.calculateTotalTimeOnTrack())}}var Kg=class n{stintService=R(zt);driverService=R(ai);stints=this.stintService.stints;activeStintId=De(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?Vo(e,t):Vo(e,new Date)}calculateTotalTimeOnTrack(){let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),Ft(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-stint"]],standalone:!0,features:[Le],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-xs","xl:text-base","text-black"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u23F3 Stint"),T(),C(4,"div",3)(5,"div",4),x(6),T()()(),te(7,AZ,25,2,"div",5),T()),t&2&&(O(),Q("ngClass",st(3,TZ,r.isOpen)),O(5),G(" Total: ",r.stints().length," "),O(),le(r.isOpen?7:-1))},dependencies:[ct,Vn,Wa]})};var xZ=n=>({"mb-2":n});function RZ(n,e){if(n&1){let t=Ti();C(0,"div",5)(1,"div")(2,"div",6),x(3,"Reference time (mills)"),T(),C(4,"div",7)(5,"button",8),ue("click",function(){vt(t);let i=q();return yt(i.increaseReferenceLapTime())}),x(6,"+"),T(),C(7,"form",9),ue("ngSubmit",function(){vt(t);let i=q();return yt(i.onSubmit())}),C(8,"input",10),Tr("ngModelChange",function(i){vt(t);let o=q();return Kr(o.referenceLapTime,i)||(o.referenceLapTime=i),yt(i)}),T()(),C(9,"button",11),ue("click",function(){vt(t);let i=q();return yt(i.decreaseReferenceLapTime())}),x(10,"-"),T()()()()}if(n&2){let t=q();O(8),Cr("ngModel",t.referenceLapTime)}}var Yg=class n{raceConfigService=R(Je);isOpen=!0;referenceLapTime=0;referenceLapTimeString="--:--:---";constructor(){Sr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.referenceLapTime=e.referenceLapTimeMillisecond,this.referenceLapTimeString=wL(e.referenceLapTimeMillisecond))})}onSubmit(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime)}increaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime+1)}decreaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime-1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-lap"]],standalone:!0,features:[Le],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-center"],[1,"text-gray-600","text-center"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","referenceLapTime","name","referenceLapTime","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-36","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u23F1\uFE0F Lap"),T(),C(4,"div",3)(5,"div",4),x(6),T()()(),te(7,RZ,11,1,"div",5),T()),t&2&&(O(),Q("ngClass",st(3,xZ,r.isOpen)),O(5),G(" Reference: ",r.referenceLapTimeString," "),O(),le(r.isOpen?7:-1))},dependencies:[ct,$o,Bo,rl,Ud,Uo,jo,Bd,jd,Ki,zi,GL]})};var NZ=n=>({"mb-2":n}),MZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function PZ(n,e){n&1&&x(0," \u2705 ")}function OZ(n,e){n&1&&x(0," \u2705 ")}function kZ(n,e){n&1&&x(0," \u2705 ")}function FZ(n,e){if(n&1&&(C(0,"tr",20)(1,"td",17),x(2),T(),C(3,"td",21),te(4,PZ,1,0),T(),C(5,"td",22),te(6,OZ,1,0),T(),C(7,"td",22),te(8,kZ,1,0),T(),C(9,"td",23),x(10),T()()),n&2){let t=e.$implicit,r=q(2);Q("ngClass",br(6,MZ,t.id===r.activePitId(),t.id!==r.activePitId())),O(2),_t(t.id),O(2),le(t.entryDriverId!==t.exitDriverId?4:-1),O(2),le(t.refuel?6:-1),O(2),le(t.tyreChange?8:-1),O(2),G(" ",r.calculatePitTime(t.entryTime.toDate(),t.exitTime==null?null:t.exitTime.toDate())," ")}}function LZ(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),Te(4,"th",8),C(5,"th",9),x(6,"\u{1F417} \u{1F504}"),T(),C(7,"th",9),x(8,"\u26FD\uFE0F"),T(),C(9,"th",9),x(10,"\u{1F6DE} \u{1F504}"),T(),C(11,"th",10),x(12,"Time"),T()()()(),C(13,"div",11)(14,"table",12)(15,"tbody"),te(16,FZ,11,9,"tr",13),T()()(),C(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),x(22,"Totals"),T(),C(23,"td",18),x(24),T(),C(25,"td",18),x(26),T(),C(27,"td",18),x(28),T(),C(29,"td",19),x(30),T()()()()()()),n&2){let t=q();O(16),Q("ngForOf",t.pits()),O(8),_t(t.completedDriverChanges()),O(2),_t(t.calculateTotalRefueling()),O(2),_t(t.calculateTotalTyreChanges()),O(2),_t(t.calculateTotalPitTime())}}var Qg=class n{pitService=R(en);pits=this.pitService.pits;activePitId=De(()=>{let e=this.pitService.activePit();if(e)return e.id});completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!0;calculatePitTime(e,t){return t?Vo(e,t):Vo(e,new Date)}calculateTotalPitTime(){let e=this.pitService.pits(),t=0;return e.forEach(r=>{r.exitTime?t+=r.exitTime.toDate().getTime()-r.entryTime.toDate().getTime():t+=new Date().getTime()-r.entryTime.toDate().getTime()}),Ft(t)}calculateTotalRefueling(){return this.pitService.pits().filter(e=>e.refuel).length}calculateTotalTyreChanges(){return this.pitService.pits().filter(e=>e.tyreChange).length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-pit"]],standalone:!0,features:[Le],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],[1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),T(),C(4,"div",3)(5,"div",4),x(6),T()()(),te(7,LZ,31,5,"div",5),T()),t&2&&(O(),Q("ngClass",st(3,NZ,r.isOpen)),O(5),G(" Total: ",r.pits().length," "),O(),le(r.isOpen?7:-1))},dependencies:[ct,Vn]})};var Zg=class n{stintService=R(zt);deltaStints=Z([]);totalDeltaMilliseconds=Z(0);constructor(){qe({stints:me(this.stintService.stints),ping:Mt(1e3)}).pipe(it()).subscribe(({stints:e})=>{let t=this.createDeltaStints(e);this.deltaStints.set(t),this.totalDeltaMilliseconds.set(t.reduce((r,i)=>r+i.delta,0))})}createDeltaStints(e){let t=[];return e.forEach(r=>{t.push(this.createDeltaStint(r))}),t}createDeltaStint(e){let r=(e.endDate?e.endDate.toDate():new Date).getTime()-e.startDate.toDate().getTime(),i=r-e.optimumMilliseconds;return{id:e.id,delta:i,optimum:e.optimumMilliseconds,timeOnTrack:r}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var VZ=n=>({"mb-2":n}),db=(n,e)=>({"bg-yellow-500":n,"bg-green-500":e}),UZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function jZ(n,e){n&1&&x(0," Losing: ")}function BZ(n,e){n&1&&x(0," Gaining: ")}function $Z(n,e){if(n&1&&(C(0,"tr",19)(1,"td",20),x(2),T(),C(3,"td",17),x(4),T(),C(5,"td",17),x(6),T(),C(7,"td",21)(8,"div",18),x(9),T()()()),n&2){let t=e.$implicit,r=q(2);Q("ngClass",br(6,UZ,t.id===r.activeStintId(),t.id!==r.activeStintId())),O(2),_t(t.id),O(2),_t(r.getMillisecondsToTimeString(t.timeOnTrack)),O(2),_t(r.getMillisecondsToTimeString(t.optimum)),O(2),Q("ngClass",br(9,db,t.delta<0,t.delta>=0)),O(),G(" ",r.getMillisecondsToTimeString(t.delta)," ")}}function HZ(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),Te(4,"th",8),C(5,"th",9),x(6,"On track"),T(),C(7,"th",9),x(8,"Optimum"),T(),C(9,"th",9),x(10,"Delta"),T()()()(),C(11,"div",10)(12,"table",11)(13,"tbody"),te(14,$Z,10,12,"tr",12),T()()(),C(15,"div",13)(16,"table",11)(17,"tfoot",14)(18,"tr",15)(19,"td",16),x(20,"Totals"),T(),C(21,"td",17)(22,"div",18),x(23),T()()()()()()()),n&2){let t=q();O(14),Q("ngForOf",t.deltaStints()),O(8),Q("ngClass",br(3,db,t.totalDeltaMilliseconds()<0,t.totalDeltaMilliseconds()>=0)),O(),G(" ",t.getMillisecondsToTimeString(t.totalDeltaMilliseconds())," ")}}var Jg=class n{stintService=R(zt);deltaStintService=R(Zg);deltaStints=this.deltaStintService.deltaStints;totalDeltaMilliseconds=this.deltaStintService.totalDeltaMilliseconds;activeStintId=De(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getMillisecondsToTimeString(e){return Ft(Math.abs(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-delta-stint"]],standalone:!0,features:[Le],decls:10,vars:10,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","5",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","text-white","rounded",3,"ngClass"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ue("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),x(3,"\u{1F9D0} Delta stint"),T(),C(4,"div",3)(5,"div",4),te(6,jZ,1,0)(7,BZ,1,0),x(8),T()()(),te(9,HZ,24,6,"div",5),T()),t&2&&(O(),Q("ngClass",st(5,VZ,r.isOpen)),O(4),Q("ngClass",br(7,db,r.totalDeltaMilliseconds()<0,r.totalDeltaMilliseconds()>=0)),O(),le(r.totalDeltaMilliseconds()<0?6:7),O(2),G(" ",r.getMillisecondsToTimeString(r.totalDeltaMilliseconds())," "),O(),le(r.isOpen?9:-1))},dependencies:[Vn,ct]})};var Xg=class n{stintService=R(zt);pitService=R(en);stintOptimizerService=R(si);raceConfigService=R(Je);timelineSteps=Z([]);constructor(){qe({stints:me(this.stintService.stints),pits:me(this.pitService.pits),remainingDriverChanges:me(this.pitService.remainingDriverChanges),raceConfig:me(this.raceConfigService.activeRaceConfig),optimizedStint:me(this.stintOptimizerService.optimizedStint),ping:Mt(1e3)}).pipe(it()).subscribe(({stints:e,pits:t,remainingDriverChanges:r,raceConfig:i,optimizedStint:o})=>{let s=this.createRealSteps(e,t);if(s=s.sort((a,c)=>a.start.getTime()-c.start.getTime()),r>0&&o&&i){let a=this.createFutureSteps(s.at(s.length-1),r,o,i);s.push(...a)}s=s.sort((a,c)=>a.start.getTime()-c.start.getTime()),this.timelineSteps.set(s)})}createRealSteps(e,t){let r=[];return e.forEach(i=>{r.push(this.createTimelineStepFromStint(i))}),t.forEach(i=>{r.push(this.createTimelineStepFromPit(i))}),r}createTimelineStepFromPit(e){return{durationMills:e.exitTime?e.exitTime.toDate().getTime()-e.entryTime.toDate().getTime():void 0,end:e.exitTime?.toDate(),pit:e,start:e.entryTime.toDate(),status:e.exitTime?"DONE":"ACTIVE",stint:void 0,type:"PIT"}}createTimelineStepFromStint(e){return{durationMills:e.endDate?e.endDate.toDate().getTime()-e.startDate.toDate().getTime():void 0,end:e.endDate?.toDate(),pit:void 0,start:e.startDate.toDate(),status:e.endDate?"DONE":"ACTIVE",stint:e,type:"STINT"}}createFutureSteps(e,t,r,i){let o=[],s=this.calculateLastEndDateFromRealStep(e,r,i);if(e===void 0||e.type==="PIT"){let a=ko(s,r.avgStintMillisecondsTime);o.push(this.createFutureStintStep(s,a,r.avgStintMillisecondsTime)),s=a}for(let a=0;a<t;a++){let c=ea(s,i.minPitSeconds);o.push(this.createFuturePitStep(s,c,_g(i.minPitSeconds)));let u=ko(c,r.avgStintMillisecondsTime);o.push(this.createFutureStintStep(c,u,r.avgStintMillisecondsTime)),s=u}return o}createFutureStintStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"STINT"}}createFuturePitStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"PIT"}}calculateLastEndDateFromRealStep(e,t,r){if(e===void 0)return new Date;let i;return e.type==="PIT"?i=ea(e.start,r.minPitSeconds):i=ko(e.start,t.avgStintMillisecondsTime),i>new Date?i:new Date}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ev=class n{text="";left=0;top=0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["tooltip"]],inputs:{text:"text",left:"left",top:"top"},standalone:!0,features:[Le],decls:2,vars:5,consts:[[1,"fixed","whitespace-pre-line","bg-black","rounded","p-1","text-white","max-w-48","-translate-x-1/2","tooltip","mt-1"]],template:function(t,r){t&1&&(C(0,"div",0),x(1),T()),t&2&&(qa("left",r.left+"px")("top",r.top+"px"),O(),G(" ",r.text,`
`))},styles:['.tooltip[_ngcontent-%COMP%]:before{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid black;position:absolute;left:calc(50% - 5px);top:-5px}']})};var tv=class n{elementRef=R(sr);viewContainerRef=R(fs);document=R(Ln);tooltipText="";tooltipComponent;hideTooltipTimeout;onMouseEnter(){this.tooltipComponent||(this.tooltipComponent=this.viewContainerRef.createComponent(ev),this.document.body.appendChild(this.tooltipComponent.location.nativeElement),this.setTooltipComponentProperties(),this.tooltipComponent.hostView.detectChanges(),this.hideTooltipTimeout=setTimeout(()=>{this.removeTooltip()},1e3))}onMouseLeave(){this.removeTooltip()}removeTooltip(){this.tooltipComponent&&(this.tooltipComponent.destroy(),this.tooltipComponent=void 0,this.hideTooltipTimeout&&(clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0))}setTooltipComponentProperties(){if(!this.tooltipComponent)return;this.tooltipComponent.instance.text=this.tooltipText;let e=this.elementRef.nativeElement.getBoundingClientRect(),r=this.tooltipComponent.location.nativeElement.getBoundingClientRect(),i=(e.right-e.left)/2+e.left-r.width/2,o=e.bottom;i+r.width>window.innerWidth&&(i=window.innerWidth-r.width),i<0&&(i=0),o+r.height>window.innerHeight&&(o=e.top-r.height),this.tooltipComponent.instance.left=i,this.tooltipComponent.instance.top=o}static \u0275fac=function(t){return new(t||n)};static \u0275dir=ut({type:n,selectors:[["","tooltip",""]],hostBindings:function(t,r){t&1&&ue("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{tooltipText:"tooltipText"},standalone:!0})};function qZ(n,e){if(n&1&&(C(0,"div",2),x(1),T()),n&2){let t=q().$implicit,r=q();Q("ngClass",r.getStintColor(t))("tooltipText",r.getStintTooltipInfo(t)),O(),_t(r.getStintText(t))}}function WZ(n,e){if(n&1&&(C(0,"div",3),x(1),T()),n&2){let t=q().$implicit,r=q();Q("ngClass",r.getPitColor(t))("tooltipText",r.getPitTooltipInfo(t)),O(),_t(r.getPitText(t))}}function GZ(n,e){if(n&1&&(B_(0),te(1,qZ,2,3,"div",2)(2,WZ,2,3,"div",3),$_()),n&2){let t=e.$implicit;O(),le(t.type==="STINT"?1:2)}}var nv=class n{timelineService=R(Xg);timelineSteps=this.timelineService.timelineSteps;getStintColor(e){return e.status==="DONE"?"bg-blue-400":e.status==="FUTURE"?"bg-blue-100":"bg-green-500"}getStintText(e){return e.status==="ACTIVE"?"\u{1F3CE}\uFE0F":"\u23F3"}getStintTooltipInfo(e){let t="Start: "+vg(e.start,"HH:mm:ss"),r=e.end?"End: "+vg(e.end,"HH:mm:ss"):"",i=e.durationMills?"On Track: "+Ft(e.durationMills):"";return r.length>0&&(t+=`
`),i.length>0&&(r+=`
`),t+r+i}getPitColor(e){return e.status==="DONE"?"bg-amber-400":e.status==="FUTURE"?"bg-amber-100":"bg-green-500"}getPitText(e){return e.status==="ACTIVE"?"\u{1F17F}\uFE0F":"\u{1F468}\u{1F3FB}\u200D\u{1F527}"}getPitTooltipInfo(e){let t="Enter: "+vg(e.start,"HH:mm:ss"),r=e.durationMills?"Time: "+Ft(e.durationMills):"",i="";return e.pit&&(i+="\u{1F417} -> "+(e.pit.entryDriverId!==e.pit.exitDriverId?"\u2705":"")+`
`,i+="\u26FD\uFE0F -> "+(e.pit.refuel?"\u2705":"")+`
`,i+="\u{1F6DE} -> "+(e.pit.tyreChange?"\u2705":"")),r.length>0&&(t+=`
`),i.length>0&&(r+=`
`),t+r+i}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-timeline"]],standalone:!0,features:[Le],decls:2,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[4,"ngFor","ngForOf"],["tooltip","",1,"flex-1","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipText"],["tooltip","",1,"flex-0","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipText"]],template:function(t,r){t&1&&(C(0,"div",0),te(1,GZ,3,1,"ng-container",1),T()),t&2&&(O(),Q("ngForOf",r.timelineSteps()))},dependencies:[Vn,ct,tv]})};var rv=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-root"]],standalone:!0,features:[Le],decls:38,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2),x(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),T(),C(4,"div",3),Te(5,"app-race"),T()(),Te(6,"app-timeline"),C(7,"div",4)(8,"div",5)(9,"div",6),Te(10,"app-pit-lane"),T(),C(11,"div",6),Te(12,"app-driver-change"),T(),C(13,"div",6),Te(14,"app-tyre-change-window"),T(),C(15,"div",7),Te(16,"app-pit"),T()(),C(17,"div",8)(18,"div",6),Te(19,"app-fuel"),T(),C(20,"div",6),Te(21,"app-stint-optimizer"),T(),C(22,"div",6),Te(23,"app-lap"),T(),C(24,"div",7),Te(25,"app-driver"),T()(),C(26,"div",8)(27,"div",6),Te(28,"app-active-stint"),T(),C(29,"div",6),Te(30,"app-stint"),T(),C(31,"div",7),Te(32,"app-delta-stint"),T()()(),C(33,"div",9)(34,"div",2),x(35,"Cremona kart circuit"),T(),Te(36,"img",10),T()(),Te(37,"router-outlet"))},dependencies:[Uw,Fg,Lg,jg,Bg,$g,Wg,Gg,zg,Kg,Yg,Qg,Jg,nv]})};RR(rv,RF).catch(n=>console.error(n));
