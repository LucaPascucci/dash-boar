import{$ as un,A as cn,B as gr,C as gd,D as At,E as nD,F as rD,G as mr,H as ps,I as Uc,J as jc,K as Bc,L as gs,M as iD,N as sD,O as oD,P as aD,Q as $c,R as Hc,S as Ie,T as ct,U as Ht,V as _r,W as fm,X as md,Y as ut,Z as ft,_ as Br,a as F,aa as cD,b as me,ba as pt,c as Ci,ca as _d,d as y,da as z,e as L,ea as uD,f as So,g as Kb,h as Qb,i as Yb,j as Zb,k as Jb,l as Ti,m as dm,n as hm,o as Ao,p as $t,q as Fc,r as Xb,s as Lc,t as pd,u as eD,v as pr,w as tD,x as jr,y as fs,z as Vc}from"./chunk-VUN4IAWB.js";function lD(t,e){return Object.is(t,e)}var Et=null,qc=!1,yd=1,yr=Symbol("SIGNAL");function we(t){let e=Et;return Et=t,e}function dD(){return Et}function UF(){return qc}var Ro={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function _m(t){if(qc)throw new Error("");if(Et===null)return;Et.consumerOnSignalRead(t);let e=Et.nextProducerIndex++;if(Td(Et),e<Et.producerNode.length&&Et.producerNode[e]!==t&&Gc(Et)){let n=Et.producerNode[e];Cd(n,Et.producerIndexOfThis[e])}Et.producerNode[e]!==t&&(Et.producerNode[e]=t,Et.producerIndexOfThis[e]=Gc(Et)?mD(t,Et,e):0),Et.producerLastReadVersion[e]=t.version}function jF(){yd++}function hD(t){if(!(Gc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===yd)){if(!t.producerMustRecompute(t)&&!wd(t)){t.dirty=!1,t.lastCleanEpoch=yd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=yd}}function fD(t){if(t.liveConsumerNode===void 0)return;let e=qc;qc=!0;try{for(let n of t.liveConsumerNode)n.dirty||gD(n)}finally{qc=e}}function pD(){return Et?.consumerAllowSignalWrites!==!1}function gD(t){t.dirty=!0,fD(t),t.consumerMarkedDirty?.(t)}function zc(t){return t&&(t.nextProducerIndex=0),we(t)}function Id(t,e){if(we(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Gc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Cd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function wd(t){Td(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(hD(n),r!==n.version))return!0}return!1}function Ed(t){if(Td(t),Gc(t))for(let e=0;e<t.producerNode.length;e++)Cd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function mD(t,e,n){if(_D(t),t.liveConsumerNode.length===0&&yD(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=mD(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Cd(t,e){if(_D(t),t.liveConsumerNode.length===1&&yD(t))for(let r=0;r<t.producerNode.length;r++)Cd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Td(i),i.producerIndexOfThis[r]=e}}function Gc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Td(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function _D(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function yD(t){return t.producerNode!==void 0}function vD(t){let e=Object.create(BF);e.computation=t;let n=()=>{if(hD(e),_m(e),e.value===vd)throw e.error;return e.value};return n[yr]=e,n}var pm=Symbol("UNSET"),gm=Symbol("COMPUTING"),vd=Symbol("ERRORED"),BF=me(F({},Ro),{value:pm,dirty:!0,error:null,equal:lD,producerMustRecompute(t){return t.value===pm||t.value===gm},producerRecomputeValue(t){if(t.value===gm)throw new Error("Detected cycle in computations.");let e=t.value;t.value=gm;let n=zc(t),r;try{r=t.computation()}catch(i){r=vd,t.error=i}finally{Id(t,n)}if(e!==pm&&e!==vd&&r!==vd&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function $F(){throw new Error}var ID=$F;function wD(){ID()}function ED(t){ID=t}var HF=null;function CD(t){let e=Object.create(bD);e.value=t;let n=()=>(_m(e),e.value);return n[yr]=e,n}function ym(t,e){pD()||wD(),t.equal(t.value,e)||(t.value=e,qF(t))}function TD(t,e){pD()||wD(),ym(t,e(t.value))}var bD=me(F({},Ro),{equal:lD,value:void 0});function qF(t){t.version++,jF(),fD(t),HF?.()}function DD(t,e,n){let r=Object.create(GF);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Ed(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=mm)}let a=()=>{if(r.fn===null)return;if(UF())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!wd(r))return;r.hasRun=!0;let c=zc(r);try{r.cleanupFn(),r.cleanupFn=mm,r.fn(i)}finally{Id(r,c)}};return r.ref={notify:()=>gD(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[yr]:r},r.ref}var mm=()=>{},GF=me(F({},Ro),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:mm});function ce(t){return typeof t=="function"}function No(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bd=No(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ms(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var it=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof bd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{SD(s)}catch(o){e=e??[],o instanceof bd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)SD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ms(n,e)}remove(e){let{_finalizers:n}=this;n&&ms(n,e),e instanceof t&&e._removeParent(this)}};it.EMPTY=(()=>{let t=new it;return t.closed=!0,t})();var vm=it.EMPTY;function Dd(t){return t instanceof it||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function SD(t){ce(t)?t():t.unsubscribe()}var Xn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Mo={setTimeout(t,e,...n){let{delegate:r}=Mo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Mo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Sd(t){Mo.setTimeout(()=>{let{onUnhandledError:e}=Xn;if(e)e(t);else throw t})}function Wc(){}var AD=Im("C",void 0,void 0);function RD(t){return Im("E",void 0,t)}function ND(t){return Im("N",t,void 0)}function Im(t,e,n){return{kind:t,value:e,error:n}}var _s=null;function xo(t){if(Xn.useDeprecatedSynchronousErrorHandling){let e=!_s;if(e&&(_s={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=_s;if(_s=null,n)throw r}}else t()}function MD(t){Xn.useDeprecatedSynchronousErrorHandling&&_s&&(_s.errorThrown=!0,_s.error=t)}var ys=class extends it{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Dd(e)&&e.add(this)):this.destination=KF}static create(e,n,r){return new Po(e,n,r)}next(e){this.isStopped?Em(ND(e),this):this._next(e)}error(e){this.isStopped?Em(RD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Em(AD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},zF=Function.prototype.bind;function wm(t,e){return zF.call(t,e)}var Cm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ad(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ad(r)}else Ad(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ad(n)}}},Po=class extends ys{constructor(e,n,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Xn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wm(e.next,s),error:e.error&&wm(e.error,s),complete:e.complete&&wm(e.complete,s)}):i=e}this.destination=new Cm(i)}};function Ad(t){Xn.useDeprecatedSynchronousErrorHandling?MD(t):Sd(t)}function WF(t){throw t}function Em(t,e){let{onStoppedNotification:n}=Xn;n&&Mo.setTimeout(()=>n(t,e))}var KF={closed:!0,next:Wc,error:WF,complete:Wc};var ko=typeof Symbol=="function"&&Symbol.observable||"@@observable";function en(t){return t}function Rd(...t){return Tm(t)}function Tm(t){return t.length===0?en:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=YF(n)?n:new Po(n,r,i);return xo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=xD(r),new r((i,s)=>{let o=new Po({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ko](){return this}pipe(...n){return Tm(n)(this)}toPromise(n){return n=xD(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function xD(t){var e;return(e=t??Xn.Promise)!==null&&e!==void 0?e:Promise}function QF(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function YF(t){return t&&t instanceof ys||QF(t)&&Dd(t)}function bm(t){return ce(t?.lift)}function he(t){return e=>{if(bm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Kc(t,e,n,r,i)}var Kc=class extends ys{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Oo(){return he((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Fo=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,bm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new it;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=it.EMPTY)}return e}refCount(){return Oo()(this)}};var PD=No(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Je=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Nd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PD}next(n){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){xo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?vm:(this.currentObservers=null,s.push(n),new it(()=>{this.currentObservers=null,ms(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new Nd(e,n),t})(),Nd=class extends Je{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:vm}};var Pt=class extends Je{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qc={now(){return(Qc.delegate||Date).now()},delegate:void 0};var Yc=class extends Je{constructor(e=1/0,n=1/0,r=Qc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Md=class extends it{constructor(e,n){super()}schedule(e,n=0){return this}};var Zc={setInterval(t,e,...n){let{delegate:r}=Zc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Zc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Lo=class extends Md{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Zc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Zc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ms(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Vo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Vo.now=Qc.now;var Uo=class extends Vo{constructor(e,n=Vo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var jo=new Uo(Lo),Dm=jo;var xd=class extends Lo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Pd=class extends Uo{};var Sm=new Pd(xd);var Dn=new oe(t=>t.complete());function kd(t){return t&&ce(t.schedule)}function kD(t){return t[t.length-1]}function Od(t){return ce(kD(t))?t.pop():void 0}function bi(t){return kd(kD(t))?t.pop():void 0}function Am(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function FD(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function OD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vs(t){return this instanceof vs?(this.v=t,this):new vs(t)}function LD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(I){return Promise.resolve(I).then(_,f)}}function a(_,I){r[_]&&(i[_]=function(R){return new Promise(function(S,P){s.push([_,R,S,P])>1||c(_,R)})},I&&(i[_]=I(i[_])))}function c(_,I){try{l(r[_](I))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof vs?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,I){_(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function VD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OD=="function"?OD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Fd=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ld(t){return ce(t?.then)}function Vd(t){return ce(t[ko])}function Ud(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function jd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ZF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Bd=ZF();function $d(t){return ce(t?.[Bd])}function Hd(t){return LD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield vs(n.read());if(i)return yield vs(void 0);yield yield vs(r)}}finally{n.releaseLock()}})}function qd(t){return ce(t?.getReader)}function st(t){if(t instanceof oe)return t;if(t!=null){if(Vd(t))return JF(t);if(Fd(t))return XF(t);if(Ld(t))return eL(t);if(Ud(t))return UD(t);if($d(t))return tL(t);if(qd(t))return nL(t)}throw jd(t)}function JF(t){return new oe(e=>{let n=t[ko]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function XF(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function eL(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Sd)})}function tL(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function UD(t){return new oe(e=>{rL(t,e).catch(n=>e.error(n))})}function nL(t){return UD(Hd(t))}function rL(t,e){var n,r,i,s;return FD(this,void 0,void 0,function*(){try{for(n=VD(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ln(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Di(t,e=0){return he((n,r)=>{n.subscribe(ue(r,i=>ln(r,t,()=>r.next(i),e),()=>ln(r,t,()=>r.complete(),e),i=>ln(r,t,()=>r.error(i),e)))})}function Si(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function jD(t,e){return st(t).pipe(Si(e),Di(e))}function BD(t,e){return st(t).pipe(Si(e),Di(e))}function $D(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function HD(t,e){return new oe(n=>{let r;return ln(n,e,()=>{r=t[Bd](),ln(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Gd(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{ln(n,e,()=>{let r=t[Symbol.asyncIterator]();ln(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function qD(t,e){return Gd(Hd(t),e)}function GD(t,e){if(t!=null){if(Vd(t))return jD(t,e);if(Fd(t))return $D(t,e);if(Ld(t))return BD(t,e);if(Ud(t))return Gd(t,e);if($d(t))return HD(t,e);if(qd(t))return qD(t,e)}throw jd(t)}function Qe(t,e){return e?GD(t,e):st(t)}function J(...t){let e=bi(t);return Qe(t,e)}function Bo(t,e){let n=ce(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Rm(t){return!!t&&(t instanceof oe||ce(t.lift)&&ce(t.subscribe))}var $r=No(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function zD(t){return t instanceof Date&&!isNaN(t)}function K(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:iL}=Array;function sL(t,e){return iL(e)?t(...e):t(e)}function zd(t){return K(e=>sL(t,e))}var{isArray:oL}=Array,{getPrototypeOf:aL,prototype:cL,keys:uL}=Object;function Wd(t){if(t.length===1){let e=t[0];if(oL(e))return{args:e,keys:null};if(lL(e)){let n=uL(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function lL(t){return t&&typeof t=="object"&&aL(t)===cL}function Kd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Rt(...t){let e=bi(t),n=Od(t),{args:r,keys:i}=Wd(t);if(r.length===0)return Qe([],e);let s=new oe(dL(r,e,i?o=>Kd(i,o):en));return n?s.pipe(zd(n)):s}function dL(t,e,n=en){return r=>{WD(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)WD(e,()=>{let l=Qe(t[c],e),d=!1;l.subscribe(ue(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function WD(t,e,n){t?ln(n,t,e):e()}function KD(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},_=R=>l<r?I(R):c.push(R),I=R=>{s&&e.next(R),l++;let S=!1;st(n(R,d++)).subscribe(ue(e,P=>{i?.(P),s?_(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();o?ln(e,o,()=>I(P)):I(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,_,()=>{f=!0,g()})),()=>{a?.()}}function lt(t,e,n=1/0){return ce(e)?lt((r,i)=>K((s,o)=>e(r,s,i,o))(st(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>KD(r,i,t,n)))}function Nm(t=1/0){return lt(en,t)}function QD(){return Nm(1)}function $o(...t){return QD()(Qe(t,bi(t)))}function Qd(t){return new oe(e=>{st(t()).subscribe(e)})}function Mm(...t){let e=Od(t),{args:n,keys:r}=Wd(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;st(n[d]).subscribe(ue(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Kd(r,a):a),s.complete())}))}});return e?i.pipe(zd(e)):i}function xm(t=0,e,n=Dm){let r=-1;return e!=null&&(kd(e)?n=e:r=e),new oe(i=>{let s=zD(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Hr(t=0,e=jo){return t<0&&(t=0),xm(t,t,e)}function tn(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Ai(t){return he((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=st(t(o,Ai(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function YD(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Is(t,e){return ce(e)?lt(t,e,1):lt(t,1)}function Ri(t){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qr(t){return t<=0?()=>Dn:he((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Pm(t){return K(()=>t)}function Yd(t,e=en){return t=t??hL,he((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function hL(t,e){return t===e}function Zd(t=fL){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function fL(){return new $r}function Jc(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function vr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tn((i,s)=>t(i,s,r)):en,qr(1),n?Ri(e):Zd(()=>new $r))}function km(t,e,n,r){return he((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=I=>{a.forEach(I),I(s)},l=I=>c(R=>R.error(I)),d=0,f=!1,g=new Kc(s,I=>{try{let R=t(I),S=a.get(R);if(!S){a.set(R,S=r?r():new Je);let P=_(R,S);if(s.next(P),n){let U=ue(S,()=>{S.complete(),U?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(st(n(P)).subscribe(U))}}S.next(o?o(I):I)}catch(R){l(R)}},()=>c(I=>I.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function _(I,R){let S=new oe(P=>{d++;let U=R.subscribe(P);return()=>{U.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return S.key=I,S}})}function Ho(t){return t<=0?()=>Dn:he((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Om(t,e){let n=arguments.length>=2;return r=>r.pipe(t?tn((i,s)=>t(i,s,r)):en,Ho(1),n?Ri(e):Zd(()=>new $r))}function Jd(){return he((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Xd(t,e){return he(YD(t,e,arguments.length>=2,!0))}function qo(...t){let e=bi(t);return he((n,r)=>{(e?$o(t,n,e):$o(t,n)).subscribe(r)})}function dn(t,e){return he((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,d=s++;st(t(c,d)).subscribe(i=ue(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Fn(t){return he((e,n)=>{st(t).subscribe(ue(n,()=>n.complete(),Wc)),!n.closed&&e.subscribe(n)})}function Ct(t,e,n){let r=ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):en}var pL="https://g.co/ng/security#xss",W=class extends Error{constructor(e,n){super(L_(e,n)),this.code=e}};function L_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function lu(t){return{toString:t}.toString()}var eh="__parameters__";function gL(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function mL(t,e,n){return lu(()=>{let r=gL(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(eh)?c[eh]:Object.defineProperty(c,eh,{value:[]})[eh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Xc=globalThis;function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function _L(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function fn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(fn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function ZD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var yL=Ve({__forward_ref__:Ve});function Qr(t){return t.__forward_ref__=Qr,t.toString=function(){return fn(this())},t}function nn(t){return PS(t)?t():t}function PS(t){return typeof t=="function"&&t.hasOwnProperty(yL)&&t.__forward_ref__===Qr}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ms(t){return{providers:t.providers||[],imports:t.imports||[]}}function kh(t){return JD(t,OS)||JD(t,FS)}function kS(t){return kh(t)!==null}function JD(t,e){return t.hasOwnProperty(e)?t[e]:null}function vL(t){let e=t&&(t[OS]||t[FS]);return e||null}function XD(t){return t&&(t.hasOwnProperty(eS)||t.hasOwnProperty(IL))?t[eS]:null}var OS=Ve({\u0275prov:Ve}),eS=Ve({\u0275inj:Ve}),FS=Ve({ngInjectableDef:Ve}),IL=Ve({ngInjectorDef:Ve}),V=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function LS(t){return t&&!!t.\u0275providers}var wL=Ve({\u0275cmp:Ve}),EL=Ve({\u0275dir:Ve}),CL=Ve({\u0275pipe:Ve}),TL=Ve({\u0275mod:Ve}),lh=Ve({\u0275fac:Ve}),nu=Ve({__NG_ELEMENT_ID__:Ve}),tS=Ve({__NG_ENV_ID__:Ve});function V_(t){return typeof t=="string"?t:t==null?"":String(t)}function bL(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():V_(t)}function DL(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new W(-200,t)}function U_(t,e){throw new W(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),Qm;function VS(){return Qm}function hn(t){let e=Qm;return Qm=t,e}function US(t,e,n){let r=kh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;U_(t,"Injector")}var SL={},ru=SL,Ym="__NG_DI_FLAG__",dh="ngTempTokenPath",AL="ngTokenPath",RL=/\n/gm,NL="\u0275",nS="__source",Ko;function ML(){return Ko}function Ni(t){let e=Ko;return Ko=t,e}function xL(t,e=fe.Default){if(Ko===void 0)throw new W(-203,!1);return Ko===null?US(t,void 0,e):Ko.get(t,e&fe.Optional?null:void 0,e)}function te(t,e=fe.Default){return(VS()||xL)(nn(t),e)}function M(t,e=fe.Default){return te(t,Oh(e))}function Oh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Zm(t){let e=[];for(let n=0;n<t.length;n++){let r=nn(t[n]);if(Array.isArray(r)){if(r.length===0)throw new W(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=kL(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(te(i,s))}else e.push(te(r))}return e}function PL(t,e){return t[Ym]=e,t.prototype[Ym]=e,t}function kL(t){return t[Ym]}function OL(t,e,n,r){let i=t[dh];throw e[nS]&&i.unshift(e[nS]),t.message=FL(`
`+t.message,i,n,r),t[AL]=i,t[dh]=null,t}function FL(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==NL?t.slice(2):t;let i=fn(e);if(Array.isArray(e))i=e.map(fn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):fn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(RL,`
  `)}`}var ie=PL(mL("Optional"),8);function Cs(t,e){let n=t.hasOwnProperty(lh);return n?t[lh]:null}function j_(t,e){t.forEach(n=>Array.isArray(n)?j_(n,e):e(n))}function jS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function hh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function LL(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function VL(t,e,n){let r=du(t,e);return r>=0?t[r|1]=n:(r=~r,LL(t,r,e,n)),r}function Fm(t,e){let n=du(t,e);if(n>=0)return t[n|1]}function du(t,e){return UL(t,e,1)}function UL(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Yo={},Ln=[],Zo=new V(""),BS=new V("",-1),$S=new V(""),fh=class{get(e,n=ru){if(n===ru){let r=new Error(`NullInjectorError: No provider for ${fn(e)}!`);throw r.name="NullInjectorError",r}return n}},HS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(HS||{}),Er=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Er||{}),Pi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Pi||{});function jL(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Jm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];$L(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function BL(t){return t===3||t===4||t===6}function $L(t){return t.charCodeAt(0)===64}function iu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?rS(t,n,i,null,e[++r]):rS(t,n,i,null,null))}}return t}function rS(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var qS="ng-template";function HL(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jL(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(B_(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function B_(t){return t.type===4&&t.value!==qS}function qL(t,e,n){let r=t.type===4&&!n?qS:t.value;return e===r}function GL(t,e,n){let r=4,i=t.attrs,s=i!==null?KL(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!er(r)&&!er(c))return!1;if(o&&er(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!qL(t,c,n)||c===""&&e.length===1){if(er(r))return!1;o=!0}}else if(r&8){if(i===null||!HL(t,i,c,n)){if(er(r))return!1;o=!0}}else{let l=e[++a],d=zL(c,i,B_(t),n);if(d===-1){if(er(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(er(r))return!1;o=!0}}}}return er(r)||o}function er(t){return(t&1)===0}function zL(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return QL(e,t)}function WL(t,e,n=!1){for(let r=0;r<e.length;r++)if(GL(t,e[r],n))return!0;return!1}function KL(t){for(let e=0;e<t.length;e++){let n=t[e];if(BL(n))return e}return t.length}function QL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function iS(t,e){return t?":not("+e.trim()+")":e}function YL(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!er(o)&&(e+=iS(s,i),i=""),r=o,s=s||!er(r);n++}return i!==""&&(e+=iS(s,i)),e}function ZL(t){return t.map(YL).join(",")}function JL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!er(i))break;i=s}r++}return{attrs:e,classes:n}}function pn(t){return lu(()=>{let e=YS(t),n=me(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===HS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Er.Emulated,styles:t.styles||Ln,_:null,schemas:t.schemas||null,tView:null,id:""});ZS(n);let r=t.dependencies;return n.directiveDefs=oS(r,!1),n.pipeDefs=oS(r,!0),n.id=tV(n),n})}function XL(t){return Ts(t)||zS(t)}function eV(t){return t!==null}function xs(t){return lu(()=>({type:t.type,bootstrap:t.bootstrap||Ln,declarations:t.declarations||Ln,imports:t.imports||Ln,exports:t.exports||Ln,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function sS(t,e){if(t==null)return Yo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Pi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Pi.None?[r,a]:r,e[s]=o):n[s]=r}return n}function kt(t){return lu(()=>{let e=YS(t);return ZS(e),e})}function GS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ts(t){return t[wL]||null}function zS(t){return t[EL]||null}function WS(t){return t[CL]||null}function KS(t){let e=Ts(t)||zS(t)||WS(t);return e!==null?e.standalone:!1}function QS(t,e){let n=t[TL]||null;if(!n&&e===!0)throw new Error(`Type ${fn(t)} does not have '\u0275mod' property.`);return n}function YS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Yo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Ln,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:sS(t.inputs,e),outputs:sS(t.outputs),debugInfo:null}}function ZS(t){t.features?.forEach(e=>e(t))}function oS(t,e){if(!t)return null;let n=e?WS:XL;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(eV)}function tV(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $e(t){return{\u0275providers:t}}function nV(...t){return{\u0275providers:JS(!0,t),\u0275fromNgModule:!0}}function JS(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return j_(e,o=>{let a=o;Xm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&XS(i,s),n}function XS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];$_(i,s=>{e(s,r)})}}function Xm(t,e,n,r){if(t=nn(t),!t)return!1;let i=null,s=XD(t),o=!s&&Ts(t);if(!s&&!o){let c=t.ngModule;if(s=XD(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Xm(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{j_(s.imports,d=>{Xm(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&XS(l,e)}if(!a){let l=Cs(i)||(()=>new i);e({provide:i,useFactory:l,deps:Ln},i),e({provide:$S,useValue:i,multi:!0},i),e({provide:Zo,useValue:()=>te(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;$_(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function $_(t,e){for(let n of t)LS(n)&&(n=n.\u0275providers),Array.isArray(n)?$_(n,e):e(n)}var rV=Ve({provide:String,useValue:Ve});function e0(t){return t!==null&&typeof t=="object"&&rV in t}function iV(t){return!!(t&&t.useExisting)}function sV(t){return!!(t&&t.useFactory)}function Jo(t){return typeof t=="function"}function oV(t){return!!t.useClass}var Fh=new V(""),ih={},aV={},Lm;function H_(){return Lm===void 0&&(Lm=new fh),Lm}var Un=class{},su=class extends Un{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,t_(e,o=>this.processProvider(o)),this.records.set(BS,Go(void 0,this)),i.has("environment")&&this.records.set(Un,Go(void 0,this));let s=this.records.get(Fh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get($S,Ln,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Ni(this),r=hn(void 0),i;try{return e()}finally{Ni(n),hn(r)}}get(e,n=ru,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(tS))return e[tS](this);r=Oh(r);let i,s=Ni(this),o=hn(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=hV(e)&&kh(e);l&&this.injectableDefInScope(l)?c=Go(e_(e),ih):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?H_():this.parent;return n=r&fe.Optional&&n===ru?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[dh]=a[dh]||[]).unshift(fn(e)),s)throw a;return OL(a,e,"R3InjectorError",this.source)}else throw a}finally{hn(o),Ni(s)}}resolveInjectorInitializers(){let e=we(null),n=Ni(this),r=hn(void 0),i;try{let s=this.get(Zo,Ln,fe.Self);for(let o of s)o()}finally{Ni(n),hn(r),we(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(fn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new W(205,!1)}processProvider(e){e=nn(e);let n=Jo(e)?e:nn(e&&e.provide),r=uV(e);if(!Jo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Go(void 0,ih,!0),i.factory=()=>Zm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=we(null);try{return n.value===ih&&(n.value=aV,n.value=n.factory()),typeof n.value=="object"&&n.value&&dV(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=nn(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function e_(t){let e=kh(t),n=e!==null?e.factory:Cs(t);if(n!==null)return n;if(t instanceof V)throw new W(204,!1);if(t instanceof Function)return cV(t);throw new W(204,!1)}function cV(t){if(t.length>0)throw new W(204,!1);let n=vL(t);return n!==null?()=>n.factory(t):()=>new t}function uV(t){if(e0(t))return Go(void 0,t.useValue);{let e=t0(t);return Go(e,ih)}}function t0(t,e,n){let r;if(Jo(t)){let i=nn(t);return Cs(i)||e_(i)}else if(e0(t))r=()=>nn(t.useValue);else if(sV(t))r=()=>t.useFactory(...Zm(t.deps||[]));else if(iV(t))r=()=>te(nn(t.useExisting));else{let i=nn(t&&(t.useClass||t.provide));if(lV(t))r=()=>new i(...Zm(t.deps));else return Cs(i)||e_(i)}return r}function Go(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function lV(t){return!!t.deps}function dV(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function hV(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function t_(t,e){for(let n of t)Array.isArray(n)?t_(n,e):n&&LS(n)?t_(n.\u0275providers,e):e(n)}function Yr(t,e){t instanceof su&&t.assertNotDestroyed();let n,r=Ni(t),i=hn(void 0);try{return e()}finally{Ni(r),hn(i)}}function n0(){return VS()!==void 0||ML()!=null}function Lh(t){if(!n0())throw new W(-203,!1)}function fV(t){return typeof t=="function"}var Zr=0,pe=1,re=2,rn=3,tr=4,nr=5,ph=6,gh=7,jn=8,Xo=9,Gr=10,Tt=11,ou=12,aS=13,aa=14,Cr=15,ea=16,zo=17,ta=18,Vh=19,r0=20,Mi=21,sh=22,Vn=23,Bn=25,i0=1;var bs=7,mh=8,_h=9,Sn=10,yh=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(yh||{});function xi(t){return Array.isArray(t)&&typeof t[i0]=="object"}function Jr(t){return Array.isArray(t)&&t[i0]===!0}function s0(t){return(t.flags&4)!==0}function Uh(t){return t.componentOffset>-1}function q_(t){return(t.flags&1)===1}function ki(t){return!!t.template}function n_(t){return(t[re]&512)!==0}var r_=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function o0(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xr(){return a0}function a0(t){return t.type.prototype.ngOnChanges&&(t.setInput=gV),pV}Xr.ngInherit=!0;function pV(){let t=u0(this),e=t?.current;if(e){let n=t.previous;if(n===Yo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function gV(t,e,n,r,i){let s=this.declaredInputs[r],o=u0(t)||mV(t,{previous:Yo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new r_(l&&l.currentValue,n,c===Yo),o0(t,e,i,n)}var c0="__ngSimpleChanges__";function u0(t){return t[c0]||null}function mV(t,e){return t[c0]=e}var cS=null;var Ir=function(t,e,n){cS?.(t,e,n)},_V="svg",yV="math";function Tr(t){for(;Array.isArray(t);)t=t[Zr];return t}function l0(t,e){return Tr(e[t])}function $n(t,e){return Tr(e[t.index])}function G_(t,e){return t.data[e]}function vV(t,e){return t[e]}function Li(t,e){let n=e[t];return xi(n)?n:n[Zr]}function z_(t){return(t[re]&128)===128}function IV(t){return Jr(t[rn])}function vh(t,e){return e==null?null:t[e]}function d0(t){t[zo]=0}function h0(t){t[re]&1024||(t[re]|=1024,z_(t)&&Bh(t))}function wV(t,e){for(;t>0;)e=e[aa],t--;return e}function jh(t){return!!(t[re]&9216||t[Vn]?.dirty)}function i_(t){t[Gr].changeDetectionScheduler?.notify(8),t[re]&64&&(t[re]|=1024),jh(t)&&Bh(t)}function Bh(t){t[Gr].changeDetectionScheduler?.notify(0);let e=Ds(t);for(;e!==null&&!(e[re]&8192||(e[re]|=8192,!z_(e)));)e=Ds(e)}function f0(t,e){if((t[re]&256)===256)throw new W(911,!1);t[Mi]===null&&(t[Mi]=[]),t[Mi].push(e)}function EV(t,e){if(t[Mi]===null)return;let n=t[Mi].indexOf(e);n!==-1&&t[Mi].splice(n,1)}function Ds(t){let e=t[rn];return Jr(e)?e[rn]:e}var _e={lFrame:C0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var p0=!1;function CV(){return _e.lFrame.elementDepthCount}function TV(){_e.lFrame.elementDepthCount++}function bV(){_e.lFrame.elementDepthCount--}function g0(){return _e.bindingsEnabled}function DV(){return _e.skipHydrationRootTNode!==null}function SV(t){return _e.skipHydrationRootTNode===t}function AV(){_e.skipHydrationRootTNode=null}function Ue(){return _e.lFrame.lView}function gn(){return _e.lFrame.tView}function Ps(t){return _e.lFrame.contextLView=t,t[jn]}function ks(t){return _e.lFrame.contextLView=null,t}function An(){let t=m0();for(;t!==null&&t.type===64;)t=t.parent;return t}function m0(){return _e.lFrame.currentTNode}function RV(){let t=_e.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function hu(t,e){let n=_e.lFrame;n.currentTNode=t,n.isParent=e}function _0(){return _e.lFrame.isParent}function NV(){_e.lFrame.isParent=!1}function y0(){return p0}function uS(t){p0=t}function v0(){let t=_e.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function MV(t){return _e.lFrame.bindingIndex=t}function fu(){return _e.lFrame.bindingIndex++}function xV(t){let e=_e.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function PV(){return _e.lFrame.inI18n}function kV(t,e){let n=_e.lFrame;n.bindingIndex=n.bindingRootIndex=t,s_(e)}function OV(){return _e.lFrame.currentDirectiveIndex}function s_(t){_e.lFrame.currentDirectiveIndex=t}function FV(t){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function I0(t){_e.lFrame.currentQueryIndex=t}function LV(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[nr]:null}function w0(t,e,n){if(n&fe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=LV(s),i===null||(s=s[aa],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=_e.lFrame=E0();return r.currentTNode=e,r.lView=t,!0}function W_(t){let e=E0(),n=t[pe];_e.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function E0(){let t=_e.lFrame,e=t===null?null:t.child;return e===null?C0(t):e}function C0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function T0(){let t=_e.lFrame;return _e.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var b0=T0;function K_(){let t=T0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function VV(t){return(_e.lFrame.contextLView=wV(t,_e.lFrame.contextLView))[jn]}function ca(){return _e.lFrame.selectedIndex}function Ss(t){_e.lFrame.selectedIndex=t}function Q_(){let t=_e.lFrame;return G_(t.tView,t.selectedIndex)}function UV(){return _e.lFrame.currentNamespace}var D0=!0;function Y_(){return D0}function Z_(t){D0=t}function jV(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=a0(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function J_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function oh(t,e,n){S0(t,e,3,n)}function ah(t,e,n,r){(t[re]&3)===n&&S0(t,e,n,r)}function Vm(t,e){let n=t[re];(n&3)===e&&(n&=16383,n+=1,t[re]=n)}function S0(t,e,n,r){let i=r!==void 0?t[zo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[zo]+=65536),(a<s||s==-1)&&(BV(t,n,e,c),t[zo]=(t[zo]&4294901760)+c+2),c++}function lS(t,e){Ir(4,t,e);let n=we(null);try{e.call(t)}finally{we(n),Ir(5,t,e)}}function BV(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[re]>>14<t[zo]>>16&&(t[re]&3)===e&&(t[re]+=16384,lS(a,s)):lS(a,s)}var Qo=-1,As=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function $V(t){return t instanceof As}function HV(t){return(t.flags&8)!==0}function qV(t){return(t.flags&16)!==0}var Um={},o_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Oh(r);let i=this.injector.get(e,Um,r);return i!==Um||n===Um?i:this.parentInjector.get(e,n,r)}};function A0(t){return t!==Qo}function Ih(t){return t&32767}function GV(t){return t>>16}function wh(t,e){let n=GV(t),r=e;for(;n>0;)r=r[aa],n--;return r}var a_=!0;function Eh(t){let e=a_;return a_=t,e}var zV=256,R0=zV-1,N0=5,WV=0,wr={};function KV(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(nu)&&(r=n[nu]),r==null&&(r=n[nu]=WV++);let i=r&R0,s=1<<i;e.data[t+(i>>N0)]|=s}function Ch(t,e){let n=M0(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,jm(r.data,t),jm(e,null),jm(r.blueprint,null));let i=X_(t,e),s=t.injectorIndex;if(A0(i)){let o=Ih(i),a=wh(i,e),c=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function jm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function M0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function X_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=F0(i),r===null)return Qo;if(n++,i=i[aa],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Qo}function c_(t,e,n){KV(t,e,n)}function x0(t,e,n){if(n&fe.Optional||t!==void 0)return t;U_(e,"NodeInjector")}function P0(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[Xo],s=hn(void 0);try{return i?i.get(e,r,n&fe.Optional):US(e,r,n&fe.Optional)}finally{hn(s)}}return x0(r,e,n)}function k0(t,e,n,r=fe.Default,i){if(t!==null){if(e[re]&2048&&!(r&fe.Self)){let o=XV(t,e,n,r,wr);if(o!==wr)return o}let s=O0(t,e,n,r,wr);if(s!==wr)return s}return P0(e,n,r,i)}function O0(t,e,n,r,i){let s=ZV(n);if(typeof s=="function"){if(!w0(e,t,r))return r&fe.Host?x0(i,n,r):P0(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))U_(n);else return o}finally{b0()}}else if(typeof s=="number"){let o=null,a=M0(t,e),c=Qo,l=r&fe.Host?e[Cr][nr]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?X_(t,e):e[a+8],c===Qo||!hS(r,!1)?a=-1:(o=e[pe],a=Ih(c),e=wh(c,e)));a!==-1;){let d=e[pe];if(dS(s,a,d.data)){let f=QV(a,e,n,o,r,l);if(f!==wr)return f}c=e[a+8],c!==Qo&&hS(r,e[pe].data[a+8]===l)&&dS(s,a,e)?(o=d,a=Ih(c),e=wh(c,e)):a=-1}}return i}function QV(t,e,n,r,i,s){let o=e[pe],a=o.data[t+8],c=r==null?Uh(a)&&a_:r!=o&&(a.type&3)!==0,l=i&fe.Host&&s===a,d=YV(a,o,n,c,l);return d!==null?na(e,o,d,a):wr}function YV(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let _=f;_<g;_++){let I=o[_];if(_<c&&n===I||_>=c&&I.type===n)return _}if(i){let _=o[c];if(_&&ki(_)&&_.type===n)return c}return null}function na(t,e,n,r){let i=t[n],s=e.data;if($V(i)){let o=i;o.resolving&&DL(bL(s[n]));let a=Eh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?hn(o.injectImpl):null,d=w0(t,r,fe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&jV(n,s[n],e)}finally{l!==null&&hn(l),Eh(a),o.resolving=!1,b0()}}return i}function ZV(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(nu)?t[nu]:void 0;return typeof e=="number"?e>=0?e&R0:JV:e}function dS(t,e,n){let r=1<<t;return!!(n[e+(t>>N0)]&r)}function hS(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var Es=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return k0(this._tNode,this._lView,e,Oh(r),n)}};function JV(){return new Es(An(),Ue())}function Vi(t){return lu(()=>{let e=t.prototype.constructor,n=e[lh]||u_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[lh]||u_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function u_(t){return PS(t)?()=>{let e=u_(nn(t));return e&&e()}:Cs(t)}function XV(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[re]&2048&&!(o[re]&512);){let a=O0(s,o,n,r|fe.Self,wr);if(a!==wr)return a;let c=s.parent;if(!c){let l=o[r0];if(l){let d=l.get(n,wr,r);if(d!==wr)return d}c=F0(o),o=o[aa]}s=c}return i}function F0(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[nr]:null}function fS(t,e=null,n=null,r){let i=L0(t,e,n,r);return i.resolveInjectorInitializers(),i}function L0(t,e=null,n=null,r,i=new Set){let s=[n||Ln,nV(t)];return r=r||(typeof t=="object"?void 0:fn(t)),new su(s,e||H_(),r||null,i)}var ye=class t{static{this.THROW_IF_NOT_FOUND=ru}static{this.NULL=new fh}static create(e,n){if(Array.isArray(e))return fS({name:""},n,e,"");{let r=e.name??"";return fS({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=j({token:t,providedIn:"any",factory:()=>te(BS)})}static{this.__NG_ELEMENT_ID__=-1}};var eU=new V("");eU.__NG_ELEMENT_ID__=t=>{let e=An();if(e===null)throw new W(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new W(204,!1)};var tU="ngOriginalError";function Bm(t){return t[tU]}var V0=!0,ua=(()=>{class t{static{this.__NG_ELEMENT_ID__=nU}static{this.__NG_ENV_ID__=n=>n}}return t})(),l_=class extends ua{constructor(e){super(),this._lView=e}onDestroy(e){return f0(this._lView,e),()=>EV(this._lView,e)}};function nU(){return new l_(Ue())}var Os=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Pt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}}return t})();var d_=class extends Je{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,n0()&&(this.destroyRef=M(ua,{optional:!0})??void 0,this.pendingTasks=M(Os,{optional:!0})??void 0)}emit(e){let n=we(null);try{super.next(e)}finally{we(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof it&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},gt=d_;function Th(...t){}function U0(t){let e,n;function r(){t=Th;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function pS(t){return queueMicrotask(()=>t()),()=>{t=Th}}var ey="isAngularZone",bh=ey+"_ID",rU=0,ee=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=V0}=e;if(typeof Zone>"u")throw new W(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,oU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(ey)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new W(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new W(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,iU,Th,Th);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},iU={};function ty(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sU(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){U0(()=>{t.callbackScheduled=!1,h_(t),t.isCheckStableRunning=!0,ty(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),h_(t)}function oU(t){let e=()=>{sU(t)},n=rU++;t._inner=t._inner.fork({name:"angular",properties:{[ey]:!0,[bh]:n,[bh+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(aU(c))return r.invokeTask(s,o,a,c);try{return gS(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),mS(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return gS(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!cU(c)&&e(),mS(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,h_(t),ty(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function h_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function gS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function mS(t){t._nesting--,ty(t)}var f_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function aU(t){return j0(t,"__ignore_ng_zone__")}function cU(t){return j0(t,"__scheduler_tick__")}function j0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var br=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Bm(e);for(;n&&Bm(n);)n=Bm(n);return n||null}},uU=new V("",{providedIn:"root",factory:()=>{let t=M(ee),e=M(br);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function lU(){return ny(An(),Ue())}function ny(t,e){return new Ui($n(t,e))}var Ui=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=lU}}return t})();function B0(t){return(t.flags&128)===128}var $0=new Map,dU=0;function hU(){return dU++}function fU(t){$0.set(t[Vh],t)}function p_(t){$0.delete(t[Vh])}var _S="__ngContext__";function Rs(t,e){xi(e)?(t[_S]=e[Vh],fU(e)):t[_S]=e}function H0(t){return G0(t[ou])}function q0(t){return G0(t[tr])}function G0(t){for(;t!==null&&!Jr(t);)t=t[tr];return t}var g_;function z0(t){g_=t}function pU(){if(g_!==void 0)return g_;if(typeof document<"u")return document;throw new W(210,!1)}var ry=new V("",{providedIn:"root",factory:()=>gU}),gU="ng",iy=new V(""),rr=new V("",{providedIn:"platform",factory:()=>"unknown"});var sy=new V("",{providedIn:"root",factory:()=>pU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var mU="h",_U="b";var yU=()=>null;function oy(t,e,n=!1){return yU(t,e,n)}var W0=!1,vU=new V("",{providedIn:"root",factory:()=>W0});var m_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${pL})`}};function ay(t){return t instanceof m_?t.changingThisBreaksApplicationSecurity:t}function K0(t){return t instanceof Function?t():t}var zr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zr||{}),IU;function cy(t,e){return IU(t,e)}function Wo(t,e,n,r,i){if(r!=null){let s,o=!1;Jr(r)?s=r:xi(r)&&(o=!0,r=r[Zr]);let a=Tr(r);t===0&&n!==null?i==null?J0(e,n,a):Sh(e,n,a,i||null,!0):t===1&&n!==null?Sh(e,n,a,i||null,!0):t===2?OU(e,a,o):t===3&&e.destroyNode(a),s!=null&&LU(e,t,s,n,i)}}function wU(t,e){return t.createText(e)}function EU(t,e,n){t.setValue(e,n)}function Q0(t,e,n){return t.createElement(e,n)}function CU(t,e){Y0(t,e),e[Zr]=null,e[nr]=null}function TU(t,e,n,r,i,s){r[Zr]=i,r[nr]=e,$h(t,r,n,1,i,s)}function Y0(t,e){e[Gr].changeDetectionScheduler?.notify(9),$h(t,e,e[Tt],2,null,null)}function bU(t){let e=t[ou];if(!e)return $m(t[pe],t);for(;e;){let n=null;if(xi(e))n=e[ou];else{let r=e[Sn];r&&(n=r)}if(!n){for(;e&&!e[tr]&&e!==t;)xi(e)&&$m(e[pe],e),e=e[rn];e===null&&(e=t),xi(e)&&$m(e[pe],e),n=e&&e[tr]}e=n}}function DU(t,e,n,r){let i=Sn+r,s=n.length;r>0&&(n[i-1][tr]=e),r<s-Sn?(e[tr]=n[i],jS(n,Sn+r,e)):(n.push(e),e[tr]=null),e[rn]=n;let o=e[ea];o!==null&&n!==o&&Z0(o,e);let a=e[ta];a!==null&&a.insertView(t),i_(e),e[re]|=128}function Z0(t,e){let n=t[_h],r=e[rn];if(xi(r))t[re]|=yh.HasTransplantedViews;else{let i=r[rn][Cr];e[Cr]!==i&&(t[re]|=yh.HasTransplantedViews)}n===null?t[_h]=[e]:n.push(e)}function uy(t,e){let n=t[_h],r=n.indexOf(e);n.splice(r,1)}function Dh(t,e){if(t.length<=Sn)return;let n=Sn+e,r=t[n];if(r){let i=r[ea];i!==null&&i!==t&&uy(i,r),e>0&&(t[n-1][tr]=r[tr]);let s=hh(t,Sn+e);CU(r[pe],r);let o=s[ta];o!==null&&o.detachView(s[pe]),r[rn]=null,r[tr]=null,r[re]&=-129}return r}function ly(t,e){if(!(e[re]&256)){let n=e[Tt];n.destroyNode&&$h(t,e,n,3,null,null),bU(e)}}function $m(t,e){if(e[re]&256)return;let n=we(null);try{e[re]&=-129,e[re]|=256,e[Vn]&&Ed(e[Vn]),AU(t,e),SU(t,e),e[pe].type===1&&e[Tt].destroy();let r=e[ea];if(r!==null&&Jr(e[rn])){r!==e[rn]&&uy(r,e);let i=e[ta];i!==null&&i.detachView(t)}p_(e)}finally{we(n)}}function SU(t,e){let n=t.cleanup,r=e[gh];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[gh]=null);let i=e[Mi];if(i!==null){e[Mi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function AU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof As)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ir(4,a,c);try{c.call(a)}finally{Ir(5,a,c)}}else{Ir(4,i,s);try{s.call(i)}finally{Ir(5,i,s)}}}}}function RU(t,e,n){return NU(t,e.parent,n)}function NU(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Zr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Er.None||s===Er.Emulated)return null}return $n(r,n)}}function Sh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function J0(t,e,n){t.appendChild(e,n)}function yS(t,e,n,r,i){r!==null?Sh(t,e,n,r,i):J0(t,e,n)}function X0(t,e){return t.parentNode(e)}function MU(t,e){return t.nextSibling(e)}function xU(t,e,n){return kU(t,e,n)}function PU(t,e,n){return t.type&40?$n(t,n):null}var kU=PU,vS;function dy(t,e,n,r){let i=RU(t,r,e),s=e[Tt],o=r.parent||e[nr],a=xU(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)yS(s,i,n[c],a,!1);else yS(s,i,n,a,!1);vS!==void 0&&vS(s,r,e,n,i)}function eu(t,e){if(e!==null){let n=e.type;if(n&3)return $n(e,t);if(n&4)return __(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return eu(t,r);{let i=t[e.index];return Jr(i)?__(-1,i):Tr(i)}}else{if(n&128)return eu(t,e.next);if(n&32)return cy(e,t)()||Tr(t[e.index]);{let r=eA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ds(t[Cr]);return eu(i,r)}else return eu(t,e.next)}}}return null}function eA(t,e){if(e!==null){let r=t[Cr][nr],i=e.projection;return r.projection[i]}return null}function __(t,e){let n=Sn+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return eu(r,i)}return e[bs]}function OU(t,e,n){t.removeChild(null,e,n)}function hy(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Rs(Tr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)hy(t,e,n.child,r,i,s,!1),Wo(e,t,i,a,s);else if(c&32){let l=cy(n,r),d;for(;d=l();)Wo(e,t,i,d,s);Wo(e,t,i,a,s)}else c&16?FU(t,e,r,n,i,s):Wo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function $h(t,e,n,r,i,s){hy(n,r,t.firstChild,e,i,s,!1)}function FU(t,e,n,r,i,s){let o=n[Cr],c=o[nr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Wo(e,t,i,d,s)}else{let l=c,d=o[rn];B0(r)&&(l.flags|=128),hy(t,e,l,d,i,s,!0)}}function LU(t,e,n,r,i){let s=n[bs],o=Tr(n);s!==o&&Wo(e,t,r,s,i);for(let a=Sn;a<n.length;a++){let c=n[a];$h(c[pe],c,t,e,r,s)}}function VU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:zr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zr.Important),t.setStyle(n,r,i,s))}}function UU(t,e,n){t.setAttribute(e,"style",n)}function tA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function nA(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Jm(t,e,r),i!==null&&tA(t,e,i),s!==null&&UU(t,e,s)}var ji={};function ge(t=1){rA(gn(),Ue(),ca()+t,!1)}function rA(t,e,n,r){if(!r)if((e[re]&3)===3){let s=t.preOrderCheckHooks;s!==null&&oh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ah(e,s,0,n)}Ss(n)}function ke(t,e=fe.Default){let n=Ue();if(n===null)return te(t,e);let r=An();return k0(r,n,nn(t),e)}function iA(t,e,n,r,i,s){let o=we(null);try{let a=null;i&Pi.SignalBased&&(a=e[r][yr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Pi.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):o0(e,a,r,s)}finally{we(o)}}function jU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ss(~i);else{let s=i,o=n[++r],a=n[++r];kV(o,s);let c=e[s];a(2,c)}}}finally{Ss(-1)}}function Hh(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Zr]=i,f[re]=r|4|128|8|64,(l!==null||t&&t[re]&2048)&&(f[re]|=2048),d0(f),f[rn]=f[aa]=t,f[jn]=n,f[Gr]=o||t&&t[Gr],f[Tt]=a||t&&t[Tt],f[Xo]=c||t&&t[Xo]||null,f[nr]=s,f[Vh]=hU(),f[ph]=d,f[r0]=l,f[Cr]=e.type==2?t[Cr]:f,f}function qh(t,e,n,r,i){let s=t.data[e];if(s===null)s=BU(t,e,n,r,i),PV()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=RV();s.injectorIndex=o===null?-1:o.injectorIndex}return hu(s,!0),s}function BU(t,e,n,r,i){let s=m0(),o=_0(),a=o?s:s&&s.parent,c=t.data[e]=zU(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function sA(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function oA(t,e,n,r,i){let s=ca(),o=r&2;try{Ss(-1),o&&e.length>Bn&&rA(t,e,Bn,!1),Ir(o?2:0,i),n(r,i)}finally{Ss(s),Ir(o?3:1,i)}}function aA(t,e,n){if(s0(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{we(r)}}}function cA(t,e,n){g0()&&(JU(t,e,n,$n(n,e)),(n.flags&64)===64&&pA(t,e,n))}function uA(t,e,n=$n){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function lA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=fy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function fy(t,e,n,r,i,s,o,a,c,l,d){let f=Bn+r,g=f+i,_=$U(f,g),I=typeof l=="function"?l():l;return _[pe]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function $U(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:ji);return n}function HU(t,e,n,r){let s=r.get(vU,W0)||n===Er.ShadowDom,o=t.selectRootElement(e,s);return qU(o),o}function qU(t){GU(t)}var GU=()=>null;function zU(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return DV()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function IS(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Pi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?wS(r,n,l,a,c):wS(r,n,l,a)}return r}function wS(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function WU(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,_=g?g.inputs:null,I=g?g.outputs:null;c=IS(0,f.inputs,d,c,_),l=IS(1,f.outputs,d,l,I);let R=c!==null&&o!==null&&!B_(e)?uj(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function KU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function dA(t,e,n,r,i,s,o,a){let c=$n(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(py(t,n,d,r,i),Uh(e)&&QU(n,e.index)):e.type&3?(r=KU(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function QU(t,e){let n=Li(e,t);n[re]&16||(n[re]|=64)}function hA(t,e,n,r){if(g0()){let i=r===null?null:{"":-1},s=ej(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&fA(t,e,n,o,i,a),i&&tj(n,r,i)}n.mergedAttrs=iu(n.mergedAttrs,n.attrs)}function fA(t,e,n,r,i,s){for(let l=0;l<r.length;l++)c_(Ch(n,e),t,r[l].type);rj(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=sA(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=iu(n.mergedAttrs,d.hostAttrs),ij(t,n,e,c,d),nj(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}WU(t,n,s)}function YU(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;ZU(o)!=a&&o.push(a),o.push(n,r,s)}}function ZU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function JU(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Uh(n)&&sj(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ch(n,e),Rs(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=na(e,t,a,n);if(Rs(l,e),o!==null&&cj(e,a-i,l,c,n,o),ki(c)){let d=Li(n.index,e);d[jn]=na(e,t,a,n)}}}function pA(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=OV();try{Ss(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];s_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&XU(c,l)}}finally{Ss(-1),s_(o)}}function XU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function ej(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(WL(e,o.selectors,!1))if(r||(r=[]),ki(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;y_(t,e,c)}else r.unshift(o),y_(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function y_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tj(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new W(-301,!1);r.push(e[i],s)}}}function nj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ki(e)&&(n[""]=t)}}function rj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ij(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Cs(i.type,!0)),o=new As(s,ki(i),ke);t.blueprint[r]=o,n[r]=o,YU(t,e,r,sA(t,n,i.hostVars,ji),i)}function sj(t,e,n){let r=$n(e,t),i=lA(n),s=t[Gr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Gh(t,Hh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function oj(t,e,n,r,i,s){let o=$n(t,e);aj(e[Tt],o,s,t.value,n,r,i)}function aj(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?V_(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function cj(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];iA(r,n,c,l,d,f)}}function uj(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function gA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function mA(t,e){let n=t.contentQueries;if(n!==null){let r=we(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];I0(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function Gh(t,e){return t[ou]?t[aS][tr]=e:t[ou]=e,t[aS]=e,e}function v_(t,e,n){I0(0);let r=we(null);try{e(t,n)}finally{we(r)}}function lj(t){return t[gh]??=[]}function dj(t){return t.cleanup??=[]}function _A(t,e){let n=t[Xo],r=n?n.get(br,null):null;r&&r.handleError(e)}function py(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];iA(d,l,r,a,c,i)}}function hj(t,e,n){let r=l0(e,t);EU(t[Tt],r,n)}function fj(t,e){let n=Li(e,t),r=n[pe];pj(r,n);let i=n[Zr];i!==null&&n[ph]===null&&(n[ph]=oy(i,n[Xo])),gy(r,n,n[jn])}function pj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function gy(t,e,n){W_(e);try{let r=t.viewQuery;r!==null&&v_(1,r,n);let i=t.template;i!==null&&oA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ta]?.finishViewCreation(t),t.staticContentQueries&&mA(t,e),t.staticViewQueries&&v_(2,t.viewQuery,n);let s=t.components;s!==null&&gj(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[re]&=-5,K_()}}function gj(t,e){for(let n=0;n<e.length;n++)fj(t,e[n])}function mj(t,e,n,r){let i=we(null);try{let s=e.tView,a=t[re]&4096?4096:16,c=Hh(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[ea]=l;let d=t[ta];return d!==null&&(c[ta]=d.createEmbeddedView(s)),gy(s,c,n),c}finally{we(i)}}function _j(t,e){let n=Sn+e;if(n<t.length)return t[n]}function I_(t,e){return!e||e.firstChild===null||B0(t)}function yA(t,e,n,r=!0){let i=e[pe];if(DU(i,e,t,n),r){let o=__(n,t),a=e[Tt],c=X0(a,t[bs]);c!==null&&TU(i,t[nr],a,e,c,o)}let s=e[ph];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function yj(t,e){let n=Dh(t,e);return n!==void 0&&ly(n[pe],n),n}function Ah(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Tr(s)),Jr(s)&&vj(s,r);let o=n.type;if(o&8)Ah(t,e,n.child,r);else if(o&32){let a=cy(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=eA(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ds(e[Cr]);Ah(c[pe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function vj(t,e){for(let n=Sn;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&Ah(r[pe],r,i,e)}t[bs]!==t[Zr]&&e.push(t[bs])}var vA=[];function Ij(t){return t[Vn]??wj(t)}function wj(t){let e=vA.pop()??Object.create(Cj);return e.lView=t,e}function Ej(t){t.lView[Vn]!==t&&(t.lView=null,vA.push(t))}var Cj=me(F({},Ro),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Bh(t.lView)},consumerOnSignalRead(){this.lView[Vn]=this}});function Tj(t){let e=t[Vn]??Object.create(bj);return e.lView=t,e}var bj=me(F({},Ro),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ds(t.lView);for(;e&&!IA(e[pe]);)e=Ds(e);e&&h0(e)},consumerOnSignalRead(){this.lView[Vn]=this}});function IA(t){return t.type!==2}var Dj=100;function wA(t,e=!0,n=0){let r=t[Gr],i=r.rendererFactory,s=!1;s||i.begin?.();try{Sj(t,n)}catch(o){throw e&&_A(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Sj(t,e){let n=y0();try{uS(!0),w_(t,e);let r=0;for(;jh(t);){if(r===Dj)throw new W(103,!1);r++,w_(t,1)}}finally{uS(n)}}function Aj(t,e,n,r){let i=e[re];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Gr].inlineEffectRunner?.flush(),W_(e);let a=!0,c=null,l=null;s||(IA(t)?(l=Ij(e),c=zc(l)):dD()===null?(a=!1,l=Tj(e),c=zc(l)):e[Vn]&&(Ed(e[Vn]),e[Vn]=null));try{d0(e),MV(t.bindingStartIndex),n!==null&&oA(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let _=t.preOrderCheckHooks;_!==null&&oh(e,_,null)}else{let _=t.preOrderHooks;_!==null&&ah(e,_,0,null),Vm(e,0)}if(o||Rj(e),EA(e,0),t.contentQueries!==null&&mA(t,e),!s)if(d){let _=t.contentCheckHooks;_!==null&&oh(e,_)}else{let _=t.contentHooks;_!==null&&ah(e,_,1),Vm(e,1)}jU(t,e);let f=t.components;f!==null&&TA(e,f,0);let g=t.viewQuery;if(g!==null&&v_(2,g,r),!s)if(d){let _=t.viewCheckHooks;_!==null&&oh(e,_)}else{let _=t.viewHooks;_!==null&&ah(e,_,2),Vm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[sh]){for(let _ of e[sh])_();e[sh]=null}s||(e[re]&=-73)}catch(d){throw s||Bh(e),d}finally{l!==null&&(Id(l,c),a&&Ej(l)),K_()}}function EA(t,e){for(let n=H0(t);n!==null;n=q0(n))for(let r=Sn;r<n.length;r++){let i=n[r];CA(i,e)}}function Rj(t){for(let e=H0(t);e!==null;e=q0(e)){if(!(e[re]&yh.HasTransplantedViews))continue;let n=e[_h];for(let r=0;r<n.length;r++){let i=n[r];h0(i)}}}function Nj(t,e,n){let r=Li(e,t);CA(r,n)}function CA(t,e){z_(t)&&w_(t,e)}function w_(t,e){let r=t[pe],i=t[re],s=t[Vn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&wd(s)),o||=!1,s&&(s.dirty=!1),t[re]&=-9217,o)Aj(r,t,r.template,t[jn]);else if(i&8192){EA(t,1);let a=r.components;a!==null&&TA(t,a,1)}}function TA(t,e,n){for(let r=0;r<e.length;r++)Nj(t,e[r],n)}function my(t,e){let n=y0()?64:1088;for(t[Gr].changeDetectionScheduler?.notify(e);t;){t[re]|=n;let r=Ds(t);if(n_(t)&&!r)return t;t=r}return null}var ra=class{get rootNodes(){let e=this._lView,n=e[pe];return Ah(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[jn]}set context(e){this._lView[jn]=e}get destroyed(){return(this._lView[re]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rn];if(Jr(e)){let n=e[mh],r=n?n.indexOf(this):-1;r>-1&&(Dh(e,r),hh(n,r))}this._attachedToViewContainer=!1}ly(this._lView[pe],this._lView)}onDestroy(e){f0(this._lView,e)}markForCheck(){my(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[re]&=-129}reattach(){i_(this._lView),this._lView[re]|=128}detectChanges(){this._lView[re]|=1024,wA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new W(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=n_(this._lView),n=this._lView[ea];n!==null&&!e&&uy(n,this._lView),Y0(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new W(902,!1);this._appRef=e;let n=n_(this._lView),r=this._lView[ea];r!==null&&!n&&Z0(r,this._lView),i_(this._lView)}};var Qee=new RegExp(`^(\\d+)*(${_U}|${mU})*(.*)`);var Mj=()=>null;function E_(t,e){return Mj(t,e)}var ia=class{},zh=new V("",{providedIn:"root",factory:()=>!1});var bA=new V(""),DA=new V(""),C_=class{},Rh=class{};function xj(t){let e=Error(`No component factory found for ${fn(t)}.`);return e[Pj]=t,e}var Pj="ngComponent";var T_=class{resolveComponentFactory(e){throw xj(e)}},Oi=class{static{this.NULL=new T_}},sa=class{},Fs=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>kj()}}return t})();function kj(){let t=Ue(),e=An(),n=Li(e.index,t);return(xi(n)?n:t)[Tt]}var Oj=(()=>{class t{static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>null})}}return t})();function b_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=ZD(i,a);else if(s==2){let c=a,l=e[++o];r=ZD(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Nh=class extends Oi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Ts(e);return new au(n,this.ngModule)}};function ES(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Pi.None;e?n.push({propName:o,templateName:r,isSignal:(a&Pi.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Fj(t){let e=t.toLowerCase();return e==="svg"?_V:e==="math"?yV:null}var au=class extends Rh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=ES(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return ES(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=ZL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=we(null);try{i=i||this.ngModule;let o=i instanceof Un?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new o_(e,o):e,c=a.get(sa,null);if(c===null)throw new W(407,!1);let l=a.get(Oj,null),d=a.get(ia,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",I=r?HU(g,r,this.componentDef.encapsulation,a):Q0(g,_,Fj(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;I!==null&&(S=oy(I,a,!0));let P=fy(0,null,null,1,0,null,null,null,null,null,null),U=Hh(null,P,null,R,null,null,f,g,a,null,S);W_(U);let H,Z,Fe=null;try{let X=this.componentDef,C,v=null;X.findHostDirectiveDefs?(C=[],v=new Map,X.findHostDirectiveDefs(X,C,v),C.push(X)):C=[X];let w=Lj(U,I);Fe=Vj(w,I,X,C,U,f,g),Z=G_(P,Bn),I&&Bj(g,X,I,r),n!==void 0&&$j(Z,this.ngContentSelectors,n),H=jj(Fe,X,C,v,U,[Hj]),gy(P,U,null)}catch(X){throw Fe!==null&&p_(Fe),p_(U),X}finally{K_()}return new D_(this.componentType,H,ny(Z,U),U,Z)}finally{we(s)}}},D_=class extends C_{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ra(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;py(s[pe],s,i,e,n),this.previousInputValues.set(e,n);let o=Li(this._tNode.index,s);my(o,1)}}get injector(){return new Es(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Lj(t,e){let n=t[pe],r=Bn;return t[r]=e,qh(n,r,2,"#host",null)}function Vj(t,e,n,r,i,s,o){let a=i[pe];Uj(r,t,e,o);let c=null;e!==null&&(c=oy(e,i[Xo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Hh(i,lA(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&y_(a,t,r.length-1),Gh(i,f),i[t.index]=f}function Uj(t,e,n,r){for(let i of t)e.mergedAttrs=iu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(b_(e,e.mergedAttrs,!0),n!==null&&nA(r,n,e))}function jj(t,e,n,r,i,s){let o=An(),a=i[pe],c=$n(o,i);fA(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=na(i,a,f,o);Rs(g,i)}pA(a,i,o),c&&Rs(c,i);let l=na(i,a,o.directiveStart+o.componentOffset,o);if(t[jn]=i[jn]=l,s!==null)for(let d of s)d(l,e);return aA(a,o,i),l}function Bj(t,e,n,r){if(r)Jm(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=JL(e.selectors[0]);i&&Jm(t,n,i),s&&s.length>0&&tA(t,n,s.join(" "))}}function $j(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Hj(){let t=An();J_(Ue()[pe],t)}var Wh=(()=>{class t{static{this.__NG_ELEMENT_ID__=qj}}return t})();function qj(){let t=An();return zj(t,Ue())}var Gj=Wh,SA=class extends Gj{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ny(this._hostTNode,this._hostLView)}get injector(){return new Es(this._hostTNode,this._hostLView)}get parentInjector(){let e=X_(this._hostTNode,this._hostLView);if(A0(e)){let n=wh(e,this._hostLView),r=Ih(e),i=n[pe].data[r+8];return new Es(i,n)}else return new Es(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=CS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Sn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=E_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,I_(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!fV(e),a;if(o)a=n;else{let I=n||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}let c=o?e:new au(Ts(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(Un,null);R&&(s=R)}let d=Ts(c.componentType??{}),f=E_(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,I_(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(IV(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[rn],l=new SA(c,c[nr],c[rn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return yA(o,i,s,r),e.attachToViewContainerRef(),jS(Hm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=CS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Dh(this._lContainer,n);r&&(hh(Hm(this._lContainer),n),ly(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Dh(this._lContainer,n);return r&&hh(Hm(this._lContainer),n)!=null?new ra(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function CS(t){return t[mh]}function Hm(t){return t[mh]||(t[mh]=[])}function zj(t,e){let n,r=e[t.index];return Jr(r)?n=r:(n=gA(r,e,null,t),e[t.index]=n,Gh(e,n)),Kj(n,e,t,r),new SA(n,t,e)}function Wj(t,e){let n=t[Tt],r=n.createComment(""),i=$n(e,t),s=X0(n,i);return Sh(n,s,r,MU(n,i),!1),r}var Kj=Zj,Qj=()=>!1;function Yj(t,e,n){return Qj(t,e,n)}function Zj(t,e,n,r){if(t[bs])return;let i;n.type&8?i=Tr(r):i=Wj(e,n),t[bs]=i}var TS=new Set;function Ls(t){TS.has(t)||(TS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Jj(t){return typeof t=="function"&&t[yr]!==void 0}function Re(t,e){Ls("NgSignals");let n=CD(t),r=n[yr];return e?.equal&&(r.equal=e.equal),n.set=i=>ym(r,i),n.update=i=>TD(r,i),n.asReadonly=Xj.bind(n),n}function Xj(){let t=this[yr];if(t.readonlyFn===void 0){let e=()=>this();e[yr]=t,t.readonlyFn=e}return t.readonlyFn}function AA(t){return Jj(t)&&typeof t.set=="function"}function e2(t){return Object.getPrototypeOf(t.prototype).constructor}function ir(t){let e=e2(t.type),n=!0,r=[t];for(;e;){let i;if(ki(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new W(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=th(t.inputs),o.inputTransforms=th(t.inputTransforms),o.declaredInputs=th(t.declaredInputs),o.outputs=th(t.outputs);let a=i.hostBindings;a&&s2(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&r2(t,c),l&&i2(t,l),t2(t,i),_L(t.outputs,i.outputs),ki(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===ir&&(n=!1)}}e=Object.getPrototypeOf(e)}n2(r)}function t2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function n2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=iu(i.hostAttrs,n=iu(n,i.hostAttrs))}}function th(t){return t===Yo?{}:t===Ln?[]:t}function r2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function i2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function s2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Fi=class{},cu=class{};var S_=class extends Fi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Nh(this);let s=QS(e);this._bootstrapComponents=K0(s.bootstrap),this._r3Injector=L0(e,n,[{provide:Fi,useValue:this},{provide:Oi,useValue:this.componentFactoryResolver},...r],fn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},A_=class extends cu{constructor(e){super(),this.moduleType=e}create(e){return new S_(this.moduleType,e,[])}};var Mh=class extends Fi{constructor(e){super(),this.componentFactoryResolver=new Nh(this),this.instance=null;let n=new su([...e.providers,{provide:Fi,useValue:this},{provide:Oi,useValue:this.componentFactoryResolver}],e.parent||H_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function _y(t,e,n=null){return new Mh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function RA(t,e,n){return t[e]=n}function Wr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function o2(t,e,n,r){let i=Wr(t,e,n);return Wr(t,e+1,r)||i}function a2(t){return(t.flags&32)===32}function c2(t,e,n,r,i,s,o,a,c){let l=e.consts,d=qh(e,t,4,o||null,a||null);hA(e,n,d,vh(l,c)),J_(e,d);let f=d.tView=fy(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function u2(t,e,n,r,i,s,o,a,c,l){let d=n+Bn,f=e.firstCreatePass?c2(d,e,t,r,i,s,o,a,c):e.data[d];hu(f,!1);let g=l2(e,t,f,n);Y_()&&dy(e,t,g,f),Rs(g,t);let _=gA(g,t,g,f);return t[d]=_,Gh(t,_),Yj(_,f,t),q_(f)&&cA(e,t,f),c!=null&&uA(t,f,l),f}function mn(t,e,n,r,i,s,o,a){let c=Ue(),l=gn(),d=vh(l.consts,s);return u2(c,l,t,e,n,r,i,d,o,a),mn}var l2=d2;function d2(t,e,n,r){return Z_(!0),e[Tt].createComment("")}var tu=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(tu||{}),h2=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}}return t})(),bS=class t{constructor(){this.ngZone=M(ee),this.scheduler=M(ia),this.errorHandler=M(br,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[tu.EarlyRead,tu.Write,tu.MixedReadWrite,tu.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}};function pu(t,e,n,r){let i=Ue(),s=fu();if(Wr(i,s,e)){let o=gn(),a=Q_();oj(a,i,t,e,n,r)}return pu}function f2(t,e,n,r){return Wr(t,fu(),n)?e+V_(n)+r:ji}function nh(t,e){return t<<17|e<<2}function Ns(t){return t>>17&32767}function p2(t){return(t&2)==2}function g2(t,e){return t&131071|e<<17}function R_(t){return t|2}function oa(t){return(t&131068)>>2}function qm(t,e){return t&-131069|e<<2}function m2(t){return(t&1)===1}function N_(t){return t|1}function _2(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ns(o),c=oa(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||du(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=Ns(t[a+1]);t[r+1]=nh(g,a),g!==0&&(t[g+1]=qm(t[g+1],r)),t[a+1]=g2(t[a+1],r)}else t[r+1]=nh(a,0),a!==0&&(t[a+1]=qm(t[a+1],r)),a=r;else t[r+1]=nh(c,0),a===0?a=r:t[c+1]=qm(t[c+1],r),c=r;l&&(t[r+1]=R_(t[r+1])),DS(t,d,r,!0),DS(t,d,r,!1),y2(e,d,t,r,s),o=nh(a,c),s?e.classBindings=o:e.styleBindings=o}function y2(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&du(s,e)>=0&&(n[r+1]=N_(n[r+1]))}function DS(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ns(i):oa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];v2(c,e)&&(a=!0,t[o+1]=r?N_(l):R_(l)),o=r?Ns(l):oa(l)}a&&(t[n+1]=r?R_(i):N_(i))}function v2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?du(t,e)>=0:!1}function qt(t,e,n){let r=Ue(),i=fu();if(Wr(r,i,e)){let s=gn(),o=Q_();dA(s,o,r,t,e,r[Tt],n,!1)}return qt}function SS(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";py(t,n,s[o],o,r)}function Kh(t,e,n){return NA(t,e,n,!1),Kh}function Qh(t,e){return NA(t,e,null,!0),Qh}function NA(t,e,n,r){let i=Ue(),s=gn(),o=xV(2);if(s.firstUpdatePass&&w2(s,t,o,r),e!==ji&&Wr(i,o,e)){let a=s.data[ca()];D2(s,a,i,i[Tt],t,i[o+1]=S2(e,n),r,o)}}function I2(t,e){return e>=t.expandoStartIndex}function w2(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[ca()],o=I2(t,n);A2(s,r)&&e===null&&!o&&(e=!1),e=E2(i,s,e,r),_2(i,s,e,n,o,r)}}function E2(t,e,n,r){let i=FV(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Gm(null,t,e,n,r),n=uu(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Gm(i,t,e,n,r),s===null){let c=C2(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Gm(null,t,e,c[1],r),c=uu(c,e.attrs,r),T2(t,e,r,c))}else s=b2(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function C2(t,e,n){let r=n?e.classBindings:e.styleBindings;if(oa(r)!==0)return t[Ns(r)]}function T2(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ns(i)]=r}function b2(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=uu(r,o,n)}return uu(r,e.attrs,n)}function Gm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=uu(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function uu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),VL(t,o,n?!0:e[++s]))}return t===void 0?null:t}function D2(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=m2(l)?AS(c,e,n,i,oa(l),o):void 0;if(!xh(d)){xh(s)||p2(l)&&(s=AS(c,null,n,i,a,o));let f=l0(ca(),n);VU(r,o,f,i,s)}}function AS(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===ji&&(g=f?Ln:void 0);let _=f?Fm(g,r):d===r?g:void 0;if(l&&!xh(_)&&(_=Fm(c,r)),xh(_)&&(a=_,o))return a;let I=t[i+1];i=o?Ns(I):oa(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Fm(c,r))}return a}function xh(t){return t!==void 0}function S2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=fn(ay(t)))),t}function A2(t,e){return(t.flags&(e?8:16))!==0}function _n(t,e){Ls("NgControlFlow");let n=Ue(),r=fu(),i=n[r]!==ji?n[r]:-1,s=i!==-1?RS(n,Bn+i):void 0,o=0;if(Wr(n,r,t)){let a=we(null);try{if(s!==void 0&&yj(s,o),t!==-1){let c=Bn+t,l=RS(n,c),d=R2(n[pe],c),f=E_(l,d.tView.ssrId),g=mj(n,d,e,{dehydratedView:f});yA(l,g,o,I_(d,f))}}finally{we(a)}}else if(s!==void 0){let a=_j(s,o);a!==void 0&&(a[jn]=e)}}function RS(t,e){return t[e]}function R2(t,e){return G_(t,e)}function N2(t,e,n,r,i,s){let o=e.consts,a=vh(o,i),c=qh(e,t,2,r,a);return hA(e,n,c,vh(o,s)),c.attrs!==null&&b_(c,c.attrs,!1),c.mergedAttrs!==null&&b_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function G(t,e,n,r){let i=Ue(),s=gn(),o=Bn+t,a=i[Tt],c=s.firstCreatePass?N2(o,s,i,e,n,r):s.data[o],l=M2(s,i,c,a,e,t);i[o]=l;let d=q_(c);return hu(c,!0),nA(a,l,c),!a2(c)&&Y_()&&dy(s,i,l,c),CV()===0&&Rs(l,i),TV(),d&&(cA(s,i,c),aA(s,c,i)),r!==null&&uA(i,c),G}function q(){let t=An();_0()?NV():(t=t.parent,hu(t,!1));let e=t;SV(e)&&AV(),bV();let n=gn();return n.firstCreatePass&&(J_(n,t),s0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&HV(e)&&SS(n,e,Ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&qV(e)&&SS(n,e,Ue(),e.stylesWithoutHost,!1),q}function yn(t,e,n,r){return G(t,e,n,r),q(),yn}var M2=(t,e,n,r,i,s)=>(Z_(!0),Q0(r,i,UV()));function Yh(){return Ue()}var ws=void 0;function x2(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var P2=["en",[["a","p"],["AM","PM"],ws],[["AM","PM"],ws,ws],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ws,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ws,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ws,"{1} 'at' {0}",ws],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",x2],zm={};function Hn(t){let e=k2(t),n=NS(e);if(n)return n;let r=e.split("-")[0];if(n=NS(r),n)return n;if(r==="en")return P2;throw new W(701,!1)}function NS(t){return t in zm||(zm[t]=Xc.ng&&Xc.ng.common&&Xc.ng.common.locales&&Xc.ng.common.locales[t]),zm[t]}var dt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(dt||{});function k2(t){return t.toLowerCase().replace(/_/g,"-")}var Ph="en-US";var O2=Ph;function F2(t){typeof t=="string"&&(O2=t.toLowerCase().replace(/_/g,"-"))}var L2=(t,e,n)=>{};function Ot(t,e,n,r){let i=Ue(),s=gn(),o=An();return MA(s,i,i[Tt],o,t,e,r),Ot}function V2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[gh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function MA(t,e,n,r,i,s,o){let a=q_(r),l=t.firstCreatePass&&dj(t),d=e[jn],f=lj(e),g=!0;if(r.type&3||o){let R=$n(r,e),S=o?o(R):R,P=f.length,U=o?Z=>o(Tr(Z[r.index])):r.index,H=null;if(!o&&a&&(H=V2(t,e,i,r.index)),H!==null){let Z=H.__ngLastListenerFn__||H;Z.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,g=!1}else{s=xS(r,e,d,s),L2(R,i,s);let Z=n.listen(S,i,s);f.push(s,Z),l&&l.push(i,U,P,P+1)}}else s=xS(r,e,d,s);let _=r.outputs,I;if(g&&_!==null&&(I=_[i])){let R=I.length;if(R)for(let S=0;S<R;S+=2){let P=I[S],U=I[S+1],Fe=e[P][U].subscribe(s),X=f.length;f.push(s,Fe),l&&l.push(i,r.index,X,-(X+1))}}}function MS(t,e,n,r){let i=we(null);try{return Ir(6,e,n),n(r)!==!1}catch(s){return _A(t,s),!1}finally{Ir(7,e,n),we(i)}}function xS(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Li(t.index,e):e;my(o,5);let a=MS(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=MS(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function bt(t=1){return VV(t)}function U2(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Q(t,e=""){let n=Ue(),r=gn(),i=t+Bn,s=r.firstCreatePass?qh(r,i,1,e,null):r.data[i],o=j2(r,n,s,e,t);n[i]=o,Y_()&&dy(r,n,o,s),hu(s,!1)}var j2=(t,e,n,r,i)=>(Z_(!0),wU(e[Tt],r));function yy(t){return Xe("",t,""),yy}function Xe(t,e,n){let r=Ue(),i=f2(r,t,e,n);return i!==ji&&hj(r,ca(),i),Xe}function vy(t,e,n){AA(e)&&(e=e());let r=Ue(),i=fu();if(Wr(r,i,e)){let s=gn(),o=Q_();dA(s,o,r,t,e,r[Tt],n,!1)}return vy}function xA(t,e){let n=AA(t);return n&&t.set(e),n}function Iy(t,e){let n=Ue(),r=gn(),i=An();return MA(r,n,n[Tt],i,t,e),Iy}function B2(t,e,n){let r=gn();if(r.firstCreatePass){let i=ki(t);M_(n,r.data,r.blueprint,i,!0),M_(e,r.data,r.blueprint,i,!1)}}function M_(t,e,n,r,i){if(t=nn(t),Array.isArray(t))for(let s=0;s<t.length;s++)M_(t[s],e,n,r,i);else{let s=gn(),o=Ue(),a=An(),c=Jo(t)?t:nn(t.provide),l=t0(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Jo(t)||!t.multi){let _=new As(l,i,ke),I=Km(c,e,i?d:d+g,f);I===-1?(c_(Ch(a,o),s,c),Wm(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[I]=_,o[I]=_)}else{let _=Km(c,e,d+g,f),I=Km(c,e,d,d+g),R=_>=0&&n[_],S=I>=0&&n[I];if(i&&!S||!i&&!R){c_(Ch(a,o),s,c);let P=q2(i?H2:$2,n.length,i,r,l);!i&&S&&(n[I].providerFactory=P),Wm(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=PA(n[i?I:_],l,!i&&r);Wm(s,t,_>-1?_:I,P)}!i&&r&&S&&n[I].componentProviders++}}}function Wm(t,e,n,r){let i=Jo(e),s=oV(e);if(i||s){let c=(s?nn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function PA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Km(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function $2(t,e,n,r){return x_(this.multi,[])}function H2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=na(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),x_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],x_(i,s);return s}function x_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function q2(t,e,n,r,i){let s=new As(t,n,ke);return s.multi=[],s.index=e,s.componentProviders=0,PA(s,i,r&&!n),s}function Vs(t,e=[]){return n=>{n.providersResolver=(r,i)=>B2(r,i?i(t):t,e)}}var G2=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=JS(!1,n.type),i=r.length>0?_y([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=j({token:t,providedIn:"environment",factory:()=>new t(te(Un))})}}return t})();function vn(t){Ls("NgStandalone"),t.getStandaloneInjector=e=>e.get(G2).getOrCreateStandaloneInjector(t)}function Bi(t,e,n,r){return z2(Ue(),v0(),t,e,n,r)}function kA(t,e){let n=t[e];return n===ji?void 0:n}function z2(t,e,n,r,i,s){let o=e+n;return Wr(t,o,i)?RA(t,o+1,s?r.call(s,i):r(i)):kA(t,o+1)}function W2(t,e,n,r,i,s,o){let a=e+n;return o2(t,a,i,s)?RA(t,a+2,o?r.call(o,i,s):r(i,s)):kA(t,a+2)}function la(t,e){let n=gn(),r,i=t+Bn;n.firstCreatePass?(r=K2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Cs(r.type,!0)),o,a=hn(ke);try{let c=Eh(!1),l=s();return Eh(c),U2(n,Ue(),i,l),l}finally{hn(a)}}function K2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function da(t,e,n,r){let i=t+Bn,s=Ue(),o=vV(s,i);return Q2(s,i)?W2(s,v0(),e,o.transform,n,r,o):o.transform(n,r)}function Q2(t,e){return t[pe].data[e].pure}var Kr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},OA=new Kr("18.2.13");var Zh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var FA=new V("");function Us(t){return!!t&&typeof t.then=="function"}function LA(t){return!!t&&typeof t.subscribe=="function"}var $i=new V(""),VA=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=M($i,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Us(s))n.push(s);else if(LA(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wy=new V("");function Y2(){ED(()=>{throw new W(600,!1)})}function Z2(t){return t.isBoundToModule}var J2=10;function X2(t,e,n){try{let r=n();return Us(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var js=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(uU),this.afterRenderManager=M(h2),this.zonelessEnabled=M(zh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Je,this.afterTick=new Je,this.componentTypes=[],this.components=[],this.isStable=M(Os).hasPendingTasks.pipe(K(n=>!n)),this._injector=M(Un)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Rh;if(!this._injector.get(VA).done){let g=!i&&KS(n),_=!1;throw new W(405,_)}let o;i?o=n:o=this._injector.get(Oi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=Z2(o)?void 0:this._injector.get(Fi),c=r||o.selector,l=o.create(ye.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(FA,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ch(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new W(101,!1);let n=we(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,we(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(sa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<J2;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)eB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>jh(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ch(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(wy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ch(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new W(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ch(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function eB(t,e,n,r){if(!n&&!jh(t))return;wA(t,e,n&&!r?0:1)}var P_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Ey=(()=>{class t{compileModuleSync(n){return new A_(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=QS(n),s=K0(i.declarations).reduce((o,a)=>{let c=Ts(a);return c&&o.push(new au(c)),o},[]);return new P_(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var tB=(()=>{class t{constructor(){this.zone=M(ee),this.changeDetectionScheduler=M(ia),this.applicationRef=M(js)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),nB=new V("",{factory:()=>!1});function UA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ee(me(F({},BA()),{scheduleInRootZone:n})),[{provide:ee,useFactory:t},{provide:Zo,multi:!0,useFactory:()=>{let r=M(tB,{optional:!0});return()=>r.initialize()}},{provide:Zo,multi:!0,useFactory:()=>{let r=M(rB);return()=>{r.initialize()}}},e===!0?{provide:bA,useValue:!0}:[],{provide:DA,useValue:n??V0}]}function jA(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=UA({ngZoneFactory:()=>{let i=BA(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Ls("NgZone_CoalesceEvent"),new ee(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return $e([{provide:nB,useValue:!0},{provide:zh,useValue:!1},r])}function BA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var rB=(()=>{class t{constructor(){this.subscription=new it,this.initialized=!1,this.zone=M(ee),this.pendingTasks=M(Os)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ee.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ee.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var iB=(()=>{class t{constructor(){this.appRef=M(js),this.taskService=M(Os),this.ngZone=M(ee),this.zonelessEnabled=M(zh),this.disableScheduling=M(bA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new it,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(bh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(DA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof f_||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?pS:U0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(bh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,pS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function sB(){return typeof $localize<"u"&&$localize.locale||Ph}var Jh=new V("",{providedIn:"root",factory:()=>M(Jh,fe.Optional|fe.SkipSelf)||sB()});var k_=new V("");function rh(t){return!t.moduleRef}function oB(t){let e=rh(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ee);return n.run(()=>{rh(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(br,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),rh(t)){let s=()=>e.destroy(),o=t.platformInjector.get(k_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(k_);o.add(s),t.moduleRef.onDestroy(()=>{ch(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return X2(r,n,()=>{let s=e.get(VA);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Jh,Ph);if(F2(o||Ph),rh(t)){let a=e.get(js);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return aB(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function aB(t,e){let n=t.injector.get(js);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new W(-403,!1);e.push(t)}var uh=null;function cB(t=[],e){return ye.create({name:e,providers:[{provide:Fh,useValue:"platform"},{provide:k_,useValue:new Set([()=>uh=null])},...t]})}function uB(t=[]){if(uh)return uh;let e=cB(t);return uh=e,Y2(),lB(e),e}function lB(t){t.get(iy,null)?.forEach(n=>n())}var Hi=(()=>{class t{static{this.__NG_ELEMENT_ID__=dB}}return t})();function dB(t){return hB(An(),Ue(),(t&16)===16)}function hB(t,e,n){if(Uh(t)&&!n){let r=Li(t.index,e);return new ra(r,r)}else if(t.type&175){let r=e[Cr];return new ra(r,e)}return null}function $A(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=uB(r),s=[UA({}),{provide:ia,useExisting:iB},...n||[]],o=new Mh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return oB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function gu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Dt(t,e){Ls("NgSignals");let n=vD(t);return e?.equal&&(n[yr].equal=e.equal),n}function qn(t){let e=we(null);try{return t()}finally{we(e)}}var fB=new V("",{providedIn:"root",factory:()=>M(pB)}),pB=(()=>{class t{static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new O_})}}return t})(),O_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=M(Os),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},F_=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=DD(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(br,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function mu(t,e){Ls("NgSignals"),!e?.injector&&Lh(mu);let n=e?.injector??M(ye),r=e?.manualCleanup!==!0?n.get(ua):null,i=new F_(n.get(fB),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(Hi,null,{optional:!0});return!s||!(s._lView[re]&8)?i.watcher.notify():(s._lView[sh]??=[]).push(i.watcher.notify),i}var WA=null;function ni(){return WA}function KA(t){WA??=t}var cf=class{};var zn=new V(""),QA=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(_B),providedIn:"platform"})}}return t})();var _B=(()=>{class t extends QA{constructor(){super(),this._doc=M(zn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ni().getBaseHref(this._doc)}onPopState(n){let r=ni().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ni().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function YA(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function HA(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Bs(t){return t&&t[0]!=="?"?"?"+t:t}var df=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(ZA),providedIn:"root"})}}return t})(),yB=new V(""),ZA=(()=>{class t extends df{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(zn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return YA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Bs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Bs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Bs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(te(QA),te(yB,8))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _u=(()=>{class t{constructor(n){this._subject=new gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=wB(HA(qA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Bs(r))}normalize(n){return t.stripTrailingSlash(IB(this._basePath,qA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Bs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Bs}static{this.joinWithSlash=YA}static{this.stripTrailingSlash=HA}static{this.\u0275fac=function(r){return new(r||t)(te(df))}}static{this.\u0275prov=j({token:t,factory:()=>vB(),providedIn:"root"})}}return t})();function vB(){return new _u(te(df))}function IB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function qA(t){return t.replace(/\/index.html$/,"")}function wB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var sn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(sn||{}),je=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(je||{}),Rn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Rn||{}),qi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function EB(t){return Hn(t)[dt.LocaleId]}function CB(t,e,n){let r=Hn(t),i=[r[dt.DayPeriodsFormat],r[dt.DayPeriodsStandalone]],s=Gn(i,e);return Gn(s,n)}function TB(t,e,n){let r=Hn(t),i=[r[dt.DaysFormat],r[dt.DaysStandalone]],s=Gn(i,e);return Gn(s,n)}function bB(t,e,n){let r=Hn(t),i=[r[dt.MonthsFormat],r[dt.MonthsStandalone]],s=Gn(i,e);return Gn(s,n)}function DB(t,e){let r=Hn(t)[dt.Eras];return Gn(r,e)}function Xh(t,e){let n=Hn(t);return Gn(n[dt.DateFormat],e)}function ef(t,e){let n=Hn(t);return Gn(n[dt.TimeFormat],e)}function tf(t,e){let r=Hn(t)[dt.DateTimeFormat];return Gn(r,e)}function hf(t,e){let n=Hn(t),r=n[dt.NumberSymbols][e];if(typeof r>"u"){if(e===qi.CurrencyDecimal)return n[dt.NumberSymbols][qi.Decimal];if(e===qi.CurrencyGroup)return n[dt.NumberSymbols][qi.Group]}return r}function JA(t){if(!t[dt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[dt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function SB(t){let e=Hn(t);return JA(e),(e[dt.ExtraData][2]||[]).map(r=>typeof r=="string"?Cy(r):[Cy(r[0]),Cy(r[1])])}function AB(t,e,n){let r=Hn(t);JA(r);let i=[r[dt.ExtraData][0],r[dt.ExtraData][1]],s=Gn(i,e)||[];return Gn(s,n)||[]}function Gn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Cy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var RB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,nf={},NB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ti=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(ti||{}),Me=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Me||{}),Ne=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Ne||{});function MB(t,e,n,r){let i=jB(t);e=ei(n,e)||e;let o=[],a;for(;e;)if(a=NB.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=eR(r,c),i=UB(i,r,!0));let l="";return o.forEach(d=>{let f=LB(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function uf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ei(t,e){let n=EB(t);if(nf[n]??={},nf[n][e])return nf[n][e];let r="";switch(e){case"shortDate":r=Xh(t,Rn.Short);break;case"mediumDate":r=Xh(t,Rn.Medium);break;case"longDate":r=Xh(t,Rn.Long);break;case"fullDate":r=Xh(t,Rn.Full);break;case"shortTime":r=ef(t,Rn.Short);break;case"mediumTime":r=ef(t,Rn.Medium);break;case"longTime":r=ef(t,Rn.Long);break;case"fullTime":r=ef(t,Rn.Full);break;case"short":let i=ei(t,"shortTime"),s=ei(t,"shortDate");r=rf(tf(t,Rn.Short),[i,s]);break;case"medium":let o=ei(t,"mediumTime"),a=ei(t,"mediumDate");r=rf(tf(t,Rn.Medium),[o,a]);break;case"long":let c=ei(t,"longTime"),l=ei(t,"longDate");r=rf(tf(t,Rn.Long),[c,l]);break;case"full":let d=ei(t,"fullTime"),f=ei(t,"fullDate");r=rf(tf(t,Rn.Full),[d,f]);break}return r&&(nf[n][e]=r),r}function rf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function sr(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function xB(t,e){return sr(t,3).substring(0,e)}function _t(t,e,n=0,r=!1,i=!1){return function(s,o){let a=PB(t,s);if((n>0||a>-n)&&(a+=n),t===Me.Hours)a===0&&n===-12&&(a=12);else if(t===Me.FractionalSeconds)return xB(a,e);let c=hf(o,qi.MinusSign);return sr(a,e,c,r,i)}}function PB(t,e){switch(t){case Me.FullYear:return e.getFullYear();case Me.Month:return e.getMonth();case Me.Date:return e.getDate();case Me.Hours:return e.getHours();case Me.Minutes:return e.getMinutes();case Me.Seconds:return e.getSeconds();case Me.FractionalSeconds:return e.getMilliseconds();case Me.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function He(t,e,n=sn.Format,r=!1){return function(i,s){return kB(i,s,t,e,n,r)}}function kB(t,e,n,r,i,s){switch(n){case Ne.Months:return bB(e,i,r)[t.getMonth()];case Ne.Days:return TB(e,i,r)[t.getDay()];case Ne.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=SB(e),d=AB(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[_,I]=g,R=o>=_.hours&&a>=_.minutes,S=o<I.hours||o===I.hours&&a<I.minutes;if(_.hours<I.hours){if(R&&S)return!0}else if(R||S)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return CB(e,i,r)[o<12?0:1];case Ne.Eras:return DB(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function sf(t){return function(e,n,r){let i=-1*r,s=hf(n,qi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ti.Short:return(i>=0?"+":"")+sr(o,2,s)+sr(Math.abs(i%60),2,s);case ti.ShortGMT:return"GMT"+(i>=0?"+":"")+sr(o,1,s);case ti.Long:return"GMT"+(i>=0?"+":"")+sr(o,2,s)+":"+sr(Math.abs(i%60),2,s);case ti.Extended:return r===0?"Z":(i>=0?"+":"")+sr(o,2,s)+":"+sr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var OB=0,af=4;function FB(t){let e=uf(t,OB,1).getDay();return uf(t,0,1+(e<=af?af:af+7)-e)}function XA(t){let e=t.getDay(),n=e===0?-3:af-e;return uf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Ty(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=XA(n),o=FB(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return sr(i,t,hf(r,qi.MinusSign))}}function of(t,e=!1){return function(n,r){let s=XA(n).getFullYear();return sr(s,t,hf(r,qi.MinusSign),e)}}var by={};function LB(t){if(by[t])return by[t];let e;switch(t){case"G":case"GG":case"GGG":e=He(Ne.Eras,je.Abbreviated);break;case"GGGG":e=He(Ne.Eras,je.Wide);break;case"GGGGG":e=He(Ne.Eras,je.Narrow);break;case"y":e=_t(Me.FullYear,1,0,!1,!0);break;case"yy":e=_t(Me.FullYear,2,0,!0,!0);break;case"yyy":e=_t(Me.FullYear,3,0,!1,!0);break;case"yyyy":e=_t(Me.FullYear,4,0,!1,!0);break;case"Y":e=of(1);break;case"YY":e=of(2,!0);break;case"YYY":e=of(3);break;case"YYYY":e=of(4);break;case"M":case"L":e=_t(Me.Month,1,1);break;case"MM":case"LL":e=_t(Me.Month,2,1);break;case"MMM":e=He(Ne.Months,je.Abbreviated);break;case"MMMM":e=He(Ne.Months,je.Wide);break;case"MMMMM":e=He(Ne.Months,je.Narrow);break;case"LLL":e=He(Ne.Months,je.Abbreviated,sn.Standalone);break;case"LLLL":e=He(Ne.Months,je.Wide,sn.Standalone);break;case"LLLLL":e=He(Ne.Months,je.Narrow,sn.Standalone);break;case"w":e=Ty(1);break;case"ww":e=Ty(2);break;case"W":e=Ty(1,!0);break;case"d":e=_t(Me.Date,1);break;case"dd":e=_t(Me.Date,2);break;case"c":case"cc":e=_t(Me.Day,1);break;case"ccc":e=He(Ne.Days,je.Abbreviated,sn.Standalone);break;case"cccc":e=He(Ne.Days,je.Wide,sn.Standalone);break;case"ccccc":e=He(Ne.Days,je.Narrow,sn.Standalone);break;case"cccccc":e=He(Ne.Days,je.Short,sn.Standalone);break;case"E":case"EE":case"EEE":e=He(Ne.Days,je.Abbreviated);break;case"EEEE":e=He(Ne.Days,je.Wide);break;case"EEEEE":e=He(Ne.Days,je.Narrow);break;case"EEEEEE":e=He(Ne.Days,je.Short);break;case"a":case"aa":case"aaa":e=He(Ne.DayPeriods,je.Abbreviated);break;case"aaaa":e=He(Ne.DayPeriods,je.Wide);break;case"aaaaa":e=He(Ne.DayPeriods,je.Narrow);break;case"b":case"bb":case"bbb":e=He(Ne.DayPeriods,je.Abbreviated,sn.Standalone,!0);break;case"bbbb":e=He(Ne.DayPeriods,je.Wide,sn.Standalone,!0);break;case"bbbbb":e=He(Ne.DayPeriods,je.Narrow,sn.Standalone,!0);break;case"B":case"BB":case"BBB":e=He(Ne.DayPeriods,je.Abbreviated,sn.Format,!0);break;case"BBBB":e=He(Ne.DayPeriods,je.Wide,sn.Format,!0);break;case"BBBBB":e=He(Ne.DayPeriods,je.Narrow,sn.Format,!0);break;case"h":e=_t(Me.Hours,1,-12);break;case"hh":e=_t(Me.Hours,2,-12);break;case"H":e=_t(Me.Hours,1);break;case"HH":e=_t(Me.Hours,2);break;case"m":e=_t(Me.Minutes,1);break;case"mm":e=_t(Me.Minutes,2);break;case"s":e=_t(Me.Seconds,1);break;case"ss":e=_t(Me.Seconds,2);break;case"S":e=_t(Me.FractionalSeconds,1);break;case"SS":e=_t(Me.FractionalSeconds,2);break;case"SSS":e=_t(Me.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=sf(ti.Short);break;case"ZZZZZ":e=sf(ti.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=sf(ti.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=sf(ti.Long);break;default:return null}return by[t]=e,e}function eR(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function VB(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function UB(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=eR(e,i);return VB(t,r*(s-i))}function jB(t){if(GA(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return uf(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(RB))return BB(r)}let e=new Date(t);if(!GA(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function BB(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function GA(t){return t instanceof Date&&!isNaN(t.valueOf())}function tR(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Dy=/\s+/,zA=[],Gi=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=zA,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Dy):zA}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Dy):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Dy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(ke(Ui),ke(Fs))}}static{this.\u0275dir=kt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function $B(t,e){return new W(2100,!1)}var HB="mediumDate",qB=new V(""),GB=new V(""),ff=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??HB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return MB(n,o,s||this.locale,a)}catch(o){throw $B(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(ke(Jh,16),ke(qB,24),ke(GB,24))}}static{this.\u0275pipe=GS({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Sy="browser",zB="server";function Ay(t){return t===Sy}function Ry(t){return t===zB}var lf=class{};var xy=class extends cf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Py=class t extends xy{static makeCurrent(){KA(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=WB();return n==null?null:KB(n)}resetBaseElement(){yu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return tR(document.cookie,e)}},yu=null;function WB(){return yu=yu||document.querySelector("base"),yu?yu.getAttribute("href"):null}function KB(t){return new URL(t,document.baseURI).pathname}var QB=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),ky=new V(""),sR=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new W(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(te(ky),te(ee))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),pf=class{constructor(e){this._doc=e}},Ny="ng-app-id",oR=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ry(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Ny}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Ny),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ny,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(te(zn),te(ry),te(sy,8),te(rr))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),My={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Fy=/%COMP%/g,aR="%COMP%",YB=`_nghost-${aR}`,ZB=`_ngcontent-${aR}`,JB=!0,XB=new V("",{providedIn:"root",factory:()=>JB});function e$(t){return ZB.replace(Fy,t)}function t$(t){return YB.replace(Fy,t)}function cR(t,e){return e.map(n=>n.replace(Fy,t))}var nR=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ry(a),this.defaultRenderer=new vu(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Er.ShadowDom&&(r=me(F({},r),{encapsulation:Er.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof gf?i.applyToHost(n):i instanceof Iu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Er.Emulated:s=new gf(c,l,r,this.appId,d,o,a,f);break;case Er.ShadowDom:return new Oy(c,l,n,r,o,a,this.nonce,f);default:s=new Iu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(te(sR),te(oR),te(ry),te(XB),te(zn),te(rr),te(ee),te(sy))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),vu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(My[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(rR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(rR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new W(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=My[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=My[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zr.DashCase|zr.Important)?e.style.setProperty(n,r,i&zr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function rR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Oy=class extends vu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=cR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Iu=class extends vu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?cR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},gf=class extends Iu{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=e$(l),this.hostAttr=t$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},n$=(()=>{class t extends pf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(te(zn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),iR=["alt","control","meta","shift"],r$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},i$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},s$=(()=>{class t extends pf{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ni().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),iR.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=r$[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),iR.forEach(o=>{if(o!==i){let a=i$[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(te(zn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})();function uR(t,e){return $A(F({rootComponent:t},o$(e)))}function o$(t){return{appProviders:[...d$,...t?.providers??[]],platformProviders:l$}}function a$(){Py.makeCurrent()}function c$(){return new br}function u$(){return z0(document),document}var l$=[{provide:rr,useValue:Sy},{provide:iy,useValue:a$,multi:!0},{provide:zn,useFactory:u$,deps:[]}];var d$=[{provide:Fh,useValue:"root"},{provide:br,useFactory:c$,deps:[]},{provide:ky,useClass:n$,multi:!0,deps:[zn,ee,rr]},{provide:ky,useClass:s$,multi:!0,deps:[zn]},nR,oR,sR,{provide:sa,useExisting:nR},{provide:lf,useClass:QB,deps:[]},[]];var mf=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(te(zn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var de="primary",Vu=Symbol("RouteTitle"),By=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _a(t){return new By(t)}function h$(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function f$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dr(t[n],e[n]))return!1;return!0}function Dr(t,e){let n=t?$y(t):void 0,r=e?$y(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!yR(t[i],e[i]))return!1;return!0}function $y(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function yR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function vR(t){return t.length>0?t[t.length-1]:null}function zi(t){return Rm(t)?t:Us(t)?Qe(Promise.resolve(t)):J(t)}var p$={exact:wR,subset:ER},IR={exact:g$,subset:m$,ignored:()=>!0};function dR(t,e,n){return p$[n.paths](t.root,e.root,n.matrixParams)&&IR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function g$(t,e){return Dr(t,e)}function wR(t,e,n){if(!Hs(t.segments,e.segments)||!vf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!wR(t.children[r],e.children[r],n))return!1;return!0}function m$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>yR(t[n],e[n]))}function ER(t,e,n){return CR(t,e,e.segments,n)}function CR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Hs(i,n)||e.hasChildren()||!vf(i,n,r))}else if(t.segments.length===n.length){if(!Hs(t.segments,n)||!vf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!ER(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Hs(t.segments,i)||!vf(t.segments,i,r)||!t.children[de]?!1:CR(t.children[de],e,s,r)}}function vf(t,e,n){return e.every((r,i)=>IR[n](t[i].parameters,r.parameters))}var ii=class{constructor(e=new xe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_a(this.queryParams),this._queryParamMap}toString(){return v$.serialize(this)}},xe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return If(this)}},$s=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=_a(this.parameters),this._parameterMap}toString(){return bR(this)}};function _$(t,e){return Hs(t,e)&&t.every((n,r)=>Dr(n.parameters,e[r].parameters))}function Hs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function y$(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===de&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==de&&(n=n.concat(e(i,r)))}),n}var fv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>new Su,providedIn:"root"})}}return t})(),Su=class{parse(e){let n=new qy(e);return new ii(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${wu(e.root,!0)}`,r=E$(e.queryParams),i=typeof e.fragment=="string"?`#${I$(e.fragment)}`:"";return`${n}${r}${i}`}},v$=new Su;function If(t){return t.segments.map(e=>bR(e)).join("/")}function wu(t,e){if(!t.hasChildren())return If(t);if(e){let n=t.children[de]?wu(t.children[de],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==de&&r.push(`${i}:${wu(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=y$(t,(r,i)=>i===de?[wu(t.children[de],!1)]:[`${i}:${wu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[de]!=null?`${If(t)}/${n[0]}`:`${If(t)}/(${n.join("//")})`}}function TR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _f(t){return TR(t).replace(/%3B/gi,";")}function I$(t){return encodeURI(t)}function Hy(t){return TR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function wf(t){return decodeURIComponent(t)}function hR(t){return wf(t.replace(/\+/g,"%20"))}function bR(t){return`${Hy(t.path)}${w$(t.parameters)}`}function w$(t){return Object.entries(t).map(([e,n])=>`;${Hy(e)}=${Hy(n)}`).join("")}function E$(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${_f(n)}=${_f(i)}`).join("&"):`${_f(n)}=${_f(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var C$=/^[^\/()?;#]+/;function Ly(t){let e=t.match(C$);return e?e[0]:""}var T$=/^[^\/()?;=#]+/;function b$(t){let e=t.match(T$);return e?e[0]:""}var D$=/^[^=?&#]+/;function S$(t){let e=t.match(D$);return e?e[0]:""}var A$=/^[^&#]+/;function R$(t){let e=t.match(A$);return e?e[0]:""}var qy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[de]=new xe(e,n)),r}parseSegment(){let e=Ly(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new W(4009,!1);return this.capture(e),new $s(wf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=b$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ly(this.remaining);i&&(r=i,this.capture(r))}e[wf(n)]=wf(r)}parseQueryParam(e){let n=S$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=R$(this.remaining);o&&(r=o,this.capture(r))}let i=hR(n),s=hR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ly(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new W(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=de);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[de]:new xe([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new W(4011,!1)}};function DR(t){return t.segments.length>0?new xe([],{[de]:t}):t}function SR(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=SR(i);if(r===de&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new xe(t.segments,e);return N$(n)}function N$(t){if(t.numberOfChildren===1&&t.children[de]){let e=t.children[de];return new xe(t.segments.concat(e.segments),e.children)}return t}function Au(t){return t instanceof ii}function M$(t,e,n=null,r=null){let i=AR(t);return RR(i,e,n,r)}function AR(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new xe(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=DR(r);return e??i}function RR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Vy(i,i,i,n,r);let s=x$(e);if(s.toRoot())return Vy(i,i,new xe([],{}),n,r);let o=P$(s,i,t),a=o.processChildren?Tu(o.segmentGroup,o.index,s.commands):MR(o.segmentGroup,o.index,s.commands);return Vy(i,o.segmentGroup,a,n,r)}function Ef(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ru(t){return typeof t=="object"&&t!=null&&t.outlets}function Vy(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=NR(t,e,n);let a=DR(SR(o));return new ii(a,s,i)}function NR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=NR(s,e,n)}),new xe(t.segments,r)}var Cf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ef(r[0]))throw new W(4003,!1);let i=r.find(Ru);if(i&&i!==vR(r))throw new W(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function x$(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Cf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Cf(n,e,r)}var pa=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function P$(t,e,n){if(t.isAbsolute)return new pa(e,!0,0);if(!n)return new pa(e,!1,NaN);if(n.parent===null)return new pa(n,!0,0);let r=Ef(t.commands[0])?0:1,i=n.segments.length-1+r;return k$(n,i,t.numberOfDoubleDots)}function k$(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new W(4005,!1);i=r.segments.length}return new pa(r,!1,i-s)}function O$(t){return Ru(t[0])?t[0].outlets:{[de]:t}}function MR(t,e,n){if(t??=new xe([],{}),t.segments.length===0&&t.hasChildren())return Tu(t,e,n);let r=F$(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new xe(t.segments.slice(0,r.pathIndex),{});return s.children[de]=new xe(t.segments.slice(r.pathIndex),t.children),Tu(s,0,i)}else return r.match&&i.length===0?new xe(t.segments,{}):r.match&&!t.hasChildren()?Gy(t,e,n):r.match?Tu(t,0,i):Gy(t,e,n)}function Tu(t,e,n){if(n.length===0)return new xe(t.segments,{});{let r=O$(n),i={};if(Object.keys(r).some(s=>s!==de)&&t.children[de]&&t.numberOfChildren===1&&t.children[de].segments.length===0){let s=Tu(t.children[de],e,n);return new xe(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=MR(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new xe(t.segments,i)}}function F$(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ru(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!pR(c,l,o))return s;r+=2}else{if(!pR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Gy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ru(s)){let c=L$(s.outlets);return new xe(r,c)}if(i===0&&Ef(n[0])){let c=t.segments[e];r.push(new $s(c.path,fR(n[0]))),i++;continue}let o=Ru(s)?s.outlets[de]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ef(a)?(r.push(new $s(o,fR(a))),i+=2):(r.push(new $s(o,{})),i++)}return new xe(r,{})}function L$(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Gy(new xe([],{}),0,r))}),e}function fR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function pR(t,e,n){return t==n.path&&Dr(e,n.parameters)}var bu="imperative",Ft=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Ft||{}),Wn=class{constructor(e,n){this.id=e,this.url=n}},Nu=class extends Wn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Ft.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qs=class extends Wn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Ft.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mn||{}),zy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(zy||{}),ri=class extends Wn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ft.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gs=class extends Wn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Ft.NavigationSkipped}},Mu=class extends Wn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Ft.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Tf=class extends Wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends Wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ky=class extends Wn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Ft.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Qy=class extends Wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class extends Wn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Ft.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zy=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jy=class{constructor(e){this.route=e,this.type=Ft.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xy=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ev=class{constructor(e){this.snapshot=e,this.type=Ft.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tv=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xu=class{constructor(e){this.snapshot=e,this.type=Ft.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Pu=class{},ya=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function V$(t,e){return t.providers&&!t._injector&&(t._injector=_y(t.providers,e,`Route: ${t.path}`)),t._injector??e}function or(t){return t.outlet||de}function U$(t,e){let n=t.filter(r=>or(r)===e);return n.push(...t.filter(r=>or(r)!==e)),n}function Uu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var nv=class{get injector(){return Uu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Mf(this.rootInjector),this.attachRef=null}},Mf=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new nv(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(te(Un))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),bf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=rv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=rv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=iv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return iv(e,this._root).map(n=>n.value)}};function rv(t,e){if(t===e.value)return e;for(let n of e.children){let r=rv(t,n);if(r)return r}return null}function iv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=iv(t,n);if(r.length)return r.unshift(e),r}return[]}var Nn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Df=class extends bf{constructor(e,n){super(e),this.snapshot=n,pv(this,e)}toString(){return this.snapshot.toString()}};function xR(t){let e=j$(t),n=new Pt([new $s("",{})]),r=new Pt({}),i=new Pt({}),s=new Pt({}),o=new Pt(""),a=new va(n,r,s,o,i,de,t,e.root);return a.snapshot=e.root,new Df(new Nn(a,[]),e)}function j$(t){let e={},n={},r={},i="",s=new ga([],e,r,i,n,de,t,null,{});return new Af("",new Nn(s,[]))}var va=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[Vu]))??J(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>_a(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>_a(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&kR(i)&&(r.resolve[Vu]=i.title),r}var ga=class{get title(){return this.data?.[Vu]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_a(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_a(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Af=class extends bf{constructor(e,n){super(n),this.url=e,pv(this,n)}toString(){return PR(this._root)}};function pv(t,e){e.value._routerState=t,e.children.forEach(n=>pv(t,n))}function PR(t){let e=t.children.length>0?` { ${t.children.map(PR).join(", ")} } `:"";return`${t.value}${e}`}function Uy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dr(e.params,n.params)||t.paramsSubject.next(n.params),f$(e.url,n.url)||t.urlSubject.next(n.url),Dr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function sv(t,e){let n=Dr(t.params,e.params)&&_$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||sv(t.parent,e.parent))}function kR(t){return typeof t.title=="string"||t.title===null}var gv=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.parentContexts=M(Mf),this.location=M(Wh),this.changeDetector=M(Hi),this.inputBinder=M(mv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new W(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new W(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new W(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new W(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new ov(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xr]})}}return t})(),ov=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===va?this.route:e===Mf?this.childContexts:this.parent.get(e,n)}},mv=new V("");function B$(t,e,n){let r=ku(t,e._root,n?n._root:void 0);return new Df(r,e)}function ku(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=$$(t,e,n);return new Nn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ku(t,a)),o}}let r=H$(e.value),i=e.children.map(s=>ku(t,s));return new Nn(r,i)}}function $$(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ku(t,r,i);return ku(t,r)})}function H$(t){return new va(new Pt(t.url),new Pt(t.params),new Pt(t.queryParams),new Pt(t.fragment),new Pt(t.data),t.outlet,t.component,t)}var Ou=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},OR="ngNavigationCancelingError";function Rf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Au(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=FR(!1,Mn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function FR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[OR]=!0,n.cancellationCode=e,n}function q$(t){return LR(t)&&Au(t.url)}function LR(t){return!!t&&t[OR]}var G$=(t,e,n,r)=>K(i=>(new av(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),av=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Uy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=fa(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=fa(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new xu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new ev(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Uy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Uy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Nf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ma=class{constructor(e,n){this.component=e,this.route=n}};function z$(t,e,n){let r=t._root,i=e?e._root:null;return Eu(r,i,n,[r.value])}function W$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wa(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!kS(t)?t:e.get(t):r}function Eu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(e);return t.children.forEach(o=>{K$(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Du(a,n.getContext(o),i)),i}function K$(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=Q$(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Nf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Eu(t,e,a?a.children:null,r,i):Eu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ma(a.outlet.component,o))}else o&&Du(e,a,i),i.canActivateChecks.push(new Nf(r)),s.component?Eu(t,null,a?a.children:null,r,i):Eu(t,null,n,r,i);return i}function Q$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Hs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Hs(t.url,e.url)||!Dr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sv(t,e)||!Dr(t.queryParams,e.queryParams);case"paramsChange":default:return!sv(t,e)}}function Du(t,e,n){let r=fa(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Du(o,e.children.getContext(s),n):Du(o,null,n):Du(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ma(e.outlet.component,i)):n.canDeactivateChecks.push(new ma(null,i)):n.canDeactivateChecks.push(new ma(null,i))}function ju(t){return typeof t=="function"}function Y$(t){return typeof t=="boolean"}function Z$(t){return t&&ju(t.canLoad)}function J$(t){return t&&ju(t.canActivate)}function X$(t){return t&&ju(t.canActivateChild)}function eH(t){return t&&ju(t.canDeactivate)}function tH(t){return t&&ju(t.canMatch)}function VR(t){return t instanceof $r||t?.name==="EmptyError"}var yf=Symbol("INITIAL_VALUE");function Ia(){return dn(t=>Rt(t.map(e=>e.pipe(qr(1),qo(yf)))).pipe(K(e=>{for(let n of e)if(n!==!0){if(n===yf)return yf;if(n===!1||nH(n))return n}return!0}),tn(e=>e!==yf),qr(1)))}function nH(t){return Au(t)||t instanceof Ou}function rH(t,e){return lt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?J(me(F({},n),{guardsResult:!0})):iH(o,r,i,t).pipe(lt(a=>a&&Y$(a)?sH(r,s,t,e):J(a)),K(a=>me(F({},n),{guardsResult:a})))})}function iH(t,e,n,r){return Qe(t).pipe(lt(i=>lH(i.component,i.route,n,e,r)),vr(i=>i!==!0,!0))}function sH(t,e,n,r){return Qe(e).pipe(Is(i=>$o(aH(i.route.parent,r),oH(i.route,r),uH(t,i.path,n),cH(t,i.route,n))),vr(i=>i!==!0,!0))}function oH(t,e){return t!==null&&e&&e(new tv(t)),J(!0)}function aH(t,e){return t!==null&&e&&e(new Xy(t)),J(!0)}function cH(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return J(!0);let i=r.map(s=>Qd(()=>{let o=Uu(e)??n,a=wa(s,o),c=J$(a)?a.canActivate(e,t):Yr(o,()=>a(e,t));return zi(c).pipe(vr())}));return J(i).pipe(Ia())}function uH(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>W$(o)).filter(o=>o!==null).map(o=>Qd(()=>{let a=o.guards.map(c=>{let l=Uu(o.node)??n,d=wa(c,l),f=X$(d)?d.canActivateChild(r,t):Yr(l,()=>d(r,t));return zi(f).pipe(vr())});return J(a).pipe(Ia())}));return J(s).pipe(Ia())}function lH(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let o=s.map(a=>{let c=Uu(e)??i,l=wa(a,c),d=eH(l)?l.canDeactivate(t,e,n,r):Yr(c,()=>l(t,e,n,r));return zi(d).pipe(vr())});return J(o).pipe(Ia())}function dH(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return J(!0);let s=i.map(o=>{let a=wa(o,t),c=Z$(a)?a.canLoad(e,n):Yr(t,()=>a(e,n));return zi(c)});return J(s).pipe(Ia(),UR(r))}function UR(t){return Rd(Ct(e=>{if(typeof e!="boolean")throw Rf(t,e)}),K(e=>e===!0))}function hH(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return J(!0);let s=i.map(o=>{let a=wa(o,t),c=tH(a)?a.canMatch(e,n):Yr(t,()=>a(e,n));return zi(c)});return J(s).pipe(Ia(),UR(r))}var Fu=class{constructor(e){this.segmentGroup=e||null}},Lu=class extends Error{constructor(e){super(),this.urlTree=e}};function ha(t){return Bo(new Fu(t))}function fH(t){return Bo(new W(4e3,!1))}function pH(t){return Bo(FR(!1,Mn.GuardRejected))}var cv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return J(r);if(i.numberOfChildren>1||!i.children[de])return fH(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:_,data:I,title:R}=i,S=Yr(s,()=>a({params:_,data:I,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(S instanceof ii)throw new Lu(S);n=S}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Lu(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ii(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new xe(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new W(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},uv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gH(t,e,n,r,i){let s=jR(t,e,n);return s.matched?(r=V$(e,r),hH(r,e,n,i).pipe(K(o=>o===!0?s:F({},uv)))):J(s)}function jR(t,e,n){if(e.path==="**")return mH(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},uv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||h$)(n,t,e);if(!i)return F({},uv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function mH(t){return{matched:!0,parameters:t.length>0?vR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function gR(t,e,n,r){return n.length>0&&vH(t,n,r)?{segmentGroup:new xe(e,yH(r,new xe(n,t.children))),slicedSegments:[]}:n.length===0&&IH(t,n,r)?{segmentGroup:new xe(t.segments,_H(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new xe(t.segments,t.children),slicedSegments:n}}function _H(t,e,n,r){let i={};for(let s of n)if(xf(t,e,s)&&!r[or(s)]){let o=new xe([],{});i[or(s)]=o}return F(F({},r),i)}function yH(t,e){let n={};n[de]=e;for(let r of t)if(r.path===""&&or(r)!==de){let i=new xe([],{});n[or(r)]=i}return n}function vH(t,e,n){return n.some(r=>xf(t,e,r)&&or(r)!==de)}function IH(t,e,n){return n.some(r=>xf(t,e,r))}function xf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function wH(t,e,n){return e.length===0&&!t.children[n]}var lv=class{};function EH(t,e,n,r,i,s,o="emptyOnly"){return new dv(t,e,n,r,i,o,s).recognize()}var CH=31,dv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new cv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new W(4002,`'${e.segmentGroup}'`)}recognize(){let e=gR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:n,rootSnapshot:r})=>{let i=new Nn(r,n),s=new Af("",i),o=M$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ga([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,n).pipe(K(r=>({children:r,rootSnapshot:n})),Ai(r=>{if(r instanceof Lu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(K(o=>o instanceof Nn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Qe(s).pipe(Is(o=>{let a=r.children[o],c=U$(n,o);return this.processSegmentGroup(e,c,a,o,i)}),Xd((o,a)=>(o.push(...a),o)),Ri(null),Om(),lt(o=>{if(o===null)return ha(r);let a=BR(o);return TH(a),J(a)}))}processSegment(e,n,r,i,s,o,a){return Qe(n).pipe(Is(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Ai(l=>{if(l instanceof Fu)return J(null);throw l}))),vr(c=>!!c),Ai(c=>{if(VR(c))return wH(r,i,s)?J(new lv):ha(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return or(r)!==o&&(o===de||!xf(i,s,r))?ha(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):ha(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=jR(n,i,s);if(!c)return ha(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>CH&&(this.allowRedirects=!1));let _=new ga(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,mR(i),or(i),i.component??i._loadedComponent??null,i,_R(i)),I=Sf(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(I.params),_.data=Object.freeze(I.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(lt(S=>this.processSegment(e,r,n,S.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=gH(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(dn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dn(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:_}=c,I=new ga(g,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,mR(r),or(r),r.component??r._loadedComponent??null,r,_R(r)),R=Sf(I,o,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:P}=gR(n,g,_,l);if(P.length===0&&S.hasChildren())return this.processChildren(d,l,S,I).pipe(K(H=>new Nn(I,H)));if(l.length===0&&P.length===0)return J(new Nn(I,[]));let U=or(r)===s;return this.processSegment(d,l,S,P,U?de:s,!0,I).pipe(K(H=>new Nn(I,H instanceof Nn?[H]:[])))}))):ha(n)))}getChildConfig(e,n,r){return n.children?J({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):dH(e,n,r,this.urlSerializer).pipe(lt(i=>i?this.configLoader.loadChildren(e,n).pipe(Ct(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):pH(n))):J({routes:[],injector:e})}};function TH(t){t.sort((e,n)=>e.value.outlet===de?-1:n.value.outlet===de?1:e.value.outlet.localeCompare(n.value.outlet))}function bH(t){let e=t.value.routeConfig;return e&&e.path===""}function BR(t){let e=[],n=new Set;for(let r of t){if(!bH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=BR(r.children);e.push(new Nn(r.value,i))}return e.filter(r=>!n.has(r))}function mR(t){return t.data||{}}function _R(t){return t.resolve||{}}function DH(t,e,n,r,i,s){return lt(o=>EH(t,e,n,r,o.extractedUrl,i,s).pipe(K(({state:a,tree:c})=>me(F({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function SH(t,e){return lt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return J(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of $R(c))o.add(l);let a=0;return Qe(o).pipe(Is(c=>s.has(c)?AH(c,r,t,e):(c.data=Sf(c,c.parent,t).resolve,J(void 0))),Ct(()=>a++),Ho(1),lt(c=>a===o.size?J(n):Dn))})}function $R(t){let e=t.children.map(n=>$R(n)).flat();return[t,...e]}function AH(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!kR(i)&&(s[Vu]=i.title),RH(s,t,e,r).pipe(K(o=>(t._resolvedData=o,t.data=Sf(t,t.parent,n).resolve,null)))}function RH(t,e,n,r){let i=$y(t);if(i.length===0)return J({});let s={};return Qe(i).pipe(lt(o=>NH(t[o],e,n,r).pipe(vr(),Ct(a=>{if(a instanceof Ou)throw Rf(new Su,a);s[o]=a}))),Ho(1),Pm(s),Ai(o=>VR(o)?Dn:Bo(o)))}function NH(t,e,n,r){let i=Uu(e)??r,s=wa(t,i),o=s.resolve?s.resolve(e,n):Yr(i,()=>s(e,n));return zi(o)}function jy(t){return dn(e=>{let n=t(e);return n?Qe(n).pipe(K(()=>e)):J(e)})}var HR=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===de);return r}getResolvedTitleForRoute(n){return n.data[Vu]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(MH),providedIn:"root"})}}return t})(),MH=(()=>{class t extends HR{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(te(mf))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),_v=new V("",{providedIn:"root",factory:()=>({})}),yv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=pn({type:t,selectors:[["ng-component"]],standalone:!0,features:[vn],decls:1,vars:0,template:function(r,i){r&1&&yn(0,"router-outlet")},dependencies:[gv],encapsulation:2})}}return t})();function vv(t){let e=t.children&&t.children.map(vv),n=e?me(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=yv),n}var Iv=new V(""),xH=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(Ey)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return J(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=zi(n.loadComponent()).pipe(K(qR),Ct(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Jc(()=>{this.componentLoaders.delete(n)})),i=new Fo(r,()=>new Je).pipe(Oo());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return J({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=PH(r,this.compiler,n,this.onLoadEndListener).pipe(Jc(()=>{this.childrenLoaders.delete(r)})),o=new Fo(s,()=>new Je).pipe(Oo());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function PH(t,e,n,r){return zi(t.loadChildren()).pipe(K(qR),lt(i=>i instanceof cu||Array.isArray(i)?J(i):Qe(e.compileModuleAsync(i))),K(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Iv,[],{optional:!0,self:!0}).flat()),{routes:o.map(vv),injector:s}}))}function kH(t){return t&&typeof t=="object"&&"default"in t}function qR(t){return kH(t)?t.default:t}var wv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(OH),providedIn:"root"})}}return t})(),OH=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),FH=new V("");var LH=new V(""),VH=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Je,this.transitionAbortSubject=new Je,this.configLoader=M(xH),this.environmentInjector=M(Un),this.urlSerializer=M(fv),this.rootContexts=M(Mf),this.location=M(_u),this.inputBindingEnabled=M(mv,{optional:!0})!==null,this.titleStrategy=M(HR),this.options=M(_v,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(wv),this.createViewTransition=M(FH,{optional:!0}),this.navigationErrorHandler=M(LH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Zy(i)),r=i=>this.events.next(new Jy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(me(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Pt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(tn(s=>s.id!==0),K(s=>me(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),dn(s=>{let o=!1,a=!1;return J(s).pipe(dn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),Dn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?me(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Gs(c.id,this.urlSerializer.serialize(c.rawUrl),f,zy.IgnoredSameUrlNavigation)),c.resolve(!1),Dn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return J(c).pipe(dn(f=>{let g=this.transitions?.getValue();return this.events.next(new Nu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Dn:Promise.resolve(f)}),DH(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Ct(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=me(F({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Tf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:_,restoredState:I,extras:R}=c,S=new Nu(f,this.urlSerializer.serialize(g),_,I);this.events.next(S);let P=xR(this.rootComponentType).snapshot;return this.currentTransition=s=me(F({},c),{targetSnapshot:P,urlAfterRedirects:g,extras:me(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,J(s)}else{let f="";return this.events.next(new Gs(c.id,this.urlSerializer.serialize(c.extractedUrl),f,zy.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Dn}}),Ct(c=>{let l=new Wy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=s=me(F({},c),{guards:z$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),rH(this.environmentInjector,c=>this.events.next(c)),Ct(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Rf(this.urlSerializer,c.guardsResult);let l=new Ky(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),tn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Mn.GuardRejected),!1)),jy(c=>{if(c.guards.canActivateChecks.length)return J(c).pipe(Ct(l=>{let d=new Qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),dn(l=>{let d=!1;return J(l).pipe(SH(this.paramsInheritanceStrategy,this.environmentInjector),Ct({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Mn.NoDataFromResolver)}}))}),Ct(l=>{let d=new Yy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),jy(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ct(g=>{d.component=g}),K(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Rt(l(c.targetSnapshot.root)).pipe(Ri(null),qr(1))}),jy(()=>this.afterPreactivation()),dn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Qe(d).pipe(K(()=>s)):J(s)}),K(c=>{let l=B$(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=me(F({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ct(()=>{this.events.next(new Pu)}),G$(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qr(1),Ct({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Fn(this.transitionAbortSubject.pipe(Ct(c=>{throw c}))),Jc(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ai(c=>{if(a=!0,LR(c))this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),q$(c)?this.events.next(new ya(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Mu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Yr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Ou){let{message:f,cancellationCode:g}=Rf(this.urlSerializer,d);this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new ya(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=n.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Dn}))}))}cancelNavigationTransition(n,r,i){let s=new ri(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function UH(t){return t!==bu}var jH=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(BH),providedIn:"root"})}}return t})(),hv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},BH=(()=>{class t extends hv{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vi(t)))(i||t)}})()}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),GR=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M($H),providedIn:"root"})}}return t})(),$H=(()=>{class t extends GR{constructor(){super(...arguments),this.location=M(_u),this.urlSerializer=M(fv),this.options=M(_v,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(wv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Nu)this.stateMemento=this.createStateMemento();else if(n instanceof Gs)this.rawUrlTree=r.initialUrl;else if(n instanceof Tf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Pu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ri&&(n.code===Mn.GuardRejected||n.code===Mn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Mu?this.restoreHistory(r,!0):n instanceof qs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof ii?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vi(t)))(i||t)}})()}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Cu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Cu||{});function HH(t,e){t.events.pipe(tn(n=>n instanceof qs||n instanceof ri||n instanceof Mu||n instanceof Gs),K(n=>n instanceof qs||n instanceof Gs?Cu.COMPLETE:(n instanceof ri?n.code===Mn.Redirect||n.code===Mn.SupersededByNewNavigation:!1)?Cu.REDIRECTING:Cu.FAILED),tn(n=>n!==Cu.REDIRECTING),qr(1)).subscribe(()=>{e()})}function qH(t){throw t}var GH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Pf=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(Zh),this.stateManager=M(GR),this.options=M(_v,{optional:!0})||{},this.pendingTasks=M(Os),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(VH),this.urlSerializer=M(fv),this.location=M(_u),this.urlHandlingStrategy=M(wv),this._events=new Je,this.errorHandler=this.options.errorHandler||qH,this.navigated=!1,this.routeReuseStrategy=M(jH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(Iv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(mv,{optional:!0}),this.eventsSubscription=new it,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ri&&r.code!==Mn.Redirect&&r.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof qs)this.navigated=!0;else if(r instanceof ya){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||UH(i.source)},o);this.scheduleNavigation(a,bu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}KH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(vv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=AR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return RR(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Au(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,bu,null,r)}navigate(n,r={skipLocationChange:!1}){return WH(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},GH):r===!1?i=F({},zH):i=r,Au(n))return dR(this.currentUrlTree,n,i);let s=this.parseUrl(n);return dR(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return HH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function WH(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new W(4008,!1)}function KH(t){return!(t instanceof Pu)&&!(t instanceof ya)}var QH=new V("");function zR(t,...e){return $e([{provide:Iv,multi:!0,useValue:t},[],{provide:va,useFactory:YH,deps:[Pf]},{provide:wy,multi:!0,useFactory:ZH},e.map(n=>n.\u0275providers)])}function YH(t){return t.routerState.root}function ZH(){let t=M(ye);return e=>{let n=t.get(js);if(e!==n.components[0])return;let r=t.get(Pf),i=t.get(JH);t.get(XH)===1&&r.initialNavigation(),t.get(eq,null,fe.Optional)?.setUpPreloading(),t.get(QH,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var JH=new V("",{factory:()=>new Je}),XH=new V("",{providedIn:"root",factory:()=>1});var eq=new V("");var WR=[];var nq="firebase",rq="10.14.1";z(nq,rq,"app");var ze=new Kr("ANGULARFIRE2_VERSION"),Ca=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function yt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ht=(t,e)=>{let n=e?[e]:_d(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},In=class{constructor(){return ht(iq)}},iq="app-check";function Ea(){}var kf=class{zone;delegate;constructor(e,n=Sm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ev=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea)),n.pipe(Ct({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ot=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new kf(Zone.current)),this.insideAngular=n.run(()=>new kf(Zone.current,jo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(te(ee))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Of(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function sq(t){return Of().ngZone.runOutsideAngular(()=>t())}function zs(t){return Of().ngZone.run(()=>t())}function oq(t){return aq(Of())(t)}function aq(t){return function(n){return n=n.lift(new Ev(t.ngZone)),n.pipe(Si(t.outsideAngular),Di(t.insideAngular))}}var cq=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),zs(()=>t.apply(void 0,r))},De=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=zs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea))),r[s]=cq(r[s],n));let i=sq(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=Of();return i.pipe(Si(s.outsideAngular),Di(s.insideAngular))}else return zs(()=>i);return i instanceof oe?i.pipe(oq):i instanceof Promise?zs(()=>new Promise((s,o)=>i.then(a=>zs(()=>s(a)),a=>zs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:zs(()=>i)};var We=class{constructor(e){return e}},et=class{constructor(){return _d()}};function uq(t){return t&&t.length===1?t[0]:new We(pt())}var Cv=new V("angularfire2._apps"),lq={provide:We,useFactory:uq,deps:[[new ie,Cv]]},dq={provide:et,deps:[[new ie,Cv]]};function hq(t){return(e,n)=>{let r=n.get(rr);z("angularfire",ze.full,"core"),z("angularfire",ze.full,"app"),z("angular",OA.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new We(i)}}function KR(t,...e){return $e([lq,dq,{provide:Cv,useFactory:hq(t),multi:!0,deps:[ee,ye,ot,...e]}])}var QR=De(cD,!0);function lN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var dN=lN,hN=new gr("auth","Firebase",lN());var Bf=new _r("@firebase/auth");function fq(t,...e){Bf.logLevel<=Ht.WARN&&Bf.warn(`Auth (${un}): ${t}`,...e)}function Lf(t,...e){Bf.logLevel<=Ht.ERROR&&Bf.error(`Auth (${un}): ${t}`,...e)}function Ki(t,...e){throw Hv(t,...e)}function Ks(t,...e){return Hv(t,...e)}function fN(t,e,n){let r=Object.assign(Object.assign({},dN()),{[e]:n});return new gr("auth","Firebase",r).create(e,{appName:t.name})}function Ws(t){return fN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hN.create(t,...e)}function se(t,e,...n){if(!t)throw Hv(e,...n)}function si(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Lf(e),new Error(e)}function Qi(t,e){t||si(e)}function Sv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function pq(){return YR()==="http:"||YR()==="https:"}function YR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function gq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pq()||Lc()||"connection"in navigator)?navigator.onLine:!0}function mq(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Qs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Qi(n>e,"Short delay should be less than long delay!"),this.isMobile=Fc()||pd()}get(){return gq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qv(t,e){Qi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var $f=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var _q={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var yq=new Qs(3e4,6e4);function Gv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ba(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return pN(t,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=gs(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return Xb()||(_.referrerPolicy="no-referrer"),$f.fetch()(gN(t,t.config.apiHost,n,f),_)}))})}function pN(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},_q),e);try{let i=new Av(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Ff(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ff(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ff(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ff(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw fN(t,d,l);Ki(t,d)}}catch(i){if(i instanceof cn)throw i;Ki(t,"network-request-failed",{message:String(i)})}})}function vq(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield ba(t,e,n,r,i);return"mfaPendingCredential"in l&&Ki(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function gN(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?qv(t.config,i):`${t.config.apiScheme}://${i}`}var Av=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ks(this.auth,"network-request-failed")),yq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ff(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Ks(t,e,r);return i.customData._tokenResponse=n,i}function Iq(t,e){return y(this,null,function*(){return ba(t,"POST","/v1/accounts:delete",e)})}function mN(t,e){return y(this,null,function*(){return ba(t,"POST","/v1/accounts:lookup",e)})}function Bu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function zv(t,e=!1){return y(this,null,function*(){let n=Ie(t),r=yield n.getIdToken(e),i=Wv(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Bu(Tv(i.auth_time)),issuedAtTime:Bu(Tv(i.iat)),expirationTime:Bu(Tv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Tv(t){return Number(t)*1e3}function Wv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yb(n);return i?JSON.parse(i):(Lf("Failed to decode base64 JWT payload"),null)}catch(i){return Lf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ZR(t){let e=Wv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Hu(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof cn&&wq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function wq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Rv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var qu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Hf(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Hu(t,mN(n,{idToken:r}));se(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?_N(s.providerUserInfo):[],a=Eq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function Kv(t){return y(this,null,function*(){let e=Ie(t);yield Hf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Eq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _N(t){return t.map(e=>{var{providerId:n}=e,r=Am(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Cq(t,e){return y(this,null,function*(){let n=yield pN(t,{},()=>y(this,null,function*(){let r=gs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=gN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$f.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Tq(t,e){return y(this,null,function*(){return ba(t,"POST","/v2/accounts:revokeToken",Gv(t,e))})}var $u=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ZR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");let n=ZR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Cq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return si("not implemented")}};function Wi(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ta=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield Hu(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return zv(this,e)}reload(){return Kv(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Hf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Br(this.auth.app))return Promise.reject(Ws(this.auth));let e=yield this.getIdToken();return yield Hu(this,Iq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:Z,isAnonymous:Fe,providerData:X,stsTokenManager:C}=n;se(H&&C,e,"internal-error");let v=$u.fromJSON(this.name,C);se(typeof H=="string",e,"internal-error"),Wi(f,e.name),Wi(g,e.name),se(typeof Z=="boolean",e,"internal-error"),se(typeof Fe=="boolean",e,"internal-error"),Wi(_,e.name),Wi(I,e.name),Wi(R,e.name),Wi(S,e.name),Wi(P,e.name),Wi(U,e.name);let w=new t({uid:H,auth:e,email:g,emailVerified:Z,displayName:f,isAnonymous:Fe,photoURL:I,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:U});return X&&Array.isArray(X)&&(w.providerData=X.map(T=>Object.assign({},T))),S&&(w._redirectEventId=S),w}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new $u;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Hf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?_N(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new $u;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var JR=new Map;function oi(t){Qi(t instanceof Function,"Expected a class definition");let e=JR.get(t);return e?(Qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,JR.set(t,e),e)}var bq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Nv=bq;function Vf(t,e,n){return`firebase:${t}:${e}:${n}`}var qf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Vf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Vf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ta._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(oi(Nv),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||oi(Nv),o=Vf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=Ta._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function XR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(wN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CN(e))return"Blackberry";if(TN(e))return"Webos";if(vN(e))return"Safari";if((e.includes("chrome/")||IN(e))&&!e.includes("edge/"))return"Chrome";if(EN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function yN(t=$t()){return/firefox\//i.test(t)}function vN(t=$t()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function IN(t=$t()){return/crios\//i.test(t)}function wN(t=$t()){return/iemobile/i.test(t)}function EN(t=$t()){return/android/i.test(t)}function CN(t=$t()){return/blackberry/i.test(t)}function TN(t=$t()){return/webos/i.test(t)}function Qv(t=$t()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Dq(t=$t()){var e;return Qv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Sq(){return eD()&&document.documentMode===10}function bN(t=$t()){return Qv(t)||EN(t)||TN(t)||CN(t)||/windows phone/i.test(t)||wN(t)}function DN(t,e=[]){let n;switch(t){case"Browser":n=XR($t());break;case"Worker":n=`${XR($t())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${un}/${r}`}var Mv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Aq(n){return y(this,arguments,function*(t,e={}){return ba(t,"GET","/v2/passwordPolicy",Gv(t,e))})}var Rq=6,xv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Rq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Pv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gf(this),this.idTokenSubscription=new Gf(this),this.beforeStateQueue=new Mv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=oi(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield qf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield mN(this,{idToken:e}),r=yield Ta._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(Br(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Hf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=mq()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Br(this.app))return Promise.reject(Ws(this));let n=e?Ie(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Br(this.app)?Promise.reject(Ws(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Br(this.app)?Promise.reject(Ws(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(oi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield Aq(this),n=new xv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Tq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&oi(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield qf.create(this,[oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&fq(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Yv(t){return Ie(t)}var Gf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=sD(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zv={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Nq(t){Zv=t}function Mq(t){return Zv.loadJS(t)}function xq(){return Zv.gapiScript}function SN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Jv(t,e){let n=ft(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Bc(s,e??{}))return i;Ki(i,"already-initialized")}return n.initialize({options:e})}function Pq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(oi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Xv(t,e,n){let r=Yv(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=AN(e),{host:o,port:a}=kq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Oq()}function AN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function kq(t){let e=AN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:eN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:eN(o)}}}function eN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Oq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var zf=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,n){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}};function bv(t,e){return y(this,null,function*(){return vq(t,"POST","/v1/accounts:signInWithIdp",Gv(t,e))})}var Wf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var kv=class extends Wf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Gu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield Ta._fromIdTokenResponse(e,r,i),o=tN(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=tN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function tN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Ov=class t extends cn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function RN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ov._fromErrorAndOperation(t,s,e,r):s})}function Fq(t,e,n=!1){return y(this,null,function*(){let r=yield Hu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Gu._forOperation(t,"link",r)})}function Lq(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(Br(r.app))return Promise.reject(Ws(r));let i="reauthenticate";try{let s=yield Hu(t,RN(r,i,e,t),n);se(s.idToken,r,"internal-error");let o=Wv(s.idToken);se(o,r,"internal-error");let{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Gu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ki(r,"user-mismatch"),s}})}function Vq(t,e,n=!1){return y(this,null,function*(){if(Br(t.app))return Promise.reject(Ws(t));let r="signIn",i=yield RN(t,r,e),s=yield Gu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Jf(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function eI(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function Xf(t,e,n,r){return Ie(t).onAuthStateChanged(e,n,r)}var Kf="__sak";var Qf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Kf,"1"),this.storage.removeItem(Kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Uq=1e3,jq=10,Bq=(()=>{class t extends Qf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=bN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Sq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,jq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Uq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield Ci(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield Ci(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield Ci(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),NN=Bq;var $q=(()=>{class t extends Qf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),tI=$q;function Hq(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var qq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield Hq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function MN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Fv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=MN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Sr(){return window}function Gq(t){Sr().location.href=t}function xN(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}function zq(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Wq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Kq(){return xN()?self:null}var PN="firebaseLocalStorageDb",Qq=1,Yf="firebaseLocalStorage",kN="fbase_key",Ys=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function ep(t,e){return t.transaction([Yf],e?"readwrite":"readonly").objectStore(Yf)}function Yq(){let t=indexedDB.deleteDatabase(PN);return new Ys(t).toPromise()}function Lv(){let t=indexedDB.open(PN,Qq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Yf,{keyPath:kN})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Yf)?e(r):(r.close(),yield Yq(),e(yield Lv()))}))})}function nN(t,e,n){return y(this,null,function*(){let r=ep(t,!0).put({[kN]:e,value:n});return new Ys(r).toPromise()})}function Zq(t,e){return y(this,null,function*(){let n=ep(t,!1).get(e),r=yield new Ys(n).toPromise();return r===void 0?null:r.value})}function rN(t,e){let n=ep(t,!0).delete(e);return new Ys(n).toPromise()}var Jq=800,Xq=3,eG=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Lv(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Xq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return xN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=qq._getInstance(Kq()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield zq(),!this.activeServiceWorker)return;this.sender=new Fv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Wq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Lv();return yield nN(n,Kf,"1"),yield rN(n,Kf),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>nN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>Zq(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>rN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=ep(s,!1).getAll();return new Ys(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),Jq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),ON=eG;var Xne=SN("rcb"),ere=new Qs(3e4,6e4);function tG(t,e){return e?oi(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var zu=class extends zf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return bv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return bv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return bv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function nG(t){return Vq(t.auth,new zu(t),t.bypassAuthState)}function rG(t){let{auth:e,user:n}=t;return se(n,e,"internal-error"),Lq(n,new zu(t),t.bypassAuthState)}function iG(t){return y(this,null,function*(){let{auth:e,user:n}=t;return se(n,e,"internal-error"),Fq(n,new zu(t),t.bypassAuthState)})}var Vv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nG;case"linkViaPopup":case"linkViaRedirect":return iG;case"reauthViaPopup":case"reauthViaRedirect":return rG;default:Ki(this.auth,"internal-error")}}resolve(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var tre=new Qs(2e3,1e4);var sG="pendingRedirect",Uf=new Map,Uv=class t extends Vv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Uf.get(this.auth._key());if(!e){try{let r=(yield oG(this.resolver,this.auth))?yield Ci(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Uf.set(this.auth._key(),e)}return this.bypassAuthState||Uf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Ci(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ci(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function oG(t,e){return y(this,null,function*(){let n=uG(e),r=cG(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function aG(t,e){Uf.set(t._key(),e)}function cG(t){return oi(t._redirectPersistence)}function uG(t){return Vf(sG,t.config.apiKey,t.name)}function lG(t,e,n=!1){return y(this,null,function*(){if(Br(t.app))return Promise.reject(Ws(t));let r=Yv(t),i=tG(r,e),o=yield new Uv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var dG=10*60*1e3,jv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ks(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dG&&this.cachedEventUids.clear(),this.cachedEventUids.has(iN(e))}saveEventToCache(e){this.cachedEventUids.add(iN(e)),this.lastProcessedEventTime=Date.now()}};function iN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function hG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FN(t);default:return!1}}function fG(n){return y(this,arguments,function*(t,e={}){return ba(t,"GET","/v1/projects",e)})}var pG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gG=/^https?/;function mG(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield fG(t);for(let n of e)try{if(_G(n))return}catch{}Ki(t,"unauthorized-domain")})}function _G(t){let e=Sv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gG.test(n))return!1;if(pG.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var yG=new Qs(3e4,6e4);function sN(){let t=Sr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function vG(t){return new Promise((e,n)=>{var r,i,s;function o(){sN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sN(),n(Ks(t,"network-request-failed"))},timeout:yG.get()})}if(!((i=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Sr().gapi)===null||s===void 0)&&s.load)o();else{let a=SN("iframefcb");return Sr()[a]=()=>{gapi.load?o():n(Ks(t,"network-request-failed"))},Mq(`${xq()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw jf=null,e})}var jf=null;function IG(t){return jf=jf||vG(t),jf}var wG=new Qs(5e3,15e3),EG="__/auth/iframe",CG="emulator/auth/iframe",TG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DG(t){let e=t.config;se(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?qv(e,CG):`https://${t.config.authDomain}/${EG}`,r={apiKey:e.apiKey,appName:t.name,v:un},i=bG.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gs(r).slice(1)}`}function SG(t){return y(this,null,function*(){let e=yield IG(t),n=Sr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:DG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:TG,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Ks(t,"network-request-failed"),a=Sr().setTimeout(()=>{s(o)},wG.get());function c(){Sr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var AG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},RG=500,NG=600,MG="_blank",xG="http://localhost",Zf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function PG(t,e,n,r=RG,i=NG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},AG),{width:r.toString(),height:i.toString(),top:s,left:o}),l=$t().toLowerCase();n&&(a=IN(l)?MG:n),yN(l)&&(e=e||xG,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,I])=>`${g}${_}=${I},`,"");if(Dq(l)&&a!=="_self")return kG(e||"",a),new Zf(null);let f=window.open(e||"",a,d);se(f,t,"popup-blocked");try{f.focus()}catch{}return new Zf(f)}function kG(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var OG="__/auth/handler",FG="emulator/auth/handler",LG=encodeURIComponent("fac");function oN(t,e,n,r,i,s){return y(this,null,function*(){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:un,eventId:i};if(e instanceof Wf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Uc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof kv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${LG}=${encodeURIComponent(c)}`:"";return`${VG(t)}?${gs(a).slice(1)}${l}`})}function VG({config:t}){return t.emulator?qv(t,FG):`https://${t.authDomain}/${OG}`}var Dv="webStorageSupport",Bv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=tI,this._completeRedirectFn=lG,this._overrideRedirectResult=aG}_openPopup(e,n,r,i){return y(this,null,function*(){var s;Qi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield oN(e,n,r,Sv(),i);return PG(e,o,MN())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield oN(e,n,r,Sv(),i);return Gq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Qi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield SG(e),r=new jv(e);return n.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dv,{type:Dv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Dv];o!==void 0&&n(!!o),Ki(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return bN()||vN()||Qv()}},LN=Bv;var aN="@firebase/auth",cN="1.7.9";var $v=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function UG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jG(t){ut(new ct("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DN(t)},l=new Pv(r,i,s,c);return Pq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ut(new ct("auth-internal",e=>{let n=Yv(e.getProvider("auth").getImmediate());return(r=>new $v(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),z(aN,cN,UG(t)),z(aN,cN,"esm2017")}var BG=5*60,$G=dm("authIdTokenMaxAge")||BG,uN=null,HG=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>$G)return;let i=n?.token;uN!==i&&(uN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function nI(t=pt()){let e=ft(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Jv(t,{popupRedirectResolver:LN,persistence:[ON,NN,tI]}),r=dm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=HG(s.toString());eI(n,o,()=>o(n.currentUser)),Jf(n,a=>o(a))}}let i=Jb("auth");return i&&Xv(n,`http://${i}`),n}function qG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Nq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Ks("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",qG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jG("Browser");function UN(t){return new oe(function(e){var n=Xf(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var jN="auth",Zs=class{constructor(e){return e}},ar=class{constructor(){return ht(jN)}};var rI=new V("angularfire2.auth-instances");function Fz(t,e){let n=yt(jN,t,e);return n&&new Zs(n)}function Lz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Zs(r)}}var Vz={provide:ar,deps:[[new ie,rI]]},Uz={provide:Zs,useFactory:Fz,deps:[[new ie,rI],We]};function BN(t,...e){return z("angularfire",ze.full,"auth"),$e([Uz,Vz,{provide:rI,useFactory:Lz(t),multi:!0,deps:[ee,ye,ot,et,[new ie,In],...e]}])}var $N=De(UN,!0);var HN=De(nI,!0);var tp="analytics",Bz="firebase_id",$z="origin",Hz=60*1e3,qz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lI="https://www.googletagmanager.com/gtag/js";var on=new _r("@firebase/analytics");var Gz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new gr("analytics","Analytics",Gz);function zz(t){if(!t.startsWith(lI)){let e=xn.create("invalid-gtag-resource",{gtagURL:t});return on.warn(e.message),""}return t}function YN(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Wz(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Kz(t,e){let n=Wz("firebase-js-sdk-policy",{createScriptURL:zz}),r=document.createElement("script"),i=`${lI}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Qz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Yz(t,e,n,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield YN(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){on.error(a)}t("config",i,s)})}function Zz(t,e,n,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield YN(n);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){on.error(s)}})}function Jz(t,e,n,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield Zz(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield Yz(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){on.error(a)}})}return i}function Xz(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Jz(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function eW(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(lI)&&n.src.includes(t))return n;return null}var tW=30,nW=1e3,sI=class{constructor(e={},n=nW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},ZN=new sI;function rW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function iW(t){return y(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:rW(r)},s=qz.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function sW(r){return y(this,arguments,function*(t,e=ZN,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw xn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw xn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new oI;return setTimeout(()=>y(this,null,function*(){c.abort()}),n!==void 0?n:Hz),JN({appId:i,apiKey:s,measurementId:o},a,c,e)})}function JN(s,o,a){return y(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=ZN){var c;let{appId:l,measurementId:d}=t;try{yield oW(r,e)}catch(f){if(d)return on.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield iW(t);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!aW(g)){if(i.deleteThrottleMetadata(l),d)return on.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Hc(n,i.intervalMillis,tW):Hc(n,i.intervalMillis),I={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(l,I),on.debug(`Calling attemptFetch again in ${_} millis`),JN(t,I,r,i)}})}function oW(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function aW(t){if(!(t instanceof cn)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var oI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var aI;function cW(t,e,n,r,i){return y(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function uW(t,e,n,r){return y(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var cI;function lW(t){cI=t}function dW(t){aI=t}function hW(){return y(this,null,function*(){if(jr())try{yield fs()}catch(t){return on.warn(xn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return on.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function fW(t,e,n,r,i,s,o){return y(this,null,function*(){var a;let c=sW(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&on.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>on.error(_)),e.push(c);let l=hW().then(_=>{if(_)return r.getId()}),[d,f]=yield Promise.all([c,l]);eW(s)||Kz(s,d.measurementId),cI&&(i("consent","default",cI),lW(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[$z]="firebase",g.update=!0,f!=null&&(g[Bz]=f),i("config",d.measurementId,g),aI&&(i("set",aI),dW(void 0)),d.measurementId})}var uI=class{constructor(e){this.app=e}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}},Da={},qN=[],GN={},iI="dataLayer",pW="gtag",zN,dI,WN=!1;function gW(){let t=[];if(Lc()&&t.push("This is a browser extension environment."),Vc()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=xn.create("invalid-analytics-context",{errorInfo:e});on.warn(n.message)}}function mW(t,e,n){gW();let r=t.options.appId;if(!r)throw xn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)on.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(Da[r]!=null)throw xn.create("already-exists",{id:r});if(!WN){Qz(iI);let{wrappedGtag:s,gtagCore:o}=Xz(Da,qN,GN,iI,pW);dI=s,zN=o,WN=!0}return Da[r]=fW(t,qN,GN,e,zN,iI,n),new uI(t)}function XN(t=pt()){t=Ie(t);let e=ft(t,tp);return e.isInitialized()?e.getImmediate():eM(t)}function eM(t,e={}){let n=ft(t,tp);if(n.isInitialized()){let i=n.getImmediate();if(Bc(e,n.getOptions()))return i;throw xn.create("already-initialized")}return n.initialize({options:e})}function tM(){return y(this,null,function*(){if(Lc()||!Vc()||!jr())return!1;try{return yield fs()}catch{return!1}})}function nM(t,e,n){t=Ie(t),uW(dI,Da[t.app.options.appId],e,n).catch(r=>on.error(r))}function hI(t,e,n,r){t=Ie(t),cW(dI,Da[t.app.options.appId],e,n,r).catch(i=>on.error(i))}var KN="@firebase/analytics",QN="0.10.8";function _W(){ut(new ct(tp,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return mW(r,i,n)},"PUBLIC")),ut(new ct("analytics-internal",t,"PRIVATE")),z(KN,QN),z(KN,QN,"esm2017");function t(e){try{let n=e.getProvider(tp).getImmediate();return{logEvent:(r,i,s)=>hI(n,r,i,s)}}catch(n){throw xn.create("interop-component-reg-failed",{reason:n})}}}_W();var Js=class{constructor(e){return e}},sM="analytics",pI=class{constructor(){return ht(sM)}};var gI="__angularfire_symbol__analyticsIsSupportedValue",oM="__angularfire_symbol__analyticsIsSupported";globalThis[oM]||=tM().then(t=>globalThis[gI]=t).catch(()=>globalThis[gI]=!1);var np={async:()=>globalThis[oM],sync:()=>{let t=globalThis[gI];if(t===void 0)throw new Error(Ca("Analytics"));return t}},aM=np.async,cM=De(XN,!0);var yW=De(hI,!0);var vW=De(nM,!0);var _I=(()=>{class t{initialized;disposables=[];constructor(n,r,i){z("angularfire",ze.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),aM().then(()=>{let o=i.get(Js);o?this.disposables=[$N(n).subscribe(a=>{vW(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(te(Zs),te(ee),te(ye))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),IW="firebase_event_origin",wW="firebase_previous_class",EW="firebase_previous_id",CW="firebase_previous_screen",TW="firebase_screen_class",rM="firebase_screen_id",bW="firebase_screen",mI="outlet",DW="page_path",SW="page_title",Wu="screen_class",iM="screen_name",AW="screen_view",RW="auto",NW="#",MW=Math.floor(Math.random()*(2**32-1))-2**31,fI={},xW=t=>{let e=[t[Wu],t[mI]].join(NW);if(fI.hasOwnProperty(e))return fI[e];{let n=MW++;return fI[e]=n,n}},PW=(t,e,n)=>t.events.pipe(tn(i=>i instanceof xu)).pipe(dn(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return J(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[iM]:l,[DW]:`/${o}`,[IW]:RW,[bW]:l,[mI]:i.snapshot.outlet};e&&(d[SW]=e.getTitle());let f=a.component;if(f){if(f===yv){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return J(me(F({},d),{[Wu]:f}));if(f){let g=n.resolveComponentFactory(f);return J(me(F({},d),{[Wu]:g.selector}))}return J(null)}),tn(i=>!!i),K(i=>F({[TW]:i[Wu],[rM]:xW(i)},i)),km(i=>i[mI]),lt(i=>i.pipe(Yd((s,o)=>JSON.stringify(s)===JSON.stringify(o)),qo(void 0),Jd(),K(([s,o])=>s?F({[wW]:s[Wu],[CW]:s[iM],[EW]:s[rM]},o):o)))),uM=(()=>{class t{disposable;constructor(n,r,i,s,o,a){z("angularfire",ze.full,"screen-tracking"),aM().then(()=>{let c=a.get(Js);!n||!c||s.runOutsideAngular(()=>{this.disposable=PW(n,r,i).pipe(dn(l=>y(this,null,function*(){return o&&(yield o.initialized),yW(c,AW,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(te(Pf,8),te(mf,8),te(Oi),te(ee),te(_I,8),te(ye))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),yI=new V("angularfire2.analytics-instances");function kW(t,e){if(!np.sync())return null;let n=yt(sM,t,e);return n&&new Js(n)}function OW(t){return(e,n)=>{if(!np.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Js(r)}}var FW={provide:pI,deps:[[new ie,yI]]},LW={provide:Js,useFactory:kW,deps:[[new ie,yI],We]};function lM(t,...e){return z("angularfire",ze.full,"analytics"),$e([LW,FW,{provide:$i,useValue:np.async,multi:!0},{provide:yI,useFactory:OW(t),multi:!0,deps:[ee,ye,ot,et,...e]}])}var dM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},hM={};var Yi,vI;(function(){var t;function e(C,v){function w(){}w.prototype=v.prototype,C.D=v.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(T,b,A){for(var E=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)E[Lr-2]=arguments[Lr];return v.prototype[b].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,w){w||(w=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)T[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=C.g[0],w=C.g[1],b=C.g[2];var A=C.g[3],E=v+(A^w&(b^A))+T[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(w^b))+T[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(w^b^A)+T[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(b^(w|~A))+T[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var w=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=w;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(T[b++]=C.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=C[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var w=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=w&255,w/=256;for(this.u(C),C=Array(16),v=w=0;4>v;++v)for(var T=0;32>T;T+=8)C[w++]=this.g[v]>>>T&255;return C};function s(C,v){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=v(C)}function o(C,v){this.h=v;for(var w=[],T=!0,b=C.length-1;0<=b;b--){var A=C[b]|0;T&&A==v||(w[b]=A,T=!1)}this.g=w}var a={};function c(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return S(l(-C));for(var v=[],w=1,T=0;C>=w;T++)v[T]=C/w|0,w*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return S(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),T=f,b=0;b<C.length;b+=8){var A=Math.min(8,C.length-b),E=parseInt(C.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(w),T=T.add(l(E)))}return T}var f=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-S(this).m();for(var C=0,v=1,w=0;w<this.g.length;w++){var T=this.i(w);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(R(this))return"-"+S(this).toString(C);for(var v=l(Math.pow(C,6)),w=this,T="";;){var b=Z(w,v).g;w=P(w,b.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=b,I(w))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}t.l=function(C){return C=P(this,C),R(C)?-1:I(C)?0:1};function S(C){for(var v=C.g.length,w=[],T=0;T<v;T++)w[T]=~C.g[T];return new o(w,~C.h).add(g)}t.abs=function(){return R(this)?S(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(C.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,w[b]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(C,v){return C.add(S(v))}t.j=function(C){if(I(this)||I(C))return f;if(R(this))return R(C)?S(this).j(S(C)):S(S(this).j(C));if(R(C))return S(this.j(S(C)));if(0>this.l(_)&&0>C.l(_))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,w=[],T=0;T<2*v;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<C.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,Lr=C.i(b)>>>16,_c=C.i(b)&65535;w[2*T+2*b]+=E*_c,U(w,2*T+2*b),w[2*T+2*b+1]+=A*_c,U(w,2*T+2*b+1),w[2*T+2*b+1]+=E*Lr,U(w,2*T+2*b+1),w[2*T+2*b+2]+=A*Lr,U(w,2*T+2*b+2)}for(T=0;T<v;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=v;T<2*v;T++)w[T]=0;return new o(w,0)};function U(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function H(C,v){this.g=C,this.h=v}function Z(C,v){if(I(v))throw Error("division by zero");if(I(C))return new H(f,f);if(R(C))return v=Z(S(C),v),new H(S(v.g),S(v.h));if(R(v))return v=Z(C,S(v)),new H(S(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=v;0>=T.l(C);)w=Fe(w),T=Fe(T);var b=X(w,1),A=X(T,1);for(T=X(T,2),w=X(w,2);!I(T);){var E=A.add(T);0>=E.l(C)&&(b=b.add(w),A=E),T=X(T,1),w=X(w,1)}return v=P(C,b.j(v)),new H(b,v)}for(b=f;0<=C.l(v);){for(w=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(w),E=A.j(v);R(E)||0<E.l(C);)w-=T,A=l(w),E=A.j(v);I(A)&&(A=g),b=b.add(A),C=P(C,E)}return new H(b,C)}t.A=function(C){return Z(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)&C.i(T);return new o(w,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)|C.i(T);return new o(w,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)^C.i(T);return new o(w,this.h^C.h)};function Fe(C){for(var v=C.g.length+1,w=[],T=0;T<v;T++)w[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(w,C.h)}function X(C,v){var w=v>>5;v%=32;for(var T=C.g.length-w,b=[],A=0;A<T;A++)b[A]=0<v?C.i(A+w)>>>v|C.i(A+w+1)<<32-v:C.i(A+w);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,vI=hM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Yi=hM.Integer=o}).apply(typeof dM<"u"?dM:typeof self<"u"?self:typeof window<"u"?window:{});var rp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ai={};var II,VW,Sa,wI,Ku,ip,EI,CI,TI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rp=="object"&&rp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var O=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)O[Le-2]=arguments[Le];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let O=0;O<N;O++)u[D+O]=m[O]}else u.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var Fe=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function X(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<w.length;N++)p=w[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=jg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Lr{constructor(){this.h=this.g=null}add(h,p){let m=_c.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var _c=new P(()=>new sF,u=>u.reset());class sF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let yc,vc=!1,jg=new Lr,WT=()=>{let u=a.Promise.resolve(void 0);yc=()=>{u.then(oF)}};var oF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=_c;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}vc=!1};function vi(){this.s=this.s,this.C=this.C}vi.prototype.s=!1,vi.prototype.ma=function(){this.s||(this.s=!0,this.N())},vi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var aF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Ic(u,h){if(Vt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Fe){e:{try{Z(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:cF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ic.aa.h.call(this)}}I(Ic,Vt);var cF={2:"touch",3:"pen",4:"mouse"};Ic.prototype.h=function(){Ic.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),uF=0;function lF(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++uF,this.da=this.fa=!1}function Zl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Jl(u){this.src=u,this.g={},this.h=0}Jl.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=$g(u,h,m,D);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new lF(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function Bg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(Zl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function $g(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var Hg="closure_lm_"+(1e6*Math.random()|0),qg={};function KT(u,h,p,m,D){if(m&&m.once)return YT(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)KT(u,h[N],p,m,D);return null}return p=Kg(p),u&&u[wc]?u.K(h,p,l(m)?!!m.capture:!!m,D):QT(u,h,p,!1,m,D)}function QT(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Le=zg(u);if(Le||(u[Hg]=Le=new Jl(u)),p=Le.add(h,p,m,O,N),p.proxy)return p;if(m=dF(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)aF||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(JT(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function dF(){function u(p){return h.call(u.src,u.listener,p)}let h=hF;return u}function YT(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)YT(u,h[N],p,m,D);return null}return p=Kg(p),u&&u[wc]?u.L(h,p,l(m)?!!m.capture:!!m,D):QT(u,h,p,!0,m,D)}function ZT(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)ZT(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=Kg(p),u&&u[wc]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=$g(N,p,m,D),-1<p&&(Zl(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=zg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=$g(h,p,m,D)),(p=-1<u?h[u]:null)&&Gg(p))}function Gg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[wc])Bg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(JT(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=zg(h))?(Bg(p,u),p.h==0&&(p.src=null,h[Hg]=null)):Zl(u)}}}function JT(u){return u in qg?qg[u]:qg[u]="on"+u}function hF(u,h){if(u.da)u=!0;else{h=new Ic(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&Gg(u),u=p.call(m,h)}return u}function zg(u){return u=u[Hg],u instanceof Jl?u:null}var Wg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kg(u){return typeof u=="function"?u:(u[Wg]||(u[Wg]=function(h){return u.handleEvent(h)}),u[Wg])}function Ut(){vi.call(this),this.i=new Jl(this),this.M=this,this.F=null}I(Ut,vi),Ut.prototype[wc]=!0,Ut.prototype.removeEventListener=function(u,h,p,m){ZT(this,u,h,p,m)};function Jt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Vt(h,u);else if(h instanceof Vt)h.target=h.target||u;else{var D=h;h=new Vt(m,u),T(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var O=h.g=p[N];D=Xl(O,m,!0,h)&&D}if(O=h.g=u,D=Xl(O,m,!0,h)&&D,D=Xl(O,m,!1,h)&&D,p)for(N=0;N<p.length;N++)O=h.g=p[N],D=Xl(O,m,!1,h)&&D}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)Zl(p[m]);delete u.g[h],u.h--}}this.F=null},Ut.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Ut.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Xl(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==p){var Le=O.listener,xt=O.ha||O.src;O.fa&&Bg(u.i,O),D=Le.call(xt,m)!==!1&&D}}return D&&!m.defaultPrevented}function XT(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function eb(u){u.g=XT(()=>{u.g=null,u.i&&(u.i=!1,eb(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class fF extends vi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:eb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ec(u){vi.call(this),this.h=u,this.g={}}I(Ec,vi);var tb=[];function nb(u){X(u.g,function(h,p){this.g.hasOwnProperty(p)&&Gg(h)},u),u.g={}}Ec.prototype.N=function(){Ec.aa.N.call(this),nb(this)},Ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qg=a.JSON.stringify,pF=a.JSON.parse,gF=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Yg(){}Yg.prototype.h=null;function rb(u){return u.h||(u.h=u.i())}function ib(){}var Cc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zg(){Vt.call(this,"d")}I(Zg,Vt);function Jg(){Vt.call(this,"c")}I(Jg,Vt);var us={},sb=null;function ed(){return sb=sb||new Ut}us.La="serverreachability";function ob(u){Vt.call(this,us.La,u)}I(ob,Vt);function Tc(u){let h=ed();Jt(h,new ob(h))}us.STAT_EVENT="statevent";function ab(u,h){Vt.call(this,us.STAT_EVENT,u),this.stat=h}I(ab,Vt);function Xt(u){let h=ed();Jt(h,new ab(h,u))}us.Ma="timingevent";function cb(u,h){Vt.call(this,us.Ma,u),this.size=h}I(cb,Vt);function bc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Dc(){this.g=!0}Dc.prototype.xa=function(){this.g=!1};function mF(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var O="",Le=N.split("&"),xt=0;xt<Le.length;xt++){var Se=Le[xt].split("=");if(1<Se.length){var jt=Se[0];Se=Se[1];var Bt=jt.split("_");O=2<=Bt.length&&Bt[1]=="type"?O+(jt+"="+Se+"&"):O+(jt+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+O})}function _F(u,h,p,m,D,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+O})}function Co(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+vF(u,p)+(m?" "+m:"")})}function yF(u,h){u.info(function(){return"TIMEOUT: "+h})}Dc.prototype.info=function(){};function vF(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return Qg(p)}catch{return h}}var td={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ub={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xg;function nd(){}I(nd,Yg),nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},Xg=new nd;function Ii(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Ec(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new lb}function lb(){this.i=null,this.g="",this.h=!1}var db={},em={};function tm(u,h,p){u.L=1,u.v=od(Vr(h)),u.m=p,u.P=!0,hb(u,null)}function hb(u,h){u.F=Date.now(),rd(u),u.A=Vr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),Db(p.i,"t",m),u.C=0,p=u.j.J,u.h=new lb,u.g=qb(u.j,p?h:null,!u.m),0<u.O&&(u.M=new fF(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(tb[0]=D.toString()),D=tb);for(var N=0;N<D.length;N++){var O=KT(p,D[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Tc(),mF(u.i,u.u,u.A,u.l,u.R,u.m)}Ii.prototype.ca=function(u){u=u.target;let h=this.M;h&&Ur(u)==3?h.j():this.Y(u)},Ii.prototype.Y=function(u){try{if(u==this.g)e:{let Bt=Ur(this.g);var h=this.g.Ba();let Do=this.g.Z();if(!(3>Bt)&&(Bt!=3||this.g&&(this.h.h||this.g.oa()||Pb(this.g)))){this.J||Bt!=4||h==7||(h==8||0>=Do?Tc(3):Tc(2)),nm(this);var p=this.g.Z();this.X=p;t:if(fb(this)){var m=Pb(this.g);u="";var D=m.length,N=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ls(this),Sc(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,_F(this.i,this.u,this.A,this.l,this.R,Bt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Le,xt=this.g;if((Le=xt.g?xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Le)){var Se=Le;break t}}Se=null}if(p=Se)Co(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rm(this,p);else{this.o=!1,this.s=3,Xt(12),ls(this),Sc(this);break e}}if(this.P){p=!0;let Jn;for(;!this.J&&this.C<O.length;)if(Jn=IF(this,O),Jn==em){Bt==4&&(this.s=4,Xt(14),p=!1),Co(this.i,this.l,null,"[Incomplete Response]");break}else if(Jn==db){this.s=4,Xt(15),Co(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else Co(this.i,this.l,Jn,null),rm(this,Jn);if(fb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Bt!=4||O.length!=0||this.h.h||(this.s=1,Xt(16),p=!1),this.o=this.o&&p,!p)Co(this.i,this.l,O,"[Invalid Chunked Response]"),ls(this),Sc(this);else if(0<O.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),um(jt),jt.M=!0,Xt(11))}}else Co(this.i,this.l,O,null),rm(this,O);Bt==4&&ls(this),this.o&&!this.J&&(Bt==4?jb(this.j,this):(this.o=!1,rd(this)))}else LF(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,Xt(12)):(this.s=0,Xt(13)),ls(this),Sc(this)}}}catch{}finally{}};function fb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function IF(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?em:(p=Number(h.substring(p,m)),isNaN(p)?db:(m+=1,m+p>h.length?em:(h=h.slice(m,m+p),u.C=m+p,h)))}Ii.prototype.cancel=function(){this.J=!0,ls(this)};function rd(u){u.S=Date.now()+u.I,pb(u,u.I)}function pb(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bc(g(u.ba,u),h)}function nm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ii.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(yF(this.i,this.A),this.L!=2&&(Tc(),Xt(17)),ls(this),this.s=2,Sc(this)):pb(this,this.S-u)};function Sc(u){u.j.G==0||u.J||jb(u.j,u)}function ls(u){nm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,nb(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function rm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||im(p.h,u))){if(!u.K&&im(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)dd(p),ud(p);else break e;cm(p),Xt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=bc(g(p.Za,p),6e3));if(1>=_b(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else hs(p,11)}else if((u.K||p.g==u)&&dd(p),!U(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Se=D[h];if(p.T=Se[0],Se=Se[1],p.G==2)if(Se[0]=="c"){p.K=Se[1],p.ia=Se[2];let jt=Se[3];jt!=null&&(p.la=jt,p.j.info("VER="+p.la));let Bt=Se[4];Bt!=null&&(p.Aa=Bt,p.j.info("SVER="+p.Aa));let Do=Se[5];Do!=null&&typeof Do=="number"&&0<Do&&(m=1.5*Do,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Jn=u.g;if(Jn){let fd=Jn.g?Jn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fd){var N=m.h;N.g||fd.indexOf("spdy")==-1&&fd.indexOf("quic")==-1&&fd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(sm(N,N.h),N.h=null))}if(m.D){let lm=Jn.g?Jn.g.getResponseHeader("X-HTTP-Session-Id"):null;lm&&(m.ya=lm,Ge(m.I,m.D,lm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=Hb(m,m.J?m.ia:null,m.W),O.K){yb(m.h,O);var Le=O,xt=m.L;xt&&(Le.I=xt),Le.B&&(nm(Le),rd(Le)),m.g=O}else Vb(m);0<p.i.length&&ld(p)}else Se[0]!="stop"&&Se[0]!="close"||hs(p,7);else p.G==3&&(Se[0]=="stop"||Se[0]=="close"?Se[0]=="stop"?hs(p,7):am(p):Se[0]!="noop"&&p.l&&p.l.ta(Se),p.v=0)}}Tc(4)}catch{}}var wF=class{constructor(u,h){this.g=u,this.map=h}};function gb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function _b(u){return u.h?1:u.g?u.g.size:0}function im(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function sm(u,h){u.g?u.g.add(h):u.h=h}function yb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}gb.prototype.cancel=function(){if(this.i=vb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function vb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function EF(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function CF(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function Ib(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=CF(u),m=EF(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var wb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TF(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ds(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ds){this.h=u.h,id(this,u.j),this.o=u.o,this.g=u.g,sd(this,u.s),this.l=u.l;var h=u.i,p=new Nc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Eb(this,p),this.m=u.m}else u&&(h=String(u).match(wb))?(this.h=!1,id(this,h[1]||"",!0),this.o=Ac(h[2]||""),this.g=Ac(h[3]||"",!0),sd(this,h[4]),this.l=Ac(h[5]||"",!0),Eb(this,h[6]||"",!0),this.m=Ac(h[7]||"")):(this.h=!1,this.i=new Nc(null,this.h))}ds.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Rc(h,Cb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Rc(h,Cb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Rc(p,p.charAt(0)=="/"?SF:DF,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Rc(p,RF)),u.join("")};function Vr(u){return new ds(u)}function id(u,h,p){u.j=p?Ac(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function sd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Eb(u,h,p){h instanceof Nc?(u.i=h,NF(u.i,u.h)):(p||(h=Rc(h,AF)),u.i=new Nc(h,u.h))}function Ge(u,h,p){u.i.set(h,p)}function od(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ac(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,bF),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function bF(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Cb=/[#\/\?@]/g,DF=/[#\?:]/g,SF=/[#\?]/g,AF=/[#\?@]/g,RF=/#/g;function Nc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function wi(u){u.g||(u.g=new Map,u.h=0,u.i&&TF(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Nc.prototype,t.add=function(u,h){wi(this),this.i=null,u=To(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Tb(u,h){wi(u),h=To(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function bb(u,h){return wi(u),h=To(u,h),u.g.has(h)}t.forEach=function(u,h){wi(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},t.na=function(){wi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},t.V=function(u){wi(this);let h=[];if(typeof u=="string")bb(this,u)&&(h=h.concat(this.g.get(To(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return wi(this),this.i=null,u=To(this,u),bb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Db(u,h,p){Tb(u,h),0<p.length&&(u.i=null,u.g.set(To(u,h),R(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=N;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function To(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function NF(u,h){h&&!u.j&&(wi(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(Tb(this,m),Db(this,D,p))},u)),u.j=h}function MF(u,h){let p=new Dc;if(a.Image){let m=new Image;m.onload=_(Ei,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(Ei,p,"TestLoadImage: error",!1,h,m),m.onabort=_(Ei,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(Ei,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function xF(u,h){let p=new Dc,m=new AbortController,D=setTimeout(()=>{m.abort(),Ei(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?Ei(p,"TestPingServer: ok",!0,h):Ei(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Ei(p,"TestPingServer: error",!1,h)})}function Ei(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function PF(){this.g=new gF}function kF(u,h,p){let m=p||"";try{Ib(u,function(D,N){let O=D;l(D)&&(O=Qg(D)),h.push(m+N+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function Mc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(Mc,Yg),Mc.prototype.g=function(){return new ad(this.l,this.j)},Mc.prototype.i=function(u){return function(){return u}}({});function ad(u,h){Ut.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(ad,Ut),t=ad.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Pc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pc(this)),this.g&&(this.readyState=3,Pc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?xc(this):Pc(this),this.readyState==3&&Sb(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,xc(this))},t.Qa=function(u){this.g&&(this.response=u,xc(this))},t.ga=function(){this.g&&xc(this)};function xc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Pc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Ab(u){let h="";return X(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function om(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=Ab(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ge(u,h,p))}function rt(u){Ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(rt,Ut);var OF=/^https?$/i,FF=["POST","PUT"];t=rt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xg.g(),this.v=this.o?rb(this.o):rb(Xg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){Rb(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(FF,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of p)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xb(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){Rb(this,N)}};function Rb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Nb(u),cd(u)}function Nb(u){u.A||(u.A=!0,Jt(u,"complete"),Jt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Jt(this,"complete"),Jt(this,"abort"),cd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cd(this,!0)),rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Mb(this):this.bb())},t.bb=function(){Mb(this)};function Mb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ur(u)!=4||u.Z()!=2)){if(u.u&&Ur(u)==4)XT(u.Ea,0,u);else if(Jt(u,"readystatechange"),Ur(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var D=String(u.D).match(wb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!OF.test(D?D.toLowerCase():"")}p=m}if(p)Jt(u,"complete"),Jt(u,"success");else{u.m=6;try{var N=2<Ur(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",Nb(u)}}finally{cd(u)}}}}function cd(u,h){if(u.g){xb(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Jt(u,"ready");try{p.onreadystatechange=m}catch{}}}function xb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ur(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),pF(h)}};function Pb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function LF(u){let h={};u=(u.g&&2<=Ur(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(U(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}C(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function kb(u){this.Aa=0,this.i=[],this.j=new Dc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,u),this.cb=kc("retryDelaySeedMs",1e4,u),this.Wa=kc("forwardChannelMaxRetries",2,u),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new gb(u&&u.concurrentRequestLimit),this.Da=new PF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=kb.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){Xt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=Hb(this,null,this.W),ld(this)};function am(u){if(Ob(u),u.G==3){var h=u.U++,p=Vr(u.I);if(Ge(p,"SID",u.K),Ge(p,"RID",h),Ge(p,"TYPE","terminate"),Oc(u,p),h=new Ii(u,u.j,h),h.L=2,h.v=od(Vr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=qb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),rd(h)}$b(u)}function ud(u){u.g&&(um(u),u.g.cancel(),u.g=null)}function Ob(u){ud(u),u.u&&(a.clearTimeout(u.u),u.u=null),dd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ld(u){if(!mb(u.h)&&!u.s){u.s=!0;var h=u.Ga;yc||WT(),vc||(yc(),vc=!0),jg.add(h,u),u.B=0}}function VF(u,h){return _b(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bc(g(u.Ga,u,h),Bb(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new Ii(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Lb(this,D,h),p=Vr(this.I),Ge(p,"RID",u),Ge(p,"CVER",22),this.D&&Ge(p,"X-HTTP-Session-Id",this.D),Oc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(Ab(N)))+"&"+h:this.m&&om(p,this.m,N)),sm(this.h,D),this.Ua&&Ge(p,"TYPE","init"),this.P?(Ge(p,"$req",h),Ge(p,"SID","null"),D.T=!0,tm(D,p,null)):tm(D,p,h),this.G=2}}else this.G==3&&(u?Fb(this,u):this.i.length==0||mb(this.h)||Fb(this))};function Fb(u,h){var p;h?p=h.l:p=u.U++;let m=Vr(u.I);Ge(m,"SID",u.K),Ge(m,"RID",p),Ge(m,"AID",u.T),Oc(u,m),u.m&&u.o&&om(m,u.m,u.o),p=new Ii(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=Lb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),sm(u.h,p),tm(p,m,h)}function Oc(u,h){u.H&&X(u.H,function(p,m){Ge(h,m,p)}),u.l&&Ib({},function(p,m){Ge(h,m,p)})}function Lb(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let O=["count="+p];N==-1?0<p?(N=D[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Le=!0;for(let xt=0;xt<p;xt++){let Se=D[xt].g,jt=D[xt].map;if(Se-=N,0>Se)N=Math.max(0,D[xt].g-100),Le=!1;else try{kF(jt,O,"req"+Se+"_")}catch{m&&m(jt)}}if(Le){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function Vb(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;yc||WT(),vc||(yc(),vc=!0),jg.add(h,u),u.v=0}}function cm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bc(g(u.Fa,u),Bb(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Ub(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bc(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Xt(10),ud(this),Ub(this))};function um(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ub(u){u.g=new Ii(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Vr(u.qa);Ge(h,"RID","rpc"),Ge(h,"SID",u.K),Ge(h,"AID",u.T),Ge(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(h,"TO",u.ja),Ge(h,"TYPE","xmlhttp"),Oc(u,h),u.m&&u.o&&om(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=od(Vr(h)),p.m=null,p.P=!0,hb(p,u)}t.Za=function(){this.C!=null&&(this.C=null,ud(this),cm(this),Xt(19))};function dd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function jb(u,h){var p=null;if(u.g==h){dd(u),um(u),u.g=null;var m=2}else if(im(u.h,h))p=h.D,yb(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=ed(),Jt(m,new cb(m,p)),ld(u)}else Vb(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&VF(u,h)||m==2&&cm(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:hs(u,5);break;case 4:hs(u,10);break;case 3:hs(u,6);break;default:hs(u,2)}}}function Bb(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function hs(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new ds(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||id(m,"https"),od(m),D?MF(m.toString(),p):xF(m.toString(),p)}else Xt(2);u.G=0,u.l&&u.l.sa(h),$b(u),Ob(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Xt(2)):(this.j.info("Failed to ping google.com"),Xt(1))};function $b(u){if(u.G=0,u.ka=[],u.l){let h=vb(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function Hb(u,h,p){var m=p instanceof ds?Vr(p):new ds(p);if(m.g!="")h&&(m.g=h+"."+m.g),sd(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new ds(null);m&&id(N,m),h&&(N.g=h),D&&sd(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&Ge(m,p,h),Ge(m,"VER",u.la),Oc(u,m),m}function qb(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new rt(new Mc({eb:p})):new rt(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Gb(){}t=Gb.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function hd(){}hd.prototype.g=function(u,h){return new bn(u,h)};function bn(u,h){Ut.call(this),this.g=new kb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!U(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new bo(this)}I(bn,Ut),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){am(this.g)},bn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Qg(u),u=p);h.i.push(new wF(h.Ya++,u)),h.G==3&&ld(h)},bn.prototype.N=function(){this.g.l=null,delete this.j,am(this.g),delete this.g,bn.aa.N.call(this)};function zb(u){Zg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(zb,Zg);function Wb(){Jg.call(this),this.status=1}I(Wb,Jg);function bo(u){this.g=u}I(bo,Gb),bo.prototype.ua=function(){Jt(this.g,"a")},bo.prototype.ta=function(u){Jt(this.g,new zb(u))},bo.prototype.sa=function(u){Jt(this.g,new Wb)},bo.prototype.ra=function(){Jt(this.g,"b")},hd.prototype.createWebChannel=hd.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,TI=ai.createWebChannelTransport=function(){return new hd},CI=ai.getStatEventTarget=function(){return ed()},EI=ai.Event=us,ip=ai.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},td.NO_ERROR=0,td.TIMEOUT=8,td.HTTP_ERROR=6,Ku=ai.ErrorCode=td,ub.COMPLETE="complete",wI=ai.EventType=ub,ib.EventType=Cc,Cc.OPEN="a",Cc.CLOSE="b",Cc.ERROR="c",Cc.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,Sa=ai.WebChannel=ib,VW=ai.FetchXmlHttpFactory=Mc,rt.prototype.listenOnce=rt.prototype.L,rt.prototype.getLastError=rt.prototype.Ka,rt.prototype.getLastErrorCode=rt.prototype.Ba,rt.prototype.getStatus=rt.prototype.Z,rt.prototype.getResponseJson=rt.prototype.Oa,rt.prototype.getResponseText=rt.prototype.oa,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Ha,II=ai.XhrIo=rt}).apply(typeof rp<"u"?rp:typeof self<"u"?self:typeof window<"u"?window:{});var fM="@firebase/firestore";var Nt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Nt.UNAUTHENTICATED=new Nt(null),Nt.GOOGLE_CREDENTIALS=new Nt("google-credentials-uid"),Nt.FIRST_PARTY=new Nt("first-party-uid"),Nt.MOCK_USER=new Nt("mock-user");var za="10.14.0";var no=new _r("@firebase/firestore");function Qu(){return no.logLevel}function $(t,...e){if(no.logLevel<=Ht.DEBUG){let n=e.map(oE);no.debug(`Firestore (${za}): ${t}`,...n)}}function ui(t,...e){if(no.logLevel<=Ht.ERROR){let n=e.map(oE);no.error(`Firestore (${za}): ${t}`,...n)}}function ka(t,...e){if(no.logLevel<=Ht.WARN){let n=e.map(oE);no.warn(`Firestore (${za}): ${t}`,...n)}}function oE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ne(t="Unexpected state"){let e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw ui(e),new Error(e)}function Pe(t,e){t||ne()}function ae(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Nr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var up=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},RI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Nt.UNAUTHENTICATED))}shutdown(){}},NI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},MI=class{constructor(e){this.t=e,this.currentUser=Nt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string"),new up(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string"),new Nt(e)}},xI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Nt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},PI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new xI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Nt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},kI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},OI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Pe(this.o===void 0);let r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string"),this.R=n.token,new kI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function UW(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var lp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=UW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Ae(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var St=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new St(0,0))}static max(){return new t(new St(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var dp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(),r===void 0?r=e.length-n:r>e.length-n&&ne(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},tt=class t extends dp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},jW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Pn=class t extends dp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return jW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t(tt.fromString(e))}static fromName(e){return new t(tt.fromString(e).popFirst(5))}static empty(){return new t(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new tt(e.slice()))}};var FI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};FI.UNKNOWN_ID=-1;function BW(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new St(n+1,0):new St(n,r));return new ro(i,Y.empty(),e)}function $W(t){return new ro(t.readTime,t.key,-1)}var ro=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(le.min(),Y.empty(),-1)}static max(){return new t(le.max(),Y.empty(),-1)}};function HW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}var qW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",LI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gl(t){return y(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==qW)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function GW(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(t){return t.name==="IndexedDbTransactionError"}var KM=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Bp(t){return t==null}function tl(t){return t===0&&1/t==-1/0}function zW(t){return typeof t=="number"&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var WW=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fie=[...WW,"documentOverlays"],KW=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],QW=KW,YW=[...QW,"indexConfiguration","indexState","indexEntries"];var Lie=[...YW,"globals"];function pM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function QM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var at=class t{constructor(e,n){this.comparator=e,this.root=n||Mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ma(this.root,e,this.comparator,!0)}},Ma=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var zt=class t{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hp(this.data.getIterator())}getIteratorFrom(e){return new hp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},hp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Rr=class t{constructor(e){this.fields=e,e.sort(Pn.comparator)}static empty(){return new t([])}unionWith(e){let n=new zt(Pn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var fp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Wt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fp("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Wt.EMPTY_BYTE_STRING=new Wt("");var ZW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(Pe(!!t),typeof t=="string"){let e=0,n=ZW.exec(t);if(Pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Xi(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}function aE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cE(t){let e=t.mapValue.fields.__previous_value__;return aE(e)?cE(e):e}function nl(t){let e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new St(e.seconds,e.nanos)}var VI=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},pp=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var sp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?aE(t)?4:ZM(t)?9007199254740991:YM(t)?10:11:ne()}function kr(t,e){if(t===e)return!0;let n=io(t);if(n!==io(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=li(i.timestampValue),a=li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Xi(i.bytesValue).isEqual(Xi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?tl(o)===tl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(pM(o)!==pM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kr(o[c],a[c])))return!1;return!0}(t,e);default:return ne()}}function rl(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;let n=io(t),r=io(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ye(s.integerValue||s.doubleValue),c=Ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return gM(t.timestampValue,e.timestampValue);case 4:return gM(nl(t),nl(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Xi(s),c=Xi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ae(a[l],c[l]);if(d!==0)return d}return Ae(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ae(Ye(s.latitude),Ye(o.latitude));return a!==0?a:Ae(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mM(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Ae(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:mM(_,I)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===sp.mapValue&&o===sp.mapValue)return 0;if(s===sp.mapValue)return 1;if(o===sp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Ae(c[f],d[f]);if(g!==0)return g;let _=Fa(a[c[f]],l[d[f]]);if(_!==0)return _}return Ae(c.length,d.length)}(t.mapValue,e.mapValue);default:throw ne()}}function gM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);let n=li(t),r=li(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function mM(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Fa(n[i],r[i]);if(s)return s}return Ae(n.length,r.length)}function La(t){return UI(t)}function UI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=UI(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${UI(n.fields[o])}`;return i+"}"}(t.mapValue):ne()}function _M(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jI(t){return!!t&&"integerValue"in t}function uE(t){return!!t&&"arrayValue"in t}function yM(t){return!!t&&"nullValue"in t}function vM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ap(t){return!!t&&"mapValue"in t}function YM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Zu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var cr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ap(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(n)}setAll(e){let n=Pn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Zu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());ap(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Zu(this.value))}};function JM(t){let e=[];return Wa(t.fields,(n,r)=>{let i=new Pn([n]);if(ap(r)){let s=JM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Rr(e)}var ur=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,le.min(),le.min(),le.min(),cr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,le.min(),le.min(),cr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,le.min(),le.min(),cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Va=class{constructor(e,n){this.position=e,this.inclusive=n}};function IM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Fa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function wM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}var Ua=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function JW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var gp=class{},wt=class t extends gp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new $I(e,n,r):n==="array-contains"?new GI(e,r):n==="in"?new zI(e,r):n==="not-in"?new WI(e,r):n==="array-contains-any"?new KI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new HI(e,r):new qI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fa(n,this.value)):n!==null&&io(this.value)===io(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},lr=class t extends gp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return XM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function XM(t){return t.op==="and"}function ex(t){return XW(t)&&XM(t)}function XW(t){for(let e of t.filters)if(e instanceof lr)return!1;return!0}function BI(t){if(t instanceof wt)return t.field.canonicalString()+t.op.toString()+La(t.value);if(ex(t))return t.filters.map(e=>BI(e)).join(",");{let e=t.filters.map(n=>BI(n)).join(",");return`${t.op}(${e})`}}function tx(t,e){return t instanceof wt?function(r,i){return i instanceof wt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof lr?function(r,i){return i instanceof lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&tx(o,i.filters[a]),!0):!1}(t,e):void ne()}function nx(t){return t instanceof wt?function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`}(t):t instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(nx).join(" ,")+"}"}(t):"Filter"}var $I=class extends wt{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},HI=class extends wt{constructor(e,n){super(e,"in",n),this.keys=rx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},qI=class extends wt{constructor(e,n){super(e,"not-in",n),this.keys=rx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function rx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var GI=class extends wt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return uE(n)&&rl(n.arrayValue,this.value)}},zI=class extends wt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&rl(this.value.arrayValue,n)}},WI=class extends wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!rl(this.value.arrayValue,n)}},KI=class extends wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!uE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rl(this.value.arrayValue,r))}};var QI=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function EM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new QI(t,e,n,r,i,s,o)}function lE(t){let e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>BI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>La(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>La(r)).join(",")),e.ue=n}return e.ue}function dE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!JW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!tx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!wM(t.startAt,e.startAt)&&wM(t.endAt,e.endAt)}function YI(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var so=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function e4(t,e,n,r,i,s,o,a){return new so(t,e,n,r,i,s,o,a)}function hE(t){return new so(t)}function CM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ix(t){return t.collectionGroup!==null}function Ju(t){let e=ae(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new zt(Pn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ua(s,r))}),n.has(Pn.keyField().canonicalString())||e.ce.push(new Ua(Pn.keyField(),r))}return e.ce}function xr(t){let e=ae(t);return e.le||(e.le=t4(e,Ju(t))),e.le}function t4(t,e){if(t.limitType==="F")return EM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ua(i.field,s)});let n=t.endAt?new Va(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Va(t.startAt.position,t.startAt.inclusive):null;return EM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function ZI(t,e){let n=t.filters.concat([e]);return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function JI(t,e,n){return new so(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $p(t,e){return dE(xr(t),xr(e))&&t.limitType===e.limitType}function sx(t){return`${lE(xr(t))}|lt:${t.limitType}`}function Aa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>nx(i)).join(", ")}]`),Bp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>La(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>La(i)).join(",")),`Target(${r})`}(xr(t))}; limitType=${t.limitType})`}function Hp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ju(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=IM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ju(r),i)||r.endAt&&!function(o,a,c){let l=IM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ju(r),i))}(t,e)}function n4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ox(t){return(e,n)=>{let r=!1;for(let i of Ju(t)){let s=r4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r4(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Fa(c,l):ne()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var es=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return QM(this.inner)}size(){return this.innerSize}};var i4=new at(Y.comparator);function di(){return i4}var ax=new at(Y.comparator);function Yu(...t){let e=ax;for(let n of t)e=e.insert(n.key,n);return e}function cx(t){let e=ax;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xs(){return Xu()}function ux(){return Xu()}function Xu(){return new es(t=>t.toString(),(t,e)=>t.isEqual(e))}var s4=new at(Y.comparator),o4=new zt(Y.comparator);function ve(...t){let e=o4;for(let n of t)e=e.add(n);return e}var a4=new zt(Ae);function c4(){return a4}function fE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function lx(t){return{integerValue:""+t}}function u4(t,e){return zW(e)?lx(e):fE(t,e)}var ja=class{constructor(){this._=void 0}};function l4(t,e,n){return t instanceof Ba?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&aE(s)&&(s=cE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof oo?hx(t,e):t instanceof ao?fx(t,e):function(i,s){let o=dx(i,s),a=TM(o)+TM(i.Pe);return jI(o)&&jI(i.Pe)?lx(a):fE(i.serializer,a)}(t,e)}function d4(t,e,n){return t instanceof oo?hx(t,e):t instanceof ao?fx(t,e):n}function dx(t,e){return t instanceof $a?function(r){return jI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ba=class extends ja{},oo=class extends ja{constructor(e){super(),this.elements=e}};function hx(t,e){let n=px(e);for(let r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}var ao=class extends ja{constructor(e){super(),this.elements=e}};function fx(t,e){let n=px(e);for(let r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}var $a=class extends ja{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function TM(t){return Ye(t.integerValue||t.doubleValue)}function px(t){return uE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function h4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof oo&&i instanceof oo||r instanceof ao&&i instanceof ao?Oa(r.elements,i.elements,kr):r instanceof $a&&i instanceof $a?kr(r.Pe,i.Pe):r instanceof Ba&&i instanceof Ba}(t.transform,e.transform)}var XI=class{constructor(e,n){this.version=e,this.transformResults=n}},Zi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ha=class{};function gx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new il(t.key,Zi.none()):new co(t.key,t.data,Zi.none());{let n=t.data,r=cr.empty(),i=new zt(Pn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hi(t.key,r,new Rr(i.toArray()),Zi.none())}}function f4(t,e,n){t instanceof co?function(i,s,o){let a=i.value.clone(),c=DM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hi?function(i,s,o){if(!cp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=DM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(mx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function el(t,e,n,r){return t instanceof co?function(s,o,a,c){if(!cp(s.precondition,o))return a;let l=s.value.clone(),d=SM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof hi?function(s,o,a,c){if(!cp(s.precondition,o))return a;let l=SM(s.fieldTransforms,c,o),d=o.data;return d.setAll(mx(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return cp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function p4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=dx(r.transform,i||null);s!=null&&(n===null&&(n=cr.empty()),n.set(r.field,s))}return n||null}function bM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(s,o)=>h4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var co=class extends Ha{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hi=class extends Ha{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function mx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function DM(t,e,n){let r=new Map;Pe(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,d4(o,a,n[i]))}return r}function SM(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,l4(s,o,e))}return r}var il=class extends Ha{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ew=class extends Ha{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&f4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=el(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=el(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ux();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=gx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,r)=>bM(n,r))&&Oa(this.baseMutations,e.baseMutations,(n,r)=>bM(n,r))}},nw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length);let i=function(){return s4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var rw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var iw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var vt,Ce;function g4(t){switch(t){default:return ne();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function _x(t){if(t===void 0)return ui("GRPC error has no .code"),x.UNKNOWN;switch(t){case vt.OK:return x.OK;case vt.CANCELLED:return x.CANCELLED;case vt.UNKNOWN:return x.UNKNOWN;case vt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case vt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case vt.INTERNAL:return x.INTERNAL;case vt.UNAVAILABLE:return x.UNAVAILABLE;case vt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case vt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case vt.NOT_FOUND:return x.NOT_FOUND;case vt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case vt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case vt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case vt.ABORTED:return x.ABORTED;case vt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case vt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case vt.DATA_LOSS:return x.DATA_LOSS;default:return ne()}}(Ce=vt||(vt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var AM=null;function m4(){return new TextEncoder}var _4=new Yi([4294967295,4294967295],0);function RM(t){let e=m4().encode(t),n=new vI;return n.update(e),new Uint8Array(n.digest())}function NM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Yi([n,r],0),new Yi([i,s],0)]}var sw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new eo(`Invalid padding: ${n}`);if(r<0)throw new eo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new eo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new eo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Yi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Yi.fromNumber(r)));return i.compare(_4)===1&&(i=new Yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=RM(e),[r,i]=NM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=RM(e),[r,i]=NM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},eo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mp=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(le.min(),i,new at(Ae),di(),ve())}},sl=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ve(),ve(),ve())}};var xa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},_p=class{constructor(e,n){this.targetId=e,this.me=n}},yp=class{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},vp=class{constructor(){this.fe=0,this.ge=xM(),this.pe=Wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ve(),n=ve(),r=ve();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new sl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=xM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},ow=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=di(),this.qe=MM(),this.Qe=new at(Ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(YI(s))if(r===0){let o=new Y(s.path);this.Ue(n,o,ur.newNoDocument(o,le.min()))}else Pe(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}AM?.et(function(d,f,g,_,I){var R,S,P,U,H,Z;let Fe={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},X=f.unchangedNames;return X&&(Fe.bloomFilter={applied:I===0,hashCount:(R=X?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(U=(P=(S=X?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&U!==void 0?U:0,padding:(Z=(H=X?.bits)===null||H===void 0?void 0:H.padding)!==null&&Z!==void 0?Z:0,mightContain:C=>{var v;return(v=_?.mightContain(C))!==null&&v!==void 0&&v}}),Fe}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Xi(r).toUint8Array()}catch(c){if(c instanceof fp)return ka("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new sw(o,i,s)}catch(c){return ka(c instanceof eo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&YI(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ur.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ve();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new mp(e,n,this.Qe,this.ke,r);return this.ke=di(),this.qe=MM(),this.Qe=new at(Ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new vp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new zt(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function MM(){return new at(Y.comparator)}function xM(){return new at(Y.comparator)}var y4={asc:"ASCENDING",desc:"DESCENDING"},v4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I4={and:"AND",or:"OR"},aw=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function cw(t,e){return t.useProto3Json||Bp(e)?e:{value:e}}function Ip(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function yx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w4(t,e){return Ip(t,e.toTimestamp())}function Pr(t){return Pe(!!t),le.fromTimestamp(function(n){let r=li(n);return new St(r.seconds,r.nanos)}(t))}function pE(t,e){return uw(t,e).canonicalString()}function uw(t,e){let n=function(i){return new tt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function vx(t){let e=tt.fromString(t);return Pe(Tx(e)),e}function lw(t,e){return pE(t.databaseId,e.path)}function bI(t,e){let n=vx(e);if(n.get(1)!==t.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(wx(n))}function Ix(t,e){return pE(t.databaseId,e)}function E4(t){let e=vx(t);return e.length===4?tt.emptyPath():wx(e)}function dw(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function wx(t){return Pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function PM(t,e,n){return{name:lw(t,e),fields:n.value.mapValue.fields}}function C4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Pe(d===void 0||typeof d=="string"),Wt.fromBase64String(d||"")):(Pe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Wt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?x.UNKNOWN:_x(l.code);return new B(d,l.message||"")}(o);n=new yp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=bI(t,r.document.name),s=Pr(r.document.updateTime),o=r.document.createTime?Pr(r.document.createTime):le.min(),a=new cr({mapValue:{fields:r.document.fields}}),c=ur.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new xa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=bI(t,r.document),s=r.readTime?Pr(r.readTime):le.min(),o=ur.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=bI(t,r.document),s=r.removedTargetIds||[];n=new xa([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new iw(i,s),a=r.targetId;n=new _p(a,o)}}return n}function T4(t,e){let n;if(e instanceof co)n={update:PM(t,e.key,e.value)};else if(e instanceof il)n={delete:lw(t,e.key)};else if(e instanceof hi)n={update:PM(t,e.key,e.data),updateMask:P4(e.fieldMask)};else{if(!(e instanceof ew))return ne();n={verify:lw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof oo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ao)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $a)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ne()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:w4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ne()}(t,e.precondition)),n}function b4(t,e){return t&&t.length>0?(Pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Pr(i.updateTime):Pr(s);return o.isEqual(le.min())&&(o=Pr(s)),new XI(o,i.transformResults||[])}(n,e))):[]}function D4(t,e){return{documents:[Ix(t,e.path)]}}function S4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ix(t,i);let s=function(l){if(l.length!==0)return Cx(lr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ra(g.field),direction:N4(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=cw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function A4(t){let e=E4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Pe(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=Ex(f);return g instanceof lr&&ex(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(I){return new Ua(Na(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Bp(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new Va(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,_=f.values||[];return new Va(_,g)}(n.endAt)),e4(e,i,o,s,a,"F",c,l)}function R4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ex(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Na(n.unaryFilter.field);return wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Na(n.unaryFilter.field);return wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Na(n.unaryFilter.field);return wt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Na(n.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(t):t.fieldFilter!==void 0?function(n){return wt.create(Na(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(r=>Ex(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(n.compositeFilter.op))}(t):ne()}function N4(t){return y4[t]}function M4(t){return v4[t]}function x4(t){return I4[t]}function Ra(t){return{fieldPath:t.canonicalString()}}function Na(t){return Pn.fromServerFormat(t.fieldPath)}function Cx(t){return t instanceof wt?function(n){if(n.op==="=="){if(vM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NAN"}};if(yM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(vM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NAN"}};if(yM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(n.field),op:M4(n.op),value:n.value}}}(t):t instanceof lr?function(n){let r=n.getFilters().map(i=>Cx(i));return r.length===1?r[0]:{compositeFilter:{op:x4(n.op),filters:r}}}(t):ne()}function P4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Tx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ol=class t{constructor(e,n,r,i,s=le.min(),o=le.min(),a=Wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var hw=class{constructor(e){this.ct=e}};function k4(t){let e=A4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?JI(e,e.limit,"L"):e}var wp=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ye(e.integerValue));else if("doubleValue"in e){let r=Ye(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),tl(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=li(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Xi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?ZM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):YM(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):ne()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ye(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};wp.vt=new wp;var fw=class{constructor(){this.un=new pw}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(ro.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(ro.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},pw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new zt(tt.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new zt(tt.comparator)).toArray()}};var Uie=new Uint8Array(0);var Ar=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(41943040,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);var al=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var gw=class{constructor(){this.changes=new es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var mw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var _w=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&el(r.mutation,i,Rr.empty(),St.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){let i=Xs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Xs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=di(),o=Xu(),a=function(){return Xu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof hi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),el(d.mutation,l,d.mutation.getFieldMask(),St.now())):o.set(l.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new mw(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Xu(),i=new at((o,a)=>o-a),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||Rr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||ve()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=ux();d.forEach(g=>{if(!s.has(g)){let _=gx(n.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ix(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(Xs()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ve())).next(d=>({batchId:a,changes:cx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=Yu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Yu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(f,g){return new so(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,ur.newInvalidDocument(d)))});let a=Yu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&el(d.mutation,l,Rr.empty(),St.now()),Hp(n,l)&&(a=a.insert(c,l))}),a})}};var yw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:k4(i.bundledQuery),readTime:Pr(i.readTime)}}(n)),k.resolve()}};var vw=class{constructor(){this.overlays=new at(Y.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Xs();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Xs(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new at((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Xs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Xs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rw(n,r));let s=this.Ir.get(n);s===void 0&&(s=ve(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var Iw=class{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var cl=class{constructor(){this.Tr=new zt(It.Er),this.dr=new zt(It.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new It(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new It(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new Y(new tt([])),r=new It(n,e),i=new It(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new Y(new tt([])),r=new It(n,e),i=new It(n,e+1),s=ve();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new It(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},It=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||Ae(e.wr,n.wr)}static Ar(e,n){return Ae(e.wr,n.wr)||Y.comparator(e.key,n.key)}};var ww=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new zt(It.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new tw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new It(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new It(n,0),i=new It(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new zt(Ae);return n.forEach(i=>{let s=new It(i,0),o=new It(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new It(new Y(s),0),a=new zt(Ae);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new It(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new It(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ew=class{constructor(e){this.Mr=e,this.docs=function(){return new at(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let r=di();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ur.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=di(),o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||HW($W(d),r)<=0||(i.has(d.key)||Hp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ne()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Cw(this)}getSize(e){return k.resolve(this.size)}},Cw=class extends gw{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Tw=class{constructor(e){this.persistence=e,this.Nr=new es(n=>lE(n),dE),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cl,this.targetCount=0,this.kr=al.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new al(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var bw=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new KM(0),this.Kr=!1,this.Kr=!0,this.$r=new Iw,this.referenceDelegate=e(this),this.Ur=new Tw(this),this.indexManager=new fw,this.remoteDocumentCache=function(i){return new Ew(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new hw(n),this.Gr=new yw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ww(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new Dw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},Dw=class extends LI{constructor(e){super(),this.currentSequenceNumber=e}},Sw=class t{constructor(e){this.persistence=e,this.Jr=new cl,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Aw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ve(),i=ve();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Rw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Nw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tD()?8:GW($t())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Rw;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Qu()<=Ht.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(Qu()<=Ht.DEBUG&&$("QueryEngine","Query:",Aa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Qu()<=Ht.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):k.resolve())}Yi(e,n){if(CM(n))return k.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=JI(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ve(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,JI(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return CM(n)||i.isEqual(le.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(Qu()<=Ht.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Aa(n)),this.rs(e,o,n,BW(i,-1)).next(a=>a))})}ts(e,n){let r=new zt(ox(e));return n.forEach((i,s)=>{Hp(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Qu()<=Ht.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Aa(n)),this.Ji.getDocumentsMatchingQuery(e,n,ro.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Mw=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new at(Ae),this._s=new es(s=>lE(s),dE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _w(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function O4(t,e,n,r){return new Mw(t,e,n,r)}function bx(t,e){return y(this,null,function*(){let n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ve();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function F4(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),_=k.resolve();return g.forEach(I=>{_=_.next(()=>d.getEntry(c,I)).next(R=>{let S=l.docVersions.get(I);Pe(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Dx(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function L4(t,e){let n=ae(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(Wt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(R,S,P){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let c=di(),l=ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(V4(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(le.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function V4(t,e,n){let r=ve(),i=ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=di();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function U4(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j4(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ol(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function xw(t,e,n){return y(this,null,function*(){let r=ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ml(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function kM(t,e,n){let r=ae(t),i=le.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=ae(c),g=f._s.get(d);return g!==void 0?k.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ve())).next(a=>(B4(r,n4(e),a),{documents:a,Ts:s})))}function B4(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Ep=class{constructor(){this.activeTargetIds=c4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Pw=class{constructor(){this.so=new Ep,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ep,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var kw=class{_o(e){}shutdown(){}};var Cp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var op=null;function DI(){return op===null?op=function(){return 268435456+Math.round(2147483648*Math.random())}():op++,"0x"+op.toString(16)}var $4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ow=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Gt="WebChannelConnection",Fw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=DI(),c=this.xo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>($("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ka("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=$4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=DI();return new Promise((o,a)=>{let c=new II;c.setWithCredentials(!0),c.listenOnce(wI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ku.NO_ERROR:let d=c.getResponseJson();$(Gt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ku.TIMEOUT:$(Gt,`RPC '${e}' ${s} timed out`),a(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:let f=c.getStatus();if($(Gt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let I=function(S){let P=S.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(_.status);a(new B(I,_.message))}else a(new B(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(x.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{$(Gt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);$(Gt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=DI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=TI(),a=CI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");$(Gt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,_=!1,I=new Ow({Io:S=>{_?$(Gt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||($(Gt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),$(Gt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),R=(S,P,U)=>{S.listen(P,H=>{try{U(H)}catch(Z){setTimeout(()=>{throw Z},0)}})};return R(f,Sa.EventType.OPEN,()=>{_||($(Gt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),R(f,Sa.EventType.CLOSE,()=>{_||(_=!0,$(Gt,`RPC '${e}' stream ${i} transport closed`),I.So())}),R(f,Sa.EventType.ERROR,S=>{_||(_=!0,ka(Gt,`RPC '${e}' stream ${i} transport errored:`,S),I.So(new B(x.UNAVAILABLE,"The operation could not be completed")))}),R(f,Sa.EventType.MESSAGE,S=>{var P;if(!_){let U=S.data[0];Pe(!!U);let H=U,Z=H.error||((P=H[0])===null||P===void 0?void 0:P.error);if(Z){$(Gt,`RPC '${e}' stream ${i} received error:`,Z);let Fe=Z.status,X=function(w){let T=vt[w];if(T!==void 0)return _x(T)}(Fe),C=Z.message;X===void 0&&(X=x.INTERNAL,C="Unknown error status: "+Fe+" with message "+Z.message),_=!0,I.So(new B(X,C)),f.close()}else $(Gt,`RPC '${e}' stream ${i} received:`,U),I.bo(U)}}),R(a,EI.STAT_EVENT,S=>{S.stat===ip.PROXY?$(Gt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===ip.NOPROXY&&$(Gt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function SI(){return typeof document<"u"?document:null}function qp(t){return new aw(t,!0)}var Tp=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var bp=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Tp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Lw=class extends bp{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=C4(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Pr(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=dw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=YI(c)?{documents:D4(s,c)}:{query:S4(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=yx(s,o.resumeToken);let l=cw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Ip(s,o.snapshotVersion.toTimestamp());let l=cw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=R4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=dw(this.serializer),n.removeTarget=e,this.a_(n)}},Vw=class extends bp{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=b4(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=dw(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>T4(this.serializer,r))};this.a_(n)}};var Uw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,uw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,uw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},jw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ui(n),this.D_=!1):$("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Bw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){lo(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=ae(c);l.L_.add(4),yield _l(l),l.q_.set("Unknown"),l.L_.delete(4),yield Gp(l)})}(this))}))}),this.q_=new jw(r,i)}};function Gp(t){return y(this,null,function*(){if(lo(t))for(let e of t.B_)yield e(!0)})}function _l(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Sx(t,e){let n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),yE(n)?_E(n):Ka(n).r_()&&mE(n,e))}function gE(t,e){let n=ae(t),r=Ka(n);n.N_.delete(e),r.r_()&&Ax(n,e),n.N_.size===0&&(r.r_()?r.o_():lo(n)&&n.q_.set("Unknown"))}function mE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ka(t).A_(e)}function Ax(t,e){t.Q_.xe(e),Ka(t).R_(e)}function _E(t){t.Q_=new ow({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ka(t).start(),t.q_.v_()}function yE(t){return lo(t)&&!Ka(t).n_()&&t.N_.size>0}function lo(t){return ae(t).L_.size===0}function Rx(t){t.Q_=void 0}function H4(t){return y(this,null,function*(){t.q_.set("Online")})}function q4(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{mE(t,e)})})}function G4(t,e){return y(this,null,function*(){Rx(t),yE(t)?(t.q_.M_(e),_E(t)):t.q_.set("Unknown")})}function z4(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof yp&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Dp(t,r)}else if(e instanceof xa?t.Q_.Ke(e):e instanceof _p?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{let r=yield Dx(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Wt.EMPTY_BYTE_STRING,d.snapshotVersion)),Ax(s,c);let f=new ol(d.target,c,l,d.sequenceNumber);mE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield Dp(t,r)}})}function Dp(t,e,n){return y(this,null,function*(){if(!ml(e))throw e;t.L_.add(1),yield _l(t),t.q_.set("Offline"),n||(n=()=>Dx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Gp(t)}))})}function Nx(t,e){return e().catch(n=>Dp(t,n,e))}function zp(t){return y(this,null,function*(){let e=ae(t),n=ts(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;W4(e);)try{let i=yield U4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,K4(e,i)}catch(i){yield Dp(e,i)}Mx(e)&&xx(e)})}function W4(t){return lo(t)&&t.O_.length<10}function K4(t,e){t.O_.push(e);let n=ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Mx(t){return lo(t)&&!ts(t).n_()&&t.O_.length>0}function xx(t){ts(t).start()}function Q4(t){return y(this,null,function*(){ts(t).p_()})}function Y4(t){return y(this,null,function*(){let e=ts(t);for(let n of t.O_)e.m_(n.mutations)})}function Z4(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=nw.from(r,e,n);yield Nx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield zp(t)})}function J4(t,e){return y(this,null,function*(){e&&ts(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return g4(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();ts(r).s_(),yield Nx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield zp(r)}})}(t,e)),Mx(t)&&xx(t)})}function OM(t,e){return y(this,null,function*(){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=lo(n);n.L_.add(3),yield _l(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Gp(n)})}function X4(t,e){return y(this,null,function*(){let n=ae(t);e?(n.L_.delete(2),yield Gp(n)):e||(n.L_.add(2),yield _l(n),n.q_.set("Unknown"))})}function Ka(t){return t.K_||(t.K_=function(n,r,i){let s=ae(n);return s.w_(),new Lw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:H4.bind(null,t),Ro:q4.bind(null,t),mo:G4.bind(null,t),d_:z4.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),yE(t)?_E(t):t.q_.set("Unknown")):(yield t.K_.stop(),Rx(t))}))),t.K_}function ts(t){return t.U_||(t.U_=function(n,r,i){let s=ae(n);return s.w_(),new Vw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q4.bind(null,t),mo:J4.bind(null,t),f_:Y4.bind(null,t),g_:Z4.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield zp(t)):(yield t.U_.stop(),t.O_.length>0&&($("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var $w=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function vE(t,e){if(ui("AsyncQueue",`${e}: ${t}`),ml(t))return new B(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Sp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=Yu(),this.sortedSet=new at(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Ap=class{constructor(){this.W_=new at(Y.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},qa=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Sp.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$p(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Hw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},qw=class{constructor(){this.queries=FM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=ae(n),s=i.queries;i.queries=FM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new B(x.ABORTED,"Firestore shutting down"))}};function FM(){return new es(t=>sx(t),$p)}function Px(t,e){return y(this,null,function*(){let n=ae(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Hw,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=vE(o,`Initialization of query '${Aa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&IE(n)})}function kx(t,e){return y(this,null,function*(){let n=ae(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function e3(t,e){let n=ae(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&IE(n)}function t3(t,e,n){let r=ae(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function IE(t){t.Y_.forEach(e=>{e.next()})}var Gw,LM;(LM=Gw||(Gw={})).ea="default",LM.Cache="cache";var Rp=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gw.Cache}};var Np=class{constructor(e){this.key=e}},Mp=class{constructor(e){this.key=e}},zw=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ve(),this.mutatedKeys=ve(),this.Aa=ox(e),this.Ra=new Sp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Ap,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=Hp(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;g&&_?g.data.isEqual(_.data)?I!==R&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(_,I){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return R(_)-R(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new qa(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ap,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ve(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Mp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Np(r))}),n}ba(e){this.Ta=e.Ts,this.da=ve();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Ww=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Kw=class{constructor(e){this.key=e,this.va=!1}},Qw=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new es(a=>sx(a),$p),this.Ma=new Map,this.xa=new Set,this.Oa=new at(Y.comparator),this.Na=new Map,this.La=new cl,this.Ba={},this.ka=new Map,this.qa=al.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function n3(t,e,n=!0){return y(this,null,function*(){let r=jx(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Ox(r,e,n,!0),i})}function r3(t,e){return y(this,null,function*(){let n=jx(t);yield Ox(n,e,!0,!1)})}function Ox(t,e,n,r){return y(this,null,function*(){let i=yield j4(t.localStore,xr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield i3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Sx(t.remoteStore,i),a})}function i3(t,e,n,r,i){return y(this,null,function*(){t.Ka=(f,g,_)=>function(R,S,P,U){return y(this,null,function*(){let H=S.view.ma(P);H.ns&&(H=yield kM(R.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,H)));let Z=U&&U.targetChanges.get(S.targetId),Fe=U&&U.targetMismatches.get(S.targetId)!=null,X=S.view.applyChanges(H,R.isPrimaryClient,Z,Fe);return UM(R,S.targetId,X.wa),X.snapshot})}(t,f,g,_);let s=yield kM(t.localStore,e,!0),o=new zw(e,s.Ts),a=o.ma(s.documents),c=sl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);UM(t,n,l.wa);let d=new Ww(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function s3(t,e,n){return y(this,null,function*(){let r=ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!$p(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield xw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&gE(r.remoteStore,i.targetId),Yw(r,i.targetId)}).catch(gl))):(Yw(r,i.targetId),yield xw(r.localStore,i.targetId,!0))})}function o3(t,e){return y(this,null,function*(){let n=ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gE(n.remoteStore,r.targetId))})}function a3(t,e,n){return y(this,null,function*(){let r=p3(t);try{let i=yield function(o,a){let c=ae(o),l=St.now(),d=a.reduce((_,I)=>_.add(I.key),ve()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=di(),R=ve();return c.cs.getEntries(_,d).next(S=>{I=S,I.forEach((P,U)=>{U.isValidDocument()||(R=R.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,I)).next(S=>{f=S;let P=[];for(let U of a){let H=p4(U,f.get(U.key).overlayedDocument);H!=null&&P.push(new hi(U.key,H,JM(H.value.mapValue),Zi.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(_,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:cx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new at(Ae)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield yl(r,i.changes),yield zp(r.remoteStore)}catch(i){let s=vE(i,"Failed to persist write");n.reject(s)}})}function Fx(t,e){return y(this,null,function*(){let n=ae(t);try{let r=yield L4(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Pe(o.va):i.removedDocuments.size>0&&(Pe(o.va),o.va=!1))}),yield yl(n,r,e)}catch(r){yield gl(r)}})}function VM(t,e,n){let r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ae(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&IE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function c3(t,e,n){return y(this,null,function*(){let r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new at(Y.comparator);o=o.insert(s,ur.newNoDocument(s,le.min()));let a=ve().add(s),c=new mp(le.min(),new Map,new at(Ae),o,a);yield Fx(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),wE(r)}else yield xw(r.localStore,e,!1).then(()=>Yw(r,e,n)).catch(gl)})}function u3(t,e){return y(this,null,function*(){let n=ae(t),r=e.batch.batchId;try{let i=yield F4(n.localStore,e);Vx(n,r,null),Lx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield yl(n,i)}catch(i){yield gl(i)}})}function l3(t,e,n){return y(this,null,function*(){let r=ae(t);try{let i=yield function(o,a){let c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Pe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);Vx(r,e,n),Lx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield yl(r,i)}catch(i){yield gl(i)}})}function Lx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Vx(t,e,n){let r=ae(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Yw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Ux(t,r)})}function Ux(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(gE(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),wE(t))}function UM(t,e,n){for(let r of n)r instanceof Np?(t.La.addReference(r.key,e),d3(t,r)):r instanceof Mp?($("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Ux(t,r.key)):ne()}function d3(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||($("SyncEngine","New document in limbo: "+n),t.xa.add(r),wE(t))}function wE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new Y(tt.fromString(e)),r=t.qa.next();t.Na.set(r,new Kw(n)),t.Oa=t.Oa.insert(n,r),Sx(t.remoteStore,new ol(xr(hE(n.path)),r,"TargetPurposeLimboResolution",KM.oe))}}function yl(t,e,n){return y(this,null,function*(){let r=ae(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Aw.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=ae(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>k.forEach(l,g=>k.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>k.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!ml(f))throw f;$("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let _=d.os.get(g),I=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function h3(t,e){return y(this,null,function*(){let n=ae(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield bx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new B(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yl(n,r.hs)}})}function f3(t,e){let n=ae(t),r=n.Na.get(e);if(r&&r.va)return ve().add(r.key);{let i=ve(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function jx(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c3.bind(null,e),e.Ca.d_=e3.bind(null,e.eventManager),e.Ca.$a=t3.bind(null,e.eventManager),e}function p3(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=u3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=l3.bind(null,e),e}var jM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=qp(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return O4(this.persistence,new Nw,n.initialUser,this.serializer)}Ga(n){return new bw(Sw.Zr,this.serializer)}Wa(n){return new Pw}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var g3=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>VM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=h3.bind(null,this.syncEngine),yield X4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new qw}()}createDatastore(n){let r=qp(n.databaseInfo.databaseId),i=function(o){return new Fw(o)}(n.databaseInfo);return function(o,a,c,l){return new Uw(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new Bw(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>VM(this.syncEngine,r,0),function(){return Cp.D()?new Cp:new kw}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,f){let g=new Qw(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=ae(s);$("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield _l(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var xp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Zw=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nt.UNAUTHENTICATED,this.clientId=lp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=vE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function AI(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield bx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function BM(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield m3(t);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>OM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>OM(e.remoteStore,i)),t._onlineComponents=e})}function m3(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield AI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),yield AI(t,new jM)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield AI(t,new jM);return t._offlineComponents})}function Bx(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield BM(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield BM(t,new g3))),t._onlineComponents})}function _3(t){return Bx(t).then(e=>e.syncEngine)}function Jw(t){return y(this,null,function*(){let e=yield Bx(t),n=e.eventManager;return n.onListen=n3.bind(null,e.syncEngine),n.onUnlisten=s3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=r3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=o3.bind(null,e.syncEngine),n})}function y3(t,e,n={}){let r=new Nr;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new xp({next:g=>{d.Za(),o.enqueueAndForget(()=>kx(s,f)),g.fromCache&&c.source==="server"?l.reject(new B(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Rp(a,d,{includeMetadataChanges:!0,_a:!0});return Px(s,f)}(yield Jw(t),t.asyncQueue,e,n,r)})),r.promise}function $x(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var $M=new Map;function Hx(t,e,n){if(!n)throw new B(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v3(t,e,n,r){if(e===!0&&r===!0)throw new B(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function HM(t){if(!Y.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function qM(t){if(Y.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Wp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Wp(t);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Pp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$x((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ga=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RI;switch(r.type){case"firstParty":return new PI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=$M.get(n);r&&($("ComponentProvider","Removing Datastore"),$M.delete(n),r.terminate())}(this),Promise.resolve()}};function qx(t,e,n,r={}){var i;let s=(t=ci(t,Ga))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Nt.MOCK_USER;else{a=Ao(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Nt(l)}t._authCredentials=new NI(new up(a,c))}}var uo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},wn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Ji=class t extends uo{constructor(e,n,r){super(e,n,hE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Gx(t,e,...n){if(t=Ie(t),Hx("collection","path",e),t instanceof Ga){let r=tt.fromString(e,...n);return qM(r),new Ji(t,null,r)}{if(!(t instanceof wn||t instanceof Ji))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(tt.fromString(e,...n));return qM(r),new Ji(t.firestore,null,r)}}function zx(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=lp.newId()),Hx("doc","path",e),t instanceof Ga){let r=tt.fromString(e,...n);return HM(r),new wn(t,null,new Y(r))}{if(!(t instanceof wn||t instanceof Ji))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(tt.fromString(e,...n));return HM(r),new wn(t.firestore,t instanceof Ji?t.converter:null,new Y(r))}}var kp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Tp(this,"async_queue_retry"),this.Vu=()=>{let r=SI();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=SI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=SI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ml(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ui("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=$w.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function GM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var ns=class extends Ga{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new kp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kp(e),this._firestoreClient=void 0,yield e}})}};function Wx(t,e){let n=typeof t=="object"?t:pt(),r=typeof t=="string"?t:e||"(default)",i=ft(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ti("firestore");s&&qx(i,...s)}return i}function EE(t){if(t._terminated)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||I3(t),t._firestoreClient}function I3(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new VI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$x(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Zw(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var ul=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Wt.fromBase64String(e))}catch(n){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ll=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Op=class{constructor(e){this._methodName=e}};var dl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var hl=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var w3=/^__.*__$/,Xw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new co(e,this.data,n,this.fieldTransforms)}};function Kx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne()}}var eE=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Fp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Kx(this.Cu)&&w3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},tE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||qp(e)}Qu(e,n,r,i=!1){return new eE({Cu:e,methodName:n,qu:r,path:Pn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Qx(t){let e=t._freezeSettings(),n=qp(t._databaseId);return new tE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function E3(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Jx("Data must be an object, but it was:",o,r);let a=Yx(r,o),c,l;if(s.merge)c=new Rr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=T3(e,f,n);if(!o.contains(g))throw new B(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);D3(d,g)||d.push(g)}c=new Rr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new Xw(new cr(a),c,l)}function C3(t,e,n,r=!1){return CE(n,t.Qu(r?4:3,e))}function CE(t,e){if(Zx(t=Ie(t)))return Jx("Unsupported field value:",e,t),Yx(t,e);if(t instanceof Op)return function(r,i){if(!Kx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=CE(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return u4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=St.fromDate(r);return{timestampValue:Ip(i.serializer,s)}}if(r instanceof St){let s=new St(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ip(i.serializer,s)}}if(r instanceof dl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ul)return{bytesValue:yx(i.serializer,r._byteString)};if(r instanceof wn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:pE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return fE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Wp(r)}`)}(t,e)}function Yx(t,e){let n={};return QM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(r,i)=>{let s=CE(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Zx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof St||t instanceof dl||t instanceof ul||t instanceof wn||t instanceof Op||t instanceof hl)}function Jx(t,e,n){if(!Zx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Wp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function T3(t,e,n){if((e=Ie(e))instanceof ll)return e._internalPath;if(typeof e=="string")return Xx(t,e);throw Fp("Field path arguments must be of type string or ",t,!1,void 0,n)}var b3=new RegExp("[~\\*/\\[\\]]");function Xx(t,e,n){if(e.search(b3)>=0)throw Fp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ll(...e.split("."))._internalPath}catch{throw Fp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fp(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new B(x.INVALID_ARGUMENT,a+t+c)}function D3(t,e){return t.some(n=>n.isEqual(e))}var Lp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new nE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(TE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},nE=class extends Lp{data(){return super.data()}};function TE(t,e){return typeof e=="string"?Xx(t,e):e instanceof ll?e._internalPath:e._delegate._internalPath}function eP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fl=class{},rE=class extends fl{};function tP(t,e,...n){let r=[];e instanceof fl&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof iE).length,a=s.filter(c=>c instanceof Vp).length;if(o>1||o>0&&a>0)throw new B(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Vp=class t extends rE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return rP(e._query,n),new uo(e.firestore,e.converter,ZI(e._query,n))}_parse(e){let n=Qx(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){WM(f,d);let _=[];for(let I of f)_.push(zM(c,s,I));g={arrayValue:{values:_}}}else g=zM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||WM(f,d),g=C3(a,o,f,d==="in"||d==="not-in");return wt.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function nP(t,e,n){let r=e,i=TE("where",t);return Vp._create(i,r,n)}var iE=class t extends fl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:lr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)rP(o,c),o=ZI(o,c)}(e._query,n),new uo(e.firestore,e.converter,ZI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function zM(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new B(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ix(e)&&n.indexOf("/")!==-1)throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(tt.fromString(n));if(!Y.isDocumentKey(r))throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _M(t,new Y(r))}if(n instanceof wn)return _M(t,n._key);throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wp(n)}.`)}function WM(t,e){if(!Array.isArray(t)||t.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function rP(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var sE=class{convertValue(e,n="none"){switch(io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ye(o.doubleValue));return new hl(s)}convertGeoPoint(e){return new dl(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=cE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){let n=li(e);return new St(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=tt.fromString(e);Pe(Tx(r));let i=new pp(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function S3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var to=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Up=class extends Lp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Pa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(TE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Pa=class extends Up{data(e={}){return super.data(e)}},jp=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new to(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pa(this._firestore,this._userDataWriter,r.key,r,new to(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Pa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new to(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Pa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new to(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:A3(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function A3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}var pl=class extends sE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}};function iP(t){t=ci(t,uo);let e=ci(t.firestore,ns),n=EE(e),r=new pl(e);return eP(t._query),y3(n,t._query).then(i=>new jp(e,r,t,i))}function sP(t,e,n){t=ci(t,wn);let r=ci(t.firestore,ns),i=S3(t.converter,e,n);return aP(r,[E3(Qx(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zi.none())])}function oP(t){return aP(ci(t.firestore,ns),[new il(t._key,Zi.none())])}function bE(t,...e){var n,r,i;t=Ie(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||GM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(GM(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof wn)l=ci(t.firestore,ns),d=hE(t._key.path),c={next:f=>{e[o]&&e[o](R3(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=ci(t,uo);l=ci(f.firestore,ns),d=f._query;let g=new pl(l);c={next:_=>{e[o]&&e[o](new jp(l,g,f,_))},error:e[o+1],complete:e[o+2]},eP(t._query)}return function(g,_,I,R){let S=new xp(R),P=new Rp(_,S,I);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Px(yield Jw(g),P)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return kx(yield Jw(g),P)}))}}(EE(l),d,a,c)}function aP(t,e){return function(r,i){let s=new Nr;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return a3(yield _3(r),i,s)})),s.promise}(EE(t),e)}function R3(t,e,n){let r=n.docs.get(e._key),i=new pl(t);return new Up(t,i,e._key,r,new to(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){za=i})(un),ut(new ct("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new ns(new MI(r.getProvider("auth-internal")),new OI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pp(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),z(fM,"4.7.3",e),z(fM,"4.7.3","esm2017")})();var Kp=function(){return Kp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Kp.apply(this,arguments)};var x3={includeMetadataChanges:!1};function cP(t,e){return e===void 0&&(e=x3),new oe(function(n){var r=bE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function uP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Kp(Kp({},r),(n={},n[e.idField]=t.id,n))}function lP(t){return cP(t,{includeMetadataChanges:!0}).pipe(K(function(e){return e.docs}))}function dP(t,e){return e===void 0&&(e={}),lP(t).pipe(K(function(n){return n.map(function(r){return uP(r,e)})}))}var ho=class{constructor(e){return e}},hP="firestore",DE=class{constructor(){return ht(hP)}};var SE=new V("angularfire2.firestore-instances");function P3(t,e){let n=yt(hP,t,e);return n&&new ho(n)}function k3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ho(r)}}var O3={provide:DE,deps:[[new ie,SE]]},F3={provide:ho,useFactory:P3,deps:[[new ie,SE],We]};function fP(t,...e){return z("angularfire",ze.full,"fst"),$e([F3,O3,{provide:SE,useFactory:k3(t),multi:!0,deps:[ee,ye,ot,et,[new ie,ar],[new ie,In],...e]}])}var rs=De(dP,!0);var is=De(Gx,!0);var pP=De(oP,!0);var Qp=De(zx,!0);var AE=De(iP,!0);var gP=De(Wx,!0);var mP=De(tP,!0);var RE=De(sP,!0);var _P=De(nP,!0);var yP="@firebase/database",vP="1.0.8";var SC="";function L3(t){SC=t}var LE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),At(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:gd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var VE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return mr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var ZP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new LE(e)}}catch{}return new VE},po=ZP("localStorage"),UE=ZP("sessionStorage");var Ja=new _r("@firebase/database"),V3=function(){let t=1;return function(){return t++}}(),JP=function(t){let e=aD(t),n=new iD;n.update(e);let r=n.digest();return Kb.encodeByteArray(r)},Ml=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ml.apply(null,r):typeof r=="object"?e+=At(r):e+=r,e+=" "}return e},go=null,IP=!0,U3=function(t,e){L(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ja.logLevel=Ht.VERBOSE,go=Ja.log.bind(Ja),e&&UE.set("logging_enabled",!0)):typeof t=="function"?go=t:(go=null,UE.remove("logging_enabled"))},Kt=function(...t){if(IP===!0&&(IP=!1,go===null&&UE.get("logging_enabled")===!0&&U3(!0)),go){let e=Ml.apply(null,t);go(e)}},xl=function(t){return function(...e){Kt(t,...e)}},jE=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ml(...t);Ja.error(e)},pi=function(...t){let e=`FIREBASE FATAL ERROR: ${Ml(...t)}`;throw Ja.error(e),new Error(e)},kn=function(...t){let e="FIREBASE WARNING: "+Ml(...t);Ja.warn(e)},j3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&kn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},XP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},B3=function(t){if(pr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ec="[MIN_NAME]",mo="[MAX_NAME]",ac=function(t,e){if(t===e)return 0;if(t===ec||e===mo)return-1;if(e===ec||t===mo)return 1;{let n=wP(t),r=wP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},$3=function(t,e){return t===e?0:t<e?-1:1},vl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+At(e))},AC=function(t){if(typeof t!="object"||t===null)return At(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=At(e[r]),n+=":",n+=AC(t[e[r]]);return n+="}",n},ek=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Yn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var tk=function(t){L(!XP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},H3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},q3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var G3=new RegExp("^-?(0*)\\d{1,10}$"),z3=-2147483648,W3=2147483647,wP=function(t){if(G3.test(t)){let e=Number(t);if(e>=z3&&e<=W3)return e}return null},Pl=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw kn("Exception was thrown by user callback.",n),e},Math.floor(0))}},K3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Tl=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var BE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){kn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var $E=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',kn(e)}},bl=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Zp="5",nk="v",rk="s",ik="r",sk="f",ok=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ak="ls",ck="p",HE="ac",uk="websocket",lk="long_polling";var Jp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=po.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&po.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function Q3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function dk(t,e,n){L(typeof e=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");let r;if(e===uk)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===lk)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Q3(t)&&(n.ns=t.namespace);let i=[];return Yn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var qE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){mr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Zb(this.counters_)}};var NE={},ME={};function RC(t){let e=t.toString();return NE[e]||(NE[e]=new qE),NE[e]}function Y3(t,e){let n=t.toString();return ME[n]||(ME[n]=e()),ME[n]}var GE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var EP="start",Z3="close",J3="pLPCommand",X3="pRTLPCB",hk="id",fk="pw",pk="ser",e9="cb",t9="seg",n9="ts",r9="d",i9="dframe",gk=1870,mk=30,s9=gk-mk,o9=25e3,a9=3e4,zE=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xl(e),this.stats_=RC(n),this.urlFn=c=>(this.appCheckToken&&(c[HE]=this.appCheckToken),dk(n,lk,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new GE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(a9)),B3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new WE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===EP)this.id=a,this.password=c;else if(o===Z3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[EP]="t",r[pk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[e9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[nk]=Zp,this.transportSessionId&&(r[rk]=this.transportSessionId),this.lastSessionId&&(r[ak]=this.lastSessionId),this.applicationId&&(r[ck]=this.applicationId),this.appCheckToken&&(r[HE]=this.appCheckToken),typeof location<"u"&&location.hostname&&ok.test(location.hostname)&&(r[ik]=sk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return pr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!H3()&&!q3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=At(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Qb(n),i=ek(r,s9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(pr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[i9]="t",r[hk]=e,r[fk]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=At(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},WE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,pr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=V3(),window[J3+this.uniqueCallbackIdentifier]=e,window[X3+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Kt("frame writing exception"),a.stack&&Kt(a.stack),Kt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Kt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[hk]=this.myID,e[fk]=this.myPW,e[pk]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mk+r.length<=gk;){let o=this.pendingSegs.shift();r=r+"&"+t9+i+"="+o.seg+"&"+n9+i+"="+o.ts+"&"+r9+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(o9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){pr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var c9=16384,u9=45e3,Xp=null;typeof MozWebSocket<"u"?Xp=MozWebSocket:typeof WebSocket<"u"&&(Xp=WebSocket);var Il=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xl(this.connId),this.stats_=RC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[nk]=Zp,!pr()&&typeof location<"u"&&location.hostname&&ok.test(location.hostname)&&(a[ik]=sk),r&&(a[rk]=r),i&&(a[ak]=i),s&&(a[HE]=s),o&&(a[ck]=o),dk(n,uk,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,po.set("previous_websocket_failure",!0);try{let i;if(pr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Zp}/${SC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Xp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Xp!==null&&!t.forceDisallow_}static previouslyFailed(){return po.isInMemoryStorage||po.get("previous_websocket_failure")===!0}markConnectionHealthy(){po.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=gd(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(L(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=At(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=ek(r,c9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(u9))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),l9=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[zE,Il]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Il&&Il.isAvailable(),i=r&&!Il.previouslyFailed();if(n.webSocketOnly&&(r||kn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Il];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),d9=6e4,h9=5e3,f9=10*1024,p9=100*1024,xE="t",CP="d",g9="s",TP="r",m9="e",bP="o",DP="a",SP="n",AP="p",_9="h",KE=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xl("c:"+this.id+":"),this.transportManager_=new l9(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>p9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>f9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(xE in e){let n=e[xE];n===DP?this.upgradeIfSecondaryHealthy_():n===TP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===bP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=vl("t",e),r=vl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:AP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:DP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:SP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=vl("t",e),r=vl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=vl(xE,e);if(CP in e){let r=e[CP];if(n===_9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===SP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===g9?this.onConnectionShutdown_(r):n===TP?this.onReset_(r):n===m9?jE("Server Error: "+r):n===bP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Zp!==r&&kn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(d9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(h9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:AP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(po.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var eg=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var tg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var ng=class t extends tg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var RP=32,NP=768,Be=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Oe(){return new Be("")}function Te(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function os(t){return t.pieces_.length-t.pieceNum_}function Ke(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Be(t.pieces_,e)}function _k(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function y9(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function yk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function vk(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Be(e,0)}function Mt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Be)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Be(n,0)}function Ee(t){return t.pieceNum_>=t.pieces_.length}function Kn(t,e){let n=Te(t),r=Te(e);if(n===null)return e;if(n===r)return Kn(Ke(t),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ik(t,e){if(os(t)!==os(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function hr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(os(t)>os(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var QE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=yk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=$c(this.parts_[r]);wk(this)}};function v9(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=$c(e),wk(t)}function I9(t){let e=t.parts_.pop();t.byteLength_-=$c(e),t.parts_.length>0&&(t.byteLength_-=1)}function wk(t){if(t.byteLength_>NP)throw new Error(t.errorPrefix_+"has a key path longer than "+NP+" bytes ("+t.byteLength_+").");if(t.parts_.length>RP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+RP+") or object contains a cycle "+fo(t))}function fo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var YE=class t extends tg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}};var wl=1e3,w9=60*5*1e3,MP=30*1e3,E9=1.3,C9=3e4,T9="server_kill",xP=3,NC=(()=>{class t extends eg{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=xl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wl,this.maxReconnectDelay_=w9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!pr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");YE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&ng.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(At(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new hm,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&mr(n,"w")){let i=ps(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();kn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||rD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=nD(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+At(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):jE("Unrecognized action received from server: "+At(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=wl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>C9&&(this.reconnectDelay_=wl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*E9)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){L(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new KE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,I=>{kn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(T9)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&kn(g),l())}}})}interrupt(n){Kt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Kt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Uc(this.interruptReasons_)&&(this.reconnectDelay_=wl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>AC(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Be(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Kt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=xP&&(this.reconnectDelay_=MP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Kt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=xP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";pr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+SC.replace(/\./g,"-")]=1,Fc()?n["framework.cordova"]=1:pd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=ng.getInstance().currentlyOnline();return Uc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),be=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var tc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new be(ec,e),i=new be(ec,n);return this.compare(r,i)!==0}minPost(){return be.MIN}};var Yp,rg=class extends tc{static get __EMPTY_NODE(){return Yp}static set __EMPTY_NODE(e){Yp=e}compare(e,n){return ac(e.name,n.name)}isDefinedOn(e){throw So("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return be.MIN}maxPost(){return new be(mo,Yp)}makePost(e,n){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new be(e,Yp)}toString(){return".key"}},Xa=new rg;var Ya=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},dr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Qn.EMPTY_NODE,this.right=o??Qn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Qn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Qn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),ZE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new dr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Qn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dr.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ya(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ya(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ya(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ya(this.root_,null,this.comparator_,!0,e)}};Qn.EMPTY_NODE=new ZE;function b9(t,e){return ac(t.name,e.name)}function MC(t,e){return ac(t,e)}var JE;function D9(t){JE=t}var Ek=function(t){return typeof t=="number"?"number:"+tk(t):"string:"+t},Ck=function(t){if(t.isLeafNode()){let e=t.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mr(e,".sv"),"Priority must be a string or number.")}else L(t===JE||t.isEmpty(),"priority of unexpected type.");L(t===JE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var PP,nc=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ck(this.priorityNode_)}static set __childrenNodeConstructor(n){PP=n}static get __childrenNodeConstructor(){return PP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ee(n)?this:Te(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Te(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(L(i!==".priority"||os(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Ek(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=tk(this.value_):n+=this.value_,this.lazyHash_=JP(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(L(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return L(s>=0,"Unknown leaf type: "+r),L(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Tk,bk;function S9(t){Tk=t}function A9(t){bk=t}var XE=class extends tc{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ac(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return be.MIN}maxPost(){return new be(mo,new nc("[PRIORITY-POST]",bk))}makePost(e,n){let r=Tk(e);return new be(n,new nc("[PRIORITY-POST]",r))}toString(){return".priority"}},Yt=new XE;var R9=Math.log(2),eC=class{constructor(e){let n=s=>parseInt(Math.log(s)/R9,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ig=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new dr(g,f.node,dr.BLACK,null,null);{let _=parseInt(d/2,10)+c,I=i(c,_),R=i(_+1,l);return f=t[_],g=n?n(f):f,new dr(g,f.node,dr.BLACK,I,R)}},s=function(c){let l=null,d=null,f=t.length,g=function(I,R){let S=f-I,P=f;f-=I;let U=i(S+1,P),H=t[S],Z=n?n(H):H;_(new dr(Z,H.node,R,null,U))},_=function(I){l?(l.left=I,l=I):(d=I,l=I)};for(let I=0;I<c.count;++I){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(I+1));R?g(S,dr.BLACK):(g(S,dr.BLACK),g(S,dr.RED))}return d},o=new eC(t.length),a=s(o);return new Qn(r||e,a)};var PE,Qa={},rc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return L(Qa&&Yt,"ChildrenNode.ts has not been loaded"),PE=PE||new t({".priority":Qa},{".priority":Yt}),PE}get(e){let n=ps(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Qn?n:null}hasIndex(e){return mr(this.indexSet_,e.toString())}addIndex(e,n){L(e!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(be.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ig(r,e.getCompare()):a=Qa;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=jc(this.indexes_,(i,s)=>{let o=ps(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),i===Qa)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(be.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ig(a,o.getCompare())}else return Qa;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new be(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=jc(this.indexes_,i=>{if(i===Qa)return i;{let s=n.get(e.name);return s?i.remove(new be(e.name,s)):i}});return new t(r,this.indexSet_)}};var El,nt=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ck(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return El||(El=new t(new Qn(MC),null,rc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||El}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?El:r}}getChild(n){let r=Te(n);return r===null?this:this.getImmediateChild(r).getChild(Ke(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(L(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new be(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?El:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Te(n);if(i===null)return r;{L(Te(n)!==".priority"||os(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ke(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Yt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Ek(this.getPriority().val())+":"),this.forEachChild(Yt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":JP(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new be(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new be(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new be(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,be.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,be.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===kl?-1:0}withIndex(n){if(n===Xa||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Xa||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Yt),s=r.getIterator(Yt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Xa?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),tC=class extends nt{constructor(){super(new Qn(MC),nt.EMPTY_NODE,rc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nt.EMPTY_NODE}isEmpty(){return!1}},kl=new tC;Object.defineProperties(be,{MIN:{value:new be(ec,nt.EMPTY_NODE)},MAX:{value:new be(mo,kl)}});rg.__EMPTY_NODE=nt.EMPTY_NODE;nc.__childrenNodeConstructor=nt;D9(kl);A9(kl);var N9=!0;function Qt(t,e=null){if(t===null)return nt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new nc(n,Qt(e))}if(!(t instanceof Array)&&N9){let n=[],r=!1;if(Yn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=Qt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new be(o,c)))}}),n.length===0)return nt.EMPTY_NODE;let s=ig(n,b9,o=>o.name,MC);if(r){let o=ig(n,Yt.getCompare());return new nt(s,Qt(e),new rc({".priority":o},{".priority":Yt}))}else return new nt(s,Qt(e),rc.Default)}else{let n=nt.EMPTY_NODE;return Yn(t,(r,i)=>{if(mr(t,r)&&r.substring(0,1)!=="."){let s=Qt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Qt(e))}}S9(Qt);var nC=class extends tc{constructor(e){super(),this.indexPath_=e,L(!Ee(e)&&Te(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ac(e.name,n.name):s}makePost(e,n){let r=Qt(e),i=nt.EMPTY_NODE.updateChild(this.indexPath_,r);return new be(n,i)}maxPost(){let e=nt.EMPTY_NODE.updateChild(this.indexPath_,kl);return new be(mo,e)}toString(){return yk(this.indexPath_,0).join("/")}};var rC=class extends tc{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ac(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return be.MIN}maxPost(){return be.MAX}makePost(e,n){let r=Qt(e);return new be(n,r)}toString(){return".value"}},M9=new rC;function x9(t){return{type:"value",snapshotNode:t}}function P9(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function k9(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function kP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function O9(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var iC=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Yt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ec}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:mo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Yt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function OP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Yt?n="$priority":t.index_===M9?n="$value":t.index_===Xa?n="$key":(L(t.index_ instanceof nC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=At(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=At(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+At(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=At(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+At(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function FP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Yt&&(e.i=t.index_.toString()),e}var sC=class t extends eg{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=OP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),ps(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=OP(e._queryParams),r=e._path.toString(),i=new hm;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+gs(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=gd(a.responseText)}catch{kn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&kn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var oC=class{constructor(){this.rootNode_=nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function sg(){return{value:null,children:new Map}}function Dk(t,e,n){if(Ee(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Te(e);t.children.has(r)||t.children.set(r,sg());let i=t.children.get(r);e=Ke(e),Dk(i,e,n)}}function aC(t,e,n){t.value!==null?n(e,t.value):F9(t,(r,i)=>{let s=new Be(e.toString()+"/"+r);aC(i,s,n)})}function F9(t,e){t.children.forEach((n,r)=>{e(r,n)})}var cC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Yn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var LP=10*1e3,L9=30*1e3,V9=5*60*1e3,uC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new cC(e);let r=LP+(L9-LP)*Math.random();Tl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Yn(e,(i,s)=>{s>0&&mr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Tl(this.reportStats_.bind(this),Math.floor(Math.random()*2*V9))}};var fi=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(fi||{});function Sk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ak(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Rk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var lC=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=fi.ACK_USER_WRITE,this.source=Sk()}operationForChild(e){if(Ee(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Be(e));return new t(Oe(),n,this.revert)}}else return L(Te(this.path)===e,"operationForChild called for unrelated child."),new t(Ke(this.path),this.affectedTree,this.revert)}};var ic=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=fi.OVERWRITE}operationForChild(e){return Ee(this.path)?new t(this.source,Oe(),this.snap.getImmediateChild(e)):new t(this.source,Ke(this.path),this.snap)}};var og=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=fi.MERGE}operationForChild(e){if(Ee(this.path)){let n=this.children.subtree(new Be(e));return n.isEmpty()?null:n.value?new ic(this.source,Oe(),n.value):new t(this.source,Oe(),n)}else return L(Te(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Al=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ee(e))return this.isFullyInitialized()&&!this.filtered_;let n=Te(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function U9(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(O9(o.childName,o.snapshotNode))}),Cl(t,i,"child_removed",e,r,n),Cl(t,i,"child_added",e,r,n),Cl(t,i,"child_moved",s,r,n),Cl(t,i,"child_changed",e,r,n),Cl(t,i,"value",e,r,n),i}function Cl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>B9(t,a,c)),o.forEach(a=>{let c=j9(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function j9(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function B9(t,e,n){if(e.childName==null||n.childName==null)throw So("Should only compare child_ events.");let r=new be(e.childName,e.snapshotNode),i=new be(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Nk(t,e){return{eventCache:t,serverCache:e}}function Dl(t,e,n,r){return Nk(new Al(e,n,r),t.serverCache)}function Mk(t,e,n,r){return Nk(t.eventCache,new Al(e,n,r))}function dC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function _o(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var kE,$9=()=>(kE||(kE=new Qn($3)),kE),En=class t{constructor(e,n=$9()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Yn(e,(r,i)=>{n=n.set(new Be(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Oe(),value:this.value};if(Ee(e))return null;{let r=Te(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ke(e),n);return s!=null?{path:Mt(new Be(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ee(e))return this;{let n=Te(e),r=this.children.get(n);return r!==null?r.subtree(Ke(e)):new t(null)}}set(e,n){if(Ee(e))return new t(n,this.children);{let r=Te(e),s=(this.children.get(r)||new t(null)).set(Ke(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(Ee(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Te(e),r=this.children.get(n);if(r){let i=r.remove(Ke(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Ee(e))return this.value;{let n=Te(e),r=this.children.get(n);return r?r.get(Ke(e)):null}}setTree(e,n){if(Ee(e))return n;{let r=Te(e),s=(this.children.get(r)||new t(null)).setTree(Ke(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Oe(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Mt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Oe(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ee(e))return null;{let s=Te(e),o=this.children.get(s);return o?o.findOnPath_(Ke(e),Mt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Oe(),n)}foreachOnPath_(e,n,r){if(Ee(e))return this;{this.value&&r(n,this.value);let i=Te(e),s=this.children.get(i);return s?s.foreachOnPath_(Ke(e),Mt(n,i),r):new t(null)}}foreach(e){this.foreach_(Oe(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Mt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var fr=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new En(null))}};function Sl(t,e,n){if(Ee(e))return new fr(new En(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Kn(i,e);return s=s.updateChild(o,n),new fr(t.writeTree_.set(i,s))}else{let i=new En(n),s=t.writeTree_.setTree(e,i);return new fr(s)}}}function VP(t,e,n){let r=t;return Yn(n,(i,s)=>{r=Sl(r,Mt(e,i),s)}),r}function UP(t,e){if(Ee(e))return fr.empty();{let n=t.writeTree_.setTree(e,new En(null));return new fr(n)}}function hC(t,e){return yo(t,e)!=null}function yo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Kn(n.path,e)):null}function jP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Yt,(r,i)=>{e.push(new be(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new be(r,i.value))}),e}function ss(t,e){if(Ee(e))return t;{let n=yo(t,e);return n!=null?new fr(new En(n)):new fr(t.writeTree_.subtree(e))}}function fC(t){return t.writeTree_.isEmpty()}function sc(t,e){return xk(Oe(),t.writeTree_,e)}function xk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=xk(Mt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Mt(t,".priority"),r)),n}}function Pk(t,e){return Vk(e,t)}function H9(t,e,n,r,i){L(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Sl(t.visibleWrites,e,n)),t.lastWriteId=r}function q9(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function G9(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);L(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&z9(a,r.path)?i=!1:hr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return W9(t),!0;if(r.snap)t.visibleWrites=UP(t.visibleWrites,r.path);else{let a=r.children;Yn(a,c=>{t.visibleWrites=UP(t.visibleWrites,Mt(r.path,c))})}return!0}else return!1}function z9(t,e){if(t.snap)return hr(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&hr(Mt(t.path,n),e))return!0;return!1}function W9(t){t.visibleWrites=kk(t.allWrites,K9,Oe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function K9(t){return t.visible}function kk(t,e,n){let r=fr.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)hr(n,o)?(a=Kn(n,o),r=Sl(r,a,s.snap)):hr(o,n)&&(a=Kn(o,n),r=Sl(r,Oe(),s.snap.getChild(a)));else if(s.children){if(hr(n,o))a=Kn(n,o),r=VP(r,a,s.children);else if(hr(o,n))if(a=Kn(o,n),Ee(a))r=VP(r,Oe(),s.children);else{let c=ps(s.children,Te(a));if(c){let l=c.getChild(Ke(a));r=Sl(r,Oe(),l)}}}else throw So("WriteRecord should have .snap or .children")}}return r}function Ok(t,e,n,r,i){if(!r&&!i){let s=yo(t.visibleWrites,e);if(s!=null)return s;{let o=ss(t.visibleWrites,e);if(fC(o))return n;if(n==null&&!hC(o,Oe()))return null;{let a=n||nt.EMPTY_NODE;return sc(o,a)}}}else{let s=ss(t.visibleWrites,e);if(!i&&fC(s))return n;if(!i&&n==null&&!hC(s,Oe()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(hr(l.path,e)||hr(e,l.path))},a=kk(t.allWrites,o,e),c=n||nt.EMPTY_NODE;return sc(a,c)}}}function Q9(t,e,n){let r=nt.EMPTY_NODE,i=yo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Yt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=ss(t.visibleWrites,e);return n.forEachChild(Yt,(o,a)=>{let c=sc(ss(s,new Be(o)),a);r=r.updateImmediateChild(o,c)}),jP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ss(t.visibleWrites,e);return jP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Y9(t,e,n,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Mt(e,n);if(hC(t.visibleWrites,s))return null;{let o=ss(t.visibleWrites,s);return fC(o)?i.getChild(n):sc(o,i.getChild(n))}}function Z9(t,e,n,r){let i=Mt(e,n),s=yo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=ss(t.visibleWrites,i);return sc(o,r.getNode().getImmediateChild(n))}else return null}function J9(t,e){return yo(t.visibleWrites,e)}function X9(t,e,n,r,i,s,o){let a,c=ss(t.visibleWrites,e),l=yo(c,Oe());if(l!=null)a=l;else if(n!=null)a=sc(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)f(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function e6(){return{visibleWrites:fr.empty(),allWrites:[],lastWriteId:-1}}function pC(t,e,n,r){return Ok(t.writeTree,t.treePath,e,n,r)}function Fk(t,e){return Q9(t.writeTree,t.treePath,e)}function BP(t,e,n,r){return Y9(t.writeTree,t.treePath,e,n,r)}function ag(t,e){return J9(t.writeTree,Mt(t.treePath,e))}function t6(t,e,n,r,i,s){return X9(t.writeTree,t.treePath,e,n,r,i,s)}function xC(t,e,n){return Z9(t.writeTree,t.treePath,e,n)}function Lk(t,e){return Vk(Mt(t.treePath,e),t.writeTree)}function Vk(t,e){return{treePath:t,writeTree:e}}var gC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,kP(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,k9(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,P9(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,kP(r,e.snapshotNode,i.oldSnap));else throw So("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var mC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Uk=new mC,Rl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Al(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return xC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:_o(this.viewCache_),s=t6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function n6(t,e){L(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function r6(t,e,n,r,i){let s=new gC,o,a;if(n.type===fi.OVERWRITE){let l=n;l.source.fromUser?o=_C(t,e,l.path,l.snap,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ee(l.path),o=cg(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===fi.MERGE){let l=n;l.source.fromUser?o=s6(t,e,l.path,l.children,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=yC(t,e,l.path,l.children,r,i,a,s))}else if(n.type===fi.ACK_USER_WRITE){let l=n;l.revert?o=c6(t,e,l.path,r,i,s):o=o6(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===fi.LISTEN_COMPLETE)o=a6(t,e,n.path,r,s);else throw So("Unknown operation type: "+n.type);let c=s.getChanges();return i6(e,o,c),{viewCache:o,changes:c}}function i6(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=dC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(x9(dC(e)))}}function jk(t,e,n,r,i,s){let o=e.eventCache;if(ag(r,n)!=null)return e;{let a,c;if(Ee(n))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=_o(e),d=l instanceof nt?l:nt.EMPTY_NODE,f=Fk(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=pC(r,_o(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Te(n);if(l===".priority"){L(os(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=BP(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=Ke(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=BP(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=xC(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Dl(e,a,o.isFullyInitialized()||Ee(n),t.filter.filtersNodes())}}function cg(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(Ee(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=Te(n);if(!c.isCompleteForPath(n)&&os(n)>1)return e;let I=Ke(n),S=c.getNode().getImmediateChild(_).updateChild(I,r);_===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),_,S,I,Uk,null)}let f=Mk(e,l,c.isFullyInitialized()||Ee(n),d.filtersNodes()),g=new Rl(i,f,s);return jk(t,f,n,i,g,a)}function _C(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new Rl(i,e,s);if(Ee(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Dl(e,l,!0,t.filter.filtersNodes());else{let f=Te(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Dl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=Ke(n),_=a.getNode().getImmediateChild(f),I;if(Ee(g))I=r;else{let R=d.getCompleteChild(f);R!=null?_k(g)===".priority"&&R.getChild(vk(g)).isEmpty()?I=R:I=R.updateChild(g,r):I=nt.EMPTY_NODE}if(_.equals(I))c=e;else{let R=t.filter.updateChild(a.getNode(),f,I,g,d,o);c=Dl(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function $P(t,e){return t.eventCache.isCompleteForChild(e)}function s6(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=Mt(n,c);$P(e,Te(d))&&(a=_C(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=Mt(n,c);$P(e,Te(d))||(a=_C(t,a,d,l,i,s,o))}),a}function HP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function yC(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ee(n)?l=r:l=new En(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let _=e.serverCache.getNode().getImmediateChild(f),I=HP(t,_,g);c=cg(t,c,new Be(f),I,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let _=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!_){let I=e.serverCache.getNode().getImmediateChild(f),R=HP(t,I,g);c=cg(t,c,new Be(f),R,i,s,o,a)}}),c}function o6(t,e,n,r,i,s,o){if(ag(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ee(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return cg(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Ee(n)){let l=new En(null);return c.getNode().forEachChild(Xa,(d,f)=>{l=l.set(new Be(d),f)}),yC(t,e,n,l,i,s,a,o)}else return e}else{let l=new En(null);return r.foreach((d,f)=>{let g=Mt(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),yC(t,e,n,l,i,s,a,o)}}function a6(t,e,n,r,i){let s=e.serverCache,o=Mk(e,s.getNode(),s.isFullyInitialized()||Ee(n),s.isFiltered());return jk(t,o,n,r,Uk,i)}function c6(t,e,n,r,i,s){let o;if(ag(r,n)!=null)return e;{let a=new Rl(r,e,i),c=e.eventCache.getNode(),l;if(Ee(n)||Te(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=pC(r,_o(e));else{let f=e.serverCache.getNode();L(f instanceof nt,"serverChildren would be complete if leaf node"),d=Fk(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=Te(n),f=xC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,Ke(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,nt.EMPTY_NODE,Ke(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=pC(r,_o(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||ag(r,Oe())!=null,Dl(e,l,o,t.filter.filtersNodes())}}function u6(t,e){let n=_o(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ee(e)&&!n.getImmediateChild(Te(e)).isEmpty())?n.getChild(e):null}function qP(t,e,n,r){e.type===fi.MERGE&&e.source.queryId!==null&&(L(_o(t.viewCache_),"We should always have a full cache before handling merges"),L(dC(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=r6(t.processor_,i,e,n,r);return n6(t.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,l6(t,s.changes,s.viewCache.eventCache.getNode(),null)}function l6(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return U9(t.eventGenerator_,e,n,i)}var GP;function d6(t){L(!GP,"__referenceConstructor has already been defined"),GP=t}function PC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return L(s!=null,"SyncTree gave us an op for an invalid query."),qP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(qP(o,e,n,r));return s}}function kC(t,e){let n=null;for(let r of t.views.values())n=n||u6(r,e);return n}var zP;function h6(t){L(!zP,"__referenceConstructor has already been defined"),zP=t}var ug=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new En(null),this.pendingWriteTree_=e6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function f6(t,e,n,r,i){return H9(t.pendingWriteTree_,e,n,r,i),i?dg(t,new ic(Sk(),e,n)):[]}function Za(t,e,n=!1){let r=q9(t.pendingWriteTree_,e);if(G9(t.pendingWriteTree_,e)){let s=new En(null);return r.snap!=null?s=s.set(Oe(),!0):Yn(r.children,o=>{s=s.set(new Be(o),!0)}),dg(t,new lC(r.path,s,n))}else return[]}function lg(t,e,n){return dg(t,new ic(Ak(),e,n))}function p6(t,e,n){let r=En.fromObject(n);return dg(t,new og(Ak(),e,r))}function g6(t,e,n,r){let i=qk(t,r);if(i!=null){let s=Gk(i),o=s.path,a=s.queryId,c=Kn(o,e),l=new ic(Rk(a),c,n);return zk(t,o,l)}else return[]}function m6(t,e,n,r){let i=qk(t,r);if(i){let s=Gk(i),o=s.path,a=s.queryId,c=Kn(o,e),l=En.fromObject(n),d=new og(Rk(a),c,l);return zk(t,o,d)}else return[]}function Bk(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Kn(o,e),l=kC(a,c);if(l)return l});return Ok(i,e,s,n,!0)}function dg(t,e){return $k(e,t.syncPointTree_,null,Pk(t.pendingWriteTree_,Oe()))}function $k(t,e,n,r){if(Ee(t.path))return Hk(t,e,n,r);{let i=e.get(Oe());n==null&&i!=null&&(n=kC(i,Oe()));let s=[],o=Te(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=Lk(r,o);s=s.concat($k(a,c,l,d))}return i&&(s=s.concat(PC(i,t,r,n))),s}}function Hk(t,e,n,r){let i=e.get(Oe());n==null&&i!=null&&(n=kC(i,Oe()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=Lk(r,o),d=t.operationForChild(o);d&&(s=s.concat(Hk(d,a,c,l)))}),i&&(s=s.concat(PC(i,t,r,n))),s}function qk(t,e){return t.tagToQueryMap.get(e)}function Gk(t){let e=t.indexOf("$");return L(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Be(t.substr(0,e))}}function zk(t,e,n){let r=t.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");let i=Pk(t.pendingWriteTree_,e);return PC(r,n,i,null)}var vC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},IC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Mt(this.path_,e);return new t(this.syncTree_,n)}node(){return Bk(this.syncTree_,this.path_)}},_6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},WP=function(t,e,n){if(!t||typeof t!="object")return t;if(L(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return y6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return v6(t[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},y6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+t)}},v6=function(t,e,n){t.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);let i=e.node();if(L(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},I6=function(t,e,n,r){return OC(e,new IC(n,t),r)},w6=function(t,e,n){return OC(t,new vC(e),n)};function OC(t,e,n){let r=t.getPriority().val(),i=WP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=WP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new nc(a,Qt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new nc(i))),o.forEachChild(Yt,(a,c)=>{let l=OC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Nl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function FC(t,e){let n=e instanceof Be?e:new Be(e),r=t,i=Te(n);for(;i!==null;){let s=ps(r.node.children,i)||{children:{},childCount:0};r=new Nl(i,r,s),n=Ke(n),i=Te(n)}return r}function cc(t){return t.node.value}function Wk(t,e){t.node.value=e,wC(t)}function Kk(t){return t.node.childCount>0}function E6(t){return cc(t)===void 0&&!Kk(t)}function hg(t,e){Yn(t.node.children,(n,r)=>{e(new Nl(n,t,r))})}function Qk(t,e,n,r){n&&!r&&e(t),hg(t,i=>{Qk(i,e,!0,r)}),n&&r&&e(t)}function C6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ol(t){return new Be(t.parent===null?t.name:Ol(t.parent)+"/"+t.name)}function wC(t){t.parent!==null&&T6(t.parent,t.name,t)}function T6(t,e,n){let r=E6(n),i=mr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,wC(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,wC(t))}var b6=/[\[\].#$\/\u0000-\u001F\u007F]/,D6=/[\[\].#$\u0000-\u001F\u007F]/,OE=10*1024*1024,Yk=function(t){return typeof t=="string"&&t.length!==0&&!b6.test(t)},S6=function(t){return typeof t=="string"&&t.length!==0&&!D6.test(t)},A6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),S6(t)};var Zk=function(t,e,n){let r=n instanceof Be?new QE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+fo(r));if(typeof e=="function")throw new Error(t+"contains a function "+fo(r)+" with contents = "+e.toString());if(XP(e))throw new Error(t+"contains "+e.toString()+" "+fo(r));if(typeof e=="string"&&e.length>OE/3&&$c(e)>OE)throw new Error(t+"contains a string greater than "+OE+" utf8 bytes "+fo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Yn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Yk(o)))throw new Error(t+" contains an invalid key ("+o+") "+fo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);v9(r,o),Zk(t,a,r),I9(r)}),i&&s)throw new Error(t+' contains ".value" child '+fo(r)+" in addition to actual children.")}};var R6=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Yk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!A6(n))throw new Error(oD(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var EC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function N6(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Ik(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function vo(t,e,n){N6(t,n),M6(t,r=>hr(r,e)||hr(e,r))}function M6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(x6(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function x6(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();go&&Kt("event: "+n.toString()),Pl(r)}}}var P6="repo_interrupt",k6=25,CC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sg(),this.transactionQueueTree_=new Nl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function O6(t,e,n){if(t.stats_=RC(t.repoInfo_),t.forceRestClient_||K3())t.server_=new sC(t.repoInfo_,(r,i,s,o)=>{KP(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>QP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{At(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new NC(t.repoInfo_,e,(r,i,s,o)=>{KP(t,r,i,s,o)},r=>{QP(t,r)},r=>{L6(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=Y3(t.repoInfo_,()=>new uC(t.stats_,t.server_)),t.infoData_=new oC,t.infoSyncTree_=new ug({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=lg(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),LC(t,"connected",!1),t.serverSyncTree_=new ug({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);vo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function F6(t){let n=t.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Jk(t){return _6({timestamp:F6(t)})}function KP(t,e,n,r,i){t.dataUpdateCount++;let s=new Be(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=jc(n,l=>Qt(l));o=m6(t.serverSyncTree_,s,c,i)}else{let c=Qt(n);o=g6(t.serverSyncTree_,s,c,i)}else if(r){let c=jc(n,l=>Qt(l));o=p6(t.serverSyncTree_,s,c)}else{let c=Qt(n);o=lg(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=UC(t,s)),vo(t.eventQueue_,a,o)}function QP(t,e){LC(t,"connected",e),e===!1&&U6(t)}function L6(t,e){Yn(e,(n,r)=>{LC(t,n,r)})}function LC(t,e,n){let r=new Be("/.info/"+e),i=Qt(n);t.infoData_.updateSnapshot(r,i);let s=lg(t.infoSyncTree_,r,i);vo(t.eventQueue_,r,s)}function V6(t){return t.nextWriteId_++}function U6(t){Xk(t,"onDisconnectEvents");let e=Jk(t),n=sg();aC(t.onDisconnect_,Oe(),(i,s)=>{let o=I6(i,s,t.serverSyncTree_,e);Dk(n,i,o)});let r=[];aC(n,Oe(),(i,s)=>{r=r.concat(lg(t.serverSyncTree_,i,s));let o=H6(t,i);UC(t,o)}),t.onDisconnect_=sg(),vo(t.eventQueue_,Oe(),r)}function j6(t){t.persistentConnection_&&t.persistentConnection_.interrupt(P6)}function Xk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Kt(n,...e)}function eO(t,e,n){return Bk(t.serverSyncTree_,e,n)||nt.EMPTY_NODE}function VC(t,e=t.transactionQueueTree_){if(e||fg(t,e),cc(e)){let n=nO(t,e);L(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&B6(t,Ol(e),n)}else Kk(e)&&hg(e,n=>{VC(t,n)})}function B6(t,e,n){let r=n.map(l=>l.currentWriteId),i=eO(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];L(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Kn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Xk(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(Za(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();fg(t,FC(t.transactionQueueTree_,e)),VC(t,t.transactionQueueTree_),vo(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Pl(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{kn("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}UC(t,e)}},o)}function UC(t,e){let n=tO(t,e),r=Ol(n),i=nO(t,n);return $6(t,i,r),r}function $6(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Kn(n,c.path),d=!1,f;if(L(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Za(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=k6)d=!0,f="maxretry",i=i.concat(Za(t.serverSyncTree_,c.currentWriteId,!0));else{let g=eO(t,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){Zk("transaction failed: Data returned ",_,c.path);let I=Qt(_);typeof _=="object"&&_!=null&&mr(_,".priority")||(I=I.updatePriority(g.getPriority()));let S=c.currentWriteId,P=Jk(t),U=w6(I,g,P);c.currentOutputSnapshotRaw=I,c.currentOutputSnapshotResolved=U,c.currentWriteId=V6(t),o.splice(o.indexOf(S),1),i=i.concat(f6(t.serverSyncTree_,c.path,U,c.currentWriteId,c.applyLocally)),i=i.concat(Za(t.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(Za(t.serverSyncTree_,c.currentWriteId,!0))}vo(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}fg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Pl(r[a]);VC(t,t.transactionQueueTree_)}function tO(t,e){let n,r=t.transactionQueueTree_;for(n=Te(e);n!==null&&cc(r)===void 0;)r=FC(r,n),e=Ke(e),n=Te(e);return r}function nO(t,e){let n=[];return rO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function rO(t,e,n){let r=cc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);hg(e,i=>{rO(t,i,n)})}function fg(t,e){let n=cc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Wk(e,n.length>0?n:void 0)}hg(e,r=>{fg(t,r)})}function H6(t,e){let n=Ol(tO(t,e)),r=FC(t.transactionQueueTree_,e);return C6(r,i=>{FE(t,i)}),FE(t,r),Qk(r,i=>{FE(t,i)}),n}function FE(t,e){let n=cc(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(L(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Za(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Wk(e,void 0):n.length=s+1,vo(t.eventQueue_,Ol(e),i);for(let o=0;o<r.length;o++)Pl(r[o])}}function q6(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function G6(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):kn(`Invalid query segment '${n}' in query '${t}'`)}return e}var YP=function(t,e){let n=z6(t),r=n.namespace;n.domain==="firebase.com"&&pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||j3();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Be(n.pathString)}},z6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=q6(t.substring(d,f)));let g=G6(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{let I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),n=e.substring(I+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var TC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ee(this._path)?null:_k(this._path)}get ref(){return new oc(this._repo,this._path)}get _queryIdentifier(){let e=FP(this._queryParams),n=AC(e);return n==="{}"?"default":n}get _queryObject(){return FP(this._queryParams)}isEqual(e){if(e=Ie(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Ik(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+y9(this._path)}};var oc=class t extends TC{constructor(e,n){super(e,n,new iC,!1)}get parent(){let e=vk(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};d6(oc);h6(oc);var W6="FIREBASE_DATABASE_EMULATOR_HOST",bC={},K6=!1;function Q6(t,e,n,r){t.repoInfo_=new Jp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Y6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=YP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[W6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=YP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new bl(bl.OWNER):new $E(t.name,t.options,e);R6("Invalid Firebase Database URL",o),Ee(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=J6(a,t,d,new BE(t.name,n));return new DC(f,t)}function Z6(t,e){let n=bC[e];(!n||n[t.key]!==t)&&pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),j6(t),delete n[t.key]}function J6(t,e,n,r){let i=bC[e.name];i||(i={},bC[e.name]=i);let s=i[t.toURLString()];return s&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new CC(t,K6,n,r),i[t.toURLString()]=s,s}var DC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(O6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new oc(this._repo,Oe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Z6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pi("Cannot call "+e+" on a deleted database.")}};function iO(t=pt(),e){let n=ft(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Ti("database");r&&sO(n,...r)}return n}function sO(t,e,n,r={}){t=Ie(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new bl(bl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Ao(r.mockUserToken,t.app.options.projectId);s=new bl(o)}Q6(i,e,n,s)}function X6(t){L3(un),ut(new ct("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Y6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),z(yP,vP,t),z(yP,vP,"esm2017")}NC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};NC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};X6();var Fl=class{constructor(e){return e}},oO="database",jC=class{constructor(){return ht(oO)}};var BC=new V("angularfire2.database-instances");function e5(t,e){let n=yt(oO,t,e);return n&&new Fl(n)}function t5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Fl(r)}}var n5={provide:jC,deps:[[new ie,BC]]},r5={provide:Fl,useFactory:e5,deps:[[new ie,BC],We]};function aO(t,...e){return z("angularfire",ze.full,"rtdb"),$e([r5,n5,{provide:BC,useFactory:t5(t),multi:!0,deps:[ee,ye,ot,et,[new ie,ar],[new ie,In],...e]}])}var cO=De(iO,!0);var dO="functions";var $C=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return y(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var HC="us-central1";var qC=class{constructor(e,n,r,i,s=HC,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new $C(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=HC}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function i5(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var uO="@firebase/functions",lO="0.11.8";var s5="auth-internal",o5="app-check-internal",a5="messaging-internal";function c5(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(s5),a=r.getProvider(a5),c=r.getProvider(o5);return new qC(s,o,a,c,i,t)};ut(new ct(dO,n,"PUBLIC").setMultipleInstances(!0)),z(uO,lO,e),z(uO,lO,"esm2017")}function hO(t=pt(),e=HC){let r=ft(Ie(t),dO).getImmediate({identifier:e}),i=Ti("functions");return i&&fO(r,...i),r}function fO(t,e,n){i5(Ie(t),e,n)}c5(fetch.bind(self));var Ll=class{constructor(e){return e}},pO="functions",GC=class{constructor(){return ht(pO)}};var zC=new V("angularfire2.functions-instances");function u5(t,e){let n=yt(pO,t,e);return n&&new Ll(n)}function l5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ll(r)}}var d5={provide:GC,deps:[[new ie,zC]]},h5={provide:Ll,useFactory:u5,deps:[[new ie,zC],We]};function gO(t,...e){return z("angularfire",ze.full,"fn"),$e([h5,d5,{provide:zC,useFactory:l5(t),multi:!0,deps:[ee,ye,ot,et,[new ie,ar],[new ie,In],...e]}])}var mO=De(hO,!0);var f5="/firebase-messaging-sw.js",p5="/firebase-cloud-messaging-push-scope",EO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",g5="https://fcmregistrations.googleapis.com/v1",CO="google.c.a.c_id",m5="google.c.a.c_l",_5="google.c.a.ts",y5="google.c.a.e";var pg=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(pg||{});function gi(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function v5(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var WC="fcm_token_details_db",I5=5,_O="fcm_token_object_Store";function w5(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(WC))return null;let e=null;return(yield fm(WC,I5,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(_O))return;let c=o.objectStore(_O),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:gi(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:gi(d.auth),p256dh:gi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:gi(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:gi(d.auth),p256dh:gi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:gi(d.vapidKey)}}}}})})).close(),yield md(WC),yield md("fcm_vapid_details_db"),yield md("undefined"),E5(e)?e:null})}function E5(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var C5="firebase-messaging-database",T5=1,Vl="firebase-messaging-store",KC=null;function TO(){return KC||(KC=fm(C5,T5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vl)}}})),KC}function b5(t){return y(this,null,function*(){let e=bO(t),r=yield(yield TO()).transaction(Vl).objectStore(Vl).get(e);if(r)return r;{let i=yield w5(t.appConfig.senderId);if(i)return yield ZC(t,i),i}})}function ZC(t,e){return y(this,null,function*(){let n=bO(t),i=(yield TO()).transaction(Vl,"readwrite");return yield i.objectStore(Vl).put(e,n),yield i.done,e})}function bO({appConfig:t}){return t.appId}var D5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},an=new gr("messaging","Messaging",D5);function S5(t,e){return y(this,null,function*(){let n=yield XC(t),r=DO(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(JC(t.appConfig),i)).json()}catch(o){throw an.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw an.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw an.create("token-subscribe-no-token");return s.token})}function A5(t,e){return y(this,null,function*(){let n=yield XC(t),r=DO(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${JC(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw an.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw an.create("token-update-failed",{errorInfo:o})}if(!s.token)throw an.create("token-update-no-token");return s.token})}function R5(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield XC(t)};try{let s=yield(yield fetch(`${JC(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw an.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw an.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function JC({projectId:t}){return`${g5}/projects/${t}/registrations`}function XC(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function DO({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==EO&&(i.web.applicationPubKey=r),i}var N5=7*24*60*60*1e3;function M5(t){return y(this,null,function*(){let e=yield P5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:gi(e.getKey("auth")),p256dh:gi(e.getKey("p256dh"))},r=yield b5(t.firebaseDependencies);if(r){if(k5(r.subscriptionOptions,n))return Date.now()>=r.createTime+N5?x5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield R5(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return yO(t.firebaseDependencies,n)}else return yO(t.firebaseDependencies,n)})}function x5(t,e){return y(this,null,function*(){try{let n=yield A5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield ZC(t.firebaseDependencies,r),n}catch(n){throw n}})}function yO(t,e){return y(this,null,function*(){let r={token:yield S5(t,e),createTime:Date.now(),subscriptionOptions:e};return yield ZC(t,r),r.token})}function P5(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v5(e)})})}function k5(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function vO(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return O5(e,t),F5(e,t),L5(e,t),e}function O5(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function F5(t,e){e.data&&(t.data=e.data)}function L5(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function V5(t){return typeof t=="object"&&!!t&&CO in t}U5("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function U5(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function j5(t){if(!t||!t.options)throw QC("App Configuration Object");if(!t.name)throw QC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw QC(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function QC(t){return an.create("missing-app-config-values",{valueName:t})}var YC=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=j5(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function B5(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(f5,{scope:p5}),t.swRegistration.update().catch(()=>{})}catch(e){throw an.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function $5(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield B5(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw an.create("invalid-sw-registration");t.swRegistration=e}})}function H5(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=EO)})}function q5(t,e){return y(this,null,function*(){if(!navigator)throw an.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw an.create("permission-blocked");return yield H5(t,e?.vapidKey),yield $5(t,e?.serviceWorkerRegistration),M5(t)})}function G5(t,e,n){return y(this,null,function*(){let r=z5(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[CO],message_name:n[m5],message_time:n[_5],message_device_time:Math.floor(Date.now()/1e3)})})}function z5(t){switch(t){case pg.NOTIFICATION_CLICKED:return"notification_open";case pg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function W5(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===pg.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(vO(n)):t.onMessageHandler.next(vO(n)));let r=n.data;V5(r)&&r[y5]==="1"&&(yield G5(t,n.messageType,r))})}var IO="@firebase/messaging",wO="0.12.12";var K5=t=>{let e=new YC(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>W5(e,n)),e},Q5=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>q5(e,r)}};function Y5(){ut(new ct("messaging",K5,"PUBLIC")),ut(new ct("messaging-internal",Q5,"PRIVATE")),z(IO,wO),z(IO,wO,"esm2017")}function eT(){return y(this,null,function*(){try{yield fs()}catch{return!1}return typeof window<"u"&&jr()&&Vc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function SO(t=pt()){return eT().then(e=>{if(!e)throw an.create("unsupported-browser")},e=>{throw an.create("indexed-db-unsupported")}),ft(Ie(t),"messaging").getImmediate()}Y5();var Ul=class{constructor(e){return e}},AO="messaging",tT=class{constructor(){return ht(AO)}};var RO="__angularfire_symbol__messagingIsSupported",nT="__angularfire_symbol__messagingIsSupportedValue";globalThis[RO]||=eT().then(t=>globalThis[nT]=t).catch(()=>globalThis[nT]=!1);var gg={async:()=>globalThis[RO],sync:()=>{let t=globalThis[nT];if(t===void 0)throw new Error(Ca("Messaging"));return t}},rT=new V("angularfire2.messaging-instances");function Z5(t,e){if(!gg.sync())return null;let n=yt(AO,t,e);return n&&new Ul(n)}function J5(t){return(e,n)=>{if(!gg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Ul(r)}}var X5={provide:tT,deps:[[new ie,rT]]},e8={provide:Ul,useFactory:Z5,deps:[[new ie,rT],We]};function NO(t,...e){return z("angularfire",ze.full,"fcm"),$e([e8,X5,{provide:$i,useValue:gg.async,multi:!0},{provide:rT,useFactory:J5(t),multi:!0,deps:[ee,ye,ot,et,...e]}])}var Xae=gg.async;var MO=De(SO,!0);var jl=class{constructor(e){return e}},xO="performance",iT=class{constructor(){return ht(xO)}};var sT=new V("angularfire2.performance-instances");function t8(t,e,n){if(!Ay(n))return null;let r=yt(xO,t,e);return r&&new jl(r)}function n8(t){return(e,n,r)=>{if(!Ay(n))return null;let i=e.runOutsideAngular(()=>t(r));return new jl(i)}}var r8={provide:iT,deps:[[new ie,sT]]},i8={provide:jl,useFactory:t8,deps:[[new ie,sT],We,rr]};function PO(t,...e){return z("angularfire",ze.full,"perf"),$e([i8,r8,{provide:sT,useFactory:n8(t),multi:!0,deps:[ee,rr,ye,ot,et,...e]}])}var kO=De(uD,!0);var jO="firebasestorage.googleapis.com",s8="storageBucket",o8=2*60*1e3,a8=10*60*1e3;var Or=class t extends cn{constructor(e,n,r=0){super(oT(e),`Firebase Storage: ${n} (${oT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return oT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},_i=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(_i||{});function oT(t){return"storage/"+t}function c8(){let t="An unknown error occurred, please check the error payload for server response.";return new Or(_i.UNKNOWN,t)}function u8(){return new Or(_i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function l8(){return new Or(_i.CANCELED,"User canceled the upload/download.")}function d8(t){return new Or(_i.INVALID_URL,"Invalid URL '"+t+"'.")}function h8(t){return new Or(_i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function OO(t){return new Or(_i.INVALID_ARGUMENT,t)}function BO(){return new Or(_i.APP_DELETED,"The Firebase app was deleted.")}function f8(t){return new Or(_i.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var mi=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw h8(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(Z){Z.path_=decodeURIComponent(Z.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),I={bucket:1,path:3},R=n===jO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",P=new RegExp(`^https?://${R}/${i}/${S}`,"i"),H=[{regex:a,indices:c,postModify:s},{regex:_,indices:I,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let Z=0;Z<H.length;Z++){let Fe=H[Z],X=Fe.regex.exec(e);if(X){let C=X[Fe.indices.bucket],v=X[Fe.indices.path];v||(v=""),r=new t(C,v),Fe.postModify(r);break}}if(r==null)throw d8(e);return r}},aT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function p8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,t(_,c())},S)}function g(){s&&clearTimeout(s)}function _(S,...P){if(l){g();return}if(S){g(),d.call(null,S,...P);return}if(c()||o){g(),d.call(null,S,...P);return}r<64&&(r*=2);let H;a===1?(a=2,H=0):H=(r+Math.random())*1e3,f(H)}let I=!1;function R(S){I||(I=!0,g(),!l&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function g8(t){t(!1)}function m8(t){return t!==void 0}function FO(t,e,n,r){if(r<e)throw OO(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw OO(`Invalid value for '${t}'. Expected ${n} or less.`)}function _8(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var cT=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(cT||{});function y8(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var uT=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,I)=>{this.resolve_=_,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new uc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===cT.NO_ERROR,c=s.getStatus();if(!a||y8(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===cT.ABORT;r(!1,new uc(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new uc(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());m8(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=c8();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?BO():l8();o(c)}else{let c=u8();o(c)}};this.canceled_?n(!1,new uc(!1,null,!0)):this.backoffId_=p8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&g8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},uc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function v8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function w8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function E8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function C8(t,e,n,r,i,s,o=!0){let a=_8(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return w8(l,e),v8(l,n),I8(l,s),E8(l,r),new uT(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function T8(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function b8(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var mce=256*1024;var lT=class t{constructor(e,n){this._service=e,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b8(this._location.path)}get storage(){return this._service}get parent(){let e=T8(this._location.path);if(e===null)return null;let n=new mi(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw f8(e)}};function LO(t,e){let n=e?.[s8];return n==null?null:mi.makeFromBucketSpec(n,t)}function D8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Ao(i,t.app.options.projectId))}var dT=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=jO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=o8,this._maxUploadRetryTime=a8,this._requests=new Set,i!=null?this._bucket=mi.makeFromBucketSpec(i,this._host):this._bucket=LO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=LO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lT(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new aT(BO());{let o=C8(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},VO="@firebase/storage",UO="0.13.2";var $O="storage";function HO(t=pt(),e){t=Ie(t);let r=ft(t,$O).getImmediate({identifier:e}),i=Ti("storage");return i&&qO(r,...i),r}function qO(t,e,n,r={}){D8(t,e,n,r)}function S8(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new dT(n,r,i,e,un)}function A8(){ut(new ct($O,S8,"PUBLIC").setMultipleInstances(!0)),z(VO,UO,""),z(VO,UO,"esm2017")}A8();var Bl=class{constructor(e){return e}},GO="storage",hT=class{constructor(){return ht(GO)}};var fT=new V("angularfire2.storage-instances");function R8(t,e){let n=yt(GO,t,e);return n&&new Bl(n)}function N8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bl(r)}}var M8={provide:hT,deps:[[new ie,fT]]},x8={provide:Bl,useFactory:R8,deps:[[new ie,fT],We]};function zO(t,...e){return z("angularfire",ze.full,"gcs"),$e([x8,M8,{provide:fT,useFactory:N8(t),multi:!0,deps:[ee,ye,ot,et,[new ie,ar],[new ie,In],...e]}])}var WO=De(HO,!0);var pT="@firebase/remote-config",KO="0.4.9";var QO="remote-config";var P8={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Cn=new gr("remoteconfig","Remote Config",P8);function YO(t=pt()){return t=Ie(t),ft(t,QO).getImmediate()}function ZO(t){let e=Ie(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var gT=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function k8(t=navigator){return t.languages&&t.languages[0]||t.language}var mT=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:k8()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((S,P)=>{e.signal.addEventListener(()=>{let U=new Error("The operation was aborted.");U.name="AbortError",P(U)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(S){let P="fetch-client-network";throw S?.name==="AbortError"&&(P="fetch-timeout"),Cn.create(P,{originalErrorMessage:S?.message})}let g=f.status,_=f.headers.get("ETag")||void 0,I,R;if(f.status===200){let S;try{S=yield f.json()}catch(P){throw Cn.create("fetch-client-parse",{originalErrorMessage:P?.message})}I=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(I={}),g!==304&&g!==200)throw Cn.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:I}})}};function O8(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Cn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function F8(t){if(!(t instanceof cn)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var _T=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return y(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield O8(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!F8(o))throw o;let a={throttleEndTimeMillis:Date.now()+Hc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var L8=60*1e3,V8=12*60*60*1e3,yT=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:L8,minimumFetchIntervalMillis:V8},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function mg(t,e){let n=t.target.error||void 0;return Cn.create(e,{originalErrorMessage:n&&n?.message})}var Io="app_namespace_store",U8="firebase_remote_config",j8=1;function B8(){return new Promise((t,e)=>{try{let n=indexedDB.open(U8,j8);n.onerror=r=>{e(mg(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Io,{keyPath:"compositeKey"})}}}catch(n){e(Cn.create("storage-open",{originalErrorMessage:n?.message}))}})}var vT=class{constructor(e,n,r,i=B8()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Io],"readonly").objectStore(Io),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(mg(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(Cn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Io],"readwrite").objectStore(Io),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(mg(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(Cn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Io],"readwrite").objectStore(Io),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(mg(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Cn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var IT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function $8(){ut(new ct(QO,t,"PUBLIC").setMultipleInstances(!0)),z(pT,KO),z(pT,KO,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Cn.create("registration-window");if(!jr())throw Cn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Cn.create("registration-project-id");if(!o)throw Cn.create("registration-api-key");if(!a)throw Cn.create("registration-app-id");n=n||"firebase";let c=new vT(a,r.name,n),l=new IT(c),d=new _r(pT);d.logLevel=Ht.ERROR;let f=new mT(i,un,n,s,o,a),g=new _T(f,c),_=new gT(g,c,l,d),I=new yT(r,_,l,c,d);return ZO(I),I}}function JO(){return y(this,null,function*(){if(!jr())return!1;try{return yield fs()}catch{return!1}})}$8();var $l=class{constructor(e){return e}},XO="remote-config",wT=class{constructor(){return ht(XO)}};var ET="__angularfire_symbol__remoteConfigIsSupportedValue",e1="__angularfire_symbol__remoteConfigIsSupported";globalThis[e1]||=JO().then(t=>globalThis[ET]=t).catch(()=>globalThis[ET]=!1);var _g={async:()=>globalThis[e1],sync:()=>{let t=globalThis[ET];if(t===void 0)throw new Error(Ca("RemoteConfig"));return t}},CT=new V("angularfire2.remote-config-instances");function H8(t,e){if(!_g.sync())return null;let n=yt(XO,t,e);return n&&new $l(n)}function q8(t){return(e,n)=>{if(!_g.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new $l(r)}}var G8={provide:wT,deps:[[new ie,CT]]},z8={provide:$l,useFactory:H8,deps:[[new ie,CT],We]};function t1(t,...e){return z("angularfire",ze.full,"rc"),$e([z8,G8,{provide:$i,useValue:_g.async,multi:!0},{provide:CT,useFactory:q8(t),multi:!0,deps:[ee,ye,ot,et,...e]}])}var fue=_g.async;var n1=De(YO,!0);var r1="@firebase/vertexai-preview",i1="0.0.4";var s1="vertexAI",o1="us-central1";var TT=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||o1}_delete(){return Promise.resolve()}};var bT=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(bT||{});var vue=[bT.RECITATION,bT.SAFETY];function a1(t=pt(),e){return t=Ie(t),ft(t,s1).getImmediate({identifier:e?.location||o1})}function W8(){ut(new ct(s1,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new TT(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),z(r1,i1),z(r1,i1,"esm2017")}W8();var Hl=class{constructor(e){return e}},c1="vertexai",DT=class{constructor(){return ht(c1)}};var ST=new V("angularfire2.vertexai-instances");function K8(t,e){let n=yt(c1,t,e);return n&&new Hl(n)}function Q8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hl(r)}}var Y8={provide:DT,deps:[[new ie,ST]]},Z8={provide:Hl,useFactory:K8,deps:[[new ie,ST],We]};function u1(t,...e){return z("angularfire",ze.full,"vertexai"),$e([Z8,Y8,{provide:ST,useFactory:Q8(t),multi:!0,deps:[ee,ye,ot,et,[new ie,In],...e]}])}var l1=De(a1,!0);var d1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var h1={providers:[jA({eventCoalescing:!0}),zR(WR),KR(()=>QR(d1.firebaseConfig)),BN(()=>HN()),lM(()=>cM()),uM,_I,fP(()=>gP()),aO(()=>cO()),gO(()=>mO()),NO(()=>MO()),PO(()=>kO()),zO(()=>WO()),t1(()=>n1()),u1(()=>l1())]};var Fr=class t{firestore=M(ho);destroy$=new Je;constructor(){}delete(e){return pP(Qp(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return y(this,null,function*(){let e=yield AE(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=Qp(this.collectionRef,e);return RE(r,n)}updateData(e,n){return RE(Qp(this.collectionRef,e),n,{merge:!0})}getDataById(e){return y(this,null,function*(){let n=mP(this.collectionRef,_P("id","==",e)),r=yield AE(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function Lt(t){t||(Lh(Lt),t=M(ua));let e=new oe(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Fn(e))}function Ze(t,e){!e?.injector&&Lh(Ze);let n=e?.injector??M(ye),r=new Yc(1),i=mu(()=>{let s;try{s=t()}catch(o){qn(()=>r.error(o));return}qn(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(ua).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var Zn=class t extends Fr{collectionPath="/race-configs";collectionRef=is(this.firestore,this.collectionPath);activeRaceConfig=Re(void 0);constructor(){super(),this.getAll().pipe(Lt()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}getAll(){return rs(this.collectionRef).pipe(Fn(this.destroy$),K(e=>e.filter(n=>!n.deleted)))}updateFuelDurationMinute(e){let n=this.activeRaceConfig();return n?(n.fuelDurationMinute=e,this.updateData(n.id,n)):Promise.resolve()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var J8=Math.pow(10,8)*24*60*60*1e3,vle=-J8;var f1=864e5,yg=6e4,vg=36e5;var X8=3600;var p1=X8*24,Ile=p1*7,eK=p1*365.2425,tK=eK/12,wle=tK*3,AT=Symbol.for("constructDateFrom");function On(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&AT in t?t[AT](e):t instanceof Date?new t.constructor(e):new Date(e)}function qe(t,e){return On(e||t,t)}function g1(t,e,n){let r=qe(t,n?.in);return isNaN(e)?On(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function m1(t,e,n){let r=qe(t,n?.in);if(isNaN(e))return On(n?.in||t,NaN);if(!e)return r;let i=r.getDate(),s=On(n?.in||t,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function lc(t,e,n){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=qe(t,n?.in),f=i||r?m1(d,i+r*12):d,g=o||s?g1(f,o+s*7):f,_=c+a*60,R=(l+_*60)*1e3;return On(n?.in||t,+g+R)}function _1(t,e,n){return On(n?.in||t,+qe(t)+e)}function as(t,e,n){return _1(t,e*vg,n)}function RT(t){let e=qe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Zt(t,...e){let n=On.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function NT(t,e){let n=qe(t,e?.in);return n.setHours(0,0,0,0),n}function y1(t,e,n){let[r,i]=Zt(n?.in,t,e),s=NT(r),o=NT(i),a=+s-RT(s),c=+o-RT(o);return Math.round((a-c)/f1)}function v1(t,e,n){let r=qe(t,n?.in);return r.setTime(r.getTime()+e*yg),r}function wo(t,e){let n=+qe(t)-+qe(e);return n<0?-1:n>0?1:n}function I1(t,e,n){let[r,i]=Zt(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function w1(t,e,n){let[r,i]=Zt(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function C1(t,e,n){let[r,i]=Zt(n?.in,t,e),s=E1(r,i),o=Math.abs(y1(r,i));r.setDate(r.getDate()-s*o);let a=+(E1(r,i)===-s),c=s*(o-a);return c===0?0:c}function E1(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function dc(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function T1(t,e,n){let[r,i]=Zt(n?.in,t,e),s=(+r-+i)/vg;return dc(n?.roundingMethod)(s)}function yi(t,e){return+qe(t)-+qe(e)}function Ig(t,e,n){let r=yi(t,e)/yg;return dc(n?.roundingMethod)(r)}function b1(t,e){let n=qe(t,e?.in);return n.setHours(23,59,59,999),n}function D1(t,e){let n=qe(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function S1(t,e){let n=qe(t,e?.in);return+b1(n,e)==+D1(n,e)}function A1(t,e,n){let[r,i,s]=Zt(n?.in,t,t,e),o=wo(i,s),a=Math.abs(I1(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=wo(i,s)===-o;S1(r)&&a===1&&wo(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function R1(t,e,n){let r=yi(t,e)/1e3;return dc(n?.roundingMethod)(r)}function N1(t,e,n){let[r,i]=Zt(n?.in,t,e),s=wo(r,i),o=Math.abs(w1(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=wo(r,i)===-s,c=s*(o-+a);return c===0?0:c}function M1(t,e){let[n,r]=Zt(t,e.start,e.end);return{start:n,end:r}}function MT(t,e){let{start:n,end:r}=M1(e?.in,t),i={},s=N1(r,n);s&&(i.years=s);let o=lc(n,{years:i.years}),a=A1(r,o);a&&(i.months=a);let c=lc(o,{months:i.months}),l=C1(r,c);l&&(i.days=l);let d=lc(c,{days:i.days}),f=T1(r,d);f&&(i.hours=f);let g=lc(d,{hours:i.hours}),_=Ig(r,g);_&&(i.minutes=_);let I=lc(g,{minutes:i.minutes}),R=R1(r,I);return R&&(i.seconds=R),i}var Tn=class t extends Fr{collectionPath="/races";collectionRef=is(this.firestore,this.collectionPath);raceConfigService=M(Zn);activeRace=Re(void 0);endRaceDate=Re(void 0);constructor(){super(),Rt({races:this.getAll(),raceConfig:Ze(this.raceConfigService.activeRaceConfig)}).pipe(Lt(),K(({races:e,raceConfig:n})=>{if(e&&n){let r=this.getActiveRace(e,n),i=r?as(r.start.toDate(),n.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getAll(){return rs(this.collectionRef).pipe(Fn(this.destroy$),K(e=>e.filter(n=>!n.deleted)))}getActiveRace(e,n){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(as(s.start.toDate(),n.durationHour)>=r)return s}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function x1(t,e){if(!t||!e)return"--:--:--";let n=MT({end:e,start:t});return kT(n)}function Eo(t){if(!t)return"--:--:--";let e=MT({end:t,start:new Date});return kT(e)}function PT(t){if(!t||t<0)return"--:--:--";let e=Math.floor(t/1e3),n={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return kT(n)}function kT(t){return t.hours&&t.hours<0||t.minutes&&t.minutes<0||t.seconds&&t.seconds<0?"00:00:00":[xT(t.hours),xT(t.minutes),xT(t.seconds)].join(":")}function xT(t){return t?t<10?`0${t}`:`${t}`:"00"}function nK(t,e){if(t&1){let n=Yh();G(0,"button",2),Ot("click",function(){Ps(n);let i=bt();return ks(i.startRace())}),Q(1," Start race "),q()}}function rK(t,e){if(t&1&&(G(0,"div",1),Q(1),q()),t&2){let n=bt();ge(),Xe(" ",n.endRaceCountdown," ")}}var wg=class t{raceService=M(Tn);endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";constructor(){Rt({endRaceDate:Ze(this.endRaceDate),ping:Hr(1e3)}).pipe(Lt()).subscribe(e=>{this.endRaceCountdown=Eo(e.endRaceDate)})}startRace(){this.raceService.create({id:"1",start:St.now(),deleted:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pn({type:t,selectors:[["app-race"]],standalone:!0,features:[vn],decls:2,vars:1,consts:[[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&mn(0,nK,2,0,"button",0)(1,rK,2,1,"div",1),n&2&&_n(r.endRaceDate()?1:0)}})};var cs=class t extends Fr{collectionPath="/pits";collectionRef=is(this.firestore,this.collectionPath);raceService=M(Tn);activePit=Re(void 0);lastRefuelPit=Re(void 0);pits=Re([]);completedDriverChanges=Re(0);lastDriverChangePit=Re(void 0);constructor(){super(),this.getRacePits().pipe(Lt()).subscribe(e=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getRacePits(){return Rt({pits:rs(this.collectionRef),activeRace:Ze(this.raceService.activeRace)}).pipe(Fn(this.destroy$),K(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}getActivePit(e){let n=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of n)if(!r.exitTime)return r}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime!==void 0).sort((r,i)=>{let s=r.exitTime?r.exitTime.toDate().getTime():0;return(i.exitTime?i.exitTime.toDate().getTime():0)-s}).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let n=e.sort((r,i)=>i.entryTime.toMillis()-r.entryTime.toMillis());for(let r of n)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.reduce((n,r)=>n+(r.entryDriverId!==r.exitDriverId?1:0),0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var Eg=class t{raceService=M(Tn);raceConfigService=M(Zn);pitService=M(cs);openingTime=Re(void 0);closingTime=Re(void 0);tyreChangeWindowOpen=Re(!1);remainingTyreChange=Re(0);constructor(){Rt({pits:Ze(this.pitService.pits),activeRace:Ze(this.raceService.activeRace),raceConfig:Ze(this.raceConfigService.activeRaceConfig),ping:Hr(1e3)}).pipe(Lt()).subscribe(({pits:e,activeRace:n,raceConfig:r})=>{n&&r?(this.openingTime.set(as(n.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(as(n.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,n){if(e&&n){let r=new Date;return r>=e&&r<=n}return!1}calculateRemainingTyreChange(e,n){let r=e.filter(i=>i.tyreChange).length;return n-r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var iK=t=>({"mb-2":t}),sK=t=>({"animate-bounce":t});function oK(t,e){if(t&1&&(G(0,"div",4),Q(1),q()),t&2){let n=bt();ge(),Xe(" Remaining: ",n.remainingTyreChange()," ")}}function aK(t,e){t&1&&(G(0,"div",5),Q(1," Completed! "),q())}function cK(t,e){if(t&1&&(G(0,"div",6),Q(1," Window open "),q()),t&2){let n=bt();qt("ngClass",Bi(1,sK,n.remainingTyreChange()>0))}}function uK(t,e){t&1&&(G(0,"div",7),Q(1," Window close "),q())}function lK(t,e){if(t&1&&(Q(0),la(1,"date")),t&2){let n=bt(2);Xe(" ",da(1,1,n.openingTime(),"HH:mm:ss")," ")}}function dK(t,e){t&1&&Q(0," --:--:-- ")}function hK(t,e){if(t&1&&(Q(0),la(1,"date")),t&2){let n=bt(2);Xe(" ",da(1,1,n.closingTime(),"HH:mm:ss")," ")}}function fK(t,e){t&1&&Q(0," --:--:-- ")}function pK(t,e){if(t&1&&(G(0,"div",8)(1,"div")(2,"div",9),Q(3,"Opening time"),q(),G(4,"div",10),mn(5,lK,2,4)(6,dK,1,0),q()(),G(7,"div")(8,"div",11),Q(9,"Closing time"),q(),G(10,"div",12),mn(11,hK,2,4)(12,fK,1,0),q()()(),G(13,"div",13)(14,"div")(15,"div",9),Q(16,"Opening in"),q(),G(17,"div",10),Q(18),q()(),G(19,"div")(20,"div",11),Q(21,"Closing in"),q(),G(22,"div",12),Q(23),q()()()),t&2){let n=bt();ge(5),_n(n.openingTime()?5:6),ge(6),_n(n.closingTime()?11:12),ge(7),Xe(" ",n.countdownOpeningTime()," "),ge(5),Xe(" ",n.countdownClosingTime()," ")}}var Cg=class t{tyreService=M(Eg);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Dt(()=>Eo(this.tyreService.openingTime()));countdownClosingTime=Dt(()=>Eo(this.tyreService.closingTime()));isOpen=!0;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pn({type:t,selectors:[["app-tyre-change-window"]],standalone:!0,features:[vn],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(G(0,"div",0)(1,"div",1),Ot("click",function(){return r.isOpen=!r.isOpen}),G(2,"div",2),Q(3,"\u{1F6DE} Tyre change"),q(),G(4,"div",3),mn(5,oK,2,1,"div",4)(6,aK,2,0,"div",5)(7,cK,2,3,"div",6)(8,uK,2,0,"div",7),q()(),mn(9,pK,24,4),q()),n&2&&(ge(),qt("ngClass",Bi(4,iK,r.isOpen)),ge(4),_n(r.remainingTyreChange()>0?5:6),ge(2),_n(r.tyreChangeWindowOpen()?7:8),ge(2),_n(r.isOpen?9:-1))},dependencies:[ff,Gi]})};var Tg=class t{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return this.charge<=10?"bg-red-500":this.charge<=25?"bg-orange-500":this.charge<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return this.charge<=10?"border-red-500":this.charge<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pn({type:t,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[Xr,vn],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(n,r){n&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Q(4),q()()(),yn(5,"div",4),q()),n&2&&(ge(),qt("ngClass",r.batteryBorderColor),ge(),Kh("width",r.charge,"%"),qt("ngClass",r.batteryColor),ge(2),yy(r.charge),ge(),qt("ngClass",r.batteryBorderColor))},dependencies:[Gi],changeDetection:0})};var B1=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(ke(Fs),ke(Ui))}}static{this.\u0275dir=kt({type:t})}}return t})(),$1=(()=>{class t extends B1{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vi(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,features:[ir]})}}return t})(),LT=new V("");var gK={provide:LT,useExisting:Qr(()=>xg),multi:!0};function mK(){let t=ni()?ni().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var _K=new V(""),xg=(()=>{class t extends B1{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!mK())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(ke(Fs),ke(Ui),ke(_K,8))}}static{this.\u0275dir=kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ot("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Vs([gK]),ir]})}}return t})();function OT(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Pg=new V(""),H1=new V("");function yK(t){return e=>{if(OT(e.value)||OT(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function vK(t){return OT(t.value)?{required:!0}:null}function P1(t){return null}function q1(t){return t!=null}function G1(t){return Us(t)?Qe(t):t}function z1(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function W1(t,e){return e.map(n=>n(t))}function IK(t){return!t.validate}function K1(t){return t.map(e=>IK(e)?e:n=>e.validate(n))}function wK(t){if(!t)return null;let e=t.filter(q1);return e.length==0?null:function(n){return z1(W1(n,e))}}function VT(t){return t!=null?wK(K1(t)):null}function EK(t){if(!t)return null;let e=t.filter(q1);return e.length==0?null:function(n){let r=W1(n,e).map(G1);return Mm(r).pipe(K(z1))}}function UT(t){return t!=null?EK(K1(t)):null}function k1(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function CK(t){return t._rawValidators}function TK(t){return t._rawAsyncValidators}function FT(t){return t?Array.isArray(t)?t:[t]:[]}function Dg(t,e){return Array.isArray(t)?t.includes(e):t===e}function O1(t,e){let n=FT(e);return FT(t).forEach(i=>{Dg(n,i)||n.push(i)}),n}function F1(t,e){return FT(e).filter(n=>!Dg(t,n))}var Sg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=UT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},pc=class extends Sg{get formDirective(){return null}get path(){return null}},Yl=class extends Sg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ag=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},bK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},mfe=me(F({},bK),{"[class.ng-submitted]":"isSubmitted"}),Q1=(()=>{class t extends Ag{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(ke(Yl,2))}}static{this.\u0275dir=kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Qh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ir]})}}return t})(),Y1=(()=>{class t extends Ag{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(ke(pc,10))}}static{this.\u0275dir=kt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Qh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ir]})}}return t})();var Gl="VALID",bg="INVALID",hc="PENDING",zl="DISABLED",gc=class{},Rg=class extends gc{constructor(e,n){super(),this.value=e,this.source=n}},Kl=class extends gc{constructor(e,n){super(),this.pristine=e,this.source=n}},Ql=class extends gc{constructor(e,n){super(),this.touched=e,this.source=n}},fc=class extends gc{constructor(e,n){super(),this.status=e,this.source=n}};function Z1(t){return(kg(t)?t.validators:t)||null}function DK(t){return Array.isArray(t)?VT(t):t||null}function J1(t,e){return(kg(e)?e.asyncValidators:t)||null}function SK(t){return Array.isArray(t)?UT(t):t||null}function kg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function AK(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new W(1e3,"");if(!r[n])throw new W(1001,"")}function RK(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new W(1002,"")})}var Ng=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Dt(()=>this.statusReactive()),this.statusReactive=Re(void 0),this._pristine=Dt(()=>this.pristineReactive()),this.pristineReactive=Re(!0),this._touched=Dt(()=>this.touchedReactive()),this.touchedReactive=Re(!1),this._events=new Je,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return qn(this.statusReactive)}set status(e){qn(()=>this.statusReactive.set(e))}get valid(){return this.status===Gl}get invalid(){return this.status===bg}get pending(){return this.status==hc}get disabled(){return this.status===zl}get enabled(){return this.status!==zl}get pristine(){return qn(this.pristineReactive)}set pristine(e){qn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return qn(this.touchedReactive)}set touched(e){qn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(O1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(O1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(F1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(F1(e,this._rawAsyncValidators))}hasValidator(e){return Dg(this._rawValidators,e)}hasAsyncValidator(e){return Dg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(me(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ql(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ql(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(me(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Kl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Kl(!0,r))}markAsPending(e={}){this.status=hc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new fc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(me(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=zl,this.errors=null,this._forEachChild(i=>{i.disable(me(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rg(this.value,r)),this._events.next(new fc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(me(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this._forEachChild(r=>{r.enable(me(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(me(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Gl||this.status===hc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Rg(this.value,n)),this._events.next(new fc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(me(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zl:Gl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=hc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=G1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new fc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new gt,this.statusChanges=new gt}_calculateStatus(){return this._allControlsDisabled()?zl:this.errors?bg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hc)?hc:this._anyControlsHaveStatus(bg)?bg:Gl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Kl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Ql(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=DK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=SK(this._rawAsyncValidators)}},Mg=class extends Ng{constructor(e,n,r){super(Z1(n),J1(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){RK(this,!0,e),Object.keys(e).forEach(r=>{AK(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var jT=new V("CallSetDisabledState",{providedIn:"root",factory:()=>BT}),BT="always";function NK(t,e){return[...e.path,t]}function X1(t,e,n=BT){eF(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),xK(t,e),kK(t,e),PK(t,e),MK(t,e)}function L1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function MK(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function eF(t,e){let n=CK(t);e.validator!==null?t.setValidators(k1(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=TK(t);e.asyncValidator!==null?t.setAsyncValidators(k1(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();L1(e._rawValidators,i),L1(e._rawAsyncValidators,i)}function xK(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&tF(t,e)})}function PK(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&tF(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function tF(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function kK(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function OK(t,e){t==null,eF(t,e)}function FK(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function LK(t){return Object.getPrototypeOf(t.constructor)===$1}function VK(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function UK(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===xg?n=s:LK(s)?r=s:i=s}),i||r||n||null}var jK={provide:pc,useExisting:Qr(()=>$T)},Wl=Promise.resolve(),$T=(()=>{class t extends pc{get submitted(){return qn(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Dt(()=>this.submittedReactive()),this.submittedReactive=Re(!1),this._directives=new Set,this.ngSubmit=new gt,this.form=new Mg({},VT(n),UT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Wl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),X1(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Wl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Wl.then(()=>{let r=this._findContainer(n.path),i=new Mg({});OK(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Wl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Wl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),VK(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(ke(Pg,10),ke(H1,10),ke(jT,8))}}static{this.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ot("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vs([jK]),ir]})}}return t})();function V1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function U1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var BK=class extends Ng{constructor(e=null,n,r){super(Z1(n),J1(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(U1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){V1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){V1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){U1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $K={provide:Yl,useExisting:Qr(()=>HT)},j1=Promise.resolve(),HT=(()=>{class t extends Yl{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new BK,this._registered=!1,this.name="",this.update=new gt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=UK(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),FK(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){X1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){j1.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&gu(r);j1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?NK(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(ke(pc,9),ke(Pg,10),ke(H1,10),ke(LT,10),ke(Hi,8),ke(jT,8))}}static{this.\u0275dir=kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vs([$K]),ir,Xr]})}}return t})(),nF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),HK={provide:LT,useExisting:Qr(()=>qT),multi:!0},qT=(()=>{class t extends $1{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vi(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ot("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Vs([HK]),ir]})}}return t})();function qK(t){return typeof t=="number"?t:parseFloat(t)}var rF=(()=>{class t{constructor(){this._validator=P1}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):P1,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=kt({type:t,features:[Xr]})}}return t})();var GK={provide:Pg,useExisting:Qr(()=>GT),multi:!0},GT=(()=>{class t extends rF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>qK(n),this.createValidator=n=>yK(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vi(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&pu("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Vs([GK]),ir]})}}return t})(),zK={provide:Pg,useExisting:Qr(()=>zT),multi:!0};var zT=(()=>{class t extends rF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=gu,this.createValidator=n=>vK}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Vi(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&pu("required",i._enabled?"":null)},inputs:{required:"required"},features:[Vs([zK]),ir]})}}return t})();var WK=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=xs({type:t})}static{this.\u0275inj=Ms({})}}return t})();var iF=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:jT,useValue:n.callSetDisabledState??BT}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=xs({type:t})}static{this.\u0275inj=Ms({imports:[WK]})}}return t})();var mc=class t extends Fr{collectionPath="/laps";collectionRef=is(this.firestore,this.collectionPath);raceService=M(Tn);activeRace=this.raceService.activeRace;referenceLapTimeMillisecond=Re(64567);constructor(){super()}getRaceLaps(){return Rt({laps:rs(this.collectionRef),activeRace:Ze(this.activeRace)}).pipe(Lt(),K(({laps:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var Og=class t{raceService=M(Tn);pitService=M(cs);raceConfigService=M(Zn);lapService=M(mc);lastRefuelTime=Re(void 0);emptyFuelTime=Re(void 0);remainingFuelPercentage=Re(100);remainingFuelLap=Re(100);constructor(){Rt({lastRefuelPit:Ze(this.pitService.lastRefuelPit),activeRace:Ze(this.raceService.activeRace),raceConfig:Ze(this.raceConfigService.activeRaceConfig),referenceLapTimeMillisecond:Ze(this.lapService.referenceLapTimeMillisecond),ping:Hr(1e3)}).pipe(Lt()).subscribe(({lastRefuelPit:e,activeRace:n,raceConfig:r,referenceLapTimeMillisecond:i,ping:s})=>{if(n&&r){let o=e&&e.exitTime?e.exitTime.toDate():n.start.toDate();this.lastRefuelTime.set(o),this.emptyFuelTime.set(v1(o,r.fuelDurationMinute)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r.fuelDurationMinute)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),i))}else this.lastRefuelTime.set(void 0),this.emptyFuelTime.set(void 0),this.remainingFuelPercentage.set(100),this.remainingFuelLap.set(0)})}calculateRemainingFuelPercentage(e,n){if(!e)return 100;let i=Ig(e,new Date)/n*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}calculateRemainingFuelLaps(e,n){if(!e||!n)return 0;let r=yi(e,new Date);return Math.floor(r/n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var QK=t=>({"mb-2":t}),YK=t=>({"animate-bounce":t});function ZK(t,e){if(t&1&&(Q(0),la(1,"date")),t&2){let n=bt(2);Xe(" ",da(1,1,n.lastRefuelTime(),"HH:mm:ss")," ")}}function JK(t,e){t&1&&Q(0," --:--:-- ")}function XK(t,e){if(t&1&&(Q(0),la(1,"date")),t&2){let n=bt(2);Xe(" ",da(1,1,n.emptyFuelTime(),"HH:mm:ss")," ")}}function eQ(t,e){t&1&&Q(0," --:--:-- ")}function tQ(t,e){if(t&1){let n=Yh();G(0,"div",7)(1,"div")(2,"div",8),Q(3,"Last refuel time"),q(),G(4,"div",9),mn(5,ZK,2,4)(6,JK,1,0),q()(),G(7,"div")(8,"div",10),Q(9,"Empty time"),q(),G(10,"div",11),mn(11,XK,2,4)(12,eQ,1,0),q()()(),G(13,"div",7)(14,"div")(15,"div",8),Q(16,"Since last refuel"),q(),G(17,"div",9),Q(18),q()(),G(19,"div")(20,"div",10),Q(21,"Empty in"),q(),G(22,"div",11),Q(23),q()()(),G(24,"div",12)(25,"div")(26,"div",8),Q(27,"Remaining laps"),q(),G(28,"div",9),Q(29),q()(),G(30,"div")(31,"div",10),Q(32,"Fuel Duration (min):"),q(),G(33,"div",13)(34,"button",14),Ot("click",function(){Ps(n);let i=bt();return ks(i.increaseFuelDuration())}),Q(35,"+"),q(),G(36,"form",15),Ot("ngSubmit",function(){Ps(n);let i=bt();return ks(i.onSubmit())}),G(37,"input",16),Iy("ngModelChange",function(i){Ps(n);let s=bt();return xA(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),ks(i)}),q()(),G(38,"button",17),Ot("click",function(){Ps(n);let i=bt();return ks(i.decreaseFuelDuration())}),Q(39,"-"),q()()()()}if(t&2){let n=bt();ge(5),_n(n.lastRefuelTime()?5:6),ge(6),_n(n.emptyFuelTime()?11:12),ge(7),Xe(" ",n.sinceLastRefuel()," "),ge(5),Xe(" ",n.emptyFuelCountdown()," "),ge(6),Xe(" ",n.remainingFuelLap()," "),ge(8),vy("ngModel",n.fuelDurationMinute)}}var Fg=class t{raceConfigService=M(Zn);fuelService=M(Og);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Dt(()=>Eo(this.emptyFuelTime()));sinceLastRefuel=Dt(()=>x1(this.lastRefuelTime(),new Date));warning=Dt(()=>this.remainingFuelPercentage()<=20);remainingColor=Dt(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){mu(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pn({type:t,selectors:[["app-fuel"]],standalone:!0,features:[vn],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(n,r){n&1&&(G(0,"div",0)(1,"div",1),Ot("click",function(){return r.isOpen=!r.isOpen}),G(2,"div",2),Q(3,"\u26FD\uFE0F Fuel"),q(),G(4,"div",3)(5,"div",4),Q(6),q(),G(7,"div",5),Q(8),q(),yn(9,"app-battery",6),q()(),mn(10,tQ,40,6),q()),n&2&&(ge(),qt("ngClass",Bi(8,QK,r.isOpen)),ge(3),qt("ngClass",Bi(10,YK,r.warning())),ge(),qt("ngClass",r.remainingColor()),ge(),Xe(" Laps: ",r.remainingFuelLap()," "),ge(),qt("ngClass",r.remainingColor()),ge(),Xe(" Empty: ",r.emptyFuelCountdown()," "),ge(),qt("charge",r.remainingFuelPercentage()),ge(),_n(r.isOpen?10:-1))},dependencies:[Gi,ff,Tg,iF,nF,xg,qT,Q1,Y1,zT,GT,HT,$T]})};var Lg=class t{raceService=M(Tn);pitService=M(cs);lapService=M(mc);raceConfigService=M(Zn);activeRaceLogic=Re(void 0);constructor(){Rt({activeRace:Ze(this.raceService.activeRace),activeRaceConfig:Ze(this.raceConfigService.activeRaceConfig),completedDriverChanges:Ze(this.pitService.completedDriverChanges),lastDriverChangePit:Ze(this.pitService.lastDriverChangePit),referenceLapTimeMilliseconds:Ze(this.lapService.referenceLapTimeMillisecond),ping:Hr(1e3)}).pipe(Lt()).subscribe(({activeRace:e,activeRaceConfig:n,completedDriverChanges:r,lastDriverChangePit:i,referenceLapTimeMilliseconds:s})=>{e&&n?this.activeRaceLogic.set(this.calculateRaceLogic(e,n,r,i,s)):this.activeRaceLogic.set(void 0)})}calculateRaceLogic(e,n,r,i,s){let o=new Date,a=as(e.start.toDate(),n.durationHour);if(o>=a)return{avgStintMillisecondsTime:void 0,laps:0,avgStintMillisecondsIfDriverChangedNow:void 0,lapsIfDriverChangeNow:0};let c=yi(a,o),l=Math.max(0,n.minDriverChange-r);if(l===0)return{avgStintMillisecondsTime:void 0,laps:0,avgStintMillisecondsIfDriverChangedNow:void 0,lapsIfDriverChangeNow:0};let d=i?i.entryTime.toDate():e.start.toDate(),g=yi(a,d)/l,_=c/l;return{avgStintMillisecondsTime:g||void 0,laps:Math.floor(g/s),avgStintMillisecondsIfDriverChangedNow:_||void 0,lapsIfDriverChangeNow:Math.floor(_/s)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var nQ=t=>({"mb-2":t});function rQ(t,e){if(t&1&&(G(0,"div",3)(1,"div")(2,"div",4),Q(3,"AVG Stint time"),q(),G(4,"div",5),Q(5),q()(),G(6,"div")(7,"div",6),Q(8,"Laps"),q(),G(9,"div",7),Q(10),q()()(),yn(11,"hr",8),G(12,"div",9)(13,"div")(14,"div",4),Q(15,"AVG stint time if driver change now"),q(),G(16,"div",5),Q(17),q()(),G(18,"div")(19,"div",6),Q(20,"Laps"),q(),G(21,"div",7),Q(22),q()()()),t&2){let n=bt();ge(5),Xe(" ",n.AVGStintTime()," "),ge(5),Xe(" ",n.laps()," "),ge(7),Xe(" ",n.AVGStintTimeIfDriverChangeNow()," "),ge(5),Xe(" ",n.lapsIfDriverChangeNow()," ")}}var Vg=class t{raceLogicService=M(Lg);activeRaceLogic=this.raceLogicService.activeRaceLogic;AVGStintTime=Dt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?PT(e.avgStintMillisecondsTime):"--:--:--"});laps=Dt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Dt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?PT(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Dt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pn({type:t,selectors:[["app-race-logic"]],standalone:!0,features:[vn],decls:5,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(G(0,"div",0)(1,"div",1),Ot("click",function(){return r.isOpen=!r.isOpen}),G(2,"div",2),Q(3,"\u{1F9E0} Race logic"),q()(),mn(4,rQ,23,4),q()),n&2&&(ge(),qt("ngClass",Bi(2,nQ,r.isOpen)),ge(3),_n(r.isOpen?4:-1))},dependencies:[Gi]})};var Ug=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=pn({type:t,selectors:[["app-root"]],standalone:!0,features:[vn],decls:14,vars:0,consts:[[1,"w-full","h-screen","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-3"],[1,"flex","justify-center","mx-auto"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"h-96","aspect-auto"]],template:function(n,r){n&1&&(G(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),Q(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),q()(),G(5,"div",4),yn(6,"app-race"),q()(),G(7,"div",5),yn(8,"app-tyre-change-window")(9,"app-fuel")(10,"app-race-logic"),q(),G(11,"div",6),yn(12,"img",7),q()(),yn(13,"router-outlet"))},dependencies:[gv,wg,Cg,Fg,Vg]})};uR(Ug,h1).catch(t=>console.error(t));
