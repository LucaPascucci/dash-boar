import{$ as En,A as In,B as Rr,C as jd,D as $t,E as Vb,F as Ub,G as xr,H as As,I as uu,J as lu,K as du,L as Rs,M as jb,N as Bb,O as $b,P as Hb,Q as hu,R as fu,S as xe,T as Tt,U as rn,V as Nr,W as Kg,X as Bd,Y as bt,Z as xt,_ as ii,a as j,aa as qb,b as Te,ba as Nt,c as Hi,ca as $d,d as _,da as Z,e as B,ea as Gb,f as qo,g as xb,h as Nb,i as Mb,j as Pb,k as Ob,l as qi,m as zg,n as Wg,o as Go,p as nn,q as ou,r as kb,s as au,t as Ud,u as Fb,v as Ar,w as Lb,x as ri,y as Ds,z as cu}from"./chunk-VUN4IAWB.js";function zb(n,e){return Object.is(n,e)}var Ut=null,pu=!1,Hd=1,Mr=Symbol("SIGNAL");function Ne(n){let e=Ut;return Ut=n,e}function Wb(){return Ut}function RL(){return pu}var zo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Jg(n){if(pu)throw new Error("");if(Ut===null)return;Ut.consumerOnSignalRead(n);let e=Ut.nextProducerIndex++;if(Qd(Ut),e<Ut.producerNode.length&&Ut.producerNode[e]!==n&&mu(Ut)){let t=Ut.producerNode[e];Kd(t,Ut.producerIndexOfThis[e])}Ut.producerNode[e]!==n&&(Ut.producerNode[e]=n,Ut.producerIndexOfThis[e]=mu(Ut)?Jb(n,Ut,e):0),Ut.producerLastReadVersion[e]=n.version}function xL(){Hd++}function Kb(n){if(!(mu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Hd)){if(!n.producerMustRecompute(n)&&!zd(n)){n.dirty=!1,n.lastCleanEpoch=Hd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Hd}}function Qb(n){if(n.liveConsumerNode===void 0)return;let e=pu;pu=!0;try{for(let t of n.liveConsumerNode)t.dirty||Zb(t)}finally{pu=e}}function Yb(){return Ut?.consumerAllowSignalWrites!==!1}function Zb(n){n.dirty=!0,Qb(n),n.consumerMarkedDirty?.(n)}function gu(n){return n&&(n.nextProducerIndex=0),Ne(n)}function Gd(n,e){if(Ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(mu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Kd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function zd(n){Qd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Kb(t),r!==t.version))return!0}return!1}function Wd(n){if(Qd(n),mu(n))for(let e=0;e<n.producerNode.length;e++)Kd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Jb(n,e,t){if(Xb(n),n.liveConsumerNode.length===0&&eS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Jb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Kd(n,e){if(Xb(n),n.liveConsumerNode.length===1&&eS(n))for(let r=0;r<n.producerNode.length;r++)Kd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Qd(i),i.producerIndexOfThis[r]=e}}function mu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Qd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Xb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function eS(n){return n.producerNode!==void 0}function tS(n){let e=Object.create(NL);e.computation=n;let t=()=>{if(Kb(e),Jg(e),e.value===qd)throw e.error;return e.value};return t[Mr]=e,t}var Qg=Symbol("UNSET"),Yg=Symbol("COMPUTING"),qd=Symbol("ERRORED"),NL=Te(j({},zo),{value:Qg,dirty:!0,error:null,equal:zb,producerMustRecompute(n){return n.value===Qg||n.value===Yg},producerRecomputeValue(n){if(n.value===Yg)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Yg;let t=gu(n),r;try{r=n.computation()}catch(i){r=qd,n.error=i}finally{Gd(n,t)}if(e!==Qg&&e!==qd&&r!==qd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function ML(){throw new Error}var nS=ML;function rS(){nS()}function iS(n){nS=n}var PL=null;function sS(n){let e=Object.create(aS);e.value=n;let t=()=>(Jg(e),e.value);return t[Mr]=e,t}function Xg(n,e){Yb()||rS(),n.equal(n.value,e)||(n.value=e,OL(n))}function oS(n,e){Yb()||rS(),Xg(n,e(n.value))}var aS=Te(j({},zo),{equal:zb,value:void 0});function OL(n){n.version++,xL(),Qb(n),PL?.()}function cS(n,e,t){let r=Object.create(kL);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Wd(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Zg)}let a=()=>{if(r.fn===null)return;if(RL())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!zd(r))return;r.hasRun=!0;let c=gu(r);try{r.cleanupFn(),r.cleanupFn=Zg,r.fn(i)}finally{Gd(r,c)}};return r.ref={notify:()=>Zb(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Mr]:r},r.ref}var Zg=()=>{},kL=Te(j({},zo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Zg});function fe(n){return typeof n=="function"}function Wo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Yd=Wo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function xs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var yt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(fe(r))try{r()}catch(s){e=s instanceof Yd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{uS(s)}catch(o){e=e??[],o instanceof Yd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Yd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)uS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&xs(t,e)}remove(e){let{_finalizers:t}=this;t&&xs(t,e),e instanceof n&&e._removeParent(this)}};yt.EMPTY=(()=>{let n=new yt;return n.closed=!0,n})();var ev=yt.EMPTY;function Zd(n){return n instanceof yt||n&&"closed"in n&&fe(n.remove)&&fe(n.add)&&fe(n.unsubscribe)}function uS(n){fe(n)?n():n.unsubscribe()}var fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ko={setTimeout(n,e,...t){let{delegate:r}=Ko;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ko;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Jd(n){Ko.setTimeout(()=>{let{onUnhandledError:e}=fr;if(e)e(n);else throw n})}function vu(){}var lS=tv("C",void 0,void 0);function dS(n){return tv("E",void 0,n)}function hS(n){return tv("N",n,void 0)}function tv(n,e,t){return{kind:n,value:e,error:t}}var Ns=null;function Qo(n){if(fr.useDeprecatedSynchronousErrorHandling){let e=!Ns;if(e&&(Ns={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ns;if(Ns=null,t)throw r}}else n()}function fS(n){fr.useDeprecatedSynchronousErrorHandling&&Ns&&(Ns.errorThrown=!0,Ns.error=n)}var Ms=class extends yt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Zd(e)&&e.add(this)):this.destination=VL}static create(e,t,r){return new Yo(e,t,r)}next(e){this.isStopped?rv(hS(e),this):this._next(e)}error(e){this.isStopped?rv(dS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?rv(lS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},FL=Function.prototype.bind;function nv(n,e){return FL.call(n,e)}var iv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Xd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Xd(r)}else Xd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Xd(t)}}},Yo=class extends Ms{constructor(e,t,r){super();let i;if(fe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&fr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&nv(e.next,s),error:e.error&&nv(e.error,s),complete:e.complete&&nv(e.complete,s)}):i=e}this.destination=new iv(i)}};function Xd(n){fr.useDeprecatedSynchronousErrorHandling?fS(n):Jd(n)}function LL(n){throw n}function rv(n,e){let{onStoppedNotification:t}=fr;t&&Ko.setTimeout(()=>t(n,e))}var VL={closed:!0,next:vu,error:LL,complete:vu};var Zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function pn(n){return n}function eh(...n){return sv(n)}function sv(n){return n.length===0?pn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var de=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=jL(t)?t:new Yo(t,r,i);return Qo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=pS(r),new r((i,s)=>{let o=new Yo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Zo](){return this}pipe(...t){return sv(t)(this)}toPromise(t){return t=pS(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function pS(n){var e;return(e=n??fr.Promise)!==null&&e!==void 0?e:Promise}function UL(n){return n&&fe(n.next)&&fe(n.error)&&fe(n.complete)}function jL(n){return n&&n instanceof Ms||UL(n)&&Zd(n)}function ov(n){return fe(n?.lift)}function ye(n){return e=>{if(ov(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function me(n,e,t,r,i){return new _u(n,e,t,r,i)}var _u=class extends Ms{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Jo(){return ye((n,e)=>{let t=null;n._refCount++;let r=me(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Xo=class extends de{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,ov(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new yt;let t=this.getSubject();e.add(this.source.subscribe(me(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=yt.EMPTY)}return e}refCount(){return Jo()(this)}};var mS=Wo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ht=(()=>{class n extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new th(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new mS}next(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ev:(this.currentObservers=null,s.push(t),new yt(()=>{this.currentObservers=null,xs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new de;return t.source=this,t}}return n.create=(e,t)=>new th(e,t),n})(),th=class extends ht{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:ev}};var Qt=class extends ht{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var yu={now(){return(yu.delegate||Date).now()},delegate:void 0};var wu=class extends ht{constructor(e=1/0,t=1/0,r=yu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var nh=class extends yt{constructor(e,t){super()}schedule(e,t=0){return this}};var Iu={setInterval(n,e,...t){let{delegate:r}=Iu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Iu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ea=class extends nh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Iu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Iu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,xs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ta=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ta.now=yu.now;var na=class extends ta{constructor(e,t=ta.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var ra=new na(ea),av=ra;var rh=class extends ea{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var ih=class extends na{};var cv=new ih(rh);var Vn=new de(n=>n.complete());function sh(n){return n&&fe(n.schedule)}function gS(n){return n[n.length-1]}function oh(n){return fe(gS(n))?n.pop():void 0}function Gi(n){return sh(gS(n))?n.pop():void 0}function uv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function _S(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function vS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ps(n){return this instanceof Ps?(this.v=n,this):new Ps(n)}function yS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(w){return Promise.resolve(w).then(v,f)}}function a(v,w){r[v]&&(i[v]=function(N){return new Promise(function(R,L){s.push([v,N,R,L])>1||c(v,N)})},w&&(i[v]=w(i[v])))}function c(v,w){try{l(r[v](w))}catch(N){m(s[0][3],N)}}function l(v){v.value instanceof Ps?Promise.resolve(v.value.v).then(d,f):m(s[0][2],v)}function d(v){c("next",v)}function f(v){c("throw",v)}function m(v,w){v(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function wS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof vS=="function"?vS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var ah=n=>n&&typeof n.length=="number"&&typeof n!="function";function ch(n){return fe(n?.then)}function uh(n){return fe(n[Zo])}function lh(n){return Symbol.asyncIterator&&fe(n?.[Symbol.asyncIterator])}function dh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function BL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var hh=BL();function fh(n){return fe(n?.[hh])}function ph(n){return yS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Ps(t.read());if(i)return yield Ps(void 0);yield yield Ps(r)}}finally{t.releaseLock()}})}function mh(n){return fe(n?.getReader)}function wt(n){if(n instanceof de)return n;if(n!=null){if(uh(n))return $L(n);if(ah(n))return HL(n);if(ch(n))return qL(n);if(lh(n))return IS(n);if(fh(n))return GL(n);if(mh(n))return zL(n)}throw dh(n)}function $L(n){return new de(e=>{let t=n[Zo]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function HL(n){return new de(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function qL(n){return new de(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Jd)})}function GL(n){return new de(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function IS(n){return new de(e=>{WL(n,e).catch(t=>e.error(t))})}function zL(n){return IS(ph(n))}function WL(n,e){var t,r,i,s;return _S(this,void 0,void 0,function*(){try{for(t=wS(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Cn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function zi(n,e=0){return ye((t,r)=>{t.subscribe(me(r,i=>Cn(r,n,()=>r.next(i),e),()=>Cn(r,n,()=>r.complete(),e),i=>Cn(r,n,()=>r.error(i),e)))})}function Wi(n,e=0){return ye((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function ES(n,e){return wt(n).pipe(Wi(e),zi(e))}function CS(n,e){return wt(n).pipe(Wi(e),zi(e))}function TS(n,e){return new de(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bS(n,e){return new de(t=>{let r;return Cn(t,e,()=>{r=n[hh](),Cn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>fe(r?.return)&&r.return()})}function gh(n,e){if(!n)throw new Error("Iterable cannot be null");return new de(t=>{Cn(t,e,()=>{let r=n[Symbol.asyncIterator]();Cn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function SS(n,e){return gh(ph(n),e)}function DS(n,e){if(n!=null){if(uh(n))return ES(n,e);if(ah(n))return TS(n,e);if(ch(n))return CS(n,e);if(lh(n))return gh(n,e);if(fh(n))return bS(n,e);if(mh(n))return SS(n,e)}throw dh(n)}function ct(n,e){return e?DS(n,e):wt(n)}function ne(...n){let e=Gi(n);return ct(n,e)}function ia(n,e){let t=fe(n)?n:()=>n,r=i=>i.error(t());return new de(e?i=>e.schedule(r,0,i):r)}function lv(n){return!!n&&(n instanceof de||fe(n.lift)&&fe(n.subscribe))}var si=Wo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function AS(n){return n instanceof Date&&!isNaN(n)}function Q(n,e){return ye((t,r)=>{let i=0;t.subscribe(me(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:KL}=Array;function QL(n,e){return KL(e)?n(...e):n(e)}function vh(n){return Q(e=>QL(n,e))}var{isArray:YL}=Array,{getPrototypeOf:ZL,prototype:JL,keys:XL}=Object;function _h(n){if(n.length===1){let e=n[0];if(YL(e))return{args:e,keys:null};if(eV(e)){let t=XL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function eV(n){return n&&typeof n=="object"&&ZL(n)===JL}function yh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Je(...n){let e=Gi(n),t=oh(n),{args:r,keys:i}=_h(n);if(r.length===0)return ct([],e);let s=new de(tV(r,e,i?o=>yh(i,o):pn));return t?s.pipe(vh(t)):s}function tV(n,e,t=pn){return r=>{RS(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)RS(e,()=>{let l=ct(n[c],e),d=!1;l.subscribe(me(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function RS(n,e,t){n?Cn(t,n,e):e()}function xS(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,m=()=>{f&&!c.length&&!l&&e.complete()},v=N=>l<r?w(N):c.push(N),w=N=>{s&&e.next(N),l++;let R=!1;wt(t(N,d++)).subscribe(me(e,L=>{i?.(L),s?v(L):e.next(L)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;c.length&&l<r;){let L=c.shift();o?Cn(e,o,()=>w(L)):w(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(me(e,v,()=>{f=!0,m()})),()=>{a?.()}}function St(n,e,t=1/0){return fe(e)?St((r,i)=>Q((s,o)=>e(r,s,i,o))(wt(n(r,i))),t):(typeof e=="number"&&(t=e),ye((r,i)=>xS(r,i,n,t)))}function dv(n=1/0){return St(pn,n)}function NS(){return dv(1)}function sa(...n){return NS()(ct(n,Gi(n)))}function wh(n){return new de(e=>{wt(n()).subscribe(e)})}function hv(...n){let e=oh(n),{args:t,keys:r}=_h(n),i=new de(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;wt(t[d]).subscribe(me(s,m=>{f||(f=!0,l--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?yh(r,a):a),s.complete())}))}});return e?i.pipe(vh(e)):i}function fv(n=0,e,t=av){let r=-1;return e!=null&&(sh(e)?t=e:r=e),new de(i=>{let s=AS(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Yt(n=0,e=ra){return n<0&&(n=0),fv(n,n,e)}function mn(n,e){return ye((t,r)=>{let i=0;t.subscribe(me(r,s=>n.call(e,s,i++)&&r.next(s)))})}function Ki(n){return ye((e,t)=>{let r=null,i=!1,s;r=e.subscribe(me(t,void 0,void 0,o=>{s=wt(n(o,Ki(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function MS(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(me(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Os(n,e){return fe(e)?St(n,e,1):St(n,1)}function Qi(n){return ye((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function oi(n){return n<=0?()=>Vn:ye((e,t)=>{let r=0;e.subscribe(me(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function pv(n){return Q(()=>n)}function Ih(n,e=pn){return n=n??nV,ye((t,r)=>{let i,s=!0;t.subscribe(me(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function nV(n,e){return n===e}function Eh(n=rV){return ye((e,t)=>{let r=!1;e.subscribe(me(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function rV(){return new si}function Eu(n){return ye((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Pr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mn((i,s)=>n(i,s,r)):pn,oi(1),t?Qi(e):Eh(()=>new si))}function mv(n,e,t,r){return ye((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(s)},l=w=>c(N=>N.error(w)),d=0,f=!1,m=new _u(s,w=>{try{let N=n(w),R=a.get(N);if(!R){a.set(N,R=r?r():new ht);let L=v(N,R);if(s.next(L),t){let q=me(R,()=>{R.complete(),q?.unsubscribe()},void 0,void 0,()=>a.delete(N));m.add(wt(t(L)).subscribe(q))}}R.next(o?o(w):w)}catch(N){l(N)}},()=>c(w=>w.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(m);function v(w,N){let R=new de(L=>{d++;let q=N.subscribe(L);return()=>{q.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return R.key=w,R}})}function oa(n){return n<=0?()=>Vn:ye((e,t)=>{let r=[];e.subscribe(me(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function gv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?mn((i,s)=>n(i,s,r)):pn,oa(1),t?Qi(e):Eh(()=>new si))}function Ch(){return ye((n,e)=>{let t,r=!1;n.subscribe(me(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Th(n,e){return ye(MS(n,e,arguments.length>=2,!0))}function aa(...n){let e=Gi(n);return ye((t,r)=>{(e?sa(n,t,e):sa(n,t)).subscribe(r)})}function Tn(n,e){return ye((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(me(r,c=>{i?.unsubscribe();let l=0,d=s++;wt(n(c,d)).subscribe(i=me(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ht(n){return ye((e,t)=>{wt(n).subscribe(me(t,()=>t.complete(),vu)),!t.closed&&e.subscribe(t)})}function jt(n,e,t){let r=fe(n)||e||t?{next:n,error:e,complete:t}:n;return r?ye((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(me(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):pn}var iV="https://g.co/ng/security#xss",Y=class extends Error{constructor(e,t){super(E_(e,t)),this.code=e}};function E_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Ou(n){return{toString:n}.toString()}var bh="__parameters__";function sV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function vD(n,e,t){return Ou(()=>{let r=sV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(bh)?c[bh]:Object.defineProperty(c,bh,{value:[]})[bh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Cu=globalThis;function Xe(n){for(let e in n)if(n[e]===Xe)return e;throw Error("Could not find renamed property on target object.")}function oV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Sn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Sn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function PS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var aV=Xe({__forward_ref__:Xe});function Xn(n){return n.__forward_ref__=Xn,n.toString=function(){return Sn(this())},n}function gn(n){return _D(n)?n():n}function _D(n){return typeof n=="function"&&n.hasOwnProperty(aV)&&n.__forward_ref__===Xn}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zs(n){return{providers:n.providers||[],imports:n.imports||[]}}function af(n){return OS(n,wD)||OS(n,ID)}function yD(n){return af(n)!==null}function OS(n,e){return n.hasOwnProperty(e)?n[e]:null}function cV(n){let e=n&&(n[wD]||n[ID]);return e||null}function kS(n){return n&&(n.hasOwnProperty(FS)||n.hasOwnProperty(uV))?n[FS]:null}var wD=Xe({\u0275prov:Xe}),FS=Xe({\u0275inj:Xe}),ID=Xe({ngInjectableDef:Xe}),uV=Xe({ngInjectorDef:Xe}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ED(n){return n&&!!n.\u0275providers}var lV=Xe({\u0275cmp:Xe}),dV=Xe({\u0275dir:Xe}),hV=Xe({\u0275pipe:Xe}),fV=Xe({\u0275mod:Xe}),kh=Xe({\u0275fac:Xe}),Su=Xe({__NG_ELEMENT_ID__:Xe}),LS=Xe({__NG_ENV_ID__:Xe});function C_(n){return typeof n=="string"?n:n==null?"":String(n)}function pV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():C_(n)}function mV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Y(-200,n)}function T_(n,e){throw new Y(-201,!1)}var Ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ie||{}),xv;function CD(){return xv}function bn(n){let e=xv;return xv=n,e}function TD(n,e,t){let r=af(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ie.Optional)return null;if(e!==void 0)return e;T_(n,"Injector")}var gV={},Du=gV,Nv="__NG_DI_FLAG__",Fh="ngTempTokenPath",vV="ngTokenPath",_V=/\n/gm,yV="\u0275",VS="__source",da;function wV(){return da}function Yi(n){let e=da;return da=n,e}function IV(n,e=Ie.Default){if(da===void 0)throw new Y(-203,!1);return da===null?TD(n,void 0,e):da.get(n,e&Ie.Optional?null:void 0,e)}function se(n,e=Ie.Default){return(CD()||IV)(gn(n),e)}function M(n,e=Ie.Default){return se(n,cf(e))}function cf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Mv(n){let e=[];for(let t=0;t<n.length;t++){let r=gn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Y(900,!1);let i,s=Ie.Default;for(let o=0;o<r.length;o++){let a=r[o],c=EV(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(se(i,s))}else e.push(se(r))}return e}function bD(n,e){return n[Nv]=e,n.prototype[Nv]=e,n}function EV(n){return n[Nv]}function CV(n,e,t,r){let i=n[Fh];throw e[VS]&&i.unshift(e[VS]),n.message=TV(`
`+n.message,i,t,r),n[vV]=i,n[Fh]=null,n}function TV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yV?n.slice(2):n;let i=Sn(e);if(Array.isArray(e))i=e.map(Sn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Sn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(_V,`
  `)}`}var ce=bD(vD("Optional"),8);var SD=bD(vD("SkipSelf"),4);function Ls(n,e){let t=n.hasOwnProperty(kh);return t?n[kh]:null}function b_(n,e){n.forEach(t=>Array.isArray(t)?b_(t,e):e(t))}function DD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Lh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function bV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function SV(n,e,t){let r=ku(n,e);return r>=0?n[r|1]=t:(r=~r,bV(n,r,e,t)),r}function vv(n,e){let t=ku(n,e);if(t>=0)return n[t|1]}function ku(n,e){return DV(n,e,1)}function DV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var fa={},Kn=[],pa=new H(""),AD=new H("",-1),RD=new H(""),Vh=class{get(e,t=Du){if(t===Du){let r=new Error(`NullInjectorError: No provider for ${Sn(e)}!`);throw r.name="NullInjectorError",r}return t}},xD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(xD||{}),Fr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Fr||{}),Xi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Xi||{});function AV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Pv(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];xV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function RV(n){return n===3||n===4||n===6}function xV(n){return n.charCodeAt(0)===64}function Au(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?US(n,t,i,null,e[++r]):US(n,t,i,null,null))}}return n}function US(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var ND="ng-template";function NV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&AV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(S_(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function S_(n){return n.type===4&&n.value!==ND}function MV(n,e,t){let r=n.type===4&&!t?ND:n.value;return e===r}function PV(n,e,t){let r=4,i=n.attrs,s=i!==null?FV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!pr(r)&&!pr(c))return!1;if(o&&pr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!MV(n,c,t)||c===""&&e.length===1){if(pr(r))return!1;o=!0}}else if(r&8){if(i===null||!NV(n,i,c,t)){if(pr(r))return!1;o=!0}}else{let l=e[++a],d=OV(c,i,S_(n),t);if(d===-1){if(pr(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(pr(r))return!1;o=!0}}}}return pr(r)||o}function pr(n){return(n&1)===0}function OV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return LV(e,n)}function kV(n,e,t=!1){for(let r=0;r<e.length;r++)if(PV(n,e[r],t))return!0;return!1}function FV(n){for(let e=0;e<n.length;e++){let t=n[e];if(RV(t))return e}return n.length}function LV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function jS(n,e){return n?":not("+e.trim()+")":e}function VV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!pr(o)&&(e+=jS(s,i),i=""),r=o,s=s||!pr(r);t++}return i!==""&&(e+=jS(s,i)),e}function UV(n){return n.map(VV).join(",")}function jV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!pr(i))break;i=s}r++}return{attrs:e,classes:t}}function We(n){return Ou(()=>{let e=LD(n),t=Te(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===xD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Fr.Emulated,styles:n.styles||Kn,_:null,schemas:n.schemas||null,tView:null,id:""});VD(t);let r=n.dependencies;return t.directiveDefs=$S(r,!1),t.pipeDefs=$S(r,!0),t.id=HV(t),t})}function BV(n){return Vs(n)||PD(n)}function $V(n){return n!==null}function Ws(n){return Ou(()=>({type:n.type,bootstrap:n.bootstrap||Kn,declarations:n.declarations||Kn,imports:n.imports||Kn,exports:n.exports||Kn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function BS(n,e){if(n==null)return fa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Xi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Xi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function ft(n){return Ou(()=>{let e=LD(n);return VD(e),e})}function MD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Vs(n){return n[lV]||null}function PD(n){return n[dV]||null}function OD(n){return n[hV]||null}function kD(n){let e=Vs(n)||PD(n)||OD(n);return e!==null?e.standalone:!1}function FD(n,e){let t=n[fV]||null;if(!t&&e===!0)throw new Error(`Type ${Sn(n)} does not have '\u0275mod' property.`);return t}function LD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||fa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Kn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:BS(n.inputs,e),outputs:BS(n.outputs),debugInfo:null}}function VD(n){n.features?.forEach(e=>e(n))}function $S(n,e){if(!n)return null;let t=e?OD:BV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter($V)}function HV(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nt(n){return{\u0275providers:n}}function qV(...n){return{\u0275providers:UD(!0,n),\u0275fromNgModule:!0}}function UD(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return b_(e,o=>{let a=o;Ov(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&jD(i,s),t}function jD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];D_(i,s=>{e(s,r)})}}function Ov(n,e,t,r){if(n=gn(n),!n)return!1;let i=null,s=kS(n),o=!s&&Vs(n);if(!s&&!o){let c=n.ngModule;if(s=kS(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Ov(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{b_(s.imports,d=>{Ov(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&jD(l,e)}if(!a){let l=Ls(i)||(()=>new i);e({provide:i,useFactory:l,deps:Kn},i),e({provide:RD,useValue:i,multi:!0},i),e({provide:pa,useValue:()=>se(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;D_(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function D_(n,e){for(let t of n)ED(t)&&(t=t.\u0275providers),Array.isArray(t)?D_(t,e):e(t)}var GV=Xe({provide:String,useValue:Xe});function BD(n){return n!==null&&typeof n=="object"&&GV in n}function zV(n){return!!(n&&n.useExisting)}function WV(n){return!!(n&&n.useFactory)}function ma(n){return typeof n=="function"}function KV(n){return!!n.useClass}var uf=new H(""),Rh={},QV={},_v;function A_(){return _v===void 0&&(_v=new Vh),_v}var Yn=class{},Ru=class extends Yn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Fv(e,o=>this.processProvider(o)),this.records.set(AD,ca(void 0,this)),i.has("environment")&&this.records.set(Yn,ca(void 0,this));let s=this.records.get(uf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(RD,Kn,Ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Yi(this),r=bn(void 0),i;try{return e()}finally{Yi(t),bn(r)}}get(e,t=Du,r=Ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(LS))return e[LS](this);r=cf(r);let i,s=Yi(this),o=bn(void 0);try{if(!(r&Ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=eU(e)&&af(e);l&&this.injectableDefInScope(l)?c=ca(kv(e),Rh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ie.Self?A_():this.parent;return t=r&Ie.Optional&&t===Du?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Fh]=a[Fh]||[]).unshift(Sn(e)),s)throw a;return CV(a,e,"R3InjectorError",this.source)}else throw a}finally{bn(o),Yi(s)}}resolveInjectorInitializers(){let e=Ne(null),t=Yi(this),r=bn(void 0),i;try{let s=this.get(pa,Kn,Ie.Self);for(let o of s)o()}finally{Yi(t),bn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Sn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Y(205,!1)}processProvider(e){e=gn(e);let t=ma(e)?e:gn(e&&e.provide),r=ZV(e);if(!ma(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ca(void 0,Rh,!0),i.factory=()=>Mv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ne(null);try{return t.value===Rh&&(t.value=QV,t.value=t.factory()),typeof t.value=="object"&&t.value&&XV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=gn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function kv(n){let e=af(n),t=e!==null?e.factory:Ls(n);if(t!==null)return t;if(n instanceof H)throw new Y(204,!1);if(n instanceof Function)return YV(n);throw new Y(204,!1)}function YV(n){if(n.length>0)throw new Y(204,!1);let t=cV(n);return t!==null?()=>t.factory(n):()=>new n}function ZV(n){if(BD(n))return ca(void 0,n.useValue);{let e=$D(n);return ca(e,Rh)}}function $D(n,e,t){let r;if(ma(n)){let i=gn(n);return Ls(i)||kv(i)}else if(BD(n))r=()=>gn(n.useValue);else if(WV(n))r=()=>n.useFactory(...Mv(n.deps||[]));else if(zV(n))r=()=>se(gn(n.useExisting));else{let i=gn(n&&(n.useClass||n.provide));if(JV(n))r=()=>new i(...Mv(n.deps));else return Ls(i)||kv(i)}return r}function ca(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JV(n){return!!n.deps}function XV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function eU(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Fv(n,e){for(let t of n)Array.isArray(t)?Fv(t,e):t&&ED(t)?Fv(t.\u0275providers,e):e(t)}function di(n,e){n instanceof Ru&&n.assertNotDestroyed();let t,r=Yi(n),i=bn(void 0);try{return e()}finally{Yi(r),bn(i)}}function HD(){return CD()!==void 0||wV()!=null}function lf(n){if(!HD())throw new Y(-203,!1)}function tU(n){return typeof n=="function"}var hi=0,Ee=1,ae=2,vn=3,mr=4,gr=5,Uh=6,jh=7,Zn=8,ga=9,ai=10,Bt=11,xu=12,HS=13,Ca=14,Lr=15,va=16,ua=17,_a=18,df=19,qD=20,Zi=21,xh=22,Qn=23,Jn=25,GD=1;var Us=7,Bh=8,$h=9,Un=10,Hh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Hh||{});function Ji(n){return Array.isArray(n)&&typeof n[GD]=="object"}function fi(n){return Array.isArray(n)&&n[GD]===!0}function zD(n){return(n.flags&4)!==0}function hf(n){return n.componentOffset>-1}function R_(n){return(n.flags&1)===1}function es(n){return!!n.template}function Lv(n){return(n[ae]&512)!==0}var Vv=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function WD(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function pi(){return KD}function KD(n){return n.type.prototype.ngOnChanges&&(n.setInput=rU),nU}pi.ngInherit=!0;function nU(){let n=YD(this),e=n?.current;if(e){let t=n.previous;if(t===fa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function rU(n,e,t,r,i){let s=this.declaredInputs[r],o=YD(n)||iU(n,{previous:fa,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Vv(l&&l.currentValue,t,c===fa),WD(n,e,i,t)}var QD="__ngSimpleChanges__";function YD(n){return n[QD]||null}function iU(n,e){return n[QD]=e}var qS=null;var Or=function(n,e,t){qS?.(n,e,t)},sU="svg",oU="math";function Vr(n){for(;Array.isArray(n);)n=n[hi];return n}function ZD(n,e){return Vr(e[n])}function er(n,e){return Vr(e[n.index])}function x_(n,e){return n.data[e]}function aU(n,e){return n[e]}function rs(n,e){let t=e[n];return Ji(t)?t:t[hi]}function N_(n){return(n[ae]&128)===128}function cU(n){return fi(n[vn])}function qh(n,e){return e==null?null:n[e]}function JD(n){n[ua]=0}function XD(n){n[ae]&1024||(n[ae]|=1024,N_(n)&&pf(n))}function uU(n,e){for(;n>0;)e=e[Ca],n--;return e}function ff(n){return!!(n[ae]&9216||n[Qn]?.dirty)}function Uv(n){n[ai].changeDetectionScheduler?.notify(8),n[ae]&64&&(n[ae]|=1024),ff(n)&&pf(n)}function pf(n){n[ai].changeDetectionScheduler?.notify(0);let e=js(n);for(;e!==null&&!(e[ae]&8192||(e[ae]|=8192,!N_(e)));)e=js(e)}function eA(n,e){if((n[ae]&256)===256)throw new Y(911,!1);n[Zi]===null&&(n[Zi]=[]),n[Zi].push(e)}function lU(n,e){if(n[Zi]===null)return;let t=n[Zi].indexOf(e);t!==-1&&n[Zi].splice(t,1)}function js(n){let e=n[vn];return fi(e)?e[vn]:e}var be={lFrame:uA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var tA=!1;function dU(){return be.lFrame.elementDepthCount}function hU(){be.lFrame.elementDepthCount++}function fU(){be.lFrame.elementDepthCount--}function nA(){return be.bindingsEnabled}function pU(){return be.skipHydrationRootTNode!==null}function mU(n){return be.skipHydrationRootTNode===n}function gU(){be.skipHydrationRootTNode=null}function Ge(){return be.lFrame.lView}function Dn(){return be.lFrame.tView}function qt(n){return be.lFrame.contextLView=n,n[Zn]}function Gt(n){return be.lFrame.contextLView=null,n}function An(){let n=rA();for(;n!==null&&n.type===64;)n=n.parent;return n}function rA(){return be.lFrame.currentTNode}function vU(){let n=be.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Fu(n,e){let t=be.lFrame;t.currentTNode=n,t.isParent=e}function iA(){return be.lFrame.isParent}function _U(){be.lFrame.isParent=!1}function sA(){return tA}function GS(n){tA=n}function M_(){let n=be.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function yU(n){return be.lFrame.bindingIndex=n}function Lu(){return be.lFrame.bindingIndex++}function wU(n){let e=be.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function IU(){return be.lFrame.inI18n}function EU(n,e){let t=be.lFrame;t.bindingIndex=t.bindingRootIndex=n,jv(e)}function CU(){return be.lFrame.currentDirectiveIndex}function jv(n){be.lFrame.currentDirectiveIndex=n}function TU(n){let e=be.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function oA(n){be.lFrame.currentQueryIndex=n}function bU(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[gr]:null}function aA(n,e,t){if(t&Ie.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Ie.Host);)if(i=bU(s),i===null||(s=s[Ca],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=be.lFrame=cA();return r.currentTNode=e,r.lView=n,!0}function P_(n){let e=cA(),t=n[Ee];be.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cA(){let n=be.lFrame,e=n===null?null:n.child;return e===null?uA(n):e}function uA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function lA(){let n=be.lFrame;return be.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var dA=lA;function O_(){let n=lA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function SU(n){return(be.lFrame.contextLView=uU(n,be.lFrame.contextLView))[Zn]}function Ta(){return be.lFrame.selectedIndex}function Bs(n){be.lFrame.selectedIndex=n}function k_(){let n=be.lFrame;return x_(n.tView,n.selectedIndex)}function DU(){return be.lFrame.currentNamespace}var hA=!0;function F_(){return hA}function L_(n){hA=n}function AU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=KD(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function V_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Nh(n,e,t){fA(n,e,3,t)}function Mh(n,e,t,r){(n[ae]&3)===t&&fA(n,e,t,r)}function yv(n,e){let t=n[ae];(t&3)===e&&(t&=16383,t+=1,n[ae]=t)}function fA(n,e,t,r){let i=r!==void 0?n[ua]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ua]+=65536),(a<s||s==-1)&&(RU(n,t,e,c),n[ua]=(n[ua]&4294901760)+c+2),c++}function zS(n,e){Or(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),Or(5,n,e)}}function RU(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ae]>>14<n[ua]>>16&&(n[ae]&3)===e&&(n[ae]+=16384,zS(a,s)):zS(a,s)}var ha=-1,$s=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function xU(n){return n instanceof $s}function NU(n){return(n.flags&8)!==0}function MU(n){return(n.flags&16)!==0}var wv={},Bv=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=cf(r);let i=this.injector.get(e,wv,r);return i!==wv||t===wv?i:this.parentInjector.get(e,t,r)}};function pA(n){return n!==ha}function Gh(n){return n&32767}function PU(n){return n>>16}function zh(n,e){let t=PU(n),r=e;for(;t>0;)r=r[Ca],t--;return r}var $v=!0;function Wh(n){let e=$v;return $v=n,e}var OU=256,mA=OU-1,gA=5,kU=0,kr={};function FU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Su)&&(r=t[Su]),r==null&&(r=t[Su]=kU++);let i=r&mA,s=1<<i;e.data[n+(i>>gA)]|=s}function Kh(n,e){let t=vA(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,Iv(r.data,n),Iv(e,null),Iv(r.blueprint,null));let i=U_(n,e),s=n.injectorIndex;if(pA(i)){let o=Gh(i),a=zh(i,e),c=a[Ee].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Iv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function vA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function U_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=EA(i),r===null)return ha;if(t++,i=i[Ca],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ha}function Hv(n,e,t){FU(n,e,t)}function _A(n,e,t){if(t&Ie.Optional||n!==void 0)return n;T_(e,"NodeInjector")}function yA(n,e,t,r){if(t&Ie.Optional&&r===void 0&&(r=null),!(t&(Ie.Self|Ie.Host))){let i=n[ga],s=bn(void 0);try{return i?i.get(e,r,t&Ie.Optional):TD(e,r,t&Ie.Optional)}finally{bn(s)}}return _A(r,e,t)}function wA(n,e,t,r=Ie.Default,i){if(n!==null){if(e[ae]&2048&&!(r&Ie.Self)){let o=BU(n,e,t,r,kr);if(o!==kr)return o}let s=IA(n,e,t,r,kr);if(s!==kr)return s}return yA(e,t,r,i)}function IA(n,e,t,r,i){let s=UU(t);if(typeof s=="function"){if(!aA(e,n,r))return r&Ie.Host?_A(i,t,r):yA(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Ie.Optional))T_(t);else return o}finally{dA()}}else if(typeof s=="number"){let o=null,a=vA(n,e),c=ha,l=r&Ie.Host?e[Lr][gr]:null;for((a===-1||r&Ie.SkipSelf)&&(c=a===-1?U_(n,e):e[a+8],c===ha||!KS(r,!1)?a=-1:(o=e[Ee],a=Gh(c),e=zh(c,e)));a!==-1;){let d=e[Ee];if(WS(s,a,d.data)){let f=LU(a,e,t,o,r,l);if(f!==kr)return f}c=e[a+8],c!==ha&&KS(r,e[Ee].data[a+8]===l)&&WS(s,a,e)?(o=d,a=Gh(c),e=zh(c,e)):a=-1}}return i}function LU(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?hf(a)&&$v:r!=o&&(a.type&3)!==0,l=i&Ie.Host&&s===a,d=VU(a,o,t,c,l);return d!==null?ya(e,o,d,a):kr}function VU(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,m=i?a+d:l;for(let v=f;v<m;v++){let w=o[v];if(v<c&&t===w||v>=c&&w.type===t)return v}if(i){let v=o[c];if(v&&es(v)&&v.type===t)return c}return null}function ya(n,e,t,r){let i=n[t],s=e.data;if(xU(i)){let o=i;o.resolving&&mV(pV(s[t]));let a=Wh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?bn(o.injectImpl):null,d=aA(n,r,Ie.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&AU(t,s[t],e)}finally{l!==null&&bn(l),Wh(a),o.resolving=!1,dA()}}return i}function UU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Su)?n[Su]:void 0;return typeof e=="number"?e>=0?e&mA:jU:e}function WS(n,e,t){let r=1<<n;return!!(t[e+(n>>gA)]&r)}function KS(n,e){return!(n&Ie.Self)&&!(n&Ie.Host&&e)}var Fs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return wA(this._tNode,this._lView,e,cf(r),t)}};function jU(){return new Fs(An(),Ge())}function vr(n){return Ou(()=>{let e=n.prototype.constructor,t=e[kh]||qv(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[kh]||qv(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function qv(n){return _D(n)?()=>{let e=qv(gn(n));return e&&e()}:Ls(n)}function BU(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ae]&2048&&!(o[ae]&512);){let a=IA(s,o,t,r|Ie.Self,kr);if(a!==kr)return a;let c=s.parent;if(!c){let l=o[qD];if(l){let d=l.get(t,kr,r);if(d!==kr)return d}c=EA(o),o=o[Ca]}s=c}return i}function EA(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[gr]:null}function QS(n,e=null,t=null,r){let i=CA(n,e,t,r);return i.resolveInjectorInitializers(),i}function CA(n,e=null,t=null,r,i=new Set){let s=[t||Kn,qV(n)];return r=r||(typeof n=="object"?void 0:Sn(n)),new Ru(s,e||A_(),r||null,i)}var Ae=class n{static{this.THROW_IF_NOT_FOUND=Du}static{this.NULL=new Vh}static create(e,t){if(Array.isArray(e))return QS({name:""},t,e,"");{let r=e.name??"";return QS({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:n,providedIn:"any",factory:()=>se(AD)})}static{this.__NG_ELEMENT_ID__=-1}};var $U=new H("");$U.__NG_ELEMENT_ID__=n=>{let e=An();if(e===null)throw new Y(204,!1);if(e.type&2)return e.value;if(n&Ie.Optional)return null;throw new Y(204,!1)};var HU="ngOriginalError";function Ev(n){return n[HU]}var TA=!0,is=(()=>{class n{static{this.__NG_ELEMENT_ID__=qU}static{this.__NG_ENV_ID__=t=>t}}return n})(),Gv=class extends is{constructor(e){super(),this._lView=e}onDestroy(e){return eA(this._lView,e),()=>lU(this._lView,e)}};function qU(){return new Gv(Ge())}var Ks=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Qt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})();var zv=class extends ht{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,HD()&&(this.destroyRef=M(is,{optional:!0})??void 0,this.pendingTasks=M(Ks,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof yt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Mt=zv;function Qh(...n){}function bA(n){let e,t;function r(){n=Qh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function YS(n){return queueMicrotask(()=>n()),()=>{n=Qh}}var j_="isAngularZone",Yh=j_+"_ID",GU=0,ie=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mt(!1),this.onMicrotaskEmpty=new Mt(!1),this.onStable=new Mt(!1),this.onError=new Mt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=TA}=e;if(typeof Zone>"u")throw new Y(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,KU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(j_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Y(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Y(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,zU,Qh,Qh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},zU={};function B_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function WU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){bA(()=>{n.callbackScheduled=!1,Wv(n),n.isCheckStableRunning=!0,B_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Wv(n)}function KU(n){let e=()=>{WU(n)},t=GU++;n._inner=n._inner.fork({name:"angular",properties:{[j_]:!0,[Yh]:t,[Yh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(QU(c))return r.invokeTask(s,o,a,c);try{return ZS(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),JS(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return ZS(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!YU(c)&&e(),JS(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Wv(n),B_(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Wv(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function ZS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function JS(n){n._nesting--,B_(n)}var Kv=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mt,this.onMicrotaskEmpty=new Mt,this.onStable=new Mt,this.onError=new Mt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function QU(n){return SA(n,"__ignore_ng_zone__")}function YU(n){return SA(n,"__scheduler_tick__")}function SA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Ur=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ev(e);for(;t&&Ev(t);)t=Ev(t);return t||null}},ZU=new H("",{providedIn:"root",factory:()=>{let n=M(ie),e=M(Ur);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function JU(){return mf(An(),Ge())}function mf(n,e){return new jr(er(n,e))}var jr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=JU}}return n})();function DA(n){return(n.flags&128)===128}var AA=new Map,XU=0;function e2(){return XU++}function t2(n){AA.set(n[df],n)}function Qv(n){AA.delete(n[df])}var XS="__ngContext__";function Hs(n,e){Ji(e)?(n[XS]=e[df],t2(e)):n[XS]=e}function RA(n){return NA(n[xu])}function xA(n){return NA(n[mr])}function NA(n){for(;n!==null&&!fi(n);)n=n[mr];return n}var Yv;function MA(n){Yv=n}function n2(){if(Yv!==void 0)return Yv;if(typeof document<"u")return document;throw new Y(210,!1)}var $_=new H("",{providedIn:"root",factory:()=>r2}),r2="ng",H_=new H(""),_r=new H("",{providedIn:"platform",factory:()=>"unknown"});var q_=new H("",{providedIn:"root",factory:()=>n2().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var i2="h",s2="b";var o2=()=>null;function G_(n,e,t=!1){return o2(n,e,t)}var PA=!1,a2=new H("",{providedIn:"root",factory:()=>PA});var Zv=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${iV})`}};function z_(n){return n instanceof Zv?n.changingThisBreaksApplicationSecurity:n}function OA(n){return n instanceof Function?n():n}var ci=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ci||{}),c2;function W_(n,e){return c2(n,e)}function la(n,e,t,r,i){if(r!=null){let s,o=!1;fi(r)?s=r:Ji(r)&&(o=!0,r=r[hi]);let a=Vr(r);n===0&&t!==null?i==null?VA(e,t,a):Jh(e,t,a,i||null,!0):n===1&&t!==null?Jh(e,t,a,i||null,!0):n===2?C2(e,a,o):n===3&&e.destroyNode(a),s!=null&&b2(e,n,s,t,i)}}function u2(n,e){return n.createText(e)}function l2(n,e,t){n.setValue(e,t)}function kA(n,e,t){return n.createElement(e,t)}function d2(n,e){FA(n,e),e[hi]=null,e[gr]=null}function h2(n,e,t,r,i,s){r[hi]=i,r[gr]=e,gf(n,r,t,1,i,s)}function FA(n,e){e[ai].changeDetectionScheduler?.notify(9),gf(n,e,e[Bt],2,null,null)}function f2(n){let e=n[xu];if(!e)return Cv(n[Ee],n);for(;e;){let t=null;if(Ji(e))t=e[xu];else{let r=e[Un];r&&(t=r)}if(!t){for(;e&&!e[mr]&&e!==n;)Ji(e)&&Cv(e[Ee],e),e=e[vn];e===null&&(e=n),Ji(e)&&Cv(e[Ee],e),t=e&&e[mr]}e=t}}function p2(n,e,t,r){let i=Un+r,s=t.length;r>0&&(t[i-1][mr]=e),r<s-Un?(e[mr]=t[i],DD(t,Un+r,e)):(t.push(e),e[mr]=null),e[vn]=t;let o=e[va];o!==null&&t!==o&&LA(o,e);let a=e[_a];a!==null&&a.insertView(n),Uv(e),e[ae]|=128}function LA(n,e){let t=n[$h],r=e[vn];if(Ji(r))n[ae]|=Hh.HasTransplantedViews;else{let i=r[vn][Lr];e[Lr]!==i&&(n[ae]|=Hh.HasTransplantedViews)}t===null?n[$h]=[e]:t.push(e)}function K_(n,e){let t=n[$h],r=t.indexOf(e);t.splice(r,1)}function Zh(n,e){if(n.length<=Un)return;let t=Un+e,r=n[t];if(r){let i=r[va];i!==null&&i!==n&&K_(i,r),e>0&&(n[t-1][mr]=r[mr]);let s=Lh(n,Un+e);d2(r[Ee],r);let o=s[_a];o!==null&&o.detachView(s[Ee]),r[vn]=null,r[mr]=null,r[ae]&=-129}return r}function Q_(n,e){if(!(e[ae]&256)){let t=e[Bt];t.destroyNode&&gf(n,e,t,3,null,null),f2(e)}}function Cv(n,e){if(e[ae]&256)return;let t=Ne(null);try{e[ae]&=-129,e[ae]|=256,e[Qn]&&Wd(e[Qn]),g2(n,e),m2(n,e),e[Ee].type===1&&e[Bt].destroy();let r=e[va];if(r!==null&&fi(e[vn])){r!==e[vn]&&K_(r,e);let i=e[_a];i!==null&&i.detachView(n)}Qv(e)}finally{Ne(t)}}function m2(n,e){let t=n.cleanup,r=e[jh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[jh]=null);let i=e[Zi];if(i!==null){e[Zi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function g2(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof $s)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Or(4,a,c);try{c.call(a)}finally{Or(5,a,c)}}else{Or(4,i,s);try{s.call(i)}finally{Or(5,i,s)}}}}}function v2(n,e,t){return _2(n,e.parent,t)}function _2(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[hi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Fr.None||s===Fr.Emulated)return null}return er(r,t)}}function Jh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function VA(n,e,t){n.appendChild(e,t)}function eD(n,e,t,r,i){r!==null?Jh(n,e,t,r,i):VA(n,e,t)}function UA(n,e){return n.parentNode(e)}function y2(n,e){return n.nextSibling(e)}function w2(n,e,t){return E2(n,e,t)}function I2(n,e,t){return n.type&40?er(n,t):null}var E2=I2,tD;function Y_(n,e,t,r){let i=v2(n,r,e),s=e[Bt],o=r.parent||e[gr],a=w2(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)eD(s,i,t[c],a,!1);else eD(s,i,t,a,!1);tD!==void 0&&tD(s,r,e,t,i)}function Tu(n,e){if(e!==null){let t=e.type;if(t&3)return er(e,n);if(t&4)return Jv(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Tu(n,r);{let i=n[e.index];return fi(i)?Jv(-1,i):Vr(i)}}else{if(t&128)return Tu(n,e.next);if(t&32)return W_(e,n)()||Vr(n[e.index]);{let r=jA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=js(n[Lr]);return Tu(i,r)}else return Tu(n,e.next)}}}return null}function jA(n,e){if(e!==null){let r=n[Lr][gr],i=e.projection;return r.projection[i]}return null}function Jv(n,e){let t=Un+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Tu(r,i)}return e[Us]}function C2(n,e,t){n.removeChild(null,e,t)}function Z_(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Hs(Vr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Z_(n,e,t.child,r,i,s,!1),la(e,n,i,a,s);else if(c&32){let l=W_(t,r),d;for(;d=l();)la(e,n,i,d,s);la(e,n,i,a,s)}else c&16?T2(n,e,r,t,i,s):la(e,n,i,a,s);t=o?t.projectionNext:t.next}}function gf(n,e,t,r,i,s){Z_(t,r,n.firstChild,e,i,s,!1)}function T2(n,e,t,r,i,s){let o=t[Lr],c=o[gr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];la(e,n,i,d,s)}else{let l=c,d=o[vn];DA(r)&&(l.flags|=128),Z_(n,e,l,d,i,s,!0)}}function b2(n,e,t,r,i){let s=t[Us],o=Vr(t);s!==o&&la(e,n,r,s,i);for(let a=Un;a<t.length;a++){let c=t[a];gf(c[Ee],c,n,e,r,s)}}function S2(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ci.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ci.Important),n.setStyle(t,r,i,s))}}function D2(n,e,t){n.setAttribute(e,"style",t)}function BA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function $A(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Pv(n,e,r),i!==null&&BA(n,e,i),s!==null&&D2(n,e,s)}var ss={};function k(n=1){HA(Dn(),Ge(),Ta()+n,!1)}function HA(n,e,t,r){if(!r)if((e[ae]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Nh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Mh(e,s,0,t)}Bs(t)}function Se(n,e=Ie.Default){let t=Ge();if(t===null)return se(n,e);let r=An();return wA(r,t,gn(n),e)}function qA(n,e,t,r,i,s){let o=Ne(null);try{let a=null;i&Xi.SignalBased&&(a=e[r][Mr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Xi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):WD(e,a,r,s)}finally{Ne(o)}}function A2(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Bs(~i);else{let s=i,o=t[++r],a=t[++r];EU(o,s);let c=e[s];a(2,c)}}}finally{Bs(-1)}}function vf(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[hi]=i,f[ae]=r|4|128|8|64,(l!==null||n&&n[ae]&2048)&&(f[ae]|=2048),JD(f),f[vn]=f[Ca]=n,f[Zn]=t,f[ai]=o||n&&n[ai],f[Bt]=a||n&&n[Bt],f[ga]=c||n&&n[ga]||null,f[gr]=s,f[df]=e2(),f[Uh]=d,f[qD]=l,f[Lr]=e.type==2?n[Lr]:f,f}function _f(n,e,t,r,i){let s=n.data[e];if(s===null)s=R2(n,e,t,r,i),IU()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=vU();s.injectorIndex=o===null?-1:o.injectorIndex}return Fu(s,!0),s}function R2(n,e,t,r,i){let s=rA(),o=iA(),a=o?s:s&&s.parent,c=n.data[e]=O2(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function GA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function zA(n,e,t,r,i){let s=Ta(),o=r&2;try{Bs(-1),o&&e.length>Jn&&HA(n,e,Jn,!1),Or(o?2:0,i),t(r,i)}finally{Bs(s),Or(o?3:1,i)}}function WA(n,e,t){if(zD(e)){let r=Ne(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ne(r)}}}function KA(n,e,t){nA()&&(j2(n,e,t,er(t,e)),(t.flags&64)===64&&eR(n,e,t))}function QA(n,e,t=er){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function YA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=J_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function J_(n,e,t,r,i,s,o,a,c,l,d){let f=Jn+r,m=f+i,v=x2(f,m),w=typeof l=="function"?l():l;return v[Ee]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function x2(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ss);return t}function N2(n,e,t,r){let s=r.get(a2,PA)||t===Fr.ShadowDom,o=n.selectRootElement(e,s);return M2(o),o}function M2(n){P2(n)}var P2=()=>null;function O2(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return pU()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nD(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Xi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?rD(r,t,l,a,c):rD(r,t,l,a)}return r}function rD(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function k2(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],m=t?t.get(f):null,v=m?m.inputs:null,w=m?m.outputs:null;c=nD(0,f.inputs,d,c,v),l=nD(1,f.outputs,d,l,w);let N=c!==null&&o!==null&&!S_(e)?Z2(c,d,o):null;a.push(N)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function F2(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function ZA(n,e,t,r,i,s,o,a){let c=er(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(X_(n,t,d,r,i),hf(e)&&L2(t,e.index)):e.type&3?(r=F2(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function L2(n,e){let t=rs(e,n);t[ae]&16||(t[ae]|=64)}function JA(n,e,t,r){if(nA()){let i=r===null?null:{"":-1},s=$2(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&XA(n,e,t,o,i,a),i&&H2(t,r,i)}t.mergedAttrs=Au(t.mergedAttrs,t.attrs)}function XA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Hv(Kh(t,e),n,r[l].type);G2(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=GA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Au(t.mergedAttrs,d.hostAttrs),z2(n,t,e,c,d),q2(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}k2(n,t,s)}function V2(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;U2(o)!=a&&o.push(a),o.push(t,r,s)}}function U2(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function j2(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;hf(t)&&W2(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Kh(t,e),Hs(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=ya(e,n,a,t);if(Hs(l,e),o!==null&&Y2(e,a-i,l,c,t,o),es(c)){let d=rs(t.index,e);d[Zn]=ya(e,n,a,t)}}}function eR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=CU();try{Bs(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];jv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&B2(c,l)}}finally{Bs(-1),jv(o)}}function B2(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function $2(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(kV(e,o.selectors,!1))if(r||(r=[]),es(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Xv(n,e,c)}else r.unshift(o),Xv(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Xv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function H2(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Y(-301,!1);r.push(e[i],s)}}}function q2(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;es(e)&&(t[""]=n)}}function G2(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function z2(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ls(i.type,!0)),o=new $s(s,es(i),Se);n.blueprint[r]=o,t[r]=o,V2(n,e,r,GA(n,t,i.hostVars,ss),i)}function W2(n,e,t){let r=er(e,n),i=YA(t),s=n[ai].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=yf(n,vf(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function K2(n,e,t,r,i,s){let o=er(n,e);Q2(e[Bt],o,s,n.value,t,r,i)}function Q2(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?C_(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function Y2(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];qA(r,t,c,l,d,f)}}function Z2(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function tR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function nR(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];oA(s),a.contentQueries(2,e[o],o)}}}finally{Ne(r)}}}function yf(n,e){return n[xu]?n[HS][mr]=e:n[xu]=e,n[HS]=e,e}function e_(n,e,t){oA(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function J2(n){return n[jh]??=[]}function X2(n){return n.cleanup??=[]}function rR(n,e){let t=n[ga],r=t?t.get(Ur,null):null;r&&r.handleError(e)}function X_(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];qA(d,l,r,a,c,i)}}function ej(n,e,t){let r=ZD(e,n);l2(n[Bt],r,t)}function tj(n,e){let t=rs(e,n),r=t[Ee];nj(r,t);let i=t[hi];i!==null&&t[Uh]===null&&(t[Uh]=G_(i,t[ga])),ey(r,t,t[Zn])}function nj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ey(n,e,t){P_(e);try{let r=n.viewQuery;r!==null&&e_(1,r,t);let i=n.template;i!==null&&zA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[_a]?.finishViewCreation(n),n.staticContentQueries&&nR(n,e),n.staticViewQueries&&e_(2,n.viewQuery,t);let s=n.components;s!==null&&rj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ae]&=-5,O_()}}function rj(n,e){for(let t=0;t<e.length;t++)tj(n,e[t])}function iR(n,e,t,r){let i=Ne(null);try{let s=e.tView,a=n[ae]&4096?4096:16,c=vf(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[va]=l;let d=n[_a];return d!==null&&(c[_a]=d.createEmbeddedView(s)),ey(s,c,t),c}finally{Ne(i)}}function ij(n,e){let t=Un+e;if(t<n.length)return n[t]}function t_(n,e){return!e||e.firstChild===null||DA(n)}function sR(n,e,t,r=!0){let i=e[Ee];if(p2(i,e,n,t),r){let o=Jv(t,n),a=e[Bt],c=UA(a,n[Us]);c!==null&&h2(i,n[gr],a,e,c,o)}let s=e[Uh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function sj(n,e){let t=Zh(n,e);return t!==void 0&&Q_(t[Ee],t),t}function Xh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Vr(s)),fi(s)&&oj(s,r);let o=t.type;if(o&8)Xh(n,e,t.child,r);else if(o&32){let a=W_(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=jA(e,t);if(Array.isArray(a))r.push(...a);else{let c=js(e[Lr]);Xh(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function oj(n,e){for(let t=Un;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&Xh(r[Ee],r,i,e)}n[Us]!==n[hi]&&e.push(n[Us])}var oR=[];function aj(n){return n[Qn]??cj(n)}function cj(n){let e=oR.pop()??Object.create(lj);return e.lView=n,e}function uj(n){n.lView[Qn]!==n&&(n.lView=null,oR.push(n))}var lj=Te(j({},zo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{pf(n.lView)},consumerOnSignalRead(){this.lView[Qn]=this}});function dj(n){let e=n[Qn]??Object.create(hj);return e.lView=n,e}var hj=Te(j({},zo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=js(n.lView);for(;e&&!aR(e[Ee]);)e=js(e);e&&XD(e)},consumerOnSignalRead(){this.lView[Qn]=this}});function aR(n){return n.type!==2}var fj=100;function cR(n,e=!0,t=0){let r=n[ai],i=r.rendererFactory,s=!1;s||i.begin?.();try{pj(n,t)}catch(o){throw e&&rR(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function pj(n,e){let t=sA();try{GS(!0),n_(n,e);let r=0;for(;ff(n);){if(r===fj)throw new Y(103,!1);r++,n_(n,1)}}finally{GS(t)}}function mj(n,e,t,r){let i=e[ae];if((i&256)===256)return;let s=!1,o=!1;!s&&e[ai].inlineEffectRunner?.flush(),P_(e);let a=!0,c=null,l=null;s||(aR(n)?(l=aj(e),c=gu(l)):Wb()===null?(a=!1,l=dj(e),c=gu(l)):e[Qn]&&(Wd(e[Qn]),e[Qn]=null));try{JD(e),yU(n.bindingStartIndex),t!==null&&zA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let v=n.preOrderCheckHooks;v!==null&&Nh(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Mh(e,v,0,null),yv(e,0)}if(o||gj(e),uR(e,0),n.contentQueries!==null&&nR(n,e),!s)if(d){let v=n.contentCheckHooks;v!==null&&Nh(e,v)}else{let v=n.contentHooks;v!==null&&Mh(e,v,1),yv(e,1)}A2(n,e);let f=n.components;f!==null&&dR(e,f,0);let m=n.viewQuery;if(m!==null&&e_(2,m,r),!s)if(d){let v=n.viewCheckHooks;v!==null&&Nh(e,v)}else{let v=n.viewHooks;v!==null&&Mh(e,v,2),yv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[xh]){for(let v of e[xh])v();e[xh]=null}s||(e[ae]&=-73)}catch(d){throw s||pf(e),d}finally{l!==null&&(Gd(l,c),a&&uj(l)),O_()}}function uR(n,e){for(let t=RA(n);t!==null;t=xA(t))for(let r=Un;r<t.length;r++){let i=t[r];lR(i,e)}}function gj(n){for(let e=RA(n);e!==null;e=xA(e)){if(!(e[ae]&Hh.HasTransplantedViews))continue;let t=e[$h];for(let r=0;r<t.length;r++){let i=t[r];XD(i)}}}function vj(n,e,t){let r=rs(e,n);lR(r,t)}function lR(n,e){N_(n)&&n_(n,e)}function n_(n,e){let r=n[Ee],i=n[ae],s=n[Qn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&zd(s)),o||=!1,s&&(s.dirty=!1),n[ae]&=-9217,o)mj(r,n,r.template,n[Zn]);else if(i&8192){uR(n,1);let a=r.components;a!==null&&dR(n,a,1)}}function dR(n,e,t){for(let r=0;r<e.length;r++)vj(n,e[r],t)}function ty(n,e){let t=sA()?64:1088;for(n[ai].changeDetectionScheduler?.notify(e);n;){n[ae]|=t;let r=js(n);if(Lv(n)&&!r)return n;n=r}return null}var qs=class{get rootNodes(){let e=this._lView,t=e[Ee];return Xh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(e){this._lView[Zn]=e}get destroyed(){return(this._lView[ae]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[vn];if(fi(e)){let t=e[Bh],r=t?t.indexOf(this):-1;r>-1&&(Zh(e,r),Lh(t,r))}this._attachedToViewContainer=!1}Q_(this._lView[Ee],this._lView)}onDestroy(e){eA(this._lView,e)}markForCheck(){ty(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ae]&=-129}reattach(){Uv(this._lView),this._lView[ae]|=128}detectChanges(){this._lView[ae]|=1024,cR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Y(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Lv(this._lView),t=this._lView[va];t!==null&&!e&&K_(t,this._lView),FA(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Y(902,!1);this._appRef=e;let t=Lv(this._lView),r=this._lView[va];r!==null&&!t&&LA(r,this._lView),Uv(this._lView)}},ny=(()=>{class n{static{this.__NG_ELEMENT_ID__=wj}}return n})(),_j=ny,yj=class extends _j{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=iR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new qs(i)}};function wj(){return Ij(An(),Ge())}function Ij(n,e){return n.type&4?new yj(e,n,mf(n,e)):null}var Lne=new RegExp(`^(\\d+)*(${s2}|${i2})*(.*)`);var Ej=()=>null;function r_(n,e){return Ej(n,e)}var wa=class{},wf=new H("",{providedIn:"root",factory:()=>!1});var hR=new H(""),fR=new H(""),i_=class{},ef=class{};function Cj(n){let e=Error(`No component factory found for ${Sn(n)}.`);return e[Tj]=n,e}var Tj="ngComponent";var s_=class{resolveComponentFactory(e){throw Cj(e)}},ts=class{static{this.NULL=new s_}},Ia=class{},mi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>bj()}}return n})();function bj(){let n=Ge(),e=An(),t=rs(e.index,n);return(Ji(t)?t:n)[Bt]}var Sj=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>null})}}return n})();function o_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=PS(i,a);else if(s==2){let c=a,l=e[++o];r=PS(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var tf=class extends ts{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vs(e);return new Nu(t,this.ngModule)}};function iD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Xi.None;e?t.push({propName:o,templateName:r,isSignal:(a&Xi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function Dj(n){let e=n.toLowerCase();return e==="svg"?sU:e==="math"?oU:null}var Nu=class extends ef{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=iD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return iD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=UV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ne(null);try{i=i||this.ngModule;let o=i instanceof Yn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Bv(e,o):e,c=a.get(Ia,null);if(c===null)throw new Y(407,!1);let l=a.get(Sj,null),d=a.get(wa,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?N2(m,r,this.componentDef.encapsulation,a):kA(m,v,Dj(v)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let R=null;w!==null&&(R=G_(w,a,!0));let L=J_(0,null,null,1,0,null,null,null,null,null,null),q=vf(null,L,null,N,null,null,f,m,a,null,R);P_(q);let W,te,Ye=null;try{let re=this.componentDef,C,y=null;re.findHostDirectiveDefs?(C=[],y=new Map,re.findHostDirectiveDefs(re,C,y),C.push(re)):C=[re];let I=Aj(q,w);Ye=Rj(I,w,re,C,q,f,m),te=x_(L,Jn),w&&Mj(m,re,w,r),t!==void 0&&Pj(te,this.ngContentSelectors,t),W=Nj(Ye,re,C,y,q,[Oj]),ey(L,q,null)}catch(re){throw Ye!==null&&Qv(Ye),Qv(q),re}finally{O_()}return new a_(this.componentType,W,mf(te,q),q,te)}finally{Ne(s)}}},a_=class extends i_{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new qs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;X_(s[Ee],s,i,e,t),this.previousInputValues.set(e,t);let o=rs(this._tNode.index,s);ty(o,1)}}get injector(){return new Fs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Aj(n,e){let t=n[Ee],r=Jn;return n[r]=e,_f(t,r,2,"#host",null)}function Rj(n,e,t,r,i,s,o){let a=i[Ee];xj(r,n,e,o);let c=null;e!==null&&(c=G_(e,i[ga]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=vf(i,YA(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Xv(a,n,r.length-1),yf(i,f),i[n.index]=f}function xj(n,e,t,r){for(let i of n)e.mergedAttrs=Au(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(o_(e,e.mergedAttrs,!0),t!==null&&$A(r,t,e))}function Nj(n,e,t,r,i,s){let o=An(),a=i[Ee],c=er(o,i);XA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,m=ya(i,a,f,o);Hs(m,i)}eR(a,i,o),c&&Hs(c,i);let l=ya(i,a,o.directiveStart+o.componentOffset,o);if(n[Zn]=i[Zn]=l,s!==null)for(let d of s)d(l,e);return WA(a,o,i),l}function Mj(n,e,t,r){if(r)Pv(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=jV(e.selectors[0]);i&&Pv(n,t,i),s&&s.length>0&&BA(n,t,s.join(" "))}}function Pj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Oj(){let n=An();V_(Ge()[Ee],n)}var Vu=(()=>{class n{static{this.__NG_ELEMENT_ID__=kj}}return n})();function kj(){let n=An();return Lj(n,Ge())}var Fj=Vu,pR=class extends Fj{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new Fs(this._hostTNode,this._hostLView)}get parentInjector(){let e=U_(this._hostTNode,this._hostLView);if(pA(e)){let t=zh(e,this._hostLView),r=Gh(e),i=t[Ee].data[r+8];return new Fs(i,t)}else return new Fs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=sD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Un}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=r_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,t_(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!tU(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new Nu(Vs(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let N=(o?l:this.parentInjector).get(Yn,null);N&&(s=N)}let d=Vs(c.componentType??{}),f=r_(this._lContainer,d?.id??null),m=f?.firstChild??null,v=c.create(l,i,m,s);return this.insertImpl(v.hostView,a,t_(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(cU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[vn],l=new pR(c,c[gr],c[vn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return sR(o,i,s,r),e.attachToViewContainerRef(),DD(Tv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=sD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Zh(this._lContainer,t);r&&(Lh(Tv(this._lContainer),t),Q_(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=Zh(this._lContainer,t);return r&&Lh(Tv(this._lContainer),t)!=null?new qs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function sD(n){return n[Bh]}function Tv(n){return n[Bh]||(n[Bh]=[])}function Lj(n,e){let t,r=e[n.index];return fi(r)?t=r:(t=tR(r,e,null,n),e[n.index]=t,yf(e,t)),Uj(t,e,n,r),new pR(t,n,e)}function Vj(n,e){let t=n[Bt],r=t.createComment(""),i=er(e,n),s=UA(t,i);return Jh(t,s,r,y2(t,i),!1),r}var Uj=$j,jj=()=>!1;function Bj(n,e,t){return jj(n,e,t)}function $j(n,e,t,r){if(n[Us])return;let i;t.type&8?i=Vr(r):i=Vj(e,t),n[Us]=i}var oD=new Set;function Qs(n){oD.has(n)||(oD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Hj(n){return typeof n=="function"&&n[Mr]!==void 0}function X(n,e){Qs("NgSignals");let t=sS(n),r=t[Mr];return e?.equal&&(r.equal=e.equal),t.set=i=>Xg(r,i),t.update=i=>oS(r,i),t.asReadonly=qj.bind(t),t}function qj(){let n=this[Mr];if(n.readonlyFn===void 0){let e=()=>this();e[Mr]=n,n.readonlyFn=e}return n.readonlyFn}function mR(n){return Hj(n)&&typeof n.set=="function"}function Gj(n){return Object.getPrototypeOf(n.prototype).constructor}function Rn(n){let e=Gj(n.type),t=!0,r=[n];for(;e;){let i;if(es(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Y(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Sh(n.inputs),o.inputTransforms=Sh(n.inputTransforms),o.declaredInputs=Sh(n.declaredInputs),o.outputs=Sh(n.outputs);let a=i.hostBindings;a&&Yj(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Kj(n,c),l&&Qj(n,l),zj(n,i),oV(n.outputs,i.outputs),es(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Rn&&(t=!1)}}e=Object.getPrototypeOf(e)}Wj(r)}function zj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function Wj(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Au(i.hostAttrs,t=Au(t,i.hostAttrs))}}function Sh(n){return n===fa?{}:n===Kn?[]:n}function Kj(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function Qj(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function Yj(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var ns=class{},Mu=class{};var c_=class extends ns{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new tf(this);let s=FD(e);this._bootstrapComponents=OA(s.bootstrap),this._r3Injector=CA(e,t,[{provide:ns,useValue:this},{provide:ts,useValue:this.componentFactoryResolver},...r],Sn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},u_=class extends Mu{constructor(e){super(),this.moduleType=e}create(e){return new c_(this.moduleType,e,[])}};var nf=class extends ns{constructor(e){super(),this.componentFactoryResolver=new tf(this),this.instance=null;let t=new Ru([...e.providers,{provide:ns,useValue:this},{provide:ts,useValue:this.componentFactoryResolver}],e.parent||A_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function ry(n,e,t=null){return new nf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function gR(n){return Jj(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function Zj(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Jj(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function vR(n,e,t){return n[e]=t}function ui(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Xj(n,e,t,r){let i=ui(n,e,t);return ui(n,e+1,r)||i}function eB(n){return(n.flags&32)===32}function tB(n,e,t,r,i,s,o,a,c){let l=e.consts,d=_f(e,n,4,o||null,a||null);JA(e,t,d,qh(l,c)),V_(e,d);let f=d.tView=J_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function nB(n,e,t,r,i,s,o,a,c,l){let d=t+Jn,f=e.firstCreatePass?tB(d,e,n,r,i,s,o,a,c):e.data[d];Fu(f,!1);let m=rB(e,n,f,t);F_()&&Y_(e,n,m,f),Hs(m,n);let v=tR(m,n,m,f);return n[d]=v,yf(n,v),Bj(v,f,n),R_(f)&&KA(e,n,f),c!=null&&QA(n,f,l),f}function pe(n,e,t,r,i,s,o,a){let c=Ge(),l=Dn(),d=qh(l.consts,s);return nB(c,l,n,e,t,r,i,d,o,a),pe}var rB=iB;function iB(n,e,t,r){return L_(!0),e[Bt].createComment("")}var bu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(bu||{}),sB=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})(),aD=class n{constructor(){this.ngZone=M(ie),this.scheduler=M(wa),this.errorHandler=M(Ur,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[bu.EarlyRead,bu.Write,bu.MixedReadWrite,bu.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}};function Uu(n,e,t,r){let i=Ge(),s=Lu();if(ui(i,s,e)){let o=Dn(),a=k_();K2(a,i,n,e,t,r)}return Uu}function oB(n,e,t,r){return ui(n,Lu(),t)?e+C_(t)+r:ss}function Dh(n,e){return n<<17|e<<2}function Gs(n){return n>>17&32767}function aB(n){return(n&2)==2}function cB(n,e){return n&131071|e<<17}function l_(n){return n|2}function Ea(n){return(n&131068)>>2}function bv(n,e){return n&-131069|e<<2}function uB(n){return(n&1)===1}function d_(n){return n|1}function lB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Gs(o),c=Ea(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||ku(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let m=Gs(n[a+1]);n[r+1]=Dh(m,a),m!==0&&(n[m+1]=bv(n[m+1],r)),n[a+1]=cB(n[a+1],r)}else n[r+1]=Dh(a,0),a!==0&&(n[a+1]=bv(n[a+1],r)),a=r;else n[r+1]=Dh(c,0),a===0?a=r:n[c+1]=bv(n[c+1],r),c=r;l&&(n[r+1]=l_(n[r+1])),cD(n,d,r,!0),cD(n,d,r,!1),dB(e,d,n,r,s),o=Dh(a,c),s?e.classBindings=o:e.styleBindings=o}function dB(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&ku(s,e)>=0&&(t[r+1]=d_(t[r+1]))}function cD(n,e,t,r){let i=n[t+1],s=e===null,o=r?Gs(i):Ea(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];hB(c,e)&&(a=!0,n[o+1]=r?d_(l):l_(l)),o=r?Gs(l):Ea(l)}a&&(n[t+1]=r?l_(i):d_(i))}function hB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?ku(n,e)>=0:!1}function ue(n,e,t){let r=Ge(),i=Lu();if(ui(r,i,e)){let s=Dn(),o=k_();ZA(s,o,r,n,e,r[Bt],t,!1)}return ue}function uD(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";X_(n,t,s[o],o,r)}function If(n,e,t){return _R(n,e,t,!1),If}function Ef(n,e){return _R(n,e,null,!0),Ef}function _R(n,e,t,r){let i=Ge(),s=Dn(),o=wU(2);if(s.firstUpdatePass&&pB(s,n,o,r),e!==ss&&ui(i,o,e)){let a=s.data[Ta()];yB(s,a,i,i[Bt],n,i[o+1]=wB(e,t),r,o)}}function fB(n,e){return e>=n.expandoStartIndex}function pB(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ta()],o=fB(n,t);IB(s,r)&&e===null&&!o&&(e=!1),e=mB(i,s,e,r),lB(i,s,e,t,o,r)}}function mB(n,e,t,r){let i=TU(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Sv(null,n,e,t,r),t=Pu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Sv(i,n,e,t,r),s===null){let c=gB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Sv(null,n,e,c[1],r),c=Pu(c,e.attrs,r),vB(n,e,r,c))}else s=_B(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function gB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ea(r)!==0)return n[Gs(r)]}function vB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Gs(i)]=r}function _B(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Pu(r,o,t)}return Pu(r,e.attrs,t)}function Sv(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Pu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Pu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),SV(n,o,t?!0:e[++s]))}return n===void 0?null:n}function yB(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=uB(l)?lD(c,e,t,i,Ea(l),o):void 0;if(!rf(d)){rf(s)||aB(l)&&(s=lD(c,null,t,i,a,o));let f=ZD(Ta(),t);S2(r,o,f,i,s)}}function lD(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,m=t[i+1];m===ss&&(m=f?Kn:void 0);let v=f?vv(m,r):d===r?m:void 0;if(l&&!rf(v)&&(v=vv(c,r)),rf(v)&&(a=v,o))return a;let w=n[i+1];i=o?Gs(w):Ea(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=vv(c,r))}return a}function rf(n){return n!==void 0}function wB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Sn(z_(n)))),n}function IB(n,e){return(n.flags&(e?8:16))!==0}function Ce(n,e){Qs("NgControlFlow");let t=Ge(),r=Lu(),i=t[r]!==ss?t[r]:-1,s=i!==-1?dD(t,Jn+i):void 0,o=0;if(ui(t,r,n)){let a=Ne(null);try{if(s!==void 0&&sj(s,o),n!==-1){let c=Jn+n,l=dD(t,c),d=EB(t[Ee],c),f=r_(l,d.tView.ssrId),m=iR(t,d,e,{dehydratedView:f});sR(l,m,o,t_(d,f))}}finally{Ne(a)}}else if(s!==void 0){let a=ij(s,o);a!==void 0&&(a[Zn]=e)}}function dD(n,e){return n[e]}function EB(n,e){return x_(n,e)}function CB(n,e,t,r,i,s){let o=e.consts,a=qh(o,i),c=_f(e,n,2,r,a);return JA(e,t,c,qh(o,s)),c.attrs!==null&&o_(c,c.attrs,!1),c.mergedAttrs!==null&&o_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function D(n,e,t,r){let i=Ge(),s=Dn(),o=Jn+n,a=i[Bt],c=s.firstCreatePass?CB(o,s,i,e,t,r):s.data[o],l=TB(s,i,c,a,e,n);i[o]=l;let d=R_(c);return Fu(c,!0),$A(a,l,c),!eB(c)&&F_()&&Y_(s,i,l,c),dU()===0&&Hs(l,i),hU(),d&&(KA(s,i,c),WA(s,c,i)),r!==null&&QA(i,c),D}function A(){let n=An();iA()?_U():(n=n.parent,Fu(n,!1));let e=n;mU(e)&&gU(),fU();let t=Dn();return t.firstCreatePass&&(V_(t,n),zD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&NU(e)&&uD(t,e,Ge(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&MU(e)&&uD(t,e,Ge(),e.stylesWithoutHost,!1),A}function ve(n,e,t,r){return D(n,e,t,r),A(),ve}var TB=(n,e,t,r,i,s)=>(L_(!0),kA(r,i,DU()));function Ys(){return Ge()}var ks=void 0;function bB(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var SB=["en",[["a","p"],["AM","PM"],ks],[["AM","PM"],ks,ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ks,"{1} 'at' {0}",ks],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",bB],Dv={};function tr(n){let e=DB(n),t=hD(e);if(t)return t;let r=e.split("-")[0];if(t=hD(r),t)return t;if(r==="en")return SB;throw new Y(701,!1)}function hD(n){return n in Dv||(Dv[n]=Cu.ng&&Cu.ng.common&&Cu.ng.common.locales&&Cu.ng.common.locales[n]),Dv[n]}var Dt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Dt||{});function DB(n){return n.toLowerCase().replace(/_/g,"-")}var sf="en-US";var AB=sf;function RB(n){typeof n=="string"&&(AB=n.toLowerCase().replace(/_/g,"-"))}var xB=(n,e,t)=>{};function we(n,e,t,r){let i=Ge(),s=Dn(),o=An();return yR(s,i,i[Bt],o,n,e,r),we}function NB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[jh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function yR(n,e,t,r,i,s,o){let a=R_(r),l=n.firstCreatePass&&X2(n),d=e[Zn],f=J2(e),m=!0;if(r.type&3||o){let N=er(r,e),R=o?o(N):N,L=f.length,q=o?te=>o(Vr(te[r.index])):r.index,W=null;if(!o&&a&&(W=NB(n,e,i,r.index)),W!==null){let te=W.__ngLastListenerFn__||W;te.__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,m=!1}else{s=pD(r,e,d,s),xB(N,i,s);let te=t.listen(R,i,s);f.push(s,te),l&&l.push(i,q,L,L+1)}}else s=pD(r,e,d,s);let v=r.outputs,w;if(m&&v!==null&&(w=v[i])){let N=w.length;if(N)for(let R=0;R<N;R+=2){let L=w[R],q=w[R+1],Ye=e[L][q].subscribe(s),re=f.length;f.push(s,Ye),l&&l.push(i,r.index,re,-(re+1))}}}function fD(n,e,t,r){let i=Ne(null);try{return Or(6,e,t),t(r)!==!1}catch(s){return rR(n,s),!1}finally{Or(7,e,t),Ne(i)}}function pD(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?rs(n.index,e):e;ty(o,5);let a=fD(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=fD(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function J(n=1){return SU(n)}function MB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function P(n,e=""){let t=Ge(),r=Dn(),i=n+Jn,s=r.firstCreatePass?_f(r,i,1,e,null):r.data[i],o=PB(r,t,s,e,n);t[i]=o,F_()&&Y_(r,t,o,s),Fu(s,!1)}var PB=(n,e,t,r,i)=>(L_(!0),u2(e[Bt],r));function Br(n){return K("",n,""),Br}function K(n,e,t){let r=Ge(),i=oB(r,n,e,t);return i!==ss&&ej(r,Ta(),i),K}function gi(n,e,t){mR(e)&&(e=e());let r=Ge(),i=Lu();if(ui(r,i,e)){let s=Dn(),o=k_();ZA(s,o,r,n,e,r[Bt],t,!1)}return gi}function os(n,e){let t=mR(n);return t&&n.set(e),t}function vi(n,e){let t=Ge(),r=Dn(),i=An();return yR(r,t,t[Bt],i,n,e),vi}function OB(n,e,t){let r=Dn();if(r.firstCreatePass){let i=es(n);h_(t,r.data,r.blueprint,i,!0),h_(e,r.data,r.blueprint,i,!1)}}function h_(n,e,t,r,i){if(n=gn(n),Array.isArray(n))for(let s=0;s<n.length;s++)h_(n[s],e,t,r,i);else{let s=Dn(),o=Ge(),a=An(),c=ma(n)?n:gn(n.provide),l=$D(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(ma(n)||!n.multi){let v=new $s(l,i,Se),w=Rv(c,e,i?d:d+m,f);w===-1?(Hv(Kh(a,o),s,c),Av(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[w]=v,o[w]=v)}else{let v=Rv(c,e,d+m,f),w=Rv(c,e,d,d+m),N=v>=0&&t[v],R=w>=0&&t[w];if(i&&!R||!i&&!N){Hv(Kh(a,o),s,c);let L=LB(i?FB:kB,t.length,i,r,l);!i&&R&&(t[w].providerFactory=L),Av(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else{let L=wR(t[i?w:v],l,!i&&r);Av(s,n,v>-1?v:w,L)}!i&&r&&R&&t[w].componentProviders++}}}function Av(n,e,t,r){let i=ma(e),s=KV(e);if(i||s){let c=(s?gn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function wR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Rv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function kB(n,e,t,r){return f_(this.multi,[])}function FB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ya(t,t[Ee],this.providerFactory.index,r);s=a.slice(0,o),f_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],f_(i,s);return s}function f_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function LB(n,e,t,r,i){let s=new $s(n,t,Se);return s.multi=[],s.index=e,s.componentProviders=0,wR(s,i,r&&!t),s}function $r(n,e=[]){return t=>{t.providersResolver=(r,i)=>OB(r,i?i(n):n,e)}}var VB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=UD(!1,t.type),i=r.length>0?ry([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(se(Yn))})}}return n})();function Ke(n){Qs("NgStandalone"),n.getStandaloneInjector=e=>e.get(VB).getOrCreateStandaloneInjector(n)}function ut(n,e,t,r){return UB(Ge(),M_(),n,e,t,r)}function Cf(n,e,t,r,i){return ER(Ge(),M_(),n,e,t,r,i)}function IR(n,e){let t=n[e];return t===ss?void 0:t}function UB(n,e,t,r,i,s){let o=e+t;return ui(n,o,i)?vR(n,o+1,s?r.call(s,i):r(i)):IR(n,o+1)}function ER(n,e,t,r,i,s,o){let a=e+t;return Xj(n,a,i,s)?vR(n,a+2,o?r.call(o,i,s):r(i,s)):IR(n,a+2)}function _i(n,e){let t=Dn(),r,i=n+Jn;t.firstCreatePass?(r=jB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ls(r.type,!0)),o,a=bn(Se);try{let c=Wh(!1),l=s();return Wh(c),MB(t,Ge(),i,l),l}finally{bn(a)}}function jB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function yi(n,e,t,r){let i=n+Jn,s=Ge(),o=aU(s,i);return BB(s,i)?ER(s,M_(),e,o.transform,t,r,o):o.transform(t,r)}function BB(n,e){return n[Ee].data[e].pure}var li=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},CR=new li("18.2.13");var Tf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var TR=new H("");function Zs(n){return!!n&&typeof n.then=="function"}function bR(n){return!!n&&typeof n.subscribe=="function"}var as=new H(""),SR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=M(as,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Zs(s))t.push(s);else if(bR(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iy=new H("");function $B(){iS(()=>{throw new Y(600,!1)})}function HB(n){return n.isBoundToModule}var qB=10;function GB(n,e,t){try{let r=t();return Zs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Js=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(ZU),this.afterRenderManager=M(sB),this.zonelessEnabled=M(wf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ht,this.afterTick=new ht,this.componentTypes=[],this.components=[],this.isStable=M(Ks).hasPendingTasks.pipe(Q(t=>!t)),this._injector=M(Yn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ef;if(!this._injector.get(SR).done){let m=!i&&kD(t),v=!1;throw new Y(405,v)}let o;i?o=t:o=this._injector.get(ts).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=HB(o)?void 0:this._injector.get(ns),c=r||o.selector,l=o.create(Ae.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(TR,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ph(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Y(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ne(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ia,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<qB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)zB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ff(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ph(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(iy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ph(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Y(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ph(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function zB(n,e,t,r){if(!t&&!ff(n))return;cR(n,e,t&&!r?0:1)}var p_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},sy=(()=>{class n{compileModuleSync(t){return new u_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=FD(t),s=OA(i.declarations).reduce((o,a)=>{let c=Vs(a);return c&&o.push(new Nu(c)),o},[]);return new p_(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var WB=(()=>{class n{constructor(){this.zone=M(ie),this.changeDetectionScheduler=M(wa),this.applicationRef=M(Js)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),KB=new H("",{factory:()=>!1});function DR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ie(Te(j({},RR()),{scheduleInRootZone:t})),[{provide:ie,useFactory:n},{provide:pa,multi:!0,useFactory:()=>{let r=M(WB,{optional:!0});return()=>r.initialize()}},{provide:pa,multi:!0,useFactory:()=>{let r=M(QB);return()=>{r.initialize()}}},e===!0?{provide:hR,useValue:!0}:[],{provide:fR,useValue:t??TA}]}function AR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=DR({ngZoneFactory:()=>{let i=RR(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Qs("NgZone_CoalesceEvent"),new ie(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return nt([{provide:KB,useValue:!0},{provide:wf,useValue:!1},r])}function RR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var QB=(()=>{class n{constructor(){this.subscription=new yt,this.initialized=!1,this.zone=M(ie),this.pendingTasks=M(Ks)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ie.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ie.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var YB=(()=>{class n{constructor(){this.appRef=M(Js),this.taskService=M(Ks),this.ngZone=M(ie),this.zonelessEnabled=M(wf),this.disableScheduling=M(hR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new yt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Yh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(fR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Kv||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?YS:bA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Yh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,YS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZB(){return typeof $localize<"u"&&$localize.locale||sf}var bf=new H("",{providedIn:"root",factory:()=>M(bf,Ie.Optional|Ie.SkipSelf)||ZB()});var m_=new H("");function Ah(n){return!n.moduleRef}function JB(n){let e=Ah(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ie);return t.run(()=>{Ah(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Ur,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Ah(n)){let s=()=>e.destroy(),o=n.platformInjector.get(m_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(m_);o.add(s),n.moduleRef.onDestroy(()=>{Ph(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return GB(r,t,()=>{let s=e.get(SR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(bf,sf);if(RB(o||sf),Ah(n)){let a=e.get(Js);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return XB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function XB(n,e){let t=n.injector.get(Js);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Y(-403,!1);e.push(n)}var Oh=null;function e$(n=[],e){return Ae.create({name:e,providers:[{provide:uf,useValue:"platform"},{provide:m_,useValue:new Set([()=>Oh=null])},...n]})}function t$(n=[]){if(Oh)return Oh;let e=e$(n);return Oh=e,$B(),n$(e),e}function n$(n){n.get(H_,null)?.forEach(t=>t())}var cs=(()=>{class n{static{this.__NG_ELEMENT_ID__=r$}}return n})();function r$(n){return i$(An(),Ge(),(n&16)===16)}function i$(n,e,t){if(hf(n)&&!t){let r=rs(n.index,e);return new qs(r,r)}else if(n.type&175){let r=e[Lr];return new qs(r,e)}return null}var g_=class{constructor(){}supports(e){return gR(e)}create(e){return new v_(e)}},s$=(n,e)=>e,v_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||s$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<mD(r,i,s)?t:r,a=mD(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,w=v+m;d<=w&&w<l&&(s[m]=v+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!gR(e))throw new Y(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,Zj(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new __(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new of),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new of),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},__=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},y_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},of=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new y_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function mD(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function gD(){return new oy([new g_])}var oy=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:gD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||gD()),deps:[[n,new SD,new ce]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Y(901,!1)}}return n})();function xR(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=t$(r),s=[DR({}),{provide:wa,useExisting:YB},...t||[]],o=new nf({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return JB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function ju(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Fe(n,e){Qs("NgSignals");let t=tS(n);return e?.equal&&(t[Mr].equal=e.equal),t}function nr(n){let e=Ne(null);try{return n()}finally{Ne(e)}}var o$=new H("",{providedIn:"root",factory:()=>M(a$)}),a$=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new w_})}}return n})(),w_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=M(Ks),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},I_=class{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=cS(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Ur,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function wi(n,e){Qs("NgSignals"),!e?.injector&&lf(wi);let t=e?.injector??M(Ae),r=e?.manualCleanup!==!0?t.get(is):null,i=new I_(t.get(o$),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(cs,null,{optional:!0});return!s||!(s._lView[ae]&8)?i.watcher.notify():(s._lView[xh]??=[]).push(i.watcher.notify),i}var FR=null;function Ci(){return FR}function LR(n){FR??=n}var Of=class{};var ir=new H(""),VR=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>M(l$),providedIn:"platform"})}}return n})();var l$=(()=>{class n extends VR{constructor(){super(),this._doc=M(ir),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ci().getBaseHref(this._doc)}onPopState(t){let r=Ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Ci().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function UR(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function NR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Xs(n){return n&&n[0]!=="?"?"?"+n:n}var Lf=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>M(jR),providedIn:"root"})}}return n})(),d$=new H(""),jR=(()=>{class n extends Lf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(ir).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return UR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Xs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Xs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Xs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(se(VR),se(d$,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Bu=(()=>{class n{constructor(t){this._subject=new Mt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=p$(NR(MR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Xs(r))}normalize(t){return n.stripTrailingSlash(f$(this._basePath,MR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Xs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Xs}static{this.joinWithSlash=UR}static{this.stripTrailingSlash=NR}static{this.\u0275fac=function(r){return new(r||n)(se(Lf))}}static{this.\u0275prov=$({token:n,factory:()=>h$(),providedIn:"root"})}}return n})();function h$(){return new Bu(se(Lf))}function f$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function MR(n){return n.replace(/\/index.html$/,"")}function p$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var _n=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(_n||{}),et=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(et||{}),jn=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(jn||{}),us={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function m$(n){return tr(n)[Dt.LocaleId]}function g$(n,e,t){let r=tr(n),i=[r[Dt.DayPeriodsFormat],r[Dt.DayPeriodsStandalone]],s=rr(i,e);return rr(s,t)}function v$(n,e,t){let r=tr(n),i=[r[Dt.DaysFormat],r[Dt.DaysStandalone]],s=rr(i,e);return rr(s,t)}function _$(n,e,t){let r=tr(n),i=[r[Dt.MonthsFormat],r[Dt.MonthsStandalone]],s=rr(i,e);return rr(s,t)}function y$(n,e){let r=tr(n)[Dt.Eras];return rr(r,e)}function Sf(n,e){let t=tr(n);return rr(t[Dt.DateFormat],e)}function Df(n,e){let t=tr(n);return rr(t[Dt.TimeFormat],e)}function Af(n,e){let r=tr(n)[Dt.DateTimeFormat];return rr(r,e)}function Vf(n,e){let t=tr(n),r=t[Dt.NumberSymbols][e];if(typeof r>"u"){if(e===us.CurrencyDecimal)return t[Dt.NumberSymbols][us.Decimal];if(e===us.CurrencyGroup)return t[Dt.NumberSymbols][us.Group]}return r}function BR(n){if(!n[Dt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Dt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function w$(n){let e=tr(n);return BR(e),(e[Dt.ExtraData][2]||[]).map(r=>typeof r=="string"?ay(r):[ay(r[0]),ay(r[1])])}function I$(n,e,t){let r=tr(n);BR(r);let i=[r[Dt.ExtraData][0],r[Dt.ExtraData][1]],s=rr(i,e)||[];return rr(s,t)||[]}function rr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function ay(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var E$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Rf={},C$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Ei=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Ei||{}),He=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(He||{}),$e=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}($e||{});function T$(n,e,t,r){let i=P$(n);e=Ii(t,e)||e;let o=[],a;for(;e;)if(a=C$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=HR(r,c),i=M$(i,r,!0));let l="";return o.forEach(d=>{let f=x$(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function kf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Ii(n,e){let t=m$(n);if(Rf[t]??={},Rf[t][e])return Rf[t][e];let r="";switch(e){case"shortDate":r=Sf(n,jn.Short);break;case"mediumDate":r=Sf(n,jn.Medium);break;case"longDate":r=Sf(n,jn.Long);break;case"fullDate":r=Sf(n,jn.Full);break;case"shortTime":r=Df(n,jn.Short);break;case"mediumTime":r=Df(n,jn.Medium);break;case"longTime":r=Df(n,jn.Long);break;case"fullTime":r=Df(n,jn.Full);break;case"short":let i=Ii(n,"shortTime"),s=Ii(n,"shortDate");r=xf(Af(n,jn.Short),[i,s]);break;case"medium":let o=Ii(n,"mediumTime"),a=Ii(n,"mediumDate");r=xf(Af(n,jn.Medium),[o,a]);break;case"long":let c=Ii(n,"longTime"),l=Ii(n,"longDate");r=xf(Af(n,jn.Long),[c,l]);break;case"full":let d=Ii(n,"fullTime"),f=Ii(n,"fullDate");r=xf(Af(n,jn.Full),[d,f]);break}return r&&(Rf[t][e]=r),r}function xf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function yr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function b$(n,e){return yr(n,3).substring(0,e)}function Pt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=S$(n,s);if((t>0||a>-t)&&(a+=t),n===He.Hours)a===0&&t===-12&&(a=12);else if(n===He.FractionalSeconds)return b$(a,e);let c=Vf(o,us.MinusSign);return yr(a,e,c,r,i)}}function S$(n,e){switch(n){case He.FullYear:return e.getFullYear();case He.Month:return e.getMonth();case He.Date:return e.getDate();case He.Hours:return e.getHours();case He.Minutes:return e.getMinutes();case He.Seconds:return e.getSeconds();case He.FractionalSeconds:return e.getMilliseconds();case He.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function rt(n,e,t=_n.Format,r=!1){return function(i,s){return D$(i,s,n,e,t,r)}}function D$(n,e,t,r,i,s){switch(t){case $e.Months:return _$(e,i,r)[n.getMonth()];case $e.Days:return v$(e,i,r)[n.getDay()];case $e.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=w$(e),d=I$(e,i,r),f=l.findIndex(m=>{if(Array.isArray(m)){let[v,w]=m,N=o>=v.hours&&a>=v.minutes,R=o<w.hours||o===w.hours&&a<w.minutes;if(v.hours<w.hours){if(N&&R)return!0}else if(N||R)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return g$(e,i,r)[o<12?0:1];case $e.Eras:return y$(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Nf(n){return function(e,t,r){let i=-1*r,s=Vf(t,us.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Ei.Short:return(i>=0?"+":"")+yr(o,2,s)+yr(Math.abs(i%60),2,s);case Ei.ShortGMT:return"GMT"+(i>=0?"+":"")+yr(o,1,s);case Ei.Long:return"GMT"+(i>=0?"+":"")+yr(o,2,s)+":"+yr(Math.abs(i%60),2,s);case Ei.Extended:return r===0?"Z":(i>=0?"+":"")+yr(o,2,s)+":"+yr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var A$=0,Pf=4;function R$(n){let e=kf(n,A$,1).getDay();return kf(n,0,1+(e<=Pf?Pf:Pf+7)-e)}function $R(n){let e=n.getDay(),t=e===0?-3:Pf-e;return kf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function cy(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=$R(t),o=R$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return yr(i,n,Vf(r,us.MinusSign))}}function Mf(n,e=!1){return function(t,r){let s=$R(t).getFullYear();return yr(s,n,Vf(r,us.MinusSign),e)}}var uy={};function x$(n){if(uy[n])return uy[n];let e;switch(n){case"G":case"GG":case"GGG":e=rt($e.Eras,et.Abbreviated);break;case"GGGG":e=rt($e.Eras,et.Wide);break;case"GGGGG":e=rt($e.Eras,et.Narrow);break;case"y":e=Pt(He.FullYear,1,0,!1,!0);break;case"yy":e=Pt(He.FullYear,2,0,!0,!0);break;case"yyy":e=Pt(He.FullYear,3,0,!1,!0);break;case"yyyy":e=Pt(He.FullYear,4,0,!1,!0);break;case"Y":e=Mf(1);break;case"YY":e=Mf(2,!0);break;case"YYY":e=Mf(3);break;case"YYYY":e=Mf(4);break;case"M":case"L":e=Pt(He.Month,1,1);break;case"MM":case"LL":e=Pt(He.Month,2,1);break;case"MMM":e=rt($e.Months,et.Abbreviated);break;case"MMMM":e=rt($e.Months,et.Wide);break;case"MMMMM":e=rt($e.Months,et.Narrow);break;case"LLL":e=rt($e.Months,et.Abbreviated,_n.Standalone);break;case"LLLL":e=rt($e.Months,et.Wide,_n.Standalone);break;case"LLLLL":e=rt($e.Months,et.Narrow,_n.Standalone);break;case"w":e=cy(1);break;case"ww":e=cy(2);break;case"W":e=cy(1,!0);break;case"d":e=Pt(He.Date,1);break;case"dd":e=Pt(He.Date,2);break;case"c":case"cc":e=Pt(He.Day,1);break;case"ccc":e=rt($e.Days,et.Abbreviated,_n.Standalone);break;case"cccc":e=rt($e.Days,et.Wide,_n.Standalone);break;case"ccccc":e=rt($e.Days,et.Narrow,_n.Standalone);break;case"cccccc":e=rt($e.Days,et.Short,_n.Standalone);break;case"E":case"EE":case"EEE":e=rt($e.Days,et.Abbreviated);break;case"EEEE":e=rt($e.Days,et.Wide);break;case"EEEEE":e=rt($e.Days,et.Narrow);break;case"EEEEEE":e=rt($e.Days,et.Short);break;case"a":case"aa":case"aaa":e=rt($e.DayPeriods,et.Abbreviated);break;case"aaaa":e=rt($e.DayPeriods,et.Wide);break;case"aaaaa":e=rt($e.DayPeriods,et.Narrow);break;case"b":case"bb":case"bbb":e=rt($e.DayPeriods,et.Abbreviated,_n.Standalone,!0);break;case"bbbb":e=rt($e.DayPeriods,et.Wide,_n.Standalone,!0);break;case"bbbbb":e=rt($e.DayPeriods,et.Narrow,_n.Standalone,!0);break;case"B":case"BB":case"BBB":e=rt($e.DayPeriods,et.Abbreviated,_n.Format,!0);break;case"BBBB":e=rt($e.DayPeriods,et.Wide,_n.Format,!0);break;case"BBBBB":e=rt($e.DayPeriods,et.Narrow,_n.Format,!0);break;case"h":e=Pt(He.Hours,1,-12);break;case"hh":e=Pt(He.Hours,2,-12);break;case"H":e=Pt(He.Hours,1);break;case"HH":e=Pt(He.Hours,2);break;case"m":e=Pt(He.Minutes,1);break;case"mm":e=Pt(He.Minutes,2);break;case"s":e=Pt(He.Seconds,1);break;case"ss":e=Pt(He.Seconds,2);break;case"S":e=Pt(He.FractionalSeconds,1);break;case"SS":e=Pt(He.FractionalSeconds,2);break;case"SSS":e=Pt(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Nf(Ei.Short);break;case"ZZZZZ":e=Nf(Ei.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Nf(Ei.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Nf(Ei.Long);break;default:return null}return uy[n]=e,e}function HR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function N$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function M$(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=HR(e,i);return N$(n,r*(s-i))}function P$(n){if(PR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return kf(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(E$))return O$(r)}let e=new Date(n);if(!PR(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function O$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function PR(n){return n instanceof Date&&!isNaN(n.valueOf())}function qR(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var ly=/\s+/,OR=[],It=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=OR,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(ly):OR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(ly):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(ly).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Se(jr),Se(mi))}}static{this.\u0275dir=ft({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var dy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ls=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dy(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),kR(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);kR(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Se(Vu),Se(ny),Se(oy))}}static{this.\u0275dir=ft({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function kR(n,e){n.context.$implicit=e.item}function k$(n,e){return new Y(2100,!1)}var F$="mediumDate",L$=new H(""),V$=new H(""),ba=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??F$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return T$(t,o,s||this.locale,a)}catch(o){throw k$(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(Se(bf,16),Se(L$,24),Se(V$,24))}}static{this.\u0275pipe=MD({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var hy="browser",U$="server";function fy(n){return n===hy}function py(n){return n===U$}var Ff=class{};var vy=class extends Of{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_y=class n extends vy{static makeCurrent(){LR(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=j$();return t==null?null:B$(t)}resetBaseElement(){$u=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qR(document.cookie,e)}},$u=null;function j$(){return $u=$u||document.querySelector("base"),$u?$u.getAttribute("href"):null}function B$(n){return new URL(n,document.baseURI).pathname}var $$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),yy=new H(""),KR=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(se(yy),se(ie))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Uf=class{constructor(e){this._doc=e}},my="ng-app-id",QR=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=py(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${my}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(my),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(my,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(se(ir),se($_),se(q_,8),se(_r))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),gy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Iy=/%COMP%/g,YR="%COMP%",H$=`_nghost-${YR}`,q$=`_ngcontent-${YR}`,G$=!0,z$=new H("",{providedIn:"root",factory:()=>G$});function W$(n){return q$.replace(Iy,n)}function K$(n){return H$.replace(Iy,n)}function ZR(n,e){return e.map(t=>t.replace(Iy,n))}var GR=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=py(a),this.defaultRenderer=new Hu(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Fr.ShadowDom&&(r=Te(j({},r),{encapsulation:Fr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof jf?i.applyToHost(t):i instanceof qu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Fr.Emulated:s=new jf(c,l,r,this.appId,d,o,a,f);break;case Fr.ShadowDom:return new wy(c,l,t,r,o,a,this.nonce,f);default:s=new qu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(se(KR),se(QR),se($_),se(z$),se(ir),se(_r),se(ie),se(q_))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Hu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(gy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(zR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(zR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Y(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=gy[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=gy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ci.DashCase|ci.Important)?e.style.setProperty(t,r,i&ci.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ci.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Ci().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function zR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var wy=class extends Hu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=ZR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qu=class extends Hu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?ZR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},jf=class extends qu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=W$(l),this.hostAttr=K$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Q$=(()=>{class n extends Uf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(se(ir))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),WR=["alt","control","meta","shift"],Y$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Z$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},J$=(()=>{class n extends Uf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ci().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),WR.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=Y$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),WR.forEach(o=>{if(o!==i){let a=Z$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(se(ir))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function JR(n,e){return xR(j({rootComponent:n},X$(e)))}function X$(n){return{appProviders:[...iH,...n?.providers??[]],platformProviders:rH}}function eH(){_y.makeCurrent()}function tH(){return new Ur}function nH(){return MA(document),document}var rH=[{provide:_r,useValue:hy},{provide:H_,useValue:eH,multi:!0},{provide:ir,useFactory:nH,deps:[]}];var iH=[{provide:uf,useValue:"root"},{provide:Ur,useFactory:tH,deps:[]},{provide:yy,useClass:Q$,multi:!0,deps:[ir,ie,_r]},{provide:yy,useClass:J$,multi:!0,deps:[ir]},GR,QR,KR,{provide:Ia,useExisting:GR},{provide:Ff,useClass:$$,deps:[]},[]];var Bf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(se(ir))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var _e="primary",cl=Symbol("RouteTitle"),Sy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Na(n){return new Sy(n)}function sH(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function oH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Hr(n[t],e[t]))return!1;return!0}function Hr(n,e){let t=n?Dy(n):void 0,r=e?Dy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!ax(n[i],e[i]))return!1;return!0}function Dy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ax(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function cx(n){return n.length>0?n[n.length-1]:null}function ds(n){return lv(n)?n:Zs(n)?ct(Promise.resolve(n)):ne(n)}var aH={exact:lx,subset:dx},ux={exact:cH,subset:uH,ignored:()=>!0};function ex(n,e,t){return aH[t.paths](n.root,e.root,t.matrixParams)&&ux[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function cH(n,e){return Hr(n,e)}function lx(n,e,t){if(!to(n.segments,e.segments)||!qf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!lx(n.children[r],e.children[r],t))return!1;return!0}function uH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>ax(n[t],e[t]))}function dx(n,e,t){return hx(n,e,e.segments,t)}function hx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!to(i,t)||e.hasChildren()||!qf(i,t,r))}else if(n.segments.length===t.length){if(!to(n.segments,t)||!qf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!dx(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!to(n.segments,i)||!qf(n.segments,i,r)||!n.children[_e]?!1:hx(n.children[_e],e,s,r)}}function qf(n,e,t){return e.every((r,i)=>ux[t](n[i].parameters,r.parameters))}var bi=class{constructor(e=new qe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Na(this.queryParams),this._queryParamMap}toString(){return hH.serialize(this)}},qe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gf(this)}},eo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Na(this.parameters),this._parameterMap}toString(){return px(this)}};function lH(n,e){return to(n,e)&&n.every((t,r)=>Hr(t.parameters,e[r].parameters))}function to(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function dH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===_e&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==_e&&(t=t.concat(e(i,r)))}),t}var Jy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new Zu,providedIn:"root"})}}return n})(),Zu=class{parse(e){let t=new Ry(e);return new bi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Gu(e.root,!0)}`,r=mH(e.queryParams),i=typeof e.fragment=="string"?`#${fH(e.fragment)}`:"";return`${t}${r}${i}`}},hH=new Zu;function Gf(n){return n.segments.map(e=>px(e)).join("/")}function Gu(n,e){if(!n.hasChildren())return Gf(n);if(e){let t=n.children[_e]?Gu(n.children[_e],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==_e&&r.push(`${i}:${Gu(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=dH(n,(r,i)=>i===_e?[Gu(n.children[_e],!1)]:[`${i}:${Gu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[_e]!=null?`${Gf(n)}/${t[0]}`:`${Gf(n)}/(${t.join("//")})`}}function fx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $f(n){return fx(n).replace(/%3B/gi,";")}function fH(n){return encodeURI(n)}function Ay(n){return fx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zf(n){return decodeURIComponent(n)}function tx(n){return zf(n.replace(/\+/g,"%20"))}function px(n){return`${Ay(n.path)}${pH(n.parameters)}`}function pH(n){return Object.entries(n).map(([e,t])=>`;${Ay(e)}=${Ay(t)}`).join("")}function mH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${$f(t)}=${$f(i)}`).join("&"):`${$f(t)}=${$f(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var gH=/^[^\/()?;#]+/;function Ey(n){let e=n.match(gH);return e?e[0]:""}var vH=/^[^\/()?;=#]+/;function _H(n){let e=n.match(vH);return e?e[0]:""}var yH=/^[^=?&#]+/;function wH(n){let e=n.match(yH);return e?e[0]:""}var IH=/^[^&#]+/;function EH(n){let e=n.match(IH);return e?e[0]:""}var Ry=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new qe([],{}):new qe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[_e]=new qe(e,t)),r}parseSegment(){let e=Ey(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new eo(zf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_H(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ey(this.remaining);i&&(r=i,this.capture(r))}e[zf(t)]=zf(r)}parseQueryParam(e){let t=wH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=EH(this.remaining);o&&(r=o,this.capture(r))}let i=tx(t),s=tx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ey(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Y(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=_e);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[_e]:new qe([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function mx(n){return n.segments.length>0?new qe([],{[_e]:n}):n}function gx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=gx(i);if(r===_e&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new qe(n.segments,e);return CH(t)}function CH(n){if(n.numberOfChildren===1&&n.children[_e]){let e=n.children[_e];return new qe(n.segments.concat(e.segments),e.children)}return n}function Ju(n){return n instanceof bi}function TH(n,e,t=null,r=null){let i=vx(n);return _x(i,e,t,r)}function vx(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new qe(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=mx(r);return e??i}function _x(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Cy(i,i,i,t,r);let s=bH(e);if(s.toRoot())return Cy(i,i,new qe([],{}),t,r);let o=SH(s,i,n),a=o.processChildren?Ku(o.segmentGroup,o.index,s.commands):wx(o.segmentGroup,o.index,s.commands);return Cy(i,o.segmentGroup,a,t,r)}function Wf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Xu(n){return typeof n=="object"&&n!=null&&n.outlets}function Cy(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=yx(n,e,t);let a=mx(gx(o));return new bi(a,s,i)}function yx(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=yx(s,e,t)}),new qe(n.segments,r)}var Kf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Wf(r[0]))throw new Y(4003,!1);let i=r.find(Xu);if(i&&i!==cx(r))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Kf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Kf(t,e,r)}var Aa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function SH(n,e,t){if(n.isAbsolute)return new Aa(e,!0,0);if(!t)return new Aa(e,!1,NaN);if(t.parent===null)return new Aa(t,!0,0);let r=Wf(n.commands[0])?0:1,i=t.segments.length-1+r;return DH(t,i,n.numberOfDoubleDots)}function DH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Y(4005,!1);i=r.segments.length}return new Aa(r,!1,i-s)}function AH(n){return Xu(n[0])?n[0].outlets:{[_e]:n}}function wx(n,e,t){if(n??=new qe([],{}),n.segments.length===0&&n.hasChildren())return Ku(n,e,t);let r=RH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new qe(n.segments.slice(0,r.pathIndex),{});return s.children[_e]=new qe(n.segments.slice(r.pathIndex),n.children),Ku(s,0,i)}else return r.match&&i.length===0?new qe(n.segments,{}):r.match&&!n.hasChildren()?xy(n,e,t):r.match?Ku(n,0,i):xy(n,e,t)}function Ku(n,e,t){if(t.length===0)return new qe(n.segments,{});{let r=AH(t),i={};if(Object.keys(r).some(s=>s!==_e)&&n.children[_e]&&n.numberOfChildren===1&&n.children[_e].segments.length===0){let s=Ku(n.children[_e],e,t);return new qe(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=wx(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new qe(n.segments,i)}}function RH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Xu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!rx(c,l,o))return s;r+=2}else{if(!rx(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function xy(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Xu(s)){let c=xH(s.outlets);return new qe(r,c)}if(i===0&&Wf(t[0])){let c=n.segments[e];r.push(new eo(c.path,nx(t[0]))),i++;continue}let o=Xu(s)?s.outlets[_e]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Wf(a)?(r.push(new eo(o,nx(a))),i+=2):(r.push(new eo(o,{})),i++)}return new qe(r,{})}function xH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=xy(new qe([],{}),0,r))}),e}function nx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function rx(n,e,t){return n==t.path&&Hr(e,t.parameters)}var Qu="imperative",Zt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Zt||{}),sr=class{constructor(e,t){this.id=e,this.url=t}},el=class extends sr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=Zt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},no=class extends sr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Zt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},$n=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}($n||{}),Ny=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Ny||{}),Ti=class extends sr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Zt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ro=class extends sr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=Zt.NavigationSkipped}},tl=class extends sr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=Zt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Qf=class extends sr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Zt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},My=class extends sr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Zt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends sr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Zt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oy=class extends sr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Zt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class extends sr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=Zt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class{constructor(e){this.route=e,this.type=Zt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ly=class{constructor(e){this.route=e,this.type=Zt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Vy=class{constructor(e){this.snapshot=e,this.type=Zt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uy=class{constructor(e){this.snapshot=e,this.type=Zt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},jy=class{constructor(e){this.snapshot=e,this.type=Zt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nl=class{constructor(e){this.snapshot=e,this.type=Zt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var rl=class{},Ma=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function NH(n,e){return n.providers&&!n._injector&&(n._injector=ry(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wr(n){return n.outlet||_e}function MH(n,e){let t=n.filter(r=>wr(r)===e);return t.push(...n.filter(r=>wr(r)!==e)),t}function ul(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var By=class{get injector(){return ul(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new np(this.rootInjector),this.attachRef=null}},np=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new By(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(se(Yn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=$y(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=$y(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Hy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Hy(e,this._root).map(t=>t.value)}};function $y(n,e){if(n===e.value)return e;for(let t of e.children){let r=$y(n,t);if(r)return r}return null}function Hy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Hy(n,t);if(r.length)return r.unshift(e),r}return[]}var Bn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Da(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zf=class extends Yf{constructor(e,t){super(e),this.snapshot=t,Xy(this,e)}toString(){return this.snapshot.toString()}};function Ix(n){let e=PH(n),t=new Qt([new eo("",{})]),r=new Qt({}),i=new Qt({}),s=new Qt({}),o=new Qt(""),a=new Pa(t,r,s,o,i,_e,n,e.root);return a.snapshot=e.root,new Zf(new Bn(a,[]),e)}function PH(n){let e={},t={},r={},i="",s=new Ra([],e,r,i,t,_e,n,null,{});return new Xf("",new Bn(s,[]))}var Pa=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Q(l=>l[cl]))??ne(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Na(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Na(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Jf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&Cx(i)&&(r.resolve[cl]=i.title),r}var Ra=class{get title(){return this.data?.[cl]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Na(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Na(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Xf=class extends Yf{constructor(e,t){super(t),this.url=e,Xy(this,t)}toString(){return Ex(this._root)}};function Xy(n,e){e.value._routerState=n,e.children.forEach(t=>Xy(n,t))}function Ex(n){let e=n.children.length>0?` { ${n.children.map(Ex).join(", ")} } `:"";return`${n.value}${e}`}function Ty(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Hr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Hr(e.params,t.params)||n.paramsSubject.next(t.params),oH(e.url,t.url)||n.urlSubject.next(t.url),Hr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function qy(n,e){let t=Hr(n.params,e.params)&&lH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||qy(n.parent,e.parent))}function Cx(n){return typeof n.title=="string"||n.title===null}var ew=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=_e,this.activateEvents=new Mt,this.deactivateEvents=new Mt,this.attachEvents=new Mt,this.detachEvents=new Mt,this.parentContexts=M(np),this.location=M(Vu),this.changeDetector=M(cs),this.inputBinder=M(tw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Gy(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ft({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[pi]})}}return n})(),Gy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pa?this.route:e===np?this.childContexts:this.parent.get(e,t)}},tw=new H("");function OH(n,e,t){let r=il(n,e._root,t?t._root:void 0);return new Zf(r,e)}function il(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=kH(n,e,t);return new Bn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>il(n,a)),o}}let r=FH(e.value),i=e.children.map(s=>il(n,s));return new Bn(r,i)}}function kH(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return il(n,r,i);return il(n,r)})}function FH(n){return new Pa(new Qt(n.url),new Qt(n.params),new Qt(n.queryParams),new Qt(n.fragment),new Qt(n.data),n.outlet,n.component,n)}var sl=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Tx="ngNavigationCancelingError";function ep(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Ju(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=bx(!1,$n.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function bx(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Tx]=!0,t.cancellationCode=e,t}function LH(n){return Sx(n)&&Ju(n.url)}function Sx(n){return!!n&&n[Tx]}var VH=(n,e,t,r)=>Q(i=>(new zy(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),zy=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ty(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Da(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Da(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Da(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Da(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new nl(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Uy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Ty(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ty(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},tp=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xa=class{constructor(e,t){this.component=e,this.route=t}};function UH(n,e,t){let r=n._root,i=e?e._root:null;return zu(r,i,t,[r.value])}function jH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ka(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!yD(n)?n:e.get(n):r}function zu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Da(e);return n.children.forEach(o=>{BH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yu(a,t.getContext(o),i)),i}function BH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=$H(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new tp(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?zu(n,e,a?a.children:null,r,i):zu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xa(a.outlet.component,o))}else o&&Yu(e,a,i),i.canActivateChecks.push(new tp(r)),s.component?zu(n,null,a?a.children:null,r,i):zu(n,null,t,r,i);return i}function $H(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!to(n.url,e.url);case"pathParamsOrQueryParamsChange":return!to(n.url,e.url)||!Hr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qy(n,e)||!Hr(n.queryParams,e.queryParams);case"paramsChange":default:return!qy(n,e)}}function Yu(n,e,t){let r=Da(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Yu(o,e.children.getContext(s),t):Yu(o,null,t):Yu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new xa(e.outlet.component,i)):t.canDeactivateChecks.push(new xa(null,i)):t.canDeactivateChecks.push(new xa(null,i))}function ll(n){return typeof n=="function"}function HH(n){return typeof n=="boolean"}function qH(n){return n&&ll(n.canLoad)}function GH(n){return n&&ll(n.canActivate)}function zH(n){return n&&ll(n.canActivateChild)}function WH(n){return n&&ll(n.canDeactivate)}function KH(n){return n&&ll(n.canMatch)}function Dx(n){return n instanceof si||n?.name==="EmptyError"}var Hf=Symbol("INITIAL_VALUE");function Oa(){return Tn(n=>Je(n.map(e=>e.pipe(oi(1),aa(Hf)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===Hf)return Hf;if(t===!1||QH(t))return t}return!0}),mn(e=>e!==Hf),oi(1)))}function QH(n){return Ju(n)||n instanceof sl}function YH(n,e){return St(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ne(Te(j({},t),{guardsResult:!0})):ZH(o,r,i,n).pipe(St(a=>a&&HH(a)?JH(r,s,n,e):ne(a)),Q(a=>Te(j({},t),{guardsResult:a})))})}function ZH(n,e,t,r){return ct(n).pipe(St(i=>rq(i.component,i.route,t,e,r)),Pr(i=>i!==!0,!0))}function JH(n,e,t,r){return ct(e).pipe(Os(i=>sa(eq(i.route.parent,r),XH(i.route,r),nq(n,i.path,t),tq(n,i.route,t))),Pr(i=>i!==!0,!0))}function XH(n,e){return n!==null&&e&&e(new jy(n)),ne(!0)}function eq(n,e){return n!==null&&e&&e(new Vy(n)),ne(!0)}function tq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ne(!0);let i=r.map(s=>wh(()=>{let o=ul(e)??t,a=ka(s,o),c=GH(a)?a.canActivate(e,n):di(o,()=>a(e,n));return ds(c).pipe(Pr())}));return ne(i).pipe(Oa())}function nq(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>jH(o)).filter(o=>o!==null).map(o=>wh(()=>{let a=o.guards.map(c=>{let l=ul(o.node)??t,d=ka(c,l),f=zH(d)?d.canActivateChild(r,n):di(l,()=>d(r,n));return ds(f).pipe(Pr())});return ne(a).pipe(Oa())}));return ne(s).pipe(Oa())}function rq(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ne(!0);let o=s.map(a=>{let c=ul(e)??i,l=ka(a,c),d=WH(l)?l.canDeactivate(n,e,t,r):di(c,()=>l(n,e,t,r));return ds(d).pipe(Pr())});return ne(o).pipe(Oa())}function iq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ne(!0);let s=i.map(o=>{let a=ka(o,n),c=qH(a)?a.canLoad(e,t):di(n,()=>a(e,t));return ds(c)});return ne(s).pipe(Oa(),Ax(r))}function Ax(n){return eh(jt(e=>{if(typeof e!="boolean")throw ep(n,e)}),Q(e=>e===!0))}function sq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ne(!0);let s=i.map(o=>{let a=ka(o,n),c=KH(a)?a.canMatch(e,t):di(n,()=>a(e,t));return ds(c)});return ne(s).pipe(Oa(),Ax(r))}var ol=class{constructor(e){this.segmentGroup=e||null}},al=class extends Error{constructor(e){super(),this.urlTree=e}};function Sa(n){return ia(new ol(n))}function oq(n){return ia(new Y(4e3,!1))}function aq(n){return ia(bx(!1,$n.GuardRejected))}var Wy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ne(r);if(i.numberOfChildren>1||!i.children[_e])return oq(`${e.redirectTo}`);i=i.children[_e]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:m,params:v,data:w,title:N}=i,R=di(s,()=>a({params:v,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:m,title:N}));if(R instanceof bi)throw new al(R);t=R}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new al(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new bi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new qe(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Y(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ky={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cq(n,e,t,r,i){let s=Rx(n,e,t);return s.matched?(r=NH(e,r),sq(r,e,t,i).pipe(Q(o=>o===!0?s:j({},Ky)))):ne(s)}function Rx(n,e,t){if(e.path==="**")return uq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},Ky):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||sH)(t,n,e);if(!i)return j({},Ky);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?j(j({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function uq(n){return{matched:!0,parameters:n.length>0?cx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ix(n,e,t,r){return t.length>0&&hq(n,t,r)?{segmentGroup:new qe(e,dq(r,new qe(t,n.children))),slicedSegments:[]}:t.length===0&&fq(n,t,r)?{segmentGroup:new qe(n.segments,lq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new qe(n.segments,n.children),slicedSegments:t}}function lq(n,e,t,r){let i={};for(let s of t)if(rp(n,e,s)&&!r[wr(s)]){let o=new qe([],{});i[wr(s)]=o}return j(j({},r),i)}function dq(n,e){let t={};t[_e]=e;for(let r of n)if(r.path===""&&wr(r)!==_e){let i=new qe([],{});t[wr(r)]=i}return t}function hq(n,e,t){return t.some(r=>rp(n,e,r)&&wr(r)!==_e)}function fq(n,e,t){return t.some(r=>rp(n,e,r))}function rp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function pq(n,e,t){return e.length===0&&!n.children[t]}var Qy=class{};function mq(n,e,t,r,i,s,o="emptyOnly"){return new Yy(n,e,t,r,i,o,s).recognize()}var gq=31,Yy=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Wy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=ix(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new Bn(r,t),s=new Xf("",i),o=TH(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ra([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),_e,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,_e,t).pipe(Q(r=>({children:r,rootSnapshot:t})),Ki(r=>{if(r instanceof al)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ol?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Q(o=>o instanceof Bn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ct(s).pipe(Os(o=>{let a=r.children[o],c=MH(t,o);return this.processSegmentGroup(e,c,a,o,i)}),Th((o,a)=>(o.push(...a),o)),Qi(null),gv(),St(o=>{if(o===null)return Sa(r);let a=xx(o);return vq(a),ne(a)}))}processSegment(e,t,r,i,s,o,a){return ct(t).pipe(Os(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(Ki(l=>{if(l instanceof ol)return ne(null);throw l}))),Pr(c=>!!c),Ki(c=>{if(Dx(c))return pq(r,i,s)?ne(new Qy):Sa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return wr(r)!==o&&(o===_e||!rp(i,s,r))?Sa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Sa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=Rx(t,i,s);if(!c)return Sa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>gq&&(this.allowRedirects=!1));let v=new Ra(s,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,sx(i),wr(i),i.component??i._loadedComponent??null,i,ox(i)),w=Jf(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let N=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,v,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(St(R=>this.processSegment(e,r,t,R.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=cq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Tn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Tn(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:v}=c,w=new Ra(m,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,sx(r),wr(r),r.component??r._loadedComponent??null,r,ox(r)),N=Jf(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data);let{segmentGroup:R,slicedSegments:L}=ix(t,m,v,l);if(L.length===0&&R.hasChildren())return this.processChildren(d,l,R,w).pipe(Q(W=>new Bn(w,W)));if(l.length===0&&L.length===0)return ne(new Bn(w,[]));let q=wr(r)===s;return this.processSegment(d,l,R,L,q?_e:s,!0,w).pipe(Q(W=>new Bn(w,W instanceof Bn?[W]:[])))}))):Sa(t)))}getChildConfig(e,t,r){return t.children?ne({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ne({routes:t._loadedRoutes,injector:t._loadedInjector}):iq(e,t,r,this.urlSerializer).pipe(St(i=>i?this.configLoader.loadChildren(e,t).pipe(jt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):aq(t))):ne({routes:[],injector:e})}};function vq(n){n.sort((e,t)=>e.value.outlet===_e?-1:t.value.outlet===_e?1:e.value.outlet.localeCompare(t.value.outlet))}function _q(n){let e=n.value.routeConfig;return e&&e.path===""}function xx(n){let e=[],t=new Set;for(let r of n){if(!_q(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=xx(r.children);e.push(new Bn(r.value,i))}return e.filter(r=>!t.has(r))}function sx(n){return n.data||{}}function ox(n){return n.resolve||{}}function yq(n,e,t,r,i,s){return St(o=>mq(n,e,t,r,o.extractedUrl,i,s).pipe(Q(({state:a,tree:c})=>Te(j({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function wq(n,e){return St(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ne(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of Nx(c))o.add(l);let a=0;return ct(o).pipe(Os(c=>s.has(c)?Iq(c,r,n,e):(c.data=Jf(c,c.parent,n).resolve,ne(void 0))),jt(()=>a++),oa(1),St(c=>a===o.size?ne(t):Vn))})}function Nx(n){let e=n.children.map(t=>Nx(t)).flat();return[n,...e]}function Iq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!Cx(i)&&(s[cl]=i.title),Eq(s,n,e,r).pipe(Q(o=>(n._resolvedData=o,n.data=Jf(n,n.parent,t).resolve,null)))}function Eq(n,e,t,r){let i=Dy(n);if(i.length===0)return ne({});let s={};return ct(i).pipe(St(o=>Cq(n[o],e,t,r).pipe(Pr(),jt(a=>{if(a instanceof sl)throw ep(new Zu,a);s[o]=a}))),oa(1),pv(s),Ki(o=>Dx(o)?Vn:ia(o)))}function Cq(n,e,t,r){let i=ul(e)??r,s=ka(n,i),o=s.resolve?s.resolve(e,t):di(i,()=>s(e,t));return ds(o)}function by(n){return Tn(e=>{let t=n(e);return t?ct(t).pipe(Q(()=>e)):ne(e)})}var Mx=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===_e);return r}getResolvedTitleForRoute(t){return t.data[cl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>M(Tq),providedIn:"root"})}}return n})(),Tq=(()=>{class n extends Mx{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(se(Bf))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),nw=new H("",{providedIn:"root",factory:()=>({})}),rw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=We({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ke],decls:1,vars:0,template:function(r,i){r&1&&ve(0,"router-outlet")},dependencies:[ew],encapsulation:2})}}return n})();function iw(n){let e=n.children&&n.children.map(iw),t=e?Te(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==_e&&(t.component=rw),t}var sw=new H(""),bq=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(sy)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ne(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ds(t.loadComponent()).pipe(Q(Px),jt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Eu(()=>{this.componentLoaders.delete(t)})),i=new Xo(r,()=>new ht).pipe(Jo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ne({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Sq(r,this.compiler,t,this.onLoadEndListener).pipe(Eu(()=>{this.childrenLoaders.delete(r)})),o=new Xo(s,()=>new ht).pipe(Jo());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sq(n,e,t,r){return ds(n.loadChildren()).pipe(Q(Px),St(i=>i instanceof Mu||Array.isArray(i)?ne(i):ct(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(sw,[],{optional:!0,self:!0}).flat()),{routes:o.map(iw),injector:s}}))}function Dq(n){return n&&typeof n=="object"&&"default"in n}function Px(n){return Dq(n)?n.default:n}var ow=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>M(Aq),providedIn:"root"})}}return n})(),Aq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Rq=new H("");var xq=new H(""),Nq=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ht,this.transitionAbortSubject=new ht,this.configLoader=M(bq),this.environmentInjector=M(Yn),this.urlSerializer=M(Jy),this.rootContexts=M(np),this.location=M(Bu),this.inputBindingEnabled=M(tw,{optional:!0})!==null,this.titleStrategy=M(Mx),this.options=M(nw,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(ow),this.createViewTransition=M(Rq,{optional:!0}),this.navigationErrorHandler=M(xq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ne(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Fy(i)),r=i=>this.events.next(new Ly(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Te(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Qt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Qu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mn(s=>s.id!==0),Q(s=>Te(j({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Tn(s=>{let o=!1,a=!1;return ne(s).pipe(Tn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",$n.SupersededByNewNavigation),Vn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Te(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new ro(c.id,this.urlSerializer.serialize(c.rawUrl),f,Ny.IgnoredSameUrlNavigation)),c.resolve(!1),Vn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ne(c).pipe(Tn(f=>{let m=this.transitions?.getValue();return this.events.next(new el(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?Vn:Promise.resolve(f)}),yq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),jt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=Te(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new Qf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:m,source:v,restoredState:w,extras:N}=c,R=new el(f,this.urlSerializer.serialize(m),v,w);this.events.next(R);let L=Ix(this.rootComponentType).snapshot;return this.currentTransition=s=Te(j({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:Te(j({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ne(s)}else{let f="";return this.events.next(new ro(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Ny.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Vn}}),jt(c=>{let l=new My(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Q(c=>(this.currentTransition=s=Te(j({},c),{guards:UH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),YH(this.environmentInjector,c=>this.events.next(c)),jt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw ep(this.urlSerializer,c.guardsResult);let l=new Py(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),mn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",$n.GuardRejected),!1)),by(c=>{if(c.guards.canActivateChecks.length)return ne(c).pipe(jt(l=>{let d=new Oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Tn(l=>{let d=!1;return ne(l).pipe(wq(this.paramsInheritanceStrategy,this.environmentInjector),jt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",$n.NoDataFromResolver)}}))}),jt(l=>{let d=new ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),by(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(jt(m=>{d.component=m}),Q(()=>{})));for(let m of d.children)f.push(...l(m));return f};return Je(l(c.targetSnapshot.root)).pipe(Qi(null),oi(1))}),by(()=>this.afterPreactivation()),Tn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ct(d).pipe(Q(()=>s)):ne(s)}),Q(c=>{let l=OH(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=Te(j({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),jt(()=>{this.events.next(new rl)}),VH(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),oi(1),jt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new no(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Ht(this.transitionAbortSubject.pipe(jt(c=>{throw c}))),Eu(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",$n.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ki(c=>{if(a=!0,Sx(c))this.events.next(new Ti(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),LH(c)?this.events.next(new Ma(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new tl(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=di(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof sl){let{message:f,cancellationCode:m}=ep(this.urlSerializer,d);this.events.next(new Ti(s.id,this.urlSerializer.serialize(s.extractedUrl),f,m)),this.events.next(new Ma(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Vn}))}))}cancelNavigationTransition(t,r,i){let s=new Ti(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Mq(n){return n!==Qu}var Pq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>M(Oq),providedIn:"root"})}}return n})(),Zy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Oq=(()=>{class n extends Zy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ox=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>M(kq),providedIn:"root"})}}return n})(),kq=(()=>{class n extends Ox{constructor(){super(...arguments),this.location=M(Bu),this.urlSerializer=M(Jy),this.options=M(nw,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(ow),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new bi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ix(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof el)this.stateMemento=this.createStateMemento();else if(t instanceof ro)this.rawUrlTree=r.initialUrl;else if(t instanceof Qf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof rl?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ti&&(t.code===$n.GuardRejected||t.code===$n.NoDataFromResolver)?this.restoreHistory(r):t instanceof tl?this.restoreHistory(r,!0):t instanceof no&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof bi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=j(j({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Wu||{});function Fq(n,e){n.events.pipe(mn(t=>t instanceof no||t instanceof Ti||t instanceof tl||t instanceof ro),Q(t=>t instanceof no||t instanceof ro?Wu.COMPLETE:(t instanceof Ti?t.code===$n.Redirect||t.code===$n.SupersededByNewNavigation:!1)?Wu.REDIRECTING:Wu.FAILED),mn(t=>t!==Wu.REDIRECTING),oi(1)).subscribe(()=>{e()})}function Lq(n){throw n}var Vq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Uq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ip=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(Tf),this.stateManager=M(Ox),this.options=M(nw,{optional:!0})||{},this.pendingTasks=M(Ks),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(Nq),this.urlSerializer=M(Jy),this.location=M(Bu),this.urlHandlingStrategy=M(ow),this._events=new ht,this.errorHandler=this.options.errorHandler||Lq,this.navigated=!1,this.routeReuseStrategy=M(Pq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(sw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(tw,{optional:!0}),this.eventsSubscription=new yt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ti&&r.code!==$n.Redirect&&r.code!==$n.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof no)this.navigated=!0;else if(r instanceof Ma){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Mq(i.source)},o);this.scheduleNavigation(a,Qu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Bq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Qu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(iw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=j(j({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=vx(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return _x(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Ju(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Qu,null,r)}navigate(t,r={skipLocationChange:!1}){return jq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},Vq):r===!1?i=j({},Uq):i=r,Ju(t))return ex(this.currentUrlTree,t,i);let s=this.parseUrl(t);return ex(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return Fq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function jq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Y(4008,!1)}function Bq(n){return!(n instanceof rl)&&!(n instanceof Ma)}var $q=new H("");function kx(n,...e){return nt([{provide:sw,multi:!0,useValue:n},[],{provide:Pa,useFactory:Hq,deps:[ip]},{provide:iy,multi:!0,useFactory:qq},e.map(t=>t.\u0275providers)])}function Hq(n){return n.routerState.root}function qq(){let n=M(Ae);return e=>{let t=n.get(Js);if(e!==t.components[0])return;let r=n.get(ip),i=n.get(Gq);n.get(zq)===1&&r.initialNavigation(),n.get(Wq,null,Ie.Optional)?.setUpPreloading(),n.get($q,null,Ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Gq=new H("",{factory:()=>new ht}),zq=new H("",{providedIn:"root",factory:()=>1});var Wq=new H("");var Fx=[];var Qq="firebase",Yq="10.14.1";Z(Qq,Yq,"app");var st=new li("ANGULARFIRE2_VERSION"),La=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function Ot(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var At=(n,e)=>{let t=e?[e]:$d(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},xn=class{constructor(){return At(Zq)}},Zq="app-check";function Fa(){}var sp=class{zone;delegate;constructor(e,t=cv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},aw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fa,{},Fa,Fa)),t.pipe(jt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Et=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new sp(Zone.current)),this.insideAngular=t.run(()=>new sp(Zone.current,ra)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(se(ie))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function op(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Jq(n){return op().ngZone.runOutsideAngular(()=>n())}function io(n){return op().ngZone.run(()=>n())}function Xq(n){return eG(op())(n)}function eG(n){return function(t){return t=t.lift(new aw(n.ngZone)),t.pipe(Wi(n.outsideAngular),zi(n.insideAngular))}}var tG=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),io(()=>n.apply(void 0,r))},Ve=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=io(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fa,{},Fa,Fa))),r[s]=tG(r[s],t));let i=Jq(()=>n.apply(this,r));if(!e)if(i instanceof de){let s=op();return i.pipe(Wi(s.outsideAngular),zi(s.insideAngular))}else return io(()=>i);return i instanceof de?i.pipe(Xq):i instanceof Promise?io(()=>new Promise((s,o)=>i.then(a=>io(()=>s(a)),a=>io(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:io(()=>i)};var ot=class{constructor(e){return e}},pt=class{constructor(){return $d()}};function nG(n){return n&&n.length===1?n[0]:new ot(Nt())}var cw=new H("angularfire2._apps"),rG={provide:ot,useFactory:nG,deps:[[new ce,cw]]},iG={provide:pt,deps:[[new ce,cw]]};function sG(n){return(e,t)=>{let r=t.get(_r);Z("angularfire",st.full,"core"),Z("angularfire",st.full,"app"),Z("angular",CR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ot(i)}}function Lx(n,...e){return nt([rG,iG,{provide:cw,useFactory:sG(n),multi:!0,deps:[ie,Ae,Et,...e]}])}var Vx=Ve(qb,!0);function Xx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var eN=Xx,tN=new Rr("auth","Firebase",Xx());var hp=new Nr("@firebase/auth");function oG(n,...e){hp.logLevel<=rn.WARN&&hp.warn(`Auth (${En}): ${n}`,...e)}function cp(n,...e){hp.logLevel<=rn.ERROR&&hp.error(`Auth (${En}): ${n}`,...e)}function fs(n,...e){throw Aw(n,...e)}function oo(n,...e){return Aw(n,...e)}function nN(n,e,t){let r=Object.assign(Object.assign({},eN()),{[e]:t});return new Rr("auth","Firebase",r).create(e,{appName:n.name})}function so(n){return nN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Aw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return tN.create(n,...e)}function le(n,e,...t){if(!n)throw Aw(e,...t)}function Si(n){let e="INTERNAL ASSERTION FAILED: "+n;throw cp(e),new Error(e)}function ps(n,e){n||Si(e)}function hw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function aG(){return Ux()==="http:"||Ux()==="https:"}function Ux(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function cG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aG()||au()||"connection"in navigator)?navigator.onLine:!0}function uG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ao=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ps(t>e,"Short delay should be less than long delay!"),this.isMobile=ou()||Ud()}get(){return cG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Rw(n,e){ps(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var fp=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var lG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var dG=new ao(3e4,6e4);function xw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Ua(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return rN(n,i,()=>_(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=Rs(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},l);return kb()||(v.referrerPolicy="no-referrer"),fp.fetch()(iN(n,n.config.apiHost,t,f),v)}))})}function rN(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},lG),e);try{let i=new fw(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw ap(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ap(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw ap(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw ap(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw nN(n,d,l);fs(n,d)}}catch(i){if(i instanceof In)throw i;fs(n,"network-request-failed",{message:String(i)})}})}function hG(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield Ua(n,e,t,r,i);return"mfaPendingCredential"in l&&fs(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function iN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Rw(n.config,i):`${n.config.apiScheme}://${i}`}var fw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(oo(this.auth,"network-request-failed")),dG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ap(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=oo(n,e,r);return i.customData._tokenResponse=t,i}function fG(n,e){return _(this,null,function*(){return Ua(n,"POST","/v1/accounts:delete",e)})}function sN(n,e){return _(this,null,function*(){return Ua(n,"POST","/v1/accounts:lookup",e)})}function dl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Nw(n,e=!1){return _(this,null,function*(){let t=xe(n),r=yield t.getIdToken(e),i=Mw(r);le(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:dl(uw(i.auth_time)),issuedAtTime:dl(uw(i.iat)),expirationTime:dl(uw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function uw(n){return Number(n)*1e3}function Mw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return cp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Mb(t);return i?JSON.parse(i):(cp("Failed to decode base64 JWT payload"),null)}catch(i){return cp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function jx(n){let e=Mw(n);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function fl(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof In&&pG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function pG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var pw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var pl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=dl(this.lastLoginAt),this.creationTime=dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function pp(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield fl(n,sN(t,{idToken:r}));le(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?oN(s.providerUserInfo):[],a=mG(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new pl(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Pw(n){return _(this,null,function*(){let e=xe(n);yield pp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function mG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function oN(n){return n.map(e=>{var{providerId:t}=e,r=uv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function gG(n,e){return _(this,null,function*(){let t=yield rN(n,{},()=>_(this,null,function*(){let r=Rs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=iN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",fp.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function vG(n,e){return _(this,null,function*(){return Ua(n,"POST","/v2/accounts:revokeToken",xw(n,e))})}var hl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):jx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){le(e.length!==0,"internal-error");let t=jx(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield gG(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(le(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(le(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Si("not implemented")}};function hs(n,e){le(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Va=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=uv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new pl(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield fl(this,this.stsTokenManager.getToken(this.auth,e));return le(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Nw(this,e)}reload(){return Pw(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield pp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(ii(this.auth.app))return Promise.reject(so(this.auth));let e=yield this.getIdToken();return yield fl(this,fG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,R=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,L=(l=t.createdAt)!==null&&l!==void 0?l:void 0,q=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:W,emailVerified:te,isAnonymous:Ye,providerData:re,stsTokenManager:C}=t;le(W&&C,e,"internal-error");let y=hl.fromJSON(this.name,C);le(typeof W=="string",e,"internal-error"),hs(f,e.name),hs(m,e.name),le(typeof te=="boolean",e,"internal-error"),le(typeof Ye=="boolean",e,"internal-error"),hs(v,e.name),hs(w,e.name),hs(N,e.name),hs(R,e.name),hs(L,e.name),hs(q,e.name);let I=new n({uid:W,auth:e,email:m,emailVerified:te,displayName:f,isAnonymous:Ye,photoURL:w,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:L,lastLoginAt:q});return re&&Array.isArray(re)&&(I.providerData=re.map(T=>Object.assign({},T))),R&&(I._redirectEventId=R),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new hl;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield pp(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];le(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?oN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new hl;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new pl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var Bx=new Map;function Di(n){ps(n instanceof Function,"Expected a class definition");let e=Bx.get(n);return e?(ps(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Bx.set(n,e),e)}var _G=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),mw=_G;function up(n,e,t){return`firebase:${n}:${e}:${t}`}var mp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=up(this.userKey,i.apiKey,s),this.fullPersistenceKey=up("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Va._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(Di(mw),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Di(mw),o=up(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(o);if(d){let f=Va._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function $x(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hN(e))return"Blackberry";if(fN(e))return"Webos";if(cN(e))return"Safari";if((e.includes("chrome/")||uN(e))&&!e.includes("edge/"))return"Chrome";if(dN(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function aN(n=nn()){return/firefox\//i.test(n)}function cN(n=nn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function uN(n=nn()){return/crios\//i.test(n)}function lN(n=nn()){return/iemobile/i.test(n)}function dN(n=nn()){return/android/i.test(n)}function hN(n=nn()){return/blackberry/i.test(n)}function fN(n=nn()){return/webos/i.test(n)}function Ow(n=nn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function yG(n=nn()){var e;return Ow(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wG(){return Fb()&&document.documentMode===10}function pN(n=nn()){return Ow(n)||dN(n)||fN(n)||hN(n)||/windows phone/i.test(n)||lN(n)}function mN(n,e=[]){let t;switch(n){case"Browser":t=$x(nn());break;case"Worker":t=`${$x(nn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${En}/${r}`}var gw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function IG(t){return _(this,arguments,function*(n,e={}){return Ua(n,"GET","/v2/passwordPolicy",xw(n,e))})}var EG=6,vw=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:EG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var _w=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gp(this),this.idTokenSubscription=new gp(this),this.beforeStateQueue=new gw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Di(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield mp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield sN(this,{idToken:e}),r=yield Va._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(ii(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield pp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=uG()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(ii(this.app))return Promise.reject(so(this));let t=e?xe(e):null;return t&&le(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return ii(this.app)?Promise.reject(so(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ii(this.app)?Promise.reject(so(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Di(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield IG(this),t=new vw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Rr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield vG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Di(e)||this._popupRedirectResolver;le(t,this,"argument-error"),this.redirectPersistenceManager=yield mp.create(this,[Di(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=mN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&oG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function kw(n){return xe(n)}var gp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bb(t=>this.observer=t)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Fw={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function CG(n){Fw=n}function TG(n){return Fw.loadJS(n)}function bG(){return Fw.gapiScript}function gN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Lw(n,e){let t=xt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(du(s,e??{}))return i;fs(i,"already-initialized")}return t.initialize({options:e})}function SG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Di);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Vw(n,e,t){let r=kw(n);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=vN(e),{host:o,port:a}=DG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||AG()}function vN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function DG(n){let e=vN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Hx(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Hx(o)}}}function Hx(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function AG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var vp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Si("not implemented")}_getIdTokenResponse(e){return Si("not implemented")}_linkToIdToken(e,t){return Si("not implemented")}_getReauthenticationResolver(e){return Si("not implemented")}};function lw(n,e){return _(this,null,function*(){return hG(n,"POST","/v1/accounts:signInWithIdp",xw(n,e))})}var _p=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var yw=class extends _p{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ml=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let s=yield Va._fromIdTokenResponse(e,r,i),o=qx(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=qx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function qx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var ww=class n extends In{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function _N(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ww._fromErrorAndOperation(n,s,e,r):s})}function RG(n,e,t=!1){return _(this,null,function*(){let r=yield fl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ml._forOperation(n,"link",r)})}function xG(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(ii(r.app))return Promise.reject(so(r));let i="reauthenticate";try{let s=yield fl(n,_N(r,i,e,n),t);le(s.idToken,r,"internal-error");let o=Mw(s.idToken);le(o,r,"internal-error");let{sub:a}=o;return le(n.uid===a,r,"user-mismatch"),ml._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&fs(r,"user-mismatch"),s}})}function NG(n,e,t=!1){return _(this,null,function*(){if(ii(n.app))return Promise.reject(so(n));let r="signIn",i=yield _N(n,r,e),s=yield ml._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Cp(n,e,t,r){return xe(n).onIdTokenChanged(e,t,r)}function Uw(n,e,t){return xe(n).beforeAuthStateChanged(e,t)}function Tp(n,e,t,r){return xe(n).onAuthStateChanged(e,t,r)}var yp="__sak";var wp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yp,"1"),this.storage.removeItem(yp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var MG=1e3,PG=10,OG=(()=>{class n extends wp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);wG()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,PG):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},MG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Hi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Hi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Hi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),yN=OG;var kG=(()=>{class n extends wp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),jw=kG;function FG(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var LG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>_(this,null,function*(){return d(r.origin,o)})),l=yield FG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function wN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Iw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=wN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function qr(){return window}function VG(n){qr().location.href=n}function IN(){return typeof qr().WorkerGlobalScope<"u"&&typeof qr().importScripts=="function"}function UG(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function jG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function BG(){return IN()?self:null}var EN="firebaseLocalStorageDb",$G=1,Ip="firebaseLocalStorage",CN="fbase_key",co=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function bp(n,e){return n.transaction([Ip],e?"readwrite":"readonly").objectStore(Ip)}function HG(){let n=indexedDB.deleteDatabase(EN);return new co(n).toPromise()}function Ew(){let n=indexedDB.open(EN,$G);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Ip,{keyPath:CN})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Ip)?e(r):(r.close(),yield HG(),e(yield Ew()))}))})}function Gx(n,e,t){return _(this,null,function*(){let r=bp(n,!0).put({[CN]:e,value:t});return new co(r).toPromise()})}function qG(n,e){return _(this,null,function*(){let t=bp(n,!1).get(e),r=yield new co(t).toPromise();return r===void 0?null:r.value})}function zx(n,e){let t=bp(n,!0).delete(e);return new co(t).toPromise()}var GG=800,zG=3,WG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Ew(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>zG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return IN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=LG._getInstance(BG()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield UG(),!this.activeServiceWorker)return;this.sender=new Iw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||jG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ew();return yield Gx(t,yp,"1"),yield zx(t,yp),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>Gx(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>qG(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>zx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=bp(s,!1).getAll();return new co(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),GG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),TN=WG;var Vie=gN("rcb"),Uie=new ao(3e4,6e4);function KG(n,e){return e?Di(e):(le(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var gl=class extends vp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return lw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return lw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return lw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function QG(n){return NG(n.auth,new gl(n),n.bypassAuthState)}function YG(n){let{auth:e,user:t}=n;return le(t,e,"internal-error"),xG(t,new gl(n),n.bypassAuthState)}function ZG(n){return _(this,null,function*(){let{auth:e,user:t}=n;return le(t,e,"internal-error"),RG(t,new gl(n),n.bypassAuthState)})}var Cw=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QG;case"linkViaPopup":case"linkViaRedirect":return ZG;case"reauthViaPopup":case"reauthViaRedirect":return YG;default:fs(this.auth,"internal-error")}}resolve(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ps(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var jie=new ao(2e3,1e4);var JG="pendingRedirect",lp=new Map,Tw=class n extends Cw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=lp.get(this.auth._key());if(!e){try{let r=(yield XG(this.resolver,this.auth))?yield Hi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}lp.set(this.auth._key(),e)}return this.bypassAuthState||lp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Hi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Hi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function XG(n,e){return _(this,null,function*(){let t=nz(e),r=tz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function ez(n,e){lp.set(n._key(),e)}function tz(n){return Di(n._redirectPersistence)}function nz(n){return up(JG,n.config.apiKey,n.name)}function rz(n,e,t=!1){return _(this,null,function*(){if(ii(n.app))return Promise.reject(so(n));let r=kw(n),i=KG(r,e),o=yield new Tw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var iz=10*60*1e3,bw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!bN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(oo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=iz&&this.cachedEventUids.clear(),this.cachedEventUids.has(Wx(e))}saveEventToCache(e){this.cachedEventUids.add(Wx(e)),this.lastProcessedEventTime=Date.now()}};function Wx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function bN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bN(n);default:return!1}}function oz(t){return _(this,arguments,function*(n,e={}){return Ua(n,"GET","/v1/projects",e)})}var az=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cz=/^https?/;function uz(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield oz(n);for(let t of e)try{if(lz(t))return}catch{}fs(n,"unauthorized-domain")})}function lz(n){let e=hw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!cz.test(t))return!1;if(az.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var dz=new ao(3e4,6e4);function Kx(){let n=qr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hz(n){return new Promise((e,t)=>{var r,i,s;function o(){Kx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Kx(),t(oo(n,"network-request-failed"))},timeout:dz.get()})}if(!((i=(r=qr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=qr().gapi)===null||s===void 0)&&s.load)o();else{let a=gN("iframefcb");return qr()[a]=()=>{gapi.load?o():t(oo(n,"network-request-failed"))},TG(`${bG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw dp=null,e})}var dp=null;function fz(n){return dp=dp||hz(n),dp}var pz=new ao(5e3,15e3),mz="__/auth/iframe",gz="emulator/auth/iframe",vz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_z=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yz(n){let e=n.config;le(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Rw(e,gz):`https://${n.config.authDomain}/${mz}`,r={apiKey:e.apiKey,appName:n.name,v:En},i=_z.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Rs(r).slice(1)}`}function wz(n){return _(this,null,function*(){let e=yield fz(n),t=qr().gapi;return le(t,n,"internal-error"),e.open({where:document.body,url:yz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vz,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=oo(n,"network-request-failed"),a=qr().setTimeout(()=>{s(o)},pz.get());function c(){qr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Iz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Ez=500,Cz=600,Tz="_blank",bz="http://localhost",Ep=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Sz(n,e,t,r=Ez,i=Cz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Iz),{width:r.toString(),height:i.toString(),top:s,left:o}),l=nn().toLowerCase();t&&(a=uN(l)?Tz:t),aN(l)&&(e=e||bz,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(yG(l)&&a!=="_self")return Dz(e||"",a),new Ep(null);let f=window.open(e||"",a,d);le(f,n,"popup-blocked");try{f.focus()}catch{}return new Ep(f)}function Dz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Az="__/auth/handler",Rz="emulator/auth/handler",xz=encodeURIComponent("fac");function Qx(n,e,t,r,i,s){return _(this,null,function*(){le(n.config.authDomain,n,"auth-domain-config-required"),le(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:En,eventId:i};if(e instanceof _p){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",uu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof yw){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${xz}=${encodeURIComponent(c)}`:"";return`${Nz(n)}?${Rs(a).slice(1)}${l}`})}function Nz({config:n}){return n.emulator?Rw(n,Rz):`https://${n.authDomain}/${Az}`}var dw="webStorageSupport",Sw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jw,this._completeRedirectFn=rz,this._overrideRedirectResult=ez}_openPopup(e,t,r,i){return _(this,null,function*(){var s;ps((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Qx(e,t,r,hw(),i);return Sz(e,o,wN())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield Qx(e,t,r,hw(),i);return VG(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ps(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield wz(e),r=new bw(e);return t.register("authEvent",i=>(le(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(dw,{type:dw},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[dw];o!==void 0&&t(!!o),fs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pN()||cN()||Ow()}},SN=Sw;var Yx="@firebase/auth",Zx="1.7.9";var Dw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Mz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Pz(n){bt(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;le(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mN(n)},l=new _w(r,i,s,c);return SG(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),bt(new Tt("auth-internal",e=>{let t=kw(e.getProvider("auth").getImmediate());return(r=>new Dw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Z(Yx,Zx,Mz(n)),Z(Yx,Zx,"esm2017")}var Oz=5*60,kz=zg("authIdTokenMaxAge")||Oz,Jx=null,Fz=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>kz)return;let i=t?.token;Jx!==i&&(Jx=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Bw(n=Nt()){let e=xt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Lw(n,{popupRedirectResolver:SN,persistence:[TN,yN,jw]}),r=zg("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Fz(s.toString());Uw(t,o,()=>o(t.currentUser)),Cp(t,a=>o(a))}}let i=Ob("auth");return i&&Vw(t,`http://${i}`),t}function Lz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}CG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=oo("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Lz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Pz("Browser");function AN(n){return new de(function(e){var t=Tp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var RN="auth",uo=class{constructor(e){return e}},Ir=class{constructor(){return At(RN)}};var $w=new H("angularfire2.auth-instances");function RW(n,e){let t=Ot(RN,n,e);return t&&new uo(t)}function xW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new uo(r)}}var NW={provide:Ir,deps:[[new ce,$w]]},MW={provide:uo,useFactory:RW,deps:[[new ce,$w],ot]};function xN(n,...e){return Z("angularfire",st.full,"auth"),nt([MW,NW,{provide:$w,useFactory:xW(n),multi:!0,deps:[ie,Ae,Et,pt,[new ce,xn],...e]}])}var NN=Ve(AN,!0);var MN=Ve(Bw,!0);var Sp="analytics",OW="firebase_id",kW="origin",FW=60*1e3,LW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qw="https://www.googletagmanager.com/gtag/js";var yn=new Nr("@firebase/analytics");var VW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Hn=new Rr("analytics","Analytics",VW);function UW(n){if(!n.startsWith(Qw)){let e=Hn.create("invalid-gtag-resource",{gtagURL:n});return yn.warn(e.message),""}return n}function UN(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function jW(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function BW(n,e){let t=jW("firebase-js-sdk-policy",{createScriptURL:UW}),r=document.createElement("script"),i=`${Qw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function $W(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function HW(n,e,t,r,i,s){return _(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield UN(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){yn.error(a)}n("config",i,s)})}function qW(n,e,t,r,i){return _(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield UN(t);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){yn.error(s)}})}function GW(n,e,t,r){function i(s,...o){return _(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield qW(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield HW(n,e,t,r,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){yn.error(a)}})}return i}function zW(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=GW(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function WW(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(Qw)&&t.src.includes(n))return t;return null}var KW=30,QW=1e3,qw=class{constructor(e={},t=QW){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},jN=new qw;function YW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function ZW(n){return _(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:YW(r)},s=LW.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Hn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function JW(r){return _(this,arguments,function*(n,e=jN,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw Hn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw Hn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Gw;return setTimeout(()=>_(this,null,function*(){c.abort()}),t!==void 0?t:FW),BN({appId:i,apiKey:s,measurementId:o},a,c,e)})}function BN(s,o,a){return _(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=jN){var c;let{appId:l,measurementId:d}=n;try{yield XW(r,e)}catch(f){if(d)return yn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield ZW(n);return i.deleteThrottleMetadata(l),f}catch(f){let m=f;if(!e4(m)){if(i.deleteThrottleMetadata(l),d)return yn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:d};throw f}let v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?fu(t,i.intervalMillis,KW):fu(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(l,w),yn.debug(`Calling attemptFetch again in ${v} millis`),BN(n,w,r,i)}})}function XW(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Hn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function e4(n){if(!(n instanceof In)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Gw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var zw;function t4(n,e,t,r,i){return _(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}function n4(n,e,t,r){return _(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var Ww;function r4(n){Ww=n}function i4(n){zw=n}function s4(){return _(this,null,function*(){if(ri())try{yield Ds()}catch(n){return yn.warn(Hn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return yn.warn(Hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function o4(n,e,t,r,i,s,o){return _(this,null,function*(){var a;let c=JW(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&yn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>yn.error(v)),e.push(c);let l=s4().then(v=>{if(v)return r.getId()}),[d,f]=yield Promise.all([c,l]);WW(s)||BW(s,d.measurementId),Ww&&(i("consent","default",Ww),r4(void 0)),i("js",new Date);let m=(a=o?.config)!==null&&a!==void 0?a:{};return m[kW]="firebase",m.update=!0,f!=null&&(m[OW]=f),i("config",d.measurementId,m),zw&&(i("set",zw),i4(void 0)),d.measurementId})}var Kw=class{constructor(e){this.app=e}_delete(){return delete ja[this.app.options.appId],Promise.resolve()}},ja={},PN=[],ON={},Hw="dataLayer",a4="gtag",kN,Yw,FN=!1;function c4(){let n=[];if(au()&&n.push("This is a browser extension environment."),cu()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Hn.create("invalid-analytics-context",{errorInfo:e});yn.warn(t.message)}}function u4(n,e,t){c4();let r=n.options.appId;if(!r)throw Hn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)yn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Hn.create("no-api-key");if(ja[r]!=null)throw Hn.create("already-exists",{id:r});if(!FN){$W(Hw);let{wrappedGtag:s,gtagCore:o}=zW(ja,PN,ON,Hw,a4);Yw=s,kN=o,FN=!0}return ja[r]=o4(n,PN,ON,e,kN,Hw,t),new Kw(n)}function $N(n=Nt()){n=xe(n);let e=xt(n,Sp);return e.isInitialized()?e.getImmediate():HN(n)}function HN(n,e={}){let t=xt(n,Sp);if(t.isInitialized()){let i=t.getImmediate();if(du(e,t.getOptions()))return i;throw Hn.create("already-initialized")}return t.initialize({options:e})}function qN(){return _(this,null,function*(){if(au()||!cu()||!ri())return!1;try{return yield Ds()}catch{return!1}})}function GN(n,e,t){n=xe(n),n4(Yw,ja[n.app.options.appId],e,t).catch(r=>yn.error(r))}function Zw(n,e,t,r){n=xe(n),t4(Yw,ja[n.app.options.appId],e,t,r).catch(i=>yn.error(i))}var LN="@firebase/analytics",VN="0.10.8";function l4(){bt(new Tt(Sp,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return u4(r,i,t)},"PUBLIC")),bt(new Tt("analytics-internal",n,"PRIVATE")),Z(LN,VN),Z(LN,VN,"esm2017");function n(e){try{let t=e.getProvider(Sp).getImmediate();return{logEvent:(r,i,s)=>Zw(t,r,i,s)}}catch(t){throw Hn.create("interop-component-reg-failed",{reason:t})}}}l4();var lo=class{constructor(e){return e}},KN="analytics",Xw=class{constructor(){return At(KN)}};var eI="__angularfire_symbol__analyticsIsSupportedValue",QN="__angularfire_symbol__analyticsIsSupported";globalThis[QN]||=qN().then(n=>globalThis[eI]=n).catch(()=>globalThis[eI]=!1);var Dp={async:()=>globalThis[QN],sync:()=>{let n=globalThis[eI];if(n===void 0)throw new Error(La("Analytics"));return n}},YN=Dp.async,ZN=Ve($N,!0);var d4=Ve(Zw,!0);var h4=Ve(GN,!0);var nI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){Z("angularfire",st.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),YN().then(()=>{let o=i.get(lo);o?this.disposables=[NN(t).subscribe(a=>{h4(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(se(uo),se(ie),se(Ae))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),f4="firebase_event_origin",p4="firebase_previous_class",m4="firebase_previous_id",g4="firebase_previous_screen",v4="firebase_screen_class",zN="firebase_screen_id",_4="firebase_screen",tI="outlet",y4="page_path",w4="page_title",vl="screen_class",WN="screen_name",I4="screen_view",E4="auto",C4="#",T4=Math.floor(Math.random()*(2**32-1))-2**31,Jw={},b4=n=>{let e=[n[vl],n[tI]].join(C4);if(Jw.hasOwnProperty(e))return Jw[e];{let t=T4++;return Jw[e]=t,t}},S4=(n,e,t)=>n.events.pipe(mn(i=>i instanceof nl)).pipe(Tn(i=>{let o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return ne(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",d={[WN]:l,[y4]:`/${o}`,[f4]:E4,[_4]:l,[tI]:i.snapshot.outlet};e&&(d[w4]=e.getTitle());let f=a.component;if(f){if(f===rw){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;f=m.component}}else f=i.snapshot.component;if(typeof f=="string")return ne(Te(j({},d),{[vl]:f}));if(f){let m=t.resolveComponentFactory(f);return ne(Te(j({},d),{[vl]:m.selector}))}return ne(null)}),mn(i=>!!i),Q(i=>j({[v4]:i[vl],[zN]:b4(i)},i)),mv(i=>i[tI]),St(i=>i.pipe(Ih((s,o)=>JSON.stringify(s)===JSON.stringify(o)),aa(void 0),Ch(),Q(([s,o])=>s?j({[p4]:s[vl],[g4]:s[WN],[m4]:s[zN]},o):o)))),JN=(()=>{class n{disposable;constructor(t,r,i,s,o,a){Z("angularfire",st.full,"screen-tracking"),YN().then(()=>{let c=a.get(lo);!t||!c||s.runOutsideAngular(()=>{this.disposable=S4(t,r,i).pipe(Tn(l=>_(this,null,function*(){return o&&(yield o.initialized),d4(c,I4,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(se(ip,8),se(Bf,8),se(ts),se(ie),se(nI,8),se(Ae))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),rI=new H("angularfire2.analytics-instances");function D4(n,e){if(!Dp.sync())return null;let t=Ot(KN,n,e);return t&&new lo(t)}function A4(n){return(e,t)=>{if(!Dp.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new lo(r)}}var R4={provide:Xw,deps:[[new ce,rI]]},x4={provide:lo,useFactory:D4,deps:[[new ce,rI],ot]};function XN(n,...e){return Z("angularfire",st.full,"analytics"),nt([x4,R4,{provide:as,useValue:Dp.async,multi:!0},{provide:rI,useFactory:A4(n),multi:!0,deps:[ie,Ae,Et,pt,...e]}])}var eM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tM={};var ms,iI;(function(){var n;function e(C,y){function I(){}I.prototype=y.prototype,C.D=y.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(T,b,x){for(var E=Array(arguments.length-2),ei=2;ei<arguments.length;ei++)E[ei-2]=arguments[ei];return y.prototype[b].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,y,I){I||(I=0);var T=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)T[b]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=C.g[0],I=C.g[1],b=C.g[2];var x=C.g[3],E=y+(x^I&(b^x))+T[0]+3614090360&4294967295;y=I+(E<<7&4294967295|E>>>25),E=x+(b^y&(I^b))+T[1]+3905402710&4294967295,x=y+(E<<12&4294967295|E>>>20),E=b+(I^x&(y^I))+T[2]+606105819&4294967295,b=x+(E<<17&4294967295|E>>>15),E=I+(y^b&(x^y))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(x^I&(b^x))+T[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=x+(b^y&(I^b))+T[5]+1200080426&4294967295,x=y+(E<<12&4294967295|E>>>20),E=b+(I^x&(y^I))+T[6]+2821735955&4294967295,b=x+(E<<17&4294967295|E>>>15),E=I+(y^b&(x^y))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(x^I&(b^x))+T[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=x+(b^y&(I^b))+T[9]+2336552879&4294967295,x=y+(E<<12&4294967295|E>>>20),E=b+(I^x&(y^I))+T[10]+4294925233&4294967295,b=x+(E<<17&4294967295|E>>>15),E=I+(y^b&(x^y))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(x^I&(b^x))+T[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=x+(b^y&(I^b))+T[13]+4254626195&4294967295,x=y+(E<<12&4294967295|E>>>20),E=b+(I^x&(y^I))+T[14]+2792965006&4294967295,b=x+(E<<17&4294967295|E>>>15),E=I+(y^b&(x^y))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=y+(b^x&(I^b))+T[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^b&(y^I))+T[6]+3225465664&4294967295,x=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(x^y))+T[11]+643717713&4294967295,b=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(b^x))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^x&(I^b))+T[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^b&(y^I))+T[10]+38016083&4294967295,x=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(x^y))+T[15]+3634488961&4294967295,b=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(b^x))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^x&(I^b))+T[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^b&(y^I))+T[14]+3275163606&4294967295,x=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(x^y))+T[3]+4107603335&4294967295,b=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(b^x))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(b^x&(I^b))+T[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=x+(I^b&(y^I))+T[2]+4243563512&4294967295,x=y+(E<<9&4294967295|E>>>23),E=b+(y^I&(x^y))+T[7]+1735328473&4294967295,b=x+(E<<14&4294967295|E>>>18),E=I+(x^y&(b^x))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=y+(I^b^x)+T[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^b)+T[8]+2272392833&4294967295,x=y+(E<<11&4294967295|E>>>21),E=b+(x^y^I)+T[11]+1839030562&4294967295,b=x+(E<<16&4294967295|E>>>16),E=I+(b^x^y)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^x)+T[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^b)+T[4]+1272893353&4294967295,x=y+(E<<11&4294967295|E>>>21),E=b+(x^y^I)+T[7]+4139469664&4294967295,b=x+(E<<16&4294967295|E>>>16),E=I+(b^x^y)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^x)+T[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^b)+T[0]+3936430074&4294967295,x=y+(E<<11&4294967295|E>>>21),E=b+(x^y^I)+T[3]+3572445317&4294967295,b=x+(E<<16&4294967295|E>>>16),E=I+(b^x^y)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(I^b^x)+T[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=x+(y^I^b)+T[12]+3873151461&4294967295,x=y+(E<<11&4294967295|E>>>21),E=b+(x^y^I)+T[15]+530742520&4294967295,b=x+(E<<16&4294967295|E>>>16),E=I+(b^x^y)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=y+(b^(I|~x))+T[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~b))+T[7]+1126891415&4294967295,x=y+(E<<10&4294967295|E>>>22),E=b+(y^(x|~I))+T[14]+2878612391&4294967295,b=x+(E<<15&4294967295|E>>>17),E=I+(x^(b|~y))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~x))+T[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~b))+T[3]+2399980690&4294967295,x=y+(E<<10&4294967295|E>>>22),E=b+(y^(x|~I))+T[10]+4293915773&4294967295,b=x+(E<<15&4294967295|E>>>17),E=I+(x^(b|~y))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~x))+T[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~b))+T[15]+4264355552&4294967295,x=y+(E<<10&4294967295|E>>>22),E=b+(y^(x|~I))+T[6]+2734768916&4294967295,b=x+(E<<15&4294967295|E>>>17),E=I+(x^(b|~y))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=y+(b^(I|~x))+T[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=x+(I^(y|~b))+T[11]+3174756917&4294967295,x=y+(E<<10&4294967295|E>>>22),E=b+(y^(x|~I))+T[2]+718787259&4294967295,b=x+(E<<15&4294967295|E>>>17),E=I+(x^(b|~y))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+y&4294967295,C.g[1]=C.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+x&4294967295}r.prototype.u=function(C,y){y===void 0&&(y=C.length);for(var I=y-this.blockSize,T=this.B,b=this.h,x=0;x<y;){if(b==0)for(;x<=I;)i(this,C,x),x+=this.blockSize;if(typeof C=="string"){for(;x<y;)if(T[b++]=C.charCodeAt(x++),b==this.blockSize){i(this,T),b=0;break}}else for(;x<y;)if(T[b++]=C[x++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var y=1;y<C.length-8;++y)C[y]=0;var I=8*this.o;for(y=C.length-8;y<C.length;++y)C[y]=I&255,I/=256;for(this.u(C),C=Array(16),y=I=0;4>y;++y)for(var T=0;32>T;T+=8)C[I++]=this.g[y]>>>T&255;return C};function s(C,y){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=y(C)}function o(C,y){this.h=y;for(var I=[],T=!0,b=C.length-1;0<=b;b--){var x=C[b]|0;T&&x==y||(I[b]=x,T=!1)}this.g=I}var a={};function c(C){return-128<=C&&128>C?s(C,function(y){return new o([y|0],0>y?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return R(l(-C));for(var y=[],I=1,T=0;C>=I;T++)y[T]=C/I|0,I*=4294967296;return new o(y,0)}function d(C,y){if(C.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(C.charAt(0)=="-")return R(d(C.substring(1),y));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(y,8)),T=f,b=0;b<C.length;b+=8){var x=Math.min(8,C.length-b),E=parseInt(C.substring(b,b+x),y);8>x?(x=l(Math.pow(y,x)),T=T.j(x).add(l(E))):(T=T.j(I),T=T.add(l(E)))}return T}var f=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(N(this))return-R(this).m();for(var C=0,y=1,I=0;I<this.g.length;I++){var T=this.i(I);C+=(0<=T?T:4294967296+T)*y,y*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(N(this))return"-"+R(this).toString(C);for(var y=l(Math.pow(C,6)),I=this,T="";;){var b=te(I,y).g;I=L(I,b.j(y));var x=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=b,w(I))return x+T;for(;6>x.length;)x="0"+x;T=x+T}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var y=0;y<C.g.length;y++)if(C.g[y]!=0)return!1;return!0}function N(C){return C.h==-1}n.l=function(C){return C=L(this,C),N(C)?-1:w(C)?0:1};function R(C){for(var y=C.g.length,I=[],T=0;T<y;T++)I[T]=~C.g[T];return new o(I,~C.h).add(m)}n.abs=function(){return N(this)?R(this):this},n.add=function(C){for(var y=Math.max(this.g.length,C.g.length),I=[],T=0,b=0;b<=y;b++){var x=T+(this.i(b)&65535)+(C.i(b)&65535),E=(x>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);T=E>>>16,x&=65535,E&=65535,I[b]=E<<16|x}return new o(I,I[I.length-1]&-2147483648?-1:0)};function L(C,y){return C.add(R(y))}n.j=function(C){if(w(this)||w(C))return f;if(N(this))return N(C)?R(this).j(R(C)):R(R(this).j(C));if(N(C))return R(this.j(R(C)));if(0>this.l(v)&&0>C.l(v))return l(this.m()*C.m());for(var y=this.g.length+C.g.length,I=[],T=0;T<2*y;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<C.g.length;b++){var x=this.i(T)>>>16,E=this.i(T)&65535,ei=C.i(b)>>>16,Bc=C.i(b)&65535;I[2*T+2*b]+=E*Bc,q(I,2*T+2*b),I[2*T+2*b+1]+=x*Bc,q(I,2*T+2*b+1),I[2*T+2*b+1]+=E*ei,q(I,2*T+2*b+1),I[2*T+2*b+2]+=x*ei,q(I,2*T+2*b+2)}for(T=0;T<y;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=y;T<2*y;T++)I[T]=0;return new o(I,0)};function q(C,y){for(;(C[y]&65535)!=C[y];)C[y+1]+=C[y]>>>16,C[y]&=65535,y++}function W(C,y){this.g=C,this.h=y}function te(C,y){if(w(y))throw Error("division by zero");if(w(C))return new W(f,f);if(N(C))return y=te(R(C),y),new W(R(y.g),R(y.h));if(N(y))return y=te(C,R(y)),new W(R(y.g),y.h);if(30<C.g.length){if(N(C)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,T=y;0>=T.l(C);)I=Ye(I),T=Ye(T);var b=re(I,1),x=re(T,1);for(T=re(T,2),I=re(I,2);!w(T);){var E=x.add(T);0>=E.l(C)&&(b=b.add(I),x=E),T=re(T,1),I=re(I,1)}return y=L(C,b.j(y)),new W(b,y)}for(b=f;0<=C.l(y);){for(I=Math.max(1,Math.floor(C.m()/y.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),x=l(I),E=x.j(y);N(E)||0<E.l(C);)I-=T,x=l(I),E=x.j(y);w(x)&&(x=m),b=b.add(x),C=L(C,E)}return new W(b,C)}n.A=function(C){return te(this,C).h},n.and=function(C){for(var y=Math.max(this.g.length,C.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)&C.i(T);return new o(I,this.h&C.h)},n.or=function(C){for(var y=Math.max(this.g.length,C.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)|C.i(T);return new o(I,this.h|C.h)},n.xor=function(C){for(var y=Math.max(this.g.length,C.g.length),I=[],T=0;T<y;T++)I[T]=this.i(T)^C.i(T);return new o(I,this.h^C.h)};function Ye(C){for(var y=C.g.length+1,I=[],T=0;T<y;T++)I[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(I,C.h)}function re(C,y){var I=y>>5;y%=32;for(var T=C.g.length-I,b=[],x=0;x<T;x++)b[x]=0<y?C.i(x+I)>>>y|C.i(x+I+1)<<32-y:C.i(x+I);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iI=tM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,ms=tM.Integer=o}).apply(typeof eM<"u"?eM:typeof self<"u"?self:typeof window<"u"?window:{});var Ap=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ai={};var sI,N4,Ba,oI,_l,Rp,aI,cI,uI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ap=="object"&&Ap];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var g=0;g<u.length-1;g++){var S=u[g];if(!(S in p))break e;p=p[S]}u=u[u.length-1],g=p[u],h=h(g),h!=g&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,g=!1,S={next:function(){if(!g&&p<u.length){var O=p++;return{value:h(O,u[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return S[Symbol.iterator]=function(){return S},S}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var S=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(S,g),u.apply(h,S)}}return function(){return u.apply(h,arguments)}}function m(u,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),u.apply(this,g)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(g,S,O){for(var U=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)U[Ze-2]=arguments[Ze];return h.prototype[S].apply(g,U)}}function N(u){let h=u.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=u[g];return p}return[]}function R(u,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let S=u.length||0,O=g.length||0;u.length=S+O;for(let U=0;U<O;U++)u[S+U]=g[U]}else u.push(g)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(u){return/^[\s\xa0]*$/.test(u)}function W(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function te(u){return te[" "](u),u}te[" "]=function(){};var Ye=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function re(u,h,p){for(let g in u)h.call(p,u[g],g,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function y(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,g;for(let S=1;S<arguments.length;S++){g=arguments[S];for(p in g)u[p]=g[p];for(let O=0;O<I.length;O++)p=I[O],Object.prototype.hasOwnProperty.call(g,p)&&(u[p]=g[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function x(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Ig;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class ei{constructor(){this.h=this.g=null}add(h,p){let g=Bc.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Bc=new L(()=>new QF,u=>u.reset());class QF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let $c,Hc=!1,Ig=new ei,RT=()=>{let u=a.Promise.resolve(void 0);$c=()=>{u.then(YF)}};var YF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){x(p)}var h=Bc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Hc=!1};function Ui(){this.s=this.s,this.C=this.C}Ui.prototype.s=!1,Ui.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ui.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Jt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var ZF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function qc(u,h){if(Jt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,g=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Ye){e:{try{te(h.nodeName);var S=!0;break e}catch{}S=!1}S||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:JF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&qc.aa.h.call(this)}}w(qc,Jt);var JF={2:"touch",3:"pen",4:"mouse"};qc.prototype.h=function(){qc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Gc="closure_listenable_"+(1e6*Math.random()|0),XF=0;function eL(u,h,p,g,S){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=S,this.key=++XF,this.da=this.fa=!1}function Ed(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Cd(u){this.src=u,this.g={},this.h=0}Cd.prototype.add=function(u,h,p,g,S){var O=u.toString();u=this.g[O],u||(u=this.g[O]=[],this.h++);var U=Cg(u,h,g,S);return-1<U?(h=u[U],p||(h.fa=!1)):(h=new eL(h,this.src,O,!!g,S),h.fa=p,u.push(h)),h};function Eg(u,h){var p=h.type;if(p in u.g){var g=u.g[p],S=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=S)&&Array.prototype.splice.call(g,S,1),O&&(Ed(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Cg(u,h,p,g){for(var S=0;S<u.length;++S){var O=u[S];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return S}return-1}var Tg="closure_lm_"+(1e6*Math.random()|0),bg={};function xT(u,h,p,g,S){if(g&&g.once)return MT(u,h,p,g,S);if(Array.isArray(h)){for(var O=0;O<h.length;O++)xT(u,h[O],p,g,S);return null}return p=Rg(p),u&&u[Gc]?u.K(h,p,l(g)?!!g.capture:!!g,S):NT(u,h,p,!1,g,S)}function NT(u,h,p,g,S,O){if(!h)throw Error("Invalid event type");var U=l(S)?!!S.capture:!!S,Ze=Dg(u);if(Ze||(u[Tg]=Ze=new Cd(u)),p=Ze.add(h,p,g,U,O),p.proxy)return p;if(g=tL(),p.proxy=g,g.src=u,g.listener=p,u.addEventListener)ZF||(S=U),S===void 0&&(S=!1),u.addEventListener(h.toString(),g,S);else if(u.attachEvent)u.attachEvent(OT(h.toString()),g);else if(u.addListener&&u.removeListener)u.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function tL(){function u(p){return h.call(u.src,u.listener,p)}let h=nL;return u}function MT(u,h,p,g,S){if(Array.isArray(h)){for(var O=0;O<h.length;O++)MT(u,h[O],p,g,S);return null}return p=Rg(p),u&&u[Gc]?u.L(h,p,l(g)?!!g.capture:!!g,S):NT(u,h,p,!0,g,S)}function PT(u,h,p,g,S){if(Array.isArray(h))for(var O=0;O<h.length;O++)PT(u,h[O],p,g,S);else g=l(g)?!!g.capture:!!g,p=Rg(p),u&&u[Gc]?(u=u.i,h=String(h).toString(),h in u.g&&(O=u.g[h],p=Cg(O,p,g,S),-1<p&&(Ed(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete u.g[h],u.h--)))):u&&(u=Dg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Cg(h,p,g,S)),(p=-1<u?h[u]:null)&&Sg(p))}function Sg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Gc])Eg(h.i,u);else{var p=u.type,g=u.proxy;h.removeEventListener?h.removeEventListener(p,g,u.capture):h.detachEvent?h.detachEvent(OT(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Dg(h))?(Eg(p,u),p.h==0&&(p.src=null,h[Tg]=null)):Ed(u)}}}function OT(u){return u in bg?bg[u]:bg[u]="on"+u}function nL(u,h){if(u.da)u=!0;else{h=new qc(h,this);var p=u.listener,g=u.ha||u.src;u.fa&&Sg(u),u=p.call(g,h)}return u}function Dg(u){return u=u[Tg],u instanceof Cd?u:null}var Ag="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rg(u){return typeof u=="function"?u:(u[Ag]||(u[Ag]=function(h){return u.handleEvent(h)}),u[Ag])}function Xt(){Ui.call(this),this.i=new Cd(this),this.M=this,this.F=null}w(Xt,Ui),Xt.prototype[Gc]=!0,Xt.prototype.removeEventListener=function(u,h,p,g){PT(this,u,h,p,g)};function hn(u,h){var p,g=u.F;if(g)for(p=[];g;g=g.F)p.push(g);if(u=u.M,g=h.type||h,typeof h=="string")h=new Jt(h,u);else if(h instanceof Jt)h.target=h.target||u;else{var S=h;h=new Jt(g,u),T(h,S)}if(S=!0,p)for(var O=p.length-1;0<=O;O--){var U=h.g=p[O];S=Td(U,g,!0,h)&&S}if(U=h.g=u,S=Td(U,g,!0,h)&&S,S=Td(U,g,!1,h)&&S,p)for(O=0;O<p.length;O++)U=h.g=p[O],S=Td(U,g,!1,h)&&S}Xt.prototype.N=function(){if(Xt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],g=0;g<p.length;g++)Ed(p[g]);delete u.g[h],u.h--}}this.F=null},Xt.prototype.K=function(u,h,p,g){return this.i.add(String(u),h,!1,p,g)},Xt.prototype.L=function(u,h,p,g){return this.i.add(String(u),h,!0,p,g)};function Td(u,h,p,g){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var S=!0,O=0;O<h.length;++O){var U=h[O];if(U&&!U.da&&U.capture==p){var Ze=U.listener,Kt=U.ha||U.src;U.fa&&Eg(u.i,U),S=Ze.call(Kt,g)!==!1&&S}}return S&&!g.defaultPrevented}function kT(u,h,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function FT(u){u.g=kT(()=>{u.g=null,u.i&&(u.i=!1,FT(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class rL extends Ui{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:FT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zc(u){Ui.call(this),this.h=u,this.g={}}w(zc,Ui);var LT=[];function VT(u){re(u.g,function(h,p){this.g.hasOwnProperty(p)&&Sg(h)},u),u.g={}}zc.prototype.N=function(){zc.aa.N.call(this),VT(this)},zc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xg=a.JSON.stringify,iL=a.JSON.parse,sL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Ng(){}Ng.prototype.h=null;function UT(u){return u.h||(u.h=u.i())}function jT(){}var Wc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mg(){Jt.call(this,"d")}w(Mg,Jt);function Pg(){Jt.call(this,"c")}w(Pg,Jt);var Cs={},BT=null;function bd(){return BT=BT||new Xt}Cs.La="serverreachability";function $T(u){Jt.call(this,Cs.La,u)}w($T,Jt);function Kc(u){let h=bd();hn(h,new $T(h))}Cs.STAT_EVENT="statevent";function HT(u,h){Jt.call(this,Cs.STAT_EVENT,u),this.stat=h}w(HT,Jt);function fn(u){let h=bd();hn(h,new HT(h,u))}Cs.Ma="timingevent";function qT(u,h){Jt.call(this,Cs.Ma,u),this.size=h}w(qT,Jt);function Qc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Yc(){this.g=!0}Yc.prototype.xa=function(){this.g=!1};function oL(u,h,p,g,S,O){u.info(function(){if(u.g)if(O)for(var U="",Ze=O.split("&"),Kt=0;Kt<Ze.length;Kt++){var Le=Ze[Kt].split("=");if(1<Le.length){var en=Le[0];Le=Le[1];var tn=en.split("_");U=2<=tn.length&&tn[1]=="type"?U+(en+"="+Le+"&"):U+(en+"=redacted&")}}else U=null;else U=O;return"XMLHTTP REQ ("+g+") [attempt "+S+"]: "+h+`
`+p+`
`+U})}function aL(u,h,p,g,S,O,U){u.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+S+"]: "+h+`
`+p+`
`+O+" "+U})}function jo(u,h,p,g){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+uL(u,p)+(g?" "+g:"")})}function cL(u,h){u.info(function(){return"TIMEOUT: "+h})}Yc.prototype.info=function(){};function uL(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var g=p[u];if(!(2>g.length)){var S=g[1];if(Array.isArray(S)&&!(1>S.length)){var O=S[0];if(O!="noop"&&O!="stop"&&O!="close")for(var U=1;U<S.length;U++)S[U]=""}}}}return xg(p)}catch{return h}}var Sd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},GT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Og;function Dd(){}w(Dd,Ng),Dd.prototype.g=function(){return new XMLHttpRequest},Dd.prototype.i=function(){return{}},Og=new Dd;function ji(u,h,p,g){this.j=u,this.i=h,this.l=p,this.R=g||1,this.U=new zc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new zT}function zT(){this.i=null,this.g="",this.h=!1}var WT={},kg={};function Fg(u,h,p){u.L=1,u.v=Nd(ti(h)),u.m=p,u.P=!0,KT(u,null)}function KT(u,h){u.F=Date.now(),Ad(u),u.A=ti(u.v);var p=u.A,g=u.R;Array.isArray(g)||(g=[String(g)]),cb(p.i,"t",g),u.C=0,p=u.j.J,u.h=new zT,u.g=Sb(u.j,p?h:null,!u.m),0<u.O&&(u.M=new rL(m(u.Y,u,u.g),u.O)),h=u.U,p=u.g,g=u.ca;var S="readystatechange";Array.isArray(S)||(S&&(LT[0]=S.toString()),S=LT);for(var O=0;O<S.length;O++){var U=xT(p,S[O],g||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=u.H?y(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Kc(),oL(u.i,u.u,u.A,u.l,u.R,u.m)}ji.prototype.ca=function(u){u=u.target;let h=this.M;h&&ni(u)==3?h.j():this.Y(u)},ji.prototype.Y=function(u){try{if(u==this.g)e:{let tn=ni(this.g);var h=this.g.Ba();let Ho=this.g.Z();if(!(3>tn)&&(tn!=3||this.g&&(this.h.h||this.g.oa()||mb(this.g)))){this.J||tn!=4||h==7||(h==8||0>=Ho?Kc(3):Kc(2)),Lg(this);var p=this.g.Z();this.X=p;t:if(QT(this)){var g=mb(this.g);u="";var S=g.length,O=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ts(this),Zc(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<S;h++)this.h.h=!0,u+=this.h.i.decode(g[h],{stream:!(O&&h==S-1)});g.length=0,this.h.g+=u,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,aL(this.i,this.u,this.A,this.l,this.R,tn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Kt=this.g;if((Ze=Kt.g?Kt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Ze)){var Le=Ze;break t}}Le=null}if(p=Le)jo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Vg(this,p);else{this.o=!1,this.s=3,fn(12),Ts(this),Zc(this);break e}}if(this.P){p=!0;let hr;for(;!this.J&&this.C<U.length;)if(hr=lL(this,U),hr==kg){tn==4&&(this.s=4,fn(14),p=!1),jo(this.i,this.l,null,"[Incomplete Response]");break}else if(hr==WT){this.s=4,fn(15),jo(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else jo(this.i,this.l,hr,null),Vg(this,hr);if(QT(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tn!=4||U.length!=0||this.h.h||(this.s=1,fn(16),p=!1),this.o=this.o&&p,!p)jo(this.i,this.l,U,"[Invalid Chunked Response]"),Ts(this),Zc(this);else if(0<U.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),qg(en),en.M=!0,fn(11))}}else jo(this.i,this.l,U,null),Vg(this,U);tn==4&&Ts(this),this.o&&!this.J&&(tn==4?Eb(this.j,this):(this.o=!1,Ad(this)))}else DL(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),Ts(this),Zc(this)}}}catch{}finally{}};function QT(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function lL(u,h){var p=u.C,g=h.indexOf(`
`,p);return g==-1?kg:(p=Number(h.substring(p,g)),isNaN(p)?WT:(g+=1,g+p>h.length?kg:(h=h.slice(g,g+p),u.C=g+p,h)))}ji.prototype.cancel=function(){this.J=!0,Ts(this)};function Ad(u){u.S=Date.now()+u.I,YT(u,u.I)}function YT(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Qc(m(u.ba,u),h)}function Lg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}ji.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(cL(this.i,this.A),this.L!=2&&(Kc(),fn(17)),Ts(this),this.s=2,Zc(this)):YT(this,this.S-u)};function Zc(u){u.j.G==0||u.J||Eb(u.j,u)}function Ts(u){Lg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,VT(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Vg(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Ug(p.h,u))){if(!u.K&&Ug(p.h,u)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var S=g;if(S[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Fd(p),Od(p);else break e;Hg(p),fn(18)}}else p.za=S[1],0<p.za-p.T&&37500>S[2]&&p.F&&p.v==0&&!p.C&&(p.C=Qc(m(p.Za,p),6e3));if(1>=XT(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ss(p,11)}else if((u.K||p.g==u)&&Fd(p),!q(h))for(S=p.Da.g.parse(h),h=0;h<S.length;h++){let Le=S[h];if(p.T=Le[0],Le=Le[1],p.G==2)if(Le[0]=="c"){p.K=Le[1],p.ia=Le[2];let en=Le[3];en!=null&&(p.la=en,p.j.info("VER="+p.la));let tn=Le[4];tn!=null&&(p.Aa=tn,p.j.info("SVER="+p.Aa));let Ho=Le[5];Ho!=null&&typeof Ho=="number"&&0<Ho&&(g=1.5*Ho,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let hr=u.g;if(hr){let Vd=hr.g?hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vd){var O=g.h;O.g||Vd.indexOf("spdy")==-1&&Vd.indexOf("quic")==-1&&Vd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(jg(O,O.h),O.h=null))}if(g.D){let Gg=hr.g?hr.g.getResponseHeader("X-HTTP-Session-Id"):null;Gg&&(g.ya=Gg,it(g.I,g.D,Gg))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=u;if(g.qa=bb(g,g.J?g.ia:null,g.W),U.K){eb(g.h,U);var Ze=U,Kt=g.L;Kt&&(Ze.I=Kt),Ze.B&&(Lg(Ze),Ad(Ze)),g.g=U}else wb(g);0<p.i.length&&kd(p)}else Le[0]!="stop"&&Le[0]!="close"||Ss(p,7);else p.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Ss(p,7):$g(p):Le[0]!="noop"&&p.l&&p.l.ta(Le),p.v=0)}}Kc(4)}catch{}}var dL=class{constructor(u,h){this.g=u,this.map=h}};function ZT(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function JT(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function XT(u){return u.h?1:u.g?u.g.size:0}function Ug(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function jg(u,h){u.g?u.g.add(h):u.h=h}function eb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}ZT.prototype.cancel=function(){if(this.i=tb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function tb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return N(u.i)}function hL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,g=0;g<p;g++)h.push(u[g]);return h}h=[],p=0;for(g in u)h[p++]=u[g];return h}function fL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let g in u)h[p++]=g;return h}}}function nb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=fL(u),g=hL(u),S=g.length,O=0;O<S;O++)h.call(void 0,g[O],p&&p[O],u)}var rb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function pL(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var g=u[p].indexOf("="),S=null;if(0<=g){var O=u[p].substring(0,g);S=u[p].substring(g+1)}else O=u[p];h(O,S?decodeURIComponent(S.replace(/\+/g," ")):"")}}}function bs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof bs){this.h=u.h,Rd(this,u.j),this.o=u.o,this.g=u.g,xd(this,u.s),this.l=u.l;var h=u.i,p=new eu;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),ib(this,p),this.m=u.m}else u&&(h=String(u).match(rb))?(this.h=!1,Rd(this,h[1]||"",!0),this.o=Jc(h[2]||""),this.g=Jc(h[3]||"",!0),xd(this,h[4]),this.l=Jc(h[5]||"",!0),ib(this,h[6]||"",!0),this.m=Jc(h[7]||"")):(this.h=!1,this.i=new eu(null,this.h))}bs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Xc(h,sb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Xc(h,sb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Xc(p,p.charAt(0)=="/"?vL:gL,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Xc(p,yL)),u.join("")};function ti(u){return new bs(u)}function Rd(u,h,p){u.j=p?Jc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function xd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function ib(u,h,p){h instanceof eu?(u.i=h,wL(u.i,u.h)):(p||(h=Xc(h,_L)),u.i=new eu(h,u.h))}function it(u,h,p){u.i.set(h,p)}function Nd(u){return it(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Jc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Xc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,mL),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function mL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var sb=/[#\/\?@]/g,gL=/[#\?:]/g,vL=/[#\?]/g,_L=/[#\?@]/g,yL=/#/g;function eu(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Bi(u){u.g||(u.g=new Map,u.h=0,u.i&&pL(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=eu.prototype,n.add=function(u,h){Bi(this),this.i=null,u=Bo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function ob(u,h){Bi(u),h=Bo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function ab(u,h){return Bi(u),h=Bo(u,h),u.g.has(h)}n.forEach=function(u,h){Bi(this),this.g.forEach(function(p,g){p.forEach(function(S){u.call(h,S,g,this)},this)},this)},n.na=function(){Bi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let S=u[g];for(let O=0;O<S.length;O++)p.push(h[g])}return p},n.V=function(u){Bi(this);let h=[];if(typeof u=="string")ab(this,u)&&(h=h.concat(this.g.get(Bo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return Bi(this),this.i=null,u=Bo(this,u),ab(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function cb(u,h,p){ob(u,h),0<p.length&&(u.i=null,u.g.set(Bo(u,h),N(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let O=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var S=O;U[g]!==""&&(S+="="+encodeURIComponent(String(U[g]))),u.push(S)}}return this.i=u.join("&")};function Bo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function wL(u,h){h&&!u.j&&(Bi(u),u.i=null,u.g.forEach(function(p,g){var S=g.toLowerCase();g!=S&&(ob(this,g),cb(this,S,p))},u)),u.j=h}function IL(u,h){let p=new Yc;if(a.Image){let g=new Image;g.onload=v($i,p,"TestLoadImage: loaded",!0,h,g),g.onerror=v($i,p,"TestLoadImage: error",!1,h,g),g.onabort=v($i,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=v($i,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=u}else h(!1)}function EL(u,h){let p=new Yc,g=new AbortController,S=setTimeout(()=>{g.abort(),$i(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:g.signal}).then(O=>{clearTimeout(S),O.ok?$i(p,"TestPingServer: ok",!0,h):$i(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(S),$i(p,"TestPingServer: error",!1,h)})}function $i(u,h,p,g,S){try{S&&(S.onload=null,S.onerror=null,S.onabort=null,S.ontimeout=null),g(p)}catch{}}function CL(){this.g=new sL}function TL(u,h,p){let g=p||"";try{nb(u,function(S,O){let U=S;l(S)&&(U=xg(S)),h.push(g+O+"="+encodeURIComponent(U))})}catch(S){throw h.push(g+"type="+encodeURIComponent("_badmap")),S}}function tu(u){this.l=u.Ub||null,this.j=u.eb||!1}w(tu,Ng),tu.prototype.g=function(){return new Md(this.l,this.j)},tu.prototype.i=function(u){return function(){return u}}({});function Md(u,h){Xt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Md,Xt),n=Md.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,ru(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,nu(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ru(this)),this.g&&(this.readyState=3,ru(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ub(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ub(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?nu(this):ru(this),this.readyState==3&&ub(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,nu(this))},n.Qa=function(u){this.g&&(this.response=u,nu(this))},n.ga=function(){this.g&&nu(this)};function nu(u){u.readyState=4,u.l=null,u.j=null,u.v=null,ru(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function ru(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function lb(u){let h="";return re(u,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Bg(u,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=lb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):it(u,h,p))}function _t(u){Xt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(_t,Xt);var bL=/^https?$/i,SL=["POST","PUT"];n=_t.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Og.g(),this.v=this.o?UT(this.o):UT(Og),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(O){db(this,O);return}if(u=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var S in g)p.set(S,g[S]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),S=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(SL,h,void 0))||g||S||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,U]of p)this.g.setRequestHeader(O,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{pb(this),this.u=!0,this.g.send(u),this.u=!1}catch(O){db(this,O)}};function db(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,hb(u),Pd(u)}function hb(u){u.A||(u.A=!0,hn(u,"complete"),hn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,hn(this,"complete"),hn(this,"abort"),Pd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pd(this,!0)),_t.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?fb(this):this.bb())},n.bb=function(){fb(this)};function fb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||ni(u)!=4||u.Z()!=2)){if(u.u&&ni(u)==4)kT(u.Ea,0,u);else if(hn(u,"readystatechange"),ni(u)==4){u.h=!1;try{let U=u.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=U===0){var S=String(u.D).match(rb)[1]||null;!S&&a.self&&a.self.location&&(S=a.self.location.protocol.slice(0,-1)),g=!bL.test(S?S.toLowerCase():"")}p=g}if(p)hn(u,"complete"),hn(u,"success");else{u.m=6;try{var O=2<ni(u)?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.Z()+"]",hb(u)}}finally{Pd(u)}}}}function Pd(u,h){if(u.g){pb(u);let p=u.g,g=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||hn(u,"ready");try{p.onreadystatechange=g}catch{}}}function pb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function ni(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),iL(h)}};function mb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function DL(u){let h={};u=(u.g&&2<=ni(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<u.length;g++){if(q(u[g]))continue;var p=b(u[g]);let S=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[S]||[];h[S]=O,O.push(p)}C(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function iu(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function gb(u){this.Aa=0,this.i=[],this.j=new Yc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=iu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=iu("baseRetryDelayMs",5e3,u),this.cb=iu("retryDelaySeedMs",1e4,u),this.Wa=iu("forwardChannelMaxRetries",2,u),this.wa=iu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new ZT(u&&u.concurrentRequestLimit),this.Da=new CL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=gb.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,g){fn(0),this.W=u,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=bb(this,null,this.W),kd(this)};function $g(u){if(vb(u),u.G==3){var h=u.U++,p=ti(u.I);if(it(p,"SID",u.K),it(p,"RID",h),it(p,"TYPE","terminate"),su(u,p),h=new ji(u,u.j,h),h.L=2,h.v=Nd(ti(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Sb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ad(h)}Tb(u)}function Od(u){u.g&&(qg(u),u.g.cancel(),u.g=null)}function vb(u){Od(u),u.u&&(a.clearTimeout(u.u),u.u=null),Fd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function kd(u){if(!JT(u.h)&&!u.s){u.s=!0;var h=u.Ga;$c||RT(),Hc||($c(),Hc=!0),Ig.add(h,u),u.B=0}}function AL(u,h){return XT(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Qc(m(u.Ga,u,h),Cb(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let S=new ji(this,this.j,u),O=this.o;if(this.S&&(O?(O=y(O),T(O,this.S)):O=this.S),this.m!==null||this.O||(S.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=yb(this,S,h),p=ti(this.I),it(p,"RID",u),it(p,"CVER",22),this.D&&it(p,"X-HTTP-Session-Id",this.D),su(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(lb(O)))+"&"+h:this.m&&Bg(p,this.m,O)),jg(this.h,S),this.Ua&&it(p,"TYPE","init"),this.P?(it(p,"$req",h),it(p,"SID","null"),S.T=!0,Fg(S,p,null)):Fg(S,p,h),this.G=2}}else this.G==3&&(u?_b(this,u):this.i.length==0||JT(this.h)||_b(this))};function _b(u,h){var p;h?p=h.l:p=u.U++;let g=ti(u.I);it(g,"SID",u.K),it(g,"RID",p),it(g,"AID",u.T),su(u,g),u.m&&u.o&&Bg(g,u.m,u.o),p=new ji(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=yb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),jg(u.h,p),Fg(p,g,h)}function su(u,h){u.H&&re(u.H,function(p,g){it(h,g,p)}),u.l&&nb({},function(p,g){it(h,g,p)})}function yb(u,h,p){p=Math.min(u.i.length,p);var g=u.l?m(u.l.Na,u.l,u):null;e:{var S=u.i;let O=-1;for(;;){let U=["count="+p];O==-1?0<p?(O=S[0].g,U.push("ofs="+O)):O=0:U.push("ofs="+O);let Ze=!0;for(let Kt=0;Kt<p;Kt++){let Le=S[Kt].g,en=S[Kt].map;if(Le-=O,0>Le)O=Math.max(0,S[Kt].g-100),Ze=!1;else try{TL(en,U,"req"+Le+"_")}catch{g&&g(en)}}if(Ze){g=U.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,g}function wb(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;$c||RT(),Hc||($c(),Hc=!0),Ig.add(h,u),u.v=0}}function Hg(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Qc(m(u.Fa,u),Cb(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,Ib(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Qc(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),Od(this),Ib(this))};function qg(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Ib(u){u.g=new ji(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=ti(u.qa);it(h,"RID","rpc"),it(h,"SID",u.K),it(h,"AID",u.T),it(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&it(h,"TO",u.ja),it(h,"TYPE","xmlhttp"),su(u,h),u.m&&u.o&&Bg(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Nd(ti(h)),p.m=null,p.P=!0,KT(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Od(this),Hg(this),fn(19))};function Fd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Eb(u,h){var p=null;if(u.g==h){Fd(u),qg(u),u.g=null;var g=2}else if(Ug(u.h,h))p=h.D,eb(u.h,h),g=1;else return;if(u.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var S=u.B;g=bd(),hn(g,new qT(g,p)),kd(u)}else wb(u);else if(S=h.s,S==3||S==0&&0<h.X||!(g==1&&AL(u,h)||g==2&&Hg(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),S){case 1:Ss(u,5);break;case 4:Ss(u,10);break;case 3:Ss(u,6);break;default:Ss(u,2)}}}function Cb(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Ss(u,h){if(u.j.info("Error code "+h),h==2){var p=m(u.fb,u),g=u.Xa;let S=!g;g=new bs(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rd(g,"https"),Nd(g),S?IL(g.toString(),p):EL(g.toString(),p)}else fn(2);u.G=0,u.l&&u.l.sa(h),Tb(u),vb(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function Tb(u){if(u.G=0,u.ka=[],u.l){let h=tb(u.h);(h.length!=0||u.i.length!=0)&&(R(u.ka,h),R(u.ka,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.ra()}}function bb(u,h,p){var g=p instanceof bs?ti(p):new bs(p);if(g.g!="")h&&(g.g=h+"."+g.g),xd(g,g.s);else{var S=a.location;g=S.protocol,h=h?h+"."+S.hostname:S.hostname,S=+S.port;var O=new bs(null);g&&Rd(O,g),h&&(O.g=h),S&&xd(O,S),p&&(O.l=p),g=O}return p=u.D,h=u.ya,p&&h&&it(g,p,h),it(g,"VER",u.la),su(u,g),g}function Sb(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new _t(new tu({eb:p})):new _t(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Db(){}n=Db.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ld(){}Ld.prototype.g=function(u,h){return new Ln(u,h)};function Ln(u,h){Xt.call(this),this.g=new gb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!q(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new $o(this)}w(Ln,Xt),Ln.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ln.prototype.close=function(){$g(this.g)},Ln.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=xg(u),u=p);h.i.push(new dL(h.Ya++,u)),h.G==3&&kd(h)},Ln.prototype.N=function(){this.g.l=null,delete this.j,$g(this.g),delete this.g,Ln.aa.N.call(this)};function Ab(u){Mg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(Ab,Mg);function Rb(){Pg.call(this),this.status=1}w(Rb,Pg);function $o(u){this.g=u}w($o,Db),$o.prototype.ua=function(){hn(this.g,"a")},$o.prototype.ta=function(u){hn(this.g,new Ab(u))},$o.prototype.sa=function(u){hn(this.g,new Rb)},$o.prototype.ra=function(){hn(this.g,"b")},Ld.prototype.createWebChannel=Ld.prototype.g,Ln.prototype.send=Ln.prototype.o,Ln.prototype.open=Ln.prototype.m,Ln.prototype.close=Ln.prototype.close,uI=Ai.createWebChannelTransport=function(){return new Ld},cI=Ai.getStatEventTarget=function(){return bd()},aI=Ai.Event=Cs,Rp=Ai.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sd.NO_ERROR=0,Sd.TIMEOUT=8,Sd.HTTP_ERROR=6,_l=Ai.ErrorCode=Sd,GT.COMPLETE="complete",oI=Ai.EventType=GT,jT.EventType=Wc,Wc.OPEN="a",Wc.CLOSE="b",Wc.ERROR="c",Wc.MESSAGE="d",Xt.prototype.listen=Xt.prototype.K,Ba=Ai.WebChannel=jT,N4=Ai.FetchXmlHttpFactory=tu,_t.prototype.listenOnce=_t.prototype.L,_t.prototype.getLastError=_t.prototype.Ka,_t.prototype.getLastErrorCode=_t.prototype.Ba,_t.prototype.getStatus=_t.prototype.Z,_t.prototype.getResponseJson=_t.prototype.Oa,_t.prototype.getResponseText=_t.prototype.oa,_t.prototype.send=_t.prototype.ea,_t.prototype.setWithCredentials=_t.prototype.Ha,sI=Ai.XhrIo=_t}).apply(typeof Ap<"u"?Ap:typeof self<"u"?self:typeof window<"u"?window:{});var nM="@firebase/firestore";var zt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");var oc="10.14.0";var go=new Nr("@firebase/firestore");function yl(){return go.logLevel}function z(n,...e){if(go.logLevel<=rn.DEBUG){let t=e.map(GE);go.debug(`Firestore (${oc}): ${n}`,...t)}}function Ri(n,...e){if(go.logLevel<=rn.ERROR){let t=e.map(GE);go.error(`Firestore (${oc}): ${n}`,...t)}}function Ka(n,...e){if(go.logLevel<=rn.WARN){let t=e.map(GE);go.warn(`Firestore (${oc}): ${n}`,...t)}}function GE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function oe(n="Unexpected state"){let e=`FIRESTORE (${oc}) INTERNAL ASSERTION FAILED: `+n;throw Ri(e),new Error(e)}function ze(n,e){n||oe()}function he(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends In{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Op=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},pI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zt.UNAUTHENTICATED))}shutdown(){}},mI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},gI=class{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ze(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Wr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ze(typeof r.accessToken=="string"),new Op(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ze(e===null||typeof e=="string"),new zt(e)}},vI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_I=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new vI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},wI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ze(this.o===void 0);let r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ze(typeof t.token=="string"),this.R=t.token,new yI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function M4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var kp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=M4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Ue(n,e){return n<e?-1:n>e?1:0}function Qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Rt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ge=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Rt(0,0))}static max(){return new n(new Rt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&oe(),r===void 0?r=e.length-t:r>e.length-t&&oe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},mt=class n extends Fp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},P4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qn=class n extends Fp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return P4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ee=class n{constructor(e){this.path=e}static fromPath(e){return new n(mt.fromString(e))}static fromName(e){return new n(mt.fromString(e).popFirst(5))}static empty(){return new n(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new mt(e.slice()))}};var II=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};II.UNKNOWN_ID=-1;function O4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new vo(i,ee.empty(),e)}function k4(n){return new vo(n.readTime,n.key,-1)}var vo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ge.min(),ee.empty(),-1)}static max(){return new n(ge.max(),ee.empty(),-1)}};function F4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}var L4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",EI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Vl(n){return _(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==L4)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function V4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(n){return n.name==="IndexedDbTransactionError"}var LM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function fm(n){return n==null}function bl(n){return n===0&&1/n==-1/0}function U4(n){return typeof n=="number"&&Number.isInteger(n)&&!bl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var j4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ioe=[...j4,"documentOverlays"],B4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$4=B4,H4=[...$4,"indexConfiguration","indexState","indexEntries"];var Eoe=[...H4,"globals"];function rM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ac(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function VM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ct=class n{constructor(e,t){this.comparator=e,this.root=t||Kr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ga(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ga(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ga(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ga(this.root,e,this.comparator,!0)}},Ga=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();let e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}};Kr.EMPTY=null,Kr.RED=!0,Kr.BLACK=!1;Kr.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Kr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var on=class n{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Lp(this.data.getIterator())}getIteratorFrom(e){return new Lp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Lp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var zr=class n{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new n([])}unionWith(e){let t=new on(qn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Vp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var an=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Vp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};an.EMPTY_BYTE_STRING=new an("");var q4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(n){if(ze(!!n),typeof n=="string"){let e=0,t=q4.exec(n);if(ze(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(n.seconds),nanos:lt(n.nanos)}}function lt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function _s(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}function zE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function WE(n){let e=n.mapValue.fields.__previous_value__;return zE(e)?WE(e):e}function Sl(n){let e=xi(n.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}var CI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Up=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var xp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zE(n)?4:jM(n)?9007199254740991:UM(n)?10:11:oe()}function Zr(n,e){if(n===e)return!0;let t=_o(n);if(t!==_o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sl(n).isEqual(Sl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=xi(i.timestampValue),a=xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return _s(i.bytesValue).isEqual(_s(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=lt(i.doubleValue),a=lt(s.doubleValue);return o===a?bl(o)===bl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Qa(n.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(rM(o)!==rM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Zr(o[c],a[c])))return!1;return!0}(n,e);default:return oe()}}function Dl(n,e){return(n.values||[]).find(t=>Zr(t,e))!==void 0}function Ya(n,e){if(n===e)return 0;let t=_o(n),r=_o(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=lt(s.integerValue||s.doubleValue),c=lt(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return iM(n.timestampValue,e.timestampValue);case 4:return iM(Sl(n),Sl(e));case 5:return Ue(n.stringValue,e.stringValue);case 6:return function(s,o){let a=_s(s),c=_s(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ue(a[l],c[l]);if(d!==0)return d}return Ue(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ue(lt(s.latitude),lt(o.latitude));return a!==0?a:Ue(lt(s.longitude),lt(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},m=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,N=Ue(((l=v?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:sM(v,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===xp.mapValue&&o===xp.mapValue)return 0;if(s===xp.mapValue)return 1;if(o===xp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Ue(c[f],d[f]);if(m!==0)return m;let v=Ya(a[c[f]],l[d[f]]);if(v!==0)return v}return Ue(c.length,d.length)}(n.mapValue,e.mapValue);default:throw oe()}}function iM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);let t=xi(n),r=xi(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function sM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ya(t[i],r[i]);if(s)return s}return Ue(t.length,r.length)}function Za(n){return TI(n)}function TI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return _s(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ee.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=TI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${TI(t.fields[o])}`;return i+"}"}(n.mapValue):oe()}function oM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function bI(n){return!!n&&"integerValue"in n}function KE(n){return!!n&&"arrayValue"in n}function aM(n){return!!n&&"nullValue"in n}function cM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mp(n){return!!n&&"mapValue"in n}function UM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Il(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ac(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Il(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return Object.assign({},n)}function jM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Er=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Mp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=qn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=Il(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Mp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Mp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ac(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(Il(this.value))}};function BM(n){let e=[];return ac(n.fields,(t,r)=>{let i=new qn([t]);if(Mp(r)){let s=BM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new zr(e)}var Cr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ge.min(),ge.min(),ge.min(),Er.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ge.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ge.min(),ge.min(),Er.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ge.min(),ge.min(),Er.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Er.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Er.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ja=class{constructor(e,t){this.position=e,this.inclusive=t}};function uM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),t.key):r=Ya(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function lM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Zr(n.position[t],e.position[t]))return!1;return!0}var Xa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function G4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var jp=class{},Lt=class n extends jp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new DI(e,t,r):t==="array-contains"?new xI(e,r):t==="in"?new NI(e,r):t==="not-in"?new MI(e,r):t==="array-contains-any"?new PI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new AI(e,r):new RI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ya(t,this.value)):t!==null&&_o(this.value)===_o(t)&&this.matchesComparison(Ya(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Tr=class n extends jp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return $M(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function $M(n){return n.op==="and"}function HM(n){return z4(n)&&$M(n)}function z4(n){for(let e of n.filters)if(e instanceof Tr)return!1;return!0}function SI(n){if(n instanceof Lt)return n.field.canonicalString()+n.op.toString()+Za(n.value);if(HM(n))return n.filters.map(e=>SI(e)).join(",");{let e=n.filters.map(t=>SI(t)).join(",");return`${n.op}(${e})`}}function qM(n,e){return n instanceof Lt?function(r,i){return i instanceof Lt&&r.op===i.op&&r.field.isEqual(i.field)&&Zr(r.value,i.value)}(n,e):n instanceof Tr?function(r,i){return i instanceof Tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&qM(o,i.filters[a]),!0):!1}(n,e):void oe()}function GM(n){return n instanceof Lt?function(t){return`${t.field.canonicalString()} ${t.op} ${Za(t.value)}`}(n):n instanceof Tr?function(t){return t.op.toString()+" {"+t.getFilters().map(GM).join(" ,")+"}"}(n):"Filter"}var DI=class extends Lt{constructor(e,t,r){super(e,t,r),this.key=ee.fromName(r.referenceValue)}matches(e){let t=ee.comparator(e.key,this.key);return this.matchesComparison(t)}},AI=class extends Lt{constructor(e,t){super(e,"in",t),this.keys=zM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},RI=class extends Lt{constructor(e,t){super(e,"not-in",t),this.keys=zM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function zM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ee.fromName(r.referenceValue))}var xI=class extends Lt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return KE(t)&&Dl(t.arrayValue,this.value)}},NI=class extends Lt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Dl(this.value.arrayValue,t)}},MI=class extends Lt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Dl(this.value.arrayValue,t)}},PI=class extends Lt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!KE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Dl(this.value.arrayValue,r))}};var OI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function dM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new OI(n,e,t,r,i,s,o)}function QE(n){let e=he(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>SI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),fm(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Za(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Za(r)).join(",")),e.ue=t}return e.ue}function YE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!G4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!qM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!lM(n.startAt,e.startAt)&&lM(n.endAt,e.endAt)}function kI(n){return ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var yo=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function W4(n,e,t,r,i,s,o,a){return new yo(n,e,t,r,i,s,o,a)}function ZE(n){return new yo(n)}function hM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function WM(n){return n.collectionGroup!==null}function El(n){let e=he(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new on(qn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Xa(s,r))}),t.has(qn.keyField().canonicalString())||e.ce.push(new Xa(qn.keyField(),r))}return e.ce}function Qr(n){let e=he(n);return e.le||(e.le=K4(e,El(n))),e.le}function K4(n,e){if(n.limitType==="F")return dM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Xa(i.field,s)});let t=n.endAt?new Ja(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ja(n.startAt.position,n.startAt.inclusive):null;return dM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function FI(n,e){let t=n.filters.concat([e]);return new yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function LI(n,e,t){return new yo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function pm(n,e){return YE(Qr(n),Qr(e))&&n.limitType===e.limitType}function KM(n){return`${QE(Qr(n))}|lt:${n.limitType}`}function $a(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>GM(i)).join(", ")}]`),fm(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Za(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Za(i)).join(",")),`Target(${r})`}(Qr(n))}; limitType=${n.limitType})`}function mm(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of El(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=uM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,El(r),i)||r.endAt&&!function(o,a,c){let l=uM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,El(r),i))}(n,e)}function Q4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function QM(n){return(e,t)=>{let r=!1;for(let i of El(n)){let s=Y4(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function Y4(n,e,t){let r=n.field.isKeyField()?ee.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ya(c,l):oe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}var ys=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ac(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return VM(this.inner)}size(){return this.innerSize}};var Z4=new Ct(ee.comparator);function Ni(){return Z4}var YM=new Ct(ee.comparator);function wl(...n){let e=YM;for(let t of n)e=e.insert(t.key,t);return e}function ZM(n){let e=YM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ho(){return Cl()}function JM(){return Cl()}function Cl(){return new ys(n=>n.toString(),(n,e)=>n.isEqual(e))}var J4=new Ct(ee.comparator),X4=new on(ee.comparator);function Re(...n){let e=X4;for(let t of n)e=e.add(t);return e}var e3=new on(Ue);function t3(){return e3}function JE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bl(e)?"-0":e}}function XM(n){return{integerValue:""+n}}function n3(n,e){return U4(e)?XM(e):JE(n,e)}var ec=class{constructor(){this._=void 0}};function r3(n,e,t){return n instanceof tc?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zE(s)&&(s=WE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof wo?tP(n,e):n instanceof Io?nP(n,e):function(i,s){let o=eP(i,s),a=fM(o)+fM(i.Pe);return bI(o)&&bI(i.Pe)?XM(a):JE(i.serializer,a)}(n,e)}function i3(n,e,t){return n instanceof wo?tP(n,e):n instanceof Io?nP(n,e):t}function eP(n,e){return n instanceof nc?function(r){return bI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var tc=class extends ec{},wo=class extends ec{constructor(e){super(),this.elements=e}};function tP(n,e){let t=rP(e);for(let r of n.elements)t.some(i=>Zr(i,r))||t.push(r);return{arrayValue:{values:t}}}var Io=class extends ec{constructor(e){super(),this.elements=e}};function nP(n,e){let t=rP(e);for(let r of n.elements)t=t.filter(i=>!Zr(i,r));return{arrayValue:{values:t}}}var nc=class extends ec{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function fM(n){return lt(n.integerValue||n.doubleValue)}function rP(n){return KE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function s3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof wo&&i instanceof wo||r instanceof Io&&i instanceof Io?Qa(r.elements,i.elements,Zr):r instanceof nc&&i instanceof nc?Zr(r.Pe,i.Pe):r instanceof tc&&i instanceof tc}(n.transform,e.transform)}var VI=class{constructor(e,t){this.version=e,this.transformResults=t}},mo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var rc=class{};function iP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bp(n.key,mo.none()):new Eo(n.key,n.data,mo.none());{let t=n.data,r=Er.empty(),i=new on(qn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mi(n.key,r,new zr(i.toArray()),mo.none())}}function o3(n,e,t){n instanceof Eo?function(i,s,o){let a=i.value.clone(),c=mM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Mi?function(i,s,o){if(!Pp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=mM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(sP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Tl(n,e,t,r){return n instanceof Eo?function(s,o,a,c){if(!Pp(s.precondition,o))return a;let l=s.value.clone(),d=gM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Mi?function(s,o,a,c){if(!Pp(s.precondition,o))return a;let l=gM(s.fieldTransforms,c,o),d=o.data;return d.setAll(sP(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Pp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function a3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=eP(r.transform,i||null);s!=null&&(t===null&&(t=Er.empty()),t.set(r.field,s))}return t||null}function pM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Qa(r,i,(s,o)=>s3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Eo=class extends rc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Mi=class extends rc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function sP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function mM(n,e,t){let r=new Map;ze(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,i3(o,a,t[i]))}return r}function gM(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,r3(s,o,e))}return r}var Bp=class extends rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},UI=class extends rc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var jI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&o3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Tl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Tl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=JM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=iP(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Re())}isEqual(e){return this.batchId===e.batchId&&Qa(this.mutations,e.mutations,(t,r)=>pM(t,r))&&Qa(this.baseMutations,e.baseMutations,(t,r)=>pM(t,r))}},BI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ze(e.mutations.length===r.length);let i=function(){return J4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var $I=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var HI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var kt,Pe;function c3(n){switch(n){default:return oe();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function oP(n){if(n===void 0)return Ri("GRPC error has no .code"),F.UNKNOWN;switch(n){case kt.OK:return F.OK;case kt.CANCELLED:return F.CANCELLED;case kt.UNKNOWN:return F.UNKNOWN;case kt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case kt.INTERNAL:return F.INTERNAL;case kt.UNAVAILABLE:return F.UNAVAILABLE;case kt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case kt.NOT_FOUND:return F.NOT_FOUND;case kt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case kt.ABORTED:return F.ABORTED;case kt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case kt.DATA_LOSS:return F.DATA_LOSS;default:return oe()}}(Pe=kt||(kt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";var vM=null;function u3(){return new TextEncoder}var l3=new ms([4294967295,4294967295],0);function _M(n){let e=u3().encode(n),t=new iI;return t.update(e),new Uint8Array(t.digest())}function yM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ms([t,r],0),new ms([i,s],0)]}var qI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new fo(`Invalid padding: ${t}`);if(r<0)throw new fo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new fo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=ms.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(ms.fromNumber(r)));return i.compare(l3)===1&&(i=new ms([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=_M(e),[r,i]=yM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=_M(e),[r,i]=yM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},fo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var $p=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Al.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ge.min(),i,new Ct(Ue),Ni(),Re())}},Al=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Re(),Re(),Re())}};var za=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Hp=class{constructor(e,t){this.targetId=e,this.me=t}},qp=class{constructor(e,t,r=an.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Gp=class{constructor(){this.fe=0,this.ge=IM(),this.pe=an.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),t=Re(),r=Re();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:oe()}}),new Al(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=IM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},GI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ni(),this.qe=wM(),this.Qe=new Ct(Ue)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(kI(s))if(r===0){let o=new ee(s.path);this.Ue(t,o,Cr.newNoDocument(o,ge.min()))}else ze(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}vM?.et(function(d,f,m,v,w){var N,R,L,q,W,te;let Ye={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},re=f.unchangedNames;return re&&(Ye.bloomFilter={applied:w===0,hashCount:(N=re?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(q=(L=(R=re?.bits)===null||R===void 0?void 0:R.bitmap)===null||L===void 0?void 0:L.length)!==null&&q!==void 0?q:0,padding:(te=(W=re?.bits)===null||W===void 0?void 0:W.padding)!==null&&te!==void 0?te:0,mightContain:C=>{var y;return(y=v?.mightContain(C))!==null&&y!==void 0&&y}}),Ye}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=_s(r).toUint8Array()}catch(c){if(c instanceof Vp)return Ka("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new qI(o,i,s)}catch(c){return Ka(c instanceof fo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&kI(a.target)){let c=new ee(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Cr.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Re();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new $p(e,t,this.Qe,this.ke,r);return this.ke=Ni(),this.qe=wM(),this.Qe=new Ct(Ue),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Gp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new on(Ue),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Gp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function wM(){return new Ct(ee.comparator)}function IM(){return new Ct(ee.comparator)}var d3={asc:"ASCENDING",desc:"DESCENDING"},h3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},f3={and:"AND",or:"OR"},zI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function WI(n,e){return n.useProto3Json||fm(e)?e:{value:e}}function zp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function p3(n,e){return zp(n,e.toTimestamp())}function Yr(n){return ze(!!n),ge.fromTimestamp(function(t){let r=xi(t);return new Rt(r.seconds,r.nanos)}(n))}function XE(n,e){return KI(n,e).canonicalString()}function KI(n,e){let t=function(i){return new mt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function cP(n){let e=mt.fromString(n);return ze(fP(e)),e}function QI(n,e){return XE(n.databaseId,e.path)}function lI(n,e){let t=cP(e);if(t.get(1)!==n.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ee(lP(t))}function uP(n,e){return XE(n.databaseId,e)}function m3(n){let e=cP(n);return e.length===4?mt.emptyPath():lP(e)}function YI(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lP(n){return ze(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function EM(n,e,t){return{name:QI(n,e),fields:t.value.mapValue.fields}}function g3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(ze(d===void 0||typeof d=="string"),an.fromBase64String(d||"")):(ze(d===void 0||d instanceof Buffer||d instanceof Uint8Array),an.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?F.UNKNOWN:oP(l.code);return new G(d,l.message||"")}(o);t=new qp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=lI(n,r.document.name),s=Yr(r.document.updateTime),o=r.document.createTime?Yr(r.document.createTime):ge.min(),a=new Er({mapValue:{fields:r.document.fields}}),c=Cr.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new za(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=lI(n,r.document),s=r.readTime?Yr(r.readTime):ge.min(),o=Cr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new za([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=lI(n,r.document),s=r.removedTargetIds||[];t=new za([],s,i,null)}else{if(!("filter"in e))return oe();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new HI(i,s),a=r.targetId;t=new Hp(a,o)}}return t}function v3(n,e){let t;if(e instanceof Eo)t={update:EM(n,e.key,e.value)};else if(e instanceof Bp)t={delete:QI(n,e.key)};else if(e instanceof Mi)t={update:EM(n,e.key,e.data),updateMask:S3(e.fieldMask)};else{if(!(e instanceof UI))return oe();t={verify:QI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof tc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Io)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof nc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw oe()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:p3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:oe()}(n,e.precondition)),t}function _3(n,e){return n&&n.length>0?(ze(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Yr(i.updateTime):Yr(s);return o.isEqual(ge.min())&&(o=Yr(s)),new VI(o,i.transformResults||[])}(t,e))):[]}function y3(n,e){return{documents:[uP(n,e.path)]}}function w3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=uP(n,i);let s=function(l){if(l.length!==0)return hP(Tr.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:Ha(m.field),direction:C3(m.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=WI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function I3(n){let e=m3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ze(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let m=dP(f);return m instanceof Tr&&HM(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(w){return new Xa(qa(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,fm(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){let m=!!f.before,v=f.values||[];return new Ja(v,m)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let m=!f.before,v=f.values||[];return new Ja(v,m)}(t.endAt)),W4(e,i,o,s,a,"F",c,l)}function E3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=qa(t.unaryFilter.field);return Lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=qa(t.unaryFilter.field);return Lt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=qa(t.unaryFilter.field);return Lt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=qa(t.unaryFilter.field);return Lt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(n):n.fieldFilter!==void 0?function(t){return Lt.create(qa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Tr.create(t.compositeFilter.filters.map(r=>dP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return oe()}}(t.compositeFilter.op))}(n):oe()}function C3(n){return d3[n]}function T3(n){return h3[n]}function b3(n){return f3[n]}function Ha(n){return{fieldPath:n.canonicalString()}}function qa(n){return qn.fromServerFormat(n.fieldPath)}function hP(n){return n instanceof Lt?function(t){if(t.op==="=="){if(cM(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NAN"}};if(aM(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cM(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NOT_NAN"}};if(aM(t.value))return{unaryFilter:{field:Ha(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ha(t.field),op:T3(t.op),value:t.value}}}(n):n instanceof Tr?function(t){let r=t.getFilters().map(i=>hP(i));return r.length===1?r[0]:{compositeFilter:{op:b3(t.op),filters:r}}}(n):oe()}function S3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Rl=class n{constructor(e,t,r,i,s=ge.min(),o=ge.min(),a=an.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ZI=class{constructor(e){this.ct=e}};function D3(n){let e=I3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?LI(e,e.limit,"L"):e}var Wp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(lt(e.integerValue));else if("doubleValue"in e){let r=lt(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),bl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=xi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(_s(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?jM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):UM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):oe()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(lt(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ee.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Wp.vt=new Wp;var JI=class{constructor(){this.un=new XI}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(vo.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(vo.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},XI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new on(mt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new on(mt.comparator)).toArray()}};var Toe=new Uint8Array(0);var Gr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Gr.DEFAULT_COLLECTION_PERCENTILE=10,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gr.DEFAULT=new Gr(41943040,Gr.DEFAULT_COLLECTION_PERCENTILE,Gr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gr.DISABLED=new Gr(-1,0,0);var xl=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var eE=class{constructor(){this.changes=new ys(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var tE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var nE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Tl(r.mutation,i,zr.empty(),Rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Re()){let i=ho();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=wl();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Re()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ni(),o=Cl(),a=function(){return Cl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Mi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Tl(d.mutation,l,d.mutation.getFieldMask(),Rt.now())):o.set(l.key,zr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new tE(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Cl(),i=new Ct((o,a)=>o-a),s=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||zr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||Re()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=JM();d.forEach(m=>{if(!s.has(m)){let v=iP(t.get(m),r.get(m));v!==null&&f.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):WM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):V.resolve(ho()),a=-1,c=s;return o.next(l=>V.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Re())).next(d=>({batchId:a,changes:ZM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ee(t)).next(r=>{let i=wl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=wl();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,c=>{let l=function(f,m){return new yo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,Cr.newInvalidDocument(d)))});let a=wl();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Tl(d.mutation,l,zr.empty(),Rt.now()),mm(t,l)&&(a=a.insert(c,l))}),a})}};var rE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Yr(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:D3(i.bundledQuery),readTime:Yr(i.readTime)}}(t)),V.resolve()}};var iE=class{constructor(){this.overlays=new Ct(ee.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ho();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=ho(),s=t.length+1,o=new ee(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ct((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=ho(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=ho(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new $I(t,r));let s=this.Ir.get(t);s===void 0&&(s=Re(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var sE=class{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var Nl=class{constructor(){this.Tr=new on(Ft.Er),this.dr=new on(Ft.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ft(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ft(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new ee(new mt([])),r=new Ft(t,e),i=new Ft(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new ee(new mt([])),r=new Ft(t,e),i=new Ft(t,e+1),s=Re();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ft(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ft=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ee.comparator(e.key,t.key)||Ue(e.wr,t.wr)}static Ar(e,t){return Ue(e.wr,t.wr)||ee.comparator(e.key,t.key)}};var oE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new on(Ft.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new jI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ft(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ft(t,0),i=new Ft(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new on(Ue);return t.forEach(i=>{let s=new Ft(i,0),o=new Ft(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;ee.isDocumentKey(s)||(s=s.child(""));let o=new Ft(new ee(s),0),a=new on(Ue);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),V.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ze(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let s=new Ft(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ft(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var aE=class{constructor(e){this.Mr=e,this.docs=function(){return new Ct(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Cr.newInvalidDocument(t))}getEntries(e,t){let r=Ni();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ni(),o=t.path,a=new ee(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||F4(k4(d),r)<=0||(i.has(d.key)||mm(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,r,i){oe()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cE(this)}getSize(e){return V.resolve(this.size)}},cE=class extends eE{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var uE=class{constructor(e){this.persistence=e,this.Nr=new ys(t=>QE(t),YE),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Nl,this.targetCount=0,this.kr=xl.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new xl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var lE=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new LM(0),this.Kr=!1,this.Kr=!0,this.$r=new sE,this.referenceDelegate=e(this),this.Ur=new uE(this),this.indexManager=new JI,this.remoteDocumentCache=function(i){return new aE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ZI(t),this.Gr=new rE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new oE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new dE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},dE=class extends EI{constructor(e){super(),this.currentSequenceNumber=e}},hE=class n{constructor(e){this.persistence=e,this.Jr=new Nl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=ee.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,ge.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var fE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Re(),i=Re();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var pE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var mE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Lb()?8:V4(nn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new pE;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(yl()<=rn.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",$a(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(yl()<=rn.DEBUG&&z("QueryEngine","Query:",$a(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(yl()<=rn.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",$a(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(t))):V.resolve())}Yi(e,t){if(hM(t))return V.resolve(null);let r=Qr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=LI(t,null,"F"),r=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Re(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,LI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return hM(t)||i.isEqual(ge.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?V.resolve(null):(yl()<=rn.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),$a(t)),this.rs(e,o,t,O4(i,-1)).next(a=>a))})}ts(e,t){let r=new on(QM(e));return t.forEach((i,s)=>{mm(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return yl()<=rn.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",$a(t)),this.Ji.getDocumentsMatchingQuery(e,t,vo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var gE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ct(Ue),this._s=new ys(s=>QE(s),YE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new nE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function A3(n,e,t,r){return new gE(n,e,t,r)}function pP(n,e){return _(this,null,function*(){let t=he(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Re();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function R3(n,e){let t=he(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,m=f.keys(),v=V.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(N=>{let R=l.docVersions.get(w);ze(R!==null),N.version.compareTo(R)<0&&(f.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),d.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Re();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mP(n){let e=he(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function x3(n,e){let t=he(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(an.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(N,R,L){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,v,d)&&a.push(t.Ur.updateTargetData(s,v))});let c=Ni(),l=Re();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(N3(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(ge.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function N3(n,e,t){let r=Re(),i=Re();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ni();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(ge.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function M3(n,e){let t=he(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function P3(n,e){let t=he(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Rl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function vE(n,e,t){return _(this,null,function*(){let r=he(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ul(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function CM(n,e,t){let r=he(n),i=ge.min(),s=Re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=he(c),m=f._s.get(d);return m!==void 0?V.resolve(f.os.get(m)):f.Ur.getTargetData(l,d)}(r,o,Qr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:ge.min(),t?s:Re())).next(a=>(O3(r,Q4(e),a),{documents:a,Ts:s})))}function O3(n,e,t){let r=n.us.get(e)||ge.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Kp=class{constructor(){this.activeTargetIds=t3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var _E=class{constructor(){this.so=new Kp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Kp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var yE=class{_o(e){}shutdown(){}};var Qp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Np=null;function dI(){return Np===null?Np=function(){return 268435456+Math.round(2147483648*Math.random())}():Np++,"0x"+Np.toString(16)}var k3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var wE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var sn="WebChannelConnection",IE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=dI(),c=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(z("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Ka("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=k3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=dI();return new Promise((o,a)=>{let c=new sI;c.setWithCredentials(!0),c.listenOnce(oI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case _l.NO_ERROR:let d=c.getResponseJson();z(sn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case _l.TIMEOUT:z(sn,`RPC '${e}' ${s} timed out`),a(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case _l.HTTP_ERROR:let f=c.getStatus();if(z(sn,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let w=function(R){let L=R.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(L)>=0?L:F.UNKNOWN}(v.status);a(new G(w,v.message))}else a(new G(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(F.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{z(sn,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);z(sn,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=dI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=uI(),a=cI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");z(sn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),m=!1,v=!1,w=new wE({Io:R=>{v?z(sn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(z(sn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),z(sn,`RPC '${e}' stream ${i} sending:`,R),f.send(R))},To:()=>f.close()}),N=(R,L,q)=>{R.listen(L,W=>{try{q(W)}catch(te){setTimeout(()=>{throw te},0)}})};return N(f,Ba.EventType.OPEN,()=>{v||(z(sn,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),N(f,Ba.EventType.CLOSE,()=>{v||(v=!0,z(sn,`RPC '${e}' stream ${i} transport closed`),w.So())}),N(f,Ba.EventType.ERROR,R=>{v||(v=!0,Ka(sn,`RPC '${e}' stream ${i} transport errored:`,R),w.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),N(f,Ba.EventType.MESSAGE,R=>{var L;if(!v){let q=R.data[0];ze(!!q);let W=q,te=W.error||((L=W[0])===null||L===void 0?void 0:L.error);if(te){z(sn,`RPC '${e}' stream ${i} received error:`,te);let Ye=te.status,re=function(I){let T=kt[I];if(T!==void 0)return oP(T)}(Ye),C=te.message;re===void 0&&(re=F.INTERNAL,C="Unknown error status: "+Ye+" with message "+te.message),v=!0,w.So(new G(re,C)),f.close()}else z(sn,`RPC '${e}' stream ${i} received:`,q),w.bo(q)}}),N(a,aI.STAT_EVENT,R=>{R.stat===Rp.PROXY?z(sn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Rp.NOPROXY&&z(sn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function hI(){return typeof document<"u"?document:null}function gm(n){return new zI(n,!0)}var Yp=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Zp=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Yp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Ri(t.toString()),Ri("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},EE=class extends Zp{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=g3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Yr(o.readTime):ge.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=YI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=kI(c)?{documents:y3(s,c)}:{query:w3(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aP(s,o.resumeToken);let l=WI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=zp(s,o.snapshotVersion.toTimestamp());let l=WI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=E3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=YI(this.serializer),t.removeTarget=e,this.a_(t)}},CE=class extends Zp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ze(!!e.streamToken),this.lastStreamToken=e.streamToken,ze(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=_3(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=YI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>v3(this.serializer,r))};this.a_(t)}};var TE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,KI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(F.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,KI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},bE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ri(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var SE=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){bo(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=he(c);l.L_.add(4),yield jl(l),l.q_.set("Unknown"),l.L_.delete(4),yield vm(l)})}(this))}))}),this.q_=new bE(r,i)}};function vm(n){return _(this,null,function*(){if(bo(n))for(let e of n.B_)yield e(!0)})}function jl(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function gP(n,e){let t=he(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),rC(t)?nC(t):cc(t).r_()&&tC(t,e))}function eC(n,e){let t=he(n),r=cc(t);t.N_.delete(e),r.r_()&&vP(t,e),t.N_.size===0&&(r.r_()?r.o_():bo(t)&&t.q_.set("Unknown"))}function tC(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cc(n).A_(e)}function vP(n,e){n.Q_.xe(e),cc(n).R_(e)}function nC(n){n.Q_=new GI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),cc(n).start(),n.q_.v_()}function rC(n){return bo(n)&&!cc(n).n_()&&n.N_.size>0}function bo(n){return he(n).L_.size===0}function _P(n){n.Q_=void 0}function F3(n){return _(this,null,function*(){n.q_.set("Online")})}function L3(n){return _(this,null,function*(){n.N_.forEach((e,t)=>{tC(n,e)})})}function V3(n,e){return _(this,null,function*(){_P(n),rC(n)?(n.q_.M_(e),nC(n)):n.q_.set("Unknown")})}function U3(n,e,t){return _(this,null,function*(){if(n.q_.set("Online"),e instanceof qp&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Jp(n,r)}else if(e instanceof za?n.Q_.Ke(e):e instanceof Hp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ge.min()))try{let r=yield mP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(an.EMPTY_BYTE_STRING,d.snapshotVersion)),vP(s,c);let f=new Rl(d.target,c,l,d.sequenceNumber);tC(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Jp(n,r)}})}function Jp(n,e,t){return _(this,null,function*(){if(!Ul(e))throw e;n.L_.add(1),yield jl(n),n.q_.set("Offline"),t||(t=()=>mP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield vm(n)}))})}function yP(n,e){return e().catch(t=>Jp(n,t,e))}function _m(n){return _(this,null,function*(){let e=he(n),t=ws(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;j3(e);)try{let i=yield M3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,B3(e,i)}catch(i){yield Jp(e,i)}wP(e)&&IP(e)})}function j3(n){return bo(n)&&n.O_.length<10}function B3(n,e){n.O_.push(e);let t=ws(n);t.r_()&&t.V_&&t.m_(e.mutations)}function wP(n){return bo(n)&&!ws(n).n_()&&n.O_.length>0}function IP(n){ws(n).start()}function $3(n){return _(this,null,function*(){ws(n).p_()})}function H3(n){return _(this,null,function*(){let e=ws(n);for(let t of n.O_)e.m_(t.mutations)})}function q3(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=BI.from(r,e,t);yield yP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield _m(n)})}function G3(n,e){return _(this,null,function*(){e&&ws(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return c3(o)&&o!==F.ABORTED}(i.code)){let s=r.O_.shift();ws(r).s_(),yield yP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield _m(r)}})}(n,e)),wP(n)&&IP(n)})}function TM(n,e){return _(this,null,function*(){let t=he(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=bo(t);t.L_.add(3),yield jl(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield vm(t)})}function z3(n,e){return _(this,null,function*(){let t=he(n);e?(t.L_.delete(2),yield vm(t)):e||(t.L_.add(2),yield jl(t),t.q_.set("Unknown"))})}function cc(n){return n.K_||(n.K_=function(t,r,i){let s=he(t);return s.w_(),new EE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:F3.bind(null,n),Ro:L3.bind(null,n),mo:V3.bind(null,n),d_:U3.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.K_.s_(),rC(n)?nC(n):n.q_.set("Unknown")):(yield n.K_.stop(),_P(n))}))),n.K_}function ws(n){return n.U_||(n.U_=function(t,r,i){let s=he(t);return s.w_(),new CE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$3.bind(null,n),mo:G3.bind(null,n),f_:H3.bind(null,n),g_:q3.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield _m(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var DE=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function iC(n,e){if(Ri("AsyncQueue",`${e}: ${n}`),Ul(n))return new G(F.UNAVAILABLE,`${e}: ${n}`);throw n}var Xp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ee.comparator(t.key,r.key):(t,r)=>ee.comparator(t.key,r.key),this.keyedMap=wl(),this.sortedSet=new Ct(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var em=class{constructor(){this.W_=new Ct(ee.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},ic=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Xp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&pm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var AE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},RE=class{constructor(){this.queries=bM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=he(t),s=i.queries;i.queries=bM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}};function bM(){return new ys(n=>KM(n),pm)}function EP(n,e){return _(this,null,function*(){let t=he(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new AE,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=iC(o,`Initialization of query '${$a(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&sC(t)})}function CP(n,e){return _(this,null,function*(){let t=he(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function W3(n,e){let t=he(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&sC(t)}function K3(n,e,t){let r=he(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function sC(n){n.Y_.forEach(e=>{e.next()})}var xE,SM;(SM=xE||(xE={})).ea="default",SM.Cache="cache";var tm=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xE.Cache}};var nm=class{constructor(e){this.key=e}},rm=class{constructor(e){this.key=e}},NE=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=QM(e),this.Ra=new Xp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new em,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),v=mm(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?w!==N&&(r.track({type:3,doc:v}),R=!0):this.ga(m,v)||(r.track({type:2,doc:v}),R=!0,(c&&this.Aa(v,c)>0||l&&this.Aa(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(c||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(v,w){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return N(v)-N(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new ic(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new em,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new rm(r))}),this.da.forEach(r=>{e.has(r)||t.push(new nm(r))}),t}ba(e){this.Ta=e.Ts,this.da=Re();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ic.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},ME=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},PE=class{constructor(e){this.key=e,this.va=!1}},OE=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ys(a=>KM(a),pm),this.Ma=new Map,this.xa=new Set,this.Oa=new Ct(ee.comparator),this.Na=new Map,this.La=new Nl,this.Ba={},this.ka=new Map,this.qa=xl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Q3(n,e,t=!0){return _(this,null,function*(){let r=RP(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield TP(r,e,t,!0),i})}function Y3(n,e){return _(this,null,function*(){let t=RP(n);yield TP(t,e,!0,!1)})}function TP(n,e,t,r){return _(this,null,function*(){let i=yield P3(n.localStore,Qr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield Z3(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&gP(n.remoteStore,i),a})}function Z3(n,e,t,r,i){return _(this,null,function*(){n.Ka=(f,m,v)=>function(N,R,L,q){return _(this,null,function*(){let W=R.view.ma(L);W.ns&&(W=yield CM(N.localStore,R.query,!1).then(({documents:C})=>R.view.ma(C,W)));let te=q&&q.targetChanges.get(R.targetId),Ye=q&&q.targetMismatches.get(R.targetId)!=null,re=R.view.applyChanges(W,N.isPrimaryClient,te,Ye);return AM(N,R.targetId,re.wa),re.snapshot})}(n,f,m,v);let s=yield CM(n.localStore,e,!0),o=new NE(e,s.Ts),a=o.ma(s.documents),c=Al.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);AM(n,t,l.wa);let d=new ME(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function J3(n,e,t){return _(this,null,function*(){let r=he(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!pm(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield vE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&eC(r.remoteStore,i.targetId),kE(r,i.targetId)}).catch(Vl))):(kE(r,i.targetId),yield vE(r.localStore,i.targetId,!0))})}function X3(n,e){return _(this,null,function*(){let t=he(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eC(t.remoteStore,r.targetId))})}function e6(n,e,t){return _(this,null,function*(){let r=a6(n);try{let i=yield function(o,a){let c=he(o),l=Rt.now(),d=a.reduce((v,w)=>v.add(w.key),Re()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=Ni(),N=Re();return c.cs.getEntries(v,d).next(R=>{w=R,w.forEach((L,q)=>{q.isValidDocument()||(N=N.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(R=>{f=R;let L=[];for(let q of a){let W=a3(q,f.get(q.key).overlayedDocument);W!=null&&L.push(new Mi(q.key,W,BM(W.value.mapValue),mo.exists(!0)))}return c.mutationQueue.addMutationBatch(v,l,L,a)}).next(R=>{m=R;let L=R.applyToLocalDocumentSet(f,N);return c.documentOverlayCache.saveOverlays(v,R.batchId,L)})}).then(()=>({batchId:m.batchId,changes:ZM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new Ct(Ue)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Bl(r,i.changes),yield _m(r.remoteStore)}catch(i){let s=iC(i,"Failed to persist write");t.reject(s)}})}function bP(n,e){return _(this,null,function*(){let t=he(n);try{let r=yield x3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?ze(o.va):i.removedDocuments.size>0&&(ze(o.va),o.va=!1))}),yield Bl(t,r,e)}catch(r){yield Vl(r)}})}function DM(n,e,t){let r=he(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=he(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(l=!0)}),l&&sC(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function t6(n,e,t){return _(this,null,function*(){let r=he(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ct(ee.comparator);o=o.insert(s,Cr.newNoDocument(s,ge.min()));let a=Re().add(s),c=new $p(ge.min(),new Map,new Ct(Ue),o,a);yield bP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),oC(r)}else yield vE(r.localStore,e,!1).then(()=>kE(r,e,t)).catch(Vl)})}function n6(n,e){return _(this,null,function*(){let t=he(n),r=e.batch.batchId;try{let i=yield R3(t.localStore,e);DP(t,r,null),SP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Bl(t,i)}catch(i){yield Vl(i)}})}function r6(n,e,t){return _(this,null,function*(){let r=he(n);try{let i=yield function(o,a){let c=he(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(ze(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);DP(r,e,t),SP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Bl(r,i)}catch(i){yield Vl(i)}})}function SP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function DP(n,e,t){let r=he(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function kE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||AP(n,r)})}function AP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(eC(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),oC(n))}function AM(n,e,t){for(let r of t)r instanceof nm?(n.La.addReference(r.key,e),i6(n,r)):r instanceof rm?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||AP(n,r.key)):oe()}function i6(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),oC(n))}function oC(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new ee(mt.fromString(e)),r=n.qa.next();n.Na.set(r,new PE(t)),n.Oa=n.Oa.insert(t,r),gP(n.remoteStore,new Rl(Qr(ZE(t.path)),r,"TargetPurposeLimboResolution",LM.oe))}}function Bl(n,e,t){return _(this,null,function*(){let r=he(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=fE.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return _(this,null,function*(){let d=he(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(l,m=>V.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>V.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Ul(f))throw f;z("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let m=f.targetId;if(!f.fromCache){let v=d.os.get(m),w=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(m,N)}}})}(r.localStore,s))})}function s6(n,e){return _(this,null,function*(){let t=he(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield pP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new G(F.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Bl(t,r.hs)}})}function o6(n,e){let t=he(n),r=t.Na.get(e);if(r&&r.va)return Re().add(r.key);{let i=Re(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function RP(n){let e=he(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=bP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=o6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=t6.bind(null,e),e.Ca.d_=W3.bind(null,e.eventManager),e.Ca.$a=K3.bind(null,e.eventManager),e}function a6(n){let e=he(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=n6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=r6.bind(null,e),e}var RM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=gm(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return A3(this.persistence,new mE,t.initialUser,this.serializer)}Ga(t){return new lE(hE.Zr,this.serializer)}Wa(t){return new _E}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var c6=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>DM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=s6.bind(null,this.syncEngine),yield z3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new RE}()}createDatastore(t){let r=gm(t.databaseInfo.databaseId),i=function(o){return new IE(o)}(t.databaseInfo);return function(o,a,c,l){return new TE(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new SE(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>DM(this.syncEngine,r,0),function(){return Qp.D()?new Qp:new yE}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,f){let m=new OE(s,o,a,c,l,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(s){return _(this,null,function*(){let o=he(s);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield jl(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var im=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ri("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var FE=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=kp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=iC(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function fI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield pP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function xM(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield u6(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>TM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>TM(e.remoteStore,i)),n._onlineComponents=e})}function u6(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield fI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ka("Error using user provided cache. Falling back to memory cache: "+t),yield fI(n,new RM)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield fI(n,new RM);return n._offlineComponents})}function xP(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield xM(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield xM(n,new c6))),n._onlineComponents})}function l6(n){return xP(n).then(e=>e.syncEngine)}function LE(n){return _(this,null,function*(){let e=yield xP(n),t=e.eventManager;return t.onListen=Q3.bind(null,e.syncEngine),t.onUnlisten=J3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Y3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=X3.bind(null,e.syncEngine),t})}function d6(n,e,t={}){let r=new Wr;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,l){let d=new im({next:m=>{d.Za(),o.enqueueAndForget(()=>CP(s,f)),m.fromCache&&c.source==="server"?l.reject(new G(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),f=new tm(a,d,{includeMetadataChanges:!0,_a:!0});return EP(s,f)}(yield LE(n),n.asyncQueue,e,t,r)})),r.promise}function NP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var NM=new Map;function MP(n,e,t){if(!t)throw new G(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function h6(n,e,t,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MM(n){if(!ee.isDocumentKey(n))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function PM(n){if(ee.isDocumentKey(n))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ym(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":oe()}function gs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=ym(n);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var sm=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=NP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},sc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sm({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sm(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pI;switch(r.type){case"firstParty":return new _I(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=NM.get(t);r&&(z("ComponentProvider","Removing Datastore"),NM.delete(t),r.terminate())}(this),Promise.resolve()}};function PP(n,e,t,r={}){var i;let s=(n=gs(n,sc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=zt.MOCK_USER;else{a=Go(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new zt(l)}n._authCredentials=new mI(new Op(a,c))}}var Co=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Nn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},vs=class n extends Co{constructor(e,t,r){super(e,t,ZE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Nn(this.firestore,null,new ee(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function OP(n,e,...t){if(n=xe(n),MP("collection","path",e),n instanceof sc){let r=mt.fromString(e,...t);return PM(r),new vs(n,null,r)}{if(!(n instanceof Nn||n instanceof vs))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(mt.fromString(e,...t));return PM(r),new vs(n.firestore,null,r)}}function kP(n,e,...t){if(n=xe(n),arguments.length===1&&(e=kp.newId()),MP("doc","path",e),n instanceof sc){let r=mt.fromString(e,...t);return MM(r),new Nn(n,null,new ee(r))}{if(!(n instanceof Nn||n instanceof vs))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(mt.fromString(e,...t));return MM(r),new Nn(n.firestore,n instanceof vs?n.converter:null,new ee(r))}}var om=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yp(this,"async_queue_retry"),this.Vu=()=>{let r=hI();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=hI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=hI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Wr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ul(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ri("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=DE.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&oe()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function OM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var To=class extends sc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new om,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new om(e),this._firestoreClient=void 0,yield e}})}};function FP(n,e){let t=typeof n=="object"?n:Nt(),r=typeof n=="string"?n:e||"(default)",i=xt(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=qi("firestore");s&&PP(i,...s)}return i}function aC(n){if(n._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||f6(n),n._firestoreClient}function f6(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new CI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,NP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new FE(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Ml=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(an.fromBase64String(e))}catch(t){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Pl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var am=class{constructor(e){this._methodName=e}};var Ol=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}};var kl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var p6=/^__.*__$/,VE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Eo(e,this.data,t,this.fieldTransforms)}};function LP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}var UE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return cm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(LP(this.Cu)&&p6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},jE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||gm(e)}Qu(e,t,r,i=!1){return new UE({Cu:e,methodName:t,qu:r,path:qn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function VP(n){let e=n._freezeSettings(),t=gm(n._databaseId);return new jE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function m6(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);BP("Data must be an object, but it was:",o,r);let a=UP(r,o),c,l;if(s.merge)c=new zr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let m=v6(e,f,t);if(!o.contains(m))throw new G(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);y6(d,m)||d.push(m)}c=new zr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new VE(new Er(a),c,l)}function g6(n,e,t,r=!1){return cC(t,n.Qu(r?4:3,e))}function cC(n,e){if(jP(n=xe(n)))return BP("Unsupported field value:",e,n),UP(n,e);if(n instanceof am)return function(r,i){if(!LP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=cC(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return n3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Rt.fromDate(r);return{timestampValue:zp(i.serializer,s)}}if(r instanceof Rt){let s=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zp(i.serializer,s)}}if(r instanceof Ol)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ml)return{bytesValue:aP(i.serializer,r._byteString)};if(r instanceof Nn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof kl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return JE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${ym(r)}`)}(n,e)}function UP(n,e){let t={};return VM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ac(n,(r,i)=>{let s=cC(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function jP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof Ol||n instanceof Ml||n instanceof Nn||n instanceof am||n instanceof kl)}function BP(n,e,t){if(!jP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=ym(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function v6(n,e,t){if((e=xe(e))instanceof Pl)return e._internalPath;if(typeof e=="string")return $P(n,e);throw cm("Field path arguments must be of type string or ",n,!1,void 0,t)}var _6=new RegExp("[~\\*/\\[\\]]");function $P(n,e,t){if(e.search(_6)>=0)throw cm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw cm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function cm(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new G(F.INVALID_ARGUMENT,a+n+c)}function y6(n,e){return n.some(t=>t.isEqual(e))}var um=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new BE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(uC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},BE=class extends um{data(){return super.data()}};function uC(n,e){return typeof e=="string"?$P(n,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}function HP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Fl=class{},$E=class extends Fl{};function qP(n,e,...t){let r=[];e instanceof Fl&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof HE).length,a=s.filter(c=>c instanceof lm).length;if(o>1||o>0&&a>0)throw new G(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var lm=class n extends $E{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return zP(e._query,t),new Co(e.firestore,e.converter,FI(e._query,t))}_parse(e){let t=VP(e.firestore);return function(s,o,a,c,l,d,f){let m;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){FM(f,d);let v=[];for(let w of f)v.push(kM(c,s,w));m={arrayValue:{values:v}}}else m=kM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||FM(f,d),m=g6(a,o,f,d==="in"||d==="not-in");return Lt.create(l,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function GP(n,e,t){let r=e,i=uC("where",n);return lm._create(i,r,t)}var HE=class n extends Fl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Tr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)zP(o,c),o=FI(o,c)}(e._query,t),new Co(e.firestore,e.converter,FI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function kM(n,e,t){if(typeof(t=xe(t))=="string"){if(t==="")throw new G(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WM(e)&&t.indexOf("/")!==-1)throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(mt.fromString(t));if(!ee.isDocumentKey(r))throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return oM(n,new ee(r))}if(t instanceof Nn)return oM(n,t._key);throw new G(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ym(t)}.`)}function FM(n,e){if(!Array.isArray(n)||n.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function zP(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var qE=class{convertValue(e,t="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_s(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ac(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>lt(o.doubleValue));return new kl(s)}convertGeoPoint(e){return new Ol(lt(e.latitude),lt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=WE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sl(e));default:return null}}convertTimestamp(e){let t=xi(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=mt.fromString(e);ze(fP(r));let i=new Up(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(t)||Ri(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function w6(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var po=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},dm=class extends um{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Wa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(uC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Wa=class extends dm{data(e={}){return super.data(e)}},hm=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new po(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Wa(this._firestore,this._userDataWriter,r.key,r,new po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new po(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Wa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new po(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:I6(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function I6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}var Ll=class extends qE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Nn(this.firestore,null,t)}};function WP(n){n=gs(n,Co);let e=gs(n.firestore,To),t=aC(e),r=new Ll(e);return HP(n._query),d6(t,n._query).then(i=>new hm(e,r,n,i))}function KP(n,e,t){n=gs(n,Nn);let r=gs(n.firestore,To),i=w6(n.converter,e,t);return E6(r,[m6(VP(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,mo.none())])}function lC(n,...e){var t,r,i;n=xe(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||OM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(OM(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Nn)l=gs(n.firestore,To),d=ZE(n._key.path),c={next:f=>{e[o]&&e[o](C6(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=gs(n,Co);l=gs(f.firestore,To),d=f._query;let m=new Ll(l);c={next:v=>{e[o]&&e[o](new hm(l,m,f,v))},error:e[o+1],complete:e[o+2]},HP(n._query)}return function(m,v,w,N){let R=new im(N),L=new tm(v,R,w);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return EP(yield LE(m),L)})),()=>{R.Za(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return CP(yield LE(m),L)}))}}(aC(l),d,a,c)}function E6(n,e){return function(r,i){let s=new Wr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return e6(yield l6(r),i,s)})),s.promise}(aC(n),e)}function C6(n,e,t){let r=t.docs.get(e._key),i=new Ll(n);return new dm(n,i,e._key,r,new po(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){oc=i})(En),bt(new Tt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new To(new gI(r.getProvider("auth-internal")),new wI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Up(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Z(nM,"4.7.3",e),Z(nM,"4.7.3","esm2017")})();var wm=function(){return wm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},wm.apply(this,arguments)};var S6={includeMetadataChanges:!1};function QP(n,e){return e===void 0&&(e=S6),new de(function(t){var r=lC(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function YP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:wm(wm({},r),(t={},t[e.idField]=n.id,t))}function ZP(n){return QP(n,{includeMetadataChanges:!0}).pipe(Q(function(e){return e.docs}))}function JP(n,e){return e===void 0&&(e={}),ZP(n).pipe(Q(function(t){return t.map(function(r){return YP(r,e)})}))}var So=class{constructor(e){return e}},XP="firestore",dC=class{constructor(){return At(XP)}};var hC=new H("angularfire2.firestore-instances");function D6(n,e){let t=Ot(XP,n,e);return t&&new So(t)}function A6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new So(r)}}var R6={provide:dC,deps:[[new ce,hC]]},x6={provide:So,useFactory:D6,deps:[[new ce,hC],ot]};function eO(n,...e){return Z("angularfire",st.full,"fst"),nt([x6,R6,{provide:hC,useFactory:A6(n),multi:!0,deps:[ie,Ae,Et,pt,[new ce,Ir],[new ce,xn],...e]}])}var or=Ve(JP,!0);var ar=Ve(OP,!0);var fC=Ve(kP,!0);var pC=Ve(WP,!0);var tO=Ve(FP,!0);var nO=Ve(qP,!0);var mC=Ve(KP,!0);var rO=Ve(GP,!0);var iO="@firebase/database",sO="1.0.8";var f0="";function N6(n){f0=n}var CC=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),$t(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:jd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var TC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return xr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var LO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CC(e)}}catch{}return new TC},Ao=LO("localStorage"),bC=LO("sessionStorage");var hc=new Nr("@firebase/database"),M6=function(){let n=1;return function(){return n++}}(),VO=function(n){let e=Hb(n),t=new jb;t.update(e);let r=t.digest();return xb.encodeByteArray(r)},ed=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=ed.apply(null,r):typeof r=="object"?e+=$t(r):e+=r,e+=" "}return e},Ro=null,oO=!0,P6=function(n,e){B(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(hc.logLevel=rn.VERBOSE,Ro=hc.log.bind(hc),e&&bC.set("logging_enabled",!0)):typeof n=="function"?Ro=n:(Ro=null,bC.remove("logging_enabled"))},cn=function(...n){if(oO===!0&&(oO=!1,Ro===null&&bC.get("logging_enabled")===!0&&P6(!0)),Ro){let e=ed.apply(null,n);Ro(e)}},td=function(n){return function(...e){cn(n,...e)}},SC=function(...n){let e="FIREBASE INTERNAL ERROR: "+ed(...n);hc.error(e)},Oi=function(...n){let e=`FIREBASE FATAL ERROR: ${ed(...n)}`;throw hc.error(e),new Error(e)},Gn=function(...n){let e="FIREBASE WARNING: "+ed(...n);hc.warn(e)},O6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},UO=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},k6=function(n){if(Ar()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},pc="[MIN_NAME]",xo="[MAX_NAME]",Ic=function(n,e){if(n===e)return 0;if(n===pc||e===xo)return-1;if(e===pc||n===xo)return 1;{let t=aO(n),r=aO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},F6=function(n,e){return n===e?0:n<e?-1:1},$l=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+$t(e))},p0=function(n){if(typeof n!="object"||n===null)return $t(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=$t(e[r]),t+=":",t+=p0(n[e[r]]);return t+="}",t},jO=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function lr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var BO=function(n){B(!UO(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},L6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},V6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var U6=new RegExp("^-?(0*)\\d{1,10}$"),j6=-2147483648,B6=2147483647,aO=function(n){if(U6.test(n)){let e=Number(n);if(e>=j6&&e<=B6)return e}return null},nd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Gn("Exception was thrown by user callback.",t),e},Math.floor(0))}},$6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var DC=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Gn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var AC=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(cn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Gn(e)}},Kl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Em="5",$O="v",HO="s",qO="r",GO="f",zO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WO="ls",KO="p",RC="ac",QO="websocket",YO="long_polling";var Cm=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ao.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ao.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function H6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function ZO(n,e,t){B(typeof e=="string","typeof type must == string"),B(typeof t=="object","typeof params must == object");let r;if(e===QO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===YO)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);H6(n)&&(t.ns=n.namespace);let i=[];return lr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var xC=class{constructor(){this.counters_={}}incrementCounter(e,t=1){xr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Pb(this.counters_)}};var gC={},vC={};function m0(n){let e=n.toString();return gC[e]||(gC[e]=new xC),gC[e]}function q6(n,e){let t=n.toString();return vC[t]||(vC[t]=e()),vC[t]}var NC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var cO="start",G6="close",z6="pLPCommand",W6="pRTLPCB",JO="id",XO="pw",ek="ser",K6="cb",Q6="seg",Y6="ts",Z6="d",J6="dframe",tk=1870,nk=30,X6=tk-nk,e9=25e3,t9=3e4,MC=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=td(e),this.stats_=m0(t),this.urlFn=c=>(this.appCheckToken&&(c[RC]=this.appCheckToken),ZO(t,YO,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new NC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(t9)),k6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new PC((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===cO)this.id=a,this.password=c;else if(o===G6)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[cO]="t",r[ek]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[K6]=this.scriptTagHolder.uniqueCallbackIdentifier),r[$O]=Em,this.transportSessionId&&(r[HO]=this.transportSessionId),this.lastSessionId&&(r[WO]=this.lastSessionId),this.applicationId&&(r[KO]=this.applicationId),this.appCheckToken&&(r[RC]=this.appCheckToken),typeof location<"u"&&location.hostname&&zO.test(location.hostname)&&(r[qO]=GO);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Ar()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!L6()&&!V6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=$t(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Nb(t),i=jO(r,X6);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Ar())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[J6]="t",r[JO]=e,r[XO]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=$t(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},PC=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ar())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=M6(),window[z6+this.uniqueCallbackIdentifier]=e,window[W6+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){cn("frame writing exception"),a.stack&&cn(a.stack),cn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||cn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[JO]=this.myID,e[XO]=this.myPW,e[ek]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+nk+r.length<=tk;){let o=this.pendingSegs.shift();r=r+"&"+Q6+i+"="+o.seg+"&"+Y6+i+"="+o.ts+"&"+Z6+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(e9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Ar()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{cn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var n9=16384,r9=45e3,Tm=null;typeof MozWebSocket<"u"?Tm=MozWebSocket:typeof WebSocket<"u"&&(Tm=WebSocket);var Hl=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=td(this.connId),this.stats_=m0(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[$O]=Em,!Ar()&&typeof location<"u"&&location.hostname&&zO.test(location.hostname)&&(a[qO]=GO),r&&(a[HO]=r),i&&(a[WO]=i),s&&(a[RC]=s),o&&(a[KO]=o),ZO(t,QO,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ao.set("previous_websocket_failure",!0);try{let i;if(Ar()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Em}/${f0}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Tm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Tm!==null&&!n.forceDisallow_}static previouslyFailed(){return Ao.isInMemoryStorage||Ao.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ao.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=jd(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(B(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=$t(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=jO(r,n9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(r9))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),i9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[MC,Hl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Hl&&Hl.isAvailable(),i=r&&!Hl.previouslyFailed();if(t.webSocketOnly&&(r||Gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hl];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),s9=6e4,o9=5e3,a9=10*1024,c9=100*1024,_C="t",uO="d",u9="s",lO="r",l9="e",dO="o",hO="a",fO="n",pO="p",d9="h",OC=class{constructor(e,t,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=td("c:"+this.id+":"),this.transportManager_=new i9(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>c9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>a9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(_C in e){let t=e[_C];t===hO?this.upgradeIfSecondaryHealthy_():t===lO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===dO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=$l("t",e),r=$l("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:pO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:hO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:fO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=$l("t",e),r=$l("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=$l(_C,e);if(uO in e){let r=e[uO];if(t===d9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===fO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===u9?this.onConnectionShutdown_(r):t===lO?this.onReset_(r):t===l9?SC("Server Error: "+r):t===dO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):SC("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Em!==r&&Gn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Wl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(s9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(o9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:pO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ao.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var bm=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Sm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){B(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Dm=class n extends Sm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ou()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var mO=32,gO=768,tt=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Qe(){return new tt("")}function Oe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Es(n){return n.pieces_.length-n.pieceNum_}function at(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new tt(n.pieces_,e)}function rk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function h9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function ik(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function sk(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new tt(e,0)}function Wt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof tt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new tt(t,0)}function Me(n){return n.pieceNum_>=n.pieces_.length}function cr(n,e){let t=Oe(n),r=Oe(e);if(t===null)return e;if(t===r)return cr(at(n),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function ok(n,e){if(Es(n)!==Es(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Sr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Es(n)>Es(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var kC=class{constructor(e,t){this.errorPrefix_=t,this.parts_=ik(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=hu(this.parts_[r]);ak(this)}};function f9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=hu(e),ak(n)}function p9(n){let e=n.parts_.pop();n.byteLength_-=hu(e),n.parts_.length>0&&(n.byteLength_-=1)}function ak(n){if(n.byteLength_>gO)throw new Error(n.errorPrefix_+"has a key path longer than "+gO+" bytes ("+n.byteLength_+").");if(n.parts_.length>mO)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+mO+") or object contains a cycle "+Do(n))}function Do(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var FC=class n extends Sm{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}};var ql=1e3,m9=60*5*1e3,vO=30*1e3,g9=1.3,v9=3e4,_9="server_kill",_O=3,g0=(()=>{class n extends bm{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=td("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ql,this.maxReconnectDelay_=m9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Ar())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");FC.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Dm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_($t(o)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Wg,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&xr(t,"w")){let i=As(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Gn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Ub(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=vO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Vb(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+$t(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):SC("Unrecognized action received from server: "+$t(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>v9&&(this.reconnectDelay_=ql),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*g9)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(m){B(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?cn("getToken() completed but was canceled"):(cn("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new OC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{Gn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(_9)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Gn(m),l())}}})}interrupt(t){cn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){cn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],uu(this.interruptReasons_)&&(this.reconnectDelay_=ql,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>p0(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new tt(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){cn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=_O&&(this.reconnectDelay_=vO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){cn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=_O&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Ar()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+f0.replace(/\./g,"-")]=1,ou()?t["framework.cordova"]=1:Ud()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Dm.getInstance().currentlyOnline();return uu(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),ke=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var mc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new ke(pc,e),i=new ke(pc,t);return this.compare(r,i)!==0}minPost(){return ke.MIN}};var Im,Am=class extends mc{static get __EMPTY_NODE(){return Im}static set __EMPTY_NODE(e){Im=e}compare(e,t){return Ic(e.name,t.name)}isDefinedOn(e){throw qo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ke.MIN}maxPost(){return new ke(xo,Im)}makePost(e,t){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new ke(e,Im)}toString(){return".key"}},fc=new Am;var lc=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},br=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ur.EMPTY_NODE,this.right=o??ur.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ur.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return ur.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),LC=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new br(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ur=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,br.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,br.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new lc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new lc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new lc(this.root_,null,this.comparator_,!0,e)}};ur.EMPTY_NODE=new LC;function y9(n,e){return Ic(n.name,e.name)}function v0(n,e){return Ic(n,e)}var VC;function w9(n){VC=n}var ck=function(n){return typeof n=="number"?"number:"+BO(n):"string:"+n},uk=function(n){if(n.isLeafNode()){let e=n.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&xr(e,".sv"),"Priority must be a string or number.")}else B(n===VC||n.isEmpty(),"priority of unexpected type.");B(n===VC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var yO,gc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),uk(this.priorityNode_)}static set __childrenNodeConstructor(t){yO=t}static get __childrenNodeConstructor(){return yO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Me(t)?this:Oe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Oe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(B(i!==".priority"||Es(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ck(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=BO(this.value_):t+=this.value_,this.lazyHash_=VO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(B(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return B(s>=0,"Unknown leaf type: "+r),B(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),lk,dk;function I9(n){lk=n}function E9(n){dk=n}var UC=class extends mc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Ic(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ke.MIN}maxPost(){return new ke(xo,new gc("[PRIORITY-POST]",dk))}makePost(e,t){let r=lk(e);return new ke(t,new gc("[PRIORITY-POST]",r))}toString(){return".priority"}},ln=new UC;var C9=Math.log(2),jC=class{constructor(e){let t=s=>parseInt(Math.log(s)/C9,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Rm=function(n,e,t,r){n.sort(e);let i=function(c,l){let d=l-c,f,m;if(d===0)return null;if(d===1)return f=n[c],m=t?t(f):f,new br(m,f.node,br.BLACK,null,null);{let v=parseInt(d/2,10)+c,w=i(c,v),N=i(v+1,l);return f=n[v],m=t?t(f):f,new br(m,f.node,br.BLACK,w,N)}},s=function(c){let l=null,d=null,f=n.length,m=function(w,N){let R=f-w,L=f;f-=w;let q=i(R+1,L),W=n[R],te=t?t(W):W;v(new br(te,W.node,N,null,q))},v=function(w){l?(l.left=w,l=w):(d=w,l=w)};for(let w=0;w<c.count;++w){let N=c.nextBitIsOne(),R=Math.pow(2,c.count-(w+1));N?m(R,br.BLACK):(m(R,br.BLACK),m(R,br.RED))}return d},o=new jC(n.length),a=s(o);return new ur(r||e,a)};var yC,uc={},vc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return B(uc&&ln,"ChildrenNode.ts has not been loaded"),yC=yC||new n({".priority":uc},{".priority":ln}),yC}get(e){let t=As(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ur?t:null}hasIndex(e){return xr(this.indexSet_,e.toString())}addIndex(e,t){B(e!==fc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(ke.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Rm(r,e.getCompare()):a=uc;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,l)}addToIndexes(e,t){let r=lu(this.indexes_,(i,s)=>{let o=As(this.indexSet_,s);if(B(o,"Missing index implementation for "+s),i===uc)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(ke.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),Rm(a,o.getCompare())}else return uc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new ke(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=lu(this.indexes_,i=>{if(i===uc)return i;{let s=t.get(e.name);return s?i.remove(new ke(e.name,s)):i}});return new n(r,this.indexSet_)}};var Gl,gt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&uk(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Gl||(Gl=new n(new ur(v0),null,vc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Gl}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Gl:r}}getChild(t){let r=Oe(t);return r===null?this:this.getImmediateChild(r).getChild(at(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(B(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new ke(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Gl:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Oe(t);if(i===null)return r;{B(Oe(t)!==".priority"||Es(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(at(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(ln,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+ck(this.getPriority().val())+":"),this.forEachChild(ln,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":VO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ke(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new ke(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new ke(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,ke.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,ke.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===rd?-1:0}withIndex(t){if(t===fc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(ln),s=r.getIterator(ln),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===fc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),BC=class extends gt{constructor(){super(new ur(v0),gt.EMPTY_NODE,vc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return gt.EMPTY_NODE}isEmpty(){return!1}},rd=new BC;Object.defineProperties(ke,{MIN:{value:new ke(pc,gt.EMPTY_NODE)},MAX:{value:new ke(xo,rd)}});Am.__EMPTY_NODE=gt.EMPTY_NODE;gc.__childrenNodeConstructor=gt;w9(rd);E9(rd);var T9=!0;function un(n,e=null){if(n===null)return gt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new gc(t,un(e))}if(!(n instanceof Array)&&T9){let t=[],r=!1;if(lr(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=un(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new ke(o,c)))}}),t.length===0)return gt.EMPTY_NODE;let s=Rm(t,y9,o=>o.name,v0);if(r){let o=Rm(t,ln.getCompare());return new gt(s,un(e),new vc({".priority":o},{".priority":ln}))}else return new gt(s,un(e),vc.Default)}else{let t=gt.EMPTY_NODE;return lr(n,(r,i)=>{if(xr(n,r)&&r.substring(0,1)!=="."){let s=un(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(un(e))}}I9(un);var $C=class extends mc{constructor(e){super(),this.indexPath_=e,B(!Me(e)&&Oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Ic(e.name,t.name):s}makePost(e,t){let r=un(e),i=gt.EMPTY_NODE.updateChild(this.indexPath_,r);return new ke(t,i)}maxPost(){let e=gt.EMPTY_NODE.updateChild(this.indexPath_,rd);return new ke(xo,e)}toString(){return ik(this.indexPath_,0).join("/")}};var HC=class extends mc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Ic(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ke.MIN}maxPost(){return ke.MAX}makePost(e,t){let r=un(e);return new ke(t,r)}toString(){return".value"}},b9=new HC;function S9(n){return{type:"value",snapshotNode:n}}function D9(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function A9(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wO(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function R9(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var qC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ln}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:pc}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ln}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function IO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===ln?t="$priority":n.index_===b9?t="$value":n.index_===fc?t="$key":(B(n.index_ instanceof $C,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=$t(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=$t(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+$t(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=$t(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+$t(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function EO(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==ln&&(e.i=n.index_.toString()),e}var GC=class n extends bm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=td("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=IO(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),As(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=IO(e._queryParams),r=e._path.toString(),i=new Wg;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Rs(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=jd(a.responseText)}catch{Gn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Gn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var zC=class{constructor(){this.rootNode_=gt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function xm(){return{value:null,children:new Map}}function hk(n,e,t){if(Me(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Oe(e);n.children.has(r)||n.children.set(r,xm());let i=n.children.get(r);e=at(e),hk(i,e,t)}}function WC(n,e,t){n.value!==null?t(e,n.value):x9(n,(r,i)=>{let s=new tt(e.toString()+"/"+r);WC(i,s,t)})}function x9(n,e){n.children.forEach((t,r)=>{e(r,t)})}var KC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&lr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var CO=10*1e3,N9=30*1e3,M9=5*60*1e3,QC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new KC(e);let r=CO+(N9-CO)*Math.random();Wl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;lr(e,(i,s)=>{s>0&&xr(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Wl(this.reportStats_.bind(this),Math.floor(Math.random()*2*M9))}};var Pi=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Pi||{});function fk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function pk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function mk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var YC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Pi.ACK_USER_WRITE,this.source=fk()}operationForChild(e){if(Me(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new tt(e));return new n(Qe(),t,this.revert)}}else return B(Oe(this.path)===e,"operationForChild called for unrelated child."),new n(at(this.path),this.affectedTree,this.revert)}};var _c=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Pi.OVERWRITE}operationForChild(e){return Me(this.path)?new n(this.source,Qe(),this.snap.getImmediateChild(e)):new n(this.source,at(this.path),this.snap)}};var Nm=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Pi.MERGE}operationForChild(e){if(Me(this.path)){let t=this.children.subtree(new tt(e));return t.isEmpty()?null:t.value?new _c(this.source,Qe(),t.value):new n(this.source,Qe(),t)}else return B(Oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Zl=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Me(e))return this.isFullyInitialized()&&!this.filtered_;let t=Oe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function P9(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(R9(o.childName,o.snapshotNode))}),zl(n,i,"child_removed",e,r,t),zl(n,i,"child_added",e,r,t),zl(n,i,"child_moved",s,r,t),zl(n,i,"child_changed",e,r,t),zl(n,i,"value",e,r,t),i}function zl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>k9(n,a,c)),o.forEach(a=>{let c=O9(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function O9(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function k9(n,e,t){if(e.childName==null||t.childName==null)throw qo("Should only compare child_ events.");let r=new ke(e.childName,e.snapshotNode),i=new ke(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function gk(n,e){return{eventCache:n,serverCache:e}}function Ql(n,e,t,r){return gk(new Zl(e,t,r),n.serverCache)}function vk(n,e,t,r){return gk(n.eventCache,new Zl(e,t,r))}function ZC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function No(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var wC,F9=()=>(wC||(wC=new ur(F6)),wC),Mn=class n{constructor(e,t=F9()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return lr(e,(r,i)=>{t=t.set(new tt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Qe(),value:this.value};if(Me(e))return null;{let r=Oe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(at(e),t);return s!=null?{path:Wt(new tt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Me(e))return this;{let t=Oe(e),r=this.children.get(t);return r!==null?r.subtree(at(e)):new n(null)}}set(e,t){if(Me(e))return new n(t,this.children);{let r=Oe(e),s=(this.children.get(r)||new n(null)).set(at(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(Me(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Oe(e),r=this.children.get(t);if(r){let i=r.remove(at(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(Me(e))return this.value;{let t=Oe(e),r=this.children.get(t);return r?r.get(at(e)):null}}setTree(e,t){if(Me(e))return t;{let r=Oe(e),s=(this.children.get(r)||new n(null)).setTree(at(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Qe(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Wt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Qe(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Me(e))return null;{let s=Oe(e),o=this.children.get(s);return o?o.findOnPath_(at(e),Wt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Qe(),t)}foreachOnPath_(e,t,r){if(Me(e))return this;{this.value&&r(t,this.value);let i=Oe(e),s=this.children.get(i);return s?s.foreachOnPath_(at(e),Wt(t,i),r):new n(null)}}foreach(e){this.foreach_(Qe(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Wt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Dr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Mn(null))}};function Yl(n,e,t){if(Me(e))return new Dr(new Mn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=cr(i,e);return s=s.updateChild(o,t),new Dr(n.writeTree_.set(i,s))}else{let i=new Mn(t),s=n.writeTree_.setTree(e,i);return new Dr(s)}}}function TO(n,e,t){let r=n;return lr(t,(i,s)=>{r=Yl(r,Wt(e,i),s)}),r}function bO(n,e){if(Me(e))return Dr.empty();{let t=n.writeTree_.setTree(e,new Mn(null));return new Dr(t)}}function JC(n,e){return Mo(n,e)!=null}function Mo(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(cr(t.path,e)):null}function SO(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(ln,(r,i)=>{e.push(new ke(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ke(r,i.value))}),e}function Is(n,e){if(Me(e))return n;{let t=Mo(n,e);return t!=null?new Dr(new Mn(t)):new Dr(n.writeTree_.subtree(e))}}function XC(n){return n.writeTree_.isEmpty()}function yc(n,e){return _k(Qe(),n.writeTree_,e)}function _k(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(B(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=_k(Wt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Wt(n,".priority"),r)),t}}function yk(n,e){return Tk(e,n)}function L9(n,e,t,r,i){B(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Yl(n.visibleWrites,e,t)),n.lastWriteId=r}function V9(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function U9(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);B(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&j9(a,r.path)?i=!1:Sr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return B9(n),!0;if(r.snap)n.visibleWrites=bO(n.visibleWrites,r.path);else{let a=r.children;lr(a,c=>{n.visibleWrites=bO(n.visibleWrites,Wt(r.path,c))})}return!0}else return!1}function j9(n,e){if(n.snap)return Sr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Sr(Wt(n.path,t),e))return!0;return!1}function B9(n){n.visibleWrites=wk(n.allWrites,$9,Qe()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function $9(n){return n.visible}function wk(n,e,t){let r=Dr.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Sr(t,o)?(a=cr(t,o),r=Yl(r,a,s.snap)):Sr(o,t)&&(a=cr(o,t),r=Yl(r,Qe(),s.snap.getChild(a)));else if(s.children){if(Sr(t,o))a=cr(t,o),r=TO(r,a,s.children);else if(Sr(o,t))if(a=cr(o,t),Me(a))r=TO(r,Qe(),s.children);else{let c=As(s.children,Oe(a));if(c){let l=c.getChild(at(a));r=Yl(r,Qe(),l)}}}else throw qo("WriteRecord should have .snap or .children")}}return r}function Ik(n,e,t,r,i){if(!r&&!i){let s=Mo(n.visibleWrites,e);if(s!=null)return s;{let o=Is(n.visibleWrites,e);if(XC(o))return t;if(t==null&&!JC(o,Qe()))return null;{let a=t||gt.EMPTY_NODE;return yc(o,a)}}}else{let s=Is(n.visibleWrites,e);if(!i&&XC(s))return t;if(!i&&t==null&&!JC(s,Qe()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Sr(l.path,e)||Sr(e,l.path))},a=wk(n.allWrites,o,e),c=t||gt.EMPTY_NODE;return yc(a,c)}}}function H9(n,e,t){let r=gt.EMPTY_NODE,i=Mo(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ln,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=Is(n.visibleWrites,e);return t.forEachChild(ln,(o,a)=>{let c=yc(Is(s,new tt(o)),a);r=r.updateImmediateChild(o,c)}),SO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Is(n.visibleWrites,e);return SO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function q9(n,e,t,r,i){B(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Wt(e,t);if(JC(n.visibleWrites,s))return null;{let o=Is(n.visibleWrites,s);return XC(o)?i.getChild(t):yc(o,i.getChild(t))}}function G9(n,e,t,r){let i=Wt(e,t),s=Mo(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=Is(n.visibleWrites,i);return yc(o,r.getNode().getImmediateChild(t))}else return null}function z9(n,e){return Mo(n.visibleWrites,e)}function W9(n,e,t,r,i,s,o){let a,c=Is(n.visibleWrites,e),l=Mo(c,Qe());if(l!=null)a=l;else if(t!=null)a=yc(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),v=m.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=m.getNext();return d}else return[]}function K9(){return{visibleWrites:Dr.empty(),allWrites:[],lastWriteId:-1}}function e0(n,e,t,r){return Ik(n.writeTree,n.treePath,e,t,r)}function Ek(n,e){return H9(n.writeTree,n.treePath,e)}function DO(n,e,t,r){return q9(n.writeTree,n.treePath,e,t,r)}function Mm(n,e){return z9(n.writeTree,Wt(n.treePath,e))}function Q9(n,e,t,r,i,s){return W9(n.writeTree,n.treePath,e,t,r,i,s)}function _0(n,e,t){return G9(n.writeTree,n.treePath,e,t)}function Ck(n,e){return Tk(Wt(n.treePath,e),n.writeTree)}function Tk(n,e){return{treePath:n,writeTree:e}}var t0=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;B(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,wO(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,A9(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,D9(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,wO(r,e.snapshotNode,i.oldSnap));else throw qo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var n0=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},bk=new n0,Jl=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Zl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return _0(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:No(this.viewCache_),s=Q9(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function Y9(n,e){B(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Z9(n,e,t,r,i){let s=new t0,o,a;if(t.type===Pi.OVERWRITE){let l=t;l.source.fromUser?o=r0(n,e,l.path,l.snap,r,i,s):(B(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Me(l.path),o=Pm(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Pi.MERGE){let l=t;l.source.fromUser?o=X9(n,e,l.path,l.children,r,i,s):(B(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=i0(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Pi.ACK_USER_WRITE){let l=t;l.revert?o=n5(n,e,l.path,r,i,s):o=e5(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Pi.LISTEN_COMPLETE)o=t5(n,e,t.path,r,s);else throw qo("Unknown operation type: "+t.type);let c=s.getChanges();return J9(e,o,c),{viewCache:o,changes:c}}function J9(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ZC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(S9(ZC(e)))}}function Sk(n,e,t,r,i,s){let o=e.eventCache;if(Mm(r,t)!=null)return e;{let a,c;if(Me(t))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=No(e),d=l instanceof gt?l:gt.EMPTY_NODE,f=Ek(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=e0(r,No(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Oe(t);if(l===".priority"){B(Es(t)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=DO(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{let d=at(t),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let m=DO(r,t,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(l).updateChild(d,m):f=o.getNode().getImmediateChild(l)}else f=_0(r,l,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Ql(e,a,o.isFullyInitialized()||Me(t),n.filter.filtersNodes())}}function Pm(n,e,t,r,i,s,o,a){let c=e.serverCache,l,d=o?n.filter:n.filter.getIndexedFilter();if(Me(t))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(t,r);l=d.updateFullNode(c.getNode(),v,null)}else{let v=Oe(t);if(!c.isCompleteForPath(t)&&Es(t)>1)return e;let w=at(t),R=c.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?l=d.updatePriority(c.getNode(),R):l=d.updateChild(c.getNode(),v,R,w,bk,null)}let f=vk(e,l,c.isFullyInitialized()||Me(t),d.filtersNodes()),m=new Jl(i,f,s);return Sk(n,f,t,i,m,a)}function r0(n,e,t,r,i,s,o){let a=e.eventCache,c,l,d=new Jl(i,e,s);if(Me(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Ql(e,l,!0,n.filter.filtersNodes());else{let f=Oe(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Ql(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=at(t),v=a.getNode().getImmediateChild(f),w;if(Me(m))w=r;else{let N=d.getCompleteChild(f);N!=null?rk(m)===".priority"&&N.getChild(sk(m)).isEmpty()?w=N:w=N.updateChild(m,r):w=gt.EMPTY_NODE}if(v.equals(w))c=e;else{let N=n.filter.updateChild(a.getNode(),f,w,m,d,o);c=Ql(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function AO(n,e){return n.eventCache.isCompleteForChild(e)}function X9(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=Wt(t,c);AO(e,Oe(d))&&(a=r0(n,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=Wt(t,c);AO(e,Oe(d))||(a=r0(n,a,d,l,i,s,o))}),a}function RO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function i0(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Me(t)?l=r:l=new Mn(null).setTree(t,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let v=e.serverCache.getNode().getImmediateChild(f),w=RO(n,v,m);c=Pm(n,c,new tt(f),w,i,s,o,a)}}),l.children.inorderTraversal((f,m)=>{let v=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){let w=e.serverCache.getNode().getImmediateChild(f),N=RO(n,w,m);c=Pm(n,c,new tt(f),N,i,s,o,a)}}),c}function e5(n,e,t,r,i,s,o){if(Mm(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Me(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Pm(n,e,t,c.getNode().getChild(t),i,s,a,o);if(Me(t)){let l=new Mn(null);return c.getNode().forEachChild(fc,(d,f)=>{l=l.set(new tt(d),f)}),i0(n,e,t,l,i,s,a,o)}else return e}else{let l=new Mn(null);return r.foreach((d,f)=>{let m=Wt(t,d);c.isCompleteForPath(m)&&(l=l.set(d,c.getNode().getChild(m)))}),i0(n,e,t,l,i,s,a,o)}}function t5(n,e,t,r,i){let s=e.serverCache,o=vk(e,s.getNode(),s.isFullyInitialized()||Me(t),s.isFiltered());return Sk(n,o,t,r,bk,i)}function n5(n,e,t,r,i,s){let o;if(Mm(r,t)!=null)return e;{let a=new Jl(r,e,i),c=e.eventCache.getNode(),l;if(Me(t)||Oe(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=e0(r,No(e));else{let f=e.serverCache.getNode();B(f instanceof gt,"serverChildren would be complete if leaf node"),d=Ek(r,f)}d=d,l=n.filter.updateFullNode(c,d,s)}else{let d=Oe(t),f=_0(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=n.filter.updateChild(c,d,f,at(t),a,s):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(c,d,gt.EMPTY_NODE,at(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=e0(r,No(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Mm(r,Qe())!=null,Ql(e,l,o,n.filter.filtersNodes())}}function r5(n,e){let t=No(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Me(e)&&!t.getImmediateChild(Oe(e)).isEmpty())?t.getChild(e):null}function xO(n,e,t,r){e.type===Pi.MERGE&&e.source.queryId!==null&&(B(No(n.viewCache_),"We should always have a full cache before handling merges"),B(ZC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=Z9(n.processor_,i,e,t,r);return Y9(n.processor_,s.viewCache),B(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,i5(n,s.changes,s.viewCache.eventCache.getNode(),null)}function i5(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return P9(n.eventGenerator_,e,t,i)}var NO;function s5(n){B(!NO,"__referenceConstructor has already been defined"),NO=n}function y0(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return B(s!=null,"SyncTree gave us an op for an invalid query."),xO(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(xO(o,e,t,r));return s}}function w0(n,e){let t=null;for(let r of n.views.values())t=t||r5(r,e);return t}var MO;function o5(n){B(!MO,"__referenceConstructor has already been defined"),MO=n}var Om=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=K9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function a5(n,e,t,r,i){return L9(n.pendingWriteTree_,e,t,r,i),i?Fm(n,new _c(fk(),e,t)):[]}function dc(n,e,t=!1){let r=V9(n.pendingWriteTree_,e);if(U9(n.pendingWriteTree_,e)){let s=new Mn(null);return r.snap!=null?s=s.set(Qe(),!0):lr(r.children,o=>{s=s.set(new tt(o),!0)}),Fm(n,new YC(r.path,s,t))}else return[]}function km(n,e,t){return Fm(n,new _c(pk(),e,t))}function c5(n,e,t){let r=Mn.fromObject(t);return Fm(n,new Nm(pk(),e,r))}function u5(n,e,t,r){let i=xk(n,r);if(i!=null){let s=Nk(i),o=s.path,a=s.queryId,c=cr(o,e),l=new _c(mk(a),c,t);return Mk(n,o,l)}else return[]}function l5(n,e,t,r){let i=xk(n,r);if(i){let s=Nk(i),o=s.path,a=s.queryId,c=cr(o,e),l=Mn.fromObject(t),d=new Nm(mk(a),c,l);return Mk(n,o,d)}else return[]}function Dk(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=cr(o,e),l=w0(a,c);if(l)return l});return Ik(i,e,s,t,!0)}function Fm(n,e){return Ak(e,n.syncPointTree_,null,yk(n.pendingWriteTree_,Qe()))}function Ak(n,e,t,r){if(Me(n.path))return Rk(n,e,t,r);{let i=e.get(Qe());t==null&&i!=null&&(t=w0(i,Qe()));let s=[],o=Oe(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,d=Ck(r,o);s=s.concat(Ak(a,c,l,d))}return i&&(s=s.concat(y0(i,n,r,t))),s}}function Rk(n,e,t,r){let i=e.get(Qe());t==null&&i!=null&&(t=w0(i,Qe()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=Ck(r,o),d=n.operationForChild(o);d&&(s=s.concat(Rk(d,a,c,l)))}),i&&(s=s.concat(y0(i,n,r,t))),s}function xk(n,e){return n.tagToQueryMap.get(e)}function Nk(n){let e=n.indexOf("$");return B(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new tt(n.substr(0,e))}}function Mk(n,e,t){let r=n.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");let i=yk(n.pendingWriteTree_,e);return y0(r,t,i,null)}var s0=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},o0=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Wt(this.path_,e);return new n(this.syncTree_,t)}node(){return Dk(this.syncTree_,this.path_)}},d5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},PO=function(n,e,t){if(!n||typeof n!="object")return n;if(B(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return h5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return f5(n[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},h5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:B(!1,"Unexpected server value: "+n)}},f5=function(n,e,t){n.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);let i=e.node();if(B(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},p5=function(n,e,t,r){return I0(e,new o0(t,n),r)},m5=function(n,e,t){return I0(n,new s0(e),t)};function I0(n,e,t){let r=n.getPriority().val(),i=PO(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=PO(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new gc(a,un(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new gc(i))),o.forEachChild(ln,(a,c)=>{let l=I0(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Xl=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function E0(n,e){let t=e instanceof tt?e:new tt(e),r=n,i=Oe(t);for(;i!==null;){let s=As(r.node.children,i)||{children:{},childCount:0};r=new Xl(i,r,s),t=at(t),i=Oe(t)}return r}function Ec(n){return n.node.value}function Pk(n,e){n.node.value=e,a0(n)}function Ok(n){return n.node.childCount>0}function g5(n){return Ec(n)===void 0&&!Ok(n)}function Lm(n,e){lr(n.node.children,(t,r)=>{e(new Xl(t,n,r))})}function kk(n,e,t,r){t&&!r&&e(n),Lm(n,i=>{kk(i,e,!0,r)}),t&&r&&e(n)}function v5(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function id(n){return new tt(n.parent===null?n.name:id(n.parent)+"/"+n.name)}function a0(n){n.parent!==null&&_5(n.parent,n.name,n)}function _5(n,e,t){let r=g5(t),i=xr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,a0(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,a0(n))}var y5=/[\[\].#$\/\u0000-\u001F\u007F]/,w5=/[\[\].#$\u0000-\u001F\u007F]/,IC=10*1024*1024,Fk=function(n){return typeof n=="string"&&n.length!==0&&!y5.test(n)},I5=function(n){return typeof n=="string"&&n.length!==0&&!w5.test(n)},E5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),I5(n)};var Lk=function(n,e,t){let r=t instanceof tt?new kC(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Do(r));if(typeof e=="function")throw new Error(n+"contains a function "+Do(r)+" with contents = "+e.toString());if(UO(e))throw new Error(n+"contains "+e.toString()+" "+Do(r));if(typeof e=="string"&&e.length>IC/3&&hu(e)>IC)throw new Error(n+"contains a string greater than "+IC+" utf8 bytes "+Do(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(lr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Fk(o)))throw new Error(n+" contains an invalid key ("+o+") "+Do(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);f9(r,o),Lk(n,a,r),p9(r)}),i&&s)throw new Error(n+' contains ".value" child '+Do(r)+" in addition to actual children.")}};var C5=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Fk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!E5(t))throw new Error($b(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var c0=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function T5(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!ok(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Po(n,e,t){T5(n,t),b5(n,r=>Sr(r,e)||Sr(e,r))}function b5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(S5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function S5(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Ro&&cn("event: "+t.toString()),nd(r)}}}var D5="repo_interrupt",A5=25,u0=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new c0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xm(),this.transactionQueueTree_=new Xl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function R5(n,e,t){if(n.stats_=m0(n.repoInfo_),n.forceRestClient_||$6())n.server_=new GC(n.repoInfo_,(r,i,s,o)=>{OO(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>kO(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{$t(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new g0(n.repoInfo_,e,(r,i,s,o)=>{OO(n,r,i,s,o)},r=>{kO(n,r)},r=>{N5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=q6(n.repoInfo_,()=>new QC(n.stats_,n.server_)),n.infoData_=new zC,n.infoSyncTree_=new Om({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=km(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),C0(n,"connected",!1),n.serverSyncTree_=new Om({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Po(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function x5(n){let t=n.infoData_.getNode(new tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Vk(n){return d5({timestamp:x5(n)})}function OO(n,e,t,r,i){n.dataUpdateCount++;let s=new tt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=lu(t,l=>un(l));o=l5(n.serverSyncTree_,s,c,i)}else{let c=un(t);o=u5(n.serverSyncTree_,s,c,i)}else if(r){let c=lu(t,l=>un(l));o=c5(n.serverSyncTree_,s,c)}else{let c=un(t);o=km(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=b0(n,s)),Po(n.eventQueue_,a,o)}function kO(n,e){C0(n,"connected",e),e===!1&&P5(n)}function N5(n,e){lr(e,(t,r)=>{C0(n,t,r)})}function C0(n,e,t){let r=new tt("/.info/"+e),i=un(t);n.infoData_.updateSnapshot(r,i);let s=km(n.infoSyncTree_,r,i);Po(n.eventQueue_,r,s)}function M5(n){return n.nextWriteId_++}function P5(n){Uk(n,"onDisconnectEvents");let e=Vk(n),t=xm();WC(n.onDisconnect_,Qe(),(i,s)=>{let o=p5(i,s,n.serverSyncTree_,e);hk(t,i,o)});let r=[];WC(t,Qe(),(i,s)=>{r=r.concat(km(n.serverSyncTree_,i,s));let o=L5(n,i);b0(n,o)}),n.onDisconnect_=xm(),Po(n.eventQueue_,Qe(),r)}function O5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(D5)}function Uk(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),cn(t,...e)}function jk(n,e,t){return Dk(n.serverSyncTree_,e,t)||gt.EMPTY_NODE}function T0(n,e=n.transactionQueueTree_){if(e||Vm(n,e),Ec(e)){let t=$k(n,e);B(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&k5(n,id(e),t)}else Ok(e)&&Lm(e,t=>{T0(n,t)})}function k5(n,e,t){let r=t.map(l=>l.currentWriteId),i=jk(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let d=t[l];B(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=cr(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Uk(n,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(dc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Vm(n,E0(n.transactionQueueTree_,e)),T0(n,n.transactionQueueTree_),Po(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)nd(f[m])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Gn("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}b0(n,e)}},o)}function b0(n,e){let t=Bk(n,e),r=id(t),i=$k(n,t);return F5(n,i,r),r}function F5(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=cr(t,c.path),d=!1,f;if(B(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(dc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=A5)d=!0,f="maxretry",i=i.concat(dc(n.serverSyncTree_,c.currentWriteId,!0));else{let m=jk(n,c.path,o);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){Lk("transaction failed: Data returned ",v,c.path);let w=un(v);typeof v=="object"&&v!=null&&xr(v,".priority")||(w=w.updatePriority(m.getPriority()));let R=c.currentWriteId,L=Vk(n),q=m5(w,m,L);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=q,c.currentWriteId=M5(n),o.splice(o.indexOf(R),1),i=i.concat(a5(n.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(dc(n.serverSyncTree_,R,!0))}else d=!0,f="nodata",i=i.concat(dc(n.serverSyncTree_,c.currentWriteId,!0))}Po(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Vm(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)nd(r[a]);T0(n,n.transactionQueueTree_)}function Bk(n,e){let t,r=n.transactionQueueTree_;for(t=Oe(e);t!==null&&Ec(r)===void 0;)r=E0(r,t),e=at(e),t=Oe(e);return r}function $k(n,e){let t=[];return Hk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Hk(n,e,t){let r=Ec(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Lm(e,i=>{Hk(n,i,t)})}function Vm(n,e){let t=Ec(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,Pk(e,t.length>0?t:void 0)}Lm(e,r=>{Vm(n,r)})}function L5(n,e){let t=id(Bk(n,e)),r=E0(n.transactionQueueTree_,e);return v5(r,i=>{EC(n,i)}),EC(n,r),kk(r,i=>{EC(n,i)}),t}function EC(n,e){let t=Ec(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(B(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(B(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(dc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Pk(e,void 0):t.length=s+1,Po(n.eventQueue_,id(e),i);for(let o=0;o<r.length;o++)nd(r[o])}}function V5(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function U5(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Gn(`Invalid query segment '${t}' in query '${n}'`)}return e}var FO=function(n,e){let t=j5(n),r=t.namespace;t.domain==="firebase.com"&&Oi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Oi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||O6();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Cm(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new tt(t.pathString)}},j5=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=V5(n.substring(d,f)));let m=U5(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let v=e.slice(0,l);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var l0=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Me(this._path)?null:rk(this._path)}get ref(){return new wc(this._repo,this._path)}get _queryIdentifier(){let e=EO(this._queryParams),t=p0(e);return t==="{}"?"default":t}get _queryObject(){return EO(this._queryParams)}isEqual(e){if(e=xe(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=ok(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+h9(this._path)}};var wc=class n extends l0{constructor(e,t){super(e,t,new qC,!1)}get parent(){let e=sk(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};s5(wc);o5(wc);var B5="FIREBASE_DATABASE_EMULATOR_HOST",d0={},$5=!1;function H5(n,e,t,r){n.repoInfo_=new Cm(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function q5(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Oi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),cn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=FO(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[B5]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=FO(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Kl(Kl.OWNER):new AC(n.name,n.options,e);C5("Invalid Firebase Database URL",o),Me(o.path)||Oi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=z5(a,n,d,new DC(n.name,t));return new h0(f,n)}function G5(n,e){let t=d0[e];(!t||t[n.key]!==n)&&Oi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),O5(n),delete t[n.key]}function z5(n,e,t,r){let i=d0[e.name];i||(i={},d0[e.name]=i);let s=i[n.toURLString()];return s&&Oi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new u0(n,$5,t,r),i[n.toURLString()]=s,s}var h0=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(R5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wc(this._repo,Qe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(G5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Oi("Cannot call "+e+" on a deleted database.")}};function qk(n=Nt(),e){let t=xt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=qi("database");r&&Gk(t,...r)}return t}function Gk(n,e,t,r={}){n=xe(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Oi("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Oi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Kl(Kl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Go(r.mockUserToken,n.app.options.projectId);s=new Kl(o)}H5(i,e,t,s)}function W5(n){N6(En),bt(new Tt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return q5(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Z(iO,sO,n),Z(iO,sO,"esm2017")}g0.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};g0.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};W5();var sd=class{constructor(e){return e}},zk="database",S0=class{constructor(){return At(zk)}};var D0=new H("angularfire2.database-instances");function K5(n,e){let t=Ot(zk,n,e);return t&&new sd(t)}function Q5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new sd(r)}}var Y5={provide:S0,deps:[[new ce,D0]]},Z5={provide:sd,useFactory:K5,deps:[[new ce,D0],ot]};function Wk(n,...e){return Z("angularfire",st.full,"rtdb"),nt([Z5,Y5,{provide:D0,useFactory:Q5(n),multi:!0,deps:[ie,Ae,Et,pt,[new ce,Ir],[new ce,xn],...e]}])}var Kk=Ve(qk,!0);var Zk="functions";var A0=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return _(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var R0="us-central1";var x0=class{constructor(e,t,r,i,s=R0,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new A0(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=R0}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function J5(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var Qk="@firebase/functions",Yk="0.11.8";var X5="auth-internal",e8="app-check-internal",t8="messaging-internal";function n8(n,e){let t=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(X5),a=r.getProvider(t8),c=r.getProvider(e8);return new x0(s,o,a,c,i,n)};bt(new Tt(Zk,t,"PUBLIC").setMultipleInstances(!0)),Z(Qk,Yk,e),Z(Qk,Yk,"esm2017")}function Jk(n=Nt(),e=R0){let r=xt(xe(n),Zk).getImmediate({identifier:e}),i=qi("functions");return i&&Xk(r,...i),r}function Xk(n,e,t){J5(xe(n),e,t)}n8(fetch.bind(self));var od=class{constructor(e){return e}},e1="functions",N0=class{constructor(){return At(e1)}};var M0=new H("angularfire2.functions-instances");function r8(n,e){let t=Ot(e1,n,e);return t&&new od(t)}function i8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new od(r)}}var s8={provide:N0,deps:[[new ce,M0]]},o8={provide:od,useFactory:r8,deps:[[new ce,M0],ot]};function t1(n,...e){return Z("angularfire",st.full,"fn"),nt([o8,s8,{provide:M0,useFactory:i8(n),multi:!0,deps:[ie,Ae,Et,pt,[new ce,Ir],[new ce,xn],...e]}])}var n1=Ve(Jk,!0);var a8="/firebase-messaging-sw.js",c8="/firebase-cloud-messaging-push-scope",c1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",u8="https://fcmregistrations.googleapis.com/v1",u1="google.c.a.c_id",l8="google.c.a.c_l",d8="google.c.a.ts",h8="google.c.a.e";var Um=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Um||{});function ki(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function f8(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var P0="fcm_token_details_db",p8=5,r1="fcm_token_object_Store";function m8(n){return _(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(P0))return null;let e=null;return(yield Kg(P0,p8,{upgrade:(r,i,s,o)=>_(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(r1))return;let c=o.objectStore(r1),l=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:ki(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ki(d.auth),p256dh:ki(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ki(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ki(d.auth),p256dh:ki(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ki(d.vapidKey)}}}}})})).close(),yield Bd(P0),yield Bd("fcm_vapid_details_db"),yield Bd("undefined"),g8(e)?e:null})}function g8(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var v8="firebase-messaging-database",_8=1,ad="firebase-messaging-store",O0=null;function l1(){return O0||(O0=Kg(v8,_8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ad)}}})),O0}function y8(n){return _(this,null,function*(){let e=d1(n),r=yield(yield l1()).transaction(ad).objectStore(ad).get(e);if(r)return r;{let i=yield m8(n.appConfig.senderId);if(i)return yield L0(n,i),i}})}function L0(n,e){return _(this,null,function*(){let t=d1(n),i=(yield l1()).transaction(ad,"readwrite");return yield i.objectStore(ad).put(e,t),yield i.done,e})}function d1({appConfig:n}){return n.appId}var w8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},wn=new Rr("messaging","Messaging",w8);function I8(n,e){return _(this,null,function*(){let t=yield U0(n),r=h1(e),i={method:"POST",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(V0(n.appConfig),i)).json()}catch(o){throw wn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw wn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw wn.create("token-subscribe-no-token");return s.token})}function E8(n,e){return _(this,null,function*(){let t=yield U0(n),r=h1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${V0(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw wn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw wn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw wn.create("token-update-no-token");return s.token})}function C8(n,e){return _(this,null,function*(){let r={method:"DELETE",headers:yield U0(n)};try{let s=yield(yield fetch(`${V0(n.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw wn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw wn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function V0({projectId:n}){return`${u8}/projects/${n}/registrations`}function U0(t){return _(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function h1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==c1&&(i.web.applicationPubKey=r),i}var T8=7*24*60*60*1e3;function b8(n){return _(this,null,function*(){let e=yield D8(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ki(e.getKey("auth")),p256dh:ki(e.getKey("p256dh"))},r=yield y8(n.firebaseDependencies);if(r){if(A8(r.subscriptionOptions,t))return Date.now()>=r.createTime+T8?S8(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield C8(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return i1(n.firebaseDependencies,t)}else return i1(n.firebaseDependencies,t)})}function S8(n,e){return _(this,null,function*(){try{let t=yield E8(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield L0(n.firebaseDependencies,r),t}catch(t){throw t}})}function i1(n,e){return _(this,null,function*(){let r={token:yield I8(n,e),createTime:Date.now(),subscriptionOptions:e};return yield L0(n,r),r.token})}function D8(n,e){return _(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:f8(e)})})}function A8(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}function s1(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return R8(e,n),x8(e,n),N8(e,n),e}function R8(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let s=e.notification.icon;s&&(n.notification.icon=s)}function x8(n,e){e.data&&(n.data=e.data)}function N8(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function M8(n){return typeof n=="object"&&!!n&&u1 in n}P8("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function P8(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function O8(n){if(!n||!n.options)throw k0("App Configuration Object");if(!n.name)throw k0("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw k0(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function k0(n){return wn.create("missing-app-config-values",{valueName:n})}var F0=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=O8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function k8(n){return _(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(a8,{scope:c8}),n.swRegistration.update().catch(()=>{})}catch(e){throw wn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function F8(n,e){return _(this,null,function*(){if(!e&&!n.swRegistration&&(yield k8(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");n.swRegistration=e}})}function L8(n,e){return _(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=c1)})}function V8(n,e){return _(this,null,function*(){if(!navigator)throw wn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw wn.create("permission-blocked");return yield L8(n,e?.vapidKey),yield F8(n,e?.serviceWorkerRegistration),b8(n)})}function U8(n,e,t){return _(this,null,function*(){let r=j8(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[u1],message_name:t[l8],message_time:t[d8],message_device_time:Math.floor(Date.now()/1e3)})})}function j8(n){switch(n){case Um.NOTIFICATION_CLICKED:return"notification_open";case Um.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function B8(n,e){return _(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Um.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(s1(t)):n.onMessageHandler.next(s1(t)));let r=t.data;M8(r)&&r[h8]==="1"&&(yield U8(n,t.messageType,r))})}var o1="@firebase/messaging",a1="0.12.12";var $8=n=>{let e=new F0(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>B8(e,t)),e},H8=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>V8(e,r)}};function q8(){bt(new Tt("messaging",$8,"PUBLIC")),bt(new Tt("messaging-internal",H8,"PRIVATE")),Z(o1,a1),Z(o1,a1,"esm2017")}function j0(){return _(this,null,function*(){try{yield Ds()}catch{return!1}return typeof window<"u"&&ri()&&cu()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function f1(n=Nt()){return j0().then(e=>{if(!e)throw wn.create("unsupported-browser")},e=>{throw wn.create("indexed-db-unsupported")}),xt(xe(n),"messaging").getImmediate()}q8();var cd=class{constructor(e){return e}},p1="messaging",B0=class{constructor(){return At(p1)}};var m1="__angularfire_symbol__messagingIsSupported",$0="__angularfire_symbol__messagingIsSupportedValue";globalThis[m1]||=j0().then(n=>globalThis[$0]=n).catch(()=>globalThis[$0]=!1);var jm={async:()=>globalThis[m1],sync:()=>{let n=globalThis[$0];if(n===void 0)throw new Error(La("Messaging"));return n}},H0=new H("angularfire2.messaging-instances");function G8(n,e){if(!jm.sync())return null;let t=Ot(p1,n,e);return t&&new cd(t)}function z8(n){return(e,t)=>{if(!jm.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new cd(r)}}var W8={provide:B0,deps:[[new ce,H0]]},K8={provide:cd,useFactory:G8,deps:[[new ce,H0],ot]};function g1(n,...e){return Z("angularfire",st.full,"fcm"),nt([K8,W8,{provide:as,useValue:jm.async,multi:!0},{provide:H0,useFactory:z8(n),multi:!0,deps:[ie,Ae,Et,pt,...e]}])}var Uue=jm.async;var v1=Ve(f1,!0);var ud=class{constructor(e){return e}},_1="performance",q0=class{constructor(){return At(_1)}};var G0=new H("angularfire2.performance-instances");function Q8(n,e,t){if(!fy(t))return null;let r=Ot(_1,n,e);return r&&new ud(r)}function Y8(n){return(e,t,r)=>{if(!fy(t))return null;let i=e.runOutsideAngular(()=>n(r));return new ud(i)}}var Z8={provide:q0,deps:[[new ce,G0]]},J8={provide:ud,useFactory:Q8,deps:[[new ce,G0],ot,_r]};function y1(n,...e){return Z("angularfire",st.full,"perf"),nt([J8,Z8,{provide:G0,useFactory:Y8(n),multi:!0,deps:[ie,_r,Ae,Et,pt,...e]}])}var w1=Ve(Gb,!0);var S1="firebasestorage.googleapis.com",X8="storageBucket",eK=2*60*1e3,tK=10*60*1e3;var Jr=class n extends In{constructor(e,t,r=0){super(z0(e),`Firebase Storage: ${t} (${z0(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return z0(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Li=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Li||{});function z0(n){return"storage/"+n}function nK(){let n="An unknown error occurred, please check the error payload for server response.";return new Jr(Li.UNKNOWN,n)}function rK(){return new Jr(Li.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iK(){return new Jr(Li.CANCELED,"User canceled the upload/download.")}function sK(n){return new Jr(Li.INVALID_URL,"Invalid URL '"+n+"'.")}function oK(n){return new Jr(Li.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function I1(n){return new Jr(Li.INVALID_ARGUMENT,n)}function D1(){return new Jr(Li.APP_DELETED,"The Firebase app was deleted.")}function aK(n){return new Jr(Li.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Fi=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw oK(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(te){te.path.charAt(te.path.length-1)==="/"&&(te.path_=te.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(te){te.path_=decodeURIComponent(te.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),w={bucket:1,path:3},N=t===S1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",L=new RegExp(`^https?://${N}/${i}/${R}`,"i"),W=[{regex:a,indices:c,postModify:s},{regex:v,indices:w,postModify:l},{regex:L,indices:{bucket:1,path:2},postModify:l}];for(let te=0;te<W.length;te++){let Ye=W[te],re=Ye.regex.exec(e);if(re){let C=re[Ye.indices.bucket],y=re[Ye.indices.path];y||(y=""),r=new n(C,y),Ye.postModify(r);break}}if(r==null)throw sK(e);return r}},W0=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function cK(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...R){l||(l=!0,e.apply(null,R))}function f(R){i=setTimeout(()=>{i=null,n(v,c())},R)}function m(){s&&clearTimeout(s)}function v(R,...L){if(l){m();return}if(R){m(),d.call(null,R,...L);return}if(c()||o){m(),d.call(null,R,...L);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,f(W)}let w=!1;function N(R){w||(w=!0,m(),!l&&(i!==null?(R||(a=2),clearTimeout(i),f(0)):R||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}function uK(n){n(!1)}function lK(n){return n!==void 0}function E1(n,e,t,r){if(r<e)throw I1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw I1(`Invalid value for '${n}'. Expected ${t} or less.`)}function dK(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var K0=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(K0||{});function hK(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var Q0=class{constructor(e,t,r,i,s,o,a,c,l,d,f,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Cc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===K0.NO_ERROR,c=s.getStatus();if(!a||hK(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===K0.ABORT;r(!1,new Cc(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Cc(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());lK(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=nK();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?D1():iK();o(c)}else{let c=rK();o(c)}};this.canceled_?t(!1,new Cc(!1,null,!0)):this.backoffId_=cK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Cc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function fK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function pK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function gK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function vK(n,e,t,r,i,s,o=!0){let a=dK(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return mK(l,e),fK(l,t),pK(l,s),gK(l,r),new Q0(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function _K(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function yK(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var nle=256*1024;var Y0=class n{constructor(e,t){this._service=e,t instanceof Fi?this._location=t:this._location=Fi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Fi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yK(this._location.path)}get storage(){return this._service}get parent(){let e=_K(this._location.path);if(e===null)return null;let t=new Fi(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw aK(e)}};function C1(n,e){let t=e?.[X8];return t==null?null:Fi.makeFromBucketSpec(t,n)}function wK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Go(i,n.app.options.projectId))}var Z0=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=S1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=eK,this._maxUploadRetryTime=tK,this._requests=new Set,i!=null?this._bucket=Fi.makeFromBucketSpec(i,this._host):this._bucket=C1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fi.makeFromBucketSpec(this._url,e):this._bucket=C1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){E1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){E1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Y0(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new W0(D1());{let o=vK(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},T1="@firebase/storage",b1="0.13.2";var A1="storage";function R1(n=Nt(),e){n=xe(n);let r=xt(n,A1).getImmediate({identifier:e}),i=qi("storage");return i&&x1(r,...i),r}function x1(n,e,t,r={}){wK(n,e,t,r)}function IK(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Z0(t,r,i,e,En)}function EK(){bt(new Tt(A1,IK,"PUBLIC").setMultipleInstances(!0)),Z(T1,b1,""),Z(T1,b1,"esm2017")}EK();var ld=class{constructor(e){return e}},N1="storage",J0=class{constructor(){return At(N1)}};var X0=new H("angularfire2.storage-instances");function CK(n,e){let t=Ot(N1,n,e);return t&&new ld(t)}function TK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ld(r)}}var bK={provide:J0,deps:[[new ce,X0]]},SK={provide:ld,useFactory:CK,deps:[[new ce,X0],ot]};function M1(n,...e){return Z("angularfire",st.full,"gcs"),nt([SK,bK,{provide:X0,useFactory:TK(n),multi:!0,deps:[ie,Ae,Et,pt,[new ce,Ir],[new ce,xn],...e]}])}var P1=Ve(R1,!0);var eT="@firebase/remote-config",O1="0.4.9";var k1="remote-config";var DK={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Pn=new Rr("remoteconfig","Remote Config",DK);function F1(n=Nt()){return n=xe(n),xt(n,k1).getImmediate()}function L1(n){let e=xe(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var tT=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return _(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function AK(n=navigator){return n.languages&&n.languages[0]||n.language}var nT=class{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return _(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:AK()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((R,L)=>{e.signal.addEventListener(()=>{let q=new Error("The operation was aborted.");q.name="AbortError",L(q)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(R){let L="fetch-client-network";throw R?.name==="AbortError"&&(L="fetch-timeout"),Pn.create(L,{originalErrorMessage:R?.message})}let m=f.status,v=f.headers.get("ETag")||void 0,w,N;if(f.status===200){let R;try{R=yield f.json()}catch(L){throw Pn.create("fetch-client-parse",{originalErrorMessage:L?.message})}w=R.entries,N=R.state}if(N==="INSTANCE_STATE_UNSPECIFIED"?m=500:N==="NO_CHANGE"?m=304:(N==="NO_TEMPLATE"||N==="EMPTY_CONFIG")&&(w={}),m!==304&&m!==200)throw Pn.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:w}})}};function RK(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xK(n){if(!(n instanceof In)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var rT=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return _(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,s){return _(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield RK(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!xK(o))throw o;let a={throttleEndTimeMillis:Date.now()+fu(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var NK=60*1e3,MK=12*60*60*1e3,iT=class{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:NK,minimumFetchIntervalMillis:MK},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Bm(n,e){let t=n.target.error||void 0;return Pn.create(e,{originalErrorMessage:t&&t?.message})}var Oo="app_namespace_store",PK="firebase_remote_config",OK=1;function kK(){return new Promise((n,e)=>{try{let t=indexedDB.open(PK,OK);t.onerror=r=>{e(Bm(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Oo,{keyPath:"compositeKey"})}}}catch(t){e(Pn.create("storage-open",{originalErrorMessage:t?.message}))}})}var sT=class{constructor(e,t,r,i=kK()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return _(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([Oo],"readonly").objectStore(Oo),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(Bm(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(Pn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,t){return _(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Oo],"readwrite").objectStore(Oo),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:t});l.onerror=d=>{s(Bm(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(Pn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return _(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([Oo],"readwrite").objectStore(Oo),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(Bm(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Pn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var oT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return _(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function FK(){bt(new Tt(k1,n,"PUBLIC").setMultipleInstances(!0)),Z(eT,O1),Z(eT,O1,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!ri())throw Pn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Pn.create("registration-project-id");if(!o)throw Pn.create("registration-api-key");if(!a)throw Pn.create("registration-app-id");t=t||"firebase";let c=new sT(a,r.name,t),l=new oT(c),d=new Nr(eT);d.logLevel=rn.ERROR;let f=new nT(i,En,t,s,o,a),m=new rT(f,c),v=new tT(m,c,l,d),w=new iT(r,v,l,c,d);return L1(w),w}}function V1(){return _(this,null,function*(){if(!ri())return!1;try{return yield Ds()}catch{return!1}})}FK();var dd=class{constructor(e){return e}},U1="remote-config",aT=class{constructor(){return At(U1)}};var cT="__angularfire_symbol__remoteConfigIsSupportedValue",j1="__angularfire_symbol__remoteConfigIsSupported";globalThis[j1]||=V1().then(n=>globalThis[cT]=n).catch(()=>globalThis[cT]=!1);var $m={async:()=>globalThis[j1],sync:()=>{let n=globalThis[cT];if(n===void 0)throw new Error(La("RemoteConfig"));return n}},uT=new H("angularfire2.remote-config-instances");function LK(n,e){if(!$m.sync())return null;let t=Ot(U1,n,e);return t&&new dd(t)}function VK(n){return(e,t)=>{if(!$m.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new dd(r)}}var UK={provide:aT,deps:[[new ce,uT]]},jK={provide:dd,useFactory:LK,deps:[[new ce,uT],ot]};function B1(n,...e){return Z("angularfire",st.full,"rc"),nt([jK,UK,{provide:as,useValue:$m.async,multi:!0},{provide:uT,useFactory:VK(n),multi:!0,deps:[ie,Ae,Et,pt,...e]}])}var Xle=$m.async;var $1=Ve(F1,!0);var H1="@firebase/vertexai-preview",q1="0.0.4";var G1="vertexAI",z1="us-central1";var lT=class{constructor(e,t,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=t?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||z1}_delete(){return Promise.resolve()}};var dT=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(dT||{});var sde=[dT.RECITATION,dT.SAFETY];function W1(n=Nt(),e){return n=xe(n),xt(n,G1).getImmediate({identifier:e?.location||z1})}function BK(){bt(new Tt(G1,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new lT(t,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),Z(H1,q1),Z(H1,q1,"esm2017")}BK();var hd=class{constructor(e){return e}},K1="vertexai",hT=class{constructor(){return At(K1)}};var fT=new H("angularfire2.vertexai-instances");function $K(n,e){let t=Ot(K1,n,e);return t&&new hd(t)}function HK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new hd(r)}}var qK={provide:hT,deps:[[new ce,fT]]},GK={provide:hd,useFactory:$K,deps:[[new ce,fT],ot]};function Q1(n,...e){return Z("angularfire",st.full,"vertexai"),nt([GK,qK,{provide:fT,useFactory:HK(n),multi:!0,deps:[ie,Ae,Et,pt,[new ce,xn],...e]}])}var Y1=Ve(W1,!0);var Z1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var J1={providers:[AR({eventCoalescing:!0}),kx(Fx),Lx(()=>Vx(Z1.firebaseConfig)),xN(()=>MN()),XN(()=>ZN()),JN,nI,eO(()=>tO()),Wk(()=>Kk()),t1(()=>n1()),g1(()=>v1()),y1(()=>w1()),M1(()=>P1()),B1(()=>$1()),Q1(()=>Y1())]};var On=class n{destroyRef=M(is);firestore=M(So);destroyed=new ht;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return _(this,null,function*(){let e=yield pC(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>t&&(t=s)}),(t+1).toString()})}createData(e,t){let r=fC(this.collectionRef,e);return mC(r,t)}updateData(e,t){return mC(fC(this.collectionRef,e),t,{merge:!0})}getDataById(e){return _(this,null,function*(){let t=nO(this.collectionRef,rO("id","==",e)),r=yield pC(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function vt(n){n||(lf(vt),n=M(is));let e=new de(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Ht(e))}function De(n,e){!e?.injector&&lf(De);let t=e?.injector??M(Ae),r=new wu(1),i=wi(()=>{let s;try{s=n()}catch(o){nr(()=>r.error(o));return}nr(()=>r.next(s))},{injector:t,manualCleanup:!0});return t.get(is).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var dt=class n extends On{collectionPath="/race-configs";collectionRef=ar(this.firestore,this.collectionPath);activeRaceConfig=X(void 0);constructor(){super(),this.getAll().pipe(vt()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.activeRaceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.activeRaceConfig();return t?(t.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.activeRaceConfig();return t?(t.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.activeRaceConfig();return t?(t.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return or(this.collectionRef).pipe(Ht(this.destroyed),Q(e=>e.filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var zK=Math.pow(10,8)*24*60*60*1e3,ihe=-zK;var X1=864e5,Tc=6e4,Hm=36e5,eF=1e3;var WK=3600;var tF=WK*24,she=tF*7,KK=tF*365.2425,QK=KK/12,ohe=QK*3,pT=Symbol.for("constructDateFrom");function zn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&pT in n?n[pT](e):n instanceof Date?new n.constructor(e):new Date(e)}function je(n,e){return zn(e||n,n)}function nF(n,e,t){let r=je(n,t?.in);return isNaN(e)?zn(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function rF(n,e,t){let r=je(n,t?.in);if(isNaN(e))return zn(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),s=zn(t?.in||n,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function bc(n,e,t){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=je(n,t?.in),f=i||r?rF(d,i+r*12):d,m=o||s?nF(f,o+s*7):f,v=c+a*60,N=(l+v*60)*1e3;return zn(t?.in||n,+m+N)}function qm(n,e,t){return zn(t?.in||n,+je(n)+e)}function Sc(n,e,t){return qm(n,e*Hm,t)}function mT(n){let e=je(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function dn(n,...e){let t=zn.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function gT(n,e){let t=je(n,e?.in);return t.setHours(0,0,0,0),t}function iF(n,e,t){let[r,i]=dn(t?.in,n,e),s=gT(r),o=gT(i),a=+s-mT(s),c=+o-mT(o);return Math.round((a-c)/X1)}function ko(n,e,t){let r=je(n,t?.in);return r.setTime(r.getTime()+e*Tc),r}function sF(n,e,t){return qm(n,e*1e3,t)}function Fo(n,e){let t=+je(n)-+je(e);return t<0?-1:t>0?1:t}function oF(n,e,t){let[r,i]=dn(t?.in,n,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function aF(n,e,t){let[r,i]=dn(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function uF(n,e,t){let[r,i]=dn(t?.in,n,e),s=cF(r,i),o=Math.abs(iF(r,i));r.setDate(r.getDate()-s*o);let a=+(cF(r,i)===-s),c=s*(o-a);return c===0?0:c}function cF(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Dc(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function lF(n,e,t){let[r,i]=dn(t?.in,n,e),s=(+r-+i)/Hm;return Dc(t?.roundingMethod)(s)}function Vi(n,e){return+je(n)-+je(e)}function Gm(n,e,t){let r=Vi(n,e)/Tc;return Dc(t?.roundingMethod)(r)}function dF(n,e){let t=je(n,e?.in);return t.setHours(23,59,59,999),t}function hF(n,e){let t=je(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function fF(n,e){let t=je(n,e?.in);return+dF(t,e)==+hF(t,e)}function pF(n,e,t){let[r,i,s]=dn(t?.in,n,n,e),o=Fo(i,s),a=Math.abs(oF(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=Fo(i,s)===-o;fF(r)&&a===1&&Fo(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function mF(n,e,t){let r=Vi(n,e)/1e3;return Dc(t?.roundingMethod)(r)}function gF(n,e,t){let[r,i]=dn(t?.in,n,e),s=Fo(r,i),o=Math.abs(aF(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=Fo(r,i)===-s,c=s*(o-+a);return c===0?0:c}function vF(n,e){let[t,r]=dn(n,e.start,e.end);return{start:t,end:r}}function vT(n,e){let{start:t,end:r}=vF(e?.in,n),i={},s=gF(r,t);s&&(i.years=s);let o=bc(t,{years:i.years}),a=pF(r,o);a&&(i.months=a);let c=bc(o,{months:i.months}),l=uF(r,c);l&&(i.days=l);let d=bc(c,{days:i.days}),f=lF(r,d);f&&(i.hours=f);let m=bc(d,{hours:i.hours}),v=Gm(r,m);v&&(i.minutes=v);let w=bc(m,{minutes:i.minutes}),N=mF(r,w);return N&&(i.seconds=N),i}function _F(n,e){return+je(n)>+je(e)}function yF(n,e){return+je(n)<+je(e)}function wF(n){return Math.trunc(n*Tc)}function IF(n){return n*eF}function EF(n,e,t){return ko(n,-e,t)}var Vt=class n extends On{collectionPath="/races";collectionRef=ar(this.firestore,this.collectionPath);raceConfigService=M(dt);activeRace=X(void 0);endRaceDate=X(void 0);constructor(){super(),Je({races:this.getAll(),raceConfig:De(this.raceConfigService.activeRaceConfig)}).pipe(vt(),Q(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e,t),i=r?Sc(r.start.toDate(),t.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return _(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}getAll(){return or(this.collectionRef).pipe(Ht(this.destroyed),Q(e=>e.filter(t=>!t.deleted)))}getActiveRace(e,t){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(Sc(s.start.toDate(),t.durationHour)>=r)return s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function pd(n,e){if(!n||!e)return"--:--:--";let t=vT({end:e,start:n});return zm(t)}function Lo(n){if(!n)return"--:--:--";let e=vT({end:n,start:new Date});return zm(e)}function Wn(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return zm(t)}function CF(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return zm(t)}function TF(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return YK(r,t)}function YK(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"00:00:000":[fd(n.minutes),fd(n.seconds),ZK(e)].join(":")}function zm(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"00:00:00":[fd(n.hours),fd(n.minutes),fd(n.seconds)].join(":")}function fd(n){return n?n<10?`0${n}`:`${n}`:"00"}function ZK(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var kn=class n extends On{collectionPath="/pits";collectionRef=ar(this.firestore,this.collectionPath);raceService=M(Vt);raceConfigService=M(dt);activePit=X(void 0);activePitRemainingMilliseconds=X(0);lastRefuelPit=X(void 0);pits=X([]);completedDriverChanges=X(0);lastDriverChangePit=X(void 0);remainingDriverChanges=X(0);constructor(){super(),Je({pits:this.getRacePits(),activeRaceConfig:De(this.raceConfigService.activeRaceConfig),ping:Yt(1e3)}).pipe(vt()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return Je({pits:or(this.collectionRef),activeRace:De(this.raceService.activeRace)}).pipe(Ht(this.destroyed),Q(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return sF(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let t=e.filter(r=>r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of t)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.filter(t=>t.exitTime).reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ac=class n{raceService=M(Vt);pitService=M(kn);raceConfigService=M(dt);optimizedStint=X(void 0);constructor(){Je({activeRace:De(this.raceService.activeRace),endRaceDate:De(this.raceService.endRaceDate),activeRaceConfig:De(this.raceConfigService.activeRaceConfig),remainingDriverChanges:De(this.pitService.remainingDriverChanges),lastDriverChangePit:De(this.pitService.lastDriverChangePit),ping:Yt(1e3)}).pipe(vt()).subscribe(({activeRace:e,endRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,lastDriverChangePit:s})=>{e&&t&&r?this.optimizedStint.set(this.calculateOptimizedStint(e,t,r,i,s)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,s){let o=new Date;if(o>=t)return;let a=IF(r.minPitSeconds*i),c=Vi(t,o)-a,l=s?s.entryTime.toDate():e.start.toDate(),f=(Vi(t,l)-a)/(i+1),m=c/i;return{avgStintMillisecondsTime:f,laps:Math.floor(f/r.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:m,lapsIfDriverChangeNow:Math.floor(m/r.referenceLapTimeMillisecond)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fn=class n extends On{collectionPath="/stints";collectionRef=ar(this.firestore,this.collectionPath);raceService=M(Vt);raceConfigService=M(dt);stintOptimizerService=M(Ac);activeRace=this.raceService.activeRace;stints=X([]);activeStint=X(void 0);activeStintTimeOnTrack=X(0);activeStintLaps=X(0);activeStintRemainingTimeOnTrack=X(0);activeStintRemainingLaps=X(0);activeStintGainedTimeOnTrack=X(0);activeStintGainedLaps=X(0);constructor(){super(),Je({stints:this.getRaceStints(),activeRaceConfig:De(this.raceConfigService.activeRaceConfig),optimizedStint:De(this.stintOptimizerService.optimizedStint),ping:Yt(1e3)}).pipe(vt()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return _(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return Je({stints:or(this.collectionRef),activeRace:De(this.activeRace)}).pipe(Ht(this.destroyed),Q(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var Rc=class n{raceService=M(Vt);stintService=M(Fn);pitService=M(kn);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;startRace(e){return _(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}pitIn(e,t,r){return _(this,null,function*(){let i=this.activeRace(),s=this.activeStint();if(i&&s){let o=this.createPit(s.driverId,e,i.id,t,r),a=yield this.pitService.create(o);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return _(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Rt.now(),i=yield this.startStint(e.id,t.exitDriverId,r);yield this.closeActivePit(i.startDate)}})}startStint(e,t,r){return _(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return _(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return _(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:Rt.now(),deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,raceId:e,startDate:r}}createPit(e,t,r,i,s){return{id:"1",entryDriverId:e,entryTime:Rt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:s,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var OF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Se(mi),Se(jr))}}static{this.\u0275dir=ft({type:n})}}return n})(),Id=(()=>{class n extends OF{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,features:[Rn]})}}return n})(),Oc=new H(""),JK={provide:Oc,useExisting:Xn(()=>wT),multi:!0},wT=(()=>{class n extends Id{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&we("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[$r([JK]),Rn]})}}return n})(),XK={provide:Oc,useExisting:Xn(()=>eg),multi:!0};function e7(){let n=Ci()?Ci().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var t7=new H(""),eg=(()=>{class n extends OF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!e7())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(mi),Se(jr),Se(t7,8))}}static{this.\u0275dir=ft({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&we("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[$r([XK]),Rn]})}}return n})();function _T(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var tg=new H(""),kF=new H("");function n7(n){return e=>{if(_T(e.value)||_T(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function r7(n){return _T(n.value)?{required:!0}:null}function bF(n){return null}function FF(n){return n!=null}function LF(n){return Zs(n)?ct(n):n}function VF(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function UF(n,e){return e.map(t=>t(n))}function i7(n){return!n.validate}function jF(n){return n.map(e=>i7(e)?e:t=>e.validate(t))}function s7(n){if(!n)return null;let e=n.filter(FF);return e.length==0?null:function(t){return VF(UF(t,e))}}function IT(n){return n!=null?s7(jF(n)):null}function o7(n){if(!n)return null;let e=n.filter(FF);return e.length==0?null:function(t){let r=UF(t,e).map(LF);return hv(r).pipe(Q(VF))}}function ET(n){return n!=null?o7(jF(n)):null}function SF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function a7(n){return n._rawValidators}function c7(n){return n._rawAsyncValidators}function yT(n){return n?Array.isArray(n)?n:[n]:[]}function Km(n,e){return Array.isArray(n)?n.includes(e):n===e}function DF(n,e){let t=yT(e);return yT(n).forEach(i=>{Km(t,i)||t.push(i)}),t}function AF(n,e){return yT(e).filter(t=>!Km(n,t))}var Qm=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=IT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ET(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Mc=class extends Qm{get formDirective(){return null}get path(){return null}},wd=class extends Qm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ym=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},u7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wme=Te(j({},u7),{"[class.ng-submitted]":"isSubmitted"}),kc=(()=>{class n extends Ym{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(wd,2))}}static{this.\u0275dir=ft({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ef("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Rn]})}}return n})(),Fc=(()=>{class n extends Ym{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Se(Mc,10))}}static{this.\u0275dir=ft({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ef("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Rn]})}}return n})();var md="VALID",Wm="INVALID",xc="PENDING",gd="DISABLED",Pc=class{},Zm=class extends Pc{constructor(e,t){super(),this.value=e,this.source=t}},_d=class extends Pc{constructor(e,t){super(),this.pristine=e,this.source=t}},yd=class extends Pc{constructor(e,t){super(),this.touched=e,this.source=t}},Nc=class extends Pc{constructor(e,t){super(),this.status=e,this.source=t}};function BF(n){return(ng(n)?n.validators:n)||null}function l7(n){return Array.isArray(n)?IT(n):n||null}function $F(n,e){return(ng(e)?e.asyncValidators:n)||null}function d7(n){return Array.isArray(n)?ET(n):n||null}function ng(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function h7(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Y(1e3,"");if(!r[t])throw new Y(1001,"")}function f7(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Y(1002,"")})}var Jm=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Fe(()=>this.statusReactive()),this.statusReactive=X(void 0),this._pristine=Fe(()=>this.pristineReactive()),this.pristineReactive=X(!0),this._touched=Fe(()=>this.touchedReactive()),this.touchedReactive=X(!1),this._events=new ht,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nr(this.statusReactive)}set status(e){nr(()=>this.statusReactive.set(e))}get valid(){return this.status===md}get invalid(){return this.status===Wm}get pending(){return this.status==xc}get disabled(){return this.status===gd}get enabled(){return this.status!==gd}get pristine(){return nr(this.pristineReactive)}set pristine(e){nr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return nr(this.touchedReactive)}set touched(e){nr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(DF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(DF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(AF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(AF(e,this._rawAsyncValidators))}hasValidator(e){return Km(this._rawValidators,e)}hasAsyncValidator(e){return Km(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Te(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new yd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new yd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Te(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new _d(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new _d(!0,r))}markAsPending(e={}){this.status=xc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Nc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Te(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=gd,this.errors=null,this._forEachChild(i=>{i.disable(Te(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zm(this.value,r)),this._events.next(new Nc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Te(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=md,this._forEachChild(r=>{r.enable(Te(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Te(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===md||this.status===xc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Zm(this.value,t)),this._events.next(new Nc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Te(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?gd:md}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=xc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=LF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Nc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Mt,this.statusChanges=new Mt}_calculateStatus(){return this._allControlsDisabled()?gd:this.errors?Wm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xc)?xc:this._anyControlsHaveStatus(Wm)?Wm:md}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new _d(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new yd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ng(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=l7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=d7(this._rawAsyncValidators)}},Xm=class extends Jm{constructor(e,t,r){super(BF(t),$F(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){f7(this,!0,e),Object.keys(e).forEach(r=>{h7(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var CT=new H("CallSetDisabledState",{providedIn:"root",factory:()=>TT}),TT="always";function p7(n,e){return[...e.path,n]}function HF(n,e,t=TT){qF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),g7(n,e),_7(n,e),v7(n,e),m7(n,e)}function RF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function m7(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function qF(n,e){let t=a7(n);e.validator!==null?n.setValidators(SF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=c7(n);e.asyncValidator!==null?n.setAsyncValidators(SF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();RF(e._rawValidators,i),RF(e._rawAsyncValidators,i)}function g7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&GF(n,e)})}function v7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&GF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function GF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _7(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function y7(n,e){n==null,qF(n,e)}function w7(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function I7(n){return Object.getPrototypeOf(n.constructor)===Id}function E7(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function C7(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===eg?t=s:I7(s)?r=s:i=s}),i||r||t||null}var T7={provide:Mc,useExisting:Xn(()=>Vo)},vd=Promise.resolve(),Vo=(()=>{class n extends Mc{get submitted(){return nr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Fe(()=>this.submittedReactive()),this.submittedReactive=X(!1),this._directives=new Set,this.ngSubmit=new Mt,this.form=new Xm({},IT(t),ET(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){vd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),HF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){vd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){vd.then(()=>{let r=this._findContainer(t.path),i=new Xm({});y7(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){vd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){vd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),E7(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Se(tg,10),Se(kF,10),Se(CT,8))}}static{this.\u0275dir=ft({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&we("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[$r([T7]),Rn]})}}return n})();function xF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function NF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var b7=class extends Jm{constructor(e=null,t,r){super(BF(t),$F(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ng(t)&&(t.nonNullable||t.initialValueIsDefault)&&(NF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){NF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var S7={provide:wd,useExisting:Xn(()=>Uo)},MF=Promise.resolve(),Uo=(()=>{class n extends wd{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new b7,this._registered=!1,this.name="",this.update=new Mt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=C7(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),w7(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){HF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){MF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ju(r);MF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?p7(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Se(Mc,9),Se(tg,10),Se(kF,10),Se(Oc,10),Se(cs,8),Se(CT,8))}}static{this.\u0275dir=ft({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[$r([S7]),Rn,pi]})}}return n})(),Lc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ft({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),D7={provide:Oc,useExisting:Xn(()=>bT),multi:!0},bT=(()=>{class n extends Id{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&we("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[$r([D7]),Rn]})}}return n})();var A7={provide:Oc,useExisting:Xn(()=>Vc),multi:!0};function zF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function R7(n){return n.split(":")[0]}var Vc=(()=>{class n extends Id{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=zF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=R7(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&we("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[$r([A7]),Rn]})}}return n})(),rg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(zF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Se(jr),Se(mi),Se(Vc,9))}}static{this.\u0275dir=ft({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),x7={provide:Oc,useExisting:Xn(()=>WF),multi:!0};function PF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function N7(n){return n.split(":")[0]}var WF=(()=>{class n extends Id{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=N7(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&we("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[$r([x7]),Rn]})}}return n})(),ig=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(PF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(PF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Se(jr),Se(mi),Se(WF,9))}}static{this.\u0275dir=ft({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function M7(n){return typeof n=="number"?n:parseFloat(n)}var KF=(()=>{class n{constructor(){this._validator=bF}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):bF,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ft({type:n,features:[pi]})}}return n})();var P7={provide:tg,useExisting:Xn(()=>ST),multi:!0},ST=(()=>{class n extends KF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>M7(t),this.createValidator=t=>n7(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Uu("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[$r([P7]),Rn]})}}return n})(),O7={provide:tg,useExisting:Xn(()=>DT),multi:!0};var DT=(()=>{class n extends KF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ju,this.createValidator=t=>r7}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=vr(n)))(i||n)}})()}static{this.\u0275dir=ft({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Uu("required",i._enabled?"":null)},inputs:{required:"required"},features:[$r([O7]),Rn]})}}return n})();var k7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ws({type:n})}static{this.\u0275inj=zs({})}}return n})();var Uc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:CT,useValue:t.callSetDisabledState??TT}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Ws({type:n})}static{this.\u0275inj=zs({imports:[k7]})}}return n})();var sg=class n extends On{collectionPath="/laps";collectionRef=ar(this.firestore,this.collectionPath);raceService=M(Vt);laps=X([]);constructor(){super(),Je({laps:this.getRaceLaps(),activeRace:De(this.raceService.activeRace)}).pipe(vt()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return Je({laps:or(this.collectionRef),activeRace:De(this.raceService.activeRace)}).pipe(Ht(this.destroyed),Q(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xr=class n extends On{collectionPath="/drivers";collectionRef=ar(this.firestore,this.collectionPath);lapService=M(sg);stintService=M(Fn);raceConfigService=M(dt);drivers=X([]);driversReferenceLapTimeMap=X(new Map);driversTimeOnTrackMap=X(new Map);driversTimeOnTrackWarningMap=X(new Map);driversStintCountMap=X(new Map);driverWithLessTimeOnTrack=X(void 0);driversTimeOnTrackWarningCount=Fe(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),Je({drivers:this.getAll(),laps:De(this.lapService.laps),stints:De(this.stintService.stints),activeRaceConfig:De(this.raceConfigService.activeRaceConfig),ping:Yt(1e3)}).pipe(vt()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithLessTimeOnTrack.set(this.getDriverWithLessTimeOnTrack(r,e))})}getAll(){return or(this.collectionRef).pipe(Ht(this.destroyed),Q(e=>e.filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(s=>{r.set(s.id,0)});let i=e.reduce((s,o)=>(s[o.driverId]||(s[o.driverId]=[]),s[o.driverId].push(o.millisecondsTime),s),{});for(let s in i){let o=i[s],a=o.reduce((c,l)=>c+l,0)/o.length;r.set(s,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let s;i.endDate?s=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():s=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+s):r.set(i.driverId,s)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=t.minDriverOnTrackHour*60*60*1e3,s=t.maxDriverOnTrackHour*60*60*1e3,o=10*60*1e3;e.forEach((a,c)=>{let l=a<i,d=s-a<=o;r.set(c,l||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithLessTimeOnTrack(e,t){if(t.length===0)return;let r=this.createDriverTrackTimeMap(e,t),i=e.find(c=>c.endDate===null)?.driverId,s=new Map(t.map(c=>[c.id,c])),o=1/0,a;return r.forEach((c,l)=>{l!==i&&c<o&&(o=c,a=s.get(l))}),a}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function F7(n,e){if(n&1&&(D(0,"option",7),P(1),A()),n&2){let t=e.$implicit;ue("value",t.id),k(),K(" ",t.raceName," ")}}function L7(n,e){if(n&1){let t=Ys();D(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),P(4,"Start driver"),A(),D(5,"select",4),vi("ngModelChange",function(i){qt(t);let s=J();return os(s.selectedDriver,i)||(s.selectedDriver=i),Gt(i)}),we("change",function(){qt(t);let i=J();return Gt(i.updateDriverId())}),pe(6,F7,2,2,"option",5),A()()(),D(7,"button",6),we("click",function(){qt(t);let i=J();return Gt(i.startRace())}),P(8," Start race "),A()()}if(n&2){let t=J();k(5),gi("ngModel",t.selectedDriver),k(),ue("ngForOf",t.drivers())}}function V7(n,e){if(n&1&&(D(0,"div",1),P(1),A()),n&2){let t=J();k(),K(" ",t.endRaceCountdown," ")}}var og=class n{raceService=M(Vt);raceConfigService=M(dt);raceManagerService=M(Rc);driverService=M(Xr);drivers=this.driverService.drivers;endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";selectedDriver="1";constructor(){Je({endRaceDate:De(this.endRaceDate),ping:Yt(1e3)}).pipe(vt()).subscribe(e=>{this.endRaceCountdown=Lo(e.endRaceDate)}),wi(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-race"]],standalone:!0,features:[Ke],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[3,"value"]],template:function(t,r){t&1&&pe(0,L7,9,2,"div",0)(1,V7,2,1,"div",1),t&2&&Ce(r.endRaceDate()?1:0)},dependencies:[Uc,Lc,rg,ig,Vc,kc,Fc,Uo,Vo,ls]})};var jc=class n{raceService=M(Vt);raceConfigService=M(dt);pitService=M(kn);openingTime=X(void 0);closingTime=X(void 0);tyreChangeWindowOpen=X(!1);remainingTyreChange=X(0);constructor(){Je({pits:De(this.pitService.pits),activeRace:De(this.raceService.activeRace),raceConfig:De(this.raceConfigService.activeRaceConfig),ping:Yt(1e3)}).pipe(vt()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(Sc(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(Sc(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var U7=n=>({"mb-2":n}),j7=n=>({"animate-bounce":n});function B7(n,e){if(n&1&&(D(0,"div",4),P(1),A()),n&2){let t=J();k(),K(" Remaining: ",t.remainingTyreChange()," ")}}function $7(n,e){n&1&&(D(0,"div",5),P(1," Completed! "),A())}function H7(n,e){if(n&1&&(D(0,"div",6),P(1," Window open "),A()),n&2){let t=J();ue("ngClass",ut(1,j7,t.remainingTyreChange()>0))}}function q7(n,e){n&1&&(D(0,"div",7),P(1," Window closed "),A())}function G7(n,e){if(n&1&&(P(0),_i(1,"date")),n&2){let t=J(2);K(" ",yi(1,1,t.openingTime(),"HH:mm:ss")," ")}}function z7(n,e){n&1&&P(0," --:--:-- ")}function W7(n,e){if(n&1&&(P(0),_i(1,"date")),n&2){let t=J(2);K(" ",yi(1,1,t.closingTime(),"HH:mm:ss")," ")}}function K7(n,e){n&1&&P(0," --:--:-- ")}function Q7(n,e){if(n&1&&(D(0,"div",8)(1,"div")(2,"div",9),P(3,"Opening time"),A(),D(4,"div",10),pe(5,G7,2,4)(6,z7,1,0),A()(),D(7,"div")(8,"div",11),P(9,"Opening in"),A(),D(10,"div",12),P(11),A()()(),ve(12,"hr",13),D(13,"div",14)(14,"div")(15,"div",9),P(16,"Closing time"),A(),D(17,"div",10),pe(18,W7,2,4)(19,K7,1,0),A()(),D(20,"div")(21,"div",11),P(22,"Closing in"),A(),D(23,"div",12),P(24),A()()()),n&2){let t=J();k(5),Ce(t.openingTime()?5:6),k(6),K(" ",t.countdownOpeningTime()," "),k(7),Ce(t.closingTime()?18:19),k(6),K(" ",t.countdownClosingTime()," ")}}var ag=class n{tyreService=M(jc);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Fe(()=>Lo(this.tyreService.openingTime()));countdownClosingTime=Fe(()=>Lo(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-tyre-change-window"]],standalone:!0,features:[Ke],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F6DE} \u{1F504} Tyre change"),A(),D(4,"div",3),pe(5,B7,2,1,"div",4)(6,$7,2,0,"div",5)(7,H7,2,3,"div",6)(8,q7,2,0,"div",7),A()(),pe(9,Q7,25,4),A()),t&2&&(k(),ue("ngClass",ut(4,U7,r.isOpen)),k(4),Ce(r.remainingTyreChange()>0?5:6),k(2),Ce(r.tyreChangeWindowOpen()?7:8),k(2),Ce(r.isOpen?9:-1))},dependencies:[ba,It]})};var cg=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[pi,Ke],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),P(4),A()()(),ve(5,"div",4),A()),t&2&&(k(),ue("ngClass",r.batteryBorderColor),k(),If("width",r.charge,"%"),ue("ngClass",r.batteryColor),k(2),Br(r.charge),k(),ue("ngClass",r.batteryBorderColor))},dependencies:[It],changeDetection:0})};var ug=class n{raceService=M(Vt);pitService=M(kn);raceConfigService=M(dt);lastRefuelTime=X(void 0);emptyFuelTime=X(void 0);remainingFuelPercentage=X(100);remainingFuelLap=X(0);constructor(){Je({lastRefuelPit:De(this.pitService.lastRefuelPit),activeRace:De(this.raceService.activeRace),raceConfig:De(this.raceConfigService.activeRaceConfig),ping:Yt(1e3)}).pipe(vt()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e&&e.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return ko(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=Gm(e,new Date)/t.fuelDurationMinute*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=Vi(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=wF(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var Y7=n=>({"mb-2":n}),Z7=n=>({"animate-bounce":n});function J7(n,e){if(n&1&&(P(0),_i(1,"date")),n&2){let t=J(2);K(" ",yi(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function X7(n,e){n&1&&P(0," --:--:-- ")}function eQ(n,e){if(n&1&&(P(0),_i(1,"date")),n&2){let t=J(2);K(" ",yi(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function tQ(n,e){n&1&&P(0," --:--:-- ")}function nQ(n,e){if(n&1){let t=Ys();D(0,"div",7)(1,"div")(2,"div",8),P(3,"Last refuel time"),A(),D(4,"div",9),pe(5,J7,2,4)(6,X7,1,0),A()(),D(7,"div")(8,"div",10),P(9,"Since last refuel"),A(),D(10,"div",11),P(11),A()()(),ve(12,"hr",12),D(13,"div",7)(14,"div")(15,"div",8),P(16,"Empty time"),A(),D(17,"div",9),pe(18,eQ,2,4)(19,tQ,1,0),A()(),D(20,"div")(21,"div",10),P(22,"Empty in"),A(),D(23,"div",11),P(24),A()()(),ve(25,"hr",12),D(26,"div",13)(27,"div")(28,"div",8),P(29,"Remaining laps"),A(),D(30,"div",9),P(31),A()(),D(32,"div")(33,"div",10),P(34,"Fuel duration (min):"),A(),D(35,"div",14)(36,"button",15),we("click",function(){qt(t);let i=J();return Gt(i.increaseFuelDuration())}),P(37,"+"),A(),D(38,"form",16),we("ngSubmit",function(){qt(t);let i=J();return Gt(i.onSubmit())}),D(39,"input",17),vi("ngModelChange",function(i){qt(t);let s=J();return os(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),Gt(i)}),A()(),D(40,"button",18),we("click",function(){qt(t);let i=J();return Gt(i.decreaseFuelDuration())}),P(41,"-"),A()()()()}if(n&2){let t=J();k(5),Ce(t.lastRefuelTime()?5:6),k(6),K(" ",t.sinceLastRefuel()," "),k(7),Ce(t.emptyFuelTime()?18:19),k(6),K(" ",t.emptyFuelCountdown()," "),k(7),K(" ",t.remainingFuelLap()," "),k(8),gi("ngModel",t.fuelDurationMinute)}}var lg=class n{raceConfigService=M(dt);fuelService=M(ug);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Fe(()=>Lo(this.emptyFuelTime()));sinceLastRefuel=Fe(()=>pd(this.lastRefuelTime(),new Date));warning=Fe(()=>this.remainingFuelPercentage()<=20);remainingColor=Fe(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){wi(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-fuel"]],standalone:!0,features:[Ke],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u26FD\uFE0F Fuel"),A(),D(4,"div",3)(5,"div",4),P(6),A(),D(7,"div",5),P(8),A(),ve(9,"app-battery",6),A()(),pe(10,nQ,42,6),A()),t&2&&(k(),ue("ngClass",ut(8,Y7,r.isOpen)),k(3),ue("ngClass",ut(10,Z7,r.warning())),k(),ue("ngClass",r.remainingColor()),k(),K(" Empty: ",r.emptyFuelCountdown()," "),k(),ue("ngClass",r.remainingColor()),k(),K(" Laps: ",r.remainingFuelLap()," "),k(),ue("charge",r.remainingFuelPercentage()),k(),Ce(r.isOpen?10:-1))},dependencies:[It,ba,cg,Uc,Lc,eg,bT,kc,Fc,DT,ST,Uo,Vo]})};var rQ=n=>({"mb-2":n});function iQ(n,e){if(n&1&&(D(0,"div",6)(1,"div")(2,"div",7),P(3,"Optimized AVG time"),A(),D(4,"div",8),P(5),A()(),D(6,"div")(7,"div",9),P(8,"Laps"),A(),D(9,"div",10),P(10),A()()(),ve(11,"hr",11),D(12,"div",12)(13,"div")(14,"div",7),P(15," Optimized AVG time "),D(16,"strong"),P(17,"if driver change now"),A()(),D(18,"div",8),P(19),A()(),D(20,"div")(21,"div",9),P(22,"Laps"),A(),D(23,"div",10),P(24),A()()()),n&2){let t=J();k(5),K(" ",t.AVGStintTime()," "),k(5),K(" ",t.laps()," "),k(9),K(" ",t.AVGStintTimeIfDriverChangeNow()," "),k(5),K(" ",t.lapsIfDriverChangeNow()," ")}}var dg=class n{stintOptimizerService=M(Ac);AVGStintTime=Fe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Wn(e.avgStintMillisecondsTime):"--:--:--"});laps=Fe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Fe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Wn(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Fe(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-stint-optimizer"]],standalone:!0,features:[Ke],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F9E0} Stint optimizer"),A(),D(4,"div",3)(5,"div",4),P(6),A(),D(7,"div",5),P(8),A()()(),pe(9,iQ,25,4),A()),t&2&&(k(),ue("ngClass",ut(4,rQ,r.isOpen)),k(5),K(" Optimum: ",r.AVGStintTime()," "),k(2),K(" Laps: ",r.laps()," "),k(),Ce(r.isOpen?9:-1))},dependencies:[It]})};var sQ=n=>({"mb-2":n}),oQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),aQ=n=>({"bg-yellow-500 text-white":n});function cQ(n,e){if(n&1&&(D(0,"div",4),P(1),A()),n&2){let t=J();k(),K(" Time on track warning: ",t.driversTimeOnTrackWarningCount()," ")}}function uQ(n,e){n&1&&(D(0,"div",5),P(1," Completed! "),A())}function lQ(n,e){if(n&1&&(D(0,"tr",16)(1,"td",17),P(2),A(),D(3,"td",17),P(4),A(),D(5,"td",18),P(6),A(),D(7,"td",19),P(8),A(),D(9,"td",20)(10,"div",21),P(11),A()()()),n&2){let t=e.$implicit,r=J(2);ue("ngClass",Cf(7,oQ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),k(2),Br(t.id),k(2),Br(t.raceName),k(2),K("",r.getDriverReferenceLapTime(t.id)," "),k(2),K(" ",r.getDriverStintCount(t.id)," "),k(2),ue("ngClass",ut(10,aQ,r.getDriverTimeOnTrackWarning(t.id))),k(),K(" ",r.getDriverTimeOnTrack(t.id)," ")}}function dQ(n,e){if(n&1&&(D(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),ve(4,"th",9),D(5,"th",9),P(6," Name "),A(),D(7,"th",10),P(8," Reference lap "),A(),D(9,"th",11),P(10," Stint "),A(),D(11,"th",12),P(12," On track "),A()()()(),D(13,"div",13)(14,"table",14)(15,"tbody"),pe(16,lQ,12,12,"tr",15),A()()()()),n&2){let t=J();k(16),ue("ngForOf",t.drivers())}}var hg=class n{driverService=M(Xr);stintService=M(Fn);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=Fe(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverReferenceLapTime(e){return TF(this.driverService.driversReferenceLapTimeMap().get(e))}getDriverTimeOnTrack(e){return Wn(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)||0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-driver"]],standalone:!0,features:[Ke],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","3",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],["colspan","3",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F417} Driver"),A(),D(4,"div",3),pe(5,cQ,2,1,"div",4)(6,uQ,2,0,"div",5),A()(),pe(7,dQ,17,1,"div",6),A()),t&2&&(k(),ue("ngClass",ut(3,sQ,r.isOpen)),k(4),Ce(r.driversTimeOnTrackWarningCount()>0?5:6),k(2),Ce(r.isOpen?7:-1))},dependencies:[It,ls]})};var fg=class n{raceService=M(Vt);stintService=M(Fn);raceConfigService=M(dt);open=X(!1);openInMilliseconds=X(0);constructor(){Je({endRaceDate:De(this.raceService.endRaceDate),activeStint:De(this.stintService.activeStint),activeRaceConfig:De(this.raceConfigService.activeRaceConfig),ping:Yt(1e3)}).pipe(vt()).subscribe(({endRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return ko(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,s=EF(e,r.pitLaneCloseBeforeEndRaceMinute),o=yF(i,s),a=ko(t.startDate.toDate(),r.minStintMinute),c=_F(i,a);return o&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var hQ=n=>({"mb-4":n}),fQ=n=>({"animate-bounce":n});function pQ(n,e){if(n&1&&(D(0,"div",3),P(1),A()),n&2){let t=J();k(),K(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function mQ(n,e){n&1&&(D(0,"div",5),P(1," Open "),A())}function gQ(n,e){n&1&&(D(0,"div",6),P(1," Closed "),A())}function vQ(n,e){if(n&1&&(D(0,"option",20),P(1),A()),n&2){let t=e.$implicit;ue("value",t.id),k(),K(" ",t.raceName," ")}}function _Q(n,e){if(n&1){let t=Ys();D(0,"div",11),P(1,"PIT SETTINGS"),A(),D(2,"form")(3,"div",12)(4,"label",13),P(5,"\u{1F417} Driver"),A(),D(6,"select",14),vi("ngModelChange",function(i){qt(t);let s=J(2);return os(s.selectedDriver,i)||(s.selectedDriver=i),Gt(i)}),we("change",function(){qt(t);let i=J(2);return Gt(i.updateDriverId())}),pe(7,vQ,2,2,"option",15),A()(),D(8,"div",12)(9,"label",16),P(10,"\u26FD\uFE0F Refueling"),A(),D(11,"input",17),we("change",function(){qt(t);let i=J(2);return Gt(i.updateRefueling())}),vi("ngModelChange",function(i){qt(t);let s=J(2);return os(s.refueling,i)||(s.refueling=i),Gt(i)}),A()(),D(12,"div",12)(13,"label",18),P(14,"\u{1F6DE} Tyre change"),A(),D(15,"input",19),vi("ngModelChange",function(i){qt(t);let s=J(2);return os(s.tyreChange,i)||(s.tyreChange=i),Gt(i)}),we("change",function(){qt(t);let i=J(2);return Gt(i.updateTyreChange())}),A()()()}if(n&2){let t=J(2);k(6),ue("disabled",t.activePit()!==void 0),gi("ngModel",t.selectedDriver),k(),ue("ngForOf",t.drivers()),k(4),ue("disabled",t.activePit()!==void 0),gi("ngModel",t.refueling),k(4),ue("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),gi("ngModel",t.tyreChange)}}function yQ(n,e){if(n&1&&(D(0,"div",21),P(1),A()),n&2){let t=J(3);ue("ngClass",ut(2,fQ,t.activePitRemainingMilliseconds()<1e4)),k(),K(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function wQ(n,e){n&1&&(D(0,"div",22),P(1," Pit out ready! "),A())}function IQ(n,e){if(n&1&&pe(0,yQ,2,4,"div",21)(1,wQ,2,0,"div",22),n&2){let t=J(2);Ce(t.activePitRemainingMilliseconds()>0?0:1)}}function EQ(n,e){if(n&1){let t=Ys();D(0,"div",7),pe(1,_Q,16,7)(2,IQ,2,1),A(),D(3,"div",8)(4,"button",9),we("click",function(){qt(t);let i=J();return Gt(i.pitIn())}),P(5," Pit in "),A(),D(6,"button",10),we("click",function(){qt(t);let i=J();return Gt(i.pitOut())}),P(7," Pit out "),A()()}if(n&2){let t=J();k(),Ce(t.activePit()?2:1),k(3),ue("disabled",!t.pitLaneOpen()),k(2),ue("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var pg=class n{pitLaneService=M(fg);pitService=M(kn);driverService=M(Xr);raceManagerService=M(Rc);tyreService=M(jc);raceConfigService=M(dt);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=Fe(()=>Wn(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=Fe(()=>CF(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";constructor(){wi(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.nextPitDriverId,this.refueling=e.nextPitRefueling,this.tyreChange=e.nextPitTyreChange)})}pitIn(){return _(this,null,function*(){yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)})}pitOut(){return _(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithLessTimeOnTrack();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-pit-lane"]],standalone:!0,features:[Ke],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F17F}\uFE0F Pit Lane"),A(),pe(4,pQ,2,1,"div",3),D(5,"div",4),pe(6,mQ,2,0,"div",5)(7,gQ,2,0,"div",6),A()(),pe(8,EQ,8,3),A()),t&2&&(k(),ue("ngClass",ut(4,hQ,r.isOpen)),k(3),Ce(r.pitLaneOpenInMilliseconds()>0?4:-1),k(2),Ce(r.pitLaneOpen()?6:7),k(2),Ce(r.isOpen?8:-1))},dependencies:[It,Uc,Lc,rg,ig,wT,Vc,kc,Fc,Uo,Vo,ls]})};var CQ=n=>({"mb-2":n});function TQ(n,e){if(n&1&&(D(0,"div",4),P(1),A()),n&2){let t=J();k(),K(" Remaining: ",t.remainingDriverChanges()," ")}}function bQ(n,e){n&1&&(D(0,"div",5),P(1," Completed! "),A())}function SQ(n,e){if(n&1&&(D(0,"div",6)(1,"div")(2,"div",7),P(3,"Competed"),A(),D(4,"div",8),P(5),A()(),D(6,"div")(7,"div",9),P(8,"Remaining"),A(),D(9,"div",10),P(10),A()()()),n&2){let t=J();k(5),K(" ",t.completedDriverChanges()," "),k(5),K(" ",t.remainingDriverChanges()," ")}}var mg=class n{pitService=M(kn);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-driver-change"]],standalone:!0,features:[Ke],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F417} \u{1F504} Driver change"),A(),D(4,"div",3),pe(5,TQ,2,1,"div",4)(6,bQ,2,0,"div",5),A()(),pe(7,SQ,11,2,"div",6),A()),t&2&&(k(),ue("ngClass",ut(3,CQ,r.isOpen)),k(4),Ce(r.remainingDriverChanges()>0?5:6),k(2),Ce(r.isOpen?7:-1))},dependencies:[It]})};var DQ=n=>({"mb-2":n});function AQ(n,e){if(n&1&&(D(0,"div",4),P(1),A(),D(2,"div",5),P(3),A()),n&2){let t=J(2);k(),K(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),k(2),K(" Laps: ",t.activeStintRemainingLaps()," ")}}function RQ(n,e){if(n&1&&(D(0,"div",6),P(1),A(),D(2,"div",7),P(3),A()),n&2){let t=J(2);k(),K(" Gained: ",t.activeStintGainedTimeOnTrackString()," "),k(2),K(" Laps: ",t.activeStintGainedLaps()," ")}}function xQ(n,e){if(n&1&&pe(0,AQ,4,2)(1,RQ,4,2),n&2){let t=J();Ce(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function NQ(n,e){if(n&1&&P(0),n&2){let t=J(2);K(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function MQ(n,e){n&1&&P(0," --:--:-- ")}function PQ(n,e){if(n&1&&P(0),n&2){let t=J(2);K(" ",t.activeStintRemainingLaps()," ")}}function OQ(n,e){n&1&&P(0," --:--:-- ")}function kQ(n,e){if(n&1&&(D(0,"div",8)(1,"div")(2,"div",9),P(3,"Time on track"),A(),D(4,"div",10),P(5),A()(),D(6,"div")(7,"div",11),P(8,"Laps"),A(),D(9,"div",12),P(10),A()()(),ve(11,"hr",13),D(12,"div",8)(13,"div")(14,"div",9),P(15,"Remaining time on track"),A(),D(16,"div",10),pe(17,NQ,1,1)(18,MQ,1,0),A()(),D(19,"div")(20,"div",11),P(21,"Remaining laps"),A(),D(22,"div",12),pe(23,PQ,1,1)(24,OQ,1,0),A()()(),ve(25,"hr",13),D(26,"div",14)(27,"div")(28,"div",9),P(29,"Gained time on track"),A(),D(30,"div",10),P(31),A()(),D(32,"div")(33,"div",11),P(34,"Gained laps"),A(),D(35,"div",12),P(36),A()()()),n&2){let t=J();k(5),K(" ",t.activeStintTimeOnTrackString()," "),k(5),K(" ",t.activeStintLaps()," "),k(7),Ce(t.activeStint()?17:18),k(6),Ce(t.activeStint()?23:24),k(8),K(" ",t.activeStintGainedTimeOnTrackString()," "),k(5),K(" ",t.activeStintGainedLaps()," ")}}var gg=class n{stintService=M(Fn);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=Fe(()=>Wn(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=Fe(()=>Wn(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=Fe(()=>Wn(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-active-stint"]],standalone:!0,features:[Ke],decls:7,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),A(),D(4,"div",3),pe(5,xQ,2,1),A()(),pe(6,kQ,37,6),A()),t&2&&(k(),ue("ngClass",ut(3,DQ,r.isOpen)),k(4),Ce(r.activeStint()?5:-1),k(),Ce(r.isOpen?6:-1))},dependencies:[It]})};var FQ=n=>({"mb-2":n}),LQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function VQ(n,e){if(n&1&&(P(0),_i(1,"date")),n&2){let t=J().$implicit;K(" ",yi(1,1,t.endDate.toDate(),"HH:mm:ss")," ")}}function UQ(n,e){if(n&1&&(D(0,"tr",16)(1,"td",17),P(2),A(),D(3,"td",18),P(4),A(),D(5,"td",19),P(6),_i(7,"date"),A(),D(8,"td",19),pe(9,VQ,2,4),A(),D(10,"td",19),P(11),A()()),n&2){let t=e.$implicit,r=J(2);ue("ngClass",Cf(9,LQ,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),Br(t.id),k(2),K("",r.getDriverRacingName(t.driverId)," "),k(2),Br(yi(7,6,t.startDate.toDate(),"HH:mm:ss")),k(3),Ce(t.endDate?9:-1),k(2),K(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function jQ(n,e){if(n&1&&(D(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),ve(4,"th",8),D(5,"th",8),P(6,"Driver"),A(),D(7,"th",9),P(8,"Start"),A(),D(9,"th",9),P(10,"End"),A(),D(11,"th",9),P(12,"On track"),A()()()(),D(13,"div",10)(14,"table",11)(15,"tbody"),pe(16,UQ,12,12,"tr",12),A(),D(17,"tfoot")(18,"tr",13)(19,"td",14),P(20,"Totals"),A(),D(21,"td",15),P(22),A()()()()()()),n&2){let t=J();k(16),ue("ngForOf",t.stints()),k(6),Br(t.totalStintTimeOnTrack())}}var vg=class n{stintService=M(Fn);driverService=M(Xr);stints=this.stintService.stints;activeStintId=Fe(()=>{let e=this.stintService.activeStint();if(e)return e.id});totalStintTimeOnTrack=Fe(()=>{let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),Wn(t)});isOpen=!0;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?pd(e,t):pd(e,new Date)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-stint"]],standalone:!0,features:[Ke],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-60","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"bg-gray-100","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u23F3 Stint"),A(),D(4,"div",3)(5,"div",4),P(6),A()()(),pe(7,jQ,23,2,"div",5),A()),t&2&&(k(),ue("ngClass",ut(3,FQ,r.isOpen)),k(5),K(" Total: ",r.stints().length," "),k(),Ce(r.isOpen&&r.stints().length>0?7:-1))},dependencies:[It,ls,ba]})};var BQ=n=>({"mb-2":n});function $Q(n,e){}var _g=class n{isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-lap"]],standalone:!0,features:[Ke],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u23F1\uFE0F Lap"),A(),D(4,"div",3)(5,"div",4),P(6),A()()(),pe(7,$Q,0,0),A()),t&2&&(k(),ue("ngClass",ut(3,BQ,r.isOpen)),k(5),K(" Reference: ",0," "),k(),Ce(r.isOpen?7:-1))},dependencies:[It]})};var HQ=n=>({"mb-2":n});function qQ(n,e){}var yg=class n{isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-pit"]],standalone:!0,features:[Ke],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1),we("click",function(){return r.isOpen=!r.isOpen}),D(2,"div",2),P(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),A(),D(4,"div",3)(5,"div",4),P(6),A()()(),pe(7,qQ,0,0),A()),t&2&&(k(),ue("ngClass",ut(3,HQ,r.isOpen)),k(5),K(" Total: ",0," "),k(),Ce(r.isOpen?7:-1))},dependencies:[It]})};var wg=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=We({type:n,selectors:[["app-root"]],standalone:!0,features:[Ke],decls:52,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"mx-4","lg:mb-4","dark:text-white"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(t,r){t&1&&(D(0,"div",0)(1,"div",1)(2,"div",2),P(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),A(),D(4,"div",3),ve(5,"app-race"),A()(),D(6,"div",4)(7,"div",5)(8,"div",6),ve(9,"app-pit-lane"),A(),D(10,"div",6),ve(11,"app-driver-change"),A(),D(12,"div",6),ve(13,"app-tyre-change-window"),A(),D(14,"div",7),ve(15,"app-pit"),A()(),D(16,"div",8)(17,"div",6),ve(18,"app-fuel"),A(),D(19,"div",6),ve(20,"app-lap"),A(),D(21,"div",7),ve(22,"app-driver"),A()(),D(23,"div",8)(24,"div",6),ve(25,"app-active-stint"),A(),D(26,"div",6),ve(27,"app-stint-optimizer"),A(),D(28,"div",7),ve(29,"app-stint"),A()()(),D(30,"div",9)(31,"strong"),P(32,"TODO:"),A(),ve(33,"br"),P(34," - \u2705 Fuel: calcolo giri rimanenti anche quando non \xE8 avviata la gara"),ve(35,"br"),P(36," - \u2705 Logiche: controllare ordinamento dati (da applicare all'interno di ogni funzione)"),ve(37,"br"),P(38," - Stint: mettere altezza massima della tabella con scroll verticale"),ve(39,"br"),P(40," - Stint: aggiustare calcolo time on track totale"),ve(41,"br"),P(42," - Componente per visualizzazione storico pits"),ve(43,"br"),P(44," - Componente per gestione reference lap time"),ve(45,"br"),P(46," - Driver: sistemare gestione warning + mettere soglia su configurazione "),A(),D(47,"div",10)(48,"div",2),P(49,"Cremona kart circuit"),A(),ve(50,"img",11),A()(),ve(51,"router-outlet"))},dependencies:[ew,og,ag,lg,dg,hg,pg,mg,gg,vg,_g,yg]})};JR(wg,J1).catch(n=>console.error(n));
