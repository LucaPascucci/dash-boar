import{$ as an,A as on,B as gr,C as pd,D as bt,E as Xb,F as eD,G as mr,H as ds,I as Uc,J as jc,K as Bc,L as hs,M as tD,N as nD,O as rD,P as iD,Q as $c,R as Hc,S as ve,T as at,U as Bt,V as _r,W as hm,X as gd,Y as ct,Z as ht,_ as Br,a as F,aa as sD,b as ge,ba as ft,c as Ei,ca as md,d as y,da as q,e as L,ea as oD,f as bo,g as Gb,h as zb,i as Wb,j as Kb,k as Qb,l as Ci,m as lm,n as dm,o as Do,p as jt,q as Fc,r as Yb,s as Lc,t as fd,u as Zb,v as pr,w as Jb,x as jr,y as ls,z as Vc}from"./chunk-VUN4IAWB.js";function aD(t,e){return Object.is(t,e)}var It=null,qc=!1,_d=1,yr=Symbol("SIGNAL");function Ie(t){let e=It;return It=t,e}function cD(){return It}function LF(){return qc}var So={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function mm(t){if(qc)throw new Error("");if(It===null)return;It.consumerOnSignalRead(t);let e=It.nextProducerIndex++;if(Cd(It),e<It.producerNode.length&&It.producerNode[e]!==t&&Gc(It)){let n=It.producerNode[e];Ed(n,It.producerIndexOfThis[e])}It.producerNode[e]!==t&&(It.producerNode[e]=t,It.producerIndexOfThis[e]=Gc(It)?fD(t,It,e):0),It.producerLastReadVersion[e]=t.version}function VF(){_d++}function uD(t){if(!(Gc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===_d)){if(!t.producerMustRecompute(t)&&!Id(t)){t.dirty=!1,t.lastCleanEpoch=_d;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=_d}}function lD(t){if(t.liveConsumerNode===void 0)return;let e=qc;qc=!0;try{for(let n of t.liveConsumerNode)n.dirty||hD(n)}finally{qc=e}}function dD(){return It?.consumerAllowSignalWrites!==!1}function hD(t){t.dirty=!0,lD(t),t.consumerMarkedDirty?.(t)}function zc(t){return t&&(t.nextProducerIndex=0),Ie(t)}function vd(t,e){if(Ie(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Gc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ed(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Id(t){Cd(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(uD(n),r!==n.version))return!0}return!1}function wd(t){if(Cd(t),Gc(t))for(let e=0;e<t.producerNode.length;e++)Ed(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function fD(t,e,n){if(pD(t),t.liveConsumerNode.length===0&&gD(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=fD(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ed(t,e){if(pD(t),t.liveConsumerNode.length===1&&gD(t))for(let r=0;r<t.producerNode.length;r++)Ed(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cd(i),i.producerIndexOfThis[r]=e}}function Gc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cd(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function pD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function gD(t){return t.producerNode!==void 0}function mD(t){let e=Object.create(UF);e.computation=t;let n=()=>{if(uD(e),mm(e),e.value===yd)throw e.error;return e.value};return n[yr]=e,n}var fm=Symbol("UNSET"),pm=Symbol("COMPUTING"),yd=Symbol("ERRORED"),UF=ge(F({},So),{value:fm,dirty:!0,error:null,equal:aD,producerMustRecompute(t){return t.value===fm||t.value===pm},producerRecomputeValue(t){if(t.value===pm)throw new Error("Detected cycle in computations.");let e=t.value;t.value=pm;let n=zc(t),r;try{r=t.computation()}catch(i){r=yd,t.error=i}finally{vd(t,n)}if(e!==fm&&e!==yd&&r!==yd&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function jF(){throw new Error}var _D=jF;function yD(){_D()}function vD(t){_D=t}var BF=null;function ID(t){let e=Object.create(ED);e.value=t;let n=()=>(mm(e),e.value);return n[yr]=e,n}function _m(t,e){dD()||yD(),t.equal(t.value,e)||(t.value=e,$F(t))}function wD(t,e){dD()||yD(),_m(t,e(t.value))}var ED=ge(F({},So),{equal:aD,value:void 0});function $F(t){t.version++,VF(),lD(t),BF?.()}function CD(t,e,n){let r=Object.create(HF);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(wd(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=gm)}let a=()=>{if(r.fn===null)return;if(LF())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Id(r))return;r.hasRun=!0;let c=zc(r);try{r.cleanupFn(),r.cleanupFn=gm,r.fn(i)}finally{vd(r,c)}};return r.ref={notify:()=>hD(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[yr]:r},r.ref}var gm=()=>{},HF=ge(F({},So),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:gm});function ce(t){return typeof t=="function"}function Ao(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Td=Ao(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function fs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var nt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof Td?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{TD(s)}catch(o){e=e??[],o instanceof Td?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Td(e)}}add(e){var n;if(e&&e!==this)if(this.closed)TD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&fs(n,e)}remove(e){let{_finalizers:n}=this;n&&fs(n,e),e instanceof t&&e._removeParent(this)}};nt.EMPTY=(()=>{let t=new nt;return t.closed=!0,t})();var ym=nt.EMPTY;function bd(t){return t instanceof nt||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function TD(t){ce(t)?t():t.unsubscribe()}var Jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ro={setTimeout(t,e,...n){let{delegate:r}=Ro;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Ro;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Dd(t){Ro.setTimeout(()=>{let{onUnhandledError:e}=Jn;if(e)e(t);else throw t})}function Wc(){}var bD=vm("C",void 0,void 0);function DD(t){return vm("E",void 0,t)}function SD(t){return vm("N",t,void 0)}function vm(t,e,n){return{kind:t,value:e,error:n}}var ps=null;function No(t){if(Jn.useDeprecatedSynchronousErrorHandling){let e=!ps;if(e&&(ps={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ps;if(ps=null,n)throw r}}else t()}function AD(t){Jn.useDeprecatedSynchronousErrorHandling&&ps&&(ps.errorThrown=!0,ps.error=t)}var gs=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,bd(e)&&e.add(this)):this.destination=zF}static create(e,n,r){return new Mo(e,n,r)}next(e){this.isStopped?wm(SD(e),this):this._next(e)}error(e){this.isStopped?wm(DD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wm(bD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},qF=Function.prototype.bind;function Im(t,e){return qF.call(t,e)}var Em=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Sd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Sd(r)}else Sd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Sd(n)}}},Mo=class extends gs{constructor(e,n,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Jn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Im(e.next,s),error:e.error&&Im(e.error,s),complete:e.complete&&Im(e.complete,s)}):i=e}this.destination=new Em(i)}};function Sd(t){Jn.useDeprecatedSynchronousErrorHandling?AD(t):Dd(t)}function GF(t){throw t}function wm(t,e){let{onStoppedNotification:n}=Jn;n&&Ro.setTimeout(()=>n(t,e))}var zF={closed:!0,next:Wc,error:GF,complete:Wc};var xo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zt(t){return t}function Ad(...t){return Cm(t)}function Cm(t){return t.length===0?Zt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=KF(n)?n:new Mo(n,r,i);return No(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=RD(r),new r((i,s)=>{let o=new Mo({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[xo](){return this}pipe(...n){return Cm(n)(this)}toPromise(n){return n=RD(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function RD(t){var e;return(e=t??Jn.Promise)!==null&&e!==void 0?e:Promise}function WF(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function KF(t){return t&&t instanceof gs||WF(t)&&bd(t)}function Tm(t){return ce(t?.lift)}function he(t){return e=>{if(Tm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new Kc(t,e,n,r,i)}var Kc=class extends gs{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Po(){return he((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var ko=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Tm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nt;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nt.EMPTY)}return e}refCount(){return Po()(this)}};var ND=Ao(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ze=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Rd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new ND}next(n){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){No(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ym:(this.currentObservers=null,s.push(n),new nt(()=>{this.currentObservers=null,fs(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new Rd(e,n),t})(),Rd=class extends Ze{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ym}};var Mt=class extends Ze{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Qc={now(){return(Qc.delegate||Date).now()},delegate:void 0};var Yc=class extends Ze{constructor(e=1/0,n=1/0,r=Qc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Nd=class extends nt{constructor(e,n){super()}schedule(e,n=0){return this}};var Zc={setInterval(t,e,...n){let{delegate:r}=Zc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Zc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Oo=class extends Nd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Zc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Zc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,fs(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Fo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Fo.now=Qc.now;var Lo=class extends Fo{constructor(e,n=Fo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Vo=new Lo(Oo),bm=Vo;var Md=class extends Oo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var xd=class extends Lo{};var Dm=new xd(Md);var wn=new oe(t=>t.complete());function Pd(t){return t&&ce(t.schedule)}function MD(t){return t[t.length-1]}function kd(t){return ce(MD(t))?t.pop():void 0}function Ti(t){return Pd(MD(t))?t.pop():void 0}function Sm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function PD(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function xD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ms(t){return this instanceof ms?(this.v=t,this):new ms(t)}function kD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(I){return Promise.resolve(I).then(_,f)}}function a(_,I){r[_]&&(i[_]=function(R){return new Promise(function(S,P){s.push([_,R,S,P])>1||c(_,R)})},I&&(i[_]=I(i[_])))}function c(_,I){try{l(r[_](I))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof ms?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,I){_(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function OD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof xD=="function"?xD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Od=t=>t&&typeof t.length=="number"&&typeof t!="function";function Fd(t){return ce(t?.then)}function Ld(t){return ce(t[xo])}function Vd(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function Ud(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function QF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jd=QF();function Bd(t){return ce(t?.[jd])}function $d(t){return kD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ms(n.read());if(i)return yield ms(void 0);yield yield ms(r)}}finally{n.releaseLock()}})}function Hd(t){return ce(t?.getReader)}function rt(t){if(t instanceof oe)return t;if(t!=null){if(Ld(t))return YF(t);if(Od(t))return ZF(t);if(Fd(t))return JF(t);if(Vd(t))return FD(t);if(Bd(t))return XF(t);if(Hd(t))return eL(t)}throw Ud(t)}function YF(t){return new oe(e=>{let n=t[xo]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ZF(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function JF(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Dd)})}function XF(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function FD(t){return new oe(e=>{tL(t,e).catch(n=>e.error(n))})}function eL(t){return FD($d(t))}function tL(t,e){var n,r,i,s;return PD(this,void 0,void 0,function*(){try{for(n=OD(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function cn(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function bi(t,e=0){return he((n,r)=>{n.subscribe(ue(r,i=>cn(r,t,()=>r.next(i),e),()=>cn(r,t,()=>r.complete(),e),i=>cn(r,t,()=>r.error(i),e)))})}function Di(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function LD(t,e){return rt(t).pipe(Di(e),bi(e))}function VD(t,e){return rt(t).pipe(Di(e),bi(e))}function UD(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function jD(t,e){return new oe(n=>{let r;return cn(n,e,()=>{r=t[jd](),cn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function qd(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{cn(n,e,()=>{let r=t[Symbol.asyncIterator]();cn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function BD(t,e){return qd($d(t),e)}function $D(t,e){if(t!=null){if(Ld(t))return LD(t,e);if(Od(t))return UD(t,e);if(Fd(t))return VD(t,e);if(Vd(t))return qd(t,e);if(Bd(t))return jD(t,e);if(Hd(t))return BD(t,e)}throw Ud(t)}function Qe(t,e){return e?$D(t,e):rt(t)}function Z(...t){let e=Ti(t);return Qe(t,e)}function Uo(t,e){let n=ce(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Am(t){return!!t&&(t instanceof oe||ce(t.lift)&&ce(t.subscribe))}var $r=Ao(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function HD(t){return t instanceof Date&&!isNaN(t)}function z(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:nL}=Array;function rL(t,e){return nL(e)?t(...e):t(e)}function Gd(t){return z(e=>rL(t,e))}var{isArray:iL}=Array,{getPrototypeOf:sL,prototype:oL,keys:aL}=Object;function zd(t){if(t.length===1){let e=t[0];if(iL(e))return{args:e,keys:null};if(cL(e)){let n=aL(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function cL(t){return t&&typeof t=="object"&&sL(t)===oL}function Wd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Dt(...t){let e=Ti(t),n=kd(t),{args:r,keys:i}=zd(t);if(r.length===0)return Qe([],e);let s=new oe(uL(r,e,i?o=>Wd(i,o):Zt));return n?s.pipe(Gd(n)):s}function uL(t,e,n=Zt){return r=>{qD(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)qD(e,()=>{let l=Qe(t[c],e),d=!1;l.subscribe(ue(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function qD(t,e,n){t?cn(n,t,e):e()}function GD(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},_=R=>l<r?I(R):c.push(R),I=R=>{s&&e.next(R),l++;let S=!1;rt(n(R,d++)).subscribe(ue(e,P=>{i?.(P),s?_(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();o?cn(e,o,()=>I(P)):I(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,_,()=>{f=!0,g()})),()=>{a?.()}}function ut(t,e,n=1/0){return ce(e)?ut((r,i)=>z((s,o)=>e(r,s,i,o))(rt(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>GD(r,i,t,n)))}function Rm(t=1/0){return ut(Zt,t)}function zD(){return Rm(1)}function jo(...t){return zD()(Qe(t,Ti(t)))}function Kd(t){return new oe(e=>{rt(t()).subscribe(e)})}function Nm(...t){let e=kd(t),{args:n,keys:r}=zd(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;rt(n[d]).subscribe(ue(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Wd(r,a):a),s.complete())}))}});return e?i.pipe(Gd(e)):i}function Mm(t=0,e,n=bm){let r=-1;return e!=null&&(Pd(e)?n=e:r=e),new oe(i=>{let s=HD(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Hr(t=0,e=Vo){return t<0&&(t=0),Mm(t,t,e)}function Jt(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Si(t){return he((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=rt(t(o,Si(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function WD(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function _s(t,e){return ce(e)?ut(t,e,1):ut(t,1)}function Ai(t){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function qr(t){return t<=0?()=>wn:he((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function xm(t){return z(()=>t)}function Qd(t,e=Zt){return t=t??lL,he((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function lL(t,e){return t===e}function Yd(t=dL){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function dL(){return new $r}function Jc(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function vr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Jt((i,s)=>t(i,s,r)):Zt,qr(1),n?Ai(e):Yd(()=>new $r))}function Pm(t,e,n,r){return he((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=I=>{a.forEach(I),I(s)},l=I=>c(R=>R.error(I)),d=0,f=!1,g=new Kc(s,I=>{try{let R=t(I),S=a.get(R);if(!S){a.set(R,S=r?r():new Ze);let P=_(R,S);if(s.next(P),n){let U=ue(S,()=>{S.complete(),U?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(rt(n(P)).subscribe(U))}}S.next(o?o(I):I)}catch(R){l(R)}},()=>c(I=>I.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function _(I,R){let S=new oe(P=>{d++;let U=R.subscribe(P);return()=>{U.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return S.key=I,S}})}function Bo(t){return t<=0?()=>wn:he((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function km(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Jt((i,s)=>t(i,s,r)):Zt,Bo(1),n?Ai(e):Yd(()=>new $r))}function Zd(){return he((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Jd(t,e){return he(WD(t,e,arguments.length>=2,!0))}function $o(...t){let e=Ti(t);return he((n,r)=>{(e?jo(t,n,e):jo(t,n)).subscribe(r)})}function un(t,e){return he((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,d=s++;rt(t(c,d)).subscribe(i=ue(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Mn(t){return he((e,n)=>{rt(t).subscribe(ue(n,()=>n.complete(),Wc)),!n.closed&&e.subscribe(n)})}function wt(t,e,n){let r=ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Zt}var hL="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(F_(e,n)),this.code=e}};function F_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function lu(t){return{toString:t}.toString()}var Xd="__parameters__";function fL(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function pL(t,e,n){return lu(()=>{let r=fL(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Xd)?c[Xd]:Object.defineProperty(c,Xd,{value:[]})[Xd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Xc=globalThis;function Le(t){for(let e in t)if(t[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function gL(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function dn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(dn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function KD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var mL=Le({__forward_ref__:Le});function Qr(t){return t.__forward_ref__=Qr,t.toString=function(){return dn(this())},t}function Xt(t){return NS(t)?t():t}function NS(t){return typeof t=="function"&&t.hasOwnProperty(mL)&&t.__forward_ref__===Qr}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function As(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ph(t){return QD(t,xS)||QD(t,PS)}function MS(t){return Ph(t)!==null}function QD(t,e){return t.hasOwnProperty(e)?t[e]:null}function _L(t){let e=t&&(t[xS]||t[PS]);return e||null}function YD(t){return t&&(t.hasOwnProperty(ZD)||t.hasOwnProperty(yL))?t[ZD]:null}var xS=Le({\u0275prov:Le}),ZD=Le({\u0275inj:Le}),PS=Le({ngInjectableDef:Le}),yL=Le({ngInjectorDef:Le}),V=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function kS(t){return t&&!!t.\u0275providers}var vL=Le({\u0275cmp:Le}),IL=Le({\u0275dir:Le}),wL=Le({\u0275pipe:Le}),EL=Le({\u0275mod:Le}),uh=Le({\u0275fac:Le}),nu=Le({__NG_ELEMENT_ID__:Le}),JD=Le({__NG_ENV_ID__:Le});function L_(t){return typeof t=="string"?t:t==null?"":String(t)}function CL(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():L_(t)}function TL(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function V_(t,e){throw new G(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),Km;function OS(){return Km}function ln(t){let e=Km;return Km=t,e}function FS(t,e,n){let r=Ph(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;V_(t,"Injector")}var bL={},ru=bL,Qm="__NG_DI_FLAG__",lh="ngTempTokenPath",DL="ngTokenPath",SL=/\n/gm,AL="\u0275",XD="__source",zo;function RL(){return zo}function Ri(t){let e=zo;return zo=t,e}function NL(t,e=fe.Default){if(zo===void 0)throw new G(-203,!1);return zo===null?FS(t,void 0,e):zo.get(t,e&fe.Optional?null:void 0,e)}function ee(t,e=fe.Default){return(OS()||NL)(Xt(t),e)}function M(t,e=fe.Default){return ee(t,kh(e))}function kh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ym(t){let e=[];for(let n=0;n<t.length;n++){let r=Xt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=xL(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ee(i,s))}else e.push(ee(r))}return e}function ML(t,e){return t[Qm]=e,t.prototype[Qm]=e,t}function xL(t){return t[Qm]}function PL(t,e,n,r){let i=t[lh];throw e[XD]&&i.unshift(e[XD]),t.message=kL(`
`+t.message,i,n,r),t[DL]=i,t[lh]=null,t}function kL(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==AL?t.slice(2):t;let i=dn(e);if(Array.isArray(e))i=e.map(dn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):dn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(SL,`
  `)}`}var ie=ML(pL("Optional"),8);function Is(t,e){let n=t.hasOwnProperty(uh);return n?t[uh]:null}function U_(t,e){t.forEach(n=>Array.isArray(n)?U_(n,e):e(n))}function LS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function dh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function OL(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function FL(t,e,n){let r=du(t,e);return r>=0?t[r|1]=n:(r=~r,OL(t,r,e,n)),r}function Om(t,e){let n=du(t,e);if(n>=0)return t[n|1]}function du(t,e){return LL(t,e,1)}function LL(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ko={},xn=[],Qo=new V(""),VS=new V("",-1),US=new V(""),hh=class{get(e,n=ru){if(n===ru){let r=new Error(`NullInjectorError: No provider for ${dn(e)}!`);throw r.name="NullInjectorError",r}return n}},jS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(jS||{}),Er=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Er||{}),xi=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(xi||{});function VL(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Zm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];jL(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function UL(t){return t===3||t===4||t===6}function jL(t){return t.charCodeAt(0)===64}function iu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?eS(t,n,i,null,e[++r]):eS(t,n,i,null,null))}}return t}function eS(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var BS="ng-template";function BL(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&VL(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(j_(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function j_(t){return t.type===4&&t.value!==BS}function $L(t,e,n){let r=t.type===4&&!n?BS:t.value;return e===r}function HL(t,e,n){let r=4,i=t.attrs,s=i!==null?zL(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Xn(r)&&!Xn(c))return!1;if(o&&Xn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!$L(t,c,n)||c===""&&e.length===1){if(Xn(r))return!1;o=!0}}else if(r&8){if(i===null||!BL(t,i,c,n)){if(Xn(r))return!1;o=!0}}else{let l=e[++a],d=qL(c,i,j_(t),n);if(d===-1){if(Xn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Xn(r))return!1;o=!0}}}}return Xn(r)||o}function Xn(t){return(t&1)===0}function qL(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return WL(e,t)}function GL(t,e,n=!1){for(let r=0;r<e.length;r++)if(HL(t,e[r],n))return!0;return!1}function zL(t){for(let e=0;e<t.length;e++){let n=t[e];if(UL(n))return e}return t.length}function WL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function tS(t,e){return t?":not("+e.trim()+")":e}function KL(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Xn(o)&&(e+=tS(s,i),i=""),r=o,s=s||!Xn(r);n++}return i!==""&&(e+=tS(s,i)),e}function QL(t){return t.map(KL).join(",")}function YL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Xn(i))break;i=s}r++}return{attrs:e,classes:n}}function Ln(t){return lu(()=>{let e=WS(t),n=ge(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===jS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Er.Emulated,styles:t.styles||xn,_:null,schemas:t.schemas||null,tView:null,id:""});KS(n);let r=t.dependencies;return n.directiveDefs=rS(r,!1),n.pipeDefs=rS(r,!0),n.id=XL(n),n})}function ZL(t){return ws(t)||HS(t)}function JL(t){return t!==null}function Rs(t){return lu(()=>({type:t.type,bootstrap:t.bootstrap||xn,declarations:t.declarations||xn,imports:t.imports||xn,exports:t.exports||xn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function nS(t,e){if(t==null)return Ko;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=xi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==xi.None?[r,a]:r,e[s]=o):n[s]=r}return n}function xt(t){return lu(()=>{let e=WS(t);return KS(e),e})}function $S(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ws(t){return t[vL]||null}function HS(t){return t[IL]||null}function qS(t){return t[wL]||null}function GS(t){let e=ws(t)||HS(t)||qS(t);return e!==null?e.standalone:!1}function zS(t,e){let n=t[EL]||null;if(!n&&e===!0)throw new Error(`Type ${dn(t)} does not have '\u0275mod' property.`);return n}function WS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ko,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||xn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:nS(t.inputs,e),outputs:nS(t.outputs),debugInfo:null}}function KS(t){t.features?.forEach(e=>e(t))}function rS(t,e){if(!t)return null;let n=e?qS:ZL;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(JL)}function XL(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function $e(t){return{\u0275providers:t}}function eV(...t){return{\u0275providers:QS(!0,t),\u0275fromNgModule:!0}}function QS(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return U_(e,o=>{let a=o;Jm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&YS(i,s),n}function YS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];B_(i,s=>{e(s,r)})}}function Jm(t,e,n,r){if(t=Xt(t),!t)return!1;let i=null,s=YD(t),o=!s&&ws(t);if(!s&&!o){let c=t.ngModule;if(s=YD(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Jm(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{U_(s.imports,d=>{Jm(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&YS(l,e)}if(!a){let l=Is(i)||(()=>new i);e({provide:i,useFactory:l,deps:xn},i),e({provide:US,useValue:i,multi:!0},i),e({provide:Qo,useValue:()=>ee(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;B_(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function B_(t,e){for(let n of t)kS(n)&&(n=n.\u0275providers),Array.isArray(n)?B_(n,e):e(n)}var tV=Le({provide:String,useValue:Le});function ZS(t){return t!==null&&typeof t=="object"&&tV in t}function nV(t){return!!(t&&t.useExisting)}function rV(t){return!!(t&&t.useFactory)}function Yo(t){return typeof t=="function"}function iV(t){return!!t.useClass}var Oh=new V(""),rh={},sV={},Fm;function $_(){return Fm===void 0&&(Fm=new hh),Fm}var kn=class{},su=class extends kn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,e_(e,o=>this.processProvider(o)),this.records.set(VS,Ho(void 0,this)),i.has("environment")&&this.records.set(kn,Ho(void 0,this));let s=this.records.get(Oh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(US,xn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ie(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Ri(this),r=ln(void 0),i;try{return e()}finally{Ri(n),ln(r)}}get(e,n=ru,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(JD))return e[JD](this);r=kh(r);let i,s=Ri(this),o=ln(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=lV(e)&&Ph(e);l&&this.injectableDefInScope(l)?c=Ho(Xm(e),rh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?$_():this.parent;return n=r&fe.Optional&&n===ru?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[lh]=a[lh]||[]).unshift(dn(e)),s)throw a;return PL(a,e,"R3InjectorError",this.source)}else throw a}finally{ln(o),Ri(s)}}resolveInjectorInitializers(){let e=Ie(null),n=Ri(this),r=ln(void 0),i;try{let s=this.get(Qo,xn,fe.Self);for(let o of s)o()}finally{Ri(n),ln(r),Ie(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(dn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=Xt(e);let n=Yo(e)?e:Xt(e&&e.provide),r=aV(e);if(!Yo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ho(void 0,rh,!0),i.factory=()=>Ym(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ie(null);try{return n.value===rh&&(n.value=sV,n.value=n.factory()),typeof n.value=="object"&&n.value&&uV(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ie(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Xt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Xm(t){let e=Ph(t),n=e!==null?e.factory:Is(t);if(n!==null)return n;if(t instanceof V)throw new G(204,!1);if(t instanceof Function)return oV(t);throw new G(204,!1)}function oV(t){if(t.length>0)throw new G(204,!1);let n=_L(t);return n!==null?()=>n.factory(t):()=>new t}function aV(t){if(ZS(t))return Ho(void 0,t.useValue);{let e=JS(t);return Ho(e,rh)}}function JS(t,e,n){let r;if(Yo(t)){let i=Xt(t);return Is(i)||Xm(i)}else if(ZS(t))r=()=>Xt(t.useValue);else if(rV(t))r=()=>t.useFactory(...Ym(t.deps||[]));else if(nV(t))r=()=>ee(Xt(t.useExisting));else{let i=Xt(t&&(t.useClass||t.provide));if(cV(t))r=()=>new i(...Ym(t.deps));else return Is(i)||Xm(i)}return r}function Ho(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function cV(t){return!!t.deps}function uV(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function lV(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function e_(t,e){for(let n of t)Array.isArray(n)?e_(n,e):n&&kS(n)?e_(n.\u0275providers,e):e(n)}function Yr(t,e){t instanceof su&&t.assertNotDestroyed();let n,r=Ri(t),i=ln(void 0);try{return e()}finally{Ri(r),ln(i)}}function XS(){return OS()!==void 0||RL()!=null}function Fh(t){if(!XS())throw new G(-203,!1)}function dV(t){return typeof t=="function"}var Zr=0,pe=1,ne=2,en=3,er=4,tr=5,fh=6,ph=7,On=8,Zo=9,Gr=10,Et=11,ou=12,iS=13,sa=14,Cr=15,Jo=16,qo=17,Xo=18,Lh=19,e0=20,Ni=21,ih=22,Pn=23,Fn=25,t0=1;var Es=7,gh=8,mh=9,En=10,_h=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(_h||{});function Mi(t){return Array.isArray(t)&&typeof t[t0]=="object"}function Jr(t){return Array.isArray(t)&&t[t0]===!0}function n0(t){return(t.flags&4)!==0}function Vh(t){return t.componentOffset>-1}function H_(t){return(t.flags&1)===1}function Pi(t){return!!t.template}function t_(t){return(t[ne]&512)!==0}var n_=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function r0(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xr(){return i0}function i0(t){return t.type.prototype.ngOnChanges&&(t.setInput=fV),hV}Xr.ngInherit=!0;function hV(){let t=o0(this),e=t?.current;if(e){let n=t.previous;if(n===Ko)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function fV(t,e,n,r,i){let s=this.declaredInputs[r],o=o0(t)||pV(t,{previous:Ko,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new n_(l&&l.currentValue,n,c===Ko),r0(t,e,i,n)}var s0="__ngSimpleChanges__";function o0(t){return t[s0]||null}function pV(t,e){return t[s0]=e}var sS=null;var Ir=function(t,e,n){sS?.(t,e,n)},gV="svg",mV="math";function Tr(t){for(;Array.isArray(t);)t=t[Zr];return t}function a0(t,e){return Tr(e[t])}function Vn(t,e){return Tr(e[t.index])}function q_(t,e){return t.data[e]}function _V(t,e){return t[e]}function Fi(t,e){let n=e[t];return Mi(n)?n:n[Zr]}function G_(t){return(t[ne]&128)===128}function yV(t){return Jr(t[en])}function yh(t,e){return e==null?null:t[e]}function c0(t){t[qo]=0}function u0(t){t[ne]&1024||(t[ne]|=1024,G_(t)&&jh(t))}function vV(t,e){for(;t>0;)e=e[sa],t--;return e}function Uh(t){return!!(t[ne]&9216||t[Pn]?.dirty)}function r_(t){t[Gr].changeDetectionScheduler?.notify(8),t[ne]&64&&(t[ne]|=1024),Uh(t)&&jh(t)}function jh(t){t[Gr].changeDetectionScheduler?.notify(0);let e=Cs(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!G_(e)));)e=Cs(e)}function l0(t,e){if((t[ne]&256)===256)throw new G(911,!1);t[Ni]===null&&(t[Ni]=[]),t[Ni].push(e)}function IV(t,e){if(t[Ni]===null)return;let n=t[Ni].indexOf(e);n!==-1&&t[Ni].splice(n,1)}function Cs(t){let e=t[en];return Jr(e)?e[en]:e}var me={lFrame:I0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var d0=!1;function wV(){return me.lFrame.elementDepthCount}function EV(){me.lFrame.elementDepthCount++}function CV(){me.lFrame.elementDepthCount--}function h0(){return me.bindingsEnabled}function TV(){return me.skipHydrationRootTNode!==null}function bV(t){return me.skipHydrationRootTNode===t}function DV(){me.skipHydrationRootTNode=null}function Ve(){return me.lFrame.lView}function hn(){return me.lFrame.tView}function Ns(t){return me.lFrame.contextLView=t,t[On]}function Ms(t){return me.lFrame.contextLView=null,t}function Cn(){let t=f0();for(;t!==null&&t.type===64;)t=t.parent;return t}function f0(){return me.lFrame.currentTNode}function SV(){let t=me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function hu(t,e){let n=me.lFrame;n.currentTNode=t,n.isParent=e}function p0(){return me.lFrame.isParent}function AV(){me.lFrame.isParent=!1}function g0(){return d0}function oS(t){d0=t}function m0(){let t=me.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function RV(t){return me.lFrame.bindingIndex=t}function fu(){return me.lFrame.bindingIndex++}function NV(t){let e=me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function MV(){return me.lFrame.inI18n}function xV(t,e){let n=me.lFrame;n.bindingIndex=n.bindingRootIndex=t,i_(e)}function PV(){return me.lFrame.currentDirectiveIndex}function i_(t){me.lFrame.currentDirectiveIndex=t}function kV(t){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function _0(t){me.lFrame.currentQueryIndex=t}function OV(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[tr]:null}function y0(t,e,n){if(n&fe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=OV(s),i===null||(s=s[sa],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=me.lFrame=v0();return r.currentTNode=e,r.lView=t,!0}function z_(t){let e=v0(),n=t[pe];me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function v0(){let t=me.lFrame,e=t===null?null:t.child;return e===null?I0(t):e}function I0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function w0(){let t=me.lFrame;return me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var E0=w0;function W_(){let t=w0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function FV(t){return(me.lFrame.contextLView=vV(t,me.lFrame.contextLView))[On]}function oa(){return me.lFrame.selectedIndex}function Ts(t){me.lFrame.selectedIndex=t}function K_(){let t=me.lFrame;return q_(t.tView,t.selectedIndex)}function LV(){return me.lFrame.currentNamespace}var C0=!0;function Q_(){return C0}function Y_(t){C0=t}function VV(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=i0(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Z_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function sh(t,e,n){T0(t,e,3,n)}function oh(t,e,n,r){(t[ne]&3)===n&&T0(t,e,n,r)}function Lm(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function T0(t,e,n,r){let i=r!==void 0?t[qo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[qo]+=65536),(a<s||s==-1)&&(UV(t,n,e,c),t[qo]=(t[qo]&4294901760)+c+2),c++}function aS(t,e){Ir(4,t,e);let n=Ie(null);try{e.call(t)}finally{Ie(n),Ir(5,t,e)}}function UV(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ne]>>14<t[qo]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,aS(a,s)):aS(a,s)}var Wo=-1,bs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function jV(t){return t instanceof bs}function BV(t){return(t.flags&8)!==0}function $V(t){return(t.flags&16)!==0}var Vm={},s_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=kh(r);let i=this.injector.get(e,Vm,r);return i!==Vm||n===Vm?i:this.parentInjector.get(e,n,r)}};function b0(t){return t!==Wo}function vh(t){return t&32767}function HV(t){return t>>16}function Ih(t,e){let n=HV(t),r=e;for(;n>0;)r=r[sa],n--;return r}var o_=!0;function wh(t){let e=o_;return o_=t,e}var qV=256,D0=qV-1,S0=5,GV=0,wr={};function zV(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(nu)&&(r=n[nu]),r==null&&(r=n[nu]=GV++);let i=r&D0,s=1<<i;e.data[t+(i>>S0)]|=s}function Eh(t,e){let n=A0(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,Um(r.data,t),Um(e,null),Um(r.blueprint,null));let i=J_(t,e),s=t.injectorIndex;if(b0(i)){let o=vh(i),a=Ih(i,e),c=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Um(t,e){t.push(0,0,0,0,0,0,0,0,e)}function A0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function J_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=P0(i),r===null)return Wo;if(n++,i=i[sa],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Wo}function a_(t,e,n){zV(t,e,n)}function R0(t,e,n){if(n&fe.Optional||t!==void 0)return t;V_(e,"NodeInjector")}function N0(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[Zo],s=ln(void 0);try{return i?i.get(e,r,n&fe.Optional):FS(e,r,n&fe.Optional)}finally{ln(s)}}return R0(r,e,n)}function M0(t,e,n,r=fe.Default,i){if(t!==null){if(e[ne]&2048&&!(r&fe.Self)){let o=ZV(t,e,n,r,wr);if(o!==wr)return o}let s=x0(t,e,n,r,wr);if(s!==wr)return s}return N0(e,n,r,i)}function x0(t,e,n,r,i){let s=QV(n);if(typeof s=="function"){if(!y0(e,t,r))return r&fe.Host?R0(i,n,r):N0(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))V_(n);else return o}finally{E0()}}else if(typeof s=="number"){let o=null,a=A0(t,e),c=Wo,l=r&fe.Host?e[Cr][tr]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?J_(t,e):e[a+8],c===Wo||!uS(r,!1)?a=-1:(o=e[pe],a=vh(c),e=Ih(c,e)));a!==-1;){let d=e[pe];if(cS(s,a,d.data)){let f=WV(a,e,n,o,r,l);if(f!==wr)return f}c=e[a+8],c!==Wo&&uS(r,e[pe].data[a+8]===l)&&cS(s,a,e)?(o=d,a=vh(c),e=Ih(c,e)):a=-1}}return i}function WV(t,e,n,r,i,s){let o=e[pe],a=o.data[t+8],c=r==null?Vh(a)&&o_:r!=o&&(a.type&3)!==0,l=i&fe.Host&&s===a,d=KV(a,o,n,c,l);return d!==null?ea(e,o,d,a):wr}function KV(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let _=f;_<g;_++){let I=o[_];if(_<c&&n===I||_>=c&&I.type===n)return _}if(i){let _=o[c];if(_&&Pi(_)&&_.type===n)return c}return null}function ea(t,e,n,r){let i=t[n],s=e.data;if(jV(i)){let o=i;o.resolving&&TL(CL(s[n]));let a=wh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?ln(o.injectImpl):null,d=y0(t,r,fe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&VV(n,s[n],e)}finally{l!==null&&ln(l),wh(a),o.resolving=!1,E0()}}return i}function QV(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(nu)?t[nu]:void 0;return typeof e=="number"?e>=0?e&D0:YV:e}function cS(t,e,n){let r=1<<t;return!!(n[e+(t>>S0)]&r)}function uS(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var vs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return M0(this._tNode,this._lView,e,kh(r),n)}};function YV(){return new vs(Cn(),Ve())}function Li(t){return lu(()=>{let e=t.prototype.constructor,n=e[uh]||c_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[uh]||c_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function c_(t){return NS(t)?()=>{let e=c_(Xt(t));return e&&e()}:Is(t)}function ZV(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ne]&2048&&!(o[ne]&512);){let a=x0(s,o,n,r|fe.Self,wr);if(a!==wr)return a;let c=s.parent;if(!c){let l=o[e0];if(l){let d=l.get(n,wr,r);if(d!==wr)return d}c=P0(o),o=o[sa]}s=c}return i}function P0(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[tr]:null}function lS(t,e=null,n=null,r){let i=k0(t,e,n,r);return i.resolveInjectorInitializers(),i}function k0(t,e=null,n=null,r,i=new Set){let s=[n||xn,eV(t)];return r=r||(typeof t=="object"?void 0:dn(t)),new su(s,e||$_(),r||null,i)}var _e=class t{static{this.THROW_IF_NOT_FOUND=ru}static{this.NULL=new hh}static create(e,n){if(Array.isArray(e))return lS({name:""},n,e,"");{let r=e.name??"";return lS({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=j({token:t,providedIn:"any",factory:()=>ee(VS)})}static{this.__NG_ELEMENT_ID__=-1}};var JV=new V("");JV.__NG_ELEMENT_ID__=t=>{let e=Cn();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new G(204,!1)};var XV="ngOriginalError";function jm(t){return t[XV]}var O0=!0,aa=(()=>{class t{static{this.__NG_ELEMENT_ID__=eU}static{this.__NG_ENV_ID__=n=>n}}return t})(),u_=class extends aa{constructor(e){super(),this._lView=e}onDestroy(e){return l0(this._lView,e),()=>IV(this._lView,e)}};function eU(){return new u_(Ve())}var xs=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Mt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}}return t})();var l_=class extends Ze{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,XS()&&(this.destroyRef=M(aa,{optional:!0})??void 0,this.pendingTasks=M(xs,{optional:!0})??void 0)}emit(e){let n=Ie(null);try{super.next(e)}finally{Ie(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof nt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},pt=l_;function Ch(...t){}function F0(t){let e,n;function r(){t=Ch;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function dS(t){return queueMicrotask(()=>t()),()=>{t=Ch}}var X_="isAngularZone",Th=X_+"_ID",tU=0,X=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pt(!1),this.onMicrotaskEmpty=new pt(!1),this.onStable=new pt(!1),this.onError=new pt(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=O0}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,iU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(X_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,nU,Ch,Ch);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},nU={};function ey(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function rU(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){F0(()=>{t.callbackScheduled=!1,d_(t),t.isCheckStableRunning=!0,ey(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),d_(t)}function iU(t){let e=()=>{rU(t)},n=tU++;t._inner=t._inner.fork({name:"angular",properties:{[X_]:!0,[Th]:n,[Th+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(sU(c))return r.invokeTask(s,o,a,c);try{return hS(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),fS(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return hS(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!oU(c)&&e(),fS(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,d_(t),ey(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function d_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function hS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function fS(t){t._nesting--,ey(t)}var h_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new pt,this.onMicrotaskEmpty=new pt,this.onStable=new pt,this.onError=new pt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function sU(t){return L0(t,"__ignore_ng_zone__")}function oU(t){return L0(t,"__scheduler_tick__")}function L0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var br=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&jm(e);for(;n&&jm(n);)n=jm(n);return n||null}},aU=new V("",{providedIn:"root",factory:()=>{let t=M(X),e=M(br);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function cU(){return ty(Cn(),Ve())}function ty(t,e){return new Vi(Vn(t,e))}var Vi=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=cU}}return t})();function V0(t){return(t.flags&128)===128}var U0=new Map,uU=0;function lU(){return uU++}function dU(t){U0.set(t[Lh],t)}function f_(t){U0.delete(t[Lh])}var pS="__ngContext__";function Ds(t,e){Mi(e)?(t[pS]=e[Lh],dU(e)):t[pS]=e}function j0(t){return $0(t[ou])}function B0(t){return $0(t[er])}function $0(t){for(;t!==null&&!Jr(t);)t=t[er];return t}var p_;function H0(t){p_=t}function hU(){if(p_!==void 0)return p_;if(typeof document<"u")return document;throw new G(210,!1)}var ny=new V("",{providedIn:"root",factory:()=>fU}),fU="ng",ry=new V(""),nr=new V("",{providedIn:"platform",factory:()=>"unknown"});var iy=new V("",{providedIn:"root",factory:()=>hU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var pU="h",gU="b";var mU=()=>null;function sy(t,e,n=!1){return mU(t,e,n)}var q0=!1,_U=new V("",{providedIn:"root",factory:()=>q0});var g_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${hL})`}};function oy(t){return t instanceof g_?t.changingThisBreaksApplicationSecurity:t}function G0(t){return t instanceof Function?t():t}var zr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(zr||{}),yU;function ay(t,e){return yU(t,e)}function Go(t,e,n,r,i){if(r!=null){let s,o=!1;Jr(r)?s=r:Mi(r)&&(o=!0,r=r[Zr]);let a=Tr(r);t===0&&n!==null?i==null?Q0(e,n,a):Dh(e,n,a,i||null,!0):t===1&&n!==null?Dh(e,n,a,i||null,!0):t===2?PU(e,a,o):t===3&&e.destroyNode(a),s!=null&&OU(e,t,s,n,i)}}function vU(t,e){return t.createText(e)}function IU(t,e,n){t.setValue(e,n)}function z0(t,e,n){return t.createElement(e,n)}function wU(t,e){W0(t,e),e[Zr]=null,e[tr]=null}function EU(t,e,n,r,i,s){r[Zr]=i,r[tr]=e,Bh(t,r,n,1,i,s)}function W0(t,e){e[Gr].changeDetectionScheduler?.notify(9),Bh(t,e,e[Et],2,null,null)}function CU(t){let e=t[ou];if(!e)return Bm(t[pe],t);for(;e;){let n=null;if(Mi(e))n=e[ou];else{let r=e[En];r&&(n=r)}if(!n){for(;e&&!e[er]&&e!==t;)Mi(e)&&Bm(e[pe],e),e=e[en];e===null&&(e=t),Mi(e)&&Bm(e[pe],e),n=e&&e[er]}e=n}}function TU(t,e,n,r){let i=En+r,s=n.length;r>0&&(n[i-1][er]=e),r<s-En?(e[er]=n[i],LS(n,En+r,e)):(n.push(e),e[er]=null),e[en]=n;let o=e[Jo];o!==null&&n!==o&&K0(o,e);let a=e[Xo];a!==null&&a.insertView(t),r_(e),e[ne]|=128}function K0(t,e){let n=t[mh],r=e[en];if(Mi(r))t[ne]|=_h.HasTransplantedViews;else{let i=r[en][Cr];e[Cr]!==i&&(t[ne]|=_h.HasTransplantedViews)}n===null?t[mh]=[e]:n.push(e)}function cy(t,e){let n=t[mh],r=n.indexOf(e);n.splice(r,1)}function bh(t,e){if(t.length<=En)return;let n=En+e,r=t[n];if(r){let i=r[Jo];i!==null&&i!==t&&cy(i,r),e>0&&(t[n-1][er]=r[er]);let s=dh(t,En+e);wU(r[pe],r);let o=s[Xo];o!==null&&o.detachView(s[pe]),r[en]=null,r[er]=null,r[ne]&=-129}return r}function uy(t,e){if(!(e[ne]&256)){let n=e[Et];n.destroyNode&&Bh(t,e,n,3,null,null),CU(e)}}function Bm(t,e){if(e[ne]&256)return;let n=Ie(null);try{e[ne]&=-129,e[ne]|=256,e[Pn]&&wd(e[Pn]),DU(t,e),bU(t,e),e[pe].type===1&&e[Et].destroy();let r=e[Jo];if(r!==null&&Jr(e[en])){r!==e[en]&&cy(r,e);let i=e[Xo];i!==null&&i.detachView(t)}f_(e)}finally{Ie(n)}}function bU(t,e){let n=t.cleanup,r=e[ph];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[ph]=null);let i=e[Ni];if(i!==null){e[Ni]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function DU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof bs)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Ir(4,a,c);try{c.call(a)}finally{Ir(5,a,c)}}else{Ir(4,i,s);try{s.call(i)}finally{Ir(5,i,s)}}}}}function SU(t,e,n){return AU(t,e.parent,n)}function AU(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Zr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Er.None||s===Er.Emulated)return null}return Vn(r,n)}}function Dh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Q0(t,e,n){t.appendChild(e,n)}function gS(t,e,n,r,i){r!==null?Dh(t,e,n,r,i):Q0(t,e,n)}function Y0(t,e){return t.parentNode(e)}function RU(t,e){return t.nextSibling(e)}function NU(t,e,n){return xU(t,e,n)}function MU(t,e,n){return t.type&40?Vn(t,n):null}var xU=MU,mS;function ly(t,e,n,r){let i=SU(t,r,e),s=e[Et],o=r.parent||e[tr],a=NU(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)gS(s,i,n[c],a,!1);else gS(s,i,n,a,!1);mS!==void 0&&mS(s,r,e,n,i)}function eu(t,e){if(e!==null){let n=e.type;if(n&3)return Vn(e,t);if(n&4)return m_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return eu(t,r);{let i=t[e.index];return Jr(i)?m_(-1,i):Tr(i)}}else{if(n&128)return eu(t,e.next);if(n&32)return ay(e,t)()||Tr(t[e.index]);{let r=Z0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Cs(t[Cr]);return eu(i,r)}else return eu(t,e.next)}}}return null}function Z0(t,e){if(e!==null){let r=t[Cr][tr],i=e.projection;return r.projection[i]}return null}function m_(t,e){let n=En+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return eu(r,i)}return e[Es]}function PU(t,e,n){t.removeChild(null,e,n)}function dy(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Ds(Tr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)dy(t,e,n.child,r,i,s,!1),Go(e,t,i,a,s);else if(c&32){let l=ay(n,r),d;for(;d=l();)Go(e,t,i,d,s);Go(e,t,i,a,s)}else c&16?kU(t,e,r,n,i,s):Go(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Bh(t,e,n,r,i,s){dy(n,r,t.firstChild,e,i,s,!1)}function kU(t,e,n,r,i,s){let o=n[Cr],c=o[tr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Go(e,t,i,d,s)}else{let l=c,d=o[en];V0(r)&&(l.flags|=128),dy(t,e,l,d,i,s,!0)}}function OU(t,e,n,r,i){let s=n[Es],o=Tr(n);s!==o&&Go(e,t,r,s,i);for(let a=En;a<n.length;a++){let c=n[a];Bh(c[pe],c,t,e,r,s)}}function FU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:zr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=zr.Important),t.setStyle(n,r,i,s))}}function LU(t,e,n){t.setAttribute(e,"style",n)}function J0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function X0(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Zm(t,e,r),i!==null&&J0(t,e,i),s!==null&&LU(t,e,s)}var Ui={};function Se(t=1){eA(hn(),Ve(),oa()+t,!1)}function eA(t,e,n,r){if(!r)if((e[ne]&3)===3){let s=t.preOrderCheckHooks;s!==null&&sh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&oh(e,s,0,n)}Ts(n)}function Pe(t,e=fe.Default){let n=Ve();if(n===null)return ee(t,e);let r=Cn();return M0(r,n,Xt(t),e)}function tA(t,e,n,r,i,s){let o=Ie(null);try{let a=null;i&xi.SignalBased&&(a=e[r][yr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&xi.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):r0(e,a,r,s)}finally{Ie(o)}}function VU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ts(~i);else{let s=i,o=n[++r],a=n[++r];xV(o,s);let c=e[s];a(2,c)}}}finally{Ts(-1)}}function $h(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Zr]=i,f[ne]=r|4|128|8|64,(l!==null||t&&t[ne]&2048)&&(f[ne]|=2048),c0(f),f[en]=f[sa]=t,f[On]=n,f[Gr]=o||t&&t[Gr],f[Et]=a||t&&t[Et],f[Zo]=c||t&&t[Zo]||null,f[tr]=s,f[Lh]=lU(),f[fh]=d,f[e0]=l,f[Cr]=e.type==2?t[Cr]:f,f}function Hh(t,e,n,r,i){let s=t.data[e];if(s===null)s=UU(t,e,n,r,i),MV()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=SV();s.injectorIndex=o===null?-1:o.injectorIndex}return hu(s,!0),s}function UU(t,e,n,r,i){let s=f0(),o=p0(),a=o?s:s&&s.parent,c=t.data[e]=qU(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function nA(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function rA(t,e,n,r,i){let s=oa(),o=r&2;try{Ts(-1),o&&e.length>Fn&&eA(t,e,Fn,!1),Ir(o?2:0,i),n(r,i)}finally{Ts(s),Ir(o?3:1,i)}}function iA(t,e,n){if(n0(e)){let r=Ie(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{Ie(r)}}}function sA(t,e,n){h0()&&(YU(t,e,n,Vn(n,e)),(n.flags&64)===64&&dA(t,e,n))}function oA(t,e,n=Vn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function aA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=hy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function hy(t,e,n,r,i,s,o,a,c,l,d){let f=Fn+r,g=f+i,_=jU(f,g),I=typeof l=="function"?l():l;return _[pe]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function jU(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ui);return n}function BU(t,e,n,r){let s=r.get(_U,q0)||n===Er.ShadowDom,o=t.selectRootElement(e,s);return $U(o),o}function $U(t){HU(t)}var HU=()=>null;function qU(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return TV()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function _S(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=xi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?yS(r,n,l,a,c):yS(r,n,l,a)}return r}function yS(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function GU(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,_=g?g.inputs:null,I=g?g.outputs:null;c=_S(0,f.inputs,d,c,_),l=_S(1,f.outputs,d,l,I);let R=c!==null&&o!==null&&!j_(e)?aj(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function zU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function cA(t,e,n,r,i,s,o,a){let c=Vn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(fy(t,n,d,r,i),Vh(e)&&WU(n,e.index)):e.type&3?(r=zU(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function WU(t,e){let n=Fi(e,t);n[ne]&16||(n[ne]|=64)}function uA(t,e,n,r){if(h0()){let i=r===null?null:{"":-1},s=JU(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&lA(t,e,n,o,i,a),i&&XU(n,r,i)}n.mergedAttrs=iu(n.mergedAttrs,n.attrs)}function lA(t,e,n,r,i,s){for(let l=0;l<r.length;l++)a_(Eh(n,e),t,r[l].type);tj(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=nA(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=iu(n.mergedAttrs,d.hostAttrs),nj(t,n,e,c,d),ej(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}GU(t,n,s)}function KU(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;QU(o)!=a&&o.push(a),o.push(n,r,s)}}function QU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function YU(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Vh(n)&&rj(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Eh(n,e),Ds(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=ea(e,t,a,n);if(Ds(l,e),o!==null&&oj(e,a-i,l,c,n,o),Pi(c)){let d=Fi(n.index,e);d[On]=ea(e,t,a,n)}}}function dA(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=PV();try{Ts(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];i_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&ZU(c,l)}}finally{Ts(-1),i_(o)}}function ZU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function JU(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(GL(e,o.selectors,!1))if(r||(r=[]),Pi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;__(t,e,c)}else r.unshift(o),__(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function __(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function XU(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function ej(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Pi(e)&&(n[""]=t)}}function tj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function nj(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Is(i.type,!0)),o=new bs(s,Pi(i),Pe);t.blueprint[r]=o,n[r]=o,KU(t,e,r,nA(t,n,i.hostVars,Ui),i)}function rj(t,e,n){let r=Vn(e,t),i=aA(n),s=t[Gr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=qh(t,$h(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function ij(t,e,n,r,i,s){let o=Vn(t,e);sj(e[Et],o,s,t.value,n,r,i)}function sj(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?L_(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function oj(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];tA(r,n,c,l,d,f)}}function aj(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function hA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function fA(t,e){let n=t.contentQueries;if(n!==null){let r=Ie(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];_0(s),a.contentQueries(2,e[o],o)}}}finally{Ie(r)}}}function qh(t,e){return t[ou]?t[iS][er]=e:t[ou]=e,t[iS]=e,e}function y_(t,e,n){_0(0);let r=Ie(null);try{e(t,n)}finally{Ie(r)}}function cj(t){return t[ph]??=[]}function uj(t){return t.cleanup??=[]}function pA(t,e){let n=t[Zo],r=n?n.get(br,null):null;r&&r.handleError(e)}function fy(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];tA(d,l,r,a,c,i)}}function lj(t,e,n){let r=a0(e,t);IU(t[Et],r,n)}function dj(t,e){let n=Fi(e,t),r=n[pe];hj(r,n);let i=n[Zr];i!==null&&n[fh]===null&&(n[fh]=sy(i,n[Zo])),py(r,n,n[On])}function hj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function py(t,e,n){z_(e);try{let r=t.viewQuery;r!==null&&y_(1,r,n);let i=t.template;i!==null&&rA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Xo]?.finishViewCreation(t),t.staticContentQueries&&fA(t,e),t.staticViewQueries&&y_(2,t.viewQuery,n);let s=t.components;s!==null&&fj(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,W_()}}function fj(t,e){for(let n=0;n<e.length;n++)dj(t,e[n])}function pj(t,e,n,r){let i=Ie(null);try{let s=e.tView,a=t[ne]&4096?4096:16,c=$h(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Jo]=l;let d=t[Xo];return d!==null&&(c[Xo]=d.createEmbeddedView(s)),py(s,c,n),c}finally{Ie(i)}}function gj(t,e){let n=En+e;if(n<t.length)return t[n]}function v_(t,e){return!e||e.firstChild===null||V0(t)}function gA(t,e,n,r=!0){let i=e[pe];if(TU(i,e,t,n),r){let o=m_(n,t),a=e[Et],c=Y0(a,t[Es]);c!==null&&EU(i,t[tr],a,e,c,o)}let s=e[fh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function mj(t,e){let n=bh(t,e);return n!==void 0&&uy(n[pe],n),n}function Sh(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Tr(s)),Jr(s)&&_j(s,r);let o=n.type;if(o&8)Sh(t,e,n.child,r);else if(o&32){let a=ay(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=Z0(e,n);if(Array.isArray(a))r.push(...a);else{let c=Cs(e[Cr]);Sh(c[pe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function _j(t,e){for(let n=En;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&Sh(r[pe],r,i,e)}t[Es]!==t[Zr]&&e.push(t[Es])}var mA=[];function yj(t){return t[Pn]??vj(t)}function vj(t){let e=mA.pop()??Object.create(wj);return e.lView=t,e}function Ij(t){t.lView[Pn]!==t&&(t.lView=null,mA.push(t))}var wj=ge(F({},So),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{jh(t.lView)},consumerOnSignalRead(){this.lView[Pn]=this}});function Ej(t){let e=t[Pn]??Object.create(Cj);return e.lView=t,e}var Cj=ge(F({},So),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Cs(t.lView);for(;e&&!_A(e[pe]);)e=Cs(e);e&&u0(e)},consumerOnSignalRead(){this.lView[Pn]=this}});function _A(t){return t.type!==2}var Tj=100;function yA(t,e=!0,n=0){let r=t[Gr],i=r.rendererFactory,s=!1;s||i.begin?.();try{bj(t,n)}catch(o){throw e&&pA(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function bj(t,e){let n=g0();try{oS(!0),I_(t,e);let r=0;for(;Uh(t);){if(r===Tj)throw new G(103,!1);r++,I_(t,1)}}finally{oS(n)}}function Dj(t,e,n,r){let i=e[ne];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Gr].inlineEffectRunner?.flush(),z_(e);let a=!0,c=null,l=null;s||(_A(t)?(l=yj(e),c=zc(l)):cD()===null?(a=!1,l=Ej(e),c=zc(l)):e[Pn]&&(wd(e[Pn]),e[Pn]=null));try{c0(e),RV(t.bindingStartIndex),n!==null&&rA(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let _=t.preOrderCheckHooks;_!==null&&sh(e,_,null)}else{let _=t.preOrderHooks;_!==null&&oh(e,_,0,null),Lm(e,0)}if(o||Sj(e),vA(e,0),t.contentQueries!==null&&fA(t,e),!s)if(d){let _=t.contentCheckHooks;_!==null&&sh(e,_)}else{let _=t.contentHooks;_!==null&&oh(e,_,1),Lm(e,1)}VU(t,e);let f=t.components;f!==null&&wA(e,f,0);let g=t.viewQuery;if(g!==null&&y_(2,g,r),!s)if(d){let _=t.viewCheckHooks;_!==null&&sh(e,_)}else{let _=t.viewHooks;_!==null&&oh(e,_,2),Lm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ih]){for(let _ of e[ih])_();e[ih]=null}s||(e[ne]&=-73)}catch(d){throw s||jh(e),d}finally{l!==null&&(vd(l,c),a&&Ij(l)),W_()}}function vA(t,e){for(let n=j0(t);n!==null;n=B0(n))for(let r=En;r<n.length;r++){let i=n[r];IA(i,e)}}function Sj(t){for(let e=j0(t);e!==null;e=B0(e)){if(!(e[ne]&_h.HasTransplantedViews))continue;let n=e[mh];for(let r=0;r<n.length;r++){let i=n[r];u0(i)}}}function Aj(t,e,n){let r=Fi(e,t);IA(r,n)}function IA(t,e){G_(t)&&I_(t,e)}function I_(t,e){let r=t[pe],i=t[ne],s=t[Pn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Id(s)),o||=!1,s&&(s.dirty=!1),t[ne]&=-9217,o)Dj(r,t,r.template,t[On]);else if(i&8192){vA(t,1);let a=r.components;a!==null&&wA(t,a,1)}}function wA(t,e,n){for(let r=0;r<e.length;r++)Aj(t,e[r],n)}function gy(t,e){let n=g0()?64:1088;for(t[Gr].changeDetectionScheduler?.notify(e);t;){t[ne]|=n;let r=Cs(t);if(t_(t)&&!r)return t;t=r}return null}var ta=class{get rootNodes(){let e=this._lView,n=e[pe];return Sh(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[On]}set context(e){this._lView[On]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[en];if(Jr(e)){let n=e[gh],r=n?n.indexOf(this):-1;r>-1&&(bh(e,r),dh(n,r))}this._attachedToViewContainer=!1}uy(this._lView[pe],this._lView)}onDestroy(e){l0(this._lView,e)}markForCheck(){gy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){r_(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,yA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=t_(this._lView),n=this._lView[Jo];n!==null&&!e&&cy(n,this._lView),W0(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=t_(this._lView),r=this._lView[Jo];r!==null&&!n&&K0(r,this._lView),r_(this._lView)}};var Gee=new RegExp(`^(\\d+)*(${gU}|${pU})*(.*)`);var Rj=()=>null;function w_(t,e){return Rj(t,e)}var na=class{},Gh=new V("",{providedIn:"root",factory:()=>!1});var EA=new V(""),CA=new V(""),E_=class{},Ah=class{};function Nj(t){let e=Error(`No component factory found for ${dn(t)}.`);return e[Mj]=t,e}var Mj="ngComponent";var C_=class{resolveComponentFactory(e){throw Nj(e)}},ki=class{static{this.NULL=new C_}},ra=class{},Ps=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>xj()}}return t})();function xj(){let t=Ve(),e=Cn(),n=Fi(e.index,t);return(Mi(n)?n:t)[Et]}var Pj=(()=>{class t{static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>null})}}return t})();function T_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=KD(i,a);else if(s==2){let c=a,l=e[++o];r=KD(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Rh=class extends ki{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ws(e);return new au(n,this.ngModule)}};function vS(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:xi.None;e?n.push({propName:o,templateName:r,isSignal:(a&xi.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function kj(t){let e=t.toLowerCase();return e==="svg"?gV:e==="math"?mV:null}var au=class extends Ah{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=vS(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return vS(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=QL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Ie(null);try{i=i||this.ngModule;let o=i instanceof kn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new s_(e,o):e,c=a.get(ra,null);if(c===null)throw new G(407,!1);let l=a.get(Pj,null),d=a.get(na,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",I=r?BU(g,r,this.componentDef.encapsulation,a):z0(g,_,kj(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;I!==null&&(S=sy(I,a,!0));let P=hy(0,null,null,1,0,null,null,null,null,null,null),U=$h(null,P,null,R,null,null,f,g,a,null,S);z_(U);let H,K,Oe=null;try{let J=this.componentDef,C,v=null;J.findHostDirectiveDefs?(C=[],v=new Map,J.findHostDirectiveDefs(J,C,v),C.push(J)):C=[J];let w=Oj(U,I);Oe=Fj(w,I,J,C,U,f,g),K=q_(P,Fn),I&&Uj(g,J,I,r),n!==void 0&&jj(K,this.ngContentSelectors,n),H=Vj(Oe,J,C,v,U,[Bj]),py(P,U,null)}catch(J){throw Oe!==null&&f_(Oe),f_(U),J}finally{W_()}return new b_(this.componentType,H,ty(K,U),U,K)}finally{Ie(s)}}},b_=class extends E_{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ta(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;fy(s[pe],s,i,e,n),this.previousInputValues.set(e,n);let o=Fi(this._tNode.index,s);gy(o,1)}}get injector(){return new vs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Oj(t,e){let n=t[pe],r=Fn;return t[r]=e,Hh(n,r,2,"#host",null)}function Fj(t,e,n,r,i,s,o){let a=i[pe];Lj(r,t,e,o);let c=null;e!==null&&(c=sy(e,i[Zo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=$h(i,aA(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&__(a,t,r.length-1),qh(i,f),i[t.index]=f}function Lj(t,e,n,r){for(let i of t)e.mergedAttrs=iu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(T_(e,e.mergedAttrs,!0),n!==null&&X0(r,n,e))}function Vj(t,e,n,r,i,s){let o=Cn(),a=i[pe],c=Vn(o,i);lA(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=ea(i,a,f,o);Ds(g,i)}dA(a,i,o),c&&Ds(c,i);let l=ea(i,a,o.directiveStart+o.componentOffset,o);if(t[On]=i[On]=l,s!==null)for(let d of s)d(l,e);return iA(a,o,i),l}function Uj(t,e,n,r){if(r)Zm(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=YL(e.selectors[0]);i&&Zm(t,n,i),s&&s.length>0&&J0(t,n,s.join(" "))}}function jj(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Bj(){let t=Cn();Z_(Ve()[pe],t)}var zh=(()=>{class t{static{this.__NG_ELEMENT_ID__=$j}}return t})();function $j(){let t=Cn();return qj(t,Ve())}var Hj=zh,TA=class extends Hj{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ty(this._hostTNode,this._hostLView)}get injector(){return new vs(this._hostTNode,this._hostLView)}get parentInjector(){let e=J_(this._hostTNode,this._hostLView);if(b0(e)){let n=Ih(e,this._hostLView),r=vh(e),i=n[pe].data[r+8];return new vs(i,n)}else return new vs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=IS(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=w_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,v_(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!dV(e),a;if(o)a=n;else{let I=n||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}let c=o?e:new au(ws(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(kn,null);R&&(s=R)}let d=ws(c.componentType??{}),f=w_(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,v_(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(yV(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[en],l=new TA(c,c[tr],c[en]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return gA(o,i,s,r),e.attachToViewContainerRef(),LS($m(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=IS(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=bh(this._lContainer,n);r&&(dh($m(this._lContainer),n),uy(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=bh(this._lContainer,n);return r&&dh($m(this._lContainer),n)!=null?new ta(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function IS(t){return t[gh]}function $m(t){return t[gh]||(t[gh]=[])}function qj(t,e){let n,r=e[t.index];return Jr(r)?n=r:(n=hA(r,e,null,t),e[t.index]=n,qh(e,n)),zj(n,e,t,r),new TA(n,t,e)}function Gj(t,e){let n=t[Et],r=n.createComment(""),i=Vn(e,t),s=Y0(n,i);return Dh(n,s,r,RU(n,i),!1),r}var zj=Qj,Wj=()=>!1;function Kj(t,e,n){return Wj(t,e,n)}function Qj(t,e,n,r){if(t[Es])return;let i;n.type&8?i=Tr(r):i=Gj(e,n),t[Es]=i}var wS=new Set;function ks(t){wS.has(t)||(wS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Yj(t){return typeof t=="function"&&t[yr]!==void 0}function Ue(t,e){ks("NgSignals");let n=ID(t),r=n[yr];return e?.equal&&(r.equal=e.equal),n.set=i=>_m(r,i),n.update=i=>wD(r,i),n.asReadonly=Zj.bind(n),n}function Zj(){let t=this[yr];if(t.readonlyFn===void 0){let e=()=>this();e[yr]=t,t.readonlyFn=e}return t.readonlyFn}function bA(t){return Yj(t)&&typeof t.set=="function"}function Jj(t){return Object.getPrototypeOf(t.prototype).constructor}function rr(t){let e=Jj(t.type),n=!0,r=[t];for(;e;){let i;if(Pi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=eh(t.inputs),o.inputTransforms=eh(t.inputTransforms),o.declaredInputs=eh(t.declaredInputs),o.outputs=eh(t.outputs);let a=i.hostBindings;a&&r2(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&t2(t,c),l&&n2(t,l),Xj(t,i),gL(t.outputs,i.outputs),Pi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===rr&&(n=!1)}}e=Object.getPrototypeOf(e)}e2(r)}function Xj(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function e2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=iu(i.hostAttrs,n=iu(n,i.hostAttrs))}}function eh(t){return t===Ko?{}:t===xn?[]:t}function t2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function n2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function r2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Oi=class{},cu=class{};var D_=class extends Oi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Rh(this);let s=zS(e);this._bootstrapComponents=G0(s.bootstrap),this._r3Injector=k0(e,n,[{provide:Oi,useValue:this},{provide:ki,useValue:this.componentFactoryResolver},...r],dn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},S_=class extends cu{constructor(e){super(),this.moduleType=e}create(e){return new D_(this.moduleType,e,[])}};var Nh=class extends Oi{constructor(e){super(),this.componentFactoryResolver=new Rh(this),this.instance=null;let n=new su([...e.providers,{provide:Oi,useValue:this},{provide:ki,useValue:this.componentFactoryResolver}],e.parent||$_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function my(t,e,n=null){return new Nh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function DA(t,e,n){return t[e]=n}function Wr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function i2(t,e,n,r){let i=Wr(t,e,n);return Wr(t,e+1,r)||i}function s2(t){return(t.flags&32)===32}function o2(t,e,n,r,i,s,o,a,c){let l=e.consts,d=Hh(e,t,4,o||null,a||null);uA(e,n,d,yh(l,c)),Z_(e,d);let f=d.tView=hy(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function a2(t,e,n,r,i,s,o,a,c,l){let d=n+Fn,f=e.firstCreatePass?o2(d,e,t,r,i,s,o,a,c):e.data[d];hu(f,!1);let g=c2(e,t,f,n);Q_()&&ly(e,t,g,f),Ds(g,t);let _=hA(g,t,g,f);return t[d]=_,qh(t,_),Kj(_,f,t),H_(f)&&sA(e,t,f),c!=null&&oA(t,f,l),f}function Un(t,e,n,r,i,s,o,a){let c=Ve(),l=hn(),d=yh(l.consts,s);return a2(c,l,t,e,n,r,i,d,o,a),Un}var c2=u2;function u2(t,e,n,r){return Y_(!0),e[Et].createComment("")}var tu=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(tu||{}),l2=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}}return t})(),ES=class t{constructor(){this.ngZone=M(X),this.scheduler=M(na),this.errorHandler=M(br,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[tu.EarlyRead,tu.Write,tu.MixedReadWrite,tu.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}};function pu(t,e,n,r){let i=Ve(),s=fu();if(Wr(i,s,e)){let o=hn(),a=K_();ij(a,i,t,e,n,r)}return pu}function d2(t,e,n,r){return Wr(t,fu(),n)?e+L_(n)+r:Ui}function th(t,e){return t<<17|e<<2}function Ss(t){return t>>17&32767}function h2(t){return(t&2)==2}function f2(t,e){return t&131071|e<<17}function A_(t){return t|2}function ia(t){return(t&131068)>>2}function Hm(t,e){return t&-131069|e<<2}function p2(t){return(t&1)===1}function R_(t){return t|1}function g2(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Ss(o),c=ia(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||du(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=Ss(t[a+1]);t[r+1]=th(g,a),g!==0&&(t[g+1]=Hm(t[g+1],r)),t[a+1]=f2(t[a+1],r)}else t[r+1]=th(a,0),a!==0&&(t[a+1]=Hm(t[a+1],r)),a=r;else t[r+1]=th(c,0),a===0?a=r:t[c+1]=Hm(t[c+1],r),c=r;l&&(t[r+1]=A_(t[r+1])),CS(t,d,r,!0),CS(t,d,r,!1),m2(e,d,t,r,s),o=th(a,c),s?e.classBindings=o:e.styleBindings=o}function m2(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&du(s,e)>=0&&(n[r+1]=R_(n[r+1]))}function CS(t,e,n,r){let i=t[n+1],s=e===null,o=r?Ss(i):ia(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];_2(c,e)&&(a=!0,t[o+1]=r?R_(l):A_(l)),o=r?Ss(l):ia(l)}a&&(t[n+1]=r?A_(i):R_(i))}function _2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?du(t,e)>=0:!1}function fn(t,e,n){let r=Ve(),i=fu();if(Wr(r,i,e)){let s=hn(),o=K_();cA(s,o,r,t,e,r[Et],n,!1)}return fn}function TS(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";fy(t,n,s[o],o,r)}function Wh(t,e,n){return SA(t,e,n,!1),Wh}function Kh(t,e){return SA(t,e,null,!0),Kh}function SA(t,e,n,r){let i=Ve(),s=hn(),o=NV(2);if(s.firstUpdatePass&&v2(s,t,o,r),e!==Ui&&Wr(i,o,e)){let a=s.data[oa()];T2(s,a,i,i[Et],t,i[o+1]=b2(e,n),r,o)}}function y2(t,e){return e>=t.expandoStartIndex}function v2(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[oa()],o=y2(t,n);D2(s,r)&&e===null&&!o&&(e=!1),e=I2(i,s,e,r),g2(i,s,e,n,o,r)}}function I2(t,e,n,r){let i=kV(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=qm(null,t,e,n,r),n=uu(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=qm(i,t,e,n,r),s===null){let c=w2(t,e,r);c!==void 0&&Array.isArray(c)&&(c=qm(null,t,e,c[1],r),c=uu(c,e.attrs,r),E2(t,e,r,c))}else s=C2(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function w2(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ia(r)!==0)return t[Ss(r)]}function E2(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Ss(i)]=r}function C2(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=uu(r,o,n)}return uu(r,e.attrs,n)}function qm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=uu(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function uu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),FL(t,o,n?!0:e[++s]))}return t===void 0?null:t}function T2(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=p2(l)?bS(c,e,n,i,ia(l),o):void 0;if(!Mh(d)){Mh(s)||h2(l)&&(s=bS(c,null,n,i,a,o));let f=a0(oa(),n);FU(r,o,f,i,s)}}function bS(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===Ui&&(g=f?xn:void 0);let _=f?Om(g,r):d===r?g:void 0;if(l&&!Mh(_)&&(_=Om(c,r)),Mh(_)&&(a=_,o))return a;let I=t[i+1];i=o?Ss(I):ia(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Om(c,r))}return a}function Mh(t){return t!==void 0}function b2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=dn(oy(t)))),t}function D2(t,e){return(t.flags&(e?8:16))!==0}function jn(t,e){ks("NgControlFlow");let n=Ve(),r=fu(),i=n[r]!==Ui?n[r]:-1,s=i!==-1?DS(n,Fn+i):void 0,o=0;if(Wr(n,r,t)){let a=Ie(null);try{if(s!==void 0&&mj(s,o),t!==-1){let c=Fn+t,l=DS(n,c),d=S2(n[pe],c),f=w_(l,d.tView.ssrId),g=pj(n,d,e,{dehydratedView:f});gA(l,g,o,v_(d,f))}}finally{Ie(a)}}else if(s!==void 0){let a=gj(s,o);a!==void 0&&(a[On]=e)}}function DS(t,e){return t[e]}function S2(t,e){return q_(t,e)}function A2(t,e,n,r,i,s){let o=e.consts,a=yh(o,i),c=Hh(e,t,2,r,a);return uA(e,n,c,yh(o,s)),c.attrs!==null&&T_(c,c.attrs,!1),c.mergedAttrs!==null&&T_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function Q(t,e,n,r){let i=Ve(),s=hn(),o=Fn+t,a=i[Et],c=s.firstCreatePass?A2(o,s,i,e,n,r):s.data[o],l=R2(s,i,c,a,e,t);i[o]=l;let d=H_(c);return hu(c,!0),X0(a,l,c),!s2(c)&&Q_()&&ly(s,i,l,c),wV()===0&&Ds(l,i),EV(),d&&(sA(s,i,c),iA(s,c,i)),r!==null&&oA(i,c),Q}function Y(){let t=Cn();p0()?AV():(t=t.parent,hu(t,!1));let e=t;bV(e)&&DV(),CV();let n=hn();return n.firstCreatePass&&(Z_(n,t),n0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&BV(e)&&TS(n,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&$V(e)&&TS(n,e,Ve(),e.stylesWithoutHost,!1),Y}function ir(t,e,n,r){return Q(t,e,n,r),Y(),ir}var R2=(t,e,n,r,i,s)=>(Y_(!0),z0(r,i,LV()));function Qh(){return Ve()}var ys=void 0;function N2(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var M2=["en",[["a","p"],["AM","PM"],ys],[["AM","PM"],ys,ys],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ys,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ys,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ys,"{1} 'at' {0}",ys],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",N2],Gm={};function Bn(t){let e=x2(t),n=SS(e);if(n)return n;let r=e.split("-")[0];if(n=SS(r),n)return n;if(r==="en")return M2;throw new G(701,!1)}function SS(t){return t in Gm||(Gm[t]=Xc.ng&&Xc.ng.common&&Xc.ng.common.locales&&Xc.ng.common.locales[t]),Gm[t]}var lt=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(lt||{});function x2(t){return t.toLowerCase().replace(/_/g,"-")}var xh="en-US";var P2=xh;function k2(t){typeof t=="string"&&(P2=t.toLowerCase().replace(/_/g,"-"))}var O2=(t,e,n)=>{};function tn(t,e,n,r){let i=Ve(),s=hn(),o=Cn();return AA(s,i,i[Et],o,t,e,r),tn}function F2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[ph],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function AA(t,e,n,r,i,s,o){let a=H_(r),l=t.firstCreatePass&&uj(t),d=e[On],f=cj(e),g=!0;if(r.type&3||o){let R=Vn(r,e),S=o?o(R):R,P=f.length,U=o?K=>o(Tr(K[r.index])):r.index,H=null;if(!o&&a&&(H=F2(t,e,i,r.index)),H!==null){let K=H.__ngLastListenerFn__||H;K.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,g=!1}else{s=RS(r,e,d,s),O2(R,i,s);let K=n.listen(S,i,s);f.push(s,K),l&&l.push(i,U,P,P+1)}}else s=RS(r,e,d,s);let _=r.outputs,I;if(g&&_!==null&&(I=_[i])){let R=I.length;if(R)for(let S=0;S<R;S+=2){let P=I[S],U=I[S+1],Oe=e[P][U].subscribe(s),J=f.length;f.push(s,Oe),l&&l.push(i,r.index,J,-(J+1))}}}function AS(t,e,n,r){let i=Ie(null);try{return Ir(6,e,n),n(r)!==!1}catch(s){return pA(t,s),!1}finally{Ir(7,e,n),Ie(i)}}function RS(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Fi(t.index,e):e;gy(o,5);let a=AS(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=AS(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Pt(t=1){return FV(t)}function L2(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function re(t,e=""){let n=Ve(),r=hn(),i=t+Fn,s=r.firstCreatePass?Hh(r,i,1,e,null):r.data[i],o=V2(r,n,s,e,t);n[i]=o,Q_()&&ly(r,n,o,s),hu(s,!1)}var V2=(t,e,n,r,i)=>(Y_(!0),vU(e[Et],r));function _y(t){return St("",t,""),_y}function St(t,e,n){let r=Ve(),i=d2(r,t,e,n);return i!==Ui&&lj(r,oa(),i),St}function yy(t,e,n){bA(e)&&(e=e());let r=Ve(),i=fu();if(Wr(r,i,e)){let s=hn(),o=K_();cA(s,o,r,t,e,r[Et],n,!1)}return yy}function RA(t,e){let n=bA(t);return n&&t.set(e),n}function vy(t,e){let n=Ve(),r=hn(),i=Cn();return AA(r,n,n[Et],i,t,e),vy}function U2(t,e,n){let r=hn();if(r.firstCreatePass){let i=Pi(t);N_(n,r.data,r.blueprint,i,!0),N_(e,r.data,r.blueprint,i,!1)}}function N_(t,e,n,r,i){if(t=Xt(t),Array.isArray(t))for(let s=0;s<t.length;s++)N_(t[s],e,n,r,i);else{let s=hn(),o=Ve(),a=Cn(),c=Yo(t)?t:Xt(t.provide),l=JS(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(Yo(t)||!t.multi){let _=new bs(l,i,Pe),I=Wm(c,e,i?d:d+g,f);I===-1?(a_(Eh(a,o),s,c),zm(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[I]=_,o[I]=_)}else{let _=Wm(c,e,d+g,f),I=Wm(c,e,d,d+g),R=_>=0&&n[_],S=I>=0&&n[I];if(i&&!S||!i&&!R){a_(Eh(a,o),s,c);let P=$2(i?B2:j2,n.length,i,r,l);!i&&S&&(n[I].providerFactory=P),zm(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=NA(n[i?I:_],l,!i&&r);zm(s,t,_>-1?_:I,P)}!i&&r&&S&&n[I].componentProviders++}}}function zm(t,e,n,r){let i=Yo(e),s=iV(e);if(i||s){let c=(s?Xt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function NA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Wm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function j2(t,e,n,r){return M_(this.multi,[])}function B2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ea(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),M_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],M_(i,s);return s}function M_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function $2(t,e,n,r,i){let s=new bs(t,n,Pe);return s.multi=[],s.index=e,s.componentProviders=0,NA(s,i,r&&!n),s}function Os(t,e=[]){return n=>{n.providersResolver=(r,i)=>U2(r,i?i(t):t,e)}}var H2=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=QS(!1,n.type),i=r.length>0?my([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=j({token:t,providedIn:"environment",factory:()=>new t(ee(kn))})}}return t})();function $n(t){ks("NgStandalone"),t.getStandaloneInjector=e=>e.get(H2).getOrCreateStandaloneInjector(t)}function ca(t,e,n,r){return q2(Ve(),m0(),t,e,n,r)}function MA(t,e){let n=t[e];return n===Ui?void 0:n}function q2(t,e,n,r,i,s){let o=e+n;return Wr(t,o,i)?DA(t,o+1,s?r.call(s,i):r(i)):MA(t,o+1)}function G2(t,e,n,r,i,s,o){let a=e+n;return i2(t,a,i,s)?DA(t,a+2,o?r.call(o,i,s):r(i,s)):MA(t,a+2)}function ua(t,e){let n=hn(),r,i=t+Fn;n.firstCreatePass?(r=z2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Is(r.type,!0)),o,a=ln(Pe);try{let c=wh(!1),l=s();return wh(c),L2(n,Ve(),i,l),l}finally{ln(a)}}function z2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function la(t,e,n,r){let i=t+Fn,s=Ve(),o=_V(s,i);return W2(s,i)?G2(s,m0(),e,o.transform,n,r,o):o.transform(n,r)}function W2(t,e){return t[pe].data[e].pure}var Kr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},xA=new Kr("18.2.13");var Yh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var PA=new V("");function Fs(t){return!!t&&typeof t.then=="function"}function kA(t){return!!t&&typeof t.subscribe=="function"}var ji=new V(""),OA=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=M(ji,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Fs(s))n.push(s);else if(kA(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Iy=new V("");function K2(){vD(()=>{throw new G(600,!1)})}function Q2(t){return t.isBoundToModule}var Y2=10;function Z2(t,e,n){try{let r=n();return Fs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ls=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(aU),this.afterRenderManager=M(l2),this.zonelessEnabled=M(Gh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ze,this.afterTick=new Ze,this.componentTypes=[],this.components=[],this.isStable=M(xs).hasPendingTasks.pipe(z(n=>!n)),this._injector=M(kn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Ah;if(!this._injector.get(OA).done){let g=!i&&GS(n),_=!1;throw new G(405,_)}let o;i?o=n:o=this._injector.get(ki).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=Q2(o)?void 0:this._injector.get(Oi),c=r||o.selector,l=o.create(_e.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(PA,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ah(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new G(101,!1);let n=Ie(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ie(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(ra,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<Y2;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)J2(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Uh(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ah(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(Iy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ah(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ah(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function J2(t,e,n,r){if(!n&&!Uh(t))return;yA(t,e,n&&!r?0:1)}var x_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},wy=(()=>{class t{compileModuleSync(n){return new S_(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=zS(n),s=G0(i.declarations).reduce((o,a)=>{let c=ws(a);return c&&o.push(new au(c)),o},[]);return new x_(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var X2=(()=>{class t{constructor(){this.zone=M(X),this.changeDetectionScheduler=M(na),this.applicationRef=M(Ls)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),eB=new V("",{factory:()=>!1});function FA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new X(ge(F({},VA()),{scheduleInRootZone:n})),[{provide:X,useFactory:t},{provide:Qo,multi:!0,useFactory:()=>{let r=M(X2,{optional:!0});return()=>r.initialize()}},{provide:Qo,multi:!0,useFactory:()=>{let r=M(tB);return()=>{r.initialize()}}},e===!0?{provide:EA,useValue:!0}:[],{provide:CA,useValue:n??O0}]}function LA(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=FA({ngZoneFactory:()=>{let i=VA(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&ks("NgZone_CoalesceEvent"),new X(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return $e([{provide:eB,useValue:!0},{provide:Gh,useValue:!1},r])}function VA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var tB=(()=>{class t{constructor(){this.subscription=new nt,this.initialized=!1,this.zone=M(X),this.pendingTasks=M(xs)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{X.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{X.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var nB=(()=>{class t{constructor(){this.appRef=M(Ls),this.taskService=M(xs),this.ngZone=M(X),this.zonelessEnabled=M(Gh),this.disableScheduling=M(EA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new nt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Th):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(CA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof h_||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?dS:F0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Th+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,dS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function rB(){return typeof $localize<"u"&&$localize.locale||xh}var Zh=new V("",{providedIn:"root",factory:()=>M(Zh,fe.Optional|fe.SkipSelf)||rB()});var P_=new V("");function nh(t){return!t.moduleRef}function iB(t){let e=nh(t)?t.r3Injector:t.moduleRef.injector,n=e.get(X);return n.run(()=>{nh(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(br,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),nh(t)){let s=()=>e.destroy(),o=t.platformInjector.get(P_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(P_);o.add(s),t.moduleRef.onDestroy(()=>{ah(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return Z2(r,n,()=>{let s=e.get(OA);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Zh,xh);if(k2(o||xh),nh(t)){let a=e.get(Ls);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return sB(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function sB(t,e){let n=t.injector.get(Ls);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new G(-403,!1);e.push(t)}var ch=null;function oB(t=[],e){return _e.create({name:e,providers:[{provide:Oh,useValue:"platform"},{provide:P_,useValue:new Set([()=>ch=null])},...t]})}function aB(t=[]){if(ch)return ch;let e=oB(t);return ch=e,K2(),cB(e),e}function cB(t){t.get(ry,null)?.forEach(n=>n())}var Bi=(()=>{class t{static{this.__NG_ELEMENT_ID__=uB}}return t})();function uB(t){return lB(Cn(),Ve(),(t&16)===16)}function lB(t,e,n){if(Vh(t)&&!n){let r=Fi(t.index,e);return new ta(r,r)}else if(t.type&175){let r=e[Cr];return new ta(r,e)}return null}function UA(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=aB(r),s=[FA({}),{provide:na,useExisting:nB},...n||[]],o=new Nh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return iB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function gu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function pn(t,e){ks("NgSignals");let n=mD(t);return e?.equal&&(n[yr].equal=e.equal),n}function Hn(t){let e=Ie(null);try{return t()}finally{Ie(e)}}var dB=new V("",{providedIn:"root",factory:()=>M(hB)}),hB=(()=>{class t{static{this.\u0275prov=j({token:t,providedIn:"root",factory:()=>new k_})}}return t})(),k_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=M(xs),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},O_=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=CD(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(br,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function mu(t,e){ks("NgSignals"),!e?.injector&&Fh(mu);let n=e?.injector??M(_e),r=e?.manualCleanup!==!0?n.get(aa):null,i=new O_(n.get(dB),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(Bi,null,{optional:!0});return!s||!(s._lView[ne]&8)?i.watcher.notify():(s._lView[ih]??=[]).push(i.watcher.notify),i}var qA=null;function ni(){return qA}function GA(t){qA??=t}var af=class{};var Gn=new V(""),zA=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(gB),providedIn:"platform"})}}return t})();var gB=(()=>{class t extends zA{constructor(){super(),this._doc=M(Gn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ni().getBaseHref(this._doc)}onPopState(n){let r=ni().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ni().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function WA(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function jA(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Vs(t){return t&&t[0]!=="?"?"?"+t:t}var lf=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(KA),providedIn:"root"})}}return t})(),mB=new V(""),KA=(()=>{class t extends lf{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Gn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return WA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Vs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Vs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Vs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ee(zA),ee(mB,8))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var _u=(()=>{class t{constructor(n){this._subject=new pt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=vB(jA(BA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Vs(r))}normalize(n){return t.stripTrailingSlash(yB(this._basePath,BA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Vs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Vs}static{this.joinWithSlash=WA}static{this.stripTrailingSlash=jA}static{this.\u0275fac=function(r){return new(r||t)(ee(lf))}}static{this.\u0275prov=j({token:t,factory:()=>_B(),providedIn:"root"})}}return t})();function _B(){return new _u(ee(lf))}function yB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function BA(t){return t.replace(/\/index.html$/,"")}function vB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var nn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(nn||{}),je=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(je||{}),Tn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(Tn||{}),$i={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function IB(t){return Bn(t)[lt.LocaleId]}function wB(t,e,n){let r=Bn(t),i=[r[lt.DayPeriodsFormat],r[lt.DayPeriodsStandalone]],s=qn(i,e);return qn(s,n)}function EB(t,e,n){let r=Bn(t),i=[r[lt.DaysFormat],r[lt.DaysStandalone]],s=qn(i,e);return qn(s,n)}function CB(t,e,n){let r=Bn(t),i=[r[lt.MonthsFormat],r[lt.MonthsStandalone]],s=qn(i,e);return qn(s,n)}function TB(t,e){let r=Bn(t)[lt.Eras];return qn(r,e)}function Jh(t,e){let n=Bn(t);return qn(n[lt.DateFormat],e)}function Xh(t,e){let n=Bn(t);return qn(n[lt.TimeFormat],e)}function ef(t,e){let r=Bn(t)[lt.DateTimeFormat];return qn(r,e)}function df(t,e){let n=Bn(t),r=n[lt.NumberSymbols][e];if(typeof r>"u"){if(e===$i.CurrencyDecimal)return n[lt.NumberSymbols][$i.Decimal];if(e===$i.CurrencyGroup)return n[lt.NumberSymbols][$i.Group]}return r}function QA(t){if(!t[lt.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[lt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function bB(t){let e=Bn(t);return QA(e),(e[lt.ExtraData][2]||[]).map(r=>typeof r=="string"?Ey(r):[Ey(r[0]),Ey(r[1])])}function DB(t,e,n){let r=Bn(t);QA(r);let i=[r[lt.ExtraData][0],r[lt.ExtraData][1]],s=qn(i,e)||[];return qn(s,n)||[]}function qn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Ey(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var SB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,tf={},AB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,ti=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(ti||{}),Ne=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ne||{}),Re=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Re||{});function RB(t,e,n,r){let i=VB(t);e=ei(n,e)||e;let o=[],a;for(;e;)if(a=AB.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=ZA(r,c),i=LB(i,r,!0));let l="";return o.forEach(d=>{let f=OB(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function cf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ei(t,e){let n=IB(t);if(tf[n]??={},tf[n][e])return tf[n][e];let r="";switch(e){case"shortDate":r=Jh(t,Tn.Short);break;case"mediumDate":r=Jh(t,Tn.Medium);break;case"longDate":r=Jh(t,Tn.Long);break;case"fullDate":r=Jh(t,Tn.Full);break;case"shortTime":r=Xh(t,Tn.Short);break;case"mediumTime":r=Xh(t,Tn.Medium);break;case"longTime":r=Xh(t,Tn.Long);break;case"fullTime":r=Xh(t,Tn.Full);break;case"short":let i=ei(t,"shortTime"),s=ei(t,"shortDate");r=nf(ef(t,Tn.Short),[i,s]);break;case"medium":let o=ei(t,"mediumTime"),a=ei(t,"mediumDate");r=nf(ef(t,Tn.Medium),[o,a]);break;case"long":let c=ei(t,"longTime"),l=ei(t,"longDate");r=nf(ef(t,Tn.Long),[c,l]);break;case"full":let d=ei(t,"fullTime"),f=ei(t,"fullDate");r=nf(ef(t,Tn.Full),[d,f]);break}return r&&(tf[n][e]=r),r}function nf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function sr(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function NB(t,e){return sr(t,3).substring(0,e)}function gt(t,e,n=0,r=!1,i=!1){return function(s,o){let a=MB(t,s);if((n>0||a>-n)&&(a+=n),t===Ne.Hours)a===0&&n===-12&&(a=12);else if(t===Ne.FractionalSeconds)return NB(a,e);let c=df(o,$i.MinusSign);return sr(a,e,c,r,i)}}function MB(t,e){switch(t){case Ne.FullYear:return e.getFullYear();case Ne.Month:return e.getMonth();case Ne.Date:return e.getDate();case Ne.Hours:return e.getHours();case Ne.Minutes:return e.getMinutes();case Ne.Seconds:return e.getSeconds();case Ne.FractionalSeconds:return e.getMilliseconds();case Ne.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function He(t,e,n=nn.Format,r=!1){return function(i,s){return xB(i,s,t,e,n,r)}}function xB(t,e,n,r,i,s){switch(n){case Re.Months:return CB(e,i,r)[t.getMonth()];case Re.Days:return EB(e,i,r)[t.getDay()];case Re.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=bB(e),d=DB(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[_,I]=g,R=o>=_.hours&&a>=_.minutes,S=o<I.hours||o===I.hours&&a<I.minutes;if(_.hours<I.hours){if(R&&S)return!0}else if(R||S)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return wB(e,i,r)[o<12?0:1];case Re.Eras:return TB(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function rf(t){return function(e,n,r){let i=-1*r,s=df(n,$i.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case ti.Short:return(i>=0?"+":"")+sr(o,2,s)+sr(Math.abs(i%60),2,s);case ti.ShortGMT:return"GMT"+(i>=0?"+":"")+sr(o,1,s);case ti.Long:return"GMT"+(i>=0?"+":"")+sr(o,2,s)+":"+sr(Math.abs(i%60),2,s);case ti.Extended:return r===0?"Z":(i>=0?"+":"")+sr(o,2,s)+":"+sr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var PB=0,of=4;function kB(t){let e=cf(t,PB,1).getDay();return cf(t,0,1+(e<=of?of:of+7)-e)}function YA(t){let e=t.getDay(),n=e===0?-3:of-e;return cf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Cy(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=YA(n),o=kB(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return sr(i,t,df(r,$i.MinusSign))}}function sf(t,e=!1){return function(n,r){let s=YA(n).getFullYear();return sr(s,t,df(r,$i.MinusSign),e)}}var Ty={};function OB(t){if(Ty[t])return Ty[t];let e;switch(t){case"G":case"GG":case"GGG":e=He(Re.Eras,je.Abbreviated);break;case"GGGG":e=He(Re.Eras,je.Wide);break;case"GGGGG":e=He(Re.Eras,je.Narrow);break;case"y":e=gt(Ne.FullYear,1,0,!1,!0);break;case"yy":e=gt(Ne.FullYear,2,0,!0,!0);break;case"yyy":e=gt(Ne.FullYear,3,0,!1,!0);break;case"yyyy":e=gt(Ne.FullYear,4,0,!1,!0);break;case"Y":e=sf(1);break;case"YY":e=sf(2,!0);break;case"YYY":e=sf(3);break;case"YYYY":e=sf(4);break;case"M":case"L":e=gt(Ne.Month,1,1);break;case"MM":case"LL":e=gt(Ne.Month,2,1);break;case"MMM":e=He(Re.Months,je.Abbreviated);break;case"MMMM":e=He(Re.Months,je.Wide);break;case"MMMMM":e=He(Re.Months,je.Narrow);break;case"LLL":e=He(Re.Months,je.Abbreviated,nn.Standalone);break;case"LLLL":e=He(Re.Months,je.Wide,nn.Standalone);break;case"LLLLL":e=He(Re.Months,je.Narrow,nn.Standalone);break;case"w":e=Cy(1);break;case"ww":e=Cy(2);break;case"W":e=Cy(1,!0);break;case"d":e=gt(Ne.Date,1);break;case"dd":e=gt(Ne.Date,2);break;case"c":case"cc":e=gt(Ne.Day,1);break;case"ccc":e=He(Re.Days,je.Abbreviated,nn.Standalone);break;case"cccc":e=He(Re.Days,je.Wide,nn.Standalone);break;case"ccccc":e=He(Re.Days,je.Narrow,nn.Standalone);break;case"cccccc":e=He(Re.Days,je.Short,nn.Standalone);break;case"E":case"EE":case"EEE":e=He(Re.Days,je.Abbreviated);break;case"EEEE":e=He(Re.Days,je.Wide);break;case"EEEEE":e=He(Re.Days,je.Narrow);break;case"EEEEEE":e=He(Re.Days,je.Short);break;case"a":case"aa":case"aaa":e=He(Re.DayPeriods,je.Abbreviated);break;case"aaaa":e=He(Re.DayPeriods,je.Wide);break;case"aaaaa":e=He(Re.DayPeriods,je.Narrow);break;case"b":case"bb":case"bbb":e=He(Re.DayPeriods,je.Abbreviated,nn.Standalone,!0);break;case"bbbb":e=He(Re.DayPeriods,je.Wide,nn.Standalone,!0);break;case"bbbbb":e=He(Re.DayPeriods,je.Narrow,nn.Standalone,!0);break;case"B":case"BB":case"BBB":e=He(Re.DayPeriods,je.Abbreviated,nn.Format,!0);break;case"BBBB":e=He(Re.DayPeriods,je.Wide,nn.Format,!0);break;case"BBBBB":e=He(Re.DayPeriods,je.Narrow,nn.Format,!0);break;case"h":e=gt(Ne.Hours,1,-12);break;case"hh":e=gt(Ne.Hours,2,-12);break;case"H":e=gt(Ne.Hours,1);break;case"HH":e=gt(Ne.Hours,2);break;case"m":e=gt(Ne.Minutes,1);break;case"mm":e=gt(Ne.Minutes,2);break;case"s":e=gt(Ne.Seconds,1);break;case"ss":e=gt(Ne.Seconds,2);break;case"S":e=gt(Ne.FractionalSeconds,1);break;case"SS":e=gt(Ne.FractionalSeconds,2);break;case"SSS":e=gt(Ne.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=rf(ti.Short);break;case"ZZZZZ":e=rf(ti.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=rf(ti.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=rf(ti.Long);break;default:return null}return Ty[t]=e,e}function ZA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function FB(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function LB(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=ZA(e,i);return FB(t,r*(s-i))}function VB(t){if($A(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return cf(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(SB))return UB(r)}let e=new Date(t);if(!$A(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function UB(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function $A(t){return t instanceof Date&&!isNaN(t.valueOf())}function JA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var by=/\s+/,HA=[],da=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=HA,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(by):HA}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(by):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(by).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Pe(Vi),Pe(Ps))}}static{this.\u0275dir=xt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function jB(t,e){return new G(2100,!1)}var BB="mediumDate",$B=new V(""),HB=new V(""),hf=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??BB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return RB(n,o,s||this.locale,a)}catch(o){throw jB(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Pe(Zh,16),Pe($B,24),Pe(HB,24))}}static{this.\u0275pipe=$S({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Dy="browser",qB="server";function Sy(t){return t===Dy}function Ay(t){return t===qB}var uf=class{};var My=class extends af{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xy=class t extends My{static makeCurrent(){GA(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=GB();return n==null?null:zB(n)}resetBaseElement(){yu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return JA(document.cookie,e)}},yu=null;function GB(){return yu=yu||document.querySelector("base"),yu?yu.getAttribute("href"):null}function zB(t){return new URL(t,document.baseURI).pathname}var WB=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),Py=new V(""),nR=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(ee(Py),ee(X))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),ff=class{constructor(e){this._doc=e}},Ry="ng-app-id",rR=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ay(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${Ry}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(Ry),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Ry,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(ee(Gn),ee(ny),ee(iy,8),ee(nr))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),Ny={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Oy=/%COMP%/g,iR="%COMP%",KB=`_nghost-${iR}`,QB=`_ngcontent-${iR}`,YB=!0,ZB=new V("",{providedIn:"root",factory:()=>YB});function JB(t){return QB.replace(Oy,t)}function XB(t){return KB.replace(Oy,t)}function sR(t,e){return e.map(n=>n.replace(Oy,t))}var XA=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ay(a),this.defaultRenderer=new vu(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Er.ShadowDom&&(r=ge(F({},r),{encapsulation:Er.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof pf?i.applyToHost(n):i instanceof Iu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Er.Emulated:s=new pf(c,l,r,this.appId,d,o,a,f);break;case Er.ShadowDom:return new ky(c,l,n,r,o,a,this.nonce,f);default:s=new Iu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(ee(nR),ee(rR),ee(ny),ee(ZB),ee(Gn),ee(nr),ee(X),ee(iy))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),vu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ny[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(eR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(eR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Ny[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ny[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(zr.DashCase|zr.Important)?e.style.setProperty(n,r,i&zr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&zr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ni().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function eR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var ky=class extends vu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=sR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Iu=class extends vu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?sR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},pf=class extends Iu{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=JB(l),this.hostAttr=XB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},e$=(()=>{class t extends ff{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(ee(Gn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})(),tR=["alt","control","meta","shift"],t$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},r$=(()=>{class t extends ff{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ni().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),tR.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=t$[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),tR.forEach(o=>{if(o!==i){let a=n$[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(ee(Gn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac})}}return t})();function oR(t,e){return UA(F({rootComponent:t},i$(e)))}function i$(t){return{appProviders:[...u$,...t?.providers??[]],platformProviders:c$}}function s$(){xy.makeCurrent()}function o$(){return new br}function a$(){return H0(document),document}var c$=[{provide:nr,useValue:Dy},{provide:ry,useValue:s$,multi:!0},{provide:Gn,useFactory:a$,deps:[]}];var u$=[{provide:Oh,useValue:"root"},{provide:br,useFactory:o$,deps:[]},{provide:Py,useClass:e$,multi:!0,deps:[Gn,X,nr]},{provide:Py,useClass:r$,multi:!0,deps:[Gn]},XA,rR,nR,{provide:ra,useExisting:XA},{provide:uf,useClass:WB,deps:[]},[]];var gf=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(ee(Gn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var de="primary",Vu=Symbol("RouteTitle"),jy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function _a(t){return new jy(t)}function l$(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function d$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Dr(t[n],e[n]))return!1;return!0}function Dr(t,e){let n=t?By(t):void 0,r=e?By(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!gR(t[i],e[i]))return!1;return!0}function By(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function gR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function mR(t){return t.length>0?t[t.length-1]:null}function Hi(t){return Am(t)?t:Fs(t)?Qe(Promise.resolve(t)):Z(t)}var h$={exact:yR,subset:vR},_R={exact:f$,subset:p$,ignored:()=>!0};function cR(t,e,n){return h$[n.paths](t.root,e.root,n.matrixParams)&&_R[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function f$(t,e){return Dr(t,e)}function yR(t,e,n){if(!js(t.segments,e.segments)||!yf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!yR(t.children[r],e.children[r],n))return!1;return!0}function p$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>gR(t[n],e[n]))}function vR(t,e,n){return IR(t,e,e.segments,n)}function IR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!js(i,n)||e.hasChildren()||!yf(i,n,r))}else if(t.segments.length===n.length){if(!js(t.segments,n)||!yf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!vR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!js(t.segments,i)||!yf(t.segments,i,r)||!t.children[de]?!1:IR(t.children[de],e,s,r)}}function yf(t,e,n){return e.every((r,i)=>_R[n](t[i].parameters,r.parameters))}var ii=class{constructor(e=new Me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=_a(this.queryParams),this._queryParamMap}toString(){return _$.serialize(this)}},Me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vf(this)}},Us=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=_a(this.parameters),this._parameterMap}toString(){return ER(this)}};function g$(t,e){return js(t,e)&&t.every((n,r)=>Dr(n.parameters,e[r].parameters))}function js(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function m$(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===de&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==de&&(n=n.concat(e(i,r)))}),n}var hv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>new Su,providedIn:"root"})}}return t})(),Su=class{parse(e){let n=new Hy(e);return new ii(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${wu(e.root,!0)}`,r=I$(e.queryParams),i=typeof e.fragment=="string"?`#${y$(e.fragment)}`:"";return`${n}${r}${i}`}},_$=new Su;function vf(t){return t.segments.map(e=>ER(e)).join("/")}function wu(t,e){if(!t.hasChildren())return vf(t);if(e){let n=t.children[de]?wu(t.children[de],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==de&&r.push(`${i}:${wu(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=m$(t,(r,i)=>i===de?[wu(t.children[de],!1)]:[`${i}:${wu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[de]!=null?`${vf(t)}/${n[0]}`:`${vf(t)}/(${n.join("//")})`}}function wR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mf(t){return wR(t).replace(/%3B/gi,";")}function y$(t){return encodeURI(t)}function $y(t){return wR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function If(t){return decodeURIComponent(t)}function uR(t){return If(t.replace(/\+/g,"%20"))}function ER(t){return`${$y(t.path)}${v$(t.parameters)}`}function v$(t){return Object.entries(t).map(([e,n])=>`;${$y(e)}=${$y(n)}`).join("")}function I$(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${mf(n)}=${mf(i)}`).join("&"):`${mf(n)}=${mf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var w$=/^[^\/()?;#]+/;function Fy(t){let e=t.match(w$);return e?e[0]:""}var E$=/^[^\/()?;=#]+/;function C$(t){let e=t.match(E$);return e?e[0]:""}var T$=/^[^=?&#]+/;function b$(t){let e=t.match(T$);return e?e[0]:""}var D$=/^[^&#]+/;function S$(t){let e=t.match(D$);return e?e[0]:""}var Hy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[de]=new Me(e,n)),r}parseSegment(){let e=Fy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Us(If(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=C$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Fy(this.remaining);i&&(r=i,this.capture(r))}e[If(n)]=If(r)}parseQueryParam(e){let n=b$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=S$(this.remaining);o&&(r=o,this.capture(r))}let i=uR(n),s=uR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Fy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=de);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[de]:new Me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function CR(t){return t.segments.length>0?new Me([],{[de]:t}):t}function TR(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=TR(i);if(r===de&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Me(t.segments,e);return A$(n)}function A$(t){if(t.numberOfChildren===1&&t.children[de]){let e=t.children[de];return new Me(t.segments.concat(e.segments),e.children)}return t}function Au(t){return t instanceof ii}function R$(t,e,n=null,r=null){let i=bR(t);return DR(i,e,n,r)}function bR(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=CR(r);return e??i}function DR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return Ly(i,i,i,n,r);let s=N$(e);if(s.toRoot())return Ly(i,i,new Me([],{}),n,r);let o=M$(s,i,t),a=o.processChildren?Tu(o.segmentGroup,o.index,s.commands):AR(o.segmentGroup,o.index,s.commands);return Ly(i,o.segmentGroup,a,n,r)}function wf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ru(t){return typeof t=="object"&&t!=null&&t.outlets}function Ly(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=SR(t,e,n);let a=CR(TR(o));return new ii(a,s,i)}function SR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=SR(s,e,n)}),new Me(t.segments,r)}var Ef=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&wf(r[0]))throw new G(4003,!1);let i=r.find(Ru);if(i&&i!==mR(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function N$(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Ef(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Ef(n,e,r)}var pa=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function M$(t,e,n){if(t.isAbsolute)return new pa(e,!0,0);if(!n)return new pa(e,!1,NaN);if(n.parent===null)return new pa(n,!0,0);let r=wf(t.commands[0])?0:1,i=n.segments.length-1+r;return x$(n,i,t.numberOfDoubleDots)}function x$(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new pa(r,!1,i-s)}function P$(t){return Ru(t[0])?t[0].outlets:{[de]:t}}function AR(t,e,n){if(t??=new Me([],{}),t.segments.length===0&&t.hasChildren())return Tu(t,e,n);let r=k$(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Me(t.segments.slice(0,r.pathIndex),{});return s.children[de]=new Me(t.segments.slice(r.pathIndex),t.children),Tu(s,0,i)}else return r.match&&i.length===0?new Me(t.segments,{}):r.match&&!t.hasChildren()?qy(t,e,n):r.match?Tu(t,0,i):qy(t,e,n)}function Tu(t,e,n){if(n.length===0)return new Me(t.segments,{});{let r=P$(n),i={};if(Object.keys(r).some(s=>s!==de)&&t.children[de]&&t.numberOfChildren===1&&t.children[de].segments.length===0){let s=Tu(t.children[de],e,n);return new Me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=AR(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Me(t.segments,i)}}function k$(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ru(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!dR(c,l,o))return s;r+=2}else{if(!dR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function qy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ru(s)){let c=O$(s.outlets);return new Me(r,c)}if(i===0&&wf(n[0])){let c=t.segments[e];r.push(new Us(c.path,lR(n[0]))),i++;continue}let o=Ru(s)?s.outlets[de]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&wf(a)?(r.push(new Us(o,lR(a))),i+=2):(r.push(new Us(o,{})),i++)}return new Me(r,{})}function O$(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=qy(new Me([],{}),0,r))}),e}function lR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function dR(t,e,n){return t==n.path&&Dr(e,n.parameters)}var bu="imperative",kt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(kt||{}),zn=class{constructor(e,n){this.id=e,this.url=n}},Nu=class extends zn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=kt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Bs=class extends zn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=kt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Dn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Dn||{}),Gy=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Gy||{}),ri=class extends zn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=kt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},$s=class extends zn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=kt.NavigationSkipped}},Mu=class extends zn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=kt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Cf=class extends zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class extends zn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=kt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ky=class extends zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qy=class extends zn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=kt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yy=class{constructor(e){this.route=e,this.type=kt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zy=class{constructor(e){this.route=e,this.type=kt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jy=class{constructor(e){this.snapshot=e,this.type=kt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xy=class{constructor(e){this.snapshot=e,this.type=kt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ev=class{constructor(e){this.snapshot=e,this.type=kt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xu=class{constructor(e){this.snapshot=e,this.type=kt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Pu=class{},ya=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function F$(t,e){return t.providers&&!t._injector&&(t._injector=my(t.providers,e,`Route: ${t.path}`)),t._injector??e}function or(t){return t.outlet||de}function L$(t,e){let n=t.filter(r=>or(r)===e);return n.push(...t.filter(r=>or(r)!==e)),n}function Uu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var tv=class{get injector(){return Uu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Nf(this.rootInjector),this.attachRef=null}},Nf=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new tv(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(ee(kn))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Tf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=nv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=nv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=rv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return rv(e,this._root).map(n=>n.value)}};function nv(t,e){if(t===e.value)return e;for(let n of e.children){let r=nv(t,n);if(r)return r}return null}function rv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=rv(t,n);if(r.length)return r.unshift(e),r}return[]}var bn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function fa(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var bf=class extends Tf{constructor(e,n){super(e),this.snapshot=n,fv(this,e)}toString(){return this.snapshot.toString()}};function RR(t){let e=V$(t),n=new Mt([new Us("",{})]),r=new Mt({}),i=new Mt({}),s=new Mt({}),o=new Mt(""),a=new va(n,r,s,o,i,de,t,e.root);return a.snapshot=e.root,new bf(new bn(a,[]),e)}function V$(t){let e={},n={},r={},i="",s=new ga([],e,r,i,n,de,t,null,{});return new Sf("",new bn(s,[]))}var va=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(z(l=>l[Vu]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(z(e=>_a(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(z(e=>_a(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Df(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&MR(i)&&(r.resolve[Vu]=i.title),r}var ga=class{get title(){return this.data?.[Vu]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=_a(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=_a(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Sf=class extends Tf{constructor(e,n){super(n),this.url=e,fv(this,n)}toString(){return NR(this._root)}};function fv(t,e){e.value._routerState=t,e.children.forEach(n=>fv(t,n))}function NR(t){let e=t.children.length>0?` { ${t.children.map(NR).join(", ")} } `:"";return`${t.value}${e}`}function Vy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Dr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Dr(e.params,n.params)||t.paramsSubject.next(n.params),d$(e.url,n.url)||t.urlSubject.next(n.url),Dr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function iv(t,e){let n=Dr(t.params,e.params)&&g$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||iv(t.parent,e.parent))}function MR(t){return typeof t.title=="string"||t.title===null}var pv=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new pt,this.deactivateEvents=new pt,this.attachEvents=new pt,this.detachEvents=new pt,this.parentContexts=M(Nf),this.location=M(zh),this.changeDetector=M(Bi),this.inputBinder=M(gv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new sv(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=xt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xr]})}}return t})(),sv=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===va?this.route:e===Nf?this.childContexts:this.parent.get(e,n)}},gv=new V("");function U$(t,e,n){let r=ku(t,e._root,n?n._root:void 0);return new bf(r,e)}function ku(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=j$(t,e,n);return new bn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ku(t,a)),o}}let r=B$(e.value),i=e.children.map(s=>ku(t,s));return new bn(r,i)}}function j$(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ku(t,r,i);return ku(t,r)})}function B$(t){return new va(new Mt(t.url),new Mt(t.params),new Mt(t.queryParams),new Mt(t.fragment),new Mt(t.data),t.outlet,t.component,t)}var Ou=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},xR="ngNavigationCancelingError";function Af(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Au(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=PR(!1,Dn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function PR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[xR]=!0,n.cancellationCode=e,n}function $$(t){return kR(t)&&Au(t.url)}function kR(t){return!!t&&t[xR]}var H$=(t,e,n,r)=>z(i=>(new ov(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ov=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Vy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=fa(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=fa(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=fa(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new xu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Xy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Vy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Rf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ma=class{constructor(e,n){this.component=e,this.route=n}};function q$(t,e,n){let r=t._root,i=e?e._root:null;return Eu(r,i,n,[r.value])}function G$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function wa(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!MS(t)?t:e.get(t):r}function Eu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=fa(e);return t.children.forEach(o=>{z$(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Du(a,n.getContext(o),i)),i}function z$(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=W$(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Rf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Eu(t,e,a?a.children:null,r,i):Eu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ma(a.outlet.component,o))}else o&&Du(e,a,i),i.canActivateChecks.push(new Rf(r)),s.component?Eu(t,null,a?a.children:null,r,i):Eu(t,null,n,r,i);return i}function W$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!js(t.url,e.url);case"pathParamsOrQueryParamsChange":return!js(t.url,e.url)||!Dr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!iv(t,e)||!Dr(t.queryParams,e.queryParams);case"paramsChange":default:return!iv(t,e)}}function Du(t,e,n){let r=fa(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Du(o,e.children.getContext(s),n):Du(o,null,n):Du(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ma(e.outlet.component,i)):n.canDeactivateChecks.push(new ma(null,i)):n.canDeactivateChecks.push(new ma(null,i))}function ju(t){return typeof t=="function"}function K$(t){return typeof t=="boolean"}function Q$(t){return t&&ju(t.canLoad)}function Y$(t){return t&&ju(t.canActivate)}function Z$(t){return t&&ju(t.canActivateChild)}function J$(t){return t&&ju(t.canDeactivate)}function X$(t){return t&&ju(t.canMatch)}function OR(t){return t instanceof $r||t?.name==="EmptyError"}var _f=Symbol("INITIAL_VALUE");function Ia(){return un(t=>Dt(t.map(e=>e.pipe(qr(1),$o(_f)))).pipe(z(e=>{for(let n of e)if(n!==!0){if(n===_f)return _f;if(n===!1||eH(n))return n}return!0}),Jt(e=>e!==_f),qr(1)))}function eH(t){return Au(t)||t instanceof Ou}function tH(t,e){return ut(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Z(ge(F({},n),{guardsResult:!0})):nH(o,r,i,t).pipe(ut(a=>a&&K$(a)?rH(r,s,t,e):Z(a)),z(a=>ge(F({},n),{guardsResult:a})))})}function nH(t,e,n,r){return Qe(t).pipe(ut(i=>cH(i.component,i.route,n,e,r)),vr(i=>i!==!0,!0))}function rH(t,e,n,r){return Qe(e).pipe(_s(i=>jo(sH(i.route.parent,r),iH(i.route,r),aH(t,i.path,n),oH(t,i.route,n))),vr(i=>i!==!0,!0))}function iH(t,e){return t!==null&&e&&e(new ev(t)),Z(!0)}function sH(t,e){return t!==null&&e&&e(new Jy(t)),Z(!0)}function oH(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>Kd(()=>{let o=Uu(e)??n,a=wa(s,o),c=Y$(a)?a.canActivate(e,t):Yr(o,()=>a(e,t));return Hi(c).pipe(vr())}));return Z(i).pipe(Ia())}function aH(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>G$(o)).filter(o=>o!==null).map(o=>Kd(()=>{let a=o.guards.map(c=>{let l=Uu(o.node)??n,d=wa(c,l),f=Z$(d)?d.canActivateChild(r,t):Yr(l,()=>d(r,t));return Hi(f).pipe(vr())});return Z(a).pipe(Ia())}));return Z(s).pipe(Ia())}function cH(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=Uu(e)??i,l=wa(a,c),d=J$(l)?l.canDeactivate(t,e,n,r):Yr(c,()=>l(t,e,n,r));return Hi(d).pipe(vr())});return Z(o).pipe(Ia())}function uH(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=wa(o,t),c=Q$(a)?a.canLoad(e,n):Yr(t,()=>a(e,n));return Hi(c)});return Z(s).pipe(Ia(),FR(r))}function FR(t){return Ad(wt(e=>{if(typeof e!="boolean")throw Af(t,e)}),z(e=>e===!0))}function lH(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=wa(o,t),c=X$(a)?a.canMatch(e,n):Yr(t,()=>a(e,n));return Hi(c)});return Z(s).pipe(Ia(),FR(r))}var Fu=class{constructor(e){this.segmentGroup=e||null}},Lu=class extends Error{constructor(e){super(),this.urlTree=e}};function ha(t){return Uo(new Fu(t))}function dH(t){return Uo(new G(4e3,!1))}function hH(t){return Uo(PR(!1,Dn.GuardRejected))}var av=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[de])return dH(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:_,data:I,title:R}=i,S=Yr(s,()=>a({params:_,data:I,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(S instanceof ii)throw new Lu(S);n=S}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Lu(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ii(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},cv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fH(t,e,n,r,i){let s=LR(t,e,n);return s.matched?(r=F$(e,r),lH(r,e,n,i).pipe(z(o=>o===!0?s:F({},cv)))):Z(s)}function LR(t,e,n){if(e.path==="**")return pH(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},cv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||l$)(n,t,e);if(!i)return F({},cv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function pH(t){return{matched:!0,parameters:t.length>0?mR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function hR(t,e,n,r){return n.length>0&&_H(t,n,r)?{segmentGroup:new Me(e,mH(r,new Me(n,t.children))),slicedSegments:[]}:n.length===0&&yH(t,n,r)?{segmentGroup:new Me(t.segments,gH(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Me(t.segments,t.children),slicedSegments:n}}function gH(t,e,n,r){let i={};for(let s of n)if(Mf(t,e,s)&&!r[or(s)]){let o=new Me([],{});i[or(s)]=o}return F(F({},r),i)}function mH(t,e){let n={};n[de]=e;for(let r of t)if(r.path===""&&or(r)!==de){let i=new Me([],{});n[or(r)]=i}return n}function _H(t,e,n){return n.some(r=>Mf(t,e,r)&&or(r)!==de)}function yH(t,e,n){return n.some(r=>Mf(t,e,r))}function Mf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vH(t,e,n){return e.length===0&&!t.children[n]}var uv=class{};function IH(t,e,n,r,i,s,o="emptyOnly"){return new lv(t,e,n,r,i,o,s).recognize()}var wH=31,lv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new av(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=hR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(z(({children:n,rootSnapshot:r})=>{let i=new bn(r,n),s=new Sf("",i),o=R$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ga([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,n).pipe(z(r=>({children:r,rootSnapshot:n})),Si(r=>{if(r instanceof Lu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(z(o=>o instanceof bn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Qe(s).pipe(_s(o=>{let a=r.children[o],c=L$(n,o);return this.processSegmentGroup(e,c,a,o,i)}),Jd((o,a)=>(o.push(...a),o)),Ai(null),km(),ut(o=>{if(o===null)return ha(r);let a=VR(o);return EH(a),Z(a)}))}processSegment(e,n,r,i,s,o,a){return Qe(n).pipe(_s(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Si(l=>{if(l instanceof Fu)return Z(null);throw l}))),vr(c=>!!c),Si(c=>{if(OR(c))return vH(r,i,s)?Z(new uv):ha(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return or(r)!==o&&(o===de||!Mf(i,s,r))?ha(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):ha(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=LR(n,i,s);if(!c)return ha(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wH&&(this.allowRedirects=!1));let _=new ga(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,fR(i),or(i),i.component??i._loadedComponent??null,i,pR(i)),I=Df(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(I.params),_.data=Object.freeze(I.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(ut(S=>this.processSegment(e,r,n,S.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=fH(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(un(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(un(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:_}=c,I=new ga(g,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,fR(r),or(r),r.component??r._loadedComponent??null,r,pR(r)),R=Df(I,o,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:P}=hR(n,g,_,l);if(P.length===0&&S.hasChildren())return this.processChildren(d,l,S,I).pipe(z(H=>new bn(I,H)));if(l.length===0&&P.length===0)return Z(new bn(I,[]));let U=or(r)===s;return this.processSegment(d,l,S,P,U?de:s,!0,I).pipe(z(H=>new bn(I,H instanceof bn?[H]:[])))}))):ha(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):uH(e,n,r,this.urlSerializer).pipe(ut(i=>i?this.configLoader.loadChildren(e,n).pipe(wt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):hH(n))):Z({routes:[],injector:e})}};function EH(t){t.sort((e,n)=>e.value.outlet===de?-1:n.value.outlet===de?1:e.value.outlet.localeCompare(n.value.outlet))}function CH(t){let e=t.value.routeConfig;return e&&e.path===""}function VR(t){let e=[],n=new Set;for(let r of t){if(!CH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=VR(r.children);e.push(new bn(r.value,i))}return e.filter(r=>!n.has(r))}function fR(t){return t.data||{}}function pR(t){return t.resolve||{}}function TH(t,e,n,r,i,s){return ut(o=>IH(t,e,n,r,o.extractedUrl,i,s).pipe(z(({state:a,tree:c})=>ge(F({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function bH(t,e){return ut(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of UR(c))o.add(l);let a=0;return Qe(o).pipe(_s(c=>s.has(c)?DH(c,r,t,e):(c.data=Df(c,c.parent,t).resolve,Z(void 0))),wt(()=>a++),Bo(1),ut(c=>a===o.size?Z(n):wn))})}function UR(t){let e=t.children.map(n=>UR(n)).flat();return[t,...e]}function DH(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!MR(i)&&(s[Vu]=i.title),SH(s,t,e,r).pipe(z(o=>(t._resolvedData=o,t.data=Df(t,t.parent,n).resolve,null)))}function SH(t,e,n,r){let i=By(t);if(i.length===0)return Z({});let s={};return Qe(i).pipe(ut(o=>AH(t[o],e,n,r).pipe(vr(),wt(a=>{if(a instanceof Ou)throw Af(new Su,a);s[o]=a}))),Bo(1),xm(s),Si(o=>OR(o)?wn:Uo(o)))}function AH(t,e,n,r){let i=Uu(e)??r,s=wa(t,i),o=s.resolve?s.resolve(e,n):Yr(i,()=>s(e,n));return Hi(o)}function Uy(t){return un(e=>{let n=t(e);return n?Qe(n).pipe(z(()=>e)):Z(e)})}var jR=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===de);return r}getResolvedTitleForRoute(n){return n.data[Vu]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(RH),providedIn:"root"})}}return t})(),RH=(()=>{class t extends jR{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(ee(gf))}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),mv=new V("",{providedIn:"root",factory:()=>({})}),_v=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ln({type:t,selectors:[["ng-component"]],standalone:!0,features:[$n],decls:1,vars:0,template:function(r,i){r&1&&ir(0,"router-outlet")},dependencies:[pv],encapsulation:2})}}return t})();function yv(t){let e=t.children&&t.children.map(yv),n=e?ge(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=_v),n}var vv=new V(""),NH=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(wy)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Hi(n.loadComponent()).pipe(z(BR),wt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Jc(()=>{this.componentLoaders.delete(n)})),i=new ko(r,()=>new Ze).pipe(Po());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=MH(r,this.compiler,n,this.onLoadEndListener).pipe(Jc(()=>{this.childrenLoaders.delete(r)})),o=new ko(s,()=>new Ze).pipe(Po());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function MH(t,e,n,r){return Hi(t.loadChildren()).pipe(z(BR),ut(i=>i instanceof cu||Array.isArray(i)?Z(i):Qe(e.compileModuleAsync(i))),z(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(vv,[],{optional:!0,self:!0}).flat()),{routes:o.map(yv),injector:s}}))}function xH(t){return t&&typeof t=="object"&&"default"in t}function BR(t){return xH(t)?t.default:t}var Iv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(PH),providedIn:"root"})}}return t})(),PH=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),kH=new V("");var OH=new V(""),FH=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ze,this.transitionAbortSubject=new Ze,this.configLoader=M(NH),this.environmentInjector=M(kn),this.urlSerializer=M(hv),this.rootContexts=M(Nf),this.location=M(_u),this.inputBindingEnabled=M(gv,{optional:!0})!==null,this.titleStrategy=M(jR),this.options=M(mv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(Iv),this.createViewTransition=M(kH,{optional:!0}),this.navigationErrorHandler=M(OH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Yy(i)),r=i=>this.events.next(new Zy(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ge(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Mt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:bu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Jt(s=>s.id!==0),z(s=>ge(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),un(s=>{let o=!1,a=!1;return Z(s).pipe(un(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Dn.SupersededByNewNavigation),wn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ge(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new $s(c.id,this.urlSerializer.serialize(c.rawUrl),f,Gy.IgnoredSameUrlNavigation)),c.resolve(!1),wn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(un(f=>{let g=this.transitions?.getValue();return this.events.next(new Nu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?wn:Promise.resolve(f)}),TH(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),wt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ge(F({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Cf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:_,restoredState:I,extras:R}=c,S=new Nu(f,this.urlSerializer.serialize(g),_,I);this.events.next(S);let P=RR(this.rootComponentType).snapshot;return this.currentTransition=s=ge(F({},c),{targetSnapshot:P,urlAfterRedirects:g,extras:ge(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(s)}else{let f="";return this.events.next(new $s(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Gy.IgnoredByUrlHandlingStrategy)),c.resolve(!1),wn}}),wt(c=>{let l=new zy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),z(c=>(this.currentTransition=s=ge(F({},c),{guards:q$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),tH(this.environmentInjector,c=>this.events.next(c)),wt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Af(this.urlSerializer,c.guardsResult);let l=new Wy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Jt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Dn.GuardRejected),!1)),Uy(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(wt(l=>{let d=new Ky(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),un(l=>{let d=!1;return Z(l).pipe(bH(this.paramsInheritanceStrategy,this.environmentInjector),wt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Dn.NoDataFromResolver)}}))}),wt(l=>{let d=new Qy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Uy(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(wt(g=>{d.component=g}),z(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Dt(l(c.targetSnapshot.root)).pipe(Ai(null),qr(1))}),Uy(()=>this.afterPreactivation()),un(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Qe(d).pipe(z(()=>s)):Z(s)}),z(c=>{let l=U$(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ge(F({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),wt(()=>{this.events.next(new Pu)}),H$(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qr(1),wt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Bs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Mn(this.transitionAbortSubject.pipe(wt(c=>{throw c}))),Jc(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Dn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Si(c=>{if(a=!0,kR(c))this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),$$(c)?this.events.next(new ya(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Mu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Yr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Ou){let{message:f,cancellationCode:g}=Af(this.urlSerializer,d);this.events.next(new ri(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new ya(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=n.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return wn}))}))}cancelNavigationTransition(n,r,i){let s=new ri(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function LH(t){return t!==bu}var VH=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(UH),providedIn:"root"})}}return t})(),dv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},UH=(()=>{class t extends dv{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})()}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$R=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:()=>M(jH),providedIn:"root"})}}return t})(),jH=(()=>{class t extends $R{constructor(){super(...arguments),this.location=M(_u),this.urlSerializer=M(hv),this.options=M(mv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(Iv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ii,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=RR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Nu)this.stateMemento=this.createStateMemento();else if(n instanceof $s)this.rawUrlTree=r.initialUrl;else if(n instanceof Cf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Pu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ri&&(n.code===Dn.GuardRejected||n.code===Dn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Mu?this.restoreHistory(r,!0):n instanceof Bs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof ii?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})()}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Cu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Cu||{});function BH(t,e){t.events.pipe(Jt(n=>n instanceof Bs||n instanceof ri||n instanceof Mu||n instanceof $s),z(n=>n instanceof Bs||n instanceof $s?Cu.COMPLETE:(n instanceof ri?n.code===Dn.Redirect||n.code===Dn.SupersededByNewNavigation:!1)?Cu.REDIRECTING:Cu.FAILED),Jt(n=>n!==Cu.REDIRECTING),qr(1)).subscribe(()=>{e()})}function $H(t){throw t}var HH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xf=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(Yh),this.stateManager=M($R),this.options=M(mv,{optional:!0})||{},this.pendingTasks=M(xs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(FH),this.urlSerializer=M(hv),this.location=M(_u),this.urlHandlingStrategy=M(Iv),this._events=new Ze,this.errorHandler=this.options.errorHandler||$H,this.navigated=!1,this.routeReuseStrategy=M(VH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(vv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(gv,{optional:!0}),this.eventsSubscription=new nt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ri&&r.code!==Dn.Redirect&&r.code!==Dn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Bs)this.navigated=!0;else if(r instanceof ya){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||LH(i.source)},o);this.scheduleNavigation(a,bu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}zH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),bu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(yv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=bR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return DR(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Au(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,bu,null,r)}navigate(n,r={skipLocationChange:!1}){return GH(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},HH):r===!1?i=F({},qH):i=r,Au(n))return cR(this.currentUrlTree,n,i);let s=this.parseUrl(n);return cR(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return BH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function GH(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function zH(t){return!(t instanceof Pu)&&!(t instanceof ya)}var WH=new V("");function HR(t,...e){return $e([{provide:vv,multi:!0,useValue:t},[],{provide:va,useFactory:KH,deps:[xf]},{provide:Iy,multi:!0,useFactory:QH},e.map(n=>n.\u0275providers)])}function KH(t){return t.routerState.root}function QH(){let t=M(_e);return e=>{let n=t.get(Ls);if(e!==n.components[0])return;let r=t.get(xf),i=t.get(YH);t.get(ZH)===1&&r.initialNavigation(),t.get(JH,null,fe.Optional)?.setUpPreloading(),t.get(WH,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var YH=new V("",{factory:()=>new Ze}),ZH=new V("",{providedIn:"root",factory:()=>1});var JH=new V("");var qR=[];var eq="firebase",tq="10.14.1";q(eq,tq,"app");var ze=new Kr("ANGULARFIRE2_VERSION"),Ca=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function mt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var dt=(t,e)=>{let n=e?[e]:md(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},gn=class{constructor(){return dt(nq)}},nq="app-check";function Ea(){}var Pf=class{zone;delegate;constructor(e,n=Dm){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},wv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea)),n.pipe(wt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},it=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Pf(Zone.current)),this.insideAngular=n.run(()=>new Pf(Zone.current,Vo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ee(X))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function kf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function rq(t){return kf().ngZone.runOutsideAngular(()=>t())}function Hs(t){return kf().ngZone.run(()=>t())}function iq(t){return sq(kf())(t)}function sq(t){return function(n){return n=n.lift(new wv(t.ngZone)),n.pipe(Di(t.outsideAngular),bi(t.insideAngular))}}var oq=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Hs(()=>t.apply(void 0,r))},be=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Hs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ea,{},Ea,Ea))),r[s]=oq(r[s],n));let i=rq(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=kf();return i.pipe(Di(s.outsideAngular),bi(s.insideAngular))}else return Hs(()=>i);return i instanceof oe?i.pipe(iq):i instanceof Promise?Hs(()=>new Promise((s,o)=>i.then(a=>Hs(()=>s(a)),a=>Hs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Hs(()=>i)};var We=class{constructor(e){return e}},Je=class{constructor(){return md()}};function aq(t){return t&&t.length===1?t[0]:new We(ft())}var Ev=new V("angularfire2._apps"),cq={provide:We,useFactory:aq,deps:[[new ie,Ev]]},uq={provide:Je,deps:[[new ie,Ev]]};function lq(t){return(e,n)=>{let r=n.get(nr);q("angularfire",ze.full,"core"),q("angularfire",ze.full,"app"),q("angular",xA.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new We(i)}}function GR(t,...e){return $e([cq,uq,{provide:Ev,useFactory:lq(t),multi:!0,deps:[X,_e,it,...e]}])}var zR=be(sD,!0);function aN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var cN=aN,uN=new gr("auth","Firebase",aN());var jf=new _r("@firebase/auth");function dq(t,...e){jf.logLevel<=Bt.WARN&&jf.warn(`Auth (${an}): ${t}`,...e)}function Ff(t,...e){jf.logLevel<=Bt.ERROR&&jf.error(`Auth (${an}): ${t}`,...e)}function Gi(t,...e){throw $v(t,...e)}function Gs(t,...e){return $v(t,...e)}function lN(t,e,n){let r=Object.assign(Object.assign({},cN()),{[e]:n});return new gr("auth","Firebase",r).create(e,{appName:t.name})}function qs(t){return lN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $v(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uN.create(t,...e)}function se(t,e,...n){if(!t)throw $v(e,...n)}function si(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ff(e),new Error(e)}function zi(t,e){t||si(e)}function Dv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function hq(){return WR()==="http:"||WR()==="https:"}function WR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function fq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(hq()||Lc()||"connection"in navigator)?navigator.onLine:!0}function pq(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var zs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,zi(n>e,"Short delay should be less than long delay!"),this.isMobile=Fc()||fd()}get(){return fq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Hv(t,e){zi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Bf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;si("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;si("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;si("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var gq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var mq=new zs(3e4,6e4);function qv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function ba(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return dN(t,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=hs(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return Yb()||(_.referrerPolicy="no-referrer"),Bf.fetch()(hN(t,t.config.apiHost,n,f),_)}))})}function dN(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},gq),e);try{let i=new Sv(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Of(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Of(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Of(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Of(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw lN(t,d,l);Gi(t,d)}}catch(i){if(i instanceof on)throw i;Gi(t,"network-request-failed",{message:String(i)})}})}function _q(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield ba(t,e,n,r,i);return"mfaPendingCredential"in l&&Gi(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function hN(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Hv(t.config,i):`${t.config.apiScheme}://${i}`}var Sv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gs(this.auth,"network-request-failed")),mq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Of(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Gs(t,e,r);return i.customData._tokenResponse=n,i}function yq(t,e){return y(this,null,function*(){return ba(t,"POST","/v1/accounts:delete",e)})}function fN(t,e){return y(this,null,function*(){return ba(t,"POST","/v1/accounts:lookup",e)})}function Bu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Gv(t,e=!1){return y(this,null,function*(){let n=ve(t),r=yield n.getIdToken(e),i=zv(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Bu(Cv(i.auth_time)),issuedAtTime:Bu(Cv(i.iat)),expirationTime:Bu(Cv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Cv(t){return Number(t)*1e3}function zv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ff("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wb(n);return i?JSON.parse(i):(Ff("Failed to decode base64 JWT payload"),null)}catch(i){return Ff("Caught error parsing JWT payload as JSON",i?.toString()),null}}function KR(t){let e=zv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Hu(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof on&&vq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function vq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Av=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var qu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function $f(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Hu(t,fN(n,{idToken:r}));se(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pN(s.providerUserInfo):[],a=Iq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function Wv(t){return y(this,null,function*(){let e=ve(t);yield $f(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Iq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pN(t){return t.map(e=>{var{providerId:n}=e,r=Sm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function wq(t,e){return y(this,null,function*(){let n=yield dN(t,{},()=>y(this,null,function*(){let r=hs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=hN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Eq(t,e){return y(this,null,function*(){return ba(t,"POST","/v2/accounts:revokeToken",qv(t,e))})}var $u=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):KR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");let n=KR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield wq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return si("not implemented")}};function qi(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ta=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Sm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Av(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield Hu(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Gv(this,e)}reload(){return Wv(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield $f(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Br(this.auth.app))return Promise.reject(qs(this.auth));let e=yield this.getIdToken();return yield Hu(this,yq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:H,emailVerified:K,isAnonymous:Oe,providerData:J,stsTokenManager:C}=n;se(H&&C,e,"internal-error");let v=$u.fromJSON(this.name,C);se(typeof H=="string",e,"internal-error"),qi(f,e.name),qi(g,e.name),se(typeof K=="boolean",e,"internal-error"),se(typeof Oe=="boolean",e,"internal-error"),qi(_,e.name),qi(I,e.name),qi(R,e.name),qi(S,e.name),qi(P,e.name),qi(U,e.name);let w=new t({uid:H,auth:e,email:g,emailVerified:K,displayName:f,isAnonymous:Oe,photoURL:I,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:U});return J&&Array.isArray(J)&&(w.providerData=J.map(T=>Object.assign({},T))),S&&(w._redirectEventId=S),w}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new $u;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield $f(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?pN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new $u;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new qu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var QR=new Map;function oi(t){zi(t instanceof Function,"Expected a class definition");let e=QR.get(t);return e?(zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,QR.set(t,e),e)}var Cq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Rv=Cq;function Lf(t,e,n){return`firebase:${t}:${e}:${n}`}var Hf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=Lf(this.userKey,i.apiKey,s),this.fullPersistenceKey=Lf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ta._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(oi(Rv),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||oi(Rv),o=Lf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=Ta._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function YR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(gN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IN(e))return"Blackberry";if(wN(e))return"Webos";if(mN(e))return"Safari";if((e.includes("chrome/")||_N(e))&&!e.includes("edge/"))return"Chrome";if(vN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function gN(t=jt()){return/firefox\//i.test(t)}function mN(t=jt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _N(t=jt()){return/crios\//i.test(t)}function yN(t=jt()){return/iemobile/i.test(t)}function vN(t=jt()){return/android/i.test(t)}function IN(t=jt()){return/blackberry/i.test(t)}function wN(t=jt()){return/webos/i.test(t)}function Kv(t=jt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Tq(t=jt()){var e;return Kv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bq(){return Zb()&&document.documentMode===10}function EN(t=jt()){return Kv(t)||vN(t)||wN(t)||IN(t)||/windows phone/i.test(t)||yN(t)}function CN(t,e=[]){let n;switch(t){case"Browser":n=YR(jt());break;case"Worker":n=`${YR(jt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${an}/${r}`}var Nv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Dq(n){return y(this,arguments,function*(t,e={}){return ba(t,"GET","/v2/passwordPolicy",qv(t,e))})}var Sq=6,Mv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Sq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var xv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qf(this),this.idTokenSubscription=new qf(this),this.beforeStateQueue=new Nv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=oi(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Hf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield fN(this,{idToken:e}),r=yield Ta._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(Br(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield $f(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=pq()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Br(this.app))return Promise.reject(qs(this));let n=e?ve(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Br(this.app)?Promise.reject(qs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Br(this.app)?Promise.reject(qs(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(oi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield Dq(this),n=new Mv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Eq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&oi(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield Hf.create(this,[oi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=CN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&dq(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Qv(t){return ve(t)}var qf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=nD(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yv={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Aq(t){Yv=t}function Rq(t){return Yv.loadJS(t)}function Nq(){return Yv.gapiScript}function TN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Zv(t,e){let n=ht(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Bc(s,e??{}))return i;Gi(i,"already-initialized")}return n.initialize({options:e})}function Mq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(oi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Jv(t,e,n){let r=Qv(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=bN(e),{host:o,port:a}=xq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Pq()}function bN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xq(t){let e=bN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:ZR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:ZR(o)}}}function ZR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Pq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Gf=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return si("not implemented")}_getIdTokenResponse(e){return si("not implemented")}_linkToIdToken(e,n){return si("not implemented")}_getReauthenticationResolver(e){return si("not implemented")}};function Tv(t,e){return y(this,null,function*(){return _q(t,"POST","/v1/accounts:signInWithIdp",qv(t,e))})}var zf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Pv=class extends zf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Gu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield Ta._fromIdTokenResponse(e,r,i),o=JR(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=JR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function JR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var kv=class t extends on{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function DN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?kv._fromErrorAndOperation(t,s,e,r):s})}function kq(t,e,n=!1){return y(this,null,function*(){let r=yield Hu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Gu._forOperation(t,"link",r)})}function Oq(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(Br(r.app))return Promise.reject(qs(r));let i="reauthenticate";try{let s=yield Hu(t,DN(r,i,e,t),n);se(s.idToken,r,"internal-error");let o=zv(s.idToken);se(o,r,"internal-error");let{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),Gu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Gi(r,"user-mismatch"),s}})}function Fq(t,e,n=!1){return y(this,null,function*(){if(Br(t.app))return Promise.reject(qs(t));let r="signIn",i=yield DN(t,r,e),s=yield Gu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Zf(t,e,n,r){return ve(t).onIdTokenChanged(e,n,r)}function Xv(t,e,n){return ve(t).beforeAuthStateChanged(e,n)}function Jf(t,e,n,r){return ve(t).onAuthStateChanged(e,n,r)}var Wf="__sak";var Kf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var Lq=1e3,Vq=10,Uq=(()=>{class t extends Kf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=EN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);bq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,Vq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Lq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield Ei(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield Ei(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield Ei(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),SN=Uq;var jq=(()=>{class t extends Kf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),eI=jq;function Bq(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var $q=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield Bq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function AN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Ov=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=AN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Sr(){return window}function Hq(t){Sr().location.href=t}function RN(){return typeof Sr().WorkerGlobalScope<"u"&&typeof Sr().importScripts=="function"}function qq(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Gq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zq(){return RN()?self:null}var NN="firebaseLocalStorageDb",Wq=1,Qf="firebaseLocalStorage",MN="fbase_key",Ws=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Xf(t,e){return t.transaction([Qf],e?"readwrite":"readonly").objectStore(Qf)}function Kq(){let t=indexedDB.deleteDatabase(NN);return new Ws(t).toPromise()}function Fv(){let t=indexedDB.open(NN,Wq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Qf,{keyPath:MN})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Qf)?e(r):(r.close(),yield Kq(),e(yield Fv()))}))})}function XR(t,e,n){return y(this,null,function*(){let r=Xf(t,!0).put({[MN]:e,value:n});return new Ws(r).toPromise()})}function Qq(t,e){return y(this,null,function*(){let n=Xf(t,!1).get(e),r=yield new Ws(n).toPromise();return r===void 0?null:r.value})}function eN(t,e){let n=Xf(t,!0).delete(e);return new Ws(n).toPromise()}var Yq=800,Zq=3,Jq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Fv(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Zq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return RN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=$q._getInstance(zq()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield qq(),!this.activeServiceWorker)return;this.sender=new Ov(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Gq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Fv();return yield XR(n,Wf,"1"),yield eN(n,Wf),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>XR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>Qq(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>eN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=Xf(s,!1).getAll();return new Ws(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),Yq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),xN=Jq;var Qne=TN("rcb"),Yne=new zs(3e4,6e4);function Xq(t,e){return e?oi(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var zu=class extends Gf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Tv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Tv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Tv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function eG(t){return Fq(t.auth,new zu(t),t.bypassAuthState)}function tG(t){let{auth:e,user:n}=t;return se(n,e,"internal-error"),Oq(n,new zu(t),t.bypassAuthState)}function nG(t){return y(this,null,function*(){let{auth:e,user:n}=t;return se(n,e,"internal-error"),kq(n,new zu(t),t.bypassAuthState)})}var Lv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return eG;case"linkViaPopup":case"linkViaRedirect":return nG;case"reauthViaPopup":case"reauthViaRedirect":return tG;default:Gi(this.auth,"internal-error")}}resolve(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Zne=new zs(2e3,1e4);var rG="pendingRedirect",Vf=new Map,Vv=class t extends Lv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Vf.get(this.auth._key());if(!e){try{let r=(yield iG(this.resolver,this.auth))?yield Ei(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vf.set(this.auth._key(),e)}return this.bypassAuthState||Vf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Ei(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ei(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function iG(t,e){return y(this,null,function*(){let n=aG(e),r=oG(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function sG(t,e){Vf.set(t._key(),e)}function oG(t){return oi(t._redirectPersistence)}function aG(t){return Lf(rG,t.config.apiKey,t.name)}function cG(t,e,n=!1){return y(this,null,function*(){if(Br(t.app))return Promise.reject(qs(t));let r=Qv(t),i=Xq(r,e),o=yield new Vv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var uG=10*60*1e3,Uv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!lG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!PN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uG&&this.cachedEventUids.clear(),this.cachedEventUids.has(tN(e))}saveEventToCache(e){this.cachedEventUids.add(tN(e)),this.lastProcessedEventTime=Date.now()}};function tN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function PN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function lG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PN(t);default:return!1}}function dG(n){return y(this,arguments,function*(t,e={}){return ba(t,"GET","/v1/projects",e)})}var hG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fG=/^https?/;function pG(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield dG(t);for(let n of e)try{if(gG(n))return}catch{}Gi(t,"unauthorized-domain")})}function gG(t){let e=Dv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!fG.test(n))return!1;if(hG.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var mG=new zs(3e4,6e4);function nN(){let t=Sr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _G(t){return new Promise((e,n)=>{var r,i,s;function o(){nN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nN(),n(Gs(t,"network-request-failed"))},timeout:mG.get()})}if(!((i=(r=Sr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Sr().gapi)===null||s===void 0)&&s.load)o();else{let a=TN("iframefcb");return Sr()[a]=()=>{gapi.load?o():n(Gs(t,"network-request-failed"))},Rq(`${Nq()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Uf=null,e})}var Uf=null;function yG(t){return Uf=Uf||_G(t),Uf}var vG=new zs(5e3,15e3),IG="__/auth/iframe",wG="emulator/auth/iframe",EG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function TG(t){let e=t.config;se(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Hv(e,wG):`https://${t.config.authDomain}/${IG}`,r={apiKey:e.apiKey,appName:t.name,v:an},i=CG.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hs(r).slice(1)}`}function bG(t){return y(this,null,function*(){let e=yield yG(t),n=Sr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:TG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:EG,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Gs(t,"network-request-failed"),a=Sr().setTimeout(()=>{s(o)},vG.get());function c(){Sr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var DG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SG=500,AG=600,RG="_blank",NG="http://localhost",Yf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function MG(t,e,n,r=SG,i=AG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},DG),{width:r.toString(),height:i.toString(),top:s,left:o}),l=jt().toLowerCase();n&&(a=_N(l)?RG:n),gN(l)&&(e=e||NG,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,I])=>`${g}${_}=${I},`,"");if(Tq(l)&&a!=="_self")return xG(e||"",a),new Yf(null);let f=window.open(e||"",a,d);se(f,t,"popup-blocked");try{f.focus()}catch{}return new Yf(f)}function xG(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var PG="__/auth/handler",kG="emulator/auth/handler",OG=encodeURIComponent("fac");function rN(t,e,n,r,i,s){return y(this,null,function*(){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:an,eventId:i};if(e instanceof zf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Uc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Pv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${OG}=${encodeURIComponent(c)}`:"";return`${FG(t)}?${hs(a).slice(1)}${l}`})}function FG({config:t}){return t.emulator?Hv(t,kG):`https://${t.authDomain}/${PG}`}var bv="webStorageSupport",jv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eI,this._completeRedirectFn=cG,this._overrideRedirectResult=sG}_openPopup(e,n,r,i){return y(this,null,function*(){var s;zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield rN(e,n,r,Dv(),i);return MG(e,o,AN())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield rN(e,n,r,Dv(),i);return Hq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(zi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield bG(e),r=new Uv(e);return n.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(bv,{type:bv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[bv];o!==void 0&&n(!!o),Gi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return EN()||mN()||Kv()}},kN=jv;var iN="@firebase/auth",sN="1.7.9";var Bv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function LG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VG(t){ct(new at("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:CN(t)},l=new xv(r,i,s,c);return Mq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ct(new at("auth-internal",e=>{let n=Qv(e.getProvider("auth").getImmediate());return(r=>new Bv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),q(iN,sN,LG(t)),q(iN,sN,"esm2017")}var UG=5*60,jG=lm("authIdTokenMaxAge")||UG,oN=null,BG=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jG)return;let i=n?.token;oN!==i&&(oN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tI(t=ft()){let e=ht(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Zv(t,{popupRedirectResolver:kN,persistence:[xN,SN,eI]}),r=lm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=BG(s.toString());Xv(n,o,()=>o(n.currentUser)),Zf(n,a=>o(a))}}let i=Qb("auth");return i&&Jv(n,`http://${i}`),n}function $G(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Aq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Gs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",$G().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VG("Browser");function FN(t){return new oe(function(e){var n=Jf(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var LN="auth",Ks=class{constructor(e){return e}},ar=class{constructor(){return dt(LN)}};var nI=new V("angularfire2.auth-instances");function kz(t,e){let n=mt(LN,t,e);return n&&new Ks(n)}function Oz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ks(r)}}var Fz={provide:ar,deps:[[new ie,nI]]},Lz={provide:Ks,useFactory:kz,deps:[[new ie,nI],We]};function VN(t,...e){return q("angularfire",ze.full,"auth"),$e([Lz,Fz,{provide:nI,useFactory:Oz(t),multi:!0,deps:[X,_e,it,Je,[new ie,gn],...e]}])}var UN=be(FN,!0);var jN=be(tI,!0);var ep="analytics",Uz="firebase_id",jz="origin",Bz=60*1e3,$z="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uI="https://www.googletagmanager.com/gtag/js";var rn=new _r("@firebase/analytics");var Hz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Sn=new gr("analytics","Analytics",Hz);function qz(t){if(!t.startsWith(uI)){let e=Sn.create("invalid-gtag-resource",{gtagURL:t});return rn.warn(e.message),""}return t}function WN(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Gz(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zz(t,e){let n=Gz("firebase-js-sdk-policy",{createScriptURL:qz}),r=document.createElement("script"),i=`${uI}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Wz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Kz(t,e,n,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield WN(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){rn.error(a)}t("config",i,s)})}function Qz(t,e,n,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield WN(n);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){rn.error(s)}})}function Yz(t,e,n,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield Qz(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield Kz(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){rn.error(a)}})}return i}function Zz(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Yz(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Jz(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(uI)&&n.src.includes(t))return n;return null}var Xz=30,eW=1e3,iI=class{constructor(e={},n=eW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},KN=new iI;function tW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function nW(t){return y(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:tW(r)},s=$z.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Sn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function rW(r){return y(this,arguments,function*(t,e=KN,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw Sn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw Sn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new sI;return setTimeout(()=>y(this,null,function*(){c.abort()}),n!==void 0?n:Bz),QN({appId:i,apiKey:s,measurementId:o},a,c,e)})}function QN(s,o,a){return y(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=KN){var c;let{appId:l,measurementId:d}=t;try{yield iW(r,e)}catch(f){if(d)return rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield nW(t);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!sW(g)){if(i.deleteThrottleMetadata(l),d)return rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Hc(n,i.intervalMillis,Xz):Hc(n,i.intervalMillis),I={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(l,I),rn.debug(`Calling attemptFetch again in ${_} millis`),QN(t,I,r,i)}})}function iW(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Sn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function sW(t){if(!(t instanceof on)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var sI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var oI;function oW(t,e,n,r,i){return y(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function aW(t,e,n,r){return y(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var aI;function cW(t){aI=t}function uW(t){oI=t}function lW(){return y(this,null,function*(){if(jr())try{yield ls()}catch(t){return rn.warn(Sn.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return rn.warn(Sn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function dW(t,e,n,r,i,s,o){return y(this,null,function*(){var a;let c=rW(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&rn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>rn.error(_)),e.push(c);let l=lW().then(_=>{if(_)return r.getId()}),[d,f]=yield Promise.all([c,l]);Jz(s)||zz(s,d.measurementId),aI&&(i("consent","default",aI),cW(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[jz]="firebase",g.update=!0,f!=null&&(g[Uz]=f),i("config",d.measurementId,g),oI&&(i("set",oI),uW(void 0)),d.measurementId})}var cI=class{constructor(e){this.app=e}_delete(){return delete Da[this.app.options.appId],Promise.resolve()}},Da={},BN=[],$N={},rI="dataLayer",hW="gtag",HN,lI,qN=!1;function fW(){let t=[];if(Lc()&&t.push("This is a browser extension environment."),Vc()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Sn.create("invalid-analytics-context",{errorInfo:e});rn.warn(n.message)}}function pW(t,e,n){fW();let r=t.options.appId;if(!r)throw Sn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Sn.create("no-api-key");if(Da[r]!=null)throw Sn.create("already-exists",{id:r});if(!qN){Wz(rI);let{wrappedGtag:s,gtagCore:o}=Zz(Da,BN,$N,rI,hW);lI=s,HN=o,qN=!0}return Da[r]=dW(t,BN,$N,e,HN,rI,n),new cI(t)}function YN(t=ft()){t=ve(t);let e=ht(t,ep);return e.isInitialized()?e.getImmediate():ZN(t)}function ZN(t,e={}){let n=ht(t,ep);if(n.isInitialized()){let i=n.getImmediate();if(Bc(e,n.getOptions()))return i;throw Sn.create("already-initialized")}return n.initialize({options:e})}function JN(){return y(this,null,function*(){if(Lc()||!Vc()||!jr())return!1;try{return yield ls()}catch{return!1}})}function XN(t,e,n){t=ve(t),aW(lI,Da[t.app.options.appId],e,n).catch(r=>rn.error(r))}function dI(t,e,n,r){t=ve(t),oW(lI,Da[t.app.options.appId],e,n,r).catch(i=>rn.error(i))}var GN="@firebase/analytics",zN="0.10.8";function gW(){ct(new at(ep,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return pW(r,i,n)},"PUBLIC")),ct(new at("analytics-internal",t,"PRIVATE")),q(GN,zN),q(GN,zN,"esm2017");function t(e){try{let n=e.getProvider(ep).getImmediate();return{logEvent:(r,i,s)=>dI(n,r,i,s)}}catch(n){throw Sn.create("interop-component-reg-failed",{reason:n})}}}gW();var Qs=class{constructor(e){return e}},nM="analytics",fI=class{constructor(){return dt(nM)}};var pI="__angularfire_symbol__analyticsIsSupportedValue",rM="__angularfire_symbol__analyticsIsSupported";globalThis[rM]||=JN().then(t=>globalThis[pI]=t).catch(()=>globalThis[pI]=!1);var tp={async:()=>globalThis[rM],sync:()=>{let t=globalThis[pI];if(t===void 0)throw new Error(Ca("Analytics"));return t}},iM=tp.async,sM=be(YN,!0);var mW=be(dI,!0);var _W=be(XN,!0);var mI=(()=>{class t{initialized;disposables=[];constructor(n,r,i){q("angularfire",ze.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),iM().then(()=>{let o=i.get(Qs);o?this.disposables=[UN(n).subscribe(a=>{_W(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(ee(Ks),ee(X),ee(_e))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),yW="firebase_event_origin",vW="firebase_previous_class",IW="firebase_previous_id",wW="firebase_previous_screen",EW="firebase_screen_class",eM="firebase_screen_id",CW="firebase_screen",gI="outlet",TW="page_path",bW="page_title",Wu="screen_class",tM="screen_name",DW="screen_view",SW="auto",AW="#",RW=Math.floor(Math.random()*(2**32-1))-2**31,hI={},NW=t=>{let e=[t[Wu],t[gI]].join(AW);if(hI.hasOwnProperty(e))return hI[e];{let n=RW++;return hI[e]=n,n}},MW=(t,e,n)=>t.events.pipe(Jt(i=>i instanceof xu)).pipe(un(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return Z(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[tM]:l,[TW]:`/${o}`,[yW]:SW,[CW]:l,[gI]:i.snapshot.outlet};e&&(d[bW]=e.getTitle());let f=a.component;if(f){if(f===_v){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return Z(ge(F({},d),{[Wu]:f}));if(f){let g=n.resolveComponentFactory(f);return Z(ge(F({},d),{[Wu]:g.selector}))}return Z(null)}),Jt(i=>!!i),z(i=>F({[EW]:i[Wu],[eM]:NW(i)},i)),Pm(i=>i[gI]),ut(i=>i.pipe(Qd((s,o)=>JSON.stringify(s)===JSON.stringify(o)),$o(void 0),Zd(),z(([s,o])=>s?F({[vW]:s[Wu],[wW]:s[tM],[IW]:s[eM]},o):o)))),oM=(()=>{class t{disposable;constructor(n,r,i,s,o,a){q("angularfire",ze.full,"screen-tracking"),iM().then(()=>{let c=a.get(Qs);!n||!c||s.runOutsideAngular(()=>{this.disposable=MW(n,r,i).pipe(un(l=>y(this,null,function*(){return o&&(yield o.initialized),mW(c,DW,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(ee(xf,8),ee(gf,8),ee(ki),ee(X),ee(mI,8),ee(_e))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),_I=new V("angularfire2.analytics-instances");function xW(t,e){if(!tp.sync())return null;let n=mt(nM,t,e);return n&&new Qs(n)}function PW(t){return(e,n)=>{if(!tp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Qs(r)}}var kW={provide:fI,deps:[[new ie,_I]]},OW={provide:Qs,useFactory:xW,deps:[[new ie,_I],We]};function aM(t,...e){return q("angularfire",ze.full,"analytics"),$e([OW,kW,{provide:ji,useValue:tp.async,multi:!0},{provide:_I,useFactory:PW(t),multi:!0,deps:[X,_e,it,Je,...e]}])}var cM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},uM={};var Wi,yI;(function(){var t;function e(C,v){function w(){}w.prototype=v.prototype,C.D=v.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(T,b,A){for(var E=Array(arguments.length-2),Lr=2;Lr<arguments.length;Lr++)E[Lr-2]=arguments[Lr];return v.prototype[b].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,w){w||(w=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)T[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=C.g[0],w=C.g[1],b=C.g[2];var A=C.g[3],E=v+(A^w&(b^A))+T[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(w^b))+T[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(w^b^A)+T[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(b^(w|~A))+T[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var w=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=w;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(T[b++]=C.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=C[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var w=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=w&255,w/=256;for(this.u(C),C=Array(16),v=w=0;4>v;++v)for(var T=0;32>T;T+=8)C[w++]=this.g[v]>>>T&255;return C};function s(C,v){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=v(C)}function o(C,v){this.h=v;for(var w=[],T=!0,b=C.length-1;0<=b;b--){var A=C[b]|0;T&&A==v||(w[b]=A,T=!1)}this.g=w}var a={};function c(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return S(l(-C));for(var v=[],w=1,T=0;C>=w;T++)v[T]=C/w|0,w*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return S(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),T=f,b=0;b<C.length;b+=8){var A=Math.min(8,C.length-b),E=parseInt(C.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(w),T=T.add(l(E)))}return T}var f=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-S(this).m();for(var C=0,v=1,w=0;w<this.g.length;w++){var T=this.i(w);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(R(this))return"-"+S(this).toString(C);for(var v=l(Math.pow(C,6)),w=this,T="";;){var b=K(w,v).g;w=P(w,b.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=b,I(w))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}t.l=function(C){return C=P(this,C),R(C)?-1:I(C)?0:1};function S(C){for(var v=C.g.length,w=[],T=0;T<v;T++)w[T]=~C.g[T];return new o(w,~C.h).add(g)}t.abs=function(){return R(this)?S(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(C.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,w[b]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(C,v){return C.add(S(v))}t.j=function(C){if(I(this)||I(C))return f;if(R(this))return R(C)?S(this).j(S(C)):S(S(this).j(C));if(R(C))return S(this.j(S(C)));if(0>this.l(_)&&0>C.l(_))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,w=[],T=0;T<2*v;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<C.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,Lr=C.i(b)>>>16,_c=C.i(b)&65535;w[2*T+2*b]+=E*_c,U(w,2*T+2*b),w[2*T+2*b+1]+=A*_c,U(w,2*T+2*b+1),w[2*T+2*b+1]+=E*Lr,U(w,2*T+2*b+1),w[2*T+2*b+2]+=A*Lr,U(w,2*T+2*b+2)}for(T=0;T<v;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=v;T<2*v;T++)w[T]=0;return new o(w,0)};function U(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function H(C,v){this.g=C,this.h=v}function K(C,v){if(I(v))throw Error("division by zero");if(I(C))return new H(f,f);if(R(C))return v=K(S(C),v),new H(S(v.g),S(v.h));if(R(v))return v=K(C,S(v)),new H(S(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=v;0>=T.l(C);)w=Oe(w),T=Oe(T);var b=J(w,1),A=J(T,1);for(T=J(T,2),w=J(w,2);!I(T);){var E=A.add(T);0>=E.l(C)&&(b=b.add(w),A=E),T=J(T,1),w=J(w,1)}return v=P(C,b.j(v)),new H(b,v)}for(b=f;0<=C.l(v);){for(w=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(w),E=A.j(v);R(E)||0<E.l(C);)w-=T,A=l(w),E=A.j(v);I(A)&&(A=g),b=b.add(A),C=P(C,E)}return new H(b,C)}t.A=function(C){return K(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)&C.i(T);return new o(w,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)|C.i(T);return new o(w,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)^C.i(T);return new o(w,this.h^C.h)};function Oe(C){for(var v=C.g.length+1,w=[],T=0;T<v;T++)w[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(w,C.h)}function J(C,v){var w=v>>5;v%=32;for(var T=C.g.length-w,b=[],A=0;A<T;A++)b[A]=0<v?C.i(A+w)>>>v|C.i(A+w+1)<<32-v:C.i(A+w);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yI=uM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Wi=uM.Integer=o}).apply(typeof cM<"u"?cM:typeof self<"u"?self:typeof window<"u"?window:{});var np=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ai={};var vI,FW,Sa,II,Ku,rp,wI,EI,CI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof np=="object"&&np];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var O=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)O[Fe-2]=arguments[Fe];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let O=0;O<N;O++)u[D+O]=m[O]}else u.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(u){return/^[\s\xa0]*$/.test(u)}function H(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function K(u){return K[" "](u),u}K[" "]=function(){};var Oe=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function J(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<w.length;N++)p=w[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Ug;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Lr{constructor(){this.h=this.g=null}add(h,p){let m=_c.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var _c=new P(()=>new rF,u=>u.reset());class rF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let yc,vc=!1,Ug=new Lr,qT=()=>{let u=a.Promise.resolve(void 0);yc=()=>{u.then(iF)}};var iF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=_c;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}vc=!1};function yi(){this.s=this.s,this.C=this.C}yi.prototype.s=!1,yi.prototype.ma=function(){this.s||(this.s=!0,this.N())},yi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ft(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Ft.prototype.h=function(){this.defaultPrevented=!0};var sF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Ic(u,h){if(Ft.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Oe){e:{try{K(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:oF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ic.aa.h.call(this)}}I(Ic,Ft);var oF={2:"touch",3:"pen",4:"mouse"};Ic.prototype.h=function(){Ic.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var wc="closure_listenable_"+(1e6*Math.random()|0),aF=0;function cF(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++aF,this.da=this.fa=!1}function Yl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Zl(u){this.src=u,this.g={},this.h=0}Zl.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=Bg(u,h,m,D);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new cF(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function jg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(Yl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Bg(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var $g="closure_lm_"+(1e6*Math.random()|0),Hg={};function GT(u,h,p,m,D){if(m&&m.once)return WT(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)GT(u,h[N],p,m,D);return null}return p=Wg(p),u&&u[wc]?u.K(h,p,l(m)?!!m.capture:!!m,D):zT(u,h,p,!1,m,D)}function zT(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Fe=Gg(u);if(Fe||(u[$g]=Fe=new Zl(u)),p=Fe.add(h,p,m,O,N),p.proxy)return p;if(m=uF(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)sF||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(QT(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function uF(){function u(p){return h.call(u.src,u.listener,p)}let h=lF;return u}function WT(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)WT(u,h[N],p,m,D);return null}return p=Wg(p),u&&u[wc]?u.L(h,p,l(m)?!!m.capture:!!m,D):zT(u,h,p,!0,m,D)}function KT(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)KT(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=Wg(p),u&&u[wc]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=Bg(N,p,m,D),-1<p&&(Yl(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Gg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Bg(h,p,m,D)),(p=-1<u?h[u]:null)&&qg(p))}function qg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[wc])jg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(QT(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Gg(h))?(jg(p,u),p.h==0&&(p.src=null,h[$g]=null)):Yl(u)}}}function QT(u){return u in Hg?Hg[u]:Hg[u]="on"+u}function lF(u,h){if(u.da)u=!0;else{h=new Ic(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&qg(u),u=p.call(m,h)}return u}function Gg(u){return u=u[$g],u instanceof Zl?u:null}var zg="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wg(u){return typeof u=="function"?u:(u[zg]||(u[zg]=function(h){return u.handleEvent(h)}),u[zg])}function Lt(){yi.call(this),this.i=new Zl(this),this.M=this,this.F=null}I(Lt,yi),Lt.prototype[wc]=!0,Lt.prototype.removeEventListener=function(u,h,p,m){KT(this,u,h,p,m)};function Qt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Ft(h,u);else if(h instanceof Ft)h.target=h.target||u;else{var D=h;h=new Ft(m,u),T(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var O=h.g=p[N];D=Jl(O,m,!0,h)&&D}if(O=h.g=u,D=Jl(O,m,!0,h)&&D,D=Jl(O,m,!1,h)&&D,p)for(N=0;N<p.length;N++)O=h.g=p[N],D=Jl(O,m,!1,h)&&D}Lt.prototype.N=function(){if(Lt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)Yl(p[m]);delete u.g[h],u.h--}}this.F=null},Lt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Lt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Jl(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==p){var Fe=O.listener,Nt=O.ha||O.src;O.fa&&jg(u.i,O),D=Fe.call(Nt,m)!==!1&&D}}return D&&!m.defaultPrevented}function YT(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function ZT(u){u.g=YT(()=>{u.g=null,u.i&&(u.i=!1,ZT(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class dF extends yi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ZT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ec(u){yi.call(this),this.h=u,this.g={}}I(Ec,yi);var JT=[];function XT(u){J(u.g,function(h,p){this.g.hasOwnProperty(p)&&qg(h)},u),u.g={}}Ec.prototype.N=function(){Ec.aa.N.call(this),XT(this)},Ec.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kg=a.JSON.stringify,hF=a.JSON.parse,fF=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Qg(){}Qg.prototype.h=null;function eb(u){return u.h||(u.h=u.i())}function tb(){}var Cc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yg(){Ft.call(this,"d")}I(Yg,Ft);function Zg(){Ft.call(this,"c")}I(Zg,Ft);var os={},nb=null;function Xl(){return nb=nb||new Lt}os.La="serverreachability";function rb(u){Ft.call(this,os.La,u)}I(rb,Ft);function Tc(u){let h=Xl();Qt(h,new rb(h))}os.STAT_EVENT="statevent";function ib(u,h){Ft.call(this,os.STAT_EVENT,u),this.stat=h}I(ib,Ft);function Yt(u){let h=Xl();Qt(h,new ib(h,u))}os.Ma="timingevent";function sb(u,h){Ft.call(this,os.Ma,u),this.size=h}I(sb,Ft);function bc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Dc(){this.g=!0}Dc.prototype.xa=function(){this.g=!1};function pF(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var O="",Fe=N.split("&"),Nt=0;Nt<Fe.length;Nt++){var De=Fe[Nt].split("=");if(1<De.length){var Vt=De[0];De=De[1];var Ut=Vt.split("_");O=2<=Ut.length&&Ut[1]=="type"?O+(Vt+"="+De+"&"):O+(Vt+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+O})}function gF(u,h,p,m,D,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+O})}function wo(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+_F(u,p)+(m?" "+m:"")})}function mF(u,h){u.info(function(){return"TIMEOUT: "+h})}Dc.prototype.info=function(){};function _F(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return Kg(p)}catch{return h}}var ed={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ob={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Jg;function td(){}I(td,Qg),td.prototype.g=function(){return new XMLHttpRequest},td.prototype.i=function(){return{}},Jg=new td;function vi(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Ec(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ab}function ab(){this.i=null,this.g="",this.h=!1}var cb={},Xg={};function em(u,h,p){u.L=1,u.v=sd(Vr(h)),u.m=p,u.P=!0,ub(u,null)}function ub(u,h){u.F=Date.now(),nd(u),u.A=Vr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),Cb(p.i,"t",m),u.C=0,p=u.j.J,u.h=new ab,u.g=Bb(u.j,p?h:null,!u.m),0<u.O&&(u.M=new dF(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(JT[0]=D.toString()),D=JT);for(var N=0;N<D.length;N++){var O=GT(p,D[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Tc(),pF(u.i,u.u,u.A,u.l,u.R,u.m)}vi.prototype.ca=function(u){u=u.target;let h=this.M;h&&Ur(u)==3?h.j():this.Y(u)},vi.prototype.Y=function(u){try{if(u==this.g)e:{let Ut=Ur(this.g);var h=this.g.Ba();let To=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||Nb(this.g)))){this.J||Ut!=4||h==7||(h==8||0>=To?Tc(3):Tc(2)),tm(this);var p=this.g.Z();this.X=p;t:if(lb(this)){var m=Nb(this.g);u="";var D=m.length,N=Ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){as(this),Sc(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,gF(this.i,this.u,this.A,this.l,this.R,Ut,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Nt=this.g;if((Fe=Nt.g?Nt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Fe)){var De=Fe;break t}}De=null}if(p=De)wo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nm(this,p);else{this.o=!1,this.s=3,Yt(12),as(this),Sc(this);break e}}if(this.P){p=!0;let Zn;for(;!this.J&&this.C<O.length;)if(Zn=yF(this,O),Zn==Xg){Ut==4&&(this.s=4,Yt(14),p=!1),wo(this.i,this.l,null,"[Incomplete Response]");break}else if(Zn==cb){this.s=4,Yt(15),wo(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else wo(this.i,this.l,Zn,null),nm(this,Zn);if(lb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||O.length!=0||this.h.h||(this.s=1,Yt(16),p=!1),this.o=this.o&&p,!p)wo(this.i,this.l,O,"[Invalid Chunked Response]"),as(this),Sc(this);else if(0<O.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),cm(Vt),Vt.M=!0,Yt(11))}}else wo(this.i,this.l,O,null),nm(this,O);Ut==4&&as(this),this.o&&!this.J&&(Ut==4?Lb(this.j,this):(this.o=!1,nd(this)))}else OF(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),as(this),Sc(this)}}}catch{}finally{}};function lb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function yF(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Xg:(p=Number(h.substring(p,m)),isNaN(p)?cb:(m+=1,m+p>h.length?Xg:(h=h.slice(m,m+p),u.C=m+p,h)))}vi.prototype.cancel=function(){this.J=!0,as(this)};function nd(u){u.S=Date.now()+u.I,db(u,u.I)}function db(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=bc(g(u.ba,u),h)}function tm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}vi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(mF(this.i,this.A),this.L!=2&&(Tc(),Yt(17)),as(this),this.s=2,Sc(this)):db(this,this.S-u)};function Sc(u){u.j.G==0||u.J||Lb(u.j,u)}function as(u){tm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,XT(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function nm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||rm(p.h,u))){if(!u.K&&rm(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ld(p),cd(p);else break e;am(p),Yt(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=bc(g(p.Za,p),6e3));if(1>=pb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else us(p,11)}else if((u.K||p.g==u)&&ld(p),!U(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let De=D[h];if(p.T=De[0],De=De[1],p.G==2)if(De[0]=="c"){p.K=De[1],p.ia=De[2];let Vt=De[3];Vt!=null&&(p.la=Vt,p.j.info("VER="+p.la));let Ut=De[4];Ut!=null&&(p.Aa=Ut,p.j.info("SVER="+p.Aa));let To=De[5];To!=null&&typeof To=="number"&&0<To&&(m=1.5*To,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Zn=u.g;if(Zn){let hd=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hd){var N=m.h;N.g||hd.indexOf("spdy")==-1&&hd.indexOf("quic")==-1&&hd.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(im(N,N.h),N.h=null))}if(m.D){let um=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;um&&(m.ya=um,Ge(m.I,m.D,um))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=jb(m,m.J?m.ia:null,m.W),O.K){gb(m.h,O);var Fe=O,Nt=m.L;Nt&&(Fe.I=Nt),Fe.B&&(tm(Fe),nd(Fe)),m.g=O}else Ob(m);0<p.i.length&&ud(p)}else De[0]!="stop"&&De[0]!="close"||us(p,7);else p.G==3&&(De[0]=="stop"||De[0]=="close"?De[0]=="stop"?us(p,7):om(p):De[0]!="noop"&&p.l&&p.l.ta(De),p.v=0)}}Tc(4)}catch{}}var vF=class{constructor(u,h){this.g=u,this.map=h}};function hb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function pb(u){return u.h?1:u.g?u.g.size:0}function rm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function im(u,h){u.g?u.g.add(h):u.h=h}function gb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}hb.prototype.cancel=function(){if(this.i=mb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function mb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function IF(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function wF(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function _b(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=wF(u),m=IF(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var yb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function EF(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function cs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof cs){this.h=u.h,rd(this,u.j),this.o=u.o,this.g=u.g,id(this,u.s),this.l=u.l;var h=u.i,p=new Nc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),vb(this,p),this.m=u.m}else u&&(h=String(u).match(yb))?(this.h=!1,rd(this,h[1]||"",!0),this.o=Ac(h[2]||""),this.g=Ac(h[3]||"",!0),id(this,h[4]),this.l=Ac(h[5]||"",!0),vb(this,h[6]||"",!0),this.m=Ac(h[7]||"")):(this.h=!1,this.i=new Nc(null,this.h))}cs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Rc(h,Ib,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Rc(h,Ib,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Rc(p,p.charAt(0)=="/"?bF:TF,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Rc(p,SF)),u.join("")};function Vr(u){return new cs(u)}function rd(u,h,p){u.j=p?Ac(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function id(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function vb(u,h,p){h instanceof Nc?(u.i=h,AF(u.i,u.h)):(p||(h=Rc(h,DF)),u.i=new Nc(h,u.h))}function Ge(u,h,p){u.i.set(h,p)}function sd(u){return Ge(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Ac(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Rc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,CF),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function CF(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ib=/[#\/\?@]/g,TF=/[#\?:]/g,bF=/[#\?]/g,DF=/[#\?@]/g,SF=/#/g;function Nc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Ii(u){u.g||(u.g=new Map,u.h=0,u.i&&EF(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Nc.prototype,t.add=function(u,h){Ii(this),this.i=null,u=Eo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function wb(u,h){Ii(u),h=Eo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function Eb(u,h){return Ii(u),h=Eo(u,h),u.g.has(h)}t.forEach=function(u,h){Ii(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},t.na=function(){Ii(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},t.V=function(u){Ii(this);let h=[];if(typeof u=="string")Eb(this,u)&&(h=h.concat(this.g.get(Eo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return Ii(this),this.i=null,u=Eo(this,u),Eb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Cb(u,h,p){wb(u,h),0<p.length&&(u.i=null,u.g.set(Eo(u,h),R(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=N;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function Eo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function AF(u,h){h&&!u.j&&(Ii(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(wb(this,m),Cb(this,D,p))},u)),u.j=h}function RF(u,h){let p=new Dc;if(a.Image){let m=new Image;m.onload=_(wi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(wi,p,"TestLoadImage: error",!1,h,m),m.onabort=_(wi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(wi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function NF(u,h){let p=new Dc,m=new AbortController,D=setTimeout(()=>{m.abort(),wi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?wi(p,"TestPingServer: ok",!0,h):wi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),wi(p,"TestPingServer: error",!1,h)})}function wi(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function MF(){this.g=new fF}function xF(u,h,p){let m=p||"";try{_b(u,function(D,N){let O=D;l(D)&&(O=Kg(D)),h.push(m+N+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function Mc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(Mc,Qg),Mc.prototype.g=function(){return new od(this.l,this.j)},Mc.prototype.i=function(u){return function(){return u}}({});function od(u,h){Lt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(od,Lt),t=od.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Pc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pc(this)),this.g&&(this.readyState=3,Pc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Tb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Tb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?xc(this):Pc(this),this.readyState==3&&Tb(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,xc(this))},t.Qa=function(u){this.g&&(this.response=u,xc(this))},t.ga=function(){this.g&&xc(this)};function xc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Pc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(od.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function bb(u){let h="";return J(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function sm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=bb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):Ge(u,h,p))}function tt(u){Lt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(tt,Lt);var PF=/^https?$/i,kF=["POST","PUT"];t=tt.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Jg.g(),this.v=this.o?eb(this.o):eb(Jg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){Db(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(kF,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of p)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rb(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){Db(this,N)}};function Db(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,Sb(u),ad(u)}function Sb(u){u.A||(u.A=!0,Qt(u,"complete"),Qt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,Qt(this,"complete"),Qt(this,"abort"),ad(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ad(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ab(this):this.bb())},t.bb=function(){Ab(this)};function Ab(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Ur(u)!=4||u.Z()!=2)){if(u.u&&Ur(u)==4)YT(u.Ea,0,u);else if(Qt(u,"readystatechange"),Ur(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var D=String(u.D).match(yb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!PF.test(D?D.toLowerCase():"")}p=m}if(p)Qt(u,"complete"),Qt(u,"success");else{u.m=6;try{var N=2<Ur(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",Sb(u)}}finally{ad(u)}}}}function ad(u,h){if(u.g){Rb(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||Qt(u,"ready");try{p.onreadystatechange=m}catch{}}}function Rb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Ur(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),hF(h)}};function Nb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function OF(u){let h={};u=(u.g&&2<=Ur(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(U(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}C(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function Mb(u){this.Aa=0,this.i=[],this.j=new Dc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kc("baseRetryDelayMs",5e3,u),this.cb=kc("retryDelaySeedMs",1e4,u),this.Wa=kc("forwardChannelMaxRetries",2,u),this.wa=kc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new hb(u&&u.concurrentRequestLimit),this.Da=new MF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Mb.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){Yt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=jb(this,null,this.W),ud(this)};function om(u){if(xb(u),u.G==3){var h=u.U++,p=Vr(u.I);if(Ge(p,"SID",u.K),Ge(p,"RID",h),Ge(p,"TYPE","terminate"),Oc(u,p),h=new vi(u,u.j,h),h.L=2,h.v=sd(Vr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Bb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),nd(h)}Ub(u)}function cd(u){u.g&&(cm(u),u.g.cancel(),u.g=null)}function xb(u){cd(u),u.u&&(a.clearTimeout(u.u),u.u=null),ld(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function ud(u){if(!fb(u.h)&&!u.s){u.s=!0;var h=u.Ga;yc||qT(),vc||(yc(),vc=!0),Ug.add(h,u),u.B=0}}function FF(u,h){return pb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=bc(g(u.Ga,u,h),Vb(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new vi(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=kb(this,D,h),p=Vr(this.I),Ge(p,"RID",u),Ge(p,"CVER",22),this.D&&Ge(p,"X-HTTP-Session-Id",this.D),Oc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(bb(N)))+"&"+h:this.m&&sm(p,this.m,N)),im(this.h,D),this.Ua&&Ge(p,"TYPE","init"),this.P?(Ge(p,"$req",h),Ge(p,"SID","null"),D.T=!0,em(D,p,null)):em(D,p,h),this.G=2}}else this.G==3&&(u?Pb(this,u):this.i.length==0||fb(this.h)||Pb(this))};function Pb(u,h){var p;h?p=h.l:p=u.U++;let m=Vr(u.I);Ge(m,"SID",u.K),Ge(m,"RID",p),Ge(m,"AID",u.T),Oc(u,m),u.m&&u.o&&sm(m,u.m,u.o),p=new vi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=kb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),im(u.h,p),em(p,m,h)}function Oc(u,h){u.H&&J(u.H,function(p,m){Ge(h,m,p)}),u.l&&_b({},function(p,m){Ge(h,m,p)})}function kb(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let O=["count="+p];N==-1?0<p?(N=D[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Fe=!0;for(let Nt=0;Nt<p;Nt++){let De=D[Nt].g,Vt=D[Nt].map;if(De-=N,0>De)N=Math.max(0,D[Nt].g-100),Fe=!1;else try{xF(Vt,O,"req"+De+"_")}catch{m&&m(Vt)}}if(Fe){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function Ob(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;yc||qT(),vc||(yc(),vc=!0),Ug.add(h,u),u.v=0}}function am(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=bc(g(u.Fa,u),Vb(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Fb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=bc(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),cd(this),Fb(this))};function cm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Fb(u){u.g=new vi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Vr(u.qa);Ge(h,"RID","rpc"),Ge(h,"SID",u.K),Ge(h,"AID",u.T),Ge(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&Ge(h,"TO",u.ja),Ge(h,"TYPE","xmlhttp"),Oc(u,h),u.m&&u.o&&sm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=sd(Vr(h)),p.m=null,p.P=!0,ub(p,u)}t.Za=function(){this.C!=null&&(this.C=null,cd(this),am(this),Yt(19))};function ld(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Lb(u,h){var p=null;if(u.g==h){ld(u),cm(u),u.g=null;var m=2}else if(rm(u.h,h))p=h.D,gb(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=Xl(),Qt(m,new sb(m,p)),ud(u)}else Ob(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&FF(u,h)||m==2&&am(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:us(u,5);break;case 4:us(u,10);break;case 3:us(u,6);break;default:us(u,2)}}}function Vb(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function us(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new cs(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rd(m,"https"),sd(m),D?RF(m.toString(),p):NF(m.toString(),p)}else Yt(2);u.G=0,u.l&&u.l.sa(h),Ub(u),xb(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function Ub(u){if(u.G=0,u.ka=[],u.l){let h=mb(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function jb(u,h,p){var m=p instanceof cs?Vr(p):new cs(p);if(m.g!="")h&&(m.g=h+"."+m.g),id(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new cs(null);m&&rd(N,m),h&&(N.g=h),D&&id(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&Ge(m,p,h),Ge(m,"VER",u.la),Oc(u,m),m}function Bb(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new tt(new Mc({eb:p})):new tt(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function $b(){}t=$b.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dd(){}dd.prototype.g=function(u,h){return new In(u,h)};function In(u,h){Lt.call(this),this.g=new Mb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!U(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Co(this)}I(In,Lt),In.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){om(this.g)},In.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Kg(u),u=p);h.i.push(new vF(h.Ya++,u)),h.G==3&&ud(h)},In.prototype.N=function(){this.g.l=null,delete this.j,om(this.g),delete this.g,In.aa.N.call(this)};function Hb(u){Yg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(Hb,Yg);function qb(){Zg.call(this),this.status=1}I(qb,Zg);function Co(u){this.g=u}I(Co,$b),Co.prototype.ua=function(){Qt(this.g,"a")},Co.prototype.ta=function(u){Qt(this.g,new Hb(u))},Co.prototype.sa=function(u){Qt(this.g,new qb)},Co.prototype.ra=function(){Qt(this.g,"b")},dd.prototype.createWebChannel=dd.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,CI=ai.createWebChannelTransport=function(){return new dd},EI=ai.getStatEventTarget=function(){return Xl()},wI=ai.Event=os,rp=ai.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ed.NO_ERROR=0,ed.TIMEOUT=8,ed.HTTP_ERROR=6,Ku=ai.ErrorCode=ed,ob.COMPLETE="complete",II=ai.EventType=ob,tb.EventType=Cc,Cc.OPEN="a",Cc.CLOSE="b",Cc.ERROR="c",Cc.MESSAGE="d",Lt.prototype.listen=Lt.prototype.K,Sa=ai.WebChannel=tb,FW=ai.FetchXmlHttpFactory=Mc,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,vI=ai.XhrIo=tt}).apply(typeof np<"u"?np:typeof self<"u"?self:typeof window<"u"?window:{});var lM="@firebase/firestore";var At=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");var za="10.14.0";var Xs=new _r("@firebase/firestore");function Qu(){return Xs.logLevel}function $(t,...e){if(Xs.logLevel<=Bt.DEBUG){let n=e.map(sE);Xs.debug(`Firestore (${za}): ${t}`,...n)}}function ui(t,...e){if(Xs.logLevel<=Bt.ERROR){let n=e.map(sE);Xs.error(`Firestore (${za}): ${t}`,...n)}}function ka(t,...e){if(Xs.logLevel<=Bt.WARN){let n=e.map(sE);Xs.warn(`Firestore (${za}): ${t}`,...n)}}function sE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function te(t="Unexpected state"){let e=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: `+t;throw ui(e),new Error(e)}function xe(t,e){t||te()}function ae(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},B=class extends on{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Nr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var cp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},AI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}},RI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},NI=class{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Nr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Nr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Nr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new cp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new At(e)}},MI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},xI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}},PI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);let r=s=>{s.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new PI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function LW(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var up=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=LW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Ae(t,e){return t<e?-1:t>e?1:0}function Oa(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Tt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Tt(0,0))}static max(){return new t(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var lp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Xe=class t extends lp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new B(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},VW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,An=class t extends lp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return VW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new B(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new B(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var W=class t{constructor(e){this.path=e}static fromPath(e){return new t(Xe.fromString(e))}static fromName(e){return new t(Xe.fromString(e).popFirst(5))}static empty(){return new t(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Xe(e.slice()))}};var OI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};OI.UNKNOWN_ID=-1;function UW(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new Tt(n+1,0):new Tt(n,r));return new eo(i,W.empty(),e)}function jW(t){return new eo(t.readTime,t.key,-1)}var eo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(le.min(),W.empty(),-1)}static max(){return new t(le.max(),W.empty(),-1)}};function BW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}var $W="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",FI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gl(t){return y(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==$W)throw t;$("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function HW(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ml(t){return t.name==="IndexedDbTransactionError"}var GM=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function jp(t){return t==null}function tl(t){return t===0&&1/t==-1/0}function qW(t){return typeof t=="number"&&Number.isInteger(t)&&!tl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var GW=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xie=[...GW,"documentOverlays"],zW=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WW=zW,KW=[...WW,"indexConfiguration","indexState","indexEntries"];var Pie=[...KW,"globals"];function dM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var st=class t{constructor(e,n){this.comparator=e,this.root=n||Mr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ma(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ma(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ma(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ma(this.root,e,this.comparator,!0)}},Ma=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Mr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};Mr.EMPTY=null,Mr.RED=!0,Mr.BLACK=!1;Mr.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Mr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ht=class t{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dp(this.data.getIterator())}getIteratorFrom(e){return new dp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},dp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Rr=class t{constructor(e){this.fields=e,e.sort(An.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ht(An.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oa(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var hp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var qt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hp("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};qt.EMPTY_BYTE_STRING=new qt("");var QW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function li(t){if(xe(!!t),typeof t=="string"){let e=0,n=QW.exec(t);if(xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ye(t.seconds),nanos:Ye(t.nanos)}}function Ye(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yi(t){return typeof t=="string"?qt.fromBase64String(t):qt.fromUint8Array(t)}function oE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function aE(t){let e=t.mapValue.fields.__previous_value__;return oE(e)?aE(e):e}function nl(t){let e=li(t.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}var LI=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},fp=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var ip={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function to(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?oE(t)?4:KM(t)?9007199254740991:WM(t)?10:11:te()}function kr(t,e){if(t===e)return!0;let n=to(t);if(n!==to(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nl(t).isEqual(nl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=li(i.timestampValue),a=li(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Yi(i.bytesValue).isEqual(Yi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ye(i.geoPointValue.latitude)===Ye(s.geoPointValue.latitude)&&Ye(i.geoPointValue.longitude)===Ye(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ye(i.integerValue)===Ye(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ye(i.doubleValue),a=Ye(s.doubleValue);return o===a?tl(o)===tl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Oa(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(dM(o)!==dM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!kr(o[c],a[c])))return!1;return!0}(t,e);default:return te()}}function rl(t,e){return(t.values||[]).find(n=>kr(n,e))!==void 0}function Fa(t,e){if(t===e)return 0;let n=to(t),r=to(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ye(s.integerValue||s.doubleValue),c=Ye(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return hM(t.timestampValue,e.timestampValue);case 4:return hM(nl(t),nl(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Yi(s),c=Yi(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ae(a[l],c[l]);if(d!==0)return d}return Ae(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ae(Ye(s.latitude),Ye(o.latitude));return a!==0?a:Ae(Ye(s.longitude),Ye(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fM(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Ae(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:fM(_,I)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ip.mapValue&&o===ip.mapValue)return 0;if(s===ip.mapValue)return 1;if(o===ip.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Ae(c[f],d[f]);if(g!==0)return g;let _=Fa(a[c[f]],l[d[f]]);if(_!==0)return _}return Ae(c.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function hM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);let n=li(t),r=li(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function fM(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Fa(n[i],r[i]);if(s)return s}return Ae(n.length,r.length)}function La(t){return VI(t)}function VI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=li(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=VI(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${VI(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function pM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function UI(t){return!!t&&"integerValue"in t}function cE(t){return!!t&&"arrayValue"in t}function gM(t){return!!t&&"nullValue"in t}function mM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function op(t){return!!t&&"mapValue"in t}function WM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Zu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Zu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function KM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var cr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!op(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zu(n)}setAll(e){let n=An.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Zu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());op(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];op(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wa(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Zu(this.value))}};function QM(t){let e=[];return Wa(t.fields,(n,r)=>{let i=new An([n]);if(op(r)){let s=QM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Rr(e)}var ur=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,le.min(),le.min(),le.min(),cr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,le.min(),le.min(),cr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,le.min(),le.min(),cr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Va=class{constructor(e,n){this.position=e,this.inclusive=n}};function _M(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Fa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kr(t.position[n],e.position[n]))return!1;return!0}var Ua=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function YW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var pp=class{},vt=class t extends pp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new BI(e,n,r):n==="array-contains"?new qI(e,r):n==="in"?new GI(e,r):n==="not-in"?new zI(e,r):n==="array-contains-any"?new WI(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $I(e,r):new HI(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fa(n,this.value)):n!==null&&to(this.value)===to(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},lr=class t extends pp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return YM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function YM(t){return t.op==="and"}function ZM(t){return ZW(t)&&YM(t)}function ZW(t){for(let e of t.filters)if(e instanceof lr)return!1;return!0}function jI(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+La(t.value);if(ZM(t))return t.filters.map(e=>jI(e)).join(",");{let e=t.filters.map(n=>jI(n)).join(",");return`${t.op}(${e})`}}function JM(t,e){return t instanceof vt?function(r,i){return i instanceof vt&&r.op===i.op&&r.field.isEqual(i.field)&&kr(r.value,i.value)}(t,e):t instanceof lr?function(r,i){return i instanceof lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&JM(o,i.filters[a]),!0):!1}(t,e):void te()}function XM(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${La(n.value)}`}(t):t instanceof lr?function(n){return n.op.toString()+" {"+n.getFilters().map(XM).join(" ,")+"}"}(t):"Filter"}var BI=class extends vt{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){let n=W.comparator(e.key,this.key);return this.matchesComparison(n)}},$I=class extends vt{constructor(e,n){super(e,"in",n),this.keys=ex("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},HI=class extends vt{constructor(e,n){super(e,"not-in",n),this.keys=ex("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ex(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}var qI=class extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return cE(n)&&rl(n.arrayValue,this.value)}},GI=class extends vt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&rl(this.value.arrayValue,n)}},zI=class extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!rl(this.value.arrayValue,n)}},WI=class extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!cE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rl(this.value.arrayValue,r))}};var KI=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function vM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new KI(t,e,n,r,i,s,o)}function uE(t){let e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jI(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),jp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>La(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>La(r)).join(",")),e.ue=n}return e.ue}function lE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!YW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!JM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!yM(t.startAt,e.startAt)&&yM(t.endAt,e.endAt)}function QI(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var no=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function JW(t,e,n,r,i,s,o,a){return new no(t,e,n,r,i,s,o,a)}function dE(t){return new no(t)}function IM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tx(t){return t.collectionGroup!==null}function Ju(t){let e=ae(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ht(An.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ua(s,r))}),n.has(An.keyField().canonicalString())||e.ce.push(new Ua(An.keyField(),r))}return e.ce}function xr(t){let e=ae(t);return e.le||(e.le=XW(e,Ju(t))),e.le}function XW(t,e){if(t.limitType==="F")return vM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ua(i.field,s)});let n=t.endAt?new Va(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Va(t.startAt.position,t.startAt.inclusive):null;return vM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function YI(t,e){let n=t.filters.concat([e]);return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ZI(t,e,n){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Bp(t,e){return lE(xr(t),xr(e))&&t.limitType===e.limitType}function nx(t){return`${uE(xr(t))}|lt:${t.limitType}`}function Aa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>XM(i)).join(", ")}]`),jp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>La(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>La(i)).join(",")),`Target(${r})`}(xr(t))}; limitType=${t.limitType})`}function $p(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Ju(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=_M(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Ju(r),i)||r.endAt&&!function(o,a,c){let l=_M(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Ju(r),i))}(t,e)}function e4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rx(t){return(e,n)=>{let r=!1;for(let i of Ju(t)){let s=t4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function t4(t,e,n){let r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Fa(c,l):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}var Zi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return zM(this.inner)}size(){return this.innerSize}};var n4=new st(W.comparator);function di(){return n4}var ix=new st(W.comparator);function Yu(...t){let e=ix;for(let n of t)e=e.insert(n.key,n);return e}function sx(t){let e=ix;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ys(){return Xu()}function ox(){return Xu()}function Xu(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}var r4=new st(W.comparator),i4=new Ht(W.comparator);function ye(...t){let e=i4;for(let n of t)e=e.add(n);return e}var s4=new Ht(Ae);function o4(){return s4}function hE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tl(e)?"-0":e}}function ax(t){return{integerValue:""+t}}function a4(t,e){return qW(e)?ax(e):hE(t,e)}var ja=class{constructor(){this._=void 0}};function c4(t,e,n){return t instanceof Ba?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&oE(s)&&(s=aE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ro?ux(t,e):t instanceof io?lx(t,e):function(i,s){let o=cx(i,s),a=wM(o)+wM(i.Pe);return UI(o)&&UI(i.Pe)?ax(a):hE(i.serializer,a)}(t,e)}function u4(t,e,n){return t instanceof ro?ux(t,e):t instanceof io?lx(t,e):n}function cx(t,e){return t instanceof $a?function(r){return UI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ba=class extends ja{},ro=class extends ja{constructor(e){super(),this.elements=e}};function ux(t,e){let n=dx(e);for(let r of t.elements)n.some(i=>kr(i,r))||n.push(r);return{arrayValue:{values:n}}}var io=class extends ja{constructor(e){super(),this.elements=e}};function lx(t,e){let n=dx(e);for(let r of t.elements)n=n.filter(i=>!kr(i,r));return{arrayValue:{values:n}}}var $a=class extends ja{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function wM(t){return Ye(t.integerValue||t.doubleValue)}function dx(t){return cE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function l4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ro&&i instanceof ro||r instanceof io&&i instanceof io?Oa(r.elements,i.elements,kr):r instanceof $a&&i instanceof $a?kr(r.Pe,i.Pe):r instanceof Ba&&i instanceof Ba}(t.transform,e.transform)}var JI=class{constructor(e,n){this.version=e,this.transformResults=n}},Ki=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ap(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ha=class{};function hx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new il(t.key,Ki.none()):new so(t.key,t.data,Ki.none());{let n=t.data,r=cr.empty(),i=new Ht(An.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new hi(t.key,r,new Rr(i.toArray()),Ki.none())}}function d4(t,e,n){t instanceof so?function(i,s,o){let a=i.value.clone(),c=CM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof hi?function(i,s,o){if(!ap(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=CM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(fx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function el(t,e,n,r){return t instanceof so?function(s,o,a,c){if(!ap(s.precondition,o))return a;let l=s.value.clone(),d=TM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof hi?function(s,o,a,c){if(!ap(s.precondition,o))return a;let l=TM(s.fieldTransforms,c,o),d=o.data;return d.setAll(fx(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return ap(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function h4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=cx(r.transform,i||null);s!=null&&(n===null&&(n=cr.empty()),n.set(r.field,s))}return n||null}function EM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Oa(r,i,(s,o)=>l4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var so=class extends Ha{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},hi=class extends Ha{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function fx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function CM(t,e,n){let r=new Map;xe(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,u4(o,a,n[i]))}return r}function TM(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,c4(s,o,e))}return r}var il=class extends Ha{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},XI=class extends Ha{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ew=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&d4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=el(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=el(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=ox();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=hx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Oa(this.mutations,e.mutations,(n,r)=>EM(n,r))&&Oa(this.baseMutations,e.baseMutations,(n,r)=>EM(n,r))}},tw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length);let i=function(){return r4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var nw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var rw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var _t,Ee;function f4(t){switch(t){default:return te();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function px(t){if(t===void 0)return ui("GRPC error has no .code"),x.UNKNOWN;switch(t){case _t.OK:return x.OK;case _t.CANCELLED:return x.CANCELLED;case _t.UNKNOWN:return x.UNKNOWN;case _t.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case _t.INTERNAL:return x.INTERNAL;case _t.UNAVAILABLE:return x.UNAVAILABLE;case _t.UNAUTHENTICATED:return x.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case _t.NOT_FOUND:return x.NOT_FOUND;case _t.ALREADY_EXISTS:return x.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return x.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case _t.ABORTED:return x.ABORTED;case _t.OUT_OF_RANGE:return x.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return x.UNIMPLEMENTED;case _t.DATA_LOSS:return x.DATA_LOSS;default:return te()}}(Ee=_t||(_t={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var bM=null;function p4(){return new TextEncoder}var g4=new Wi([4294967295,4294967295],0);function DM(t){let e=p4().encode(t),n=new yI;return n.update(e),new Uint8Array(n.digest())}function SM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wi([n,r],0),new Wi([i,s],0)]}var iw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Zs(`Invalid padding: ${n}`);if(r<0)throw new Zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Zs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Zs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Wi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Wi.fromNumber(r)));return i.compare(g4)===1&&(i=new Wi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=DM(e),[r,i]=SM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=DM(e),[r,i]=SM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Zs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var gp=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,sl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(le.min(),i,new st(Ae),di(),ye())}},sl=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ye(),ye(),ye())}};var xa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},mp=class{constructor(e,n){this.targetId=e,this.me=n}},_p=class{constructor(e,n,r=qt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},yp=class{constructor(){this.fe=0,this.ge=RM(),this.pe=qt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new sl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=RM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},sw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=di(),this.qe=AM(),this.Qe=new st(Ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(QI(s))if(r===0){let o=new W(s.path);this.Ue(n,o,ur.newNoDocument(o,le.min()))}else xe(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}bM?.et(function(d,f,g,_,I){var R,S,P,U,H,K;let Oe={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},J=f.unchangedNames;return J&&(Oe.bloomFilter={applied:I===0,hashCount:(R=J?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(U=(P=(S=J?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&U!==void 0?U:0,padding:(K=(H=J?.bits)===null||H===void 0?void 0:H.padding)!==null&&K!==void 0?K:0,mightContain:C=>{var v;return(v=_?.mightContain(C))!==null&&v!==void 0&&v}}),Oe}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Yi(r).toUint8Array()}catch(c){if(c instanceof hp)return ka("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new iw(o,i,s)}catch(c){return ka(c instanceof Zs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&QI(a.target)){let c=new W(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ur.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new gp(e,n,this.Qe,this.ke,r);return this.ke=di(),this.qe=AM(),this.Qe=new st(Ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new yp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ht(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new yp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function AM(){return new st(W.comparator)}function RM(){return new st(W.comparator)}var m4={asc:"ASCENDING",desc:"DESCENDING"},_4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y4={and:"AND",or:"OR"},ow=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function aw(t,e){return t.useProto3Json||jp(e)?e:{value:e}}function vp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function v4(t,e){return vp(t,e.toTimestamp())}function Pr(t){return xe(!!t),le.fromTimestamp(function(n){let r=li(n);return new Tt(r.seconds,r.nanos)}(t))}function fE(t,e){return cw(t,e).canonicalString()}function cw(t,e){let n=function(i){return new Xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function mx(t){let e=Xe.fromString(t);return xe(wx(e)),e}function uw(t,e){return fE(t.databaseId,e.path)}function TI(t,e){let n=mx(e);if(n.get(1)!==t.databaseId.projectId)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(yx(n))}function _x(t,e){return fE(t.databaseId,e)}function I4(t){let e=mx(t);return e.length===4?Xe.emptyPath():yx(e)}function lw(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function yx(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function NM(t,e,n){return{name:uw(t,e),fields:n.value.mapValue.fields}}function w4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(xe(d===void 0||typeof d=="string"),qt.fromBase64String(d||"")):(xe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),qt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?x.UNKNOWN:px(l.code);return new B(d,l.message||"")}(o);n=new _p(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=TI(t,r.document.name),s=Pr(r.document.updateTime),o=r.document.createTime?Pr(r.document.createTime):le.min(),a=new cr({mapValue:{fields:r.document.fields}}),c=ur.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new xa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=TI(t,r.document),s=r.readTime?Pr(r.readTime):le.min(),o=ur.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=TI(t,r.document),s=r.removedTargetIds||[];n=new xa([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new rw(i,s),a=r.targetId;n=new mp(a,o)}}return n}function E4(t,e){let n;if(e instanceof so)n={update:NM(t,e.key,e.value)};else if(e instanceof il)n={delete:uw(t,e.key)};else if(e instanceof hi)n={update:NM(t,e.key,e.data),updateMask:M4(e.fieldMask)};else{if(!(e instanceof XI))return te();n={verify:uw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ro)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof io)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $a)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:v4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function C4(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Pr(i.updateTime):Pr(s);return o.isEqual(le.min())&&(o=Pr(s)),new JI(o,i.transformResults||[])}(n,e))):[]}function T4(t,e){return{documents:[_x(t,e.path)]}}function b4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_x(t,i);let s=function(l){if(l.length!==0)return Ix(lr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ra(g.field),direction:A4(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=aw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function D4(t){let e=I4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xe(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=vx(f);return g instanceof lr&&ZM(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(I){return new Ua(Na(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,jp(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new Va(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,_=f.values||[];return new Va(_,g)}(n.endAt)),JW(e,i,o,s,a,"F",c,l)}function S4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Na(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Na(n.unaryFilter.field);return vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Na(n.unaryFilter.field);return vt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Na(n.unaryFilter.field);return vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return vt.create(Na(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return lr.create(n.compositeFilter.filters.map(r=>vx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function A4(t){return m4[t]}function R4(t){return _4[t]}function N4(t){return y4[t]}function Ra(t){return{fieldPath:t.canonicalString()}}function Na(t){return An.fromServerFormat(t.fieldPath)}function Ix(t){return t instanceof vt?function(n){if(n.op==="=="){if(mM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NAN"}};if(gM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(mM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NAN"}};if(gM(n.value))return{unaryFilter:{field:Ra(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ra(n.field),op:R4(n.op),value:n.value}}}(t):t instanceof lr?function(n){let r=n.getFilters().map(i=>Ix(i));return r.length===1?r[0]:{compositeFilter:{op:N4(n.op),filters:r}}}(t):te()}function M4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ol=class t{constructor(e,n,r,i,s=le.min(),o=le.min(),a=qt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var dw=class{constructor(e){this.ct=e}};function x4(t){let e=D4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ZI(e,e.limit,"L"):e}var Ip=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Ye(e.integerValue));else if("doubleValue"in e){let r=Ye(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),tl(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=li(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Yi(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?KM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):WM(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):te()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Ye(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),W.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Ip.vt=new Ip;var hw=class{constructor(){this.un=new fw}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(eo.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(eo.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},fw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ht(Xe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ht(Xe.comparator)).toArray()}};var Oie=new Uint8Array(0);var Ar=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Ar.DEFAULT_COLLECTION_PERCENTILE=10,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ar.DEFAULT=new Ar(41943040,Ar.DEFAULT_COLLECTION_PERCENTILE,Ar.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ar.DISABLED=new Ar(-1,0,0);var al=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var pw=class{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ur.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var gw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var mw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&el(r.mutation,i,Rr.empty(),Tt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){let i=Ys();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Yu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Ys();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=di(),o=Xu(),a=function(){return Xu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof hi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),el(d.mutation,l,d.mutation.getFieldMask(),Tt.now())):o.set(l.key,Rr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new gw(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Xu(),i=new st((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||Rr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||ye()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=ox();d.forEach(g=>{if(!s.has(g)){let _=hx(n.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(Ys()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ye())).next(d=>({batchId:a,changes:sx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=Yu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Yu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(f,g){return new no(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,ur.newInvalidDocument(d)))});let a=Yu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&el(d.mutation,l,Rr.empty(),Tt.now()),$p(n,l)&&(a=a.insert(c,l))}),a})}};var _w=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Pr(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:x4(i.bundledQuery),readTime:Pr(i.readTime)}}(n)),k.resolve()}};var yw=class{constructor(){this.overlays=new st(W.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Ys();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Ys(),s=n.length+1,o=new W(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new st((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Ys(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Ys(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nw(n,r));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var vw=class{constructor(){this.sessionToken=qt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var cl=class{constructor(){this.Tr=new Ht(yt.Er),this.dr=new Ht(yt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new yt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new yt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new W(new Xe([])),r=new yt(n,e),i=new yt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new W(new Xe([])),r=new yt(n,e),i=new yt(n,e+1),s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new yt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},yt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||Ae(e.wr,n.wr)}static Ar(e,n){return Ae(e.wr,n.wr)||W.comparator(e.key,n.key)}};var Iw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ht(yt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ew(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new yt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new yt(n,0),i=new yt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ht(Ae);return n.forEach(i=>{let s=new yt(i,0),o=new yt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;W.isDocumentKey(s)||(s=s.child(""));let o=new yt(new W(s),0),a=new Ht(Ae);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new yt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new yt(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ww=class{constructor(e){this.Mr=e,this.docs=function(){return new st(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():ur.newInvalidDocument(n))}getEntries(e,n){let r=di();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ur.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=di(),o=n.path,a=new W(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||BW(jW(d),r)<=0||(i.has(d.key)||$p(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Ew(this)}getSize(e){return k.resolve(this.size)}},Ew=class extends pw{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Cw=class{constructor(e){this.persistence=e,this.Nr=new Zi(n=>uE(n),lE),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new cl,this.targetCount=0,this.kr=al.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new al(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var Tw=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new GM(0),this.Kr=!1,this.Kr=!0,this.$r=new vw,this.referenceDelegate=e(this),this.Ur=new Cw(this),this.indexManager=new hw,this.remoteDocumentCache=function(i){return new ww(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new dw(n),this.Gr=new _w(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new yw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Iw(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);let i=new bw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},bw=class extends FI{constructor(e){super(),this.currentSequenceNumber=e}},Dw=class t{constructor(e){this.persistence=e,this.Jr=new cl,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=W.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var Sw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ye(),i=ye();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Aw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Rw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Jb()?8:HW(jt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Aw;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Qu()<=Bt.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",Aa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(Qu()<=Bt.DEBUG&&$("QueryEngine","Query:",Aa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Qu()<=Bt.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",Aa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xr(n))):k.resolve())}Yi(e,n){if(IM(n))return k.resolve(null);let r=xr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ZI(n,null,"F"),r=xr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ye(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,ZI(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return IM(n)||i.isEqual(le.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(Qu()<=Bt.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Aa(n)),this.rs(e,o,n,UW(i,-1)).next(a=>a))})}ts(e,n){let r=new Ht(rx(e));return n.forEach((i,s)=>{$p(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Qu()<=Bt.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",Aa(n)),this.Ji.getDocumentsMatchingQuery(e,n,eo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Nw=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new st(Ae),this._s=new Zi(s=>uE(s),lE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function P4(t,e,n,r){return new Nw(t,e,n,r)}function Ex(t,e){return y(this,null,function*(){let n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ye();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function k4(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),_=k.resolve();return g.forEach(I=>{_=_.next(()=>d.getEntry(c,I)).next(R=>{let S=l.docVersions.get(I);xe(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ye();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Cx(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function O4(t,e){let n=ae(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(qt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(R,S,P){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let c=di(),l=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(F4(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(le.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function F4(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=di();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):$("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function L4(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function V4(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ol(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function Mw(t,e,n){return y(this,null,function*(){let r=ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ml(o))throw o;$("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function MM(t,e,n){let r=ae(t),i=le.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=ae(c),g=f._s.get(d);return g!==void 0?k.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,xr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ye())).next(a=>(U4(r,e4(e),a),{documents:a,Ts:s})))}function U4(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var wp=class{constructor(){this.activeTargetIds=o4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var xw=class{constructor(){this.so=new wp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new wp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Pw=class{_o(e){}shutdown(){}};var Ep=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){$("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){$("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sp=null;function bI(){return sp===null?sp=function(){return 268435456+Math.round(2147483648*Math.random())}():sp++,"0x"+sp.toString(16)}var j4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var kw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var $t="WebChannelConnection",Ow=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=bI(),c=this.xo(n,r.toUriEncodedString());$("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>($("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw ka("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=j4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=bI();return new Promise((o,a)=>{let c=new vI;c.setWithCredentials(!0),c.listenOnce(II.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ku.NO_ERROR:let d=c.getResponseJson();$($t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ku.TIMEOUT:$($t,`RPC '${e}' ${s} timed out`),a(new B(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ku.HTTP_ERROR:let f=c.getStatus();if($($t,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let I=function(S){let P=S.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(_.status);a(new B(I,_.message))}else a(new B(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new B(x.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{$($t,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);$($t,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=bI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=CI(),a=EI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");$($t,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,_=!1,I=new kw({Io:S=>{_?$($t,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||($($t,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),$($t,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),R=(S,P,U)=>{S.listen(P,H=>{try{U(H)}catch(K){setTimeout(()=>{throw K},0)}})};return R(f,Sa.EventType.OPEN,()=>{_||($($t,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),R(f,Sa.EventType.CLOSE,()=>{_||(_=!0,$($t,`RPC '${e}' stream ${i} transport closed`),I.So())}),R(f,Sa.EventType.ERROR,S=>{_||(_=!0,ka($t,`RPC '${e}' stream ${i} transport errored:`,S),I.So(new B(x.UNAVAILABLE,"The operation could not be completed")))}),R(f,Sa.EventType.MESSAGE,S=>{var P;if(!_){let U=S.data[0];xe(!!U);let H=U,K=H.error||((P=H[0])===null||P===void 0?void 0:P.error);if(K){$($t,`RPC '${e}' stream ${i} received error:`,K);let Oe=K.status,J=function(w){let T=_t[w];if(T!==void 0)return px(T)}(Oe),C=K.message;J===void 0&&(J=x.INTERNAL,C="Unknown error status: "+Oe+" with message "+K.message),_=!0,I.So(new B(J,C)),f.close()}else $($t,`RPC '${e}' stream ${i} received:`,U),I.bo(U)}}),R(a,wI.STAT_EVENT,S=>{S.stat===rp.PROXY?$($t,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===rp.NOPROXY&&$($t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function DI(){return typeof document<"u"?document:null}function Hp(t){return new ow(t,!0)}var Cp=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&$("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Tp=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Cp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(ui(n.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new B(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return $("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():($("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Fw=class extends Tp{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=w4(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Pr(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=lw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=QI(c)?{documents:T4(s,c)}:{query:b4(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=gx(s,o.resumeToken);let l=aw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=vp(s,o.snapshotVersion.toTimestamp());let l=aw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=S4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=lw(this.serializer),n.removeTarget=e,this.a_(n)}},Lw=class extends Tp{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=C4(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=lw(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>E4(this.serializer,r))};this.a_(n)}};var Vw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,cw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new B(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,cw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Uw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ui(n),this.D_=!1):$("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var jw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){ao(this)&&($("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=ae(c);l.L_.add(4),yield _l(l),l.q_.set("Unknown"),l.L_.delete(4),yield qp(l)})}(this))}))}),this.q_=new Uw(r,i)}};function qp(t){return y(this,null,function*(){if(ao(t))for(let e of t.B_)yield e(!0)})}function _l(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Tx(t,e){let n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_E(n)?mE(n):Ka(n).r_()&&gE(n,e))}function pE(t,e){let n=ae(t),r=Ka(n);n.N_.delete(e),r.r_()&&bx(n,e),n.N_.size===0&&(r.r_()?r.o_():ao(n)&&n.q_.set("Unknown"))}function gE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ka(t).A_(e)}function bx(t,e){t.Q_.xe(e),Ka(t).R_(e)}function mE(t){t.Q_=new sw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ka(t).start(),t.q_.v_()}function _E(t){return ao(t)&&!Ka(t).n_()&&t.N_.size>0}function ao(t){return ae(t).L_.size===0}function Dx(t){t.Q_=void 0}function B4(t){return y(this,null,function*(){t.q_.set("Online")})}function $4(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{gE(t,e)})})}function H4(t,e){return y(this,null,function*(){Dx(t),_E(t)?(t.q_.M_(e),mE(t)):t.q_.set("Unknown")})}function q4(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof _p&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){$("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bp(t,r)}else if(e instanceof xa?t.Q_.Ke(e):e instanceof mp?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{let r=yield Cx(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(qt.EMPTY_BYTE_STRING,d.snapshotVersion)),bx(s,c);let f=new ol(d.target,c,l,d.sequenceNumber);gE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){$("RemoteStore","Failed to raise snapshot:",r),yield bp(t,r)}})}function bp(t,e,n){return y(this,null,function*(){if(!ml(e))throw e;t.L_.add(1),yield _l(t),t.q_.set("Offline"),n||(n=()=>Cx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){$("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield qp(t)}))})}function Sx(t,e){return e().catch(n=>bp(t,n,e))}function Gp(t){return y(this,null,function*(){let e=ae(t),n=Ji(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;G4(e);)try{let i=yield L4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,z4(e,i)}catch(i){yield bp(e,i)}Ax(e)&&Rx(e)})}function G4(t){return ao(t)&&t.O_.length<10}function z4(t,e){t.O_.push(e);let n=Ji(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Ax(t){return ao(t)&&!Ji(t).n_()&&t.O_.length>0}function Rx(t){Ji(t).start()}function W4(t){return y(this,null,function*(){Ji(t).p_()})}function K4(t){return y(this,null,function*(){let e=Ji(t);for(let n of t.O_)e.m_(n.mutations)})}function Q4(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=tw.from(r,e,n);yield Sx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Gp(t)})}function Y4(t,e){return y(this,null,function*(){e&&Ji(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return f4(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();Ji(r).s_(),yield Sx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Gp(r)}})}(t,e)),Ax(t)&&Rx(t)})}function xM(t,e){return y(this,null,function*(){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),$("RemoteStore","RemoteStore received new credentials");let r=ao(n);n.L_.add(3),yield _l(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield qp(n)})}function Z4(t,e){return y(this,null,function*(){let n=ae(t);e?(n.L_.delete(2),yield qp(n)):e||(n.L_.add(2),yield _l(n),n.q_.set("Unknown"))})}function Ka(t){return t.K_||(t.K_=function(n,r,i){let s=ae(n);return s.w_(),new Fw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:B4.bind(null,t),Ro:$4.bind(null,t),mo:H4.bind(null,t),d_:q4.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),_E(t)?mE(t):t.q_.set("Unknown")):(yield t.K_.stop(),Dx(t))}))),t.K_}function Ji(t){return t.U_||(t.U_=function(n,r,i){let s=ae(n);return s.w_(),new Lw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:W4.bind(null,t),mo:Y4.bind(null,t),f_:K4.bind(null,t),g_:Q4.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield Gp(t)):(yield t.U_.stop(),t.O_.length>0&&($("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var Bw=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function yE(t,e){if(ui("AsyncQueue",`${e}: ${t}`),ml(t))return new B(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Dp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Yu(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Sp=class{constructor(){this.W_=new st(W.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},qa=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Dp.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var $w=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Hw=class{constructor(){this.queries=PM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=ae(n),s=i.queries;i.queries=PM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new B(x.ABORTED,"Firestore shutting down"))}};function PM(){return new Zi(t=>nx(t),Bp)}function Nx(t,e){return y(this,null,function*(){let n=ae(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new $w,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=yE(o,`Initialization of query '${Aa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&vE(n)})}function Mx(t,e){return y(this,null,function*(){let n=ae(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function J4(t,e){let n=ae(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&vE(n)}function X4(t,e,n){let r=ae(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function vE(t){t.Y_.forEach(e=>{e.next()})}var qw,kM;(kM=qw||(qw={})).ea="default",kM.Cache="cache";var Ap=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new qa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qw.Cache}};var Rp=class{constructor(e){this.key=e}},Np=class{constructor(e){this.key=e}},Gw=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=rx(e),this.Ra=new Dp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Sp,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=$p(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;g&&_?g.data.isEqual(_.data)?I!==R&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(_,I){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return R(_)-R(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new qa(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Np(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Rp(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return qa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},zw=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ww=class{constructor(e){this.key=e,this.va=!1}},Kw=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Zi(a=>nx(a),Bp),this.Ma=new Map,this.xa=new Set,this.Oa=new st(W.comparator),this.Na=new Map,this.La=new cl,this.Ba={},this.ka=new Map,this.qa=al.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function e3(t,e,n=!0){return y(this,null,function*(){let r=Lx(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield xx(r,e,n,!0),i})}function t3(t,e){return y(this,null,function*(){let n=Lx(t);yield xx(n,e,!0,!1)})}function xx(t,e,n,r){return y(this,null,function*(){let i=yield V4(t.localStore,xr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield n3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Tx(t.remoteStore,i),a})}function n3(t,e,n,r,i){return y(this,null,function*(){t.Ka=(f,g,_)=>function(R,S,P,U){return y(this,null,function*(){let H=S.view.ma(P);H.ns&&(H=yield MM(R.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,H)));let K=U&&U.targetChanges.get(S.targetId),Oe=U&&U.targetMismatches.get(S.targetId)!=null,J=S.view.applyChanges(H,R.isPrimaryClient,K,Oe);return FM(R,S.targetId,J.wa),J.snapshot})}(t,f,g,_);let s=yield MM(t.localStore,e,!0),o=new Gw(e,s.Ts),a=o.ma(s.documents),c=sl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);FM(t,n,l.wa);let d=new zw(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function r3(t,e,n){return y(this,null,function*(){let r=ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Bp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Mw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pE(r.remoteStore,i.targetId),Qw(r,i.targetId)}).catch(gl))):(Qw(r,i.targetId),yield Mw(r.localStore,i.targetId,!0))})}function i3(t,e){return y(this,null,function*(){let n=ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pE(n.remoteStore,r.targetId))})}function s3(t,e,n){return y(this,null,function*(){let r=h3(t);try{let i=yield function(o,a){let c=ae(o),l=Tt.now(),d=a.reduce((_,I)=>_.add(I.key),ye()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=di(),R=ye();return c.cs.getEntries(_,d).next(S=>{I=S,I.forEach((P,U)=>{U.isValidDocument()||(R=R.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,I)).next(S=>{f=S;let P=[];for(let U of a){let H=h4(U,f.get(U.key).overlayedDocument);H!=null&&P.push(new hi(U.key,H,QM(H.value.mapValue),Ki.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(_,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:sx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new st(Ae)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield yl(r,i.changes),yield Gp(r.remoteStore)}catch(i){let s=yE(i,"Failed to persist write");n.reject(s)}})}function Px(t,e){return y(this,null,function*(){let n=ae(t);try{let r=yield O4(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?xe(o.va):i.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),yield yl(n,r,e)}catch(r){yield gl(r)}})}function OM(t,e,n){let r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ae(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&vE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function o3(t,e,n){return y(this,null,function*(){let r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new st(W.comparator);o=o.insert(s,ur.newNoDocument(s,le.min()));let a=ye().add(s),c=new gp(le.min(),new Map,new st(Ae),o,a);yield Px(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),IE(r)}else yield Mw(r.localStore,e,!1).then(()=>Qw(r,e,n)).catch(gl)})}function a3(t,e){return y(this,null,function*(){let n=ae(t),r=e.batch.batchId;try{let i=yield k4(n.localStore,e);Ox(n,r,null),kx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield yl(n,i)}catch(i){yield gl(i)}})}function c3(t,e,n){return y(this,null,function*(){let r=ae(t);try{let i=yield function(o,a){let c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(xe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);Ox(r,e,n),kx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield yl(r,i)}catch(i){yield gl(i)}})}function kx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Ox(t,e,n){let r=ae(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Qw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Fx(t,r)})}function Fx(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(pE(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),IE(t))}function FM(t,e,n){for(let r of n)r instanceof Rp?(t.La.addReference(r.key,e),u3(t,r)):r instanceof Np?($("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Fx(t,r.key)):te()}function u3(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||($("SyncEngine","New document in limbo: "+n),t.xa.add(r),IE(t))}function IE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new W(Xe.fromString(e)),r=t.qa.next();t.Na.set(r,new Ww(n)),t.Oa=t.Oa.insert(n,r),Tx(t.remoteStore,new ol(xr(dE(n.path)),r,"TargetPurposeLimboResolution",GM.oe))}}function yl(t,e,n){return y(this,null,function*(){let r=ae(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Sw.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=ae(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>k.forEach(l,g=>k.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>k.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!ml(f))throw f;$("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let _=d.os.get(g),I=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function l3(t,e){return y(this,null,function*(){let n=ae(t);if(!n.currentUser.isEqual(e)){$("SyncEngine","User change. New user:",e.toKey());let r=yield Ex(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new B(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield yl(n,r.hs)}})}function d3(t,e){let n=ae(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function Lx(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Px.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=d3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o3.bind(null,e),e.Ca.d_=J4.bind(null,e.eventManager),e.Ca.$a=X4.bind(null,e.eventManager),e}function h3(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=a3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=c3.bind(null,e),e}var LM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=Hp(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return P4(this.persistence,new Rw,n.initialUser,this.serializer)}Ga(n){return new Tw(Dw.Zr,this.serializer)}Wa(n){return new xw}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var f3=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=l3.bind(null,this.syncEngine),yield Z4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new Hw}()}createDatastore(n){let r=Hp(n.databaseInfo.databaseId),i=function(o){return new Ow(o)}(n.databaseInfo);return function(o,a,c,l){return new Vw(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new jw(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>OM(this.syncEngine,r,0),function(){return Ep.D()?new Ep:new Pw}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,f){let g=new Kw(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=ae(s);$("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield _l(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Mp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Yw=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=up.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){$("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>($("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=yE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function SI(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),$("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield Ex(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function VM(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield p3(t);$("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xM(e.remoteStore,i)),t._onlineComponents=e})}function p3(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$("FirestoreClient","Using user provided OfflineComponentProvider");try{yield SI(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ka("Error using user provided cache. Falling back to memory cache: "+n),yield SI(t,new LM)}}else $("FirestoreClient","Using default OfflineComponentProvider"),yield SI(t,new LM);return t._offlineComponents})}function Vx(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?($("FirestoreClient","Using user provided OnlineComponentProvider"),yield VM(t,t._uninitializedComponentsProvider._online)):($("FirestoreClient","Using default OnlineComponentProvider"),yield VM(t,new f3))),t._onlineComponents})}function g3(t){return Vx(t).then(e=>e.syncEngine)}function Zw(t){return y(this,null,function*(){let e=yield Vx(t),n=e.eventManager;return n.onListen=e3.bind(null,e.syncEngine),n.onUnlisten=r3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=t3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=i3.bind(null,e.syncEngine),n})}function m3(t,e,n={}){let r=new Nr;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new Mp({next:g=>{d.Za(),o.enqueueAndForget(()=>Mx(s,f)),g.fromCache&&c.source==="server"?l.reject(new B(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Ap(a,d,{includeMetadataChanges:!0,_a:!0});return Nx(s,f)}(yield Zw(t),t.asyncQueue,e,n,r)})),r.promise}function Ux(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var UM=new Map;function jx(t,e,n){if(!n)throw new B(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function _3(t,e,n,r){if(e===!0&&r===!0)throw new B(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jM(t){if(!W.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function BM(t){if(W.isDocumentKey(t))throw new B(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function ci(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=zp(t);throw new B(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var xp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ux((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new B(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ga=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new AI;switch(r.type){case"firstParty":return new xI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=UM.get(n);r&&($("ComponentProvider","Removing Datastore"),UM.delete(n),r.terminate())}(this),Promise.resolve()}};function Bx(t,e,n,r={}){var i;let s=(t=ci(t,Ga))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ka("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=At.MOCK_USER;else{a=Do(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new B(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new At(l)}t._authCredentials=new RI(new cp(a,c))}}var oo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},mn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Qi=class t extends oo{constructor(e,n,r){super(e,n,dE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mn(this.firestore,null,new W(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function $x(t,e,...n){if(t=ve(t),jx("collection","path",e),t instanceof Ga){let r=Xe.fromString(e,...n);return BM(r),new Qi(t,null,r)}{if(!(t instanceof mn||t instanceof Qi))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Xe.fromString(e,...n));return BM(r),new Qi(t.firestore,null,r)}}function Hx(t,e,...n){if(t=ve(t),arguments.length===1&&(e=up.newId()),jx("doc","path",e),t instanceof Ga){let r=Xe.fromString(e,...n);return jM(r),new mn(t,null,new W(r))}{if(!(t instanceof mn||t instanceof Qi))throw new B(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Xe.fromString(e,...n));return jM(r),new mn(t.firestore,t instanceof Qi?t.converter:null,new W(r))}}var Pp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Cp(this,"async_queue_retry"),this.Vu=()=>{let r=DI();r&&$("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=DI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=DI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Nr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ml(e))throw e;$("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ui("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=Bw.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function $M(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Xi=class extends Ga{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Pp(e),this._firestoreClient=void 0,yield e}})}};function qx(t,e){let n=typeof t=="object"?t:ft(),r=typeof t=="string"?t:e||"(default)",i=ht(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ci("firestore");s&&Bx(i,...s)}return i}function wE(t){if(t._terminated)throw new B(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||y3(t),t._firestoreClient}function y3(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new LI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Ux(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Yw(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var ul=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(qt.fromBase64String(e))}catch(n){throw new B(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(qt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ll=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new An(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var kp=class{constructor(e){this._methodName=e}};var dl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var hl=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var v3=/^__.*__$/,Jw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new so(e,this.data,n,this.fieldTransforms)}};function Gx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var Xw=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Op(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Gx(this.Cu)&&v3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},eE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Hp(e)}Qu(e,n,r,i=!1){return new Xw({Cu:e,methodName:n,qu:r,path:An.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function zx(t){let e=t._freezeSettings(),n=Hp(t._databaseId);return new eE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function I3(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);Qx("Data must be an object, but it was:",o,r);let a=Wx(r,o),c,l;if(s.merge)c=new Rr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=E3(e,f,n);if(!o.contains(g))throw new B(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);T3(d,g)||d.push(g)}c=new Rr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new Jw(new cr(a),c,l)}function w3(t,e,n,r=!1){return EE(n,t.Qu(r?4:3,e))}function EE(t,e){if(Kx(t=ve(t)))return Qx("Unsupported field value:",e,t),Wx(t,e);if(t instanceof kp)return function(r,i){if(!Gx(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=EE(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return a4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Tt.fromDate(r);return{timestampValue:vp(i.serializer,s)}}if(r instanceof Tt){let s=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vp(i.serializer,s)}}if(r instanceof dl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ul)return{bytesValue:gx(i.serializer,r._byteString)};if(r instanceof mn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof hl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return hE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${zp(r)}`)}(t,e)}function Wx(t,e){let n={};return zM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(r,i)=>{let s=EE(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Kx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof dl||t instanceof ul||t instanceof mn||t instanceof kp||t instanceof hl)}function Qx(t,e,n){if(!Kx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=zp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function E3(t,e,n){if((e=ve(e))instanceof ll)return e._internalPath;if(typeof e=="string")return Yx(t,e);throw Op("Field path arguments must be of type string or ",t,!1,void 0,n)}var C3=new RegExp("[~\\*/\\[\\]]");function Yx(t,e,n){if(e.search(C3)>=0)throw Op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ll(...e.split("."))._internalPath}catch{throw Op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Op(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new B(x.INVALID_ARGUMENT,a+t+c)}function T3(t,e){return t.some(n=>n.isEqual(e))}var Fp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new tE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(CE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},tE=class extends Fp{data(){return super.data()}};function CE(t,e){return typeof e=="string"?Yx(t,e):e instanceof ll?e._internalPath:e._delegate._internalPath}function Zx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fl=class{},nE=class extends fl{};function Jx(t,e,...n){let r=[];e instanceof fl&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof rE).length,a=s.filter(c=>c instanceof Lp).length;if(o>1||o>0&&a>0)throw new B(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Lp=class t extends nE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return eP(e._query,n),new oo(e.firestore,e.converter,YI(e._query,n))}_parse(e){let n=zx(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new B(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){qM(f,d);let _=[];for(let I of f)_.push(HM(c,s,I));g={arrayValue:{values:_}}}else g=HM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||qM(f,d),g=w3(a,o,f,d==="in"||d==="not-in");return vt.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Xx(t,e,n){let r=e,i=CE("where",t);return Lp._create(i,r,n)}var rE=class t extends fl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:lr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)eP(o,c),o=YI(o,c)}(e._query,n),new oo(e.firestore,e.converter,YI(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function HM(t,e,n){if(typeof(n=ve(n))=="string"){if(n==="")throw new B(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tx(e)&&n.indexOf("/")!==-1)throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Xe.fromString(n));if(!W.isDocumentKey(r))throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pM(t,new W(r))}if(n instanceof mn)return pM(t,n._key);throw new B(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zp(n)}.`)}function qM(t,e){if(!Array.isArray(t)||t.length===0)throw new B(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function eP(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var iE=class{convertValue(e,n="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ye(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Wa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Ye(o.doubleValue));return new hl(s)}convertGeoPoint(e){return new dl(Ye(e.latitude),Ye(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=aE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){let n=li(e);return new Tt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Xe.fromString(e);xe(wx(r));let i=new fp(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||ui(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function b3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Js=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vp=class extends Fp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Pa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(CE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Pa=class extends Vp{data(e={}){return super.data(e)}},Up=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Js(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Pa(this._firestore,this._userDataWriter,r.key,r,new Js(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Pa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Js(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Pa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Js(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:D3(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function D3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}var pl=class extends iE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ul(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new mn(this.firestore,null,n)}};function tP(t){t=ci(t,oo);let e=ci(t.firestore,Xi),n=wE(e),r=new pl(e);return Zx(t._query),m3(n,t._query).then(i=>new Up(e,r,t,i))}function nP(t,e,n){t=ci(t,mn);let r=ci(t.firestore,Xi),i=b3(t.converter,e,n);return iP(r,[I3(zx(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ki.none())])}function rP(t){return iP(ci(t.firestore,Xi),[new il(t._key,Ki.none())])}function TE(t,...e){var n,r,i;t=ve(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||$M(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if($M(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof mn)l=ci(t.firestore,Xi),d=dE(t._key.path),c={next:f=>{e[o]&&e[o](S3(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=ci(t,oo);l=ci(f.firestore,Xi),d=f._query;let g=new pl(l);c={next:_=>{e[o]&&e[o](new Up(l,g,f,_))},error:e[o+1],complete:e[o+2]},Zx(t._query)}return function(g,_,I,R){let S=new Mp(R),P=new Ap(_,S,I);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Nx(yield Zw(g),P)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Mx(yield Zw(g),P)}))}}(wE(l),d,a,c)}function iP(t,e){return function(r,i){let s=new Nr;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return s3(yield g3(r),i,s)})),s.promise}(wE(t),e)}function S3(t,e,n){let r=n.docs.get(e._key),i=new pl(t);return new Vp(t,i,e._key,r,new Js(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){za=i})(an),ct(new at("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Xi(new NI(r.getProvider("auth-internal")),new kI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new B(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fp(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),q(lM,"4.7.3",e),q(lM,"4.7.3","esm2017")})();var Wp=function(){return Wp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wp.apply(this,arguments)};var N3={includeMetadataChanges:!1};function sP(t,e){return e===void 0&&(e=N3),new oe(function(n){var r=TE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function oP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:Wp(Wp({},r),(n={},n[e.idField]=t.id,n))}function aP(t){return sP(t,{includeMetadataChanges:!0}).pipe(z(function(e){return e.docs}))}function cP(t,e){return e===void 0&&(e={}),aP(t).pipe(z(function(n){return n.map(function(r){return oP(r,e)})}))}var co=class{constructor(e){return e}},uP="firestore",bE=class{constructor(){return dt(uP)}};var DE=new V("angularfire2.firestore-instances");function M3(t,e){let n=mt(uP,t,e);return n&&new co(n)}function x3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new co(r)}}var P3={provide:bE,deps:[[new ie,DE]]},k3={provide:co,useFactory:M3,deps:[[new ie,DE],We]};function lP(t,...e){return q("angularfire",ze.full,"fst"),$e([k3,P3,{provide:DE,useFactory:x3(t),multi:!0,deps:[X,_e,it,Je,[new ie,ar],[new ie,gn],...e]}])}var es=be(cP,!0);var ts=be($x,!0);var dP=be(rP,!0);var Kp=be(Hx,!0);var SE=be(tP,!0);var hP=be(qx,!0);var fP=be(Jx,!0);var AE=be(nP,!0);var pP=be(Xx,!0);var gP="@firebase/database",mP="1.0.8";var DC="";function O3(t){DC=t}var FE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),bt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:pd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var LE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return mr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var KP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new FE(e)}}catch{}return new LE},lo=KP("localStorage"),VE=KP("sessionStorage");var Ja=new _r("@firebase/database"),F3=function(){let t=1;return function(){return t++}}(),QP=function(t){let e=iD(t),n=new tD;n.update(e);let r=n.digest();return Gb.encodeByteArray(r)},Ml=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ml.apply(null,r):typeof r=="object"?e+=bt(r):e+=r,e+=" "}return e},ho=null,_P=!0,L3=function(t,e){L(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ja.logLevel=Bt.VERBOSE,ho=Ja.log.bind(Ja),e&&VE.set("logging_enabled",!0)):typeof t=="function"?ho=t:(ho=null,VE.remove("logging_enabled"))},Gt=function(...t){if(_P===!0&&(_P=!1,ho===null&&VE.get("logging_enabled")===!0&&L3(!0)),ho){let e=Ml.apply(null,t);ho(e)}},xl=function(t){return function(...e){Gt(t,...e)}},UE=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ml(...t);Ja.error(e)},pi=function(...t){let e=`FIREBASE FATAL ERROR: ${Ml(...t)}`;throw Ja.error(e),new Error(e)},Rn=function(...t){let e="FIREBASE WARNING: "+Ml(...t);Ja.warn(e)},V3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Rn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},YP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},U3=function(t){if(pr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},ec="[MIN_NAME]",fo="[MAX_NAME]",ac=function(t,e){if(t===e)return 0;if(t===ec||e===fo)return-1;if(e===ec||t===fo)return 1;{let n=yP(t),r=yP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},j3=function(t,e){return t===e?0:t<e?-1:1},vl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+bt(e))},SC=function(t){if(typeof t!="object"||t===null)return bt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=bt(e[r]),n+=":",n+=SC(t[e[r]]);return n+="}",n},ZP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Qn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var JP=function(t){L(!YP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},B3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},$3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var H3=new RegExp("^-?(0*)\\d{1,10}$"),q3=-2147483648,G3=2147483647,yP=function(t){if(H3.test(t)){let e=Number(t);if(e>=q3&&e<=G3)return e}return null},Pl=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Rn("Exception was thrown by user callback.",n),e},Math.floor(0))}},z3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Tl=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var jE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Rn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var BE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Gt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Rn(e)}},bl=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Yp="5",XP="v",ek="s",tk="r",nk="f",rk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ik="ls",sk="p",$E="ac",ok="websocket",ak="long_polling";var Zp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=lo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&lo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function W3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function ck(t,e,n){L(typeof e=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");let r;if(e===ok)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ak)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);W3(t)&&(n.ns=t.namespace);let i=[];return Qn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var HE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){mr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return Kb(this.counters_)}};var RE={},NE={};function AC(t){let e=t.toString();return RE[e]||(RE[e]=new HE),RE[e]}function K3(t,e){let n=t.toString();return NE[n]||(NE[n]=e()),NE[n]}var qE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Pl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var vP="start",Q3="close",Y3="pLPCommand",Z3="pRTLPCB",uk="id",lk="pw",dk="ser",J3="cb",X3="seg",e9="ts",t9="d",n9="dframe",hk=1870,fk=30,r9=hk-fk,i9=25e3,s9=3e4,GE=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=xl(e),this.stats_=AC(n),this.urlFn=c=>(this.appCheckToken&&(c[$E]=this.appCheckToken),ck(n,ak,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new qE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(s9)),U3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===vP)this.id=a,this.password=c;else if(o===Q3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[vP]="t",r[dk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[J3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[XP]=Yp,this.transportSessionId&&(r[ek]=this.transportSessionId),this.lastSessionId&&(r[ik]=this.lastSessionId),this.applicationId&&(r[sk]=this.applicationId),this.appCheckToken&&(r[$E]=this.appCheckToken),typeof location<"u"&&location.hostname&&rk.test(location.hostname)&&(r[tk]=nk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return pr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!B3()&&!$3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=bt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=zb(n),i=ZP(r,r9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(pr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[n9]="t",r[uk]=e,r[lk]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=bt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},zE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,pr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=F3(),window[Y3+this.uniqueCallbackIdentifier]=e,window[Z3+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Gt("frame writing exception"),a.stack&&Gt(a.stack),Gt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Gt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[uk]=this.myID,e[lk]=this.myPW,e[dk]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+fk+r.length<=hk;){let o=this.pendingSegs.shift();r=r+"&"+X3+i+"="+o.seg+"&"+e9+i+"="+o.ts+"&"+t9+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(i9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){pr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Gt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var o9=16384,a9=45e3,Jp=null;typeof MozWebSocket<"u"?Jp=MozWebSocket:typeof WebSocket<"u"&&(Jp=WebSocket);var Il=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=xl(this.connId),this.stats_=AC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[XP]=Yp,!pr()&&typeof location<"u"&&location.hostname&&rk.test(location.hostname)&&(a[tk]=nk),r&&(a[ek]=r),i&&(a[ik]=i),s&&(a[$E]=s),o&&(a[sk]=o),ck(n,ok,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,lo.set("previous_websocket_failure",!0);try{let i;if(pr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Yp}/${DC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Jp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Jp!==null&&!t.forceDisallow_}static previouslyFailed(){return lo.isInMemoryStorage||lo.get("previous_websocket_failure")===!0}markConnectionHealthy(){lo.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=pd(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(L(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=bt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=ZP(r,o9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(a9))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),c9=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[GE,Il]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Il&&Il.isAvailable(),i=r&&!Il.previouslyFailed();if(n.webSocketOnly&&(r||Rn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Il];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),u9=6e4,l9=5e3,d9=10*1024,h9=100*1024,ME="t",IP="d",f9="s",wP="r",p9="e",EP="o",CP="a",TP="n",bP="p",g9="h",WE=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=xl("c:"+this.id+":"),this.transportManager_=new c9(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Tl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>h9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>d9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ME in e){let n=e[ME];n===CP?this.upgradeIfSecondaryHealthy_():n===wP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===EP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=vl("t",e),r=vl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:bP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:CP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:TP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=vl("t",e),r=vl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=vl(ME,e);if(IP in e){let r=e[IP];if(n===g9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===TP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===f9?this.onConnectionShutdown_(r):n===wP?this.onReset_(r):n===p9?UE("Server Error: "+r):n===EP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):UE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yp!==r&&Rn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Tl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(u9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Tl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(l9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:bP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(lo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Xp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var eg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var tg=class t extends eg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Fc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var DP=32,SP=768,Be=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function ke(){return new Be("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function rs(t){return t.pieces_.length-t.pieceNum_}function Ke(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Be(t.pieces_,e)}function pk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function m9(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function gk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function mk(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Be(e,0)}function Rt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Be)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Be(n,0)}function we(t){return t.pieceNum_>=t.pieces_.length}function Wn(t,e){let n=Ce(t),r=Ce(e);if(n===null)return e;if(n===r)return Wn(Ke(t),Ke(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _k(t,e){if(rs(t)!==rs(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function hr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(rs(t)>rs(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var KE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=gk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=$c(this.parts_[r]);yk(this)}};function _9(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=$c(e),yk(t)}function y9(t){let e=t.parts_.pop();t.byteLength_-=$c(e),t.parts_.length>0&&(t.byteLength_-=1)}function yk(t){if(t.byteLength_>SP)throw new Error(t.errorPrefix_+"has a key path longer than "+SP+" bytes ("+t.byteLength_+").");if(t.parts_.length>DP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+DP+") or object contains a cycle "+uo(t))}function uo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var QE=class t extends eg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}};var wl=1e3,v9=60*5*1e3,AP=30*1e3,I9=1.3,w9=3e4,E9="server_kill",RP=3,RC=(()=>{class t extends Xp{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=xl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=wl,this.maxReconnectDelay_=v9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!pr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");QE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&tg.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(bt(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new dm,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&mr(n,"w")){let i=ds(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Rn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||eD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=AP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=Xb(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+bt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):UE("Unrecognized action received from server: "+bt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=wl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>w9&&(this.reconnectDelay_=wl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*I9)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){L(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Gt("getToken() completed but was canceled"):(Gt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new WE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,I=>{Rn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(E9)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Rn(g),l())}}})}interrupt(n){Gt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Gt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Uc(this.interruptReasons_)&&(this.reconnectDelay_=wl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>SC(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Be(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Gt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=RP&&(this.reconnectDelay_=AP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Gt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=RP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";pr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+DC.replace(/\./g,"-")]=1,Fc()?n["framework.cordova"]=1:fd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=tg.getInstance().currentlyOnline();return Uc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Te=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var tc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Te(ec,e),i=new Te(ec,n);return this.compare(r,i)!==0}minPost(){return Te.MIN}};var Qp,ng=class extends tc{static get __EMPTY_NODE(){return Qp}static set __EMPTY_NODE(e){Qp=e}compare(e,n){return ac(e.name,n.name)}isDefinedOn(e){throw bo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Te.MIN}maxPost(){return new Te(fo,Qp)}makePost(e,n){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,Qp)}toString(){return".key"}},Xa=new ng;var Ya=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},dr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Kn.EMPTY_NODE,this.right=o??Kn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Kn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Kn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),YE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new dr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Kn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,dr.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,dr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ya(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ya(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ya(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ya(this.root_,null,this.comparator_,!0,e)}};Kn.EMPTY_NODE=new YE;function C9(t,e){return ac(t.name,e.name)}function NC(t,e){return ac(t,e)}var ZE;function T9(t){ZE=t}var vk=function(t){return typeof t=="number"?"number:"+JP(t):"string:"+t},Ik=function(t){if(t.isLeafNode()){let e=t.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&mr(e,".sv"),"Priority must be a string or number.")}else L(t===ZE||t.isEmpty(),"priority of unexpected type.");L(t===ZE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var NP,nc=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Ik(this.priorityNode_)}static set __childrenNodeConstructor(n){NP=n}static get __childrenNodeConstructor(){return NP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return we(n)?this:Ce(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Ce(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(L(i!==".priority"||rs(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ke(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+vk(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=JP(this.value_):n+=this.value_,this.lazyHash_=QP(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(L(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return L(s>=0,"Unknown leaf type: "+r),L(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),wk,Ek;function b9(t){wk=t}function D9(t){Ek=t}var JE=class extends tc{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?ac(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(fo,new nc("[PRIORITY-POST]",Ek))}makePost(e,n){let r=wk(e);return new Te(n,new nc("[PRIORITY-POST]",r))}toString(){return".priority"}},Wt=new JE;var S9=Math.log(2),XE=class{constructor(e){let n=s=>parseInt(Math.log(s)/S9,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},rg=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new dr(g,f.node,dr.BLACK,null,null);{let _=parseInt(d/2,10)+c,I=i(c,_),R=i(_+1,l);return f=t[_],g=n?n(f):f,new dr(g,f.node,dr.BLACK,I,R)}},s=function(c){let l=null,d=null,f=t.length,g=function(I,R){let S=f-I,P=f;f-=I;let U=i(S+1,P),H=t[S],K=n?n(H):H;_(new dr(K,H.node,R,null,U))},_=function(I){l?(l.left=I,l=I):(d=I,l=I)};for(let I=0;I<c.count;++I){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(I+1));R?g(S,dr.BLACK):(g(S,dr.BLACK),g(S,dr.RED))}return d},o=new XE(t.length),a=s(o);return new Kn(r||e,a)};var xE,Qa={},rc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return L(Qa&&Wt,"ChildrenNode.ts has not been loaded"),xE=xE||new t({".priority":Qa},{".priority":Wt}),xE}get(e){let n=ds(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Kn?n:null}hasIndex(e){return mr(this.indexSet_,e.toString())}addIndex(e,n){L(e!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Te.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=rg(r,e.getCompare()):a=Qa;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=jc(this.indexes_,(i,s)=>{let o=ds(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),i===Qa)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Te.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),rg(a,o.getCompare())}else return Qa;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Te(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=jc(this.indexes_,i=>{if(i===Qa)return i;{let s=n.get(e.name);return s?i.remove(new Te(e.name,s)):i}});return new t(r,this.indexSet_)}};var El,et=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Ik(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return El||(El=new t(new Kn(NC),null,rc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||El}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?El:r}}getChild(n){let r=Ce(n);return r===null?this:this.getImmediateChild(r).getChild(Ke(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(L(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Te(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?El:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Ce(n);if(i===null)return r;{L(Ce(n)!==".priority"||rs(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ke(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Wt,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+vk(this.getPriority().val())+":"),this.forEachChild(Wt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":QP(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Te(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Te(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Te(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===kl?-1:0}withIndex(n){if(n===Xa||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Xa||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Wt),s=r.getIterator(Wt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Xa?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),eC=class extends et{constructor(){super(new Kn(NC),et.EMPTY_NODE,rc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return et.EMPTY_NODE}isEmpty(){return!1}},kl=new eC;Object.defineProperties(Te,{MIN:{value:new Te(ec,et.EMPTY_NODE)},MAX:{value:new Te(fo,kl)}});ng.__EMPTY_NODE=et.EMPTY_NODE;nc.__childrenNodeConstructor=et;T9(kl);D9(kl);var A9=!0;function zt(t,e=null){if(t===null)return et.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new nc(n,zt(e))}if(!(t instanceof Array)&&A9){let n=[],r=!1;if(Qn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=zt(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Te(o,c)))}}),n.length===0)return et.EMPTY_NODE;let s=rg(n,C9,o=>o.name,NC);if(r){let o=rg(n,Wt.getCompare());return new et(s,zt(e),new rc({".priority":o},{".priority":Wt}))}else return new et(s,zt(e),rc.Default)}else{let n=et.EMPTY_NODE;return Qn(t,(r,i)=>{if(mr(t,r)&&r.substring(0,1)!=="."){let s=zt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(zt(e))}}b9(zt);var tC=class extends tc{constructor(e){super(),this.indexPath_=e,L(!we(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?ac(e.name,n.name):s}makePost(e,n){let r=zt(e),i=et.EMPTY_NODE.updateChild(this.indexPath_,r);return new Te(n,i)}maxPost(){let e=et.EMPTY_NODE.updateChild(this.indexPath_,kl);return new Te(fo,e)}toString(){return gk(this.indexPath_,0).join("/")}};var nC=class extends tc{compare(e,n){let r=e.node.compareTo(n.node);return r===0?ac(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,n){let r=zt(e);return new Te(n,r)}toString(){return".value"}},R9=new nC;function N9(t){return{type:"value",snapshotNode:t}}function M9(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function x9(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function MP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function P9(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var rC=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Wt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ec}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:fo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Wt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function xP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Wt?n="$priority":t.index_===R9?n="$value":t.index_===Xa?n="$key":(L(t.index_ instanceof tC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=bt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=bt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+bt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=bt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+bt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function PP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Wt&&(e.i=t.index_.toString()),e}var iC=class t extends Xp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=xl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=xP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),ds(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=xP(e._queryParams),r=e._path.toString(),i=new dm;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+hs(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=pd(a.responseText)}catch{Rn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Rn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var sC=class{constructor(){this.rootNode_=et.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ig(){return{value:null,children:new Map}}function Ck(t,e,n){if(we(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Ce(e);t.children.has(r)||t.children.set(r,ig());let i=t.children.get(r);e=Ke(e),Ck(i,e,n)}}function oC(t,e,n){t.value!==null?n(e,t.value):k9(t,(r,i)=>{let s=new Be(e.toString()+"/"+r);oC(i,s,n)})}function k9(t,e){t.children.forEach((n,r)=>{e(r,n)})}var aC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Qn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var kP=10*1e3,O9=30*1e3,F9=5*60*1e3,cC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new aC(e);let r=kP+(O9-kP)*Math.random();Tl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;Qn(e,(i,s)=>{s>0&&mr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Tl(this.reportStats_.bind(this),Math.floor(Math.random()*2*F9))}};var fi=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(fi||{});function Tk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Dk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var uC=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=fi.ACK_USER_WRITE,this.source=Tk()}operationForChild(e){if(we(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Be(e));return new t(ke(),n,this.revert)}}else return L(Ce(this.path)===e,"operationForChild called for unrelated child."),new t(Ke(this.path),this.affectedTree,this.revert)}};var ic=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=fi.OVERWRITE}operationForChild(e){return we(this.path)?new t(this.source,ke(),this.snap.getImmediateChild(e)):new t(this.source,Ke(this.path),this.snap)}};var sg=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=fi.MERGE}operationForChild(e){if(we(this.path)){let n=this.children.subtree(new Be(e));return n.isEmpty()?null:n.value?new ic(this.source,ke(),n.value):new t(this.source,ke(),n)}else return L(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ke(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Al=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(we(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function L9(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(P9(o.childName,o.snapshotNode))}),Cl(t,i,"child_removed",e,r,n),Cl(t,i,"child_added",e,r,n),Cl(t,i,"child_moved",s,r,n),Cl(t,i,"child_changed",e,r,n),Cl(t,i,"value",e,r,n),i}function Cl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>U9(t,a,c)),o.forEach(a=>{let c=V9(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function V9(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function U9(t,e,n){if(e.childName==null||n.childName==null)throw bo("Should only compare child_ events.");let r=new Te(e.childName,e.snapshotNode),i=new Te(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Sk(t,e){return{eventCache:t,serverCache:e}}function Dl(t,e,n,r){return Sk(new Al(e,n,r),t.serverCache)}function Ak(t,e,n,r){return Sk(t.eventCache,new Al(e,n,r))}function lC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function po(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var PE,j9=()=>(PE||(PE=new Kn(j3)),PE),_n=class t{constructor(e,n=j9()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Qn(e,(r,i)=>{n=n.set(new Be(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(we(e))return null;{let r=Ce(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ke(e),n);return s!=null?{path:Rt(new Be(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(we(e))return this;{let n=Ce(e),r=this.children.get(n);return r!==null?r.subtree(Ke(e)):new t(null)}}set(e,n){if(we(e))return new t(n,this.children);{let r=Ce(e),s=(this.children.get(r)||new t(null)).set(Ke(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(we(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ce(e),r=this.children.get(n);if(r){let i=r.remove(Ke(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(we(e))return this.value;{let n=Ce(e),r=this.children.get(n);return r?r.get(Ke(e)):null}}setTree(e,n){if(we(e))return n;{let r=Ce(e),s=(this.children.get(r)||new t(null)).setTree(Ke(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Rt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(we(e))return null;{let s=Ce(e),o=this.children.get(s);return o?o.findOnPath_(Ke(e),Rt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,r){if(we(e))return this;{this.value&&r(n,this.value);let i=Ce(e),s=this.children.get(i);return s?s.foreachOnPath_(Ke(e),Rt(n,i),r):new t(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Rt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var fr=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new _n(null))}};function Sl(t,e,n){if(we(e))return new fr(new _n(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Wn(i,e);return s=s.updateChild(o,n),new fr(t.writeTree_.set(i,s))}else{let i=new _n(n),s=t.writeTree_.setTree(e,i);return new fr(s)}}}function OP(t,e,n){let r=t;return Qn(n,(i,s)=>{r=Sl(r,Rt(e,i),s)}),r}function FP(t,e){if(we(e))return fr.empty();{let n=t.writeTree_.setTree(e,new _n(null));return new fr(n)}}function dC(t,e){return go(t,e)!=null}function go(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Wn(n.path,e)):null}function LP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Wt,(r,i)=>{e.push(new Te(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Te(r,i.value))}),e}function ns(t,e){if(we(e))return t;{let n=go(t,e);return n!=null?new fr(new _n(n)):new fr(t.writeTree_.subtree(e))}}function hC(t){return t.writeTree_.isEmpty()}function sc(t,e){return Rk(ke(),t.writeTree_,e)}function Rk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Rk(Rt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Rt(t,".priority"),r)),n}}function Nk(t,e){return Ok(e,t)}function B9(t,e,n,r,i){L(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Sl(t.visibleWrites,e,n)),t.lastWriteId=r}function $9(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function H9(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);L(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&q9(a,r.path)?i=!1:hr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return G9(t),!0;if(r.snap)t.visibleWrites=FP(t.visibleWrites,r.path);else{let a=r.children;Qn(a,c=>{t.visibleWrites=FP(t.visibleWrites,Rt(r.path,c))})}return!0}else return!1}function q9(t,e){if(t.snap)return hr(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&hr(Rt(t.path,n),e))return!0;return!1}function G9(t){t.visibleWrites=Mk(t.allWrites,z9,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function z9(t){return t.visible}function Mk(t,e,n){let r=fr.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)hr(n,o)?(a=Wn(n,o),r=Sl(r,a,s.snap)):hr(o,n)&&(a=Wn(o,n),r=Sl(r,ke(),s.snap.getChild(a)));else if(s.children){if(hr(n,o))a=Wn(n,o),r=OP(r,a,s.children);else if(hr(o,n))if(a=Wn(o,n),we(a))r=OP(r,ke(),s.children);else{let c=ds(s.children,Ce(a));if(c){let l=c.getChild(Ke(a));r=Sl(r,ke(),l)}}}else throw bo("WriteRecord should have .snap or .children")}}return r}function xk(t,e,n,r,i){if(!r&&!i){let s=go(t.visibleWrites,e);if(s!=null)return s;{let o=ns(t.visibleWrites,e);if(hC(o))return n;if(n==null&&!dC(o,ke()))return null;{let a=n||et.EMPTY_NODE;return sc(o,a)}}}else{let s=ns(t.visibleWrites,e);if(!i&&hC(s))return n;if(!i&&n==null&&!dC(s,ke()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(hr(l.path,e)||hr(e,l.path))},a=Mk(t.allWrites,o,e),c=n||et.EMPTY_NODE;return sc(a,c)}}}function W9(t,e,n){let r=et.EMPTY_NODE,i=go(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Wt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=ns(t.visibleWrites,e);return n.forEachChild(Wt,(o,a)=>{let c=sc(ns(s,new Be(o)),a);r=r.updateImmediateChild(o,c)}),LP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ns(t.visibleWrites,e);return LP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function K9(t,e,n,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Rt(e,n);if(dC(t.visibleWrites,s))return null;{let o=ns(t.visibleWrites,s);return hC(o)?i.getChild(n):sc(o,i.getChild(n))}}function Q9(t,e,n,r){let i=Rt(e,n),s=go(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=ns(t.visibleWrites,i);return sc(o,r.getNode().getImmediateChild(n))}else return null}function Y9(t,e){return go(t.visibleWrites,e)}function Z9(t,e,n,r,i,s,o){let a,c=ns(t.visibleWrites,e),l=go(c,ke());if(l!=null)a=l;else if(n!=null)a=sc(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)f(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function J9(){return{visibleWrites:fr.empty(),allWrites:[],lastWriteId:-1}}function fC(t,e,n,r){return xk(t.writeTree,t.treePath,e,n,r)}function Pk(t,e){return W9(t.writeTree,t.treePath,e)}function VP(t,e,n,r){return K9(t.writeTree,t.treePath,e,n,r)}function og(t,e){return Y9(t.writeTree,Rt(t.treePath,e))}function X9(t,e,n,r,i,s){return Z9(t.writeTree,t.treePath,e,n,r,i,s)}function MC(t,e,n){return Q9(t.writeTree,t.treePath,e,n)}function kk(t,e){return Ok(Rt(t.treePath,e),t.writeTree)}function Ok(t,e){return{treePath:t,writeTree:e}}var pC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,MP(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,x9(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,M9(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,MP(r,e.snapshotNode,i.oldSnap));else throw bo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var gC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Fk=new gC,Rl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Al(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return MC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:po(this.viewCache_),s=X9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function e6(t,e){L(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function t6(t,e,n,r,i){let s=new pC,o,a;if(n.type===fi.OVERWRITE){let l=n;l.source.fromUser?o=mC(t,e,l.path,l.snap,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!we(l.path),o=ag(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===fi.MERGE){let l=n;l.source.fromUser?o=r6(t,e,l.path,l.children,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=_C(t,e,l.path,l.children,r,i,a,s))}else if(n.type===fi.ACK_USER_WRITE){let l=n;l.revert?o=o6(t,e,l.path,r,i,s):o=i6(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===fi.LISTEN_COMPLETE)o=s6(t,e,n.path,r,s);else throw bo("Unknown operation type: "+n.type);let c=s.getChanges();return n6(e,o,c),{viewCache:o,changes:c}}function n6(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=lC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(N9(lC(e)))}}function Lk(t,e,n,r,i,s){let o=e.eventCache;if(og(r,n)!=null)return e;{let a,c;if(we(n))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=po(e),d=l instanceof et?l:et.EMPTY_NODE,f=Pk(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=fC(r,po(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Ce(n);if(l===".priority"){L(rs(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=VP(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=Ke(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=VP(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=MC(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Dl(e,a,o.isFullyInitialized()||we(n),t.filter.filtersNodes())}}function ag(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(we(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=Ce(n);if(!c.isCompleteForPath(n)&&rs(n)>1)return e;let I=Ke(n),S=c.getNode().getImmediateChild(_).updateChild(I,r);_===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),_,S,I,Fk,null)}let f=Ak(e,l,c.isFullyInitialized()||we(n),d.filtersNodes()),g=new Rl(i,f,s);return Lk(t,f,n,i,g,a)}function mC(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new Rl(i,e,s);if(we(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Dl(e,l,!0,t.filter.filtersNodes());else{let f=Ce(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Dl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=Ke(n),_=a.getNode().getImmediateChild(f),I;if(we(g))I=r;else{let R=d.getCompleteChild(f);R!=null?pk(g)===".priority"&&R.getChild(mk(g)).isEmpty()?I=R:I=R.updateChild(g,r):I=et.EMPTY_NODE}if(_.equals(I))c=e;else{let R=t.filter.updateChild(a.getNode(),f,I,g,d,o);c=Dl(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function UP(t,e){return t.eventCache.isCompleteForChild(e)}function r6(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=Rt(n,c);UP(e,Ce(d))&&(a=mC(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=Rt(n,c);UP(e,Ce(d))||(a=mC(t,a,d,l,i,s,o))}),a}function jP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function _C(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;we(n)?l=r:l=new _n(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let _=e.serverCache.getNode().getImmediateChild(f),I=jP(t,_,g);c=ag(t,c,new Be(f),I,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let _=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!_){let I=e.serverCache.getNode().getImmediateChild(f),R=jP(t,I,g);c=ag(t,c,new Be(f),R,i,s,o,a)}}),c}function i6(t,e,n,r,i,s,o){if(og(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(we(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return ag(t,e,n,c.getNode().getChild(n),i,s,a,o);if(we(n)){let l=new _n(null);return c.getNode().forEachChild(Xa,(d,f)=>{l=l.set(new Be(d),f)}),_C(t,e,n,l,i,s,a,o)}else return e}else{let l=new _n(null);return r.foreach((d,f)=>{let g=Rt(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),_C(t,e,n,l,i,s,a,o)}}function s6(t,e,n,r,i){let s=e.serverCache,o=Ak(e,s.getNode(),s.isFullyInitialized()||we(n),s.isFiltered());return Lk(t,o,n,r,Fk,i)}function o6(t,e,n,r,i,s){let o;if(og(r,n)!=null)return e;{let a=new Rl(r,e,i),c=e.eventCache.getNode(),l;if(we(n)||Ce(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=fC(r,po(e));else{let f=e.serverCache.getNode();L(f instanceof et,"serverChildren would be complete if leaf node"),d=Pk(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=Ce(n),f=MC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,Ke(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,et.EMPTY_NODE,Ke(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=fC(r,po(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||og(r,ke())!=null,Dl(e,l,o,t.filter.filtersNodes())}}function a6(t,e){let n=po(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!we(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function BP(t,e,n,r){e.type===fi.MERGE&&e.source.queryId!==null&&(L(po(t.viewCache_),"We should always have a full cache before handling merges"),L(lC(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=t6(t.processor_,i,e,n,r);return e6(t.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,c6(t,s.changes,s.viewCache.eventCache.getNode(),null)}function c6(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return L9(t.eventGenerator_,e,n,i)}var $P;function u6(t){L(!$P,"__referenceConstructor has already been defined"),$P=t}function xC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return L(s!=null,"SyncTree gave us an op for an invalid query."),BP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(BP(o,e,n,r));return s}}function PC(t,e){let n=null;for(let r of t.views.values())n=n||a6(r,e);return n}var HP;function l6(t){L(!HP,"__referenceConstructor has already been defined"),HP=t}var cg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new _n(null),this.pendingWriteTree_=J9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function d6(t,e,n,r,i){return B9(t.pendingWriteTree_,e,n,r,i),i?lg(t,new ic(Tk(),e,n)):[]}function Za(t,e,n=!1){let r=$9(t.pendingWriteTree_,e);if(H9(t.pendingWriteTree_,e)){let s=new _n(null);return r.snap!=null?s=s.set(ke(),!0):Qn(r.children,o=>{s=s.set(new Be(o),!0)}),lg(t,new uC(r.path,s,n))}else return[]}function ug(t,e,n){return lg(t,new ic(bk(),e,n))}function h6(t,e,n){let r=_n.fromObject(n);return lg(t,new sg(bk(),e,r))}function f6(t,e,n,r){let i=Bk(t,r);if(i!=null){let s=$k(i),o=s.path,a=s.queryId,c=Wn(o,e),l=new ic(Dk(a),c,n);return Hk(t,o,l)}else return[]}function p6(t,e,n,r){let i=Bk(t,r);if(i){let s=$k(i),o=s.path,a=s.queryId,c=Wn(o,e),l=_n.fromObject(n),d=new sg(Dk(a),c,l);return Hk(t,o,d)}else return[]}function Vk(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Wn(o,e),l=PC(a,c);if(l)return l});return xk(i,e,s,n,!0)}function lg(t,e){return Uk(e,t.syncPointTree_,null,Nk(t.pendingWriteTree_,ke()))}function Uk(t,e,n,r){if(we(t.path))return jk(t,e,n,r);{let i=e.get(ke());n==null&&i!=null&&(n=PC(i,ke()));let s=[],o=Ce(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=kk(r,o);s=s.concat(Uk(a,c,l,d))}return i&&(s=s.concat(xC(i,t,r,n))),s}}function jk(t,e,n,r){let i=e.get(ke());n==null&&i!=null&&(n=PC(i,ke()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=kk(r,o),d=t.operationForChild(o);d&&(s=s.concat(jk(d,a,c,l)))}),i&&(s=s.concat(xC(i,t,r,n))),s}function Bk(t,e){return t.tagToQueryMap.get(e)}function $k(t){let e=t.indexOf("$");return L(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Be(t.substr(0,e))}}function Hk(t,e,n){let r=t.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");let i=Nk(t.pendingWriteTree_,e);return xC(r,n,i,null)}var yC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},vC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Rt(this.path_,e);return new t(this.syncTree_,n)}node(){return Vk(this.syncTree_,this.path_)}},g6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},qP=function(t,e,n){if(!t||typeof t!="object")return t;if(L(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return m6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _6(t[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},m6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+t)}},_6=function(t,e,n){t.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);let i=e.node();if(L(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},y6=function(t,e,n,r){return kC(e,new vC(n,t),r)},v6=function(t,e,n){return kC(t,new yC(e),n)};function kC(t,e,n){let r=t.getPriority().val(),i=qP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=qP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new nc(a,zt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new nc(i))),o.forEachChild(Wt,(a,c)=>{let l=kC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Nl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function OC(t,e){let n=e instanceof Be?e:new Be(e),r=t,i=Ce(n);for(;i!==null;){let s=ds(r.node.children,i)||{children:{},childCount:0};r=new Nl(i,r,s),n=Ke(n),i=Ce(n)}return r}function cc(t){return t.node.value}function qk(t,e){t.node.value=e,IC(t)}function Gk(t){return t.node.childCount>0}function I6(t){return cc(t)===void 0&&!Gk(t)}function dg(t,e){Qn(t.node.children,(n,r)=>{e(new Nl(n,t,r))})}function zk(t,e,n,r){n&&!r&&e(t),dg(t,i=>{zk(i,e,!0,r)}),n&&r&&e(t)}function w6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ol(t){return new Be(t.parent===null?t.name:Ol(t.parent)+"/"+t.name)}function IC(t){t.parent!==null&&E6(t.parent,t.name,t)}function E6(t,e,n){let r=I6(n),i=mr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,IC(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,IC(t))}var C6=/[\[\].#$\/\u0000-\u001F\u007F]/,T6=/[\[\].#$\u0000-\u001F\u007F]/,kE=10*1024*1024,Wk=function(t){return typeof t=="string"&&t.length!==0&&!C6.test(t)},b6=function(t){return typeof t=="string"&&t.length!==0&&!T6.test(t)},D6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),b6(t)};var Kk=function(t,e,n){let r=n instanceof Be?new KE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+uo(r));if(typeof e=="function")throw new Error(t+"contains a function "+uo(r)+" with contents = "+e.toString());if(YP(e))throw new Error(t+"contains "+e.toString()+" "+uo(r));if(typeof e=="string"&&e.length>kE/3&&$c(e)>kE)throw new Error(t+"contains a string greater than "+kE+" utf8 bytes "+uo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Qn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Wk(o)))throw new Error(t+" contains an invalid key ("+o+") "+uo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_9(r,o),Kk(t,a,r),y9(r)}),i&&s)throw new Error(t+' contains ".value" child '+uo(r)+" in addition to actual children.")}};var S6=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Wk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!D6(n))throw new Error(rD(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var wC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function A6(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!_k(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function mo(t,e,n){A6(t,n),R6(t,r=>hr(r,e)||hr(e,r))}function R6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(N6(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function N6(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();ho&&Gt("event: "+n.toString()),Pl(r)}}}var M6="repo_interrupt",x6=25,EC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ig(),this.transactionQueueTree_=new Nl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function P6(t,e,n){if(t.stats_=AC(t.repoInfo_),t.forceRestClient_||z3())t.server_=new iC(t.repoInfo_,(r,i,s,o)=>{GP(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>zP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{bt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new RC(t.repoInfo_,e,(r,i,s,o)=>{GP(t,r,i,s,o)},r=>{zP(t,r)},r=>{O6(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=K3(t.repoInfo_,()=>new cC(t.stats_,t.server_)),t.infoData_=new sC,t.infoSyncTree_=new cg({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=ug(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),FC(t,"connected",!1),t.serverSyncTree_=new cg({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);mo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function k6(t){let n=t.infoData_.getNode(new Be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Qk(t){return g6({timestamp:k6(t)})}function GP(t,e,n,r,i){t.dataUpdateCount++;let s=new Be(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=jc(n,l=>zt(l));o=p6(t.serverSyncTree_,s,c,i)}else{let c=zt(n);o=f6(t.serverSyncTree_,s,c,i)}else if(r){let c=jc(n,l=>zt(l));o=h6(t.serverSyncTree_,s,c)}else{let c=zt(n);o=ug(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=VC(t,s)),mo(t.eventQueue_,a,o)}function zP(t,e){FC(t,"connected",e),e===!1&&L6(t)}function O6(t,e){Qn(e,(n,r)=>{FC(t,n,r)})}function FC(t,e,n){let r=new Be("/.info/"+e),i=zt(n);t.infoData_.updateSnapshot(r,i);let s=ug(t.infoSyncTree_,r,i);mo(t.eventQueue_,r,s)}function F6(t){return t.nextWriteId_++}function L6(t){Yk(t,"onDisconnectEvents");let e=Qk(t),n=ig();oC(t.onDisconnect_,ke(),(i,s)=>{let o=y6(i,s,t.serverSyncTree_,e);Ck(n,i,o)});let r=[];oC(n,ke(),(i,s)=>{r=r.concat(ug(t.serverSyncTree_,i,s));let o=B6(t,i);VC(t,o)}),t.onDisconnect_=ig(),mo(t.eventQueue_,ke(),r)}function V6(t){t.persistentConnection_&&t.persistentConnection_.interrupt(M6)}function Yk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Gt(n,...e)}function Zk(t,e,n){return Vk(t.serverSyncTree_,e,n)||et.EMPTY_NODE}function LC(t,e=t.transactionQueueTree_){if(e||hg(t,e),cc(e)){let n=Xk(t,e);L(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&U6(t,Ol(e),n)}else Gk(e)&&dg(e,n=>{LC(t,n)})}function U6(t,e,n){let r=n.map(l=>l.currentWriteId),i=Zk(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];L(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Wn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Yk(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(Za(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();hg(t,OC(t.transactionQueueTree_,e)),LC(t,t.transactionQueueTree_),mo(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Pl(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Rn("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}VC(t,e)}},o)}function VC(t,e){let n=Jk(t,e),r=Ol(n),i=Xk(t,n);return j6(t,i,r),r}function j6(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Wn(n,c.path),d=!1,f;if(L(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Za(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=x6)d=!0,f="maxretry",i=i.concat(Za(t.serverSyncTree_,c.currentWriteId,!0));else{let g=Zk(t,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){Kk("transaction failed: Data returned ",_,c.path);let I=zt(_);typeof _=="object"&&_!=null&&mr(_,".priority")||(I=I.updatePriority(g.getPriority()));let S=c.currentWriteId,P=Qk(t),U=v6(I,g,P);c.currentOutputSnapshotRaw=I,c.currentOutputSnapshotResolved=U,c.currentWriteId=F6(t),o.splice(o.indexOf(S),1),i=i.concat(d6(t.serverSyncTree_,c.path,U,c.currentWriteId,c.applyLocally)),i=i.concat(Za(t.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(Za(t.serverSyncTree_,c.currentWriteId,!0))}mo(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}hg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Pl(r[a]);LC(t,t.transactionQueueTree_)}function Jk(t,e){let n,r=t.transactionQueueTree_;for(n=Ce(e);n!==null&&cc(r)===void 0;)r=OC(r,n),e=Ke(e),n=Ce(e);return r}function Xk(t,e){let n=[];return eO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function eO(t,e,n){let r=cc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);dg(e,i=>{eO(t,i,n)})}function hg(t,e){let n=cc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,qk(e,n.length>0?n:void 0)}dg(e,r=>{hg(t,r)})}function B6(t,e){let n=Ol(Jk(t,e)),r=OC(t.transactionQueueTree_,e);return w6(r,i=>{OE(t,i)}),OE(t,r),zk(r,i=>{OE(t,i)}),n}function OE(t,e){let n=cc(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(L(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Za(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?qk(e,void 0):n.length=s+1,mo(t.eventQueue_,Ol(e),i);for(let o=0;o<r.length;o++)Pl(r[o])}}function $6(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function H6(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Rn(`Invalid query segment '${n}' in query '${t}'`)}return e}var WP=function(t,e){let n=q6(t),r=n.namespace;n.domain==="firebase.com"&&pi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&pi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||V3();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Zp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Be(n.pathString)}},q6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=$6(t.substring(d,f)));let g=H6(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{let I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),n=e.substring(I+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var CC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return we(this._path)?null:pk(this._path)}get ref(){return new oc(this._repo,this._path)}get _queryIdentifier(){let e=PP(this._queryParams),n=SC(e);return n==="{}"?"default":n}get _queryObject(){return PP(this._queryParams)}isEqual(e){if(e=ve(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=_k(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+m9(this._path)}};var oc=class t extends CC{constructor(e,n){super(e,n,new rC,!1)}get parent(){let e=mk(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};u6(oc);l6(oc);var G6="FIREBASE_DATABASE_EMULATOR_HOST",TC={},z6=!1;function W6(t,e,n,r){t.repoInfo_=new Zp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function K6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||pi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Gt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=WP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[G6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=WP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new bl(bl.OWNER):new BE(t.name,t.options,e);S6("Invalid Firebase Database URL",o),we(o.path)||pi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=Y6(a,t,d,new jE(t.name,n));return new bC(f,t)}function Q6(t,e){let n=TC[e];(!n||n[t.key]!==t)&&pi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),V6(t),delete n[t.key]}function Y6(t,e,n,r){let i=TC[e.name];i||(i={},TC[e.name]=i);let s=i[t.toURLString()];return s&&pi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new EC(t,z6,n,r),i[t.toURLString()]=s,s}var bC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(P6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new oc(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Q6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&pi("Cannot call "+e+" on a deleted database.")}};function tO(t=ft(),e){let n=ht(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Ci("database");r&&nO(n,...r)}return n}function nO(t,e,n,r={}){t=ve(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&pi("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&pi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new bl(bl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Do(r.mockUserToken,t.app.options.projectId);s=new bl(o)}W6(i,e,n,s)}function Z6(t){O3(an),ct(new at("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return K6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),q(gP,mP,t),q(gP,mP,"esm2017")}RC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};RC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};Z6();var Fl=class{constructor(e){return e}},rO="database",UC=class{constructor(){return dt(rO)}};var jC=new V("angularfire2.database-instances");function J6(t,e){let n=mt(rO,t,e);return n&&new Fl(n)}function X6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Fl(r)}}var e5={provide:UC,deps:[[new ie,jC]]},t5={provide:Fl,useFactory:J6,deps:[[new ie,jC],We]};function iO(t,...e){return q("angularfire",ze.full,"rtdb"),$e([t5,e5,{provide:jC,useFactory:X6(t),multi:!0,deps:[X,_e,it,Je,[new ie,ar],[new ie,gn],...e]}])}var sO=be(tO,!0);var cO="functions";var BC=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return y(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var $C="us-central1";var HC=class{constructor(e,n,r,i,s=$C,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new BC(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=$C}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function n5(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var oO="@firebase/functions",aO="0.11.8";var r5="auth-internal",i5="app-check-internal",s5="messaging-internal";function o5(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(r5),a=r.getProvider(s5),c=r.getProvider(i5);return new HC(s,o,a,c,i,t)};ct(new at(cO,n,"PUBLIC").setMultipleInstances(!0)),q(oO,aO,e),q(oO,aO,"esm2017")}function uO(t=ft(),e=$C){let r=ht(ve(t),cO).getImmediate({identifier:e}),i=Ci("functions");return i&&lO(r,...i),r}function lO(t,e,n){n5(ve(t),e,n)}o5(fetch.bind(self));var Ll=class{constructor(e){return e}},dO="functions",qC=class{constructor(){return dt(dO)}};var GC=new V("angularfire2.functions-instances");function a5(t,e){let n=mt(dO,t,e);return n&&new Ll(n)}function c5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ll(r)}}var u5={provide:qC,deps:[[new ie,GC]]},l5={provide:Ll,useFactory:a5,deps:[[new ie,GC],We]};function hO(t,...e){return q("angularfire",ze.full,"fn"),$e([l5,u5,{provide:GC,useFactory:c5(t),multi:!0,deps:[X,_e,it,Je,[new ie,ar],[new ie,gn],...e]}])}var fO=be(uO,!0);var d5="/firebase-messaging-sw.js",h5="/firebase-cloud-messaging-push-scope",vO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",f5="https://fcmregistrations.googleapis.com/v1",IO="google.c.a.c_id",p5="google.c.a.c_l",g5="google.c.a.ts",m5="google.c.a.e";var fg=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(fg||{});function gi(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _5(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var zC="fcm_token_details_db",y5=5,pO="fcm_token_object_Store";function v5(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(zC))return null;let e=null;return(yield hm(zC,y5,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(pO))return;let c=o.objectStore(pO),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:gi(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:gi(d.auth),p256dh:gi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:gi(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:gi(d.auth),p256dh:gi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:gi(d.vapidKey)}}}}})})).close(),yield gd(zC),yield gd("fcm_vapid_details_db"),yield gd("undefined"),I5(e)?e:null})}function I5(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var w5="firebase-messaging-database",E5=1,Vl="firebase-messaging-store",WC=null;function wO(){return WC||(WC=hm(w5,E5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vl)}}})),WC}function C5(t){return y(this,null,function*(){let e=EO(t),r=yield(yield wO()).transaction(Vl).objectStore(Vl).get(e);if(r)return r;{let i=yield v5(t.appConfig.senderId);if(i)return yield YC(t,i),i}})}function YC(t,e){return y(this,null,function*(){let n=EO(t),i=(yield wO()).transaction(Vl,"readwrite");return yield i.objectStore(Vl).put(e,n),yield i.done,e})}function EO({appConfig:t}){return t.appId}var T5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},sn=new gr("messaging","Messaging",T5);function b5(t,e){return y(this,null,function*(){let n=yield JC(t),r=CO(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(ZC(t.appConfig),i)).json()}catch(o){throw sn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw sn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw sn.create("token-subscribe-no-token");return s.token})}function D5(t,e){return y(this,null,function*(){let n=yield JC(t),r=CO(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${ZC(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw sn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw sn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw sn.create("token-update-no-token");return s.token})}function S5(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield JC(t)};try{let s=yield(yield fetch(`${ZC(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw sn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw sn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function ZC({projectId:t}){return`${f5}/projects/${t}/registrations`}function JC(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function CO({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==vO&&(i.web.applicationPubKey=r),i}var A5=7*24*60*60*1e3;function R5(t){return y(this,null,function*(){let e=yield M5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:gi(e.getKey("auth")),p256dh:gi(e.getKey("p256dh"))},r=yield C5(t.firebaseDependencies);if(r){if(x5(r.subscriptionOptions,n))return Date.now()>=r.createTime+A5?N5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield S5(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return gO(t.firebaseDependencies,n)}else return gO(t.firebaseDependencies,n)})}function N5(t,e){return y(this,null,function*(){try{let n=yield D5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield YC(t.firebaseDependencies,r),n}catch(n){throw n}})}function gO(t,e){return y(this,null,function*(){let r={token:yield b5(t,e),createTime:Date.now(),subscriptionOptions:e};return yield YC(t,r),r.token})}function M5(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_5(e)})})}function x5(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function mO(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return P5(e,t),k5(e,t),O5(e,t),e}function P5(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function k5(t,e){e.data&&(t.data=e.data)}function O5(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function F5(t){return typeof t=="object"&&!!t&&IO in t}L5("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function L5(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function V5(t){if(!t||!t.options)throw KC("App Configuration Object");if(!t.name)throw KC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw KC(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function KC(t){return sn.create("missing-app-config-values",{valueName:t})}var QC=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=V5(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function U5(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(d5,{scope:h5}),t.swRegistration.update().catch(()=>{})}catch(e){throw sn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function j5(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield U5(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw sn.create("invalid-sw-registration");t.swRegistration=e}})}function B5(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=vO)})}function $5(t,e){return y(this,null,function*(){if(!navigator)throw sn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw sn.create("permission-blocked");return yield B5(t,e?.vapidKey),yield j5(t,e?.serviceWorkerRegistration),R5(t)})}function H5(t,e,n){return y(this,null,function*(){let r=q5(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[IO],message_name:n[p5],message_time:n[g5],message_device_time:Math.floor(Date.now()/1e3)})})}function q5(t){switch(t){case fg.NOTIFICATION_CLICKED:return"notification_open";case fg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function G5(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===fg.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(mO(n)):t.onMessageHandler.next(mO(n)));let r=n.data;F5(r)&&r[m5]==="1"&&(yield H5(t,n.messageType,r))})}var _O="@firebase/messaging",yO="0.12.12";var z5=t=>{let e=new QC(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>G5(e,n)),e},W5=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>$5(e,r)}};function K5(){ct(new at("messaging",z5,"PUBLIC")),ct(new at("messaging-internal",W5,"PRIVATE")),q(_O,yO),q(_O,yO,"esm2017")}function XC(){return y(this,null,function*(){try{yield ls()}catch{return!1}return typeof window<"u"&&jr()&&Vc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function TO(t=ft()){return XC().then(e=>{if(!e)throw sn.create("unsupported-browser")},e=>{throw sn.create("indexed-db-unsupported")}),ht(ve(t),"messaging").getImmediate()}K5();var Ul=class{constructor(e){return e}},bO="messaging",eT=class{constructor(){return dt(bO)}};var DO="__angularfire_symbol__messagingIsSupported",tT="__angularfire_symbol__messagingIsSupportedValue";globalThis[DO]||=XC().then(t=>globalThis[tT]=t).catch(()=>globalThis[tT]=!1);var pg={async:()=>globalThis[DO],sync:()=>{let t=globalThis[tT];if(t===void 0)throw new Error(Ca("Messaging"));return t}},nT=new V("angularfire2.messaging-instances");function Q5(t,e){if(!pg.sync())return null;let n=mt(bO,t,e);return n&&new Ul(n)}function Y5(t){return(e,n)=>{if(!pg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Ul(r)}}var Z5={provide:eT,deps:[[new ie,nT]]},J5={provide:Ul,useFactory:Q5,deps:[[new ie,nT],We]};function SO(t,...e){return q("angularfire",ze.full,"fcm"),$e([J5,Z5,{provide:ji,useValue:pg.async,multi:!0},{provide:nT,useFactory:Y5(t),multi:!0,deps:[X,_e,it,Je,...e]}])}var Qae=pg.async;var AO=be(TO,!0);var jl=class{constructor(e){return e}},RO="performance",rT=class{constructor(){return dt(RO)}};var iT=new V("angularfire2.performance-instances");function X5(t,e,n){if(!Sy(n))return null;let r=mt(RO,t,e);return r&&new jl(r)}function e8(t){return(e,n,r)=>{if(!Sy(n))return null;let i=e.runOutsideAngular(()=>t(r));return new jl(i)}}var t8={provide:rT,deps:[[new ie,iT]]},n8={provide:jl,useFactory:X5,deps:[[new ie,iT],We,nr]};function NO(t,...e){return q("angularfire",ze.full,"perf"),$e([n8,t8,{provide:iT,useFactory:e8(t),multi:!0,deps:[X,nr,_e,it,Je,...e]}])}var MO=be(oD,!0);var LO="firebasestorage.googleapis.com",r8="storageBucket",i8=2*60*1e3,s8=10*60*1e3;var Or=class t extends on{constructor(e,n,r=0){super(sT(e),`Firebase Storage: ${n} (${sT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},_i=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(_i||{});function sT(t){return"storage/"+t}function o8(){let t="An unknown error occurred, please check the error payload for server response.";return new Or(_i.UNKNOWN,t)}function a8(){return new Or(_i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function c8(){return new Or(_i.CANCELED,"User canceled the upload/download.")}function u8(t){return new Or(_i.INVALID_URL,"Invalid URL '"+t+"'.")}function l8(t){return new Or(_i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function xO(t){return new Or(_i.INVALID_ARGUMENT,t)}function VO(){return new Or(_i.APP_DELETED,"The Firebase app was deleted.")}function d8(t){return new Or(_i.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var mi=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw l8(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(K){K.path_=decodeURIComponent(K.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),I={bucket:1,path:3},R=n===LO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",P=new RegExp(`^https?://${R}/${i}/${S}`,"i"),H=[{regex:a,indices:c,postModify:s},{regex:_,indices:I,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let K=0;K<H.length;K++){let Oe=H[K],J=Oe.regex.exec(e);if(J){let C=J[Oe.indices.bucket],v=J[Oe.indices.path];v||(v=""),r=new t(C,v),Oe.postModify(r);break}}if(r==null)throw u8(e);return r}},oT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function h8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,t(_,c())},S)}function g(){s&&clearTimeout(s)}function _(S,...P){if(l){g();return}if(S){g(),d.call(null,S,...P);return}if(c()||o){g(),d.call(null,S,...P);return}r<64&&(r*=2);let H;a===1?(a=2,H=0):H=(r+Math.random())*1e3,f(H)}let I=!1;function R(S){I||(I=!0,g(),!l&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function f8(t){t(!1)}function p8(t){return t!==void 0}function PO(t,e,n,r){if(r<e)throw xO(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw xO(`Invalid value for '${t}'. Expected ${n} or less.`)}function g8(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var aT=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(aT||{});function m8(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var cT=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,I)=>{this.resolve_=_,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new uc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===aT.NO_ERROR,c=s.getStatus();if(!a||m8(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===aT.ABORT;r(!1,new uc(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new uc(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());p8(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=o8();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?VO():c8();o(c)}else{let c=a8();o(c)}};this.canceled_?n(!1,new uc(!1,null,!0)):this.backoffId_=h8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&f8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},uc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function _8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function y8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function v8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function I8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function w8(t,e,n,r,i,s,o=!0){let a=g8(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return v8(l,e),_8(l,n),y8(l,s),I8(l,r),new cT(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function E8(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function C8(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var hce=256*1024;var uT=class t{constructor(e,n){this._service=e,n instanceof mi?this._location=n:this._location=mi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new mi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return C8(this._location.path)}get storage(){return this._service}get parent(){let e=E8(this._location.path);if(e===null)return null;let n=new mi(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw d8(e)}};function kO(t,e){let n=e?.[r8];return n==null?null:mi.makeFromBucketSpec(n,t)}function T8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Do(i,t.app.options.projectId))}var lT=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=LO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i8,this._maxUploadRetryTime=s8,this._requests=new Set,i!=null?this._bucket=mi.makeFromBucketSpec(i,this._host):this._bucket=kO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mi.makeFromBucketSpec(this._url,e):this._bucket=kO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){PO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){PO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uT(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new oT(VO());{let o=w8(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},OO="@firebase/storage",FO="0.13.2";var UO="storage";function jO(t=ft(),e){t=ve(t);let r=ht(t,UO).getImmediate({identifier:e}),i=Ci("storage");return i&&BO(r,...i),r}function BO(t,e,n,r={}){T8(t,e,n,r)}function b8(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new lT(n,r,i,e,an)}function D8(){ct(new at(UO,b8,"PUBLIC").setMultipleInstances(!0)),q(OO,FO,""),q(OO,FO,"esm2017")}D8();var Bl=class{constructor(e){return e}},$O="storage",dT=class{constructor(){return dt($O)}};var hT=new V("angularfire2.storage-instances");function S8(t,e){let n=mt($O,t,e);return n&&new Bl(n)}function A8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bl(r)}}var R8={provide:dT,deps:[[new ie,hT]]},N8={provide:Bl,useFactory:S8,deps:[[new ie,hT],We]};function HO(t,...e){return q("angularfire",ze.full,"gcs"),$e([N8,R8,{provide:hT,useFactory:A8(t),multi:!0,deps:[X,_e,it,Je,[new ie,ar],[new ie,gn],...e]}])}var qO=be(jO,!0);var fT="@firebase/remote-config",GO="0.4.9";var zO="remote-config";var M8={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},yn=new gr("remoteconfig","Remote Config",M8);function WO(t=ft()){return t=ve(t),ht(t,zO).getImmediate()}function KO(t){let e=ve(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var pT=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function x8(t=navigator){return t.languages&&t.languages[0]||t.language}var gT=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:x8()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((S,P)=>{e.signal.addEventListener(()=>{let U=new Error("The operation was aborted.");U.name="AbortError",P(U)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(S){let P="fetch-client-network";throw S?.name==="AbortError"&&(P="fetch-timeout"),yn.create(P,{originalErrorMessage:S?.message})}let g=f.status,_=f.headers.get("ETag")||void 0,I,R;if(f.status===200){let S;try{S=yield f.json()}catch(P){throw yn.create("fetch-client-parse",{originalErrorMessage:P?.message})}I=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(I={}),g!==304&&g!==200)throw yn.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:I}})}};function P8(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(yn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function k8(t){if(!(t instanceof on)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var mT=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return y(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield P8(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!k8(o))throw o;let a={throttleEndTimeMillis:Date.now()+Hc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var O8=60*1e3,F8=12*60*60*1e3,_T=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:O8,minimumFetchIntervalMillis:F8},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function gg(t,e){let n=t.target.error||void 0;return yn.create(e,{originalErrorMessage:n&&n?.message})}var _o="app_namespace_store",L8="firebase_remote_config",V8=1;function U8(){return new Promise((t,e)=>{try{let n=indexedDB.open(L8,V8);n.onerror=r=>{e(gg(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(_o,{keyPath:"compositeKey"})}}}catch(n){e(yn.create("storage-open",{originalErrorMessage:n?.message}))}})}var yT=class{constructor(e,n,r,i=U8()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([_o],"readonly").objectStore(_o),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(gg(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(yn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([_o],"readwrite").objectStore(_o),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(gg(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(yn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([_o],"readwrite").objectStore(_o),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(gg(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(yn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var vT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function j8(){ct(new at(zO,t,"PUBLIC").setMultipleInstances(!0)),q(fT,GO),q(fT,GO,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw yn.create("registration-window");if(!jr())throw yn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw yn.create("registration-project-id");if(!o)throw yn.create("registration-api-key");if(!a)throw yn.create("registration-app-id");n=n||"firebase";let c=new yT(a,r.name,n),l=new vT(c),d=new _r(fT);d.logLevel=Bt.ERROR;let f=new gT(i,an,n,s,o,a),g=new mT(f,c),_=new pT(g,c,l,d),I=new _T(r,_,l,c,d);return KO(I),I}}function QO(){return y(this,null,function*(){if(!jr())return!1;try{return yield ls()}catch{return!1}})}j8();var $l=class{constructor(e){return e}},YO="remote-config",IT=class{constructor(){return dt(YO)}};var wT="__angularfire_symbol__remoteConfigIsSupportedValue",ZO="__angularfire_symbol__remoteConfigIsSupported";globalThis[ZO]||=QO().then(t=>globalThis[wT]=t).catch(()=>globalThis[wT]=!1);var mg={async:()=>globalThis[ZO],sync:()=>{let t=globalThis[wT];if(t===void 0)throw new Error(Ca("RemoteConfig"));return t}},ET=new V("angularfire2.remote-config-instances");function B8(t,e){if(!mg.sync())return null;let n=mt(YO,t,e);return n&&new $l(n)}function $8(t){return(e,n)=>{if(!mg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new $l(r)}}var H8={provide:IT,deps:[[new ie,ET]]},q8={provide:$l,useFactory:B8,deps:[[new ie,ET],We]};function JO(t,...e){return q("angularfire",ze.full,"rc"),$e([q8,H8,{provide:ji,useValue:mg.async,multi:!0},{provide:ET,useFactory:$8(t),multi:!0,deps:[X,_e,it,Je,...e]}])}var uue=mg.async;var XO=be(WO,!0);var e1="@firebase/vertexai-preview",t1="0.0.4";var n1="vertexAI",r1="us-central1";var CT=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||r1}_delete(){return Promise.resolve()}};var TT=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(TT||{});var gue=[TT.RECITATION,TT.SAFETY];function i1(t=ft(),e){return t=ve(t),ht(t,n1).getImmediate({identifier:e?.location||r1})}function G8(){ct(new at(n1,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new CT(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),q(e1,t1),q(e1,t1,"esm2017")}G8();var Hl=class{constructor(e){return e}},s1="vertexai",bT=class{constructor(){return dt(s1)}};var DT=new V("angularfire2.vertexai-instances");function z8(t,e){let n=mt(s1,t,e);return n&&new Hl(n)}function W8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hl(r)}}var K8={provide:bT,deps:[[new ie,DT]]},Q8={provide:Hl,useFactory:z8,deps:[[new ie,DT],We]};function o1(t,...e){return q("angularfire",ze.full,"vertexai"),$e([Q8,K8,{provide:DT,useFactory:W8(t),multi:!0,deps:[X,_e,it,Je,[new ie,gn],...e]}])}var a1=be(i1,!0);var c1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var u1={providers:[LA({eventCoalescing:!0}),HR(qR),GR(()=>zR(c1.firebaseConfig)),VN(()=>jN()),aM(()=>sM()),oM,mI,lP(()=>hP()),iO(()=>sO()),hO(()=>fO()),SO(()=>AO()),NO(()=>MO()),HO(()=>qO()),JO(()=>XO()),o1(()=>a1())]};var Fr=class t{firestore=M(co);destroy$=new Ze;constructor(){}delete(e){return dP(Kp(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return y(this,null,function*(){let e=yield SE(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=Kp(this.collectionRef,e);return AE(r,n)}updateData(e,n){return AE(Kp(this.collectionRef,e),n,{merge:!0})}getDataById(e){return y(this,null,function*(){let n=fP(this.collectionRef,pP("id","==",e)),r=yield SE(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function Ot(t){t||(Fh(Ot),t=M(aa));let e=new oe(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Mn(e))}function ot(t,e){!e?.injector&&Fh(ot);let n=e?.injector??M(_e),r=new Yc(1),i=mu(()=>{let s;try{s=t()}catch(o){Hn(()=>r.error(o));return}Hn(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(aa).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var Yn=class t extends Fr{collectionPath="/race-configs";collectionRef=ts(this.firestore,this.collectionPath);activeRaceConfig=Ue(void 0);constructor(){super(),this.getAll().pipe(Ot()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}getAll(){return es(this.collectionRef).pipe(Mn(this.destroy$),z(e=>e.filter(n=>!n.deleted)))}updateFuelDurationMinute(e){let n=this.activeRaceConfig();return n?(n.fuelDurationMinute=e,this.updateData(n.id,n)):Promise.resolve()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var Y8=Math.pow(10,8)*24*60*60*1e3,gle=-Y8;var l1=864e5,_g=6e4,yg=36e5;var Z8=3600;var d1=Z8*24,mle=d1*7,J8=d1*365.2425,X8=J8/12,_le=X8*3,ST=Symbol.for("constructDateFrom");function Nn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&ST in t?t[ST](e):t instanceof Date?new t.constructor(e):new Date(e)}function qe(t,e){return Nn(e||t,t)}function h1(t,e,n){let r=qe(t,n?.in);return isNaN(e)?Nn(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function f1(t,e,n){let r=qe(t,n?.in);if(isNaN(e))return Nn(n?.in||t,NaN);if(!e)return r;let i=r.getDate(),s=Nn(n?.in||t,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function lc(t,e,n){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=qe(t,n?.in),f=i||r?f1(d,i+r*12):d,g=o||s?h1(f,o+s*7):f,_=c+a*60,R=(l+_*60)*1e3;return Nn(n?.in||t,+g+R)}function p1(t,e,n){return Nn(n?.in||t,+qe(t)+e)}function is(t,e,n){return p1(t,e*yg,n)}function AT(t){let e=qe(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Kt(t,...e){let n=Nn.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function RT(t,e){let n=qe(t,e?.in);return n.setHours(0,0,0,0),n}function g1(t,e,n){let[r,i]=Kt(n?.in,t,e),s=RT(r),o=RT(i),a=+s-AT(s),c=+o-AT(o);return Math.round((a-c)/l1)}function m1(t,e,n){let r=qe(t,n?.in);return r.setTime(r.getTime()+e*_g),r}function yo(t,e){let n=+qe(t)-+qe(e);return n<0?-1:n>0?1:n}function _1(t,e,n){let[r,i]=Kt(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function y1(t,e,n){let[r,i]=Kt(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function I1(t,e,n){let[r,i]=Kt(n?.in,t,e),s=v1(r,i),o=Math.abs(g1(r,i));r.setDate(r.getDate()-s*o);let a=+(v1(r,i)===-s),c=s*(o-a);return c===0?0:c}function v1(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function dc(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function w1(t,e,n){let[r,i]=Kt(n?.in,t,e),s=(+r-+i)/yg;return dc(n?.roundingMethod)(s)}function hc(t,e){return+qe(t)-+qe(e)}function vo(t,e,n){let r=hc(t,e)/_g;return dc(n?.roundingMethod)(r)}function E1(t,e){let n=qe(t,e?.in);return n.setHours(23,59,59,999),n}function C1(t,e){let n=qe(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function T1(t,e){let n=qe(t,e?.in);return+E1(n,e)==+C1(n,e)}function b1(t,e,n){let[r,i,s]=Kt(n?.in,t,t,e),o=yo(i,s),a=Math.abs(_1(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=yo(i,s)===-o;T1(r)&&a===1&&yo(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function D1(t,e,n){let r=hc(t,e)/1e3;return dc(n?.roundingMethod)(r)}function S1(t,e,n){let[r,i]=Kt(n?.in,t,e),s=yo(r,i),o=Math.abs(y1(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=yo(r,i)===-s,c=s*(o-+a);return c===0?0:c}function A1(t,e){let[n,r]=Kt(t,e.start,e.end);return{start:n,end:r}}function NT(t,e){let{start:n,end:r}=A1(e?.in,t),i={},s=S1(r,n);s&&(i.years=s);let o=lc(n,{years:i.years}),a=b1(r,o);a&&(i.months=a);let c=lc(o,{months:i.months}),l=I1(r,c);l&&(i.days=l);let d=lc(c,{days:i.days}),f=w1(r,d);f&&(i.hours=f);let g=lc(d,{hours:i.hours}),_=vo(r,g);_&&(i.minutes=_);let I=lc(g,{minutes:i.minutes}),R=D1(r,I);return R&&(i.seconds=R),i}var vn=class t extends Fr{collectionPath="/races";collectionRef=ts(this.firestore,this.collectionPath);raceConfigService=M(Yn);activeRace=Ue(void 0);endRaceDate=Ue(void 0);constructor(){super(),Dt({races:this.getAll(),raceConfig:ot(this.raceConfigService.activeRaceConfig)}).pipe(Ot(),z(({races:e,raceConfig:n})=>{if(e&&n){let r=this.getActiveRace(e,n),i=r?is(r.start.toDate(),n.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getAll(){return es(this.collectionRef).pipe(Mn(this.destroy$),z(e=>e.filter(n=>!n.deleted)))}getActiveRace(e,n){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(is(s.start.toDate(),n.durationHour)>=r)return s}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function R1(t,e){if(!t||!e)return"--:--:--";let n=NT({end:e,start:t});return N1(n)}function Io(t){if(!t)return"--:--:--";let e=NT({end:t,start:new Date});return N1(e)}function N1(t){return t.hours&&t.hours<0||t.minutes&&t.minutes<0||t.seconds&&t.seconds<0?"00:00:00":[MT(t.hours),MT(t.minutes),MT(t.seconds)].join(":")}function MT(t){return t?t<10?`0${t}`:`${t}`:"00"}function eK(t,e){if(t&1){let n=Qh();Q(0,"button",2),tn("click",function(){Ns(n);let i=Pt();return Ms(i.startRace())}),re(1," Start race "),Y()}}function tK(t,e){if(t&1&&(Q(0,"div",1),re(1),Y()),t&2){let n=Pt();Se(),St(" ",n.endRaceCountdown," ")}}var vg=class t{raceService=M(vn);endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";constructor(){Dt({endRaceDate:ot(this.endRaceDate),ping:Hr(1e3)}).pipe(Ot()).subscribe(e=>{this.endRaceCountdown=Io(e.endRaceDate)})}startRace(){this.raceService.create({id:"1",start:Tt.now(),deleted:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ln({type:t,selectors:[["app-race"]],standalone:!0,features:[$n],decls:2,vars:1,consts:[[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&Un(0,eK,2,0,"button",0)(1,tK,2,1,"div",1),n&2&&jn(r.endRaceDate()?1:0)}})};var ss=class t extends Fr{collectionPath="/pits";collectionRef=ts(this.firestore,this.collectionPath);raceService=M(vn);activePit=Ue(void 0);lastRefuelPit=Ue(void 0);pits=Ue([]);constructor(){super(),this.getRacePits().pipe(Ot()).subscribe(e=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.lastRefuelPit.set(this.getLastRefuelPit(e))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getRacePits(){return Dt({pits:es(this.collectionRef),activeRace:ot(this.raceService.activeRace)}).pipe(Mn(this.destroy$),z(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}getActivePit(e){let n=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of n)if(!r.exitTime)return r}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime!==void 0).sort((r,i)=>{let s=r.exitTime?r.exitTime.toDate().getTime():0;return(i.exitTime?i.exitTime.toDate().getTime():0)-s}).at(0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var wg=class t{raceService=M(vn);raceConfigService=M(Yn);pitService=M(ss);openingTime=Ue(void 0);closingTime=Ue(void 0);tyreChangeWindowOpen=Ue(!1);remainingTyreChange=Ue(0);constructor(){Dt({pits:ot(this.pitService.pits),activeRace:ot(this.raceService.activeRace),raceConfig:ot(this.raceConfigService.activeRaceConfig),ping:Hr(1e3)}).pipe(Ot()).subscribe(({pits:e,activeRace:n,raceConfig:r})=>{n&&r?(this.openingTime.set(is(n.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(is(n.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,n){if(e&&n){let r=new Date;return r>=e&&r<=n}return!1}calculateRemainingTyreChange(e,n){let r=e.filter(i=>i.tyreChange).length;return n-r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var nK=t=>({"mb-2":t}),rK=t=>({"animate-bounce":t});function iK(t,e){if(t&1&&(Q(0,"div",4),re(1),Y()),t&2){let n=Pt();Se(),St(" Remaining: ",n.remainingTyreChange()," ")}}function sK(t,e){t&1&&(Q(0,"div",5),re(1," Completed! "),Y())}function oK(t,e){if(t&1&&(Q(0,"div",6),re(1," Window open "),Y()),t&2){let n=Pt();fn("ngClass",ca(1,rK,n.remainingTyreChange()>0))}}function aK(t,e){t&1&&(Q(0,"div",7),re(1," Window close "),Y())}function cK(t,e){if(t&1&&(re(0),ua(1,"date")),t&2){let n=Pt(2);St(" ",la(1,1,n.openingTime(),"HH:mm:ss")," ")}}function uK(t,e){t&1&&re(0," --:--:-- ")}function lK(t,e){if(t&1&&(re(0),ua(1,"date")),t&2){let n=Pt(2);St(" ",la(1,1,n.closingTime(),"HH:mm:ss")," ")}}function dK(t,e){t&1&&re(0," --:--:-- ")}function hK(t,e){if(t&1&&(Q(0,"div",8)(1,"div")(2,"div",9),re(3,"Opening time"),Y(),Q(4,"div",10),Un(5,cK,2,4)(6,uK,1,0),Y()(),Q(7,"div")(8,"div",11),re(9,"Closing time"),Y(),Q(10,"div",12),Un(11,lK,2,4)(12,dK,1,0),Y()()(),Q(13,"div",13)(14,"div")(15,"div",9),re(16,"Opening in"),Y(),Q(17,"div",10),re(18),Y()(),Q(19,"div")(20,"div",11),re(21,"Closing in"),Y(),Q(22,"div",12),re(23),Y()()()),t&2){let n=Pt();Se(5),jn(n.openingTime()?5:6),Se(6),jn(n.closingTime()?11:12),Se(7),St(" ",n.countdownOpeningTime()," "),Se(5),St(" ",n.countdownClosingTime()," ")}}var Eg=class t{tyreService=M(wg);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=pn(()=>Io(this.tyreService.openingTime()));countdownClosingTime=pn(()=>Io(this.tyreService.closingTime()));isOpen=!0;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ln({type:t,selectors:[["app-tyre-change-window"]],standalone:!0,features:[$n],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(Q(0,"div",0)(1,"div",1),tn("click",function(){return r.isOpen=!r.isOpen}),Q(2,"div",2),re(3,"\u{1F6DE} Tyre change"),Y(),Q(4,"div",3),Un(5,iK,2,1,"div",4)(6,sK,2,0,"div",5)(7,oK,2,3,"div",6)(8,aK,2,0,"div",7),Y()(),Un(9,hK,24,4),Y()),n&2&&(Se(),fn("ngClass",ca(4,nK,r.isOpen)),Se(4),jn(r.remainingTyreChange()>0?5:6),Se(2),jn(r.tyreChangeWindowOpen()?7:8),Se(2),jn(r.isOpen?9:-1))},dependencies:[hf,da]})};var Cg=class t{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return this.charge<=10?"bg-red-500":this.charge<=25?"bg-orange-500":this.charge<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return this.charge<=10?"border-red-500":this.charge<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ln({type:t,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[Xr,$n],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(n,r){n&1&&(Q(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),re(4),Y()()(),ir(5,"div",4),Y()),n&2&&(Se(),fn("ngClass",r.batteryBorderColor),Se(),Wh("width",r.charge,"%"),fn("ngClass",r.batteryColor),Se(2),_y(r.charge),Se(),fn("ngClass",r.batteryBorderColor))},dependencies:[da],changeDetection:0})};var U1=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(Ps),Pe(Vi))}}static{this.\u0275dir=xt({type:t})}}return t})(),j1=(()=>{class t extends U1{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})()}static{this.\u0275dir=xt({type:t,features:[rr]})}}return t})(),kT=new V("");var fK={provide:kT,useExisting:Qr(()=>Mg),multi:!0};function pK(){let t=ni()?ni().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var gK=new V(""),Mg=(()=>{class t extends U1{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!pK())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(Ps),Pe(Vi),Pe(gK,8))}}static{this.\u0275dir=xt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&tn("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Os([fK]),rr]})}}return t})();function xT(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var xg=new V(""),B1=new V("");function mK(t){return e=>{if(xT(e.value)||xT(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function _K(t){return xT(t.value)?{required:!0}:null}function M1(t){return null}function $1(t){return t!=null}function H1(t){return Fs(t)?Qe(t):t}function q1(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function G1(t,e){return e.map(n=>n(t))}function yK(t){return!t.validate}function z1(t){return t.map(e=>yK(e)?e:n=>e.validate(n))}function vK(t){if(!t)return null;let e=t.filter($1);return e.length==0?null:function(n){return q1(G1(n,e))}}function OT(t){return t!=null?vK(z1(t)):null}function IK(t){if(!t)return null;let e=t.filter($1);return e.length==0?null:function(n){let r=G1(n,e).map(H1);return Nm(r).pipe(z(q1))}}function FT(t){return t!=null?IK(z1(t)):null}function x1(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function wK(t){return t._rawValidators}function EK(t){return t._rawAsyncValidators}function PT(t){return t?Array.isArray(t)?t:[t]:[]}function bg(t,e){return Array.isArray(t)?t.includes(e):t===e}function P1(t,e){let n=PT(e);return PT(t).forEach(i=>{bg(n,i)||n.push(i)}),n}function k1(t,e){return PT(e).filter(n=>!bg(t,n))}var Dg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=OT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=FT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},gc=class extends Dg{get formDirective(){return null}get path(){return null}},Ql=class extends Dg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Sg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},CK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},hfe=ge(F({},CK),{"[class.ng-submitted]":"isSubmitted"}),W1=(()=>{class t extends Sg{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(Ql,2))}}static{this.\u0275dir=xt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Kh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[rr]})}}return t})(),K1=(()=>{class t extends Sg{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(gc,10))}}static{this.\u0275dir=xt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Kh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[rr]})}}return t})();var ql="VALID",Tg="INVALID",fc="PENDING",Gl="DISABLED",mc=class{},Ag=class extends mc{constructor(e,n){super(),this.value=e,this.source=n}},Wl=class extends mc{constructor(e,n){super(),this.pristine=e,this.source=n}},Kl=class extends mc{constructor(e,n){super(),this.touched=e,this.source=n}},pc=class extends mc{constructor(e,n){super(),this.status=e,this.source=n}};function Q1(t){return(Pg(t)?t.validators:t)||null}function TK(t){return Array.isArray(t)?OT(t):t||null}function Y1(t,e){return(Pg(e)?e.asyncValidators:t)||null}function bK(t){return Array.isArray(t)?FT(t):t||null}function Pg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function DK(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function SK(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var Rg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=pn(()=>this.statusReactive()),this.statusReactive=Ue(void 0),this._pristine=pn(()=>this.pristineReactive()),this.pristineReactive=Ue(!0),this._touched=pn(()=>this.touchedReactive()),this.touchedReactive=Ue(!1),this._events=new Ze,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Hn(this.statusReactive)}set status(e){Hn(()=>this.statusReactive.set(e))}get valid(){return this.status===ql}get invalid(){return this.status===Tg}get pending(){return this.status==fc}get disabled(){return this.status===Gl}get enabled(){return this.status!==Gl}get pristine(){return Hn(this.pristineReactive)}set pristine(e){Hn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Hn(this.touchedReactive)}set touched(e){Hn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(P1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(P1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(k1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(k1(e,this._rawAsyncValidators))}hasValidator(e){return bg(this._rawValidators,e)}hasAsyncValidator(e){return bg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Kl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Kl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Wl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Wl(!0,r))}markAsPending(e={}){this.status=fc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Gl,this.errors=null,this._forEachChild(i=>{i.disable(ge(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ag(this.value,r)),this._events.next(new pc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ql,this._forEachChild(r=>{r.enable(ge(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ql||this.status===fc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ag(this.value,n)),this._events.next(new pc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gl:ql}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=fc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=H1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new pc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new pt,this.statusChanges=new pt}_calculateStatus(){return this._allControlsDisabled()?Gl:this.errors?Tg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fc)?fc:this._anyControlsHaveStatus(Tg)?Tg:ql}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Wl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Kl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Pg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=TK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=bK(this._rawAsyncValidators)}},Ng=class extends Rg{constructor(e,n,r){super(Q1(n),Y1(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){SK(this,!0,e),Object.keys(e).forEach(r=>{DK(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var LT=new V("CallSetDisabledState",{providedIn:"root",factory:()=>VT}),VT="always";function AK(t,e){return[...e.path,t]}function Z1(t,e,n=VT){J1(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),NK(t,e),xK(t,e),MK(t,e),RK(t,e)}function O1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function RK(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function J1(t,e){let n=wK(t);e.validator!==null?t.setValidators(x1(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=EK(t);e.asyncValidator!==null?t.setAsyncValidators(x1(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();O1(e._rawValidators,i),O1(e._rawAsyncValidators,i)}function NK(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&X1(t,e)})}function MK(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&X1(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function X1(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function xK(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function PK(t,e){t==null,J1(t,e)}function kK(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function OK(t){return Object.getPrototypeOf(t.constructor)===j1}function FK(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function LK(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Mg?n=s:OK(s)?r=s:i=s}),i||r||n||null}var VK={provide:gc,useExisting:Qr(()=>UT)},zl=Promise.resolve(),UT=(()=>{class t extends gc{get submitted(){return Hn(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=pn(()=>this.submittedReactive()),this.submittedReactive=Ue(!1),this._directives=new Set,this.ngSubmit=new pt,this.form=new Ng({},OT(n),FT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){zl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),Z1(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){zl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){zl.then(()=>{let r=this._findContainer(n.path),i=new Ng({});PK(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){zl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){zl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),FK(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(Pe(xg,10),Pe(B1,10),Pe(LT,8))}}static{this.\u0275dir=xt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&tn("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Os([VK]),rr]})}}return t})();function F1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function L1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var UK=class extends Rg{constructor(e=null,n,r){super(Q1(n),Y1(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Pg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(L1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){F1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){F1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){L1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jK={provide:Ql,useExisting:Qr(()=>jT)},V1=Promise.resolve(),jT=(()=>{class t extends Ql{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new UK,this._registered=!1,this.name="",this.update=new pt,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=LK(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),kK(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Z1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){V1.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&gu(r);V1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?AK(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(Pe(gc,9),Pe(xg,10),Pe(B1,10),Pe(kT,10),Pe(Bi,8),Pe(LT,8))}}static{this.\u0275dir=xt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Os([jK]),rr,Xr]})}}return t})(),eF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=xt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),BK={provide:kT,useExisting:Qr(()=>BT),multi:!0},BT=(()=>{class t extends j1{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})()}static{this.\u0275dir=xt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&tn("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Os([BK]),rr]})}}return t})();function $K(t){return typeof t=="number"?t:parseFloat(t)}var tF=(()=>{class t{constructor(){this._validator=M1}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):M1,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=xt({type:t,features:[Xr]})}}return t})();var HK={provide:xg,useExisting:Qr(()=>$T),multi:!0},$T=(()=>{class t extends tF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>$K(n),this.createValidator=n=>mK(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})()}static{this.\u0275dir=xt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&pu("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Os([HK]),rr]})}}return t})(),qK={provide:xg,useExisting:Qr(()=>HT),multi:!0};var HT=(()=>{class t extends tF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=gu,this.createValidator=n=>_K}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Li(t)))(i||t)}})()}static{this.\u0275dir=xt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&pu("required",i._enabled?"":null)},inputs:{required:"required"},features:[Os([qK]),rr]})}}return t})();var GK=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Rs({type:t})}static{this.\u0275inj=As({})}}return t})();var nF=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:LT,useValue:n.callSetDisabledState??VT}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Rs({type:t})}static{this.\u0275inj=As({imports:[GK]})}}return t})();var kg=class t extends Fr{collectionPath="/laps";collectionRef=ts(this.firestore,this.collectionPath);raceService=M(vn);activeRace=this.raceService.activeRace;referenceLapTimeMillisecond=Ue(64567);constructor(){super()}getRaceLaps(){return Dt({laps:es(this.collectionRef),activeRace:ot(this.activeRace)}).pipe(Ot(),z(({laps:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var Og=class t{raceService=M(vn);pitService=M(ss);raceConfigService=M(Yn);lapService=M(kg);lastRefuelTime=Ue(void 0);emptyFuelTime=Ue(void 0);remainingFuelPercentage=Ue(100);remainingFuelLap=Ue(100);constructor(){Dt({lastRefuelPit:ot(this.pitService.lastRefuelPit),activeRace:ot(this.raceService.activeRace),raceConfig:ot(this.raceConfigService.activeRaceConfig),referenceLapTimeMillisecond:ot(this.lapService.referenceLapTimeMillisecond),ping:Hr(1e3)}).pipe(Ot()).subscribe(({lastRefuelPit:e,activeRace:n,raceConfig:r,referenceLapTimeMillisecond:i,ping:s})=>{if(n&&r){let o=e&&e.exitTime?e.exitTime.toDate():n.start.toDate();this.lastRefuelTime.set(o),this.emptyFuelTime.set(m1(o,r.fuelDurationMinute)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r.fuelDurationMinute)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),i))}else this.lastRefuelTime.set(void 0),this.emptyFuelTime.set(void 0),this.remainingFuelPercentage.set(100),this.remainingFuelLap.set(0)})}calculateRemainingFuelPercentage(e,n){if(!e)return 100;let i=vo(e,new Date)/n*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}calculateRemainingFuelLaps(e,n){if(!e||!n)return 0;let r=hc(e,new Date);return Math.floor(r/n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var WK=t=>({"mb-2":t}),KK=t=>({"animate-bounce":t});function QK(t,e){if(t&1&&(re(0),ua(1,"date")),t&2){let n=Pt(2);St(" ",la(1,1,n.lastRefuelTime(),"HH:mm:ss")," ")}}function YK(t,e){t&1&&re(0," --:--:-- ")}function ZK(t,e){if(t&1&&(re(0),ua(1,"date")),t&2){let n=Pt(2);St(" ",la(1,1,n.emptyFuelTime(),"HH:mm:ss")," ")}}function JK(t,e){t&1&&re(0," --:--:-- ")}function XK(t,e){if(t&1){let n=Qh();Q(0,"div",7)(1,"div")(2,"div",8),re(3,"Last refuel time"),Y(),Q(4,"div",9),Un(5,QK,2,4)(6,YK,1,0),Y()(),Q(7,"div")(8,"div",10),re(9,"Empty time"),Y(),Q(10,"div",11),Un(11,ZK,2,4)(12,JK,1,0),Y()()(),Q(13,"div",7)(14,"div")(15,"div",8),re(16,"Since last refuel"),Y(),Q(17,"div",9),re(18),Y()(),Q(19,"div")(20,"div",10),re(21,"Empty in"),Y(),Q(22,"div",11),re(23),Y()()(),Q(24,"div",12)(25,"div")(26,"div",8),re(27,"Remaining laps"),Y(),Q(28,"div",9),re(29),Y()(),Q(30,"div")(31,"div",10),re(32,"Fuel Duration (min):"),Y(),Q(33,"div",13)(34,"button",14),tn("click",function(){Ns(n);let i=Pt();return Ms(i.increaseFuelDuration())}),re(35,"+"),Y(),Q(36,"form",15),tn("ngSubmit",function(){Ns(n);let i=Pt();return Ms(i.onSubmit())}),Q(37,"input",16),vy("ngModelChange",function(i){Ns(n);let s=Pt();return RA(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),Ms(i)}),Y()(),Q(38,"button",17),tn("click",function(){Ns(n);let i=Pt();return Ms(i.decreaseFuelDuration())}),re(39,"-"),Y()()()()}if(t&2){let n=Pt();Se(5),jn(n.lastRefuelTime()?5:6),Se(6),jn(n.emptyFuelTime()?11:12),Se(7),St(" ",n.sinceLastRefuel()," "),Se(5),St(" ",n.emptyFuelCountdown()," "),Se(6),St(" ",n.remainingFuelLap()," "),Se(8),yy("ngModel",n.fuelDurationMinute)}}var Fg=class t{raceConfigService=M(Yn);fuelService=M(Og);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=pn(()=>Io(this.emptyFuelTime()));sinceLastRefuel=pn(()=>R1(this.lastRefuelTime(),new Date));warning=pn(()=>this.remainingFuelPercentage()<=20);remainingColor=pn(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){mu(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ln({type:t,selectors:[["app-fuel"]],standalone:!0,features:[$n],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(n,r){n&1&&(Q(0,"div",0)(1,"div",1),tn("click",function(){return r.isOpen=!r.isOpen}),Q(2,"div",2),re(3,"\u26FD\uFE0F Fuel"),Y(),Q(4,"div",3)(5,"div",4),re(6),Y(),Q(7,"div",5),re(8),Y(),ir(9,"app-battery",6),Y()(),Un(10,XK,40,6),Y()),n&2&&(Se(),fn("ngClass",ca(8,WK,r.isOpen)),Se(3),fn("ngClass",ca(10,KK,r.warning())),Se(),fn("ngClass",r.remainingColor()),Se(),St(" Laps: ",r.remainingFuelLap()," "),Se(),fn("ngClass",r.remainingColor()),Se(),St(" Empty: ",r.emptyFuelCountdown()," "),Se(),fn("charge",r.remainingFuelPercentage()),Se(),jn(r.isOpen?10:-1))},dependencies:[da,hf,Cg,nF,eF,Mg,BT,W1,K1,HT,$T,jT,UT]})};var Lg=class t{raceService=M(vn);pitService=M(ss);raceConfigService=M(Yn);constructor(){Dt({pits:ot(this.pitService.pits),activeRace:ot(this.raceService.activeRace),activeRaceConfig:ot(this.raceConfigService.activeRaceConfig),ping:Hr(1e3)}).pipe(Ot()).subscribe(({pits:e,activeRace:n,activeRaceConfig:r})=>{n&&r&&this.nextStintsAvgTime(e,n,r,0)})}nextStintsAvgTime(e,n,r,i){let s=new Date,o=is(n.start.toDate(),r.durationHour);if(s>=o)return{avgStintTime:void 0,avgIfChangedNow:void 0};let a=vo(o,s),c=e.reduce((R,S)=>R+(S.entryDriverId!==S.exitDriverId?1:0),0),l=Math.max(0,r.minDriverChange-c);if(l===0)return console.info("Hai gi\xE0 fatto tutti i cambi pilota richiesti."),{avgStintTime:void 0,avgIfChangedNow:void 0};let d=this.getLastPitWithDriverChange(e),f=d?d.entryTime.toDate():n.start.toDate(),_=vo(o,f)/l,I=a/l;return{avgStintTime:_||void 0,avgIfChangedNow:I||void 0}}getLastPitWithDriverChange(e){if(e.length===0||e.length<2)return;let n=e.sort((r,i)=>i.entryTime.toMillis()-r.entryTime.toMillis());for(let r of n)if(r.entryDriverId!==r.exitDriverId)return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var Vg=class t{raceLogicService=M(Lg);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ln({type:t,selectors:[["app-root"]],standalone:!0,features:[$n],decls:19,vars:0,consts:[[1,"w-full","h-screen","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3"]],template:function(n,r){n&1&&(Q(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),re(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),Y()(),Q(5,"div",4),ir(6,"app-race"),Y()(),Q(7,"div",5),ir(8,"app-tyre-change-window")(9,"app-fuel"),Q(10,"div"),re(11,"Placeholder"),Y(),Q(12,"div"),re(13,"Placeholder"),Y(),Q(14,"div"),re(15,"Placeholder"),Y(),Q(16,"div"),re(17,"Placeholder"),Y()()(),ir(18,"router-outlet"))},dependencies:[pv,vg,Eg,Fg]})};oR(Vg,u1).catch(t=>console.error(t));
