import{$ as Vn,A as Jn,B as cr,C as Mh,D as Gt,E as pS,F as mS,G as Zr,H as ss,I as Jl,J as Xl,K as Zl,L as as,M as gS,N as vS,O as yS,P as _S,Q as eu,R as ba,S as Ue,T as Tt,U as tn,V as lr,W as my,X as Ph,Y as Ct,Z as $t,_ as Di,a as B,aa as wS,b as ge,ba as Ht,c as vo,ca as kh,d as y,da as se,e as G,ea as ES,f as Ea,g as xh,h as aS,i as cS,j as lS,k as uS,l as yo,m as py,n as Ia,o as Ta,p as hn,q as Kl,r as dS,s as Yl,t as Nh,u as hS,v as Jr,w as fS,x as Xr,y as Ca,z as Ql}from"./chunk-TSZ4SNPW.js";function wy(n,e){return Object.is(n,e)}var Wt=null,tu=!1,Ey=1,Un=Symbol("SIGNAL");function Ne(n){let e=Wt;return Wt=n,e}function IS(){return Wt}function $2(){return tu}var cs={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fh(n){if(tu)throw new Error("");if(Wt===null)return;Wt.consumerOnSignalRead(n);let e=Wt.nextProducerIndex++;if(Vh(Wt),e<Wt.producerNode.length&&Wt.producerNode[e]!==n&&nu(Wt)){let t=Wt.producerNode[e];Lh(t,Wt.producerIndexOfThis[e])}Wt.producerNode[e]!==n&&(Wt.producerNode[e]=n,Wt.producerIndexOfThis[e]=nu(Wt)?DS(n,Wt,e):0),Wt.producerLastReadVersion[e]=n.version}function H2(){Ey++}function Iy(n){if(!(nu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ey)){if(!n.producerMustRecompute(n)&&!iu(n)){yy(n);return}n.producerRecomputeValue(n),yy(n)}}function TS(n){if(n.liveConsumerNode===void 0)return;let e=tu;tu=!0;try{for(let t of n.liveConsumerNode)t.dirty||bS(t)}finally{tu=e}}function CS(){return Wt?.consumerAllowSignalWrites!==!1}function bS(n){n.dirty=!0,TS(n),n.consumerMarkedDirty?.(n)}function yy(n){n.dirty=!1,n.lastCleanEpoch=Ey}function Da(n){return n&&(n.nextProducerIndex=0),Ne(n)}function ru(n,e){if(Ne(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(nu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Lh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function iu(n){Vh(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Iy(t),r!==t.version))return!0}return!1}function Sa(n){if(Vh(n),nu(n))for(let e=0;e<n.producerNode.length;e++)Lh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function DS(n,e,t){if(SS(n),n.liveConsumerNode.length===0&&AS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=DS(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Lh(n,e){if(SS(n),n.liveConsumerNode.length===1&&AS(n))for(let r=0;r<n.producerNode.length;r++)Lh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Vh(i),i.producerIndexOfThis[r]=e}}function nu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Vh(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function SS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function AS(n){return n.producerNode!==void 0}function RS(n){let e=Object.create(W2);e.computation=n;let t=()=>{if(Iy(e),Fh(e),e.value===Oh)throw e.error;return e.value};return t[Un]=e,t}var gy=Symbol("UNSET"),vy=Symbol("COMPUTING"),Oh=Symbol("ERRORED"),W2=ge(B({},cs),{value:gy,dirty:!0,error:null,equal:wy,kind:"computed",producerMustRecompute(n){return n.value===gy||n.value===vy},producerRecomputeValue(n){if(n.value===vy)throw new Error("Detected cycle in computations.");let e=n.value;n.value=vy;let t=Da(n),r,i=!1;try{r=n.computation(),Ne(null),i=e!==gy&&e!==Oh&&r!==Oh&&n.equal(e,r)}catch(o){r=Oh,n.error=o}finally{ru(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function q2(){throw new Error}var xS=q2;function NS(){xS()}function MS(n){xS=n}var z2=null;function PS(n){let e=Object.create(Ty);e.value=n;let t=()=>(Fh(e),e.value);return t[Un]=e,t}function Uh(n,e){CS()||NS(),n.equal(n.value,e)||(n.value=e,G2(n))}function kS(n,e){CS()||NS(),Uh(n,e(n.value))}var Ty=ge(B({},cs),{equal:wy,value:void 0,kind:"signal"});function G2(n){n.version++,H2(),TS(n),z2?.()}function OS(n,e,t){let r=Object.create(K2);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(Sa(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=_y)}let a=()=>{if(r.fn===null)return;if($2())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!iu(r))return;r.hasRun=!0;let c=Da(r);try{r.cleanupFn(),r.cleanupFn=_y,r.fn(i)}finally{ru(r,c)}};return r.ref={notify:()=>bS(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[Un]:r},r.ref}var _y=()=>{},K2=ge(B({},cs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:_y});function we(n){return typeof n=="function"}function Aa(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jh=Aa(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function ls(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var bt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(we(r))try{r()}catch(o){e=o instanceof jh?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{FS(o)}catch(s){e=e??[],s instanceof jh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new jh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)FS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ls(t,e)}remove(e){let{_finalizers:t}=this;t&&ls(t,e),e instanceof n&&e._removeParent(this)}};bt.EMPTY=(()=>{let n=new bt;return n.closed=!0,n})();var Cy=bt.EMPTY;function Bh(n){return n instanceof bt||n&&"closed"in n&&we(n.remove)&&we(n.add)&&we(n.unsubscribe)}function FS(n){we(n)?n():n.unsubscribe()}var Ar={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ra={setTimeout(n,e,...t){let{delegate:r}=Ra;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ra;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $h(n){Ra.setTimeout(()=>{let{onUnhandledError:e}=Ar;if(e)e(n);else throw n})}function ou(){}var LS=by("C",void 0,void 0);function VS(n){return by("E",void 0,n)}function US(n){return by("N",n,void 0)}function by(n,e,t){return{kind:n,value:e,error:t}}var us=null;function xa(n){if(Ar.useDeprecatedSynchronousErrorHandling){let e=!us;if(e&&(us={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=us;if(us=null,t)throw r}}else n()}function jS(n){Ar.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=n)}var ds=class extends bt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bh(e)&&e.add(this)):this.destination=J2}static create(e,t,r){return new Na(e,t,r)}next(e){this.isStopped?Sy(US(e),this):this._next(e)}error(e){this.isStopped?Sy(VS(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Sy(LS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Y2=Function.prototype.bind;function Dy(n,e){return Y2.call(n,e)}var Ay=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hh(r)}else Hh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hh(t)}}},Na=class extends ds{constructor(e,t,r){super();let i;if(we(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Ar.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Dy(e.next,o),error:e.error&&Dy(e.error,o),complete:e.complete&&Dy(e.complete,o)}):i=e}this.destination=new Ay(i)}};function Hh(n){Ar.useDeprecatedSynchronousErrorHandling?jS(n):$h(n)}function Q2(n){throw n}function Sy(n,e){let{onStoppedNotification:t}=Ar;t&&Ra.setTimeout(()=>t(n,e))}var J2={closed:!0,next:ou,error:Q2,complete:ou};var Ma=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Rn(n){return n}function Wh(...n){return Ry(n)}function Ry(n){return n.length===0?Rn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var fe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Z2(t)?t:new Na(t,r,i);return xa(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=BS(r),new r((i,o)=>{let s=new Na({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ma](){return this}pipe(...t){return Ry(t)(this)}toPromise(t){return t=BS(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function BS(n){var e;return(e=n??Ar.Promise)!==null&&e!==void 0?e:Promise}function X2(n){return n&&we(n.next)&&we(n.error)&&we(n.complete)}function Z2(n){return n&&n instanceof ds||X2(n)&&Bh(n)}function xy(n){return we(n?.lift)}function Se(n){return e=>{if(xy(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(n,e,t,r,i){return new su(n,e,t,r,i)}var su=class extends ds{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Pa(){return Se((n,e)=>{let t=null;n._refCount++;let r=Te(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var ka=class extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,xy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bt;let t=this.getSubject();e.add(this.source.subscribe(Te(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bt.EMPTY)}return e}refCount(){return Pa()(this)}};var $S=Aa(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class n extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new qh(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new $S}next(t){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Cy:(this.currentObservers=null,o.push(t),new bt(()=>{this.currentObservers=null,ls(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new fe;return t.source=this,t}}return n.create=(e,t)=>new qh(e,t),n})(),qh=class extends ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Cy}};var nn=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var au={now(){return(au.delegate||Date).now()},delegate:void 0};var cu=class extends ut{constructor(e=1/0,t=1/0,r=au){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var zh=class extends bt{constructor(e,t){super()}schedule(e,t=0){return this}};var lu={setInterval(n,e,...t){let{delegate:r}=lu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=lu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Oa=class extends zh{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return lu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&lu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ls(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Fa=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Fa.now=au.now;var La=class extends Fa{constructor(e,t=Fa.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Va=new La(Oa),Ny=Va;var Gh=class extends Oa{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Kh=class extends La{};var My=new Kh(Gh);var Xn=new fe(n=>n.complete());function Yh(n){return n&&we(n.schedule)}function HS(n){return n[n.length-1]}function Qh(n){return we(HS(n))?n.pop():void 0}function _o(n){return Yh(HS(n))?n.pop():void 0}function Py(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function qS(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function WS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function hs(n){return this instanceof hs?(this.v=n,this):new hs(n)}function zS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(I){return Promise.resolve(I).then(v,f)}}function a(v,I){r[v]&&(i[v]=function(x){return new Promise(function(A,F){o.push([v,x,A,F])>1||c(v,x)})},I&&(i[v]=I(i[v])))}function c(v,I){try{u(r[v](I))}catch(x){m(o[0][3],x)}}function u(v){v.value instanceof hs?Promise.resolve(v.value.v).then(d,f):m(o[0][2],v)}function d(v){c("next",v)}function f(v){c("throw",v)}function m(v,I){v(I),o.shift(),o.length&&c(o[0][0],o[0][1])}}function GS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof WS=="function"?WS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Jh=n=>n&&typeof n.length=="number"&&typeof n!="function";function Xh(n){return we(n?.then)}function Zh(n){return we(n[Ma])}function ef(n){return Symbol.asyncIterator&&we(n?.[Symbol.asyncIterator])}function tf(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nf=eU();function rf(n){return we(n?.[nf])}function of(n){return zS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield hs(t.read());if(i)return yield hs(void 0);yield yield hs(r)}}finally{t.releaseLock()}})}function sf(n){return we(n?.getReader)}function Dt(n){if(n instanceof fe)return n;if(n!=null){if(Zh(n))return tU(n);if(Jh(n))return nU(n);if(Xh(n))return rU(n);if(ef(n))return KS(n);if(rf(n))return iU(n);if(sf(n))return oU(n)}throw tf(n)}function tU(n){return new fe(e=>{let t=n[Ma]();if(we(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function nU(n){return new fe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function rU(n){return new fe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$h)})}function iU(n){return new fe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function KS(n){return new fe(e=>{sU(n,e).catch(t=>e.error(t))})}function oU(n){return KS(of(n))}function sU(n,e){var t,r,i,o;return qS(this,void 0,void 0,function*(){try{for(t=GS(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function jn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function wo(n,e=0){return Se((t,r)=>{t.subscribe(Te(r,i=>jn(r,n,()=>r.next(i),e),()=>jn(r,n,()=>r.complete(),e),i=>jn(r,n,()=>r.error(i),e)))})}function Eo(n,e=0){return Se((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function YS(n,e){return Dt(n).pipe(Eo(e),wo(e))}function QS(n,e){return Dt(n).pipe(Eo(e),wo(e))}function JS(n,e){return new fe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function XS(n,e){return new fe(t=>{let r;return jn(t,e,()=>{r=n[nf](),jn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>we(r?.return)&&r.return()})}function af(n,e){if(!n)throw new Error("Iterable cannot be null");return new fe(t=>{jn(t,e,()=>{let r=n[Symbol.asyncIterator]();jn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function ZS(n,e){return af(of(n),e)}function eA(n,e){if(n!=null){if(Zh(n))return YS(n,e);if(Jh(n))return JS(n,e);if(Xh(n))return QS(n,e);if(ef(n))return af(n,e);if(rf(n))return XS(n,e);if(sf(n))return ZS(n,e)}throw tf(n)}function st(n,e){return e?eA(n,e):Dt(n)}function ce(...n){let e=_o(n);return st(n,e)}function Ua(n,e){let t=we(n)?n:()=>n,r=i=>i.error(t());return new fe(e?i=>e.schedule(r,0,i):r)}function ky(n){return!!n&&(n instanceof fe||we(n.lift)&&we(n.subscribe))}var Si=Aa(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function tA(n){return n instanceof Date&&!isNaN(n)}function ee(n,e){return Se((t,r)=>{let i=0;t.subscribe(Te(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:aU}=Array;function cU(n,e){return aU(e)?n(...e):n(e)}function cf(n){return ee(e=>cU(n,e))}var{isArray:lU}=Array,{getPrototypeOf:uU,prototype:dU,keys:hU}=Object;function lf(n){if(n.length===1){let e=n[0];if(lU(e))return{args:e,keys:null};if(fU(e)){let t=hU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function fU(n){return n&&typeof n=="object"&&uU(n)===dU}function uf(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Oe(...n){let e=_o(n),t=Qh(n),{args:r,keys:i}=lf(n);if(r.length===0)return st([],e);let o=new fe(pU(r,e,i?s=>uf(i,s):Rn));return t?o.pipe(cf(t)):o}function pU(n,e,t=Rn){return r=>{nA(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)nA(e,()=>{let u=st(n[c],e),d=!1;u.subscribe(Te(r,f=>{o[c]=f,d||(d=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function nA(n,e,t){n?jn(t,n,e):e()}function rA(n,e,t,r,i,o,s,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},v=x=>u<r?I(x):c.push(x),I=x=>{o&&e.next(x),u++;let A=!1;Dt(t(x,d++)).subscribe(Te(e,F=>{i?.(F),o?v(F):e.next(F)},()=>{A=!0},void 0,()=>{if(A)try{for(u--;c.length&&u<r;){let F=c.shift();s?jn(e,s,()=>I(F)):I(F)}m()}catch(F){e.error(F)}}))};return n.subscribe(Te(e,v,()=>{f=!0,m()})),()=>{a?.()}}function Nt(n,e,t=1/0){return we(e)?Nt((r,i)=>ee((o,s)=>e(r,o,i,s))(Dt(n(r,i))),t):(typeof e=="number"&&(t=e),Se((r,i)=>rA(r,i,n,t)))}function Oy(n=1/0){return Nt(Rn,n)}function iA(){return Oy(1)}function ja(...n){return iA()(st(n,_o(n)))}function df(n){return new fe(e=>{Dt(n()).subscribe(e)})}function Fy(...n){let e=Qh(n),{args:t,keys:r}=lf(n),i=new fe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let d=0;d<s;d++){let f=!1;Dt(t[d]).subscribe(Te(o,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||o.next(r?uf(r,a):a),o.complete())}))}});return e?i.pipe(cf(e)):i}function Ly(n=0,e,t=Ny){let r=-1;return e!=null&&(Yh(e)?t=e:r=e),new fe(i=>{let o=tA(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function dt(n=0,e=Va){return n<0&&(n=0),Ly(n,n,e)}function rn(n,e){return Se((t,r)=>{let i=0;t.subscribe(Te(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Io(n){return Se((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Te(t,void 0,void 0,s=>{o=Dt(n(s,Io(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function oA(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(Te(s,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function Ai(n,e){return we(e)?Nt(n,e,1):Nt(n,1)}function To(n){return Se((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ei(n){return n<=0?()=>Xn:Se((e,t)=>{let r=0;e.subscribe(Te(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function hf(n,e=Rn){return n=n??mU,Se((t,r)=>{let i,o=!0;t.subscribe(Te(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function mU(n,e){return n===e}function ff(n=gU){return Se((e,t)=>{let r=!1;e.subscribe(Te(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function gU(){return new Si}function fs(n){return Se((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ri(n,e){let t=arguments.length>=2;return r=>r.pipe(n?rn((i,o)=>n(i,o,r)):Rn,ei(1),t?To(e):ff(()=>new Si))}function Vy(n,e,t,r){return Se((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,c=I=>{a.forEach(I),I(o)},u=I=>c(x=>x.error(I)),d=0,f=!1,m=new su(o,I=>{try{let x=n(I),A=a.get(x);if(!A){a.set(x,A=r?r():new ut);let F=v(x,A);if(o.next(F),t){let q=Te(A,()=>{A.complete(),q?.unsubscribe()},void 0,void 0,()=>a.delete(x));m.add(Dt(t(F)).subscribe(q))}}A.next(s?s(I):I)}catch(x){u(x)}},()=>c(I=>I.complete()),u,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(m);function v(I,x){let A=new fe(F=>{d++;let q=x.subscribe(F);return()=>{q.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return A.key=I,A}})}function Ba(n){return n<=0?()=>Xn:Se((e,t)=>{let r=[];e.subscribe(Te(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Uy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?rn((i,o)=>n(i,o,r)):Rn,Ba(1),t?To(e):ff(()=>new Si))}function pf(){return Se((n,e)=>{let t,r=!1;n.subscribe(Te(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function mf(n,e){return Se(oA(n,e,arguments.length>=2,!0))}function $a(...n){let e=_o(n);return Se((t,r)=>{(e?ja(n,t,e):ja(n,t)).subscribe(r)})}function fn(n,e){return Se((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Te(r,c=>{i?.unsubscribe();let u=0,d=o++;Dt(n(c,d)).subscribe(i=Te(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Kt(n){return Se((e,t)=>{Dt(n).subscribe(Te(t,()=>t.complete(),ou)),!t.closed&&e.subscribe(t)})}function Yt(n,e,t){let r=we(n)||e||t?{next:n,error:e,complete:t}:n;return r?Se((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Rn}var vU="https://g.co/ng/security#xss",te=class extends Error{code;constructor(e,t){super(Jf(e,t)),this.code=e}};function Jf(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var WA=Symbol("InputSignalNode#UNSET"),yU=ge(B({},Ty),{transformFn:void 0,applyValueToInputSignal(n,e){Uh(n,e)}});function qA(n,e){let t=Object.create(yU);t.value=n,t.transformFn=e?.transform;function r(){if(Fh(t),t.value===WA)throw new te(-950,!1);return t.value}return r[Un]=t,r}function Du(n){return{toString:n}.toString()}var gf="__parameters__";function _U(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function zA(n,e,t){return Du(()=>{let r=_U(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,d){let f=c.hasOwnProperty(gf)?c[gf]:Object.defineProperty(c,gf,{value:[]})[gf];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var du=globalThis;function rt(n){for(let e in n)if(n[e]===rt)return e;throw Error("Could not find renamed property on target object.")}function wU(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function $n(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map($n).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function sA(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var EU=rt({__forward_ref__:rt});function hr(n){return n.__forward_ref__=hr,n.toString=function(){return $n(this())},n}function xn(n){return GA(n)?n():n}function GA(n){return typeof n=="function"&&n.hasOwnProperty(EU)&&n.__forward_ref__===hr}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ki(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xf(n){return aA(n,YA)||aA(n,QA)}function KA(n){return Xf(n)!==null}function aA(n,e){return n.hasOwnProperty(e)?n[e]:null}function IU(n){let e=n&&(n[YA]||n[QA]);return e||null}function cA(n){return n&&(n.hasOwnProperty(lA)||n.hasOwnProperty(TU))?n[lA]:null}var YA=rt({\u0275prov:rt}),lA=rt({\u0275inj:rt}),QA=rt({ngInjectableDef:rt}),TU=rt({ngInjectorDef:rt}),W=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function JA(n){return n&&!!n.\u0275providers}var CU=rt({\u0275cmp:rt}),bU=rt({\u0275dir:rt}),DU=rt({\u0275pipe:rt}),SU=rt({\u0275mod:rt}),bf=rt({\u0275fac:rt}),pu=rt({__NG_ELEMENT_ID__:rt}),uA=rt({__NG_ENV_ID__:rt});function Y_(n){return typeof n=="string"?n:n==null?"":String(n)}function AU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Y_(n)}function RU(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new te(-200,n)}function Q_(n,e){throw new te(-201,!1)}var Re=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Re||{}),Zy;function XA(){return Zy}function Bn(n){let e=Zy;return Zy=n,e}function ZA(n,e,t){let r=Xf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Re.Optional)return null;if(e!==void 0)return e;Q_(n,"Injector")}var xU={},mu=xU,e_="__NG_DI_FLAG__",Df="ngTempTokenPath",NU="ngTokenPath",MU=/\n/gm,PU="\u0275",dA="__source",za;function kU(){return za}function Co(n){let e=za;return za=n,e}function OU(n,e=Re.Default){if(za===void 0)throw new te(-203,!1);return za===null?ZA(n,void 0,e):za.get(n,e&Re.Optional?null:void 0,e)}function ie(n,e=Re.Default){return(XA()||OU)(xn(n),e)}function D(n,e=Re.Default){return ie(n,Zf(e))}function Zf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function t_(n){let e=[];for(let t=0;t<n.length;t++){let r=xn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new te(900,!1);let i,o=Re.Default;for(let s=0;s<r.length;s++){let a=r[s],c=FU(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ie(i,o))}else e.push(ie(r))}return e}function eR(n,e){return n[e_]=e,n.prototype[e_]=e,n}function FU(n){return n[e_]}function LU(n,e,t,r){let i=n[Df];throw e[dA]&&i.unshift(e[dA]),n.message=VU(`
`+n.message,i,t,r),n[NU]=i,n[Df]=null,n}function VU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==PU?n.slice(2):n;let i=$n(e);if(Array.isArray(e))i=e.map($n).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):$n(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(MU,`
  `)}`}var be=eR(zA("Optional"),8);var UU=eR(zA("SkipSelf"),4);function gs(n,e){let t=n.hasOwnProperty(bf);return t?n[bf]:null}function J_(n,e){n.forEach(t=>Array.isArray(t)?J_(t,e):e(t))}function tR(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Sf(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function BU(n,e,t){let r=Su(n,e);return r>=0?n[r|1]=t:(r=~r,jU(n,r,e,t)),r}function jy(n,e){let t=Su(n,e);if(t>=0)return n[t|1]}function Su(n,e){return $U(n,e,1)}function $U(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ka={},ur=[],Ya=new W(""),nR=new W("",-1),rR=new W(""),Af=class{get(e,t=mu){if(t===mu){let r=new Error(`NullInjectorError: No provider for ${$n(e)}!`);throw r.name="NullInjectorError",r}return t}};function iR(n,e){let t=n[SU]||null;if(!t&&e===!0)throw new Error(`Type ${$n(n)} does not have '\u0275mod' property.`);return t}function vs(n){return n[CU]||null}function oR(n){return n[bU]||null}function sR(n){return n[DU]||null}function aR(n){let e=vs(n)||oR(n)||sR(n);return e!==null&&e.standalone}function at(n){return{\u0275providers:n}}function HU(...n){return{\u0275providers:cR(!0,n),\u0275fromNgModule:!0}}function cR(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return J_(e,s=>{let a=s;n_(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&lR(i,o),t}function lR(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];X_(i,o=>{e(o,r)})}}function n_(n,e,t,r){if(n=xn(n),!n)return!1;let i=null,o=cA(n),s=!o&&vs(n);if(!o&&!s){let c=n.ngModule;if(o=cA(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)n_(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{J_(o.imports,d=>{n_(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&lR(u,e)}if(!a){let u=gs(i)||(()=>new i);e({provide:i,useFactory:u,deps:ur},i),e({provide:rR,useValue:i,multi:!0},i),e({provide:Ya,useValue:()=>ie(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;X_(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function X_(n,e){for(let t of n)JA(t)&&(t=t.\u0275providers),Array.isArray(t)?X_(t,e):e(t)}var WU=rt({provide:String,useValue:rt});function uR(n){return n!==null&&typeof n=="object"&&WU in n}function qU(n){return!!(n&&n.useExisting)}function zU(n){return!!(n&&n.useFactory)}function Qa(n){return typeof n=="function"}function GU(n){return!!n.useClass}var ep=new W(""),_f={},KU={},By;function Z_(){return By===void 0&&(By=new Af),By}var mn=class{},gu=class extends mn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,i_(e,s=>this.processProvider(s)),this.records.set(nR,Ha(void 0,this)),i.has("environment")&&this.records.set(mn,Ha(void 0,this));let o=this.records.get(ep);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(rR,ur,Re.Self))}destroy(){hu(this),this._destroyed=!0;let e=Ne(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ne(e)}}onDestroy(e){return hu(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){hu(this);let t=Co(this),r=Bn(void 0),i;try{return e()}finally{Co(t),Bn(r)}}get(e,t=mu,r=Re.Default){if(hu(this),e.hasOwnProperty(uA))return e[uA](this);r=Zf(r);let i,o=Co(this),s=Bn(void 0);try{if(!(r&Re.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=ZU(e)&&Xf(e);u&&this.injectableDefInScope(u)?c=Ha(r_(e),_f):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Re.Self?Z_():this.parent;return t=r&Re.Optional&&t===mu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Df]=a[Df]||[]).unshift($n(e)),o)throw a;return LU(a,e,"R3InjectorError",this.source)}else throw a}finally{Bn(s),Co(o)}}resolveInjectorInitializers(){let e=Ne(null),t=Co(this),r=Bn(void 0),i;try{let o=this.get(Ya,ur,Re.Self);for(let s of o)s()}finally{Co(t),Bn(r),Ne(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push($n(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=xn(e);let t=Qa(e)?e:xn(e&&e.provide),r=QU(e);if(!Qa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Ha(void 0,_f,!0),i.factory=()=>t_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ne(null);try{return t.value===_f&&(t.value=KU,t.value=t.factory()),typeof t.value=="object"&&t.value&&XU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ne(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=xn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function r_(n){let e=Xf(n),t=e!==null?e.factory:gs(n);if(t!==null)return t;if(n instanceof W)throw new te(204,!1);if(n instanceof Function)return YU(n);throw new te(204,!1)}function YU(n){if(n.length>0)throw new te(204,!1);let t=IU(n);return t!==null?()=>t.factory(n):()=>new n}function QU(n){if(uR(n))return Ha(void 0,n.useValue);{let e=dR(n);return Ha(e,_f)}}function dR(n,e,t){let r;if(Qa(n)){let i=xn(n);return gs(i)||r_(i)}else if(uR(n))r=()=>xn(n.useValue);else if(zU(n))r=()=>n.useFactory(...t_(n.deps||[]));else if(qU(n))r=()=>ie(xn(n.useExisting));else{let i=xn(n&&(n.useClass||n.provide));if(JU(n))r=()=>new i(...t_(n.deps));else return gs(i)||r_(i)}return r}function hu(n){if(n.destroyed)throw new te(205,!1)}function Ha(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function JU(n){return!!n.deps}function XU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function ZU(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function i_(n,e){for(let t of n)Array.isArray(t)?i_(t,e):t&&JA(t)?i_(t.\u0275providers,e):e(t)}function on(n,e){n instanceof gu&&hu(n);let t,r=Co(n),i=Bn(void 0);try{return e()}finally{Co(r),Bn(i)}}function hR(){return XA()!==void 0||kU()!=null}function ic(n){if(!hR())throw new te(-203,!1)}function ej(n){return typeof n=="function"}var Oi=0,Ae=1,pe=2,Pn=3,xr=4,Mr=5,vu=6,Rf=7,pn=8,Ja=9,So=10,kt=11,yu=12,hA=13,oc=14,Nr=15,Xa=16,Wa=17,Za=18,tp=19,fR=20,bo=21,wf=22,ys=23,Zn=24,Nn=25,pR=1;var _s=7,xf=8,Nf=9,Mn=10;function Do(n){return Array.isArray(n)&&typeof n[pR]=="object"}function Fi(n){return Array.isArray(n)&&n[pR]===!0}function ew(n){return(n.flags&4)!==0}function np(n){return n.componentOffset>-1}function rp(n){return(n.flags&1)===1}function Ao(n){return!!n.template}function o_(n){return(n[pe]&512)!==0}function Au(n){return(n[pe]&256)===256}var s_=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function mR(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var ko=(()=>{let n=()=>gR;return n.ngInherit=!0,n})();function gR(n){return n.type.prototype.ngOnChanges&&(n.setInput=nj),tj}function tj(){let n=yR(this),e=n?.current;if(e){let t=n.previous;if(t===Ka)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function nj(n,e,t,r,i){let o=this.declaredInputs[r],s=yR(n)||rj(n,{previous:Ka,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new s_(u&&u.currentValue,t,c===Ka),mR(n,e,i,t)}var vR="__ngSimpleChanges__";function yR(n){return n[vR]||null}function rj(n,e){return n[vR]=e}var fA=null;var dr=function(n,e,t){fA?.(n,e,t)},ij="svg",oj="math";function ni(n){for(;Array.isArray(n);)n=n[Oi];return n}function _R(n,e){return ni(e[n])}function fr(n,e){return ni(e[n.index])}function tw(n,e){return n.data[e]}function sj(n,e){return n[e]}function Oo(n,e){let t=e[n];return Do(t)?t:t[Oi]}function nw(n){return(n[pe]&128)===128}function aj(n){return Fi(n[Pn])}function Ro(n,e){return e==null?null:n[e]}function wR(n){n[Wa]=0}function rw(n){n[pe]&1024||(n[pe]|=1024,nw(n)&&Ru(n))}function cj(n,e){for(;n>0;)e=e[oc],n--;return e}function ip(n){return!!(n[pe]&9216||n[Zn]?.dirty)}function a_(n){n[So].changeDetectionScheduler?.notify(9),n[pe]&64&&(n[pe]|=1024),ip(n)&&Ru(n)}function Ru(n){n[So].changeDetectionScheduler?.notify(0);let e=ws(n);for(;e!==null&&!(e[pe]&8192||(e[pe]|=8192,!nw(e)));)e=ws(e)}function ER(n,e){if(Au(n))throw new te(911,!1);n[bo]===null&&(n[bo]=[]),n[bo].push(e)}function lj(n,e){if(n[bo]===null)return;let t=n[bo].indexOf(e);t!==-1&&n[bo].splice(t,1)}function ws(n){let e=n[Pn];return Fi(e)?e[Pn]:e}function uj(n){return n[Rf]??=[]}function dj(n){return n.cleanup??=[]}var Me={lFrame:RR(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var c_=!1;function hj(){return Me.lFrame.elementDepthCount}function fj(){Me.lFrame.elementDepthCount++}function pj(){Me.lFrame.elementDepthCount--}function IR(){return Me.bindingsEnabled}function mj(){return Me.skipHydrationRootTNode!==null}function gj(n){return Me.skipHydrationRootTNode===n}function vj(){Me.skipHydrationRootTNode=null}function Fe(){return Me.lFrame.lView}function sn(){return Me.lFrame.tView}function je(n){return Me.lFrame.contextLView=n,n[pn]}function Be(n){return Me.lFrame.contextLView=null,n}function gn(){let n=TR();for(;n!==null&&n.type===64;)n=n.parent;return n}function TR(){return Me.lFrame.currentTNode}function yj(){let n=Me.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ds(n,e){let t=Me.lFrame;t.currentTNode=n,t.isParent=e}function iw(){return Me.lFrame.isParent}function CR(){Me.lFrame.isParent=!1}function bR(){return c_}function Mf(n){let e=c_;return c_=n,e}function op(){let n=Me.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function _j(n){return Me.lFrame.bindingIndex=n}function sc(){return Me.lFrame.bindingIndex++}function wj(n){let e=Me.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Ej(){return Me.lFrame.inI18n}function Ij(n,e){let t=Me.lFrame;t.bindingIndex=t.bindingRootIndex=n,l_(e)}function Tj(){return Me.lFrame.currentDirectiveIndex}function l_(n){Me.lFrame.currentDirectiveIndex=n}function Cj(n){let e=Me.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function DR(n){Me.lFrame.currentQueryIndex=n}function bj(n){let e=n[Ae];return e.type===2?e.declTNode:e.type===1?n[Mr]:null}function SR(n,e,t){if(t&Re.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Re.Host);)if(i=bj(o),i===null||(o=o[oc],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Me.lFrame=AR();return r.currentTNode=e,r.lView=n,!0}function ow(n){let e=AR(),t=n[Ae];Me.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function AR(){let n=Me.lFrame,e=n===null?null:n.child;return e===null?RR(n):e}function RR(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function xR(){let n=Me.lFrame;return Me.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var NR=xR;function sw(){let n=xR();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Dj(n){return(Me.lFrame.contextLView=cj(n,Me.lFrame.contextLView))[pn]}function Ss(){return Me.lFrame.selectedIndex}function Es(n){Me.lFrame.selectedIndex=n}function aw(){let n=Me.lFrame;return tw(n.tView,n.selectedIndex)}function Sj(){return Me.lFrame.currentNamespace}var MR=!0;function sp(){return MR}function ap(n){MR=n}function Aj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=gR(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function cp(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Ef(n,e,t){PR(n,e,3,t)}function If(n,e,t,r){(n[pe]&3)===t&&PR(n,e,t,r)}function $y(n,e){let t=n[pe];(t&3)===e&&(t&=16383,t+=1,n[pe]=t)}function PR(n,e,t,r){let i=r!==void 0?n[Wa]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Wa]+=65536),(a<o||o==-1)&&(Rj(n,t,e,c),n[Wa]=(n[Wa]&4294901760)+c+2),c++}function pA(n,e){dr(4,n,e);let t=Ne(null);try{e.call(n)}finally{Ne(t),dr(5,n,e)}}function Rj(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[pe]>>14<n[Wa]>>16&&(n[pe]&3)===e&&(n[pe]+=16384,pA(a,o)):pA(a,o)}var Ga=-1,Is=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function xj(n){return n instanceof Is}function Nj(n){return(n.flags&8)!==0}function Mj(n){return(n.flags&16)!==0}function Pj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Oj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function kj(n){return n===3||n===4||n===6}function Oj(n){return n.charCodeAt(0)===64}function ec(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?mA(n,t,i,null,e[++r]):mA(n,t,i,null,null))}}return n}function mA(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var Hy={},u_=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Zf(r);let i=this.injector.get(e,Hy,r);return i!==Hy||t===Hy?i:this.parentInjector.get(e,t,r)}};function kR(n){return n!==Ga}function Pf(n){return n&32767}function Fj(n){return n>>16}function kf(n,e){let t=Fj(n),r=e;for(;t>0;)r=r[oc],t--;return r}var d_=!0;function Of(n){let e=d_;return d_=n,e}var Lj=256,OR=Lj-1,FR=5,Vj=0,ti={};function Uj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(pu)&&(r=t[pu]),r==null&&(r=t[pu]=Vj++);let i=r&OR,o=1<<i;e.data[n+(i>>FR)]|=o}function Ff(n,e){let t=LR(n,e);if(t!==-1)return t;let r=e[Ae];r.firstCreatePass&&(n.injectorIndex=e.length,Wy(r.data,n),Wy(e,null),Wy(r.blueprint,null));let i=cw(n,e),o=n.injectorIndex;if(kR(i)){let s=Pf(i),a=kf(i,e),c=a[Ae].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Wy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function LR(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function cw(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=$R(i),r===null)return Ga;if(t++,i=i[oc],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Ga}function h_(n,e,t){Uj(n,e,t)}function VR(n,e,t){if(t&Re.Optional||n!==void 0)return n;Q_(e,"NodeInjector")}function UR(n,e,t,r){if(t&Re.Optional&&r===void 0&&(r=null),!(t&(Re.Self|Re.Host))){let i=n[Ja],o=Bn(void 0);try{return i?i.get(e,r,t&Re.Optional):ZA(e,r,t&Re.Optional)}finally{Bn(o)}}return VR(r,e,t)}function jR(n,e,t,r=Re.Default,i){if(n!==null){if(e[pe]&2048&&!(r&Re.Self)){let s=Wj(n,e,t,r,ti);if(s!==ti)return s}let o=BR(n,e,t,r,ti);if(o!==ti)return o}return UR(e,t,r,i)}function BR(n,e,t,r,i){let o=$j(t);if(typeof o=="function"){if(!SR(e,n,r))return r&Re.Host?VR(i,t,r):UR(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Re.Optional))Q_(t);else return s}finally{NR()}}else if(typeof o=="number"){let s=null,a=LR(n,e),c=Ga,u=r&Re.Host?e[Nr][Mr]:null;for((a===-1||r&Re.SkipSelf)&&(c=a===-1?cw(n,e):e[a+8],c===Ga||!vA(r,!1)?a=-1:(s=e[Ae],a=Pf(c),e=kf(c,e)));a!==-1;){let d=e[Ae];if(gA(o,a,d.data)){let f=jj(a,e,t,s,r,u);if(f!==ti)return f}c=e[a+8],c!==Ga&&vA(r,e[Ae].data[a+8]===u)&&gA(o,a,e)?(s=d,a=Pf(c),e=kf(c,e)):a=-1}}return i}function jj(n,e,t,r,i,o){let s=e[Ae],a=s.data[n+8],c=r==null?np(a)&&d_:r!=s&&(a.type&3)!==0,u=i&Re.Host&&o===a,d=Bj(a,s,t,c,u);return d!==null?tc(e,s,d,a):ti}function Bj(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,d=o>>20,f=r?a:a+d,m=i?a+d:u;for(let v=f;v<m;v++){let I=s[v];if(v<c&&t===I||v>=c&&I.type===t)return v}if(i){let v=s[c];if(v&&Ao(v)&&v.type===t)return c}return null}function tc(n,e,t,r){let i=n[t],o=e.data;if(xj(i)){let s=i;s.resolving&&RU(AU(o[t]));let a=Of(s.canSeeViewProviders);s.resolving=!0;let c,u=s.injectImpl?Bn(s.injectImpl):null,d=SR(n,r,Re.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&Aj(t,o[t],e)}finally{u!==null&&Bn(u),Of(a),s.resolving=!1,NR()}}return i}function $j(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(pu)?n[pu]:void 0;return typeof e=="number"?e>=0?e&OR:Hj:e}function gA(n,e,t){let r=1<<n;return!!(t[e+(n>>FR)]&r)}function vA(n,e){return!(n&Re.Self)&&!(n&Re.Host&&e)}var ms=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return jR(this._tNode,this._lView,e,Zf(r),t)}};function Hj(){return new ms(gn(),Fe())}function Pr(n){return Du(()=>{let e=n.prototype.constructor,t=e[bf]||f_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[bf]||f_(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function f_(n){return GA(n)?()=>{let e=f_(xn(n));return e&&e()}:gs(n)}function Wj(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[pe]&2048&&!(s[pe]&512);){let a=BR(o,s,t,r|Re.Self,ti);if(a!==ti)return a;let c=o.parent;if(!c){let u=s[fR];if(u){let d=u.get(t,ti,r);if(d!==ti)return d}c=$R(s),s=s[oc]}o=c}return i}function $R(n){let e=n[Ae],t=e.type;return t===2?e.declTNode:t===1?n[Mr]:null}function yA(n,e=null,t=null,r){let i=HR(n,e,t,r);return i.resolveInjectorInitializers(),i}function HR(n,e=null,t=null,r,i=new Set){let o=[t||ur,HU(n)];return r=r||(typeof n=="object"?void 0:$n(n)),new gu(o,e||Z_(),r||null,i)}var xe=class n{static THROW_IF_NOT_FOUND=mu;static NULL=new Af;static create(e,t){if(Array.isArray(e))return yA({name:""},t,e,"");{let r=e.name??"";return yA({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:n,providedIn:"any",factory:()=>ie(nR)});static __NG_ELEMENT_ID__=-1};var qj=new W("");qj.__NG_ELEMENT_ID__=n=>{let e=gn();if(e===null)throw new te(204,!1);if(e.type&2)return e.value;if(n&Re.Optional)return null;throw new te(204,!1)};var WR=!1,Li=(()=>{class n{static __NG_ELEMENT_ID__=zj;static __NG_ENV_ID__=t=>t}return n})(),Lf=class extends Li{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return ER(this._lView,e),()=>lj(this._lView,e)}};function zj(){return new Lf(Fe())}var Ts=class{},lp=new W("",{providedIn:"root",factory:()=>!1});var qR=new W(""),zR=new W(""),oi=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new nn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),up=(()=>{class n{internalPendingTasks=D(oi);scheduler=D(Ts);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(t))}}run(t){return y(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),p_=class extends ut{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,hR()&&(this.destroyRef=D(Li,{optional:!0})??void 0,this.pendingTasks=D(oi,{optional:!0})??void 0)}emit(e){let t=Ne(null);try{super.next(e)}finally{Ne(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof bt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Qt=p_;function _u(...n){}function GR(n){let e,t;function r(){n=_u;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function _A(n){return queueMicrotask(()=>n()),()=>{n=_u}}var lw="isAngularZone",Vf=lw+"_ID",Gj=0,me=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Qt(!1);onMicrotaskEmpty=new Qt(!1);onStable=new Qt(!1);onError=new Qt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=WR}=e;if(typeof Zone>"u")throw new te(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,Qj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(lw)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new te(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new te(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Kj,_u,_u);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Kj={};function uw(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Yj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){GR(()=>{n.callbackScheduled=!1,m_(n),n.isCheckStableRunning=!0,uw(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),m_(n)}function Qj(n){let e=()=>{Yj(n)},t=Gj++;n._inner=n._inner.fork({name:"angular",properties:{[lw]:!0,[Vf]:t,[Vf+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Jj(c))return r.invokeTask(o,s,a,c);try{return wA(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),EA(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return wA(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Xj(c)&&e(),EA(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,m_(n),uw(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function m_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function wA(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EA(n){n._nesting--,uw(n)}var g_=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Qt;onMicrotaskEmpty=new Qt;onStable=new Qt;onError=new Qt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Jj(n){return KR(n,"__ignore_ng_zone__")}function Xj(n){return KR(n,"__scheduler_tick__")}function KR(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var xi=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Zj=new W("",{providedIn:"root",factory:()=>{let n=D(me),e=D(xi);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function IA(n,e){return qA(n,e)}function eB(n){return qA(WA,n)}var YR=(IA.required=eB,IA);function tB(){return dp(gn(),Fe())}function dp(n,e){return new pr(fr(n,e))}var pr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=tB}return n})();var TA=new Set;function si(n){TA.has(n)||(TA.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function nB(n){return typeof n=="function"&&n[Un]!==void 0}function X(n,e){si("NgSignals");let t=PS(n),r=t[Un];return e?.equal&&(r.equal=e.equal),t.set=i=>Uh(r,i),t.update=i=>kS(r,i),t.asReadonly=rB.bind(t),t}function rB(){let n=this[Un];if(n.readonlyFn===void 0){let e=()=>this();e[Un]=n,n.readonlyFn=e}return n.readonlyFn}function QR(n){return nB(n)&&typeof n.set=="function"}function JR(n){return(n.flags&128)===128}var XR=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(XR||{}),ZR=new Map,iB=0;function oB(){return iB++}function sB(n){ZR.set(n[tp],n)}function v_(n){ZR.delete(n[tp])}var CA="__ngContext__";function xo(n,e){Do(e)?(n[CA]=e[tp],sB(e)):n[CA]=e}function ex(n){return nx(n[yu])}function tx(n){return nx(n[xr])}function nx(n){for(;n!==null&&!Fi(n);)n=n[xr];return n}var y_;function rx(n){y_=n}function aB(){if(y_!==void 0)return y_;if(typeof document<"u")return document;throw new te(210,!1)}var dw=new W("",{providedIn:"root",factory:()=>cB}),cB="ng",hw=new W(""),St=new W("",{providedIn:"platform",factory:()=>"unknown"});var fw=new W("",{providedIn:"root",factory:()=>aB().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var lB="h",uB="b";var ix=!1,dB=new W("",{providedIn:"root",factory:()=>ix});var ox=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(ox||{}),hp=new W("");var hB=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})();var fB=()=>null;function pw(n,e,t=!1){return fB(n,e,t)}function sx(n,e){let t=n.contentQueries;if(t!==null){let r=Ne(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];DR(o),a.contentQueries(2,e[s],s)}}}finally{Ne(r)}}}function __(n,e,t){DR(0);let r=Ne(null);try{e(n,t)}finally{Ne(r)}}function mw(n,e,t){if(ew(e)){let r=Ne(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ne(r)}}}var ri=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ri||{});var w_=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${vU})`}};function gw(n){return n instanceof w_?n.changingThisBreaksApplicationSecurity:n}var pB=/^>|^->|<!--|-->|--!>|<!-$/g,mB=/(<|>)/g,gB="\u200B$1\u200B";function vB(n){return n.replace(pB,e=>e.replace(mB,gB))}function ax(n){return n instanceof Function?n():n}var No=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(No||{});function yB(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var cx="ng-template";function _B(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&yB(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(vw(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function vw(n){return n.type===4&&n.value!==cx}function wB(n,e,t){let r=n.type===4&&!t?cx:n.value;return e===r}function EB(n,e,t){let r=4,i=n.attrs,o=i!==null?CB(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Rr(r)&&!Rr(c))return!1;if(s&&Rr(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!wB(n,c,t)||c===""&&e.length===1){if(Rr(r))return!1;s=!0}}else if(r&8){if(i===null||!_B(n,i,c,t)){if(Rr(r))return!1;s=!0}}else{let u=e[++a],d=IB(c,i,vw(n),t);if(d===-1){if(Rr(r))return!1;s=!0;continue}if(u!==""){let f;if(d>o?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(Rr(r))return!1;s=!0}}}}return Rr(r)||s}function Rr(n){return(n&1)===0}function IB(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return bB(e,n)}function TB(n,e,t=!1){for(let r=0;r<e.length;r++)if(EB(n,e[r],t))return!0;return!1}function CB(n){for(let e=0;e<n.length;e++){let t=n[e];if(kj(t))return e}return n.length}function bB(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function bA(n,e){return n?":not("+e.trim()+")":e}function DB(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Rr(s)&&(e+=bA(o,i),i=""),r=s,o=o||!Rr(r);t++}return i!==""&&(e+=bA(o,i)),e}function SB(n){return n.map(DB).join(",")}function AB(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Rr(i))break;i=o}r++}return{attrs:e,classes:t}}var Fo={};function M(n=1){lx(sn(),Fe(),Ss()+n,!1)}function lx(n,e,t,r){if(!r)if((e[pe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Ef(e,o,t)}else{let o=n.preOrderHooks;o!==null&&If(e,o,0,t)}Es(t)}function Pe(n,e=Re.Default){let t=Fe();if(t===null)return ie(n,e);let r=gn();return jR(r,t,xn(n),e)}function ux(n,e,t,r,i,o){let s=Ne(null);try{let a=null;i&No.SignalBased&&(a=e[r][Un]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&No.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):mR(e,a,r,o)}finally{Ne(s)}}function RB(n,e){return n.createText(e)}function xB(n,e,t){n.setValue(e,t)}function NB(n,e){return n.createComment(vB(e))}function dx(n,e,t){return n.createElement(e,t)}function Uf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function hx(n,e,t){n.appendChild(e,t)}function DA(n,e,t,r,i){r!==null?Uf(n,e,t,r,i):hx(n,e,t)}function MB(n,e,t){n.removeChild(null,e,t)}function PB(n,e,t){n.setAttribute(e,"style",t)}function kB(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function fx(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Pj(n,e,r),i!==null&&kB(n,e,i),o!==null&&PB(n,e,o)}function fp(n,e,t,r,i,o,s,a,c,u,d){let f=e.blueprint.slice();return f[Oi]=i,f[pe]=r|4|128|8|64|1024,(u!==null||n&&n[pe]&2048)&&(f[pe]|=2048),wR(f),f[Pn]=f[oc]=n,f[pn]=t,f[So]=s||n&&n[So],f[kt]=a||n&&n[kt],f[Ja]=c||n&&n[Ja]||null,f[Mr]=o,f[tp]=oB(),f[vu]=d,f[fR]=u,f[Nr]=e.type==2?n[Nr]:f,f}function px(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function mx(n,e,t,r,i){let o=Ss(),s=r&2;try{Es(-1),s&&e.length>Nn&&lx(n,e,Nn,!1),dr(s?2:0,i),t(r,i)}finally{Es(o),dr(s?3:1,i)}}function yw(n,e,t){IR()&&(WB(n,e,t,fr(t,e)),(t.flags&64)===64&&_x(n,e,t))}function _w(n,e,t=fr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function gx(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ww(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ww(n,e,t,r,i,o,s,a,c,u,d){let f=Nn+r,m=f+i,v=OB(f,m),I=typeof u=="function"?u():u;return v[Ae]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function OB(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Fo);return t}function FB(n,e,t,r){let o=r.get(dB,ix)||t===ri.ShadowDom,s=n.selectRootElement(e,o);return LB(s),s}function LB(n){VB(n)}var VB=()=>null;function SA(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=No.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let u=o;if(i!==null){if(!i.hasOwnProperty(o))continue;u=i[o]}n===0?AA(r,t,u,a,c):AA(r,t,u,a)}return r}function AA(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function UB(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=o[d],m=t?t.get(f):null,v=m?m.inputs:null,I=m?m.outputs:null;c=SA(0,f.inputs,d,c,v),u=SA(1,f.outputs,d,u,I);let x=c!==null&&s!==null&&!vw(e)?t$(c,d,s):null;a.push(x)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function jB(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function vx(n,e,t,r,i,o,s,a){let c=fr(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(Iw(n,t,d,r,i),np(e)&&BB(t,e.index)):e.type&3?(r=jB(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function BB(n,e){let t=Oo(e,n);t[pe]&16||(t[pe]|=64)}function Ew(n,e,t,r){if(IR()){let i=r===null?null:{"":-1},o=zB(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&yx(n,e,t,s,i,a),i&&GB(t,r,i)}t.mergedAttrs=ec(t.mergedAttrs,t.attrs)}function yx(n,e,t,r,i,o){for(let u=0;u<r.length;u++)h_(Ff(t,e),n,r[u].type);YB(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=px(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=ec(t.mergedAttrs,d.hostAttrs),QB(n,t,e,c,d),KB(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!s&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}UB(n,t,o)}function $B(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;HB(s)!=a&&s.push(a),s.push(t,r,o)}}function HB(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WB(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;np(t)&&JB(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Ff(t,e),xo(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],u=tc(e,n,a,t);if(xo(u,e),s!==null&&e$(e,a-i,u,c,t,s),Ao(c)){let d=Oo(t.index,e);d[pn]=tc(e,n,a,t)}}}function _x(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Tj();try{Es(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];l_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&qB(c,u)}}finally{Es(-1),l_(s)}}function qB(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function zB(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(TB(e,s.selectors,!1))if(r||(r=[]),Ao(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;E_(n,e,c)}else r.unshift(s),E_(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function E_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function GB(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new te(-301,!1);r.push(e[i],o)}}}function KB(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ao(e)&&(t[""]=n)}}function YB(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function QB(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=gs(i.type,!0)),s=new Is(o,Ao(i),Pe);n.blueprint[r]=s,t[r]=s,$B(n,e,r,px(n,t,i.hostVars,Fo),i)}function wx(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function JB(n,e,t){let r=fr(e,n),i=gx(t),o=n[So].rendererFactory,s=pp(n,fp(n,i,null,wx(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function XB(n,e,t,r,i,o){let s=fr(n,e);ZB(e[kt],s,o,n.value,t,r,i)}function ZB(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Y_(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function e$(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],u=s[a++],d=s[a++],f=s[a++];ux(r,t,c,u,d,f)}}function t$(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function Ex(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function pp(n,e){return n[yu]?n[hA][xr]=e:n[yu]=e,n[hA]=e,e}function Ix(n,e){let t=n[Ja],r=t?t.get(xi,null):null;r&&r.handleError(e)}function Iw(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],u=e[s],d=n.data[s];ux(d,u,r,a,c,i)}}function n$(n,e){let t=Oo(e,n),r=t[Ae];r$(r,t);let i=t[Oi];i!==null&&t[vu]===null&&(t[vu]=pw(i,t[Ja])),Tw(r,t,t[pn])}function r$(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Tw(n,e,t){ow(e);try{let r=n.viewQuery;r!==null&&__(1,r,t);let i=n.template;i!==null&&mx(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Za]?.finishViewCreation(n),n.staticContentQueries&&sx(n,e),n.staticViewQueries&&__(2,n.viewQuery,t);let o=n.components;o!==null&&i$(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[pe]&=-5,sw()}}function i$(n,e){for(let t=0;t<e.length;t++)n$(n,e[t])}var Ni=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Ni||{}),o$;function Cw(n,e){return o$(n,e)}function qa(n,e,t,r,i){if(r!=null){let o,s=!1;Fi(r)?o=r:Do(r)&&(s=!0,r=r[Oi]);let a=ni(r);n===0&&t!==null?i==null?hx(e,t,a):Uf(e,t,a,i||null,!0):n===1&&t!==null?Uf(e,t,a,i||null,!0):n===2?MB(e,a,s):n===3&&e.destroyNode(a),o!=null&&y$(e,n,o,t,i)}}function s$(n,e){Tx(n,e),e[Oi]=null,e[Mr]=null}function a$(n,e,t,r,i,o){r[Oi]=i,r[Mr]=e,vp(n,r,t,1,i,o)}function Tx(n,e){e[So].changeDetectionScheduler?.notify(10),vp(n,e,e[kt],2,null,null)}function c$(n){let e=n[yu];if(!e)return qy(n[Ae],n);for(;e;){let t=null;if(Do(e))t=e[yu];else{let r=e[Mn];r&&(t=r)}if(!t){for(;e&&!e[xr]&&e!==n;)Do(e)&&qy(e[Ae],e),e=e[Pn];e===null&&(e=n),Do(e)&&qy(e[Ae],e),t=e&&e[xr]}e=t}}function l$(n,e,t,r){let i=Mn+r,o=t.length;r>0&&(t[i-1][xr]=e),r<o-Mn?(e[xr]=t[i],tR(t,Mn+r,e)):(t.push(e),e[xr]=null),e[Pn]=t;let s=e[Xa];s!==null&&t!==s&&Cx(s,e);let a=e[Za];a!==null&&a.insertView(n),a_(e),e[pe]|=128}function Cx(n,e){let t=n[Nf],r=e[Pn];if(Do(r))n[pe]|=2;else{let i=r[Pn][Nr];e[Nr]!==i&&(n[pe]|=2)}t===null?n[Nf]=[e]:t.push(e)}function bw(n,e){let t=n[Nf],r=t.indexOf(e);t.splice(r,1)}function wu(n,e){if(n.length<=Mn)return;let t=Mn+e,r=n[t];if(r){let i=r[Xa];i!==null&&i!==n&&bw(i,r),e>0&&(n[t-1][xr]=r[xr]);let o=Sf(n,Mn+e);s$(r[Ae],r);let s=o[Za];s!==null&&s.detachView(o[Ae]),r[Pn]=null,r[xr]=null,r[pe]&=-129}return r}function mp(n,e){if(Au(e))return;let t=e[kt];t.destroyNode&&vp(n,e,t,3,null,null),c$(e)}function qy(n,e){if(Au(e))return;let t=Ne(null);try{e[pe]&=-129,e[pe]|=256,e[Zn]&&Sa(e[Zn]),d$(n,e),u$(n,e),e[Ae].type===1&&e[kt].destroy();let r=e[Xa];if(r!==null&&Fi(e[Pn])){r!==e[Pn]&&bw(r,e);let i=e[Za];i!==null&&i.detachView(n)}v_(e)}finally{Ne(t)}}function u$(n,e){let t=n.cleanup,r=e[Rf];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Rf]=null);let i=e[bo];if(i!==null){e[bo]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[ys];if(o!==null){e[ys]=null;for(let s of o)s.destroy()}}function d$(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Is)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];dr(4,a,c);try{c.call(a)}finally{dr(5,a,c)}}else{dr(4,i,o);try{o.call(i)}finally{dr(5,i,o)}}}}}function h$(n,e,t){return f$(n,e.parent,t)}function f$(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Oi];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===ri.None||o===ri.Emulated)return null}return fr(r,t)}}function p$(n,e,t){return g$(n,e,t)}function m$(n,e,t){return n.type&40?fr(n,t):null}var g$=m$,RA;function gp(n,e,t,r){let i=h$(n,r,e),o=e[kt],s=r.parent||e[Mr],a=p$(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)DA(o,i,t[c],a,!1);else DA(o,i,t,a,!1);RA!==void 0&&RA(o,r,e,t,i)}function fu(n,e){if(e!==null){let t=e.type;if(t&3)return fr(e,n);if(t&4)return I_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return fu(n,r);{let i=n[e.index];return Fi(i)?I_(-1,i):ni(i)}}else{if(t&128)return fu(n,e.next);if(t&32)return Cw(e,n)()||ni(n[e.index]);{let r=bx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ws(n[Nr]);return fu(i,r)}else return fu(n,e.next)}}}return null}function bx(n,e){if(e!==null){let r=n[Nr][Mr],i=e.projection;return r.projection[i]}return null}function I_(n,e){let t=Mn+n+1;if(t<e.length){let r=e[t],i=r[Ae].firstChild;if(i!==null)return fu(r,i)}return e[_s]}function Dw(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&xo(ni(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Dw(n,e,t.child,r,i,o,!1),qa(e,n,i,a,o);else if(c&32){let u=Cw(t,r),d;for(;d=u();)qa(e,n,i,d,o);qa(e,n,i,a,o)}else c&16?v$(n,e,r,t,i,o):qa(e,n,i,a,o);t=s?t.projectionNext:t.next}}function vp(n,e,t,r,i,o){Dw(t,r,n.firstChild,e,i,o,!1)}function v$(n,e,t,r,i,o){let s=t[Nr],c=s[Mr].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];qa(e,n,i,d,o)}else{let u=c,d=s[Pn];JR(r)&&(u.flags|=128),Dw(n,e,u,d,i,o,!0)}}function y$(n,e,t,r,i){let o=t[_s],s=ni(t);o!==s&&qa(e,n,r,o,i);for(let a=Mn;a<t.length;a++){let c=t[a];vp(c[Ae],c,n,e,r,o)}}function _$(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Ni.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Ni.Important),n.setStyle(t,r,i,o))}}function yp(n,e,t,r){let i=Ne(null);try{let o=e.tView,a=n[pe]&4096?4096:16,c=fp(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[Xa]=u;let d=n[Za];return d!==null&&(c[Za]=d.createEmbeddedView(o)),Tw(o,c,t),c}finally{Ne(i)}}function Dx(n,e){let t=Mn+e;if(t<n.length)return n[t]}function Eu(n,e){return!e||e.firstChild===null||JR(n)}function _p(n,e,t,r=!0){let i=e[Ae];if(l$(i,e,n,t),r){let s=I_(t,n),a=e[kt],c=a.parentNode(n[_s]);c!==null&&a$(i,n[Mr],a,e,c,s)}let o=e[vu];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Sx(n,e){let t=wu(n,e);return t!==void 0&&mp(t[Ae],t),t}function jf(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(ni(o)),Fi(o)&&w$(o,r);let s=t.type;if(s&8)jf(n,e,t.child,r);else if(s&32){let a=Cw(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=bx(e,t);if(Array.isArray(a))r.push(...a);else{let c=ws(e[Nr]);jf(c[Ae],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function w$(n,e){for(let t=Mn;t<n.length;t++){let r=n[t],i=r[Ae].firstChild;i!==null&&jf(r[Ae],r,i,e)}n[_s]!==n[Oi]&&e.push(n[_s])}var Ax=[];function E$(n){return n[Zn]??I$(n)}function I$(n){let e=Ax.pop()??Object.create(C$);return e.lView=n,e}function T$(n){n.lView[Zn]!==n&&(n.lView=null,Ax.push(n))}var C$=ge(B({},cs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ru(n.lView)},consumerOnSignalRead(){this.lView[Zn]=this}});function b$(n){let e=n[Zn]??Object.create(D$);return e.lView=n,e}var D$=ge(B({},cs),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=ws(n.lView);for(;e&&!Rx(e[Ae]);)e=ws(e);e&&rw(e)},consumerOnSignalRead(){this.lView[Zn]=this}});function Rx(n){return n.type!==2}function xx(n){if(n[ys]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[ys])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[pe]&8192)}}var S$=100;function Nx(n,e=!0,t=0){let i=n[So].rendererFactory,o=!1;o||i.begin?.();try{A$(n,t)}catch(s){throw e&&Ix(n,s),s}finally{o||i.end?.()}}function A$(n,e){let t=bR();try{Mf(!0),T_(n,e);let r=0;for(;ip(n);){if(r===S$)throw new te(103,!1);r++,T_(n,1)}}finally{Mf(t)}}function R$(n,e,t,r){if(Au(e))return;let i=e[pe],o=!1,s=!1;ow(e);let a=!0,c=null,u=null;o||(Rx(n)?(u=E$(e),c=Da(u)):IS()===null?(a=!1,u=b$(e),c=Da(u)):e[Zn]&&(Sa(e[Zn]),e[Zn]=null));try{wR(e),_j(n.bindingStartIndex),t!==null&&mx(n,e,t,2,r);let d=(i&3)===3;if(!o)if(d){let v=n.preOrderCheckHooks;v!==null&&Ef(e,v,null)}else{let v=n.preOrderHooks;v!==null&&If(e,v,0,null),$y(e,0)}if(s||x$(e),xx(e),Mx(e,0),n.contentQueries!==null&&sx(n,e),!o)if(d){let v=n.contentCheckHooks;v!==null&&Ef(e,v)}else{let v=n.contentHooks;v!==null&&If(e,v,1),$y(e,1)}M$(n,e);let f=n.components;f!==null&&kx(e,f,0);let m=n.viewQuery;if(m!==null&&__(2,m,r),!o)if(d){let v=n.viewCheckHooks;v!==null&&Ef(e,v)}else{let v=n.viewHooks;v!==null&&If(e,v,2),$y(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[wf]){for(let v of e[wf])v();e[wf]=null}o||(e[pe]&=-73)}catch(d){throw o||Ru(e),d}finally{u!==null&&(ru(u,c),a&&T$(u)),sw()}}function Mx(n,e){for(let t=ex(n);t!==null;t=tx(t))for(let r=Mn;r<t.length;r++){let i=t[r];Px(i,e)}}function x$(n){for(let e=ex(n);e!==null;e=tx(e)){if(!(e[pe]&2))continue;let t=e[Nf];for(let r=0;r<t.length;r++){let i=t[r];rw(i)}}}function N$(n,e,t){let r=Oo(e,n);Px(r,t)}function Px(n,e){nw(n)&&T_(n,e)}function T_(n,e){let r=n[Ae],i=n[pe],o=n[Zn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&iu(o)),s||=!1,o&&(o.dirty=!1),n[pe]&=-9217,s)R$(r,n,r.template,n[pn]);else if(i&8192){xx(n),Mx(n,1);let a=r.components;a!==null&&kx(n,a,1)}}function kx(n,e,t){for(let r=0;r<e.length;r++)N$(n,e[r],t)}function M$(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Es(~i);else{let o=i,s=t[++r],a=t[++r];Ij(s,o);let c=e[o];dr(24,c),a(2,c),dr(25,c)}}}finally{Es(-1)}}function Sw(n,e){let t=bR()?64:1088;for(n[So].changeDetectionScheduler?.notify(e);n;){n[pe]|=t;let r=ws(n);if(o_(n)&&!r)return n;n=r}return null}var Cs=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Ae];return jf(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[pn]}get dirty(){return!!(this._lView[pe]&9280)||!!this._lView[Zn]?.dirty}set context(e){this._lView[pn]=e}get destroyed(){return Au(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pn];if(Fi(e)){let t=e[xf],r=t?t.indexOf(this):-1;r>-1&&(wu(e,r),Sf(t,r))}this._attachedToViewContainer=!1}mp(this._lView[Ae],this._lView)}onDestroy(e){ER(this._lView,e)}markForCheck(){Sw(this._cdRefInjectingView||this._lView,4)}markForRefresh(){rw(this._cdRefInjectingView||this._lView)}detach(){this._lView[pe]&=-129}reattach(){a_(this._lView),this._lView[pe]|=128}detectChanges(){this._lView[pe]|=1024,Nx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=o_(this._lView),t=this._lView[Xa];t!==null&&!e&&bw(t,this._lView),Tx(this._lView[Ae],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new te(902,!1);this._appRef=e;let t=o_(this._lView),r=this._lView[Xa];r!==null&&!t&&Cx(r,this._lView),a_(this._lView)}},Aw=(()=>{class n{static __NG_ELEMENT_ID__=O$}return n})(),P$=Aw,k$=class extends P${_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=yp(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Cs(i)}};function O$(){return F$(gn(),Fe())}function F$(n,e){return n.type&4?new k$(e,n,dp(n,e)):null}function xu(n,e,t,r,i){let o=n.data[e];if(o===null)o=L$(n,e,t,r,i),Ej()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=yj();o.injectorIndex=s===null?-1:s.injectorIndex}return Ds(o,!0),o}function L$(n,e,t,r,i){let o=TR(),s=iw(),a=s?o:o&&o.parent,c=n.data[e]=U$(n,a,t,e,r,i);return V$(n,c,o,s),c}function V$(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function U$(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return mj()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var Iae=new RegExp(`^(\\d+)*(${uB}|${lB})*(.*)`);var j$=()=>null;function Iu(n,e){return j$(n,e)}var C_=class{},Bf=class{},b_=class{resolveComponentFactory(e){throw Error(`No component factory found for ${$n(e)}.`)}},Mo=class{static NULL=new b_},nc=class{},Vi=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>B$()}return n})();function B$(){let n=Fe(),e=gn(),t=Oo(e.index,n);return(Do(t)?t:n)[kt]}var $$=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>null})}return n})();function $f(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=sA(i,a);else if(o==2){let c=a,u=e[++s];r=sA(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Hf=class extends Mo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=vs(e);return new Tu(t,this.ngModule)}};function xA(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:No.None;e?t.push({propName:s,templateName:r,isSignal:(a&No.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function H$(n){let e=n.toLowerCase();return e==="svg"?ij:e==="math"?oj:null}function W$(n){let{attrs:e,classes:t}=AB(n),r=e;return t.length&&r.push(1,...t),r}var Tu=class extends Bf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=xA(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return xA(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=SB(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Ne(null);try{i=i||this.ngModule;let s=i instanceof mn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new u_(e,s):e,c=a.get(nc,null);if(c===null)throw new te(407,!1);let u=a.get($$,null),d=a.get(Ts,null),f={rendererFactory:c,sanitizer:u,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",I=r?FB(m,r,this.componentDef.encapsulation,a):dx(m,v,H$(v)),x=512;this.componentDef.signals?x|=4096:this.componentDef.onPush||(x|=16);let A=null;I!==null&&(A=pw(I,a,!0));let F=ww(0,null,null,1,0,null,null,null,null,null,null),q=fp(null,F,null,x,null,null,f,m,a,null,A);q[Nn]=I,ow(q);let z,re=null;try{let de=this.componentDef,R,E=null;de.findHostDirectiveDefs?(R=[],E=new Map,de.findHostDirectiveDefs(de,R,E),R.push(de)):R=[de];let T=r?["ng-version","19.1.3"]:W$(this.componentDef.selectors[0]),S=xu(F,Nn,2,"#host",T);for(let N of R)S.mergedAttrs=ec(S.mergedAttrs,N.hostAttrs);S.mergedAttrs=ec(S.mergedAttrs,T),$f(S,S.mergedAttrs,!0),I&&fx(m,I,S),re=q$(S,I,de,R,q,f),t!==void 0&&G$(S,this.ngContentSelectors,t),z=z$(re,de,R,E,q,[K$]),Tw(F,q,null)}catch(de){throw re!==null&&v_(re),v_(q),de}finally{sw()}let tt=tw(F,Nn);return new D_(this.componentType,z,dp(tt,q),q,tt)}finally{Ne(o)}}},D_=class extends C_{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new Cs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;Iw(o[Ae],o,i,e,t),this.previousInputValues.set(e,t);let s=Oo(this._tNode.index,o);Sw(s,1)}}get injector(){return new ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function q$(n,e,t,r,i,o){let s=i[Ae],a=null;e!==null&&(a=pw(e,i[Ja]));let c=o.rendererFactory.createRenderer(e,t),u=fp(i,gx(t),null,wx(t),i[n.index],n,o,c,null,null,a);return s.firstCreatePass&&E_(s,n,r.length-1),pp(i,u),i[n.index]=u}function z$(n,e,t,r,i,o){let s=gn(),a=i[Ae],c=fr(s,i);yx(a,i,s,t,null,r);for(let d=0;d<t.length;d++){let f=s.directiveStart+d,m=tc(i,a,f,s);xo(m,i)}_x(a,i,s),c&&xo(c,i);let u=tc(i,a,s.directiveStart+s.componentOffset,s);if(n[pn]=i[pn]=u,o!==null)for(let d of o)d(u,e);return mw(a,s,i),u}function G$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function K$(){let n=gn();cp(Fe()[Ae],n)}var As=(()=>{class n{static __NG_ELEMENT_ID__=Y$}return n})();function Y$(){let n=gn();return J$(n,Fe())}var Q$=As,Ox=class extends Q${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return dp(this._hostTNode,this._hostLView)}get injector(){return new ms(this._hostTNode,this._hostLView)}get parentInjector(){let e=cw(this._hostTNode,this._hostLView);if(kR(e)){let t=kf(e,this._hostLView),r=Pf(e),i=t[Ae].data[r+8];return new ms(i,t)}else return new ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=NA(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Mn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Iu(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,Eu(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!ej(e),a;if(s)a=t;else{let I=t||{};a=I.index,r=I.injector,i=I.projectableNodes,o=I.environmentInjector||I.ngModuleRef}let c=s?e:new Tu(vs(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let x=(s?u:this.parentInjector).get(mn,null);x&&(o=x)}let d=vs(c.componentType??{}),f=Iu(this._lContainer,d?.id??null),m=f?.firstChild??null,v=c.create(u,i,m,o);return this.insertImpl(v.hostView,a,Eu(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(aj(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Pn],u=new Ox(c,c[Mr],c[Pn]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return _p(s,i,o,r),e.attachToViewContainerRef(),tR(zy(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=NA(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=wu(this._lContainer,t);r&&(Sf(zy(this._lContainer),t),mp(r[Ae],r))}detach(e){let t=this._adjustIndex(e,-1),r=wu(this._lContainer,t);return r&&Sf(zy(this._lContainer),t)!=null?new Cs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function NA(n){return n[xf]}function zy(n){return n[xf]||(n[xf]=[])}function J$(n,e){let t,r=e[n.index];return Fi(r)?t=r:(t=Ex(r,e,null,n),e[n.index]=t,pp(e,t)),Z$(t,e,n,r),new Ox(t,n,e)}function X$(n,e){let t=n[kt],r=t.createComment(""),i=fr(e,n),o=t.parentNode(i);return Uf(t,o,r,t.nextSibling(i),!1),r}var Z$=nH,eH=()=>!1;function tH(n,e,t){return eH(n,e,t)}function nH(n,e,t,r){if(n[_s])return;let i;t.type&8?i=ni(r):i=X$(e,t),n[_s]=i}var Po=class{},Cu=class{};var S_=class extends Po{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Hf(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=iR(e);this._bootstrapComponents=ax(o.bootstrap),this._r3Injector=HR(e,t,[{provide:Po,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver},...r],$n(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},A_=class extends Cu{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new S_(this.moduleType,e,[])}};var Wf=class extends Po{injector;componentFactoryResolver=new Hf(this);instance=null;constructor(e){super();let t=new gu([...e.providers,{provide:Po,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver}],e.parent||Z_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Rw(n,e,t=null){return new Wf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var rH=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=cR(!1,t.type),i=r.length>0?Rw([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(ie(mn))})}return n})();function Ce(n){return Du(()=>{let e=Lx(n),t=ge(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===XR.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(rH).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ri.Emulated,styles:n.styles||ur,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&si("NgStandalone"),Vx(t);let r=n.dependencies;return t.directiveDefs=PA(r,!1),t.pipeDefs=PA(r,!0),t.id=sH(t),t})}function iH(n){return vs(n)||oR(n)}function oH(n){return n!==null}function Ui(n){return Du(()=>({type:n.type,bootstrap:n.bootstrap||ur,declarations:n.declarations||ur,imports:n.imports||ur,exports:n.exports||ur,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function MA(n,e){if(n==null)return Ka;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=No.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==No.None?[r,a]:r,e[o]=s):t[o]=r}return t}function ht(n){return Du(()=>{let e=Lx(n);return Vx(e),e})}function Fx(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Lx(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ka,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ur,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:MA(n.inputs,e),outputs:MA(n.outputs),debugInfo:null}}function Vx(n){n.features?.forEach(e=>e(n))}function PA(n,e){if(!n)return null;let t=e?sR:iH;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(oH)}function sH(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function aH(n){return Object.getPrototypeOf(n.prototype).constructor}function Hn(n){let e=aH(n.type),t=!0,r=[n];for(;e;){let i;if(Ao(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new te(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=vf(n.inputs),s.inputTransforms=vf(n.inputTransforms),s.declaredInputs=vf(n.declaredInputs),s.outputs=vf(n.outputs);let a=i.hostBindings;a&&hH(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&uH(n,c),u&&dH(n,u),cH(n,i),wU(n.outputs,i.outputs),Ao(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Hn&&(t=!1)}}e=Object.getPrototypeOf(e)}lH(r)}function cH(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function lH(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ec(i.hostAttrs,t=ec(t,i.hostAttrs))}}function vf(n){return n===Ka?{}:n===ur?[]:n}function uH(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function dH(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function hH(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Ux(n){return pH(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function fH(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function pH(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function xw(n,e,t){return n[e]=t}function ii(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function R_(n,e,t,r){let i=ii(n,e,t);return ii(n,e+1,r)||i}function mH(n,e,t,r,i,o){let s=R_(n,e,t,r);return R_(n,e+2,i,o)||s}function gH(n){return(n.flags&32)===32}function vH(n,e,t,r,i,o,s,a,c){let u=e.consts,d=xu(e,n,4,s||null,a||null);Ew(e,t,d,Ro(u,c)),cp(e,d);let f=d.tView=ww(2,d,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function x_(n,e,t,r,i,o,s,a,c,u){let d=t+Nn,f=e.firstCreatePass?vH(d,e,n,r,i,o,s,a,c):e.data[d];Ds(f,!1);let m=yH(e,n,f,t);sp()&&gp(e,n,m,f),xo(m,n);let v=Ex(m,n,m,f);return n[d]=v,pp(n,v),tH(v,f,n),rp(f)&&yw(e,n,f),c!=null&&_w(n,f,u),f}function Y(n,e,t,r,i,o,s,a){let c=Fe(),u=sn(),d=Ro(u.consts,o);return x_(c,u,n,e,t,r,i,d,s,a),Y}var yH=_H;function _H(n,e,t,r){return ap(!0),e[kt].createComment("")}var Nw=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var jx=new W("");function Rs(n){return!!n&&typeof n.then=="function"}function Bx(n){return!!n&&typeof n.subscribe=="function"}var $x=new W("");var Hx=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=D($x,{optional:!0})??[];injector=D(xe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=on(this.injector,i);if(Rs(o))t.push(o);else if(Bx(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Wx=(()=>{class n{static \u0275prov=j({token:n,providedIn:"root",factory:()=>new qf})}return n})(),qf=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},wp=new W("");function wH(){MS(()=>{throw new te(600,!1)})}function EH(n){return n.isBoundToModule}var IH=10;function TH(n,e,t){try{let r=t();return Rs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Mi=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=D(Zj);afterRenderManager=D(hB);zonelessEnabled=D(lp);rootEffectScheduler=D(Wx);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new ut;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=D(oi).hasPendingTasks.pipe(ee(t=>!t));constructor(){D(hp,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=D(mn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Bf;if(!this._injector.get(Hx).done){let m=!i&&aR(t),v=!1;throw new te(405,v)}let s;i?s=t:s=this._injector.get(Mo).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=EH(s)?void 0:this._injector.get(Po),c=r||s.selector,u=s.create(xe.NULL,[],c,a),d=u.location.nativeElement,f=u.injector.get(jx,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Tf(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(ox.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new te(101,!1);let t=Ne(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ne(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(nc,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<IH;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)CH(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>ip(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Tf(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(wp,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Tf(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new te(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Tf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function CH(n,e,t,r){if(!t&&!ip(n))return;Nx(n,e,t&&!r?0:1)}function Nu(n,e,t,r){let i=Fe(),o=sc();if(ii(i,o,e)){let s=sn(),a=aw();XB(a,i,n,e,t,r)}return Nu}function bH(n,e,t,r){return ii(n,sc(),t)?e+Y_(t)+r:Fo}function yf(n,e){return n<<17|e<<2}function bs(n){return n>>17&32767}function DH(n){return(n&2)==2}function SH(n,e){return n&131071|e<<17}function N_(n){return n|2}function rc(n){return(n&131068)>>2}function Gy(n,e){return n&-131069|e<<2}function AH(n){return(n&1)===1}function M_(n){return n|1}function RH(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=bs(s),c=rc(s);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Su(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=bs(n[a+1]);n[r+1]=yf(m,a),m!==0&&(n[m+1]=Gy(n[m+1],r)),n[a+1]=SH(n[a+1],r)}else n[r+1]=yf(a,0),a!==0&&(n[a+1]=Gy(n[a+1],r)),a=r;else n[r+1]=yf(c,0),a===0?a=r:n[c+1]=Gy(n[c+1],r),c=r;u&&(n[r+1]=N_(n[r+1])),kA(n,d,r,!0),kA(n,d,r,!1),xH(e,d,n,r,o),s=yf(a,c),o?e.classBindings=s:e.styleBindings=s}function xH(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Su(o,e)>=0&&(t[r+1]=M_(t[r+1]))}function kA(n,e,t,r){let i=n[t+1],o=e===null,s=r?bs(i):rc(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];NH(c,e)&&(a=!0,n[s+1]=r?M_(u):N_(u)),s=r?bs(u):rc(u)}a&&(n[t+1]=r?N_(i):M_(i))}function NH(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Su(n,e)>=0:!1}function K(n,e,t){let r=Fe(),i=sc();if(ii(r,i,e)){let o=sn(),s=aw();vx(o,s,r,n,e,r[kt],t,!1)}return K}function OA(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";Iw(n,t,o[s],s,r)}function ac(n,e,t){return qx(n,e,t,!1),ac}function Ep(n,e){return qx(n,e,null,!0),Ep}function qx(n,e,t,r){let i=Fe(),o=sn(),s=wj(2);if(o.firstUpdatePass&&PH(o,n,s,r),e!==Fo&&ii(i,s,e)){let a=o.data[Ss()];VH(o,a,i,i[kt],n,i[s+1]=UH(e,t),r,s)}}function MH(n,e){return e>=n.expandoStartIndex}function PH(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ss()],s=MH(n,t);jH(o,r)&&e===null&&!s&&(e=!1),e=kH(i,o,e,r),RH(i,o,e,t,s,r)}}function kH(n,e,t,r){let i=Cj(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ky(null,n,e,t,r),t=bu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ky(i,n,e,t,r),o===null){let c=OH(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Ky(null,n,e,c[1],r),c=bu(c,e.attrs,r),FH(n,e,r,c))}else o=LH(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function OH(n,e,t){let r=t?e.classBindings:e.styleBindings;if(rc(r)!==0)return n[bs(r)]}function FH(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[bs(i)]=r}function LH(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=bu(r,s,t)}return bu(r,e.attrs,t)}function Ky(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=bu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function bu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),BU(n,s,t?!0:e[++o]))}return n===void 0?null:n}function VH(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=AH(u)?FA(c,e,t,i,rc(u),s):void 0;if(!zf(d)){zf(o)||DH(u)&&(o=FA(c,null,t,i,a,s));let f=_R(Ss(),t);_$(r,s,f,i,o)}}function FA(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=t[i+1];m===Fo&&(m=f?ur:void 0);let v=f?jy(m,r):d===r?m:void 0;if(u&&!zf(v)&&(v=jy(c,r)),zf(v)&&(a=v,s))return a;let I=n[i+1];i=s?bs(I):rc(I)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=jy(c,r))}return a}function zf(n){return n!==void 0}function UH(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=$n(gw(n)))),n}function jH(n,e){return(n.flags&(e?8:16))!==0}var P_=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Yy(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function BH(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let u=n.at(o),d=e[o],f=Yy(o,u,o,d,t);if(f!==0){f<0&&n.updateValue(o,d),o++;continue}let m=n.at(s),v=e[c],I=Yy(s,m,c,v,t);if(I!==0){I<0&&n.updateValue(s,v),s--,c--;continue}let x=t(o,u),A=t(s,m),F=t(o,d);if(Object.is(F,A)){let q=t(c,v);Object.is(q,x)?(n.swap(o,s),n.updateValue(s,v),c--,s--):n.move(s,o),n.updateValue(o,d),o++;continue}if(r??=new Gf,i??=VA(n,o,s,t),k_(n,r,o,F))n.updateValue(o,d),o++,s++;else if(i.has(F))r.set(x,n.detach(o)),s--;else{let q=n.create(o,e[o]);n.attach(o,q),o++,s++}}for(;o<=c;)LA(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),u=c.next();for(;!u.done&&o<=s;){let d=n.at(o),f=u.value,m=Yy(o,d,o,f,t);if(m!==0)m<0&&n.updateValue(o,f),o++,u=c.next();else{r??=new Gf,i??=VA(n,o,s,t);let v=t(o,f);if(k_(n,r,o,v))n.updateValue(o,f),o++,s++,u=c.next();else if(!i.has(v))n.attach(o,n.create(o,f)),o++,s++,u=c.next();else{let I=t(o,d);r.set(I,n.detach(o)),s--}}}for(;!u.done;)LA(n,r,t,n.length,u.value),u=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function k_(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function LA(n,e,t,r,i){if(k_(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function VA(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var Gf=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function Z(n,e){si("NgControlFlow");let t=Fe(),r=sc(),i=t[r]!==Fo?t[r]:-1,o=i!==-1?Kf(t,Nn+i):void 0,s=0;if(ii(t,r,n)){let a=Ne(null);try{if(o!==void 0&&Sx(o,s),n!==-1){let c=Nn+n,u=Kf(t,c),d=V_(t[Ae],c),f=Iu(u,d.tView.ssrId),m=yp(t,d,e,{dehydratedView:f});_p(u,m,s,Eu(d,f))}}finally{Ne(a)}}else if(o!==void 0){let a=Dx(o,s);a!==void 0&&(a[pn]=e)}}var O_=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Mn}};function zx(n,e){return e}var F_=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Gx(n,e,t,r,i,o,s,a,c,u,d,f,m){si("NgControlFlow");let v=Fe(),I=sn(),x=c!==void 0,A=Fe(),F=a?s.bind(A[Nr][pn]):s,q=new F_(x,F);A[Nn+n]=q,x_(v,I,n+1,e,t,r,i,Ro(I.consts,o)),x&&x_(v,I,n+2,c,u,d,f,Ro(I.consts,m))}var L_=class extends P_{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-Mn}at(e){return this.getLView(e)[pn].$implicit}attach(e,t){let r=t[vu];this.needsIndexUpdate||=e!==this.length,_p(this.lContainer,t,e,Eu(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,$H(this.lContainer,e)}create(e,t){let r=Iu(this.lContainer,this.templateTNode.tView.ssrId),i=yp(this.hostLView,this.templateTNode,new O_(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){mp(e[Ae],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[pn].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[pn].$index=e}getLView(e){return HH(this.lContainer,e)}};function Kx(n){let e=Ne(null),t=Ss();try{let r=Fe(),i=r[Ae],o=r[t],s=t+1,a=Kf(r,s);if(o.liveCollection===void 0){let u=V_(i,s);o.liveCollection=new L_(a,r,u)}else o.liveCollection.reset();let c=o.liveCollection;if(BH(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let u=sc(),d=c.length===0;if(ii(r,u,d)){let f=t+2,m=Kf(r,f);if(d){let v=V_(i,f),I=Iu(m,v.tView.ssrId),x=yp(r,v,void 0,{dehydratedView:I});_p(m,x,0,Eu(v,I))}else Sx(m,0)}}}finally{Ne(e)}}function Kf(n,e){return n[e]}function $H(n,e){return wu(n,e)}function HH(n,e){return Dx(n,e)}function V_(n,e){return tw(n,e)}function WH(n,e,t,r,i,o){let s=e.consts,a=Ro(s,i),c=xu(e,n,2,r,a);return Ew(e,t,c,Ro(s,o)),c.attrs!==null&&$f(c,c.attrs,!1),c.mergedAttrs!==null&&$f(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function _(n,e,t,r){let i=Fe(),o=sn(),s=Nn+n,a=i[kt],c=o.firstCreatePass?WH(s,o,i,e,t,r):o.data[s],u=qH(o,i,c,a,e,n);i[s]=u;let d=rp(c);return Ds(c,!0),fx(a,u,c),!gH(c)&&sp()&&gp(o,i,u,c),hj()===0&&xo(u,i),fj(),d&&(yw(o,i,c),mw(o,c,i)),r!==null&&_w(i,c),_}function w(){let n=gn();iw()?CR():(n=n.parent,Ds(n,!1));let e=n;gj(e)&&vj(),pj();let t=sn();return t.firstCreatePass&&(cp(t,n),ew(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&Nj(e)&&OA(t,e,Fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Mj(e)&&OA(t,e,Fe(),e.stylesWithoutHost,!1),w}function le(n,e,t,r){return _(n,e,t,r),w(),le}var qH=(n,e,t,r,i,o)=>(ap(!0),dx(r,i,Sj()));function zH(n,e,t,r,i){let o=e.consts,s=Ro(o,r),a=xu(e,n,8,"ng-container",s);s!==null&&$f(a,s,!0);let c=Ro(o,i);return Ew(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Mw(n,e,t){let r=Fe(),i=sn(),o=n+Nn,s=i.firstCreatePass?zH(o,i,r,e,t):i.data[o];Ds(s,!0);let a=GH(i,r,s,n);return r[o]=a,sp()&&gp(i,r,a,s),xo(a,r),rp(s)&&(yw(i,r,s),mw(i,s,r)),t!=null&&_w(r,s),Mw}function Pw(){let n=gn(),e=sn();return iw()?CR():(n=n.parent,Ds(n,!1)),e.firstCreatePass&&(cp(e,n),ew(n)&&e.queries.elementEnd(n)),Pw}var GH=(n,e,t,r)=>(ap(!0),NB(e[kt],""));function vn(){return Fe()}var ps=void 0;function KH(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var YH=["en",[["a","p"],["AM","PM"],ps],[["AM","PM"],ps,ps],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ps,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ps,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ps,"{1} 'at' {0}",ps],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",KH],Qy={};function mr(n){let e=QH(n),t=UA(e);if(t)return t;let r=e.split("-")[0];if(t=UA(r),t)return t;if(r==="en")return YH;throw new te(701,!1)}function UA(n){return n in Qy||(Qy[n]=du.ng&&du.ng.common&&du.ng.common.locales&&du.ng.common.locales[n]),Qy[n]}var Mt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Mt||{});function QH(n){return n.toLowerCase().replace(/_/g,"-")}var Yf="en-US";var JH=Yf;function XH(n){typeof n=="string"&&(JH=n.toLowerCase().replace(/_/g,"-"))}var ZH=(n,e,t)=>{};function ne(n,e,t,r){let i=Fe(),o=sn(),s=gn();return Yx(o,i,i[kt],s,n,e,r),ne}function eW(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Rf],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Yx(n,e,t,r,i,o,s){let a=rp(r),u=n.firstCreatePass&&dj(n),d=e[pn],f=uj(e),m=!0;if(r.type&3||s){let x=fr(r,e),A=s?s(x):x,F=f.length,q=s?re=>s(ni(re[r.index])):r.index,z=null;if(!s&&a&&(z=eW(n,e,i,r.index)),z!==null){let re=z.__ngLastListenerFn__||z;re.__ngNextListenerFn__=o,z.__ngLastListenerFn__=o,m=!1}else{o=BA(r,e,d,o),ZH(x,i,o);let re=t.listen(A,i,o);f.push(o,re),u&&u.push(i,q,F,F+1)}}else o=BA(r,e,d,o);let v=r.outputs,I;if(m&&v!==null&&(I=v[i])){let x=I.length;if(x)for(let A=0;A<x;A+=2){let F=I[A],q=I[A+1],tt=e[F][q].subscribe(o),de=f.length;f.push(o,tt),u&&u.push(i,r.index,de,-(de+1))}}}function jA(n,e,t,r){let i=Ne(null);try{return dr(6,e,t),t(r)!==!1}catch(o){return Ix(n,o),!1}finally{dr(7,e,t),Ne(i)}}function BA(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Oo(n.index,e):e;Sw(s,5);let a=jA(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=jA(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function U(n=1){return Dj(n)}function tW(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function b(n,e=""){let t=Fe(),r=sn(),i=n+Nn,o=r.firstCreatePass?xu(r,i,1,e,null):r.data[i],s=nW(r,t,o,e,n);t[i]=s,sp()&&gp(r,t,s,o),Ds(o,!1)}var nW=(n,e,t,r,i)=>(ap(!0),RB(e[kt],r));function yn(n){return $("",n,""),yn}function $(n,e,t){let r=Fe(),i=bH(r,n,e,t);return i!==Fo&&rW(r,Ss(),i),$}function rW(n,e,t){let r=_R(e,n);xB(n[kt],r,t)}function Wn(n,e,t){QR(e)&&(e=e());let r=Fe(),i=sc();if(ii(r,i,e)){let o=sn(),s=aw();vx(o,s,r,n,e,r[kt],t,!1)}return Wn}function er(n,e){let t=QR(n);return t&&n.set(e),t}function qn(n,e){let t=Fe(),r=sn(),i=gn();return Yx(r,t,t[kt],i,n,e),qn}function iW(n,e,t){let r=sn();if(r.firstCreatePass){let i=Ao(n);U_(t,r.data,r.blueprint,i,!0),U_(e,r.data,r.blueprint,i,!1)}}function U_(n,e,t,r,i){if(n=xn(n),Array.isArray(n))for(let o=0;o<n.length;o++)U_(n[o],e,t,r,i);else{let o=sn(),s=Fe(),a=gn(),c=Qa(n)?n:xn(n.provide),u=dR(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Qa(n)||!n.multi){let v=new Is(u,i,Pe),I=Xy(c,e,i?d:d+m,f);I===-1?(h_(Ff(a,s),o,c),Jy(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),s.push(v)):(t[I]=v,s[I]=v)}else{let v=Xy(c,e,d+m,f),I=Xy(c,e,d,d+m),x=v>=0&&t[v],A=I>=0&&t[I];if(i&&!A||!i&&!x){h_(Ff(a,s),o,c);let F=aW(i?sW:oW,t.length,i,r,u);!i&&A&&(t[I].providerFactory=F),Jy(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),s.push(F)}else{let F=Qx(t[i?I:v],u,!i&&r);Jy(o,n,v>-1?v:I,F)}!i&&r&&A&&t[I].componentProviders++}}}function Jy(n,e,t,r){let i=Qa(e),o=GU(e);if(i||o){let c=(o?xn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function Qx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Xy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function oW(n,e,t,r){return j_(this.multi,[])}function sW(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=tc(t,t[Ae],this.providerFactory.index,r);o=a.slice(0,s),j_(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],j_(i,o);return o}function j_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function aW(n,e,t,r,i){let o=new Is(n,t,Pe);return o.multi=[],o.index=e,o.componentProviders=0,Qx(o,i,r&&!t),o}function ai(n,e=[]){return t=>{t.providersResolver=(r,i)=>iW(r,i?i(n):n,e)}}function Ge(n,e,t,r){return cW(Fe(),op(),n,e,t,r)}function kr(n,e,t,r,i){return Xx(Fe(),op(),n,e,t,r,i)}function Jx(n,e,t,r,i,o,s){return lW(Fe(),op(),n,e,t,r,i,o,s)}function kw(n,e){let t=n[e];return t===Fo?void 0:t}function cW(n,e,t,r,i,o){let s=e+t;return ii(n,s,i)?xw(n,s+1,o?r.call(o,i):r(i)):kw(n,s+1)}function Xx(n,e,t,r,i,o,s){let a=e+t;return R_(n,a,i,o)?xw(n,a+2,s?r.call(s,i,o):r(i,o)):kw(n,a+2)}function lW(n,e,t,r,i,o,s,a,c){let u=e+t;return mH(n,u,i,o,s,a)?xw(n,u+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):kw(n,u+4)}function Or(n,e){let t=sn(),r,i=n+Nn;t.firstCreatePass?(r=uW(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=gs(r.type,!0)),s,a=Bn(Pe);try{let c=Of(!1),u=o();return Of(c),tW(t,Fe(),i,u),u}finally{Bn(a)}}function uW(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Fr(n,e,t,r){let i=n+Nn,o=Fe(),s=sj(o,i);return dW(o,i)?Xx(o,op(),e,s.transform,t,r,s):s.transform(t,r)}function dW(n,e){return n[Ae].data[e].pure}var Pi=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},Zx=new Pi("19.1.3"),B_=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Ow=(()=>{class n{compileModuleSync(t){return new A_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=iR(t),o=ax(i.declarations).reduce((s,a)=>{let c=vs(a);return c&&s.push(new Tu(c)),s},[]);return new B_(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var hW=(()=>{class n{zone=D(me);changeDetectionScheduler=D(Ts);applicationRef=D(Mi);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fW=new W("",{factory:()=>!1});function eN({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new me(ge(B({},nN()),{scheduleInRootZone:t})),[{provide:me,useFactory:n},{provide:Ya,multi:!0,useFactory:()=>{let r=D(hW,{optional:!0});return()=>r.initialize()}},{provide:Ya,multi:!0,useFactory:()=>{let r=D(pW);return()=>{r.initialize()}}},e===!0?{provide:qR,useValue:!0}:[],{provide:zR,useValue:t??WR}]}function tN(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=eN({ngZoneFactory:()=>{let i=nN(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&si("NgZone_CoalesceEvent"),new me(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return at([{provide:fW,useValue:!0},{provide:lp,useValue:!1},r])}function nN(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var pW=(()=>{class n{subscription=new bt;initialized=!1;zone=D(me);pendingTasks=D(oi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var mW=(()=>{class n{appRef=D(Mi);taskService=D(oi);ngZone=D(me);zonelessEnabled=D(lp);tracing=D(hp,{optional:!0});disableScheduling=D(qR,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new bt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Vf):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(D(zR,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof g_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?_A:GR;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Vf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,_A(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gW(){return typeof $localize<"u"&&$localize.locale||Yf}var Ip=new W("",{providedIn:"root",factory:()=>D(Ip,Re.Optional|Re.SkipSelf)||gW()});var $_=new W(""),vW=new W("");function uu(n){return!n.moduleRef}function yW(n){let e=uu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(me);return t.run(()=>{uu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(xi,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),uu(n)){let o=()=>e.destroy(),s=n.platformInjector.get($_);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get($_);s.add(o),n.moduleRef.onDestroy(()=>{Tf(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return TH(r,t,()=>{let o=e.get(Hx);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Ip,Yf);if(XH(s||Yf),!e.get(vW,!0))return uu(n)?e.get(Mi):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(uu(n)){let c=e.get(Mi);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return _W(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function _W(n,e){let t=n.injector.get(Mi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new te(-403,!1);e.push(n)}var Cf=null;function wW(n=[],e){return xe.create({name:e,providers:[{provide:ep,useValue:"platform"},{provide:$_,useValue:new Set([()=>Cf=null])},...n]})}function EW(n=[]){if(Cf)return Cf;let e=wW(n);return Cf=e,wH(),IW(e),e}function IW(n){let e=n.get(hw,null);on(n,()=>{e?.forEach(t=>t())})}function Fw(){return!1}var Lo=(()=>{class n{static __NG_ELEMENT_ID__=TW}return n})();function TW(n){return CW(gn(),Fe(),(n&16)===16)}function CW(n,e,t){if(np(n)&&!t){let r=Oo(n.index,e);return new Cs(r,r)}else if(n.type&175){let r=e[Nr];return new Cs(r,e)}return null}var H_=class{constructor(){}supports(e){return Ux(e)}create(e){return new W_(e)}},bW=(n,e)=>e,W_=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||bW}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<$A(r,i,o)?t:r,a=$A(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let v=m<o.length?o[m]:o[m]=0,I=v+m;d<=I&&I<u&&(o[m]=v+1)}let f=s.previousIndex;o[f]=d-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Ux(e))throw new te(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,fH(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new q_(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},q_=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},z_=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Qf=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new z_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function $A(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function HA(){return new Lw([new H_])}var Lw=(()=>{class n{factories;static \u0275prov=j({token:n,providedIn:"root",factory:HA});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||HA()),deps:[[n,new UU,new be]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new te(901,!1)}}return n})();function rN(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=EW(r),o=[eN({}),{provide:Ts,useExisting:mW},...t||[]],s=new Wf({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return yW({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Mu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ee(n,e){si("NgSignals");let t=RS(n);return e?.equal&&(t[Un].equal=e.equal),t}function gr(n){let e=Ne(null);try{return n()}finally{Ne(e)}}var iN=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=DW}return n})();function DW(){return new iN(Fe(),gn())}var SW=!1,AW=(()=>{class n extends qf{pendingTasks=D(oi);taskId=null;schedule(t){super.schedule(t),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}return n})(),G_=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.zone=r,this.injector=o,this.watcher=OS(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(xi,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function RW(){}function oN(n,e){si("NgSignals"),!e?.injector&&ic(RW);let t=e?.injector??D(xe),r=e?.manualCleanup!==!0?t.get(Li):null,i=new G_(t.get(AW),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(Lo,null,{optional:!0});return!o||!(o._lView[pe]&8)?i.watcher.notify():(o._lView[wf]??=[]).push(i.watcher.notify),i}var xW=SW;var K_=class{[Un];constructor(e){this[Un]=e}destroy(){this[Un].destroy()}};function Lr(n,e){if(xW)return oN(n,e);si("NgSignals"),!e?.injector&&ic(Lr);let t=e?.injector??D(xe),r=e?.manualCleanup!==!0?t.get(Li):null,i,o=t.get(iN,null,{optional:!0}),s=t.get(Ts);return o!==null&&!e?.forceRoot?(i=PW(o.view,s,n),r instanceof Lf&&r._lView===o.view&&(r=null)):i=kW(n,t.get(Wx),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new K_(i)}var sN=ge(B({},cs),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:_u,run(){if(this.dirty=!1,this.hasRun&&!iu(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Da(this),t=Mf(!1);try{this.maybeCleanup(),this.fn(n)}finally{Mf(t),ru(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),NW=ge(B({},sN),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Sa(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),MW=ge(B({},sN),{consumerMarkedDirty(){this.view[pe]|=8192,Ru(this.view),this.notifier.notify(14)},destroy(){Sa(this),this.onDestroyFn(),this.maybeCleanup(),this.view[ys]?.delete(this)}});function PW(n,e,t){let r=Object.create(MW);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[ys]??=new Set,n[ys].add(r),r.consumerMarkedDirty(r),r}function kW(n,e,t){let r=Object.create(NW);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var hN=null;function Bi(){return hN}function fN(n){hN??=n}var Np=class{};var _n=new W(""),pN=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>D(LW),providedIn:"platform"})}return n})();var LW=(()=>{class n extends pN{_location;_history;_doc=D(_n);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Bi().getBaseHref(this._doc)}onPopState(t){let r=Bi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Bi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function mN(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function aN(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function xs(n){return n&&n[0]!=="?"?"?"+n:n}var Pp=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>D(gN),providedIn:"root"})}return n})(),VW=new W(""),gN=(()=>{class n extends Pp{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??D(_n).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mN(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+xs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+xs(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+xs(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ie(pN),ie(VW,8))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pu=(()=>{class n{_subject=new ut;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=BW(aN(cN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+xs(r))}normalize(t){return n.stripTrailingSlash(jW(this._basePath,cN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+xs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=xs;static joinWithSlash=mN;static stripTrailingSlash=aN;static \u0275fac=function(r){return new(r||n)(ie(Pp))};static \u0275prov=j({token:n,factory:()=>UW(),providedIn:"root"})}return n})();function UW(){return new Pu(ie(Pp))}function jW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function cN(n){return n.replace(/\/index.html$/,"")}function BW(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var kn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(kn||{}),it=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(it||{}),tr=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(tr||{}),Vo={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function $W(n){return mr(n)[Mt.LocaleId]}function HW(n,e,t){let r=mr(n),i=[r[Mt.DayPeriodsFormat],r[Mt.DayPeriodsStandalone]],o=vr(i,e);return vr(o,t)}function WW(n,e,t){let r=mr(n),i=[r[Mt.DaysFormat],r[Mt.DaysStandalone]],o=vr(i,e);return vr(o,t)}function qW(n,e,t){let r=mr(n),i=[r[Mt.MonthsFormat],r[Mt.MonthsStandalone]],o=vr(i,e);return vr(o,t)}function zW(n,e){let r=mr(n)[Mt.Eras];return vr(r,e)}function Tp(n,e){let t=mr(n);return vr(t[Mt.DateFormat],e)}function Cp(n,e){let t=mr(n);return vr(t[Mt.TimeFormat],e)}function bp(n,e){let r=mr(n)[Mt.DateTimeFormat];return vr(r,e)}function kp(n,e){let t=mr(n),r=t[Mt.NumberSymbols][e];if(typeof r>"u"){if(e===Vo.CurrencyDecimal)return t[Mt.NumberSymbols][Vo.Decimal];if(e===Vo.CurrencyGroup)return t[Mt.NumberSymbols][Vo.Group]}return r}function vN(n){if(!n[Mt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Mt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function GW(n){let e=mr(n);return vN(e),(e[Mt.ExtraData][2]||[]).map(r=>typeof r=="string"?Vw(r):[Vw(r[0]),Vw(r[1])])}function KW(n,e,t){let r=mr(n);vN(r);let i=[r[Mt.ExtraData][0],r[Mt.ExtraData][1]],o=vr(i,e)||[];return vr(o,t)||[]}function vr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function Vw(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var YW=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dp={},QW=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function JW(n,e,t,r){let i=sq(n);e=ji(t,e)||e;let s=[],a;for(;e;)if(a=QW.exec(e),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;e=d}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=_N(r,c),i=oq(i,r,!0));let u="";return s.forEach(d=>{let f=rq(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function Mp(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function ji(n,e){let t=$W(n);if(Dp[t]??={},Dp[t][e])return Dp[t][e];let r="";switch(e){case"shortDate":r=Tp(n,tr.Short);break;case"mediumDate":r=Tp(n,tr.Medium);break;case"longDate":r=Tp(n,tr.Long);break;case"fullDate":r=Tp(n,tr.Full);break;case"shortTime":r=Cp(n,tr.Short);break;case"mediumTime":r=Cp(n,tr.Medium);break;case"longTime":r=Cp(n,tr.Long);break;case"fullTime":r=Cp(n,tr.Full);break;case"short":let i=ji(n,"shortTime"),o=ji(n,"shortDate");r=Sp(bp(n,tr.Short),[i,o]);break;case"medium":let s=ji(n,"mediumTime"),a=ji(n,"mediumDate");r=Sp(bp(n,tr.Medium),[s,a]);break;case"long":let c=ji(n,"longTime"),u=ji(n,"longDate");r=Sp(bp(n,tr.Long),[c,u]);break;case"full":let d=ji(n,"fullTime"),f=ji(n,"fullDate");r=Sp(bp(n,tr.Full),[d,f]);break}return r&&(Dp[t][e]=r),r}function Sp(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function Vr(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function XW(n,e){return Vr(n,3).substring(0,e)}function Ot(n,e,t=0,r=!1,i=!1){return function(o,s){let a=ZW(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return XW(a,e);let c=kp(s,Vo.MinusSign);return Vr(a,e,c,r,i)}}function ZW(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function ct(n,e,t=kn.Format,r=!1){return function(i,o){return eq(i,o,n,e,t,r)}}function eq(n,e,t,r,i,o){switch(t){case 2:return qW(e,i,r)[n.getMonth()];case 1:return WW(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let u=GW(e),d=KW(e,i,r),f=u.findIndex(m=>{if(Array.isArray(m)){let[v,I]=m,x=s>=v.hours&&a>=v.minutes,A=s<I.hours||s===I.hours&&a<I.minutes;if(v.hours<I.hours){if(x&&A)return!0}else if(x||A)return!0}else if(m.hours===s&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return HW(e,i,r)[s<12?0:1];case 3:return zW(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Ap(n){return function(e,t,r){let i=-1*r,o=kp(t,Vo.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+Vr(s,2,o)+Vr(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+Vr(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+Vr(s,2,o)+":"+Vr(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+Vr(s,2,o)+":"+Vr(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var tq=0,xp=4;function nq(n){let e=Mp(n,tq,1).getDay();return Mp(n,0,1+(e<=xp?xp:xp+7)-e)}function yN(n){let e=n.getDay(),t=e===0?-3:xp-e;return Mp(n.getFullYear(),n.getMonth(),n.getDate()+t)}function Uw(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=yN(t),s=nq(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return Vr(i,n,kp(r,Vo.MinusSign))}}function Rp(n,e=!1){return function(t,r){let o=yN(t).getFullYear();return Vr(o,n,kp(r,Vo.MinusSign),e)}}var jw={};function rq(n){if(jw[n])return jw[n];let e;switch(n){case"G":case"GG":case"GGG":e=ct(3,it.Abbreviated);break;case"GGGG":e=ct(3,it.Wide);break;case"GGGGG":e=ct(3,it.Narrow);break;case"y":e=Ot(0,1,0,!1,!0);break;case"yy":e=Ot(0,2,0,!0,!0);break;case"yyy":e=Ot(0,3,0,!1,!0);break;case"yyyy":e=Ot(0,4,0,!1,!0);break;case"Y":e=Rp(1);break;case"YY":e=Rp(2,!0);break;case"YYY":e=Rp(3);break;case"YYYY":e=Rp(4);break;case"M":case"L":e=Ot(1,1,1);break;case"MM":case"LL":e=Ot(1,2,1);break;case"MMM":e=ct(2,it.Abbreviated);break;case"MMMM":e=ct(2,it.Wide);break;case"MMMMM":e=ct(2,it.Narrow);break;case"LLL":e=ct(2,it.Abbreviated,kn.Standalone);break;case"LLLL":e=ct(2,it.Wide,kn.Standalone);break;case"LLLLL":e=ct(2,it.Narrow,kn.Standalone);break;case"w":e=Uw(1);break;case"ww":e=Uw(2);break;case"W":e=Uw(1,!0);break;case"d":e=Ot(2,1);break;case"dd":e=Ot(2,2);break;case"c":case"cc":e=Ot(7,1);break;case"ccc":e=ct(1,it.Abbreviated,kn.Standalone);break;case"cccc":e=ct(1,it.Wide,kn.Standalone);break;case"ccccc":e=ct(1,it.Narrow,kn.Standalone);break;case"cccccc":e=ct(1,it.Short,kn.Standalone);break;case"E":case"EE":case"EEE":e=ct(1,it.Abbreviated);break;case"EEEE":e=ct(1,it.Wide);break;case"EEEEE":e=ct(1,it.Narrow);break;case"EEEEEE":e=ct(1,it.Short);break;case"a":case"aa":case"aaa":e=ct(0,it.Abbreviated);break;case"aaaa":e=ct(0,it.Wide);break;case"aaaaa":e=ct(0,it.Narrow);break;case"b":case"bb":case"bbb":e=ct(0,it.Abbreviated,kn.Standalone,!0);break;case"bbbb":e=ct(0,it.Wide,kn.Standalone,!0);break;case"bbbbb":e=ct(0,it.Narrow,kn.Standalone,!0);break;case"B":case"BB":case"BBB":e=ct(0,it.Abbreviated,kn.Format,!0);break;case"BBBB":e=ct(0,it.Wide,kn.Format,!0);break;case"BBBBB":e=ct(0,it.Narrow,kn.Format,!0);break;case"h":e=Ot(3,1,-12);break;case"hh":e=Ot(3,2,-12);break;case"H":e=Ot(3,1);break;case"HH":e=Ot(3,2);break;case"m":e=Ot(4,1);break;case"mm":e=Ot(4,2);break;case"s":e=Ot(5,1);break;case"ss":e=Ot(5,2);break;case"S":e=Ot(6,1);break;case"SS":e=Ot(6,2);break;case"SSS":e=Ot(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Ap(0);break;case"ZZZZZ":e=Ap(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ap(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ap(2);break;default:return null}return jw[n]=e,e}function _N(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function iq(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function oq(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=_N(e,i);return iq(n,r*(o-i))}function sq(n){if(lN(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Mp(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(YW))return aq(r)}let e=new Date(n);if(!lN(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function aq(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,u),e}function lN(n){return n instanceof Date&&!isNaN(n.valueOf())}function Op(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Bw=/\s+/,uN=[],$e=(()=>{class n{_ngEl;_renderer;initialClasses=uN;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Bw):uN}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Bw):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Bw).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(Pe(pr),Pe(Vi))};static \u0275dir=ht({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var $w=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wn=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new $w(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),dN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);dN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(Pe(As),Pe(Aw),Pe(Lw))};static \u0275dir=ht({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function dN(n,e){n.context.$implicit=e.item}function cq(n,e){return new te(2100,!1)}var lq="mediumDate",uq=new W(""),dq=new W(""),Uo=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??lq,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return JW(t,s,o||this.locale,a)}catch(s){throw cq(n,s.message)}}static \u0275fac=function(r){return new(r||n)(Pe(Ip,16),Pe(uq,24),Pe(dq,24))};static \u0275pipe=Fx({name:"date",type:n,pure:!0})}return n})();var Hw="browser",hq="server";function lc(n){return n===Hw}function $i(n){return n===hq}var cc=class{};var Ou=class{},Lp=class{},Ns=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var qw=class{encodeKey(e){return wN(e)}encodeValue(e){return wN(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function pq(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var mq=/%(\d[a-f0-9])/gi,gq={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wN(n){return encodeURIComponent(n).replace(mq,(e,t)=>gq[t]??e)}function Fp(n){return`${n}`}var jo=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new qw,e.fromString){if(e.fromObject)throw new te(2805,!1);this.map=pq(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(Fp):[Fp(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Fp(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Fp(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var zw=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function vq(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function EN(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function IN(n){return typeof Blob<"u"&&n instanceof Blob}function TN(n){return typeof FormData<"u"&&n instanceof FormData}function yq(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var CN="Content-Type",SN="X-Request-URL",AN="text/plain",RN="application/json",_q=`${RN}, ${AN}, */*`,ku=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(vq(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ns,this.context??=new zw,!this.params)this.params=new jo,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||EN(this.body)||IN(this.body)||TN(this.body)||yq(this.body)?this.body:this.body instanceof jo?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||TN(this.body)?null:IN(this.body)?this.body.type||null:EN(this.body)?null:typeof this.body=="string"?AN:this.body instanceof jo?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?RN:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,d=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),d)),new n(t,r,s,{params:d,headers:u,context:f,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},uc=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(uc||{}),Fu=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Ns,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Gw=class n extends Fu{constructor(e={}){super(e)}type=uc.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Vp=class n extends Fu{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=uc.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Up=class extends Fu{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},wq=200,Eq=204;function Ww(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Iq=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof ku)o=t;else{let c;i.headers instanceof Ns?c=i.headers:c=new Ns(i.headers);let u;i.params&&(i.params instanceof jo?u=i.params:u=new jo({fromObject:i.params})),o=new ku(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=ce(o).pipe(Ai(c=>this.handler.handle(c)));if(t instanceof ku||i.observe==="events")return s;let a=s.pipe(rn(c=>c instanceof Vp));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ee(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(ee(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(ee(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(ee(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new jo().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Ww(i,r))}post(t,r,i={}){return this.request("POST",t,Ww(i,r))}put(t,r,i={}){return this.request("PUT",t,Ww(i,r))}static \u0275fac=function(r){return new(r||n)(ie(Ou))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var Tq=new W("");function Cq(n,e){return e(n)}function bq(n,e,t){return(r,i)=>on(t,()=>e(r,o=>n(o,i)))}var xN=new W(""),Dq=new W(""),Sq=new W("",{providedIn:"root",factory:()=>!0});var bN=(()=>{class n extends Ou{backend;injector;chain=null;pendingTasks=D(oi);contributeToStability=D(Sq);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(xN),...this.injector.get(Dq,[])]));this.chain=r.reduceRight((i,o)=>bq(i,o,this.injector),Cq)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(fs(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ie(Lp),ie(mn))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();var Aq=/^\)\]\}',?\n/,Rq=RegExp(`^${SN}:`,"m");function xq(n){return"responseURL"in n&&n.responseURL?n.responseURL:Rq.test(n.getAllResponseHeaders())?n.getResponseHeader(SN):null}var DN=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new te(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?st(r.\u0275loadImpl()):ce(null)).pipe(fn(()=>new fe(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((x,A)=>s.setRequestHeader(x,A.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept",_q),!t.headers.has(CN)){let x=t.detectContentTypeHeader();x!==null&&s.setRequestHeader(CN,x)}if(t.responseType){let x=t.responseType.toLowerCase();s.responseType=x!=="json"?x:"text"}let a=t.serializeBody(),c=null,u=()=>{if(c!==null)return c;let x=s.statusText||"OK",A=new Ns(s.getAllResponseHeaders()),F=xq(s)||t.url;return c=new Gw({headers:A,status:s.status,statusText:x,url:F}),c},d=()=>{let{headers:x,status:A,statusText:F,url:q}=u(),z=null;A!==Eq&&(z=typeof s.response>"u"?s.responseText:s.response),A===0&&(A=z?wq:0);let re=A>=200&&A<300;if(t.responseType==="json"&&typeof z=="string"){let tt=z;z=z.replace(Aq,"");try{z=z!==""?JSON.parse(z):null}catch(de){z=tt,re&&(re=!1,z={error:de,text:z})}}re?(o.next(new Vp({body:z,headers:x,status:A,statusText:F,url:q||void 0})),o.complete()):o.error(new Up({error:z,headers:x,status:A,statusText:F,url:q||void 0}))},f=x=>{let{url:A}=u(),F=new Up({error:x,status:s.status||0,statusText:s.statusText||"Unknown Error",url:A||void 0});o.error(F)},m=!1,v=x=>{m||(o.next(u()),m=!0);let A={type:uc.DownloadProgress,loaded:x.loaded};x.lengthComputable&&(A.total=x.total),t.responseType==="text"&&s.responseText&&(A.partialText=s.responseText),o.next(A)},I=x=>{let A={type:uc.UploadProgress,loaded:x.loaded};x.lengthComputable&&(A.total=x.total),o.next(A)};return s.addEventListener("load",d),s.addEventListener("error",f),s.addEventListener("timeout",f),s.addEventListener("abort",f),t.reportProgress&&(s.addEventListener("progress",v),a!==null&&s.upload&&s.upload.addEventListener("progress",I)),s.send(a),o.next({type:uc.Sent}),()=>{s.removeEventListener("error",f),s.removeEventListener("abort",f),s.removeEventListener("load",d),s.removeEventListener("timeout",f),t.reportProgress&&(s.removeEventListener("progress",v),a!==null&&s.upload&&s.upload.removeEventListener("progress",I)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ie(cc))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),NN=new W(""),Nq="XSRF-TOKEN",Mq=new W("",{providedIn:"root",factory:()=>Nq}),Pq="X-XSRF-TOKEN",kq=new W("",{providedIn:"root",factory:()=>Pq}),jp=class{},Oq=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Op(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ie(_n),ie(St),ie(Mq))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function Fq(n,e){let t=n.url.toLowerCase();if(!D(NN)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=D(jp).getToken(),i=D(kq);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function MN(...n){let e=[Iq,DN,bN,{provide:Ou,useExisting:bN},{provide:Lp,useFactory:()=>D(Tq,{optional:!0})??D(DN)},{provide:xN,useValue:Fq,multi:!0},{provide:NN,useValue:!0},{provide:jp,useClass:Oq}];for(let t of n)e.push(...t.\u0275providers);return at(e)}var Yw=class extends Np{supportsDOMEvents=!0},Qw=class n extends Yw{static makeCurrent(){fN(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Lq();return t==null?null:Vq(t)}resetBaseElement(){Lu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Op(document.cookie,e)}},Lu=null;function Lq(){return Lu=Lu||document.querySelector("base"),Lu?Lu.getAttribute("href"):null}function Vq(n){return new URL(n,document.baseURI).pathname}var Uq=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Jw=new W(""),VN=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new te(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ie(Jw),ie(me))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),$p=class{_doc;constructor(e){this._doc=e}manager},Bp="ng-app-id";function PN(n){for(let e of n)e.remove()}function kN(n,e){let t=e.createElement("style");return t.textContent=n,t}function jq(n,e,t,r){let i=n.head?.querySelectorAll(`style[${Bp}="${e}"],link[${Bp}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Bp),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Xw(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var UN=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=$i(o),jq(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,kN);r?.forEach(i=>this.addUsage(i,this.external,Xw))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(PN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])PN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,kN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Xw(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(Bp,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ie(_n),ie(dw),ie(fw,8),ie(St))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Kw={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},eE=/%COMP%/g,jN="%COMP%",Bq=`_nghost-${jN}`,$q=`_ngcontent-${jN}`,Hq=!0,Wq=new W("",{providedIn:"root",factory:()=>Hq});function qq(n){return $q.replace(eE,n)}function zq(n){return Bq.replace(eE,n)}function BN(n,e){return e.map(t=>t.replace(eE,n))}var ON=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,d=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=d,this.platformIsServer=$i(a),this.defaultRenderer=new Vu(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ri.ShadowDom&&(r=ge(B({},r),{encapsulation:ri.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Hp?i.applyToHost(t):i instanceof Uu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case ri.Emulated:o=new Hp(c,u,r,this.appId,d,s,a,f,this.tracingService);break;case ri.ShadowDom:return new Zw(c,u,t,r,s,a,this.nonce,f,this.tracingService);default:o=new Uu(c,u,r,d,s,a,f,this.tracingService);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ie(VN),ie(UN),ie(dw),ie(Wq),ie(_n),ie(St),ie(me),ie(fw),ie(hp,8))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),Vu=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Kw[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(FN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(FN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new te(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Kw[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Kw[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Ni.DashCase|Ni.Important)?e.style.setProperty(t,r,i&Ni.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Ni.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Bi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function FN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Zw=class extends Vu{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=BN(i.id,i.styles);for(let m of d){let v=document.createElement("style");a&&v.setAttribute("nonce",a),v.textContent=m,this.shadowRoot.appendChild(v)}let f=i.getExternalStyles?.();if(f)for(let m of f){let v=Xw(m,o);a&&v.setAttribute("nonce",a),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Uu=class extends Vu{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?BN(u,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Hp=class extends Uu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let d=i+"-"+r.id;super(e,t,r,o,s,a,c,u,d),this.contentAttr=qq(d),this.hostAttr=zq(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},Gq=(()=>{class n extends $p{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ie(_n))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),LN=["alt","control","meta","shift"],Kq={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Yq={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Qq=(()=>{class n extends $p{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bi().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),LN.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=Kq[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),LN.forEach(s=>{if(s!==i){let a=Yq[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ie(_n))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})();function $N(n,e){return rN(B({rootComponent:n},Jq(e)))}function Jq(n){return{appProviders:[...nz,...n?.providers??[]],platformProviders:tz}}function Xq(){Qw.makeCurrent()}function Zq(){return new xi}function ez(){return rx(document),document}var tz=[{provide:St,useValue:Hw},{provide:hw,useValue:Xq,multi:!0},{provide:_n,useFactory:ez,deps:[]}];var nz=[{provide:ep,useValue:"root"},{provide:xi,useFactory:Zq,deps:[]},{provide:Jw,useClass:Gq,multi:!0,deps:[_n,me,St]},{provide:Jw,useClass:Qq,multi:!0,deps:[_n]},ON,UN,VN,{provide:nc,useExisting:ON},{provide:cc,useClass:Uq,deps:[]},[]];var Wp=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ie(_n))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var De="primary",nd=Symbol("RouteTitle"),oE=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function gc(n){return new oE(n)}function rz(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function iz(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ci(n[t],e[t]))return!1;return!0}function ci(n,e){let t=n?sE(n):void 0,r=e?sE(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!JN(n[i],e[i]))return!1;return!0}function sE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function JN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function XN(n){return n.length>0?n[n.length-1]:null}function Bo(n){return ky(n)?n:Rs(n)?st(Promise.resolve(n)):ce(n)}var oz={exact:eM,subset:tM},ZN={exact:sz,subset:az,ignored:()=>!0};function WN(n,e,t){return oz[t.paths](n.root,e.root,t.matrixParams)&&ZN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function sz(n,e){return ci(n,e)}function eM(n,e,t){if(!Ps(n.segments,e.segments)||!Gp(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!eM(n.children[r],e.children[r],t))return!1;return!0}function az(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>JN(n[t],e[t]))}function tM(n,e,t){return nM(n,e,e.segments,t)}function nM(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ps(i,t)||e.hasChildren()||!Gp(i,t,r))}else if(n.segments.length===t.length){if(!Ps(n.segments,t)||!Gp(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!tM(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ps(n.segments,i)||!Gp(n.segments,i,r)||!n.children[De]?!1:nM(n.children[De],e,o,r)}}function Gp(n,e,t){return e.every((r,i)=>ZN[t](n[i].parameters,r.parameters))}var Wi=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=gc(this.queryParams),this._queryParamMap}toString(){return uz.serialize(this)}},Xe=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kp(this)}},Ms=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=gc(this.parameters),this._parameterMap}toString(){return iM(this)}};function cz(n,e){return Ps(n,e)&&n.every((t,r)=>ci(t.parameters,e[r].parameters))}function Ps(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function lz(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===De&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==De&&(t=t.concat(e(i,r)))}),t}var NE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>new qu,providedIn:"root"})}return n})(),qu=class{parse(e){let t=new cE(e);return new Wi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ju(e.root,!0)}`,r=fz(e.queryParams),i=typeof e.fragment=="string"?`#${dz(e.fragment)}`:"";return`${t}${r}${i}`}},uz=new qu;function Kp(n){return n.segments.map(e=>iM(e)).join("/")}function ju(n,e){if(!n.hasChildren())return Kp(n);if(e){let t=n.children[De]?ju(n.children[De],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==De&&r.push(`${i}:${ju(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=lz(n,(r,i)=>i===De?[ju(n.children[De],!1)]:[`${i}:${ju(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[De]!=null?`${Kp(n)}/${t[0]}`:`${Kp(n)}/(${t.join("//")})`}}function rM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qp(n){return rM(n).replace(/%3B/gi,";")}function dz(n){return encodeURI(n)}function aE(n){return rM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yp(n){return decodeURIComponent(n)}function qN(n){return Yp(n.replace(/\+/g,"%20"))}function iM(n){return`${aE(n.path)}${hz(n.parameters)}`}function hz(n){return Object.entries(n).map(([e,t])=>`;${aE(e)}=${aE(t)}`).join("")}function fz(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${qp(t)}=${qp(i)}`).join("&"):`${qp(t)}=${qp(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var pz=/^[^\/()?;#]+/;function tE(n){let e=n.match(pz);return e?e[0]:""}var mz=/^[^\/()?;=#]+/;function gz(n){let e=n.match(mz);return e?e[0]:""}var vz=/^[^=?&#]+/;function yz(n){let e=n.match(vz);return e?e[0]:""}var _z=/^[^&#]+/;function wz(n){let e=n.match(_z);return e?e[0]:""}var cE=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xe([],{}):new Xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[De]=new Xe(e,t)),r}parseSegment(){let e=tE(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new te(4009,!1);return this.capture(e),new Ms(Yp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=gz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=tE(this.remaining);i&&(r=i,this.capture(r))}e[Yp(t)]=Yp(r)}parseQueryParam(e){let t=yz(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=wz(this.remaining);s&&(r=s,this.capture(r))}let i=qN(t),o=qN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=tE(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new te(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=De);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[De]:new Xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new te(4011,!1)}};function oM(n){return n.segments.length>0?new Xe([],{[De]:n}):n}function sM(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=sM(i);if(r===De&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new Xe(n.segments,e);return Ez(t)}function Ez(n){if(n.numberOfChildren===1&&n.children[De]){let e=n.children[De];return new Xe(n.segments.concat(e.segments),e.children)}return n}function zu(n){return n instanceof Wi}function Iz(n,e,t=null,r=null){let i=aM(n);return cM(i,e,t,r)}function aM(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new Xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=oM(r);return e??i}function cM(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return nE(i,i,i,t,r);let o=Tz(e);if(o.toRoot())return nE(i,i,new Xe([],{}),t,r);let s=Cz(o,i,n),a=s.processChildren?$u(s.segmentGroup,s.index,o.commands):uM(s.segmentGroup,s.index,o.commands);return nE(i,s.segmentGroup,a,t,r)}function Qp(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Gu(n){return typeof n=="object"&&n!=null&&n.outlets}function nE(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let s;n===e?s=t:s=lM(n,e,t);let a=oM(sM(s));return new Wi(a,o,i)}function lM(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=lM(o,e,t)}),new Xe(n.segments,r)}var Jp=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qp(r[0]))throw new te(4003,!1);let i=r.find(Gu);if(i&&i!==XN(r))throw new te(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Tz(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Jp(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Jp(t,e,r)}var fc=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function Cz(n,e,t){if(n.isAbsolute)return new fc(e,!0,0);if(!t)return new fc(e,!1,NaN);if(t.parent===null)return new fc(t,!0,0);let r=Qp(n.commands[0])?0:1,i=t.segments.length-1+r;return bz(t,i,n.numberOfDoubleDots)}function bz(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new te(4005,!1);i=r.segments.length}return new fc(r,!1,i-o)}function Dz(n){return Gu(n[0])?n[0].outlets:{[De]:n}}function uM(n,e,t){if(n??=new Xe([],{}),n.segments.length===0&&n.hasChildren())return $u(n,e,t);let r=Sz(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new Xe(n.segments.slice(0,r.pathIndex),{});return o.children[De]=new Xe(n.segments.slice(r.pathIndex),n.children),$u(o,0,i)}else return r.match&&i.length===0?new Xe(n.segments,{}):r.match&&!n.hasChildren()?lE(n,e,t):r.match?$u(n,0,i):lE(n,e,t)}function $u(n,e,t){if(t.length===0)return new Xe(n.segments,{});{let r=Dz(t),i={};if(Object.keys(r).some(o=>o!==De)&&n.children[De]&&n.numberOfChildren===1&&n.children[De].segments.length===0){let o=$u(n.children[De],e,t);return new Xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=uM(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Xe(n.segments,i)}}function Sz(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Gu(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!GN(c,u,s))return o;r+=2}else{if(!GN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function lE(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Gu(o)){let c=Az(o.outlets);return new Xe(r,c)}if(i===0&&Qp(t[0])){let c=n.segments[e];r.push(new Ms(c.path,zN(t[0]))),i++;continue}let s=Gu(o)?o.outlets[De]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&Qp(a)?(r.push(new Ms(s,zN(a))),i+=2):(r.push(new Ms(s,{})),i++)}return new Xe(r,{})}function Az(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=lE(new Xe([],{}),0,r))}),e}function zN(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function GN(n,e,t){return n==t.path&&ci(e,t.parameters)}var Hu="imperative",an=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(an||{}),yr=class{id;url;constructor(e,t){this.id=e,this.url=t}},Ku=class extends yr{type=an.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ks=class extends yr{urlAfterRedirects;type=an.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},rr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(rr||{}),uE=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(uE||{}),Hi=class extends yr{reason;code;type=an.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Os=class extends yr{reason;code;type=an.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Yu=class extends yr{error;target;type=an.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xp=class extends yr{urlAfterRedirects;state;type=an.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dE=class extends yr{urlAfterRedirects;state;type=an.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hE=class extends yr{urlAfterRedirects;state;shouldActivate;type=an.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},fE=class extends yr{urlAfterRedirects;state;type=an.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pE=class extends yr{urlAfterRedirects;state;type=an.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mE=class{route;type=an.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},gE=class{route;type=an.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},vE=class{snapshot;type=an.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yE=class{snapshot;type=an.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_E=class{snapshot;type=an.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qu=class{snapshot;type=an.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ju=class{},vc=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Rz(n,e){return n.providers&&!n._injector&&(n._injector=Rw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Ur(n){return n.outlet||De}function xz(n,e){let t=n.filter(r=>Ur(r)===e);return t.push(...n.filter(r=>Ur(r)!==e)),t}function rd(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var wE=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return rd(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new om(this.rootInjector)}},om=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new wE(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ie(mn))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Zp=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=EE(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=EE(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=IE(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return IE(e,this._root).map(t=>t.value)}};function EE(n,e){if(n===e.value)return e;for(let t of e.children){let r=EE(n,t);if(r)return r}return null}function IE(n,e){if(n===e.value)return[e];for(let t of e.children){let r=IE(n,t);if(r.length)return r.unshift(e),r}return[]}var nr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function hc(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var em=class extends Zp{snapshot;constructor(e,t){super(e),this.snapshot=t,ME(this,e)}toString(){return this.snapshot.toString()}};function dM(n){let e=Nz(n),t=new nn([new Ms("",{})]),r=new nn({}),i=new nn({}),o=new nn({}),s=new nn(""),a=new yc(t,r,o,s,i,De,n,e.root);return a.snapshot=e.root,new em(new nr(a,[]),e)}function Nz(n){let e={},t={},r={},i="",o=new pc([],e,r,i,t,De,n,null,{});return new nm("",new nr(o,[]))}var yc=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ee(u=>u[nd]))??ce(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>gc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>gc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function tm(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&fM(i)&&(r.resolve[nd]=i.title),r}var pc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[nd]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=gc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=gc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},nm=class extends Zp{url;constructor(e,t){super(t),this.url=e,ME(this,t)}toString(){return hM(this._root)}};function ME(n,e){e.value._routerState=n,e.children.forEach(t=>ME(n,t))}function hM(n){let e=n.children.length>0?` { ${n.children.map(hM).join(", ")} } `:"";return`${n.value}${e}`}function rE(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ci(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),ci(e.params,t.params)||n.paramsSubject.next(t.params),iz(e.url,t.url)||n.urlSubject.next(t.url),ci(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function TE(n,e){let t=ci(n.params,e.params)&&cz(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||TE(n.parent,e.parent))}function fM(n){return typeof n.title=="string"||n.title===null}var Mz=new W(""),PE=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=De;activateEvents=new Qt;deactivateEvents=new Qt;attachEvents=new Qt;detachEvents=new Qt;routerOutletData=YR(void 0);parentContexts=D(om);location=D(As);changeDetector=D(Lo);inputBinder=D(kE,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new te(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new te(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new te(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new te(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new CE(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[ko]})}return n})(),CE=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===yc?this.route:e===om?this.childContexts:e===Mz?this.outletData:this.parent.get(e,t)}},kE=new W("");function Pz(n,e,t){let r=Xu(n,e._root,t?t._root:void 0);return new em(r,e)}function Xu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=kz(n,e,t);return new nr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Xu(n,a)),s}}let r=Oz(e.value),i=e.children.map(o=>Xu(n,o));return new nr(r,i)}}function kz(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Xu(n,r,i);return Xu(n,r)})}function Oz(n){return new yc(new nn(n.url),new nn(n.params),new nn(n.queryParams),new nn(n.fragment),new nn(n.data),n.outlet,n.component,n)}var Zu=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},pM="ngNavigationCancelingError";function rm(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=zu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mM(!1,rr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function mM(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[pM]=!0,t.cancellationCode=e,t}function Fz(n){return gM(n)&&zu(n.url)}function gM(n){return!!n&&n[pM]}var Lz=(n,e,t,r)=>ee(i=>(new bE(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),bE=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),rE(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=hc(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=hc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=hc(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=hc(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Qu(o.value.snapshot))}),e.children.length&&this.forwardEvent(new yE(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(rE(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),rE(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},im=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},mc=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Vz(n,e,t){let r=n._root,i=e?e._root:null;return Bu(r,i,t,[r.value])}function Uz(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function wc(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!KA(n)?n:e.get(n):r}function Bu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=hc(e);return n.children.forEach(s=>{jz(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Wu(a,t.getContext(s),i)),i}function jz(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Bz(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new im(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Bu(n,e,a?a.children:null,r,i):Bu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new mc(a.outlet.component,s))}else s&&Wu(e,a,i),i.canActivateChecks.push(new im(r)),o.component?Bu(n,null,a?a.children:null,r,i):Bu(n,null,t,r,i);return i}function Bz(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ps(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ps(n.url,e.url)||!ci(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!TE(n,e)||!ci(n.queryParams,e.queryParams);case"paramsChange":default:return!TE(n,e)}}function Wu(n,e,t){let r=hc(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Wu(s,e.children.getContext(o),t):Wu(s,null,t):Wu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new mc(e.outlet.component,i)):t.canDeactivateChecks.push(new mc(null,i)):t.canDeactivateChecks.push(new mc(null,i))}function id(n){return typeof n=="function"}function $z(n){return typeof n=="boolean"}function Hz(n){return n&&id(n.canLoad)}function Wz(n){return n&&id(n.canActivate)}function qz(n){return n&&id(n.canActivateChild)}function zz(n){return n&&id(n.canDeactivate)}function Gz(n){return n&&id(n.canMatch)}function vM(n){return n instanceof Si||n?.name==="EmptyError"}var zp=Symbol("INITIAL_VALUE");function _c(){return fn(n=>Oe(n.map(e=>e.pipe(ei(1),$a(zp)))).pipe(ee(e=>{for(let t of e)if(t!==!0){if(t===zp)return zp;if(t===!1||Kz(t))return t}return!0}),rn(e=>e!==zp),ei(1)))}function Kz(n){return zu(n)||n instanceof Zu}function Yz(n,e){return Nt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?ce(ge(B({},t),{guardsResult:!0})):Qz(s,r,i,n).pipe(Nt(a=>a&&$z(a)?Jz(r,o,n,e):ce(a)),ee(a=>ge(B({},t),{guardsResult:a})))})}function Qz(n,e,t,r){return st(n).pipe(Nt(i=>n4(i.component,i.route,t,e,r)),Ri(i=>i!==!0,!0))}function Jz(n,e,t,r){return st(e).pipe(Ai(i=>ja(Zz(i.route.parent,r),Xz(i.route,r),t4(n,i.path,t),e4(n,i.route,t))),Ri(i=>i!==!0,!0))}function Xz(n,e){return n!==null&&e&&e(new _E(n)),ce(!0)}function Zz(n,e){return n!==null&&e&&e(new vE(n)),ce(!0)}function e4(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ce(!0);let i=r.map(o=>df(()=>{let s=rd(e)??t,a=wc(o,s),c=Wz(a)?a.canActivate(e,n):on(s,()=>a(e,n));return Bo(c).pipe(Ri())}));return ce(i).pipe(_c())}function t4(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Uz(s)).filter(s=>s!==null).map(s=>df(()=>{let a=s.guards.map(c=>{let u=rd(s.node)??t,d=wc(c,u),f=qz(d)?d.canActivateChild(r,n):on(u,()=>d(r,n));return Bo(f).pipe(Ri())});return ce(a).pipe(_c())}));return ce(o).pipe(_c())}function n4(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ce(!0);let s=o.map(a=>{let c=rd(e)??i,u=wc(a,c),d=zz(u)?u.canDeactivate(n,e,t,r):on(c,()=>u(n,e,t,r));return Bo(d).pipe(Ri())});return ce(s).pipe(_c())}function r4(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ce(!0);let o=i.map(s=>{let a=wc(s,n),c=Hz(a)?a.canLoad(e,t):on(n,()=>a(e,t));return Bo(c)});return ce(o).pipe(_c(),yM(r))}function yM(n){return Wh(Yt(e=>{if(typeof e!="boolean")throw rm(n,e)}),ee(e=>e===!0))}function i4(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ce(!0);let o=i.map(s=>{let a=wc(s,n),c=Gz(a)?a.canMatch(e,t):on(n,()=>a(e,t));return Bo(c)});return ce(o).pipe(_c(),yM(r))}var ed=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},td=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function dc(n){return Ua(new ed(n))}function o4(n){return Ua(new te(4e3,!1))}function s4(n){return Ua(mM(!1,rr.GuardRejected))}var DE=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ce(r);if(i.numberOfChildren>1||!i.children[De])return o4(`${e.redirectTo}`);i=i.children[De]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,params:v,data:I,title:x}=i,A=on(o,()=>a({params:v,data:I,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,title:x}));if(A instanceof Wi)throw new td(A);t=A}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new td(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Wi(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new Xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new te(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},SE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function a4(n,e,t,r,i){let o=_M(n,e,t);return o.matched?(r=Rz(e,r),i4(r,e,t,i).pipe(ee(s=>s===!0?o:B({},SE)))):ce(o)}function _M(n,e,t){if(e.path==="**")return c4(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},SE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||rz)(t,n,e);if(!i)return B({},SE);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?B(B({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function c4(n){return{matched:!0,parameters:n.length>0?XN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function KN(n,e,t,r){return t.length>0&&d4(n,t,r)?{segmentGroup:new Xe(e,u4(r,new Xe(t,n.children))),slicedSegments:[]}:t.length===0&&h4(n,t,r)?{segmentGroup:new Xe(n.segments,l4(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Xe(n.segments,n.children),slicedSegments:t}}function l4(n,e,t,r){let i={};for(let o of t)if(sm(n,e,o)&&!r[Ur(o)]){let s=new Xe([],{});i[Ur(o)]=s}return B(B({},r),i)}function u4(n,e){let t={};t[De]=e;for(let r of n)if(r.path===""&&Ur(r)!==De){let i=new Xe([],{});t[Ur(r)]=i}return t}function d4(n,e,t){return t.some(r=>sm(n,e,r)&&Ur(r)!==De)}function h4(n,e,t){return t.some(r=>sm(n,e,r))}function sm(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function f4(n,e,t){return e.length===0&&!n.children[t]}var AE=class{};function p4(n,e,t,r,i,o,s="emptyOnly"){return new RE(n,e,t,r,i,s,o).recognize()}var m4=31,RE=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new DE(this.urlSerializer,this.urlTree)}noMatchError(e){return new te(4002,`'${e.segmentGroup}'`)}recognize(){let e=KN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:t,rootSnapshot:r})=>{let i=new nr(r,t),o=new nm("",i),s=Iz(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new pc([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),De,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,De,t).pipe(ee(r=>({children:r,rootSnapshot:t})),Io(r=>{if(r instanceof td)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ed?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(ee(s=>s instanceof nr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return st(o).pipe(Ai(s=>{let a=r.children[s],c=xz(t,s);return this.processSegmentGroup(e,c,a,s,i)}),mf((s,a)=>(s.push(...a),s)),To(null),Uy(),Nt(s=>{if(s===null)return dc(r);let a=wM(s);return g4(a),ce(a)}))}processSegment(e,t,r,i,o,s,a){return st(t).pipe(Ai(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Io(u=>{if(u instanceof ed)return ce(null);throw u}))),Ri(c=>!!c),Io(c=>{if(vM(c))return f4(r,i,o)?ce(new AE):dc(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Ur(r)!==s&&(s===De||!sm(i,o,r))?dc(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):dc(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=_M(t,i,o);if(!c)return dc(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>m4&&(this.allowRedirects=!1));let v=new pc(o,u,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,YN(i),Ur(i),i.component??i._loadedComponent??null,i,QN(i)),I=tm(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(I.params),v.data=Object.freeze(I.data);let x=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,v,e);return this.applyRedirects.lineralizeSegments(i,x).pipe(Nt(A=>this.processSegment(e,r,t,A.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=a4(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(fn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(fn(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:v}=c,I=new pc(m,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,YN(r),Ur(r),r.component??r._loadedComponent??null,r,QN(r)),x=tm(I,s,this.paramsInheritanceStrategy);I.params=Object.freeze(x.params),I.data=Object.freeze(x.data);let{segmentGroup:A,slicedSegments:F}=KN(t,m,v,u);if(F.length===0&&A.hasChildren())return this.processChildren(d,u,A,I).pipe(ee(z=>new nr(I,z)));if(u.length===0&&F.length===0)return ce(new nr(I,[]));let q=Ur(r)===o;return this.processSegment(d,u,A,F,q?De:o,!0,I).pipe(ee(z=>new nr(I,z instanceof nr?[z]:[])))}))):dc(t)))}getChildConfig(e,t,r){return t.children?ce({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ce({routes:t._loadedRoutes,injector:t._loadedInjector}):r4(e,t,r,this.urlSerializer).pipe(Nt(i=>i?this.configLoader.loadChildren(e,t).pipe(Yt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):s4(t))):ce({routes:[],injector:e})}};function g4(n){n.sort((e,t)=>e.value.outlet===De?-1:t.value.outlet===De?1:e.value.outlet.localeCompare(t.value.outlet))}function v4(n){let e=n.value.routeConfig;return e&&e.path===""}function wM(n){let e=[],t=new Set;for(let r of n){if(!v4(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=wM(r.children);e.push(new nr(r.value,i))}return e.filter(r=>!t.has(r))}function YN(n){return n.data||{}}function QN(n){return n.resolve||{}}function y4(n,e,t,r,i,o){return Nt(s=>p4(n,e,t,r,s.extractedUrl,i,o).pipe(ee(({state:a,tree:c})=>ge(B({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function _4(n,e){return Nt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ce(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of EM(c))s.add(u);let a=0;return st(s).pipe(Ai(c=>o.has(c)?w4(c,r,n,e):(c.data=tm(c,c.parent,n).resolve,ce(void 0))),Yt(()=>a++),Ba(1),Nt(c=>a===s.size?ce(t):Xn))})}function EM(n){let e=n.children.map(t=>EM(t)).flat();return[n,...e]}function w4(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!fM(i)&&(o[nd]=i.title),E4(o,n,e,r).pipe(ee(s=>(n._resolvedData=s,n.data=tm(n,n.parent,t).resolve,null)))}function E4(n,e,t,r){let i=sE(n);if(i.length===0)return ce({});let o={};return st(i).pipe(Nt(s=>I4(n[s],e,t,r).pipe(Ri(),Yt(a=>{if(a instanceof Zu)throw rm(new qu,a);o[s]=a}))),Ba(1),ee(()=>o),Io(s=>vM(s)?Xn:Ua(s)))}function I4(n,e,t,r){let i=rd(e)??r,o=wc(n,i),s=o.resolve?o.resolve(e,t):on(i,()=>o(e,t));return Bo(s)}function iE(n){return fn(e=>{let t=n(e);return t?st(t).pipe(ee(()=>e)):ce(e)})}var IM=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===De);return r}getResolvedTitleForRoute(t){return t.data[nd]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>D(T4),providedIn:"root"})}return n})(),T4=(()=>{class n extends IM{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ie(Wp))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),OE=new W("",{providedIn:"root",factory:()=>({})}),FE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Ce({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&le(0,"router-outlet")},dependencies:[PE],encapsulation:2})}return n})();function LE(n){let e=n.children&&n.children.map(LE),t=e?ge(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==De&&(t.component=FE),t}var VE=new W(""),C4=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=D(Ow);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ce(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Bo(t.loadComponent()).pipe(ee(TM),Yt(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),fs(()=>{this.componentLoaders.delete(t)})),i=new ka(r,()=>new ut).pipe(Pa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ce({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=b4(r,this.compiler,t,this.onLoadEndListener).pipe(fs(()=>{this.childrenLoaders.delete(r)})),s=new ka(o,()=>new ut).pipe(Pa());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b4(n,e,t,r){return Bo(n.loadChildren()).pipe(ee(TM),Nt(i=>i instanceof Cu||Array.isArray(i)?ce(i):st(e.compileModuleAsync(i))),ee(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(VE,[],{optional:!0,self:!0}).flat()),{routes:s.map(LE),injector:o}}))}function D4(n){return n&&typeof n=="object"&&"default"in n}function TM(n){return D4(n)?n.default:n}var UE=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>D(S4),providedIn:"root"})}return n})(),S4=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A4=new W("");var R4=new W(""),x4=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new ut;transitionAbortSubject=new ut;configLoader=D(C4);environmentInjector=D(mn);urlSerializer=D(NE);rootContexts=D(om);location=D(Pu);inputBindingEnabled=D(kE,{optional:!0})!==null;titleStrategy=D(IM);options=D(OE,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=D(UE);createViewTransition=D(A4,{optional:!0});navigationErrorHandler=D(R4,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ce(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new mE(i)),r=i=>this.events.next(new gE(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ge(B(B({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new nn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Hu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rn(o=>o.id!==0),ee(o=>ge(B({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),fn(o=>{let s=!1,a=!1;return ce(o).pipe(fn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",rr.SupersededByNewNavigation),Xn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ge(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new Os(c.id,this.urlSerializer.serialize(c.rawUrl),f,uE.IgnoredSameUrlNavigation)),c.resolve(!1),Xn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ce(c).pipe(fn(f=>{let m=this.transitions?.getValue();return this.events.next(new Ku(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?Xn:Promise.resolve(f)}),y4(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Yt(f=>{o.targetSnapshot=f.targetSnapshot,o.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ge(B({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new Xp(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:m,source:v,restoredState:I,extras:x}=c,A=new Ku(f,this.urlSerializer.serialize(m),v,I);this.events.next(A);let F=dM(this.rootComponentType).snapshot;return this.currentTransition=o=ge(B({},c),{targetSnapshot:F,urlAfterRedirects:m,extras:ge(B({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ce(o)}else{let f="";return this.events.next(new Os(c.id,this.urlSerializer.serialize(c.extractedUrl),f,uE.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Xn}}),Yt(c=>{let u=new dE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ee(c=>(this.currentTransition=o=ge(B({},c),{guards:Vz(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Yz(this.environmentInjector,c=>this.events.next(c)),Yt(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw rm(this.urlSerializer,c.guardsResult);let u=new hE(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),rn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",rr.GuardRejected),!1)),iE(c=>{if(c.guards.canActivateChecks.length)return ce(c).pipe(Yt(u=>{let d=new fE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),fn(u=>{let d=!1;return ce(u).pipe(_4(this.paramsInheritanceStrategy,this.environmentInjector),Yt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",rr.NoDataFromResolver)}}))}),Yt(u=>{let d=new pE(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),iE(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Yt(m=>{d.component=m}),ee(()=>{})));for(let m of d.children)f.push(...u(m));return f};return Oe(u(c.targetSnapshot.root)).pipe(To(null),ei(1))}),iE(()=>this.afterPreactivation()),fn(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?st(d).pipe(ee(()=>o)):ce(o)}),ee(c=>{let u=Pz(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=ge(B({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),Yt(()=>{this.events.next(new Ju)}),Lz(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ei(1),Yt({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ks(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Kt(this.transitionAbortSubject.pipe(Yt(c=>{throw c}))),fs(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",rr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Io(c=>{if(a=!0,gM(c))this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Fz(c)?this.events.next(new vc(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Yu(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=on(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Zu){let{message:f,cancellationCode:m}=rm(this.urlSerializer,d);this.events.next(new Hi(o.id,this.urlSerializer.serialize(o.extractedUrl),f,m)),this.events.next(new vc(d.redirectTo,d.navigationBehaviorOptions))}else throw this.events.next(u),c}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return Xn}))}))}cancelNavigationTransition(t,r,i){let o=new Hi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function N4(n){return n!==Hu}var M4=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>D(P4),providedIn:"root"})}return n})(),xE=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},P4=(()=>{class n extends xE{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),CM=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:()=>D(k4),providedIn:"root"})}return n})(),k4=(()=>{class n extends CM{location=D(Pu);urlSerializer=D(NE);options=D(OE,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=D(UE);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Wi;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=dM(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Ku)this.stateMemento=this.createStateMemento();else if(t instanceof Os)this.rawUrlTree=r.initialUrl;else if(t instanceof Xp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ju?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Hi&&(t.code===rr.GuardRejected||t.code===rr.NoDataFromResolver)?this.restoreHistory(r):t instanceof Yu?this.restoreHistory(r,!0):t instanceof ks&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Wi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=B(B({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=B(B({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function O4(n,e){n.events.pipe(rn(t=>t instanceof ks||t instanceof Hi||t instanceof Yu||t instanceof Os),ee(t=>t instanceof ks||t instanceof Os?0:(t instanceof Hi?t.code===rr.Redirect||t.code===rr.SupersededByNewNavigation:!1)?2:1),rn(t=>t!==2),ei(1)).subscribe(()=>{e()})}var F4={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},L4={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},am=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=D(Nw);stateManager=D(CM);options=D(OE,{optional:!0})||{};pendingTasks=D(oi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=D(x4);urlSerializer=D(NE);location=D(Pu);urlHandlingStrategy=D(UE);_events=new ut;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=D(M4);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=D(VE,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!D(kE,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new bt;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Hi&&r.code!==rr.Redirect&&r.code!==rr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ks)this.navigated=!0;else if(r instanceof vc){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||N4(i.source)},s);this.scheduleNavigation(a,Hu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}U4(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(LE),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=B(B({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=aM(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return cM(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=zu(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Hu,null,r)}navigate(t,r={skipLocationChange:!1}){return V4(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},F4):r===!1?i=B({},L4):i=r,zu(t))return WN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return WN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return O4(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function V4(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new te(4008,!1)}function U4(n){return!(n instanceof Ju)&&!(n instanceof vc)}var j4=new W("");function bM(n,...e){return at([{provide:VE,multi:!0,useValue:n},[],{provide:yc,useFactory:B4,deps:[am]},{provide:wp,multi:!0,useFactory:$4},e.map(t=>t.\u0275providers)])}function B4(n){return n.routerState.root}function $4(){let n=D(xe);return e=>{let t=n.get(Mi);if(e!==t.components[0])return;let r=n.get(am),i=n.get(H4);n.get(W4)===1&&r.initialNavigation(),n.get(q4,null,Re.Optional)?.setUpPreloading(),n.get(j4,null,Re.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var H4=new W("",{factory:()=>new ut}),W4=new W("",{providedIn:"root",factory:()=>1});var q4=new W("");var DM=[];var G4="firebase",K4="11.2.0";se(G4,K4,"app");function Qe(n){n||(ic(Qe),n=D(Li));let e=new fe(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Kt(e))}function oe(n,e){!e?.injector&&ic(oe);let t=e?.injector??D(xe),r=new cu(1),i=Lr(()=>{let o;try{o=n()}catch(s){gr(()=>r.error(s));return}gr(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(Li).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function jE(n){n===void 0&&(ic(jE),n=D(xe));let e=n.get(up);return t=>new fe(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var pt=new Pi("ANGULARFIRE2_VERSION");function qt(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ft=(n,e)=>{let t=e?[e]:kh(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ec=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Ec||{}),SM=Fw()&&typeof Zone<"u"?Ec.WARN:Ec.SILENT;var cm=class{zone;delegate;constructor(e,t=My){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},At=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=D(me);this.outsideAngular=t.runOutsideAngular(()=>new cm(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new cm(typeof Zone>"u"?void 0:Zone.current,Va))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),AM=!1;function Y4(n,e){!AM&&(SM>Ec.SILENT||Fw())&&(AM=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),SM>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function Q4(n){let e=D(me,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Fs(n){let e=D(me,{optional:!0});return e?e.run(()=>n()):n()}var J4=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),on(t,()=>Fs(()=>n.apply(void 0,r)))),Ye=(n,e,t)=>(t||=e?Ec.WARN:Ec.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=D(At),s=D(up),a=D(mn)}catch{return Y4(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Fs(()=>s.add())),i[u]=J4(i[u],r,a));let c=Q4(()=>n.apply(this,i));return e?c instanceof fe?c.pipe(Eo(o.outsideAngular),wo(o.insideAngular),jE(a)):c instanceof Promise?Fs(()=>new Promise((u,d)=>{s.run(()=>c).then(f=>on(a,()=>Fs(()=>u(f))),f=>on(a,()=>Fs(()=>d(f))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Fs(()=>c):c instanceof fe?c.pipe(Eo(o.outsideAngular),wo(o.insideAngular)):Fs(()=>c)});var yt=class{constructor(e){return e}},Pt=class{constructor(){return kh()}};function X4(n){return n&&n.length===1?n[0]:new yt(Ht())}var BE=new W("angularfire2._apps"),Z4={provide:yt,useFactory:X4,deps:[[new be,BE]]},eG={provide:Pt,deps:[[new be,BE]]};function tG(n){return(e,t)=>{let r=t.get(St);se("angularfire",pt.full,"core"),se("angularfire",pt.full,"app"),se("angular",Zx.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new yt(i)}}function RM(n,...e){return at([Z4,eG,{provide:BE,useFactory:tG(n),multi:!0,deps:[me,xe,At,...e]}])}var xM=Ye(wS,!0);var nG=new Map,rG={activated:!1,tokenObservers:[]},iG={initialized:!1,enabled:!1};function jr(n){return nG.get(n)||Object.assign({},rG)}function OM(){return iG}var oG="https://content-firebaseappcheck.googleapis.com/v1";var sG="exchangeDebugToken",NM={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Yle=24*60*60*1e3;var HE=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return y(this,null,function*(){this.stop();try{this.pending=new Ia,this.pending.promise.catch(t=>{}),yield aG(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Ia,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function aG(n){return new Promise(e=>{setTimeout(e,n)})}var cG={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},$o=new cr("appCheck","AppCheck",cG);function FM(n){if(!jr(n).activated)throw $o.create("use-before-activation",{appName:n.name})}function LM(r,i){return y(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let v=yield s.getHeartbeatsHeader();v&&(o["X-Firebase-Client"]=v)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(v){throw $o.create("fetch-network-error",{originalErrorMessage:v?.message})}if(c.status!==200)throw $o.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(v){throw $o.create("fetch-parse-error",{originalErrorMessage:v?.message})}let d=u.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw $o.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let f=Number(d[1])*1e3,m=Date.now();return{token:u.token,expireTimeMillis:m+f,issuedAtTimeMillis:m}})}function VM(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${oG}/projects/${t}/apps/${r}:${sG}?key=${i}`,body:{debug_token:e}}}var lG="firebase-app-check-database",uG=1,WE="firebase-app-check-store";var lm=null;function dG(){return lm||(lm=new Promise((n,e)=>{try{let t=indexedDB.open(lG,uG);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e($o.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(WE,{keyPath:"compositeKey"})}}}catch(t){e($o.create("storage-open",{originalErrorMessage:t?.message}))}}),lm)}function hG(n,e){return fG(pG(n),e)}function fG(n,e){return y(this,null,function*(){let r=(yield dG()).transaction(WE,"readwrite"),o=r.objectStore(WE).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a($o.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function pG(n){return`${n.options.appId}-${n.name}`}var qE=new lr("@firebase/app-check");function $E(n,e){return Xr()?hG(n,e).catch(t=>{qE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function UM(){return OM().enabled}function jM(){return y(this,null,function*(){let n=OM();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var mG={error:"UNKNOWN_ERROR"};function gG(n){return xh.encodeString(JSON.stringify(n),!1)}function zE(n,e=!1){return y(this,null,function*(){let t=n.app;FM(t);let r=jr(t),i=r.token,o;if(i&&!od(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(od(c)?i=c:yield $E(t,void 0))}if(!e&&i&&od(i))return{token:i.token};let s=!1;if(UM()){r.exchangeTokenPromise||(r.exchangeTokenPromise=LM(VM(t,yield jM()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield $E(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield jr(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?qE.warn(c.message):qE.error(c),o=c}let a;return i?o?od(i)?a={token:i.token,internalError:o}:a=PM(o):(a={token:i.token},r.token=i,yield $E(t,i)):a=PM(o),s&&wG(t,a),a})}function vG(n){return y(this,null,function*(){let e=n.app;FM(e);let{provider:t}=jr(e);if(UM()){let r=yield jM(),{token:i}=yield LM(VM(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function yG(n,e,t,r){let{app:i}=n,o=jr(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&od(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),MM(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>MM(n))}function BM(n,e){let t=jr(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function MM(n){let{app:e}=n,t=jr(e),r=t.tokenRefresher;r||(r=_G(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function _G(n){let{app:e}=n;return new HE(()=>y(this,null,function*(){let t=jr(e),r;if(t.token?r=yield zE(n,!0):r=yield zE(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=jr(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},NM.RETRIAL_MIN_WAIT,NM.RETRIAL_MAX_WAIT)}function wG(n,e){let t=jr(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function od(n){return n.expireTimeMillis-Date.now()>0}function PM(n){return{token:gG(mG),error:n}}var GE=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=jr(this.app);for(let t of e)BM(this.app,t.next);return Promise.resolve()}};function EG(n,e){return new GE(n,e)}function IG(n){return{getToken:e=>zE(n,e),getLimitedUseToken:()=>vG(n),addTokenListener:e=>yG(n,"INTERNAL",e),removeTokenListener:e=>BM(n.app,e)}}var TG="@firebase/app-check",CG="0.8.11";var bG="app-check",kM="app-check-internal";function DG(){Ct(new Tt(bG,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return EG(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(kM).initialize()})),Ct(new Tt(kM,n=>{let e=n.getProvider("app-check").getImmediate();return IG(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),se(TG,CG)}DG();var SG="app-check";var _r=class{constructor(){return Ft(SG)}};var AG=["localhost","0.0.0.0","127.0.0.1"],cue=typeof window<"u"&&AG.includes(window.location.hostname);function nP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rP=nP,iP=new cr("auth","Firebase",nP());var mm=new lr("@firebase/auth");function RG(n,...e){mm.logLevel<=tn.WARN&&mm.warn(`Auth (${Vn}): ${n}`,...e)}function dm(n,...e){mm.logLevel<=tn.ERROR&&mm.error(`Auth (${Vn}): ${n}`,...e)}function Wo(n,...e){throw fI(n,...e)}function Vs(n,...e){return fI(n,...e)}function oP(n,e,t){let r=Object.assign(Object.assign({},rP()),{[e]:t});return new cr("auth","Firebase",r).create(e,{appName:n.name})}function Ls(n){return oP(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return iP.create(n,...e)}function ve(n,e,...t){if(!n)throw fI(e,...t)}function qi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw dm(e),new Error(e)}function qo(n,e){n||qi(e)}function JE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xG(){return $M()==="http:"||$M()==="https:"}function $M(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function NG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xG()||Yl()||"connection"in navigator)?navigator.onLine:!0}function MG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Us=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,qo(t>e,"Short delay should be less than long delay!"),this.isMobile=Kl()||Nh()}get(){return NG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function pI(n,e){qo(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var gm=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var PG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var kG=new Us(3e4,6e4);function mI(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Tc(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){return sP(n,i,()=>y(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=as(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},u);return dS()||(v.referrerPolicy="no-referrer"),gm.fetch()(aP(n,n.config.apiHost,t,f),v)}))})}function sP(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},PG),e);try{let i=new XE(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw um(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw um(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw um(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw um(n,"user-disabled",s);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw oP(n,d,u);Wo(n,d)}}catch(i){if(i instanceof Jn)throw i;Wo(n,"network-request-failed",{message:String(i)})}})}function OG(o,s,a,c){return y(this,arguments,function*(n,e,t,r,i={}){let u=yield Tc(n,e,t,r,i);return"mfaPendingCredential"in u&&Wo(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function aP(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?pI(n.config,i):`${n.config.apiScheme}://${i}`}var XE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vs(this.auth,"network-request-failed")),kG.get())})}};function um(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Vs(n,e,r);return i.customData._tokenResponse=t,i}function FG(n,e){return y(this,null,function*(){return Tc(n,"POST","/v1/accounts:delete",e)})}function cP(n,e){return y(this,null,function*(){return Tc(n,"POST","/v1/accounts:lookup",e)})}function sd(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function gI(n,e=!1){return y(this,null,function*(){let t=Ue(n),r=yield t.getIdToken(e),i=vI(r);ve(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:sd(KE(i.auth_time)),issuedAtTime:sd(KE(i.iat)),expirationTime:sd(KE(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function KE(n){return Number(n)*1e3}function vI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return dm("JWT malformed, contained fewer than 3 sections"),null;try{let i=cS(t);return i?JSON.parse(i):(dm("Failed to decode base64 JWT payload"),null)}catch(i){return dm("Caught error parsing JWT payload as JSON",i?.toString()),null}}function HM(n){let e=vI(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function cd(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Jn&&LG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function LG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ZE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ld=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=sd(this.lastLoginAt),this.creationTime=sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function vm(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield cd(n,cP(t,{idToken:r}));ve(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?lP(o.providerUserInfo):[],a=VG(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,d=c?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ld(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function yI(n){return y(this,null,function*(){let e=Ue(n);yield vm(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function VG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lP(n){return n.map(e=>{var{providerId:t}=e,r=Py(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function UG(n,e){return y(this,null,function*(){let t=yield sP(n,{},()=>y(this,null,function*(){let r=as({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=aP(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",gm.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function jG(n,e){return y(this,null,function*(){return Tc(n,"POST","/v2/accounts:revokeToken",mI(n,e))})}var ad=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HM(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");let t=HM(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield UG(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(ve(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(ve(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(ve(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return qi("not implemented")}};function Ho(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ic=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Py(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ZE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ld(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield cd(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return gI(this,e)}reload(){return yI(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield vm(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Di(this.auth.app))return Promise.reject(Ls(this.auth));let e=yield this.getIdToken();return yield cd(this,FG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,I=(s=t.photoURL)!==null&&s!==void 0?s:void 0,x=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(u=t.createdAt)!==null&&u!==void 0?u:void 0,q=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:z,emailVerified:re,isAnonymous:tt,providerData:de,stsTokenManager:R}=t;ve(z&&R,e,"internal-error");let E=ad.fromJSON(this.name,R);ve(typeof z=="string",e,"internal-error"),Ho(f,e.name),Ho(m,e.name),ve(typeof re=="boolean",e,"internal-error"),ve(typeof tt=="boolean",e,"internal-error"),Ho(v,e.name),Ho(I,e.name),Ho(x,e.name),Ho(A,e.name),Ho(F,e.name),Ho(q,e.name);let T=new n({uid:z,auth:e,email:m,emailVerified:re,displayName:f,isAnonymous:tt,photoURL:I,phoneNumber:v,tenantId:x,stsTokenManager:E,createdAt:F,lastLoginAt:q});return de&&Array.isArray(de)&&(T.providerData=de.map(S=>Object.assign({},S))),A&&(T._redirectEventId=A),T}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new ad;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield vm(o),o})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];ve(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?lP(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new ad;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ld(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var WM=new Map;function zi(n){qo(n instanceof Function,"Expected a class definition");let e=WM.get(n);return e?(qo(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,WM.set(n,e),e)}var BG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),eI=BG;function hm(n,e,t){return`firebase:${n}:${e}:${t}`}var ym=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=hm(this.userKey,i.apiKey,o),this.fullPersistenceKey=hm("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ic._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(zi(eI),e,r);let i=(yield Promise.all(t.map(u=>y(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||zi(eI),s=hm(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(s);if(d){let f=Ic._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>y(this,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function qM(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fP(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uP(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mP(e))return"Blackberry";if(gP(e))return"Webos";if(dP(e))return"Safari";if((e.includes("chrome/")||hP(e))&&!e.includes("edge/"))return"Chrome";if(pP(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function uP(n=hn()){return/firefox\//i.test(n)}function dP(n=hn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function hP(n=hn()){return/crios\//i.test(n)}function fP(n=hn()){return/iemobile/i.test(n)}function pP(n=hn()){return/android/i.test(n)}function mP(n=hn()){return/blackberry/i.test(n)}function gP(n=hn()){return/webos/i.test(n)}function _I(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function $G(n=hn()){var e;return _I(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function HG(){return hS()&&document.documentMode===10}function vP(n=hn()){return _I(n)||pP(n)||gP(n)||mP(n)||/windows phone/i.test(n)||fP(n)}function yP(n,e=[]){let t;switch(n){case"Browser":t=qM(hn());break;case"Worker":t=`${qM(hn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Vn}/${r}`}var tI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function WG(t){return y(this,arguments,function*(n,e={}){return Tc(n,"GET","/v2/passwordPolicy",mI(n,e))})}var qG=6,nI=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:qG,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var rI=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _m(this),this.idTokenSubscription=new _m(this),this.beforeStateQueue=new tI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=zi(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ym.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield cP(this,{idToken:e}),r=yield Ic._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(Di(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield vm(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=MG()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Di(this.app))return Promise.reject(Ls(this));let t=e?Ue(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Di(this.app)?Promise.reject(Ls(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Di(this.app)?Promise.reject(Ls(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(zi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield WG(this),t=new nI(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield jG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&zi(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=yield ym.create(this,[zi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yP(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&RG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function wI(n){return Ue(n)}var _m=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vS(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var EI={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zG(n){EI=n}function GG(n){return EI.loadJS(n)}function KG(){return EI.gapiScript}function _P(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function II(n,e){let t=$t(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Zl(o,e??{}))return i;Wo(i,"already-initialized")}return t.initialize({options:e})}function YG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(zi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function TI(n,e,t){let r=wI(n);ve(r._canInitEmulator,r,"emulator-config-failed"),ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=wP(e),{host:s,port:a}=QG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||JG()}function wP(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QG(n){let e=wP(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:zM(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:zM(s)}}}function zM(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function JG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var wm=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return qi("not implemented")}_getIdTokenResponse(e){return qi("not implemented")}_linkToIdToken(e,t){return qi("not implemented")}_getReauthenticationResolver(e){return qi("not implemented")}};function YE(n,e){return y(this,null,function*(){return OG(n,"POST","/v1/accounts:signInWithIdp",mI(n,e))})}var Em=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var iI=class extends Em{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var ud=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let o=yield Ic._fromIdTokenResponse(e,r,i),s=GM(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=GM(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function GM(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var oI=class n extends Jn{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function EP(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?oI._fromErrorAndOperation(n,o,e,r):o})}function XG(n,e,t=!1){return y(this,null,function*(){let r=yield cd(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return ud._forOperation(n,"link",r)})}function ZG(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(Di(r.app))return Promise.reject(Ls(r));let i="reauthenticate";try{let o=yield cd(n,EP(r,i,e,n),t);ve(o.idToken,r,"internal-error");let s=vI(o.idToken);ve(s,r,"internal-error");let{sub:a}=s;return ve(n.uid===a,r,"user-mismatch"),ud._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Wo(r,"user-mismatch"),o}})}function e3(n,e,t=!1){return y(this,null,function*(){if(Di(n.app))return Promise.reject(Ls(n));let r="signIn",i=yield EP(n,r,e),o=yield ud._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Dm(n,e,t,r){return Ue(n).onIdTokenChanged(e,t,r)}function CI(n,e,t){return Ue(n).beforeAuthStateChanged(e,t)}function Sm(n,e,t,r){return Ue(n).onAuthStateChanged(e,t,r)}var Im="__sak";var Tm=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Im,"1"),this.storage.removeItem(Im),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var t3=1e3,n3=10,r3=(()=>{class n extends Tm{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vP(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);HG()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,n3):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},t3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield vo(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield vo(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield vo(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),IP=r3;var i3=(()=>{class n extends Tm{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),bI=i3;function o3(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var s3=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,s)})),u=yield o3(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function TP(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var sI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=TP("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function li(){return window}function a3(n){li().location.href=n}function CP(){return typeof li().WorkerGlobalScope<"u"&&typeof li().importScripts=="function"}function c3(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function l3(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function u3(){return CP()?self:null}var bP="firebaseLocalStorageDb",d3=1,Cm="firebaseLocalStorage",DP="fbase_key",js=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Am(n,e){return n.transaction([Cm],e?"readwrite":"readonly").objectStore(Cm)}function h3(){let n=indexedDB.deleteDatabase(bP);return new js(n).toPromise()}function aI(){let n=indexedDB.open(bP,d3);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Cm,{keyPath:DP})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Cm)?e(r):(r.close(),yield h3(),e(yield aI()))}))})}function KM(n,e,t){return y(this,null,function*(){let r=Am(n,!0).put({[DP]:e,value:t});return new js(r).toPromise()})}function f3(n,e){return y(this,null,function*(){let t=Am(n,!1).get(e),r=yield new js(t).toPromise();return r===void 0?null:r.value})}function YM(n,e){let t=Am(n,!0).delete(e);return new js(t).toPromise()}var p3=800,m3=3,g3=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield aI(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>m3)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return CP()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=s3._getInstance(u3()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield c3(),!this.activeServiceWorker)return;this.sender=new sI(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||l3()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield aI();return yield KM(t,Im,"1"),yield YM(t,Im),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>KM(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>f3(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>YM(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(o=>{let s=Am(o,!1).getAll();return new js(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),p3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SP=g3;var yue=_P("rcb"),_ue=new Us(3e4,6e4);function v3(n,e){return e?zi(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var dd=class extends wm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return YE(e,this._buildIdpRequest())}_linkToIdToken(e,t){return YE(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return YE(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function y3(n){return e3(n.auth,new dd(n),n.bypassAuthState)}function _3(n){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),ZG(t,new dd(n),n.bypassAuthState)}function w3(n){return y(this,null,function*(){let{auth:e,user:t}=n;return ve(t,e,"internal-error"),XG(t,new dd(n),n.bypassAuthState)})}var cI=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return y3;case"linkViaPopup":case"linkViaRedirect":return w3;case"reauthViaPopup":case"reauthViaRedirect":return _3;default:Wo(this.auth,"internal-error")}}resolve(e){qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var wue=new Us(2e3,1e4);var E3="pendingRedirect",fm=new Map,lI=class n extends cI{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=fm.get(this.auth._key());if(!e){try{let r=(yield I3(this.resolver,this.auth))?yield vo(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}fm.set(this.auth._key(),e)}return this.bypassAuthState||fm.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return vo(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,vo(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function I3(n,e){return y(this,null,function*(){let t=b3(e),r=C3(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function T3(n,e){fm.set(n._key(),e)}function C3(n){return zi(n._redirectPersistence)}function b3(n){return hm(E3,n.config.apiKey,n.name)}function D3(n,e,t=!1){return y(this,null,function*(){if(Di(n.app))return Promise.reject(Ls(n));let r=wI(n),i=v3(r,e),s=yield new lI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var S3=10*60*1e3,uI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!A3(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!AP(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Vs(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=S3&&this.cachedEventUids.clear(),this.cachedEventUids.has(QM(e))}saveEventToCache(e){this.cachedEventUids.add(QM(e)),this.lastProcessedEventTime=Date.now()}};function QM(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function AP({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function A3(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AP(n);default:return!1}}function R3(t){return y(this,arguments,function*(n,e={}){return Tc(n,"GET","/v1/projects",e)})}var x3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,N3=/^https?/;function M3(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield R3(n);for(let t of e)try{if(P3(t))return}catch{}Wo(n,"unauthorized-domain")})}function P3(n){let e=JE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!N3.test(t))return!1;if(x3.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var k3=new Us(3e4,6e4);function JM(){let n=li().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function O3(n){return new Promise((e,t)=>{var r,i,o;function s(){JM(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JM(),t(Vs(n,"network-request-failed"))},timeout:k3.get()})}if(!((i=(r=li().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=li().gapi)===null||o===void 0)&&o.load)s();else{let a=_P("iframefcb");return li()[a]=()=>{gapi.load?s():t(Vs(n,"network-request-failed"))},GG(`${KG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw pm=null,e})}var pm=null;function F3(n){return pm=pm||O3(n),pm}var L3=new Us(5e3,15e3),V3="__/auth/iframe",U3="emulator/auth/iframe",j3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},B3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $3(n){let e=n.config;ve(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?pI(e,U3):`https://${n.config.authDomain}/${V3}`,r={apiKey:e.apiKey,appName:n.name,v:Vn},i=B3.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${as(r).slice(1)}`}function H3(n){return y(this,null,function*(){let e=yield F3(n),t=li().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:$3(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:j3,dontclear:!0},r=>new Promise((i,o)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Vs(n,"network-request-failed"),a=li().setTimeout(()=>{o(s)},L3.get());function c(){li().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var W3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},q3=500,z3=600,G3="_blank",K3="http://localhost",bm=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Y3(n,e,t,r=q3,i=z3){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},W3),{width:r.toString(),height:i.toString(),top:o,left:s}),u=hn().toLowerCase();t&&(a=hP(u)?G3:t),uP(u)&&(e=e||K3,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[v,I])=>`${m}${v}=${I},`,"");if($G(u)&&a!=="_self")return Q3(e||"",a),new bm(null);let f=window.open(e||"",a,d);ve(f,n,"popup-blocked");try{f.focus()}catch{}return new bm(f)}function Q3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var J3="__/auth/handler",X3="emulator/auth/handler",Z3=encodeURIComponent("fac");function XM(n,e,t,r,i,o){return y(this,null,function*(){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Vn,eventId:i};if(e instanceof Em){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Jl(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(o||{}))s[d]=f}if(e instanceof iI){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${Z3}=${encodeURIComponent(c)}`:"";return`${e5(n)}?${as(a).slice(1)}${u}`})}function e5({config:n}){return n.emulator?pI(n,X3):`https://${n.authDomain}/${J3}`}var QE="webStorageSupport",dI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bI,this._completeRedirectFn=D3,this._overrideRedirectResult=T3}_openPopup(e,t,r,i){return y(this,null,function*(){var o;qo((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield XM(e,t,r,JE(),i);return Y3(e,s,TP())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let o=yield XM(e,t,r,JE(),i);return a3(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(qo(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield H3(e),r=new uI(e);return t.register("authEvent",i=>(ve(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(QE,{type:QE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[QE];s!==void 0&&t(!!s),Wo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=M3(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return vP()||dP()||_I()}},RP=dI;var ZM="@firebase/auth",eP="1.8.2";var hI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function t5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n5(n){Ct(new Tt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;ve(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yP(n)},u=new rI(r,i,o,c);return YG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ct(new Tt("auth-internal",e=>{let t=wI(e.getProvider("auth").getImmediate());return(r=>new hI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),se(ZM,eP,t5(n)),se(ZM,eP,"esm2017")}var r5=5*60,i5=py("authIdTokenMaxAge")||r5,tP=null,o5=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>i5)return;let i=t?.token;tP!==i&&(tP=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function DI(n=Ht()){let e=$t(n,"auth");if(e.isInitialized())return e.getImmediate();let t=II(n,{popupRedirectResolver:RP,persistence:[SP,IP,bI]}),r=py("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=o5(o.toString());CI(t,s,()=>s(t.currentUser)),Dm(t,a=>s(a))}}let i=uS("auth");return i&&TI(t,`http://${i}`),t}function s5(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}zG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Vs("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",s5().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n5("Browser");function NP(n){return new fe(function(e){var t=Sm(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var MP="auth",Bs=class{constructor(e){return e}},Br=class{constructor(){return Ft(MP)}};var SI=new W("angularfire2.auth-instances");function J5(n,e){let t=qt(MP,n,e);return t&&new Bs(t)}function X5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bs(r)}}var Z5={provide:Br,deps:[[new be,SI]]},e6={provide:Bs,useFactory:J5,deps:[[new be,SI],yt]};function PP(n,...e){return se("angularfire",pt.full,"auth"),at([e6,Z5,{provide:SI,useFactory:X5(n),multi:!0,deps:[me,xe,At,Pt,[new be,_r],...e]}])}var kP=Ye(NP,!0);var OP=Ye(DI,!0);var Rm="analytics",n6="firebase_id",r6="origin",i6=60*1e3,o6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",kI="https://www.googletagmanager.com/gtag/js";var On=new lr("@firebase/analytics");var s6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ir=new cr("analytics","Analytics",s6);function a6(n){if(!n.startsWith(kI)){let e=ir.create("invalid-gtag-resource",{gtagURL:n});return On.warn(e.message),""}return n}function $P(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function c6(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function l6(n,e){let t=c6("firebase-js-sdk-policy",{createScriptURL:a6}),r=document.createElement("script"),i=`${kI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function u6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function d6(n,e,t,r,i,o){return y(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield $P(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){On.error(a)}n("config",i,o)})}function h6(n,e,t,r,i){return y(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield $P(t);for(let c of s){let u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)o.push(d);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){On.error(o)}})}function f6(n,e,t,r){function i(o,...s){return y(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield h6(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield d6(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,u]=s;n("get",a,c,u)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){On.error(a)}})}return i}function p6(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=f6(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function m6(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(kI)&&t.src.includes(n))return t;return null}var g6=30,v6=1e3,RI=class{constructor(e={},t=v6){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},HP=new RI;function y6(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function _6(n){return y(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:y6(r)},o=o6.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw ir.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function w6(r){return y(this,arguments,function*(n,e=HP,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw ir.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw ir.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new xI;return setTimeout(()=>y(this,null,function*(){c.abort()}),t!==void 0?t:i6),WP({appId:i,apiKey:o,measurementId:s},a,c,e)})}function WP(o,s,a){return y(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=HP){var c;let{appId:u,measurementId:d}=n;try{yield E6(r,e)}catch(f){if(d)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{let f=yield _6(n);return i.deleteThrottleMetadata(u),f}catch(f){let m=f;if(!I6(m)){if(i.deleteThrottleMetadata(u),d)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw f}let v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?ba(t,i.intervalMillis,g6):ba(t,i.intervalMillis),I={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(u,I),On.debug(`Calling attemptFetch again in ${v} millis`),WP(n,I,r,i)}})}function E6(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(ir.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function I6(n){if(!(n instanceof Jn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var xI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var NI;function T6(n,e,t,r,i){return y(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function C6(n,e,t,r){return y(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var MI;function b6(n){MI=n}function D6(n){NI=n}function S6(){return y(this,null,function*(){if(Xr())try{yield Ca()}catch(n){return On.warn(ir.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return On.warn(ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function A6(n,e,t,r,i,o,s){return y(this,null,function*(){var a;let c=w6(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>On.error(v)),e.push(c);let u=S6().then(v=>{if(v)return r.getId()}),[d,f]=yield Promise.all([c,u]);m6(o)||l6(o,d.measurementId),MI&&(i("consent","default",MI),b6(void 0)),i("js",new Date);let m=(a=s?.config)!==null&&a!==void 0?a:{};return m[r6]="firebase",m.update=!0,f!=null&&(m[n6]=f),i("config",d.measurementId,m),NI&&(i("set",NI),D6(void 0)),d.measurementId})}var PI=class{constructor(e){this.app=e}_delete(){return delete Cc[this.app.options.appId],Promise.resolve()}},Cc={},FP=[],LP={},AI="dataLayer",R6="gtag",VP,OI,UP=!1;function x6(){let n=[];if(Yl()&&n.push("This is a browser extension environment."),Ql()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=ir.create("invalid-analytics-context",{errorInfo:e});On.warn(t.message)}}function N6(n,e,t){x6();let r=n.options.appId;if(!r)throw ir.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ir.create("no-api-key");if(Cc[r]!=null)throw ir.create("already-exists",{id:r});if(!UP){u6(AI);let{wrappedGtag:o,gtagCore:s}=p6(Cc,FP,LP,AI,R6);OI=o,VP=s,UP=!0}return Cc[r]=A6(n,FP,LP,e,VP,AI,t),new PI(n)}function qP(n=Ht()){n=Ue(n);let e=$t(n,Rm);return e.isInitialized()?e.getImmediate():zP(n)}function zP(n,e={}){let t=$t(n,Rm);if(t.isInitialized()){let i=t.getImmediate();if(Zl(e,t.getOptions()))return i;throw ir.create("already-initialized")}return t.initialize({options:e})}function GP(){return y(this,null,function*(){if(Yl()||!Ql()||!Xr())return!1;try{return yield Ca()}catch{return!1}})}function KP(n,e,t){n=Ue(n),C6(OI,Cc[n.app.options.appId],e,t).catch(r=>On.error(r))}function FI(n,e,t,r){n=Ue(n),T6(OI,Cc[n.app.options.appId],e,t,r).catch(i=>On.error(i))}var jP="@firebase/analytics",BP="0.10.11";function M6(){Ct(new Tt(Rm,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return N6(r,i,t)},"PUBLIC")),Ct(new Tt("analytics-internal",n,"PRIVATE")),se(jP,BP),se(jP,BP,"esm2017");function n(e){try{let t=e.getProvider(Rm).getImmediate();return{logEvent:(r,i,o)=>FI(t,r,i,o)}}catch(t){throw ir.create("interop-component-reg-failed",{reason:t})}}}M6();var $s=class{constructor(e){return e}},JP="analytics",VI=class{constructor(){return Ft(JP)}};var XP=Ye(qP,!0);var ZP=Ye(GP,!1),P6=Ye(FI,!1,2);var k6=Ye(KP,!0,2);var jI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){se("angularfire",pt.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),ZP().then(()=>{let s=i.get($s);s?this.disposables=[kP(t).subscribe(a=>{k6(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ie(Bs),ie(me),ie(xe))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),O6="firebase_event_origin",F6="firebase_previous_class",L6="firebase_previous_id",V6="firebase_previous_screen",U6="firebase_screen_class",YP="firebase_screen_id",j6="firebase_screen",UI="outlet",B6="page_path",$6="page_title",hd="screen_class",QP="screen_name",H6="screen_view",W6="auto",q6="#",z6=Math.floor(Math.random()*(2**32-1))-2**31,LI={},G6=n=>{let e=[n[hd],n[UI]].join(q6);if(LI.hasOwnProperty(e))return LI[e];{let t=z6++;return LI[e]=t,t}},K6=(n,e,t)=>n.events.pipe(rn(i=>i instanceof Qu)).pipe(fn(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return ce(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",d={[QP]:u,[B6]:`/${s}`,[O6]:W6,[j6]:u,[UI]:i.snapshot.outlet};e&&(d[$6]=e.getTitle());let f=a.component;if(f){if(f===FE){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;f=m.component}}else f=i.snapshot.component;if(typeof f=="string")return ce(ge(B({},d),{[hd]:f}));if(f){let m=t.resolveComponentFactory(f);return ce(ge(B({},d),{[hd]:m.selector}))}return ce(null)}),rn(i=>!!i),ee(i=>B({[U6]:i[hd],[YP]:G6(i)},i)),Vy(i=>i[UI]),Nt(i=>i.pipe(hf((o,s)=>JSON.stringify(o)===JSON.stringify(s)),$a(void 0),pf(),ee(([o,s])=>o?B({[F6]:o[hd],[V6]:o[QP],[L6]:o[YP]},s):s)))),ek=(()=>{class n{disposable;constructor(t,r,i,o,s,a){se("angularfire",pt.full,"screen-tracking"),ZP().then(()=>{let c=a.get($s);!t||!c||o.runOutsideAngular(()=>{this.disposable=K6(t,r,i).pipe(fn(u=>y(this,null,function*(){return s&&(yield s.initialized),P6(c,H6,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ie(am,8),ie(Wp,8),ie(Mo),ie(me),ie(jI,8),ie(xe))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),BI=new W("angularfire2.analytics-instances");function Y6(n,e,t){if(!lc(t))return null;let r=qt(JP,n,e);return r&&new $s(r)}function Q6(n){return(e,t,r)=>{if(!lc(r))return null;let i=e.runOutsideAngular(()=>n(t));return new $s(i)}}var J6={provide:VI,deps:[[new be,BI]]},X6={provide:$s,useFactory:Y6,deps:[[new be,BI],yt,St]};function tk(n,...e){return se("angularfire",pt.full,"analytics"),at([X6,J6,{provide:BI,useFactory:Q6(n),multi:!0,deps:[me,xe,St,At,Pt,...e]}])}var nk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},rk={};var Gi,$I;(function(){var n;function e(R,E){function T(){}T.prototype=E.prototype,R.D=E.prototype,R.prototype=new T,R.prototype.constructor=R,R.C=function(S,N,k){for(var C=Array(arguments.length-2),Ti=2;Ti<arguments.length;Ti++)C[Ti-2]=arguments[Ti];return E.prototype[N].apply(S,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,E,T){T||(T=0);var S=Array(16);if(typeof E=="string")for(var N=0;16>N;++N)S[N]=E.charCodeAt(T++)|E.charCodeAt(T++)<<8|E.charCodeAt(T++)<<16|E.charCodeAt(T++)<<24;else for(N=0;16>N;++N)S[N]=E[T++]|E[T++]<<8|E[T++]<<16|E[T++]<<24;E=R.g[0],T=R.g[1],N=R.g[2];var k=R.g[3],C=E+(k^T&(N^k))+S[0]+3614090360&4294967295;E=T+(C<<7&4294967295|C>>>25),C=k+(N^E&(T^N))+S[1]+3905402710&4294967295,k=E+(C<<12&4294967295|C>>>20),C=N+(T^k&(E^T))+S[2]+606105819&4294967295,N=k+(C<<17&4294967295|C>>>15),C=T+(E^N&(k^E))+S[3]+3250441966&4294967295,T=N+(C<<22&4294967295|C>>>10),C=E+(k^T&(N^k))+S[4]+4118548399&4294967295,E=T+(C<<7&4294967295|C>>>25),C=k+(N^E&(T^N))+S[5]+1200080426&4294967295,k=E+(C<<12&4294967295|C>>>20),C=N+(T^k&(E^T))+S[6]+2821735955&4294967295,N=k+(C<<17&4294967295|C>>>15),C=T+(E^N&(k^E))+S[7]+4249261313&4294967295,T=N+(C<<22&4294967295|C>>>10),C=E+(k^T&(N^k))+S[8]+1770035416&4294967295,E=T+(C<<7&4294967295|C>>>25),C=k+(N^E&(T^N))+S[9]+2336552879&4294967295,k=E+(C<<12&4294967295|C>>>20),C=N+(T^k&(E^T))+S[10]+4294925233&4294967295,N=k+(C<<17&4294967295|C>>>15),C=T+(E^N&(k^E))+S[11]+2304563134&4294967295,T=N+(C<<22&4294967295|C>>>10),C=E+(k^T&(N^k))+S[12]+1804603682&4294967295,E=T+(C<<7&4294967295|C>>>25),C=k+(N^E&(T^N))+S[13]+4254626195&4294967295,k=E+(C<<12&4294967295|C>>>20),C=N+(T^k&(E^T))+S[14]+2792965006&4294967295,N=k+(C<<17&4294967295|C>>>15),C=T+(E^N&(k^E))+S[15]+1236535329&4294967295,T=N+(C<<22&4294967295|C>>>10),C=E+(N^k&(T^N))+S[1]+4129170786&4294967295,E=T+(C<<5&4294967295|C>>>27),C=k+(T^N&(E^T))+S[6]+3225465664&4294967295,k=E+(C<<9&4294967295|C>>>23),C=N+(E^T&(k^E))+S[11]+643717713&4294967295,N=k+(C<<14&4294967295|C>>>18),C=T+(k^E&(N^k))+S[0]+3921069994&4294967295,T=N+(C<<20&4294967295|C>>>12),C=E+(N^k&(T^N))+S[5]+3593408605&4294967295,E=T+(C<<5&4294967295|C>>>27),C=k+(T^N&(E^T))+S[10]+38016083&4294967295,k=E+(C<<9&4294967295|C>>>23),C=N+(E^T&(k^E))+S[15]+3634488961&4294967295,N=k+(C<<14&4294967295|C>>>18),C=T+(k^E&(N^k))+S[4]+3889429448&4294967295,T=N+(C<<20&4294967295|C>>>12),C=E+(N^k&(T^N))+S[9]+568446438&4294967295,E=T+(C<<5&4294967295|C>>>27),C=k+(T^N&(E^T))+S[14]+3275163606&4294967295,k=E+(C<<9&4294967295|C>>>23),C=N+(E^T&(k^E))+S[3]+4107603335&4294967295,N=k+(C<<14&4294967295|C>>>18),C=T+(k^E&(N^k))+S[8]+1163531501&4294967295,T=N+(C<<20&4294967295|C>>>12),C=E+(N^k&(T^N))+S[13]+2850285829&4294967295,E=T+(C<<5&4294967295|C>>>27),C=k+(T^N&(E^T))+S[2]+4243563512&4294967295,k=E+(C<<9&4294967295|C>>>23),C=N+(E^T&(k^E))+S[7]+1735328473&4294967295,N=k+(C<<14&4294967295|C>>>18),C=T+(k^E&(N^k))+S[12]+2368359562&4294967295,T=N+(C<<20&4294967295|C>>>12),C=E+(T^N^k)+S[5]+4294588738&4294967295,E=T+(C<<4&4294967295|C>>>28),C=k+(E^T^N)+S[8]+2272392833&4294967295,k=E+(C<<11&4294967295|C>>>21),C=N+(k^E^T)+S[11]+1839030562&4294967295,N=k+(C<<16&4294967295|C>>>16),C=T+(N^k^E)+S[14]+4259657740&4294967295,T=N+(C<<23&4294967295|C>>>9),C=E+(T^N^k)+S[1]+2763975236&4294967295,E=T+(C<<4&4294967295|C>>>28),C=k+(E^T^N)+S[4]+1272893353&4294967295,k=E+(C<<11&4294967295|C>>>21),C=N+(k^E^T)+S[7]+4139469664&4294967295,N=k+(C<<16&4294967295|C>>>16),C=T+(N^k^E)+S[10]+3200236656&4294967295,T=N+(C<<23&4294967295|C>>>9),C=E+(T^N^k)+S[13]+681279174&4294967295,E=T+(C<<4&4294967295|C>>>28),C=k+(E^T^N)+S[0]+3936430074&4294967295,k=E+(C<<11&4294967295|C>>>21),C=N+(k^E^T)+S[3]+3572445317&4294967295,N=k+(C<<16&4294967295|C>>>16),C=T+(N^k^E)+S[6]+76029189&4294967295,T=N+(C<<23&4294967295|C>>>9),C=E+(T^N^k)+S[9]+3654602809&4294967295,E=T+(C<<4&4294967295|C>>>28),C=k+(E^T^N)+S[12]+3873151461&4294967295,k=E+(C<<11&4294967295|C>>>21),C=N+(k^E^T)+S[15]+530742520&4294967295,N=k+(C<<16&4294967295|C>>>16),C=T+(N^k^E)+S[2]+3299628645&4294967295,T=N+(C<<23&4294967295|C>>>9),C=E+(N^(T|~k))+S[0]+4096336452&4294967295,E=T+(C<<6&4294967295|C>>>26),C=k+(T^(E|~N))+S[7]+1126891415&4294967295,k=E+(C<<10&4294967295|C>>>22),C=N+(E^(k|~T))+S[14]+2878612391&4294967295,N=k+(C<<15&4294967295|C>>>17),C=T+(k^(N|~E))+S[5]+4237533241&4294967295,T=N+(C<<21&4294967295|C>>>11),C=E+(N^(T|~k))+S[12]+1700485571&4294967295,E=T+(C<<6&4294967295|C>>>26),C=k+(T^(E|~N))+S[3]+2399980690&4294967295,k=E+(C<<10&4294967295|C>>>22),C=N+(E^(k|~T))+S[10]+4293915773&4294967295,N=k+(C<<15&4294967295|C>>>17),C=T+(k^(N|~E))+S[1]+2240044497&4294967295,T=N+(C<<21&4294967295|C>>>11),C=E+(N^(T|~k))+S[8]+1873313359&4294967295,E=T+(C<<6&4294967295|C>>>26),C=k+(T^(E|~N))+S[15]+4264355552&4294967295,k=E+(C<<10&4294967295|C>>>22),C=N+(E^(k|~T))+S[6]+2734768916&4294967295,N=k+(C<<15&4294967295|C>>>17),C=T+(k^(N|~E))+S[13]+1309151649&4294967295,T=N+(C<<21&4294967295|C>>>11),C=E+(N^(T|~k))+S[4]+4149444226&4294967295,E=T+(C<<6&4294967295|C>>>26),C=k+(T^(E|~N))+S[11]+3174756917&4294967295,k=E+(C<<10&4294967295|C>>>22),C=N+(E^(k|~T))+S[2]+718787259&4294967295,N=k+(C<<15&4294967295|C>>>17),C=T+(k^(N|~E))+S[9]+3951481745&4294967295,R.g[0]=R.g[0]+E&4294967295,R.g[1]=R.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,R.g[2]=R.g[2]+N&4294967295,R.g[3]=R.g[3]+k&4294967295}r.prototype.u=function(R,E){E===void 0&&(E=R.length);for(var T=E-this.blockSize,S=this.B,N=this.h,k=0;k<E;){if(N==0)for(;k<=T;)i(this,R,k),k+=this.blockSize;if(typeof R=="string"){for(;k<E;)if(S[N++]=R.charCodeAt(k++),N==this.blockSize){i(this,S),N=0;break}}else for(;k<E;)if(S[N++]=R[k++],N==this.blockSize){i(this,S),N=0;break}}this.h=N,this.o+=E},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var E=1;E<R.length-8;++E)R[E]=0;var T=8*this.o;for(E=R.length-8;E<R.length;++E)R[E]=T&255,T/=256;for(this.u(R),R=Array(16),E=T=0;4>E;++E)for(var S=0;32>S;S+=8)R[T++]=this.g[E]>>>S&255;return R};function o(R,E){var T=a;return Object.prototype.hasOwnProperty.call(T,R)?T[R]:T[R]=E(R)}function s(R,E){this.h=E;for(var T=[],S=!0,N=R.length-1;0<=N;N--){var k=R[N]|0;S&&k==E||(T[N]=k,S=!1)}this.g=T}var a={};function c(R){return-128<=R&&128>R?o(R,function(E){return new s([E|0],0>E?-1:0)}):new s([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return A(u(-R));for(var E=[],T=1,S=0;R>=T;S++)E[S]=R/T|0,T*=4294967296;return new s(E,0)}function d(R,E){if(R.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(R.charAt(0)=="-")return A(d(R.substring(1),E));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=u(Math.pow(E,8)),S=f,N=0;N<R.length;N+=8){var k=Math.min(8,R.length-N),C=parseInt(R.substring(N,N+k),E);8>k?(k=u(Math.pow(E,k)),S=S.j(k).add(u(C))):(S=S.j(T),S=S.add(u(C)))}return S}var f=c(0),m=c(1),v=c(16777216);n=s.prototype,n.m=function(){if(x(this))return-A(this).m();for(var R=0,E=1,T=0;T<this.g.length;T++){var S=this.i(T);R+=(0<=S?S:4294967296+S)*E,E*=4294967296}return R},n.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I(this))return"0";if(x(this))return"-"+A(this).toString(R);for(var E=u(Math.pow(R,6)),T=this,S="";;){var N=re(T,E).g;T=F(T,N.j(E));var k=((0<T.g.length?T.g[0]:T.h)>>>0).toString(R);if(T=N,I(T))return k+S;for(;6>k.length;)k="0"+k;S=k+S}},n.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function I(R){if(R.h!=0)return!1;for(var E=0;E<R.g.length;E++)if(R.g[E]!=0)return!1;return!0}function x(R){return R.h==-1}n.l=function(R){return R=F(this,R),x(R)?-1:I(R)?0:1};function A(R){for(var E=R.g.length,T=[],S=0;S<E;S++)T[S]=~R.g[S];return new s(T,~R.h).add(m)}n.abs=function(){return x(this)?A(this):this},n.add=function(R){for(var E=Math.max(this.g.length,R.g.length),T=[],S=0,N=0;N<=E;N++){var k=S+(this.i(N)&65535)+(R.i(N)&65535),C=(k>>>16)+(this.i(N)>>>16)+(R.i(N)>>>16);S=C>>>16,k&=65535,C&=65535,T[N]=C<<16|k}return new s(T,T[T.length-1]&-2147483648?-1:0)};function F(R,E){return R.add(A(E))}n.j=function(R){if(I(this)||I(R))return f;if(x(this))return x(R)?A(this).j(A(R)):A(A(this).j(R));if(x(R))return A(this.j(A(R)));if(0>this.l(v)&&0>R.l(v))return u(this.m()*R.m());for(var E=this.g.length+R.g.length,T=[],S=0;S<2*E;S++)T[S]=0;for(S=0;S<this.g.length;S++)for(var N=0;N<R.g.length;N++){var k=this.i(S)>>>16,C=this.i(S)&65535,Ti=R.i(N)>>>16,Rl=R.i(N)&65535;T[2*S+2*N]+=C*Rl,q(T,2*S+2*N),T[2*S+2*N+1]+=k*Rl,q(T,2*S+2*N+1),T[2*S+2*N+1]+=C*Ti,q(T,2*S+2*N+1),T[2*S+2*N+2]+=k*Ti,q(T,2*S+2*N+2)}for(S=0;S<E;S++)T[S]=T[2*S+1]<<16|T[2*S];for(S=E;S<2*E;S++)T[S]=0;return new s(T,0)};function q(R,E){for(;(R[E]&65535)!=R[E];)R[E+1]+=R[E]>>>16,R[E]&=65535,E++}function z(R,E){this.g=R,this.h=E}function re(R,E){if(I(E))throw Error("division by zero");if(I(R))return new z(f,f);if(x(R))return E=re(A(R),E),new z(A(E.g),A(E.h));if(x(E))return E=re(R,A(E)),new z(A(E.g),E.h);if(30<R.g.length){if(x(R)||x(E))throw Error("slowDivide_ only works with positive integers.");for(var T=m,S=E;0>=S.l(R);)T=tt(T),S=tt(S);var N=de(T,1),k=de(S,1);for(S=de(S,2),T=de(T,2);!I(S);){var C=k.add(S);0>=C.l(R)&&(N=N.add(T),k=C),S=de(S,1),T=de(T,1)}return E=F(R,N.j(E)),new z(N,E)}for(N=f;0<=R.l(E);){for(T=Math.max(1,Math.floor(R.m()/E.m())),S=Math.ceil(Math.log(T)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),k=u(T),C=k.j(E);x(C)||0<C.l(R);)T-=S,k=u(T),C=k.j(E);I(k)&&(k=m),N=N.add(k),R=F(R,C)}return new z(N,R)}n.A=function(R){return re(this,R).h},n.and=function(R){for(var E=Math.max(this.g.length,R.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)&R.i(S);return new s(T,this.h&R.h)},n.or=function(R){for(var E=Math.max(this.g.length,R.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)|R.i(S);return new s(T,this.h|R.h)},n.xor=function(R){for(var E=Math.max(this.g.length,R.g.length),T=[],S=0;S<E;S++)T[S]=this.i(S)^R.i(S);return new s(T,this.h^R.h)};function tt(R){for(var E=R.g.length+1,T=[],S=0;S<E;S++)T[S]=R.i(S)<<1|R.i(S-1)>>>31;return new s(T,R.h)}function de(R,E){var T=E>>5;E%=32;for(var S=R.g.length-T,N=[],k=0;k<S;k++)N[k]=0<E?R.i(k+T)>>>E|R.i(k+T+1)<<32-E:R.i(k+T);return new s(N,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,$I=rk.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,Gi=rk.Integer=s}).apply(typeof nk<"u"?nk:typeof self<"u"?self:typeof window<"u"?window:{});var xm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ki={};var HI,Z6,bc,WI,fd,Nm,qI,zI,GI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof xm=="object"&&xm];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var P=l[g];if(!(P in p))break e;p=p[P]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function o(l,h){l instanceof String&&(l+="");var p=0,g=!1,P={next:function(){if(!g&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(l){return l||function(){return o(this,function(h,p){return p})}});var s=s||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),l.apply(h,P)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function I(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,P,O){for(var H=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)H[nt-2]=arguments[nt];return h.prototype[P].apply(g,H)}}function x(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function A(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let P=l.length||0,O=g.length||0;l.length=P+O;for(let H=0;H<O;H++)l[P+H]=g[H]}else l.push(g)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(l){return/^[\s\xa0]*$/.test(l)}function z(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function re(l){return re[" "](l),l}re[" "]=function(){};var tt=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function de(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function R(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function E(l){let h={};for(let p in l)h[p]=l[p];return h}let T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let p,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(p in g)l[p]=g[p];for(let O=0;O<T.length;O++)p=T[O],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function N(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function k(l){a.setTimeout(()=>{throw l},0)}function C(){var l=Hv;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class Ti{constructor(){this.h=this.g=null}add(h,p){let g=Rl.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Rl=new F(()=>new c2,l=>l.reset());class c2{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let xl,Nl=!1,Hv=new Ti,sD=()=>{let l=a.Promise.resolve(void 0);xl=()=>{l.then(l2)}};var l2=()=>{for(var l;l=C();){try{l.h.call(l.g)}catch(p){k(p)}var h=Rl;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Nl=!1};function fo(){this.s=this.s,this.C=this.C}fo.prototype.s=!1,fo.prototype.ma=function(){this.s||(this.s=!0,this.N())},fo.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function cn(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}cn.prototype.h=function(){this.defaultPrevented=!0};var u2=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Ml(l,h){if(cn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(tt){e:{try{re(h.nodeName);var P=!0;break e}catch{}P=!1}P||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:d2[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ml.aa.h.call(this)}}I(Ml,cn);var d2={2:"touch",3:"pen",4:"mouse"};Ml.prototype.h=function(){Ml.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Pl="closure_listenable_"+(1e6*Math.random()|0),h2=0;function f2(l,h,p,g,P){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=P,this.key=++h2,this.da=this.fa=!1}function fh(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ph(l){this.src=l,this.g={},this.h=0}ph.prototype.add=function(l,h,p,g,P){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var H=qv(l,h,g,P);return-1<H?(h=l[H],p||(h.fa=!1)):(h=new f2(h,this.src,O,!!g,P),h.fa=p,l.push(h)),h};function Wv(l,h){var p=h.type;if(p in l.g){var g=l.g[p],P=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=P)&&Array.prototype.splice.call(g,P,1),O&&(fh(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function qv(l,h,p,g){for(var P=0;P<l.length;++P){var O=l[P];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return P}return-1}var zv="closure_lm_"+(1e6*Math.random()|0),Gv={};function aD(l,h,p,g,P){if(g&&g.once)return lD(l,h,p,g,P);if(Array.isArray(h)){for(var O=0;O<h.length;O++)aD(l,h[O],p,g,P);return null}return p=Jv(p),l&&l[Pl]?l.K(h,p,u(g)?!!g.capture:!!g,P):cD(l,h,p,!1,g,P)}function cD(l,h,p,g,P,O){if(!h)throw Error("Invalid event type");var H=u(P)?!!P.capture:!!P,nt=Yv(l);if(nt||(l[zv]=nt=new ph(l)),p=nt.add(h,p,g,H,O),p.proxy)return p;if(g=p2(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)u2||(P=H),P===void 0&&(P=!1),l.addEventListener(h.toString(),g,P);else if(l.attachEvent)l.attachEvent(dD(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function p2(){function l(p){return h.call(l.src,l.listener,p)}let h=m2;return l}function lD(l,h,p,g,P){if(Array.isArray(h)){for(var O=0;O<h.length;O++)lD(l,h[O],p,g,P);return null}return p=Jv(p),l&&l[Pl]?l.L(h,p,u(g)?!!g.capture:!!g,P):cD(l,h,p,!0,g,P)}function uD(l,h,p,g,P){if(Array.isArray(h))for(var O=0;O<h.length;O++)uD(l,h[O],p,g,P);else g=u(g)?!!g.capture:!!g,p=Jv(p),l&&l[Pl]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=qv(O,p,g,P),-1<p&&(fh(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Yv(l))&&(h=l.g[h.toString()],l=-1,h&&(l=qv(h,p,g,P)),(p=-1<l?h[l]:null)&&Kv(p))}function Kv(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Pl])Wv(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent(dD(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Yv(h))?(Wv(p,l),p.h==0&&(p.src=null,h[zv]=null)):fh(l)}}}function dD(l){return l in Gv?Gv[l]:Gv[l]="on"+l}function m2(l,h){if(l.da)l=!0;else{h=new Ml(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&Kv(l),l=p.call(g,h)}return l}function Yv(l){return l=l[zv],l instanceof ph?l:null}var Qv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Jv(l){return typeof l=="function"?l:(l[Qv]||(l[Qv]=function(h){return l.handleEvent(h)}),l[Qv])}function ln(){fo.call(this),this.i=new ph(this),this.M=this,this.F=null}I(ln,fo),ln.prototype[Pl]=!0,ln.prototype.removeEventListener=function(l,h,p,g){uD(this,l,h,p,g)};function Sn(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new cn(h,l);else if(h instanceof cn)h.target=h.target||l;else{var P=h;h=new cn(g,l),S(h,P)}if(P=!0,p)for(var O=p.length-1;0<=O;O--){var H=h.g=p[O];P=mh(H,g,!0,h)&&P}if(H=h.g=l,P=mh(H,g,!0,h)&&P,P=mh(H,g,!1,h)&&P,p)for(O=0;O<p.length;O++)H=h.g=p[O],P=mh(H,g,!1,h)&&P}ln.prototype.N=function(){if(ln.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)fh(p[g]);delete l.g[h],l.h--}}this.F=null},ln.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},ln.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function mh(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var P=!0,O=0;O<h.length;++O){var H=h[O];if(H&&!H.da&&H.capture==p){var nt=H.listener,en=H.ha||H.src;H.fa&&Wv(l.i,H),P=nt.call(en,g)!==!1&&P}}return P&&!g.defaultPrevented}function hD(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function fD(l){l.g=hD(()=>{l.g=null,l.i&&(l.i=!1,fD(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class g2 extends fo{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:fD(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kl(l){fo.call(this),this.h=l,this.g={}}I(kl,fo);var pD=[];function mD(l){de(l.g,function(h,p){this.g.hasOwnProperty(p)&&Kv(h)},l),l.g={}}kl.prototype.N=function(){kl.aa.N.call(this),mD(this)},kl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xv=a.JSON.stringify,v2=a.JSON.parse,y2=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function Zv(){}Zv.prototype.h=null;function gD(l){return l.h||(l.h=l.i())}function vD(){}var Ol={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ey(){cn.call(this,"d")}I(ey,cn);function ty(){cn.call(this,"c")}I(ty,cn);var ns={},yD=null;function gh(){return yD=yD||new ln}ns.La="serverreachability";function _D(l){cn.call(this,ns.La,l)}I(_D,cn);function Fl(l){let h=gh();Sn(h,new _D(h))}ns.STAT_EVENT="statevent";function wD(l,h){cn.call(this,ns.STAT_EVENT,l),this.stat=h}I(wD,cn);function An(l){let h=gh();Sn(h,new wD(h,l))}ns.Ma="timingevent";function ED(l,h){cn.call(this,ns.Ma,l),this.size=h}I(ED,cn);function Ll(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function Vl(){this.g=!0}Vl.prototype.xa=function(){this.g=!1};function _2(l,h,p,g,P,O){l.info(function(){if(l.g)if(O)for(var H="",nt=O.split("&"),en=0;en<nt.length;en++){var Ke=nt[en].split("=");if(1<Ke.length){var un=Ke[0];Ke=Ke[1];var dn=un.split("_");H=2<=dn.length&&dn[1]=="type"?H+(un+"="+Ke+"&"):H+(un+"=redacted&")}}else H=null;else H=O;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+h+`
`+p+`
`+H})}function w2(l,h,p,g,P,O,H){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+h+`
`+p+`
`+O+" "+H})}function va(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+I2(l,p)+(g?" "+g:"")})}function E2(l,h){l.info(function(){return"TIMEOUT: "+h})}Vl.prototype.info=function(){};function I2(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var O=P[0];if(O!="noop"&&O!="stop"&&O!="close")for(var H=1;H<P.length;H++)P[H]=""}}}}return Xv(p)}catch{return h}}var vh={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ID={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ny;function yh(){}I(yh,Zv),yh.prototype.g=function(){return new XMLHttpRequest},yh.prototype.i=function(){return{}},ny=new yh;function po(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new kl(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new TD}function TD(){this.i=null,this.g="",this.h=!1}var CD={},ry={};function iy(l,h,p){l.L=1,l.v=Ih(Ci(h)),l.m=p,l.P=!0,bD(l,null)}function bD(l,h){l.F=Date.now(),_h(l),l.A=Ci(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),UD(p.i,"t",g),l.C=0,p=l.j.J,l.h=new TD,l.g=rS(l.j,p?h:null,!l.m),0<l.O&&(l.M=new g2(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var P="readystatechange";Array.isArray(P)||(P&&(pD[0]=P.toString()),P=pD);for(var O=0;O<P.length;O++){var H=aD(p,P[O],g||h.handleEvent,!1,h.h||h);if(!H)break;h.g[H.key]=H}h=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Fl(),_2(l.i,l.u,l.A,l.l,l.R,l.m)}po.prototype.ca=function(l){l=l.target;let h=this.M;h&&bi(l)==3?h.j():this.Y(l)},po.prototype.Y=function(l){try{if(l==this.g)e:{let dn=bi(this.g);var h=this.g.Ba();let wa=this.g.Z();if(!(3>dn)&&(dn!=3||this.g&&(this.h.h||this.g.oa()||zD(this.g)))){this.J||dn!=4||h==7||(h==8||0>=wa?Fl(3):Fl(2)),oy(this);var p=this.g.Z();this.X=p;t:if(DD(this)){var g=zD(this.g);l="";var P=g.length,O=bi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){rs(this),Ul(this);var H="";break t}this.h.i=new a.TextDecoder}for(h=0;h<P;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(O&&h==P-1)});g.length=0,this.h.g+=l,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=p==200,w2(this.i,this.u,this.A,this.l,this.R,dn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,en=this.g;if((nt=en.g?en.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(nt)){var Ke=nt;break t}}Ke=null}if(p=Ke)va(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sy(this,p);else{this.o=!1,this.s=3,An(12),rs(this),Ul(this);break e}}if(this.P){p=!0;let Sr;for(;!this.J&&this.C<H.length;)if(Sr=T2(this,H),Sr==ry){dn==4&&(this.s=4,An(14),p=!1),va(this.i,this.l,null,"[Incomplete Response]");break}else if(Sr==CD){this.s=4,An(15),va(this.i,this.l,H,"[Invalid Chunk]"),p=!1;break}else va(this.i,this.l,Sr,null),sy(this,Sr);if(DD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dn!=4||H.length!=0||this.h.h||(this.s=1,An(16),p=!1),this.o=this.o&&p,!p)va(this.i,this.l,H,"[Invalid Chunked Response]"),rs(this),Ul(this);else if(0<H.length&&!this.W){this.W=!0;var un=this.j;un.g==this&&un.ba&&!un.M&&(un.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),hy(un),un.M=!0,An(11))}}else va(this.i,this.l,H,null),sy(this,H);dn==4&&rs(this),this.o&&!this.J&&(dn==4?ZD(this.j,this):(this.o=!1,_h(this)))}else j2(this.g),p==400&&0<H.indexOf("Unknown SID")?(this.s=3,An(12)):(this.s=0,An(13)),rs(this),Ul(this)}}}catch{}finally{}};function DD(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function T2(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?ry:(p=Number(h.substring(p,g)),isNaN(p)?CD:(g+=1,g+p>h.length?ry:(h=h.slice(g,g+p),l.C=g+p,h)))}po.prototype.cancel=function(){this.J=!0,rs(this)};function _h(l){l.S=Date.now()+l.I,SD(l,l.I)}function SD(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Ll(m(l.ba,l),h)}function oy(l){l.B&&(a.clearTimeout(l.B),l.B=null)}po.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(E2(this.i,this.A),this.L!=2&&(Fl(),An(17)),rs(this),this.s=2,Ul(this)):SD(this,this.S-l)};function Ul(l){l.j.G==0||l.J||ZD(l.j,l)}function rs(l){oy(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,mD(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function sy(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||ay(p.h,l))){if(!l.K&&ay(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Sh(p),bh(p);else break e;dy(p),An(18)}}else p.za=P[1],0<p.za-p.T&&37500>P[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ll(m(p.Za,p),6e3));if(1>=xD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else os(p,11)}else if((l.K||p.g==l)&&Sh(p),!q(h))for(P=p.Da.g.parse(h),h=0;h<P.length;h++){let Ke=P[h];if(p.T=Ke[0],Ke=Ke[1],p.G==2)if(Ke[0]=="c"){p.K=Ke[1],p.ia=Ke[2];let un=Ke[3];un!=null&&(p.la=un,p.j.info("VER="+p.la));let dn=Ke[4];dn!=null&&(p.Aa=dn,p.j.info("SVER="+p.Aa));let wa=Ke[5];wa!=null&&typeof wa=="number"&&0<wa&&(g=1.5*wa,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let Sr=l.g;if(Sr){let Rh=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rh){var O=g.h;O.g||Rh.indexOf("spdy")==-1&&Rh.indexOf("quic")==-1&&Rh.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(cy(O,O.h),O.h=null))}if(g.D){let fy=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;fy&&(g.ya=fy,lt(g.I,g.D,fy))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var H=l;if(g.qa=nS(g,g.J?g.ia:null,g.W),H.K){ND(g.h,H);var nt=H,en=g.L;en&&(nt.I=en),nt.B&&(oy(nt),_h(nt)),g.g=H}else JD(g);0<p.i.length&&Dh(p)}else Ke[0]!="stop"&&Ke[0]!="close"||os(p,7);else p.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?os(p,7):uy(p):Ke[0]!="noop"&&p.l&&p.l.ta(Ke),p.v=0)}}Fl(4)}catch{}}var C2=class{constructor(l,h){this.g=l,this.map=h}};function AD(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function RD(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function xD(l){return l.h?1:l.g?l.g.size:0}function ay(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function cy(l,h){l.g?l.g.add(h):l.h=h}function ND(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}AD.prototype.cancel=function(){if(this.i=MD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function MD(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return x(l.i)}function b2(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function D2(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function PD(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=D2(l),g=b2(l),P=g.length,O=0;O<P;O++)h.call(void 0,g[O],p&&p[O],l)}var kD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function S2(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),P=null;if(0<=g){var O=l[p].substring(0,g);P=l[p].substring(g+1)}else O=l[p];h(O,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function is(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof is){this.h=l.h,wh(this,l.j),this.o=l.o,this.g=l.g,Eh(this,l.s),this.l=l.l;var h=l.i,p=new $l;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),OD(this,p),this.m=l.m}else l&&(h=String(l).match(kD))?(this.h=!1,wh(this,h[1]||"",!0),this.o=jl(h[2]||""),this.g=jl(h[3]||"",!0),Eh(this,h[4]),this.l=jl(h[5]||"",!0),OD(this,h[6]||"",!0),this.m=jl(h[7]||"")):(this.h=!1,this.i=new $l(null,this.h))}is.prototype.toString=function(){var l=[],h=this.j;h&&l.push(Bl(h,FD,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(Bl(h,FD,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Bl(p,p.charAt(0)=="/"?x2:R2,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Bl(p,M2)),l.join("")};function Ci(l){return new is(l)}function wh(l,h,p){l.j=p?jl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Eh(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function OD(l,h,p){h instanceof $l?(l.i=h,P2(l.i,l.h)):(p||(h=Bl(h,N2)),l.i=new $l(h,l.h))}function lt(l,h,p){l.i.set(h,p)}function Ih(l){return lt(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function jl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Bl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,A2),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function A2(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var FD=/[#\/\?@]/g,R2=/[#\?:]/g,x2=/[#\?]/g,N2=/[#\?@]/g,M2=/#/g;function $l(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function mo(l){l.g||(l.g=new Map,l.h=0,l.i&&S2(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=$l.prototype,n.add=function(l,h){mo(this),this.i=null,l=ya(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function LD(l,h){mo(l),h=ya(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function VD(l,h){return mo(l),h=ya(l,h),l.g.has(h)}n.forEach=function(l,h){mo(this),this.g.forEach(function(p,g){p.forEach(function(P){l.call(h,P,g,this)},this)},this)},n.na=function(){mo(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let P=l[g];for(let O=0;O<P.length;O++)p.push(h[g])}return p},n.V=function(l){mo(this);let h=[];if(typeof l=="string")VD(this,l)&&(h=h.concat(this.g.get(ya(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return mo(this),this.i=null,l=ya(this,l),VD(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function UD(l,h,p){LD(l,h),0<p.length&&(l.i=null,l.g.set(ya(l,h),x(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let O=encodeURIComponent(String(g)),H=this.V(g);for(g=0;g<H.length;g++){var P=O;H[g]!==""&&(P+="="+encodeURIComponent(String(H[g]))),l.push(P)}}return this.i=l.join("&")};function ya(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function P2(l,h){h&&!l.j&&(mo(l),l.i=null,l.g.forEach(function(p,g){var P=g.toLowerCase();g!=P&&(LD(this,g),UD(this,P,p))},l)),l.j=h}function k2(l,h){let p=new Vl;if(a.Image){let g=new Image;g.onload=v(go,p,"TestLoadImage: loaded",!0,h,g),g.onerror=v(go,p,"TestLoadImage: error",!1,h,g),g.onabort=v(go,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(go,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function O2(l,h){let p=new Vl,g=new AbortController,P=setTimeout(()=>{g.abort(),go(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(O=>{clearTimeout(P),O.ok?go(p,"TestPingServer: ok",!0,h):go(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(P),go(p,"TestPingServer: error",!1,h)})}function go(l,h,p,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(p)}catch{}}function F2(){this.g=new y2}function L2(l,h,p){let g=p||"";try{PD(l,function(P,O){let H=P;u(P)&&(H=Xv(P)),h.push(g+O+"="+encodeURIComponent(H))})}catch(P){throw h.push(g+"type="+encodeURIComponent("_badmap")),P}}function Hl(l){this.l=l.Ub||null,this.j=l.eb||!1}I(Hl,Zv),Hl.prototype.g=function(){return new Th(this.l,this.j)},Hl.prototype.i=function(l){return function(){return l}}({});function Th(l,h){ln.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Th,ln),n=Th.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,ql(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Wl(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ql(this)),this.g&&(this.readyState=3,ql(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;jD(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function jD(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Wl(this):ql(this),this.readyState==3&&jD(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Wl(this))},n.Qa=function(l){this.g&&(this.response=l,Wl(this))},n.ga=function(){this.g&&Wl(this)};function Wl(l){l.readyState=4,l.l=null,l.j=null,l.v=null,ql(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function ql(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Th.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function BD(l){let h="";return de(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function ly(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=BD(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):lt(l,h,p))}function It(l){ln.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(It,ln);var V2=/^https?$/i,U2=["POST","PUT"];n=It.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ny.g(),this.v=this.o?gD(this.o):gD(ny),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){$D(this,O);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)p.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),P=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(U2,h,void 0))||g||P||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,H]of p)this.g.setRequestHeader(O,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qD(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){$D(this,O)}};function $D(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,HD(l),Ch(l)}function HD(l){l.A||(l.A=!0,Sn(l,"complete"),Sn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Sn(this,"complete"),Sn(this,"abort"),Ch(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ch(this,!0)),It.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?WD(this):this.bb())},n.bb=function(){WD(this)};function WD(l){if(l.h&&typeof s<"u"&&(!l.v[1]||bi(l)!=4||l.Z()!=2)){if(l.u&&bi(l)==4)hD(l.Ea,0,l);else if(Sn(l,"readystatechange"),bi(l)==4){l.h=!1;try{let H=l.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=H===0){var P=String(l.D).match(kD)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),g=!V2.test(P?P.toLowerCase():"")}p=g}if(p)Sn(l,"complete"),Sn(l,"success");else{l.m=6;try{var O=2<bi(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",HD(l)}}finally{Ch(l)}}}}function Ch(l,h){if(l.g){qD(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||Sn(l,"ready");try{p.onreadystatechange=g}catch{}}}function qD(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function bi(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<bi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),v2(h)}};function zD(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function j2(l){let h={};l=(l.g&&2<=bi(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(q(l[g]))continue;var p=N(l[g]);let P=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[P]||[];h[P]=O,O.push(p)}R(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function GD(l){this.Aa=0,this.i=[],this.j=new Vl,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zl("baseRetryDelayMs",5e3,l),this.cb=zl("retryDelaySeedMs",1e4,l),this.Wa=zl("forwardChannelMaxRetries",2,l),this.wa=zl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new AD(l&&l.concurrentRequestLimit),this.Da=new F2,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=GD.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,g){An(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=nS(this,null,this.W),Dh(this)};function uy(l){if(KD(l),l.G==3){var h=l.U++,p=Ci(l.I);if(lt(p,"SID",l.K),lt(p,"RID",h),lt(p,"TYPE","terminate"),Gl(l,p),h=new po(l,l.j,h),h.L=2,h.v=Ih(Ci(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=rS(h.j,null),h.g.ea(h.v)),h.F=Date.now(),_h(h)}tS(l)}function bh(l){l.g&&(hy(l),l.g.cancel(),l.g=null)}function KD(l){bh(l),l.u&&(a.clearTimeout(l.u),l.u=null),Sh(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Dh(l){if(!RD(l.h)&&!l.s){l.s=!0;var h=l.Ga;xl||sD(),Nl||(xl(),Nl=!0),Hv.add(h,l),l.B=0}}function B2(l,h){return xD(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Ll(m(l.Ga,l,h),eS(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let P=new po(this,this.j,l),O=this.o;if(this.S&&(O?(O=E(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(P.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=QD(this,P,h),p=Ci(this.I),lt(p,"RID",l),lt(p,"CVER",22),this.D&&lt(p,"X-HTTP-Session-Id",this.D),Gl(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(BD(O)))+"&"+h:this.m&&ly(p,this.m,O)),cy(this.h,P),this.Ua&&lt(p,"TYPE","init"),this.P?(lt(p,"$req",h),lt(p,"SID","null"),P.T=!0,iy(P,p,null)):iy(P,p,h),this.G=2}}else this.G==3&&(l?YD(this,l):this.i.length==0||RD(this.h)||YD(this))};function YD(l,h){var p;h?p=h.l:p=l.U++;let g=Ci(l.I);lt(g,"SID",l.K),lt(g,"RID",p),lt(g,"AID",l.T),Gl(l,g),l.m&&l.o&&ly(g,l.m,l.o),p=new po(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=QD(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),cy(l.h,p),iy(p,g,h)}function Gl(l,h){l.H&&de(l.H,function(p,g){lt(h,g,p)}),l.l&&PD({},function(p,g){lt(h,g,p)})}function QD(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var P=l.i;let O=-1;for(;;){let H=["count="+p];O==-1?0<p?(O=P[0].g,H.push("ofs="+O)):O=0:H.push("ofs="+O);let nt=!0;for(let en=0;en<p;en++){let Ke=P[en].g,un=P[en].map;if(Ke-=O,0>Ke)O=Math.max(0,P[en].g-100),nt=!1;else try{L2(un,H,"req"+Ke+"_")}catch{g&&g(un)}}if(nt){g=H.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function JD(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;xl||sD(),Nl||(xl(),Nl=!0),Hv.add(h,l),l.v=0}}function dy(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Ll(m(l.Fa,l),eS(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,XD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Ll(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,An(10),bh(this),XD(this))};function hy(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function XD(l){l.g=new po(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=Ci(l.qa);lt(h,"RID","rpc"),lt(h,"SID",l.K),lt(h,"AID",l.T),lt(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&lt(h,"TO",l.ja),lt(h,"TYPE","xmlhttp"),Gl(l,h),l.m&&l.o&&ly(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Ih(Ci(h)),p.m=null,p.P=!0,bD(p,l)}n.Za=function(){this.C!=null&&(this.C=null,bh(this),dy(this),An(19))};function Sh(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function ZD(l,h){var p=null;if(l.g==h){Sh(l),hy(l),l.g=null;var g=2}else if(ay(l.h,h))p=h.D,ND(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var P=l.B;g=gh(),Sn(g,new ED(g,p)),Dh(l)}else JD(l);else if(P=h.s,P==3||P==0&&0<h.X||!(g==1&&B2(l,h)||g==2&&dy(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),P){case 1:os(l,5);break;case 4:os(l,10);break;case 3:os(l,6);break;default:os(l,2)}}}function eS(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function os(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let P=!g;g=new is(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||wh(g,"https"),Ih(g),P?k2(g.toString(),p):O2(g.toString(),p)}else An(2);l.G=0,l.l&&l.l.sa(h),tS(l),KD(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),An(2)):(this.j.info("Failed to ping google.com"),An(1))};function tS(l){if(l.G=0,l.ka=[],l.l){let h=MD(l.h);(h.length!=0||l.i.length!=0)&&(A(l.ka,h),A(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function nS(l,h,p){var g=p instanceof is?Ci(p):new is(p);if(g.g!="")h&&(g.g=h+"."+g.g),Eh(g,g.s);else{var P=a.location;g=P.protocol,h=h?h+"."+P.hostname:P.hostname,P=+P.port;var O=new is(null);g&&wh(O,g),h&&(O.g=h),P&&Eh(O,P),p&&(O.l=p),g=O}return p=l.D,h=l.ya,p&&h&&lt(g,p,h),lt(g,"VER",l.la),Gl(l,g),g}function rS(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new It(new Hl({eb:p})):new It(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function iS(){}n=iS.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ah(){}Ah.prototype.g=function(l,h){return new Qn(l,h)};function Qn(l,h){ln.call(this),this.g=new GD(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!q(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new _a(this)}I(Qn,ln),Qn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Qn.prototype.close=function(){uy(this.g)},Qn.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Xv(l),l=p);h.i.push(new C2(h.Ya++,l)),h.G==3&&Dh(h)},Qn.prototype.N=function(){this.g.l=null,delete this.j,uy(this.g),delete this.g,Qn.aa.N.call(this)};function oS(l){ey.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(oS,ey);function sS(){ty.call(this),this.status=1}I(sS,ty);function _a(l){this.g=l}I(_a,iS),_a.prototype.ua=function(){Sn(this.g,"a")},_a.prototype.ta=function(l){Sn(this.g,new oS(l))},_a.prototype.sa=function(l){Sn(this.g,new sS)},_a.prototype.ra=function(){Sn(this.g,"b")},Ah.prototype.createWebChannel=Ah.prototype.g,Qn.prototype.send=Qn.prototype.o,Qn.prototype.open=Qn.prototype.m,Qn.prototype.close=Qn.prototype.close,GI=Ki.createWebChannelTransport=function(){return new Ah},zI=Ki.getStatEventTarget=function(){return gh()},qI=Ki.Event=ns,Nm=Ki.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},vh.NO_ERROR=0,vh.TIMEOUT=8,vh.HTTP_ERROR=6,fd=Ki.ErrorCode=vh,ID.COMPLETE="complete",WI=Ki.EventType=ID,vD.EventType=Ol,Ol.OPEN="a",Ol.CLOSE="b",Ol.ERROR="c",Ol.MESSAGE="d",ln.prototype.listen=ln.prototype.K,bc=Ki.WebChannel=vD,Z6=Ki.FetchXmlHttpFactory=Hl,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,HI=Ki.XhrIo=It}).apply(typeof xm<"u"?xm:typeof self<"u"?self:typeof window<"u"?window:{});var ik="@firebase/firestore";var Jt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Jt.UNAUTHENTICATED=new Jt(null),Jt.GOOGLE_CREDENTIALS=new Jt("google-credentials-uid"),Jt.FIRST_PARTY=new Jt("first-party-uid"),Jt.MOCK_USER=new Jt("mock-user");var qc="11.2.0";var Gs=new lr("@firebase/firestore");function Dc(){return Gs.logLevel}function Q(n,...e){if(Gs.logLevel<=tn.DEBUG){let t=e.map(MT);Gs.debug(`Firestore (${qc}): ${n}`,...t)}}function Yi(n,...e){if(Gs.logLevel<=tn.ERROR){let t=e.map(MT);Gs.error(`Firestore (${qc}): ${n}`,...t)}}function Pc(n,...e){if(Gs.logLevel<=tn.WARN){let t=e.map(MT);Gs.warn(`Firestore (${qc}): ${n}`,...t)}}function MT(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function he(n="Unexpected state"){let e=`FIRESTORE (${qc}) INTERNAL ASSERTION FAILED: `+n;throw Yi(e),new Error(e)}function Ze(n,e){n||he()}function _e(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},J=class extends Jn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var di=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Vm=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},XI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jt.UNAUTHENTICATED))}shutdown(){}},ZI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},e0=class{constructor(e){this.t=e,this.currentUser=Jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new di;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new di,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new di)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ze(typeof r.accessToken=="string"),new Vm(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new Jt(e)}},t0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Jt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},n0=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new t0(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},r0=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},i0=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ze(this.o===void 0);let r=o=>{o.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,Q("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ze(typeof t.token=="string"),this.R=t.token,new r0(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function e9(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Um=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=e9(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Le(n,e){return n<e?-1:n>e?1:0}function kc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Rt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new J(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new J(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new J(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ie=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Rt(0,0))}static max(){return new n(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var jm=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(),r===void 0?r=e.length-t:r>e.length-t&&he(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gi.fromString(e.substring(4,e.length-2))}},_t=class n extends jm{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new J(L.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},t9=/^[_a-zA-Z][_a-zA-Z0-9]*$/,or=class n extends jm{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return t9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new J(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new J(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ae=class n{constructor(e){this.path=e}static fromPath(e){return new n(_t.fromString(e))}static fromName(e){return new n(_t.fromString(e).popFirst(5))}static empty(){return new n(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return _t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new _t(e.slice()))}};var o0=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};o0.UNKNOWN_ID=-1;function n9(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new Ks(i,ae.empty(),e)}function r9(n){return new Ks(n.readTime,n.key,-1)}var Ks=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ie.min(),ae.empty(),-1)}static max(){return new n(Ie.max(),ae.empty(),-1)}};function i9(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}var o9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",s0=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function zc(n){return y(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==o9)throw n;Q("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function s9(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gc(n){return n.name==="IndexedDbTransactionError"}var PT=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _g(n){return n==null}function _d(n){return n===0&&1/n==-1/0}function a9(n){return typeof n=="number"&&Number.isInteger(n)&&!_d(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function c9(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ok(e)),e=l9(n.get(t),e);return ok(e)}function l9(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function ok(n){return n+""}var u9=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ihe=[...u9,"documentOverlays"],d9=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],h9=d9,f9=[...h9,"indexConfiguration","indexState","indexEntries"];var ohe=[...f9,"globals"];function sk(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ta(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jk(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var xt=class n{constructor(e,t){this.comparator=e,this.root=t||hi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xc(this.root,e,this.comparator,!0)}},xc=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw he();let e=this.left.check();if(e!==this.right.check())throw he();return e+(this.isRed()?0:1)}};hi.EMPTY=null,hi.RED=!0,hi.BLACK=!1;hi.EMPTY=new class{constructor(){this.size=0}get key(){throw he()}get value(){throw he()}get color(){throw he()}get left(){throw he()}get right(){throw he()}copy(e,t,r,i,o){return this}insert(e,t,r){return new hi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xt=class n{constructor(e){this.comparator=e,this.data=new xt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bm(this.data.getIterator())}getIteratorFrom(e){return new Bm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Bm=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ui=class n{constructor(e){this.fields=e,e.sort(or.comparator)}static empty(){return new n([])}unionWith(e){let t=new Xt(or.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return kc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var $m=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var In=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new $m("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};In.EMPTY_BYTE_STRING=new In("");var p9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(n){if(Ze(!!n),typeof n=="string"){let e=0,t=p9.exec(n);if(Ze(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:mt(n.seconds),nanos:mt(n.nanos)}}function mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ji(n){return typeof n=="string"?In.fromBase64String(n):In.fromUint8Array(n)}function kT(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wg(n){let e=n.mapValue.fields.__previous_value__;return kT(e)?wg(e):e}function wd(n){let e=Qi(n.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}var a0=class{constructor(e,t,r,i,o,s,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Hm=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Mm={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ko(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kT(n)?4:$k(n)?9007199254740991:Bk(n)?10:11:he()}function mi(n,e){if(n===e)return!0;let t=Ko(n);if(t!==Ko(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wd(n).isEqual(wd(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Qi(i.timestampValue),a=Qi(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Ji(i.bytesValue).isEqual(Ji(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return mt(i.geoPointValue.latitude)===mt(o.geoPointValue.latitude)&&mt(i.geoPointValue.longitude)===mt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return mt(i.integerValue)===mt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=mt(i.doubleValue),a=mt(o.doubleValue);return s===a?_d(s)===_d(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return kc(n.arrayValue.values||[],e.arrayValue.values||[],mi);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(sk(s)!==sk(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!mi(s[c],a[c])))return!1;return!0}(n,e);default:return he()}}function Ed(n,e){return(n.values||[]).find(t=>mi(t,e))!==void 0}function Oc(n,e){if(n===e)return 0;let t=Ko(n),r=Ko(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=mt(o.integerValue||o.doubleValue),c=mt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ak(n.timestampValue,e.timestampValue);case 4:return ak(wd(n),wd(e));case 5:return Le(n.stringValue,e.stringValue);case 6:return function(o,s){let a=Ji(o),c=Ji(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=Le(a[u],c[u]);if(d!==0)return d}return Le(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Le(mt(o.latitude),mt(s.latitude));return a!==0?a:Le(mt(o.longitude),mt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return ck(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,d;let f=o.fields||{},m=s.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=m.value)===null||c===void 0?void 0:c.arrayValue,x=Le(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:ck(v,I)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Mm.mapValue&&s===Mm.mapValue)return 0;if(o===Mm.mapValue)return 1;if(s===Mm.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=Le(c[f],d[f]);if(m!==0)return m;let v=Oc(a[c[f]],u[d[f]]);if(v!==0)return v}return Le(c.length,d.length)}(n.mapValue,e.mapValue);default:throw he()}}function ak(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);let t=Qi(n),r=Qi(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function ck(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Oc(t[i],r[i]);if(o)return o}return Le(t.length,r.length)}function Fc(n){return c0(n)}function c0(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Qi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ji(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ae.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=c0(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${c0(t.fields[s])}`;return i+"}"}(n.mapValue):he()}function Om(n){switch(Ko(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=wg(n);return e?16+Om(e):16;case 5:return 2*n.stringValue.length;case 6:return Ji(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+Om(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return ta(r.fields,(o,s)=>{i+=o.length+Om(s)}),i}(n.mapValue);default:throw he()}}function lk(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function l0(n){return!!n&&"integerValue"in n}function OT(n){return!!n&&"arrayValue"in n}function uk(n){return!!n&&"nullValue"in n}function dk(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Fm(n){return!!n&&"mapValue"in n}function Bk(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function md(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ta(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=md(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=md(n.arrayValue.values[t]);return e}return Object.assign({},n)}function $k(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var $r=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Fm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=md(t)}setAll(e){let t=or.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=md(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Fm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return mi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Fm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ta(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(md(this.value))}};function Hk(n){let e=[];return ta(n.fields,(t,r)=>{let i=new or([t]);if(Fm(r)){let o=Hk(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ui(e)}var Hr=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ie.min(),Ie.min(),Ie.min(),$r.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ie.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ie.min(),Ie.min(),$r.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ie.min(),Ie.min(),$r.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$r.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$r.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Lc=class{constructor(e,t){this.position=e,this.inclusive=t}};function hk(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ae.comparator(ae.fromName(s.referenceValue),t.key):r=Oc(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function fk(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!mi(n.position[t],e.position[t]))return!1;return!0}var Vc=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function m9(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Wm=class{},Ut=class n extends Wm{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new d0(e,t,r):t==="array-contains"?new p0(e,r):t==="in"?new m0(e,r):t==="not-in"?new g0(e,r):t==="array-contains-any"?new v0(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new h0(e,r):new f0(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Oc(t,this.value)):t!==null&&Ko(this.value)===Ko(t)&&this.matchesComparison(Oc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Wr=class n extends Wm{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Wk(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Wk(n){return n.op==="and"}function qk(n){return g9(n)&&Wk(n)}function g9(n){for(let e of n.filters)if(e instanceof Wr)return!1;return!0}function u0(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+Fc(n.value);if(qk(n))return n.filters.map(e=>u0(e)).join(",");{let e=n.filters.map(t=>u0(t)).join(",");return`${n.op}(${e})`}}function zk(n,e){return n instanceof Ut?function(r,i){return i instanceof Ut&&r.op===i.op&&r.field.isEqual(i.field)&&mi(r.value,i.value)}(n,e):n instanceof Wr?function(r,i){return i instanceof Wr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&zk(s,i.filters[a]),!0):!1}(n,e):void he()}function Gk(n){return n instanceof Ut?function(t){return`${t.field.canonicalString()} ${t.op} ${Fc(t.value)}`}(n):n instanceof Wr?function(t){return t.op.toString()+" {"+t.getFilters().map(Gk).join(" ,")+"}"}(n):"Filter"}var d0=class extends Ut{constructor(e,t,r){super(e,t,r),this.key=ae.fromName(r.referenceValue)}matches(e){let t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}},h0=class extends Ut{constructor(e,t){super(e,"in",t),this.keys=Kk("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},f0=class extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=Kk("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Kk(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ae.fromName(r.referenceValue))}var p0=class extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return OT(t)&&Ed(t.arrayValue,this.value)}},m0=class extends Ut{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Ed(this.value.arrayValue,t)}},g0=class extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ed(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Ed(this.value.arrayValue,t)}},v0=class extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!OT(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ed(this.value.arrayValue,r))}};var y0=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function pk(n,e=null,t=[],r=[],i=null,o=null,s=null){return new y0(n,e,t,r,i,o,s)}function FT(n){let e=_e(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>u0(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),_g(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fc(r)).join(",")),e.ue=t}return e.ue}function LT(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!m9(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zk(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!fk(n.startAt,e.startAt)&&fk(n.endAt,e.endAt)}function _0(n){return ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ys=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function v9(n,e,t,r,i,o,s,a){return new Ys(n,e,t,r,i,o,s,a)}function VT(n){return new Ys(n)}function mk(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Yk(n){return n.collectionGroup!==null}function gd(n){let e=_e(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Xt(or.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Vc(o,r))}),t.has(or.keyField().canonicalString())||e.ce.push(new Vc(or.keyField(),r))}return e.ce}function fi(n){let e=_e(n);return e.le||(e.le=y9(e,gd(n))),e.le}function y9(n,e){if(n.limitType==="F")return pk(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Vc(i.field,o)});let t=n.endAt?new Lc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Lc(n.startAt.position,n.startAt.inclusive):null;return pk(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function w0(n,e){let t=n.filters.concat([e]);return new Ys(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function E0(n,e,t){return new Ys(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Eg(n,e){return LT(fi(n),fi(e))&&n.limitType===e.limitType}function Qk(n){return`${FT(fi(n))}|lt:${n.limitType}`}function Sc(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Gk(i)).join(", ")}]`),_g(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fc(i)).join(",")),`Target(${r})`}(fi(n))}; limitType=${n.limitType})`}function Ig(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ae.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of gd(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=hk(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,gd(r),i)||r.endAt&&!function(s,a,c){let u=hk(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,gd(r),i))}(n,e)}function _9(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Jk(n){return(e,t)=>{let r=!1;for(let i of gd(n)){let o=w9(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function w9(n,e,t){let r=n.field.isKeyField()?ae.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?Oc(c,u):he()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he()}}var Xi=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return jk(this.inner)}size(){return this.innerSize}};var E9=new xt(ae.comparator);function Zi(){return E9}var Xk=new xt(ae.comparator);function pd(...n){let e=Xk;for(let t of n)e=e.insert(t.key,t);return e}function Zk(n){let e=Xk;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Hs(){return vd()}function eO(){return vd()}function vd(){return new Xi(n=>n.toString(),(n,e)=>n.isEqual(e))}var I9=new xt(ae.comparator),T9=new Xt(ae.comparator);function ke(...n){let e=T9;for(let t of n)e=e.add(t);return e}var C9=new Xt(Le);function b9(){return C9}function UT(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function tO(n){return{integerValue:""+n}}function D9(n,e){return a9(e)?tO(e):UT(n,e)}var Uc=class{constructor(){this._=void 0}};function S9(n,e,t){return n instanceof jc?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&kT(o)&&(o=wg(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Qs?rO(n,e):n instanceof Js?iO(n,e):function(i,o){let s=nO(i,o),a=gk(s)+gk(i.Pe);return l0(s)&&l0(i.Pe)?tO(a):UT(i.serializer,a)}(n,e)}function A9(n,e,t){return n instanceof Qs?rO(n,e):n instanceof Js?iO(n,e):t}function nO(n,e){return n instanceof Bc?function(r){return l0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var jc=class extends Uc{},Qs=class extends Uc{constructor(e){super(),this.elements=e}};function rO(n,e){let t=oO(e);for(let r of n.elements)t.some(i=>mi(i,r))||t.push(r);return{arrayValue:{values:t}}}var Js=class extends Uc{constructor(e){super(),this.elements=e}};function iO(n,e){let t=oO(e);for(let r of n.elements)t=t.filter(i=>!mi(i,r));return{arrayValue:{values:t}}}var Bc=class extends Uc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function gk(n){return mt(n.integerValue||n.doubleValue)}function oO(n){return OT(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function R9(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Qs&&i instanceof Qs||r instanceof Js&&i instanceof Js?kc(r.elements,i.elements,mi):r instanceof Bc&&i instanceof Bc?mi(r.Pe,i.Pe):r instanceof jc&&i instanceof jc}(n.transform,e.transform)}var I0=class{constructor(e,t){this.version=e,this.transformResults=t}},zs=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Lm(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var $c=class{};function sO(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new qm(n.key,zs.none()):new Xs(n.key,n.data,zs.none());{let t=n.data,r=$r.empty(),i=new Xt(or.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new eo(n.key,r,new ui(i.toArray()),zs.none())}}function x9(n,e,t){n instanceof Xs?function(i,o,s){let a=i.value.clone(),c=yk(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof eo?function(i,o,s){if(!Lm(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=yk(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(aO(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function yd(n,e,t,r){return n instanceof Xs?function(o,s,a,c){if(!Lm(o.precondition,s))return a;let u=o.value.clone(),d=_k(o.fieldTransforms,c,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof eo?function(o,s,a,c){if(!Lm(o.precondition,s))return a;let u=_k(o.fieldTransforms,c,s),d=s.data;return d.setAll(aO(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(o,s,a){return Lm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function N9(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=nO(r.transform,i||null);o!=null&&(t===null&&(t=$r.empty()),t.set(r.field,o))}return t||null}function vk(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&kc(r,i,(o,s)=>R9(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Xs=class extends $c{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},eo=class extends $c{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function aO(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function yk(n,e,t){let r=new Map;Ze(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,A9(s,a,t[i]))}return r}function _k(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,S9(o,s,e))}return r}var qm=class extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},T0=class extends $c{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var C0=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&x9(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=yd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=eO();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=sO(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ke())}isEqual(e){return this.batchId===e.batchId&&kc(this.mutations,e.mutations,(t,r)=>vk(t,r))&&kc(this.baseMutations,e.baseMutations,(t,r)=>vk(t,r))}},b0=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ze(e.mutations.length===r.length);let i=function(){return I9}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var D0=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var S0=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Lt,He;function M9(n){switch(n){default:return he();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function cO(n){if(n===void 0)return Yi("GRPC error has no .code"),L.UNKNOWN;switch(n){case Lt.OK:return L.OK;case Lt.CANCELLED:return L.CANCELLED;case Lt.UNKNOWN:return L.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return L.INTERNAL;case Lt.UNAVAILABLE:return L.UNAVAILABLE;case Lt.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Lt.NOT_FOUND:return L.NOT_FOUND;case Lt.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Lt.ABORTED:return L.ABORTED;case Lt.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Lt.DATA_LOSS:return L.DATA_LOSS;default:return he()}}(He=Lt||(Lt={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";var wk=null;function P9(){return new TextEncoder}var k9=new Gi([4294967295,4294967295],0);function Ek(n){let e=P9().encode(n),t=new $I;return t.update(e),new Uint8Array(t.digest())}function Ik(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Gi([t,r],0),new Gi([i,o],0)]}var A0=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ws(`Invalid padding: ${t}`);if(r<0)throw new Ws(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ws(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ws(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Gi.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Gi.fromNumber(r)));return i.compare(k9)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=Ek(e),[r,i]=Ik(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let t=Ek(e),[r,i]=Ik(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ws=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var zm=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Id.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ie.min(),i,new xt(Le),Zi(),ke())}},Id=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ke(),ke(),ke())}};var Nc=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Gm=class{constructor(e,t){this.targetId=e,this.me=t}},Km=class{constructor(e,t,r=In.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ym=class{constructor(){this.fe=0,this.ge=Tk(),this.pe=In.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ke(),t=ke(),r=ke();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he()}}),new Id(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Tk()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ze(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},R0=class{constructor(e){this.Be=e,this.Le=new Map,this.ke=Zi(),this.qe=Pm(),this.Qe=Pm(),this.Ke=new xt(Le)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:he()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(_0(o))if(r===0){let s=new ae(o.path);this.We(t,s,Hr.newNoDocument(s,Ie.min()))}else Ze(r===1);else{let s=this.Ze(t);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,u)}wk?.tt(function(d,f,m,v,I){var x,A,F,q,z,re;let tt={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},de=f.unchangedNames;return de&&(tt.bloomFilter={applied:I===0,hashCount:(x=de?.hashCount)!==null&&x!==void 0?x:0,bitmapLength:(q=(F=(A=de?.bits)===null||A===void 0?void 0:A.bitmap)===null||F===void 0?void 0:F.length)!==null&&q!==void 0?q:0,padding:(re=(z=de?.bits)===null||z===void 0?void 0:z.padding)!==null&&re!==void 0?re:0,mightContain:R=>{var E;return(E=v?.mightContain(R))!==null&&E!==void 0&&E}}),tt}(s,e.me,this.Be.nt(),a,c))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=Ji(r).toUint8Array()}catch(c){if(c instanceof $m)return Pc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new A0(s,i,o)}catch(c){return Pc(c instanceof Ws?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Le.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&_0(a.target)){let c=new ae(a.target.path);this.st(c).has(s)||this.ot(s,c)||this.We(s,c,Hr.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ke();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new zm(e,t,this.Ke,this.ke,r);return this.ke=Zi(),this.qe=Pm(),this.Qe=Pm(),this.Ke=new xt(Le),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new Ym,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Xt(Le),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Xt(Le),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new Ym),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function Pm(){return new xt(ae.comparator)}function Tk(){return new xt(ae.comparator)}var O9={asc:"ASCENDING",desc:"DESCENDING"},F9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},L9={and:"AND",or:"OR"},x0=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function N0(n,e){return n.useProto3Json||_g(e)?e:{value:e}}function Qm(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lO(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function V9(n,e){return Qm(n,e.toTimestamp())}function pi(n){return Ze(!!n),Ie.fromTimestamp(function(t){let r=Qi(t);return new Rt(r.seconds,r.nanos)}(n))}function jT(n,e){return M0(n,e).canonicalString()}function M0(n,e){let t=function(i){return new _t(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function uO(n){let e=_t.fromString(n);return Ze(mO(e)),e}function P0(n,e){return jT(n.databaseId,e.path)}function KI(n,e){let t=uO(e);if(t.get(1)!==n.databaseId.projectId)throw new J(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new J(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ae(hO(t))}function dO(n,e){return jT(n.databaseId,e)}function U9(n){let e=uO(n);return e.length===4?_t.emptyPath():hO(e)}function k0(n){return new _t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hO(n){return Ze(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ck(n,e,t){return{name:P0(n,e),fields:t.value.mapValue.fields}}function j9(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:he()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(Ze(d===void 0||typeof d=="string"),In.fromBase64String(d||"")):(Ze(d===void 0||d instanceof Buffer||d instanceof Uint8Array),In.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let d=u.code===void 0?L.UNKNOWN:cO(u.code);return new J(d,u.message||"")}(s);t=new Km(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=KI(n,r.document.name),o=pi(r.document.updateTime),s=r.document.createTime?pi(r.document.createTime):Ie.min(),a=new $r({mapValue:{fields:r.document.fields}}),c=Hr.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new Nc(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=KI(n,r.document),o=r.readTime?pi(r.readTime):Ie.min(),s=Hr.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Nc([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=KI(n,r.document),o=r.removedTargetIds||[];t=new Nc([],o,i,null)}else{if(!("filter"in e))return he();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new S0(i,o),a=r.targetId;t=new Gm(a,s)}}return t}function B9(n,e){let t;if(e instanceof Xs)t={update:Ck(n,e.key,e.value)};else if(e instanceof qm)t={delete:P0(n,e.key)};else if(e instanceof eo)t={update:Ck(n,e.key,e.data),updateMask:Q9(e.fieldMask)};else{if(!(e instanceof T0))return he();t={verify:P0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof jc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Qs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Js)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Bc)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw he()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:V9(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he()}(n,e.precondition)),t}function $9(n,e){return n&&n.length>0?(Ze(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?pi(i.updateTime):pi(o);return s.isEqual(Ie.min())&&(s=pi(o)),new I0(s,i.transformResults||[])}(t,e))):[]}function H9(n,e){return{documents:[dO(n,e.path)]}}function W9(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dO(n,i);let o=function(u){if(u.length!==0)return pO(Wr.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Ac(m.field),direction:G9(m.dir)}}(d))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=N0(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ct:t,parent:i}}function q9(n){let e=U9(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Ze(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];t.where&&(o=function(f){let m=fO(f);return m instanceof Wr&&qk(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(f){return f.map(m=>function(I){return new Vc(Rc(I.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,_g(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){let m=!!f.before,v=f.values||[];return new Lc(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let m=!f.before,v=f.values||[];return new Lc(v,m)}(t.endAt)),v9(e,i,s,o,a,"F",c,u)}function z9(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function fO(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Rc(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Rc(t.unaryFilter.field);return Ut.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Rc(t.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Rc(t.unaryFilter.field);return Ut.create(s,"!=",{nullValue:"NULL_VALUE"});default:return he()}}(n):n.fieldFilter!==void 0?function(t){return Ut.create(Rc(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return he()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Wr.create(t.compositeFilter.filters.map(r=>fO(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he()}}(t.compositeFilter.op))}(n):he()}function G9(n){return O9[n]}function K9(n){return F9[n]}function Y9(n){return L9[n]}function Ac(n){return{fieldPath:n.canonicalString()}}function Rc(n){return or.fromServerFormat(n.fieldPath)}function pO(n){return n instanceof Ut?function(t){if(t.op==="=="){if(dk(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NAN"}};if(uk(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(dk(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NOT_NAN"}};if(uk(t.value))return{unaryFilter:{field:Ac(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ac(t.field),op:K9(t.op),value:t.value}}}(n):n instanceof Wr?function(t){let r=t.getFilters().map(i=>pO(i));return r.length===1?r[0]:{compositeFilter:{op:Y9(t.op),filters:r}}}(n):he()}function Q9(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mO(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Td=class n{constructor(e,t,r,i,o=Ie.min(),s=Ie.min(),a=In.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var O0=class{constructor(e){this.ht=e}};function J9(n){let e=q9({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?E0(e,e.limit,"L"):e}var Jm=class{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(mt(e.integerValue));else if("doubleValue"in e){let r=mt(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),_d(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Qi(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Ji(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?$k(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Bk(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):he()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(mt(a)),this.gt(s,t),this.Et(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),ae.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};Jm.Ft=new Jm;var F0=class{constructor(){this.ln=new L0}addToCollectionParentIndex(e,t){return this.ln.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Ks.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},L0=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Xt(_t.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Xt(_t.comparator)).toArray()}};var ahe=new Uint8Array(0);var bk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};wr.DEFAULT_COLLECTION_PERCENTILE=10,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wr.DEFAULT=new wr(41943040,wr.DEFAULT_COLLECTION_PERCENTILE,wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wr.DISABLED=new wr(-1,0,0);var Cd=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function Dk([n,e],[t,r]){let i=Le(n,t);return i===0?Le(e,r):i}var V0=class{constructor(e){this.Gn=e,this.buffer=new Xt(Dk),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();Dk(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},U0=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>y(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gc(t)?Q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield zc(t)}yield this.Yn(3e5)}))}},j0=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return V.resolve(PT.oe);let r=new V0(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(bk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bk):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,a,c,u,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,t))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Dc()<=tn.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${f} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}};function X9(n,e){return new j0(n,e)}var B0=class{constructor(){this.changes=new Xi(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $0=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var H0=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&yd(r.mutation,i,ui.empty(),Rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ke()){let i=Hs();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=pd();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=Hs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ke()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Zi(),s=vd(),a=function(){return vd()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof eo)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),yd(d.mutation,u,d.mutation.getFieldMask(),Rt.now())):s.set(u.key,ui.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>s.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new $0(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=vd(),i=new xt((s,a)=>s-a),o=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||ui.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||ke()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=eO();d.forEach(m=>{if(!o.has(m)){let v=sO(t.get(m),r.get(m));v!==null&&f.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ae.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Yk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):V.resolve(Hs()),a=-1,c=o;return s.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,ke())).next(d=>({batchId:a,changes:Zk(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(r=>{let i=pd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=pd();return this.indexManager.getCollectionParents(e,o).next(a=>V.forEach(a,c=>{let u=function(f,m){return new Ys(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{s=s.insert(f,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let d=u.getKey();s.get(d)===null&&(s=s.insert(d,Hr.newInvalidDocument(d)))});let a=pd();return s.forEach((c,u)=>{let d=o.get(c);d!==void 0&&yd(d.mutation,u,ui.empty(),Rt.now()),Ig(t,u)&&(a=a.insert(c,u))}),a})}};var W0=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return V.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:pi(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:J9(i.bundledQuery),readTime:pi(i.readTime)}}(t)),V.resolve()}};var q0=class{constructor(){this.overlays=new xt(ae.comparator),this.dr=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Hs();return V.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=Hs(),o=t.length+1,s=new ae(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new xt((u,d)=>u-d),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Hs(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Hs(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new D0(t,r));let o=this.dr.get(t);o===void 0&&(o=ke(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}};var z0=class{constructor(){this.sessionToken=In.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var bd=class{constructor(){this.Er=new Xt(Vt.Ar),this.Rr=new Xt(Vt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){let r=new Vt(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Vt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new ae(new _t([])),r=new Vt(t,e),i=new Vt(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new ae(new _t([])),r=new Vt(t,e),i=new Vt(t,e+1),o=ke();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Vt(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Vt=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ae.comparator(e.key,t.key)||Le(e.br,t.br)}static Vr(e,t){return Le(e.br,t.br)||ae.comparator(e.key,t.key)}};var G0=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Xt(Vt.Ar)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new C0(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.vr=this.vr.add(new Vt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,t){return V.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Vt(t,0),i=new Vt(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let a=this.Cr(s.br);o.push(a)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Xt(Le);return t.forEach(i=>{let o=new Vt(i,0),s=new Vt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),V.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ae.isDocumentKey(o)||(o=o.child(""));let s=new Vt(new ae(o),0),a=new Xt(Le);return this.vr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.br)),!0)},s),V.resolve(this.Mr(a))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Ze(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return V.forEach(t.mutations,i=>{let o=new Vt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){let r=new Vt(t,0),i=this.vr.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var K0=class{constructor(e){this.Nr=e,this.docs=function(){return new xt(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Hr.newInvalidDocument(t))}getEntries(e,t){let r=Zi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Hr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Zi(),s=t.path,a=new ae(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||i9(r9(d),r)<=0||(i.has(d.key)||Ig(t,d))&&(o=o.insert(d.key,d.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,t,r,i){he()}Br(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Y0(this)}getSize(e){return V.resolve(this.size)}},Y0=class extends B0{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var Q0=class{constructor(e){this.persistence=e,this.Lr=new Xi(t=>FT(t),LT),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.kr=0,this.qr=new bd,this.targetCount=0,this.Qr=Cd.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),V.resolve()}Un(e){this.Lr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new Cd(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Un(t),V.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Lr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.qr.containsKey(t))}};var Xm=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new PT(0),this.Ur=!1,this.Ur=!0,this.Wr=new z0,this.referenceDelegate=e(this),this.Gr=new Q0(this),this.indexManager=new F0,this.remoteDocumentCache=function(i){return new K0(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new O0(t),this.jr=new W0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new q0,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new G0(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){Q("MemoryPersistence","Starting transaction:",e);let i=new J0(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return V.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},J0=class extends s0{constructor(e){super(),this.currentSequenceNumber=e}},X0=class n{constructor(e){this.persistence=e,this.Zr=new bd,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw he()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),V.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.ti,r=>{let i=ae.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,Ie.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return V.or([()=>V.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},Zm=class n{constructor(e,t){this.persistence=e,this.ri=new Xi(r=>c9(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=X9(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return V.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return V.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?V.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ie.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),V.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),V.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),V.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Om(e.data.value)),t}ir(e,t,r){return V.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return V.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Z0=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=ke(),i=ke();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var eT=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tT=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return fS()?8:s9(hn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new eT;return this.ts(e,t,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,t,s,a.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Dc()<=tn.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Sc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),V.resolve()):(Dc()<=tn.DEBUG&&Q("QueryEngine","Query:",Sc(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Dc()<=tn.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Sc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fi(t))):V.resolve())}Xi(e,t){if(mk(t))return V.resolve(null);let r=fi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=E0(t,null,"F"),r=fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ke(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.rs(t,a);return this.ss(t,u,s,c.readTime)?this.Xi(e,E0(t,null,"F")):this.os(e,u,t,c)}))})))}es(e,t,r,i){return mk(t)||i.isEqual(Ie.min())?V.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?V.resolve(null):(Dc()<=tn.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sc(t)),this.os(e,s,t,n9(i,-1)).next(a=>a))})}rs(e,t){let r=new Xt(Jk(e));return t.forEach((i,o)=>{Ig(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return Dc()<=tn.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Sc(t)),this.Zi.getDocumentsMatchingQuery(e,t,Ks.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var nT=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new xt(Le),this.cs=new Xi(o=>FT(o),LT),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new H0(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function Z9(n,e,t,r){return new nT(n,e,t,r)}function gO(n,e){return y(this,null,function*(){let t=_e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ke();for(let u of i){s.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of o){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ts:u,removedBatchIds:s,addedBatchIds:a}))})})})}function e8(n,e){let t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),v=V.resolve();return m.forEach(I=>{v=v.next(()=>d.getEntry(c,I)).next(x=>{let A=u.docVersions.get(I);Ze(A!==null),x.version.compareTo(A)<0&&(f.applyToRemoteDocument(x,u),x.isValidDocument()&&(x.setReadTime(u.commitVersion),d.addEntry(x)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vO(n){let e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function t8(n,e){let t=_e(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Gr.removeMatchingKeys(o,d.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(o,d.addedDocuments,f)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(In.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(x,A,F){return x.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(m,v,d)&&a.push(t.Gr.updateTargetData(o,v))});let c=Zi(),u=ke();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(n8(o,s,e.documentUpdates).next(d=>{c=d.Is,u=d.ds})),!r.isEqual(Ie.min())){let d=t.Gr.getLastRemoteSnapshotVersion(o).next(f=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.us=i,o))}function n8(n,e,t){let r=ke(),i=ke();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Zi();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):Q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Is:s,ds:i}})}function r8(n,e){let t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i8(n,e){let t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new Td(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function rT(n,e,t){return y(this,null,function*(){let r=_e(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Gc(s))throw s;Q("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function Sk(n,e,t){let r=_e(n),i=Ie.min(),o=ke();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,d){let f=_e(c),m=f.cs.get(d);return m!==void 0?V.resolve(f.us.get(m)):f.Gr.getTargetData(u,d)}(r,s,fi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:Ie.min(),t?o:ke())).next(a=>(o8(r,_9(e),a),{documents:a,Es:o})))}function o8(n,e,t){let r=n.ls.get(e)||Ie.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var eg=class{constructor(){this.activeTargetIds=b9()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var iT=class{constructor(){this._o=new eg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new eg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var oT=class{uo(e){}shutdown(){}};var tg=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){Q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var km=null;function YI(){return km===null?km=function(){return 268435456+Math.round(2147483648*Math.random())}():km++,"0x"+km.toString(16)}var s8={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var sT=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var En="WebChannelConnection",aT=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let a=YI(),c=this.No(t,r.toUriEncodedString());Q("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(u,o,s),this.Lo(t,c,u,i).then(d=>(Q("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw Pc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}ko(t,r,i,o,s,a){return this.Oo(t,r,i,o,s)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=s8[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){let o=YI();return new Promise((s,a)=>{let c=new HI;c.setWithCredentials(!0),c.listenOnce(WI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case fd.NO_ERROR:let d=c.getResponseJson();Q(En,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(d)),s(d);break;case fd.TIMEOUT:Q(En,`RPC '${e}' ${o} timed out`),a(new J(L.DEADLINE_EXCEEDED,"Request time out"));break;case fd.HTTP_ERROR:let f=c.getStatus();if(Q(En,`RPC '${e}' ${o} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let I=function(A){let F=A.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(F)>=0?F:L.UNKNOWN}(v.status);a(new J(I,v.message))}else a(new J(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new J(L.UNAVAILABLE,"Connection failed."));break;default:he()}}finally{Q(En,`RPC '${e}' ${o} completed.`)}});let u=JSON.stringify(i);Q(En,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",u,r,15)})}qo(e,t,r){let i=YI(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=GI(),a=zI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Bo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=o.join("");Q(En,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=s.createWebChannel(d,c),m=!1,v=!1,I=new sT({Eo:A=>{v?Q(En,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(Q(En,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),Q(En,`RPC '${e}' stream ${i} sending:`,A),f.send(A))},Ao:()=>f.close()}),x=(A,F,q)=>{A.listen(F,z=>{try{q(z)}catch(re){setTimeout(()=>{throw re},0)}})};return x(f,bc.EventType.OPEN,()=>{v||(Q(En,`RPC '${e}' stream ${i} transport opened.`),I.So())}),x(f,bc.EventType.CLOSE,()=>{v||(v=!0,Q(En,`RPC '${e}' stream ${i} transport closed`),I.Do())}),x(f,bc.EventType.ERROR,A=>{v||(v=!0,Pc(En,`RPC '${e}' stream ${i} transport errored:`,A),I.Do(new J(L.UNAVAILABLE,"The operation could not be completed")))}),x(f,bc.EventType.MESSAGE,A=>{var F;if(!v){let q=A.data[0];Ze(!!q);let z=q,re=z?.error||((F=z[0])===null||F===void 0?void 0:F.error);if(re){Q(En,`RPC '${e}' stream ${i} received error:`,re);let tt=re.status,de=function(T){let S=Lt[T];if(S!==void 0)return cO(S)}(tt),R=re.message;de===void 0&&(de=L.INTERNAL,R="Unknown error status: "+tt+" with message "+re.message),v=!0,I.Do(new J(de,R)),f.close()}else Q(En,`RPC '${e}' stream ${i} received:`,q),I.vo(q)}}),x(a,qI.STAT_EVENT,A=>{A.stat===Nm.PROXY?Q(En,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Nm.NOPROXY&&Q(En,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.bo()},0),I}};function QI(){return typeof document<"u"?document:null}function Tg(n){return new x0(n,!0)}var ng=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&Q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var rg=class{constructor(e,t,r,i,o,s,a,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new ng(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return y(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return y(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return y(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(Yi(t.toString()),Yi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new J(L.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>y(this,null,function*(){this.state=0,this.start()}))}d_(e){return Q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(Q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cT=class extends rg{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=j9(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ie.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ie.min():s.readTime?pi(s.readTime):Ie.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=k0(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=_0(c)?{documents:H9(o,c)}:{query:W9(o,c).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=lO(o,s.resumeToken);let u=N0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ie.min())>0){a.readTime=Qm(o,s.snapshotVersion.toTimestamp());let u=N0(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=z9(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=k0(this.serializer),t.removeTarget=e,this.c_(t)}},lT=class extends rg{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=$9(e.writeResults,e.commitTime),r=pi(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=k0(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>B9(this.serializer,r))};this.c_(t)}};var uT=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new J(L.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,M0(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(L.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,M0(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(L.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},dT=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Yi(t),this.C_=!1):Q("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var hT=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>y(this,null,function*(){na(this)&&(Q("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let u=_e(c);u.k_.add(4),yield Md(u),u.K_.set("Unknown"),u.k_.delete(4),yield Cg(u)})}(this))}))}),this.K_=new dT(r,i)}};function Cg(n){return y(this,null,function*(){if(na(n))for(let e of n.q_)yield e(!0)})}function Md(n){return y(this,null,function*(){for(let e of n.q_)yield e(!1)})}function yO(n,e){let t=_e(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),WT(t)?HT(t):Kc(t).s_()&&$T(t,e))}function BT(n,e){let t=_e(n),r=Kc(t);t.L_.delete(e),r.s_()&&_O(t,e),t.L_.size===0&&(r.s_()?r.a_():na(t)&&t.K_.set("Unknown"))}function $T(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Kc(n).V_(e)}function _O(n,e){n.U_.xe(e),Kc(n).m_(e)}function HT(n){n.U_=new R0({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Kc(n).start(),n.K_.F_()}function WT(n){return na(n)&&!Kc(n).i_()&&n.L_.size>0}function na(n){return _e(n).k_.size===0}function wO(n){n.U_=void 0}function a8(n){return y(this,null,function*(){n.K_.set("Online")})}function c8(n){return y(this,null,function*(){n.L_.forEach((e,t)=>{$T(n,e)})})}function l8(n,e){return y(this,null,function*(){wO(n),WT(n)?(n.K_.O_(e),HT(n)):n.K_.set("Unknown")})}function u8(n,e,t){return y(this,null,function*(){if(n.K_.set("Online"),e instanceof Km&&e.state===2&&e.cause)try{yield function(i,o){return y(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.L_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))})}(n,e)}catch(r){Q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ig(n,r)}else if(e instanceof Nc?n.U_.$e(e):e instanceof Gm?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ie.min()))try{let r=yield vO(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.U_.it(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=o.L_.get(u);d&&o.L_.set(u,d.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let d=o.L_.get(c);if(!d)return;o.L_.set(c,d.withResumeToken(In.EMPTY_BYTE_STRING,d.snapshotVersion)),_O(o,c);let f=new Td(d.target,c,u,d.sequenceNumber);$T(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){Q("RemoteStore","Failed to raise snapshot:",r),yield ig(n,r)}})}function ig(n,e,t){return y(this,null,function*(){if(!Gc(e))throw e;n.k_.add(1),yield Md(n),n.K_.set("Offline"),t||(t=()=>vO(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){Q("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Cg(n)}))})}function EO(n,e){return e().catch(t=>ig(n,t,e))}function bg(n){return y(this,null,function*(){let e=_e(n),t=Yo(e),r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;d8(e);)try{let i=yield r8(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,h8(e,i)}catch(i){yield ig(e,i)}IO(e)&&TO(e)})}function d8(n){return na(n)&&n.B_.length<10}function h8(n,e){n.B_.push(e);let t=Yo(n);t.s_()&&t.f_&&t.g_(e.mutations)}function IO(n){return na(n)&&!Yo(n).i_()&&n.B_.length>0}function TO(n){Yo(n).start()}function f8(n){return y(this,null,function*(){Yo(n).w_()})}function p8(n){return y(this,null,function*(){let e=Yo(n);for(let t of n.B_)e.g_(t.mutations)})}function m8(n,e,t){return y(this,null,function*(){let r=n.B_.shift(),i=b0.from(r,e,t);yield EO(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield bg(n)})}function g8(n,e){return y(this,null,function*(){e&&Yo(n).f_&&(yield function(r,i){return y(this,null,function*(){if(function(s){return M9(s)&&s!==L.ABORTED}(i.code)){let o=r.B_.shift();Yo(r).__(),yield EO(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield bg(r)}})}(n,e)),IO(n)&&TO(n)})}function Ak(n,e){return y(this,null,function*(){let t=_e(n);t.asyncQueue.verifyOperationInProgress(),Q("RemoteStore","RemoteStore received new credentials");let r=na(t);t.k_.add(3),yield Md(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Cg(t)})}function v8(n,e){return y(this,null,function*(){let t=_e(n);e?(t.k_.delete(2),yield Cg(t)):e||(t.k_.add(2),yield Md(t),t.K_.set("Unknown"))})}function Kc(n){return n.W_||(n.W_=function(t,r,i){let o=_e(t);return o.b_(),new cT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:a8.bind(null,n),mo:c8.bind(null,n),po:l8.bind(null,n),R_:u8.bind(null,n)}),n.q_.push(e=>y(this,null,function*(){e?(n.W_.__(),WT(n)?HT(n):n.K_.set("Unknown")):(yield n.W_.stop(),wO(n))}))),n.W_}function Yo(n){return n.G_||(n.G_=function(t,r,i){let o=_e(t);return o.b_(),new lT(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:f8.bind(null,n),po:g8.bind(null,n),p_:p8.bind(null,n),y_:m8.bind(null,n)}),n.q_.push(e=>y(this,null,function*(){e?(n.G_.__(),yield bg(n)):(yield n.G_.stop(),n.B_.length>0&&(Q("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}var fT=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new di,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function qT(n,e){if(Yi("AsyncQueue",`${e}: ${n}`),Gc(n))return new J(L.UNAVAILABLE,`${e}: ${n}`);throw n}var og=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ae.comparator(t.key,r.key):(t,r)=>ae.comparator(t.key,r.key),this.keyedMap=pd(),this.sortedSet=new xt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sg=class{constructor(){this.z_=new xt(ae.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):he():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},Hc=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,og.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var pT=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},mT=class{constructor(){this.queries=Rk(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=_e(t),o=i.queries;i.queries=Rk(),o.forEach((s,a)=>{for(let c of a.J_)c.onError(r)})})(this,new J(L.ABORTED,"Firestore shutting down"))}};function Rk(){return new Xi(n=>Qk(n),Eg)}function CO(n,e){return y(this,null,function*(){let t=_e(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new pT,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=qT(s,`Initialization of query '${Sc(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&zT(t)})}function bO(n,e){return y(this,null,function*(){let t=_e(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function y8(n,e){let t=_e(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&zT(t)}function _8(n,e,t){let r=_e(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function zT(n){n.X_.forEach(e=>{e.next()})}var gT,xk;(xk=gT||(gT={})).na="default",xk.Cache="cache";var ag=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==gT.Cache}};var cg=class{constructor(e){this.key=e}},lg=class{constructor(e){this.key=e}},vT=class{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ke(),this.mutatedKeys=ke(),this.Va=Jk(e),this.ma=new og(this.Va)}get fa(){return this.Ea}ga(e,t){let r=t?t.pa:new sg,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),v=Ig(this.query,f)?f:null,I=!!m&&this.mutatedKeys.has(m.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),A=!1;m&&v?m.data.isEqual(v.data)?I!==x&&(r.track({type:3,doc:v}),A=!0):this.ya(m,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.Va(v,c)>0||u&&this.Va(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),A=!0):m&&!v&&(r.track({type:1,doc:m}),A=!0,(c||u)&&(a=!0)),A&&(v?(s=s.add(v),o=x?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((d,f)=>function(v,I){let x=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he()}};return x(v)-x(I)}(d.type,f.type)||this.Va(d.doc,f.doc)),this.wa(r),i=i!=null&&i;let a=t&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,u=c!==this.Aa;return this.Aa=c,s.length!==0||u?{snapshot:new Hc(this.query,e.ma,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=ke(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new lg(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new cg(r))}),t}va(e){this.Ea=e.Es,this.Ra=ke();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Hc.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},yT=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},_T=class{constructor(e){this.key=e,this.Fa=!1}},wT=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Xi(a=>Qk(a),Eg),this.Oa=new Map,this.Na=new Set,this.Ba=new xt(ae.comparator),this.La=new Map,this.ka=new bd,this.qa={},this.Qa=new Map,this.Ka=Cd.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function w8(n,e,t=!0){return y(this,null,function*(){let r=NO(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield DO(r,e,t,!0),i})}function E8(n,e){return y(this,null,function*(){let t=NO(n);yield DO(t,e,!0,!1)})}function DO(n,e,t,r){return y(this,null,function*(){let i=yield i8(n.localStore,fi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield I8(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&yO(n.remoteStore,i),a})}function I8(n,e,t,r,i){return y(this,null,function*(){n.Ua=(f,m,v)=>function(x,A,F,q){return y(this,null,function*(){let z=A.view.ga(F);z.ss&&(z=yield Sk(x.localStore,A.query,!1).then(({documents:R})=>A.view.ga(R,z)));let re=q&&q.targetChanges.get(A.targetId),tt=q&&q.targetMismatches.get(A.targetId)!=null,de=A.view.applyChanges(z,x.isPrimaryClient,re,tt);return Mk(x,A.targetId,de.ba),de.snapshot})}(n,f,m,v);let o=yield Sk(n.localStore,e,!0),s=new vT(e,o.Es),a=s.ga(o.documents),c=Id.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);Mk(n,t,u.ba);let d=new yT(e,t,s);return n.xa.set(e,d),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),u.snapshot})}function T8(n,e,t){return y(this,null,function*(){let r=_e(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!Eg(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield rT(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&BT(r.remoteStore,i.targetId),ET(r,i.targetId)}).catch(zc))):(ET(r,i.targetId),yield rT(r.localStore,i.targetId,!0))})}function C8(n,e){return y(this,null,function*(){let t=_e(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),BT(t.remoteStore,r.targetId))})}function b8(n,e,t){return y(this,null,function*(){let r=M8(n);try{let i=yield function(s,a){let c=_e(s),u=Rt.now(),d=a.reduce((v,I)=>v.add(I.key),ke()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=Zi(),x=ke();return c.hs.getEntries(v,d).next(A=>{I=A,I.forEach((F,q)=>{q.isValidDocument()||(x=x.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,I)).next(A=>{f=A;let F=[];for(let q of a){let z=N9(q,f.get(q.key).overlayedDocument);z!=null&&F.push(new eo(q.key,z,Hk(z.value.mapValue),zs.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,F,a)}).next(A=>{m=A;let F=A.applyToLocalDocumentSet(f,x);return c.documentOverlayCache.saveOverlays(v,A.batchId,F)})}).then(()=>({batchId:m.batchId,changes:Zk(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.qa[s.currentUser.toKey()];u||(u=new xt(Le)),u=u.insert(a,c),s.qa[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Pd(r,i.changes),yield bg(r.remoteStore)}catch(i){let o=qT(i,"Failed to persist write");t.reject(o)}})}function SO(n,e){return y(this,null,function*(){let t=_e(n);try{let r=yield t8(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.La.get(o);s&&(Ze(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Ze(s.Fa):i.removedDocuments.size>0&&(Ze(s.Fa),s.Fa=!1))}),yield Pd(t,r,e)}catch(r){yield zc(r)}})}function Nk(n,e,t){let r=_e(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=_e(s);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.J_)m.ea(a)&&(u=!0)}),u&&zT(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function D8(n,e,t){return y(this,null,function*(){let r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.La.get(e),o=i&&i.key;if(o){let s=new xt(ae.comparator);s=s.insert(o,Hr.newNoDocument(o,Ie.min()));let a=ke().add(o),c=new zm(Ie.min(),new Map,new xt(Le),s,a);yield SO(r,c),r.Ba=r.Ba.remove(o),r.La.delete(e),GT(r)}else yield rT(r.localStore,e,!1).then(()=>ET(r,e,t)).catch(zc)})}function S8(n,e){return y(this,null,function*(){let t=_e(n),r=e.batch.batchId;try{let i=yield e8(t.localStore,e);RO(t,r,null),AO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Pd(t,i)}catch(i){yield zc(i)}})}function A8(n,e,t){return y(this,null,function*(){let r=_e(n);try{let i=yield function(s,a){let c=_e(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Ze(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);RO(r,e,t),AO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Pd(r,i)}catch(i){yield zc(i)}})}function AO(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function RO(n,e,t){let r=_e(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function ET(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||xO(n,r)})}function xO(n,e){n.Na.delete(e.path.canonicalString());let t=n.Ba.get(e);t!==null&&(BT(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),GT(n))}function Mk(n,e,t){for(let r of t)r instanceof cg?(n.ka.addReference(r.key,e),R8(n,r)):r instanceof lg?(Q("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||xO(n,r.key)):he()}function R8(n,e){let t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(Q("SyncEngine","New document in limbo: "+t),n.Na.add(r),GT(n))}function GT(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new ae(_t.fromString(e)),r=n.Ka.next();n.La.set(r,new _T(t)),n.Ba=n.Ba.insert(t,r),yO(n.remoteStore,new Td(fi(VT(t.path)),r,"TargetPurposeLimboResolution",PT.oe))}}function Pd(n,e,t){return y(this,null,function*(){let r=_e(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,c)=>{s.push(r.Ua(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=Z0.zi(c.targetId,u);o.push(f)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(c,u){return y(this,null,function*(){let d=_e(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.Wi,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>V.forEach(m.Gi,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Gc(f))throw f;Q("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let v=d.us.get(m),I=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(I);d.us=d.us.insert(m,x)}}})}(r.localStore,o))})}function x8(n,e){return y(this,null,function*(){let t=_e(n);if(!t.currentUser.isEqual(e)){Q("SyncEngine","User change. New user:",e.toKey());let r=yield gO(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(c=>{c.reject(new J(L.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Pd(t,r.Ts)}})}function N8(n,e){let t=_e(n),r=t.La.get(e);if(r&&r.Fa)return ke().add(r.key);{let i=ke(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let a=t.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function NO(n){let e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=SO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N8.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D8.bind(null,e),e.Ma.R_=y8.bind(null,e.eventManager),e.Ma.Wa=_8.bind(null,e.eventManager),e}function M8(n){let e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=S8.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=A8.bind(null,e),e}var MO=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=Tg(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return Z9(this.persistence,new tT,t.initialUser,this.serializer)}ja(t){return new Xm(X0.ei,this.serializer)}za(t){return new iT}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),IT=class extends MO{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ze(this.persistence.referenceDelegate instanceof Zm);let r=this.persistence.referenceDelegate.garbageCollector;return new U0(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?wr.withCacheSize(this.cacheSizeBytes):wr.DEFAULT;return new Xm(r=>Zm.ei(r,t),this.serializer)}};var P8=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Nk(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x8.bind(null,this.syncEngine),yield v8(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new mT}()}createDatastore(t){let r=Tg(t.databaseInfo.databaseId),i=function(s){return new aT(s)}(t.databaseInfo);return function(s,a,c,u){return new uT(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new hT(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>Nk(this.syncEngine,r,0),function(){return tg.p()?new tg:new oT}())}createSyncEngine(t,r){return function(o,s,a,c,u,d,f){let m=new wT(o,s,a,c,u,d);return f&&(m.$a=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(o){return y(this,null,function*(){let s=_e(o);Q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield Md(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var ug=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Yi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var TT=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jt.UNAUTHENTICATED,this.clientId=Um.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>y(this,null,function*(){Q("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(Q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new di;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=qT(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function JI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield gO(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Pk(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield k8(n);Q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ak(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ak(e.remoteStore,i)),n._onlineComponents=e})}function k8(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield JI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===L.FAILED_PRECONDITION||i.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Pc("Error using user provided cache. Falling back to memory cache: "+t),yield JI(n,new MO)}}else Q("FirestoreClient","Using default OfflineComponentProvider"),yield JI(n,new IT(void 0));return n._offlineComponents})}function PO(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Q("FirestoreClient","Using user provided OnlineComponentProvider"),yield Pk(n,n._uninitializedComponentsProvider._online)):(Q("FirestoreClient","Using default OnlineComponentProvider"),yield Pk(n,new P8))),n._onlineComponents})}function O8(n){return PO(n).then(e=>e.syncEngine)}function CT(n){return y(this,null,function*(){let e=yield PO(n),t=e.eventManager;return t.onListen=w8.bind(null,e.syncEngine),t.onUnlisten=T8.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E8.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=C8.bind(null,e.syncEngine),t})}function F8(n,e,t={}){let r=new di;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(o,s,a,c,u){let d=new ug({next:m=>{d.eu(),s.enqueueAndForget(()=>bO(o,f)),m.fromCache&&c.source==="server"?u.reject(new J(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new ag(a,d,{includeMetadataChanges:!0,ua:!0});return CO(o,f)}(yield CT(n),n.asyncQueue,e,t,r)})),r.promise}function kO(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var kk=new Map;function OO(n,e,t){if(!t)throw new J(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function L8(n,e,t,r){if(e===!0&&r===!0)throw new J(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ok(n){if(!ae.isDocumentKey(n))throw new J(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fk(n){if(ae.isDocumentKey(n))throw new J(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Dg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he()}function zo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new J(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Dg(n);throw new J(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var dg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kO((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new J(L.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new J(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new J(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XI;switch(r.type){case"firstParty":return new n0(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=kk.get(t);r&&(Q("ComponentProvider","Removing Datastore"),kk.delete(t),r.terminate())}(this),Promise.resolve()}};function FO(n,e,t,r={}){var i;let o=(n=zo(n,Wc))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Pc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Jt.MOCK_USER;else{a=Ta(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new J(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Jt(u)}n._authCredentials=new ZI(new Vm(a,c))}}var Zs=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},zn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Go(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Go=class n extends Zs{constructor(e,t,r){super(e,t,VT(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new ae(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function LO(n,e,...t){if(n=Ue(n),OO("collection","path",e),n instanceof Wc){let r=_t.fromString(e,...t);return Fk(r),new Go(n,null,r)}{if(!(n instanceof zn||n instanceof Go))throw new J(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_t.fromString(e,...t));return Fk(r),new Go(n.firestore,null,r)}}function VO(n,e,...t){if(n=Ue(n),arguments.length===1&&(e=Um.newId()),OO("doc","path",e),n instanceof Wc){let r=_t.fromString(e,...t);return Ok(r),new zn(n,null,new ae(r))}{if(!(n instanceof zn||n instanceof Go))throw new J(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(_t.fromString(e,...t));return Ok(r),new zn(n.firestore,n instanceof Go?n.converter:null,new ae(r))}}var hg=class{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new ng(this,"async_queue_retry"),this.fu=()=>{let r=QI();r&&Q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=QI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;let t=QI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});let t=new di;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return y(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Gc(e))throw e;Q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Yi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=fT.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&he()}verifyOperationInProgress(){}bu(){return y(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.Eu.indexOf(e);this.Eu.splice(t,1)}};function Lk(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var ea=class extends Wc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new hg,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new hg(e),this._firestoreClient=void 0,yield e}})}};function UO(n,e){let t=typeof n=="object"?n:Ht(),r=typeof n=="string"?n:e||"(default)",i=$t(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=yo("firestore");o&&FO(i,...o)}return i}function KT(n){if(n._terminated)throw new J(L.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||V8(n),n._firestoreClient}function V8(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,d){return new a0(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,kO(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new TT(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Dd=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(In.fromBase64String(e))}catch(t){throw new J(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(In.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Sd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new J(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new or(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var fg=class{constructor(e){this._methodName=e}};var Ad=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new J(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new J(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}};var Rd=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var U8=/^__.*__$/,bT=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new eo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Xs(e,this.data,t,this.fieldTransforms)}};function jO(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he()}}var DT=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return pg(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(jO(this.Mu)&&U8.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},ST=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Tg(e)}$u(e,t,r,i=!1){return new DT({Mu:e,methodName:t,Ku:r,path:or.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function BO(n){let e=n._freezeSettings(),t=Tg(n._databaseId);return new ST(n._databaseId,!!e.ignoreUndefinedProperties,t)}function j8(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);WO("Data must be an object, but it was:",s,r);let a=$O(r,s),c,u;if(o.merge)c=new ui(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let d=[];for(let f of o.mergeFields){let m=$8(e,f,t);if(!s.contains(m))throw new J(L.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);W8(d,m)||d.push(m)}c=new ui(d),u=s.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=s.fieldTransforms;return new bT(new $r(a),c,u)}function B8(n,e,t,r=!1){return YT(t,n.$u(r?4:3,e))}function YT(n,e){if(HO(n=Ue(n)))return WO("Unsupported field value:",e,n),$O(n,e);if(n instanceof fg)return function(r,i){if(!jO(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=YT(a,i.ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ue(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return D9(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Rt.fromDate(r);return{timestampValue:Qm(i.serializer,o)}}if(r instanceof Rt){let o=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Qm(i.serializer,o)}}if(r instanceof Ad)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Dd)return{bytesValue:lO(i.serializer,r._byteString)};if(r instanceof zn){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:jT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rd)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.qu("VectorValues must only contain numeric values.");return UT(a.serializer,c)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Dg(r)}`)}(n,e)}function $O(n,e){let t={};return jk(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(n,(r,i)=>{let o=YT(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function HO(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof Ad||n instanceof Dd||n instanceof zn||n instanceof fg||n instanceof Rd)}function WO(n,e,t){if(!HO(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Dg(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function $8(n,e,t){if((e=Ue(e))instanceof Sd)return e._internalPath;if(typeof e=="string")return qO(n,e);throw pg("Field path arguments must be of type string or ",n,!1,void 0,t)}var H8=new RegExp("[~\\*/\\[\\]]");function qO(n,e,t){if(e.search(H8)>=0)throw pg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Sd(...e.split("."))._internalPath}catch{throw pg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function pg(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new J(L.INVALID_ARGUMENT,a+n+c)}function W8(n,e){return n.some(t=>t.isEqual(e))}var mg=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new AT(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(QT("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},AT=class extends mg{data(){return super.data()}};function QT(n,e){return typeof e=="string"?qO(n,e):e instanceof Sd?e._internalPath:e._delegate._internalPath}function zO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new J(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xd=class{},RT=class extends xd{};function GO(n,e,...t){let r=[];e instanceof xd&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof xT).length,a=o.filter(c=>c instanceof gg).length;if(s>1||s>0&&a>0)throw new J(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var gg=class n extends RT{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return YO(e._query,t),new Zs(e.firestore,e.converter,w0(e._query,t))}_parse(e){let t=BO(e.firestore);return function(o,s,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new J(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Uk(f,d);let v=[];for(let I of f)v.push(Vk(c,o,I));m={arrayValue:{values:v}}}else m=Vk(c,o,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Uk(f,d),m=B8(a,s,f,d==="in"||d==="not-in");return Ut.create(u,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function KO(n,e,t){let r=e,i=QT("where",n);return gg._create(i,r,t)}var xT=class n extends xd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Wr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)YO(s,c),s=w0(s,c)}(e._query,t),new Zs(e.firestore,e.converter,w0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Vk(n,e,t){if(typeof(t=Ue(t))=="string"){if(t==="")throw new J(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yk(e)&&t.indexOf("/")!==-1)throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(_t.fromString(t));if(!ae.isDocumentKey(r))throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lk(n,new ae(r))}if(t instanceof zn)return lk(n,t._key);throw new J(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dg(t)}.`)}function Uk(n,e){if(!Array.isArray(n)||n.length===0)throw new J(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YO(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new J(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new J(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var NT=class{convertValue(e,t="none"){switch(Ko(e)){case 0:return null;case 1:return e.booleanValue;case 2:return mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ji(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return ta(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>mt(s.doubleValue));return new Rd(o)}convertGeoPoint(e){return new Ad(mt(e.latitude),mt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=wg(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(wd(e));default:return null}}convertTimestamp(e){let t=Qi(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=_t.fromString(e);Ze(mO(r));let i=new Hm(r.get(1),r.get(3)),o=new ae(r.popFirst(5));return i.isEqual(t)||Yi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function q8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var qs=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},vg=class extends mg{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(QT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Mc=class extends vg{data(e={}){return super.data(e)}},yg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Mc(this._firestore,this._userDataWriter,r.key,r,new qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new J(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Mc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Mc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:z8(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function z8(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he()}}var Nd=class extends NT{constructor(e){super(),this.firestore=e}convertBytes(e){return new Dd(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}};function QO(n){n=zo(n,Zs);let e=zo(n.firestore,ea),t=KT(e),r=new Nd(e);return zO(n._query),F8(t,n._query).then(i=>new yg(e,r,n,i))}function JO(n,e,t){n=zo(n,zn);let r=zo(n.firestore,ea),i=q8(n.converter,e,t);return G8(r,[j8(BO(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,zs.none())])}function JT(n,...e){var t,r,i;n=Ue(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Lk(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(Lk(e[s])){let f=e[s];e[s]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[s+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[s+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof zn)u=zo(n.firestore,ea),d=VT(n._key.path),c={next:f=>{e[s]&&e[s](K8(u,n,f))},error:e[s+1],complete:e[s+2]};else{let f=zo(n,Zs);u=zo(f.firestore,ea),d=f._query;let m=new Nd(u);c={next:v=>{e[s]&&e[s](new yg(u,m,f,v))},error:e[s+1],complete:e[s+2]},zO(n._query)}return function(m,v,I,x){let A=new ug(x),F=new ag(v,A,I);return m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return CO(yield CT(m),F)})),()=>{A.eu(),m.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return bO(yield CT(m),F)}))}}(KT(u),d,a,c)}function G8(n,e){return function(r,i){let o=new di;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return b8(yield O8(r),i,o)})),o.promise}(KT(n),e)}function K8(n,e,t){let r=t.docs.get(e._key),i=new Nd(n);return new vg(n,i,e._key,r,new qs(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){qc=i})(Vn),Ct(new Tt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new ea(new e0(r.getProvider("auth-internal")),new i0(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new J(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hm(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),se(ik,"4.7.6",e),se(ik,"4.7.6","esm2017")})();var Sg=function(){return Sg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Sg.apply(this,arguments)};var J8={includeMetadataChanges:!1};function XO(n,e){return e===void 0&&(e=J8),new fe(function(t){var r=JT(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function ZO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Sg(Sg({},r),(t={},t[e.idField]=n.id,t))}function e1(n){return XO(n,{includeMetadataChanges:!0}).pipe(ee(function(e){return e.docs}))}function t1(n,e){return e===void 0&&(e={}),e1(n).pipe(ee(function(t){return t.map(function(r){return ZO(r,e)})}))}var ra=class{constructor(e){return e}},n1="firestore",XT=class{constructor(){return Ft(n1)}};var ZT=new W("angularfire2.firestore-instances");function X8(n,e){let t=qt(n1,n,e);return t&&new ra(t)}function Z8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ra(r)}}var eK={provide:XT,deps:[[new be,ZT]]},tK={provide:ra,useFactory:X8,deps:[[new be,ZT],yt]};function r1(n,...e){return se("angularfire",pt.full,"fst"),at([tK,eK,{provide:ZT,useFactory:Z8(n),multi:!0,deps:[me,xe,At,Pt,[new be,Br],[new be,_r],...e]}])}var Er=Ye(t1,!0);var Ir=Ye(LO,!0,2);var eC=Ye(VO,!0,2);var tC=Ye(QO,!0);var i1=Ye(UO,!0);var o1=Ye(GO,!0,2);var nC=Ye(JO,!0,2);var s1=Ye(KO,!0,2);var a1="@firebase/database",c1="1.0.11";var eb="";function nK(n){eb=n}var uC=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Gt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Mh(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var dC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Zr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var j1=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new uC(e)}}catch{}return new dC},oa=j1("localStorage"),hC=j1("sessionStorage");var Xc=new lr("@firebase/database"),rK=function(){let n=1;return function(){return n++}}(),B1=function(n){let e=_S(n),t=new gS;t.update(e);let r=t.digest();return xh.encodeByteArray(r)},zd=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=zd.apply(null,r):typeof r=="object"?e+=Gt(r):e+=r,e+=" "}return e},sa=null,l1=!0,iK=function(n,e){G(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Xc.logLevel=tn.VERBOSE,sa=Xc.log.bind(Xc),e&&hC.set("logging_enabled",!0)):typeof n=="function"?sa=n:(sa=null,hC.remove("logging_enabled"))},Tn=function(...n){if(l1===!0&&(l1=!1,sa===null&&hC.get("logging_enabled")===!0&&iK(!0)),sa){let e=zd.apply(null,n);sa(e)}},Gd=function(n){return function(...e){Tn(n,...e)}},fC=function(...n){let e="FIREBASE INTERNAL ERROR: "+zd(...n);Xc.error(e)},no=function(...n){let e=`FIREBASE FATAL ERROR: ${zd(...n)}`;throw Xc.error(e),new Error(e)},sr=function(...n){let e="FIREBASE WARNING: "+zd(...n);Xc.warn(e)},oK=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&sr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},$1=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},sK=function(n){if(Jr()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},el="[MIN_NAME]",aa="[MAX_NAME]",al=function(n,e){if(n===e)return 0;if(n===el||e===aa)return-1;if(e===el||n===aa)return 1;{let t=u1(n),r=u1(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},aK=function(n,e){return n===e?0:n<e?-1:1},kd=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Gt(e))},tb=function(n){if(typeof n!="object"||n===null)return Gt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Gt(e[r]),t+=":",t+=tb(n[e[r]]);return t+="}",t},H1=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function br(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var W1=function(n){G(!$1(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},cK=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},lK=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var uK=new RegExp("^-?(0*)\\d{1,10}$"),dK=-2147483648,hK=2147483647,u1=function(n){if(uK.test(n)){let e=Number(n);if(e>=dK&&e<=hK)return e}return null},Kd=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw sr("Exception was thrown by user callback.",t),e},Math.floor(0))}},fK=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ud=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var pC=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){sr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var mC=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sr(e)}},jd=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Rg="5",q1="v",z1="s",G1="r",K1="f",Y1=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Q1="ls",J1="p",gC="ac",X1="websocket",Z1="long_polling";var xg=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=oa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&oa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function pK(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function eF(n,e,t){G(typeof e=="string","typeof type must == string"),G(typeof t=="object","typeof params must == object");let r;if(e===X1)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Z1)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);pK(n)&&(t.ns=n.namespace);let i=[];return br(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var vC=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Zr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return lS(this.counters_)}};var rC={},iC={};function nb(n){let e=n.toString();return rC[e]||(rC[e]=new vC),rC[e]}function mK(n,e){let t=n.toString();return iC[t]||(iC[t]=e()),iC[t]}var yC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Kd(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var d1="start",gK="close",vK="pLPCommand",yK="pRTLPCB",tF="id",nF="pw",rF="ser",_K="cb",wK="seg",EK="ts",IK="d",TK="dframe",iF=1870,oF=30,CK=iF-oF,bK=25e3,DK=3e4,_C=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gd(e),this.stats_=nb(t),this.urlFn=c=>(this.appCheckToken&&(c[gC]=this.appCheckToken),eF(t,Z1,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(DK)),sK(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wC((...o)=>{let[s,a,c,u,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===d1)this.id=a,this.password=c;else if(s===gK)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[d1]="t",r[rF]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[_K]=this.scriptTagHolder.uniqueCallbackIdentifier),r[q1]=Rg,this.transportSessionId&&(r[z1]=this.transportSessionId),this.lastSessionId&&(r[Q1]=this.lastSessionId),this.applicationId&&(r[J1]=this.applicationId),this.appCheckToken&&(r[gC]=this.appCheckToken),typeof location<"u"&&location.hostname&&Y1.test(location.hostname)&&(r[G1]=K1);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Jr()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!cK()&&!lK()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Gt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=aS(t),i=H1(r,CK);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Jr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[TK]="t",r[tF]=e,r[nF]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Gt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},wC=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Jr())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=rK(),window[vK+this.uniqueCallbackIdentifier]=e,window[yK+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Tn("frame writing exception"),a.stack&&Tn(a.stack),Tn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[tF]=this.myID,e[nF]=this.myPW,e[rF]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+oF+r.length<=iF;){let s=this.pendingSegs.shift();r=r+"&"+wK+i+"="+s.seg+"&"+EK+i+"="+s.ts+"&"+IK+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(bK)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){Jr()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var SK=16384,AK=45e3,Ng=null;typeof MozWebSocket<"u"?Ng=MozWebSocket:typeof WebSocket<"u"&&(Ng=WebSocket);var Od=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gd(this.connId),this.stats_=nb(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[q1]=Rg,!Jr()&&typeof location<"u"&&location.hostname&&Y1.test(location.hostname)&&(a[G1]=K1),r&&(a[z1]=r),i&&(a[Q1]=i),o&&(a[gC]=o),s&&(a[J1]=s),eF(t,X1,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,oa.set("previous_websocket_failure",!0);try{let i;if(Jr()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Rg}/${eb}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Ng(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Ng!==null&&!n.forceDisallow_}static previouslyFailed(){return oa.isInMemoryStorage||oa.get("previous_websocket_failure")===!0}markConnectionHealthy(){oa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Mh(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(G(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Gt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=H1(r,SK);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(AK))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),RK=(()=>{class n{static get ALL_TRANSPORTS(){return[_C,Od]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Od&&Od.isAvailable(),i=r&&!Od.previouslyFailed();if(t.webSocketOnly&&(r||sr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Od];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),xK=6e4,NK=5e3,MK=10*1024,PK=100*1024,oC="t",h1="d",kK="s",f1="r",OK="e",p1="o",m1="a",g1="n",v1="p",FK="h",EC=class{constructor(e,t,r,i,o,s,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gd("c:"+this.id+":"),this.transportManager_=new RK(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ud(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>PK?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>MK?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(oC in e){let t=e[oC];t===m1?this.upgradeIfSecondaryHealthy_():t===f1?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===p1&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=kd("t",e),r=kd("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:v1,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:m1,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:g1,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=kd("t",e),r=kd("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=kd(oC,e);if(h1 in e){let r=e[h1];if(t===FK){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===g1){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===kK?this.onConnectionShutdown_(r):t===f1?this.onReset_(r):t===OK?fC("Server Error: "+r):t===p1?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fC("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Rg!==r&&sr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ud(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(xK))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ud(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(NK))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:v1,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(oa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Mg=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Pg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},G(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){G(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var kg=class n extends Pg{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Kl()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return G(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var y1=32,_1=768,ot=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function et(){return new ot("")}function We(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Jo(n){return n.pieces_.length-n.pieceNum_}function ft(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ot(n.pieces_,e)}function sF(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function LK(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function aF(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function cF(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ot(e,0)}function Zt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ot)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ot(t,0)}function Ve(n){return n.pieceNum_>=n.pieces_.length}function Tr(n,e){let t=We(n),r=We(e);if(t===null)return e;if(t===r)return Tr(ft(n),ft(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function lF(n,e){if(Jo(n)!==Jo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function zr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Jo(n)>Jo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var IC=class{constructor(e,t){this.errorPrefix_=t,this.parts_=aF(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=eu(this.parts_[r]);uF(this)}};function VK(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=eu(e),uF(n)}function UK(n){let e=n.parts_.pop();n.byteLength_-=eu(e),n.parts_.length>0&&(n.byteLength_-=1)}function uF(n){if(n.byteLength_>_1)throw new Error(n.errorPrefix_+"has a key path longer than "+_1+" bytes ("+n.byteLength_+").");if(n.parts_.length>y1)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+y1+") or object contains a cycle "+ia(n))}function ia(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var TC=class n extends Pg{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return G(e==="visible","Unknown event type: "+e),[this.visible_]}};var Fd=1e3,jK=60*5*1e3,w1=30*1e3,BK=1.3,$K=3e4,HK="server_kill",E1=3,rb=(()=>{class n extends Mg{constructor(t,r,i,o,s,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=Gd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fd,this.maxReconnectDelay_=jK,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Jr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");TC.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&kg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(Gt(s)),G(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Ia,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),G(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),G(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Zr(t,"w")){let i=ss(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();sr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||mS(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=w1)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=pS(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),G(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Gt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):fC("Unrecognized action received from server: "+Gt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){G(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>$K&&(this.reconnectDelay_=Fd),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*BK)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(m){G(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Tn("getToken() completed but was canceled"):(Tn("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new EC(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,I=>{sr(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(HK)},s))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&sr(m),u())}}})}interrupt(t){Tn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Tn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Jl(this.interruptReasons_)&&(this.reconnectDelay_=Fd,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>tb(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new ot(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Tn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=E1&&(this.reconnectDelay_=w1,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Tn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=E1&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Jr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+eb.replace(/\./g,"-")]=1,Kl()?t["framework.cordova"]=1:Nh()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=kg.getInstance().currentlyOnline();return Jl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),qe=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var tl=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new qe(el,e),i=new qe(el,t);return this.compare(r,i)!==0}minPost(){return qe.MIN}};var Ag,Og=class extends tl{static get __EMPTY_NODE(){return Ag}static set __EMPTY_NODE(e){Ag=e}compare(e,t){return al(e.name,t.name)}isDefinedOn(e){throw Ea("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return qe.MIN}maxPost(){return new qe(aa,Ag)}makePost(e,t){return G(typeof e=="string","KeyIndex indexValue must always be a string."),new qe(e,Ag)}toString(){return".key"}},Zc=new Og;var Qc=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},qr=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??Cr.EMPTY_NODE,this.right=s??Cr.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return Cr.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),CC=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new qr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Cr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Qc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Qc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Qc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Qc(this.root_,null,this.comparator_,!0,e)}};Cr.EMPTY_NODE=new CC;function WK(n,e){return al(n.name,e.name)}function ib(n,e){return al(n,e)}var bC;function qK(n){bC=n}var dF=function(n){return typeof n=="number"?"number:"+W1(n):"string:"+n},hF=function(n){if(n.isLeafNode()){let e=n.val();G(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Zr(e,".sv"),"Priority must be a string or number.")}else G(n===bC||n.isEmpty(),"priority of unexpected type.");G(n===bC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var I1,nl=(()=>{class n{static set __childrenNodeConstructor(t){I1=t}static get __childrenNodeConstructor(){return I1}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,G(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),hF(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ve(t)?this:We(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=We(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(G(i!==".priority"||Jo(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ft(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dF(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=W1(this.value_):t+=this.value_,this.lazyHash_=B1(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(G(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return G(o>=0,"Unknown leaf type: "+r),G(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),fF,pF;function zK(n){fF=n}function GK(n){pF=n}var DC=class extends tl{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?al(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return qe.MIN}maxPost(){return new qe(aa,new nl("[PRIORITY-POST]",pF))}makePost(e,t){let r=fF(e);return new qe(t,new nl("[PRIORITY-POST]",r))}toString(){return".priority"}},bn=new DC;var KK=Math.log(2),SC=class{constructor(e){let t=o=>parseInt(Math.log(o)/KK,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Fg=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,m;if(d===0)return null;if(d===1)return f=n[c],m=t?t(f):f,new qr(m,f.node,qr.BLACK,null,null);{let v=parseInt(d/2,10)+c,I=i(c,v),x=i(v+1,u);return f=n[v],m=t?t(f):f,new qr(m,f.node,qr.BLACK,I,x)}},o=function(c){let u=null,d=null,f=n.length,m=function(I,x){let A=f-I,F=f;f-=I;let q=i(A+1,F),z=n[A],re=t?t(z):z;v(new qr(re,z.node,x,null,q))},v=function(I){u?(u.left=I,u=I):(d=I,u=I)};for(let I=0;I<c.count;++I){let x=c.nextBitIsOne(),A=Math.pow(2,c.count-(I+1));x?m(A,qr.BLACK):(m(A,qr.BLACK),m(A,qr.RED))}return d},s=new SC(n.length),a=o(s);return new Cr(r||e,a)};var sC,Yc={},rl=class n{static get Default(){return G(Yc&&bn,"ChildrenNode.ts has not been loaded"),sC=sC||new n({".priority":Yc},{".priority":bn}),sC}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=ss(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cr?t:null}hasIndex(e){return Zr(this.indexSet_,e.toString())}addIndex(e,t){G(e!==Zc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(qe.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=Fg(r,e.getCompare()):a=Yc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=Xl(this.indexes_,(i,o)=>{let s=ss(this.indexSet_,o);if(G(s,"Missing index implementation for "+o),i===Yc)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(qe.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Fg(a,s.getCompare())}else return Yc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new qe(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Xl(this.indexes_,i=>{if(i===Yc)return i;{let o=t.get(e.name);return o?i.remove(new qe(e.name,o)):i}});return new n(r,this.indexSet_)}};var Ld,wt=(()=>{class n{static get EMPTY_NODE(){return Ld||(Ld=new n(new Cr(ib),null,rl.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hF(this.priorityNode_),this.children_.isEmpty()&&G(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ld}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Ld:r}}getChild(t){let r=We(t);return r===null?this:this.getImmediateChild(r).getChild(ft(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(G(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new qe(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Ld:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=We(t);if(i===null)return r;{G(We(t)!==".priority"||Jo(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(ft(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(bn,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+dF(this.getPriority().val())+":"),this.forEachChild(bn,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":B1(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new qe(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new qe(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new qe(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,qe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,qe.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yd?-1:0}withIndex(t){if(t===Zc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Zc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(bn),o=r.getIterator(bn),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Zc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),AC=class extends wt{constructor(){super(new Cr(ib),wt.EMPTY_NODE,rl.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wt.EMPTY_NODE}isEmpty(){return!1}},Yd=new AC;Object.defineProperties(qe,{MIN:{value:new qe(el,wt.EMPTY_NODE)},MAX:{value:new qe(aa,Yd)}});Og.__EMPTY_NODE=wt.EMPTY_NODE;nl.__childrenNodeConstructor=wt;qK(Yd);GK(Yd);var YK=!0;function Cn(n,e=null){if(n===null)return wt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),G(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new nl(t,Cn(e))}if(!(n instanceof Array)&&YK){let t=[],r=!1;if(br(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=Cn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new qe(s,c)))}}),t.length===0)return wt.EMPTY_NODE;let o=Fg(t,WK,s=>s.name,ib);if(r){let s=Fg(t,bn.getCompare());return new wt(o,Cn(e),new rl({".priority":s},{".priority":bn}))}else return new wt(o,Cn(e),rl.Default)}else{let t=wt.EMPTY_NODE;return br(n,(r,i)=>{if(Zr(n,r)&&r.substring(0,1)!=="."){let o=Cn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(Cn(e))}}zK(Cn);var RC=class extends tl{constructor(e){super(),this.indexPath_=e,G(!Ve(e)&&We(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?al(e.name,t.name):o}makePost(e,t){let r=Cn(e),i=wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new qe(t,i)}maxPost(){let e=wt.EMPTY_NODE.updateChild(this.indexPath_,Yd);return new qe(aa,e)}toString(){return aF(this.indexPath_,0).join("/")}};var xC=class extends tl{compare(e,t){let r=e.node.compareTo(t.node);return r===0?al(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return qe.MIN}maxPost(){return qe.MAX}makePost(e,t){let r=Cn(e);return new qe(t,r)}toString(){return".value"}},QK=new xC;function JK(n){return{type:"value",snapshotNode:n}}function XK(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function ZK(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function T1(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function e7(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var NC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=bn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return G(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return G(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:el}hasEnd(){return this.endSet_}getIndexEndValue(){return G(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return G(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:aa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return G(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===bn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function C1(n){let e={};if(n.isDefault())return e;let t;if(n.index_===bn?t="$priority":n.index_===QK?t="$value":n.index_===Zc?t="$key":(G(n.index_ instanceof RC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Gt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Gt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Gt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Gt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Gt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function b1(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==bn&&(e.i=n.index_.toString()),e}var MC=class n extends Mg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(G(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gd("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=C1(e._queryParams);this.restRequest_(o+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(o,f,!1,r),ss(this.listens_,s)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=C1(e._queryParams),r=e._path.toString(),i=new Ia;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+as(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Mh(a.responseText)}catch{sr("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&sr("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var PC=class{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Lg(){return{value:null,children:new Map}}function mF(n,e,t){if(Ve(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=We(e);n.children.has(r)||n.children.set(r,Lg());let i=n.children.get(r);e=ft(e),mF(i,e,t)}}function kC(n,e,t){n.value!==null?t(e,n.value):t7(n,(r,i)=>{let o=new ot(e.toString()+"/"+r);kC(i,o,t)})}function t7(n,e){n.children.forEach((t,r)=>{e(r,t)})}var OC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&br(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var D1=10*1e3,n7=30*1e3,r7=5*60*1e3,FC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new OC(e);let r=D1+(n7-D1)*Math.random();Ud(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;br(e,(i,o)=>{o>0&&Zr(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Ud(this.reportStats_.bind(this),Math.floor(Math.random()*2*r7))}};var to=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(to||{});function gF(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function vF(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function yF(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var LC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=to.ACK_USER_WRITE,this.source=gF()}operationForChild(e){if(Ve(this.path)){if(this.affectedTree.value!=null)return G(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ot(e));return new n(et(),t,this.revert)}}else return G(We(this.path)===e,"operationForChild called for unrelated child."),new n(ft(this.path),this.affectedTree,this.revert)}};var il=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=to.OVERWRITE}operationForChild(e){return Ve(this.path)?new n(this.source,et(),this.snap.getImmediateChild(e)):new n(this.source,ft(this.path),this.snap)}};var Vg=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=to.MERGE}operationForChild(e){if(Ve(this.path)){let t=this.children.subtree(new ot(e));return t.isEmpty()?null:t.value?new il(this.source,et(),t.value):new n(this.source,et(),t)}else return G(We(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,ft(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Hd=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ve(e))return this.isFullyInitialized()&&!this.filtered_;let t=We(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function i7(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(e7(s.childName,s.snapshotNode))}),Vd(n,i,"child_removed",e,r,t),Vd(n,i,"child_added",e,r,t),Vd(n,i,"child_moved",o,r,t),Vd(n,i,"child_changed",e,r,t),Vd(n,i,"value",e,r,t),i}function Vd(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>s7(n,a,c)),s.forEach(a=>{let c=o7(n,a,o);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function o7(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function s7(n,e,t){if(e.childName==null||t.childName==null)throw Ea("Should only compare child_ events.");let r=new qe(e.childName,e.snapshotNode),i=new qe(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function _F(n,e){return{eventCache:n,serverCache:e}}function Bd(n,e,t,r){return _F(new Hd(e,t,r),n.serverCache)}function wF(n,e,t,r){return _F(n.eventCache,new Hd(e,t,r))}function VC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ca(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var aC,a7=()=>(aC||(aC=new Cr(aK)),aC),Gn=class n{static fromObject(e){let t=new n(null);return br(e,(r,i)=>{t=t.set(new ot(r),i)}),t}constructor(e,t=a7()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:et(),value:this.value};if(Ve(e))return null;{let r=We(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(ft(e),t);return o!=null?{path:Zt(new ot(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ve(e))return this;{let t=We(e),r=this.children.get(t);return r!==null?r.subtree(ft(e)):new n(null)}}set(e,t){if(Ve(e))return new n(t,this.children);{let r=We(e),o=(this.children.get(r)||new n(null)).set(ft(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Ve(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=We(e),r=this.children.get(t);if(r){let i=r.remove(ft(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Ve(e))return this.value;{let t=We(e),r=this.children.get(t);return r?r.get(ft(e)):null}}setTree(e,t){if(Ve(e))return t;{let r=We(e),o=(this.children.get(r)||new n(null)).setTree(ft(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(et(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Zt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,et(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Ve(e))return null;{let o=We(e),s=this.children.get(o);return s?s.findOnPath_(ft(e),Zt(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,et(),t)}foreachOnPath_(e,t,r){if(Ve(e))return this;{this.value&&r(t,this.value);let i=We(e),o=this.children.get(i);return o?o.foreachOnPath_(ft(e),Zt(t,i),r):new n(null)}}foreach(e){this.foreach_(et(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Zt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Gr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Gn(null))}};function $d(n,e,t){if(Ve(e))return new Gr(new Gn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Tr(i,e);return o=o.updateChild(s,t),new Gr(n.writeTree_.set(i,o))}else{let i=new Gn(t),o=n.writeTree_.setTree(e,i);return new Gr(o)}}}function S1(n,e,t){let r=n;return br(t,(i,o)=>{r=$d(r,Zt(e,i),o)}),r}function A1(n,e){if(Ve(e))return Gr.empty();{let t=n.writeTree_.setTree(e,new Gn(null));return new Gr(t)}}function UC(n,e){return la(n,e)!=null}function la(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Tr(t.path,e)):null}function R1(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(bn,(r,i)=>{e.push(new qe(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new qe(r,i.value))}),e}function Qo(n,e){if(Ve(e))return n;{let t=la(n,e);return t!=null?new Gr(new Gn(t)):new Gr(n.writeTree_.subtree(e))}}function jC(n){return n.writeTree_.isEmpty()}function ol(n,e){return EF(et(),n.writeTree_,e)}function EF(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(G(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=EF(Zt(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Zt(n,".priority"),r)),t}}function IF(n,e){return SF(e,n)}function c7(n,e,t,r,i){G(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=$d(n.visibleWrites,e,t)),n.lastWriteId=r}function l7(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function u7(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);G(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&d7(a,r.path)?i=!1:zr(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return h7(n),!0;if(r.snap)n.visibleWrites=A1(n.visibleWrites,r.path);else{let a=r.children;br(a,c=>{n.visibleWrites=A1(n.visibleWrites,Zt(r.path,c))})}return!0}else return!1}function d7(n,e){if(n.snap)return zr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&zr(Zt(n.path,t),e))return!0;return!1}function h7(n){n.visibleWrites=TF(n.allWrites,f7,et()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function f7(n){return n.visible}function TF(n,e,t){let r=Gr.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)zr(t,s)?(a=Tr(t,s),r=$d(r,a,o.snap)):zr(s,t)&&(a=Tr(s,t),r=$d(r,et(),o.snap.getChild(a)));else if(o.children){if(zr(t,s))a=Tr(t,s),r=S1(r,a,o.children);else if(zr(s,t))if(a=Tr(s,t),Ve(a))r=S1(r,et(),o.children);else{let c=ss(o.children,We(a));if(c){let u=c.getChild(ft(a));r=$d(r,et(),u)}}}else throw Ea("WriteRecord should have .snap or .children")}}return r}function CF(n,e,t,r,i){if(!r&&!i){let o=la(n.visibleWrites,e);if(o!=null)return o;{let s=Qo(n.visibleWrites,e);if(jC(s))return t;if(t==null&&!UC(s,et()))return null;{let a=t||wt.EMPTY_NODE;return ol(s,a)}}}else{let o=Qo(n.visibleWrites,e);if(!i&&jC(o))return t;if(!i&&t==null&&!UC(o,et()))return null;{let s=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(zr(u.path,e)||zr(e,u.path))},a=TF(n.allWrites,s,e),c=t||wt.EMPTY_NODE;return ol(a,c)}}}function p7(n,e,t){let r=wt.EMPTY_NODE,i=la(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(bn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Qo(n.visibleWrites,e);return t.forEachChild(bn,(s,a)=>{let c=ol(Qo(o,new ot(s)),a);r=r.updateImmediateChild(s,c)}),R1(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Qo(n.visibleWrites,e);return R1(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function m7(n,e,t,r,i){G(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Zt(e,t);if(UC(n.visibleWrites,o))return null;{let s=Qo(n.visibleWrites,o);return jC(s)?i.getChild(t):ol(s,i.getChild(t))}}function g7(n,e,t,r){let i=Zt(e,t),o=la(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Qo(n.visibleWrites,i);return ol(s,r.getNode().getImmediateChild(t))}else return null}function v7(n,e){return la(n.visibleWrites,e)}function y7(n,e,t,r,i,o,s){let a,c=Qo(n.visibleWrites,e),u=la(c,et());if(u!=null)a=u;else if(t!=null)a=ol(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=s.getCompare(),m=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),v=m.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=m.getNext();return d}else return[]}function _7(){return{visibleWrites:Gr.empty(),allWrites:[],lastWriteId:-1}}function BC(n,e,t,r){return CF(n.writeTree,n.treePath,e,t,r)}function bF(n,e){return p7(n.writeTree,n.treePath,e)}function x1(n,e,t,r){return m7(n.writeTree,n.treePath,e,t,r)}function Ug(n,e){return v7(n.writeTree,Zt(n.treePath,e))}function w7(n,e,t,r,i,o){return y7(n.writeTree,n.treePath,e,t,r,i,o)}function ob(n,e,t){return g7(n.writeTree,n.treePath,e,t)}function DF(n,e){return SF(Zt(n.treePath,e),n.writeTree)}function SF(n,e){return{treePath:n,writeTree:e}}var $C=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;G(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),G(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,T1(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,ZK(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,XK(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,T1(r,e.snapshotNode,i.oldSnap));else throw Ea("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var HC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},AF=new HC,Wd=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Hd(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return ob(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ca(this.viewCache_),o=w7(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function E7(n,e){G(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),G(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function I7(n,e,t,r,i){let o=new $C,s,a;if(t.type===to.OVERWRITE){let u=t;u.source.fromUser?s=WC(n,e,u.path,u.snap,r,i,o):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Ve(u.path),s=jg(n,e,u.path,u.snap,r,i,a,o))}else if(t.type===to.MERGE){let u=t;u.source.fromUser?s=C7(n,e,u.path,u.children,r,i,o):(G(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),s=qC(n,e,u.path,u.children,r,i,a,o))}else if(t.type===to.ACK_USER_WRITE){let u=t;u.revert?s=S7(n,e,u.path,r,i,o):s=b7(n,e,u.path,u.affectedTree,r,i,o)}else if(t.type===to.LISTEN_COMPLETE)s=D7(n,e,t.path,r,o);else throw Ea("Unknown operation type: "+t.type);let c=o.getChanges();return T7(e,s,c),{viewCache:s,changes:c}}function T7(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=VC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(JK(VC(e)))}}function RF(n,e,t,r,i,o){let s=e.eventCache;if(Ug(r,t)!=null)return e;{let a,c;if(Ve(t))if(G(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=ca(e),d=u instanceof wt?u:wt.EMPTY_NODE,f=bF(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,o)}else{let u=BC(r,ca(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,o)}else{let u=We(t);if(u===".priority"){G(Jo(t)===1,"Can't have a priority with additional path components");let d=s.getNode();c=e.serverCache.getNode();let f=x1(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=s.getNode()}else{let d=ft(t),f;if(s.isCompleteForChild(u)){c=e.serverCache.getNode();let m=x1(r,t,s.getNode(),c);m!=null?f=s.getNode().getImmediateChild(u).updateChild(d,m):f=s.getNode().getImmediateChild(u)}else f=ob(r,u,e.serverCache);f!=null?a=n.filter.updateChild(s.getNode(),u,f,d,i,o):a=s.getNode()}}return Bd(e,a,s.isFullyInitialized()||Ve(t),n.filter.filtersNodes())}}function jg(n,e,t,r,i,o,s,a){let c=e.serverCache,u,d=s?n.filter:n.filter.getIndexedFilter();if(Ve(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),v,null)}else{let v=We(t);if(!c.isCompleteForPath(t)&&Jo(t)>1)return e;let I=ft(t),A=c.getNode().getImmediateChild(v).updateChild(I,r);v===".priority"?u=d.updatePriority(c.getNode(),A):u=d.updateChild(c.getNode(),v,A,I,AF,null)}let f=wF(e,u,c.isFullyInitialized()||Ve(t),d.filtersNodes()),m=new Wd(i,f,o);return RF(n,f,t,i,m,a)}function WC(n,e,t,r,i,o,s){let a=e.eventCache,c,u,d=new Wd(i,e,o);if(Ve(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=Bd(e,u,!0,n.filter.filtersNodes());else{let f=We(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Bd(e,u,a.isFullyInitialized(),a.isFiltered());else{let m=ft(t),v=a.getNode().getImmediateChild(f),I;if(Ve(m))I=r;else{let x=d.getCompleteChild(f);x!=null?sF(m)===".priority"&&x.getChild(cF(m)).isEmpty()?I=x:I=x.updateChild(m,r):I=wt.EMPTY_NODE}if(v.equals(I))c=e;else{let x=n.filter.updateChild(a.getNode(),f,I,m,d,s);c=Bd(e,x,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function N1(n,e){return n.eventCache.isCompleteForChild(e)}function C7(n,e,t,r,i,o,s){let a=e;return r.foreach((c,u)=>{let d=Zt(t,c);N1(e,We(d))&&(a=WC(n,a,d,u,i,o,s))}),r.foreach((c,u)=>{let d=Zt(t,c);N1(e,We(d))||(a=WC(n,a,d,u,i,o,s))}),a}function M1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function qC(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Ve(t)?u=r:u=new Gn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let v=e.serverCache.getNode().getImmediateChild(f),I=M1(n,v,m);c=jg(n,c,new ot(f),I,i,o,s,a)}}),u.children.inorderTraversal((f,m)=>{let v=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){let I=e.serverCache.getNode().getImmediateChild(f),x=M1(n,I,m);c=jg(n,c,new ot(f),x,i,o,s,a)}}),c}function b7(n,e,t,r,i,o,s){if(Ug(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ve(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return jg(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Ve(t)){let u=new Gn(null);return c.getNode().forEachChild(Zc,(d,f)=>{u=u.set(new ot(d),f)}),qC(n,e,t,u,i,o,a,s)}else return e}else{let u=new Gn(null);return r.foreach((d,f)=>{let m=Zt(t,d);c.isCompleteForPath(m)&&(u=u.set(d,c.getNode().getChild(m)))}),qC(n,e,t,u,i,o,a,s)}}function D7(n,e,t,r,i){let o=e.serverCache,s=wF(e,o.getNode(),o.isFullyInitialized()||Ve(t),o.isFiltered());return RF(n,s,t,r,AF,i)}function S7(n,e,t,r,i,o){let s;if(Ug(r,t)!=null)return e;{let a=new Wd(r,e,i),c=e.eventCache.getNode(),u;if(Ve(t)||We(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=BC(r,ca(e));else{let f=e.serverCache.getNode();G(f instanceof wt,"serverChildren would be complete if leaf node"),d=bF(r,f)}d=d,u=n.filter.updateFullNode(c,d,o)}else{let d=We(t),f=ob(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,ft(t),a,o):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,wt.EMPTY_NODE,ft(t),a,o):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=BC(r,ca(e)),s.isLeafNode()&&(u=n.filter.updateFullNode(u,s,o)))}return s=e.serverCache.isFullyInitialized()||Ug(r,et())!=null,Bd(e,u,s,n.filter.filtersNodes())}}function A7(n,e){let t=ca(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ve(e)&&!t.getImmediateChild(We(e)).isEmpty())?t.getChild(e):null}function P1(n,e,t,r){e.type===to.MERGE&&e.source.queryId!==null&&(G(ca(n.viewCache_),"We should always have a full cache before handling merges"),G(VC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=I7(n.processor_,i,e,t,r);return E7(n.processor_,o.viewCache),G(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,R7(n,o.changes,o.viewCache.eventCache.getNode(),null)}function R7(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return i7(n.eventGenerator_,e,t,i)}var k1;function x7(n){G(!k1,"__referenceConstructor has already been defined"),k1=n}function sb(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return G(o!=null,"SyncTree gave us an op for an invalid query."),P1(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(P1(s,e,t,r));return o}}function ab(n,e){let t=null;for(let r of n.views.values())t=t||A7(r,e);return t}var O1;function N7(n){G(!O1,"__referenceConstructor has already been defined"),O1=n}var Bg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Gn(null),this.pendingWriteTree_=_7(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function M7(n,e,t,r,i){return c7(n.pendingWriteTree_,e,t,r,i),i?Hg(n,new il(gF(),e,t)):[]}function Jc(n,e,t=!1){let r=l7(n.pendingWriteTree_,e);if(u7(n.pendingWriteTree_,e)){let o=new Gn(null);return r.snap!=null?o=o.set(et(),!0):br(r.children,s=>{o=o.set(new ot(s),!0)}),Hg(n,new LC(r.path,o,t))}else return[]}function $g(n,e,t){return Hg(n,new il(vF(),e,t))}function P7(n,e,t){let r=Gn.fromObject(t);return Hg(n,new Vg(vF(),e,r))}function k7(n,e,t,r){let i=PF(n,r);if(i!=null){let o=kF(i),s=o.path,a=o.queryId,c=Tr(s,e),u=new il(yF(a),c,t);return OF(n,s,u)}else return[]}function O7(n,e,t,r){let i=PF(n,r);if(i){let o=kF(i),s=o.path,a=o.queryId,c=Tr(s,e),u=Gn.fromObject(t),d=new Vg(yF(a),c,u);return OF(n,s,d)}else return[]}function xF(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=Tr(s,e),u=ab(a,c);if(u)return u});return CF(i,e,o,t,!0)}function Hg(n,e){return NF(e,n.syncPointTree_,null,IF(n.pendingWriteTree_,et()))}function NF(n,e,t,r){if(Ve(n.path))return MF(n,e,t,r);{let i=e.get(et());t==null&&i!=null&&(t=ab(i,et()));let o=[],s=We(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let u=t?t.getImmediateChild(s):null,d=DF(r,s);o=o.concat(NF(a,c,u,d))}return i&&(o=o.concat(sb(i,n,r,t))),o}}function MF(n,e,t,r){let i=e.get(et());t==null&&i!=null&&(t=ab(i,et()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,u=DF(r,s),d=n.operationForChild(s);d&&(o=o.concat(MF(d,a,c,u)))}),i&&(o=o.concat(sb(i,n,r,t))),o}function PF(n,e){return n.tagToQueryMap.get(e)}function kF(n){let e=n.indexOf("$");return G(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ot(n.substr(0,e))}}function OF(n,e,t){let r=n.syncPointTree_.get(e);G(r,"Missing sync point for query tag that we're tracking");let i=IF(n.pendingWriteTree_,e);return sb(r,t,i,null)}var zC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},GC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Zt(this.path_,e);return new n(this.syncTree_,t)}node(){return xF(this.syncTree_,this.path_)}},F7=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},F1=function(n,e,t){if(!n||typeof n!="object")return n;if(G(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return L7(n[".sv"],e,t);if(typeof n[".sv"]=="object")return V7(n[".sv"],e);G(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},L7=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:G(!1,"Unexpected server value: "+n)}},V7=function(n,e,t){n.hasOwnProperty("increment")||G(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&G(!1,"Unexpected increment value: "+r);let i=e.node();if(G(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},U7=function(n,e,t,r){return cb(e,new GC(t,n),r)},j7=function(n,e,t){return cb(n,new zC(e),t)};function cb(n,e,t){let r=n.getPriority().val(),i=F1(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=F1(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new nl(a,Cn(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new nl(i))),s.forEachChild(bn,(a,c)=>{let u=cb(c,e.getImmediateChild(a),t);u!==c&&(o=o.updateImmediateChild(a,u))}),o}}var qd=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function lb(n,e){let t=e instanceof ot?e:new ot(e),r=n,i=We(t);for(;i!==null;){let o=ss(r.node.children,i)||{children:{},childCount:0};r=new qd(i,r,o),t=ft(t),i=We(t)}return r}function cl(n){return n.node.value}function FF(n,e){n.node.value=e,KC(n)}function LF(n){return n.node.childCount>0}function B7(n){return cl(n)===void 0&&!LF(n)}function Wg(n,e){br(n.node.children,(t,r)=>{e(new qd(t,n,r))})}function VF(n,e,t,r){t&&!r&&e(n),Wg(n,i=>{VF(i,e,!0,r)}),t&&r&&e(n)}function $7(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Qd(n){return new ot(n.parent===null?n.name:Qd(n.parent)+"/"+n.name)}function KC(n){n.parent!==null&&H7(n.parent,n.name,n)}function H7(n,e,t){let r=B7(t),i=Zr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,KC(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,KC(n))}var W7=/[\[\].#$\/\u0000-\u001F\u007F]/,q7=/[\[\].#$\u0000-\u001F\u007F]/,cC=10*1024*1024,UF=function(n){return typeof n=="string"&&n.length!==0&&!W7.test(n)},z7=function(n){return typeof n=="string"&&n.length!==0&&!q7.test(n)},G7=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),z7(n)};var jF=function(n,e,t){let r=t instanceof ot?new IC(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+ia(r));if(typeof e=="function")throw new Error(n+"contains a function "+ia(r)+" with contents = "+e.toString());if($1(e))throw new Error(n+"contains "+e.toString()+" "+ia(r));if(typeof e=="string"&&e.length>cC/3&&eu(e)>cC)throw new Error(n+"contains a string greater than "+cC+" utf8 bytes "+ia(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(br(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!UF(s)))throw new Error(n+" contains an invalid key ("+s+") "+ia(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);VK(r,s),jF(n,a,r),UK(r)}),i&&o)throw new Error(n+' contains ".value" child '+ia(r)+" in addition to actual children.")}};var K7=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!UF(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!G7(t))throw new Error(yS(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var YC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Y7(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!lF(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function ua(n,e,t){Y7(n,t),Q7(n,r=>zr(r,e)||zr(e,r))}function Q7(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(J7(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function J7(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();sa&&Tn("event: "+t.toString()),Kd(r)}}}var X7="repo_interrupt",Z7=25,QC=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new YC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lg(),this.transactionQueueTree_=new qd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function eY(n,e,t){if(n.stats_=nb(n.repoInfo_),n.forceRestClient_||fK())n.server_=new MC(n.repoInfo_,(r,i,o,s)=>{L1(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>V1(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Gt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new rb(n.repoInfo_,e,(r,i,o,s)=>{L1(n,r,i,o,s)},r=>{V1(n,r)},r=>{nY(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=mK(n.repoInfo_,()=>new FC(n.stats_,n.server_)),n.infoData_=new PC,n.infoSyncTree_=new Bg({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=$g(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),ub(n,"connected",!1),n.serverSyncTree_=new Bg({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let u=s(a,c);ua(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function tY(n){let t=n.infoData_.getNode(new ot(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function BF(n){return F7({timestamp:tY(n)})}function L1(n,e,t,r,i){n.dataUpdateCount++;let o=new ot(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=Xl(t,u=>Cn(u));s=O7(n.serverSyncTree_,o,c,i)}else{let c=Cn(t);s=k7(n.serverSyncTree_,o,c,i)}else if(r){let c=Xl(t,u=>Cn(u));s=P7(n.serverSyncTree_,o,c)}else{let c=Cn(t);s=$g(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=hb(n,o)),ua(n.eventQueue_,a,s)}function V1(n,e){ub(n,"connected",e),e===!1&&iY(n)}function nY(n,e){br(e,(t,r)=>{ub(n,t,r)})}function ub(n,e,t){let r=new ot("/.info/"+e),i=Cn(t);n.infoData_.updateSnapshot(r,i);let o=$g(n.infoSyncTree_,r,i);ua(n.eventQueue_,r,o)}function rY(n){return n.nextWriteId_++}function iY(n){$F(n,"onDisconnectEvents");let e=BF(n),t=Lg();kC(n.onDisconnect_,et(),(i,o)=>{let s=U7(i,o,n.serverSyncTree_,e);mF(t,i,s)});let r=[];kC(t,et(),(i,o)=>{r=r.concat($g(n.serverSyncTree_,i,o));let s=cY(n,i);hb(n,s)}),n.onDisconnect_=Lg(),ua(n.eventQueue_,et(),r)}function oY(n){n.persistentConnection_&&n.persistentConnection_.interrupt(X7)}function $F(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Tn(t,...e)}function HF(n,e,t){return xF(n.serverSyncTree_,e,t)||wt.EMPTY_NODE}function db(n,e=n.transactionQueueTree_){if(e||qg(n,e),cl(e)){let t=qF(n,e);G(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&sY(n,Qd(e),t)}else LF(e)&&Wg(e,t=>{db(n,t)})}function sY(n,e,t){let r=t.map(u=>u.currentWriteId),i=HF(n,e,r),o=i,s=i.hash();for(let u=0;u<t.length;u++){let d=t[u];G(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Tr(e,d.path);o=o.updateChild(f,d.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,u=>{$F(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(Jc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();qg(n,lb(n.transactionQueueTree_,e)),db(n,n.transactionQueueTree_),ua(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)Kd(f[m])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{sr("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}hb(n,e)}},s)}function hb(n,e){let t=WF(n,e),r=Qd(t),i=qF(n,t);return aY(n,i,r),r}function aY(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=Tr(t,c.path),d=!1,f;if(G(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Jc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Z7)d=!0,f="maxretry",i=i.concat(Jc(n.serverSyncTree_,c.currentWriteId,!0));else{let m=HF(n,c.path,s);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){jF("transaction failed: Data returned ",v,c.path);let I=Cn(v);typeof v=="object"&&v!=null&&Zr(v,".priority")||(I=I.updatePriority(m.getPriority()));let A=c.currentWriteId,F=BF(n),q=j7(I,m,F);c.currentOutputSnapshotRaw=I,c.currentOutputSnapshotResolved=q,c.currentWriteId=rY(n),s.splice(s.indexOf(A),1),i=i.concat(M7(n.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(Jc(n.serverSyncTree_,A,!0))}else d=!0,f="nodata",i=i.concat(Jc(n.serverSyncTree_,c.currentWriteId,!0))}ua(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}qg(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Kd(r[a]);db(n,n.transactionQueueTree_)}function WF(n,e){let t,r=n.transactionQueueTree_;for(t=We(e);t!==null&&cl(r)===void 0;)r=lb(r,t),e=ft(e),t=We(e);return r}function qF(n,e){let t=[];return zF(n,e,t),t.sort((r,i)=>r.order-i.order),t}function zF(n,e,t){let r=cl(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Wg(e,i=>{zF(n,i,t)})}function qg(n,e){let t=cl(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,FF(e,t.length>0?t:void 0)}Wg(e,r=>{qg(n,r)})}function cY(n,e){let t=Qd(WF(n,e)),r=lb(n.transactionQueueTree_,e);return $7(r,i=>{lC(n,i)}),lC(n,r),VF(r,i=>{lC(n,i)}),t}function lC(n,e){let t=cl(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(G(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(G(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(Jc(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?FF(e,void 0):t.length=o+1,ua(n.eventQueue_,Qd(e),i);for(let s=0;s<r.length;s++)Kd(r[s])}}function lY(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function uY(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):sr(`Invalid query segment '${t}' in query '${n}'`)}return e}var U1=function(n,e){let t=dY(n),r=t.namespace;t.domain==="firebase.com"&&no(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&no("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||oK();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new xg(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ot(t.pathString)}},dY=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=lY(n.substring(d,f)));let m=uY(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let v=e.slice(0,u);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),t=e.substring(I+1),o=r}"ns"in m&&(o=m.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var JC=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ve(this._path)?null:sF(this._path)}get ref(){return new sl(this._repo,this._path)}get _queryIdentifier(){let e=b1(this._queryParams),t=tb(e);return t==="{}"?"default":t}get _queryObject(){return b1(this._queryParams)}isEqual(e){if(e=Ue(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=lF(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+LK(this._path)}};var sl=class n extends JC{constructor(e,t){super(e,t,new NC,!1)}get parent(){let e=cF(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};x7(sl);N7(sl);var hY="FIREBASE_DATABASE_EMULATOR_HOST",XC={},fY=!1;function pY(n,e,t,r){n.repoInfo_=new xg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function mY(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||no("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=U1(o,i),a=s.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[hY]),u?(c=!0,o=`http://${u}?ns=${a.namespace}`,s=U1(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let d=i&&c?new jd(jd.OWNER):new mC(n.name,n.options,e);K7("Invalid Firebase Database URL",s),Ve(s.path)||no("Database URL must point to the root of a Firebase Database (not including a child path).");let f=vY(a,n,d,new pC(n.name,t));return new ZC(f,n)}function gY(n,e){let t=XC[e];(!t||t[n.key]!==n)&&no(`Database ${e}(${n.repoInfo_}) has already been deleted.`),oY(n),delete t[n.key]}function vY(n,e,t,r){let i=XC[e.name];i||(i={},XC[e.name]=i);let o=i[n.toURLString()];return o&&no("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new QC(n,fY,t,r),i[n.toURLString()]=o,o}var ZC=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(eY(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new sl(this._repo,et())),this._rootInternal}_delete(){return this._rootInternal!==null&&(gY(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&no("Cannot call "+e+" on a deleted database.")}};function GF(n=Ht(),e){let t=$t(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=yo("database");r&&KF(t,...r)}return t}function KF(n,e,t,r={}){n=Ue(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&no("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&no('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new jd(jd.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:Ta(r.mockUserToken,n.app.options.projectId);o=new jd(s)}pY(i,e,t,o)}function yY(n){nK(Vn),Ct(new Tt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return mY(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),se(a1,c1,n),se(a1,c1,"esm2017")}rb.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};rb.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};yY();var Jd=class{constructor(e){return e}},YF="database",fb=class{constructor(){return Ft(YF)}};var pb=new W("angularfire2.database-instances");function _Y(n,e){let t=qt(YF,n,e);return t&&new Jd(t)}function wY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Jd(r)}}var EY={provide:fb,deps:[[new be,pb]]},IY={provide:Jd,useFactory:_Y,deps:[[new be,pb],yt]};function QF(n,...e){return se("angularfire",pt.full,"rtdb"),at([IY,EY,{provide:pb,useFactory:wY(n),multi:!0,deps:[me,xe,At,Pt,[new be,Br],[new be,_r],...e]}])}var JF=Ye(GF,!0);var eL="functions";var mb=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return y(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var gb="us-central1";var vb=class{constructor(e,t,r,i,o=gb,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new mb(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=gb}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function TY(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var XF="@firebase/functions",ZF="0.12.1";var CY="auth-internal",bY="app-check-internal",DY="messaging-internal";function SY(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(CY),s=t.getProvider(DY),a=t.getProvider(bY);return new vb(i,o,s,a,r)};Ct(new Tt(eL,e,"PUBLIC").setMultipleInstances(!0)),se(XF,ZF,n),se(XF,ZF,"esm2017")}function tL(n=Ht(),e=gb){let r=$t(Ue(n),eL).getImmediate({identifier:e}),i=yo("functions");return i&&nL(r,...i),r}function nL(n,e,t){TY(Ue(n),e,t)}SY();var Xd=class{constructor(e){return e}},rL="functions",yb=class{constructor(){return Ft(rL)}};var _b=new W("angularfire2.functions-instances");function AY(n,e){let t=qt(rL,n,e);return t&&new Xd(t)}function RY(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xd(r)}}var xY={provide:yb,deps:[[new be,_b]]},NY={provide:Xd,useFactory:AY,deps:[[new be,_b],yt]};function iL(n,...e){return se("angularfire",pt.full,"fn"),at([NY,xY,{provide:_b,useFactory:RY(n),multi:!0,deps:[me,xe,At,Pt,[new be,Br],[new be,_r],...e]}])}var oL=Ye(tL,!0);var MY="/firebase-messaging-sw.js",PY="/firebase-cloud-messaging-push-scope",hL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",kY="https://fcmregistrations.googleapis.com/v1",fL="google.c.a.c_id",OY="google.c.a.c_l",FY="google.c.a.ts",LY="google.c.a.e",sL=1e4;var zg=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(zg||{});function ro(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function VY(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var wb="fcm_token_details_db",UY=5,aL="fcm_token_object_Store";function jY(n){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(wb))return null;let e=null;return(yield my(wb,UY,{upgrade:(r,i,o,s)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(aL))return;let c=s.objectStore(aL),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!u){if(i===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:ro(d.vapidKey)}}}else if(i===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ro(d.auth),p256dh:ro(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ro(d.vapidKey)}}}else if(i===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:ro(d.auth),p256dh:ro(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:ro(d.vapidKey)}}}}})})).close(),yield Ph(wb),yield Ph("fcm_vapid_details_db"),yield Ph("undefined"),BY(e)?e:null})}function BY(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var $Y="firebase-messaging-database",HY=1,Zd="firebase-messaging-store",Eb=null;function pL(){return Eb||(Eb=my($Y,HY,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Zd)}}})),Eb}function WY(n){return y(this,null,function*(){let e=mL(n),r=yield(yield pL()).transaction(Zd).objectStore(Zd).get(e);if(r)return r;{let i=yield jY(n.appConfig.senderId);if(i)return yield Cb(n,i),i}})}function Cb(n,e){return y(this,null,function*(){let t=mL(n),i=(yield pL()).transaction(Zd,"readwrite");return yield i.objectStore(Zd).put(e,t),yield i.done,e})}function mL({appConfig:n}){return n.appId}var qY={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Fn=new cr("messaging","Messaging",qY);function zY(n,e){return y(this,null,function*(){let t=yield Db(n),r=gL(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(bb(n.appConfig),i)).json()}catch(s){throw Fn.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Fn.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw Fn.create("token-subscribe-no-token");return o.token})}function GY(n,e){return y(this,null,function*(){let t=yield Db(n),r=gL(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${bb(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw Fn.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw Fn.create("token-update-failed",{errorInfo:s})}if(!o.token)throw Fn.create("token-update-no-token");return o.token})}function KY(n,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield Db(n)};try{let o=yield(yield fetch(`${bb(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw Fn.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw Fn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function bb({projectId:n}){return`${kY}/projects/${n}/registrations`}function Db(t){return y(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function gL({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==hL&&(i.web.applicationPubKey=r),i}var YY=7*24*60*60*1e3;function QY(n){return y(this,null,function*(){let e=yield XY(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ro(e.getKey("auth")),p256dh:ro(e.getKey("p256dh"))},r=yield WY(n.firebaseDependencies);if(r){if(ZY(r.subscriptionOptions,t))return Date.now()>=r.createTime+YY?JY(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield KY(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return cL(n.firebaseDependencies,t)}else return cL(n.firebaseDependencies,t)})}function JY(n,e){return y(this,null,function*(){try{let t=yield GY(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Cb(n.firebaseDependencies,r),t}catch(t){throw t}})}function cL(n,e){return y(this,null,function*(){let r={token:yield zY(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Cb(n,r),r.token})}function XY(n,e){return y(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:VY(e)})})}function ZY(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function lL(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return eQ(e,n),tQ(e,n),nQ(e,n),e}function eQ(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function tQ(n,e){e.data&&(n.data=e.data)}function nQ(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function rQ(n){return typeof n=="object"&&!!n&&fL in n}iQ("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function iQ(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function oQ(n){if(!n||!n.options)throw Ib("App Configuration Object");if(!n.name)throw Ib("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw Ib(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Ib(n){return Fn.create("missing-app-config-values",{valueName:n})}var Tb=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=oQ(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function sQ(n){return y(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(MY,{scope:PY}),n.swRegistration.update().catch(()=>{}),yield aQ(n.swRegistration)}catch(e){throw Fn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function aQ(n){return y(this,null,function*(){return new Promise((e,t)=>{let r=setTimeout(()=>t(new Error(`Service worker not registered after ${sL} ms`)),sL),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})})}function cQ(n,e){return y(this,null,function*(){if(!e&&!n.swRegistration&&(yield sQ(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Fn.create("invalid-sw-registration");n.swRegistration=e}})}function lQ(n,e){return y(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=hL)})}function uQ(n,e){return y(this,null,function*(){if(!navigator)throw Fn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Fn.create("permission-blocked");return yield lQ(n,e?.vapidKey),yield cQ(n,e?.serviceWorkerRegistration),QY(n)})}function dQ(n,e,t){return y(this,null,function*(){let r=hQ(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[fL],message_name:t[OY],message_time:t[FY],message_device_time:Math.floor(Date.now()/1e3)})})}function hQ(n){switch(n){case zg.NOTIFICATION_CLICKED:return"notification_open";case zg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function fQ(n,e){return y(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===zg.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(lL(t)):n.onMessageHandler.next(lL(t)));let r=t.data;rQ(r)&&r[LY]==="1"&&(yield dQ(n,t.messageType,r))})}var uL="@firebase/messaging",dL="0.12.16";var pQ=n=>{let e=new Tb(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>fQ(e,t)),e},mQ=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>uQ(e,r)}};function gQ(){Ct(new Tt("messaging",pQ,"PUBLIC")),Ct(new Tt("messaging-internal",mQ,"PRIVATE")),se(uL,dL),se(uL,dL,"esm2017")}function vL(){return y(this,null,function*(){try{yield Ca()}catch{return!1}return typeof window<"u"&&Xr()&&Ql()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function yL(n=Ht()){return vL().then(e=>{if(!e)throw Fn.create("unsupported-browser")},e=>{throw Fn.create("indexed-db-unsupported")}),$t(Ue(n),"messaging").getImmediate()}gQ();var eh=class{constructor(e){return e}},_L="messaging",Sb=class{constructor(){return Ft(_L)}};var Ab=new W("angularfire2.messaging-instances");function vQ(n,e,t){if($i(t))return null;let r=qt(_L,n,e);return r&&new eh(r)}function yQ(n){return(e,t,r)=>{if($i(r))return null;let i=e.runOutsideAngular(()=>n(t));return new eh(i)}}var _Q={provide:Sb,deps:[[new be,Ab]]},wQ={provide:eh,useFactory:vQ,deps:[[new be,Ab],yt,St]};function wL(n,...e){return se("angularfire",pt.full,"fcm"),at([wQ,_Q,{provide:Ab,useFactory:yQ(n),multi:!0,deps:[me,xe,St,At,Pt,...e]}])}var EL=Ye(yL,!0);var th=class{constructor(e){return e}},IL="performance",Rb=class{constructor(){return Ft(IL)}};var xb=new W("angularfire2.performance-instances");function EQ(n,e,t){if(!lc(t))return null;let r=qt(IL,n,e);return r&&new th(r)}function IQ(n){return(e,t,r)=>{if(!lc(t))return null;let i=e.runOutsideAngular(()=>n(r));return new th(i)}}var TQ={provide:Rb,deps:[[new be,xb]]},CQ={provide:th,useFactory:EQ,deps:[[new be,xb],yt,St]};function TL(n,...e){return se("angularfire",pt.full,"perf"),at([CQ,TQ,{provide:xb,useFactory:IQ(n),multi:!0,deps:[me,St,xe,At,Pt,...e]}])}var CL=Ye(ES,!0);var xL="firebasestorage.googleapis.com",bQ="storageBucket",DQ=2*60*1e3,SQ=10*60*1e3;var gi=class n extends Jn{constructor(e,t,r=0){super(Nb(e),`Firebase Storage: ${t} (${Nb(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nb(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},oo=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(oo||{});function Nb(n){return"storage/"+n}function AQ(){let n="An unknown error occurred, please check the error payload for server response.";return new gi(oo.UNKNOWN,n)}function RQ(){return new gi(oo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function xQ(){return new gi(oo.CANCELED,"User canceled the upload/download.")}function NQ(n){return new gi(oo.INVALID_URL,"Invalid URL '"+n+"'.")}function MQ(n){return new gi(oo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function bL(n){return new gi(oo.INVALID_ARGUMENT,n)}function NL(){return new gi(oo.APP_DELETED,"The Firebase app was deleted.")}function PQ(n){return new gi(oo.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var io=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw MQ(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(re){re.path.charAt(re.path.length-1)==="/"&&(re.path_=re.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function u(re){re.path_=decodeURIComponent(re.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),I={bucket:1,path:3},x=t===xL?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",F=new RegExp(`^https?://${x}/${i}/${A}`,"i"),z=[{regex:a,indices:c,postModify:o},{regex:v,indices:I,postModify:u},{regex:F,indices:{bucket:1,path:2},postModify:u}];for(let re=0;re<z.length;re++){let tt=z[re],de=tt.regex.exec(e);if(de){let R=de[tt.indices.bucket],E=de[tt.indices.path];E||(E=""),r=new n(R,E),tt.postModify(r);break}}if(r==null)throw NQ(e);return r}},Mb=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function kQ(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let u=!1;function d(...A){u||(u=!0,e.apply(null,A))}function f(A){i=setTimeout(()=>{i=null,n(v,c())},A)}function m(){o&&clearTimeout(o)}function v(A,...F){if(u){m();return}if(A){m(),d.call(null,A,...F);return}if(c()||s){m(),d.call(null,A,...F);return}r<64&&(r*=2);let z;a===1?(a=2,z=0):z=(r+Math.random())*1e3,f(z)}let I=!1;function x(A){I||(I=!0,m(),!u&&(i!==null?(A||(a=2),clearTimeout(i),f(0)):A||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,x(!0)},t),x}function OQ(n){n(!1)}function FQ(n){return n!==void 0}function DL(n,e,t,r){if(r<e)throw bL(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw bL(`Invalid value for '${n}'. Expected ${t} or less.`)}function LQ(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Pb=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Pb||{});function VQ(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var kb=class{constructor(e,t,r,i,o,s,a,c,u,d,f,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,I)=>{this.resolve_=v,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ll(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Pb.NO_ERROR,c=o.getStatus();if(!a||VQ(c,this.additionalRetryCodes_)&&this.retry){let d=o.getErrorCode()===Pb.ABORT;r(!1,new ll(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new ll(u,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());FQ(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=AQ();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?NL():xQ();s(c)}else{let c=RQ();s(c)}};this.canceled_?t(!1,new ll(!1,null,!0)):this.backoffId_=kQ(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OQ(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ll=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function UQ(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function jQ(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BQ(n,e){e&&(n["X-Firebase-GMPID"]=e)}function $Q(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function HQ(n,e,t,r,i,o,s=!0){let a=LQ(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return BQ(u,e),UQ(u,t),jQ(u,o),$Q(u,r),new kb(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function WQ(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function qQ(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Nme=256*1024;var Ob=class n{constructor(e,t){this._service=e,t instanceof io?this._location=t:this._location=io.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new io(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qQ(this._location.path)}get storage(){return this._service}get parent(){let e=WQ(this._location.path);if(e===null)return null;let t=new io(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw PQ(e)}};function SL(n,e){let t=e?.[bQ];return t==null?null:io.makeFromBucketSpec(t,n)}function zQ(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Ta(i,n.app.options.projectId))}var Fb=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=xL,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DQ,this._maxUploadRetryTime=SQ,this._requests=new Set,i!=null?this._bucket=io.makeFromBucketSpec(i,this._host):this._bucket=SL(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=io.makeFromBucketSpec(this._url,e):this._bucket=SL(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){DL("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){DL("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ob(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Mb(NL());{let s=HQ(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},AL="@firebase/storage",RL="0.13.5";var ML="storage";function PL(n=Ht(),e){n=Ue(n);let r=$t(n,ML).getImmediate({identifier:e}),i=yo("storage");return i&&kL(r,...i),r}function kL(n,e,t,r={}){zQ(n,e,t,r)}function GQ(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new Fb(t,r,i,e,Vn)}function KQ(){Ct(new Tt(ML,GQ,"PUBLIC").setMultipleInstances(!0)),se(AL,RL,""),se(AL,RL,"esm2017")}KQ();var nh=class{constructor(e){return e}},OL="storage",Lb=class{constructor(){return Ft(OL)}};var Vb=new W("angularfire2.storage-instances");function YQ(n,e){let t=qt(OL,n,e);return t&&new nh(t)}function QQ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nh(r)}}var JQ={provide:Lb,deps:[[new be,Vb]]},XQ={provide:nh,useFactory:YQ,deps:[[new be,Vb],yt]};function FL(n,...e){return se("angularfire",pt.full,"gcs"),at([XQ,JQ,{provide:Vb,useFactory:QQ(n),multi:!0,deps:[me,xe,At,Pt,[new be,Br],[new be,_r],...e]}])}var LL=Ye(PL,!0);var Ub="@firebase/remote-config",VL="0.5.0";var jL="remote-config",UL=100;var ZQ={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."},Ln=new cr("remoteconfig","Remote Config",ZQ);function BL(n=Ht()){return n=Ue(n),$t(n,jL).getImmediate()}function $L(n){let e=Ue(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var jb=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(o),i})}};function eJ(n=navigator){return n.languages&&n.languages[0]||n.language}var Bb=class{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:eJ(),custom_signals:e.customSignals},c={method:"POST",headers:s,body:JSON.stringify(a)},u=fetch(o,c),d=new Promise((A,F)=>{e.signal.addEventListener(()=>{let q=new Error("The operation was aborted.");q.name="AbortError",F(q)})}),f;try{yield Promise.race([u,d]),f=yield u}catch(A){let F="fetch-client-network";throw A?.name==="AbortError"&&(F="fetch-timeout"),Ln.create(F,{originalErrorMessage:A?.message})}let m=f.status,v=f.headers.get("ETag")||void 0,I,x;if(f.status===200){let A;try{A=yield f.json()}catch(F){throw Ln.create("fetch-client-parse",{originalErrorMessage:F?.message})}I=A.entries,x=A.state}if(x==="INSTANCE_STATE_UNSPECIFIED"?m=500:x==="NO_CHANGE"?m=304:(x==="NO_TEMPLATE"||x==="EMPTY_CONFIG")&&(I={}),m!==304&&m!==200)throw Ln.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:I}})}};function tJ(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nJ(n){if(!(n instanceof Jn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var $b=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return y(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,o){return y(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield tJ(e.signal,t);try{let s=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),s}catch(s){if(!nJ(s))throw s;let a={throttleEndTimeMillis:Date.now()+ba(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var rJ=60*1e3,iJ=12*60*60*1e3,Hb=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:rJ,minimumFetchIntervalMillis:iJ},this.defaultConfig={}}};function Gg(n,e){let t=n.target.error||void 0;return Ln.create(e,{originalErrorMessage:t&&t?.message})}var Xo="app_namespace_store",oJ="firebase_remote_config",sJ=1;function aJ(){return new Promise((n,e)=>{try{let t=indexedDB.open(oJ,sJ);t.onerror=r=>{e(Gg(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Xo,{keyPath:"compositeKey"})}}}catch(t){e(Ln.create("storage-open",{originalErrorMessage:t?.message}))}})}var Wb=class{constructor(e,t,r,i=aJ()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}setCustomSignals(e){return y(this,null,function*(){let r=(yield this.openDbPromise).transaction([Xo],"readwrite"),i=yield this.getWithTransaction("custom_signals",r),o=Object.assign(Object.assign({},i),e),s=Object.fromEntries(Object.entries(o).filter(([a,c])=>c!==null).map(([a,c])=>typeof c=="number"?[a,c.toString()]:[a,c]));if(Object.keys(s).length>UL)throw Ln.create("custom-signal-max-allowed-signals",{maxSignals:UL});return yield this.setWithTransaction("custom_signals",s,r),s})}getWithTransaction(e,t){return y(this,null,function*(){return new Promise((r,i)=>{let o=t.objectStore(Xo),s=this.createCompositeKey(e);try{let a=o.get(s);a.onerror=c=>{i(Gg(c,"storage-get"))},a.onsuccess=c=>{let u=c.target.result;r(u?u.value:void 0)}}catch(a){i(Ln.create("storage-get",{originalErrorMessage:a?.message}))}})})}setWithTransaction(e,t,r){return y(this,null,function*(){return new Promise((i,o)=>{let s=r.objectStore(Xo),a=this.createCompositeKey(e);try{let c=s.put({compositeKey:a,value:t});c.onerror=u=>{o(Gg(u,"storage-set"))},c.onsuccess=()=>{i()}}catch(c){o(Ln.create("storage-set",{originalErrorMessage:c?.message}))}})})}get(e){return y(this,null,function*(){let r=(yield this.openDbPromise).transaction([Xo],"readonly");return this.getWithTransaction(e,r)})}set(e,t){return y(this,null,function*(){let i=(yield this.openDbPromise).transaction([Xo],"readwrite");return this.setWithTransaction(e,t,i)})}delete(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let s=t.transaction([Xo],"readwrite").objectStore(Xo),a=this.createCompositeKey(e);try{let c=s.delete(a);c.onerror=u=>{i(Gg(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Ln.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var qb=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=this.storage.getCustomSignals(),o=yield e;o&&(this.lastFetchStatus=o);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let a=yield r;a&&(this.activeConfig=a);let c=yield i;c&&(this.customSignals=c)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}setCustomSignals(e){return y(this,null,function*(){this.customSignals=yield this.storage.setCustomSignals(e)})}};function cJ(){Ct(new Tt(jL,n,"PUBLIC").setMultipleInstances(!0)),se(Ub,VL),se(Ub,VL,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ln.create("registration-window");if(!Xr())throw Ln.create("indexed-db-unavailable");let{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw Ln.create("registration-project-id");if(!s)throw Ln.create("registration-api-key");if(!a)throw Ln.create("registration-app-id");t=t||"firebase";let c=new Wb(a,r.name,t),u=new qb(c),d=new lr(Ub);d.logLevel=tn.ERROR;let f=new Bb(i,Vn,t,o,s,a),m=new $b(f,c),v=new jb(m,c,u,d),I=new Hb(r,v,u,c,d);return $L(I),I}}cJ();var rh=class{constructor(e){return e}},HL="remote-config",zb=class{constructor(){return Ft(HL)}};var Gb=new W("angularfire2.remote-config-instances");function lJ(n,e,t){if($i(t))return null;let r=qt(HL,n,e);return r&&new rh(r)}function uJ(n){return(e,t,r)=>{if($i(r))return null;let i=e.runOutsideAngular(()=>n(t));return new rh(i)}}var dJ={provide:zb,deps:[[new be,Gb]]},hJ={provide:rh,useFactory:lJ,deps:[[new be,Gb],yt,St]};function WL(n,...e){return se("angularfire",pt.full,"rc"),at([hJ,dJ,{provide:Gb,useFactory:uJ(n),multi:!0,deps:[me,xe,St,At,Pt,...e]}])}var qL=Ye(BL,!0);var zL={firebaseConfig:{apiKey:"AIzaSyCaMopW6HWBwUEvvtDZUQ7UemvGdT7xGEA",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:82c3741552a46bb149bf66",measurementId:"G-LXRMSZ5ZSH"},production:!0};var GL={providers:[MN(),tN({eventCoalescing:!0}),bM(DM),RM(()=>xM(zL.firebaseConfig)),PP(()=>OP()),tk(()=>XP()),ek,jI,r1(()=>i1()),QF(()=>JF()),iL(()=>oL()),wL(()=>EL()),TL(()=>CL()),FL(()=>LL()),WL(()=>qL())]};var Kn=class n{destroyRef=D(Li);firestore=D(ra);destroyed=new ut;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return y(this,null,function*(){let e=yield tC(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),o=parseInt(i.id,10);!isNaN(o)&&o>t&&(t=o)}),(t+1).toString()})}createData(e,t){let r=eC(this.collectionRef,e);return nC(r,t)}updateData(e,t){return nC(eC(this.collectionRef,e),t,{merge:!0})}getDataById(e){return y(this,null,function*(){let t=o1(this.collectionRef,s1("id","==",e)),r=yield tC(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var ze=class n extends Kn{collectionPath="/race-configs";collectionRef=Ir(this.firestore,this.collectionPath);raceConfig=X(void 0);constructor(){super(),this.getAll().pipe(Qe()).subscribe(e=>{e.length>0&&this.raceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.raceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateInterphoneBatteryDurationMinute(e){let t=this.raceConfig();return t?(t.interphoneBatteryDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.raceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitInterphoneChange(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitInterphoneChange=e,this.updateData(t.id,t)):Promise.resolve()}updateReferenceLapTime(e){let t=this.raceConfig();return t?(t.referenceLapTimeMillisecond=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return Er(this.collectionRef).pipe(Kt(this.destroyed),ee(e=>e.map(t=>t).filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var fJ=Math.pow(10,8)*24*60*60*1e3,fve=-fJ,Kg=6048e5,KL=864e5,ul=6e4,dl=36e5,YL=1e3;var pJ=3600;var QL=pJ*24,pve=QL*7,mJ=QL*365.2425,gJ=mJ/12,mve=gJ*3,Kb=Symbol.for("constructDateFrom");function Et(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Kb in n?n[Kb](e):n instanceof Date?new n.constructor(e):new Date(e)}function ue(n,e){return Et(e||n,n)}function JL(n,e,t){let r=ue(n,t?.in);return isNaN(e)?Et(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function XL(n,e,t){let r=ue(n,t?.in);if(isNaN(e))return Et(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),o=Et(t?.in||n,r.getTime());o.setMonth(r.getMonth()+e+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function hl(n,e,t){let{years:r=0,months:i=0,weeks:o=0,days:s=0,hours:a=0,minutes:c=0,seconds:u=0}=e,d=ue(n,t?.in),f=i||r?XL(d,i+r*12):d,m=s||o?JL(f,s+o*7):f,v=c+a*60,x=(u+v*60)*1e3;return Et(t?.in||n,+m+x)}function ar(n,e,t){return Et(t?.in||n,+ue(n)+e)}function so(n,e,t){return ar(n,e*dl,t)}var vJ={};function Zo(){return vJ}function ao(n,e){let t=Zo(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=ue(n,e?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function da(n,e){return ao(n,ge(B({},e),{weekStartsOn:1}))}function Yg(n,e){let t=ue(n,e?.in),r=t.getFullYear(),i=Et(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=da(i),s=Et(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=da(s);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function Yb(n){let e=ue(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Dn(n,...e){let t=Et.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function Qb(n,e){let t=ue(n,e?.in);return t.setHours(0,0,0,0),t}function Qg(n,e,t){let[r,i]=Dn(t?.in,n,e),o=Qb(r),s=Qb(i),a=+o-Yb(o),c=+s-Yb(s);return Math.round((a-c)/KL)}function ZL(n,e){let t=Yg(n,e),r=Et(e?.in||n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),da(r)}function co(n,e,t){let r=ue(n,t?.in);return r.setTime(r.getTime()+e*ul),r}function fl(n,e,t){return ar(n,e*1e3,t)}function ha(n,e){let t=+ue(n)-+ue(e);return t<0?-1:t>0?1:t}function eV(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function tV(n){return!(!eV(n)&&typeof n!="number"||isNaN(+ue(n)))}function nV(n,e,t){let[r,i]=Dn(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return o*12+s}function rV(n,e,t){let[r,i]=Dn(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function oV(n,e,t){let[r,i]=Dn(t?.in,n,e),o=iV(r,i),s=Math.abs(Qg(r,i));r.setDate(r.getDate()-o*s);let a=+(iV(r,i)===-o),c=o*(s-a);return c===0?0:c}function iV(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function pl(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function sV(n,e,t){let[r,i]=Dn(t?.in,n,e),o=(+r-+i)/dl;return pl(t?.roundingMethod)(o)}function lo(n,e){return+ue(n)-+ue(e)}function ml(n,e,t){let r=lo(n,e)/ul;return pl(t?.roundingMethod)(r)}function aV(n,e){let t=ue(n,e?.in);return t.setHours(23,59,59,999),t}function cV(n,e){let t=ue(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function lV(n,e){let t=ue(n,e?.in);return+aV(t,e)==+cV(t,e)}function uV(n,e,t){let[r,i,o]=Dn(t?.in,n,n,e),s=ha(i,o),a=Math.abs(nV(i,o));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let c=ha(i,o)===-s;lV(r)&&a===1&&ha(r,o)===1&&(c=!1);let u=s*(a-+c);return u===0?0:u}function Jg(n,e,t){let r=lo(n,e)/1e3;return pl(t?.roundingMethod)(r)}function dV(n,e,t){let[r,i]=Dn(t?.in,n,e),o=ha(r,i),s=Math.abs(rV(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=ha(r,i)===-o,c=o*(s-+a);return c===0?0:c}function hV(n,e){let[t,r]=Dn(n,e.start,e.end);return{start:t,end:r}}function fV(n,e){let t=ue(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}var yJ={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pV=(n,e,t)=>{let r,i=yJ[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Xg(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var _J={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},wJ={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},EJ={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mV={date:Xg({formats:_J,defaultWidth:"full"}),time:Xg({formats:wJ,defaultWidth:"full"}),dateTime:Xg({formats:EJ,defaultWidth:"full"})};var IJ={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gV=(n,e,t,r)=>IJ[n];function gl(n){return(e,t)=>{let r=t?.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}var TJ={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},CJ={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},bJ={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},DJ={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},SJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},AJ={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RJ=(n,e)=>{let t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},vV={ordinalNumber:RJ,era:gl({values:TJ,defaultWidth:"wide"}),quarter:gl({values:CJ,defaultWidth:"wide",argumentCallback:n=>n-1}),month:gl({values:bJ,defaultWidth:"wide"}),day:gl({values:DJ,defaultWidth:"wide"}),dayPeriod:gl({values:SJ,defaultWidth:"wide",formattingValues:AJ,defaultFormattingWidth:"wide"})};function vl(n){return(e,t={})=>{let r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?NJ(a,f=>f.test(s)):xJ(a,f=>f.test(s)),u;u=n.valueCallback?n.valueCallback(c):c,u=t.valueCallback?t.valueCallback(u):u;let d=e.slice(s.length);return{value:u,rest:d}}}function xJ(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function NJ(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function yV(n){return(e,t={})=>{let r=e.match(n.matchPattern);if(!r)return null;let i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(i.length);return{value:s,rest:a}}}var MJ=/^(\d+)(th|st|nd|rd)?/i,PJ=/\d+/i,kJ={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},OJ={any:[/^b/i,/^(a|c)/i]},FJ={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},LJ={any:[/1/i,/2/i,/3/i,/4/i]},VJ={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},UJ={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jJ={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},BJ={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$J={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},HJ={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},_V={ordinalNumber:yV({matchPattern:MJ,parsePattern:PJ,valueCallback:n=>parseInt(n,10)}),era:vl({matchPatterns:kJ,defaultMatchWidth:"wide",parsePatterns:OJ,defaultParseWidth:"any"}),quarter:vl({matchPatterns:FJ,defaultMatchWidth:"wide",parsePatterns:LJ,defaultParseWidth:"any",valueCallback:n=>n+1}),month:vl({matchPatterns:VJ,defaultMatchWidth:"wide",parsePatterns:UJ,defaultParseWidth:"any"}),day:vl({matchPatterns:jJ,defaultMatchWidth:"wide",parsePatterns:BJ,defaultParseWidth:"any"}),dayPeriod:vl({matchPatterns:$J,defaultMatchWidth:"any",parsePatterns:HJ,defaultParseWidth:"any"})};var Jb={code:"en-US",formatDistance:pV,formatLong:mV,formatRelative:gV,localize:vV,match:_V,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wV(n,e){let t=ue(n,e?.in);return Qg(t,fV(t))+1}function EV(n,e){let t=ue(n,e?.in),r=+da(t)-+ZL(t);return Math.round(r/Kg)+1}function Zg(n,e){let t=ue(n,e?.in),r=t.getFullYear(),i=Zo(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Et(e?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=ao(s,e),c=Et(e?.in||n,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);let u=ao(c,e);return+t>=+a?r+1:+t>=+u?r:r-1}function IV(n,e){let t=Zo(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=Zg(n,e),o=Et(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),ao(o,e)}function TV(n,e){let t=ue(n,e?.in),r=+ao(t,e)-+IV(t,e);return Math.round(r/Kg)+1}function Je(n,e){let t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}var uo={y(n,e){let t=n.getFullYear(),r=t>0?t:1-t;return Je(e==="yy"?r%100:r,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):Je(t+1,2)},d(n,e){return Je(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return Je(n.getHours()%12||12,e.length)},H(n,e){return Je(n.getHours(),e.length)},m(n,e){return Je(n.getMinutes(),e.length)},s(n,e){return Je(n.getSeconds(),e.length)},S(n,e){let t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return Je(i,e.length)}};var yl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Xb={G:function(n,e,t){let r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return uo.y(n,e)},Y:function(n,e,t,r){let i=Zg(n,r),o=i>0?i:1-i;if(e==="YY"){let s=o%100;return Je(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):Je(o,e.length)},R:function(n,e){let t=Yg(n);return Je(t,e.length)},u:function(n,e){let t=n.getFullYear();return Je(t,e.length)},Q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Je(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Je(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){let r=n.getMonth();switch(e){case"M":case"MM":return uo.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){let r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return Je(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){let i=TV(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):Je(i,e.length)},I:function(n,e,t){let r=EV(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):Je(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):uo.d(n,e)},D:function(n,e,t){let r=wV(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):Je(r,e.length)},E:function(n,e,t){let r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return Je(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return Je(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){let r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Je(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){let i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){let r=n.getHours(),i;switch(r===12?i=yl.noon:r===0?i=yl.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){let r=n.getHours(),i;switch(r>=17?i=yl.evening:r>=12?i=yl.afternoon:r>=4?i=yl.morning:i=yl.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return uo.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):uo.H(n,e)},K:function(n,e,t){let r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):Je(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):Je(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):uo.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):uo.s(n,e)},S:function(n,e){return uo.S(n,e)},X:function(n,e,t){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return bV(r);case"XXXX":case"XX":return fa(r);case"XXXXX":case"XXX":default:return fa(r,":")}},x:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"x":return bV(r);case"xxxx":case"xx":return fa(r);case"xxxxx":case"xxx":default:return fa(r,":")}},O:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+CV(r,":");case"OOOO":default:return"GMT"+fa(r,":")}},z:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+CV(r,":");case"zzzz":default:return"GMT"+fa(r,":")}},t:function(n,e,t){let r=Math.trunc(+n/1e3);return Je(r,e.length)},T:function(n,e,t){return Je(+n,e.length)}};function CV(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+Je(o,2)}function bV(n,e){return n%60===0?(n>0?"-":"+")+Je(Math.abs(n)/60,2):fa(n,e)}function fa(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=Je(Math.trunc(r/60),2),o=Je(r%60,2);return t+i+e+o}var DV=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},SV=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},WJ=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return DV(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",DV(r,e)).replace("{{time}}",SV(i,e))},AV={p:SV,P:WJ};var qJ=/^D+$/,zJ=/^Y+$/,GJ=["D","DD","YY","YYYY"];function RV(n){return qJ.test(n)}function xV(n){return zJ.test(n)}function NV(n,e,t){let r=KJ(n,e,t);if(console.warn(r),GJ.includes(n))throw new RangeError(r)}function KJ(n,e,t){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var YJ=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,QJ=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,JJ=/^'([^]*?)'?$/,XJ=/''/g,ZJ=/[a-zA-Z]/;function Kr(n,e,t){let r=Zo(),i=t?.locale??r.locale??Jb,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=ue(n,t?.in);if(!tV(a))throw new RangeError("Invalid time value");let c=e.match(QJ).map(d=>{let f=d[0];if(f==="p"||f==="P"){let m=AV[f];return m(d,i.formatLong)}return d}).join("").match(YJ).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let f=d[0];if(f==="'")return{isToken:!1,value:eX(d)};if(Xb[f])return{isToken:!0,value:d};if(f.match(ZJ))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");return{isToken:!1,value:d}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));let u={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return c.map(d=>{if(!d.isToken)return d.value;let f=d.value;(!t?.useAdditionalWeekYearTokens&&xV(f)||!t?.useAdditionalDayOfYearTokens&&RV(f))&&NV(f,e,String(n));let m=Xb[f[0]];return m(a,f,i.localize,u)}).join("")}function eX(n){let e=n.match(JJ);return e?e[1].replace(XJ,"'"):n}function Zb(n){return Math.trunc(n*dl)}function eD(n,e){let{start:t,end:r}=hV(e?.in,n),i={},o=dV(r,t);o&&(i.years=o);let s=hl(t,{years:i.years}),a=uV(r,s);a&&(i.months=a);let c=hl(s,{months:i.months}),u=oV(r,c);u&&(i.days=u);let d=hl(c,{days:i.days}),f=sV(r,d);f&&(i.hours=f);let m=hl(d,{hours:i.hours}),v=ml(r,m);v&&(i.minutes=v);let I=hl(m,{minutes:i.minutes}),x=Jg(r,I);return x&&(i.seconds=x),i}function ev(n,e){return+ue(n)>+ue(e)}function MV(n,e){return+ue(n)<+ue(e)}function tv(n){return Math.trunc(n*ul)}function _l(n){return n*YL}function PV(n,e,t){return co(n,-e,t)}var gt=class n extends Kn{collectionPath="/races";collectionRef=Ir(this.firestore,this.collectionPath);raceConfigService=D(ze);activeRace=X(void 0);willEndRaceDate=X(void 0);constructor(){super(),Oe({races:this.getAll(),raceConfig:oe(this.raceConfigService.raceConfig)}).pipe(Qe(),ee(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e),i=this.getWillEndRaceDate(r,t);return{activeRace:r,willEndRaceDate:i}}return{activeRace:void 0,willEndRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.willEndRaceDate.set(e.willEndRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}update(e){return this.updateData(e.id,e)}getAll(){return Er(this.collectionRef).pipe(Kt(this.destroyed),ee(e=>e.map(t=>t).filter(t=>!t.deleted)))}getActiveRace(e){return e.sort((r,i)=>i.start.toDate().getTime()-r.start.toDate().getTime()).at(0)}getWillEndRaceDate(e,t){if(e!==void 0)return e.end!==null?e.end.toDate():so(e.start.toDate(),t.durationHour)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function Yn(n,e){if(!n||!e)return"--:--:--";let t=eD({end:e,start:n});return nv(t)}function ho(n){if(!n)return"--:--:--";let e=eD({end:n,start:new Date});return nv(e)}function vt(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return nv(t)}function kV(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return nv(t)}function OV(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return tX(r,t)}function tX(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:---":[ih(n.minutes),ih(n.seconds),nX(e)].join(":")}function nv(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:--":[ih(n.hours),ih(n.minutes),ih(n.seconds)].join(":")}function ih(n){return n?n<10?`0${n}`:`${n}`:"00"}function nX(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var jt=class n extends Kn{collectionPath="/pits";collectionRef=Ir(this.firestore,this.collectionPath);raceService=D(gt);raceConfigService=D(ze);activePit=X(void 0);activePitRemainingMilliseconds=X(0);lastRefuelPit=X(void 0);lastInterphoneChangePit=X(void 0);pits=X([]);completedDriverChanges=X(0);lastPit=X(void 0);remainingDriverChanges=X(0);constructor(){super(),Oe({pits:this.getRacePits(),activeRaceConfig:oe(this.raceConfigService.raceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastInterphoneChangePit.set(this.getLastInterphoneChangePit(e)),this.lastPit.set(this.getLastPit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return Oe({pits:Er(this.collectionRef),activeRace:oe(this.raceService.activeRace)}).pipe(Kt(this.destroyed),ee(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return fl(r.entryTime.toDate(),t.pitConfig.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastInterphoneChangePit(e){return e.filter(r=>r.interphoneChange&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastPit(e){return e.length===0?void 0:e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}calculateCompletedDriverChanges(e){return e.reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var vi=class n{raceService=D(gt);raceConfigService=D(ze);pitService=D(jt);openingTime=X(void 0);closingTime=X(void 0);tyreChangeWindowOpen=X(!1);remainingTyreChange=X(0);constructor(){Oe({pits:oe(this.pitService.pits),activeRace:oe(this.raceService.activeRace),raceConfig:oe(this.raceConfigService.raceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(so(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(so(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.pitConfig.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var yi=class n{raceService=D(gt);pitService=D(jt);raceConfigService=D(ze);tyreService=D(vi);optimizedStint=X(void 0);constructor(){Oe({activeRace:oe(this.raceService.activeRace),willEndRaceDate:oe(this.raceService.willEndRaceDate),activeRaceConfig:oe(this.raceConfigService.raceConfig),remainingDriverChanges:oe(this.pitService.remainingDriverChanges),remainingTyreChange:oe(this.tyreService.remainingTyreChange),lastPit:oe(this.pitService.lastPit),ping:dt(1e3)}).pipe(Qe()).subscribe(({activeRace:e,willEndRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,remainingTyreChange:o,lastPit:s})=>{r?this.optimizedStint.set(this.calculateOptimizedStint(e,e?e.start.toDate():new Date,t||so(new Date,r.durationHour),r,i,o,s)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,o,s,a){let c=new Date;if(c>=r)return;let u=this.calculateRemainingPitTime(i.pitConfig,o,s),d=lo(r,c)-u,f;a&&(a.exitTime?f=a.exitTime.toDate():f=fl(a.entryTime.toDate(),i.pitConfig.minPitSeconds));let I=(lo(r,f||t)-u)/(o+1),x=0,A=0;return o>0&&e!==void 0&&(x=d/o,A=Math.floor(x/i.referenceLapTimeMillisecond)),{avgStintMillisecondsTime:I,laps:Math.floor(I/i.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:x,lapsIfDriverChangeNow:A}}calculateRemainingPitTime(e,t,r){let i=t-r,o=_l(e.minPitSeconds*i),s=_l(e.minPitWithTyreChangeSeconds*r);return o+s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bt=class n extends Kn{collectionPath="/stints";collectionRef=Ir(this.firestore,this.collectionPath);raceService=D(gt);raceConfigService=D(ze);stintOptimizerService=D(yi);activeRace=this.raceService.activeRace;stints=X([]);activeStint=X(void 0);activeStintTimeOnTrack=X(0);activeStintLaps=X(0);activeStintRemainingTimeOnTrack=X(0);activeStintRemainingLaps=X(0);activeStintGainedTimeOnTrack=X(0);activeStintGainedLaps=X(0);constructor(){super(),Oe({stints:this.getRaceStints(),activeRaceConfig:oe(this.raceConfigService.raceConfig),optimizedStint:oe(this.stintOptimizerService.optimizedStint),ping:dt(1e3)}).pipe(Qe()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return y(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return Oe({stints:Er(this.collectionRef),activeRace:oe(this.activeRace)}).pipe(Kt(this.destroyed),ee(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var es=class n{raceService=D(gt);stintService=D(Bt);pitService=D(jt);stintOptimizerService=D(yi);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;optimizedStintMilliseconds=Ee(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.avgStintMillisecondsTime:0});startRace(e){return y(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}endRace(){return y(this,null,function*(){let e=this.activeRace();if(e){let t=Rt.now();e.end=t,yield this.raceService.update(e),yield this.closeActiveStint(t),yield this.closeActivePit(t)}})}pitIn(e,t,r,i){return y(this,null,function*(){let o=this.activeRace(),s=this.activeStint();if(o&&s){let a=this.createPit(s.driverId,e,o.id,t,r,i),c=yield this.pitService.create(a);yield this.closeActiveStint(c.entryTime)}})}pitOut(){return y(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Rt.now();yield this.closeActivePit(r),yield this.startStint(e.id,t.exitDriverId,r)}})}startStint(e,t,r){return y(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return y(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return y(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:Rt.now(),end:null,deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,optimumMilliseconds:this.optimizedStintMilliseconds(),raceId:e,startDate:r}}createPit(e,t,r,i,o,s){return{id:"1",entryDriverId:e,entryTime:Rt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:o,interphoneChange:s,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var qV=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(Pe(Vi),Pe(pr))};static \u0275dir=ht({type:n})}return n})(),dh=(()=>{class n extends qV{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,features:[Hn]})}return n})(),Cl=new W(""),rX={provide:Cl,useExisting:hr(()=>rD),multi:!0},rD=(()=>{class n extends dh{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ne("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ai([rX]),Hn]})}return n})(),iX={provide:Cl,useExisting:hr(()=>ts),multi:!0};function oX(){let n=Bi()?Bi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var sX=new W(""),ts=(()=>{class n extends qV{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!oX())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(Pe(Vi),Pe(pr),Pe(sX,8))};static \u0275dir=ht({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ne("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[ai([iX]),Hn]})}return n})();function tD(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var uv=new W(""),zV=new W("");function aX(n){return e=>{if(tD(e.value)||tD(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function cX(n){return tD(n.value)?{required:!0}:null}function FV(n){return null}function GV(n){return n!=null}function KV(n){return Rs(n)?st(n):n}function YV(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function QV(n,e){return e.map(t=>t(n))}function lX(n){return!n.validate}function JV(n){return n.map(e=>lX(e)?e:t=>e.validate(t))}function uX(n){if(!n)return null;let e=n.filter(GV);return e.length==0?null:function(t){return YV(QV(t,e))}}function iD(n){return n!=null?uX(JV(n)):null}function dX(n){if(!n)return null;let e=n.filter(GV);return e.length==0?null:function(t){let r=QV(t,e).map(KV);return Fy(r).pipe(ee(YV))}}function oD(n){return n!=null?dX(JV(n)):null}function LV(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function hX(n){return n._rawValidators}function fX(n){return n._rawAsyncValidators}function nD(n){return n?Array.isArray(n)?n:[n]:[]}function iv(n,e){return Array.isArray(n)?n.includes(e):n===e}function VV(n,e){let t=nD(e);return nD(n).forEach(i=>{iv(t,i)||t.push(i)}),t}function UV(n,e){return nD(e).filter(t=>!iv(n,t))}var ov=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=iD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=oD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Il=class extends ov{name;get formDirective(){return null}get path(){return null}},uh=class extends ov{_parent=null;name=null;valueAccessor=null},sv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},pX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},IIe=ge(B({},pX),{"[class.ng-submitted]":"isSubmitted"}),_i=(()=>{class n extends sv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Pe(uh,2))};static \u0275dir=ht({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Ep("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Hn]})}return n})(),wi=(()=>{class n extends sv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(Pe(Il,10))};static \u0275dir=ht({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Ep("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Hn]})}return n})();var oh="VALID",rv="INVALID",wl="PENDING",sh="DISABLED",Tl=class{},av=class extends Tl{value;source;constructor(e,t){super(),this.value=e,this.source=t}},ch=class extends Tl{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},lh=class extends Tl{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},El=class extends Tl{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function XV(n){return(dv(n)?n.validators:n)||null}function mX(n){return Array.isArray(n)?iD(n):n||null}function ZV(n,e){return(dv(e)?e.asyncValidators:n)||null}function gX(n){return Array.isArray(n)?oD(n):n||null}function dv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function vX(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new te(1e3,"");if(!r[t])throw new te(1001,"")}function yX(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new te(1002,"")})}var cv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return gr(this.statusReactive)}set status(e){gr(()=>this.statusReactive.set(e))}_status=Ee(()=>this.statusReactive());statusReactive=X(void 0);get valid(){return this.status===oh}get invalid(){return this.status===rv}get pending(){return this.status==wl}get disabled(){return this.status===sh}get enabled(){return this.status!==sh}errors;get pristine(){return gr(this.pristineReactive)}set pristine(e){gr(()=>this.pristineReactive.set(e))}_pristine=Ee(()=>this.pristineReactive());pristineReactive=X(!0);get dirty(){return!this.pristine}get touched(){return gr(this.touchedReactive)}set touched(e){gr(()=>this.touchedReactive.set(e))}_touched=Ee(()=>this.touchedReactive());touchedReactive=X(!1);get untouched(){return!this.touched}_events=new ut;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(VV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(VV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UV(e,this._rawAsyncValidators))}hasValidator(e){return iv(this._rawValidators,e)}hasAsyncValidator(e){return iv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new lh(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new lh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ch(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ch(!0,r))}markAsPending(e={}){this.status=wl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new El(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=sh,this.errors=null,this._forEachChild(i=>{i.disable(ge(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new av(this.value,r)),this._events.next(new El(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=oh,this._forEachChild(r=>{r.enable(ge(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===oh||this.status===wl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new av(this.value,t)),this._events.next(new El(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?sh:oh}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=wl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=KV(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new El(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Qt,this.statusChanges=new Qt}_calculateStatus(){return this._allControlsDisabled()?sh:this.errors?rv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wl)?wl:this._anyControlsHaveStatus(rv)?rv:oh}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new ch(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new lh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){dv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=gX(this._rawAsyncValidators)}},lv=class extends cv{constructor(e,t,r){super(XV(t),ZV(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){yX(this,!0,e),Object.keys(e).forEach(r=>{vX(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var hv=new W("",{providedIn:"root",factory:()=>fv}),fv="always";function _X(n,e){return[...e.path,n]}function e2(n,e,t=fv){t2(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),EX(n,e),TX(n,e),IX(n,e),wX(n,e)}function jV(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wX(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function t2(n,e){let t=hX(n);e.validator!==null?n.setValidators(LV(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=fX(n);e.asyncValidator!==null?n.setAsyncValidators(LV(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();jV(e._rawValidators,i),jV(e._rawAsyncValidators,i)}function EX(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&n2(n,e)})}function IX(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&n2(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function n2(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function TX(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function CX(n,e){n==null,t2(n,e)}function bX(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function DX(n){return Object.getPrototypeOf(n.constructor)===dh}function SX(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function AX(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===ts?t=o:DX(o)?r=o:i=o}),i||r||t||null}var RX={provide:Il,useExisting:hr(()=>Yr)},ah=Promise.resolve(),Yr=(()=>{class n extends Il{callSetDisabledState;get submitted(){return gr(this.submittedReactive)}_submitted=Ee(()=>this.submittedReactive());submittedReactive=X(!1);_directives=new Set;form;ngSubmit=new Qt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new lv({},iD(t),oD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){ah.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),e2(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){ah.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){ah.then(()=>{let r=this._findContainer(t.path),i=new lv({});CX(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){ah.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){ah.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),SX(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(Pe(uv,10),Pe(zV,10),Pe(hv,8))};static \u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ne("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[ai([RX]),Hn]})}return n})();function BV(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function $V(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var xX=class extends cv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(XV(t),ZV(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),dv(t)&&(t.nonNullable||t.initialValueIsDefault)&&($V(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$V(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var NX={provide:uh,useExisting:hr(()=>Qr)},HV=Promise.resolve(),Qr=(()=>{class n extends uh{_changeDetectorRef;callSetDisabledState;control=new xX;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Qt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=AX(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bX(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){e2(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){HV.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Mu(r);HV.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?_X(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(Pe(Il,9),Pe(uv,10),Pe(zV,10),Pe(Cl,10),Pe(Lo,8),Pe(hv,8))};static \u0275dir=ht({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[ai([NX]),Hn,ko]})}return n})(),Ei=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),MX={provide:Cl,useExisting:hr(()=>pa),multi:!0},pa=(()=>{class n extends dh{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ne("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[ai([MX]),Hn]})}return n})();var PX=new W("");var kX={provide:Cl,useExisting:hr(()=>bl),multi:!0};function r2(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function OX(n){return n.split(":")[0]}var bl=(()=>{class n extends dh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=r2(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=OX(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ne("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ai([kX]),Hn]})}return n})(),pv=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(r2(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Pe(pr),Pe(Vi),Pe(bl,9))};static \u0275dir=ht({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),FX={provide:Cl,useExisting:hr(()=>i2),multi:!0};function WV(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function LX(n){return n.split(":")[0]}var i2=(()=>{class n extends dh{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=LX(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ne("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[ai([FX]),Hn]})}return n})(),mv=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(WV(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(WV(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(Pe(pr),Pe(Vi),Pe(i2,9))};static \u0275dir=ht({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function VX(n){return typeof n=="number"?n:parseFloat(n)}var o2=(()=>{class n{_validator=FV;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):FV,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=ht({type:n,features:[ko]})}return n})();var UX={provide:uv,useExisting:hr(()=>ma),multi:!0},ma=(()=>{class n extends o2{min;inputName="min";normalizeInput=t=>VX(t);createValidator=t=>aX(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Nu("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[ai([UX]),Hn]})}return n})(),jX={provide:uv,useExisting:hr(()=>ga),multi:!0};var ga=(()=>{class n extends o2{required;inputName="required";normalizeInput=Mu;createValidator=t=>cX;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Pr(n)))(i||n)}})();static \u0275dir=ht({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Nu("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[ai([jX]),Hn]})}return n})();var s2=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ui({type:n});static \u0275inj=ki({})}return n})();var Ii=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:hv,useValue:t.callSetDisabledState??fv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ui({type:n});static \u0275inj=ki({imports:[s2]})}return n})(),gv=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:PX,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:hv,useValue:t.callSetDisabledState??fv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Ui({type:n});static \u0275inj=ki({imports:[s2]})}return n})();var vv=class n extends Kn{collectionPath="/laps";collectionRef=Ir(this.firestore,this.collectionPath);raceService=D(gt);laps=X([]);constructor(){super(),Oe({laps:this.getRaceLaps(),activeRace:oe(this.raceService.activeRace)}).pipe(Qe()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return Oe({laps:Er(this.collectionRef),activeRace:oe(this.raceService.activeRace)}).pipe(Kt(this.destroyed),ee(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Dr=class n extends Kn{collectionPath="/drivers";collectionRef=Ir(this.firestore,this.collectionPath);lapService=D(vv);stintService=D(Bt);raceConfigService=D(ze);drivers=X([]);driversReferenceLapTimeMap=X(new Map);driversTimeOnTrackMap=X(new Map);driversTimeOnTrackWarningMap=X(new Map);driversStintCountMap=X(new Map);driverWithMoreTimeFromLastStint=X(void 0);driversTimeFromLastStintMap=X(new Map);driversTimeOnTrackWarningCount=Ee(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),Oe({drivers:this.getAll(),laps:oe(this.lapService.laps),stints:oe(this.stintService.stints),activeRaceConfig:oe(this.raceConfigService.raceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithMoreTimeFromLastStint.set(this.getDriverWithMoreTimeFromLastStint(r,e)),this.driversTimeFromLastStintMap.set(this.createDriversTimeFromLastStintMap(r,e))})}getAll(){return Er(this.collectionRef).pipe(Kt(this.destroyed),ee(e=>e.map(t=>t).filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(o=>{r.set(o.id,0)});let i=e.reduce((o,s)=>(o[s.driverId]||(o[s.driverId]=[]),o[s.driverId].push(s.millisecondsTime),o),{});for(let o in i){let s=i[o],a=s.reduce((c,u)=>c+u,0)/s.length;r.set(o,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let o;i.endDate?o=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():o=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+o):r.set(i.driverId,o)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=Zb(t.minDriverOnTrackHour),o=Zb(t.maxDriverOnTrackHour),s=tv(t.warningDriverOnTrackThresholdMinute);e.forEach((a,c)=>{let u=a<i,d=o-a<=s;r.set(c,u||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithMoreTimeFromLastStint(e,t){if(t.length===0)return;let r,i=this.createDriversTimeFromLastStintMap(e,t),o=e.find(u=>u.endDate===null)?.driverId,s=new Map(t.map(u=>[u.id,u])),a=-1,c=!1;return i.forEach((u,d)=>{d!==o&&(u===0?(!c||c&&u>a)&&(a=u,r=s.get(d),c=!0):!c&&u>a&&(a=u,r=s.get(d)))}),r}createDriversTimeFromLastStintMap(e,t){let r=new Map;return t.forEach(i=>{let o=e.filter(s=>s.driverId===i.id).sort((s,a)=>a.startDate.toDate().getTime()-s.startDate.toDate().getTime()).at(0);o&&o.endDate?r.set(i.id,new Date().getTime()-o.endDate.toDate().getTime()):r.set(i.id,0)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function BX(n,e){if(n&1&&(_(0,"option",6),b(1),w()),n&2){let t=e.$implicit;K("value",t.id),M(),$(" ",t.raceName," ")}}function $X(n,e){if(n&1){let t=vn();_(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),b(4,"Start driver"),w(),_(5,"select",4),qn("ngModelChange",function(i){je(t);let o=U();return er(o.selectedDriver,i)||(o.selectedDriver=i),Be(i)}),ne("change",function(){je(t);let i=U();return Be(i.updateDriverId())}),Y(6,BX,2,2,"option",5),w()()()()}if(n&2){let t=U();M(5),Wn("ngModel",t.selectedDriver),M(),K("ngForOf",t.drivers())}}function HX(n,e){if(n&1&&(_(0,"div",1),b(1),w()),n&2){let t=U();M(),$(" ",t.endRaceCountdown," ")}}var yv=class n{raceService=D(gt);raceConfigService=D(ze);raceManagerService=D(es);driverService=D(Dr);drivers=this.driverService.drivers;willEndRaceDate=this.raceService.willEndRaceDate;endRaceCountdown="00:00:00";selectedDriver="1";constructor(){Oe({willEndRaceDate:oe(this.willEndRaceDate),ping:dt(1e3)}).pipe(Qe()).subscribe(e=>{let t=e.willEndRaceDate;t&&(ev(new Date,t)?this.endRaceCountdown="00:00:00":this.endRaceCountdown=ho(t))}),Lr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-race"]],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2","dark:text-white"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){t&1&&Y(0,$X,7,2,"div",0)(1,HX,2,1,"div",1),t&2&&Z(r.willEndRaceDate()?1:0)},dependencies:[Ii,Ei,pv,mv,bl,_i,wi,Qr,Yr,wn],encapsulation:2})};var WX=n=>({"mb-2":n}),qX=n=>({"animate-bounce":n});function zX(n,e){if(n&1&&(_(0,"div",4),b(1),w()),n&2){let t=U();M(),$(" Remaining: ",t.remainingTyreChange()," ")}}function GX(n,e){n&1&&(_(0,"div",5),b(1," Completed! "),w())}function KX(n,e){if(n&1&&(_(0,"div",6),b(1," Window open "),w()),n&2){let t=U();K("ngClass",Ge(1,qX,t.remainingTyreChange()>0))}}function YX(n,e){n&1&&(_(0,"div",7),b(1," Window closed "),w())}function QX(n,e){if(n&1&&(b(0),Or(1,"date")),n&2){let t=U(2);$(" ",Fr(1,1,t.openingTime(),"HH:mm:ss")," ")}}function JX(n,e){n&1&&b(0," --:--:-- ")}function XX(n,e){if(n&1&&(b(0),Or(1,"date")),n&2){let t=U(2);$(" ",Fr(1,1,t.closingTime(),"HH:mm:ss")," ")}}function ZX(n,e){n&1&&b(0," --:--:-- ")}function eZ(n,e){if(n&1&&(_(0,"div",8)(1,"div")(2,"div",9),b(3,"Opening time"),w(),_(4,"div",10),Y(5,QX,2,4)(6,JX,1,0),w()(),_(7,"div")(8,"div",11),b(9,"Opening in"),w(),_(10,"div",12),b(11),w()()(),le(12,"hr",13),_(13,"div",14)(14,"div")(15,"div",9),b(16,"Closing time"),w(),_(17,"div",10),Y(18,XX,2,4)(19,ZX,1,0),w()(),_(20,"div")(21,"div",11),b(22,"Closing in"),w(),_(23,"div",12),b(24),w()()()),n&2){let t=U();M(5),Z(t.openingTime()?5:6),M(6),$(" ",t.countdownOpeningTime()," "),M(7),Z(t.closingTime()?18:19),M(6),$(" ",t.countdownClosingTime()," ")}}var _v=class n{tyreService=D(vi);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Ee(()=>ho(this.tyreService.openingTime()));countdownClosingTime=Ee(()=>ho(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-tyre-change-window"]],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F6DE} \u{1F504} Tyre change"),w(),_(4,"div",3),Y(5,zX,2,1,"div",4)(6,GX,2,0,"div",5)(7,KX,2,3,"div",6)(8,YX,2,0,"div",7),w()(),Y(9,eZ,25,4),w()),t&2&&(M(),K("ngClass",Ge(4,WX,r.isOpen)),M(4),Z(r.remainingTyreChange()>0?5:6),M(2),Z(r.tyreChangeWindowOpen()?7:8),M(2),Z(r.isOpen?9:-1))},dependencies:[Uo,$e],encapsulation:2})};var Dl=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},features:[ko],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),b(4),w()()(),le(5,"div",4),w()),t&2&&(M(),K("ngClass",r.batteryBorderColor),M(),ac("width",r.charge,"%"),K("ngClass",r.batteryColor),M(2),yn(r.charge),M(),K("ngClass",r.batteryBorderColor))},dependencies:[$e],encapsulation:2,changeDetection:0})};var wv=class n{raceService=D(gt);pitService=D(jt);raceConfigService=D(ze);lastRefuelTime=X(void 0);emptyFuelTime=X(void 0);remainingFuelPercentage=X(100);remainingFuelLap=X(0);constructor(){Oe({lastRefuelPit:oe(this.pitService.lastRefuelPit),race:oe(this.raceService.activeRace),raceConfig:oe(this.raceConfigService.raceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({lastRefuelPit:e,race:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e?.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return co(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=ml(e,new Date)/t.fuelDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=lo(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=tv(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var tZ=n=>({"mb-2":n}),nZ=n=>({"animate-bounce":n});function rZ(n,e){if(n&1&&(b(0),Or(1,"date")),n&2){let t=U(2);$(" ",Fr(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function iZ(n,e){n&1&&b(0," --:--:-- ")}function oZ(n,e){if(n&1&&(b(0),Or(1,"date")),n&2){let t=U(2);$(" ",Fr(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function sZ(n,e){n&1&&b(0," --:--:-- ")}function aZ(n,e){if(n&1){let t=vn();_(0,"div",7)(1,"div")(2,"div",8),b(3,"Last refuel time"),w(),_(4,"div",9),Y(5,rZ,2,4)(6,iZ,1,0),w()(),_(7,"div")(8,"div",10),b(9,"Since last refuel"),w(),_(10,"div",11),b(11),w()()(),le(12,"hr",12),_(13,"div",7)(14,"div")(15,"div",8),b(16,"Empty time"),w(),_(17,"div",9),Y(18,oZ,2,4)(19,sZ,1,0),w()(),_(20,"div")(21,"div",10),b(22,"Empty in"),w(),_(23,"div",11),b(24),w()()(),le(25,"hr",12),_(26,"div",13)(27,"div")(28,"div",8),b(29,"Remaining laps"),w(),_(30,"div",9),b(31),w()(),_(32,"div")(33,"div",10),b(34,"Fuel duration (min)"),w(),_(35,"div",14)(36,"button",15),ne("click",function(){je(t);let i=U();return Be(i.increaseFuelDuration())}),b(37," + "),w(),_(38,"form",16),ne("ngSubmit",function(){je(t);let i=U();return Be(i.onSubmit())}),_(39,"input",17),qn("ngModelChange",function(i){je(t);let o=U();return er(o.fuelDurationMinute,i)||(o.fuelDurationMinute=i),Be(i)}),w()(),_(40,"button",18),ne("click",function(){je(t);let i=U();return Be(i.decreaseFuelDuration())}),b(41," - "),w()()()()}if(n&2){let t=U();M(5),Z(t.lastRefuelTime()?5:6),M(6),$(" ",t.sinceLastRefuel()," "),M(7),Z(t.emptyFuelTime()?18:19),M(6),$(" ",t.emptyFuelCountdown()," "),M(7),$(" ",t.remainingFuelLap()," "),M(8),Wn("ngModel",t.fuelDurationMinute)}}var Ev=class n{raceConfigService=D(ze);fuelService=D(wv);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Ee(()=>ho(this.emptyFuelTime()));sinceLastRefuel=Ee(()=>Yn(this.lastRefuelTime(),new Date));warning=Ee(()=>this.remainingFuelPercentage()<=20);remainingColor=Ee(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!1;fuelDurationMinute=0;constructor(){Lr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-fuel"]],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u26FD\uFE0F Fuel"),w(),_(4,"div",3)(5,"div",4),b(6),w(),_(7,"div",5),b(8),w(),le(9,"app-battery",6),w()(),Y(10,aZ,42,6),w()),t&2&&(M(),K("ngClass",Ge(8,tZ,r.isOpen)),M(3),K("ngClass",Ge(10,nZ,r.warning())),M(),K("ngClass",r.remainingColor()),M(),$(" Empty: ",r.emptyFuelCountdown()," "),M(),K("ngClass",r.remainingColor()),M(),$(" Laps: ",r.remainingFuelLap()," "),M(),K("charge",r.remainingFuelPercentage()),M(),Z(r.isOpen?10:-1))},dependencies:[$e,Uo,Dl,Ii,Ei,ts,pa,_i,wi,ga,ma,Qr,Yr],encapsulation:2})};var cZ=n=>({"mb-2":n});function lZ(n,e){if(n&1&&(_(0,"div",6)(1,"div")(2,"div",7),b(3,"Optimized AVG time"),w(),_(4,"div",8),b(5),w()(),_(6,"div")(7,"div",9),b(8,"Laps"),w(),_(9,"div",10),b(10),w()()(),le(11,"hr",11),_(12,"div",12)(13,"div")(14,"div",7),b(15," Optimized AVG time "),_(16,"strong"),b(17,"if driver change now"),w()(),_(18,"div",8),b(19),w()(),_(20,"div")(21,"div",9),b(22,"Laps"),w(),_(23,"div",10),b(24),w()()()),n&2){let t=U();M(5),$(" ",t.AVGStintTime()," "),M(5),$(" ",t.laps()," "),M(9),$(" ",t.AVGStintTimeIfDriverChangeNow()," "),M(5),$(" ",t.lapsIfDriverChangeNow()," ")}}var Iv=class n{stintOptimizerService=D(yi);AVGStintTime=Ee(()=>{let e=this.stintOptimizerService.optimizedStint();return e?vt(e.avgStintMillisecondsTime):"--:--:--"});laps=Ee(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Ee(()=>{let e=this.stintOptimizerService.optimizedStint();return e?vt(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Ee(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-stint-optimizer"]],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F9E0} Stint optimizer"),w(),_(4,"div",3)(5,"div",4),b(6),w(),_(7,"div",5),b(8),w()()(),Y(9,lZ,25,4),w()),t&2&&(M(),K("ngClass",Ge(4,cZ,r.isOpen)),M(5),$(" Optimum: ",r.AVGStintTime()," "),M(2),$(" Laps: ",r.laps()," "),M(),Z(r.isOpen?9:-1))},dependencies:[$e],encapsulation:2})};var uZ=n=>({"mb-2":n}),dZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),hZ=n=>({"bg-yellow-500 text-white":n});function fZ(n,e){if(n&1&&(_(0,"div",4),b(1),w()),n&2){let t=U();M(),$(" Warning: ",t.driversTimeOnTrackWarningCount()," ")}}function pZ(n,e){n&1&&(_(0,"div",5),b(1," Completed! "),w())}function mZ(n,e){if(n&1&&(_(0,"tr",17)(1,"td",18),b(2),w(),_(3,"td",19),b(4),w(),_(5,"td",20),b(6),w(),_(7,"td",21)(8,"div",22),b(9),w()(),_(10,"td",23),b(11),w()()),n&2){let t=e.$implicit,r=U(2);K("ngClass",kr(7,dZ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),M(2),yn(t.id),M(2),yn(t.raceName),M(2),$(" ",r.getDriverStintCount(t.id)," "),M(2),K("ngClass",Ge(10,hZ,r.getDriverTimeOnTrackWarning(t.id))),M(),$(" ",r.getDriverTimeOnTrack(t.id)," "),M(2),$("",r.getDriverTimeFromLastStint(t.id)," ")}}function gZ(n,e){if(n&1&&(_(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),le(4,"th",9),_(5,"th",10),b(6," Name "),w(),_(7,"th",11),b(8," Stint "),w(),_(9,"th",12),b(10," On track "),w(),_(11,"th",13),b(12," From last stint "),w()()()(),_(13,"div",14)(14,"table",15)(15,"tbody"),Y(16,mZ,12,12,"tr",16),w()()()()),n&2){let t=U();M(16),K("ngForOf",t.drivers())}}var Tv=class n{driverService=D(Dr);stintService=D(Bt);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=Ee(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!1;getDriverTimeOnTrack(e){return vt(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)??0}getDriverTimeFromLastStint(e){return vt(this.driverService.driversTimeFromLastStintMap().get(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-driver"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F417} Driver"),w(),_(4,"div",3),Y(5,fZ,2,1,"div",4)(6,pZ,2,0,"div",5),w()(),Y(7,gZ,17,1,"div",6),w()),t&2&&(M(),K("ngClass",Ge(3,uZ,r.isOpen)),M(4),Z(r.driversTimeOnTrackWarningCount()>0?5:6),M(2),Z(r.isOpen?7:-1))},dependencies:[$e,wn],encapsulation:2})};var Cv=class n{raceService=D(gt);stintService=D(Bt);raceConfigService=D(ze);open=X(!1);openInMilliseconds=X(0);constructor(){Oe({willEndRaceDate:oe(this.raceService.willEndRaceDate),activeStint:oe(this.stintService.activeStint),raceConfig:oe(this.raceConfigService.raceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({willEndRaceDate:e,activeStint:t,raceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return co(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,o=PV(e,r.pitConfig.pitLaneCloseBeforeEndRaceMinute),s=MV(i,o),a=co(t.startDate.toDate(),r.minStintMinute),c=ev(i,a);return s&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var bv=class n{audio=new Audio;constructor(){this.audio.addEventListener("error",e=>console.error("Audio error:",e))}play(){this.audio.play()}playFile(e){this.audio=new Audio(e),this.audio.play()}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0}seek(e){this.audio.currentTime=e}setVolume(e){this.audio.volume=e}setLoop(e){this.audio.loop=e}on(e,t){this.audio.addEventListener(e,t)}off(e,t){this.audio.removeEventListener(e,t)}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var vZ=n=>({"mb-4":n}),yZ=n=>({"animate-bounce":n});function _Z(n,e){if(n&1&&(_(0,"div",3),b(1),w()),n&2){let t=U();M(),$(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function wZ(n,e){n&1&&(_(0,"div",5),b(1," Open "),w())}function EZ(n,e){n&1&&(_(0,"div",6),b(1," Closed "),w())}function IZ(n,e){if(n&1&&(_(0,"option",21),b(1),w()),n&2){let t=e.$implicit;K("value",t.id),M(),$(" ",t.raceName," ")}}function TZ(n,e){if(n&1){let t=vn();_(0,"div",11),b(1,"PIT SETTINGS"),w(),_(2,"form")(3,"div",12)(4,"label",13),b(5,"\u{1F417} Driver"),w(),_(6,"select",14),qn("ngModelChange",function(i){je(t);let o=U(2);return er(o.selectedDriver,i)||(o.selectedDriver=i),Be(i)}),ne("change",function(){je(t);let i=U(2);return Be(i.updateDriverId())}),Y(7,IZ,2,2,"option",15),w()(),_(8,"div",12)(9,"label",16),b(10,"\u26FD\uFE0F Refueling"),w(),_(11,"input",17),ne("change",function(){je(t);let i=U(2);return Be(i.updateRefueling())}),qn("ngModelChange",function(i){je(t);let o=U(2);return er(o.refueling,i)||(o.refueling=i),Be(i)}),w()(),_(12,"div",12)(13,"label",18),b(14,"\u{1F6DE} Tyre change"),w(),_(15,"input",19),qn("ngModelChange",function(i){je(t);let o=U(2);return er(o.tyreChange,i)||(o.tyreChange=i),Be(i)}),ne("change",function(){je(t);let i=U(2);return Be(i.updateTyreChange())}),w()(),_(16,"div",12)(17,"label",18),b(18,"\u{1F50A} Interphone change"),w(),_(19,"input",20),qn("ngModelChange",function(i){je(t);let o=U(2);return er(o.interphoneChange,i)||(o.interphoneChange=i),Be(i)}),ne("change",function(){je(t);let i=U(2);return Be(i.updateInterphoneChange())}),w()()()}if(n&2){let t=U(2);M(6),K("disabled",t.activePit()!==void 0),Wn("ngModel",t.selectedDriver),M(),K("ngForOf",t.drivers()),M(4),K("disabled",t.activePit()!==void 0),Wn("ngModel",t.refueling),M(4),K("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),Wn("ngModel",t.tyreChange),M(4),K("disabled",t.activePit()!==void 0),Wn("ngModel",t.interphoneChange)}}function CZ(n,e){if(n&1&&(_(0,"div",22),b(1),w()),n&2){let t=U(3);K("ngClass",Ge(2,yZ,t.activePitRemainingMilliseconds()<1e4)),M(),$(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function bZ(n,e){n&1&&(_(0,"div",23),b(1," Pit out ready! "),w())}function DZ(n,e){if(n&1&&Y(0,CZ,2,4,"div",22)(1,bZ,2,0,"div",23),n&2){let t=U(2);Z(t.activePitRemainingMilliseconds()>0?0:1)}}function SZ(n,e){if(n&1){let t=vn();_(0,"div",7),Y(1,TZ,20,9)(2,DZ,2,1),w(),_(3,"div",8)(4,"button",9),ne("click",function(){je(t);let i=U();return Be(i.pitIn())}),b(5," Pit in "),w(),_(6,"button",10),ne("click",function(){je(t);let i=U();return Be(i.pitOut())}),b(7," Pit out "),w()()}if(n&2){let t=U();M(),Z(t.activePit()?2:1),M(3),K("disabled",!t.pitLaneOpen()),M(2),K("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var Dv=class n{pitLaneService=D(Cv);pitService=D(jt);driverService=D(Dr);raceManagerService=D(es);tyreService=D(vi);raceConfigService=D(ze);audioService=D(bv);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=Ee(()=>vt(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=Ee(()=>kV(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;interphoneChange=!1;selectedDriver="1";constructor(){Lr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.selectedDriver=e.pitConfig.nextPitDriverId,this.refueling=e.pitConfig.nextPitRefueling,this.tyreChange=e.pitConfig.nextPitTyreChange,this.interphoneChange=e.pitConfig.nextPitInterphoneChange)})}pitIn(){return y(this,null,function*(){this.audioService.playFile("assets/box_box_box_box.mp3"),yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange,this.interphoneChange)})}pitOut(){return y(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithMoreTimeFromLastStint();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}updateInterphoneChange(){this.raceConfigService.updateNextPitInterphoneChange(this.interphoneChange)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-pit-lane"]],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],["type","checkbox","id","interphoneChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F17F}\uFE0F Pit Lane"),w(),Y(4,_Z,2,1,"div",3),_(5,"div",4),Y(6,wZ,2,0,"div",5)(7,EZ,2,0,"div",6),w()(),Y(8,SZ,8,3),w()),t&2&&(M(),K("ngClass",Ge(4,vZ,r.isOpen)),M(3),Z(r.pitLaneOpenInMilliseconds()>0?4:-1),M(2),Z(r.pitLaneOpen()?6:7),M(2),Z(r.isOpen?8:-1))},dependencies:[$e,Ii,Ei,pv,mv,rD,bl,_i,wi,Qr,Yr,wn],encapsulation:2})};var AZ=n=>({"mb-2":n});function RZ(n,e){if(n&1&&(_(0,"div",4),b(1),w()),n&2){let t=U();M(),$(" Remaining: ",t.remainingDriverChanges()," ")}}function xZ(n,e){n&1&&(_(0,"div",5),b(1," Completed! "),w())}function NZ(n,e){if(n&1&&(_(0,"div",6)(1,"div")(2,"div",7),b(3,"Competed"),w(),_(4,"div",8),b(5),w()(),_(6,"div")(7,"div",9),b(8,"Remaining"),w(),_(9,"div",10),b(10),w()()()),n&2){let t=U();M(5),$(" ",t.completedDriverChanges()," "),M(5),$(" ",t.remainingDriverChanges()," ")}}var Sv=class n{pitService=D(jt);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-driver-change"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F417} \u{1F504} Driver change"),w(),_(4,"div",3),Y(5,RZ,2,1,"div",4)(6,xZ,2,0,"div",5),w()(),Y(7,NZ,11,2,"div",6),w()),t&2&&(M(),K("ngClass",Ge(3,AZ,r.isOpen)),M(4),Z(r.remainingDriverChanges()>0?5:6),M(2),Z(r.isOpen?7:-1))},dependencies:[$e],encapsulation:2})};var MZ=n=>({"mb-2":n});function PZ(n,e){if(n&1&&(_(0,"div",4),b(1),w(),_(2,"div",5),b(3),w()),n&2){let t=U(2);M(),$(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),M(2),$(" Laps: ",t.activeStintRemainingLaps()," ")}}function kZ(n,e){if(n&1&&(_(0,"div",6),b(1),w(),_(2,"div",7),b(3),w()),n&2){let t=U(2);M(),$(" Gaining: ",t.activeStintGainedTimeOnTrackString()," "),M(2),$(" Laps: ",t.activeStintGainedLaps()," ")}}function OZ(n,e){if(n&1&&Y(0,PZ,4,2)(1,kZ,4,2),n&2){let t=U();Z(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function FZ(n,e){if(n&1&&b(0),n&2){let t=U(2);$(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function LZ(n,e){n&1&&b(0," --:--:-- ")}function VZ(n,e){if(n&1&&b(0),n&2){let t=U(2);$(" ",t.activeStintRemainingLaps()," ")}}function UZ(n,e){n&1&&b(0," 0 ")}function jZ(n,e){if(n&1&&(_(0,"div",8)(1,"div")(2,"div",9),b(3,"Time on track"),w(),_(4,"div",10),b(5),w()(),_(6,"div")(7,"div",11),b(8,"Laps"),w(),_(9,"div",12),b(10),w()()(),le(11,"hr",13),_(12,"div",8)(13,"div")(14,"div",9),b(15,"Remaining time on track"),w(),_(16,"div",10),Y(17,FZ,1,1)(18,LZ,1,0),w()(),_(19,"div")(20,"div",11),b(21,"Remaining laps"),w(),_(22,"div",12),Y(23,VZ,1,1)(24,UZ,1,0),w()()(),le(25,"hr",13),_(26,"div",14)(27,"div")(28,"div",9),b(29,"Gained time on track"),w(),_(30,"div",10),b(31),w()(),_(32,"div")(33,"div",11),b(34,"Gained laps"),w(),_(35,"div",12),b(36),w()()()),n&2){let t=U();M(5),$(" ",t.activeStintTimeOnTrackString()," "),M(5),$(" ",t.activeStintLaps()," "),M(7),Z(t.activeStint()?17:18),M(6),Z(t.activeStint()?23:24),M(8),$(" ",t.activeStintGainedTimeOnTrackString()," "),M(5),$(" ",t.activeStintGainedLaps()," ")}}var Av=class n{stintService=D(Bt);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=Ee(()=>vt(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=Ee(()=>vt(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=Ee(()=>vt(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-active-stint"]],decls:7,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),w(),_(4,"div",3),Y(5,OZ,2,1),w()(),Y(6,jZ,37,6),w()),t&2&&(M(),K("ngClass",Ge(3,MZ,r.isOpen)),M(4),Z(r.activeStint()?5:-1),M(),Z(r.isOpen?6:-1))},dependencies:[$e],encapsulation:2})};var BZ=n=>({"mb-2":n}),$Z=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function HZ(n,e){if(n&1&&(_(0,"tr",19)(1,"td",20),b(2),w(),_(3,"td",21),b(4),w(),_(5,"td",18),b(6),Or(7,"date"),w(),_(8,"td",18),b(9),w(),_(10,"td",18),b(11),w()()),n&2){let t=e.$implicit,r=U(2);K("ngClass",kr(9,$Z,t.id===r.activeStintId(),t.id!==r.activeStintId())),M(2),yn(t.id),M(2),$("",r.getDriverRacingName(t.driverId)," "),M(2),$("",Fr(7,6,t.startDate.toDate(),"HH:mm:ss")," "),M(3),$(" ",r.getEndDate(t)," "),M(2),$(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function WZ(n,e){if(n&1&&(_(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),le(4,"th",8),_(5,"th",9),b(6," Driver "),w(),_(7,"th",10),b(8,"Start "),w(),_(9,"th",10),b(10,"End "),w(),_(11,"th",10),b(12,"On track "),w()()()(),_(13,"div",11)(14,"table",12)(15,"tbody"),Y(16,HZ,12,12,"tr",13),w()()(),_(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),b(22,"Totals "),w(),_(23,"td",18),b(24),w()()()()()()),n&2){let t=U();M(16),K("ngForOf",t.stints()),M(8),$("",t.calculateTotalTimeOnTrack()," ")}}var Rv=class n{stintService=D(Bt);driverService=D(Dr);stints=this.stintService.stints;activeStintId=Ee(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!1;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?Yn(e,t):Yn(e,new Date)}calculateTotalTimeOnTrack(){let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),vt(t)}getEndDate(e){if(e.endDate)return Kr(e.endDate.toDate(),"HH:mm:ss");let t=ar(e.startDate.toDate(),e.optimumMilliseconds);return"("+Kr(t,"HH:mm:ss")+")"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-stint"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-xs","xl:text-base","text-black"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u23F3 Stint"),w(),_(4,"div",3)(5,"div",4),b(6),w()()(),Y(7,WZ,25,2,"div",5),w()),t&2&&(M(),K("ngClass",Ge(3,BZ,r.isOpen)),M(5),$(" Total: ",r.stints().length," "),M(),Z(r.isOpen?7:-1))},dependencies:[$e,wn,Uo],encapsulation:2})};var qZ=n=>({"mb-2":n});function zZ(n,e){if(n&1){let t=vn();_(0,"div",5)(1,"div")(2,"div",6),b(3,"Reference time (mills)"),w(),_(4,"div",7)(5,"button",8),ne("click",function(){je(t);let i=U();return Be(i.increaseReferenceLapTime())}),b(6," + "),w(),_(7,"form",9),ne("ngSubmit",function(){je(t);let i=U();return Be(i.onSubmit())}),_(8,"input",10),qn("ngModelChange",function(i){je(t);let o=U();return er(o.referenceLapTime,i)||(o.referenceLapTime=i),Be(i)}),w()(),_(9,"button",11),ne("click",function(){je(t);let i=U();return Be(i.decreaseReferenceLapTime())}),b(10," - "),w()()()()}if(n&2){let t=U();M(8),Wn("ngModel",t.referenceLapTime)}}var xv=class n{raceConfigService=D(ze);isOpen=!1;referenceLapTime=0;referenceLapTimeString="--:--:---";constructor(){Lr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.referenceLapTime=e.referenceLapTimeMillisecond,this.referenceLapTimeString=OV(e.referenceLapTimeMillisecond))})}onSubmit(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime)}increaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime+1)}decreaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime-1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-lap"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-center"],[1,"text-gray-600","text-center"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","referenceLapTime","name","referenceLapTime","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-36","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u23F1\uFE0F Lap"),w(),_(4,"div",3)(5,"div",4),b(6),w()()(),Y(7,zZ,11,1,"div",5),w()),t&2&&(M(),K("ngClass",Ge(3,qZ,r.isOpen)),M(5),$(" Reference: ",r.referenceLapTimeString," "),M(),Z(r.isOpen?7:-1))},dependencies:[$e,Ii,Ei,ts,pa,_i,wi,ga,ma,Qr,Yr,gv],encapsulation:2})};var GZ=n=>({"mb-2":n}),KZ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function YZ(n,e){n&1&&b(0," \u2705 ")}function QZ(n,e){n&1&&b(0," \u2705 ")}function JZ(n,e){n&1&&b(0," \u2705 ")}function XZ(n,e){n&1&&b(0," \u2705 ")}function ZZ(n,e){if(n&1&&(_(0,"tr",20)(1,"td",17),b(2),w(),_(3,"td",21),Y(4,YZ,1,0),w(),_(5,"td",22),Y(6,QZ,1,0),w(),_(7,"td",22),Y(8,JZ,1,0),w(),_(9,"td",22),Y(10,XZ,1,0),w(),_(11,"td",23),b(12),w()()),n&2){let t=e.$implicit,r=U(2);K("ngClass",kr(7,KZ,t.id===r.activePitId(),t.id!==r.activePitId())),M(2),yn(t.id),M(2),Z(t.entryDriverId!==t.exitDriverId?4:-1),M(2),Z(t.refuel?6:-1),M(2),Z(t.tyreChange?8:-1),M(2),Z(t.interphoneChange?10:-1),M(2),$(" ",r.calculatePitTime(t.entryTime.toDate(),t.exitTime==null?null:t.exitTime.toDate())," ")}}function eee(n,e){if(n&1&&(_(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),le(4,"th",8),_(5,"th",9),b(6," \u{1F417} \u{1F504} "),w(),_(7,"th",9),b(8," \u26FD\uFE0F "),w(),_(9,"th",9),b(10," \u{1F6DE} \u{1F504} "),w(),_(11,"th",9),b(12," \u{1F50A} \u{1F504} "),w(),_(13,"th",10),b(14,"Time "),w()()()(),_(15,"div",11)(16,"table",12)(17,"tbody"),Y(18,ZZ,13,10,"tr",13),w()()(),_(19,"div",14)(20,"table",12)(21,"tfoot",15)(22,"tr",16)(23,"td",17),b(24,"Totals "),w(),_(25,"td",18),b(26),w(),_(27,"td",18),b(28),w(),_(29,"td",18),b(30),w(),_(31,"td",18),b(32),w(),_(33,"td",19),b(34),w()()()()()()),n&2){let t=U();M(18),K("ngForOf",t.pits()),M(8),yn(t.completedDriverChanges()),M(2),yn(t.calculateTotalRefueling()),M(2),yn(t.calculateTotalTyreChanges()),M(2),yn(t.calculateTotalInterphoneChanges()),M(2),$("",t.calculateTotalPitTime()," ")}}var Nv=class n{pitService=D(jt);pits=this.pitService.pits;activePitId=Ee(()=>{let e=this.pitService.activePit();if(e)return e.id});completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!0;calculatePitTime(e,t){return t?Yn(e,t):Yn(e,new Date)}calculateTotalPitTime(){let e=this.pitService.pits(),t=0;return e.forEach(r=>{r.exitTime?t+=r.exitTime.toDate().getTime()-r.entryTime.toDate().getTime():t+=new Date().getTime()-r.entryTime.toDate().getTime()}),vt(t)}calculateTotalRefueling(){return this.pitService.pits().filter(e=>e.refuel).length}calculateTotalTyreChanges(){return this.pitService.pits().filter(e=>e.tyreChange).length}calculateTotalInterphoneChanges(){return this.pitService.pits().filter(e=>e.interphoneChange).length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-pit"]],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],[1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),w(),_(4,"div",3)(5,"div",4),b(6),w()()(),Y(7,eee,35,6,"div",5),w()),t&2&&(M(),K("ngClass",Ge(3,GZ,r.isOpen)),M(5),$(" Total: ",r.pits().length," "),M(),Z(r.isOpen?7:-1))},dependencies:[$e,wn],encapsulation:2})};var Mv=class n{stintService=D(Bt);deltaStints=X([]);totalDeltaMilliseconds=X(0);deltaMilliseconds=X(0);constructor(){Oe({stints:oe(this.stintService.stints),ping:dt(1e3)}).pipe(Qe()).subscribe(({stints:e})=>{let t=this.createDeltaStints(e);this.deltaStints.set(t),this.totalDeltaMilliseconds.set(t.reduce((r,i)=>r+i.delta,0)),this.deltaMilliseconds.set(this.createDeltaStints(this.filterCompletedStints(e)).reduce((r,i)=>r+i.delta,0))})}filterCompletedStints(e){return e.filter(t=>t.endDate!==null)}createDeltaStints(e){let t=[];return e.forEach(r=>{t.push(this.createDeltaStint(r))}),t}createDeltaStint(e){let r=(e.endDate?e.endDate.toDate():new Date).getTime()-e.startDate.toDate().getTime(),i=r-e.optimumMilliseconds;return{id:e.id,delta:i,optimum:e.optimumMilliseconds,timeOnTrack:r}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sl=(i=>(i.ABOVE="above",i.BELOW="below",i.LEFT="left",i.RIGHT="right",i))(Sl||{});var tee=(n,e,t,r)=>({"tooltip--above":n,"tooltip--below":e,"tooltip--left":t,"tooltip--right":r});function nee(n,e){n&1&&le(0,"hr",2)}function ree(n,e){if(n&1&&(_(0,"div",2),b(1),w(),Y(2,nee,1,0,"hr",2)),n&2){let t=U(),r=t.$implicit,i=t.$index,o=t.$count;M(),$(" ",r," "),M(),Z(i!==o-1?2:-1)}}function iee(n,e){if(n&1&&Y(0,ree,3,2),n&2){let t=e.$implicit;Z(t!==""?0:-1)}}function oee(n,e){if(n&1&&(le(0,"hr",2),_(1,"div",3),b(2),w()),n&2){let t=U();M(2),$(" ",t.data==null?null:t.data.footer," ")}}var Pv=class n{left=0;top=0;data;position="below";TooltipPosition=Sl;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["tooltip"]],inputs:{left:"left",top:"top",data:"data",position:"position"},decls:6,vars:12,consts:[[1,"whitespace-pre-line","fixed","bg-black","rounded-lg","shadow-md","p-4","text-white",3,"ngClass"],[1,"font-bold","text-lg","mb-2"],[1,"mb-1"],[1,"text-lg"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),b(2),w(),Gx(3,iee,1,1,null,null,zx),Y(5,oee,3,1),w()),t&2&&(ac("left",r.left+"px")("top",r.top+"px"),K("ngClass",Jx(7,tee,r.position===r.TooltipPosition.ABOVE,r.position===r.TooltipPosition.BELOW,r.position===r.TooltipPosition.LEFT,r.position===r.TooltipPosition.RIGHT)),M(2),$(" ",r.data==null?null:r.data.title," "),M(),Kx(r.data==null?null:r.data.paragraphs),M(2),Z((r.data==null?null:r.data.footer)!==""?5:-1))},dependencies:[$e],styles:[".tooltip--below[_ngcontent-%COMP%]{transform:translate(-50%);margin-top:7px}.tooltip--below[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-top:none;left:calc(50% - 5px);top:-5px}.tooltip--above[_ngcontent-%COMP%]{transform:translate(-50%,-100%);margin-bottom:7px}.tooltip--above[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-bottom:none;left:calc(50% - 5px);bottom:-5px}.tooltip--left[_ngcontent-%COMP%]{transform:translate(calc(-100% - 7px),-50%)}.tooltip--left[_ngcontent-%COMP%]:before{border-top-color:transparent;border-bottom-color:transparent;border-right:none;right:-5px;top:calc(50% - 5px)}.tooltip--right[_ngcontent-%COMP%]{transform:translateY(-50%);margin-left:7px}.tooltip--right[_ngcontent-%COMP%]:before{left:-5px;top:calc(50% - 5px)}"]})};var Al=class n{elementRef=D(pr);viewContainerRef=D(As);document=D(_n);tooltipData;tooltipPosition="below";tooltipComponent;hideTooltipTimeout;onMouseEnter(){this.tooltipComponent||(this.tooltipComponent=this.viewContainerRef.createComponent(Pv),this.document.body.appendChild(this.tooltipComponent.location.nativeElement),this.setTooltipComponentProperties(),this.tooltipComponent.hostView.detectChanges())}onMouseLeave(){this.removeTooltip()}removeTooltip(){this.tooltipComponent&&(this.tooltipComponent.destroy(),this.tooltipComponent=void 0,this.hideTooltipTimeout&&(clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0))}setTooltipComponentProperties(){if(!this.tooltipComponent)return;this.tooltipComponent.instance.data=this.tooltipData,this.tooltipComponent.instance.position=this.tooltipPosition;let{left:e,right:t,top:r,bottom:i}=this.elementRef.nativeElement.getBoundingClientRect();switch(this.tooltipPosition){case"below":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(i);break}case"above":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(r);break}case"right":{this.tooltipComponent.instance.left=Math.round(t),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}case"left":{this.tooltipComponent.instance.left=Math.round(e),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}default:break}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=ht({type:n,selectors:[["","tooltip",""]],hostBindings:function(t,r){t&1&&ne("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{tooltipData:"tooltipData",tooltipPosition:"tooltipPosition"}})};var see=n=>({"mb-2":n}),a2=(n,e)=>({"bg-yellow-500 text-white":n,"bg-green-500 text-white":e}),aee=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),cee=(n,e)=>({"bg-yellow-500":n,"bg-green-500":e});function lee(n,e){n&1&&b(0," Losing: ")}function uee(n,e){n&1&&b(0," Gaining: ")}function dee(n,e){if(n&1&&(_(0,"tr",19)(1,"td",20),b(2),w(),_(3,"td",17),b(4),w(),_(5,"td",17),b(6),w(),_(7,"td",21)(8,"div",22),b(9),w()()()),n&2){let t=e.$implicit,r=U(2);K("ngClass",kr(6,aee,t.id===r.activeStintId(),t.id!==r.activeStintId())),M(2),yn(t.id),M(2),$("",r.getMillisecondsToTimeString(t.timeOnTrack)," "),M(2),$("",r.getMillisecondsToTimeString(t.optimum)," "),M(2),K("ngClass",kr(9,cee,t.delta<0,t.delta>=0)),M(),$(" ",r.getMillisecondsToTimeString(t.delta)," ")}}function hee(n,e){if(n&1&&(_(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),le(4,"th",8),_(5,"th",9),b(6,"On track "),w(),_(7,"th",9),b(8,"Optimum "),w(),_(9,"th",9),b(10,"Delta "),w()()()(),_(11,"div",10)(12,"table",11)(13,"tbody"),Y(14,dee,10,12,"tr",12),w()()(),_(15,"div",13)(16,"table",11)(17,"tfoot",14)(18,"tr",15)(19,"td",16),b(20,"Totals "),w(),_(21,"td",17)(22,"div",18),b(23),w()()()()()()()),n&2){let t=U();M(14),K("ngForOf",t.deltaStints()),M(8),K("ngClass",kr(3,a2,t.totalDeltaMilliseconds()<0,t.totalDeltaMilliseconds()>0)),M(),$(" ",t.getMillisecondsToTimeString(t.totalDeltaMilliseconds())," ")}}var kv=class n{stintService=D(Bt);deltaStintService=D(Mv);deltaStints=this.deltaStintService.deltaStints;totalDeltaMilliseconds=this.deltaStintService.totalDeltaMilliseconds;deltaMilliseconds=this.deltaStintService.deltaMilliseconds;activeStintId=Ee(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!1;tooltipInfo={footer:"",paragraphs:["Only completed stint"],title:""};tooltipPosition="above";getMillisecondsToTimeString(e){return vt(Math.abs(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-delta-stint"]],decls:10,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],["tooltip","",1,"px-2","py-1","rounded-lg","text-center","font-medium","hover:cursor-default",3,"ngClass","tooltipData","tooltipPosition"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","5",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-mono"],[1,"p-1","text-center","text-white","rounded",3,"ngClass"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F9D0} Delta stint"),w(),_(4,"div",3)(5,"div",4),Y(6,lee,1,0)(7,uee,1,0),b(8),w()()(),Y(9,hee,24,6,"div",5),w()),t&2&&(M(),K("ngClass",Ge(7,see,r.isOpen)),M(4),K("ngClass",kr(9,a2,r.deltaMilliseconds()<0,r.deltaMilliseconds()>0))("tooltipData",r.tooltipInfo)("tooltipPosition",r.tooltipPosition),M(),Z(r.deltaMilliseconds()<0?6:r.deltaMilliseconds()>0?7:-1),M(2),$(" ",r.getMillisecondsToTimeString(r.deltaMilliseconds())," "),M(),Z(r.isOpen?9:-1))},dependencies:[wn,$e,Al],encapsulation:2})};var Ov=class n{stintService=D(Bt);pitService=D(jt);stintOptimizerService=D(yi);raceConfigService=D(ze);tyreService=D(vi);timelineSteps=X([]);constructor(){Oe({stints:oe(this.stintService.stints),pits:oe(this.pitService.pits),remainingDriverChanges:oe(this.pitService.remainingDriverChanges),raceConfig:oe(this.raceConfigService.raceConfig),optimizedStint:oe(this.stintOptimizerService.optimizedStint),remainingTyreChange:oe(this.tyreService.remainingTyreChange),ping:dt(1e3)}).pipe(Qe()).subscribe(({stints:e,pits:t,remainingDriverChanges:r,raceConfig:i,optimizedStint:o,remainingTyreChange:s})=>{let a=this.createRealSteps(e,t);if(a=a.sort((c,u)=>c.start.getTime()-u.start.getTime()),o&&i){let c=this.createFutureSteps(a.at(a.length-1),r,o,i,s);a.push(...c)}a=a.sort((c,u)=>c.start.getTime()-u.start.getTime()),this.timelineSteps.set(a)})}createRealSteps(e,t){let r=[];return e.forEach(i=>{r.push(this.createTimelineStepFromStint(i))}),t.forEach(i=>{r.push(this.createTimelineStepFromPit(i))}),r}createTimelineStepFromPit(e){return{durationMills:e.exitTime?e.exitTime.toDate().getTime()-e.entryTime.toDate().getTime():void 0,end:e.exitTime?.toDate(),pit:e,start:e.entryTime.toDate(),status:e.exitTime?"DONE":"ACTIVE",stint:void 0,type:"PIT"}}createTimelineStepFromStint(e){return{durationMills:e.endDate?e.endDate.toDate().getTime()-e.startDate.toDate().getTime():void 0,end:e.endDate?.toDate(),pit:void 0,start:e.startDate.toDate(),status:e.endDate?"DONE":"ACTIVE",stint:e,type:"STINT"}}createFutureSteps(e,t,r,i,o){let s=[],a=this.calculateLastEndDateFromRealStep(e,r,i.pitConfig);if(e===void 0||e.type==="PIT"){let u=ar(a,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(a,u,r.avgStintMillisecondsTime)),a=u}let c=Math.floor(t/2);for(let u=0;u<t;u++){let d=_l(i.pitConfig.minPitSeconds);o>0&&u>=c-Math.floor(o/2)&&u<c+Math.ceil(o/2)&&(d=_l(i.pitConfig.minPitWithTyreChangeSeconds),o--);let f=ar(a,d);s.push(this.createFuturePitStep(a,f,d));let m=ar(f,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(f,m,r.avgStintMillisecondsTime)),a=m}return s}createFutureStintStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"STINT"}}createFuturePitStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"PIT"}}calculateLastEndDateFromRealStep(e,t,r){if(e===void 0)return new Date;let i;return e.type==="PIT"?i=fl(e.start,r.minPitSeconds):i=ar(e.start,t.avgStintMillisecondsTime),i>new Date?i:new Date}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function fee(n,e){if(n&1&&(_(0,"div",2),b(1),w()),n&2){let t=U(),r=t.$implicit,i=t.index,o=U(2);K("ngClass",o.getStintColor(r))("tooltipData",o.getStintTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),M(),$(" ",o.getStintIcon(r)," ")}}function pee(n,e){if(n&1&&(_(0,"div",3),b(1),w()),n&2){let t=U(),r=t.$implicit,i=t.index,o=U(2);K("ngClass",o.getPitColor(r))("tooltipData",o.getPitTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),M(),$(" ",o.getPitIcon(r)," ")}}function mee(n,e){if(n&1&&(Mw(0),Y(1,fee,2,4,"div",2)(2,pee,2,4,"div",3),Pw()),n&2){let t=e.$implicit;M(),Z(t.type==="STINT"?1:2)}}function gee(n,e){if(n&1&&(_(0,"div",0),Y(1,mee,3,1,"ng-container",1),w()),n&2){let t=U();M(),K("ngForOf",t.timelineSteps())}}var Fv=class n{timelineService=D(Ov);driverService=D(Dr);timelineSteps=this.timelineService.timelineSteps;hide=!1;constructor(){this.onResize(),window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.hide=window.innerWidth<=1460}getTooltipPosition(e){let t=this.timelineSteps().length;if(t<=9)return"below";let r=Math.floor(t/10);return e<r?"right":e>=t-r?"left":"below"}getStintColor(e){return e.status==="DONE"?"bg-blue-400":e.status==="FUTURE"?"bg-blue-100":"bg-green-500"}getStintIcon(e){return e.status==="ACTIVE"?"\u{1F3CE}\uFE0F":"\u23F3"}getStintTooltipInfo(e){return{footer:"",paragraphs:[this.getStintTimeInfo(e),this.getDriverInfo(e)].filter(Boolean),title:this.getTooltipTitle(e)}}getStintTimeInfo(e){let t=[];t.push("Start: "+Kr(e.start,"HH:mm:ss"));let r=e.stint?e.stint.optimumMilliseconds??0:0;switch(e.status){case"ACTIVE":t.push("On track: "+Yn(e.start,new Date)),t.push("Optimum: "+vt(r)),t.push("End: ("+Kr(ar(e.start,r),"HH:mm:ss")+")");break;case"DONE":t.push("On track: "+Yn(e.start,e.end)),t.push("Optimum: "+vt(r)),t.push("End: "+(e.end?Kr(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Optimum: "+vt(e.durationMills)),t.push("End: "+(e.end?Kr(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitColor(e){return e.status==="DONE"?"bg-amber-400":e.status==="FUTURE"?"bg-amber-100":"bg-green-500"}getPitIcon(e){return e.status==="ACTIVE"?"\u{1F17F}\uFE0F":"\u{1F468}\u{1F3FB}\u200D\u{1F527}"}getPitTooltipInfo(e){let t=[this.getPitTimeInfo(e),this.getDriverInfo(e)].filter(Boolean);return{footer:this.getPitFooter(e),paragraphs:t,title:this.getTooltipTitle(e)}}getPitTimeInfo(e){let t=[];switch(t.push("Enter: "+Kr(e.start,"HH:mm:ss")),e.status){case"ACTIVE":t.push("Time: "+Yn(e.start,new Date));break;case"DONE":t.push("Time: "+vt(e.durationMills)),t.push("Exit: "+(e.end?Kr(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Time: "+vt(e.durationMills)),t.push("Exit: "+(e.end?Kr(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitFooter(e){let t=[];return e.pit&&(e.pit.entryDriverId!==e.pit.exitDriverId&&t.push("\u{1F417}"),e.pit.refuel&&t.push("\u26FD\uFE0F"),e.pit.tyreChange&&t.push("\u{1F6DE}\uFE0F")),t.join(" | ")}getTooltipTitle(e){if(e.type==="STINT"){let t=e.stint?"("+e.stint.id+")":"";return e.status==="ACTIVE"?"Active stint "+t:e.status==="DONE"?"Stint "+t:"Future stint"}if(e.type==="PIT"){let t=e.pit?"("+e.pit.id+")":"";return e.status==="ACTIVE"?"Active pit "+t:e.status==="DONE"?"Pit "+t:"Future pit"}return""}getDriverInfo(e){if(e.type==="STINT"&&e.stint)return"Driver: "+this.getDriverRacingName(e.stint.driverId);if(e.type==="PIT"&&e.pit){let t="Driver in: "+this.getDriverRacingName(e.pit.entryDriverId),r="Driver out: "+this.getDriverRacingName(e.pit.exitDriverId);return t+`
`+r}return""}getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-timeline"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[4,"ngFor","ngForOf"],["tooltip","",1,"flex-1","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"],["tooltip","",1,"flex-0","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"]],template:function(t,r){t&1&&Y(0,gee,2,1,"div",0),t&2&&Z(r.hide?-1:0)},dependencies:[wn,$e,Al],encapsulation:2})};function vee(n,e){if(n&1){let t=vn();_(0,"button",3),ne("click",function(){je(t);let i=U(2);return Be(i.startRace())}),b(1," Start race "),w()}}function yee(n,e){if(n&1){let t=vn();_(0,"button",4),ne("click",function(){je(t);let i=U(2);return Be(i.endRace())}),b(1," End race "),w()}}function _ee(n,e){if(n&1&&(_(0,"div",0),Y(1,vee,2,0,"button",1)(2,yee,2,0,"button",2),w()),n&2){let t=U();M(),Z(t.willEndRaceDate()?-1:1),M(),Z(t.hideEndRaceButton?-1:2)}}var Lv=class n{raceService=D(gt);raceConfigService=D(ze);raceManagerService=D(es);activeRace=this.raceService.activeRace;activeRaceConfig=this.raceConfigService.raceConfig;willEndRaceDate=this.raceService.willEndRaceDate;hideEndRaceButton=!0;constructor(){Oe({activeRace:oe(this.activeRace),activeRaceConfig:oe(this.activeRaceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({activeRace:e,activeRaceConfig:t})=>{e&&t?this.hideEndRaceButton=this.calculateHide(e,t):this.hideEndRaceButton=!0})}endRace(){this.raceManagerService.endRace()}calculateHide(e,t){if(e.end!==null)return!0;let r=so(e.start.toDate(),t.durationHour);return Jg(r,new Date)>t.endRaceThresholdSeconds||e.end!==null}startRace(){let e=this.raceConfigService.raceConfig()?.startRaceDriverId;e&&this.raceManagerService.startRace(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-race-button"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(t,r){t&1&&Y(0,_ee,3,2,"div",0),t&2&&Z(!r.hideEndRaceButton||!r.willEndRaceDate()?0:-1)},encapsulation:2})};var wee=n=>({"mb-2":n});function Eee(n,e){if(n&1){let t=vn();_(0,"li",6),ne("click",function(){let i=je(t).$implicit,o=U(2);return Be(o.openDocument(i.url))}),b(1),w()}if(n&2){let t=e.$implicit;M(),$(" ",t.name," ")}}function Iee(n,e){if(n&1&&(_(0,"div",3)(1,"ul",4),Y(2,Eee,2,1,"li",5),w()()),n&2){let t=U();M(2),K("ngForOf",t.documents)}}var Vv=class n{isOpen=!1;documents=[{name:"Briefing",url:"assets/documents/briefing.pdf"},{name:"Entry list",url:"assets/documents/entry-list.pdf"},{name:"Programma Venerd\xEC",url:"assets/documents/programma-venerdi.pdf"},{name:"Programma 24H",url:"assets/documents/programma-24h.pdf"},{name:"Regolamento 24H",url:"assets/documents/regolamento-24h.pdf"},{name:"Interfono cuffie",url:"assets/documents/interfono-cuffie.pdf"}];openDocument(e){window.open(e,"_blank")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-document"]],decls:5,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex"],[1,"list-disc","list-inside"],["class","hover:underline cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"hover:underline","cursor-pointer",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F5C2}\uFE0F Document"),w()(),Y(4,Iee,3,1,"div",3),w()),t&2&&(M(),K("ngClass",Ge(2,wee,r.isOpen)),M(3),Z(r.isOpen?4:-1))},dependencies:[$e,wn],encapsulation:2})};var Tee=n=>({"mb-2":n});function Cee(n,e){n&1&&(_(0,"div",3)(1,"ul",4)(2,"li",5),b(3," \u{1F3A7} Spegnere interfono CUFFIE (premere tasto centrale e posteriore per 3 secondi) "),w(),_(4,"li",5),b(5," \u{1F3A7} Mettere interfono CUFFIE in Impostazioni (premere tasto centrale per 7 secondi - si accende il led rosso) "),w(),_(6,"li",5),b(7," \u{1F3A7} Mettere interfono CUFFIE in abbinamento (premere tasto centrale per 3 secondi - il led flasha) "),w(),_(8,"li",5),b(9," \u{1FA96} Accendere interfono CASCO (premere tasto davanti e basso per 3 secondi) "),w(),_(10,"li",5),b(11," \u{1FA96} Mettere interfono CASCO in abbinamento (premete tasto sopra per 3 secondi) "),w(),_(12,"li",5),b(13," \u{1FA96} Aspettare l'abbinamento (i led di entrambi i dispositivi smettono di flashare) "),w()()())}var Uv=class n{isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-interphone-pairing"]],decls:5,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex"],[1,"list-decimal","list-inside"],[1,"mb-2"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F3A7} \u{1FA96} Interphone pairing procedure"),w()(),Y(4,Cee,14,0,"div",3),w()),t&2&&(M(),K("ngClass",Ge(2,Tee,r.isOpen)),M(3),Z(r.isOpen?4:-1))},dependencies:[$e],encapsulation:2})};var jv=class n{raceService=D(gt);pitService=D(jt);raceConfigService=D(ze);lastChangeDate=X(void 0);emptyBatteryDate=X(void 0);remainingBatteryPercentage=X(100);constructor(){Oe({lastInterphoneChangePit:oe(this.pitService.lastInterphoneChangePit),race:oe(this.raceService.activeRace),raceConfig:oe(this.raceConfigService.raceConfig),ping:dt(1e3)}).pipe(Qe()).subscribe(({lastInterphoneChangePit:e,race:t,raceConfig:r})=>{this.lastChangeDate.set(this.getInterphoneChangeDate(e,t)),this.emptyBatteryDate.set(this.calculateEmptyBatteryDate(this.lastChangeDate(),r)),this.remainingBatteryPercentage.set(this.calculateRemainingBatteryPercentage(this.emptyBatteryDate(),r))})}getInterphoneChangeDate(e,t){if(e?.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyBatteryDate(e,t){if(e&&t)return co(e,t.interphoneBatteryDurationMinute)}calculateRemainingBatteryPercentage(e,t){if(e&&t){let i=ml(e,new Date)/t.interphoneBatteryDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var bee=n=>({"mb-2":n}),Dee=n=>({"animate-bounce":n});function See(n,e){if(n&1&&(b(0),Or(1,"date")),n&2){let t=U(2);$(" ",Fr(1,1,t.lastChangeTime(),"HH:mm:ss")," ")}}function Aee(n,e){n&1&&b(0," --:--:-- ")}function Ree(n,e){if(n&1&&(b(0),Or(1,"date")),n&2){let t=U(2);$(" ",Fr(1,1,t.emptyBatteryDate(),"HH:mm:ss")," ")}}function xee(n,e){n&1&&b(0," --:--:-- ")}function Nee(n,e){if(n&1){let t=vn();_(0,"div",6)(1,"div")(2,"div",7),b(3,"Last change time"),w(),_(4,"div",8),Y(5,See,2,4)(6,Aee,1,0),w()(),_(7,"div")(8,"div",9),b(9,"Since last change"),w(),_(10,"div",10),b(11),w()()(),le(12,"hr",11),_(13,"div",6)(14,"div")(15,"div",7),b(16,"Empty time"),w(),_(17,"div",8),Y(18,Ree,2,4)(19,xee,1,0),w()(),_(20,"div")(21,"div",9),b(22,"Empty in"),w(),_(23,"div",10),b(24),w()()(),le(25,"hr",11),_(26,"div",12)(27,"div")(28,"div",9),b(29,"Battery duration (min)"),w(),_(30,"div",13)(31,"button",14),ne("click",function(){je(t);let i=U();return Be(i.increaseBatteryDuration())}),b(32," + "),w(),_(33,"form",15),ne("ngSubmit",function(){je(t);let i=U();return Be(i.onSubmit())}),_(34,"input",16),qn("ngModelChange",function(i){je(t);let o=U();return er(o.batteryDurationMinute,i)||(o.batteryDurationMinute=i),Be(i)}),w()(),_(35,"button",17),ne("click",function(){je(t);let i=U();return Be(i.decreaseBatteryDuration())}),b(36," - "),w()()()()}if(n&2){let t=U();M(5),Z(t.lastChangeTime()?5:6),M(6),$(" ",t.sinceLastChange()," "),M(7),Z(t.emptyBatteryDate()?18:19),M(6),$(" ",t.emptyBatteryCountdown()," "),M(10),Wn("ngModel",t.batteryDurationMinute)}}var Bv=class n{raceConfigService=D(ze);interphoneService=D(jv);remainingBatteryPercentage=this.interphoneService.remainingBatteryPercentage;emptyBatteryDate=this.interphoneService.emptyBatteryDate;lastChangeTime=this.interphoneService.lastChangeDate;emptyBatteryCountdown=Ee(()=>ho(this.emptyBatteryDate()));sinceLastChange=Ee(()=>Yn(this.lastChangeTime(),new Date));warning=Ee(()=>this.remainingBatteryPercentage()<=20);remainingColor=Ee(()=>this.getRemainingColor(this.remainingBatteryPercentage()));isOpen=!1;batteryDurationMinute=0;onSubmit(){this.raceConfigService.updateInterphoneBatteryDurationMinute(this.batteryDurationMinute)}increaseBatteryDuration(){this.raceConfigService.updateInterphoneBatteryDurationMinute(this.batteryDurationMinute+1)}decreaseBatteryDuration(){this.raceConfigService.updateInterphoneBatteryDurationMinute(this.batteryDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-interphone"]],decls:9,vars:10,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-center"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne("click",function(){return r.isOpen=!r.isOpen}),_(2,"div",2),b(3,"\u{1F50A} Interphone"),w(),_(4,"div",3)(5,"div",4),b(6),w(),le(7,"app-battery",5),w()(),Y(8,Nee,37,5),w()),t&2&&(M(),K("ngClass",Ge(6,bee,r.isOpen)),M(3),K("ngClass",Ge(8,Dee,r.warning())),M(),K("ngClass",r.remainingColor()),M(),$(" Empty: ",r.emptyBatteryCountdown()," "),M(),K("charge",r.remainingBatteryPercentage()),M(),Z(r.isOpen?8:-1))},dependencies:[Dl,Uo,Ii,Ei,ts,pa,_i,wi,ga,ma,Qr,Yr,gv,$e],encapsulation:2})};var $v=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ce({type:n,selectors:[["app-root"]],decls:46,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-1","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"flex-col"],[1,"lg:mb-4"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/circuit_logo.png","alt","Circuito",1,"max-w-48","md:max-w-xs"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-1"],["src","assets/mappa_evento.jpg","alt","Mappa Evento",1,"max-w-sm","md:max-w-xl","2xl:max-w-4xl"],["src","assets/cremona_circuit_plan.jpg","alt","Circuito",1,"max-w-sm","md:max-w-xl","2xl:max-w-4xl"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2),b(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),w(),_(4,"div",3),le(5,"app-race"),w()(),le(6,"app-race-button")(7,"app-timeline"),_(8,"div",4)(9,"div",5)(10,"div",6),le(11,"app-pit-lane"),w(),_(12,"div",6),le(13,"app-interphone-pairing"),w(),_(14,"div",6),le(15,"app-driver-change"),w(),_(16,"div",6),le(17,"app-tyre-change-window"),w(),_(18,"div",6),le(19,"app-pit"),w()(),_(20,"div",7)(21,"div",6),le(22,"app-fuel"),w(),_(23,"div",6),le(24,"app-stint-optimizer"),w(),_(25,"div",6),le(26,"app-lap"),w(),_(27,"div",6),le(28,"app-driver"),w(),_(29,"div",8),le(30,"app-document"),w()(),_(31,"div",7)(32,"div",6),le(33,"app-interphone"),w(),_(34,"div",6),le(35,"app-active-stint"),w(),_(36,"div",6),le(37,"app-stint"),w(),_(38,"div",6),le(39,"app-delta-stint"),w()()(),_(40,"div",9),le(41,"img",10),_(42,"div",11),le(43,"img",12)(44,"img",13),w()()(),le(45,"router-outlet"))},dependencies:[PE,yv,_v,Ev,Iv,Tv,Dv,Sv,Av,Rv,xv,Nv,kv,Fv,Lv,Vv,Uv,Bv],encapsulation:2})};$N($v,GL).catch(n=>console.error(n));
