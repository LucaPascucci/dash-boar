import{$ as mn,A as gn,B as Ir,C as Id,D as Pt,E as pD,F as gD,G as wr,H as gs,I as $c,J as Hc,K as qc,L as ms,M as mD,N as yD,O as _D,P as vD,Q as Gc,R as zc,S as we,T as pt,U as Wt,V as Er,W as wm,X as wd,Y as gt,Z as It,_ as zr,a as V,aa as ID,b as ye,ba as wt,c as Si,ca as Ed,d as _,da as Q,e as U,ea as wD,f as No,g as oD,h as aD,i as cD,j as uD,k as lD,l as Ai,m as vm,n as Im,o as Mo,p as zt,q as Uc,r as dD,s as jc,t as vd,u as hD,v as vr,w as fD,x as Gr,y as ps,z as Bc}from"./chunk-VUN4IAWB.js";function ED(t,e){return Object.is(t,e)}var At=null,Wc=!1,Cd=1,Cr=Symbol("SIGNAL");function Ee(t){let e=At;return At=t,e}function CD(){return At}function cL(){return Wc}var xo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function bm(t){if(Wc)throw new Error("");if(At===null)return;At.consumerOnSignalRead(t);let e=At.nextProducerIndex++;if(Rd(At),e<At.producerNode.length&&At.producerNode[e]!==t&&Kc(At)){let n=At.producerNode[e];Ad(n,At.producerIndexOfThis[e])}At.producerNode[e]!==t&&(At.producerNode[e]=t,At.producerIndexOfThis[e]=Kc(At)?AD(t,At,e):0),At.producerLastReadVersion[e]=t.version}function uL(){Cd++}function TD(t){if(!(Kc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Cd)){if(!t.producerMustRecompute(t)&&!Dd(t)){t.dirty=!1,t.lastCleanEpoch=Cd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Cd}}function bD(t){if(t.liveConsumerNode===void 0)return;let e=Wc;Wc=!0;try{for(let n of t.liveConsumerNode)n.dirty||SD(n)}finally{Wc=e}}function DD(){return At?.consumerAllowSignalWrites!==!1}function SD(t){t.dirty=!0,bD(t),t.consumerMarkedDirty?.(t)}function Qc(t){return t&&(t.nextProducerIndex=0),Ee(t)}function bd(t,e){if(Ee(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Kc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Ad(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Dd(t){Rd(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(TD(n),r!==n.version))return!0}return!1}function Sd(t){if(Rd(t),Kc(t))for(let e=0;e<t.producerNode.length;e++)Ad(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function AD(t,e,n){if(RD(t),t.liveConsumerNode.length===0&&ND(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=AD(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Ad(t,e){if(RD(t),t.liveConsumerNode.length===1&&ND(t))for(let r=0;r<t.producerNode.length;r++)Ad(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Rd(i),i.producerIndexOfThis[r]=e}}function Kc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Rd(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function RD(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function ND(t){return t.producerNode!==void 0}function MD(t){let e=Object.create(lL);e.computation=t;let n=()=>{if(TD(e),bm(e),e.value===Td)throw e.error;return e.value};return n[Cr]=e,n}var Em=Symbol("UNSET"),Cm=Symbol("COMPUTING"),Td=Symbol("ERRORED"),lL=ye(V({},xo),{value:Em,dirty:!0,error:null,equal:ED,producerMustRecompute(t){return t.value===Em||t.value===Cm},producerRecomputeValue(t){if(t.value===Cm)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Cm;let n=Qc(t),r;try{r=t.computation()}catch(i){r=Td,t.error=i}finally{bd(t,n)}if(e!==Em&&e!==Td&&r!==Td&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function dL(){throw new Error}var xD=dL;function PD(){xD()}function kD(t){xD=t}var hL=null;function OD(t){let e=Object.create(LD);e.value=t;let n=()=>(bm(e),e.value);return n[Cr]=e,n}function Dm(t,e){DD()||PD(),t.equal(t.value,e)||(t.value=e,fL(t))}function FD(t,e){DD()||PD(),Dm(t,e(t.value))}var LD=ye(V({},xo),{equal:ED,value:void 0});function fL(t){t.version++,uL(),bD(t),hL?.()}function VD(t,e,n){let r=Object.create(pL);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Sd(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Tm)}let a=()=>{if(r.fn===null)return;if(cL())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Dd(r))return;r.hasRun=!0;let c=Qc(r);try{r.cleanupFn(),r.cleanupFn=Tm,r.fn(i)}finally{bd(r,c)}};return r.ref={notify:()=>SD(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Cr]:r},r.ref}var Tm=()=>{},pL=ye(V({},xo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Tm});function ue(t){return typeof t=="function"}function Po(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Nd=Po(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ys(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ut=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ue(r))try{r()}catch(s){e=s instanceof Nd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{UD(s)}catch(o){e=e??[],o instanceof Nd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Nd(e)}}add(e){var n;if(e&&e!==this)if(this.closed)UD(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ys(n,e)}remove(e){let{_finalizers:n}=this;n&&ys(n,e),e instanceof t&&e._removeParent(this)}};ut.EMPTY=(()=>{let t=new ut;return t.closed=!0,t})();var Sm=ut.EMPTY;function Md(t){return t instanceof ut||t&&"closed"in t&&ue(t.remove)&&ue(t.add)&&ue(t.unsubscribe)}function UD(t){ue(t)?t():t.unsubscribe()}var nr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ko={setTimeout(t,e,...n){let{delegate:r}=ko;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ko;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xd(t){ko.setTimeout(()=>{let{onUnhandledError:e}=nr;if(e)e(t);else throw t})}function Yc(){}var jD=Am("C",void 0,void 0);function BD(t){return Am("E",void 0,t)}function $D(t){return Am("N",t,void 0)}function Am(t,e,n){return{kind:t,value:e,error:n}}var _s=null;function Oo(t){if(nr.useDeprecatedSynchronousErrorHandling){let e=!_s;if(e&&(_s={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=_s;if(_s=null,n)throw r}}else t()}function HD(t){nr.useDeprecatedSynchronousErrorHandling&&_s&&(_s.errorThrown=!0,_s.error=t)}var vs=class extends ut{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Md(e)&&e.add(this)):this.destination=yL}static create(e,n,r){return new Fo(e,n,r)}next(e){this.isStopped?Nm($D(e),this):this._next(e)}error(e){this.isStopped?Nm(BD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nm(jD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gL=Function.prototype.bind;function Rm(t,e){return gL.call(t,e)}var Mm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Pd(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Pd(r)}else Pd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Pd(n)}}},Fo=class extends vs{constructor(e,n,r){super();let i;if(ue(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&nr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rm(e.next,s),error:e.error&&Rm(e.error,s),complete:e.complete&&Rm(e.complete,s)}):i=e}this.destination=new Mm(i)}};function Pd(t){nr.useDeprecatedSynchronousErrorHandling?HD(t):xd(t)}function mL(t){throw t}function Nm(t,e){let{onStoppedNotification:n}=nr;n&&ko.setTimeout(()=>n(t,e))}var yL={closed:!0,next:Yc,error:mL,complete:Yc};var Lo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function cn(t){return t}function kd(...t){return xm(t)}function xm(t){return t.length===0?cn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=vL(n)?n:new Fo(n,r,i);return Oo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=qD(r),new r((i,s)=>{let o=new Fo({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Lo](){return this}pipe(...n){return xm(n)(this)}toPromise(n){return n=qD(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function qD(t){var e;return(e=t??nr.Promise)!==null&&e!==void 0?e:Promise}function _L(t){return t&&ue(t.next)&&ue(t.error)&&ue(t.complete)}function vL(t){return t&&t instanceof vs||_L(t)&&Md(t)}function Pm(t){return ue(t?.lift)}function fe(t){return e=>{if(Pm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function le(t,e,n,r,i){return new Zc(t,e,n,r,i)}var Zc=class extends vs{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Vo(){return fe((t,e)=>{let n=null;t._refCount++;let r=le(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Uo=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Pm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ut;let n=this.getSubject();e.add(this.source.subscribe(le(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ut.EMPTY)}return e}refCount(){return Vo()(this)}};var GD=Po(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var et=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Od(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new GD}next(n){Oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Oo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Sm:(this.currentObservers=null,s.push(n),new ut(()=>{this.currentObservers=null,ys(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new Od(e,n),t})(),Od=class extends et{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Sm}};var Ut=class extends et{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Jc={now(){return(Jc.delegate||Date).now()},delegate:void 0};var Xc=class extends et{constructor(e=1/0,n=1/0,r=Jc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Fd=class extends ut{constructor(e,n){super()}schedule(e,n=0){return this}};var eu={setInterval(t,e,...n){let{delegate:r}=eu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=eu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var jo=class extends Fd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return eu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&eu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ys(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Bo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Bo.now=Jc.now;var $o=class extends Bo{constructor(e,n=Bo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Ho=new $o(jo),km=Ho;var Ld=class extends jo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Vd=class extends $o{};var Om=new Vd(Ld);var Nn=new ae(t=>t.complete());function Ud(t){return t&&ue(t.schedule)}function zD(t){return t[t.length-1]}function jd(t){return ue(zD(t))?t.pop():void 0}function Ri(t){return Ud(zD(t))?t.pop():void 0}function Fm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function KD(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function WD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Is(t){return this instanceof Is?(this.v=t,this):new Is(t)}function QD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(I){return Promise.resolve(I).then(y,f)}}function a(y,I){r[y]&&(i[y]=function(R){return new Promise(function(S,P){s.push([y,R,S,P])>1||c(y,R)})},I&&(i[y]=I(i[y])))}function c(y,I){try{l(r[y](I))}catch(R){g(s[0][3],R)}}function l(y){y.value instanceof Is?Promise.resolve(y.value.v).then(d,f):g(s[0][2],y)}function d(y){c("next",y)}function f(y){c("throw",y)}function g(y,I){y(I),s.shift(),s.length&&c(s[0][0],s[0][1])}}function YD(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof WD=="function"?WD(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Bd=t=>t&&typeof t.length=="number"&&typeof t!="function";function $d(t){return ue(t?.then)}function Hd(t){return ue(t[Lo])}function qd(t){return Symbol.asyncIterator&&ue(t?.[Symbol.asyncIterator])}function Gd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var zd=IL();function Wd(t){return ue(t?.[zd])}function Kd(t){return QD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Is(n.read());if(i)return yield Is(void 0);yield yield Is(r)}}finally{n.releaseLock()}})}function Qd(t){return ue(t?.getReader)}function lt(t){if(t instanceof ae)return t;if(t!=null){if(Hd(t))return wL(t);if(Bd(t))return EL(t);if($d(t))return CL(t);if(qd(t))return ZD(t);if(Wd(t))return TL(t);if(Qd(t))return bL(t)}throw Gd(t)}function wL(t){return new ae(e=>{let n=t[Lo]();if(ue(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function EL(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function CL(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,xd)})}function TL(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ZD(t){return new ae(e=>{DL(t,e).catch(n=>e.error(n))})}function bL(t){return ZD(Kd(t))}function DL(t,e){var n,r,i,s;return KD(this,void 0,void 0,function*(){try{for(n=YD(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function yn(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ni(t,e=0){return fe((n,r)=>{n.subscribe(le(r,i=>yn(r,t,()=>r.next(i),e),()=>yn(r,t,()=>r.complete(),e),i=>yn(r,t,()=>r.error(i),e)))})}function Mi(t,e=0){return fe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function JD(t,e){return lt(t).pipe(Mi(e),Ni(e))}function XD(t,e){return lt(t).pipe(Mi(e),Ni(e))}function e0(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function t0(t,e){return new ae(n=>{let r;return yn(n,e,()=>{r=t[zd](),yn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ue(r?.return)&&r.return()})}function Yd(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{yn(n,e,()=>{let r=t[Symbol.asyncIterator]();yn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function n0(t,e){return Yd(Kd(t),e)}function r0(t,e){if(t!=null){if(Hd(t))return JD(t,e);if(Bd(t))return e0(t,e);if($d(t))return XD(t,e);if(qd(t))return Yd(t,e);if(Wd(t))return t0(t,e);if(Qd(t))return n0(t,e)}throw Gd(t)}function Ze(t,e){return e?r0(t,e):lt(t)}function X(...t){let e=Ri(t);return Ze(t,e)}function qo(t,e){let n=ue(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function Lm(t){return!!t&&(t instanceof ae||ue(t.lift)&&ue(t.subscribe))}var Wr=Po(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function i0(t){return t instanceof Date&&!isNaN(t)}function W(t,e){return fe((n,r)=>{let i=0;n.subscribe(le(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:SL}=Array;function AL(t,e){return SL(e)?t(...e):t(e)}function Zd(t){return W(e=>AL(t,e))}var{isArray:RL}=Array,{getPrototypeOf:NL,prototype:ML,keys:xL}=Object;function Jd(t){if(t.length===1){let e=t[0];if(RL(e))return{args:e,keys:null};if(PL(e)){let n=xL(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function PL(t){return t&&typeof t=="object"&&NL(t)===ML}function Xd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function tt(...t){let e=Ri(t),n=jd(t),{args:r,keys:i}=Jd(t);if(r.length===0)return Ze([],e);let s=new ae(kL(r,e,i?o=>Xd(i,o):cn));return n?s.pipe(Zd(n)):s}function kL(t,e,n=cn){return r=>{s0(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)s0(e,()=>{let l=Ze(t[c],e),d=!1;l.subscribe(le(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function s0(t,e,n){t?yn(n,t,e):e()}function o0(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=R=>l<r?I(R):c.push(R),I=R=>{s&&e.next(R),l++;let S=!1;lt(n(R,d++)).subscribe(le(e,P=>{i?.(P),s?y(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();o?yn(e,o,()=>I(P)):I(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(le(e,y,()=>{f=!0,g()})),()=>{a?.()}}function mt(t,e,n=1/0){return ue(e)?mt((r,i)=>W((s,o)=>e(r,s,i,o))(lt(t(r,i))),n):(typeof e=="number"&&(n=e),fe((r,i)=>o0(r,i,t,n)))}function Vm(t=1/0){return mt(cn,t)}function a0(){return Vm(1)}function Go(...t){return a0()(Ze(t,Ri(t)))}function eh(t){return new ae(e=>{lt(t()).subscribe(e)})}function Um(...t){let e=jd(t),{args:n,keys:r}=Jd(t),i=new ae(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;lt(n[d]).subscribe(le(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?Xd(r,a):a),s.complete())}))}});return e?i.pipe(Zd(e)):i}function jm(t=0,e,n=km){let r=-1;return e!=null&&(Ud(e)?n=e:r=e),new ae(i=>{let s=i0(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function rr(t=0,e=Ho){return t<0&&(t=0),jm(t,t,e)}function un(t,e){return fe((n,r)=>{let i=0;n.subscribe(le(r,s=>t.call(e,s,i++)&&r.next(s)))})}function xi(t){return fe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(le(n,void 0,void 0,o=>{s=lt(t(o,xi(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function c0(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(le(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function ws(t,e){return ue(e)?mt(t,e,1):mt(t,1)}function Pi(t){return fe((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Kr(t){return t<=0?()=>Nn:fe((e,n)=>{let r=0;e.subscribe(le(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Bm(t){return W(()=>t)}function th(t,e=cn){return t=t??OL,fe((n,r)=>{let i,s=!0;n.subscribe(le(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function OL(t,e){return t===e}function nh(t=FL){return fe((e,n)=>{let r=!1;e.subscribe(le(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function FL(){return new Wr}function tu(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Tr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?un((i,s)=>t(i,s,r)):cn,Kr(1),n?Pi(e):nh(()=>new Wr))}function $m(t,e,n,r){return fe((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=I=>{a.forEach(I),I(s)},l=I=>c(R=>R.error(I)),d=0,f=!1,g=new Zc(s,I=>{try{let R=t(I),S=a.get(R);if(!S){a.set(R,S=r?r():new et);let P=y(R,S);if(s.next(P),n){let $=le(S,()=>{S.complete(),$?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(lt(n(P)).subscribe($))}}S.next(o?o(I):I)}catch(R){l(R)}},()=>c(I=>I.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function y(I,R){let S=new ae(P=>{d++;let $=R.subscribe(P);return()=>{$.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return S.key=I,S}})}function zo(t){return t<=0?()=>Nn:fe((e,n)=>{let r=[];e.subscribe(le(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Hm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?un((i,s)=>t(i,s,r)):cn,zo(1),n?Pi(e):nh(()=>new Wr))}function rh(){return fe((t,e)=>{let n,r=!1;t.subscribe(le(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function ih(t,e){return fe(c0(t,e,arguments.length>=2,!0))}function Wo(...t){let e=Ri(t);return fe((n,r)=>{(e?Go(t,n,e):Go(t,n)).subscribe(r)})}function _n(t,e){return fe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(le(r,c=>{i?.unsubscribe();let l=0,d=s++;lt(t(c,d)).subscribe(i=le(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Kt(t){return fe((e,n)=>{lt(t).subscribe(le(n,()=>n.complete(),Yc)),!n.closed&&e.subscribe(n)})}function Rt(t,e,n){let r=ue(t)||e||n?{next:t,error:e,complete:n}:t;return r?fe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(le(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):cn}var LL="https://g.co/ng/security#xss",K=class extends Error{constructor(e,n){super(Qy(e,n)),this.code=e}};function Qy(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function fu(t){return{toString:t}.toString()}var sh="__parameters__";function VL(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function W0(t,e,n){return fu(()=>{let r=VL(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(sh)?c[sh]:Object.defineProperty(c,sh,{value:[]})[sh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var nu=globalThis;function je(t){for(let e in t)if(t[e]===je)return e;throw Error("Could not find renamed property on target object.")}function UL(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function In(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(In).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function u0(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var jL=je({__forward_ref__:je});function Xr(t){return t.__forward_ref__=Xr,t.toString=function(){return In(this())},t}function ln(t){return K0(t)?t():t}function K0(t){return typeof t=="function"&&t.hasOwnProperty(jL)&&t.__forward_ref__===Xr}function B(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Ps(t){return{providers:t.providers||[],imports:t.imports||[]}}function jh(t){return l0(t,Y0)||l0(t,Z0)}function Q0(t){return jh(t)!==null}function l0(t,e){return t.hasOwnProperty(e)?t[e]:null}function BL(t){let e=t&&(t[Y0]||t[Z0]);return e||null}function d0(t){return t&&(t.hasOwnProperty(h0)||t.hasOwnProperty($L))?t[h0]:null}var Y0=je({\u0275prov:je}),h0=je({\u0275inj:je}),Z0=je({ngInjectableDef:je}),$L=je({ngInjectorDef:je}),j=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=B({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function J0(t){return t&&!!t.\u0275providers}var HL=je({\u0275cmp:je}),qL=je({\u0275dir:je}),GL=je({\u0275pipe:je}),zL=je({\u0275mod:je}),gh=je({\u0275fac:je}),su=je({__NG_ELEMENT_ID__:je}),f0=je({__NG_ENV_ID__:je});function Yy(t){return typeof t=="string"?t:t==null?"":String(t)}function WL(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Yy(t)}function KL(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new K(-200,t)}function Zy(t,e){throw new K(-201,!1)}var ge=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ge||{}),ry;function X0(){return ry}function vn(t){let e=ry;return ry=t,e}function eS(t,e,n){let r=jh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ge.Optional)return null;if(e!==void 0)return e;Zy(t,"Injector")}var QL={},ou=QL,iy="__NG_DI_FLAG__",mh="ngTempTokenPath",YL="ngTokenPath",ZL=/\n/gm,JL="\u0275",p0="__source",Zo;function XL(){return Zo}function ki(t){let e=Zo;return Zo=t,e}function eV(t,e=ge.Default){if(Zo===void 0)throw new K(-203,!1);return Zo===null?eS(t,void 0,e):Zo.get(t,e&ge.Optional?null:void 0,e)}function ne(t,e=ge.Default){return(X0()||eV)(ln(t),e)}function M(t,e=ge.Default){return ne(t,Bh(e))}function Bh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function sy(t){let e=[];for(let n=0;n<t.length;n++){let r=ln(t[n]);if(Array.isArray(r)){if(r.length===0)throw new K(900,!1);let i,s=ge.Default;for(let o=0;o<r.length;o++){let a=r[o],c=tV(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ne(i,s))}else e.push(ne(r))}return e}function tS(t,e){return t[iy]=e,t.prototype[iy]=e,t}function tV(t){return t[iy]}function nV(t,e,n,r){let i=t[mh];throw e[p0]&&i.unshift(e[p0]),t.message=rV(`
`+t.message,i,n,r),t[YL]=i,t[mh]=null,t}function rV(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==JL?t.slice(2):t;let i=In(e);if(Array.isArray(e))i=e.map(In).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):In(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ZL,`
  `)}`}var se=tS(W0("Optional"),8);var nS=tS(W0("SkipSelf"),4);function Ts(t,e){let n=t.hasOwnProperty(gh);return n?t[gh]:null}function Jy(t,e){t.forEach(n=>Array.isArray(n)?Jy(n,e):e(n))}function rS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function yh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function iV(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function sV(t,e,n){let r=pu(t,e);return r>=0?t[r|1]=n:(r=~r,iV(t,r,e,n)),r}function qm(t,e){let n=pu(t,e);if(n>=0)return t[n|1]}function pu(t,e){return oV(t,e,1)}function oV(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Xo={},Un=[],ea=new j(""),iS=new j("",-1),sS=new j(""),_h=class{get(e,n=ou){if(n===ou){let r=new Error(`NullInjectorError: No provider for ${In(e)}!`);throw r.name="NullInjectorError",r}return n}},oS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(oS||{}),Sr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Sr||{}),Li=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Li||{});function aV(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function oy(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];uV(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function cV(t){return t===3||t===4||t===6}function uV(t){return t.charCodeAt(0)===64}function au(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?g0(t,n,i,null,e[++r]):g0(t,n,i,null,null))}}return t}function g0(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var aS="ng-template";function lV(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&aV(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Xy(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Xy(t){return t.type===4&&t.value!==aS}function dV(t,e,n){let r=t.type===4&&!n?aS:t.value;return e===r}function hV(t,e,n){let r=4,i=t.attrs,s=i!==null?gV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!ir(r)&&!ir(c))return!1;if(o&&ir(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!dV(t,c,n)||c===""&&e.length===1){if(ir(r))return!1;o=!0}}else if(r&8){if(i===null||!lV(t,i,c,n)){if(ir(r))return!1;o=!0}}else{let l=e[++a],d=fV(c,i,Xy(t),n);if(d===-1){if(ir(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(ir(r))return!1;o=!0}}}}return ir(r)||o}function ir(t){return(t&1)===0}function fV(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return mV(e,t)}function pV(t,e,n=!1){for(let r=0;r<e.length;r++)if(hV(t,e[r],n))return!0;return!1}function gV(t){for(let e=0;e<t.length;e++){let n=t[e];if(cV(n))return e}return t.length}function mV(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function m0(t,e){return t?":not("+e.trim()+")":e}function yV(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!ir(o)&&(e+=m0(s,i),i=""),r=o,s=s||!ir(r);n++}return i!==""&&(e+=m0(s,i)),e}function _V(t){return t.map(yV).join(",")}function vV(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!ir(i))break;i=s}r++}return{attrs:e,classes:n}}function Qt(t){return fu(()=>{let e=fS(t),n=ye(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===oS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Sr.Emulated,styles:t.styles||Un,_:null,schemas:t.schemas||null,tView:null,id:""});pS(n);let r=t.dependencies;return n.directiveDefs=_0(r,!1),n.pipeDefs=_0(r,!0),n.id=EV(n),n})}function IV(t){return bs(t)||uS(t)}function wV(t){return t!==null}function ks(t){return fu(()=>({type:t.type,bootstrap:t.bootstrap||Un,declarations:t.declarations||Un,imports:t.imports||Un,exports:t.exports||Un,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function y0(t,e){if(t==null)return Xo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Li.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Li.None?[r,a]:r,e[s]=o):n[s]=r}return n}function kt(t){return fu(()=>{let e=fS(t);return pS(e),e})}function cS(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function bs(t){return t[HL]||null}function uS(t){return t[qL]||null}function lS(t){return t[GL]||null}function dS(t){let e=bs(t)||uS(t)||lS(t);return e!==null?e.standalone:!1}function hS(t,e){let n=t[zL]||null;if(!n&&e===!0)throw new Error(`Type ${In(t)} does not have '\u0275mod' property.`);return n}function fS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Xo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Un,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:y0(t.inputs,e),outputs:y0(t.outputs),debugInfo:null}}function pS(t){t.features?.forEach(e=>e(t))}function _0(t,e){if(!t)return null;let n=e?lS:IV;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(wV)}function EV(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function qe(t){return{\u0275providers:t}}function CV(...t){return{\u0275providers:gS(!0,t),\u0275fromNgModule:!0}}function gS(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Jy(e,o=>{let a=o;ay(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&mS(i,s),n}function mS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];e_(i,s=>{e(s,r)})}}function ay(t,e,n,r){if(t=ln(t),!t)return!1;let i=null,s=d0(t),o=!s&&bs(t);if(!s&&!o){let c=t.ngModule;if(s=d0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)ay(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Jy(s.imports,d=>{ay(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&mS(l,e)}if(!a){let l=Ts(i)||(()=>new i);e({provide:i,useFactory:l,deps:Un},i),e({provide:sS,useValue:i,multi:!0},i),e({provide:ea,useValue:()=>ne(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;e_(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function e_(t,e){for(let n of t)J0(n)&&(n=n.\u0275providers),Array.isArray(n)?e_(n,e):e(n)}var TV=je({provide:String,useValue:je});function yS(t){return t!==null&&typeof t=="object"&&TV in t}function bV(t){return!!(t&&t.useExisting)}function DV(t){return!!(t&&t.useFactory)}function ta(t){return typeof t=="function"}function SV(t){return!!t.useClass}var $h=new j(""),uh={},AV={},Gm;function t_(){return Gm===void 0&&(Gm=new _h),Gm}var Bn=class{},cu=class extends Bn{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,uy(e,o=>this.processProvider(o)),this.records.set(iS,Ko(void 0,this)),i.has("environment")&&this.records.set(Bn,Ko(void 0,this));let s=this.records.get($h);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(sS,Un,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ki(this),r=vn(void 0),i;try{return e()}finally{ki(n),vn(r)}}get(e,n=ou,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(f0))return e[f0](this);r=Bh(r);let i,s=ki(this),o=vn(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=PV(e)&&jh(e);l&&this.injectableDefInScope(l)?c=Ko(cy(e),uh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?t_():this.parent;return n=r&ge.Optional&&n===ou?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[mh]=a[mh]||[]).unshift(In(e)),s)throw a;return nV(a,e,"R3InjectorError",this.source)}else throw a}finally{vn(o),ki(s)}}resolveInjectorInitializers(){let e=Ee(null),n=ki(this),r=vn(void 0),i;try{let s=this.get(ea,Un,ge.Self);for(let o of s)o()}finally{ki(n),vn(r),Ee(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(In(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new K(205,!1)}processProvider(e){e=ln(e);let n=ta(e)?e:ln(e&&e.provide),r=NV(e);if(!ta(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Ko(void 0,uh,!0),i.factory=()=>sy(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ee(null);try{return n.value===uh&&(n.value=AV,n.value=n.factory()),typeof n.value=="object"&&n.value&&xV(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ln(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function cy(t){let e=jh(t),n=e!==null?e.factory:Ts(t);if(n!==null)return n;if(t instanceof j)throw new K(204,!1);if(t instanceof Function)return RV(t);throw new K(204,!1)}function RV(t){if(t.length>0)throw new K(204,!1);let n=BL(t);return n!==null?()=>n.factory(t):()=>new t}function NV(t){if(yS(t))return Ko(void 0,t.useValue);{let e=_S(t);return Ko(e,uh)}}function _S(t,e,n){let r;if(ta(t)){let i=ln(t);return Ts(i)||cy(i)}else if(yS(t))r=()=>ln(t.useValue);else if(DV(t))r=()=>t.useFactory(...sy(t.deps||[]));else if(bV(t))r=()=>ne(ln(t.useExisting));else{let i=ln(t&&(t.useClass||t.provide));if(MV(t))r=()=>new i(...sy(t.deps));else return Ts(i)||cy(i)}return r}function Ko(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function MV(t){return!!t.deps}function xV(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function PV(t){return typeof t=="function"||typeof t=="object"&&t instanceof j}function uy(t,e){for(let n of t)Array.isArray(n)?uy(n,e):n&&J0(n)?uy(n.\u0275providers,e):e(n)}function ei(t,e){t instanceof cu&&t.assertNotDestroyed();let n,r=ki(t),i=vn(void 0);try{return e()}finally{ki(r),vn(i)}}function vS(){return X0()!==void 0||XL()!=null}function Hh(t){if(!vS())throw new K(-203,!1)}function kV(t){return typeof t=="function"}var ti=0,me=1,ie=2,dn=3,sr=4,or=5,vh=6,Ih=7,$n=8,na=9,Qr=10,Nt=11,uu=12,v0=13,ua=14,Ar=15,ra=16,Qo=17,ia=18,qh=19,IS=20,Oi=21,lh=22,jn=23,Hn=25,wS=1;var Ds=7,wh=8,Eh=9,Mn=10,Ch=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ch||{});function Fi(t){return Array.isArray(t)&&typeof t[wS]=="object"}function ni(t){return Array.isArray(t)&&t[wS]===!0}function ES(t){return(t.flags&4)!==0}function Gh(t){return t.componentOffset>-1}function n_(t){return(t.flags&1)===1}function Vi(t){return!!t.template}function ly(t){return(t[ie]&512)!==0}var dy=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function CS(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ri(){return TS}function TS(t){return t.type.prototype.ngOnChanges&&(t.setInput=FV),OV}ri.ngInherit=!0;function OV(){let t=DS(this),e=t?.current;if(e){let n=t.previous;if(n===Xo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function FV(t,e,n,r,i){let s=this.declaredInputs[r],o=DS(t)||LV(t,{previous:Xo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new dy(l&&l.currentValue,n,c===Xo),CS(t,e,i,n)}var bS="__ngSimpleChanges__";function DS(t){return t[bS]||null}function LV(t,e){return t[bS]=e}var I0=null;var br=function(t,e,n){I0?.(t,e,n)},VV="svg",UV="math";function Rr(t){for(;Array.isArray(t);)t=t[ti];return t}function SS(t,e){return Rr(e[t])}function qn(t,e){return Rr(e[t.index])}function r_(t,e){return t.data[e]}function jV(t,e){return t[e]}function Bi(t,e){let n=e[t];return Fi(n)?n:n[ti]}function i_(t){return(t[ie]&128)===128}function BV(t){return ni(t[dn])}function Th(t,e){return e==null?null:t[e]}function AS(t){t[Qo]=0}function RS(t){t[ie]&1024||(t[ie]|=1024,i_(t)&&Wh(t))}function $V(t,e){for(;t>0;)e=e[ua],t--;return e}function zh(t){return!!(t[ie]&9216||t[jn]?.dirty)}function hy(t){t[Qr].changeDetectionScheduler?.notify(8),t[ie]&64&&(t[ie]|=1024),zh(t)&&Wh(t)}function Wh(t){t[Qr].changeDetectionScheduler?.notify(0);let e=Ss(t);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!i_(e)));)e=Ss(e)}function NS(t,e){if((t[ie]&256)===256)throw new K(911,!1);t[Oi]===null&&(t[Oi]=[]),t[Oi].push(e)}function HV(t,e){if(t[Oi]===null)return;let n=t[Oi].indexOf(e);n!==-1&&t[Oi].splice(n,1)}function Ss(t){let e=t[dn];return ni(e)?e[dn]:e}var _e={lFrame:US(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var MS=!1;function qV(){return _e.lFrame.elementDepthCount}function GV(){_e.lFrame.elementDepthCount++}function zV(){_e.lFrame.elementDepthCount--}function xS(){return _e.bindingsEnabled}function WV(){return _e.skipHydrationRootTNode!==null}function KV(t){return _e.skipHydrationRootTNode===t}function QV(){_e.skipHydrationRootTNode=null}function Oe(){return _e.lFrame.lView}function wn(){return _e.lFrame.tView}function Os(t){return _e.lFrame.contextLView=t,t[$n]}function Fs(t){return _e.lFrame.contextLView=null,t}function En(){let t=PS();for(;t!==null&&t.type===64;)t=t.parent;return t}function PS(){return _e.lFrame.currentTNode}function YV(){let t=_e.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function gu(t,e){let n=_e.lFrame;n.currentTNode=t,n.isParent=e}function kS(){return _e.lFrame.isParent}function ZV(){_e.lFrame.isParent=!1}function OS(){return MS}function w0(t){MS=t}function s_(){let t=_e.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JV(t){return _e.lFrame.bindingIndex=t}function mu(){return _e.lFrame.bindingIndex++}function XV(t){let e=_e.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function eU(){return _e.lFrame.inI18n}function tU(t,e){let n=_e.lFrame;n.bindingIndex=n.bindingRootIndex=t,fy(e)}function nU(){return _e.lFrame.currentDirectiveIndex}function fy(t){_e.lFrame.currentDirectiveIndex=t}function rU(t){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function FS(t){_e.lFrame.currentQueryIndex=t}function iU(t){let e=t[me];return e.type===2?e.declTNode:e.type===1?t[or]:null}function LS(t,e,n){if(n&ge.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ge.Host);)if(i=iU(s),i===null||(s=s[ua],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=_e.lFrame=VS();return r.currentTNode=e,r.lView=t,!0}function o_(t){let e=VS(),n=t[me];_e.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function VS(){let t=_e.lFrame,e=t===null?null:t.child;return e===null?US(t):e}function US(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function jS(){let t=_e.lFrame;return _e.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var BS=jS;function a_(){let t=jS();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function sU(t){return(_e.lFrame.contextLView=$V(t,_e.lFrame.contextLView))[$n]}function la(){return _e.lFrame.selectedIndex}function As(t){_e.lFrame.selectedIndex=t}function c_(){let t=_e.lFrame;return r_(t.tView,t.selectedIndex)}function oU(){return _e.lFrame.currentNamespace}var $S=!0;function u_(){return $S}function l_(t){$S=t}function aU(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=TS(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function d_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function dh(t,e,n){HS(t,e,3,n)}function hh(t,e,n,r){(t[ie]&3)===n&&HS(t,e,n,r)}function zm(t,e){let n=t[ie];(n&3)===e&&(n&=16383,n+=1,t[ie]=n)}function HS(t,e,n,r){let i=r!==void 0?t[Qo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Qo]+=65536),(a<s||s==-1)&&(cU(t,n,e,c),t[Qo]=(t[Qo]&4294901760)+c+2),c++}function E0(t,e){br(4,t,e);let n=Ee(null);try{e.call(t)}finally{Ee(n),br(5,t,e)}}function cU(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ie]>>14<t[Qo]>>16&&(t[ie]&3)===e&&(t[ie]+=16384,E0(a,s)):E0(a,s)}var Jo=-1,Rs=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function uU(t){return t instanceof Rs}function lU(t){return(t.flags&8)!==0}function dU(t){return(t.flags&16)!==0}var Wm={},py=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Bh(r);let i=this.injector.get(e,Wm,r);return i!==Wm||n===Wm?i:this.parentInjector.get(e,n,r)}};function qS(t){return t!==Jo}function bh(t){return t&32767}function hU(t){return t>>16}function Dh(t,e){let n=hU(t),r=e;for(;n>0;)r=r[ua],n--;return r}var gy=!0;function Sh(t){let e=gy;return gy=t,e}var fU=256,GS=fU-1,zS=5,pU=0,Dr={};function gU(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(su)&&(r=n[su]),r==null&&(r=n[su]=pU++);let i=r&GS,s=1<<i;e.data[t+(i>>zS)]|=s}function Ah(t,e){let n=WS(t,e);if(n!==-1)return n;let r=e[me];r.firstCreatePass&&(t.injectorIndex=e.length,Km(r.data,t),Km(e,null),Km(r.blueprint,null));let i=h_(t,e),s=t.injectorIndex;if(qS(i)){let o=bh(i),a=Dh(i,e),c=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Km(t,e){t.push(0,0,0,0,0,0,0,0,e)}function WS(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function h_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=JS(i),r===null)return Jo;if(n++,i=i[ua],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Jo}function my(t,e,n){gU(t,e,n)}function KS(t,e,n){if(n&ge.Optional||t!==void 0)return t;Zy(e,"NodeInjector")}function QS(t,e,n,r){if(n&ge.Optional&&r===void 0&&(r=null),!(n&(ge.Self|ge.Host))){let i=t[na],s=vn(void 0);try{return i?i.get(e,r,n&ge.Optional):eS(e,r,n&ge.Optional)}finally{vn(s)}}return KS(r,e,n)}function YS(t,e,n,r=ge.Default,i){if(t!==null){if(e[ie]&2048&&!(r&ge.Self)){let o=IU(t,e,n,r,Dr);if(o!==Dr)return o}let s=ZS(t,e,n,r,Dr);if(s!==Dr)return s}return QS(e,n,r,i)}function ZS(t,e,n,r,i){let s=_U(n);if(typeof s=="function"){if(!LS(e,t,r))return r&ge.Host?KS(i,n,r):QS(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ge.Optional))Zy(n);else return o}finally{BS()}}else if(typeof s=="number"){let o=null,a=WS(t,e),c=Jo,l=r&ge.Host?e[Ar][or]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?h_(t,e):e[a+8],c===Jo||!T0(r,!1)?a=-1:(o=e[me],a=bh(c),e=Dh(c,e)));a!==-1;){let d=e[me];if(C0(s,a,d.data)){let f=mU(a,e,n,o,r,l);if(f!==Dr)return f}c=e[a+8],c!==Jo&&T0(r,e[me].data[a+8]===l)&&C0(s,a,e)?(o=d,a=bh(c),e=Dh(c,e)):a=-1}}return i}function mU(t,e,n,r,i,s){let o=e[me],a=o.data[t+8],c=r==null?Gh(a)&&gy:r!=o&&(a.type&3)!==0,l=i&ge.Host&&s===a,d=yU(a,o,n,c,l);return d!==null?sa(e,o,d,a):Dr}function yU(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let I=o[y];if(y<c&&n===I||y>=c&&I.type===n)return y}if(i){let y=o[c];if(y&&Vi(y)&&y.type===n)return c}return null}function sa(t,e,n,r){let i=t[n],s=e.data;if(uU(i)){let o=i;o.resolving&&KL(WL(s[n]));let a=Sh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?vn(o.injectImpl):null,d=LS(t,r,ge.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&aU(n,s[n],e)}finally{l!==null&&vn(l),Sh(a),o.resolving=!1,BS()}}return i}function _U(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(su)?t[su]:void 0;return typeof e=="number"?e>=0?e&GS:vU:e}function C0(t,e,n){let r=1<<t;return!!(n[e+(t>>zS)]&r)}function T0(t,e){return!(t&ge.Self)&&!(t&ge.Host&&e)}var Cs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return YS(this._tNode,this._lView,e,Bh(r),n)}};function vU(){return new Cs(En(),Oe())}function $i(t){return fu(()=>{let e=t.prototype.constructor,n=e[gh]||yy(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[gh]||yy(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function yy(t){return K0(t)?()=>{let e=yy(ln(t));return e&&e()}:Ts(t)}function IU(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ie]&2048&&!(o[ie]&512);){let a=ZS(s,o,n,r|ge.Self,Dr);if(a!==Dr)return a;let c=s.parent;if(!c){let l=o[IS];if(l){let d=l.get(n,Dr,r);if(d!==Dr)return d}c=JS(o),o=o[ua]}s=c}return i}function JS(t){let e=t[me],n=e.type;return n===2?e.declTNode:n===1?t[or]:null}function b0(t,e=null,n=null,r){let i=XS(t,e,n,r);return i.resolveInjectorInitializers(),i}function XS(t,e=null,n=null,r,i=new Set){let s=[n||Un,CV(t)];return r=r||(typeof t=="object"?void 0:In(t)),new cu(s,e||t_(),r||null,i)}var ve=class t{static{this.THROW_IF_NOT_FOUND=ou}static{this.NULL=new _h}static create(e,n){if(Array.isArray(e))return b0({name:""},n,e,"");{let r=e.name??"";return b0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:t,providedIn:"any",factory:()=>ne(iS)})}static{this.__NG_ELEMENT_ID__=-1}};var wU=new j("");wU.__NG_ELEMENT_ID__=t=>{let e=En();if(e===null)throw new K(204,!1);if(e.type&2)return e.value;if(t&ge.Optional)return null;throw new K(204,!1)};var EU="ngOriginalError";function Qm(t){return t[EU]}var eA=!0,da=(()=>{class t{static{this.__NG_ELEMENT_ID__=CU}static{this.__NG_ENV_ID__=n=>n}}return t})(),_y=class extends da{constructor(e){super(),this._lView=e}onDestroy(e){return NS(this._lView,e),()=>HV(this._lView,e)}};function CU(){return new _y(Oe())}var Ls=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ut(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})();var vy=class extends et{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,vS()&&(this.destroyRef=M(da,{optional:!0})??void 0,this.pendingTasks=M(Ls,{optional:!0})??void 0)}emit(e){let n=Ee(null);try{super.next(e)}finally{Ee(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ut&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Et=vy;function Rh(...t){}function tA(t){let e,n;function r(){t=Rh;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function D0(t){return queueMicrotask(()=>t()),()=>{t=Rh}}var f_="isAngularZone",Nh=f_+"_ID",TU=0,te=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Et(!1),this.onMicrotaskEmpty=new Et(!1),this.onStable=new Et(!1),this.onError=new Et(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=eA}=e;if(typeof Zone>"u")throw new K(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,SU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(f_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new K(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new K(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,bU,Rh,Rh);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},bU={};function p_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function DU(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){tA(()=>{t.callbackScheduled=!1,Iy(t),t.isCheckStableRunning=!0,p_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Iy(t)}function SU(t){let e=()=>{DU(t)},n=TU++;t._inner=t._inner.fork({name:"angular",properties:{[f_]:!0,[Nh]:n,[Nh+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(AU(c))return r.invokeTask(s,o,a,c);try{return S0(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),A0(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return S0(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!RU(c)&&e(),A0(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,Iy(t),p_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function Iy(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function S0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function A0(t){t._nesting--,p_(t)}var wy=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Et,this.onMicrotaskEmpty=new Et,this.onStable=new Et,this.onError=new Et}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function AU(t){return nA(t,"__ignore_ng_zone__")}function RU(t){return nA(t,"__scheduler_tick__")}function nA(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Nr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Qm(e);for(;n&&Qm(n);)n=Qm(n);return n||null}},NU=new j("",{providedIn:"root",factory:()=>{let t=M(te),e=M(Nr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function MU(){return Kh(En(),Oe())}function Kh(t,e){return new Hi(qn(t,e))}var Hi=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=MU}}return t})();function rA(t){return(t.flags&128)===128}var iA=new Map,xU=0;function PU(){return xU++}function kU(t){iA.set(t[qh],t)}function Ey(t){iA.delete(t[qh])}var R0="__ngContext__";function Ns(t,e){Fi(e)?(t[R0]=e[qh],kU(e)):t[R0]=e}function sA(t){return aA(t[uu])}function oA(t){return aA(t[sr])}function aA(t){for(;t!==null&&!ni(t);)t=t[sr];return t}var Cy;function cA(t){Cy=t}function OU(){if(Cy!==void 0)return Cy;if(typeof document<"u")return document;throw new K(210,!1)}var g_=new j("",{providedIn:"root",factory:()=>FU}),FU="ng",m_=new j(""),ar=new j("",{providedIn:"platform",factory:()=>"unknown"});var y_=new j("",{providedIn:"root",factory:()=>OU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var LU="h",VU="b";var UU=()=>null;function __(t,e,n=!1){return UU(t,e,n)}var uA=!1,jU=new j("",{providedIn:"root",factory:()=>uA});var Ty=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${LL})`}};function v_(t){return t instanceof Ty?t.changingThisBreaksApplicationSecurity:t}function lA(t){return t instanceof Function?t():t}var Yr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Yr||{}),BU;function I_(t,e){return BU(t,e)}function Yo(t,e,n,r,i){if(r!=null){let s,o=!1;ni(r)?s=r:Fi(r)&&(o=!0,r=r[ti]);let a=Rr(r);t===0&&n!==null?i==null?pA(e,n,a):xh(e,n,a,i||null,!0):t===1&&n!==null?xh(e,n,a,i||null,!0):t===2?nj(e,a,o):t===3&&e.destroyNode(a),s!=null&&ij(e,t,s,n,i)}}function $U(t,e){return t.createText(e)}function HU(t,e,n){t.setValue(e,n)}function dA(t,e,n){return t.createElement(e,n)}function qU(t,e){hA(t,e),e[ti]=null,e[or]=null}function GU(t,e,n,r,i,s){r[ti]=i,r[or]=e,Qh(t,r,n,1,i,s)}function hA(t,e){e[Qr].changeDetectionScheduler?.notify(9),Qh(t,e,e[Nt],2,null,null)}function zU(t){let e=t[uu];if(!e)return Ym(t[me],t);for(;e;){let n=null;if(Fi(e))n=e[uu];else{let r=e[Mn];r&&(n=r)}if(!n){for(;e&&!e[sr]&&e!==t;)Fi(e)&&Ym(e[me],e),e=e[dn];e===null&&(e=t),Fi(e)&&Ym(e[me],e),n=e&&e[sr]}e=n}}function WU(t,e,n,r){let i=Mn+r,s=n.length;r>0&&(n[i-1][sr]=e),r<s-Mn?(e[sr]=n[i],rS(n,Mn+r,e)):(n.push(e),e[sr]=null),e[dn]=n;let o=e[ra];o!==null&&n!==o&&fA(o,e);let a=e[ia];a!==null&&a.insertView(t),hy(e),e[ie]|=128}function fA(t,e){let n=t[Eh],r=e[dn];if(Fi(r))t[ie]|=Ch.HasTransplantedViews;else{let i=r[dn][Ar];e[Ar]!==i&&(t[ie]|=Ch.HasTransplantedViews)}n===null?t[Eh]=[e]:n.push(e)}function w_(t,e){let n=t[Eh],r=n.indexOf(e);n.splice(r,1)}function Mh(t,e){if(t.length<=Mn)return;let n=Mn+e,r=t[n];if(r){let i=r[ra];i!==null&&i!==t&&w_(i,r),e>0&&(t[n-1][sr]=r[sr]);let s=yh(t,Mn+e);qU(r[me],r);let o=s[ia];o!==null&&o.detachView(s[me]),r[dn]=null,r[sr]=null,r[ie]&=-129}return r}function E_(t,e){if(!(e[ie]&256)){let n=e[Nt];n.destroyNode&&Qh(t,e,n,3,null,null),zU(e)}}function Ym(t,e){if(e[ie]&256)return;let n=Ee(null);try{e[ie]&=-129,e[ie]|=256,e[jn]&&Sd(e[jn]),QU(t,e),KU(t,e),e[me].type===1&&e[Nt].destroy();let r=e[ra];if(r!==null&&ni(e[dn])){r!==e[dn]&&w_(r,e);let i=e[ia];i!==null&&i.detachView(t)}Ey(e)}finally{Ee(n)}}function KU(t,e){let n=t.cleanup,r=e[Ih];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Ih]=null);let i=e[Oi];if(i!==null){e[Oi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function QU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Rs)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];br(4,a,c);try{c.call(a)}finally{br(5,a,c)}}else{br(4,i,s);try{s.call(i)}finally{br(5,i,s)}}}}}function YU(t,e,n){return ZU(t,e.parent,n)}function ZU(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[ti];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Sr.None||s===Sr.Emulated)return null}return qn(r,n)}}function xh(t,e,n,r,i){t.insertBefore(e,n,r,i)}function pA(t,e,n){t.appendChild(e,n)}function N0(t,e,n,r,i){r!==null?xh(t,e,n,r,i):pA(t,e,n)}function gA(t,e){return t.parentNode(e)}function JU(t,e){return t.nextSibling(e)}function XU(t,e,n){return tj(t,e,n)}function ej(t,e,n){return t.type&40?qn(t,n):null}var tj=ej,M0;function C_(t,e,n,r){let i=YU(t,r,e),s=e[Nt],o=r.parent||e[or],a=XU(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)N0(s,i,n[c],a,!1);else N0(s,i,n,a,!1);M0!==void 0&&M0(s,r,e,n,i)}function ru(t,e){if(e!==null){let n=e.type;if(n&3)return qn(e,t);if(n&4)return by(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ru(t,r);{let i=t[e.index];return ni(i)?by(-1,i):Rr(i)}}else{if(n&128)return ru(t,e.next);if(n&32)return I_(e,t)()||Rr(t[e.index]);{let r=mA(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Ss(t[Ar]);return ru(i,r)}else return ru(t,e.next)}}}return null}function mA(t,e){if(e!==null){let r=t[Ar][or],i=e.projection;return r.projection[i]}return null}function by(t,e){let n=Mn+t+1;if(n<e.length){let r=e[n],i=r[me].firstChild;if(i!==null)return ru(r,i)}return e[Ds]}function nj(t,e,n){t.removeChild(null,e,n)}function T_(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Ns(Rr(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)T_(t,e,n.child,r,i,s,!1),Yo(e,t,i,a,s);else if(c&32){let l=I_(n,r),d;for(;d=l();)Yo(e,t,i,d,s);Yo(e,t,i,a,s)}else c&16?rj(t,e,r,n,i,s):Yo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Qh(t,e,n,r,i,s){T_(n,r,t.firstChild,e,i,s,!1)}function rj(t,e,n,r,i,s){let o=n[Ar],c=o[or].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Yo(e,t,i,d,s)}else{let l=c,d=o[dn];rA(r)&&(l.flags|=128),T_(t,e,l,d,i,s,!0)}}function ij(t,e,n,r,i){let s=n[Ds],o=Rr(n);s!==o&&Yo(e,t,r,s,i);for(let a=Mn;a<n.length;a++){let c=n[a];Qh(c[me],c,t,e,r,s)}}function sj(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Yr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Yr.Important),t.setStyle(n,r,i,s))}}function oj(t,e,n){t.setAttribute(e,"style",n)}function yA(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function _A(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&oy(t,e,r),i!==null&&yA(t,e,i),s!==null&&oj(t,e,s)}var qi={};function J(t=1){vA(wn(),Oe(),la()+t,!1)}function vA(t,e,n,r){if(!r)if((e[ie]&3)===3){let s=t.preOrderCheckHooks;s!==null&&dh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&hh(e,s,0,n)}As(n)}function Ne(t,e=ge.Default){let n=Oe();if(n===null)return ne(t,e);let r=En();return YS(r,n,ln(t),e)}function IA(t,e,n,r,i,s){let o=Ee(null);try{let a=null;i&Li.SignalBased&&(a=e[r][Cr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Li.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):CS(e,a,r,s)}finally{Ee(o)}}function aj(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)As(~i);else{let s=i,o=n[++r],a=n[++r];tU(o,s);let c=e[s];a(2,c)}}}finally{As(-1)}}function Yh(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[ti]=i,f[ie]=r|4|128|8|64,(l!==null||t&&t[ie]&2048)&&(f[ie]|=2048),AS(f),f[dn]=f[ua]=t,f[$n]=n,f[Qr]=o||t&&t[Qr],f[Nt]=a||t&&t[Nt],f[na]=c||t&&t[na]||null,f[or]=s,f[qh]=PU(),f[vh]=d,f[IS]=l,f[Ar]=e.type==2?t[Ar]:f,f}function Zh(t,e,n,r,i){let s=t.data[e];if(s===null)s=cj(t,e,n,r,i),eU()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=YV();s.injectorIndex=o===null?-1:o.injectorIndex}return gu(s,!0),s}function cj(t,e,n,r,i){let s=PS(),o=kS(),a=o?s:s&&s.parent,c=t.data[e]=fj(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function wA(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function EA(t,e,n,r,i){let s=la(),o=r&2;try{As(-1),o&&e.length>Hn&&vA(t,e,Hn,!1),br(o?2:0,i),n(r,i)}finally{As(s),br(o?3:1,i)}}function CA(t,e,n){if(ES(e)){let r=Ee(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{Ee(r)}}}function TA(t,e,n){xS()&&(vj(t,e,n,qn(n,e)),(n.flags&64)===64&&NA(t,e,n))}function bA(t,e,n=qn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function DA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=b_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function b_(t,e,n,r,i,s,o,a,c,l,d){let f=Hn+r,g=f+i,y=uj(f,g),I=typeof l=="function"?l():l;return y[me]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:I,incompleteFirstPass:!1,ssrId:d}}function uj(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:qi);return n}function lj(t,e,n,r){let s=r.get(jU,uA)||n===Sr.ShadowDom,o=t.selectRootElement(e,s);return dj(o),o}function dj(t){hj(t)}var hj=()=>null;function fj(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return WV()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function x0(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Li.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?P0(r,n,l,a,c):P0(r,n,l,a)}return r}function P0(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function pj(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,y=g?g.inputs:null,I=g?g.outputs:null;c=x0(0,f.inputs,d,c,y),l=x0(1,f.outputs,d,l,I);let R=c!==null&&o!==null&&!Xy(e)?Nj(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function gj(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function SA(t,e,n,r,i,s,o,a){let c=qn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(D_(t,n,d,r,i),Gh(e)&&mj(n,e.index)):e.type&3?(r=gj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function mj(t,e){let n=Bi(e,t);n[ie]&16||(n[ie]|=64)}function AA(t,e,n,r){if(xS()){let i=r===null?null:{"":-1},s=wj(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&RA(t,e,n,o,i,a),i&&Ej(n,r,i)}n.mergedAttrs=au(n.mergedAttrs,n.attrs)}function RA(t,e,n,r,i,s){for(let l=0;l<r.length;l++)my(Ah(n,e),t,r[l].type);Tj(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=wA(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=au(n.mergedAttrs,d.hostAttrs),bj(t,n,e,c,d),Cj(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}pj(t,n,s)}function yj(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;_j(o)!=a&&o.push(a),o.push(n,r,s)}}function _j(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function vj(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Gh(n)&&Dj(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Ah(n,e),Ns(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=sa(e,t,a,n);if(Ns(l,e),o!==null&&Rj(e,a-i,l,c,n,o),Vi(c)){let d=Bi(n.index,e);d[$n]=sa(e,t,a,n)}}}function NA(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=nU();try{As(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];fy(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Ij(c,l)}}finally{As(-1),fy(o)}}function Ij(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function wj(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(pV(e,o.selectors,!1))if(r||(r=[]),Vi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Dy(t,e,c)}else r.unshift(o),Dy(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Dy(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ej(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new K(-301,!1);r.push(e[i],s)}}}function Cj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Vi(e)&&(n[""]=t)}}function Tj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function bj(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Ts(i.type,!0)),o=new Rs(s,Vi(i),Ne);t.blueprint[r]=o,n[r]=o,yj(t,e,r,wA(t,n,i.hostVars,qi),i)}function Dj(t,e,n){let r=qn(e,t),i=DA(n),s=t[Qr].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Jh(t,Yh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Sj(t,e,n,r,i,s){let o=qn(t,e);Aj(e[Nt],o,s,t.value,n,r,i)}function Aj(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Yy(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function Rj(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];IA(r,n,c,l,d,f)}}function Nj(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function MA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function xA(t,e){let n=t.contentQueries;if(n!==null){let r=Ee(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];FS(s),a.contentQueries(2,e[o],o)}}}finally{Ee(r)}}}function Jh(t,e){return t[uu]?t[v0][sr]=e:t[uu]=e,t[v0]=e,e}function Sy(t,e,n){FS(0);let r=Ee(null);try{e(t,n)}finally{Ee(r)}}function Mj(t){return t[Ih]??=[]}function xj(t){return t.cleanup??=[]}function PA(t,e){let n=t[na],r=n?n.get(Nr,null):null;r&&r.handleError(e)}function D_(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];IA(d,l,r,a,c,i)}}function Pj(t,e,n){let r=SS(e,t);HU(t[Nt],r,n)}function kj(t,e){let n=Bi(e,t),r=n[me];Oj(r,n);let i=n[ti];i!==null&&n[vh]===null&&(n[vh]=__(i,n[na])),S_(r,n,n[$n])}function Oj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function S_(t,e,n){o_(e);try{let r=t.viewQuery;r!==null&&Sy(1,r,n);let i=t.template;i!==null&&EA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ia]?.finishViewCreation(t),t.staticContentQueries&&xA(t,e),t.staticViewQueries&&Sy(2,t.viewQuery,n);let s=t.components;s!==null&&Fj(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ie]&=-5,a_()}}function Fj(t,e){for(let n=0;n<e.length;n++)kj(t,e[n])}function kA(t,e,n,r){let i=Ee(null);try{let s=e.tView,a=t[ie]&4096?4096:16,c=Yh(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[ra]=l;let d=t[ia];return d!==null&&(c[ia]=d.createEmbeddedView(s)),S_(s,c,n),c}finally{Ee(i)}}function Lj(t,e){let n=Mn+e;if(n<t.length)return t[n]}function Ay(t,e){return!e||e.firstChild===null||rA(t)}function OA(t,e,n,r=!0){let i=e[me];if(WU(i,e,t,n),r){let o=by(n,t),a=e[Nt],c=gA(a,t[Ds]);c!==null&&GU(i,t[or],a,e,c,o)}let s=e[vh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Vj(t,e){let n=Mh(t,e);return n!==void 0&&E_(n[me],n),n}function Ph(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Rr(s)),ni(s)&&Uj(s,r);let o=n.type;if(o&8)Ph(t,e,n.child,r);else if(o&32){let a=I_(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=mA(e,n);if(Array.isArray(a))r.push(...a);else{let c=Ss(e[Ar]);Ph(c[me],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Uj(t,e){for(let n=Mn;n<t.length;n++){let r=t[n],i=r[me].firstChild;i!==null&&Ph(r[me],r,i,e)}t[Ds]!==t[ti]&&e.push(t[Ds])}var FA=[];function jj(t){return t[jn]??Bj(t)}function Bj(t){let e=FA.pop()??Object.create(Hj);return e.lView=t,e}function $j(t){t.lView[jn]!==t&&(t.lView=null,FA.push(t))}var Hj=ye(V({},xo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Wh(t.lView)},consumerOnSignalRead(){this.lView[jn]=this}});function qj(t){let e=t[jn]??Object.create(Gj);return e.lView=t,e}var Gj=ye(V({},xo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ss(t.lView);for(;e&&!LA(e[me]);)e=Ss(e);e&&RS(e)},consumerOnSignalRead(){this.lView[jn]=this}});function LA(t){return t.type!==2}var zj=100;function VA(t,e=!0,n=0){let r=t[Qr],i=r.rendererFactory,s=!1;s||i.begin?.();try{Wj(t,n)}catch(o){throw e&&PA(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Wj(t,e){let n=OS();try{w0(!0),Ry(t,e);let r=0;for(;zh(t);){if(r===zj)throw new K(103,!1);r++,Ry(t,1)}}finally{w0(n)}}function Kj(t,e,n,r){let i=e[ie];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Qr].inlineEffectRunner?.flush(),o_(e);let a=!0,c=null,l=null;s||(LA(t)?(l=jj(e),c=Qc(l)):CD()===null?(a=!1,l=qj(e),c=Qc(l)):e[jn]&&(Sd(e[jn]),e[jn]=null));try{AS(e),JV(t.bindingStartIndex),n!==null&&EA(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let y=t.preOrderCheckHooks;y!==null&&dh(e,y,null)}else{let y=t.preOrderHooks;y!==null&&hh(e,y,0,null),zm(e,0)}if(o||Qj(e),UA(e,0),t.contentQueries!==null&&xA(t,e),!s)if(d){let y=t.contentCheckHooks;y!==null&&dh(e,y)}else{let y=t.contentHooks;y!==null&&hh(e,y,1),zm(e,1)}aj(t,e);let f=t.components;f!==null&&BA(e,f,0);let g=t.viewQuery;if(g!==null&&Sy(2,g,r),!s)if(d){let y=t.viewCheckHooks;y!==null&&dh(e,y)}else{let y=t.viewHooks;y!==null&&hh(e,y,2),zm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[lh]){for(let y of e[lh])y();e[lh]=null}s||(e[ie]&=-73)}catch(d){throw s||Wh(e),d}finally{l!==null&&(bd(l,c),a&&$j(l)),a_()}}function UA(t,e){for(let n=sA(t);n!==null;n=oA(n))for(let r=Mn;r<n.length;r++){let i=n[r];jA(i,e)}}function Qj(t){for(let e=sA(t);e!==null;e=oA(e)){if(!(e[ie]&Ch.HasTransplantedViews))continue;let n=e[Eh];for(let r=0;r<n.length;r++){let i=n[r];RS(i)}}}function Yj(t,e,n){let r=Bi(e,t);jA(r,n)}function jA(t,e){i_(t)&&Ry(t,e)}function Ry(t,e){let r=t[me],i=t[ie],s=t[jn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Dd(s)),o||=!1,s&&(s.dirty=!1),t[ie]&=-9217,o)Kj(r,t,r.template,t[$n]);else if(i&8192){UA(t,1);let a=r.components;a!==null&&BA(t,a,1)}}function BA(t,e,n){for(let r=0;r<e.length;r++)Yj(t,e[r],n)}function A_(t,e){let n=OS()?64:1088;for(t[Qr].changeDetectionScheduler?.notify(e);t;){t[ie]|=n;let r=Ss(t);if(ly(t)&&!r)return t;t=r}return null}var Ms=class{get rootNodes(){let e=this._lView,n=e[me];return Ph(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$n]}set context(e){this._lView[$n]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[dn];if(ni(e)){let n=e[wh],r=n?n.indexOf(this):-1;r>-1&&(Mh(e,r),yh(n,r))}this._attachedToViewContainer=!1}E_(this._lView[me],this._lView)}onDestroy(e){NS(this._lView,e)}markForCheck(){A_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){hy(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,VA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new K(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ly(this._lView),n=this._lView[ra];n!==null&&!e&&w_(n,this._lView),hA(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new K(902,!1);this._appRef=e;let n=ly(this._lView),r=this._lView[ra];r!==null&&!n&&fA(r,this._lView),hy(this._lView)}},R_=(()=>{class t{static{this.__NG_ELEMENT_ID__=Xj}}return t})(),Zj=R_,Jj=class extends Zj{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=kA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Ms(i)}};function Xj(){return e2(En(),Oe())}function e2(t,e){return t.type&4?new Jj(e,t,Kh(t,e)):null}var Mte=new RegExp(`^(\\d+)*(${VU}|${LU})*(.*)`);var t2=()=>null;function Ny(t,e){return t2(t,e)}var oa=class{},Xh=new j("",{providedIn:"root",factory:()=>!1});var $A=new j(""),HA=new j(""),My=class{},kh=class{};function n2(t){let e=Error(`No component factory found for ${In(t)}.`);return e[r2]=t,e}var r2="ngComponent";var xy=class{resolveComponentFactory(e){throw n2(e)}},Ui=class{static{this.NULL=new xy}},aa=class{},Vs=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>i2()}}return t})();function i2(){let t=Oe(),e=En(),n=Bi(e.index,t);return(Fi(n)?n:t)[Nt]}var s2=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>null})}}return t})();function Py(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=u0(i,a);else if(s==2){let c=a,l=e[++o];r=u0(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Oh=class extends Ui{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=bs(e);return new lu(n,this.ngModule)}};function k0(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Li.None;e?n.push({propName:o,templateName:r,isSignal:(a&Li.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function o2(t){let e=t.toLowerCase();return e==="svg"?VV:e==="math"?UV:null}var lu=class extends kh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=k0(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return k0(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=_V(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Ee(null);try{i=i||this.ngModule;let o=i instanceof Bn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new py(e,o):e,c=a.get(aa,null);if(c===null)throw new K(407,!1);let l=a.get(s2,null),d=a.get(oa,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",I=r?lj(g,r,this.componentDef.encapsulation,a):dA(g,y,o2(y)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;I!==null&&(S=__(I,a,!0));let P=b_(0,null,null,1,0,null,null,null,null,null,null),$=Yh(null,P,null,R,null,null,f,g,a,null,S);o_($);let z,Z,Ve=null;try{let ee=this.componentDef,C,v=null;ee.findHostDirectiveDefs?(C=[],v=new Map,ee.findHostDirectiveDefs(ee,C,v),C.push(ee)):C=[ee];let w=a2($,I);Ve=c2(w,I,ee,C,$,f,g),Z=r_(P,Hn),I&&d2(g,ee,I,r),n!==void 0&&h2(Z,this.ngContentSelectors,n),z=l2(Ve,ee,C,v,$,[f2]),S_(P,$,null)}catch(ee){throw Ve!==null&&Ey(Ve),Ey($),ee}finally{a_()}return new ky(this.componentType,z,Kh(Z,$),$,Z)}finally{Ee(s)}}},ky=class extends My{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Ms(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;D_(s[me],s,i,e,n),this.previousInputValues.set(e,n);let o=Bi(this._tNode.index,s);A_(o,1)}}get injector(){return new Cs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function a2(t,e){let n=t[me],r=Hn;return t[r]=e,Zh(n,r,2,"#host",null)}function c2(t,e,n,r,i,s,o){let a=i[me];u2(r,t,e,o);let c=null;e!==null&&(c=__(e,i[na]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Yh(i,DA(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&Dy(a,t,r.length-1),Jh(i,f),i[t.index]=f}function u2(t,e,n,r){for(let i of t)e.mergedAttrs=au(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Py(e,e.mergedAttrs,!0),n!==null&&_A(r,n,e))}function l2(t,e,n,r,i,s){let o=En(),a=i[me],c=qn(o,i);RA(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=sa(i,a,f,o);Ns(g,i)}NA(a,i,o),c&&Ns(c,i);let l=sa(i,a,o.directiveStart+o.componentOffset,o);if(t[$n]=i[$n]=l,s!==null)for(let d of s)d(l,e);return CA(a,o,i),l}function d2(t,e,n,r){if(r)oy(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=vV(e.selectors[0]);i&&oy(t,n,i),s&&s.length>0&&yA(t,n,s.join(" "))}}function h2(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function f2(){let t=En();d_(Oe()[me],t)}var yu=(()=>{class t{static{this.__NG_ELEMENT_ID__=p2}}return t})();function p2(){let t=En();return m2(t,Oe())}var g2=yu,qA=class extends g2{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Kh(this._hostTNode,this._hostLView)}get injector(){return new Cs(this._hostTNode,this._hostLView)}get parentInjector(){let e=h_(this._hostTNode,this._hostLView);if(qS(e)){let n=Dh(e,this._hostLView),r=bh(e),i=n[me].data[r+8];return new Cs(i,n)}else return new Cs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=O0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Mn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Ny(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Ay(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!kV(e),a;if(o)a=n;else{let I=n||{};a=I.index,r=I.injector,i=I.projectableNodes,s=I.environmentInjector||I.ngModuleRef}let c=o?e:new lu(bs(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(Bn,null);R&&(s=R)}let d=bs(c.componentType??{}),f=Ny(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,Ay(this._hostTNode,f)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(BV(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[dn],l=new qA(c,c[or],c[dn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return OA(o,i,s,r),e.attachToViewContainerRef(),rS(Zm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=O0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Mh(this._lContainer,n);r&&(yh(Zm(this._lContainer),n),E_(r[me],r))}detach(e){let n=this._adjustIndex(e,-1),r=Mh(this._lContainer,n);return r&&yh(Zm(this._lContainer),n)!=null?new Ms(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function O0(t){return t[wh]}function Zm(t){return t[wh]||(t[wh]=[])}function m2(t,e){let n,r=e[t.index];return ni(r)?n=r:(n=MA(r,e,null,t),e[t.index]=n,Jh(e,n)),_2(n,e,t,r),new qA(n,t,e)}function y2(t,e){let n=t[Nt],r=n.createComment(""),i=qn(e,t),s=gA(n,i);return xh(n,s,r,JU(n,i),!1),r}var _2=w2,v2=()=>!1;function I2(t,e,n){return v2(t,e,n)}function w2(t,e,n,r){if(t[Ds])return;let i;n.type&8?i=Rr(r):i=y2(e,n),t[Ds]=i}var F0=new Set;function Us(t){F0.has(t)||(F0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function E2(t){return typeof t=="function"&&t[Cr]!==void 0}function pe(t,e){Us("NgSignals");let n=OD(t),r=n[Cr];return e?.equal&&(r.equal=e.equal),n.set=i=>Dm(r,i),n.update=i=>FD(r,i),n.asReadonly=C2.bind(n),n}function C2(){let t=this[Cr];if(t.readonlyFn===void 0){let e=()=>this();e[Cr]=t,t.readonlyFn=e}return t.readonlyFn}function GA(t){return E2(t)&&typeof t.set=="function"}function T2(t){return Object.getPrototypeOf(t.prototype).constructor}function cr(t){let e=T2(t.type),n=!0,r=[t];for(;e;){let i;if(Vi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new K(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=oh(t.inputs),o.inputTransforms=oh(t.inputTransforms),o.declaredInputs=oh(t.declaredInputs),o.outputs=oh(t.outputs);let a=i.hostBindings;a&&R2(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&S2(t,c),l&&A2(t,l),b2(t,i),UL(t.outputs,i.outputs),Vi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===cr&&(n=!1)}}e=Object.getPrototypeOf(e)}D2(r)}function b2(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function D2(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=au(i.hostAttrs,n=au(n,i.hostAttrs))}}function oh(t){return t===Xo?{}:t===Un?[]:t}function S2(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function A2(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function R2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var ji=class{},du=class{};var Oy=class extends ji{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Oh(this);let s=hS(e);this._bootstrapComponents=lA(s.bootstrap),this._r3Injector=XS(e,n,[{provide:ji,useValue:this},{provide:Ui,useValue:this.componentFactoryResolver},...r],In(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Fy=class extends du{constructor(e){super(),this.moduleType=e}create(e){return new Oy(this.moduleType,e,[])}};var Fh=class extends ji{constructor(e){super(),this.componentFactoryResolver=new Oh(this),this.instance=null;let n=new cu([...e.providers,{provide:ji,useValue:this},{provide:Ui,useValue:this.componentFactoryResolver}],e.parent||t_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function N_(t,e,n=null){return new Fh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function zA(t){return M2(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function N2(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function M2(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function WA(t,e,n){return t[e]=n}function Zr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function x2(t,e,n,r){let i=Zr(t,e,n);return Zr(t,e+1,r)||i}function P2(t){return(t.flags&32)===32}function k2(t,e,n,r,i,s,o,a,c){let l=e.consts,d=Zh(e,t,4,o||null,a||null);AA(e,n,d,Th(l,c)),d_(e,d);let f=d.tView=b_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function O2(t,e,n,r,i,s,o,a,c,l){let d=n+Hn,f=e.firstCreatePass?k2(d,e,t,r,i,s,o,a,c):e.data[d];gu(f,!1);let g=F2(e,t,f,n);u_()&&C_(e,t,g,f),Ns(g,t);let y=MA(g,t,g,f);return t[d]=y,Jh(t,y),I2(y,f,t),n_(f)&&TA(e,t,f),c!=null&&bA(t,f,l),f}function Ot(t,e,n,r,i,s,o,a){let c=Oe(),l=wn(),d=Th(l.consts,s);return O2(c,l,t,e,n,r,i,d,o,a),Ot}var F2=L2;function L2(t,e,n,r){return l_(!0),e[Nt].createComment("")}var iu=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(iu||{}),V2=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}}return t})(),L0=class t{constructor(){this.ngZone=M(te),this.scheduler=M(oa),this.errorHandler=M(Nr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[iu.EarlyRead,iu.Write,iu.MixedReadWrite,iu.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new t})}};function _u(t,e,n,r){let i=Oe(),s=mu();if(Zr(i,s,e)){let o=wn(),a=c_();Sj(a,i,t,e,n,r)}return _u}function U2(t,e,n,r){return Zr(t,mu(),n)?e+Yy(n)+r:qi}function ah(t,e){return t<<17|e<<2}function xs(t){return t>>17&32767}function j2(t){return(t&2)==2}function B2(t,e){return t&131071|e<<17}function Ly(t){return t|2}function ca(t){return(t&131068)>>2}function Jm(t,e){return t&-131069|e<<2}function $2(t){return(t&1)===1}function Vy(t){return t|1}function H2(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=xs(o),c=ca(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||pu(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=xs(t[a+1]);t[r+1]=ah(g,a),g!==0&&(t[g+1]=Jm(t[g+1],r)),t[a+1]=B2(t[a+1],r)}else t[r+1]=ah(a,0),a!==0&&(t[a+1]=Jm(t[a+1],r)),a=r;else t[r+1]=ah(c,0),a===0?a=r:t[c+1]=Jm(t[c+1],r),c=r;l&&(t[r+1]=Ly(t[r+1])),V0(t,d,r,!0),V0(t,d,r,!1),q2(e,d,t,r,s),o=ah(a,c),s?e.classBindings=o:e.styleBindings=o}function q2(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&pu(s,e)>=0&&(n[r+1]=Vy(n[r+1]))}function V0(t,e,n,r){let i=t[n+1],s=e===null,o=r?xs(i):ca(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];G2(c,e)&&(a=!0,t[o+1]=r?Vy(l):Ly(l)),o=r?xs(l):ca(l)}a&&(t[n+1]=r?Ly(i):Vy(i))}function G2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?pu(t,e)>=0:!1}function yt(t,e,n){let r=Oe(),i=mu();if(Zr(r,i,e)){let s=wn(),o=c_();SA(s,o,r,t,e,r[Nt],n,!1)}return yt}function U0(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";D_(t,n,s[o],o,r)}function ef(t,e,n){return KA(t,e,n,!1),ef}function tf(t,e){return KA(t,e,null,!0),tf}function KA(t,e,n,r){let i=Oe(),s=wn(),o=XV(2);if(s.firstUpdatePass&&W2(s,t,o,r),e!==qi&&Zr(i,o,e)){let a=s.data[la()];J2(s,a,i,i[Nt],t,i[o+1]=X2(e,n),r,o)}}function z2(t,e){return e>=t.expandoStartIndex}function W2(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[la()],o=z2(t,n);eB(s,r)&&e===null&&!o&&(e=!1),e=K2(i,s,e,r),H2(i,s,e,n,o,r)}}function K2(t,e,n,r){let i=rU(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Xm(null,t,e,n,r),n=hu(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Xm(i,t,e,n,r),s===null){let c=Q2(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Xm(null,t,e,c[1],r),c=hu(c,e.attrs,r),Y2(t,e,r,c))}else s=Z2(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function Q2(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ca(r)!==0)return t[xs(r)]}function Y2(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[xs(i)]=r}function Z2(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=hu(r,o,n)}return hu(r,e.attrs,n)}function Xm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=hu(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function hu(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),sV(t,o,n?!0:e[++s]))}return t===void 0?null:t}function J2(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=$2(l)?j0(c,e,n,i,ca(l),o):void 0;if(!Lh(d)){Lh(s)||j2(l)&&(s=j0(c,null,n,i,a,o));let f=SS(la(),n);sj(r,o,f,i,s)}}function j0(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===qi&&(g=f?Un:void 0);let y=f?qm(g,r):d===r?g:void 0;if(l&&!Lh(y)&&(y=qm(c,r)),Lh(y)&&(a=y,o))return a;let I=t[i+1];i=o?xs(I):ca(I)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=qm(c,r))}return a}function Lh(t){return t!==void 0}function X2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=In(v_(t)))),t}function eB(t,e){return(t.flags&(e?8:16))!==0}function jt(t,e){Us("NgControlFlow");let n=Oe(),r=mu(),i=n[r]!==qi?n[r]:-1,s=i!==-1?B0(n,Hn+i):void 0,o=0;if(Zr(n,r,t)){let a=Ee(null);try{if(s!==void 0&&Vj(s,o),t!==-1){let c=Hn+t,l=B0(n,c),d=tB(n[me],c),f=Ny(l,d.tView.ssrId),g=kA(n,d,e,{dehydratedView:f});OA(l,g,o,Ay(d,f))}}finally{Ee(a)}}else if(s!==void 0){let a=Lj(s,o);a!==void 0&&(a[$n]=e)}}function B0(t,e){return t[e]}function tB(t,e){return r_(t,e)}function nB(t,e,n,r,i,s){let o=e.consts,a=Th(o,i),c=Zh(e,t,2,r,a);return AA(e,n,c,Th(o,s)),c.attrs!==null&&Py(c,c.attrs,!1),c.mergedAttrs!==null&&Py(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function L(t,e,n,r){let i=Oe(),s=wn(),o=Hn+t,a=i[Nt],c=s.firstCreatePass?nB(o,s,i,e,n,r):s.data[o],l=rB(s,i,c,a,e,t);i[o]=l;let d=n_(c);return gu(c,!0),_A(a,l,c),!P2(c)&&u_()&&C_(s,i,l,c),qV()===0&&Ns(l,i),GV(),d&&(TA(s,i,c),CA(s,c,i)),r!==null&&bA(i,c),L}function F(){let t=En();kS()?ZV():(t=t.parent,gu(t,!1));let e=t;KV(e)&&QV(),zV();let n=wn();return n.firstCreatePass&&(d_(n,t),ES(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&lU(e)&&U0(n,e,Oe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&dU(e)&&U0(n,e,Oe(),e.stylesWithoutHost,!1),F}function Je(t,e,n,r){return L(t,e,n,r),F(),Je}var rB=(t,e,n,r,i,s)=>(l_(!0),dA(r,i,oU()));function nf(){return Oe()}var Es=void 0;function iB(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var sB=["en",[["a","p"],["AM","PM"],Es],[["AM","PM"],Es,Es],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Es,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Es,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Es,"{1} 'at' {0}",Es],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",iB],ey={};function Gn(t){let e=oB(t),n=$0(e);if(n)return n;let r=e.split("-")[0];if(n=$0(r),n)return n;if(r==="en")return sB;throw new K(701,!1)}function $0(t){return t in ey||(ey[t]=nu.ng&&nu.ng.common&&nu.ng.common.locales&&nu.ng.common.locales[t]),ey[t]}var _t=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(_t||{});function oB(t){return t.toLowerCase().replace(/_/g,"-")}var Vh="en-US";var aB=Vh;function cB(t){typeof t=="string"&&(aB=t.toLowerCase().replace(/_/g,"-"))}var uB=(t,e,n)=>{};function Mt(t,e,n,r){let i=Oe(),s=wn(),o=En();return QA(s,i,i[Nt],o,t,e,r),Mt}function lB(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Ih],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function QA(t,e,n,r,i,s,o){let a=n_(r),l=t.firstCreatePass&&xj(t),d=e[$n],f=Mj(e),g=!0;if(r.type&3||o){let R=qn(r,e),S=o?o(R):R,P=f.length,$=o?Z=>o(Rr(Z[r.index])):r.index,z=null;if(!o&&a&&(z=lB(t,e,i,r.index)),z!==null){let Z=z.__ngLastListenerFn__||z;Z.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,g=!1}else{s=q0(r,e,d,s),uB(R,i,s);let Z=n.listen(S,i,s);f.push(s,Z),l&&l.push(i,$,P,P+1)}}else s=q0(r,e,d,s);let y=r.outputs,I;if(g&&y!==null&&(I=y[i])){let R=I.length;if(R)for(let S=0;S<R;S+=2){let P=I[S],$=I[S+1],Ve=e[P][$].subscribe(s),ee=f.length;f.push(s,Ve),l&&l.push(i,r.index,ee,-(ee+1))}}}function H0(t,e,n,r){let i=Ee(null);try{return br(6,e,n),n(r)!==!1}catch(s){return PA(t,s),!1}finally{br(7,e,n),Ee(i)}}function q0(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Bi(t.index,e):e;A_(o,5);let a=H0(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=H0(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function nt(t=1){return sU(t)}function dB(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function H(t,e=""){let n=Oe(),r=wn(),i=t+Hn,s=r.firstCreatePass?Zh(r,i,1,e,null):r.data[i],o=hB(r,n,s,e,t);n[i]=o,u_()&&C_(r,n,o,s),gu(s,!1)}var hB=(t,e,n,r,i)=>(l_(!0),$U(e[Nt],r));function js(t){return Be("",t,""),js}function Be(t,e,n){let r=Oe(),i=U2(r,t,e,n);return i!==qi&&Pj(r,la(),i),Be}function M_(t,e,n){GA(e)&&(e=e());let r=Oe(),i=mu();if(Zr(r,i,e)){let s=wn(),o=c_();SA(s,o,r,t,e,r[Nt],n,!1)}return M_}function YA(t,e){let n=GA(t);return n&&t.set(e),n}function x_(t,e){let n=Oe(),r=wn(),i=En();return QA(r,n,n[Nt],i,t,e),x_}function fB(t,e,n){let r=wn();if(r.firstCreatePass){let i=Vi(t);Uy(n,r.data,r.blueprint,i,!0),Uy(e,r.data,r.blueprint,i,!1)}}function Uy(t,e,n,r,i){if(t=ln(t),Array.isArray(t))for(let s=0;s<t.length;s++)Uy(t[s],e,n,r,i);else{let s=wn(),o=Oe(),a=En(),c=ta(t)?t:ln(t.provide),l=_S(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(ta(t)||!t.multi){let y=new Rs(l,i,Ne),I=ny(c,e,i?d:d+g,f);I===-1?(my(Ah(a,o),s,c),ty(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[I]=y,o[I]=y)}else{let y=ny(c,e,d+g,f),I=ny(c,e,d,d+g),R=y>=0&&n[y],S=I>=0&&n[I];if(i&&!S||!i&&!R){my(Ah(a,o),s,c);let P=mB(i?gB:pB,n.length,i,r,l);!i&&S&&(n[I].providerFactory=P),ty(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=ZA(n[i?I:y],l,!i&&r);ty(s,t,y>-1?y:I,P)}!i&&r&&S&&n[I].componentProviders++}}}function ty(t,e,n,r){let i=ta(e),s=SV(e);if(i||s){let c=(s?ln(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function ZA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ny(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function pB(t,e,n,r){return jy(this.multi,[])}function gB(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=sa(n,n[me],this.providerFactory.index,r);s=a.slice(0,o),jy(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],jy(i,s);return s}function jy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function mB(t,e,n,r,i){let s=new Rs(t,n,Ne);return s.multi=[],s.index=e,s.componentProviders=0,ZA(s,i,r&&!n),s}function Bs(t,e=[]){return n=>{n.providersResolver=(r,i)=>fB(r,i?i(t):t,e)}}var yB=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=gS(!1,n.type),i=r.length>0?N_([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:t,providedIn:"environment",factory:()=>new t(ne(Bn))})}}return t})();function Yt(t){Us("NgStandalone"),t.getStandaloneInjector=e=>e.get(yB).getOrCreateStandaloneInjector(t)}function ur(t,e,n,r){return _B(Oe(),s_(),t,e,n,r)}function JA(t,e,n,r,i){return eR(Oe(),s_(),t,e,n,r,i)}function XA(t,e){let n=t[e];return n===qi?void 0:n}function _B(t,e,n,r,i,s){let o=e+n;return Zr(t,o,i)?WA(t,o+1,s?r.call(s,i):r(i)):XA(t,o+1)}function eR(t,e,n,r,i,s,o){let a=e+n;return x2(t,a,i,s)?WA(t,a+2,o?r.call(o,i,s):r(i,s)):XA(t,a+2)}function ha(t,e){let n=wn(),r,i=t+Hn;n.firstCreatePass?(r=vB(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=Ts(r.type,!0)),o,a=vn(Ne);try{let c=Sh(!1),l=s();return Sh(c),dB(n,Oe(),i,l),l}finally{vn(a)}}function vB(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function fa(t,e,n,r){let i=t+Hn,s=Oe(),o=jV(s,i);return IB(s,i)?eR(s,s_(),e,o.transform,n,r,o):o.transform(n,r)}function IB(t,e){return t[me].data[e].pure}var Jr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},tR=new Jr("18.2.13");var rf=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var nR=new j("");function $s(t){return!!t&&typeof t.then=="function"}function rR(t){return!!t&&typeof t.subscribe=="function"}var Gi=new j(""),iR=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=M(Gi,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if($s(s))n.push(s);else if(rR(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),P_=new j("");function wB(){kD(()=>{throw new K(600,!1)})}function EB(t){return t.isBoundToModule}var CB=10;function TB(t,e,n){try{let r=n();return $s(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Hs=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(NU),this.afterRenderManager=M(V2),this.zonelessEnabled=M(Xh),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new et,this.afterTick=new et,this.componentTypes=[],this.components=[],this.isStable=M(Ls).hasPendingTasks.pipe(W(n=>!n)),this._injector=M(Bn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof kh;if(!this._injector.get(iR).done){let g=!i&&dS(n),y=!1;throw new K(405,y)}let o;i?o=n:o=this._injector.get(Ui).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=EB(o)?void 0:this._injector.get(ji),c=r||o.selector,l=o.create(ve.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(nR,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),fh(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new K(101,!1);let n=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ee(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(aa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<CB;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)bB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>zh(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;fh(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(P_,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fh(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new K(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function fh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function bB(t,e,n,r){if(!n&&!zh(t))return;VA(t,e,n&&!r?0:1)}var By=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},k_=(()=>{class t{compileModuleSync(n){return new Fy(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=hS(n),s=lA(i.declarations).reduce((o,a)=>{let c=bs(a);return c&&o.push(new lu(c)),o},[]);return new By(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var DB=(()=>{class t{constructor(){this.zone=M(te),this.changeDetectionScheduler=M(oa),this.applicationRef=M(Hs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),SB=new j("",{factory:()=>!1});function sR({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new te(ye(V({},aR()),{scheduleInRootZone:n})),[{provide:te,useFactory:t},{provide:ea,multi:!0,useFactory:()=>{let r=M(DB,{optional:!0});return()=>r.initialize()}},{provide:ea,multi:!0,useFactory:()=>{let r=M(AB);return()=>{r.initialize()}}},e===!0?{provide:$A,useValue:!0}:[],{provide:HA,useValue:n??eA}]}function oR(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=sR({ngZoneFactory:()=>{let i=aR(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Us("NgZone_CoalesceEvent"),new te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return qe([{provide:SB,useValue:!0},{provide:Xh,useValue:!1},r])}function aR(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var AB=(()=>{class t{constructor(){this.subscription=new ut,this.initialized=!1,this.zone=M(te),this.pendingTasks=M(Ls)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var RB=(()=>{class t{constructor(){this.appRef=M(Hs),this.taskService=M(Ls),this.ngZone=M(te),this.zonelessEnabled=M(Xh),this.disableScheduling=M($A,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ut,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(HA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof wy||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?D0:tA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,D0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function NB(){return typeof $localize<"u"&&$localize.locale||Vh}var sf=new j("",{providedIn:"root",factory:()=>M(sf,ge.Optional|ge.SkipSelf)||NB()});var $y=new j("");function ch(t){return!t.moduleRef}function MB(t){let e=ch(t)?t.r3Injector:t.moduleRef.injector,n=e.get(te);return n.run(()=>{ch(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Nr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ch(t)){let s=()=>e.destroy(),o=t.platformInjector.get($y);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get($y);o.add(s),t.moduleRef.onDestroy(()=>{fh(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return TB(r,n,()=>{let s=e.get(iR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(sf,Vh);if(cB(o||Vh),ch(t)){let a=e.get(Hs);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return xB(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function xB(t,e){let n=t.injector.get(Hs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new K(-403,!1);e.push(t)}var ph=null;function PB(t=[],e){return ve.create({name:e,providers:[{provide:$h,useValue:"platform"},{provide:$y,useValue:new Set([()=>ph=null])},...t]})}function kB(t=[]){if(ph)return ph;let e=PB(t);return ph=e,wB(),OB(e),e}function OB(t){t.get(m_,null)?.forEach(n=>n())}var zi=(()=>{class t{static{this.__NG_ELEMENT_ID__=FB}}return t})();function FB(t){return LB(En(),Oe(),(t&16)===16)}function LB(t,e,n){if(Gh(t)&&!n){let r=Bi(t.index,e);return new Ms(r,r)}else if(t.type&175){let r=e[Ar];return new Ms(r,e)}return null}var Hy=class{constructor(){}supports(e){return zA(e)}create(e){return new qy(e)}},VB=(t,e)=>e,qy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||VB}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<G0(r,i,s)?n:r,a=G0(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<s.length?s[g]:s[g]=0,I=y+g;d<=I&&I<l&&(s[g]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!zA(e))throw new K(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,N2(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Gy(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Uh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Uh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gy=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},zy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Uh=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new zy,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function G0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function z0(){return new O_([new Hy])}var O_=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:z0})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||z0()),deps:[[t,new nS,new se]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new K(901,!1)}}return t})();function cR(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=kB(r),s=[sR({}),{provide:oa,useExisting:RB},...n||[]],o=new Fh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return MB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function vu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function rt(t,e){Us("NgSignals");let n=MD(t);return e?.equal&&(n[Cr].equal=e.equal),n}function zn(t){let e=Ee(null);try{return t()}finally{Ee(e)}}var UB=new j("",{providedIn:"root",factory:()=>M(jB)}),jB=(()=>{class t{static{this.\u0275prov=B({token:t,providedIn:"root",factory:()=>new Wy})}}return t})(),Wy=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=M(Ls),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},Ky=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=VD(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Nr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Iu(t,e){Us("NgSignals"),!e?.injector&&Hh(Iu);let n=e?.injector??M(ve),r=e?.manualCleanup!==!0?n.get(da):null,i=new Ky(n.get(UB),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(zi,null,{optional:!0});return!s||!(s._lView[ie]&8)?i.watcher.notify():(s._lView[lh]??=[]).push(i.watcher.notify),i}var pR=null;function oi(){return pR}function gR(t){pR??=t}var pf=class{};var Kn=new j(""),mR=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(HB),providedIn:"platform"})}}return t})();var HB=(()=>{class t extends mR{constructor(){super(),this._doc=M(Kn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oi().getBaseHref(this._doc)}onPopState(n){let r=oi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=oi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function yR(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function uR(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function qs(t){return t&&t[0]!=="?"?"?"+t:t}var yf=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(_R),providedIn:"root"})}}return t})(),qB=new j(""),_R=(()=>{class t extends yf{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(Kn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return yR(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+qs(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+qs(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+qs(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ne(mR),ne(qB,8))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wu=(()=>{class t{constructor(n){this._subject=new Et,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=WB(uR(lR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+qs(r))}normalize(n){return t.stripTrailingSlash(zB(this._basePath,lR(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qs(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+qs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=qs}static{this.joinWithSlash=yR}static{this.stripTrailingSlash=uR}static{this.\u0275fac=function(r){return new(r||t)(ne(yf))}}static{this.\u0275prov=B({token:t,factory:()=>GB(),providedIn:"root"})}}return t})();function GB(){return new wu(ne(yf))}function zB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function lR(t){return t.replace(/\/index.html$/,"")}function WB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var hn=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(hn||{}),$e=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}($e||{}),xn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(xn||{}),Wi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function KB(t){return Gn(t)[_t.LocaleId]}function QB(t,e,n){let r=Gn(t),i=[r[_t.DayPeriodsFormat],r[_t.DayPeriodsStandalone]],s=Wn(i,e);return Wn(s,n)}function YB(t,e,n){let r=Gn(t),i=[r[_t.DaysFormat],r[_t.DaysStandalone]],s=Wn(i,e);return Wn(s,n)}function ZB(t,e,n){let r=Gn(t),i=[r[_t.MonthsFormat],r[_t.MonthsStandalone]],s=Wn(i,e);return Wn(s,n)}function JB(t,e){let r=Gn(t)[_t.Eras];return Wn(r,e)}function of(t,e){let n=Gn(t);return Wn(n[_t.DateFormat],e)}function af(t,e){let n=Gn(t);return Wn(n[_t.TimeFormat],e)}function cf(t,e){let r=Gn(t)[_t.DateTimeFormat];return Wn(r,e)}function _f(t,e){let n=Gn(t),r=n[_t.NumberSymbols][e];if(typeof r>"u"){if(e===Wi.CurrencyDecimal)return n[_t.NumberSymbols][Wi.Decimal];if(e===Wi.CurrencyGroup)return n[_t.NumberSymbols][Wi.Group]}return r}function vR(t){if(!t[_t.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[_t.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function XB(t){let e=Gn(t);return vR(e),(e[_t.ExtraData][2]||[]).map(r=>typeof r=="string"?F_(r):[F_(r[0]),F_(r[1])])}function e$(t,e,n){let r=Gn(t);vR(r);let i=[r[_t.ExtraData][0],r[_t.ExtraData][1]],s=Wn(i,e)||[];return Wn(s,n)||[]}function Wn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function F_(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var t$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,uf={},n$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,si=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(si||{}),xe=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(xe||{}),Me=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Me||{});function r$(t,e,n,r){let i=h$(t);e=ii(n,e)||e;let o=[],a;for(;e;)if(a=n$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=wR(r,c),i=d$(i,r,!0));let l="";return o.forEach(d=>{let f=u$(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function gf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function ii(t,e){let n=KB(t);if(uf[n]??={},uf[n][e])return uf[n][e];let r="";switch(e){case"shortDate":r=of(t,xn.Short);break;case"mediumDate":r=of(t,xn.Medium);break;case"longDate":r=of(t,xn.Long);break;case"fullDate":r=of(t,xn.Full);break;case"shortTime":r=af(t,xn.Short);break;case"mediumTime":r=af(t,xn.Medium);break;case"longTime":r=af(t,xn.Long);break;case"fullTime":r=af(t,xn.Full);break;case"short":let i=ii(t,"shortTime"),s=ii(t,"shortDate");r=lf(cf(t,xn.Short),[i,s]);break;case"medium":let o=ii(t,"mediumTime"),a=ii(t,"mediumDate");r=lf(cf(t,xn.Medium),[o,a]);break;case"long":let c=ii(t,"longTime"),l=ii(t,"longDate");r=lf(cf(t,xn.Long),[c,l]);break;case"full":let d=ii(t,"fullTime"),f=ii(t,"fullDate");r=lf(cf(t,xn.Full),[d,f]);break}return r&&(uf[n][e]=r),r}function lf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function lr(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function i$(t,e){return lr(t,3).substring(0,e)}function Ct(t,e,n=0,r=!1,i=!1){return function(s,o){let a=s$(t,s);if((n>0||a>-n)&&(a+=n),t===xe.Hours)a===0&&n===-12&&(a=12);else if(t===xe.FractionalSeconds)return i$(a,e);let c=_f(o,Wi.MinusSign);return lr(a,e,c,r,i)}}function s$(t,e){switch(t){case xe.FullYear:return e.getFullYear();case xe.Month:return e.getMonth();case xe.Date:return e.getDate();case xe.Hours:return e.getHours();case xe.Minutes:return e.getMinutes();case xe.Seconds:return e.getSeconds();case xe.FractionalSeconds:return e.getMilliseconds();case xe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ge(t,e,n=hn.Format,r=!1){return function(i,s){return o$(i,s,t,e,n,r)}}function o$(t,e,n,r,i,s){switch(n){case Me.Months:return ZB(e,i,r)[t.getMonth()];case Me.Days:return YB(e,i,r)[t.getDay()];case Me.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=XB(e),d=e$(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,I]=g,R=o>=y.hours&&a>=y.minutes,S=o<I.hours||o===I.hours&&a<I.minutes;if(y.hours<I.hours){if(R&&S)return!0}else if(R||S)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return QB(e,i,r)[o<12?0:1];case Me.Eras:return JB(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function df(t){return function(e,n,r){let i=-1*r,s=_f(n,Wi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case si.Short:return(i>=0?"+":"")+lr(o,2,s)+lr(Math.abs(i%60),2,s);case si.ShortGMT:return"GMT"+(i>=0?"+":"")+lr(o,1,s);case si.Long:return"GMT"+(i>=0?"+":"")+lr(o,2,s)+":"+lr(Math.abs(i%60),2,s);case si.Extended:return r===0?"Z":(i>=0?"+":"")+lr(o,2,s)+":"+lr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var a$=0,ff=4;function c$(t){let e=gf(t,a$,1).getDay();return gf(t,0,1+(e<=ff?ff:ff+7)-e)}function IR(t){let e=t.getDay(),n=e===0?-3:ff-e;return gf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function L_(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=IR(n),o=c$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return lr(i,t,_f(r,Wi.MinusSign))}}function hf(t,e=!1){return function(n,r){let s=IR(n).getFullYear();return lr(s,t,_f(r,Wi.MinusSign),e)}}var V_={};function u$(t){if(V_[t])return V_[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ge(Me.Eras,$e.Abbreviated);break;case"GGGG":e=Ge(Me.Eras,$e.Wide);break;case"GGGGG":e=Ge(Me.Eras,$e.Narrow);break;case"y":e=Ct(xe.FullYear,1,0,!1,!0);break;case"yy":e=Ct(xe.FullYear,2,0,!0,!0);break;case"yyy":e=Ct(xe.FullYear,3,0,!1,!0);break;case"yyyy":e=Ct(xe.FullYear,4,0,!1,!0);break;case"Y":e=hf(1);break;case"YY":e=hf(2,!0);break;case"YYY":e=hf(3);break;case"YYYY":e=hf(4);break;case"M":case"L":e=Ct(xe.Month,1,1);break;case"MM":case"LL":e=Ct(xe.Month,2,1);break;case"MMM":e=Ge(Me.Months,$e.Abbreviated);break;case"MMMM":e=Ge(Me.Months,$e.Wide);break;case"MMMMM":e=Ge(Me.Months,$e.Narrow);break;case"LLL":e=Ge(Me.Months,$e.Abbreviated,hn.Standalone);break;case"LLLL":e=Ge(Me.Months,$e.Wide,hn.Standalone);break;case"LLLLL":e=Ge(Me.Months,$e.Narrow,hn.Standalone);break;case"w":e=L_(1);break;case"ww":e=L_(2);break;case"W":e=L_(1,!0);break;case"d":e=Ct(xe.Date,1);break;case"dd":e=Ct(xe.Date,2);break;case"c":case"cc":e=Ct(xe.Day,1);break;case"ccc":e=Ge(Me.Days,$e.Abbreviated,hn.Standalone);break;case"cccc":e=Ge(Me.Days,$e.Wide,hn.Standalone);break;case"ccccc":e=Ge(Me.Days,$e.Narrow,hn.Standalone);break;case"cccccc":e=Ge(Me.Days,$e.Short,hn.Standalone);break;case"E":case"EE":case"EEE":e=Ge(Me.Days,$e.Abbreviated);break;case"EEEE":e=Ge(Me.Days,$e.Wide);break;case"EEEEE":e=Ge(Me.Days,$e.Narrow);break;case"EEEEEE":e=Ge(Me.Days,$e.Short);break;case"a":case"aa":case"aaa":e=Ge(Me.DayPeriods,$e.Abbreviated);break;case"aaaa":e=Ge(Me.DayPeriods,$e.Wide);break;case"aaaaa":e=Ge(Me.DayPeriods,$e.Narrow);break;case"b":case"bb":case"bbb":e=Ge(Me.DayPeriods,$e.Abbreviated,hn.Standalone,!0);break;case"bbbb":e=Ge(Me.DayPeriods,$e.Wide,hn.Standalone,!0);break;case"bbbbb":e=Ge(Me.DayPeriods,$e.Narrow,hn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ge(Me.DayPeriods,$e.Abbreviated,hn.Format,!0);break;case"BBBB":e=Ge(Me.DayPeriods,$e.Wide,hn.Format,!0);break;case"BBBBB":e=Ge(Me.DayPeriods,$e.Narrow,hn.Format,!0);break;case"h":e=Ct(xe.Hours,1,-12);break;case"hh":e=Ct(xe.Hours,2,-12);break;case"H":e=Ct(xe.Hours,1);break;case"HH":e=Ct(xe.Hours,2);break;case"m":e=Ct(xe.Minutes,1);break;case"mm":e=Ct(xe.Minutes,2);break;case"s":e=Ct(xe.Seconds,1);break;case"ss":e=Ct(xe.Seconds,2);break;case"S":e=Ct(xe.FractionalSeconds,1);break;case"SS":e=Ct(xe.FractionalSeconds,2);break;case"SSS":e=Ct(xe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=df(si.Short);break;case"ZZZZZ":e=df(si.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=df(si.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=df(si.Long);break;default:return null}return V_[t]=e,e}function wR(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function l$(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function d$(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=wR(e,i);return l$(t,r*(s-i))}function h$(t){if(dR(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return gf(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(t$))return f$(r)}let e=new Date(t);if(!dR(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function f$(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function dR(t){return t instanceof Date&&!isNaN(t.valueOf())}function ER(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var U_=/\s+/,hR=[],Mr=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=hR,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(U_):hR}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(U_):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(U_).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Ne(Hi),Ne(Vs))}}static{this.\u0275dir=kt({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();var j_=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},CR=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new j_(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),fR(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);fR(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(Ne(yu),Ne(R_),Ne(O_))}}static{this.\u0275dir=kt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function fR(t,e){t.context.$implicit=e.item}function p$(t,e){return new K(2100,!1)}var g$="mediumDate",m$=new j(""),y$=new j(""),vf=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??g$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return r$(n,o,s||this.locale,a)}catch(o){throw p$(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Ne(sf,16),Ne(m$,24),Ne(y$,24))}}static{this.\u0275pipe=cS({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var B_="browser",_$="server";function $_(t){return t===B_}function H_(t){return t===_$}var mf=class{};var z_=class extends pf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},W_=class t extends z_{static makeCurrent(){gR(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=v$();return n==null?null:I$(n)}resetBaseElement(){Eu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ER(document.cookie,e)}},Eu=null;function v$(){return Eu=Eu||document.querySelector("base"),Eu?Eu.getAttribute("href"):null}function I$(t){return new URL(t,document.baseURI).pathname}var w$=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),K_=new j(""),SR=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new K(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(ne(K_),ne(te))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),If=class{constructor(e){this._doc=e}},q_="ng-app-id",AR=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=H_(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${q_}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(q_),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(q_,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(ne(Kn),ne(g_),ne(y_,8),ne(ar))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),G_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Y_=/%COMP%/g,RR="%COMP%",E$=`_nghost-${RR}`,C$=`_ngcontent-${RR}`,T$=!0,b$=new j("",{providedIn:"root",factory:()=>T$});function D$(t){return C$.replace(Y_,t)}function S$(t){return E$.replace(Y_,t)}function NR(t,e){return e.map(n=>n.replace(Y_,t))}var TR=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=H_(a),this.defaultRenderer=new Cu(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Sr.ShadowDom&&(r=ye(V({},r),{encapsulation:Sr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof wf?i.applyToHost(n):i instanceof Tu&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Sr.Emulated:s=new wf(c,l,r,this.appId,d,o,a,f);break;case Sr.ShadowDom:return new Q_(c,l,n,r,o,a,this.nonce,f);default:s=new Tu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(ne(SR),ne(AR),ne(g_),ne(b$),ne(Kn),ne(ar),ne(te),ne(y_))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),Cu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(G_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bR(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(bR(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new K(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=G_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=G_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yr.DashCase|Yr.Important)?e.style.setProperty(n,r,i&Yr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=oi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bR(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Q_=class extends Cu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=NR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Tu=class extends Cu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?NR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},wf=class extends Tu{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=D$(l),this.hostAttr=S$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},A$=(()=>{class t extends If{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(ne(Kn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})(),DR=["alt","control","meta","shift"],R$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},M$=(()=>{class t extends If{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oi().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),DR.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=R$[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),DR.forEach(o=>{if(o!==i){let a=N$[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(ne(Kn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac})}}return t})();function MR(t,e){return cR(V({rootComponent:t},x$(e)))}function x$(t){return{appProviders:[...L$,...t?.providers??[]],platformProviders:F$}}function P$(){W_.makeCurrent()}function k$(){return new Nr}function O$(){return cA(document),document}var F$=[{provide:ar,useValue:B_},{provide:m_,useValue:P$,multi:!0},{provide:Kn,useFactory:O$,deps:[]}];var L$=[{provide:$h,useValue:"root"},{provide:Nr,useFactory:k$,deps:[]},{provide:K_,useClass:A$,multi:!0,deps:[Kn,te,ar]},{provide:K_,useClass:M$,multi:!0,deps:[Kn]},TR,AR,SR,{provide:aa,useExisting:TR},{provide:mf,useClass:w$,deps:[]},[]];var Ef=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(ne(Kn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var he="primary",$u=Symbol("RouteTitle"),tv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function va(t){return new tv(t)}function V$(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function U$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!xr(t[n],e[n]))return!1;return!0}function xr(t,e){let n=t?nv(t):void 0,r=e?nv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!jR(t[i],e[i]))return!1;return!0}function nv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function jR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function BR(t){return t.length>0?t[t.length-1]:null}function Ki(t){return Lm(t)?t:$s(t)?Ze(Promise.resolve(t)):X(t)}var j$={exact:HR,subset:qR},$R={exact:B$,subset:$$,ignored:()=>!0};function PR(t,e,n){return j$[n.paths](t.root,e.root,n.matrixParams)&&$R[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function B$(t,e){return xr(t,e)}function HR(t,e,n){if(!zs(t.segments,e.segments)||!bf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!HR(t.children[r],e.children[r],n))return!1;return!0}function $$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>jR(t[n],e[n]))}function qR(t,e,n){return GR(t,e,e.segments,n)}function GR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!zs(i,n)||e.hasChildren()||!bf(i,n,r))}else if(t.segments.length===n.length){if(!zs(t.segments,n)||!bf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!qR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!zs(t.segments,i)||!bf(t.segments,i,r)||!t.children[he]?!1:GR(t.children[he],e,s,r)}}function bf(t,e,n){return e.every((r,i)=>$R[n](t[i].parameters,r.parameters))}var ci=class{constructor(e=new ke([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=va(this.queryParams),this._queryParamMap}toString(){return G$.serialize(this)}},ke=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Df(this)}},Gs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=va(this.parameters),this._parameterMap}toString(){return WR(this)}};function H$(t,e){return zs(t,e)&&t.every((n,r)=>xr(n.parameters,e[r].parameters))}function zs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function q$(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===he&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==he&&(n=n.concat(e(i,r)))}),n}var Sv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>new Mu,providedIn:"root"})}}return t})(),Mu=class{parse(e){let n=new iv(e);return new ci(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${bu(e.root,!0)}`,r=K$(e.queryParams),i=typeof e.fragment=="string"?`#${z$(e.fragment)}`:"";return`${n}${r}${i}`}},G$=new Mu;function Df(t){return t.segments.map(e=>WR(e)).join("/")}function bu(t,e){if(!t.hasChildren())return Df(t);if(e){let n=t.children[he]?bu(t.children[he],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==he&&r.push(`${i}:${bu(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=q$(t,(r,i)=>i===he?[bu(t.children[he],!1)]:[`${i}:${bu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[he]!=null?`${Df(t)}/${n[0]}`:`${Df(t)}/(${n.join("//")})`}}function zR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Cf(t){return zR(t).replace(/%3B/gi,";")}function z$(t){return encodeURI(t)}function rv(t){return zR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Sf(t){return decodeURIComponent(t)}function kR(t){return Sf(t.replace(/\+/g,"%20"))}function WR(t){return`${rv(t.path)}${W$(t.parameters)}`}function W$(t){return Object.entries(t).map(([e,n])=>`;${rv(e)}=${rv(n)}`).join("")}function K$(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Cf(n)}=${Cf(i)}`).join("&"):`${Cf(n)}=${Cf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Q$=/^[^\/()?;#]+/;function Z_(t){let e=t.match(Q$);return e?e[0]:""}var Y$=/^[^\/()?;=#]+/;function Z$(t){let e=t.match(Y$);return e?e[0]:""}var J$=/^[^=?&#]+/;function X$(t){let e=t.match(J$);return e?e[0]:""}var eH=/^[^&#]+/;function tH(t){let e=t.match(eH);return e?e[0]:""}var iv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ke([],{}):new ke([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[he]=new ke(e,n)),r}parseSegment(){let e=Z_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new K(4009,!1);return this.capture(e),new Gs(Sf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Z$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Z_(this.remaining);i&&(r=i,this.capture(r))}e[Sf(n)]=Sf(r)}parseQueryParam(e){let n=X$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=tH(this.remaining);o&&(r=o,this.capture(r))}let i=kR(n),s=kR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Z_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new K(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=he);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[he]:new ke([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new K(4011,!1)}};function KR(t){return t.segments.length>0?new ke([],{[he]:t}):t}function QR(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=QR(i);if(r===he&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ke(t.segments,e);return nH(n)}function nH(t){if(t.numberOfChildren===1&&t.children[he]){let e=t.children[he];return new ke(t.segments.concat(e.segments),e.children)}return t}function xu(t){return t instanceof ci}function rH(t,e,n=null,r=null){let i=YR(t);return ZR(i,e,n,r)}function YR(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new ke(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=KR(r);return e??i}function ZR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return J_(i,i,i,n,r);let s=iH(e);if(s.toRoot())return J_(i,i,new ke([],{}),n,r);let o=sH(s,i,t),a=o.processChildren?Au(o.segmentGroup,o.index,s.commands):XR(o.segmentGroup,o.index,s.commands);return J_(i,o.segmentGroup,a,n,r)}function Af(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Pu(t){return typeof t=="object"&&t!=null&&t.outlets}function J_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=JR(t,e,n);let a=KR(QR(o));return new ci(a,s,i)}function JR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=JR(s,e,n)}),new ke(t.segments,r)}var Rf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Af(r[0]))throw new K(4003,!1);let i=r.find(Pu);if(i&&i!==BR(r))throw new K(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iH(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Rf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Rf(n,e,r)}var ma=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function sH(t,e,n){if(t.isAbsolute)return new ma(e,!0,0);if(!n)return new ma(e,!1,NaN);if(n.parent===null)return new ma(n,!0,0);let r=Af(t.commands[0])?0:1,i=n.segments.length-1+r;return oH(n,i,t.numberOfDoubleDots)}function oH(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new K(4005,!1);i=r.segments.length}return new ma(r,!1,i-s)}function aH(t){return Pu(t[0])?t[0].outlets:{[he]:t}}function XR(t,e,n){if(t??=new ke([],{}),t.segments.length===0&&t.hasChildren())return Au(t,e,n);let r=cH(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ke(t.segments.slice(0,r.pathIndex),{});return s.children[he]=new ke(t.segments.slice(r.pathIndex),t.children),Au(s,0,i)}else return r.match&&i.length===0?new ke(t.segments,{}):r.match&&!t.hasChildren()?sv(t,e,n):r.match?Au(t,0,i):sv(t,e,n)}function Au(t,e,n){if(n.length===0)return new ke(t.segments,{});{let r=aH(n),i={};if(Object.keys(r).some(s=>s!==he)&&t.children[he]&&t.numberOfChildren===1&&t.children[he].segments.length===0){let s=Au(t.children[he],e,n);return new ke(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=XR(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ke(t.segments,i)}}function cH(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Pu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!FR(c,l,o))return s;r+=2}else{if(!FR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sv(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Pu(s)){let c=uH(s.outlets);return new ke(r,c)}if(i===0&&Af(n[0])){let c=t.segments[e];r.push(new Gs(c.path,OR(n[0]))),i++;continue}let o=Pu(s)?s.outlets[he]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Af(a)?(r.push(new Gs(o,OR(a))),i+=2):(r.push(new Gs(o,{})),i++)}return new ke(r,{})}function uH(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=sv(new ke([],{}),0,r))}),e}function OR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function FR(t,e,n){return t==n.path&&xr(e,n.parameters)}var Ru="imperative",Bt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Bt||{}),Qn=class{constructor(e,n){this.id=e,this.url=n}},ku=class extends Qn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Bt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ws=class extends Qn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},kn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(kn||{}),ov=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ov||{}),ai=class extends Qn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ks=class extends Qn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Bt.NavigationSkipped}},Ou=class extends Qn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nf=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},av=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},cv=class extends Qn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},uv=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lv=class extends Qn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},dv=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hv=class{constructor(e){this.route=e,this.type=Bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fv=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pv=class{constructor(e){this.snapshot=e,this.type=Bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gv=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Fu=class{constructor(e){this.snapshot=e,this.type=Bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lu=class{},Ia=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function lH(t,e){return t.providers&&!t._injector&&(t._injector=N_(t.providers,e,`Route: ${t.path}`)),t._injector??e}function dr(t){return t.outlet||he}function dH(t,e){let n=t.filter(r=>dr(r)===e);return n.push(...t.filter(r=>dr(r)!==e)),n}function Hu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var mv=class{get injector(){return Hu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Lf(this.rootInjector),this.attachRef=null}},Lf=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new mv(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(ne(Bn))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Mf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=yv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=yv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=_v(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _v(e,this._root).map(n=>n.value)}};function yv(t,e){if(t===e.value)return e;for(let n of e.children){let r=yv(t,n);if(r)return r}return null}function _v(t,e){if(t===e.value)return[e];for(let n of e.children){let r=_v(t,n);if(r.length)return r.unshift(e),r}return[]}var Pn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ga(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var xf=class extends Mf{constructor(e,n){super(e),this.snapshot=n,Av(this,e)}toString(){return this.snapshot.toString()}};function eN(t){let e=hH(t),n=new Ut([new Gs("",{})]),r=new Ut({}),i=new Ut({}),s=new Ut({}),o=new Ut(""),a=new wa(n,r,s,o,i,he,t,e.root);return a.snapshot=e.root,new xf(new Pn(a,[]),e)}function hH(t){let e={},n={},r={},i="",s=new ya([],e,r,i,n,he,t,null,{});return new kf("",new Pn(s,[]))}var wa=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(W(l=>l[$u]))??X(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>va(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>va(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Pf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&nN(i)&&(r.resolve[$u]=i.title),r}var ya=class{get title(){return this.data?.[$u]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=va(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=va(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},kf=class extends Mf{constructor(e,n){super(n),this.url=e,Av(this,n)}toString(){return tN(this._root)}};function Av(t,e){e.value._routerState=t,e.children.forEach(n=>Av(t,n))}function tN(t){let e=t.children.length>0?` { ${t.children.map(tN).join(", ")} } `:"";return`${t.value}${e}`}function X_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,xr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),xr(e.params,n.params)||t.paramsSubject.next(n.params),U$(e.url,n.url)||t.urlSubject.next(n.url),xr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function vv(t,e){let n=xr(t.params,e.params)&&H$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||vv(t.parent,e.parent))}function nN(t){return typeof t.title=="string"||t.title===null}var Rv=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=he,this.activateEvents=new Et,this.deactivateEvents=new Et,this.attachEvents=new Et,this.detachEvents=new Et,this.parentContexts=M(Lf),this.location=M(yu),this.changeDetector=M(zi),this.inputBinder=M(Nv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new K(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new K(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new K(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new K(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Iv(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=kt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ri]})}}return t})(),Iv=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===wa?this.route:e===Lf?this.childContexts:this.parent.get(e,n)}},Nv=new j("");function fH(t,e,n){let r=Vu(t,e._root,n?n._root:void 0);return new xf(r,e)}function Vu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=pH(t,e,n);return new Pn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Vu(t,a)),o}}let r=gH(e.value),i=e.children.map(s=>Vu(t,s));return new Pn(r,i)}}function pH(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Vu(t,r,i);return Vu(t,r)})}function gH(t){return new wa(new Ut(t.url),new Ut(t.params),new Ut(t.queryParams),new Ut(t.fragment),new Ut(t.data),t.outlet,t.component,t)}var Uu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},rN="ngNavigationCancelingError";function Of(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=xu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=iN(!1,kn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function iN(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[rN]=!0,n.cancellationCode=e,n}function mH(t){return sN(t)&&xu(t.url)}function sN(t){return!!t&&t[rN]}var yH=(t,e,n,r)=>W(i=>(new wv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),wv=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),X_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ga(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ga(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ga(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ga(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Fu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new pv(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(X_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),X_(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Ff=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},_a=class{constructor(e,n){this.component=e,this.route=n}};function _H(t,e,n){let r=t._root,i=e?e._root:null;return Du(r,i,n,[r.value])}function vH(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ca(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Q0(t)?t:e.get(t):r}function Du(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ga(e);return t.children.forEach(o=>{IH(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Nu(a,n.getContext(o),i)),i}function IH(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=wH(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ff(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Du(t,e,a?a.children:null,r,i):Du(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new _a(a.outlet.component,o))}else o&&Nu(e,a,i),i.canActivateChecks.push(new Ff(r)),s.component?Du(t,null,a?a.children:null,r,i):Du(t,null,n,r,i);return i}function wH(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!zs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!zs(t.url,e.url)||!xr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vv(t,e)||!xr(t.queryParams,e.queryParams);case"paramsChange":default:return!vv(t,e)}}function Nu(t,e,n){let r=ga(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Nu(o,e.children.getContext(s),n):Nu(o,null,n):Nu(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new _a(e.outlet.component,i)):n.canDeactivateChecks.push(new _a(null,i)):n.canDeactivateChecks.push(new _a(null,i))}function qu(t){return typeof t=="function"}function EH(t){return typeof t=="boolean"}function CH(t){return t&&qu(t.canLoad)}function TH(t){return t&&qu(t.canActivate)}function bH(t){return t&&qu(t.canActivateChild)}function DH(t){return t&&qu(t.canDeactivate)}function SH(t){return t&&qu(t.canMatch)}function oN(t){return t instanceof Wr||t?.name==="EmptyError"}var Tf=Symbol("INITIAL_VALUE");function Ea(){return _n(t=>tt(t.map(e=>e.pipe(Kr(1),Wo(Tf)))).pipe(W(e=>{for(let n of e)if(n!==!0){if(n===Tf)return Tf;if(n===!1||AH(n))return n}return!0}),un(e=>e!==Tf),Kr(1)))}function AH(t){return xu(t)||t instanceof Uu}function RH(t,e){return mt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?X(ye(V({},n),{guardsResult:!0})):NH(o,r,i,t).pipe(mt(a=>a&&EH(a)?MH(r,s,t,e):X(a)),W(a=>ye(V({},n),{guardsResult:a})))})}function NH(t,e,n,r){return Ze(t).pipe(mt(i=>FH(i.component,i.route,n,e,r)),Tr(i=>i!==!0,!0))}function MH(t,e,n,r){return Ze(e).pipe(ws(i=>Go(PH(i.route.parent,r),xH(i.route,r),OH(t,i.path,n),kH(t,i.route,n))),Tr(i=>i!==!0,!0))}function xH(t,e){return t!==null&&e&&e(new gv(t)),X(!0)}function PH(t,e){return t!==null&&e&&e(new fv(t)),X(!0)}function kH(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(s=>eh(()=>{let o=Hu(e)??n,a=Ca(s,o),c=TH(a)?a.canActivate(e,t):ei(o,()=>a(e,t));return Ki(c).pipe(Tr())}));return X(i).pipe(Ea())}function OH(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>vH(o)).filter(o=>o!==null).map(o=>eh(()=>{let a=o.guards.map(c=>{let l=Hu(o.node)??n,d=Ca(c,l),f=bH(d)?d.canActivateChild(r,t):ei(l,()=>d(r,t));return Ki(f).pipe(Tr())});return X(a).pipe(Ea())}));return X(s).pipe(Ea())}function FH(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let c=Hu(e)??i,l=Ca(a,c),d=DH(l)?l.canDeactivate(t,e,n,r):ei(c,()=>l(t,e,n,r));return Ki(d).pipe(Tr())});return X(o).pipe(Ea())}function LH(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let s=i.map(o=>{let a=Ca(o,t),c=CH(a)?a.canLoad(e,n):ei(t,()=>a(e,n));return Ki(c)});return X(s).pipe(Ea(),aN(r))}function aN(t){return kd(Rt(e=>{if(typeof e!="boolean")throw Of(t,e)}),W(e=>e===!0))}function VH(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let s=i.map(o=>{let a=Ca(o,t),c=SH(a)?a.canMatch(e,n):ei(t,()=>a(e,n));return Ki(c)});return X(s).pipe(Ea(),aN(r))}var ju=class{constructor(e){this.segmentGroup=e||null}},Bu=class extends Error{constructor(e){super(),this.urlTree=e}};function pa(t){return qo(new ju(t))}function UH(t){return qo(new K(4e3,!1))}function jH(t){return qo(iN(!1,kn.GuardRejected))}var Ev=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[he])return UH(`${e.redirectTo}`);i=i.children[he]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:I,title:R}=i,S=ei(s,()=>a({params:y,data:I,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(S instanceof ci)throw new Bu(S);n=S}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new Bu(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ci(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ke(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new K(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Cv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BH(t,e,n,r,i){let s=cN(t,e,n);return s.matched?(r=lH(e,r),VH(r,e,n,i).pipe(W(o=>o===!0?s:V({},Cv)))):X(s)}function cN(t,e,n){if(e.path==="**")return $H(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},Cv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||V$)(n,t,e);if(!i)return V({},Cv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function $H(t){return{matched:!0,parameters:t.length>0?BR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function LR(t,e,n,r){return n.length>0&&GH(t,n,r)?{segmentGroup:new ke(e,qH(r,new ke(n,t.children))),slicedSegments:[]}:n.length===0&&zH(t,n,r)?{segmentGroup:new ke(t.segments,HH(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ke(t.segments,t.children),slicedSegments:n}}function HH(t,e,n,r){let i={};for(let s of n)if(Vf(t,e,s)&&!r[dr(s)]){let o=new ke([],{});i[dr(s)]=o}return V(V({},r),i)}function qH(t,e){let n={};n[he]=e;for(let r of t)if(r.path===""&&dr(r)!==he){let i=new ke([],{});n[dr(r)]=i}return n}function GH(t,e,n){return n.some(r=>Vf(t,e,r)&&dr(r)!==he)}function zH(t,e,n){return n.some(r=>Vf(t,e,r))}function Vf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WH(t,e,n){return e.length===0&&!t.children[n]}var Tv=class{};function KH(t,e,n,r,i,s,o="emptyOnly"){return new bv(t,e,n,r,i,o,s).recognize()}var QH=31,bv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ev(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new K(4002,`'${e.segmentGroup}'`)}recognize(){let e=LR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:n,rootSnapshot:r})=>{let i=new Pn(r,n),s=new kf("",i),o=rH(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new ya([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),he,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,he,n).pipe(W(r=>({children:r,rootSnapshot:n})),xi(r=>{if(r instanceof Bu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ju?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(W(o=>o instanceof Pn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ze(s).pipe(ws(o=>{let a=r.children[o],c=dH(n,o);return this.processSegmentGroup(e,c,a,o,i)}),ih((o,a)=>(o.push(...a),o)),Pi(null),Hm(),mt(o=>{if(o===null)return pa(r);let a=uN(o);return YH(a),X(a)}))}processSegment(e,n,r,i,s,o,a){return Ze(n).pipe(ws(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(xi(l=>{if(l instanceof ju)return X(null);throw l}))),Tr(c=>!!c),xi(c=>{if(oN(c))return WH(r,i,s)?X(new Tv):pa(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return dr(r)!==o&&(o===he||!Vf(i,s,r))?pa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):pa(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=cN(n,i,s);if(!c)return pa(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QH&&(this.allowRedirects=!1));let y=new ya(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,VR(i),dr(i),i.component??i._loadedComponent??null,i,UR(i)),I=Pf(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(I.params),y.data=Object.freeze(I.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(mt(S=>this.processSegment(e,r,n,S.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=BH(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(_n(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(_n(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,I=new ya(g,f,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,VR(r),dr(r),r.component??r._loadedComponent??null,r,UR(r)),R=Pf(I,o,this.paramsInheritanceStrategy);I.params=Object.freeze(R.params),I.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:P}=LR(n,g,y,l);if(P.length===0&&S.hasChildren())return this.processChildren(d,l,S,I).pipe(W(z=>new Pn(I,z)));if(l.length===0&&P.length===0)return X(new Pn(I,[]));let $=dr(r)===s;return this.processSegment(d,l,S,P,$?he:s,!0,I).pipe(W(z=>new Pn(I,z instanceof Pn?[z]:[])))}))):pa(n)))}getChildConfig(e,n,r){return n.children?X({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?X({routes:n._loadedRoutes,injector:n._loadedInjector}):LH(e,n,r,this.urlSerializer).pipe(mt(i=>i?this.configLoader.loadChildren(e,n).pipe(Rt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):jH(n))):X({routes:[],injector:e})}};function YH(t){t.sort((e,n)=>e.value.outlet===he?-1:n.value.outlet===he?1:e.value.outlet.localeCompare(n.value.outlet))}function ZH(t){let e=t.value.routeConfig;return e&&e.path===""}function uN(t){let e=[],n=new Set;for(let r of t){if(!ZH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=uN(r.children);e.push(new Pn(r.value,i))}return e.filter(r=>!n.has(r))}function VR(t){return t.data||{}}function UR(t){return t.resolve||{}}function JH(t,e,n,r,i,s){return mt(o=>KH(t,e,n,r,o.extractedUrl,i,s).pipe(W(({state:a,tree:c})=>ye(V({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function XH(t,e){return mt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return X(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of lN(c))o.add(l);let a=0;return Ze(o).pipe(ws(c=>s.has(c)?eq(c,r,t,e):(c.data=Pf(c,c.parent,t).resolve,X(void 0))),Rt(()=>a++),zo(1),mt(c=>a===o.size?X(n):Nn))})}function lN(t){let e=t.children.map(n=>lN(n)).flat();return[t,...e]}function eq(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!nN(i)&&(s[$u]=i.title),tq(s,t,e,r).pipe(W(o=>(t._resolvedData=o,t.data=Pf(t,t.parent,n).resolve,null)))}function tq(t,e,n,r){let i=nv(t);if(i.length===0)return X({});let s={};return Ze(i).pipe(mt(o=>nq(t[o],e,n,r).pipe(Tr(),Rt(a=>{if(a instanceof Uu)throw Of(new Mu,a);s[o]=a}))),zo(1),Bm(s),xi(o=>oN(o)?Nn:qo(o)))}function nq(t,e,n,r){let i=Hu(e)??r,s=Ca(t,i),o=s.resolve?s.resolve(e,n):ei(i,()=>s(e,n));return Ki(o)}function ev(t){return _n(e=>{let n=t(e);return n?Ze(n).pipe(W(()=>e)):X(e)})}var dN=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===he);return r}getResolvedTitleForRoute(n){return n.data[$u]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(rq),providedIn:"root"})}}return t})(),rq=(()=>{class t extends dN{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(ne(Ef))}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Mv=new j("",{providedIn:"root",factory:()=>({})}),xv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Qt({type:t,selectors:[["ng-component"]],standalone:!0,features:[Yt],decls:1,vars:0,template:function(r,i){r&1&&Je(0,"router-outlet")},dependencies:[Rv],encapsulation:2})}}return t})();function Pv(t){let e=t.children&&t.children.map(Pv),n=e?ye(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=xv),n}var kv=new j(""),iq=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(k_)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return X(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Ki(n.loadComponent()).pipe(W(hN),Rt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),tu(()=>{this.componentLoaders.delete(n)})),i=new Uo(r,()=>new et).pipe(Vo());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=sq(r,this.compiler,n,this.onLoadEndListener).pipe(tu(()=>{this.childrenLoaders.delete(r)})),o=new Uo(s,()=>new et).pipe(Vo());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function sq(t,e,n,r){return Ki(t.loadChildren()).pipe(W(hN),mt(i=>i instanceof du||Array.isArray(i)?X(i):Ze(e.compileModuleAsync(i))),W(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(kv,[],{optional:!0,self:!0}).flat()),{routes:o.map(Pv),injector:s}}))}function oq(t){return t&&typeof t=="object"&&"default"in t}function hN(t){return oq(t)?t.default:t}var Ov=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(aq),providedIn:"root"})}}return t})(),aq=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),cq=new j("");var uq=new j(""),lq=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new et,this.transitionAbortSubject=new et,this.configLoader=M(iq),this.environmentInjector=M(Bn),this.urlSerializer=M(Sv),this.rootContexts=M(Lf),this.location=M(wu),this.inputBindingEnabled=M(Nv,{optional:!0})!==null,this.titleStrategy=M(dN),this.options=M(Mv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(Ov),this.createViewTransition=M(cq,{optional:!0}),this.navigationErrorHandler=M(uq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let n=i=>this.events.next(new dv(i)),r=i=>this.events.next(new hv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ye(V(V({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new Ut({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Ru,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(un(s=>s.id!==0),W(s=>ye(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),_n(s=>{let o=!1,a=!1;return X(s).pipe(_n(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",kn.SupersededByNewNavigation),Nn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ye(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Ks(c.id,this.urlSerializer.serialize(c.rawUrl),f,ov.IgnoredSameUrlNavigation)),c.resolve(!1),Nn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(_n(f=>{let g=this.transitions?.getValue();return this.events.next(new ku(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Nn:Promise.resolve(f)}),JH(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),Rt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ye(V({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Nf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:I,extras:R}=c,S=new ku(f,this.urlSerializer.serialize(g),y,I);this.events.next(S);let P=eN(this.rootComponentType).snapshot;return this.currentTransition=s=ye(V({},c),{targetSnapshot:P,urlAfterRedirects:g,extras:ye(V({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,X(s)}else{let f="";return this.events.next(new Ks(c.id,this.urlSerializer.serialize(c.extractedUrl),f,ov.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Nn}}),Rt(c=>{let l=new av(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),W(c=>(this.currentTransition=s=ye(V({},c),{guards:_H(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),RH(this.environmentInjector,c=>this.events.next(c)),Rt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Of(this.urlSerializer,c.guardsResult);let l=new cv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),un(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",kn.GuardRejected),!1)),ev(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(Rt(l=>{let d=new uv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),_n(l=>{let d=!1;return X(l).pipe(XH(this.paramsInheritanceStrategy,this.environmentInjector),Rt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",kn.NoDataFromResolver)}}))}),Rt(l=>{let d=new lv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),ev(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Rt(g=>{d.component=g}),W(()=>{})));for(let g of d.children)f.push(...l(g));return f};return tt(l(c.targetSnapshot.root)).pipe(Pi(null),Kr(1))}),ev(()=>this.afterPreactivation()),_n(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Ze(d).pipe(W(()=>s)):X(s)}),W(c=>{let l=fH(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ye(V({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Rt(()=>{this.events.next(new Lu)}),yH(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Kr(1),Rt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ws(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Kt(this.transitionAbortSubject.pipe(Rt(c=>{throw c}))),tu(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",kn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),xi(c=>{if(a=!0,sN(c))this.events.next(new ai(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),mH(c)?this.events.next(new Ia(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Ou(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=ei(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Uu){let{message:f,cancellationCode:g}=Of(this.urlSerializer,d);this.events.next(new ai(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Ia(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=n.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Nn}))}))}cancelNavigationTransition(n,r,i){let s=new ai(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function dq(t){return t!==Ru}var hq=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(fq),providedIn:"root"})}}return t})(),Dv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},fq=(()=>{class t extends Dv{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=$i(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),fN=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:()=>M(pq),providedIn:"root"})}}return t})(),pq=(()=>{class t extends fN{constructor(){super(...arguments),this.location=M(wu),this.urlSerializer=M(Sv),this.options=M(Mv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(Ov),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ci,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=eN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof ku)this.stateMemento=this.createStateMemento();else if(n instanceof Ks)this.rawUrlTree=r.initialUrl;else if(n instanceof Nf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Lu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ai&&(n.code===kn.GuardRejected||n.code===kn.NoDataFromResolver)?this.restoreHistory(r):n instanceof Ou?this.restoreHistory(r,!0):n instanceof Ws&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof ci?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=$i(t)))(i||t)}})()}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Su=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Su||{});function gq(t,e){t.events.pipe(un(n=>n instanceof Ws||n instanceof ai||n instanceof Ou||n instanceof Ks),W(n=>n instanceof Ws||n instanceof Ks?Su.COMPLETE:(n instanceof ai?n.code===kn.Redirect||n.code===kn.SupersededByNewNavigation:!1)?Su.REDIRECTING:Su.FAILED),un(n=>n!==Su.REDIRECTING),Kr(1)).subscribe(()=>{e()})}function mq(t){throw t}var yq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_q={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Uf=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(rf),this.stateManager=M(fN),this.options=M(Mv,{optional:!0})||{},this.pendingTasks=M(Ls),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(lq),this.urlSerializer=M(Sv),this.location=M(wu),this.urlHandlingStrategy=M(Ov),this._events=new et,this.errorHandler=this.options.errorHandler||mq,this.navigated=!1,this.routeReuseStrategy=M(hq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(kv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(Nv,{optional:!0}),this.eventsSubscription=new ut,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ai&&r.code!==kn.Redirect&&r.code!==kn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ws)this.navigated=!0;else if(r instanceof Ia){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||dq(i.source)},o);this.scheduleNavigation(a,Ru,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Iq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ru,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=V({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Pv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=YR(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return ZR(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=xu(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Ru,null,r)}navigate(n,r={skipLocationChange:!1}){return vq(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=V({},yq):r===!1?i=V({},_q):i=r,xu(n))return PR(this.currentUrlTree,n,i);let s=this.parseUrl(n);return PR(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return gq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function vq(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new K(4008,!1)}function Iq(t){return!(t instanceof Lu)&&!(t instanceof Ia)}var wq=new j("");function pN(t,...e){return qe([{provide:kv,multi:!0,useValue:t},[],{provide:wa,useFactory:Eq,deps:[Uf]},{provide:P_,multi:!0,useFactory:Cq},e.map(n=>n.\u0275providers)])}function Eq(t){return t.routerState.root}function Cq(){let t=M(ve);return e=>{let n=t.get(Hs);if(e!==n.components[0])return;let r=t.get(Uf),i=t.get(Tq);t.get(bq)===1&&r.initialNavigation(),t.get(Dq,null,ge.Optional)?.setUpPreloading(),t.get(wq,null,ge.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Tq=new j("",{factory:()=>new et}),bq=new j("",{providedIn:"root",factory:()=>1});var Dq=new j("");var gN=[];var Aq="firebase",Rq="10.14.1";Q(Aq,Rq,"app");var Ke=new Jr("ANGULARFIRE2_VERSION"),ba=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function Tt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var vt=(t,e)=>{let n=e?[e]:Ed(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Cn=class{constructor(){return vt(Nq)}},Nq="app-check";function Ta(){}var jf=class{zone;delegate;constructor(e,n=Om){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Fv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ta,{},Ta,Ta)),n.pipe(Rt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},dt=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new jf(Zone.current)),this.insideAngular=n.run(()=>new jf(Zone.current,Ho)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ne(te))};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function Mq(t){return Bf().ngZone.runOutsideAngular(()=>t())}function Qs(t){return Bf().ngZone.run(()=>t())}function xq(t){return Pq(Bf())(t)}function Pq(t){return function(n){return n=n.lift(new Fv(t.ngZone)),n.pipe(Mi(t.outsideAngular),Ni(t.insideAngular))}}var kq=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Qs(()=>t.apply(void 0,r))},Se=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Qs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ta,{},Ta,Ta))),r[s]=kq(r[s],n));let i=Mq(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=Bf();return i.pipe(Mi(s.outsideAngular),Ni(s.insideAngular))}else return Qs(()=>i);return i instanceof ae?i.pipe(xq):i instanceof Promise?Qs(()=>new Promise((s,o)=>i.then(a=>Qs(()=>s(a)),a=>Qs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Qs(()=>i)};var Qe=class{constructor(e){return e}},st=class{constructor(){return Ed()}};function Oq(t){return t&&t.length===1?t[0]:new Qe(wt())}var Lv=new j("angularfire2._apps"),Fq={provide:Qe,useFactory:Oq,deps:[[new se,Lv]]},Lq={provide:st,deps:[[new se,Lv]]};function Vq(t){return(e,n)=>{let r=n.get(ar);Q("angularfire",Ke.full,"core"),Q("angularfire",Ke.full,"app"),Q("angular",tR.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Qe(i)}}function mN(t,...e){return qe([Fq,Lq,{provide:Lv,useFactory:Vq(t),multi:!0,deps:[te,ve,dt,...e]}])}var yN=Se(ID,!0);function xN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var PN=xN,kN=new Ir("auth","Firebase",xN());var Wf=new Er("@firebase/auth");function Uq(t,...e){Wf.logLevel<=Wt.WARN&&Wf.warn(`Auth (${mn}): ${t}`,...e)}function Hf(t,...e){Wf.logLevel<=Wt.ERROR&&Wf.error(`Auth (${mn}): ${t}`,...e)}function Yi(t,...e){throw rI(t,...e)}function Zs(t,...e){return rI(t,...e)}function ON(t,e,n){let r=Object.assign(Object.assign({},PN()),{[e]:n});return new Ir("auth","Firebase",r).create(e,{appName:t.name})}function Ys(t){return ON(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function rI(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kN.create(t,...e)}function oe(t,e,...n){if(!t)throw rI(e,...n)}function ui(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Hf(e),new Error(e)}function Zi(t,e){t||ui(e)}function Bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jq(){return _N()==="http:"||_N()==="https:"}function _N(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function Bq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jq()||jc()||"connection"in navigator)?navigator.onLine:!0}function $q(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Js=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zi(n>e,"Short delay should be less than long delay!"),this.isMobile=Uc()||vd()}get(){return Bq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function iI(t,e){Zi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Kf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Hq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qq=new Js(3e4,6e4);function sI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Sa(s,o,a,c){return _(this,arguments,function*(t,e,n,r,i={}){return FN(t,i,()=>_(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=ms(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:g},l);return dD()||(y.referrerPolicy="no-referrer"),Kf.fetch()(LN(t,t.config.apiHost,n,f),y)}))})}function FN(t,e,n){return _(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},Hq),e);try{let i=new $v(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw $f(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw $f(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw $f(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw $f(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ON(t,d,l);Yi(t,d)}}catch(i){if(i instanceof gn)throw i;Yi(t,"network-request-failed",{message:String(i)})}})}function Gq(s,o,a,c){return _(this,arguments,function*(t,e,n,r,i={}){let l=yield Sa(t,e,n,r,i);return"mfaPendingCredential"in l&&Yi(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function LN(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?iI(t.config,i):`${t.config.apiScheme}://${i}`}var $v=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zs(this.auth,"network-request-failed")),qq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function $f(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Zs(t,e,r);return i.customData._tokenResponse=n,i}function zq(t,e){return _(this,null,function*(){return Sa(t,"POST","/v1/accounts:delete",e)})}function VN(t,e){return _(this,null,function*(){return Sa(t,"POST","/v1/accounts:lookup",e)})}function Gu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function oI(t,e=!1){return _(this,null,function*(){let n=we(t),r=yield n.getIdToken(e),i=aI(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Gu(Vv(i.auth_time)),issuedAtTime:Gu(Vv(i.iat)),expirationTime:Gu(Vv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Vv(t){return Number(t)*1e3}function aI(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Hf("JWT malformed, contained fewer than 3 sections"),null;try{let i=cD(n);return i?JSON.parse(i):(Hf("Failed to decode base64 JWT payload"),null)}catch(i){return Hf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function vN(t){let e=aI(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Wu(t,e,n=!1){return _(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof gn&&Wq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function Wq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Hv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),n)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ku=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gu(this.lastLoginAt),this.creationTime=Gu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Qf(t){return _(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield Wu(t,VN(n,{idToken:r}));oe(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?UN(s.providerUserInfo):[],a=Kq(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ku(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function cI(t){return _(this,null,function*(){let e=we(t);yield Qf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Kq(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function UN(t){return t.map(e=>{var{providerId:n}=e,r=Fm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Qq(t,e){return _(this,null,function*(){let n=yield FN(t,{},()=>_(this,null,function*(){let r=ms({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=LN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Kf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function Yq(t,e){return _(this,null,function*(){return Sa(t,"POST","/v2/accounts:revokeToken",sI(t,e))})}var zu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");let n=vN(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return _(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Qq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ui("not implemented")}};function Qi(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Da=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ku(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let n=yield Wu(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return oI(this,e)}reload(){return cI(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Qf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(zr(this.auth.app))return Promise.reject(Ys(this.auth));let e=yield this.getIdToken();return yield Wu(this,zq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,$=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:z,emailVerified:Z,isAnonymous:Ve,providerData:ee,stsTokenManager:C}=n;oe(z&&C,e,"internal-error");let v=zu.fromJSON(this.name,C);oe(typeof z=="string",e,"internal-error"),Qi(f,e.name),Qi(g,e.name),oe(typeof Z=="boolean",e,"internal-error"),oe(typeof Ve=="boolean",e,"internal-error"),Qi(y,e.name),Qi(I,e.name),Qi(R,e.name),Qi(S,e.name),Qi(P,e.name),Qi($,e.name);let w=new t({uid:z,auth:e,email:g,emailVerified:Z,displayName:f,isAnonymous:Ve,photoURL:I,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:$});return ee&&Array.isArray(ee)&&(w.providerData=ee.map(T=>Object.assign({},T))),S&&(w._redirectEventId=S),w}static _fromIdTokenResponse(e,n,r=!1){return _(this,null,function*(){let i=new zu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Qf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return _(this,null,function*(){let i=n.users[0];oe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?UN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new zu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ku(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var IN=new Map;function li(t){Zi(t instanceof Function,"Expected a class definition");let e=IN.get(t);return e?(Zi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,IN.set(t,e),e)}var Zq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(n,r){return _(this,null,function*(){this.storage[n]=r})}_get(n){return _(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return _(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),qv=Zq;function qf(t,e,n){return`firebase:${t}:${e}:${n}`}var Yf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=qf(this.userKey,i.apiKey,s),this.fullPersistenceKey=qf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Da._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return _(this,null,function*(){if(!n.length)return new t(li(qv),e,r);let i=(yield Promise.all(n.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||li(qv),o=qf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=Da._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function wN(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(HN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(GN(e))return"Blackberry";if(zN(e))return"Webos";if(BN(e))return"Safari";if((e.includes("chrome/")||$N(e))&&!e.includes("edge/"))return"Chrome";if(qN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function jN(t=zt()){return/firefox\//i.test(t)}function BN(t=zt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $N(t=zt()){return/crios\//i.test(t)}function HN(t=zt()){return/iemobile/i.test(t)}function qN(t=zt()){return/android/i.test(t)}function GN(t=zt()){return/blackberry/i.test(t)}function zN(t=zt()){return/webos/i.test(t)}function uI(t=zt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Jq(t=zt()){var e;return uI(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Xq(){return hD()&&document.documentMode===10}function WN(t=zt()){return uI(t)||qN(t)||zN(t)||GN(t)||/windows phone/i.test(t)||HN(t)}function KN(t,e=[]){let n;switch(t){case"Browser":n=wN(zt());break;case"Worker":n=`${wN(zt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mn}/${r}`}var Gv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function eG(n){return _(this,arguments,function*(t,e={}){return Sa(t,"GET","/v2/passwordPolicy",sI(t,e))})}var tG=6,zv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:tG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Wv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zf(this),this.idTokenSubscription=new Zf(this),this.beforeStateQueue=new Gv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=li(n)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Yf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let n=yield VN(this,{idToken:e}),r=yield Da._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var n;if(zr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Qf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$q()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(zr(this.app))return Promise.reject(Ys(this));let n=e?we(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return _(this,null,function*(){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return zr(this.app)?Promise.reject(Ys(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return zr(this.app)?Promise.reject(Ys(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(li(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield eG(this),n=new zv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ir("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Yq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&li(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=yield Yf.create(this,[li(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=KN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return _(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&Uq(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function lI(t){return we(t)}var Zf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=yD(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var dI={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nG(t){dI=t}function rG(t){return dI.loadJS(t)}function iG(){return dI.gapiScript}function QN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function hI(t,e){let n=It(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(qc(s,e??{}))return i;Yi(i,"already-initialized")}return n.initialize({options:e})}function sG(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(li);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function fI(t,e,n){let r=lI(t);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=YN(e),{host:o,port:a}=oG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||aG()}function YN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oG(t){let e=YN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:EN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:EN(o)}}}function EN(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function aG(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Jf=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}};function Uv(t,e){return _(this,null,function*(){return Gq(t,"POST","/v1/accounts:signInWithIdp",sI(t,e))})}var Xf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Kv=class extends Xf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Qu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return _(this,null,function*(){let s=yield Da._fromIdTokenResponse(e,r,i),o=CN(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=CN(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function CN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Qv=class t extends gn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function ZN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Qv._fromErrorAndOperation(t,s,e,r):s})}function cG(t,e,n=!1){return _(this,null,function*(){let r=yield Wu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Qu._forOperation(t,"link",r)})}function uG(t,e,n=!1){return _(this,null,function*(){let{auth:r}=t;if(zr(r.app))return Promise.reject(Ys(r));let i="reauthenticate";try{let s=yield Wu(t,ZN(r,i,e,t),n);oe(s.idToken,r,"internal-error");let o=aI(s.idToken);oe(o,r,"internal-error");let{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),Qu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Yi(r,"user-mismatch"),s}})}function lG(t,e,n=!1){return _(this,null,function*(){if(zr(t.app))return Promise.reject(Ys(t));let r="signIn",i=yield ZN(t,r,e),s=yield Qu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function ip(t,e,n,r){return we(t).onIdTokenChanged(e,n,r)}function pI(t,e,n){return we(t).beforeAuthStateChanged(e,n)}function sp(t,e,n,r){return we(t).onAuthStateChanged(e,n,r)}var ep="__sak";var tp=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ep,"1"),this.storage.removeItem(ep),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var dG=1e3,hG=10,fG=(()=>{class t extends tp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Xq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,hG):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},dG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return _(this,null,function*(){yield Si(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return _(this,null,function*(){let r=yield Si(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return _(this,null,function*(){yield Si(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),JN=fG;var pG=(()=>{class t extends tp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),gI=pG;function gG(t){return Promise.all(t.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var mG=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return _(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>_(this,null,function*(){return d(r.origin,o)})),l=yield gG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function XN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var Yv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=XN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Pr(){return window}function yG(t){Pr().location.href=t}function eM(){return typeof Pr().WorkerGlobalScope<"u"&&typeof Pr().importScripts=="function"}function _G(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vG(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function IG(){return eM()?self:null}var tM="firebaseLocalStorageDb",wG=1,np="firebaseLocalStorage",nM="fbase_key",Xs=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function op(t,e){return t.transaction([np],e?"readwrite":"readonly").objectStore(np)}function EG(){let t=indexedDB.deleteDatabase(tM);return new Xs(t).toPromise()}function Zv(){let t=indexedDB.open(tM,wG);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(np,{keyPath:nM})}catch(i){n(i)}}),t.addEventListener("success",()=>_(this,null,function*(){let r=t.result;r.objectStoreNames.contains(np)?e(r):(r.close(),yield EG(),e(yield Zv()))}))})}function TN(t,e,n){return _(this,null,function*(){let r=op(t,!0).put({[nM]:e,value:n});return new Xs(r).toPromise()})}function CG(t,e){return _(this,null,function*(){let n=op(t,!1).get(e),r=yield new Xs(n).toPromise();return r===void 0?null:r.value})}function bN(t,e){let n=op(t,!0).delete(e);return new Xs(n).toPromise()}var TG=800,bG=3,DG=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Zv(),this.db)})}_withRetries(n){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>bG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return eM()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=mG._getInstance(IG()),this.receiver._subscribe("keyChanged",(n,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var n,r;if(this.activeServiceWorker=yield _G(),!this.activeServiceWorker)return;this.sender=new Yv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Zv();return yield TN(n,ep,"1"),yield bN(n,ep),!0}catch{}return!1})}_withPendingWrite(n){return _(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>TN(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return _(this,null,function*(){let r=yield this._withRetries(i=>CG(i,n));return this.localCache[n]=r,r})}_remove(n){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>bN(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return _(this,null,function*(){let n=yield this._withRetries(s=>{let o=op(s,!1).getAll();return new Xs(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),TG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),rM=DG;var xre=QN("rcb"),Pre=new Js(3e4,6e4);function SG(t,e){return e?li(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Yu=class extends Jf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Uv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Uv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function AG(t){return lG(t.auth,new Yu(t),t.bypassAuthState)}function RG(t){let{auth:e,user:n}=t;return oe(n,e,"internal-error"),uG(n,new Yu(t),t.bypassAuthState)}function NG(t){return _(this,null,function*(){let{auth:e,user:n}=t;return oe(n,e,"internal-error"),cG(n,new Yu(t),t.bypassAuthState)})}var Jv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AG;case"linkViaPopup":case"linkViaRedirect":return NG;case"reauthViaPopup":case"reauthViaRedirect":return RG;default:Yi(this.auth,"internal-error")}}resolve(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var kre=new Js(2e3,1e4);var MG="pendingRedirect",Gf=new Map,Xv=class t extends Jv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Gf.get(this.auth._key());if(!e){try{let r=(yield xG(this.resolver,this.auth))?yield Si(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Gf.set(this.auth._key(),e)}return this.bypassAuthState||Gf.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Si(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Si(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function xG(t,e){return _(this,null,function*(){let n=OG(e),r=kG(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function PG(t,e){Gf.set(t._key(),e)}function kG(t){return li(t._redirectPersistence)}function OG(t){return qf(MG,t.config.apiKey,t.name)}function FG(t,e,n=!1){return _(this,null,function*(){if(zr(t.app))return Promise.reject(Ys(t));let r=lI(t),i=SG(r,e),o=yield new Xv(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var LG=10*60*1e3,eI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!VG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iM(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=LG&&this.cachedEventUids.clear(),this.cachedEventUids.has(DN(e))}saveEventToCache(e){this.cachedEventUids.add(DN(e)),this.lastProcessedEventTime=Date.now()}};function DN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iM({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function VG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iM(t);default:return!1}}function UG(n){return _(this,arguments,function*(t,e={}){return Sa(t,"GET","/v1/projects",e)})}var jG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BG=/^https?/;function $G(t){return _(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield UG(t);for(let n of e)try{if(HG(n))return}catch{}Yi(t,"unauthorized-domain")})}function HG(t){let e=Bv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BG.test(n))return!1;if(jG.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var qG=new Js(3e4,6e4);function SN(){let t=Pr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function GG(t){return new Promise((e,n)=>{var r,i,s;function o(){SN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{SN(),n(Zs(t,"network-request-failed"))},timeout:qG.get()})}if(!((i=(r=Pr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Pr().gapi)===null||s===void 0)&&s.load)o();else{let a=QN("iframefcb");return Pr()[a]=()=>{gapi.load?o():n(Zs(t,"network-request-failed"))},rG(`${iG()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw zf=null,e})}var zf=null;function zG(t){return zf=zf||GG(t),zf}var WG=new Js(5e3,15e3),KG="__/auth/iframe",QG="emulator/auth/iframe",YG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ZG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function JG(t){let e=t.config;oe(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?iI(e,QG):`https://${t.config.authDomain}/${KG}`,r={apiKey:e.apiKey,appName:t.name,v:mn},i=ZG.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ms(r).slice(1)}`}function XG(t){return _(this,null,function*(){let e=yield zG(t),n=Pr().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:JG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:YG,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Zs(t,"network-request-failed"),a=Pr().setTimeout(()=>{s(o)},WG.get());function c(){Pr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var ez={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tz=500,nz=600,rz="_blank",iz="http://localhost",rp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function sz(t,e,n,r=tz,i=nz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},ez),{width:r.toString(),height:i.toString(),top:s,left:o}),l=zt().toLowerCase();n&&(a=$N(l)?rz:n),jN(l)&&(e=e||iz,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[y,I])=>`${g}${y}=${I},`,"");if(Jq(l)&&a!=="_self")return oz(e||"",a),new rp(null);let f=window.open(e||"",a,d);oe(f,t,"popup-blocked");try{f.focus()}catch{}return new rp(f)}function oz(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var az="__/auth/handler",cz="emulator/auth/handler",uz=encodeURIComponent("fac");function AN(t,e,n,r,i,s){return _(this,null,function*(){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mn,eventId:i};if(e instanceof Xf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",$c(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Kv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${uz}=${encodeURIComponent(c)}`:"";return`${lz(t)}?${ms(a).slice(1)}${l}`})}function lz({config:t}){return t.emulator?iI(t,cz):`https://${t.authDomain}/${az}`}var jv="webStorageSupport",tI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gI,this._completeRedirectFn=FG,this._overrideRedirectResult=PG}_openPopup(e,n,r,i){return _(this,null,function*(){var s;Zi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield AN(e,n,r,Bv(),i);return sz(e,o,XN())})}_openRedirect(e,n,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield AN(e,n,r,Bv(),i);return yG(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Zi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return _(this,null,function*(){let n=yield XG(e),r=new eI(e);return n.register("authEvent",i=>(oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jv,{type:jv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[jv];o!==void 0&&n(!!o),Yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=$G(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return WN()||BN()||uI()}},sM=tI;var RN="@firebase/auth",NN="1.7.9";var nI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dz(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hz(t){gt(new pt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:KN(t)},l=new Wv(r,i,s,c);return sG(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gt(new pt("auth-internal",e=>{let n=lI(e.getProvider("auth").getImmediate());return(r=>new nI(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Q(RN,NN,dz(t)),Q(RN,NN,"esm2017")}var fz=5*60,pz=vm("authIdTokenMaxAge")||fz,MN=null,gz=t=>e=>_(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>pz)return;let i=n?.token;MN!==i&&(MN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function mI(t=wt()){let e=It(t,"auth");if(e.isInitialized())return e.getImmediate();let n=hI(t,{popupRedirectResolver:sM,persistence:[rM,JN,gI]}),r=vm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=gz(s.toString());pI(n,o,()=>o(n.currentUser)),ip(n,a=>o(a))}}let i=lD("auth");return i&&fI(n,`http://${i}`),n}function mz(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}nG({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Zs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hz("Browser");function aM(t){return new ae(function(e){var n=sp(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var cM="auth",eo=class{constructor(e){return e}},hr=class{constructor(){return vt(cM)}};var yI=new j("angularfire2.auth-instances");function cW(t,e){let n=Tt(cM,t,e);return n&&new eo(n)}function uW(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new eo(r)}}var lW={provide:hr,deps:[[new se,yI]]},dW={provide:eo,useFactory:cW,deps:[[new se,yI],Qe]};function uM(t,...e){return Q("angularfire",Ke.full,"auth"),qe([dW,lW,{provide:yI,useFactory:uW(t),multi:!0,deps:[te,ve,dt,st,[new se,Cn],...e]}])}var lM=Se(aM,!0);var dM=Se(mI,!0);var ap="analytics",fW="firebase_id",pW="origin",gW=60*1e3,mW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",TI="https://www.googletagmanager.com/gtag/js";var fn=new Er("@firebase/analytics");var yW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},On=new Ir("analytics","Analytics",yW);function _W(t){if(!t.startsWith(TI)){let e=On.create("invalid-gtag-resource",{gtagURL:t});return fn.warn(e.message),""}return t}function _M(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function vW(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function IW(t,e){let n=vW("firebase-js-sdk-policy",{createScriptURL:_W}),r=document.createElement("script"),i=`${TI}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function wW(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function EW(t,e,n,r,i,s){return _(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield _M(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){fn.error(a)}t("config",i,s)})}function CW(t,e,n,r,i){return _(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield _M(n);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){fn.error(s)}})}function TW(t,e,n,r){function i(s,...o){return _(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield CW(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield EW(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){fn.error(a)}})}return i}function bW(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=TW(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function DW(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(TI)&&n.src.includes(t))return n;return null}var SW=30,AW=1e3,vI=class{constructor(e={},n=AW){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},vM=new vI;function RW(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function NW(t){return _(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:RW(r)},s=mW.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw On.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function MW(r){return _(this,arguments,function*(t,e=vM,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw On.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw On.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new II;return setTimeout(()=>_(this,null,function*(){c.abort()}),n!==void 0?n:gW),IM({appId:i,apiKey:s,measurementId:o},a,c,e)})}function IM(s,o,a){return _(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=vM){var c;let{appId:l,measurementId:d}=t;try{yield xW(r,e)}catch(f){if(d)return fn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield NW(t);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!PW(g)){if(i.deleteThrottleMetadata(l),d)return fn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let y=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?zc(n,i.intervalMillis,SW):zc(n,i.intervalMillis),I={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return i.setThrottleMetadata(l,I),fn.debug(`Calling attemptFetch again in ${y} millis`),IM(t,I,r,i)}})}function xW(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(On.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function PW(t){if(!(t instanceof gn)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var II=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var wI;function kW(t,e,n,r,i){return _(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function OW(t,e,n,r){return _(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var EI;function FW(t){EI=t}function LW(t){wI=t}function VW(){return _(this,null,function*(){if(Gr())try{yield ps()}catch(t){return fn.warn(On.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return fn.warn(On.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function UW(t,e,n,r,i,s,o){return _(this,null,function*(){var a;let c=MW(t);c.then(y=>{n[y.measurementId]=y.appId,t.options.measurementId&&y.measurementId!==t.options.measurementId&&fn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>fn.error(y)),e.push(c);let l=VW().then(y=>{if(y)return r.getId()}),[d,f]=yield Promise.all([c,l]);DW(s)||IW(s,d.measurementId),EI&&(i("consent","default",EI),FW(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[pW]="firebase",g.update=!0,f!=null&&(g[fW]=f),i("config",d.measurementId,g),wI&&(i("set",wI),LW(void 0)),d.measurementId})}var CI=class{constructor(e){this.app=e}_delete(){return delete Aa[this.app.options.appId],Promise.resolve()}},Aa={},hM=[],fM={},_I="dataLayer",jW="gtag",pM,bI,gM=!1;function BW(){let t=[];if(jc()&&t.push("This is a browser extension environment."),Bc()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=On.create("invalid-analytics-context",{errorInfo:e});fn.warn(n.message)}}function $W(t,e,n){BW();let r=t.options.appId;if(!r)throw On.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)fn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw On.create("no-api-key");if(Aa[r]!=null)throw On.create("already-exists",{id:r});if(!gM){wW(_I);let{wrappedGtag:s,gtagCore:o}=bW(Aa,hM,fM,_I,jW);bI=s,pM=o,gM=!0}return Aa[r]=UW(t,hM,fM,e,pM,_I,n),new CI(t)}function wM(t=wt()){t=we(t);let e=It(t,ap);return e.isInitialized()?e.getImmediate():EM(t)}function EM(t,e={}){let n=It(t,ap);if(n.isInitialized()){let i=n.getImmediate();if(qc(e,n.getOptions()))return i;throw On.create("already-initialized")}return n.initialize({options:e})}function CM(){return _(this,null,function*(){if(jc()||!Bc()||!Gr())return!1;try{return yield ps()}catch{return!1}})}function TM(t,e,n){t=we(t),OW(bI,Aa[t.app.options.appId],e,n).catch(r=>fn.error(r))}function DI(t,e,n,r){t=we(t),kW(bI,Aa[t.app.options.appId],e,n,r).catch(i=>fn.error(i))}var mM="@firebase/analytics",yM="0.10.8";function HW(){gt(new pt(ap,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return $W(r,i,n)},"PUBLIC")),gt(new pt("analytics-internal",t,"PRIVATE")),Q(mM,yM),Q(mM,yM,"esm2017");function t(e){try{let n=e.getProvider(ap).getImmediate();return{logEvent:(r,i,s)=>DI(n,r,i,s)}}catch(n){throw On.create("interop-component-reg-failed",{reason:n})}}}HW();var to=class{constructor(e){return e}},SM="analytics",AI=class{constructor(){return vt(SM)}};var RI="__angularfire_symbol__analyticsIsSupportedValue",AM="__angularfire_symbol__analyticsIsSupported";globalThis[AM]||=CM().then(t=>globalThis[RI]=t).catch(()=>globalThis[RI]=!1);var cp={async:()=>globalThis[AM],sync:()=>{let t=globalThis[RI];if(t===void 0)throw new Error(ba("Analytics"));return t}},RM=cp.async,NM=Se(wM,!0);var qW=Se(DI,!0);var GW=Se(TM,!0);var MI=(()=>{class t{initialized;disposables=[];constructor(n,r,i){Q("angularfire",Ke.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),RM().then(()=>{let o=i.get(to);o?this.disposables=[lM(n).subscribe(a=>{GW(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(ne(eo),ne(te),ne(ve))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),zW="firebase_event_origin",WW="firebase_previous_class",KW="firebase_previous_id",QW="firebase_previous_screen",YW="firebase_screen_class",bM="firebase_screen_id",ZW="firebase_screen",NI="outlet",JW="page_path",XW="page_title",Zu="screen_class",DM="screen_name",e4="screen_view",t4="auto",n4="#",r4=Math.floor(Math.random()*(2**32-1))-2**31,SI={},i4=t=>{let e=[t[Zu],t[NI]].join(n4);if(SI.hasOwnProperty(e))return SI[e];{let n=r4++;return SI[e]=n,n}},s4=(t,e,n)=>t.events.pipe(un(i=>i instanceof Fu)).pipe(_n(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return X(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[DM]:l,[JW]:`/${o}`,[zW]:t4,[ZW]:l,[NI]:i.snapshot.outlet};e&&(d[XW]=e.getTitle());let f=a.component;if(f){if(f===xv){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return X(ye(V({},d),{[Zu]:f}));if(f){let g=n.resolveComponentFactory(f);return X(ye(V({},d),{[Zu]:g.selector}))}return X(null)}),un(i=>!!i),W(i=>V({[YW]:i[Zu],[bM]:i4(i)},i)),$m(i=>i[NI]),mt(i=>i.pipe(th((s,o)=>JSON.stringify(s)===JSON.stringify(o)),Wo(void 0),rh(),W(([s,o])=>s?V({[WW]:s[Zu],[QW]:s[DM],[KW]:s[bM]},o):o)))),MM=(()=>{class t{disposable;constructor(n,r,i,s,o,a){Q("angularfire",Ke.full,"screen-tracking"),RM().then(()=>{let c=a.get(to);!n||!c||s.runOutsideAngular(()=>{this.disposable=s4(n,r,i).pipe(_n(l=>_(this,null,function*(){return o&&(yield o.initialized),qW(c,e4,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(ne(Uf,8),ne(Ef,8),ne(Ui),ne(te),ne(MI,8),ne(ve))};static \u0275prov=B({token:t,factory:t.\u0275fac})}return t})(),xI=new j("angularfire2.analytics-instances");function o4(t,e){if(!cp.sync())return null;let n=Tt(SM,t,e);return n&&new to(n)}function a4(t){return(e,n)=>{if(!cp.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new to(r)}}var c4={provide:AI,deps:[[new se,xI]]},u4={provide:to,useFactory:o4,deps:[[new se,xI],Qe]};function xM(t,...e){return Q("angularfire",Ke.full,"analytics"),qe([u4,c4,{provide:Gi,useValue:cp.async,multi:!0},{provide:xI,useFactory:a4(t),multi:!0,deps:[te,ve,dt,st,...e]}])}var PM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kM={};var Ji,PI;(function(){var t;function e(C,v){function w(){}w.prototype=v.prototype,C.D=v.prototype,C.prototype=new w,C.prototype.constructor=C,C.C=function(T,b,A){for(var E=Array(arguments.length-2),$r=2;$r<arguments.length;$r++)E[$r-2]=arguments[$r];return v.prototype[b].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,w){w||(w=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(b=0;16>b;++b)T[b]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=C.g[0],w=C.g[1],b=C.g[2];var A=C.g[3],E=v+(A^w&(b^A))+T[0]+3614090360&4294967295;v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[3]+3250441966&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[4]+4118548399&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[7]+4249261313&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[8]+1770035416&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[11]+2304563134&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(A^w&(b^A))+T[12]+1804603682&4294967295,v=w+(E<<7&4294967295|E>>>25),E=A+(b^v&(w^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(w^A&(v^w))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=w+(v^b&(A^v))+T[15]+1236535329&4294967295,w=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(w^b))+T[1]+4129170786&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[0]+3921069994&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[5]+3593408605&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[4]+3889429448&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[9]+568446438&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[8]+1163531501&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(w^b))+T[13]+2850285829&4294967295,v=w+(E<<5&4294967295|E>>>27),E=A+(w^b&(v^w))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^w&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=w+(A^v&(b^A))+T[12]+2368359562&4294967295,w=b+(E<<20&4294967295|E>>>12),E=v+(w^b^A)+T[5]+4294588738&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[14]+4259657740&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[1]+2763975236&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[10]+3200236656&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[13]+681279174&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[6]+76029189&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(w^b^A)+T[9]+3654602809&4294967295,v=w+(E<<4&4294967295|E>>>28),E=A+(v^w^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^w)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=w+(b^A^v)+T[2]+3299628645&4294967295,w=b+(E<<23&4294967295|E>>>9),E=v+(b^(w|~A))+T[0]+4096336452&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[5]+4237533241&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[12]+1700485571&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[1]+2240044497&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[8]+1873313359&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[13]+1309151649&4294967295,w=b+(E<<21&4294967295|E>>>11),E=v+(b^(w|~A))+T[4]+4149444226&4294967295,v=w+(E<<6&4294967295|E>>>26),E=A+(w^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~w))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=w+(A^(b|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var w=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=w;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(T[b++]=C.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=C[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var w=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=w&255,w/=256;for(this.u(C),C=Array(16),v=w=0;4>v;++v)for(var T=0;32>T;T+=8)C[w++]=this.g[v]>>>T&255;return C};function s(C,v){var w=a;return Object.prototype.hasOwnProperty.call(w,C)?w[C]:w[C]=v(C)}function o(C,v){this.h=v;for(var w=[],T=!0,b=C.length-1;0<=b;b--){var A=C[b]|0;T&&A==v||(w[b]=A,T=!1)}this.g=w}var a={};function c(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return S(l(-C));for(var v=[],w=1,T=0;C>=w;T++)v[T]=C/w|0,w*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return S(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),T=f,b=0;b<C.length;b+=8){var A=Math.min(8,C.length-b),E=parseInt(C.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(w),T=T.add(l(E)))}return T}var f=c(0),g=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-S(this).m();for(var C=0,v=1,w=0;w<this.g.length;w++){var T=this.i(w);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(R(this))return"-"+S(this).toString(C);for(var v=l(Math.pow(C,6)),w=this,T="";;){var b=Z(w,v).g;w=P(w,b.j(v));var A=((0<w.g.length?w.g[0]:w.h)>>>0).toString(C);if(w=b,I(w))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}t.l=function(C){return C=P(this,C),R(C)?-1:I(C)?0:1};function S(C){for(var v=C.g.length,w=[],T=0;T<v;T++)w[T]=~C.g[T];return new o(w,~C.h).add(g)}t.abs=function(){return R(this)?S(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(C.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,w[b]=E<<16|A}return new o(w,w[w.length-1]&-2147483648?-1:0)};function P(C,v){return C.add(S(v))}t.j=function(C){if(I(this)||I(C))return f;if(R(this))return R(C)?S(this).j(S(C)):S(S(this).j(C));if(R(C))return S(this.j(S(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,w=[],T=0;T<2*v;T++)w[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<C.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,$r=C.i(b)>>>16,Ic=C.i(b)&65535;w[2*T+2*b]+=E*Ic,$(w,2*T+2*b),w[2*T+2*b+1]+=A*Ic,$(w,2*T+2*b+1),w[2*T+2*b+1]+=E*$r,$(w,2*T+2*b+1),w[2*T+2*b+2]+=A*$r,$(w,2*T+2*b+2)}for(T=0;T<v;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=v;T<2*v;T++)w[T]=0;return new o(w,0)};function $(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function z(C,v){this.g=C,this.h=v}function Z(C,v){if(I(v))throw Error("division by zero");if(I(C))return new z(f,f);if(R(C))return v=Z(S(C),v),new z(S(v.g),S(v.h));if(R(v))return v=Z(C,S(v)),new z(S(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var w=g,T=v;0>=T.l(C);)w=Ve(w),T=Ve(T);var b=ee(w,1),A=ee(T,1);for(T=ee(T,2),w=ee(w,2);!I(T);){var E=A.add(T);0>=E.l(C)&&(b=b.add(w),A=E),T=ee(T,1),w=ee(w,1)}return v=P(C,b.j(v)),new z(b,v)}for(b=f;0<=C.l(v);){for(w=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(w)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(w),E=A.j(v);R(E)||0<E.l(C);)w-=T,A=l(w),E=A.j(v);I(A)&&(A=g),b=b.add(A),C=P(C,E)}return new z(b,C)}t.A=function(C){return Z(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)&C.i(T);return new o(w,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)|C.i(T);return new o(w,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),w=[],T=0;T<v;T++)w[T]=this.i(T)^C.i(T);return new o(w,this.h^C.h)};function Ve(C){for(var v=C.g.length+1,w=[],T=0;T<v;T++)w[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(w,C.h)}function ee(C,v){var w=v>>5;v%=32;for(var T=C.g.length-w,b=[],A=0;A<T;A++)b[A]=0<v?C.i(A+w)>>>v|C.i(A+w+1)<<32-v:C.i(A+w);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PI=kM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Ji=kM.Integer=o}).apply(typeof PM<"u"?PM:typeof self<"u"?self:typeof window<"u"?window:{});var up=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},di={};var kI,l4,Ra,OI,Ju,lp,FI,LI,VI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof up=="object"&&up];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function I(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var O=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)O[Ue-2]=arguments[Ue];return h.prototype[D].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let O=0;O<N;O++)u[D+O]=m[O]}else u.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function $(u){return/^[\s\xa0]*$/.test(u)}function z(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function Z(u){return Z[" "](u),u}Z[" "]=function(){};var Ve=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function ee(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<w.length;N++)p=w[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Kg;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class $r{constructor(){this.h=this.g=null}add(h,p){let m=Ic.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ic=new P(()=>new AF,u=>u.reset());class AF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let wc,Ec=!1,Kg=new $r,sb=()=>{let u=a.Promise.resolve(void 0);wc=()=>{u.then(RF)}};var RF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=Ic;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Ec=!1};function Ci(){this.s=this.s,this.C=this.C}Ci.prototype.s=!1,Ci.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ci.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $t(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}$t.prototype.h=function(){this.defaultPrevented=!0};var NF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function Cc(u,h){if($t.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Ve){e:{try{Z(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:MF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Cc.aa.h.call(this)}}I(Cc,$t);var MF={2:"touch",3:"pen",4:"mouse"};Cc.prototype.h=function(){Cc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Tc="closure_listenable_"+(1e6*Math.random()|0),xF=0;function PF(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++xF,this.da=this.fa=!1}function nd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function rd(u){this.src=u,this.g={},this.h=0}rd.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=Yg(u,h,m,D);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new PF(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function Qg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(nd(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Yg(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var Zg="closure_lm_"+(1e6*Math.random()|0),Jg={};function ob(u,h,p,m,D){if(m&&m.once)return cb(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)ob(u,h[N],p,m,D);return null}return p=nm(p),u&&u[Tc]?u.K(h,p,l(m)?!!m.capture:!!m,D):ab(u,h,p,!1,m,D)}function ab(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var O=l(D)?!!D.capture:!!D,Ue=em(u);if(Ue||(u[Zg]=Ue=new rd(u)),p=Ue.add(h,p,m,O,N),p.proxy)return p;if(m=kF(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)NF||(D=O),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(lb(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function kF(){function u(p){return h.call(u.src,u.listener,p)}let h=OF;return u}function cb(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)cb(u,h[N],p,m,D);return null}return p=nm(p),u&&u[Tc]?u.L(h,p,l(m)?!!m.capture:!!m,D):ab(u,h,p,!0,m,D)}function ub(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)ub(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=nm(p),u&&u[Tc]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=Yg(N,p,m,D),-1<p&&(nd(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=em(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Yg(h,p,m,D)),(p=-1<u?h[u]:null)&&Xg(p))}function Xg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Tc])Qg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(lb(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=em(h))?(Qg(p,u),p.h==0&&(p.src=null,h[Zg]=null)):nd(u)}}}function lb(u){return u in Jg?Jg[u]:Jg[u]="on"+u}function OF(u,h){if(u.da)u=!0;else{h=new Cc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&Xg(u),u=p.call(m,h)}return u}function em(u){return u=u[Zg],u instanceof rd?u:null}var tm="__closure_events_fn_"+(1e9*Math.random()>>>0);function nm(u){return typeof u=="function"?u:(u[tm]||(u[tm]=function(h){return u.handleEvent(h)}),u[tm])}function Ht(){Ci.call(this),this.i=new rd(this),this.M=this,this.F=null}I(Ht,Ci),Ht.prototype[Tc]=!0,Ht.prototype.removeEventListener=function(u,h,p,m){ub(this,u,h,p,m)};function on(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new $t(h,u);else if(h instanceof $t)h.target=h.target||u;else{var D=h;h=new $t(m,u),T(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var O=h.g=p[N];D=id(O,m,!0,h)&&D}if(O=h.g=u,D=id(O,m,!0,h)&&D,D=id(O,m,!1,h)&&D,p)for(N=0;N<p.length;N++)O=h.g=p[N],D=id(O,m,!1,h)&&D}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)nd(p[m]);delete u.g[h],u.h--}}this.F=null},Ht.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Ht.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function id(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==p){var Ue=O.listener,Vt=O.ha||O.src;O.fa&&Qg(u.i,O),D=Ue.call(Vt,m)!==!1&&D}}return D&&!m.defaultPrevented}function db(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function hb(u){u.g=db(()=>{u.g=null,u.i&&(u.i=!1,hb(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class FF extends Ci{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:hb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bc(u){Ci.call(this),this.h=u,this.g={}}I(bc,Ci);var fb=[];function pb(u){ee(u.g,function(h,p){this.g.hasOwnProperty(p)&&Xg(h)},u),u.g={}}bc.prototype.N=function(){bc.aa.N.call(this),pb(this)},bc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rm=a.JSON.stringify,LF=a.JSON.parse,VF=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function im(){}im.prototype.h=null;function gb(u){return u.h||(u.h=u.i())}function mb(){}var Dc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sm(){$t.call(this,"d")}I(sm,$t);function om(){$t.call(this,"c")}I(om,$t);var ls={},yb=null;function sd(){return yb=yb||new Ht}ls.La="serverreachability";function _b(u){$t.call(this,ls.La,u)}I(_b,$t);function Sc(u){let h=sd();on(h,new _b(h))}ls.STAT_EVENT="statevent";function vb(u,h){$t.call(this,ls.STAT_EVENT,u),this.stat=h}I(vb,$t);function an(u){let h=sd();on(h,new vb(h,u))}ls.Ma="timingevent";function Ib(u,h){$t.call(this,ls.Ma,u),this.size=h}I(Ib,$t);function Ac(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Rc(){this.g=!0}Rc.prototype.xa=function(){this.g=!1};function UF(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var O="",Ue=N.split("&"),Vt=0;Vt<Ue.length;Vt++){var Ae=Ue[Vt].split("=");if(1<Ae.length){var qt=Ae[0];Ae=Ae[1];var Gt=qt.split("_");O=2<=Gt.length&&Gt[1]=="type"?O+(qt+"="+Ae+"&"):O+(qt+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+O})}function jF(u,h,p,m,D,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+O})}function Do(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+$F(u,p)+(m?" "+m:"")})}function BF(u,h){u.info(function(){return"TIMEOUT: "+h})}Rc.prototype.info=function(){};function $F(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<D.length;O++)D[O]=""}}}}return rm(p)}catch{return h}}var od={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},am;function ad(){}I(ad,im),ad.prototype.g=function(){return new XMLHttpRequest},ad.prototype.i=function(){return{}},am=new ad;function Ti(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new bc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eb}function Eb(){this.i=null,this.g="",this.h=!1}var Cb={},cm={};function um(u,h,p){u.L=1,u.v=dd(Hr(h)),u.m=p,u.P=!0,Tb(u,null)}function Tb(u,h){u.F=Date.now(),cd(u),u.A=Hr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),Vb(p.i,"t",m),u.C=0,p=u.j.J,u.h=new Eb,u.g=nD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new FF(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(fb[0]=D.toString()),D=fb);for(var N=0;N<D.length;N++){var O=ob(p,D[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Sc(),UF(u.i,u.u,u.A,u.l,u.R,u.m)}Ti.prototype.ca=function(u){u=u.target;let h=this.M;h&&qr(u)==3?h.j():this.Y(u)},Ti.prototype.Y=function(u){try{if(u==this.g)e:{let Gt=qr(this.g);var h=this.g.Ba();let Ro=this.g.Z();if(!(3>Gt)&&(Gt!=3||this.g&&(this.h.h||this.g.oa()||Gb(this.g)))){this.J||Gt!=4||h==7||(h==8||0>=Ro?Sc(3):Sc(2)),lm(this);var p=this.g.Z();this.X=p;t:if(bb(this)){var m=Gb(this.g);u="";var D=m.length,N=qr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ds(this),Nc(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,jF(this.i,this.u,this.A,this.l,this.R,Gt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,Vt=this.g;if((Ue=Vt.g?Vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ue)){var Ae=Ue;break t}}Ae=null}if(p=Ae)Do(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dm(this,p);else{this.o=!1,this.s=3,an(12),ds(this),Nc(this);break e}}if(this.P){p=!0;let tr;for(;!this.J&&this.C<O.length;)if(tr=HF(this,O),tr==cm){Gt==4&&(this.s=4,an(14),p=!1),Do(this.i,this.l,null,"[Incomplete Response]");break}else if(tr==Cb){this.s=4,an(15),Do(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else Do(this.i,this.l,tr,null),dm(this,tr);if(bb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Gt!=4||O.length!=0||this.h.h||(this.s=1,an(16),p=!1),this.o=this.o&&p,!p)Do(this.i,this.l,O,"[Invalid Chunked Response]"),ds(this),Nc(this);else if(0<O.length&&!this.W){this.W=!0;var qt=this.j;qt.g==this&&qt.ba&&!qt.M&&(qt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),ym(qt),qt.M=!0,an(11))}}else Do(this.i,this.l,O,null),dm(this,O);Gt==4&&ds(this),this.o&&!this.J&&(Gt==4?Jb(this.j,this):(this.o=!1,cd(this)))}else oL(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,an(12)):(this.s=0,an(13)),ds(this),Nc(this)}}}catch{}finally{}};function bb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function HF(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?cm:(p=Number(h.substring(p,m)),isNaN(p)?Cb:(m+=1,m+p>h.length?cm:(h=h.slice(m,m+p),u.C=m+p,h)))}Ti.prototype.cancel=function(){this.J=!0,ds(this)};function cd(u){u.S=Date.now()+u.I,Db(u,u.I)}function Db(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Ac(g(u.ba,u),h)}function lm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ti.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(BF(this.i,this.A),this.L!=2&&(Sc(),an(17)),ds(this),this.s=2,Nc(this)):Db(this,this.S-u)};function Nc(u){u.j.G==0||u.J||Jb(u.j,u)}function ds(u){lm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,pb(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function dm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||hm(p.h,u))){if(!u.K&&hm(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)md(p),pd(p);else break e;mm(p),an(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Ac(g(p.Za,p),6e3));if(1>=Rb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else fs(p,11)}else if((u.K||p.g==u)&&md(p),!$(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ae=D[h];if(p.T=Ae[0],Ae=Ae[1],p.G==2)if(Ae[0]=="c"){p.K=Ae[1],p.ia=Ae[2];let qt=Ae[3];qt!=null&&(p.la=qt,p.j.info("VER="+p.la));let Gt=Ae[4];Gt!=null&&(p.Aa=Gt,p.j.info("SVER="+p.Aa));let Ro=Ae[5];Ro!=null&&typeof Ro=="number"&&0<Ro&&(m=1.5*Ro,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let tr=u.g;if(tr){let _d=tr.g?tr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_d){var N=m.h;N.g||_d.indexOf("spdy")==-1&&_d.indexOf("quic")==-1&&_d.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(fm(N,N.h),N.h=null))}if(m.D){let _m=tr.g?tr.g.getResponseHeader("X-HTTP-Session-Id"):null;_m&&(m.ya=_m,We(m.I,m.D,_m))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=tD(m,m.J?m.ia:null,m.W),O.K){Nb(m.h,O);var Ue=O,Vt=m.L;Vt&&(Ue.I=Vt),Ue.B&&(lm(Ue),cd(Ue)),m.g=O}else Yb(m);0<p.i.length&&gd(p)}else Ae[0]!="stop"&&Ae[0]!="close"||fs(p,7);else p.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?fs(p,7):gm(p):Ae[0]!="noop"&&p.l&&p.l.ta(Ae),p.v=0)}}Sc(4)}catch{}}var qF=class{constructor(u,h){this.g=u,this.map=h}};function Sb(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ab(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Rb(u){return u.h?1:u.g?u.g.size:0}function hm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function fm(u,h){u.g?u.g.add(h):u.h=h}function Nb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}Sb.prototype.cancel=function(){if(this.i=Mb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Mb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function GF(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function zF(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function xb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=zF(u),m=GF(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var Pb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WF(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function hs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hs){this.h=u.h,ud(this,u.j),this.o=u.o,this.g=u.g,ld(this,u.s),this.l=u.l;var h=u.i,p=new Pc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),kb(this,p),this.m=u.m}else u&&(h=String(u).match(Pb))?(this.h=!1,ud(this,h[1]||"",!0),this.o=Mc(h[2]||""),this.g=Mc(h[3]||"",!0),ld(this,h[4]),this.l=Mc(h[5]||"",!0),kb(this,h[6]||"",!0),this.m=Mc(h[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}hs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(xc(h,Ob,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(xc(h,Ob,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(xc(p,p.charAt(0)=="/"?YF:QF,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",xc(p,JF)),u.join("")};function Hr(u){return new hs(u)}function ud(u,h,p){u.j=p?Mc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function ld(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function kb(u,h,p){h instanceof Pc?(u.i=h,XF(u.i,u.h)):(p||(h=xc(h,ZF)),u.i=new Pc(h,u.h))}function We(u,h,p){u.i.set(h,p)}function dd(u){return We(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Mc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function xc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,KF),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function KF(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ob=/[#\/\?@]/g,QF=/[#\?:]/g,YF=/[#\?]/g,ZF=/[#\?@]/g,JF=/#/g;function Pc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function bi(u){u.g||(u.g=new Map,u.h=0,u.i&&WF(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Pc.prototype,t.add=function(u,h){bi(this),this.i=null,u=So(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Fb(u,h){bi(u),h=So(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function Lb(u,h){return bi(u),h=So(u,h),u.g.has(h)}t.forEach=function(u,h){bi(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},t.na=function(){bi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},t.V=function(u){bi(this);let h=[];if(typeof u=="string")Lb(this,u)&&(h=h.concat(this.g.get(So(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return bi(this),this.i=null,u=So(this,u),Lb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Vb(u,h,p){Fb(u,h),0<p.length&&(u.i=null,u.g.set(So(u,h),R(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var D=N;O[m]!==""&&(D+="="+encodeURIComponent(String(O[m]))),u.push(D)}}return this.i=u.join("&")};function So(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function XF(u,h){h&&!u.j&&(bi(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(Fb(this,m),Vb(this,D,p))},u)),u.j=h}function eL(u,h){let p=new Rc;if(a.Image){let m=new Image;m.onload=y(Di,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(Di,p,"TestLoadImage: error",!1,h,m),m.onabort=y(Di,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(Di,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function tL(u,h){let p=new Rc,m=new AbortController,D=setTimeout(()=>{m.abort(),Di(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?Di(p,"TestPingServer: ok",!0,h):Di(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Di(p,"TestPingServer: error",!1,h)})}function Di(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function nL(){this.g=new VF}function rL(u,h,p){let m=p||"";try{xb(u,function(D,N){let O=D;l(D)&&(O=rm(D)),h.push(m+N+"="+encodeURIComponent(O))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function kc(u){this.l=u.Ub||null,this.j=u.eb||!1}I(kc,im),kc.prototype.g=function(){return new hd(this.l,this.j)},kc.prototype.i=function(u){return function(){return u}}({});function hd(u,h){Ht.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(hd,Ht),t=hd.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Fc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Fc(this)),this.g&&(this.readyState=3,Fc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ub(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ub(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Oc(this):Fc(this),this.readyState==3&&Ub(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Oc(this))},t.Qa=function(u){this.g&&(this.response=u,Oc(this))},t.ga=function(){this.g&&Oc(this)};function Oc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Fc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Fc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(hd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function jb(u){let h="";return ee(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function pm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=jb(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):We(u,h,p))}function ct(u){Ht.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(ct,Ht);var iL=/^https?$/i,sL=["POST","PUT"];t=ct.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():am.g(),this.v=this.o?gb(this.o):gb(am),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){Bb(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sL,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of p)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qb(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){Bb(this,N)}};function Bb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,$b(u),fd(u)}function $b(u){u.A||(u.A=!0,on(u,"complete"),on(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,on(this,"complete"),on(this,"abort"),fd(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fd(this,!0)),ct.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Hb(this):this.bb())},t.bb=function(){Hb(this)};function Hb(u){if(u.h&&typeof o<"u"&&(!u.v[1]||qr(u)!=4||u.Z()!=2)){if(u.u&&qr(u)==4)db(u.Ea,0,u);else if(on(u,"readystatechange"),qr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var D=String(u.D).match(Pb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!iL.test(D?D.toLowerCase():"")}p=m}if(p)on(u,"complete"),on(u,"success");else{u.m=6;try{var N=2<qr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",$b(u)}}finally{fd(u)}}}}function fd(u,h){if(u.g){qb(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||on(u,"ready");try{p.onreadystatechange=m}catch{}}}function qb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function qr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<qr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),LF(h)}};function Gb(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function oL(u){let h={};u=(u.g&&2<=qr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if($(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}C(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function zb(u){this.Aa=0,this.i=[],this.j=new Rc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lc("baseRetryDelayMs",5e3,u),this.cb=Lc("retryDelaySeedMs",1e4,u),this.Wa=Lc("forwardChannelMaxRetries",2,u),this.wa=Lc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Sb(u&&u.concurrentRequestLimit),this.Da=new nL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zb.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){an(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=tD(this,null,this.W),gd(this)};function gm(u){if(Wb(u),u.G==3){var h=u.U++,p=Hr(u.I);if(We(p,"SID",u.K),We(p,"RID",h),We(p,"TYPE","terminate"),Vc(u,p),h=new Ti(u,u.j,h),h.L=2,h.v=dd(Hr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=nD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),cd(h)}eD(u)}function pd(u){u.g&&(ym(u),u.g.cancel(),u.g=null)}function Wb(u){pd(u),u.u&&(a.clearTimeout(u.u),u.u=null),md(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function gd(u){if(!Ab(u.h)&&!u.s){u.s=!0;var h=u.Ga;wc||sb(),Ec||(wc(),Ec=!0),Kg.add(h,u),u.B=0}}function aL(u,h){return Rb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Ac(g(u.Ga,u,h),Xb(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new Ti(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Qb(this,D,h),p=Hr(this.I),We(p,"RID",u),We(p,"CVER",22),this.D&&We(p,"X-HTTP-Session-Id",this.D),Vc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(jb(N)))+"&"+h:this.m&&pm(p,this.m,N)),fm(this.h,D),this.Ua&&We(p,"TYPE","init"),this.P?(We(p,"$req",h),We(p,"SID","null"),D.T=!0,um(D,p,null)):um(D,p,h),this.G=2}}else this.G==3&&(u?Kb(this,u):this.i.length==0||Ab(this.h)||Kb(this))};function Kb(u,h){var p;h?p=h.l:p=u.U++;let m=Hr(u.I);We(m,"SID",u.K),We(m,"RID",p),We(m,"AID",u.T),Vc(u,m),u.m&&u.o&&pm(m,u.m,u.o),p=new Ti(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=Qb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),fm(u.h,p),um(p,m,h)}function Vc(u,h){u.H&&ee(u.H,function(p,m){We(h,m,p)}),u.l&&xb({},function(p,m){We(h,m,p)})}function Qb(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let O=["count="+p];N==-1?0<p?(N=D[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Ue=!0;for(let Vt=0;Vt<p;Vt++){let Ae=D[Vt].g,qt=D[Vt].map;if(Ae-=N,0>Ae)N=Math.max(0,D[Vt].g-100),Ue=!1;else try{rL(qt,O,"req"+Ae+"_")}catch{m&&m(qt)}}if(Ue){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function Yb(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;wc||sb(),Ec||(wc(),Ec=!0),Kg.add(h,u),u.v=0}}function mm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Ac(g(u.Fa,u),Xb(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Zb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Ac(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,an(10),pd(this),Zb(this))};function ym(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function Zb(u){u.g=new Ti(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Hr(u.qa);We(h,"RID","rpc"),We(h,"SID",u.K),We(h,"AID",u.T),We(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&We(h,"TO",u.ja),We(h,"TYPE","xmlhttp"),Vc(u,h),u.m&&u.o&&pm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=dd(Hr(h)),p.m=null,p.P=!0,Tb(p,u)}t.Za=function(){this.C!=null&&(this.C=null,pd(this),mm(this),an(19))};function md(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function Jb(u,h){var p=null;if(u.g==h){md(u),ym(u),u.g=null;var m=2}else if(hm(u.h,h))p=h.D,Nb(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=sd(),on(m,new Ib(m,p)),gd(u)}else Yb(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&aL(u,h)||m==2&&mm(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:fs(u,5);break;case 4:fs(u,10);break;case 3:fs(u,6);break;default:fs(u,2)}}}function Xb(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function fs(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new hs(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ud(m,"https"),dd(m),D?eL(m.toString(),p):tL(m.toString(),p)}else an(2);u.G=0,u.l&&u.l.sa(h),eD(u),Wb(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),an(2)):(this.j.info("Failed to ping google.com"),an(1))};function eD(u){if(u.G=0,u.ka=[],u.l){let h=Mb(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function tD(u,h,p){var m=p instanceof hs?Hr(p):new hs(p);if(m.g!="")h&&(m.g=h+"."+m.g),ld(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new hs(null);m&&ud(N,m),h&&(N.g=h),D&&ld(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&We(m,p,h),We(m,"VER",u.la),Vc(u,m),m}function nD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new ct(new kc({eb:p})):new ct(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rD(){}t=rD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function yd(){}yd.prototype.g=function(u,h){return new Rn(u,h)};function Rn(u,h){Ht.call(this),this.g=new zb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!$(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!$(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Ao(this)}I(Rn,Ht),Rn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rn.prototype.close=function(){gm(this.g)},Rn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=rm(u),u=p);h.i.push(new qF(h.Ya++,u)),h.G==3&&gd(h)},Rn.prototype.N=function(){this.g.l=null,delete this.j,gm(this.g),delete this.g,Rn.aa.N.call(this)};function iD(u){sm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}I(iD,sm);function sD(){om.call(this),this.status=1}I(sD,om);function Ao(u){this.g=u}I(Ao,rD),Ao.prototype.ua=function(){on(this.g,"a")},Ao.prototype.ta=function(u){on(this.g,new iD(u))},Ao.prototype.sa=function(u){on(this.g,new sD)},Ao.prototype.ra=function(){on(this.g,"b")},yd.prototype.createWebChannel=yd.prototype.g,Rn.prototype.send=Rn.prototype.o,Rn.prototype.open=Rn.prototype.m,Rn.prototype.close=Rn.prototype.close,VI=di.createWebChannelTransport=function(){return new yd},LI=di.getStatEventTarget=function(){return sd()},FI=di.Event=ls,lp=di.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},od.NO_ERROR=0,od.TIMEOUT=8,od.HTTP_ERROR=6,Ju=di.ErrorCode=od,wb.COMPLETE="complete",OI=di.EventType=wb,mb.EventType=Dc,Dc.OPEN="a",Dc.CLOSE="b",Dc.ERROR="c",Dc.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,Ra=di.WebChannel=mb,l4=di.FetchXmlHttpFactory=kc,ct.prototype.listenOnce=ct.prototype.L,ct.prototype.getLastError=ct.prototype.Ka,ct.prototype.getLastErrorCode=ct.prototype.Ba,ct.prototype.getStatus=ct.prototype.Z,ct.prototype.getResponseJson=ct.prototype.Oa,ct.prototype.getResponseText=ct.prototype.oa,ct.prototype.send=ct.prototype.ea,ct.prototype.setWithCredentials=ct.prototype.Ha,kI=di.XhrIo=ct}).apply(typeof up<"u"?up:typeof self<"u"?self:typeof window<"u"?window:{});var OM="@firebase/firestore";var Ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");var Ka="10.14.0";var so=new Er("@firebase/firestore");function Xu(){return so.logLevel}function G(t,...e){if(so.logLevel<=Wt.DEBUG){let n=e.map(IE);so.debug(`Firestore (${Ka}): ${t}`,...n)}}function fi(t,...e){if(so.logLevel<=Wt.ERROR){let n=e.map(IE);so.error(`Firestore (${Ka}): ${t}`,...n)}}function Fa(t,...e){if(so.logLevel<=Wt.WARN){let n=e.map(IE);so.warn(`Firestore (${Ka}): ${t}`,...n)}}function IE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function re(t="Unexpected state"){let e=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: `+t;throw fi(e),new Error(e)}function Fe(t,e){t||re()}function ce(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Fr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var gp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},HI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}},qI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},GI=class{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{G("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(G("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(G("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Fe(typeof r.accessToken=="string"),new gp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new Ft(e)}},zI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},WI=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zI(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},KI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},QI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);let r=s=>{s.error!=null&&G("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,G("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{G("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):G("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new KI(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function d4(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var mp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=d4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Re(t,e){return t<e?-1:t>e?1:0}function La(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var xt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var de=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new xt(0,0))}static max(){return new t(new xt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var yp=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&re(),r===void 0?r=e.length-n:r>e.length-n&&re(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},ot=class t extends yp{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new q(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},h4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fn=class t extends yp{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return h4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new q(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new q(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new q(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Y=class t{constructor(e){this.path=e}static fromPath(e){return new t(ot.fromString(e))}static fromName(e){return new t(ot.fromString(e).popFirst(5))}static empty(){return new t(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ot.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new ot(e.slice()))}};var YI=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};YI.UNKNOWN_ID=-1;function f4(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new oo(i,Y.empty(),e)}function p4(t){return new oo(t.readTime,t.key,-1)}var oo=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(de.min(),Y.empty(),-1)}static max(){return new t(de.max(),Y.empty(),-1)}};function g4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}var m4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ZI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function vl(t){return _(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==m4)throw t;G("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function y4(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Il(t){return t.name==="IndexedDbTransactionError"}var mx=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Wp(t){return t==null}function sl(t){return t===0&&1/t==-1/0}function _4(t){return typeof t=="number"&&Number.isInteger(t)&&!sl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var v4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gse=[...v4,"documentOverlays"],I4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],w4=I4,E4=[...w4,"indexConfiguration","indexState","indexEntries"];var mse=[...E4,"globals"];function FM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Qa(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yx(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ht=class t{constructor(e,n){this.comparator=e,this.root=n||Lr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pa(this.root,e,this.comparator,!0)}},Pa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Lr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};Lr.EMPTY=null,Lr.RED=!0,Lr.BLACK=!1;Lr.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Lr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Jt=class t{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _p(this.data.getIterator())}getIteratorFrom(e){return new _p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},_p=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Or=class t{constructor(e){this.fields=e,e.sort(Fn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Jt(Fn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return La(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var vp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Xt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new vp("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Xt.EMPTY_BYTE_STRING=new Xt("");var C4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(t){if(Fe(!!t),typeof t=="string"){let e=0,n=C4.exec(t);if(Fe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Xe(t.seconds),nanos:Xe(t.nanos)}}function Xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ts(t){return typeof t=="string"?Xt.fromBase64String(t):Xt.fromUint8Array(t)}function wE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function EE(t){let e=t.mapValue.fields.__previous_value__;return wE(e)?EE(e):e}function ol(t){let e=pi(t.mapValue.fields.__local_write_time__.timestampValue);return new xt(e.seconds,e.nanos)}var JI=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Ip=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var dp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ao(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wE(t)?4:vx(t)?9007199254740991:_x(t)?10:11:re()}function jr(t,e){if(t===e)return!0;let n=ao(t);if(n!==ao(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ol(t).isEqual(ol(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=pi(i.timestampValue),a=pi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ts(i.bytesValue).isEqual(ts(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Xe(i.geoPointValue.latitude)===Xe(s.geoPointValue.latitude)&&Xe(i.geoPointValue.longitude)===Xe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Xe(i.integerValue)===Xe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Xe(i.doubleValue),a=Xe(s.doubleValue);return o===a?sl(o)===sl(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return La(t.arrayValue.values||[],e.arrayValue.values||[],jr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(FM(o)!==FM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!jr(o[c],a[c])))return!1;return!0}(t,e);default:return re()}}function al(t,e){return(t.values||[]).find(n=>jr(n,e))!==void 0}function Va(t,e){if(t===e)return 0;let n=ao(t),r=ao(e);if(n!==r)return Re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Xe(s.integerValue||s.doubleValue),c=Xe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return LM(t.timestampValue,e.timestampValue);case 4:return LM(ol(t),ol(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(s,o){let a=ts(s),c=ts(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Re(a[l],c[l]);if(d!==0)return d}return Re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Re(Xe(s.latitude),Xe(o.latitude));return a!==0?a:Re(Xe(s.longitude),Xe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return VM(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,I=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Re(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=I?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:VM(y,I)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===dp.mapValue&&o===dp.mapValue)return 0;if(s===dp.mapValue)return 1;if(o===dp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Re(c[f],d[f]);if(g!==0)return g;let y=Va(a[c[f]],l[d[f]]);if(y!==0)return y}return Re(c.length,d.length)}(t.mapValue,e.mapValue);default:throw re()}}function LM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);let n=pi(t),r=pi(e),i=Re(n.seconds,r.seconds);return i!==0?i:Re(n.nanos,r.nanos)}function VM(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=Va(n[i],r[i]);if(s)return s}return Re(n.length,r.length)}function Ua(t){return XI(t)}function XI(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=XI(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${XI(n.fields[o])}`;return i+"}"}(t.mapValue):re()}function UM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ew(t){return!!t&&"integerValue"in t}function CE(t){return!!t&&"arrayValue"in t}function jM(t){return!!t&&"nullValue"in t}function BM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function fp(t){return!!t&&"mapValue"in t}function _x(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function tl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Qa(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=tl(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=tl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vx(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var fr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!fp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(n)}setAll(e){let n=Fn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=tl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());fp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];fp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Qa(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(tl(this.value))}};function Ix(t){let e=[];return Qa(t.fields,(n,r)=>{let i=new Fn([n]);if(fp(r)){let s=Ix(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Or(e)}var pr=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,de.min(),de.min(),de.min(),fr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,de.min(),de.min(),fr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,de.min(),de.min(),fr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=fr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=fr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ja=class{constructor(e,n){this.position=e,this.inclusive=n}};function $M(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=Va(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function HM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jr(t.position[n],e.position[n]))return!1;return!0}var Ba=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function T4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var wp=class{},St=class t extends wp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nw(e,n,r):n==="array-contains"?new sw(e,r):n==="in"?new ow(e,r):n==="not-in"?new aw(e,r):n==="array-contains-any"?new cw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rw(e,r):new iw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Va(n,this.value)):n!==null&&ao(this.value)===ao(n)&&this.matchesComparison(Va(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},gr=class t extends wp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return wx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function wx(t){return t.op==="and"}function Ex(t){return b4(t)&&wx(t)}function b4(t){for(let e of t.filters)if(e instanceof gr)return!1;return!0}function tw(t){if(t instanceof St)return t.field.canonicalString()+t.op.toString()+Ua(t.value);if(Ex(t))return t.filters.map(e=>tw(e)).join(",");{let e=t.filters.map(n=>tw(n)).join(",");return`${t.op}(${e})`}}function Cx(t,e){return t instanceof St?function(r,i){return i instanceof St&&r.op===i.op&&r.field.isEqual(i.field)&&jr(r.value,i.value)}(t,e):t instanceof gr?function(r,i){return i instanceof gr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Cx(o,i.filters[a]),!0):!1}(t,e):void re()}function Tx(t){return t instanceof St?function(n){return`${n.field.canonicalString()} ${n.op} ${Ua(n.value)}`}(t):t instanceof gr?function(n){return n.op.toString()+" {"+n.getFilters().map(Tx).join(" ,")+"}"}(t):"Filter"}var nw=class extends St{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){let n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}},rw=class extends St{constructor(e,n){super(e,"in",n),this.keys=bx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},iw=class extends St{constructor(e,n){super(e,"not-in",n),this.keys=bx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function bx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}var sw=class extends St{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return CE(n)&&al(n.arrayValue,this.value)}},ow=class extends St{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&al(this.value.arrayValue,n)}},aw=class extends St{constructor(e,n){super(e,"not-in",n)}matches(e){if(al(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!al(this.value.arrayValue,n)}},cw=class extends St{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!CE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>al(this.value.arrayValue,r))}};var uw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function qM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uw(t,e,n,r,i,s,o)}function TE(t){let e=ce(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Wp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ua(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ua(r)).join(",")),e.ue=n}return e.ue}function bE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Cx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HM(t.startAt,e.startAt)&&HM(t.endAt,e.endAt)}function lw(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var co=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function D4(t,e,n,r,i,s,o,a){return new co(t,e,n,r,i,s,o,a)}function DE(t){return new co(t)}function GM(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Dx(t){return t.collectionGroup!==null}function nl(t){let e=ce(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Jt(Fn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Ba(s,r))}),n.has(Fn.keyField().canonicalString())||e.ce.push(new Ba(Fn.keyField(),r))}return e.ce}function Vr(t){let e=ce(t);return e.le||(e.le=S4(e,nl(t))),e.le}function S4(t,e){if(t.limitType==="F")return qM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ba(i.field,s)});let n=t.endAt?new ja(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ja(t.startAt.position,t.startAt.inclusive):null;return qM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dw(t,e){let n=t.filters.concat([e]);return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hw(t,e,n){return new co(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kp(t,e){return bE(Vr(t),Vr(e))&&t.limitType===e.limitType}function Sx(t){return`${TE(Vr(t))}|lt:${t.limitType}`}function Na(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Tx(i)).join(", ")}]`),Wp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ua(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ua(i)).join(",")),`Target(${r})`}(Vr(t))}; limitType=${t.limitType})`}function Qp(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Y.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of nl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=$M(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,nl(r),i)||r.endAt&&!function(o,a,c){let l=$M(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,nl(r),i))}(t,e)}function A4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ax(t){return(e,n)=>{let r=!1;for(let i of nl(t)){let s=R4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function R4(t,e,n){let r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Va(c,l):re()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var ns=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qa(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return yx(this.inner)}size(){return this.innerSize}};var N4=new ht(Y.comparator);function gi(){return N4}var Rx=new ht(Y.comparator);function el(...t){let e=Rx;for(let n of t)e=e.insert(n.key,n);return e}function Nx(t){let e=Rx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function no(){return rl()}function Mx(){return rl()}function rl(){return new ns(t=>t.toString(),(t,e)=>t.isEqual(e))}var M4=new ht(Y.comparator),x4=new Jt(Y.comparator);function Ie(...t){let e=x4;for(let n of t)e=e.add(n);return e}var P4=new Jt(Re);function k4(){return P4}function SE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sl(e)?"-0":e}}function xx(t){return{integerValue:""+t}}function O4(t,e){return _4(e)?xx(e):SE(t,e)}var $a=class{constructor(){this._=void 0}};function F4(t,e,n){return t instanceof Ha?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&wE(s)&&(s=EE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof uo?kx(t,e):t instanceof lo?Ox(t,e):function(i,s){let o=Px(i,s),a=zM(o)+zM(i.Pe);return ew(o)&&ew(i.Pe)?xx(a):SE(i.serializer,a)}(t,e)}function L4(t,e,n){return t instanceof uo?kx(t,e):t instanceof lo?Ox(t,e):n}function Px(t,e){return t instanceof qa?function(r){return ew(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Ha=class extends $a{},uo=class extends $a{constructor(e){super(),this.elements=e}};function kx(t,e){let n=Fx(e);for(let r of t.elements)n.some(i=>jr(i,r))||n.push(r);return{arrayValue:{values:n}}}var lo=class extends $a{constructor(e){super(),this.elements=e}};function Ox(t,e){let n=Fx(e);for(let r of t.elements)n=n.filter(i=>!jr(i,r));return{arrayValue:{values:n}}}var qa=class extends $a{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function zM(t){return Xe(t.integerValue||t.doubleValue)}function Fx(t){return CE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function V4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof uo&&i instanceof uo||r instanceof lo&&i instanceof lo?La(r.elements,i.elements,jr):r instanceof qa&&i instanceof qa?jr(r.Pe,i.Pe):r instanceof Ha&&i instanceof Ha}(t.transform,e.transform)}var fw=class{constructor(e,n){this.version=e,this.transformResults=n}},Xi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function pp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ga=class{};function Lx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cl(t.key,Xi.none()):new ho(t.key,t.data,Xi.none());{let n=t.data,r=fr.empty(),i=new Jt(Fn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new mi(t.key,r,new Or(i.toArray()),Xi.none())}}function U4(t,e,n){t instanceof ho?function(i,s,o){let a=i.value.clone(),c=KM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof mi?function(i,s,o){if(!pp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=KM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(Vx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function il(t,e,n,r){return t instanceof ho?function(s,o,a,c){if(!pp(s.precondition,o))return a;let l=s.value.clone(),d=QM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof mi?function(s,o,a,c){if(!pp(s.precondition,o))return a;let l=QM(s.fieldTransforms,c,o),d=o.data;return d.setAll(Vx(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return pp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function j4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=Px(r.transform,i||null);s!=null&&(n===null&&(n=fr.empty()),n.set(r.field,s))}return n||null}function WM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&La(r,i,(s,o)=>V4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ho=class extends Ga{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mi=class extends Ga{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Vx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function KM(t,e,n){let r=new Map;Fe(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,L4(o,a,n[i]))}return r}function QM(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,F4(s,o,e))}return r}var cl=class extends Ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},pw=class extends Ga{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&U4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=il(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=il(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=Mx();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=Lx(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ie())}isEqual(e){return this.batchId===e.batchId&&La(this.mutations,e.mutations,(n,r)=>WM(n,r))&&La(this.baseMutations,e.baseMutations,(n,r)=>WM(n,r))}},mw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Fe(e.mutations.length===r.length);let i=function(){return M4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var yw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var _w=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var bt,Te;function B4(t){switch(t){default:return re();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Ux(t){if(t===void 0)return fi("GRPC error has no .code"),x.UNKNOWN;switch(t){case bt.OK:return x.OK;case bt.CANCELLED:return x.CANCELLED;case bt.UNKNOWN:return x.UNKNOWN;case bt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case bt.INTERNAL:return x.INTERNAL;case bt.UNAVAILABLE:return x.UNAVAILABLE;case bt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case bt.NOT_FOUND:return x.NOT_FOUND;case bt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case bt.ABORTED:return x.ABORTED;case bt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case bt.DATA_LOSS:return x.DATA_LOSS;default:return re()}}(Te=bt||(bt={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var YM=null;function $4(){return new TextEncoder}var H4=new Ji([4294967295,4294967295],0);function ZM(t){let e=$4().encode(t),n=new PI;return n.update(e),new Uint8Array(n.digest())}function JM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Ji([n,r],0),new Ji([i,s],0)]}var vw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ro(`Invalid padding: ${n}`);if(r<0)throw new ro(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ro(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ro(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ji.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ji.fromNumber(r)));return i.compare(H4)===1&&(i=new Ji([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=ZM(e),[r,i]=JM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=ZM(e),[r,i]=JM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ro=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ep=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(de.min(),i,new ht(Re),gi(),Ie())}},ul=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,Ie(),Ie(),Ie())}};var ka=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Cp=class{constructor(e,n){this.targetId=e,this.me=n}},Tp=class{constructor(e,n,r=Xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},bp=class{constructor(){this.fe=0,this.ge=ex(),this.pe=Xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),n=Ie(),r=Ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:re()}}),new ul(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ex()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Iw=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=gi(),this.qe=XM(),this.Qe=new ht(Re)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(lw(s))if(r===0){let o=new Y(s.path);this.Ue(n,o,pr.newNoDocument(o,de.min()))}else Fe(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}YM?.et(function(d,f,g,y,I){var R,S,P,$,z,Z;let Ve={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},ee=f.unchangedNames;return ee&&(Ve.bloomFilter={applied:I===0,hashCount:(R=ee?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:($=(P=(S=ee?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&$!==void 0?$:0,padding:(Z=(z=ee?.bits)===null||z===void 0?void 0:z.padding)!==null&&Z!==void 0?Z:0,mightContain:C=>{var v;return(v=y?.mightContain(C))!==null&&v!==void 0&&v}}),Ve}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=ts(r).toUint8Array()}catch(c){if(c instanceof vp)return Fa("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new vw(o,i,s)}catch(c){return Fa(c instanceof ro?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&lw(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,pr.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Ep(e,n,this.Qe,this.ke,r);return this.ke=gi(),this.qe=XM(),this.Qe=new ht(Re),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new bp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Jt(Re),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||G("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new bp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function XM(){return new ht(Y.comparator)}function ex(){return new ht(Y.comparator)}var q4={asc:"ASCENDING",desc:"DESCENDING"},G4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},z4={and:"AND",or:"OR"},ww=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Ew(t,e){return t.useProto3Json||Wp(e)?e:{value:e}}function Dp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function W4(t,e){return Dp(t,e.toTimestamp())}function Ur(t){return Fe(!!t),de.fromTimestamp(function(n){let r=pi(n);return new xt(r.seconds,r.nanos)}(t))}function AE(t,e){return Cw(t,e).canonicalString()}function Cw(t,e){let n=function(i){return new ot(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Bx(t){let e=ot.fromString(t);return Fe(zx(e)),e}function Tw(t,e){return AE(t.databaseId,e.path)}function UI(t,e){let n=Bx(e);if(n.get(1)!==t.databaseId.projectId)throw new q(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(Hx(n))}function $x(t,e){return AE(t.databaseId,e)}function K4(t){let e=Bx(t);return e.length===4?ot.emptyPath():Hx(e)}function bw(t){return new ot(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Hx(t){return Fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function tx(t,e,n){return{name:Tw(t,e),fields:n.value.mapValue.fields}}function Q4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Fe(d===void 0||typeof d=="string"),Xt.fromBase64String(d||"")):(Fe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Xt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?x.UNKNOWN:Ux(l.code);return new q(d,l.message||"")}(o);n=new Tp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=UI(t,r.document.name),s=Ur(r.document.updateTime),o=r.document.createTime?Ur(r.document.createTime):de.min(),a=new fr({mapValue:{fields:r.document.fields}}),c=pr.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new ka(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=UI(t,r.document),s=r.readTime?Ur(r.readTime):de.min(),o=pr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ka([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=UI(t,r.document),s=r.removedTargetIds||[];n=new ka([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new _w(i,s),a=r.targetId;n=new Cp(a,o)}}return n}function Y4(t,e){let n;if(e instanceof ho)n={update:tx(t,e.key,e.value)};else if(e instanceof cl)n={delete:Tw(t,e.key)};else if(e instanceof mi)n={update:tx(t,e.key,e.data),updateMask:s3(e.fieldMask)};else{if(!(e instanceof pw))return re();n={verify:Tw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Ha)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof lo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:W4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(t,e.precondition)),n}function Z4(t,e){return t&&t.length>0?(Fe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ur(i.updateTime):Ur(s);return o.isEqual(de.min())&&(o=Ur(s)),new fw(o,i.transformResults||[])}(n,e))):[]}function J4(t,e){return{documents:[$x(t,e.path)]}}function X4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=$x(t,i);let s=function(l){if(l.length!==0)return Gx(gr.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ma(g.field),direction:n3(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Ew(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function e3(t){let e=K4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Fe(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=qx(f);return g instanceof gr&&Ex(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(I){return new Ba(xa(I.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Wp(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new ja(y,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new ja(y,g)}(n.endAt)),D4(e,i,o,s,a,"F",c,l)}function t3(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=xa(n.unaryFilter.field);return St.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=xa(n.unaryFilter.field);return St.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=xa(n.unaryFilter.field);return St.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=xa(n.unaryFilter.field);return St.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(t):t.fieldFilter!==void 0?function(n){return St.create(xa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gr.create(n.compositeFilter.filters.map(r=>qx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(n.compositeFilter.op))}(t):re()}function n3(t){return q4[t]}function r3(t){return G4[t]}function i3(t){return z4[t]}function Ma(t){return{fieldPath:t.canonicalString()}}function xa(t){return Fn.fromServerFormat(t.fieldPath)}function Gx(t){return t instanceof St?function(n){if(n.op==="=="){if(BM(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NAN"}};if(jM(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(BM(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NAN"}};if(jM(n.value))return{unaryFilter:{field:Ma(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(n.field),op:r3(n.op),value:n.value}}}(t):t instanceof gr?function(n){let r=n.getFilters().map(i=>Gx(i));return r.length===1?r[0]:{compositeFilter:{op:i3(n.op),filters:r}}}(t):re()}function s3(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var ll=class t{constructor(e,n,r,i,s=de.min(),o=de.min(),a=Xt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dw=class{constructor(e){this.ct=e}};function o3(t){let e=e3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hw(e,e.limit,"L"):e}var Sp=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Xe(e.integerValue));else if("doubleValue"in e){let r=Xe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),sl(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=pi(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(ts(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?vx(e)?this.dt(n,Number.MAX_SAFE_INTEGER):_x(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):re()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Xe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Y.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};Sp.vt=new Sp;var Sw=class{constructor(){this.un=new Aw}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(oo.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(oo.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},Aw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Jt(ot.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Jt(ot.comparator)).toArray()}};var _se=new Uint8Array(0);var kr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};kr.DEFAULT_COLLECTION_PERCENTILE=10,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kr.DEFAULT=new kr(41943040,kr.DEFAULT_COLLECTION_PERCENTILE,kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kr.DISABLED=new kr(-1,0,0);var dl=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var Rw=class{constructor(){this.changes=new ns(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Nw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Mw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&il(r.mutation,i,Or.empty(),xt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ie()){let i=no();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=el();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=no();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ie()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=gi(),o=rl(),a=function(){return rl()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof mi)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),il(d.mutation,l,d.mutation.getFieldMask(),xt.now())):o.set(l.key,Or.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new Nw(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=rl(),i=new ht((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||Or.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||Ie()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=Mx();d.forEach(g=>{if(!s.has(g)){let y=Lx(n.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Dx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(no()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ie())).next(d=>({batchId:a,changes:Nx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let i=el();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=el();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(f,g){return new co(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,pr.newInvalidDocument(d)))});let a=el();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&il(d.mutation,l,Or.empty(),xt.now()),Qp(n,l)&&(a=a.insert(c,l))}),a})}};var xw=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ur(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:o3(i.bundledQuery),readTime:Ur(i.readTime)}}(n)),k.resolve()}};var Pw=class{constructor(){this.overlays=new ht(Y.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=no();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=no(),s=n.length+1,o=new Y(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new ht((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=no(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=no(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yw(n,r));let s=this.Ir.get(n);s===void 0&&(s=Ie(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var kw=class{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var hl=class{constructor(){this.Tr=new Jt(Dt.Er),this.dr=new Jt(Dt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new Dt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Dt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new Y(new ot([])),r=new Dt(n,e),i=new Dt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new Y(new ot([])),r=new Dt(n,e),i=new Dt(n,e+1),s=Ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Dt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Dt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||Y.comparator(e.key,n.key)}};var Ow=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Jt(Dt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new gw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Dt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Dt(n,0),i=new Dt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Jt(Re);return n.forEach(i=>{let s=new Dt(i,0),o=new Dt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Y.isDocumentKey(s)||(s=s.child(""));let o=new Dt(new Y(s),0),a=new Jt(Re);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new Dt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new Dt(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Fw=class{constructor(e){this.Mr=e,this.docs=function(){return new ht(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():pr.newInvalidDocument(n))}getEntries(e,n){let r=gi();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():pr.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gi(),o=n.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||g4(p4(d),r)<=0||(i.has(d.key)||Qp(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){re()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Lw(this)}getSize(e){return k.resolve(this.size)}},Lw=class extends Rw{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var Vw=class{constructor(e){this.persistence=e,this.Nr=new ns(n=>TE(n),bE),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.Lr=0,this.Br=new hl,this.targetCount=0,this.kr=dl.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new dl(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var Uw=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mx(0),this.Kr=!1,this.Kr=!0,this.$r=new kw,this.referenceDelegate=e(this),this.Ur=new Vw(this),this.indexManager=new Sw,this.remoteDocumentCache=function(i){return new Fw(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Dw(n),this.Gr=new xw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Pw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new Ow(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){G("MemoryPersistence","Starting transaction:",e);let i=new jw(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},jw=class extends ZI{constructor(e){super(),this.currentSequenceNumber=e}},Bw=class t{constructor(e){this.persistence=e,this.Jr=new hl,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=Y.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var $w=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Ie(),i=Ie();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Hw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var qw=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fD()?8:y4(zt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Hw;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Xu()<=Wt.DEBUG&&G("QueryEngine","SDK will not create cache indexes for query:",Na(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(Xu()<=Wt.DEBUG&&G("QueryEngine","Query:",Na(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Xu()<=Wt.DEBUG&&G("QueryEngine","The SDK decides to create cache indexes for query:",Na(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(n))):k.resolve())}Yi(e,n){if(GM(n))return k.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=hw(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ie(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,hw(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return GM(n)||i.isEqual(de.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(Xu()<=Wt.DEBUG&&G("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Na(n)),this.rs(e,o,n,f4(i,-1)).next(a=>a))})}ts(e,n){let r=new Jt(Ax(e));return n.forEach((i,s)=>{Qp(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return Xu()<=Wt.DEBUG&&G("QueryEngine","Using full collection scan to execute query:",Na(n)),this.Ji.getDocumentsMatchingQuery(e,n,oo.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Gw=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new ht(Re),this._s=new ns(s=>TE(s),bE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Mw(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function a3(t,e,n,r){return new Gw(t,e,n,r)}function Wx(t,e){return _(this,null,function*(){let n=ce(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ie();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function c3(t,e){let n=ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=k.resolve();return g.forEach(I=>{y=y.next(()=>d.getEntry(c,I)).next(R=>{let S=l.docVersions.get(I);Fe(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Kx(t){let e=ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function u3(t,e){let n=ce(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Xt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(R,S,P){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,y,d)&&a.push(n.Ur.updateTargetData(s,y))});let c=gi(),l=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(l3(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(de.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function l3(t,e,n){let r=Ie(),i=Ie();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gi();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(de.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):G("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function d3(t,e){let n=ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function h3(t,e){let n=ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new ll(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function zw(t,e,n){return _(this,null,function*(){let r=ce(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Il(o))throw o;G("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function nx(t,e,n){let r=ce(t),i=de.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=ce(c),g=f._s.get(d);return g!==void 0?k.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,Vr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:Ie())).next(a=>(f3(r,A4(e),a),{documents:a,Ts:s})))}function f3(t,e,n){let r=t.us.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var Ap=class{constructor(){this.activeTargetIds=k4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ww=class{constructor(){this.so=new Ap,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ap,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Kw=class{_o(e){}shutdown(){}};var Rp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){G("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){G("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var hp=null;function jI(){return hp===null?hp=function(){return 268435456+Math.round(2147483648*Math.random())}():hp++,"0x"+hp.toString(16)}var p3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Qw=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Zt="WebChannelConnection",Yw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=jI(),c=this.xo(n,r.toUriEncodedString());G("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>(G("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Fa("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=p3[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=jI();return new Promise((o,a)=>{let c=new kI;c.setWithCredentials(!0),c.listenOnce(OI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ju.NO_ERROR:let d=c.getResponseJson();G(Zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Ju.TIMEOUT:G(Zt,`RPC '${e}' ${s} timed out`),a(new q(x.DEADLINE_EXCEEDED,"Request time out"));break;case Ju.HTTP_ERROR:let f=c.getStatus();if(G(Zt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let I=function(S){let P=S.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(y.status);a(new q(I,y.message))}else a(new q(x.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new q(x.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{G(Zt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);G(Zt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=jI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VI(),a=LI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");G(Zt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,y=!1,I=new Qw({Io:S=>{y?G(Zt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(G(Zt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),G(Zt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),R=(S,P,$)=>{S.listen(P,z=>{try{$(z)}catch(Z){setTimeout(()=>{throw Z},0)}})};return R(f,Ra.EventType.OPEN,()=>{y||(G(Zt,`RPC '${e}' stream ${i} transport opened.`),I.yo())}),R(f,Ra.EventType.CLOSE,()=>{y||(y=!0,G(Zt,`RPC '${e}' stream ${i} transport closed`),I.So())}),R(f,Ra.EventType.ERROR,S=>{y||(y=!0,Fa(Zt,`RPC '${e}' stream ${i} transport errored:`,S),I.So(new q(x.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ra.EventType.MESSAGE,S=>{var P;if(!y){let $=S.data[0];Fe(!!$);let z=$,Z=z.error||((P=z[0])===null||P===void 0?void 0:P.error);if(Z){G(Zt,`RPC '${e}' stream ${i} received error:`,Z);let Ve=Z.status,ee=function(w){let T=bt[w];if(T!==void 0)return Ux(T)}(Ve),C=Z.message;ee===void 0&&(ee=x.INTERNAL,C="Unknown error status: "+Ve+" with message "+Z.message),y=!0,I.So(new q(ee,C)),f.close()}else G(Zt,`RPC '${e}' stream ${i} received:`,$),I.bo($)}}),R(a,FI.STAT_EVENT,S=>{S.stat===lp.PROXY?G(Zt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===lp.NOPROXY&&G(Zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}};function BI(){return typeof document<"u"?document:null}function Yp(t){return new ww(t,!0)}var Np=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&G("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Mp=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Np(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(fi(n.toString()),fi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new q(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return G("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(G("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Zw=class extends Mp{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=Q4(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Ur(o.readTime):de.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=bw(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=lw(c)?{documents:J4(s,c)}:{query:X4(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jx(s,o.resumeToken);let l=Ew(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Dp(s,o.snapshotVersion.toTimestamp());let l=Ew(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=t3(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=bw(this.serializer),n.removeTarget=e,this.a_(n)}},Jw=class extends Mp{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=Z4(e.writeResults,e.commitTime),r=Ur(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=bw(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>Y4(this.serializer,r))};this.a_(n)}};var Xw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new q(x.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,Cw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(x.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Cw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(x.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},eE=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fi(n),this.D_=!1):G("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var tE=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){po(this)&&(G("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=ce(c);l.L_.add(4),yield wl(l),l.q_.set("Unknown"),l.L_.delete(4),yield Zp(l)})}(this))}))}),this.q_=new eE(r,i)}};function Zp(t){return _(this,null,function*(){if(po(t))for(let e of t.B_)yield e(!0)})}function wl(t){return _(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Qx(t,e){let n=ce(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),xE(n)?ME(n):Ya(n).r_()&&NE(n,e))}function RE(t,e){let n=ce(t),r=Ya(n);n.N_.delete(e),r.r_()&&Yx(n,e),n.N_.size===0&&(r.r_()?r.o_():po(n)&&n.q_.set("Unknown"))}function NE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ya(t).A_(e)}function Yx(t,e){t.Q_.xe(e),Ya(t).R_(e)}function ME(t){t.Q_=new Iw({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ya(t).start(),t.q_.v_()}function xE(t){return po(t)&&!Ya(t).n_()&&t.N_.size>0}function po(t){return ce(t).L_.size===0}function Zx(t){t.Q_=void 0}function g3(t){return _(this,null,function*(){t.q_.set("Online")})}function m3(t){return _(this,null,function*(){t.N_.forEach((e,n)=>{NE(t,e)})})}function y3(t,e){return _(this,null,function*(){Zx(t),xE(t)?(t.q_.M_(e),ME(t)):t.q_.set("Unknown")})}function _3(t,e,n){return _(this,null,function*(){if(t.q_.set("Online"),e instanceof Tp&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){G("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield xp(t,r)}else if(e instanceof ka?t.Q_.Ke(e):e instanceof Cp?t.Q_.He(e):t.Q_.We(e),!n.isEqual(de.min()))try{let r=yield Kx(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(Xt.EMPTY_BYTE_STRING,d.snapshotVersion)),Yx(s,c);let f=new ll(d.target,c,l,d.sequenceNumber);NE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){G("RemoteStore","Failed to raise snapshot:",r),yield xp(t,r)}})}function xp(t,e,n){return _(this,null,function*(){if(!Il(e))throw e;t.L_.add(1),yield wl(t),t.q_.set("Offline"),n||(n=()=>Kx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){G("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Zp(t)}))})}function Jx(t,e){return e().catch(n=>xp(t,n,e))}function Jp(t){return _(this,null,function*(){let e=ce(t),n=rs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;v3(e);)try{let i=yield d3(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,I3(e,i)}catch(i){yield xp(e,i)}Xx(e)&&eP(e)})}function v3(t){return po(t)&&t.O_.length<10}function I3(t,e){t.O_.push(e);let n=rs(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Xx(t){return po(t)&&!rs(t).n_()&&t.O_.length>0}function eP(t){rs(t).start()}function w3(t){return _(this,null,function*(){rs(t).p_()})}function E3(t){return _(this,null,function*(){let e=rs(t);for(let n of t.O_)e.m_(n.mutations)})}function C3(t,e,n){return _(this,null,function*(){let r=t.O_.shift(),i=mw.from(r,e,n);yield Jx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Jp(t)})}function T3(t,e){return _(this,null,function*(){e&&rs(t).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return B4(o)&&o!==x.ABORTED}(i.code)){let s=r.O_.shift();rs(r).s_(),yield Jx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Jp(r)}})}(t,e)),Xx(t)&&eP(t)})}function rx(t,e){return _(this,null,function*(){let n=ce(t);n.asyncQueue.verifyOperationInProgress(),G("RemoteStore","RemoteStore received new credentials");let r=po(n);n.L_.add(3),yield wl(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Zp(n)})}function b3(t,e){return _(this,null,function*(){let n=ce(t);e?(n.L_.delete(2),yield Zp(n)):e||(n.L_.add(2),yield wl(n),n.q_.set("Unknown"))})}function Ya(t){return t.K_||(t.K_=function(n,r,i){let s=ce(n);return s.w_(),new Zw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:g3.bind(null,t),Ro:m3.bind(null,t),mo:y3.bind(null,t),d_:_3.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.K_.s_(),xE(t)?ME(t):t.q_.set("Unknown")):(yield t.K_.stop(),Zx(t))}))),t.K_}function rs(t){return t.U_||(t.U_=function(n,r,i){let s=ce(n);return s.w_(),new Jw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:w3.bind(null,t),mo:T3.bind(null,t),f_:E3.bind(null,t),g_:C3.bind(null,t)}),t.B_.push(e=>_(this,null,function*(){e?(t.U_.s_(),yield Jp(t)):(yield t.U_.stop(),t.O_.length>0&&(G("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var nE=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function PE(t,e){if(fi("AsyncQueue",`${e}: ${t}`),Il(t))return new q(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Pp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=el(),this.sortedSet=new ht(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var kp=class{constructor(){this.W_=new ht(Y.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},za=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Pp.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var rE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},iE=class{constructor(){this.queries=ix(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=ce(n),s=i.queries;i.queries=ix(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new q(x.ABORTED,"Firestore shutting down"))}};function ix(){return new ns(t=>Sx(t),Kp)}function tP(t,e){return _(this,null,function*(){let n=ce(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new rE,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=PE(o,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&kE(n)})}function nP(t,e){return _(this,null,function*(){let n=ce(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function D3(t,e){let n=ce(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&kE(n)}function S3(t,e,n){let r=ce(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function kE(t){t.Y_.forEach(e=>{e.next()})}var sE,sx;(sx=sE||(sE={})).ea="default",sx.Cache="cache";var Op=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new za(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sE.Cache}};var Fp=class{constructor(e){this.key=e}},Lp=class{constructor(e){this.key=e}},oE=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=Ax(e),this.Ra=new Pp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new kp,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=Qp(this.query,f)?f:null,I=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?I!==R&&(r.track({type:3,doc:y}),S=!0):this.ga(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(o=o.add(y),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(y,I){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return R(y)-R(I)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new za(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new kp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Lp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Fp(r))}),n}ba(e){this.Ta=e.Ts,this.da=Ie();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return za.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},aE=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},cE=class{constructor(e){this.key=e,this.va=!1}},uE=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ns(a=>Sx(a),Kp),this.Ma=new Map,this.xa=new Set,this.Oa=new ht(Y.comparator),this.Na=new Map,this.La=new hl,this.Ba={},this.ka=new Map,this.qa=dl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function A3(t,e,n=!0){return _(this,null,function*(){let r=cP(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield rP(r,e,n,!0),i})}function R3(t,e){return _(this,null,function*(){let n=cP(t);yield rP(n,e,!0,!1)})}function rP(t,e,n,r){return _(this,null,function*(){let i=yield h3(t.localStore,Vr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield N3(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Qx(t.remoteStore,i),a})}function N3(t,e,n,r,i){return _(this,null,function*(){t.Ka=(f,g,y)=>function(R,S,P,$){return _(this,null,function*(){let z=S.view.ma(P);z.ns&&(z=yield nx(R.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,z)));let Z=$&&$.targetChanges.get(S.targetId),Ve=$&&$.targetMismatches.get(S.targetId)!=null,ee=S.view.applyChanges(z,R.isPrimaryClient,Z,Ve);return ax(R,S.targetId,ee.wa),ee.snapshot})}(t,f,g,y);let s=yield nx(t.localStore,e,!0),o=new oE(e,s.Ts),a=o.ma(s.documents),c=ul.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);ax(t,n,l.wa);let d=new aE(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function M3(t,e,n){return _(this,null,function*(){let r=ce(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Kp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield zw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&RE(r.remoteStore,i.targetId),lE(r,i.targetId)}).catch(vl))):(lE(r,i.targetId),yield zw(r.localStore,i.targetId,!0))})}function x3(t,e){return _(this,null,function*(){let n=ce(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),RE(n.remoteStore,r.targetId))})}function P3(t,e,n){return _(this,null,function*(){let r=j3(t);try{let i=yield function(o,a){let c=ce(o),l=xt.now(),d=a.reduce((y,I)=>y.add(I.key),Ie()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let I=gi(),R=Ie();return c.cs.getEntries(y,d).next(S=>{I=S,I.forEach((P,$)=>{$.isValidDocument()||(R=R.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,I)).next(S=>{f=S;let P=[];for(let $ of a){let z=j4($,f.get($.key).overlayedDocument);z!=null&&P.push(new mi($.key,z,Ix(z.value.mapValue),Xi.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(y,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:Nx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new ht(Re)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield El(r,i.changes),yield Jp(r.remoteStore)}catch(i){let s=PE(i,"Failed to persist write");n.reject(s)}})}function iP(t,e){return _(this,null,function*(){let n=ce(t);try{let r=yield u3(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(Fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Fe(o.va):i.removedDocuments.size>0&&(Fe(o.va),o.va=!1))}),yield El(n,r,e)}catch(r){yield vl(r)}})}function ox(t,e,n){let r=ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ce(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&kE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function k3(t,e,n){return _(this,null,function*(){let r=ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new ht(Y.comparator);o=o.insert(s,pr.newNoDocument(s,de.min()));let a=Ie().add(s),c=new Ep(de.min(),new Map,new ht(Re),o,a);yield iP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),OE(r)}else yield zw(r.localStore,e,!1).then(()=>lE(r,e,n)).catch(vl)})}function O3(t,e){return _(this,null,function*(){let n=ce(t),r=e.batch.batchId;try{let i=yield c3(n.localStore,e);oP(n,r,null),sP(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield El(n,i)}catch(i){yield vl(i)}})}function F3(t,e,n){return _(this,null,function*(){let r=ce(t);try{let i=yield function(o,a){let c=ce(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(Fe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);oP(r,e,n),sP(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield El(r,i)}catch(i){yield vl(i)}})}function sP(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function oP(t,e,n){let r=ce(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function lE(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||aP(t,r)})}function aP(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(RE(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),OE(t))}function ax(t,e,n){for(let r of n)r instanceof Fp?(t.La.addReference(r.key,e),L3(t,r)):r instanceof Lp?(G("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||aP(t,r.key)):re()}function L3(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(G("SyncEngine","New document in limbo: "+n),t.xa.add(r),OE(t))}function OE(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new Y(ot.fromString(e)),r=t.qa.next();t.Na.set(r,new cE(n)),t.Oa=t.Oa.insert(n,r),Qx(t.remoteStore,new ll(Vr(DE(n.path)),r,"TargetPurposeLimboResolution",mx.oe))}}function El(t,e,n){return _(this,null,function*(){let r=ce(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=$w.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return _(this,null,function*(){let d=ce(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>k.forEach(l,g=>k.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>k.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Il(f))throw f;G("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),I=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(I);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function V3(t,e){return _(this,null,function*(){let n=ce(t);if(!n.currentUser.isEqual(e)){G("SyncEngine","User change. New user:",e.toKey());let r=yield Wx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new q(x.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield El(n,r.hs)}})}function U3(t,e){let n=ce(t),r=n.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function cP(t){let e=ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k3.bind(null,e),e.Ca.d_=D3.bind(null,e.eventManager),e.Ca.$a=S3.bind(null,e.eventManager),e}function j3(t){let e=ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=O3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=F3.bind(null,e),e}var cx=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return _(this,null,function*(){this.serializer=Yp(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return a3(this.persistence,new qw,n.initialUser,this.serializer)}Ga(n){return new Uw(Bw.Zr,this.serializer)}Wa(n){return new Ww}terminate(){return _(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var B3=(()=>{class t{initialize(n,r){return _(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ox(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=V3.bind(null,this.syncEngine),yield b3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new iE}()}createDatastore(n){let r=Yp(n.databaseInfo.databaseId),i=function(o){return new Yw(o)}(n.databaseInfo);return function(o,a,c,l){return new Xw(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new tE(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>ox(this.syncEngine,r,0),function(){return Rp.D()?new Rp:new Kw}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,f){let g=new uE(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var n,r;yield function(s){return _(this,null,function*(){let o=ce(s);G("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield wl(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Vp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var dE=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ft.UNAUTHENTICATED,this.clientId=mp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){G("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(G("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=PE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $I(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),G("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield Wx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function ux(t,e){return _(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield $3(t);G("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>rx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>rx(e.remoteStore,i)),t._onlineComponents=e})}function $3(t){return _(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){G("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $I(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===x.FAILED_PRECONDITION||i.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fa("Error using user provided cache. Falling back to memory cache: "+n),yield $I(t,new cx)}}else G("FirestoreClient","Using default OfflineComponentProvider"),yield $I(t,new cx);return t._offlineComponents})}function uP(t){return _(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(G("FirestoreClient","Using user provided OnlineComponentProvider"),yield ux(t,t._uninitializedComponentsProvider._online)):(G("FirestoreClient","Using default OnlineComponentProvider"),yield ux(t,new B3))),t._onlineComponents})}function H3(t){return uP(t).then(e=>e.syncEngine)}function hE(t){return _(this,null,function*(){let e=yield uP(t),n=e.eventManager;return n.onListen=A3.bind(null,e.syncEngine),n.onUnlisten=M3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=R3.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=x3.bind(null,e.syncEngine),n})}function q3(t,e,n={}){let r=new Fr;return t.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,l){let d=new Vp({next:g=>{d.Za(),o.enqueueAndForget(()=>nP(s,f)),g.fromCache&&c.source==="server"?l.reject(new q(x.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Op(a,d,{includeMetadataChanges:!0,_a:!0});return tP(s,f)}(yield hE(t),t.asyncQueue,e,n,r)})),r.promise}function lP(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var lx=new Map;function dP(t,e,n){if(!n)throw new q(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function G3(t,e,n,r){if(e===!0&&r===!0)throw new q(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function dx(t){if(!Y.isDocumentKey(t))throw new q(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hx(t){if(Y.isDocumentKey(t))throw new q(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":re()}function hi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Xp(t);throw new q(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Up=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}G3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Up({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Up(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HI;switch(r.type){case"firstParty":return new WI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=lx.get(n);r&&(G("ComponentProvider","Removing Datastore"),lx.delete(n),r.terminate())}(this),Promise.resolve()}};function hP(t,e,n,r={}){var i;let s=(t=hi(t,Wa))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Fa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ft.MOCK_USER;else{a=Mo(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new q(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ft(l)}t._authCredentials=new qI(new gp(a,c))}}var fo=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Tn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},es=class t extends fo{constructor(e,n,r){super(e,n,DE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Y(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function fP(t,e,...n){if(t=we(t),dP("collection","path",e),t instanceof Wa){let r=ot.fromString(e,...n);return hx(r),new es(t,null,r)}{if(!(t instanceof Tn||t instanceof es))throw new q(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ot.fromString(e,...n));return hx(r),new es(t.firestore,null,r)}}function pP(t,e,...n){if(t=we(t),arguments.length===1&&(e=mp.newId()),dP("doc","path",e),t instanceof Wa){let r=ot.fromString(e,...n);return dx(r),new Tn(t,null,new Y(r))}{if(!(t instanceof Tn||t instanceof es))throw new q(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(ot.fromString(e,...n));return dx(r),new Tn(t.firestore,t instanceof es?t.converter:null,new Y(r))}}var jp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Np(this,"async_queue_retry"),this.Vu=()=>{let r=BI();r&&G("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=BI();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=BI();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Il(e))throw e;G("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw fi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=nE.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function fx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var is=class extends Wa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new jp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new jp(e),this._firestoreClient=void 0,yield e}})}};function gP(t,e){let n=typeof t=="object"?t:wt(),r=typeof t=="string"?t:e||"(default)",i=It(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ai("firestore");s&&hP(i,...s)}return i}function FE(t){if(t._terminated)throw new q(x.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z3(t),t._firestoreClient}function z3(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new JI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,lP(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new dE(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var fl=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Xt.fromBase64String(e))}catch(n){throw new q(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var pl=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bp=class{constructor(e){this._methodName=e}};var gl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}};var ml=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var W3=/^__.*__$/,fE=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new ho(e,this.data,n,this.fieldTransforms)}};function mP(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var pE=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return $p(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(mP(this.Cu)&&W3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},gE=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yp(e)}Qu(e,n,r,i=!1){return new pE({Cu:e,methodName:n,qu:r,path:Fn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function yP(t){let e=t._freezeSettings(),n=Yp(t._databaseId);return new gE(t._databaseId,!!e.ignoreUndefinedProperties,n)}function K3(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);IP("Data must be an object, but it was:",o,r);let a=_P(r,o),c,l;if(s.merge)c=new Or(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=Y3(e,f,n);if(!o.contains(g))throw new q(x.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);J3(d,g)||d.push(g)}c=new Or(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new fE(new fr(a),c,l)}function Q3(t,e,n,r=!1){return LE(n,t.Qu(r?4:3,e))}function LE(t,e){if(vP(t=we(t)))return IP("Unsupported field value:",e,t),_P(t,e);if(t instanceof Bp)return function(r,i){if(!mP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=LE(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=we(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return O4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=xt.fromDate(r);return{timestampValue:Dp(i.serializer,s)}}if(r instanceof xt){let s=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Dp(i.serializer,s)}}if(r instanceof gl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof fl)return{bytesValue:jx(i.serializer,r._byteString)};if(r instanceof Tn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:AE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ml)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return SE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Xp(r)}`)}(t,e)}function _P(t,e){let n={};return yx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Qa(t,(r,i)=>{let s=LE(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function vP(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof xt||t instanceof gl||t instanceof fl||t instanceof Tn||t instanceof Bp||t instanceof ml)}function IP(t,e,n){if(!vP(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Xp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Y3(t,e,n){if((e=we(e))instanceof pl)return e._internalPath;if(typeof e=="string")return wP(t,e);throw $p("Field path arguments must be of type string or ",t,!1,void 0,n)}var Z3=new RegExp("[~\\*/\\[\\]]");function wP(t,e,n){if(e.search(Z3)>=0)throw $p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new pl(...e.split("."))._internalPath}catch{throw $p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $p(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new q(x.INVALID_ARGUMENT,a+t+c)}function J3(t,e){return t.some(n=>n.isEqual(e))}var Hp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(VE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},mE=class extends Hp{data(){return super.data()}};function VE(t,e){return typeof e=="string"?wP(t,e):e instanceof pl?e._internalPath:e._delegate._internalPath}function EP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var yl=class{},yE=class extends yl{};function CP(t,e,...n){let r=[];e instanceof yl&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof _E).length,a=s.filter(c=>c instanceof qp).length;if(o>1||o>0&&a>0)throw new q(x.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var qp=class t extends yE{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return bP(e._query,n),new fo(e.firestore,e.converter,dw(e._query,n))}_parse(e){let n=yP(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new q(x.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){gx(f,d);let y=[];for(let I of f)y.push(px(c,s,I));g={arrayValue:{values:y}}}else g=px(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||gx(f,d),g=Q3(a,o,f,d==="in"||d==="not-in");return St.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function TP(t,e,n){let r=e,i=VE("where",t);return qp._create(i,r,n)}var _E=class t extends yl{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gr.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)bP(o,c),o=dw(o,c)}(e._query,n),new fo(e.firestore,e.converter,dw(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function px(t,e,n){if(typeof(n=we(n))=="string"){if(n==="")throw new q(x.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dx(e)&&n.indexOf("/")!==-1)throw new q(x.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(ot.fromString(n));if(!Y.isDocumentKey(r))throw new q(x.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return UM(t,new Y(r))}if(n instanceof Tn)return UM(t,n._key);throw new q(x.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(n)}.`)}function gx(t,e){if(!Array.isArray(t)||t.length===0)throw new q(x.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function bP(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(x.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(x.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var vE=class{convertValue(e,n="none"){switch(ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Qa(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Xe(o.doubleValue));return new ml(s)}convertGeoPoint(e){return new gl(Xe(e.latitude),Xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=EE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ol(e));default:return null}}convertTimestamp(e){let n=pi(e);return new xt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=ot.fromString(e);Fe(zx(r));let i=new Ip(r.get(1),r.get(3)),s=new Y(r.popFirst(5));return i.isEqual(n)||fi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function X3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var io=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Gp=class extends Hp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Oa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(VE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Oa=class extends Gp{data(e={}){return super.data(e)}},zp=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new io(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Oa(this._firestore,this._userDataWriter,r.key,r,new io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Oa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new io(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:e9(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function e9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}var _l=class extends vE{constructor(e){super(),this.firestore=e}convertBytes(e){return new fl(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,n)}};function DP(t){t=hi(t,fo);let e=hi(t.firestore,is),n=FE(e),r=new _l(e);return EP(t._query),q3(n,t._query).then(i=>new zp(e,r,t,i))}function SP(t,e,n){t=hi(t,Tn);let r=hi(t.firestore,is),i=X3(t.converter,e,n);return RP(r,[K3(yP(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Xi.none())])}function AP(t){return RP(hi(t.firestore,is),[new cl(t._key,Xi.none())])}function UE(t,...e){var n,r,i;t=we(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||fx(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(fx(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof Tn)l=hi(t.firestore,is),d=DE(t._key.path),c={next:f=>{e[o]&&e[o](t9(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=hi(t,fo);l=hi(f.firestore,is),d=f._query;let g=new _l(l);c={next:y=>{e[o]&&e[o](new zp(l,g,f,y))},error:e[o+1],complete:e[o+2]},EP(t._query)}return function(g,y,I,R){let S=new Vp(R),P=new Op(y,S,I);return g.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return tP(yield hE(g),P)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return nP(yield hE(g),P)}))}}(FE(l),d,a,c)}function RP(t,e){return function(r,i){let s=new Fr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return P3(yield H3(r),i,s)})),s.promise}(FE(t),e)}function t9(t,e,n){let r=n.docs.get(e._key),i=new _l(t);return new Gp(t,i,e._key,r,new io(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ka=i})(mn),gt(new pt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new is(new GI(r.getProvider("auth-internal")),new QI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ip(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Q(OM,"4.7.3",e),Q(OM,"4.7.3","esm2017")})();var eg=function(){return eg=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},eg.apply(this,arguments)};var i9={includeMetadataChanges:!1};function NP(t,e){return e===void 0&&(e=i9),new ae(function(n){var r=UE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function MP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:eg(eg({},r),(n={},n[e.idField]=t.id,n))}function xP(t){return NP(t,{includeMetadataChanges:!0}).pipe(W(function(e){return e.docs}))}function PP(t,e){return e===void 0&&(e={}),xP(t).pipe(W(function(n){return n.map(function(r){return MP(r,e)})}))}var go=class{constructor(e){return e}},kP="firestore",jE=class{constructor(){return vt(kP)}};var BE=new j("angularfire2.firestore-instances");function s9(t,e){let n=Tt(kP,t,e);return n&&new go(n)}function o9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new go(r)}}var a9={provide:jE,deps:[[new se,BE]]},c9={provide:go,useFactory:s9,deps:[[new se,BE],Qe]};function OP(t,...e){return Q("angularfire",Ke.full,"fst"),qe([c9,a9,{provide:BE,useFactory:o9(t),multi:!0,deps:[te,ve,dt,st,[new se,hr],[new se,Cn],...e]}])}var Yn=Se(PP,!0);var Zn=Se(fP,!0);var FP=Se(AP,!0);var tg=Se(pP,!0);var $E=Se(DP,!0);var LP=Se(gP,!0);var VP=Se(CP,!0);var HE=Se(SP,!0);var UP=Se(TP,!0);var jP="@firebase/database",BP="1.0.8";var BC="";function u9(t){BC=t}var ZE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Pt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Id(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var JE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var vk=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ZE(e)}}catch{}return new JE},yo=vk("localStorage"),XE=vk("sessionStorage");var ec=new Er("@firebase/database"),l9=function(){let t=1;return function(){return t++}}(),Ik=function(t){let e=vD(t),n=new mD;n.update(e);let r=n.digest();return oD.encodeByteArray(r)},Ol=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Ol.apply(null,r):typeof r=="object"?e+=Pt(r):e+=r,e+=" "}return e},_o=null,$P=!0,d9=function(t,e){U(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ec.logLevel=Wt.VERBOSE,_o=ec.log.bind(ec),e&&XE.set("logging_enabled",!0)):typeof t=="function"?_o=t:(_o=null,XE.remove("logging_enabled"))},en=function(...t){if($P===!0&&($P=!1,_o===null&&XE.get("logging_enabled")===!0&&d9(!0)),_o){let e=Ol.apply(null,t);_o(e)}},Fl=function(t){return function(...e){en(t,...e)}},eC=function(...t){let e="FIREBASE INTERNAL ERROR: "+Ol(...t);ec.error(e)},_i=function(...t){let e=`FIREBASE FATAL ERROR: ${Ol(...t)}`;throw ec.error(e),new Error(e)},Ln=function(...t){let e="FIREBASE WARNING: "+Ol(...t);ec.warn(e)},h9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},wk=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},f9=function(t){if(vr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},nc="[MIN_NAME]",vo="[MAX_NAME]",uc=function(t,e){if(t===e)return 0;if(t===nc||e===vo)return-1;if(e===nc||t===vo)return 1;{let n=HP(t),r=HP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},p9=function(t,e){return t===e?0:t<e?-1:1},Cl=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Pt(e))},$C=function(t){if(typeof t!="object"||t===null)return Pt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Pt(e[r]),n+=":",n+=$C(t[e[r]]);return n+="}",n},Ek=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function er(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Ck=function(t){U(!wk(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},g9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},m9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var y9=new RegExp("^-?(0*)\\d{1,10}$"),_9=-2147483648,v9=2147483647,HP=function(t){if(y9.test(t)){let e=Number(t);if(e>=_9&&e<=v9)return e}return null},Ll=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Ln("Exception was thrown by user callback.",n),e},Math.floor(0))}},I9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Al=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var tC=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ln(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var nC=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(en("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ln(e)}},Rl=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),rg="5",Tk="v",bk="s",Dk="r",Sk="f",Ak=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Rk="ls",Nk="p",rC="ac",Mk="websocket",xk="long_polling";var ig=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=yo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&yo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function w9(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Pk(t,e,n){U(typeof e=="string","typeof type must == string"),U(typeof n=="object","typeof params must == object");let r;if(e===Mk)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===xk)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);w9(t)&&(n.ns=t.namespace);let i=[];return er(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var iC=class{constructor(){this.counters_={}}incrementCounter(e,n=1){wr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return uD(this.counters_)}};var qE={},GE={};function HC(t){let e=t.toString();return qE[e]||(qE[e]=new iC),qE[e]}function E9(t,e){let n=t.toString();return GE[n]||(GE[n]=e()),GE[n]}var sC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ll(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var qP="start",C9="close",T9="pLPCommand",b9="pRTLPCB",kk="id",Ok="pw",Fk="ser",D9="cb",S9="seg",A9="ts",R9="d",N9="dframe",Lk=1870,Vk=30,M9=Lk-Vk,x9=25e3,P9=3e4,oC=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fl(e),this.stats_=HC(n),this.urlFn=c=>(this.appCheckToken&&(c[rC]=this.appCheckToken),Pk(n,xk,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new sC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(P9)),f9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new aC((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===qP)this.id=a,this.password=c;else if(o===C9)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[qP]="t",r[Fk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[D9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Tk]=rg,this.transportSessionId&&(r[bk]=this.transportSessionId),this.lastSessionId&&(r[Rk]=this.lastSessionId),this.applicationId&&(r[Nk]=this.applicationId),this.appCheckToken&&(r[rC]=this.appCheckToken),typeof location<"u"&&location.hostname&&Ak.test(location.hostname)&&(r[Dk]=Sk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return vr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!g9()&&!m9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Pt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=aD(n),i=Ek(r,M9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(vr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[N9]="t",r[kk]=e,r[Ok]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Pt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},aC=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,vr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=l9(),window[T9+this.uniqueCallbackIdentifier]=e,window[b9+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){en("frame writing exception"),a.stack&&en(a.stack),en(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||en("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[kk]=this.myID,e[Ok]=this.myPW,e[Fk]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Vk+r.length<=Lk;){let o=this.pendingSegs.shift();r=r+"&"+S9+i+"="+o.seg+"&"+A9+i+"="+o.ts+"&"+R9+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(x9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){vr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{en("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var k9=16384,O9=45e3,sg=null;typeof MozWebSocket<"u"?sg=MozWebSocket:typeof WebSocket<"u"&&(sg=WebSocket);var Tl=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fl(this.connId),this.stats_=HC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[Tk]=rg,!vr()&&typeof location<"u"&&location.hostname&&Ak.test(location.hostname)&&(a[Dk]=Sk),r&&(a[bk]=r),i&&(a[Rk]=i),s&&(a[rC]=s),o&&(a[Nk]=o),Pk(n,Mk,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,yo.set("previous_websocket_failure",!0);try{let i;if(vr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${rg}/${BC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new sg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&sg!==null&&!t.forceDisallow_}static previouslyFailed(){return yo.isInMemoryStorage||yo.get("previous_websocket_failure")===!0}markConnectionHealthy(){yo.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Id(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(U(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Pt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Ek(r,k9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(O9))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),F9=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[oC,Tl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Tl&&Tl.isAvailable(),i=r&&!Tl.previouslyFailed();if(n.webSocketOnly&&(r||Ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Tl];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),L9=6e4,V9=5e3,U9=10*1024,j9=100*1024,zE="t",GP="d",B9="s",zP="r",$9="e",WP="o",KP="a",QP="n",YP="p",H9="h",cC=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fl("c:"+this.id+":"),this.transportManager_=new F9(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Al(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>j9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>U9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(zE in e){let n=e[zE];n===KP?this.upgradeIfSecondaryHealthy_():n===zP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===WP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Cl("t",e),r=Cl("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:YP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:KP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:QP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Cl("t",e),r=Cl("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Cl(zE,e);if(GP in e){let r=e[GP];if(n===H9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===QP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===B9?this.onConnectionShutdown_(r):n===zP?this.onReset_(r):n===$9?eC("Server Error: "+r):n===WP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eC("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),rg!==r&&Ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Al(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(L9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Al(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(V9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:YP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(yo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var og=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var ag=class{constructor(e){this.allowedEvents_=e,this.listeners_={},U(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){U(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var cg=class t extends ag{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Uc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return U(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var ZP=32,JP=768,He=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Le(){return new He("")}function be(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function os(t){return t.pieces_.length-t.pieceNum_}function Ye(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new He(t.pieces_,e)}function Uk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function q9(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function jk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Bk(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new He(e,0)}function Lt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof He)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new He(n,0)}function Ce(t){return t.pieceNum_>=t.pieces_.length}function Jn(t,e){let n=be(t),r=be(e);if(n===null)return e;if(n===r)return Jn(Ye(t),Ye(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function $k(t,e){if(os(t)!==os(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function yr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(os(t)>os(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var uC=class{constructor(e,n){this.errorPrefix_=n,this.parts_=jk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Gc(this.parts_[r]);Hk(this)}};function G9(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Gc(e),Hk(t)}function z9(t){let e=t.parts_.pop();t.byteLength_-=Gc(e),t.parts_.length>0&&(t.byteLength_-=1)}function Hk(t){if(t.byteLength_>JP)throw new Error(t.errorPrefix_+"has a key path longer than "+JP+" bytes ("+t.byteLength_+").");if(t.parts_.length>ZP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZP+") or object contains a cycle "+mo(t))}function mo(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var lC=class t extends ag{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return U(e==="visible","Unknown event type: "+e),[this.visible_]}};var bl=1e3,W9=60*5*1e3,XP=30*1e3,K9=1.3,Q9=3e4,Y9="server_kill",ek=3,qC=(()=>{class t extends og{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Fl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bl,this.maxReconnectDelay_=W9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!vr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");lC.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&cg.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Pt(o)),U(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Im,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),U(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),U(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&wr(n,"w")){let i=gs(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||gD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=XP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=pD(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),U(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Pt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):eC("Unrecognized action received from server: "+Pt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){U(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>Q9&&(this.reconnectDelay_=bl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*K9)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){U(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?en("getToken() completed but was canceled"):(en("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new cC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,I=>{Ln(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(Y9)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Ln(g),l())}}})}interrupt(n){en("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){en("Resuming connection for reason: "+n),delete this.interruptReasons_[n],$c(this.interruptReasons_)&&(this.reconnectDelay_=bl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>$C(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new He(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){en("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=ek&&(this.reconnectDelay_=XP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){en("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=ek&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";vr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+BC.replace(/\./g,"-")]=1,Uc()?n["framework.cordova"]=1:vd()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=cg.getInstance().currentlyOnline();return $c(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),De=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var rc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new De(nc,e),i=new De(nc,n);return this.compare(r,i)!==0}minPost(){return De.MIN}};var ng,ug=class extends rc{static get __EMPTY_NODE(){return ng}static set __EMPTY_NODE(e){ng=e}compare(e,n){return uc(e.name,n.name)}isDefinedOn(e){throw No("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return De.MIN}maxPost(){return new De(vo,ng)}makePost(e,n){return U(typeof e=="string","KeyIndex indexValue must always be a string."),new De(e,ng)}toString(){return".key"}},tc=new ug;var Ja=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},mr=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Xn.EMPTY_NODE,this.right=o??Xn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Xn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),dC=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new mr(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Xn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,mr.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,mr.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ja(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ja(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ja(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ja(this.root_,null,this.comparator_,!0,e)}};Xn.EMPTY_NODE=new dC;function Z9(t,e){return uc(t.name,e.name)}function GC(t,e){return uc(t,e)}var hC;function J9(t){hC=t}var qk=function(t){return typeof t=="number"?"number:"+Ck(t):"string:"+t},Gk=function(t){if(t.isLeafNode()){let e=t.val();U(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wr(e,".sv"),"Priority must be a string or number.")}else U(t===hC||t.isEmpty(),"priority of unexpected type.");U(t===hC||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var tk,ic=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,U(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Gk(this.priorityNode_)}static set __childrenNodeConstructor(n){tk=n}static get __childrenNodeConstructor(){return tk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ce(n)?this:be(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=be(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(U(i!==".priority"||os(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ye(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+qk(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Ck(this.value_):n+=this.value_,this.lazyHash_=Ik(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(U(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return U(s>=0,"Unknown leaf type: "+r),U(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),zk,Wk;function X9(t){zk=t}function e6(t){Wk=t}var fC=class extends rc{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?uc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return De.MIN}maxPost(){return new De(vo,new ic("[PRIORITY-POST]",Wk))}makePost(e,n){let r=zk(e);return new De(n,new ic("[PRIORITY-POST]",r))}toString(){return".priority"}},nn=new fC;var t6=Math.log(2),pC=class{constructor(e){let n=s=>parseInt(Math.log(s)/t6,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},lg=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new mr(g,f.node,mr.BLACK,null,null);{let y=parseInt(d/2,10)+c,I=i(c,y),R=i(y+1,l);return f=t[y],g=n?n(f):f,new mr(g,f.node,mr.BLACK,I,R)}},s=function(c){let l=null,d=null,f=t.length,g=function(I,R){let S=f-I,P=f;f-=I;let $=i(S+1,P),z=t[S],Z=n?n(z):z;y(new mr(Z,z.node,R,null,$))},y=function(I){l?(l.left=I,l=I):(d=I,l=I)};for(let I=0;I<c.count;++I){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(I+1));R?g(S,mr.BLACK):(g(S,mr.BLACK),g(S,mr.RED))}return d},o=new pC(t.length),a=s(o);return new Xn(r||e,a)};var WE,Za={},sc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return U(Za&&nn,"ChildrenNode.ts has not been loaded"),WE=WE||new t({".priority":Za},{".priority":nn}),WE}get(e){let n=gs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Xn?n:null}hasIndex(e){return wr(this.indexSet_,e.toString())}addIndex(e,n){U(e!==tc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(De.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=lg(r,e.getCompare()):a=Za;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=Hc(this.indexes_,(i,s)=>{let o=gs(this.indexSet_,s);if(U(o,"Missing index implementation for "+s),i===Za)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(De.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),lg(a,o.getCompare())}else return Za;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new De(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Hc(this.indexes_,i=>{if(i===Za)return i;{let s=n.get(e.name);return s?i.remove(new De(e.name,s)):i}});return new t(r,this.indexSet_)}};var Dl,at=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Gk(this.priorityNode_),this.children_.isEmpty()&&U(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dl||(Dl=new t(new Xn(GC),null,sc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dl}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Dl:r}}getChild(n){let r=be(n);return r===null?this:this.getImmediateChild(r).getChild(Ye(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(U(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new De(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Dl:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=be(n);if(i===null)return r;{U(be(n)!==".priority"||os(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ye(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(nn,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+qk(this.getPriority().val())+":"),this.forEachChild(nn,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Ik(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new De(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new De(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new De(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,De.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,De.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Vl?-1:0}withIndex(n){if(n===tc||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===tc||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(nn),s=r.getIterator(nn),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===tc?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),gC=class extends at{constructor(){super(new Xn(GC),at.EMPTY_NODE,sc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return at.EMPTY_NODE}isEmpty(){return!1}},Vl=new gC;Object.defineProperties(De,{MIN:{value:new De(nc,at.EMPTY_NODE)},MAX:{value:new De(vo,Vl)}});ug.__EMPTY_NODE=at.EMPTY_NODE;ic.__childrenNodeConstructor=at;J9(Vl);e6(Vl);var n6=!0;function tn(t,e=null){if(t===null)return at.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),U(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ic(n,tn(e))}if(!(t instanceof Array)&&n6){let n=[],r=!1;if(er(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=tn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new De(o,c)))}}),n.length===0)return at.EMPTY_NODE;let s=lg(n,Z9,o=>o.name,GC);if(r){let o=lg(n,nn.getCompare());return new at(s,tn(e),new sc({".priority":o},{".priority":nn}))}else return new at(s,tn(e),sc.Default)}else{let n=at.EMPTY_NODE;return er(t,(r,i)=>{if(wr(t,r)&&r.substring(0,1)!=="."){let s=tn(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(tn(e))}}X9(tn);var mC=class extends rc{constructor(e){super(),this.indexPath_=e,U(!Ce(e)&&be(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?uc(e.name,n.name):s}makePost(e,n){let r=tn(e),i=at.EMPTY_NODE.updateChild(this.indexPath_,r);return new De(n,i)}maxPost(){let e=at.EMPTY_NODE.updateChild(this.indexPath_,Vl);return new De(vo,e)}toString(){return jk(this.indexPath_,0).join("/")}};var yC=class extends rc{compare(e,n){let r=e.node.compareTo(n.node);return r===0?uc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return De.MIN}maxPost(){return De.MAX}makePost(e,n){let r=tn(e);return new De(n,r)}toString(){return".value"}},r6=new yC;function i6(t){return{type:"value",snapshotNode:t}}function s6(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function o6(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function nk(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function a6(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var _C=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=nn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return U(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return U(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:nc}hasEnd(){return this.endSet_}getIndexEndValue(){return U(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return U(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:vo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return U(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===nn}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function rk(t){let e={};if(t.isDefault())return e;let n;if(t.index_===nn?n="$priority":t.index_===r6?n="$value":t.index_===tc?n="$key":(U(t.index_ instanceof mC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Pt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Pt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Pt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Pt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Pt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ik(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==nn&&(e.i=t.index_.toString()),e}var vC=class t extends og{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(U(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=rk(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),gs(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=rk(e._queryParams),r=e._path.toString(),i=new Im;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ms(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Id(a.responseText)}catch{Ln("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Ln("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var IC=class{constructor(){this.rootNode_=at.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function dg(){return{value:null,children:new Map}}function Kk(t,e,n){if(Ce(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=be(e);t.children.has(r)||t.children.set(r,dg());let i=t.children.get(r);e=Ye(e),Kk(i,e,n)}}function wC(t,e,n){t.value!==null?n(e,t.value):c6(t,(r,i)=>{let s=new He(e.toString()+"/"+r);wC(i,s,n)})}function c6(t,e){t.children.forEach((n,r)=>{e(r,n)})}var EC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&er(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var sk=10*1e3,u6=30*1e3,l6=5*60*1e3,CC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new EC(e);let r=sk+(u6-sk)*Math.random();Al(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;er(e,(i,s)=>{s>0&&wr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Al(this.reportStats_.bind(this),Math.floor(Math.random()*2*l6))}};var yi=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(yi||{});function Qk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Yk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zk(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var TC=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=yi.ACK_USER_WRITE,this.source=Qk()}operationForChild(e){if(Ce(this.path)){if(this.affectedTree.value!=null)return U(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new He(e));return new t(Le(),n,this.revert)}}else return U(be(this.path)===e,"operationForChild called for unrelated child."),new t(Ye(this.path),this.affectedTree,this.revert)}};var oc=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=yi.OVERWRITE}operationForChild(e){return Ce(this.path)?new t(this.source,Le(),this.snap.getImmediateChild(e)):new t(this.source,Ye(this.path),this.snap)}};var hg=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=yi.MERGE}operationForChild(e){if(Ce(this.path)){let n=this.children.subtree(new He(e));return n.isEmpty()?null:n.value?new oc(this.source,Le(),n.value):new t(this.source,Le(),n)}else return U(be(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ye(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var xl=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ce(e))return this.isFullyInitialized()&&!this.filtered_;let n=be(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function d6(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(a6(o.childName,o.snapshotNode))}),Sl(t,i,"child_removed",e,r,n),Sl(t,i,"child_added",e,r,n),Sl(t,i,"child_moved",s,r,n),Sl(t,i,"child_changed",e,r,n),Sl(t,i,"value",e,r,n),i}function Sl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>f6(t,a,c)),o.forEach(a=>{let c=h6(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function h6(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function f6(t,e,n){if(e.childName==null||n.childName==null)throw No("Should only compare child_ events.");let r=new De(e.childName,e.snapshotNode),i=new De(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Jk(t,e){return{eventCache:t,serverCache:e}}function Nl(t,e,n,r){return Jk(new xl(e,n,r),t.serverCache)}function Xk(t,e,n,r){return Jk(t.eventCache,new xl(e,n,r))}function bC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Io(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var KE,p6=()=>(KE||(KE=new Xn(p9)),KE),bn=class t{constructor(e,n=p6()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return er(e,(r,i)=>{n=n.set(new He(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Le(),value:this.value};if(Ce(e))return null;{let r=be(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ye(e),n);return s!=null?{path:Lt(new He(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ce(e))return this;{let n=be(e),r=this.children.get(n);return r!==null?r.subtree(Ye(e)):new t(null)}}set(e,n){if(Ce(e))return new t(n,this.children);{let r=be(e),s=(this.children.get(r)||new t(null)).set(Ye(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(Ce(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=be(e),r=this.children.get(n);if(r){let i=r.remove(Ye(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Ce(e))return this.value;{let n=be(e),r=this.children.get(n);return r?r.get(Ye(e)):null}}setTree(e,n){if(Ce(e))return n;{let r=be(e),s=(this.children.get(r)||new t(null)).setTree(Ye(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Le(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Lt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Le(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ce(e))return null;{let s=be(e),o=this.children.get(s);return o?o.findOnPath_(Ye(e),Lt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Le(),n)}foreachOnPath_(e,n,r){if(Ce(e))return this;{this.value&&r(n,this.value);let i=be(e),s=this.children.get(i);return s?s.foreachOnPath_(Ye(e),Lt(n,i),r):new t(null)}}foreach(e){this.foreach_(Le(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Lt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var _r=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new bn(null))}};function Ml(t,e,n){if(Ce(e))return new _r(new bn(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=Jn(i,e);return s=s.updateChild(o,n),new _r(t.writeTree_.set(i,s))}else{let i=new bn(n),s=t.writeTree_.setTree(e,i);return new _r(s)}}}function ok(t,e,n){let r=t;return er(n,(i,s)=>{r=Ml(r,Lt(e,i),s)}),r}function ak(t,e){if(Ce(e))return _r.empty();{let n=t.writeTree_.setTree(e,new bn(null));return new _r(n)}}function DC(t,e){return wo(t,e)!=null}function wo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Jn(n.path,e)):null}function ck(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(nn,(r,i)=>{e.push(new De(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new De(r,i.value))}),e}function ss(t,e){if(Ce(e))return t;{let n=wo(t,e);return n!=null?new _r(new bn(n)):new _r(t.writeTree_.subtree(e))}}function SC(t){return t.writeTree_.isEmpty()}function ac(t,e){return eO(Le(),t.writeTree_,e)}function eO(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(U(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=eO(Lt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Lt(t,".priority"),r)),n}}function tO(t,e){return oO(e,t)}function g6(t,e,n,r,i){U(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Ml(t.visibleWrites,e,n)),t.lastWriteId=r}function m6(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function y6(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);U(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&_6(a,r.path)?i=!1:yr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return v6(t),!0;if(r.snap)t.visibleWrites=ak(t.visibleWrites,r.path);else{let a=r.children;er(a,c=>{t.visibleWrites=ak(t.visibleWrites,Lt(r.path,c))})}return!0}else return!1}function _6(t,e){if(t.snap)return yr(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&yr(Lt(t.path,n),e))return!0;return!1}function v6(t){t.visibleWrites=nO(t.allWrites,I6,Le()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function I6(t){return t.visible}function nO(t,e,n){let r=_r.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)yr(n,o)?(a=Jn(n,o),r=Ml(r,a,s.snap)):yr(o,n)&&(a=Jn(o,n),r=Ml(r,Le(),s.snap.getChild(a)));else if(s.children){if(yr(n,o))a=Jn(n,o),r=ok(r,a,s.children);else if(yr(o,n))if(a=Jn(o,n),Ce(a))r=ok(r,Le(),s.children);else{let c=gs(s.children,be(a));if(c){let l=c.getChild(Ye(a));r=Ml(r,Le(),l)}}}else throw No("WriteRecord should have .snap or .children")}}return r}function rO(t,e,n,r,i){if(!r&&!i){let s=wo(t.visibleWrites,e);if(s!=null)return s;{let o=ss(t.visibleWrites,e);if(SC(o))return n;if(n==null&&!DC(o,Le()))return null;{let a=n||at.EMPTY_NODE;return ac(o,a)}}}else{let s=ss(t.visibleWrites,e);if(!i&&SC(s))return n;if(!i&&n==null&&!DC(s,Le()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(yr(l.path,e)||yr(e,l.path))},a=nO(t.allWrites,o,e),c=n||at.EMPTY_NODE;return ac(a,c)}}}function w6(t,e,n){let r=at.EMPTY_NODE,i=wo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(nn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=ss(t.visibleWrites,e);return n.forEachChild(nn,(o,a)=>{let c=ac(ss(s,new He(o)),a);r=r.updateImmediateChild(o,c)}),ck(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ss(t.visibleWrites,e);return ck(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function E6(t,e,n,r,i){U(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Lt(e,n);if(DC(t.visibleWrites,s))return null;{let o=ss(t.visibleWrites,s);return SC(o)?i.getChild(n):ac(o,i.getChild(n))}}function C6(t,e,n,r){let i=Lt(e,n),s=wo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=ss(t.visibleWrites,i);return ac(o,r.getNode().getImmediateChild(n))}else return null}function T6(t,e){return wo(t.visibleWrites,e)}function b6(t,e,n,r,i,s,o){let a,c=ss(t.visibleWrites,e),l=wo(c,Le());if(l!=null)a=l;else if(n!=null)a=ac(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=g.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=g.getNext();return d}else return[]}function D6(){return{visibleWrites:_r.empty(),allWrites:[],lastWriteId:-1}}function AC(t,e,n,r){return rO(t.writeTree,t.treePath,e,n,r)}function iO(t,e){return w6(t.writeTree,t.treePath,e)}function uk(t,e,n,r){return E6(t.writeTree,t.treePath,e,n,r)}function fg(t,e){return T6(t.writeTree,Lt(t.treePath,e))}function S6(t,e,n,r,i,s){return b6(t.writeTree,t.treePath,e,n,r,i,s)}function zC(t,e,n){return C6(t.writeTree,t.treePath,e,n)}function sO(t,e){return oO(Lt(t.treePath,e),t.writeTree)}function oO(t,e){return{treePath:t,writeTree:e}}var RC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;U(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),U(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,nk(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,o6(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,s6(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,nk(r,e.snapshotNode,i.oldSnap));else throw No("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var NC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},aO=new NC,Pl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new xl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return zC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Io(this.viewCache_),s=S6(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function A6(t,e){U(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),U(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function R6(t,e,n,r,i){let s=new RC,o,a;if(n.type===yi.OVERWRITE){let l=n;l.source.fromUser?o=MC(t,e,l.path,l.snap,r,i,s):(U(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ce(l.path),o=pg(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===yi.MERGE){let l=n;l.source.fromUser?o=M6(t,e,l.path,l.children,r,i,s):(U(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=xC(t,e,l.path,l.children,r,i,a,s))}else if(n.type===yi.ACK_USER_WRITE){let l=n;l.revert?o=k6(t,e,l.path,r,i,s):o=x6(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===yi.LISTEN_COMPLETE)o=P6(t,e,n.path,r,s);else throw No("Unknown operation type: "+n.type);let c=s.getChanges();return N6(e,o,c),{viewCache:o,changes:c}}function N6(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=bC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(i6(bC(e)))}}function cO(t,e,n,r,i,s){let o=e.eventCache;if(fg(r,n)!=null)return e;{let a,c;if(Ce(n))if(U(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Io(e),d=l instanceof at?l:at.EMPTY_NODE,f=iO(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=AC(r,Io(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=be(n);if(l===".priority"){U(os(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=uk(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=Ye(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=uk(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=zC(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Nl(e,a,o.isFullyInitialized()||Ce(n),t.filter.filtersNodes())}}function pg(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(Ce(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=be(n);if(!c.isCompleteForPath(n)&&os(n)>1)return e;let I=Ye(n),S=c.getNode().getImmediateChild(y).updateChild(I,r);y===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),y,S,I,aO,null)}let f=Xk(e,l,c.isFullyInitialized()||Ce(n),d.filtersNodes()),g=new Pl(i,f,s);return cO(t,f,n,i,g,a)}function MC(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new Pl(i,e,s);if(Ce(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Nl(e,l,!0,t.filter.filtersNodes());else{let f=be(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Nl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=Ye(n),y=a.getNode().getImmediateChild(f),I;if(Ce(g))I=r;else{let R=d.getCompleteChild(f);R!=null?Uk(g)===".priority"&&R.getChild(Bk(g)).isEmpty()?I=R:I=R.updateChild(g,r):I=at.EMPTY_NODE}if(y.equals(I))c=e;else{let R=t.filter.updateChild(a.getNode(),f,I,g,d,o);c=Nl(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function lk(t,e){return t.eventCache.isCompleteForChild(e)}function M6(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=Lt(n,c);lk(e,be(d))&&(a=MC(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=Lt(n,c);lk(e,be(d))||(a=MC(t,a,d,l,i,s,o))}),a}function dk(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function xC(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ce(n)?l=r:l=new bn(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),I=dk(t,y,g);c=pg(t,c,new He(f),I,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let y=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!y){let I=e.serverCache.getNode().getImmediateChild(f),R=dk(t,I,g);c=pg(t,c,new He(f),R,i,s,o,a)}}),c}function x6(t,e,n,r,i,s,o){if(fg(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ce(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return pg(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Ce(n)){let l=new bn(null);return c.getNode().forEachChild(tc,(d,f)=>{l=l.set(new He(d),f)}),xC(t,e,n,l,i,s,a,o)}else return e}else{let l=new bn(null);return r.foreach((d,f)=>{let g=Lt(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),xC(t,e,n,l,i,s,a,o)}}function P6(t,e,n,r,i){let s=e.serverCache,o=Xk(e,s.getNode(),s.isFullyInitialized()||Ce(n),s.isFiltered());return cO(t,o,n,r,aO,i)}function k6(t,e,n,r,i,s){let o;if(fg(r,n)!=null)return e;{let a=new Pl(r,e,i),c=e.eventCache.getNode(),l;if(Ce(n)||be(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=AC(r,Io(e));else{let f=e.serverCache.getNode();U(f instanceof at,"serverChildren would be complete if leaf node"),d=iO(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=be(n),f=zC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,Ye(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,at.EMPTY_NODE,Ye(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=AC(r,Io(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||fg(r,Le())!=null,Nl(e,l,o,t.filter.filtersNodes())}}function O6(t,e){let n=Io(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ce(e)&&!n.getImmediateChild(be(e)).isEmpty())?n.getChild(e):null}function hk(t,e,n,r){e.type===yi.MERGE&&e.source.queryId!==null&&(U(Io(t.viewCache_),"We should always have a full cache before handling merges"),U(bC(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=R6(t.processor_,i,e,n,r);return A6(t.processor_,s.viewCache),U(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,F6(t,s.changes,s.viewCache.eventCache.getNode(),null)}function F6(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return d6(t.eventGenerator_,e,n,i)}var fk;function L6(t){U(!fk,"__referenceConstructor has already been defined"),fk=t}function WC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return U(s!=null,"SyncTree gave us an op for an invalid query."),hk(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(hk(o,e,n,r));return s}}function KC(t,e){let n=null;for(let r of t.views.values())n=n||O6(r,e);return n}var pk;function V6(t){U(!pk,"__referenceConstructor has already been defined"),pk=t}var gg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new bn(null),this.pendingWriteTree_=D6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function U6(t,e,n,r,i){return g6(t.pendingWriteTree_,e,n,r,i),i?yg(t,new oc(Qk(),e,n)):[]}function Xa(t,e,n=!1){let r=m6(t.pendingWriteTree_,e);if(y6(t.pendingWriteTree_,e)){let s=new bn(null);return r.snap!=null?s=s.set(Le(),!0):er(r.children,o=>{s=s.set(new He(o),!0)}),yg(t,new TC(r.path,s,n))}else return[]}function mg(t,e,n){return yg(t,new oc(Yk(),e,n))}function j6(t,e,n){let r=bn.fromObject(n);return yg(t,new hg(Yk(),e,r))}function B6(t,e,n,r){let i=hO(t,r);if(i!=null){let s=fO(i),o=s.path,a=s.queryId,c=Jn(o,e),l=new oc(Zk(a),c,n);return pO(t,o,l)}else return[]}function $6(t,e,n,r){let i=hO(t,r);if(i){let s=fO(i),o=s.path,a=s.queryId,c=Jn(o,e),l=bn.fromObject(n),d=new hg(Zk(a),c,l);return pO(t,o,d)}else return[]}function uO(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=Jn(o,e),l=KC(a,c);if(l)return l});return rO(i,e,s,n,!0)}function yg(t,e){return lO(e,t.syncPointTree_,null,tO(t.pendingWriteTree_,Le()))}function lO(t,e,n,r){if(Ce(t.path))return dO(t,e,n,r);{let i=e.get(Le());n==null&&i!=null&&(n=KC(i,Le()));let s=[],o=be(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=sO(r,o);s=s.concat(lO(a,c,l,d))}return i&&(s=s.concat(WC(i,t,r,n))),s}}function dO(t,e,n,r){let i=e.get(Le());n==null&&i!=null&&(n=KC(i,Le()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=sO(r,o),d=t.operationForChild(o);d&&(s=s.concat(dO(d,a,c,l)))}),i&&(s=s.concat(WC(i,t,r,n))),s}function hO(t,e){return t.tagToQueryMap.get(e)}function fO(t){let e=t.indexOf("$");return U(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new He(t.substr(0,e))}}function pO(t,e,n){let r=t.syncPointTree_.get(e);U(r,"Missing sync point for query tag that we're tracking");let i=tO(t.pendingWriteTree_,e);return WC(r,n,i,null)}var PC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},kC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Lt(this.path_,e);return new t(this.syncTree_,n)}node(){return uO(this.syncTree_,this.path_)}},H6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gk=function(t,e,n){if(!t||typeof t!="object")return t;if(U(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return q6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return G6(t[".sv"],e);U(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},q6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:U(!1,"Unexpected server value: "+t)}},G6=function(t,e,n){t.hasOwnProperty("increment")||U(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&U(!1,"Unexpected increment value: "+r);let i=e.node();if(U(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},z6=function(t,e,n,r){return QC(e,new kC(n,t),r)},W6=function(t,e,n){return QC(t,new PC(e),n)};function QC(t,e,n){let r=t.getPriority().val(),i=gk(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=gk(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ic(a,tn(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ic(i))),o.forEachChild(nn,(a,c)=>{let l=QC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var kl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function YC(t,e){let n=e instanceof He?e:new He(e),r=t,i=be(n);for(;i!==null;){let s=gs(r.node.children,i)||{children:{},childCount:0};r=new kl(i,r,s),n=Ye(n),i=be(n)}return r}function lc(t){return t.node.value}function gO(t,e){t.node.value=e,OC(t)}function mO(t){return t.node.childCount>0}function K6(t){return lc(t)===void 0&&!mO(t)}function _g(t,e){er(t.node.children,(n,r)=>{e(new kl(n,t,r))})}function yO(t,e,n,r){n&&!r&&e(t),_g(t,i=>{yO(i,e,!0,r)}),n&&r&&e(t)}function Q6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ul(t){return new He(t.parent===null?t.name:Ul(t.parent)+"/"+t.name)}function OC(t){t.parent!==null&&Y6(t.parent,t.name,t)}function Y6(t,e,n){let r=K6(n),i=wr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,OC(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,OC(t))}var Z6=/[\[\].#$\/\u0000-\u001F\u007F]/,J6=/[\[\].#$\u0000-\u001F\u007F]/,QE=10*1024*1024,_O=function(t){return typeof t=="string"&&t.length!==0&&!Z6.test(t)},X6=function(t){return typeof t=="string"&&t.length!==0&&!J6.test(t)},e5=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),X6(t)};var vO=function(t,e,n){let r=n instanceof He?new uC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mo(r));if(typeof e=="function")throw new Error(t+"contains a function "+mo(r)+" with contents = "+e.toString());if(wk(e))throw new Error(t+"contains "+e.toString()+" "+mo(r));if(typeof e=="string"&&e.length>QE/3&&Gc(e)>QE)throw new Error(t+"contains a string greater than "+QE+" utf8 bytes "+mo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(er(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!_O(o)))throw new Error(t+" contains an invalid key ("+o+") "+mo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);G9(r,o),vO(t,a,r),z9(r)}),i&&s)throw new Error(t+' contains ".value" child '+mo(r)+" in addition to actual children.")}};var t5=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!_O(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!e5(n))throw new Error(_D(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var FC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function n5(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!$k(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Eo(t,e,n){n5(t,n),r5(t,r=>yr(r,e)||yr(e,r))}function r5(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(i5(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function i5(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();_o&&en("event: "+n.toString()),Ll(r)}}}var s5="repo_interrupt",o5=25,LC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new FC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=dg(),this.transactionQueueTree_=new kl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function a5(t,e,n){if(t.stats_=HC(t.repoInfo_),t.forceRestClient_||I9())t.server_=new vC(t.repoInfo_,(r,i,s,o)=>{mk(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>yk(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Pt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new qC(t.repoInfo_,e,(r,i,s,o)=>{mk(t,r,i,s,o)},r=>{yk(t,r)},r=>{u5(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=E9(t.repoInfo_,()=>new CC(t.stats_,t.server_)),t.infoData_=new IC,t.infoSyncTree_=new gg({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=mg(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ZC(t,"connected",!1),t.serverSyncTree_=new gg({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Eo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function c5(t){let n=t.infoData_.getNode(new He(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function IO(t){return H6({timestamp:c5(t)})}function mk(t,e,n,r,i){t.dataUpdateCount++;let s=new He(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Hc(n,l=>tn(l));o=$6(t.serverSyncTree_,s,c,i)}else{let c=tn(n);o=B6(t.serverSyncTree_,s,c,i)}else if(r){let c=Hc(n,l=>tn(l));o=j6(t.serverSyncTree_,s,c)}else{let c=tn(n);o=mg(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=XC(t,s)),Eo(t.eventQueue_,a,o)}function yk(t,e){ZC(t,"connected",e),e===!1&&d5(t)}function u5(t,e){er(e,(n,r)=>{ZC(t,n,r)})}function ZC(t,e,n){let r=new He("/.info/"+e),i=tn(n);t.infoData_.updateSnapshot(r,i);let s=mg(t.infoSyncTree_,r,i);Eo(t.eventQueue_,r,s)}function l5(t){return t.nextWriteId_++}function d5(t){wO(t,"onDisconnectEvents");let e=IO(t),n=dg();wC(t.onDisconnect_,Le(),(i,s)=>{let o=z6(i,s,t.serverSyncTree_,e);Kk(n,i,o)});let r=[];wC(n,Le(),(i,s)=>{r=r.concat(mg(t.serverSyncTree_,i,s));let o=g5(t,i);XC(t,o)}),t.onDisconnect_=dg(),Eo(t.eventQueue_,Le(),r)}function h5(t){t.persistentConnection_&&t.persistentConnection_.interrupt(s5)}function wO(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),en(n,...e)}function EO(t,e,n){return uO(t.serverSyncTree_,e,n)||at.EMPTY_NODE}function JC(t,e=t.transactionQueueTree_){if(e||vg(t,e),lc(e)){let n=TO(t,e);U(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&f5(t,Ul(e),n)}else mO(e)&&_g(e,n=>{JC(t,n)})}function f5(t,e,n){let r=n.map(l=>l.currentWriteId),i=EO(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];U(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=Jn(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{wO(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(Xa(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();vg(t,YC(t.transactionQueueTree_,e)),JC(t,t.transactionQueueTree_),Eo(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Ll(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Ln("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}XC(t,e)}},o)}function XC(t,e){let n=CO(t,e),r=Ul(n),i=TO(t,n);return p5(t,i,r),r}function p5(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Jn(n,c.path),d=!1,f;if(U(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Xa(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=o5)d=!0,f="maxretry",i=i.concat(Xa(t.serverSyncTree_,c.currentWriteId,!0));else{let g=EO(t,c.path,o);c.currentInputSnapshot=g;let y=e[a].update(g.val());if(y!==void 0){vO("transaction failed: Data returned ",y,c.path);let I=tn(y);typeof y=="object"&&y!=null&&wr(y,".priority")||(I=I.updatePriority(g.getPriority()));let S=c.currentWriteId,P=IO(t),$=W6(I,g,P);c.currentOutputSnapshotRaw=I,c.currentOutputSnapshotResolved=$,c.currentWriteId=l5(t),o.splice(o.indexOf(S),1),i=i.concat(U6(t.serverSyncTree_,c.path,$,c.currentWriteId,c.applyLocally)),i=i.concat(Xa(t.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(Xa(t.serverSyncTree_,c.currentWriteId,!0))}Eo(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}vg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Ll(r[a]);JC(t,t.transactionQueueTree_)}function CO(t,e){let n,r=t.transactionQueueTree_;for(n=be(e);n!==null&&lc(r)===void 0;)r=YC(r,n),e=Ye(e),n=be(e);return r}function TO(t,e){let n=[];return bO(t,e,n),n.sort((r,i)=>r.order-i.order),n}function bO(t,e,n){let r=lc(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);_g(e,i=>{bO(t,i,n)})}function vg(t,e){let n=lc(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,gO(e,n.length>0?n:void 0)}_g(e,r=>{vg(t,r)})}function g5(t,e){let n=Ul(CO(t,e)),r=YC(t.transactionQueueTree_,e);return Q6(r,i=>{YE(t,i)}),YE(t,r),yO(r,i=>{YE(t,i)}),n}function YE(t,e){let n=lc(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(U(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(U(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Xa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?gO(e,void 0):n.length=s+1,Eo(t.eventQueue_,Ul(e),i);for(let o=0;o<r.length;o++)Ll(r[o])}}function m5(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function y5(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ln(`Invalid query segment '${n}' in query '${t}'`)}return e}var _k=function(t,e){let n=_5(t),r=n.namespace;n.domain==="firebase.com"&&_i(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_i("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||h9();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ig(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new He(n.pathString)}},_5=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=m5(t.substring(d,f)));let g=y5(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let I=e.indexOf(".");r=e.substring(0,I).toLowerCase(),n=e.substring(I+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var VC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ce(this._path)?null:Uk(this._path)}get ref(){return new cc(this._repo,this._path)}get _queryIdentifier(){let e=ik(this._queryParams),n=$C(e);return n==="{}"?"default":n}get _queryObject(){return ik(this._queryParams)}isEqual(e){if(e=we(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=$k(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+q9(this._path)}};var cc=class t extends VC{constructor(e,n){super(e,n,new _C,!1)}get parent(){let e=Bk(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};L6(cc);V6(cc);var v5="FIREBASE_DATABASE_EMULATOR_HOST",UC={},I5=!1;function w5(t,e,n,r){t.repoInfo_=new ig(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function E5(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||_i("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),en("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=_k(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[v5]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=_k(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Rl(Rl.OWNER):new nC(t.name,t.options,e);t5("Invalid Firebase Database URL",o),Ce(o.path)||_i("Database URL must point to the root of a Firebase Database (not including a child path).");let f=T5(a,t,d,new tC(t.name,n));return new jC(f,t)}function C5(t,e){let n=UC[e];(!n||n[t.key]!==t)&&_i(`Database ${e}(${t.repoInfo_}) has already been deleted.`),h5(t),delete n[t.key]}function T5(t,e,n,r){let i=UC[e.name];i||(i={},UC[e.name]=i);let s=i[t.toURLString()];return s&&_i("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new LC(t,I5,n,r),i[t.toURLString()]=s,s}var jC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(a5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new cc(this._repo,Le())),this._rootInternal}_delete(){return this._rootInternal!==null&&(C5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_i("Cannot call "+e+" on a deleted database.")}};function DO(t=wt(),e){let n=It(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Ai("database");r&&SO(n,...r)}return n}function SO(t,e,n,r={}){t=we(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&_i("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_i('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Rl(Rl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Mo(r.mockUserToken,t.app.options.projectId);s=new Rl(o)}w5(i,e,n,s)}function b5(t){u9(mn),gt(new pt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return E5(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Q(jP,BP,t),Q(jP,BP,"esm2017")}qC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};qC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};b5();var jl=class{constructor(e){return e}},AO="database",eT=class{constructor(){return vt(AO)}};var tT=new j("angularfire2.database-instances");function D5(t,e){let n=Tt(AO,t,e);return n&&new jl(n)}function S5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new jl(r)}}var A5={provide:eT,deps:[[new se,tT]]},R5={provide:jl,useFactory:D5,deps:[[new se,tT],Qe]};function RO(t,...e){return Q("angularfire",Ke.full,"rtdb"),qe([R5,A5,{provide:tT,useFactory:S5(t),multi:!0,deps:[te,ve,dt,st,[new se,hr],[new se,Cn],...e]}])}var NO=Se(DO,!0);var PO="functions";var nT=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return _(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var rT="us-central1";var iT=class{constructor(e,n,r,i,s=rT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new nT(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=rT}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function N5(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var MO="@firebase/functions",xO="0.11.8";var M5="auth-internal",x5="app-check-internal",P5="messaging-internal";function k5(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(M5),a=r.getProvider(P5),c=r.getProvider(x5);return new iT(s,o,a,c,i,t)};gt(new pt(PO,n,"PUBLIC").setMultipleInstances(!0)),Q(MO,xO,e),Q(MO,xO,"esm2017")}function kO(t=wt(),e=rT){let r=It(we(t),PO).getImmediate({identifier:e}),i=Ai("functions");return i&&OO(r,...i),r}function OO(t,e,n){N5(we(t),e,n)}k5(fetch.bind(self));var Bl=class{constructor(e){return e}},FO="functions",sT=class{constructor(){return vt(FO)}};var oT=new j("angularfire2.functions-instances");function O5(t,e){let n=Tt(FO,t,e);return n&&new Bl(n)}function F5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Bl(r)}}var L5={provide:sT,deps:[[new se,oT]]},V5={provide:Bl,useFactory:O5,deps:[[new se,oT],Qe]};function LO(t,...e){return Q("angularfire",Ke.full,"fn"),qe([V5,L5,{provide:oT,useFactory:F5(t),multi:!0,deps:[te,ve,dt,st,[new se,hr],[new se,Cn],...e]}])}var VO=Se(kO,!0);var U5="/firebase-messaging-sw.js",j5="/firebase-cloud-messaging-push-scope",qO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",B5="https://fcmregistrations.googleapis.com/v1",GO="google.c.a.c_id",$5="google.c.a.c_l",H5="google.c.a.ts",q5="google.c.a.e";var Ig=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Ig||{});function vi(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function G5(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var aT="fcm_token_details_db",z5=5,UO="fcm_token_object_Store";function W5(t){return _(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(aT))return null;let e=null;return(yield wm(aT,z5,{upgrade:(r,i,s,o)=>_(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(UO))return;let c=o.objectStore(UO),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:vi(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:vi(d.auth),p256dh:vi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:vi(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:vi(d.auth),p256dh:vi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:vi(d.vapidKey)}}}}})})).close(),yield wd(aT),yield wd("fcm_vapid_details_db"),yield wd("undefined"),K5(e)?e:null})}function K5(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var Q5="firebase-messaging-database",Y5=1,$l="firebase-messaging-store",cT=null;function zO(){return cT||(cT=wm(Q5,Y5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore($l)}}})),cT}function Z5(t){return _(this,null,function*(){let e=WO(t),r=yield(yield zO()).transaction($l).objectStore($l).get(e);if(r)return r;{let i=yield W5(t.appConfig.senderId);if(i)return yield dT(t,i),i}})}function dT(t,e){return _(this,null,function*(){let n=WO(t),i=(yield zO()).transaction($l,"readwrite");return yield i.objectStore($l).put(e,n),yield i.done,e})}function WO({appConfig:t}){return t.appId}var J5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},pn=new Ir("messaging","Messaging",J5);function X5(t,e){return _(this,null,function*(){let n=yield fT(t),r=KO(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(hT(t.appConfig),i)).json()}catch(o){throw pn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw pn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw pn.create("token-subscribe-no-token");return s.token})}function e8(t,e){return _(this,null,function*(){let n=yield fT(t),r=KO(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${hT(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw pn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw pn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw pn.create("token-update-no-token");return s.token})}function t8(t,e){return _(this,null,function*(){let r={method:"DELETE",headers:yield fT(t)};try{let s=yield(yield fetch(`${hT(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw pn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw pn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function hT({projectId:t}){return`${B5}/projects/${t}/registrations`}function fT(n){return _(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function KO({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==qO&&(i.web.applicationPubKey=r),i}var n8=7*24*60*60*1e3;function r8(t){return _(this,null,function*(){let e=yield s8(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:vi(e.getKey("auth")),p256dh:vi(e.getKey("p256dh"))},r=yield Z5(t.firebaseDependencies);if(r){if(o8(r.subscriptionOptions,n))return Date.now()>=r.createTime+n8?i8(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield t8(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return jO(t.firebaseDependencies,n)}else return jO(t.firebaseDependencies,n)})}function i8(t,e){return _(this,null,function*(){try{let n=yield e8(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield dT(t.firebaseDependencies,r),n}catch(n){throw n}})}function jO(t,e){return _(this,null,function*(){let r={token:yield X5(t,e),createTime:Date.now(),subscriptionOptions:e};return yield dT(t,r),r.token})}function s8(t,e){return _(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:G5(e)})})}function o8(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function BO(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return a8(e,t),c8(e,t),u8(e,t),e}function a8(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function c8(t,e){e.data&&(t.data=e.data)}function u8(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function l8(t){return typeof t=="object"&&!!t&&GO in t}d8("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function d8(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function h8(t){if(!t||!t.options)throw uT("App Configuration Object");if(!t.name)throw uT("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw uT(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function uT(t){return pn.create("missing-app-config-values",{valueName:t})}var lT=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=h8(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function f8(t){return _(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(U5,{scope:j5}),t.swRegistration.update().catch(()=>{})}catch(e){throw pn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function p8(t,e){return _(this,null,function*(){if(!e&&!t.swRegistration&&(yield f8(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw pn.create("invalid-sw-registration");t.swRegistration=e}})}function g8(t,e){return _(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=qO)})}function m8(t,e){return _(this,null,function*(){if(!navigator)throw pn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw pn.create("permission-blocked");return yield g8(t,e?.vapidKey),yield p8(t,e?.serviceWorkerRegistration),r8(t)})}function y8(t,e,n){return _(this,null,function*(){let r=_8(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[GO],message_name:n[$5],message_time:n[H5],message_device_time:Math.floor(Date.now()/1e3)})})}function _8(t){switch(t){case Ig.NOTIFICATION_CLICKED:return"notification_open";case Ig.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function v8(t,e){return _(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ig.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(BO(n)):t.onMessageHandler.next(BO(n)));let r=n.data;l8(r)&&r[q5]==="1"&&(yield y8(t,n.messageType,r))})}var $O="@firebase/messaging",HO="0.12.12";var I8=t=>{let e=new lT(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>v8(e,n)),e},w8=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>m8(e,r)}};function E8(){gt(new pt("messaging",I8,"PUBLIC")),gt(new pt("messaging-internal",w8,"PRIVATE")),Q($O,HO),Q($O,HO,"esm2017")}function pT(){return _(this,null,function*(){try{yield ps()}catch{return!1}return typeof window<"u"&&Gr()&&Bc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function QO(t=wt()){return pT().then(e=>{if(!e)throw pn.create("unsupported-browser")},e=>{throw pn.create("indexed-db-unsupported")}),It(we(t),"messaging").getImmediate()}E8();var Hl=class{constructor(e){return e}},YO="messaging",gT=class{constructor(){return vt(YO)}};var ZO="__angularfire_symbol__messagingIsSupported",mT="__angularfire_symbol__messagingIsSupportedValue";globalThis[ZO]||=pT().then(t=>globalThis[mT]=t).catch(()=>globalThis[mT]=!1);var wg={async:()=>globalThis[ZO],sync:()=>{let t=globalThis[mT];if(t===void 0)throw new Error(ba("Messaging"));return t}},yT=new j("angularfire2.messaging-instances");function C8(t,e){if(!wg.sync())return null;let n=Tt(YO,t,e);return n&&new Hl(n)}function T8(t){return(e,n)=>{if(!wg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Hl(r)}}var b8={provide:gT,deps:[[new se,yT]]},D8={provide:Hl,useFactory:C8,deps:[[new se,yT],Qe]};function JO(t,...e){return Q("angularfire",Ke.full,"fcm"),qe([D8,b8,{provide:Gi,useValue:wg.async,multi:!0},{provide:yT,useFactory:T8(t),multi:!0,deps:[te,ve,dt,st,...e]}])}var xce=wg.async;var XO=Se(QO,!0);var ql=class{constructor(e){return e}},e1="performance",_T=class{constructor(){return vt(e1)}};var vT=new j("angularfire2.performance-instances");function S8(t,e,n){if(!$_(n))return null;let r=Tt(e1,t,e);return r&&new ql(r)}function A8(t){return(e,n,r)=>{if(!$_(n))return null;let i=e.runOutsideAngular(()=>t(r));return new ql(i)}}var R8={provide:_T,deps:[[new se,vT]]},N8={provide:ql,useFactory:S8,deps:[[new se,vT],Qe,ar]};function t1(t,...e){return Q("angularfire",Ke.full,"perf"),qe([N8,R8,{provide:vT,useFactory:A8(t),multi:!0,deps:[te,ar,ve,dt,st,...e]}])}var n1=Se(wD,!0);var c1="firebasestorage.googleapis.com",M8="storageBucket",x8=2*60*1e3,P8=10*60*1e3;var Br=class t extends gn{constructor(e,n,r=0){super(IT(e),`Firebase Storage: ${n} (${IT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return IT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},wi=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(wi||{});function IT(t){return"storage/"+t}function k8(){let t="An unknown error occurred, please check the error payload for server response.";return new Br(wi.UNKNOWN,t)}function O8(){return new Br(wi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function F8(){return new Br(wi.CANCELED,"User canceled the upload/download.")}function L8(t){return new Br(wi.INVALID_URL,"Invalid URL '"+t+"'.")}function V8(t){return new Br(wi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function r1(t){return new Br(wi.INVALID_ARGUMENT,t)}function u1(){return new Br(wi.APP_DELETED,"The Firebase app was deleted.")}function U8(t){return new Br(wi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ii=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw V8(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(Z){Z.path_=decodeURIComponent(Z.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),I={bucket:1,path:3},R=n===c1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",P=new RegExp(`^https?://${R}/${i}/${S}`,"i"),z=[{regex:a,indices:c,postModify:s},{regex:y,indices:I,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let Z=0;Z<z.length;Z++){let Ve=z[Z],ee=Ve.regex.exec(e);if(ee){let C=ee[Ve.indices.bucket],v=ee[Ve.indices.path];v||(v=""),r=new t(C,v),Ve.postModify(r);break}}if(r==null)throw L8(e);return r}},wT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function j8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,t(y,c())},S)}function g(){s&&clearTimeout(s)}function y(S,...P){if(l){g();return}if(S){g(),d.call(null,S,...P);return}if(c()||o){g(),d.call(null,S,...P);return}r<64&&(r*=2);let z;a===1?(a=2,z=0):z=(r+Math.random())*1e3,f(z)}let I=!1;function R(S){I||(I=!0,g(),!l&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function B8(t){t(!1)}function $8(t){return t!==void 0}function i1(t,e,n,r){if(r<e)throw r1(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw r1(`Invalid value for '${t}'. Expected ${n} or less.`)}function H8(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ET=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ET||{});function q8(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var CT=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,I)=>{this.resolve_=y,this.reject_=I,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new dc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===ET.NO_ERROR,c=s.getStatus();if(!a||q8(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===ET.ABORT;r(!1,new dc(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new dc(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());$8(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=k8();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?u1():F8();o(c)}else{let c=O8();o(c)}};this.canceled_?n(!1,new dc(!1,null,!0)):this.backoffId_=j8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&B8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},dc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function G8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function z8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function W8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function K8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Q8(t,e,n,r,i,s,o=!0){let a=H8(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return W8(l,e),G8(l,n),z8(l,s),K8(l,r),new CT(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function Y8(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Z8(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var Qce=256*1024;var TT=class t{constructor(e,n){this._service=e,n instanceof Ii?this._location=n:this._location=Ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Z8(this._location.path)}get storage(){return this._service}get parent(){let e=Y8(this._location.path);if(e===null)return null;let n=new Ii(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw U8(e)}};function s1(t,e){let n=e?.[M8];return n==null?null:Ii.makeFromBucketSpec(n,t)}function J8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Mo(i,t.app.options.projectId))}var bT=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=c1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=x8,this._maxUploadRetryTime=P8,this._requests=new Set,i!=null?this._bucket=Ii.makeFromBucketSpec(i,this._host):this._bucket=s1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ii.makeFromBucketSpec(this._url,e):this._bucket=s1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){i1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){i1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new TT(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new wT(u1());{let o=Q8(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},o1="@firebase/storage",a1="0.13.2";var l1="storage";function d1(t=wt(),e){t=we(t);let r=It(t,l1).getImmediate({identifier:e}),i=Ai("storage");return i&&h1(r,...i),r}function h1(t,e,n,r={}){J8(t,e,n,r)}function X8(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new bT(n,r,i,e,mn)}function eK(){gt(new pt(l1,X8,"PUBLIC").setMultipleInstances(!0)),Q(o1,a1,""),Q(o1,a1,"esm2017")}eK();var Gl=class{constructor(e){return e}},f1="storage",DT=class{constructor(){return vt(f1)}};var ST=new j("angularfire2.storage-instances");function tK(t,e){let n=Tt(f1,t,e);return n&&new Gl(n)}function nK(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Gl(r)}}var rK={provide:DT,deps:[[new se,ST]]},iK={provide:Gl,useFactory:tK,deps:[[new se,ST],Qe]};function p1(t,...e){return Q("angularfire",Ke.full,"gcs"),qe([iK,rK,{provide:ST,useFactory:nK(t),multi:!0,deps:[te,ve,dt,st,[new se,hr],[new se,Cn],...e]}])}var g1=Se(d1,!0);var AT="@firebase/remote-config",m1="0.4.9";var y1="remote-config";var sK={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Dn=new Ir("remoteconfig","Remote Config",sK);function _1(t=wt()){return t=we(t),It(t,y1).getImmediate()}function v1(t){let e=we(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var RT=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return _(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function oK(t=navigator){return t.languages&&t.languages[0]||t.language}var NT=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return _(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:oK()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((S,P)=>{e.signal.addEventListener(()=>{let $=new Error("The operation was aborted.");$.name="AbortError",P($)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(S){let P="fetch-client-network";throw S?.name==="AbortError"&&(P="fetch-timeout"),Dn.create(P,{originalErrorMessage:S?.message})}let g=f.status,y=f.headers.get("ETag")||void 0,I,R;if(f.status===200){let S;try{S=yield f.json()}catch(P){throw Dn.create("fetch-client-parse",{originalErrorMessage:P?.message})}I=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(I={}),g!==304&&g!==200)throw Dn.create("fetch-status",{httpStatus:g});return{status:g,eTag:y,config:I}})}};function aK(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Dn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function cK(t){if(!(t instanceof gn)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var MT=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return _(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return _(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield aK(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!cK(o))throw o;let a={throttleEndTimeMillis:Date.now()+zc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var uK=60*1e3,lK=12*60*60*1e3,xT=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:uK,minimumFetchIntervalMillis:lK},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Eg(t,e){let n=t.target.error||void 0;return Dn.create(e,{originalErrorMessage:n&&n?.message})}var Co="app_namespace_store",dK="firebase_remote_config",hK=1;function fK(){return new Promise((t,e)=>{try{let n=indexedDB.open(dK,hK);n.onerror=r=>{e(Eg(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Co,{keyPath:"compositeKey"})}}}catch(n){e(Dn.create("storage-open",{originalErrorMessage:n?.message}))}})}var PT=class{constructor(e,n,r,i=fK()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return _(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Co],"readonly").objectStore(Co),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(Eg(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(Dn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return _(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Co],"readwrite").objectStore(Co),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(Eg(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(Dn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return _(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([Co],"readwrite").objectStore(Co),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(Eg(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Dn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var kT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return _(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function pK(){gt(new pt(y1,t,"PUBLIC").setMultipleInstances(!0)),Q(AT,m1),Q(AT,m1,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Dn.create("registration-window");if(!Gr())throw Dn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Dn.create("registration-project-id");if(!o)throw Dn.create("registration-api-key");if(!a)throw Dn.create("registration-app-id");n=n||"firebase";let c=new PT(a,r.name,n),l=new kT(c),d=new Er(AT);d.logLevel=Wt.ERROR;let f=new NT(i,mn,n,s,o,a),g=new MT(f,c),y=new RT(g,c,l,d),I=new xT(r,y,l,c,d);return v1(I),I}}function I1(){return _(this,null,function*(){if(!Gr())return!1;try{return yield ps()}catch{return!1}})}pK();var zl=class{constructor(e){return e}},w1="remote-config",OT=class{constructor(){return vt(w1)}};var FT="__angularfire_symbol__remoteConfigIsSupportedValue",E1="__angularfire_symbol__remoteConfigIsSupported";globalThis[E1]||=I1().then(t=>globalThis[FT]=t).catch(()=>globalThis[FT]=!1);var Cg={async:()=>globalThis[E1],sync:()=>{let t=globalThis[FT];if(t===void 0)throw new Error(ba("RemoteConfig"));return t}},LT=new j("angularfire2.remote-config-instances");function gK(t,e){if(!Cg.sync())return null;let n=Tt(w1,t,e);return n&&new zl(n)}function mK(t){return(e,n)=>{if(!Cg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new zl(r)}}var yK={provide:OT,deps:[[new se,LT]]},_K={provide:zl,useFactory:gK,deps:[[new se,LT],Qe]};function C1(t,...e){return Q("angularfire",Ke.full,"rc"),qe([_K,yK,{provide:Gi,useValue:Cg.async,multi:!0},{provide:LT,useFactory:mK(t),multi:!0,deps:[te,ve,dt,st,...e]}])}var zue=Cg.async;var T1=Se(_1,!0);var b1="@firebase/vertexai-preview",D1="0.0.4";var S1="vertexAI",A1="us-central1";var VT=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||A1}_delete(){return Promise.resolve()}};var UT=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(UT||{});var Jue=[UT.RECITATION,UT.SAFETY];function R1(t=wt(),e){return t=we(t),It(t,S1).getImmediate({identifier:e?.location||A1})}function vK(){gt(new pt(S1,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new VT(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),Q(b1,D1),Q(b1,D1,"esm2017")}vK();var Wl=class{constructor(e){return e}},N1="vertexai",jT=class{constructor(){return vt(N1)}};var BT=new j("angularfire2.vertexai-instances");function IK(t,e){let n=Tt(N1,t,e);return n&&new Wl(n)}function wK(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wl(r)}}var EK={provide:jT,deps:[[new se,BT]]},CK={provide:Wl,useFactory:IK,deps:[[new se,BT],Qe]};function M1(t,...e){return Q("angularfire",Ke.full,"vertexai"),qe([CK,EK,{provide:BT,useFactory:wK(t),multi:!0,deps:[te,ve,dt,st,[new se,Cn],...e]}])}var x1=Se(R1,!0);var P1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var k1={providers:[oR({eventCoalescing:!0}),pN(gN),mN(()=>yN(P1.firebaseConfig)),uM(()=>dM()),xM(()=>NM()),MM,MI,OP(()=>LP()),RO(()=>NO()),LO(()=>VO()),JO(()=>XO()),t1(()=>n1()),p1(()=>g1()),C1(()=>T1()),M1(()=>x1())]};var Sn=class t{firestore=M(go);destroy$=new et;constructor(){}delete(e){return FP(tg(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return _(this,null,function*(){let e=yield $E(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=tg(this.collectionRef,e);return HE(r,n)}updateData(e,n){return HE(tg(this.collectionRef,e),n,{merge:!0})}getDataById(e){return _(this,null,function*(){let n=VP(this.collectionRef,UP("id","==",e)),r=yield $E(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};function ft(t){t||(Hh(ft),t=M(da));let e=new ae(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Kt(e))}function Pe(t,e){!e?.injector&&Hh(Pe);let n=e?.injector??M(ve),r=new Xc(1),i=Iu(()=>{let s;try{s=t()}catch(o){zn(()=>r.error(o));return}zn(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(da).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var An=class t extends Sn{collectionPath="/race-configs";collectionRef=Zn(this.firestore,this.collectionPath);activeRaceConfig=pe(void 0);constructor(){super(),this.getAll().pipe(ft()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}getAll(){return Yn(this.collectionRef).pipe(Kt(this.destroy$),W(e=>e.filter(n=>!n.deleted)))}updateFuelDurationMinute(e){let n=this.activeRaceConfig();return n?(n.fuelDurationMinute=e,this.updateData(n.id,n)):Promise.resolve()}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var TK=Math.pow(10,8)*24*60*60*1e3,Jle=-TK;var O1=864e5,Tg=6e4,bg=36e5;var bK=3600;var F1=bK*24,Xle=F1*7,DK=F1*365.2425,SK=DK/12,ede=SK*3,$T=Symbol.for("constructDateFrom");function Vn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&$T in t?t[$T](e):t instanceof Date?new t.constructor(e):new Date(e)}function ze(t,e){return Vn(e||t,t)}function L1(t,e,n){let r=ze(t,n?.in);return isNaN(e)?Vn(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function V1(t,e,n){let r=ze(t,n?.in);if(isNaN(e))return Vn(n?.in||t,NaN);if(!e)return r;let i=r.getDate(),s=Vn(n?.in||t,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function hc(t,e,n){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=ze(t,n?.in),f=i||r?V1(d,i+r*12):d,g=o||s?L1(f,o+s*7):f,y=c+a*60,R=(l+y*60)*1e3;return Vn(n?.in||t,+g+R)}function U1(t,e,n){return Vn(n?.in||t,+ze(t)+e)}function as(t,e,n){return U1(t,e*bg,n)}function HT(t){let e=ze(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function rn(t,...e){let n=Vn.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function qT(t,e){let n=ze(t,e?.in);return n.setHours(0,0,0,0),n}function j1(t,e,n){let[r,i]=rn(n?.in,t,e),s=qT(r),o=qT(i),a=+s-HT(s),c=+o-HT(o);return Math.round((a-c)/O1)}function B1(t,e,n){let r=ze(t,n?.in);return r.setTime(r.getTime()+e*Tg),r}function To(t,e){let n=+ze(t)-+ze(e);return n<0?-1:n>0?1:n}function $1(t,e,n){let[r,i]=rn(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function H1(t,e,n){let[r,i]=rn(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function G1(t,e,n){let[r,i]=rn(n?.in,t,e),s=q1(r,i),o=Math.abs(j1(r,i));r.setDate(r.getDate()-s*o);let a=+(q1(r,i)===-s),c=s*(o-a);return c===0?0:c}function q1(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function fc(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function z1(t,e,n){let[r,i]=rn(n?.in,t,e),s=(+r-+i)/bg;return fc(n?.roundingMethod)(s)}function Ei(t,e){return+ze(t)-+ze(e)}function Dg(t,e,n){let r=Ei(t,e)/Tg;return fc(n?.roundingMethod)(r)}function W1(t,e){let n=ze(t,e?.in);return n.setHours(23,59,59,999),n}function K1(t,e){let n=ze(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Q1(t,e){let n=ze(t,e?.in);return+W1(n,e)==+K1(n,e)}function Y1(t,e,n){let[r,i,s]=rn(n?.in,t,t,e),o=To(i,s),a=Math.abs($1(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=To(i,s)===-o;Q1(r)&&a===1&&To(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function Z1(t,e,n){let r=Ei(t,e)/1e3;return fc(n?.roundingMethod)(r)}function J1(t,e,n){let[r,i]=rn(n?.in,t,e),s=To(r,i),o=Math.abs(H1(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=To(r,i)===-s,c=s*(o-+a);return c===0?0:c}function X1(t,e){let[n,r]=rn(t,e.start,e.end);return{start:n,end:r}}function GT(t,e){let{start:n,end:r}=X1(e?.in,t),i={},s=J1(r,n);s&&(i.years=s);let o=hc(n,{years:i.years}),a=Y1(r,o);a&&(i.months=a);let c=hc(o,{months:i.months}),l=G1(r,c);l&&(i.days=l);let d=hc(c,{days:i.days}),f=z1(r,d);f&&(i.hours=f);let g=hc(d,{hours:i.hours}),y=Dg(r,g);y&&(i.minutes=y);let I=hc(g,{minutes:i.minutes}),R=Z1(r,I);return R&&(i.seconds=R),i}var sn=class t extends Sn{collectionPath="/races";collectionRef=Zn(this.firestore,this.collectionPath);raceConfigService=M(An);activeRace=pe(void 0);endRaceDate=pe(void 0);constructor(){super(),tt({races:this.getAll(),raceConfig:Pe(this.raceConfigService.activeRaceConfig)}).pipe(ft(),W(({races:e,raceConfig:n})=>{if(e&&n){let r=this.getActiveRace(e,n),i=r?as(r.start.toDate(),n.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return _(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getAll(){return Yn(this.collectionRef).pipe(Kt(this.destroy$),W(e=>e.filter(n=>!n.deleted)))}getActiveRace(e,n){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(as(s.start.toDate(),n.durationHour)>=r)return s}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};function eF(t,e){if(!t||!e)return"--:--:--";let n=GT({end:e,start:t});return zT(n)}function bo(t){if(!t)return"--:--:--";let e=GT({end:t,start:new Date});return zT(e)}function Ql(t){if(!t||t<0)return"--:--:--";let e=Math.floor(t/1e3),n={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return zT(n)}function tF(t){if(!t||t<0)return"--:--:---";let e=Math.floor(t/1e3),n=t%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return AK(r,n)}function AK(t,e){return t.minutes&&t.minutes<0||t.seconds&&t.seconds<0?"00:00:000":[Kl(t.minutes),Kl(t.seconds),RK(e)].join(":")}function zT(t){return t.hours&&t.hours<0||t.minutes&&t.minutes<0||t.seconds&&t.seconds<0?"00:00:00":[Kl(t.hours),Kl(t.minutes),Kl(t.seconds)].join(":")}function Kl(t){return t?t<10?`0${t}`:`${t}`:"00"}function RK(t){return t<10?`00${t}`:t<100?`0${t}`:`${t}`}function NK(t,e){if(t&1){let n=nf();L(0,"button",2),Mt("click",function(){Os(n);let i=nt();return Fs(i.startRace())}),H(1," Start race "),F()}}function MK(t,e){if(t&1&&(L(0,"div",1),H(1),F()),t&2){let n=nt();J(),Be(" ",n.endRaceCountdown," ")}}var Sg=class t{raceService=M(sn);endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";constructor(){tt({endRaceDate:Pe(this.endRaceDate),ping:rr(1e3)}).pipe(ft()).subscribe(e=>{this.endRaceCountdown=bo(e.endRaceDate)})}startRace(){this.raceService.create({id:"1",start:xt.now(),deleted:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-race"]],standalone:!0,features:[Yt],decls:2,vars:1,consts:[[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&Ot(0,NK,2,0,"button",0)(1,MK,2,1,"div",1),n&2&&jt(r.endRaceDate()?1:0)}})};var cs=class t extends Sn{collectionPath="/pits";collectionRef=Zn(this.firestore,this.collectionPath);raceService=M(sn);activePit=pe(void 0);lastRefuelPit=pe(void 0);pits=pe([]);completedDriverChanges=pe(0);lastDriverChangePit=pe(void 0);constructor(){super(),this.getRacePits().pipe(ft()).subscribe(e=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e))})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getRacePits(){return tt({pits:Yn(this.collectionRef),activeRace:Pe(this.raceService.activeRace)}).pipe(Kt(this.destroy$),W(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}getActivePit(e){let n=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of n)if(!r.exitTime)return r}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime!==void 0).sort((r,i)=>{let s=r.exitTime?r.exitTime.toDate().getTime():0;return(i.exitTime?i.exitTime.toDate().getTime():0)-s}).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let n=e.sort((r,i)=>i.entryTime.toMillis()-r.entryTime.toMillis());for(let r of n)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.reduce((n,r)=>n+(r.entryDriverId!==r.exitDriverId?1:0),0)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Ag=class t{raceService=M(sn);raceConfigService=M(An);pitService=M(cs);openingTime=pe(void 0);closingTime=pe(void 0);tyreChangeWindowOpen=pe(!1);remainingTyreChange=pe(0);constructor(){tt({pits:Pe(this.pitService.pits),activeRace:Pe(this.raceService.activeRace),raceConfig:Pe(this.raceConfigService.activeRaceConfig),ping:rr(1e3)}).pipe(ft()).subscribe(({pits:e,activeRace:n,raceConfig:r})=>{n&&r?(this.openingTime.set(as(n.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(as(n.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,n){if(e&&n){let r=new Date;return r>=e&&r<=n}return!1}calculateRemainingTyreChange(e,n){let r=e.filter(i=>i.tyreChange).length;return n-r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var xK=t=>({"mb-2":t}),PK=t=>({"animate-bounce":t});function kK(t,e){if(t&1&&(L(0,"div",4),H(1),F()),t&2){let n=nt();J(),Be(" Remaining: ",n.remainingTyreChange()," ")}}function OK(t,e){t&1&&(L(0,"div",5),H(1," Completed! "),F())}function FK(t,e){if(t&1&&(L(0,"div",6),H(1," Window open "),F()),t&2){let n=nt();yt("ngClass",ur(1,PK,n.remainingTyreChange()>0))}}function LK(t,e){t&1&&(L(0,"div",7),H(1," Window close "),F())}function VK(t,e){if(t&1&&(H(0),ha(1,"date")),t&2){let n=nt(2);Be(" ",fa(1,1,n.openingTime(),"HH:mm:ss")," ")}}function UK(t,e){t&1&&H(0," --:--:-- ")}function jK(t,e){if(t&1&&(H(0),ha(1,"date")),t&2){let n=nt(2);Be(" ",fa(1,1,n.closingTime(),"HH:mm:ss")," ")}}function BK(t,e){t&1&&H(0," --:--:-- ")}function $K(t,e){if(t&1&&(L(0,"div",8)(1,"div")(2,"div",9),H(3,"Opening time"),F(),L(4,"div",10),Ot(5,VK,2,4)(6,UK,1,0),F()(),L(7,"div")(8,"div",11),H(9,"Opening in"),F(),L(10,"div",12),H(11),F()()(),Je(12,"hr",13),L(13,"div",8)(14,"div")(15,"div",9),H(16,"Closing time"),F(),L(17,"div",10),Ot(18,jK,2,4)(19,BK,1,0),F()(),L(20,"div")(21,"div",11),H(22,"Closing in"),F(),L(23,"div",12),H(24),F()()(),Je(25,"hr",13),L(26,"div",14)(27,"div")(28,"div",9),H(29,"Remaining tyre change"),F(),L(30,"div",10),H(31),F()()()),t&2){let n=nt();J(5),jt(n.openingTime()?5:6),J(6),Be(" ",n.countdownOpeningTime()," "),J(7),jt(n.closingTime()?18:19),J(6),Be(" ",n.countdownClosingTime()," "),J(7),Be(" ",n.remainingTyreChange()," ")}}var Rg=class t{tyreService=M(Ag);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=rt(()=>bo(this.tyreService.openingTime()));countdownClosingTime=rt(()=>bo(this.tyreService.closingTime()));isOpen=!0;constructor(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-tyre-change-window"]],standalone:!0,features:[Yt],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(L(0,"div",0)(1,"div",1),Mt("click",function(){return r.isOpen=!r.isOpen}),L(2,"div",2),H(3,"\u{1F6DE} Tyre change"),F(),L(4,"div",3),Ot(5,kK,2,1,"div",4)(6,OK,2,0,"div",5)(7,FK,2,3,"div",6)(8,LK,2,0,"div",7),F()(),Ot(9,$K,32,5),F()),n&2&&(J(),yt("ngClass",ur(4,xK,r.isOpen)),J(4),jt(r.remainingTyreChange()>0?5:6),J(2),jt(r.tyreChangeWindowOpen()?7:8),J(2),jt(r.isOpen?9:-1))},dependencies:[vf,Mr]})};var Ng=class t{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[ri,Yt],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(n,r){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),H(4),F()()(),Je(5,"div",4),F()),n&2&&(J(),yt("ngClass",r.batteryBorderColor),J(),ef("width",r.charge,"%"),yt("ngClass",r.batteryColor),J(2),js(r.charge),J(),yt("ngClass",r.batteryBorderColor))},dependencies:[Mr],changeDetection:0})};var lF=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(Vs),Ne(Hi))}}static{this.\u0275dir=kt({type:t})}}return t})(),dF=(()=>{class t extends lF{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=$i(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,features:[cr]})}}return t})(),QT=new j("");var HK={provide:QT,useExisting:Xr(()=>Vg),multi:!0};function qK(){let t=oi()?oi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var GK=new j(""),Vg=(()=>{class t extends lF{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!qK())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(Vs),Ne(Hi),Ne(GK,8))}}static{this.\u0275dir=kt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Mt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Bs([HK]),cr]})}}return t})();function WT(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Ug=new j(""),hF=new j("");function zK(t){return e=>{if(WT(e.value)||WT(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function WK(t){return WT(t.value)?{required:!0}:null}function nF(t){return null}function fF(t){return t!=null}function pF(t){return $s(t)?Ze(t):t}function gF(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function mF(t,e){return e.map(n=>n(t))}function KK(t){return!t.validate}function yF(t){return t.map(e=>KK(e)?e:n=>e.validate(n))}function QK(t){if(!t)return null;let e=t.filter(fF);return e.length==0?null:function(n){return gF(mF(n,e))}}function YT(t){return t!=null?QK(yF(t)):null}function YK(t){if(!t)return null;let e=t.filter(fF);return e.length==0?null:function(n){let r=mF(n,e).map(pF);return Um(r).pipe(W(gF))}}function ZT(t){return t!=null?YK(yF(t)):null}function rF(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ZK(t){return t._rawValidators}function JK(t){return t._rawAsyncValidators}function KT(t){return t?Array.isArray(t)?t:[t]:[]}function xg(t,e){return Array.isArray(t)?t.includes(e):t===e}function iF(t,e){let n=KT(e);return KT(t).forEach(i=>{xg(n,i)||n.push(i)}),n}function sF(t,e){return KT(e).filter(n=>!xg(t,n))}var Pg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=YT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=ZT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},yc=class extends Pg{get formDirective(){return null}get path(){return null}},td=class extends Pg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},kg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},XK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Qfe=ye(V({},XK),{"[class.ng-submitted]":"isSubmitted"}),_F=(()=>{class t extends kg{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(td,2))}}static{this.\u0275dir=kt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&tf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[cr]})}}return t})(),vF=(()=>{class t extends kg{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Ne(yc,10))}}static{this.\u0275dir=kt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&tf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[cr]})}}return t})();var Yl="VALID",Mg="INVALID",gc="PENDING",Zl="DISABLED",_c=class{},Og=class extends _c{constructor(e,n){super(),this.value=e,this.source=n}},Xl=class extends _c{constructor(e,n){super(),this.pristine=e,this.source=n}},ed=class extends _c{constructor(e,n){super(),this.touched=e,this.source=n}},mc=class extends _c{constructor(e,n){super(),this.status=e,this.source=n}};function IF(t){return(jg(t)?t.validators:t)||null}function e7(t){return Array.isArray(t)?YT(t):t||null}function wF(t,e){return(jg(e)?e.asyncValidators:t)||null}function t7(t){return Array.isArray(t)?ZT(t):t||null}function jg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function n7(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new K(1e3,"");if(!r[n])throw new K(1001,"")}function r7(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new K(1002,"")})}var Fg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=rt(()=>this.statusReactive()),this.statusReactive=pe(void 0),this._pristine=rt(()=>this.pristineReactive()),this.pristineReactive=pe(!0),this._touched=rt(()=>this.touchedReactive()),this.touchedReactive=pe(!1),this._events=new et,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return zn(this.statusReactive)}set status(e){zn(()=>this.statusReactive.set(e))}get valid(){return this.status===Yl}get invalid(){return this.status===Mg}get pending(){return this.status==gc}get disabled(){return this.status===Zl}get enabled(){return this.status!==Zl}get pristine(){return zn(this.pristineReactive)}set pristine(e){zn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return zn(this.touchedReactive)}set touched(e){zn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(sF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(sF(e,this._rawAsyncValidators))}hasValidator(e){return xg(this._rawValidators,e)}hasAsyncValidator(e){return xg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ed(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new ed(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(V({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Xl(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Xl(!0,r))}markAsPending(e={}){this.status=gc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new mc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(V({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Zl,this.errors=null,this._forEachChild(i=>{i.disable(ye(V({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Og(this.value,r)),this._events.next(new mc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Yl,this._forEachChild(r=>{r.enable(ye(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(V({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yl||this.status===gc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Og(this.value,n)),this._events.next(new mc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(V({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zl:Yl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=gc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=pF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new mc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Et,this.statusChanges=new Et}_calculateStatus(){return this._allControlsDisabled()?Zl:this.errors?Mg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(gc)?gc:this._anyControlsHaveStatus(Mg)?Mg:Yl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Xl(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new ed(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=e7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=t7(this._rawAsyncValidators)}},Lg=class extends Fg{constructor(e,n,r){super(IF(n),wF(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){r7(this,!0,e),Object.keys(e).forEach(r=>{n7(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var JT=new j("CallSetDisabledState",{providedIn:"root",factory:()=>XT}),XT="always";function i7(t,e){return[...e.path,t]}function EF(t,e,n=XT){CF(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),o7(t,e),c7(t,e),a7(t,e),s7(t,e)}function oF(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function s7(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function CF(t,e){let n=ZK(t);e.validator!==null?t.setValidators(rF(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=JK(t);e.asyncValidator!==null?t.setAsyncValidators(rF(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();oF(e._rawValidators,i),oF(e._rawAsyncValidators,i)}function o7(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&TF(t,e)})}function a7(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&TF(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function TF(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function c7(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function u7(t,e){t==null,CF(t,e)}function l7(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function d7(t){return Object.getPrototypeOf(t.constructor)===dF}function h7(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function f7(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Vg?n=s:d7(s)?r=s:i=s}),i||r||n||null}var p7={provide:yc,useExisting:Xr(()=>eb)},Jl=Promise.resolve(),eb=(()=>{class t extends yc{get submitted(){return zn(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=rt(()=>this.submittedReactive()),this.submittedReactive=pe(!1),this._directives=new Set,this.ngSubmit=new Et,this.form=new Lg({},YT(n),ZT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Jl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),EF(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Jl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Jl.then(()=>{let r=this._findContainer(n.path),i=new Lg({});u7(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Jl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Jl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),h7(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(Ne(Ug,10),Ne(hF,10),Ne(JT,8))}}static{this.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Mt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bs([p7]),cr]})}}return t})();function aF(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function cF(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var g7=class extends Fg{constructor(e=null,n,r){super(IF(n),wF(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(cF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){aF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){aF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){cF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var m7={provide:td,useExisting:Xr(()=>tb)},uF=Promise.resolve(),tb=(()=>{class t extends td{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new g7,this._registered=!1,this.name="",this.update=new Et,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=f7(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),l7(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){EF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){uF.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&vu(r);uF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?i7(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(Ne(yc,9),Ne(Ug,10),Ne(hF,10),Ne(QT,10),Ne(zi,8),Ne(JT,8))}}static{this.\u0275dir=kt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bs([m7]),cr,ri]})}}return t})(),bF=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=kt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),y7={provide:QT,useExisting:Xr(()=>nb),multi:!0},nb=(()=>{class t extends dF{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=$i(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Mt("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Bs([y7]),cr]})}}return t})();function _7(t){return typeof t=="number"?t:parseFloat(t)}var DF=(()=>{class t{constructor(){this._validator=nF}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):nF,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=kt({type:t,features:[ri]})}}return t})();var v7={provide:Ug,useExisting:Xr(()=>rb),multi:!0},rb=(()=>{class t extends DF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>_7(n),this.createValidator=n=>zK(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=$i(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&_u("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Bs([v7]),cr]})}}return t})(),I7={provide:Ug,useExisting:Xr(()=>ib),multi:!0};var ib=(()=>{class t extends DF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=vu,this.createValidator=n=>WK}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=$i(t)))(i||t)}})()}static{this.\u0275dir=kt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&_u("required",i._enabled?"":null)},inputs:{required:"required"},features:[Bs([I7]),cr]})}}return t})();var w7=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=ks({type:t})}static{this.\u0275inj=Ps({})}}return t})();var SF=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:JT,useValue:n.callSetDisabledState??XT}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=ks({type:t})}static{this.\u0275inj=Ps({imports:[w7]})}}return t})();var us=class t extends Sn{collectionPath="/laps";collectionRef=Zn(this.firestore,this.collectionPath);raceService=M(sn);laps=pe([]);referenceLapTimeMillisecond=pe(64567);constructor(){super(),tt({laps:this.getRaceLaps(),activeRace:Pe(this.raceService.activeRace)}).pipe(ft()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return tt({laps:Yn(this.collectionRef),activeRace:Pe(this.raceService.activeRace)}).pipe(ft(),W(({laps:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Bg=class t{raceService=M(sn);pitService=M(cs);raceConfigService=M(An);lapService=M(us);lastRefuelTime=pe(void 0);emptyFuelTime=pe(void 0);remainingFuelPercentage=pe(100);remainingFuelLap=pe(100);constructor(){tt({lastRefuelPit:Pe(this.pitService.lastRefuelPit),activeRace:Pe(this.raceService.activeRace),raceConfig:Pe(this.raceConfigService.activeRaceConfig),referenceLapTimeMillisecond:Pe(this.lapService.referenceLapTimeMillisecond),ping:rr(1e3)}).pipe(ft()).subscribe(({lastRefuelPit:e,activeRace:n,raceConfig:r,referenceLapTimeMillisecond:i,ping:s})=>{if(n&&r){let o=e&&e.exitTime?e.exitTime.toDate():n.start.toDate();this.lastRefuelTime.set(o),this.emptyFuelTime.set(B1(o,r.fuelDurationMinute)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r.fuelDurationMinute)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),i))}else this.lastRefuelTime.set(void 0),this.emptyFuelTime.set(void 0),this.remainingFuelPercentage.set(100),this.remainingFuelLap.set(0)})}calculateRemainingFuelPercentage(e,n){if(!e)return 100;let i=Dg(e,new Date)/n*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}calculateRemainingFuelLaps(e,n){if(!e||!n)return 0;let r=Ei(e,new Date);return Math.floor(r/n)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var C7=t=>({"mb-2":t}),T7=t=>({"animate-bounce":t});function b7(t,e){if(t&1&&(H(0),ha(1,"date")),t&2){let n=nt(2);Be(" ",fa(1,1,n.lastRefuelTime(),"HH:mm:ss")," ")}}function D7(t,e){t&1&&H(0," --:--:-- ")}function S7(t,e){if(t&1&&(H(0),ha(1,"date")),t&2){let n=nt(2);Be(" ",fa(1,1,n.emptyFuelTime(),"HH:mm:ss")," ")}}function A7(t,e){t&1&&H(0," --:--:-- ")}function R7(t,e){if(t&1){let n=nf();L(0,"div",7)(1,"div")(2,"div",8),H(3,"Last refuel time"),F(),L(4,"div",9),Ot(5,b7,2,4)(6,D7,1,0),F()(),L(7,"div")(8,"div",10),H(9,"Since last refuel"),F(),L(10,"div",11),H(11),F()()(),Je(12,"hr",12),L(13,"div",7)(14,"div")(15,"div",8),H(16,"Empty time"),F(),L(17,"div",9),Ot(18,S7,2,4)(19,A7,1,0),F()(),L(20,"div")(21,"div",10),H(22,"Empty in"),F(),L(23,"div",11),H(24),F()()(),Je(25,"hr",12),L(26,"div",13)(27,"div")(28,"div",8),H(29,"Remaining laps"),F(),L(30,"div",9),H(31),F()(),L(32,"div")(33,"div",10),H(34,"Fuel Duration (min):"),F(),L(35,"div",14)(36,"button",15),Mt("click",function(){Os(n);let i=nt();return Fs(i.increaseFuelDuration())}),H(37,"+"),F(),L(38,"form",16),Mt("ngSubmit",function(){Os(n);let i=nt();return Fs(i.onSubmit())}),L(39,"input",17),x_("ngModelChange",function(i){Os(n);let s=nt();return YA(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),Fs(i)}),F()(),L(40,"button",18),Mt("click",function(){Os(n);let i=nt();return Fs(i.decreaseFuelDuration())}),H(41,"-"),F()()()()}if(t&2){let n=nt();J(5),jt(n.lastRefuelTime()?5:6),J(6),Be(" ",n.sinceLastRefuel()," "),J(7),jt(n.emptyFuelTime()?18:19),J(6),Be(" ",n.emptyFuelCountdown()," "),J(7),Be(" ",n.remainingFuelLap()," "),J(8),M_("ngModel",n.fuelDurationMinute)}}var $g=class t{raceConfigService=M(An);fuelService=M(Bg);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=rt(()=>bo(this.emptyFuelTime()));sinceLastRefuel=rt(()=>eF(this.lastRefuelTime(),new Date));warning=rt(()=>this.remainingFuelPercentage()<=20);remainingColor=rt(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){Iu(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-fuel"]],standalone:!0,features:[Yt],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(n,r){n&1&&(L(0,"div",0)(1,"div",1),Mt("click",function(){return r.isOpen=!r.isOpen}),L(2,"div",2),H(3,"\u26FD\uFE0F Fuel"),F(),L(4,"div",3)(5,"div",4),H(6),F(),L(7,"div",5),H(8),F(),Je(9,"app-battery",6),F()(),Ot(10,R7,42,6),F()),n&2&&(J(),yt("ngClass",ur(8,C7,r.isOpen)),J(3),yt("ngClass",ur(10,T7,r.warning())),J(),yt("ngClass",r.remainingColor()),J(),Be(" Laps: ",r.remainingFuelLap()," "),J(),yt("ngClass",r.remainingColor()),J(),Be(" Empty: ",r.emptyFuelCountdown()," "),J(),yt("charge",r.remainingFuelPercentage()),J(),jt(r.isOpen?10:-1))},dependencies:[Mr,vf,Ng,SF,bF,Vg,nb,_F,vF,ib,rb,tb,eb]})};var Hg=class t{raceService=M(sn);pitService=M(cs);lapService=M(us);raceConfigService=M(An);activeRaceLogic=pe(void 0);constructor(){tt({activeRace:Pe(this.raceService.activeRace),activeRaceConfig:Pe(this.raceConfigService.activeRaceConfig),completedDriverChanges:Pe(this.pitService.completedDriverChanges),lastDriverChangePit:Pe(this.pitService.lastDriverChangePit),referenceLapTimeMilliseconds:Pe(this.lapService.referenceLapTimeMillisecond),ping:rr(1e3)}).pipe(ft()).subscribe(({activeRace:e,activeRaceConfig:n,completedDriverChanges:r,lastDriverChangePit:i,referenceLapTimeMilliseconds:s})=>{e&&n?this.activeRaceLogic.set(this.calculateRaceLogic(e,n,r,i,s)):this.activeRaceLogic.set(void 0)})}calculateRaceLogic(e,n,r,i,s){let o=new Date,a=as(e.start.toDate(),n.durationHour);if(o>=a)return{avgStintMillisecondsTime:void 0,laps:0,avgStintMillisecondsIfDriverChangedNow:void 0,lapsIfDriverChangeNow:0};let c=Ei(a,o),l=Math.max(0,n.minDriverChange-r),d=i?i.entryTime.toDate():e.start.toDate(),g=Ei(a,d)/(l+1),y=c/l;return{avgStintMillisecondsTime:g||void 0,laps:Math.floor(g/s),avgStintMillisecondsIfDriverChangedNow:y||void 0,lapsIfDriverChangeNow:Math.floor(y/s)}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var N7=t=>({"mb-2":t});function M7(t,e){if(t&1&&(L(0,"div",3)(1,"div")(2,"div",4),H(3,"AVG stint time"),F(),L(4,"div",5),H(5),F()(),L(6,"div")(7,"div",6),H(8,"Laps"),F(),L(9,"div",7),H(10),F()()(),Je(11,"hr",8),L(12,"div",9)(13,"div")(14,"div",4),H(15,"AVG stint time if driver change now"),F(),L(16,"div",5),H(17),F()(),L(18,"div")(19,"div",6),H(20,"Laps"),F(),L(21,"div",7),H(22),F()()()),t&2){let n=nt();J(5),Be(" ",n.AVGStintTime()," "),J(5),Be(" ",n.laps()," "),J(7),Be(" ",n.AVGStintTimeIfDriverChangeNow()," "),J(5),Be(" ",n.lapsIfDriverChangeNow()," ")}}var qg=class t{raceLogicService=M(Hg);activeRaceLogic=this.raceLogicService.activeRaceLogic;AVGStintTime=rt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?Ql(e.avgStintMillisecondsTime):"--:--:--"});laps=rt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=rt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?Ql(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=rt(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-race-logic"]],standalone:!0,features:[Yt],decls:5,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(L(0,"div",0)(1,"div",1),Mt("click",function(){return r.isOpen=!r.isOpen}),L(2,"div",2),H(3,"\u{1F9E0} Race logic"),F()(),Ot(4,M7,23,4),F()),n&2&&(J(),yt("ngClass",ur(2,N7,r.isOpen)),J(3),jt(r.isOpen?4:-1))},dependencies:[Mr]})};var vc=class t extends Sn{raceService=M(sn);collectionPath="/stints";collectionRef=Zn(this.firestore,this.collectionPath);activeRace=this.raceService.activeRace;stints=pe([]);activeStint=pe(void 0);constructor(){super(),this.getRaceStints().pipe(ft()).subscribe(e=>{this.stints.set(e);let n=this.getActiveStint(e);this.activeStint.set(n)})}getRaceStints(){return tt({stints:Yn(this.collectionRef),activeRace:Pe(this.activeRace)}).pipe(Kt(this.destroy$),W(({stints:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getActiveStint(e){let n=e.sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime());for(let r of n)if(!r.endDate)return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var Gg=class t extends Sn{collectionPath="/drivers";collectionRef=Zn(this.firestore,this.collectionPath);lapService=M(us);stintService=M(vc);raceConfigService=M(An);drivers=pe([]);driversReferenceLapTimeMap=pe(new Map);driversTimeOnTrackMap=pe(new Map);driversTimeOnTrackWarningMap=pe(new Map);driversTimeOnTrackWarningCount=rt(()=>{let e=this.driversTimeOnTrackWarningMap(),n=0;return e.forEach(r=>{r&&n++}),n});constructor(){super(),tt({drivers:this.getAll(),laps:Pe(this.lapService.laps),stints:Pe(this.stintService.stints),activeRaceConfig:Pe(this.raceConfigService.activeRaceConfig),ping:rr(1e3)}).pipe(ft()).subscribe(({drivers:e,laps:n,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(n,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i))})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getAll(){return Yn(this.collectionRef).pipe(Kt(this.destroy$),W(e=>e.filter(n=>!n.deleted)))}createDriverReferenceLapTimeMap(e,n){let r=new Map;n.forEach(s=>{r.set(s.id,0)});let i=e.reduce((s,o)=>(s[o.driverId]||(s[o.driverId]=[]),s[o.driverId].push(o.millisecondsTime),s),{});for(let s in i){let o=i[s],a=o.reduce((c,l)=>c+l,0)/o.length;r.set(s,a)}return r}createDriverTrackTimeMap(e,n){let r=new Map;return n.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let s;i.endDate?s=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():s=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+s):r.set(i.driverId,s)}),r}createDriversTimeOnTrackWarningMap(e,n){let r=new Map;if(n){let i=n.minDriverOnTrackHour*60*60*1e3,s=n.maxDriverOnTrackHour*60*60*1e3,o=20*60*1e3;e.forEach((a,c)=>{let l=a<i,d=s-a<=o;r.set(c,l||d)})}return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var x7=t=>({"mb-2":t}),P7=(t,e)=>({"bg-green-100":t,"hover:bg-gray-100":e}),k7=t=>({"bg-yellow-500 text-white":t});function O7(t,e){if(t&1&&(L(0,"div",4),H(1),F()),t&2){let n=nt();J(),Be(" Time on track warning: ",n.driversTimeOnTrackWarningCount()," ")}}function F7(t,e){t&1&&(L(0,"div",5),H(1," Time on track warning: Completed! "),F())}function L7(t,e){if(t&1&&(L(0,"tr",9)(1,"td",10),H(2),F(),L(3,"td",10),H(4),F(),L(5,"td",10),H(6),F(),L(7,"td",10)(8,"div",11),H(9),F()()()),t&2){let n=e.$implicit,r=nt(2);yt("ngClass",JA(6,P7,n.id===r.activeStintDriverId(),n.id!==r.activeStintDriverId())),J(2),js(n.id),J(2),js(n.raceName),J(2),js(r.getDriverReferenceLapTime(n.id)),J(2),yt("ngClass",ur(9,k7,r.getDriverTimeOnTrackWarning(n.id))),J(),Be(" ",r.getDriverTimeOnTrack(n.id)," ")}}function V7(t,e){if(t&1&&(L(0,"table",6)(1,"thead")(2,"tr"),Je(3,"th",7),L(4,"th",7),H(5,"Name"),F(),L(6,"th",7),H(7,"Reference lap time"),F(),L(8,"th",7),H(9,"Time on track"),F()()(),L(10,"tbody"),Ot(11,L7,10,11,"tr",8),F()()),t&2){let n=nt();J(11),yt("ngForOf",n.drivers())}}var zg=class t{driverService=M(Gg);stintService=M(vc);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=rt(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverReferenceLapTime(e){return tF(this.driverService.driversReferenceLapTimeMap().get(e))}getDriverTimeOnTrack(e){return Ql(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-driver"]],standalone:!0,features:[Yt],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"min-w-full","bg-white"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-md","font-medium","text-gray-700"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-md","text-black"],[1,"p-1","w-20","rounded",3,"ngClass"]],template:function(n,r){n&1&&(L(0,"div",0)(1,"div",1),Mt("click",function(){return r.isOpen=!r.isOpen}),L(2,"div",2),H(3,"\u{1F417} Drivers"),F(),L(4,"div",3),Ot(5,O7,2,1,"div",4)(6,F7,2,0,"div",5),F()(),Ot(7,V7,12,1,"table",6),F()),n&2&&(J(),yt("ngClass",ur(3,x7,r.isOpen)),J(4),jt(r.driversTimeOnTrackWarningCount()>0?5:6),J(2),jt(r.isOpen?7:-1))},dependencies:[Mr,CR]})};var Wg=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Qt({type:t,selectors:[["app-root"]],standalone:!0,features:[Yt],decls:24,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"mb-2"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(n,r){n&1&&(L(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),H(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),F()(),L(5,"div",4),Je(6,"app-race"),F()(),L(7,"div",5)(8,"div",6)(9,"div",7),Je(10,"app-tyre-change-window",8),F(),L(11,"div",9),Je(12,"app-driver"),F()(),L(13,"div",10)(14,"div",9),Je(15,"app-fuel"),F()(),L(16,"div",10)(17,"div",7),Je(18,"app-race-logic"),F()()(),L(19,"div",11)(20,"div",3),H(21,"Cremona kart circuit"),F(),Je(22,"img",12),F()(),Je(23,"router-outlet"))},dependencies:[Rv,Sg,Rg,$g,qg,zg]})};MR(Wg,k1).catch(t=>console.error(t));
