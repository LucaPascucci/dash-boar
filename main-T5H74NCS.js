import{$ as Sn,A as bn,B as kr,C as zd,D as zt,E as Gb,F as zb,G as Fr,H as Bs,I as fl,J as pl,K as ml,L as $s,M as Wb,N as Kb,O as Qb,P as Yb,Q as gl,R as vl,S as Ne,T as St,U as an,V as Lr,W as sv,X as Wd,Y as Dt,Z as Mt,_ as ui,a as B,aa as Zb,b as be,ba as Pt,c as Qi,ca as Kd,d as _,da as X,e as $,ea as Jb,f as Jo,g as Lb,h as Vb,i as Ub,j as jb,k as Bb,l as Yi,m as rv,n as iv,o as Xo,p as on,q as ul,r as $b,s as dl,t as Gd,u as Hb,v as Or,w as qb,x as li,y as js,z as hl}from"./chunk-VUN4IAWB.js";function Xb(n,e){return Object.is(n,e)}var $t=null,_l=!1,Qd=1,Vr=Symbol("SIGNAL");function Me(n){let e=$t;return $t=n,e}function eS(){return $t}function FL(){return _l}var ea={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function lv(n){if(_l)throw new Error("");if($t===null)return;$t.consumerOnSignalRead(n);let e=$t.nextProducerIndex++;if(th($t),e<$t.producerNode.length&&$t.producerNode[e]!==n&&yl($t)){let t=$t.producerNode[e];eh(t,$t.producerIndexOfThis[e])}$t.producerNode[e]!==n&&($t.producerNode[e]=n,$t.producerIndexOfThis[e]=yl($t)?sS(n,$t,e):0),$t.producerLastReadVersion[e]=n.version}function LL(){Qd++}function tS(n){if(!(yl(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Qd)){if(!n.producerMustRecompute(n)&&!Jd(n)){n.dirty=!1,n.lastCleanEpoch=Qd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Qd}}function nS(n){if(n.liveConsumerNode===void 0)return;let e=_l;_l=!0;try{for(let t of n.liveConsumerNode)t.dirty||iS(t)}finally{_l=e}}function rS(){return $t?.consumerAllowSignalWrites!==!1}function iS(n){n.dirty=!0,nS(n),n.consumerMarkedDirty?.(n)}function wl(n){return n&&(n.nextProducerIndex=0),Me(n)}function Zd(n,e){if(Me(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(yl(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)eh(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Jd(n){th(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(tS(t),r!==t.version))return!0}return!1}function Xd(n){if(th(n),yl(n))for(let e=0;e<n.producerNode.length;e++)eh(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function sS(n,e,t){if(oS(n),n.liveConsumerNode.length===0&&aS(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=sS(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function eh(n,e){if(oS(n),n.liveConsumerNode.length===1&&aS(n))for(let r=0;r<n.producerNode.length;r++)eh(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];th(i),i.producerIndexOfThis[r]=e}}function yl(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function th(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function oS(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function aS(n){return n.producerNode!==void 0}function cS(n){let e=Object.create(VL);e.computation=n;let t=()=>{if(tS(e),lv(e),e.value===Yd)throw e.error;return e.value};return t[Vr]=e,t}var ov=Symbol("UNSET"),av=Symbol("COMPUTING"),Yd=Symbol("ERRORED"),VL=be(B({},ea),{value:ov,dirty:!0,error:null,equal:Xb,producerMustRecompute(n){return n.value===ov||n.value===av},producerRecomputeValue(n){if(n.value===av)throw new Error("Detected cycle in computations.");let e=n.value;n.value=av;let t=wl(n),r;try{r=n.computation()}catch(i){r=Yd,n.error=i}finally{Zd(n,t)}if(e!==ov&&e!==Yd&&r!==Yd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function UL(){throw new Error}var lS=UL;function uS(){lS()}function dS(n){lS=n}var jL=null;function hS(n){let e=Object.create(pS);e.value=n;let t=()=>(lv(e),e.value);return t[Vr]=e,t}function uv(n,e){rS()||uS(),n.equal(n.value,e)||(n.value=e,BL(n))}function fS(n,e){rS()||uS(),uv(n,e(n.value))}var pS=be(B({},ea),{equal:Xb,value:void 0});function BL(n){n.version++,LL(),nS(n),jL?.()}function mS(n,e,t){let r=Object.create($L);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Xd(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=cv)}let a=()=>{if(r.fn===null)return;if(FL())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Jd(r))return;r.hasRun=!0;let c=wl(r);try{r.cleanupFn(),r.cleanupFn=cv,r.fn(i)}finally{Zd(r,c)}};return r.ref={notify:()=>iS(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Vr]:r},r.ref}var cv=()=>{},$L=be(B({},ea),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:cv});function ge(n){return typeof n=="function"}function ta(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var nh=ta(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Hs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Et=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ge(r))try{r()}catch(s){e=s instanceof nh?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{gS(s)}catch(o){e=e??[],o instanceof nh?e=[...e,...o.errors]:e.push(o)}}if(e)throw new nh(e)}}add(e){var t;if(e&&e!==this)if(this.closed)gS(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Hs(t,e)}remove(e){let{_finalizers:t}=this;t&&Hs(t,e),e instanceof n&&e._removeParent(this)}};Et.EMPTY=(()=>{let n=new Et;return n.closed=!0,n})();var dv=Et.EMPTY;function rh(n){return n instanceof Et||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function gS(n){ge(n)?n():n.unsubscribe()}var mr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var na={setTimeout(n,e,...t){let{delegate:r}=na;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=na;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ih(n){na.setTimeout(()=>{let{onUnhandledError:e}=mr;if(e)e(n);else throw n})}function Il(){}var vS=hv("C",void 0,void 0);function _S(n){return hv("E",void 0,n)}function yS(n){return hv("N",n,void 0)}function hv(n,e,t){return{kind:n,value:e,error:t}}var qs=null;function ra(n){if(mr.useDeprecatedSynchronousErrorHandling){let e=!qs;if(e&&(qs={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=qs;if(qs=null,t)throw r}}else n()}function wS(n){mr.useDeprecatedSynchronousErrorHandling&&qs&&(qs.errorThrown=!0,qs.error=n)}var Gs=class extends Et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,rh(e)&&e.add(this)):this.destination=GL}static create(e,t,r){return new ia(e,t,r)}next(e){this.isStopped?pv(yS(e),this):this._next(e)}error(e){this.isStopped?pv(_S(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pv(vS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},HL=Function.prototype.bind;function fv(n,e){return HL.call(n,e)}var mv=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){sh(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){sh(r)}else sh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){sh(t)}}},ia=class extends Gs{constructor(e,t,r){super();let i;if(ge(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&mr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&fv(e.next,s),error:e.error&&fv(e.error,s),complete:e.complete&&fv(e.complete,s)}):i=e}this.destination=new mv(i)}};function sh(n){mr.useDeprecatedSynchronousErrorHandling?wS(n):ih(n)}function qL(n){throw n}function pv(n,e){let{onStoppedNotification:t}=mr;t&&na.setTimeout(()=>t(n,e))}var GL={closed:!0,next:Il,error:qL,complete:Il};var sa=typeof Symbol=="function"&&Symbol.observable||"@@observable";function _n(n){return n}function oh(...n){return gv(n)}function gv(n){return n.length===0?_n:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=WL(t)?t:new ia(t,r,i);return ra(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=IS(r),new r((i,s)=>{let o=new ia({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[sa](){return this}pipe(...t){return gv(t)(this)}toPromise(t){return t=IS(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function IS(n){var e;return(e=n??mr.Promise)!==null&&e!==void 0?e:Promise}function zL(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}function WL(n){return n&&n instanceof Gs||zL(n)&&rh(n)}function vv(n){return ge(n?.lift)}function we(n){return e=>{if(vv(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ve(n,e,t,r,i){return new El(n,e,t,r,i)}var El=class extends Gs{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function oa(){return we((n,e)=>{let t=null;n._refCount++;let r=ve(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var aa=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,vv(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Et;let t=this.getSubject();e.add(this.source.subscribe(ve(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Et.EMPTY)}return e}refCount(){return oa()(this)}};var ES=ta(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pt=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new ah(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new ES}next(t){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ra(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?dv:(this.currentObservers=null,s.push(t),new Et(()=>{this.currentObservers=null,Hs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new ah(e,t),n})(),ah=class extends pt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:dv}};var Xt=class extends pt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Cl={now(){return(Cl.delegate||Date).now()},delegate:void 0};var Tl=class extends pt{constructor(e=1/0,t=1/0,r=Cl){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var ch=class extends Et{constructor(e,t){super()}schedule(e,t=0){return this}};var bl={setInterval(n,e,...t){let{delegate:r}=bl;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=bl;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var ca=class extends ch{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return bl.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&bl.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Hs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var la=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};la.now=Cl.now;var ua=class extends la{constructor(e,t=la.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var da=new ua(ca),_v=da;var lh=class extends ca{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var uh=class extends ua{};var yv=new uh(lh);var jn=new pe(n=>n.complete());function dh(n){return n&&ge(n.schedule)}function CS(n){return n[n.length-1]}function hh(n){return ge(CS(n))?n.pop():void 0}function Zi(n){return dh(CS(n))?n.pop():void 0}function wv(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function bS(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(f){o(f)}}function c(d){try{u(r.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function TS(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function zs(n){return this instanceof zs?(this.v=n,this):new zs(n)}function SS(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(w){return Promise.resolve(w).then(v,f)}}function a(v,w){r[v]&&(i[v]=function(P){return new Promise(function(x,L){s.push([v,P,x,L])>1||c(v,P)})},w&&(i[v]=w(i[v])))}function c(v,w){try{u(r[v](w))}catch(P){m(s[0][3],P)}}function u(v){v.value instanceof zs?Promise.resolve(v.value.v).then(d,f):m(s[0][2],v)}function d(v){c("next",v)}function f(v){c("throw",v)}function m(v,w){v(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function DS(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof TS=="function"?TS(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var fh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ph(n){return ge(n?.then)}function mh(n){return ge(n[sa])}function gh(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function vh(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function KL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var _h=KL();function yh(n){return ge(n?.[_h])}function wh(n){return SS(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield zs(t.read());if(i)return yield zs(void 0);yield yield zs(r)}}finally{t.releaseLock()}})}function Ih(n){return ge(n?.getReader)}function Ct(n){if(n instanceof pe)return n;if(n!=null){if(mh(n))return QL(n);if(fh(n))return YL(n);if(ph(n))return ZL(n);if(gh(n))return AS(n);if(yh(n))return JL(n);if(Ih(n))return XL(n)}throw vh(n)}function QL(n){return new pe(e=>{let t=n[sa]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function YL(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function ZL(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ih)})}function JL(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function AS(n){return new pe(e=>{eV(n,e).catch(t=>e.error(t))})}function XL(n){return AS(wh(n))}function eV(n,e){var t,r,i,s;return bS(this,void 0,void 0,function*(){try{for(t=DS(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Dn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Ji(n,e=0){return we((t,r)=>{t.subscribe(ve(r,i=>Dn(r,n,()=>r.next(i),e),()=>Dn(r,n,()=>r.complete(),e),i=>Dn(r,n,()=>r.error(i),e)))})}function Xi(n,e=0){return we((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function RS(n,e){return Ct(n).pipe(Xi(e),Ji(e))}function xS(n,e){return Ct(n).pipe(Xi(e),Ji(e))}function NS(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function MS(n,e){return new pe(t=>{let r;return Dn(t,e,()=>{r=n[_h](),Dn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ge(r?.return)&&r.return()})}function Eh(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Dn(t,e,()=>{let r=n[Symbol.asyncIterator]();Dn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function PS(n,e){return Eh(wh(n),e)}function OS(n,e){if(n!=null){if(mh(n))return RS(n,e);if(fh(n))return NS(n,e);if(ph(n))return xS(n,e);if(gh(n))return Eh(n,e);if(yh(n))return MS(n,e);if(Ih(n))return PS(n,e)}throw vh(n)}function dt(n,e){return e?OS(n,e):Ct(n)}function ie(...n){let e=Zi(n);return dt(n,e)}function ha(n,e){let t=ge(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function Iv(n){return!!n&&(n instanceof pe||ge(n.lift)&&ge(n.subscribe))}var di=ta(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function kS(n){return n instanceof Date&&!isNaN(n)}function Y(n,e){return we((t,r)=>{let i=0;t.subscribe(ve(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:tV}=Array;function nV(n,e){return tV(e)?n(...e):n(e)}function Ch(n){return Y(e=>nV(n,e))}var{isArray:rV}=Array,{getPrototypeOf:iV,prototype:sV,keys:oV}=Object;function Th(n){if(n.length===1){let e=n[0];if(rV(e))return{args:e,keys:null};if(aV(e)){let t=oV(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function aV(n){return n&&typeof n=="object"&&iV(n)===sV}function bh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function We(...n){let e=Zi(n),t=hh(n),{args:r,keys:i}=Th(n);if(r.length===0)return dt([],e);let s=new pe(cV(r,e,i?o=>bh(i,o):_n));return t?s.pipe(Ch(t)):s}function cV(n,e,t=_n){return r=>{FS(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)FS(e,()=>{let u=dt(n[c],e),d=!1;u.subscribe(ve(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function FS(n,e,t){n?Dn(t,n,e):e()}function LS(n,e,t,r,i,s,o,a){let c=[],u=0,d=0,f=!1,m=()=>{f&&!c.length&&!u&&e.complete()},v=P=>u<r?w(P):c.push(P),w=P=>{s&&e.next(P),u++;let x=!1;Ct(t(P,d++)).subscribe(ve(e,L=>{i?.(L),s?v(L):e.next(L)},()=>{x=!0},void 0,()=>{if(x)try{for(u--;c.length&&u<r;){let L=c.shift();o?Dn(e,o,()=>w(L)):w(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(ve(e,v,()=>{f=!0,m()})),()=>{a?.()}}function At(n,e,t=1/0){return ge(e)?At((r,i)=>Y((s,o)=>e(r,s,i,o))(Ct(n(r,i))),t):(typeof e=="number"&&(t=e),we((r,i)=>LS(r,i,n,t)))}function Ev(n=1/0){return At(_n,n)}function VS(){return Ev(1)}function fa(...n){return VS()(dt(n,Zi(n)))}function Sh(n){return new pe(e=>{Ct(n()).subscribe(e)})}function Cv(...n){let e=hh(n),{args:t,keys:r}=Th(n),i=new pe(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let d=0;d<o;d++){let f=!1;Ct(t[d]).subscribe(ve(s,m=>{f||(f=!0,u--),a[d]=m},()=>c--,void 0,()=>{(!c||!f)&&(u||s.next(r?bh(r,a):a),s.complete())}))}});return e?i.pipe(Ch(e)):i}function Tv(n=0,e,t=_v){let r=-1;return e!=null&&(dh(e)?t=e:r=e),new pe(i=>{let s=kS(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Ht(n=0,e=da){return n<0&&(n=0),Tv(n,n,e)}function yn(n,e){return we((t,r)=>{let i=0;t.subscribe(ve(r,s=>n.call(e,s,i++)&&r.next(s)))})}function es(n){return we((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ve(t,void 0,void 0,o=>{s=Ct(n(o,es(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function US(n,e,t,r,i){return(s,o)=>{let a=t,c=e,u=0;s.subscribe(ve(o,d=>{let f=u++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ws(n,e){return ge(e)?At(n,e,1):At(n,1)}function ts(n){return we((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function hi(n){return n<=0?()=>jn:we((e,t)=>{let r=0;e.subscribe(ve(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function bv(n){return Y(()=>n)}function Dh(n,e=_n){return n=n??lV,we((t,r)=>{let i,s=!0;t.subscribe(ve(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function lV(n,e){return n===e}function Ah(n=uV){return we((e,t)=>{let r=!1;e.subscribe(ve(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function uV(){return new di}function Sl(n){return we((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Ur(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yn((i,s)=>n(i,s,r)):_n,hi(1),t?ts(e):Ah(()=>new di))}function Sv(n,e,t,r){return we((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(s)},u=w=>c(P=>P.error(w)),d=0,f=!1,m=new El(s,w=>{try{let P=n(w),x=a.get(P);if(!x){a.set(P,x=r?r():new pt);let L=v(P,x);if(s.next(L),t){let q=ve(x,()=>{x.complete(),q?.unsubscribe()},void 0,void 0,()=>a.delete(P));m.add(Ct(t(L)).subscribe(q))}}x.next(o?o(w):w)}catch(P){u(P)}},()=>c(w=>w.complete()),u,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(m);function v(w,P){let x=new pe(L=>{d++;let q=P.subscribe(L);return()=>{q.unsubscribe(),--d===0&&f&&m.unsubscribe()}});return x.key=w,x}})}function pa(n){return n<=0?()=>jn:we((e,t)=>{let r=[];e.subscribe(ve(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Dv(n,e){let t=arguments.length>=2;return r=>r.pipe(n?yn((i,s)=>n(i,s,r)):_n,pa(1),t?ts(e):Ah(()=>new di))}function Rh(){return we((n,e)=>{let t,r=!1;n.subscribe(ve(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function xh(n,e){return we(US(n,e,arguments.length>=2,!0))}function ma(...n){let e=Zi(n);return we((t,r)=>{(e?fa(n,t,e):fa(n,t)).subscribe(r)})}function An(n,e){return we((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ve(r,c=>{i?.unsubscribe();let u=0,d=s++;Ct(n(c,d)).subscribe(i=ve(r,f=>r.next(e?e(c,f,d,u++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Wt(n){return we((e,t)=>{Ct(n).subscribe(ve(t,()=>t.complete(),Il)),!t.closed&&e.subscribe(t)})}function qt(n,e,t){let r=ge(n)||e||t?{next:n,error:e,complete:t}:n;return r?we((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ve(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):_n}var dV="https://g.co/ng/security#xss",Z=class extends Error{constructor(e,t){super(P_(e,t)),this.code=e}};function P_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Vl(n){return{toString:n}.toString()}var Nh="__parameters__";function hV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function TD(n,e,t){return Vl(()=>{let r=hV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,d){let f=c.hasOwnProperty(Nh)?c[Nh]:Object.defineProperty(c,Nh,{value:[]})[Nh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Dl=globalThis;function Xe(n){for(let e in n)if(n[e]===Xe)return e;throw Error("Could not find renamed property on target object.")}function fV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function xn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(xn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function jS(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var pV=Xe({__forward_ref__:Xe});function tr(n){return n.__forward_ref__=tr,n.toString=function(){return xn(this())},n}function wn(n){return bD(n)?n():n}function bD(n){return typeof n=="function"&&n.hasOwnProperty(pV)&&n.__forward_ref__===tr}function j(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ls(n){return{providers:n.providers||[],imports:n.imports||[]}}function ff(n){return BS(n,DD)||BS(n,AD)}function SD(n){return ff(n)!==null}function BS(n,e){return n.hasOwnProperty(e)?n[e]:null}function mV(n){let e=n&&(n[DD]||n[AD]);return e||null}function $S(n){return n&&(n.hasOwnProperty(HS)||n.hasOwnProperty(gV))?n[HS]:null}var DD=Xe({\u0275prov:Xe}),HS=Xe({\u0275inj:Xe}),AD=Xe({ngInjectableDef:Xe}),gV=Xe({ngInjectorDef:Xe}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=j({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function RD(n){return n&&!!n.\u0275providers}var vV=Xe({\u0275cmp:Xe}),_V=Xe({\u0275dir:Xe}),yV=Xe({\u0275pipe:Xe}),wV=Xe({\u0275mod:Xe}),Bh=Xe({\u0275fac:Xe}),xl=Xe({__NG_ELEMENT_ID__:Xe}),qS=Xe({__NG_ENV_ID__:Xe});function O_(n){return typeof n=="string"?n:n==null?"":String(n)}function IV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():O_(n)}function EV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Z(-200,n)}function k_(n,e){throw new Z(-201,!1)}var Ie=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ie||{}),Bv;function xD(){return Bv}function Rn(n){let e=Bv;return Bv=n,e}function ND(n,e,t){let r=ff(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ie.Optional)return null;if(e!==void 0)return e;k_(n,"Injector")}var CV={},Nl=CV,$v="__NG_DI_FLAG__",$h="ngTempTokenPath",TV="ngTokenPath",bV=/\n/gm,SV="\u0275",GS="__source",ya;function DV(){return ya}function ns(n){let e=ya;return ya=n,e}function AV(n,e=Ie.Default){if(ya===void 0)throw new Z(-203,!1);return ya===null?ND(n,void 0,e):ya.get(n,e&Ie.Optional?null:void 0,e)}function ae(n,e=Ie.Default){return(xD()||AV)(wn(n),e)}function M(n,e=Ie.Default){return ae(n,pf(e))}function pf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hv(n){let e=[];for(let t=0;t<n.length;t++){let r=wn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let i,s=Ie.Default;for(let o=0;o<r.length;o++){let a=r[o],c=RV(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ae(i,s))}else e.push(ae(r))}return e}function MD(n,e){return n[$v]=e,n.prototype[$v]=e,n}function RV(n){return n[$v]}function xV(n,e,t,r){let i=n[$h];throw e[GS]&&i.unshift(e[GS]),n.message=NV(`
`+n.message,i,t,r),n[TV]=i,n[$h]=null,n}function NV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==SV?n.slice(2):n;let i=xn(e);if(Array.isArray(e))i=e.map(xn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):xn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(bV,`
  `)}`}var ue=MD(TD("Optional"),8);var PD=MD(TD("SkipSelf"),4);function Ys(n,e){let t=n.hasOwnProperty(Bh);return t?n[Bh]:null}function F_(n,e){n.forEach(t=>Array.isArray(t)?F_(t,e):e(t))}function OD(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function MV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function PV(n,e,t){let r=Ul(n,e);return r>=0?n[r|1]=t:(r=~r,MV(n,r,e,t)),r}function Av(n,e){let t=Ul(n,e);if(t>=0)return n[t|1]}function Ul(n,e){return OV(n,e,1)}function OV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var Ia={},Yn=[],Ea=new H(""),kD=new H("",-1),FD=new H(""),qh=class{get(e,t=Nl){if(t===Nl){let r=new Error(`NullInjectorError: No provider for ${xn(e)}!`);throw r.name="NullInjectorError",r}return t}},LD=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(LD||{}),$r=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}($r||{}),ss=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(ss||{});function kV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function qv(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];LV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function FV(n){return n===3||n===4||n===6}function LV(n){return n.charCodeAt(0)===64}function Ml(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?zS(n,t,i,null,e[++r]):zS(n,t,i,null,null))}}return n}function zS(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var VD="ng-template";function VV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&kV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(L_(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function L_(n){return n.type===4&&n.value!==VD}function UV(n,e,t){let r=n.type===4&&!t?VD:n.value;return e===r}function jV(n,e,t){let r=4,i=n.attrs,s=i!==null?HV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!gr(r)&&!gr(c))return!1;if(o&&gr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!UV(n,c,t)||c===""&&e.length===1){if(gr(r))return!1;o=!0}}else if(r&8){if(i===null||!VV(n,i,c,t)){if(gr(r))return!1;o=!0}}else{let u=e[++a],d=BV(c,i,L_(n),t);if(d===-1){if(gr(r))return!1;o=!0;continue}if(u!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&u!==f){if(gr(r))return!1;o=!0}}}}return gr(r)||o}function gr(n){return(n&1)===0}function BV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return qV(e,n)}function $V(n,e,t=!1){for(let r=0;r<e.length;r++)if(jV(n,e[r],t))return!0;return!1}function HV(n){for(let e=0;e<n.length;e++){let t=n[e];if(FV(t))return e}return n.length}function qV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function WS(n,e){return n?":not("+e.trim()+")":e}function GV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!gr(o)&&(e+=WS(s,i),i=""),r=o,s=s||!gr(r);t++}return i!==""&&(e+=WS(s,i)),e}function zV(n){return n.map(GV).join(",")}function WV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!gr(i))break;i=s}r++}return{attrs:e,classes:t}}function qe(n){return Vl(()=>{let e=qD(n),t=be(B({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===LD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||$r.Emulated,styles:n.styles||Yn,_:null,schemas:n.schemas||null,tView:null,id:""});GD(t);let r=n.dependencies;return t.directiveDefs=QS(r,!1),t.pipeDefs=QS(r,!0),t.id=YV(t),t})}function KV(n){return Zs(n)||jD(n)}function QV(n){return n!==null}function us(n){return Vl(()=>({type:n.type,bootstrap:n.bootstrap||Yn,declarations:n.declarations||Yn,imports:n.imports||Yn,exports:n.exports||Yn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function KS(n,e){if(n==null)return Ia;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=ss.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==ss.None?[r,a]:r,e[s]=o):t[s]=r}return t}function mt(n){return Vl(()=>{let e=qD(n);return GD(e),e})}function UD(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Zs(n){return n[vV]||null}function jD(n){return n[_V]||null}function BD(n){return n[yV]||null}function $D(n){let e=Zs(n)||jD(n)||BD(n);return e!==null?e.standalone:!1}function HD(n,e){let t=n[wV]||null;if(!t&&e===!0)throw new Error(`Type ${xn(n)} does not have '\u0275mod' property.`);return t}function qD(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||Ia,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Yn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:KS(n.inputs,e),outputs:KS(n.outputs),debugInfo:null}}function GD(n){n.features?.forEach(e=>e(n))}function QS(n,e){if(!n)return null;let t=e?BD:KV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(QV)}function YV(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function nt(n){return{\u0275providers:n}}function ZV(...n){return{\u0275providers:zD(!0,n),\u0275fromNgModule:!0}}function zD(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return F_(e,o=>{let a=o;Gv(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&WD(i,s),t}function WD(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];V_(i,s=>{e(s,r)})}}function Gv(n,e,t,r){if(n=wn(n),!n)return!1;let i=null,s=$S(n),o=!s&&Zs(n);if(!s&&!o){let c=n.ngModule;if(s=$S(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Gv(u,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{F_(s.imports,d=>{Gv(d,e,t,r)&&(u||=[],u.push(d))})}finally{}u!==void 0&&WD(u,e)}if(!a){let u=Ys(i)||(()=>new i);e({provide:i,useFactory:u,deps:Yn},i),e({provide:FD,useValue:i,multi:!0},i),e({provide:Ea,useValue:()=>ae(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=n;V_(c,d=>{e(d,u)})}}else return!1;return i!==n&&n.providers!==void 0}function V_(n,e){for(let t of n)RD(t)&&(t=t.\u0275providers),Array.isArray(t)?V_(t,e):e(t)}var JV=Xe({provide:String,useValue:Xe});function KD(n){return n!==null&&typeof n=="object"&&JV in n}function XV(n){return!!(n&&n.useExisting)}function e2(n){return!!(n&&n.useFactory)}function Ca(n){return typeof n=="function"}function t2(n){return!!n.useClass}var mf=new H(""),kh={},n2={},Rv;function U_(){return Rv===void 0&&(Rv=new qh),Rv}var Jn=class{},Pl=class extends Jn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wv(e,o=>this.processProvider(o)),this.records.set(kD,ga(void 0,this)),i.has("environment")&&this.records.set(Jn,ga(void 0,this));let s=this.records.get(mf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(FD,Yn,Ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=ns(this),r=Rn(void 0),i;try{return e()}finally{ns(t),Rn(r)}}get(e,t=Nl,r=Ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(qS))return e[qS](this);r=pf(r);let i,s=ns(this),o=Rn(void 0);try{if(!(r&Ie.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=a2(e)&&ff(e);u&&this.injectableDefInScope(u)?c=ga(zv(e),kh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&Ie.Self?U_():this.parent;return t=r&Ie.Optional&&t===Nl?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$h]=a[$h]||[]).unshift(xn(e)),s)throw a;return xV(a,e,"R3InjectorError",this.source)}else throw a}finally{Rn(o),ns(s)}}resolveInjectorInitializers(){let e=Me(null),t=ns(this),r=Rn(void 0),i;try{let s=this.get(Ea,Yn,Ie.Self);for(let o of s)o()}finally{ns(t),Rn(r),Me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(xn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Z(205,!1)}processProvider(e){e=wn(e);let t=Ca(e)?e:wn(e&&e.provide),r=i2(e);if(!Ca(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ga(void 0,kh,!0),i.factory=()=>Hv(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Me(null);try{return t.value===kh&&(t.value=n2,t.value=t.factory()),typeof t.value=="object"&&t.value&&o2(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=wn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function zv(n){let e=ff(n),t=e!==null?e.factory:Ys(n);if(t!==null)return t;if(n instanceof H)throw new Z(204,!1);if(n instanceof Function)return r2(n);throw new Z(204,!1)}function r2(n){if(n.length>0)throw new Z(204,!1);let t=mV(n);return t!==null?()=>t.factory(n):()=>new n}function i2(n){if(KD(n))return ga(void 0,n.useValue);{let e=QD(n);return ga(e,kh)}}function QD(n,e,t){let r;if(Ca(n)){let i=wn(n);return Ys(i)||zv(i)}else if(KD(n))r=()=>wn(n.useValue);else if(e2(n))r=()=>n.useFactory(...Hv(n.deps||[]));else if(XV(n))r=()=>ae(wn(n.useExisting));else{let i=wn(n&&(n.useClass||n.provide));if(s2(n))r=()=>new i(...Hv(n.deps));else return Ys(i)||zv(i)}return r}function ga(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function s2(n){return!!n.deps}function o2(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function a2(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function Wv(n,e){for(let t of n)Array.isArray(t)?Wv(t,e):t&&RD(t)?Wv(t.\u0275providers,e):e(t)}function vi(n,e){n instanceof Pl&&n.assertNotDestroyed();let t,r=ns(n),i=Rn(void 0);try{return e()}finally{ns(r),Rn(i)}}function YD(){return xD()!==void 0||DV()!=null}function gf(n){if(!YD())throw new Z(-203,!1)}function c2(n){return typeof n=="function"}var _i=0,Ee=1,le=2,In=3,vr=4,_r=5,Gh=6,zh=7,Xn=8,Ta=9,fi=10,Gt=11,Ol=12,YS=13,Na=14,Hr=15,ba=16,va=17,Sa=18,vf=19,ZD=20,rs=21,Fh=22,Zn=23,er=25,JD=1;var Js=7,Wh=8,Kh=9,Bn=10,Qh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Qh||{});function is(n){return Array.isArray(n)&&typeof n[JD]=="object"}function yi(n){return Array.isArray(n)&&n[JD]===!0}function XD(n){return(n.flags&4)!==0}function _f(n){return n.componentOffset>-1}function j_(n){return(n.flags&1)===1}function os(n){return!!n.template}function Kv(n){return(n[le]&512)!==0}var Qv=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function eA(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function wi(){return tA}function tA(n){return n.type.prototype.ngOnChanges&&(n.setInput=u2),l2}wi.ngInherit=!0;function l2(){let n=rA(this),e=n?.current;if(e){let t=n.previous;if(t===Ia)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function u2(n,e,t,r,i){let s=this.declaredInputs[r],o=rA(n)||d2(n,{previous:Ia,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Qv(u&&u.currentValue,t,c===Ia),eA(n,e,i,t)}var nA="__ngSimpleChanges__";function rA(n){return n[nA]||null}function d2(n,e){return n[nA]=e}var ZS=null;var jr=function(n,e,t){ZS?.(n,e,t)},h2="svg",f2="math";function qr(n){for(;Array.isArray(n);)n=n[_i];return n}function iA(n,e){return qr(e[n])}function nr(n,e){return qr(e[n.index])}function B_(n,e){return n.data[e]}function p2(n,e){return n[e]}function ds(n,e){let t=e[n];return is(t)?t:t[_i]}function $_(n){return(n[le]&128)===128}function m2(n){return yi(n[In])}function Yh(n,e){return e==null?null:n[e]}function sA(n){n[va]=0}function oA(n){n[le]&1024||(n[le]|=1024,$_(n)&&wf(n))}function g2(n,e){for(;n>0;)e=e[Na],n--;return e}function yf(n){return!!(n[le]&9216||n[Zn]?.dirty)}function Yv(n){n[fi].changeDetectionScheduler?.notify(8),n[le]&64&&(n[le]|=1024),yf(n)&&wf(n)}function wf(n){n[fi].changeDetectionScheduler?.notify(0);let e=Xs(n);for(;e!==null&&!(e[le]&8192||(e[le]|=8192,!$_(e)));)e=Xs(e)}function aA(n,e){if((n[le]&256)===256)throw new Z(911,!1);n[rs]===null&&(n[rs]=[]),n[rs].push(e)}function v2(n,e){if(n[rs]===null)return;let t=n[rs].indexOf(e);t!==-1&&n[rs].splice(t,1)}function Xs(n){let e=n[In];return yi(e)?e[In]:e}var De={lFrame:gA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cA=!1;function _2(){return De.lFrame.elementDepthCount}function y2(){De.lFrame.elementDepthCount++}function w2(){De.lFrame.elementDepthCount--}function lA(){return De.bindingsEnabled}function I2(){return De.skipHydrationRootTNode!==null}function E2(n){return De.skipHydrationRootTNode===n}function C2(){De.skipHydrationRootTNode=null}function Ke(){return De.lFrame.lView}function Nn(){return De.lFrame.tView}function gt(n){return De.lFrame.contextLView=n,n[Xn]}function vt(n){return De.lFrame.contextLView=null,n}function Mn(){let n=uA();for(;n!==null&&n.type===64;)n=n.parent;return n}function uA(){return De.lFrame.currentTNode}function T2(){let n=De.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function jl(n,e){let t=De.lFrame;t.currentTNode=n,t.isParent=e}function dA(){return De.lFrame.isParent}function b2(){De.lFrame.isParent=!1}function hA(){return cA}function JS(n){cA=n}function H_(){let n=De.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function S2(n){return De.lFrame.bindingIndex=n}function Bl(){return De.lFrame.bindingIndex++}function D2(n){let e=De.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function A2(){return De.lFrame.inI18n}function R2(n,e){let t=De.lFrame;t.bindingIndex=t.bindingRootIndex=n,Zv(e)}function x2(){return De.lFrame.currentDirectiveIndex}function Zv(n){De.lFrame.currentDirectiveIndex=n}function N2(n){let e=De.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function fA(n){De.lFrame.currentQueryIndex=n}function M2(n){let e=n[Ee];return e.type===2?e.declTNode:e.type===1?n[_r]:null}function pA(n,e,t){if(t&Ie.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&Ie.Host);)if(i=M2(s),i===null||(s=s[Na],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=De.lFrame=mA();return r.currentTNode=e,r.lView=n,!0}function q_(n){let e=mA(),t=n[Ee];De.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function mA(){let n=De.lFrame,e=n===null?null:n.child;return e===null?gA(n):e}function gA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function vA(){let n=De.lFrame;return De.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var _A=vA;function G_(){let n=vA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function P2(n){return(De.lFrame.contextLView=g2(n,De.lFrame.contextLView))[Xn]}function Ma(){return De.lFrame.selectedIndex}function eo(n){De.lFrame.selectedIndex=n}function z_(){let n=De.lFrame;return B_(n.tView,n.selectedIndex)}function O2(){return De.lFrame.currentNamespace}var yA=!0;function W_(){return yA}function K_(n){yA=n}function k2(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=tA(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function Q_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Lh(n,e,t){wA(n,e,3,t)}function Vh(n,e,t,r){(n[le]&3)===t&&wA(n,e,t,r)}function xv(n,e){let t=n[le];(t&3)===e&&(t&=16383,t+=1,n[le]=t)}function wA(n,e,t,r){let i=r!==void 0?n[va]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[va]+=65536),(a<s||s==-1)&&(F2(n,t,e,c),n[va]=(n[va]&4294901760)+c+2),c++}function XS(n,e){jr(4,n,e);let t=Me(null);try{e.call(n)}finally{Me(t),jr(5,n,e)}}function F2(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[le]>>14<n[va]>>16&&(n[le]&3)===e&&(n[le]+=16384,XS(a,s)):XS(a,s)}var wa=-1,to=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function L2(n){return n instanceof to}function V2(n){return(n.flags&8)!==0}function U2(n){return(n.flags&16)!==0}var Nv={},Jv=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=pf(r);let i=this.injector.get(e,Nv,r);return i!==Nv||t===Nv?i:this.parentInjector.get(e,t,r)}};function IA(n){return n!==wa}function Zh(n){return n&32767}function j2(n){return n>>16}function Jh(n,e){let t=j2(n),r=e;for(;t>0;)r=r[Na],t--;return r}var Xv=!0;function Xh(n){let e=Xv;return Xv=n,e}var B2=256,EA=B2-1,CA=5,$2=0,Br={};function H2(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(xl)&&(r=t[xl]),r==null&&(r=t[xl]=$2++);let i=r&EA,s=1<<i;e.data[n+(i>>CA)]|=s}function ef(n,e){let t=TA(n,e);if(t!==-1)return t;let r=e[Ee];r.firstCreatePass&&(n.injectorIndex=e.length,Mv(r.data,n),Mv(e,null),Mv(r.blueprint,null));let i=Y_(n,e),s=n.injectorIndex;if(IA(i)){let o=Zh(i),a=Jh(i,e),c=a[Ee].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Mv(n,e){n.push(0,0,0,0,0,0,0,0,e)}function TA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Y_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=RA(i),r===null)return wa;if(t++,i=i[Na],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return wa}function e_(n,e,t){H2(n,e,t)}function bA(n,e,t){if(t&Ie.Optional||n!==void 0)return n;k_(e,"NodeInjector")}function SA(n,e,t,r){if(t&Ie.Optional&&r===void 0&&(r=null),!(t&(Ie.Self|Ie.Host))){let i=n[Ta],s=Rn(void 0);try{return i?i.get(e,r,t&Ie.Optional):ND(e,r,t&Ie.Optional)}finally{Rn(s)}}return bA(r,e,t)}function DA(n,e,t,r=Ie.Default,i){if(n!==null){if(e[le]&2048&&!(r&Ie.Self)){let o=K2(n,e,t,r,Br);if(o!==Br)return o}let s=AA(n,e,t,r,Br);if(s!==Br)return s}return SA(e,t,r,i)}function AA(n,e,t,r,i){let s=z2(t);if(typeof s=="function"){if(!pA(e,n,r))return r&Ie.Host?bA(i,t,r):SA(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&Ie.Optional))k_(t);else return o}finally{_A()}}else if(typeof s=="number"){let o=null,a=TA(n,e),c=wa,u=r&Ie.Host?e[Hr][_r]:null;for((a===-1||r&Ie.SkipSelf)&&(c=a===-1?Y_(n,e):e[a+8],c===wa||!tD(r,!1)?a=-1:(o=e[Ee],a=Zh(c),e=Jh(c,e)));a!==-1;){let d=e[Ee];if(eD(s,a,d.data)){let f=q2(a,e,t,o,r,u);if(f!==Br)return f}c=e[a+8],c!==wa&&tD(r,e[Ee].data[a+8]===u)&&eD(s,a,e)?(o=d,a=Zh(c),e=Jh(c,e)):a=-1}}return i}function q2(n,e,t,r,i,s){let o=e[Ee],a=o.data[n+8],c=r==null?_f(a)&&Xv:r!=o&&(a.type&3)!==0,u=i&Ie.Host&&s===a,d=G2(a,o,t,c,u);return d!==null?Da(e,o,d,a):Br}function G2(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,u=n.directiveEnd,d=s>>20,f=r?a:a+d,m=i?a+d:u;for(let v=f;v<m;v++){let w=o[v];if(v<c&&t===w||v>=c&&w.type===t)return v}if(i){let v=o[c];if(v&&os(v)&&v.type===t)return c}return null}function Da(n,e,t,r){let i=n[t],s=e.data;if(L2(i)){let o=i;o.resolving&&EV(IV(s[t]));let a=Xh(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Rn(o.injectImpl):null,d=pA(n,r,Ie.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&k2(t,s[t],e)}finally{u!==null&&Rn(u),Xh(a),o.resolving=!1,_A()}}return i}function z2(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(xl)?n[xl]:void 0;return typeof e=="number"?e>=0?e&EA:W2:e}function eD(n,e,t){let r=1<<n;return!!(t[e+(n>>CA)]&r)}function tD(n,e){return!(n&Ie.Self)&&!(n&Ie.Host&&e)}var Qs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return DA(this._tNode,this._lView,e,pf(r),t)}};function W2(){return new Qs(Mn(),Ke())}function yr(n){return Vl(()=>{let e=n.prototype.constructor,t=e[Bh]||t_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Bh]||t_(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function t_(n){return bD(n)?()=>{let e=t_(wn(n));return e&&e()}:Ys(n)}function K2(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[le]&2048&&!(o[le]&512);){let a=AA(s,o,t,r|Ie.Self,Br);if(a!==Br)return a;let c=s.parent;if(!c){let u=o[ZD];if(u){let d=u.get(t,Br,r);if(d!==Br)return d}c=RA(o),o=o[Na]}s=c}return i}function RA(n){let e=n[Ee],t=e.type;return t===2?e.declTNode:t===1?n[_r]:null}function nD(n,e=null,t=null,r){let i=xA(n,e,t,r);return i.resolveInjectorInitializers(),i}function xA(n,e=null,t=null,r,i=new Set){let s=[t||Yn,ZV(n)];return r=r||(typeof n=="object"?void 0:xn(n)),new Pl(s,e||U_(),r||null,i)}var Re=class n{static{this.THROW_IF_NOT_FOUND=Nl}static{this.NULL=new qh}static create(e,t){if(Array.isArray(e))return nD({name:""},t,e,"");{let r=e.name??"";return nD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=j({token:n,providedIn:"any",factory:()=>ae(kD)})}static{this.__NG_ELEMENT_ID__=-1}};var Q2=new H("");Q2.__NG_ELEMENT_ID__=n=>{let e=Mn();if(e===null)throw new Z(204,!1);if(e.type&2)return e.value;if(n&Ie.Optional)return null;throw new Z(204,!1)};var Y2="ngOriginalError";function Pv(n){return n[Y2]}var NA=!0,hs=(()=>{class n{static{this.__NG_ELEMENT_ID__=Z2}static{this.__NG_ENV_ID__=t=>t}}return n})(),n_=class extends hs{constructor(e){super(),this._lView=e}onDestroy(e){return aA(this._lView,e),()=>v2(this._lView,e)}};function Z2(){return new n_(Ke())}var so=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Xt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}}return n})();var r_=class extends pt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,YD()&&(this.destroyRef=M(hs,{optional:!0})??void 0,this.pendingTasks=M(so,{optional:!0})??void 0)}emit(e){let t=Me(null);try{super.next(e)}finally{Me(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Et&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Ot=r_;function tf(...n){}function MA(n){let e,t;function r(){n=tf;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function rD(n){return queueMicrotask(()=>n()),()=>{n=tf}}var Z_="isAngularZone",nf=Z_+"_ID",J2=0,oe=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ot(!1),this.onMicrotaskEmpty=new Ot(!1),this.onStable=new Ot(!1),this.onError=new Ot(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=NA}=e;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,tU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Z_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Z(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,X2,tf,tf);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},X2={};function J_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function eU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){MA(()=>{n.callbackScheduled=!1,i_(n),n.isCheckStableRunning=!0,J_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),i_(n)}function tU(n){let e=()=>{eU(n)},t=J2++;n._inner=n._inner.fork({name:"angular",properties:{[Z_]:!0,[nf]:t,[nf+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(nU(c))return r.invokeTask(s,o,a,c);try{return iD(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),sD(n)}},onInvoke:(r,i,s,o,a,c,u)=>{try{return iD(n),r.invoke(s,o,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!rU(c)&&e(),sD(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,i_(n),J_(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function i_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function iD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function sD(n){n._nesting--,J_(n)}var s_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ot,this.onMicrotaskEmpty=new Ot,this.onStable=new Ot,this.onError=new Ot}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function nU(n){return PA(n,"__ignore_ng_zone__")}function rU(n){return PA(n,"__scheduler_tick__")}function PA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Gr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Pv(e);for(;t&&Pv(t);)t=Pv(t);return t||null}},iU=new H("",{providedIn:"root",factory:()=>{let n=M(oe),e=M(Gr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function sU(){return If(Mn(),Ke())}function If(n,e){return new zr(nr(n,e))}var zr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=sU}}return n})();function OA(n){return(n.flags&128)===128}var kA=new Map,oU=0;function aU(){return oU++}function cU(n){kA.set(n[vf],n)}function o_(n){kA.delete(n[vf])}var oD="__ngContext__";function no(n,e){is(e)?(n[oD]=e[vf],cU(e)):n[oD]=e}function FA(n){return VA(n[Ol])}function LA(n){return VA(n[vr])}function VA(n){for(;n!==null&&!yi(n);)n=n[vr];return n}var a_;function UA(n){a_=n}function lU(){if(a_!==void 0)return a_;if(typeof document<"u")return document;throw new Z(210,!1)}var X_=new H("",{providedIn:"root",factory:()=>uU}),uU="ng",ey=new H(""),wr=new H("",{providedIn:"platform",factory:()=>"unknown"});var ty=new H("",{providedIn:"root",factory:()=>lU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dU="h",hU="b";var fU=()=>null;function ny(n,e,t=!1){return fU(n,e,t)}var jA=!1,pU=new H("",{providedIn:"root",factory:()=>jA});var c_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${dV})`}};function ry(n){return n instanceof c_?n.changingThisBreaksApplicationSecurity:n}function BA(n){return n instanceof Function?n():n}var pi=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(pi||{}),mU;function iy(n,e){return mU(n,e)}function _a(n,e,t,r,i){if(r!=null){let s,o=!1;yi(r)?s=r:is(r)&&(o=!0,r=r[_i]);let a=qr(r);n===0&&t!==null?i==null?GA(e,t,a):sf(e,t,a,i||null,!0):n===1&&t!==null?sf(e,t,a,i||null,!0):n===2?xU(e,a,o):n===3&&e.destroyNode(a),s!=null&&MU(e,n,s,t,i)}}function gU(n,e){return n.createText(e)}function vU(n,e,t){n.setValue(e,t)}function $A(n,e,t){return n.createElement(e,t)}function _U(n,e){HA(n,e),e[_i]=null,e[_r]=null}function yU(n,e,t,r,i,s){r[_i]=i,r[_r]=e,Ef(n,r,t,1,i,s)}function HA(n,e){e[fi].changeDetectionScheduler?.notify(9),Ef(n,e,e[Gt],2,null,null)}function wU(n){let e=n[Ol];if(!e)return Ov(n[Ee],n);for(;e;){let t=null;if(is(e))t=e[Ol];else{let r=e[Bn];r&&(t=r)}if(!t){for(;e&&!e[vr]&&e!==n;)is(e)&&Ov(e[Ee],e),e=e[In];e===null&&(e=n),is(e)&&Ov(e[Ee],e),t=e&&e[vr]}e=t}}function IU(n,e,t,r){let i=Bn+r,s=t.length;r>0&&(t[i-1][vr]=e),r<s-Bn?(e[vr]=t[i],OD(t,Bn+r,e)):(t.push(e),e[vr]=null),e[In]=t;let o=e[ba];o!==null&&t!==o&&qA(o,e);let a=e[Sa];a!==null&&a.insertView(n),Yv(e),e[le]|=128}function qA(n,e){let t=n[Kh],r=e[In];if(is(r))n[le]|=Qh.HasTransplantedViews;else{let i=r[In][Hr];e[Hr]!==i&&(n[le]|=Qh.HasTransplantedViews)}t===null?n[Kh]=[e]:t.push(e)}function sy(n,e){let t=n[Kh],r=t.indexOf(e);t.splice(r,1)}function rf(n,e){if(n.length<=Bn)return;let t=Bn+e,r=n[t];if(r){let i=r[ba];i!==null&&i!==n&&sy(i,r),e>0&&(n[t-1][vr]=r[vr]);let s=Hh(n,Bn+e);_U(r[Ee],r);let o=s[Sa];o!==null&&o.detachView(s[Ee]),r[In]=null,r[vr]=null,r[le]&=-129}return r}function oy(n,e){if(!(e[le]&256)){let t=e[Gt];t.destroyNode&&Ef(n,e,t,3,null,null),wU(e)}}function Ov(n,e){if(e[le]&256)return;let t=Me(null);try{e[le]&=-129,e[le]|=256,e[Zn]&&Xd(e[Zn]),CU(n,e),EU(n,e),e[Ee].type===1&&e[Gt].destroy();let r=e[ba];if(r!==null&&yi(e[In])){r!==e[In]&&sy(r,e);let i=e[Sa];i!==null&&i.detachView(n)}o_(e)}finally{Me(t)}}function EU(n,e){let t=n.cleanup,r=e[zh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[zh]=null);let i=e[rs];if(i!==null){e[rs]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function CU(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof to)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];jr(4,a,c);try{c.call(a)}finally{jr(5,a,c)}}else{jr(4,i,s);try{s.call(i)}finally{jr(5,i,s)}}}}}function TU(n,e,t){return bU(n,e.parent,t)}function bU(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[_i];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===$r.None||s===$r.Emulated)return null}return nr(r,t)}}function sf(n,e,t,r,i){n.insertBefore(e,t,r,i)}function GA(n,e,t){n.appendChild(e,t)}function aD(n,e,t,r,i){r!==null?sf(n,e,t,r,i):GA(n,e,t)}function zA(n,e){return n.parentNode(e)}function SU(n,e){return n.nextSibling(e)}function DU(n,e,t){return RU(n,e,t)}function AU(n,e,t){return n.type&40?nr(n,t):null}var RU=AU,cD;function ay(n,e,t,r){let i=TU(n,r,e),s=e[Gt],o=r.parent||e[_r],a=DU(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)aD(s,i,t[c],a,!1);else aD(s,i,t,a,!1);cD!==void 0&&cD(s,r,e,t,i)}function Al(n,e){if(e!==null){let t=e.type;if(t&3)return nr(e,n);if(t&4)return l_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return Al(n,r);{let i=n[e.index];return yi(i)?l_(-1,i):qr(i)}}else{if(t&128)return Al(n,e.next);if(t&32)return iy(e,n)()||qr(n[e.index]);{let r=WA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Xs(n[Hr]);return Al(i,r)}else return Al(n,e.next)}}}return null}function WA(n,e){if(e!==null){let r=n[Hr][_r],i=e.projection;return r.projection[i]}return null}function l_(n,e){let t=Bn+n+1;if(t<e.length){let r=e[t],i=r[Ee].firstChild;if(i!==null)return Al(r,i)}return e[Js]}function xU(n,e,t){n.removeChild(null,e,t)}function cy(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&no(qr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)cy(n,e,t.child,r,i,s,!1),_a(e,n,i,a,s);else if(c&32){let u=iy(t,r),d;for(;d=u();)_a(e,n,i,d,s);_a(e,n,i,a,s)}else c&16?NU(n,e,r,t,i,s):_a(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Ef(n,e,t,r,i,s){cy(t,r,n.firstChild,e,i,s,!1)}function NU(n,e,t,r,i,s){let o=t[Hr],c=o[_r].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let d=c[u];_a(e,n,i,d,s)}else{let u=c,d=o[In];OA(r)&&(u.flags|=128),cy(n,e,u,d,i,s,!0)}}function MU(n,e,t,r,i){let s=t[Js],o=qr(t);s!==o&&_a(e,n,r,s,i);for(let a=Bn;a<t.length;a++){let c=t[a];Ef(c[Ee],c,n,e,r,s)}}function PU(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:pi.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=pi.Important),n.setStyle(t,r,i,s))}}function OU(n,e,t){n.setAttribute(e,"style",t)}function KA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function QA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&qv(n,e,r),i!==null&&KA(n,e,i),s!==null&&OU(n,e,s)}var fs={};function k(n=1){YA(Nn(),Ke(),Ma()+n,!1)}function YA(n,e,t,r){if(!r)if((e[le]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Lh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Vh(e,s,0,t)}eo(t)}function Ae(n,e=Ie.Default){let t=Ke();if(t===null)return ae(n,e);let r=Mn();return DA(r,t,wn(n),e)}function ZA(n,e,t,r,i,s){let o=Me(null);try{let a=null;i&ss.SignalBased&&(a=e[r][Vr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&ss.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):eA(e,a,r,s)}finally{Me(o)}}function kU(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)eo(~i);else{let s=i,o=t[++r],a=t[++r];R2(o,s);let c=e[s];a(2,c)}}}finally{eo(-1)}}function Cf(n,e,t,r,i,s,o,a,c,u,d){let f=e.blueprint.slice();return f[_i]=i,f[le]=r|4|128|8|64,(u!==null||n&&n[le]&2048)&&(f[le]|=2048),sA(f),f[In]=f[Na]=n,f[Xn]=t,f[fi]=o||n&&n[fi],f[Gt]=a||n&&n[Gt],f[Ta]=c||n&&n[Ta]||null,f[_r]=s,f[vf]=aU(),f[Gh]=d,f[ZD]=u,f[Hr]=e.type==2?n[Hr]:f,f}function Tf(n,e,t,r,i){let s=n.data[e];if(s===null)s=FU(n,e,t,r,i),A2()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=T2();s.injectorIndex=o===null?-1:o.injectorIndex}return jl(s,!0),s}function FU(n,e,t,r,i){let s=uA(),o=dA(),a=o?s:s&&s.parent,c=n.data[e]=BU(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function JA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function XA(n,e,t,r,i){let s=Ma(),o=r&2;try{eo(-1),o&&e.length>er&&YA(n,e,er,!1),jr(o?2:0,i),t(r,i)}finally{eo(s),jr(o?3:1,i)}}function eR(n,e,t){if(XD(e)){let r=Me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Me(r)}}}function tR(n,e,t){lA()&&(WU(n,e,t,nr(t,e)),(t.flags&64)===64&&aR(n,e,t))}function nR(n,e,t=nr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function rR(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=ly(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ly(n,e,t,r,i,s,o,a,c,u,d){let f=er+r,m=f+i,v=LU(f,m),w=typeof u=="function"?u():u;return v[Ee]={type:n,blueprint:v,template:t,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function LU(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fs);return t}function VU(n,e,t,r){let s=r.get(pU,jA)||t===$r.ShadowDom,o=n.selectRootElement(e,s);return UU(o),o}function UU(n){jU(n)}var jU=()=>null;function BU(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return I2()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lD(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=ss.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}n===0?uD(r,t,u,a,c):uD(r,t,u,a)}return r}function uD(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function $U(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,u=null;for(let d=r;d<i;d++){let f=s[d],m=t?t.get(f):null,v=m?m.inputs:null,w=m?m.outputs:null;c=lD(0,f.inputs,d,c,v),u=lD(1,f.outputs,d,u,w);let P=c!==null&&o!==null&&!L_(e)?ij(c,d,o):null;a.push(P)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function HU(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function iR(n,e,t,r,i,s,o,a){let c=nr(e,t),u=e.inputs,d;!a&&u!=null&&(d=u[r])?(uy(n,t,d,r,i),_f(e)&&qU(t,e.index)):e.type&3?(r=HU(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function qU(n,e){let t=ds(e,n);t[le]&16||(t[le]|=64)}function sR(n,e,t,r){if(lA()){let i=r===null?null:{"":-1},s=QU(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&oR(n,e,t,o,i,a),i&&YU(t,r,i)}t.mergedAttrs=Ml(t.mergedAttrs,t.attrs)}function oR(n,e,t,r,i,s){for(let u=0;u<r.length;u++)e_(ef(t,e),n,r[u].type);JU(t,n.data.length,r.length);for(let u=0;u<r.length;u++){let d=r[u];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=JA(n,e,r.length,null);for(let u=0;u<r.length;u++){let d=r[u];t.mergedAttrs=Ml(t.mergedAttrs,d.hostAttrs),XU(n,t,e,c,d),ZU(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}$U(n,t,s)}function GU(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;zU(o)!=a&&o.push(a),o.push(t,r,s)}}function zU(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function WU(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;_f(t)&&ej(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||ef(t,e),no(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],u=Da(e,n,a,t);if(no(u,e),o!==null&&rj(e,a-i,u,c,t,o),os(c)){let d=ds(t.index,e);d[Xn]=Da(e,n,a,t)}}}function aR(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=x2();try{eo(s);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];Zv(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&KU(c,u)}}finally{eo(-1),Zv(o)}}function KU(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function QU(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if($V(e,o.selectors,!1))if(r||(r=[]),os(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;u_(n,e,c)}else r.unshift(o),u_(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function u_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function YU(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Z(-301,!1);r.push(e[i],s)}}}function ZU(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;os(e)&&(t[""]=n)}}function JU(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function XU(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ys(i.type,!0)),o=new to(s,os(i),Ae);n.blueprint[r]=o,t[r]=o,GU(n,e,r,JA(n,t,i.hostVars,fs),i)}function ej(n,e,t){let r=nr(e,n),i=rR(t),s=n[fi].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=bf(n,Cf(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function tj(n,e,t,r,i,s){let o=nr(n,e);nj(e[Gt],o,s,n.value,t,r,i)}function nj(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?O_(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function rj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],d=o[a++],f=o[a++];ZA(r,t,c,u,d,f)}}function ij(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function cR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function lR(n,e){let t=n.contentQueries;if(t!==null){let r=Me(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];fA(s),a.contentQueries(2,e[o],o)}}}finally{Me(r)}}}function bf(n,e){return n[Ol]?n[YS][vr]=e:n[Ol]=e,n[YS]=e,e}function d_(n,e,t){fA(0);let r=Me(null);try{e(n,t)}finally{Me(r)}}function sj(n){return n[zh]??=[]}function oj(n){return n.cleanup??=[]}function uR(n,e){let t=n[Ta],r=t?t.get(Gr,null):null;r&&r.handleError(e)}function uy(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],u=e[o],d=n.data[o];ZA(d,u,r,a,c,i)}}function aj(n,e,t){let r=iA(e,n);vU(n[Gt],r,t)}function cj(n,e){let t=ds(e,n),r=t[Ee];lj(r,t);let i=t[_i];i!==null&&t[Gh]===null&&(t[Gh]=ny(i,t[Ta])),dy(r,t,t[Xn])}function lj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function dy(n,e,t){q_(e);try{let r=n.viewQuery;r!==null&&d_(1,r,t);let i=n.template;i!==null&&XA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Sa]?.finishViewCreation(n),n.staticContentQueries&&lR(n,e),n.staticViewQueries&&d_(2,n.viewQuery,t);let s=n.components;s!==null&&uj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[le]&=-5,G_()}}function uj(n,e){for(let t=0;t<e.length;t++)cj(n,e[t])}function dR(n,e,t,r){let i=Me(null);try{let s=e.tView,a=n[le]&4096?4096:16,c=Cf(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[ba]=u;let d=n[Sa];return d!==null&&(c[Sa]=d.createEmbeddedView(s)),dy(s,c,t),c}finally{Me(i)}}function dj(n,e){let t=Bn+e;if(t<n.length)return n[t]}function h_(n,e){return!e||e.firstChild===null||OA(n)}function hR(n,e,t,r=!0){let i=e[Ee];if(IU(i,e,n,t),r){let o=l_(t,n),a=e[Gt],c=zA(a,n[Js]);c!==null&&yU(i,n[_r],a,e,c,o)}let s=e[Gh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function hj(n,e){let t=rf(n,e);return t!==void 0&&oy(t[Ee],t),t}function of(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(qr(s)),yi(s)&&fj(s,r);let o=t.type;if(o&8)of(n,e,t.child,r);else if(o&32){let a=iy(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=WA(e,t);if(Array.isArray(a))r.push(...a);else{let c=Xs(e[Hr]);of(c[Ee],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function fj(n,e){for(let t=Bn;t<n.length;t++){let r=n[t],i=r[Ee].firstChild;i!==null&&of(r[Ee],r,i,e)}n[Js]!==n[_i]&&e.push(n[Js])}var fR=[];function pj(n){return n[Zn]??mj(n)}function mj(n){let e=fR.pop()??Object.create(vj);return e.lView=n,e}function gj(n){n.lView[Zn]!==n&&(n.lView=null,fR.push(n))}var vj=be(B({},ea),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{wf(n.lView)},consumerOnSignalRead(){this.lView[Zn]=this}});function _j(n){let e=n[Zn]??Object.create(yj);return e.lView=n,e}var yj=be(B({},ea),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Xs(n.lView);for(;e&&!pR(e[Ee]);)e=Xs(e);e&&oA(e)},consumerOnSignalRead(){this.lView[Zn]=this}});function pR(n){return n.type!==2}var wj=100;function mR(n,e=!0,t=0){let r=n[fi],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ij(n,t)}catch(o){throw e&&uR(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ij(n,e){let t=hA();try{JS(!0),f_(n,e);let r=0;for(;yf(n);){if(r===wj)throw new Z(103,!1);r++,f_(n,1)}}finally{JS(t)}}function Ej(n,e,t,r){let i=e[le];if((i&256)===256)return;let s=!1,o=!1;!s&&e[fi].inlineEffectRunner?.flush(),q_(e);let a=!0,c=null,u=null;s||(pR(n)?(u=pj(e),c=wl(u)):eS()===null?(a=!1,u=_j(e),c=wl(u)):e[Zn]&&(Xd(e[Zn]),e[Zn]=null));try{sA(e),S2(n.bindingStartIndex),t!==null&&XA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let v=n.preOrderCheckHooks;v!==null&&Lh(e,v,null)}else{let v=n.preOrderHooks;v!==null&&Vh(e,v,0,null),xv(e,0)}if(o||Cj(e),gR(e,0),n.contentQueries!==null&&lR(n,e),!s)if(d){let v=n.contentCheckHooks;v!==null&&Lh(e,v)}else{let v=n.contentHooks;v!==null&&Vh(e,v,1),xv(e,1)}kU(n,e);let f=n.components;f!==null&&_R(e,f,0);let m=n.viewQuery;if(m!==null&&d_(2,m,r),!s)if(d){let v=n.viewCheckHooks;v!==null&&Lh(e,v)}else{let v=n.viewHooks;v!==null&&Vh(e,v,2),xv(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Fh]){for(let v of e[Fh])v();e[Fh]=null}s||(e[le]&=-73)}catch(d){throw s||wf(e),d}finally{u!==null&&(Zd(u,c),a&&gj(u)),G_()}}function gR(n,e){for(let t=FA(n);t!==null;t=LA(t))for(let r=Bn;r<t.length;r++){let i=t[r];vR(i,e)}}function Cj(n){for(let e=FA(n);e!==null;e=LA(e)){if(!(e[le]&Qh.HasTransplantedViews))continue;let t=e[Kh];for(let r=0;r<t.length;r++){let i=t[r];oA(i)}}}function Tj(n,e,t){let r=ds(e,n);vR(r,t)}function vR(n,e){$_(n)&&f_(n,e)}function f_(n,e){let r=n[Ee],i=n[le],s=n[Zn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Jd(s)),o||=!1,s&&(s.dirty=!1),n[le]&=-9217,o)Ej(r,n,r.template,n[Xn]);else if(i&8192){gR(n,1);let a=r.components;a!==null&&_R(n,a,1)}}function _R(n,e,t){for(let r=0;r<e.length;r++)Tj(n,e[r],t)}function hy(n,e){let t=hA()?64:1088;for(n[fi].changeDetectionScheduler?.notify(e);n;){n[le]|=t;let r=Xs(n);if(Kv(n)&&!r)return n;n=r}return null}var ro=class{get rootNodes(){let e=this._lView,t=e[Ee];return of(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(e){this._lView[Xn]=e}get destroyed(){return(this._lView[le]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[In];if(yi(e)){let t=e[Wh],r=t?t.indexOf(this):-1;r>-1&&(rf(e,r),Hh(t,r))}this._attachedToViewContainer=!1}oy(this._lView[Ee],this._lView)}onDestroy(e){aA(this._lView,e)}markForCheck(){hy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[le]&=-129}reattach(){Yv(this._lView),this._lView[le]|=128}detectChanges(){this._lView[le]|=1024,mR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Kv(this._lView),t=this._lView[ba];t!==null&&!e&&sy(t,this._lView),HA(this._lView[Ee],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=e;let t=Kv(this._lView),r=this._lView[ba];r!==null&&!t&&qA(r,this._lView),Yv(this._lView)}},fy=(()=>{class n{static{this.__NG_ELEMENT_ID__=Dj}}return n})(),bj=fy,Sj=class extends bj{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=dR(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new ro(i)}};function Dj(){return Aj(Mn(),Ke())}function Aj(n,e){return n.type&4?new Sj(e,n,If(n,e)):null}var tre=new RegExp(`^(\\d+)*(${hU}|${dU})*(.*)`);var Rj=()=>null;function p_(n,e){return Rj(n,e)}var Aa=class{},Sf=new H("",{providedIn:"root",factory:()=>!1});var yR=new H(""),wR=new H(""),m_=class{},af=class{};function xj(n){let e=Error(`No component factory found for ${xn(n)}.`);return e[Nj]=n,e}var Nj="ngComponent";var g_=class{resolveComponentFactory(e){throw xj(e)}},as=class{static{this.NULL=new g_}},Ra=class{},Ii=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Mj()}}return n})();function Mj(){let n=Ke(),e=Mn(),t=ds(e.index,n);return(is(t)?t:n)[Gt]}var Pj=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>null})}}return n})();function v_(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=jS(i,a);else if(s==2){let c=a,u=e[++o];r=jS(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var cf=class extends as{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Zs(e);return new kl(t,this.ngModule)}};function dD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:ss.None;e?t.push({propName:o,templateName:r,isSignal:(a&ss.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function Oj(n){let e=n.toLowerCase();return e==="svg"?h2:e==="math"?f2:null}var kl=class extends af{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=dD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return dD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=zV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Me(null);try{i=i||this.ngModule;let o=i instanceof Jn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Jv(e,o):e,c=a.get(Ra,null);if(c===null)throw new Z(407,!1);let u=a.get(Pj,null),d=a.get(Aa,null),f={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:d},m=c.createRenderer(null,this.componentDef),v=this.componentDef.selectors[0][0]||"div",w=r?VU(m,r,this.componentDef.encapsulation,a):$A(m,v,Oj(v)),P=512;this.componentDef.signals?P|=4096:this.componentDef.onPush||(P|=16);let x=null;w!==null&&(x=ny(w,a,!0));let L=ly(0,null,null,1,0,null,null,null,null,null,null),q=Cf(null,L,null,P,null,null,f,m,a,null,x);q_(q);let Q,ne,Ze=null;try{let se=this.componentDef,b,y=null;se.findHostDirectiveDefs?(b=[],y=new Map,se.findHostDirectiveDefs(se,b,y),b.push(se)):b=[se];let I=kj(q,w);Ze=Fj(I,w,se,b,q,f,m),ne=B_(L,er),w&&Uj(m,se,w,r),t!==void 0&&jj(ne,this.ngContentSelectors,t),Q=Vj(Ze,se,b,y,q,[Bj]),dy(L,q,null)}catch(se){throw Ze!==null&&o_(Ze),o_(q),se}finally{G_()}return new __(this.componentType,Q,If(ne,q),q,ne)}finally{Me(s)}}},__=class extends m_{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new ro(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;uy(s[Ee],s,i,e,t),this.previousInputValues.set(e,t);let o=ds(this._tNode.index,s);hy(o,1)}}get injector(){return new Qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kj(n,e){let t=n[Ee],r=er;return n[r]=e,Tf(t,r,2,"#host",null)}function Fj(n,e,t,r,i,s,o){let a=i[Ee];Lj(r,n,e,o);let c=null;e!==null&&(c=ny(e,i[Ta]));let u=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=Cf(i,rR(t),null,d,i[n.index],n,s,u,null,null,c);return a.firstCreatePass&&u_(a,n,r.length-1),bf(i,f),i[n.index]=f}function Lj(n,e,t,r){for(let i of n)e.mergedAttrs=Ml(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(v_(e,e.mergedAttrs,!0),t!==null&&QA(r,t,e))}function Vj(n,e,t,r,i,s){let o=Mn(),a=i[Ee],c=nr(o,i);oR(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,m=Da(i,a,f,o);no(m,i)}aR(a,i,o),c&&no(c,i);let u=Da(i,a,o.directiveStart+o.componentOffset,o);if(n[Xn]=i[Xn]=u,s!==null)for(let d of s)d(u,e);return eR(a,o,i),u}function Uj(n,e,t,r){if(r)qv(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=WV(e.selectors[0]);i&&qv(n,t,i),s&&s.length>0&&KA(n,t,s.join(" "))}}function jj(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function Bj(){let n=Mn();Q_(Ke()[Ee],n)}var $l=(()=>{class n{static{this.__NG_ELEMENT_ID__=$j}}return n})();function $j(){let n=Mn();return qj(n,Ke())}var Hj=$l,IR=class extends Hj{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return If(this._hostTNode,this._hostLView)}get injector(){return new Qs(this._hostTNode,this._hostLView)}get parentInjector(){let e=Y_(this._hostTNode,this._hostLView);if(IA(e)){let t=Jh(e,this._hostLView),r=Zh(e),i=t[Ee].data[r+8];return new Qs(i,t)}else return new Qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=hD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Bn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=p_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,h_(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!c2(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new kl(Zs(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let P=(o?u:this.parentInjector).get(Jn,null);P&&(s=P)}let d=Zs(c.componentType??{}),f=p_(this._lContainer,d?.id??null),m=f?.firstChild??null,v=c.create(u,i,m,s);return this.insertImpl(v.hostView,a,h_(this._hostTNode,f)),v}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(m2(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[In],u=new IR(c,c[_r],c[In]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return hR(o,i,s,r),e.attachToViewContainerRef(),OD(kv(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=hD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=rf(this._lContainer,t);r&&(Hh(kv(this._lContainer),t),oy(r[Ee],r))}detach(e){let t=this._adjustIndex(e,-1),r=rf(this._lContainer,t);return r&&Hh(kv(this._lContainer),t)!=null?new ro(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function hD(n){return n[Wh]}function kv(n){return n[Wh]||(n[Wh]=[])}function qj(n,e){let t,r=e[n.index];return yi(r)?t=r:(t=cR(r,e,null,n),e[n.index]=t,bf(e,t)),zj(t,e,n,r),new IR(t,n,e)}function Gj(n,e){let t=n[Gt],r=t.createComment(""),i=nr(e,n),s=zA(t,i);return sf(t,s,r,SU(t,i),!1),r}var zj=Qj,Wj=()=>!1;function Kj(n,e,t){return Wj(n,e,t)}function Qj(n,e,t,r){if(n[Js])return;let i;t.type&8?i=qr(r):i=Gj(e,t),n[Js]=i}var fD=new Set;function oo(n){fD.has(n)||(fD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function Yj(n){return typeof n=="function"&&n[Vr]!==void 0}function J(n,e){oo("NgSignals");let t=hS(n),r=t[Vr];return e?.equal&&(r.equal=e.equal),t.set=i=>uv(r,i),t.update=i=>fS(r,i),t.asReadonly=Zj.bind(t),t}function Zj(){let n=this[Vr];if(n.readonlyFn===void 0){let e=()=>this();e[Vr]=n,n.readonlyFn=e}return n.readonlyFn}function ER(n){return Yj(n)&&typeof n.set=="function"}function Jj(n){return Object.getPrototypeOf(n.prototype).constructor}function Pn(n){let e=Jj(n.type),t=!0,r=[n];for(;e;){let i;if(os(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Z(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Mh(n.inputs),o.inputTransforms=Mh(n.inputTransforms),o.declaredInputs=Mh(n.declaredInputs),o.outputs=Mh(n.outputs);let a=i.hostBindings;a&&rB(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&tB(n,c),u&&nB(n,u),Xj(n,i),fV(n.outputs,i.outputs),os(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===Pn&&(t=!1)}}e=Object.getPrototypeOf(e)}eB(r)}function Xj(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function eB(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Ml(i.hostAttrs,t=Ml(t,i.hostAttrs))}}function Mh(n){return n===Ia?{}:n===Yn?[]:n}function tB(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function nB(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function rB(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var cs=class{},Fl=class{};var y_=class extends cs{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cf(this);let s=HD(e);this._bootstrapComponents=BA(s.bootstrap),this._r3Injector=xA(e,t,[{provide:cs,useValue:this},{provide:as,useValue:this.componentFactoryResolver},...r],xn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},w_=class extends Fl{constructor(e){super(),this.moduleType=e}create(e){return new y_(this.moduleType,e,[])}};var lf=class extends cs{constructor(e){super(),this.componentFactoryResolver=new cf(this),this.instance=null;let t=new Pl([...e.providers,{provide:cs,useValue:this},{provide:as,useValue:this.componentFactoryResolver}],e.parent||U_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function py(n,e,t=null){return new lf({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function CR(n){return sB(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function iB(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function sB(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function TR(n,e,t){return n[e]=t}function mi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function oB(n,e,t,r){let i=mi(n,e,t);return mi(n,e+1,r)||i}function aB(n){return(n.flags&32)===32}function cB(n,e,t,r,i,s,o,a,c){let u=e.consts,d=Tf(e,n,4,o||null,a||null);sR(e,t,d,Yh(u,c)),Q_(e,d);let f=d.tView=ly(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function lB(n,e,t,r,i,s,o,a,c,u){let d=t+er,f=e.firstCreatePass?cB(d,e,n,r,i,s,o,a,c):e.data[d];jl(f,!1);let m=uB(e,n,f,t);W_()&&ay(e,n,m,f),no(m,n);let v=cR(m,n,m,f);return n[d]=v,bf(n,v),Kj(v,f,n),j_(f)&&tR(e,n,f),c!=null&&nR(n,f,u),f}function re(n,e,t,r,i,s,o,a){let c=Ke(),u=Nn(),d=Yh(u.consts,s);return lB(c,u,n,e,t,r,i,d,o,a),re}var uB=dB;function dB(n,e,t,r){return K_(!0),e[Gt].createComment("")}var Rl=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Rl||{}),hB=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}}return n})(),pD=class n{constructor(){this.ngZone=M(oe),this.scheduler=M(Aa),this.errorHandler=M(Gr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Rl.EarlyRead,Rl.Write,Rl.MixedReadWrite,Rl.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new n})}};function Hl(n,e,t,r){let i=Ke(),s=Bl();if(mi(i,s,e)){let o=Nn(),a=z_();tj(a,i,n,e,t,r)}return Hl}function fB(n,e,t,r){return mi(n,Bl(),t)?e+O_(t)+r:fs}function Ph(n,e){return n<<17|e<<2}function io(n){return n>>17&32767}function pB(n){return(n&2)==2}function mB(n,e){return n&131071|e<<17}function I_(n){return n|2}function xa(n){return(n&131068)>>2}function Fv(n,e){return n&-131069|e<<2}function gB(n){return(n&1)===1}function E_(n){return n|1}function vB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=io(o),c=xa(o);n[r]=t;let u=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Ul(f,d)>0)&&(u=!0)}else d=t;if(i)if(c!==0){let m=io(n[a+1]);n[r+1]=Ph(m,a),m!==0&&(n[m+1]=Fv(n[m+1],r)),n[a+1]=mB(n[a+1],r)}else n[r+1]=Ph(a,0),a!==0&&(n[a+1]=Fv(n[a+1],r)),a=r;else n[r+1]=Ph(c,0),a===0?a=r:n[c+1]=Fv(n[c+1],r),c=r;u&&(n[r+1]=I_(n[r+1])),mD(n,d,r,!0),mD(n,d,r,!1),_B(e,d,n,r,s),o=Ph(a,c),s?e.classBindings=o:e.styleBindings=o}function _B(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Ul(s,e)>=0&&(t[r+1]=E_(t[r+1]))}function mD(n,e,t,r){let i=n[t+1],s=e===null,o=r?io(i):xa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],u=n[o+1];yB(c,e)&&(a=!0,n[o+1]=r?E_(u):I_(u)),o=r?io(u):xa(u)}a&&(n[t+1]=r?I_(i):E_(i))}function yB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ul(n,e)>=0:!1}function ee(n,e,t){let r=Ke(),i=Bl();if(mi(r,i,e)){let s=Nn(),o=z_();iR(s,o,r,n,e,r[Gt],t,!1)}return ee}function gD(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";uy(n,t,s[o],o,r)}function Df(n,e,t){return bR(n,e,t,!1),Df}function Af(n,e){return bR(n,e,null,!0),Af}function bR(n,e,t,r){let i=Ke(),s=Nn(),o=D2(2);if(s.firstUpdatePass&&IB(s,n,o,r),e!==fs&&mi(i,o,e)){let a=s.data[Ma()];SB(s,a,i,i[Gt],n,i[o+1]=DB(e,t),r,o)}}function wB(n,e){return e>=n.expandoStartIndex}function IB(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ma()],o=wB(n,t);AB(s,r)&&e===null&&!o&&(e=!1),e=EB(i,s,e,r),vB(i,s,e,t,o,r)}}function EB(n,e,t,r){let i=N2(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Lv(null,n,e,t,r),t=Ll(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=Lv(i,n,e,t,r),s===null){let c=CB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=Lv(null,n,e,c[1],r),c=Ll(c,e.attrs,r),TB(n,e,r,c))}else s=bB(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function CB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(xa(r)!==0)return n[io(r)]}function TB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[io(i)]=r}function bB(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ll(r,o,t)}return Ll(r,e.attrs,t)}function Lv(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ll(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ll(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),PV(n,o,t?!0:e[++s]))}return n===void 0?null:n}function SB(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],d=gB(u)?vD(c,e,t,i,xa(u),o):void 0;if(!uf(d)){uf(s)||pB(u)&&(s=vD(c,null,t,i,a,o));let f=iA(Ma(),t);PU(r,o,f,i,s)}}function vD(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),d=u?c[1]:c,f=d===null,m=t[i+1];m===fs&&(m=f?Yn:void 0);let v=f?Av(m,r):d===r?m:void 0;if(u&&!uf(v)&&(v=Av(c,r)),uf(v)&&(a=v,o))return a;let w=n[i+1];i=o?io(w):xa(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Av(c,r))}return a}function uf(n){return n!==void 0}function DB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=xn(ry(n)))),n}function AB(n,e){return(n.flags&(e?8:16))!==0}function de(n,e){oo("NgControlFlow");let t=Ke(),r=Bl(),i=t[r]!==fs?t[r]:-1,s=i!==-1?_D(t,er+i):void 0,o=0;if(mi(t,r,n)){let a=Me(null);try{if(s!==void 0&&hj(s,o),n!==-1){let c=er+n,u=_D(t,c),d=RB(t[Ee],c),f=p_(u,d.tView.ssrId),m=dR(t,d,e,{dehydratedView:f});hR(u,m,o,h_(d,f))}}finally{Me(a)}}else if(s!==void 0){let a=dj(s,o);a!==void 0&&(a[Xn]=e)}}function _D(n,e){return n[e]}function RB(n,e){return B_(n,e)}function xB(n,e,t,r,i,s){let o=e.consts,a=Yh(o,i),c=Tf(e,n,2,r,a);return sR(e,t,c,Yh(o,s)),c.attrs!==null&&v_(c,c.attrs,!1),c.mergedAttrs!==null&&v_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function C(n,e,t,r){let i=Ke(),s=Nn(),o=er+n,a=i[Gt],c=s.firstCreatePass?xB(o,s,i,e,t,r):s.data[o],u=NB(s,i,c,a,e,n);i[o]=u;let d=j_(c);return jl(c,!0),QA(a,u,c),!aB(c)&&W_()&&ay(s,i,u,c),_2()===0&&no(u,i),y2(),d&&(tR(s,i,c),eR(s,c,i)),r!==null&&nR(i,c),C}function T(){let n=Mn();dA()?b2():(n=n.parent,jl(n,!1));let e=n;E2(e)&&C2(),w2();let t=Nn();return t.firstCreatePass&&(Q_(t,n),XD(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&V2(e)&&gD(t,e,Ke(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&U2(e)&&gD(t,e,Ke(),e.stylesWithoutHost,!1),T}function Ce(n,e,t,r){return C(n,e,t,r),T(),Ce}var NB=(n,e,t,r,i,s)=>(K_(!0),$A(r,i,O2()));function Ei(){return Ke()}var Ks=void 0;function MB(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var PB=["en",[["a","p"],["AM","PM"],Ks],[["AM","PM"],Ks,Ks],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ks,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ks,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ks,"{1} 'at' {0}",Ks],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",MB],Vv={};function rr(n){let e=OB(n),t=yD(e);if(t)return t;let r=e.split("-")[0];if(t=yD(r),t)return t;if(r==="en")return PB;throw new Z(701,!1)}function yD(n){return n in Vv||(Vv[n]=Dl.ng&&Dl.ng.common&&Dl.ng.common.locales&&Dl.ng.common.locales[n]),Vv[n]}var Rt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Rt||{});function OB(n){return n.toLowerCase().replace(/_/g,"-")}var df="en-US";var kB=df;function FB(n){typeof n=="string"&&(kB=n.toLowerCase().replace(/_/g,"-"))}var LB=(n,e,t)=>{};function he(n,e,t,r){let i=Ke(),s=Nn(),o=Mn();return SR(s,i,i[Gt],o,n,e,r),he}function VB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[zh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function SR(n,e,t,r,i,s,o){let a=j_(r),u=n.firstCreatePass&&oj(n),d=e[Xn],f=sj(e),m=!0;if(r.type&3||o){let P=nr(r,e),x=o?o(P):P,L=f.length,q=o?ne=>o(qr(ne[r.index])):r.index,Q=null;if(!o&&a&&(Q=VB(n,e,i,r.index)),Q!==null){let ne=Q.__ngLastListenerFn__||Q;ne.__ngNextListenerFn__=s,Q.__ngLastListenerFn__=s,m=!1}else{s=ID(r,e,d,s),LB(P,i,s);let ne=t.listen(x,i,s);f.push(s,ne),u&&u.push(i,q,L,L+1)}}else s=ID(r,e,d,s);let v=r.outputs,w;if(m&&v!==null&&(w=v[i])){let P=w.length;if(P)for(let x=0;x<P;x+=2){let L=w[x],q=w[x+1],Ze=e[L][q].subscribe(s),se=f.length;f.push(s,Ze),u&&u.push(i,r.index,se,-(se+1))}}}function wD(n,e,t,r){let i=Me(null);try{return jr(6,e,t),t(r)!==!1}catch(s){return uR(n,s),!1}finally{jr(7,e,t),Me(i)}}function ID(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?ds(n.index,e):e;hy(o,5);let a=wD(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=wD(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function G(n=1){return P2(n)}function UB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function R(n,e=""){let t=Ke(),r=Nn(),i=n+er,s=r.firstCreatePass?Tf(r,i,1,e,null):r.data[i],o=jB(r,t,s,e,n);t[i]=o,W_()&&ay(r,t,o,s),jl(s,!1)}var jB=(n,e,t,r,i)=>(K_(!0),gU(e[Gt],r));function kt(n){return W("",n,""),kt}function W(n,e,t){let r=Ke(),i=fB(r,n,e,t);return i!==fs&&aj(r,Ma(),i),W}function Ir(n,e,t){ER(e)&&(e=e());let r=Ke(),i=Bl();if(mi(r,i,e)){let s=Nn(),o=z_();iR(s,o,r,n,e,r[Gt],t,!1)}return Ir}function Wr(n,e){let t=ER(n);return t&&n.set(e),t}function Er(n,e){let t=Ke(),r=Nn(),i=Mn();return SR(r,t,t[Gt],i,n,e),Er}function BB(n,e,t){let r=Nn();if(r.firstCreatePass){let i=os(n);C_(t,r.data,r.blueprint,i,!0),C_(e,r.data,r.blueprint,i,!1)}}function C_(n,e,t,r,i){if(n=wn(n),Array.isArray(n))for(let s=0;s<n.length;s++)C_(n[s],e,t,r,i);else{let s=Nn(),o=Ke(),a=Mn(),c=Ca(n)?n:wn(n.provide),u=QD(n),d=a.providerIndexes&1048575,f=a.directiveStart,m=a.providerIndexes>>20;if(Ca(n)||!n.multi){let v=new to(u,i,Ae),w=jv(c,e,i?d:d+m,f);w===-1?(e_(ef(a,o),s,c),Uv(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(v),o.push(v)):(t[w]=v,o[w]=v)}else{let v=jv(c,e,d+m,f),w=jv(c,e,d,d+m),P=v>=0&&t[v],x=w>=0&&t[w];if(i&&!x||!i&&!P){e_(ef(a,o),s,c);let L=qB(i?HB:$B,t.length,i,r,u);!i&&x&&(t[w].providerFactory=L),Uv(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),o.push(L)}else{let L=DR(t[i?w:v],u,!i&&r);Uv(s,n,v>-1?v:w,L)}!i&&r&&x&&t[w].componentProviders++}}}function Uv(n,e,t,r){let i=Ca(e),s=t2(e);if(i||s){let c=(s?wn(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=u.indexOf(t);d===-1?u.push(t,[r,c]):u[d+1].push(r,c)}else u.push(t,c)}}}function DR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function jv(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function $B(n,e,t,r){return T_(this.multi,[])}function HB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Da(t,t[Ee],this.providerFactory.index,r);s=a.slice(0,o),T_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],T_(i,s);return s}function T_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function qB(n,e,t,r,i){let s=new to(n,t,Ae);return s.multi=[],s.index=e,s.componentProviders=0,DR(s,i,r&&!t),s}function Kr(n,e=[]){return t=>{t.providersResolver=(r,i)=>BB(r,i?i(n):n,e)}}var GB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=zD(!1,t.type),i=r.length>0?py([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=j({token:n,providedIn:"environment",factory:()=>new n(ae(Jn))})}}return n})();function Ge(n){oo("NgStandalone"),n.getStandaloneInjector=e=>e.get(GB).getOrCreateStandaloneInjector(n)}function rt(n,e,t,r){return zB(Ke(),H_(),n,e,t,r)}function Cr(n,e,t,r,i){return RR(Ke(),H_(),n,e,t,r,i)}function AR(n,e){let t=n[e];return t===fs?void 0:t}function zB(n,e,t,r,i,s){let o=e+t;return mi(n,o,i)?TR(n,o+1,s?r.call(s,i):r(i)):AR(n,o+1)}function RR(n,e,t,r,i,s,o){let a=e+t;return oB(n,a,i,s)?TR(n,a+2,o?r.call(o,i,s):r(i,s)):AR(n,a+2)}function Ci(n,e){let t=Nn(),r,i=n+er;t.firstCreatePass?(r=WB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ys(r.type,!0)),o,a=Rn(Ae);try{let c=Xh(!1),u=s();return Xh(c),UB(t,Ke(),i,u),u}finally{Rn(a)}}function WB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ti(n,e,t,r){let i=n+er,s=Ke(),o=p2(s,i);return KB(s,i)?RR(s,H_(),e,o.transform,t,r,o):o.transform(t,r)}function KB(n,e){return n[Ee].data[e].pure}var gi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},xR=new gi("18.2.13");var Rf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var NR=new H("");function ao(n){return!!n&&typeof n.then=="function"}function MR(n){return!!n&&typeof n.subscribe=="function"}var ps=new H(""),PR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=M(ps,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(ao(s))t.push(s);else if(MR(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),my=new H("");function QB(){dS(()=>{throw new Z(600,!1)})}function YB(n){return n.isBoundToModule}var ZB=10;function JB(n,e,t){try{let r=t();return ao(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var co=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(iU),this.afterRenderManager=M(hB),this.zonelessEnabled=M(Sf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new pt,this.afterTick=new pt,this.componentTypes=[],this.components=[],this.isStable=M(so).hasPendingTasks.pipe(Y(t=>!t)),this._injector=M(Jn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof af;if(!this._injector.get(PR).done){let m=!i&&$D(t),v=!1;throw new Z(405,v)}let o;i?o=t:o=this._injector.get(as).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=YB(o)?void 0:this._injector.get(cs),c=r||o.selector,u=o.create(Re.NULL,[],c,a),d=u.location.nativeElement,f=u.injector.get(NR,null);return f?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Uh(this.components,u),f?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Z(101,!1);let t=Me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Me(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(Ra,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<ZB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)XB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>yf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Uh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(my,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Uh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Z(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function XB(n,e,t,r){if(!t&&!yf(n))return;mR(n,e,t&&!r?0:1)}var b_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},gy=(()=>{class n{compileModuleSync(t){return new w_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=HD(t),s=BA(i.declarations).reduce((o,a)=>{let c=Zs(a);return c&&o.push(new kl(c)),o},[]);return new b_(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var e$=(()=>{class n{constructor(){this.zone=M(oe),this.changeDetectionScheduler=M(Aa),this.applicationRef=M(co)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),t$=new H("",{factory:()=>!1});function OR({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new oe(be(B({},FR()),{scheduleInRootZone:t})),[{provide:oe,useFactory:n},{provide:Ea,multi:!0,useFactory:()=>{let r=M(e$,{optional:!0});return()=>r.initialize()}},{provide:Ea,multi:!0,useFactory:()=>{let r=M(n$);return()=>{r.initialize()}}},e===!0?{provide:yR,useValue:!0}:[],{provide:wR,useValue:t??NA}]}function kR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=OR({ngZoneFactory:()=>{let i=FR(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&oo("NgZone_CoalesceEvent"),new oe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return nt([{provide:t$,useValue:!0},{provide:Sf,useValue:!1},r])}function FR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var n$=(()=>{class n{constructor(){this.subscription=new Et,this.initialized=!1,this.zone=M(oe),this.pendingTasks=M(so)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{oe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{oe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var r$=(()=>{class n{constructor(){this.appRef=M(co),this.taskService=M(so),this.ngZone=M(oe),this.zonelessEnabled=M(Sf),this.disableScheduling=M(yR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Et,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(nf):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(M(wR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof s_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?rD:MA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(nf+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,rD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function i$(){return typeof $localize<"u"&&$localize.locale||df}var xf=new H("",{providedIn:"root",factory:()=>M(xf,Ie.Optional|Ie.SkipSelf)||i$()});var S_=new H("");function Oh(n){return!n.moduleRef}function s$(n){let e=Oh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(oe);return t.run(()=>{Oh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Gr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Oh(n)){let s=()=>e.destroy(),o=n.platformInjector.get(S_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(S_);o.add(s),n.moduleRef.onDestroy(()=>{Uh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return JB(r,t,()=>{let s=e.get(PR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(xf,df);if(FB(o||df),Oh(n)){let a=e.get(co);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return o$(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function o$(n,e){let t=n.injector.get(co);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Z(-403,!1);e.push(n)}var jh=null;function a$(n=[],e){return Re.create({name:e,providers:[{provide:mf,useValue:"platform"},{provide:S_,useValue:new Set([()=>jh=null])},...n]})}function c$(n=[]){if(jh)return jh;let e=a$(n);return jh=e,QB(),l$(e),e}function l$(n){n.get(ey,null)?.forEach(t=>t())}var ms=(()=>{class n{static{this.__NG_ELEMENT_ID__=u$}}return n})();function u$(n){return d$(Mn(),Ke(),(n&16)===16)}function d$(n,e,t){if(_f(n)&&!t){let r=ds(n.index,e);return new ro(r,r)}else if(n.type&175){let r=e[Hr];return new ro(r,e)}return null}var D_=class{constructor(){}supports(e){return CR(e)}create(e){return new A_(e)}},h$=(n,e)=>e,A_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||h$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<ED(r,i,s)?t:r,a=ED(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,d=c-i;if(u!=d){for(let m=0;m<u;m++){let v=m<s.length?s[m]:s[m]=0,w=v+m;d<=w&&w<u&&(s[m]=v+1)}let f=o.previousIndex;s[f]=d-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!CR(e))throw new Z(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,iB(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new R_(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new hf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new hf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},R_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},x_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},hf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new x_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ED(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function CD(){return new vy([new D_])}var vy=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:CD})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||CD()),deps:[[n,new PD,new ue]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Z(901,!1)}}return n})();function LR(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=c$(r),s=[OR({}),{provide:Aa,useExisting:r$},...t||[]],o=new lf({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return s$({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function ql(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Se(n,e){oo("NgSignals");let t=cS(n);return e?.equal&&(t[Vr].equal=e.equal),t}function ir(n){let e=Me(null);try{return n()}finally{Me(e)}}var f$=new H("",{providedIn:"root",factory:()=>M(p$)}),p$=(()=>{class n{static{this.\u0275prov=j({token:n,providedIn:"root",factory:()=>new N_})}}return n})(),N_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=M(so),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},M_=class{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=mS(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Gr,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Tr(n,e){oo("NgSignals"),!e?.injector&&gf(Tr);let t=e?.injector??M(Re),r=e?.manualCleanup!==!0?t.get(hs):null,i=new M_(t.get(f$),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(ms,null,{optional:!0});return!s||!(s._lView[le]&8)?i.watcher.notify():(s._lView[Fh]??=[]).push(i.watcher.notify),i}var HR=null;function Di(){return HR}function qR(n){HR??=n}var Uf=class{};var or=new H(""),GR=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>M(v$),providedIn:"platform"})}}return n})();var v$=(()=>{class n extends GR{constructor(){super(),this._doc=M(or),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Di().getBaseHref(this._doc)}onPopState(t){let r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Di().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function zR(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function VR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function lo(n){return n&&n[0]!=="?"?"?"+n:n}var $f=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>M(WR),providedIn:"root"})}}return n})(),_$=new H(""),WR=(()=>{class n extends $f{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??M(or).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return zR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+lo(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+lo(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+lo(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ae(GR),ae(_$,8))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Gl=(()=>{class n{constructor(t){this._subject=new Ot,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=I$(VR(UR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+lo(r))}normalize(t){return n.stripTrailingSlash(w$(this._basePath,UR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lo(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+lo(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=lo}static{this.joinWithSlash=zR}static{this.stripTrailingSlash=VR}static{this.\u0275fac=function(r){return new(r||n)(ae($f))}}static{this.\u0275prov=j({token:n,factory:()=>y$(),providedIn:"root"})}}return n})();function y$(){return new Gl(ae($f))}function w$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function UR(n){return n.replace(/\/index.html$/,"")}function I$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var En=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(En||{}),et=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(et||{}),$n=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}($n||{}),gs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function E$(n){return rr(n)[Rt.LocaleId]}function C$(n,e,t){let r=rr(n),i=[r[Rt.DayPeriodsFormat],r[Rt.DayPeriodsStandalone]],s=sr(i,e);return sr(s,t)}function T$(n,e,t){let r=rr(n),i=[r[Rt.DaysFormat],r[Rt.DaysStandalone]],s=sr(i,e);return sr(s,t)}function b$(n,e,t){let r=rr(n),i=[r[Rt.MonthsFormat],r[Rt.MonthsStandalone]],s=sr(i,e);return sr(s,t)}function S$(n,e){let r=rr(n)[Rt.Eras];return sr(r,e)}function Nf(n,e){let t=rr(n);return sr(t[Rt.DateFormat],e)}function Mf(n,e){let t=rr(n);return sr(t[Rt.TimeFormat],e)}function Pf(n,e){let r=rr(n)[Rt.DateTimeFormat];return sr(r,e)}function Hf(n,e){let t=rr(n),r=t[Rt.NumberSymbols][e];if(typeof r>"u"){if(e===gs.CurrencyDecimal)return t[Rt.NumberSymbols][gs.Decimal];if(e===gs.CurrencyGroup)return t[Rt.NumberSymbols][gs.Group]}return r}function KR(n){if(!n[Rt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Rt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function D$(n){let e=rr(n);return KR(e),(e[Rt.ExtraData][2]||[]).map(r=>typeof r=="string"?_y(r):[_y(r[0]),_y(r[1])])}function A$(n,e,t){let r=rr(n);KR(r);let i=[r[Rt.ExtraData][0],r[Rt.ExtraData][1]],s=sr(i,e)||[];return sr(s,t)||[]}function sr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function _y(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var R$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Of={},x$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Si=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(Si||{}),He=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(He||{}),$e=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}($e||{});function N$(n,e,t,r){let i=j$(n);e=bi(t,e)||e;let o=[],a;for(;e;)if(a=x$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=YR(r,c),i=U$(i,r,!0));let u="";return o.forEach(d=>{let f=L$(d);u+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),u}function jf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function bi(n,e){let t=E$(n);if(Of[t]??={},Of[t][e])return Of[t][e];let r="";switch(e){case"shortDate":r=Nf(n,$n.Short);break;case"mediumDate":r=Nf(n,$n.Medium);break;case"longDate":r=Nf(n,$n.Long);break;case"fullDate":r=Nf(n,$n.Full);break;case"shortTime":r=Mf(n,$n.Short);break;case"mediumTime":r=Mf(n,$n.Medium);break;case"longTime":r=Mf(n,$n.Long);break;case"fullTime":r=Mf(n,$n.Full);break;case"short":let i=bi(n,"shortTime"),s=bi(n,"shortDate");r=kf(Pf(n,$n.Short),[i,s]);break;case"medium":let o=bi(n,"mediumTime"),a=bi(n,"mediumDate");r=kf(Pf(n,$n.Medium),[o,a]);break;case"long":let c=bi(n,"longTime"),u=bi(n,"longDate");r=kf(Pf(n,$n.Long),[c,u]);break;case"full":let d=bi(n,"fullTime"),f=bi(n,"fullDate");r=kf(Pf(n,$n.Full),[d,f]);break}return r&&(Of[t][e]=r),r}function kf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function br(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function M$(n,e){return br(n,3).substring(0,e)}function Ft(n,e,t=0,r=!1,i=!1){return function(s,o){let a=P$(n,s);if((t>0||a>-t)&&(a+=t),n===He.Hours)a===0&&t===-12&&(a=12);else if(n===He.FractionalSeconds)return M$(a,e);let c=Hf(o,gs.MinusSign);return br(a,e,c,r,i)}}function P$(n,e){switch(n){case He.FullYear:return e.getFullYear();case He.Month:return e.getMonth();case He.Date:return e.getDate();case He.Hours:return e.getHours();case He.Minutes:return e.getMinutes();case He.Seconds:return e.getSeconds();case He.FractionalSeconds:return e.getMilliseconds();case He.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function it(n,e,t=En.Format,r=!1){return function(i,s){return O$(i,s,n,e,t,r)}}function O$(n,e,t,r,i,s){switch(t){case $e.Months:return b$(e,i,r)[n.getMonth()];case $e.Days:return T$(e,i,r)[n.getDay()];case $e.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let u=D$(e),d=A$(e,i,r),f=u.findIndex(m=>{if(Array.isArray(m)){let[v,w]=m,P=o>=v.hours&&a>=v.minutes,x=o<w.hours||o===w.hours&&a<w.minutes;if(v.hours<w.hours){if(P&&x)return!0}else if(P||x)return!0}else if(m.hours===o&&m.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return C$(e,i,r)[o<12?0:1];case $e.Eras:return S$(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Ff(n){return function(e,t,r){let i=-1*r,s=Hf(t,gs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case Si.Short:return(i>=0?"+":"")+br(o,2,s)+br(Math.abs(i%60),2,s);case Si.ShortGMT:return"GMT"+(i>=0?"+":"")+br(o,1,s);case Si.Long:return"GMT"+(i>=0?"+":"")+br(o,2,s)+":"+br(Math.abs(i%60),2,s);case Si.Extended:return r===0?"Z":(i>=0?"+":"")+br(o,2,s)+":"+br(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var k$=0,Vf=4;function F$(n){let e=jf(n,k$,1).getDay();return jf(n,0,1+(e<=Vf?Vf:Vf+7)-e)}function QR(n){let e=n.getDay(),t=e===0?-3:Vf-e;return jf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function yy(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=QR(t),o=F$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return br(i,n,Hf(r,gs.MinusSign))}}function Lf(n,e=!1){return function(t,r){let s=QR(t).getFullYear();return br(s,n,Hf(r,gs.MinusSign),e)}}var wy={};function L$(n){if(wy[n])return wy[n];let e;switch(n){case"G":case"GG":case"GGG":e=it($e.Eras,et.Abbreviated);break;case"GGGG":e=it($e.Eras,et.Wide);break;case"GGGGG":e=it($e.Eras,et.Narrow);break;case"y":e=Ft(He.FullYear,1,0,!1,!0);break;case"yy":e=Ft(He.FullYear,2,0,!0,!0);break;case"yyy":e=Ft(He.FullYear,3,0,!1,!0);break;case"yyyy":e=Ft(He.FullYear,4,0,!1,!0);break;case"Y":e=Lf(1);break;case"YY":e=Lf(2,!0);break;case"YYY":e=Lf(3);break;case"YYYY":e=Lf(4);break;case"M":case"L":e=Ft(He.Month,1,1);break;case"MM":case"LL":e=Ft(He.Month,2,1);break;case"MMM":e=it($e.Months,et.Abbreviated);break;case"MMMM":e=it($e.Months,et.Wide);break;case"MMMMM":e=it($e.Months,et.Narrow);break;case"LLL":e=it($e.Months,et.Abbreviated,En.Standalone);break;case"LLLL":e=it($e.Months,et.Wide,En.Standalone);break;case"LLLLL":e=it($e.Months,et.Narrow,En.Standalone);break;case"w":e=yy(1);break;case"ww":e=yy(2);break;case"W":e=yy(1,!0);break;case"d":e=Ft(He.Date,1);break;case"dd":e=Ft(He.Date,2);break;case"c":case"cc":e=Ft(He.Day,1);break;case"ccc":e=it($e.Days,et.Abbreviated,En.Standalone);break;case"cccc":e=it($e.Days,et.Wide,En.Standalone);break;case"ccccc":e=it($e.Days,et.Narrow,En.Standalone);break;case"cccccc":e=it($e.Days,et.Short,En.Standalone);break;case"E":case"EE":case"EEE":e=it($e.Days,et.Abbreviated);break;case"EEEE":e=it($e.Days,et.Wide);break;case"EEEEE":e=it($e.Days,et.Narrow);break;case"EEEEEE":e=it($e.Days,et.Short);break;case"a":case"aa":case"aaa":e=it($e.DayPeriods,et.Abbreviated);break;case"aaaa":e=it($e.DayPeriods,et.Wide);break;case"aaaaa":e=it($e.DayPeriods,et.Narrow);break;case"b":case"bb":case"bbb":e=it($e.DayPeriods,et.Abbreviated,En.Standalone,!0);break;case"bbbb":e=it($e.DayPeriods,et.Wide,En.Standalone,!0);break;case"bbbbb":e=it($e.DayPeriods,et.Narrow,En.Standalone,!0);break;case"B":case"BB":case"BBB":e=it($e.DayPeriods,et.Abbreviated,En.Format,!0);break;case"BBBB":e=it($e.DayPeriods,et.Wide,En.Format,!0);break;case"BBBBB":e=it($e.DayPeriods,et.Narrow,En.Format,!0);break;case"h":e=Ft(He.Hours,1,-12);break;case"hh":e=Ft(He.Hours,2,-12);break;case"H":e=Ft(He.Hours,1);break;case"HH":e=Ft(He.Hours,2);break;case"m":e=Ft(He.Minutes,1);break;case"mm":e=Ft(He.Minutes,2);break;case"s":e=Ft(He.Seconds,1);break;case"ss":e=Ft(He.Seconds,2);break;case"S":e=Ft(He.FractionalSeconds,1);break;case"SS":e=Ft(He.FractionalSeconds,2);break;case"SSS":e=Ft(He.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Ff(Si.Short);break;case"ZZZZZ":e=Ff(Si.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Ff(Si.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Ff(Si.Long);break;default:return null}return wy[n]=e,e}function YR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function V$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function U$(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=YR(e,i);return V$(n,r*(s-i))}function j$(n){if(jR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return jf(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(R$))return B$(r)}let e=new Date(n);if(!jR(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function B$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),u=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,u),e}function jR(n){return n instanceof Date&&!isNaN(n.valueOf())}function ZR(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Iy=/\s+/,BR=[],ht=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=BR,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(Iy):BR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Iy):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Iy).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(Ae(zr),Ae(Ii))}}static{this.\u0275dir=mt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var Ey=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ar=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new Ey(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),$R(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);$R(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Ae($l),Ae(fy),Ae(vy))}}static{this.\u0275dir=mt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function $R(n,e){n.context.$implicit=e.item}function $$(n,e){return new Z(2100,!1)}var H$="mediumDate",q$=new H(""),G$=new H(""),Pa=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??H$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return N$(t,o,s||this.locale,a)}catch(o){throw $$(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(Ae(xf,16),Ae(q$,24),Ae(G$,24))}}static{this.\u0275pipe=UD({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var Cy="browser",z$="server";function Ty(n){return n===Cy}function by(n){return n===z$}var Bf=class{};var Ay=class extends Uf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ry=class n extends Ay{static makeCurrent(){qR(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=W$();return t==null?null:K$(t)}resetBaseElement(){zl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ZR(document.cookie,e)}},zl=null;function W$(){return zl=zl||document.querySelector("base"),zl?zl.getAttribute("href"):null}function K$(n){return new URL(n,document.baseURI).pathname}var Q$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),xy=new H(""),tx=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ae(xy),ae(oe))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),qf=class{constructor(e){this._doc=e}},Sy="ng-app-id",nx=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=by(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Sy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(Sy),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(Sy,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ae(or),ae(X_),ae(ty,8),ae(wr))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),Dy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},My=/%COMP%/g,rx="%COMP%",Y$=`_nghost-${rx}`,Z$=`_ngcontent-${rx}`,J$=!0,X$=new H("",{providedIn:"root",factory:()=>J$});function eH(n){return Z$.replace(My,n)}function tH(n){return Y$.replace(My,n)}function ix(n,e){return e.map(t=>t.replace(My,n))}var JR=(()=>{class n{constructor(t,r,i,s,o,a,c,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=by(a),this.defaultRenderer=new Wl(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===$r.ShadowDom&&(r=be(B({},r),{encapsulation:$r.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Gf?i.applyToHost(t):i instanceof Kl&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case $r.Emulated:s=new Gf(c,u,r,this.appId,d,o,a,f);break;case $r.ShadowDom:return new Ny(c,u,t,r,o,a,this.nonce,f);default:s=new Kl(c,u,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ae(tx),ae(nx),ae(X_),ae(X$),ae(or),ae(wr),ae(oe),ae(ty))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),Wl=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Dy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(XR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(XR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Z(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Dy[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Dy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(pi.DashCase|pi.Important)?e.style.setProperty(t,r,i&pi.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&pi.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Di().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function XR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Ny=class extends Wl{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=ix(i.id,i.styles);for(let d of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Kl=class extends Wl{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?ix(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gf=class extends Kl{constructor(e,t,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,t,r,s,o,a,c,u),this.contentAttr=eH(u),this.hostAttr=tH(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},nH=(()=>{class n extends qf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ae(or))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})(),ex=["alt","control","meta","shift"],rH={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},iH={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},sH=(()=>{class n extends qf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),ex.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=rH[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),ex.forEach(o=>{if(o!==i){let a=iH[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ae(or))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac})}}return n})();function sx(n,e){return LR(B({rootComponent:n},oH(e)))}function oH(n){return{appProviders:[...dH,...n?.providers??[]],platformProviders:uH}}function aH(){Ry.makeCurrent()}function cH(){return new Gr}function lH(){return UA(document),document}var uH=[{provide:wr,useValue:Cy},{provide:ey,useValue:aH,multi:!0},{provide:or,useFactory:lH,deps:[]}];var dH=[{provide:mf,useValue:"root"},{provide:Gr,useFactory:cH,deps:[]},{provide:xy,useClass:nH,multi:!0,deps:[or,oe,wr]},{provide:xy,useClass:sH,multi:!0,deps:[or]},JR,nx,tx,{provide:Ra,useExisting:JR},{provide:Bf,useClass:Q$,deps:[]},[]];var zf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ae(or))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ye="primary",hu=Symbol("RouteTitle"),Ly=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ua(n){return new Ly(n)}function hH(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function fH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Qr(n[t],e[t]))return!1;return!0}function Qr(n,e){let t=n?Vy(n):void 0,r=e?Vy(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!px(n[i],e[i]))return!1;return!0}function Vy(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function px(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function mx(n){return n.length>0?n[n.length-1]:null}function vs(n){return Iv(n)?n:ao(n)?dt(Promise.resolve(n)):ie(n)}var pH={exact:vx,subset:_x},gx={exact:mH,subset:gH,ignored:()=>!0};function ax(n,e,t){return pH[t.paths](n.root,e.root,t.matrixParams)&&gx[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function mH(n,e){return Qr(n,e)}function vx(n,e,t){if(!ho(n.segments,e.segments)||!Qf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!vx(n.children[r],e.children[r],t))return!1;return!0}function gH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>px(n[t],e[t]))}function _x(n,e,t){return yx(n,e,e.segments,t)}function yx(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!ho(i,t)||e.hasChildren()||!Qf(i,t,r))}else if(n.segments.length===t.length){if(!ho(n.segments,t)||!Qf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!_x(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ho(n.segments,i)||!Qf(n.segments,i,r)||!n.children[ye]?!1:yx(n.children[ye],e,s,r)}}function Qf(n,e,t){return e.every((r,i)=>gx[t](n[i].parameters,r.parameters))}var Ri=class{constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ua(this.queryParams),this._queryParamMap}toString(){return yH.serialize(this)}},ze=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Yf(this)}},uo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ua(this.parameters),this._parameterMap}toString(){return Ix(this)}};function vH(n,e){return ho(n,e)&&n.every((t,r)=>Qr(t.parameters,e[r].parameters))}function ho(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function _H(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ye&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ye&&(t=t.concat(e(i,r)))}),t}var lw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>new tu,providedIn:"root"})}}return n})(),tu=class{parse(e){let t=new jy(e);return new Ri(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ql(e.root,!0)}`,r=EH(e.queryParams),i=typeof e.fragment=="string"?`#${wH(e.fragment)}`:"";return`${t}${r}${i}`}},yH=new tu;function Yf(n){return n.segments.map(e=>Ix(e)).join("/")}function Ql(n,e){if(!n.hasChildren())return Yf(n);if(e){let t=n.children[ye]?Ql(n.children[ye],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ye&&r.push(`${i}:${Ql(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=_H(n,(r,i)=>i===ye?[Ql(n.children[ye],!1)]:[`${i}:${Ql(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ye]!=null?`${Yf(n)}/${t[0]}`:`${Yf(n)}/(${t.join("//")})`}}function wx(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Wf(n){return wx(n).replace(/%3B/gi,";")}function wH(n){return encodeURI(n)}function Uy(n){return wx(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zf(n){return decodeURIComponent(n)}function cx(n){return Zf(n.replace(/\+/g,"%20"))}function Ix(n){return`${Uy(n.path)}${IH(n.parameters)}`}function IH(n){return Object.entries(n).map(([e,t])=>`;${Uy(e)}=${Uy(t)}`).join("")}function EH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Wf(t)}=${Wf(i)}`).join("&"):`${Wf(t)}=${Wf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var CH=/^[^\/()?;#]+/;function Py(n){let e=n.match(CH);return e?e[0]:""}var TH=/^[^\/()?;=#]+/;function bH(n){let e=n.match(TH);return e?e[0]:""}var SH=/^[^=?&#]+/;function DH(n){let e=n.match(SH);return e?e[0]:""}var AH=/^[^&#]+/;function RH(n){let e=n.match(AH);return e?e[0]:""}var jy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ye]=new ze(e,t)),r}parseSegment(){let e=Py(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(e),new uo(Zf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=bH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Py(this.remaining);i&&(r=i,this.capture(r))}e[Zf(t)]=Zf(r)}parseQueryParam(e){let t=DH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=RH(this.remaining);o&&(r=o,this.capture(r))}let i=cx(t),s=cx(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Py(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Z(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ye);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ye]:new ze([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Z(4011,!1)}};function Ex(n){return n.segments.length>0?new ze([],{[ye]:n}):n}function Cx(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=Cx(i);if(r===ye&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new ze(n.segments,e);return xH(t)}function xH(n){if(n.numberOfChildren===1&&n.children[ye]){let e=n.children[ye];return new ze(n.segments.concat(e.segments),e.children)}return n}function nu(n){return n instanceof Ri}function NH(n,e,t=null,r=null){let i=Tx(n);return bx(i,e,t,r)}function Tx(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new ze(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=Ex(r);return e??i}function bx(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Oy(i,i,i,t,r);let s=MH(e);if(s.toRoot())return Oy(i,i,new ze([],{}),t,r);let o=PH(s,i,n),a=o.processChildren?Jl(o.segmentGroup,o.index,s.commands):Dx(o.segmentGroup,o.index,s.commands);return Oy(i,o.segmentGroup,a,t,r)}function Jf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ru(n){return typeof n=="object"&&n!=null&&n.outlets}function Oy(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(d=>`${d}`):`${u}`});let o;n===e?o=t:o=Sx(n,e,t);let a=Ex(Cx(o));return new Ri(a,s,i)}function Sx(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=Sx(s,e,t)}),new ze(n.segments,r)}var Xf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Jf(r[0]))throw new Z(4003,!1);let i=r.find(ru);if(i&&i!==mx(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function MH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Xf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Xf(t,e,r)}var Fa=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function PH(n,e,t){if(n.isAbsolute)return new Fa(e,!0,0);if(!t)return new Fa(e,!1,NaN);if(t.parent===null)return new Fa(t,!0,0);let r=Jf(n.commands[0])?0:1,i=t.segments.length-1+r;return OH(t,i,n.numberOfDoubleDots)}function OH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Z(4005,!1);i=r.segments.length}return new Fa(r,!1,i-s)}function kH(n){return ru(n[0])?n[0].outlets:{[ye]:n}}function Dx(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return Jl(n,e,t);let r=FH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new ze(n.segments.slice(0,r.pathIndex),{});return s.children[ye]=new ze(n.segments.slice(r.pathIndex),n.children),Jl(s,0,i)}else return r.match&&i.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?By(n,e,t):r.match?Jl(n,0,i):By(n,e,t)}function Jl(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=kH(t),i={};if(Object.keys(r).some(s=>s!==ye)&&n.children[ye]&&n.numberOfChildren===1&&n.children[ye].segments.length===0){let s=Jl(n.children[ye],e,t);return new ze(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Dx(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ze(n.segments,i)}}function FH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(ru(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!ux(c,u,o))return s;r+=2}else{if(!ux(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function By(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(ru(s)){let c=LH(s.outlets);return new ze(r,c)}if(i===0&&Jf(t[0])){let c=n.segments[e];r.push(new uo(c.path,lx(t[0]))),i++;continue}let o=ru(s)?s.outlets[ye]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Jf(a)?(r.push(new uo(o,lx(a))),i+=2):(r.push(new uo(o,{})),i++)}return new ze(r,{})}function LH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=By(new ze([],{}),0,r))}),e}function lx(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function ux(n,e,t){return n==t.path&&Qr(e,t.parameters)}var Xl="imperative",en=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(en||{}),cr=class{constructor(e,t){this.id=e,this.url=t}},iu=class extends cr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=en.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fo=class extends cr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=en.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},qn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(qn||{}),$y=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}($y||{}),Ai=class extends cr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=en.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},po=class extends cr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=en.NavigationSkipped}},su=class extends cr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=en.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ep=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hy=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qy=class extends cr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=en.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gy=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends cr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=en.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ky=class{constructor(e){this.route=e,this.type=en.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qy=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yy=class{constructor(e){this.snapshot=e,this.type=en.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zy=class{constructor(e){this.snapshot=e,this.type=en.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ou=class{constructor(e){this.snapshot=e,this.type=en.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var au=class{},ja=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function VH(n,e){return n.providers&&!n._injector&&(n._injector=py(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Sr(n){return n.outlet||ye}function UH(n,e){let t=n.filter(r=>Sr(r)===e);return t.push(...n.filter(r=>Sr(r)!==e)),t}function fu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Jy=class{get injector(){return fu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new ap(this.rootInjector),this.attachRef=null}},ap=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Jy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ae(Jn))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),tp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Xy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Xy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=ew(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ew(e,this._root).map(t=>t.value)}};function Xy(n,e){if(n===e.value)return e;for(let t of e.children){let r=Xy(n,t);if(r)return r}return null}function ew(n,e){if(n===e.value)return[e];for(let t of e.children){let r=ew(n,t);if(r.length)return r.unshift(e),r}return[]}var Hn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ka(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var np=class extends tp{constructor(e,t){super(e),this.snapshot=t,uw(this,e)}toString(){return this.snapshot.toString()}};function Ax(n){let e=jH(n),t=new Xt([new uo("",{})]),r=new Xt({}),i=new Xt({}),s=new Xt({}),o=new Xt(""),a=new Ba(t,r,s,o,i,ye,n,e.root);return a.snapshot=e.root,new np(new Hn(a,[]),e)}function jH(n){let e={},t={},r={},i="",s=new La([],e,r,i,t,ye,n,null,{});return new ip("",new Hn(s,[]))}var Ba=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(u=>u[hu]))??ie(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>Ua(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>Ua(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function rp(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:B(B({},e.params),n.params),data:B(B({},e.data),n.data),resolve:B(B(B(B({},n.data),e.data),i?.data),n._resolvedData)}:r={params:B({},n.params),data:B({},n.data),resolve:B(B({},n.data),n._resolvedData??{})},i&&xx(i)&&(r.resolve[hu]=i.title),r}var La=class{get title(){return this.data?.[hu]}constructor(e,t,r,i,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ua(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ua(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ip=class extends tp{constructor(e,t){super(t),this.url=e,uw(this,t)}toString(){return Rx(this._root)}};function uw(n,e){e.value._routerState=n,e.children.forEach(t=>uw(n,t))}function Rx(n){let e=n.children.length>0?` { ${n.children.map(Rx).join(", ")} } `:"";return`${n.value}${e}`}function ky(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Qr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Qr(e.params,t.params)||n.paramsSubject.next(t.params),fH(e.url,t.url)||n.urlSubject.next(t.url),Qr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function tw(n,e){let t=Qr(n.params,e.params)&&vH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||tw(n.parent,e.parent))}function xx(n){return typeof n.title=="string"||n.title===null}var dw=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ye,this.activateEvents=new Ot,this.deactivateEvents=new Ot,this.attachEvents=new Ot,this.detachEvents=new Ot,this.parentContexts=M(ap),this.location=M($l),this.changeDetector=M(ms),this.inputBinder=M(hw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new nw(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=mt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[wi]})}}return n})(),nw=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ba?this.route:e===ap?this.childContexts:this.parent.get(e,t)}},hw=new H("");function BH(n,e,t){let r=cu(n,e._root,t?t._root:void 0);return new np(r,e)}function cu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=$H(n,e,t);return new Hn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>cu(n,a)),o}}let r=HH(e.value),i=e.children.map(s=>cu(n,s));return new Hn(r,i)}}function $H(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return cu(n,r,i);return cu(n,r)})}function HH(n){return new Ba(new Xt(n.url),new Xt(n.params),new Xt(n.queryParams),new Xt(n.fragment),new Xt(n.data),n.outlet,n.component,n)}var lu=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Nx="ngNavigationCancelingError";function sp(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=nu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Mx(!1,qn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Mx(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Nx]=!0,t.cancellationCode=e,t}function qH(n){return Px(n)&&nu(n.url)}function Px(n){return!!n&&n[Nx]}var GH=(n,e,t,r)=>Y(i=>(new rw(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),rw=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ky(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ka(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ka(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ka(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ka(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new ou(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Yy(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(ky(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),ky(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},op=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Va=class{constructor(e,t){this.component=e,this.route=t}};function zH(n,e,t){let r=n._root,i=e?e._root:null;return Yl(r,i,t,[r.value])}function WH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ha(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!SD(n)?n:e.get(n):r}function Yl(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ka(e);return n.children.forEach(o=>{KH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>eu(a,t.getContext(o),i)),i}function KH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=QH(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new op(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Yl(n,e,a?a.children:null,r,i):Yl(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Va(a.outlet.component,o))}else o&&eu(e,a,i),i.canActivateChecks.push(new op(r)),s.component?Yl(n,null,a?a.children:null,r,i):Yl(n,null,t,r,i);return i}function QH(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ho(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ho(n.url,e.url)||!Qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tw(n,e)||!Qr(n.queryParams,e.queryParams);case"paramsChange":default:return!tw(n,e)}}function eu(n,e,t){let r=ka(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?eu(o,e.children.getContext(s),t):eu(o,null,t):eu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Va(e.outlet.component,i)):t.canDeactivateChecks.push(new Va(null,i)):t.canDeactivateChecks.push(new Va(null,i))}function pu(n){return typeof n=="function"}function YH(n){return typeof n=="boolean"}function ZH(n){return n&&pu(n.canLoad)}function JH(n){return n&&pu(n.canActivate)}function XH(n){return n&&pu(n.canActivateChild)}function eq(n){return n&&pu(n.canDeactivate)}function tq(n){return n&&pu(n.canMatch)}function Ox(n){return n instanceof di||n?.name==="EmptyError"}var Kf=Symbol("INITIAL_VALUE");function $a(){return An(n=>We(n.map(e=>e.pipe(hi(1),ma(Kf)))).pipe(Y(e=>{for(let t of e)if(t!==!0){if(t===Kf)return Kf;if(t===!1||nq(t))return t}return!0}),yn(e=>e!==Kf),hi(1)))}function nq(n){return nu(n)||n instanceof lu}function rq(n,e){return At(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?ie(be(B({},t),{guardsResult:!0})):iq(o,r,i,n).pipe(At(a=>a&&YH(a)?sq(r,s,n,e):ie(a)),Y(a=>be(B({},t),{guardsResult:a})))})}function iq(n,e,t,r){return dt(n).pipe(At(i=>uq(i.component,i.route,t,e,r)),Ur(i=>i!==!0,!0))}function sq(n,e,t,r){return dt(e).pipe(Ws(i=>fa(aq(i.route.parent,r),oq(i.route,r),lq(n,i.path,t),cq(n,i.route,t))),Ur(i=>i!==!0,!0))}function oq(n,e){return n!==null&&e&&e(new Zy(n)),ie(!0)}function aq(n,e){return n!==null&&e&&e(new Qy(n)),ie(!0)}function cq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ie(!0);let i=r.map(s=>Sh(()=>{let o=fu(e)??t,a=Ha(s,o),c=JH(a)?a.canActivate(e,n):vi(o,()=>a(e,n));return vs(c).pipe(Ur())}));return ie(i).pipe($a())}function lq(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>WH(o)).filter(o=>o!==null).map(o=>Sh(()=>{let a=o.guards.map(c=>{let u=fu(o.node)??t,d=Ha(c,u),f=XH(d)?d.canActivateChild(r,n):vi(u,()=>d(r,n));return vs(f).pipe(Ur())});return ie(a).pipe($a())}));return ie(s).pipe($a())}function uq(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(a=>{let c=fu(e)??i,u=Ha(a,c),d=eq(u)?u.canDeactivate(n,e,t,r):vi(c,()=>u(n,e,t,r));return vs(d).pipe(Ur())});return ie(o).pipe($a())}function dq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return ie(!0);let s=i.map(o=>{let a=Ha(o,n),c=ZH(a)?a.canLoad(e,t):vi(n,()=>a(e,t));return vs(c)});return ie(s).pipe($a(),kx(r))}function kx(n){return oh(qt(e=>{if(typeof e!="boolean")throw sp(n,e)}),Y(e=>e===!0))}function hq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return ie(!0);let s=i.map(o=>{let a=Ha(o,n),c=tq(a)?a.canMatch(e,t):vi(n,()=>a(e,t));return vs(c)});return ie(s).pipe($a(),kx(r))}var uu=class{constructor(e){this.segmentGroup=e||null}},du=class extends Error{constructor(e){super(),this.urlTree=e}};function Oa(n){return ha(new uu(n))}function fq(n){return ha(new Z(4e3,!1))}function pq(n){return ha(Mx(!1,qn.GuardRejected))}var iw=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ie(r);if(i.numberOfChildren>1||!i.children[ye])return fq(`${e.redirectTo}`);i=i.children[ye]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,params:v,data:w,title:P}=i,x=vi(s,()=>a({params:v,data:w,queryParams:c,fragment:u,routeConfig:d,url:f,outlet:m,title:P}));if(x instanceof Ri)throw new du(x);t=x}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new du(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Ri(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ze(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Z(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},sw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function mq(n,e,t,r,i){let s=Fx(n,e,t);return s.matched?(r=VH(e,r),hq(r,e,t,i).pipe(Y(o=>o===!0?s:B({},sw)))):ie(s)}function Fx(n,e,t){if(e.path==="**")return gq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?B({},sw):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||hH)(t,n,e);if(!i)return B({},sw);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?B(B({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function gq(n){return{matched:!0,parameters:n.length>0?mx(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function dx(n,e,t,r){return t.length>0&&yq(n,t,r)?{segmentGroup:new ze(e,_q(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&wq(n,t,r)?{segmentGroup:new ze(n.segments,vq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function vq(n,e,t,r){let i={};for(let s of t)if(cp(n,e,s)&&!r[Sr(s)]){let o=new ze([],{});i[Sr(s)]=o}return B(B({},r),i)}function _q(n,e){let t={};t[ye]=e;for(let r of n)if(r.path===""&&Sr(r)!==ye){let i=new ze([],{});t[Sr(r)]=i}return t}function yq(n,e,t){return t.some(r=>cp(n,e,r)&&Sr(r)!==ye)}function wq(n,e,t){return t.some(r=>cp(n,e,r))}function cp(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Iq(n,e,t){return e.length===0&&!n.children[t]}var ow=class{};function Eq(n,e,t,r,i,s,o="emptyOnly"){return new aw(n,e,t,r,i,o,s).recognize()}var Cq=31,aw=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new iw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Z(4002,`'${e.segmentGroup}'`)}recognize(){let e=dx(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:t,rootSnapshot:r})=>{let i=new Hn(r,t),s=new ip("",i),o=NH(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new La([],Object.freeze({}),Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ye,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ye,t).pipe(Y(r=>({children:r,rootSnapshot:t})),es(r=>{if(r instanceof du)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof uu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(Y(o=>o instanceof Hn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return dt(s).pipe(Ws(o=>{let a=r.children[o],c=UH(t,o);return this.processSegmentGroup(e,c,a,o,i)}),xh((o,a)=>(o.push(...a),o)),ts(null),Dv(),At(o=>{if(o===null)return Oa(r);let a=Lx(o);return Tq(a),ie(a)}))}processSegment(e,t,r,i,s,o,a){return dt(t).pipe(Ws(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(es(u=>{if(u instanceof uu)return ie(null);throw u}))),Ur(c=>!!c),es(c=>{if(Ox(c))return Iq(r,i,s)?ie(new ow):Oa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return Sr(r)!==o&&(o===ye||!cp(i,s,r))?Oa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Oa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:u,consumedSegments:d,positionalParamSegments:f,remainingSegments:m}=Fx(t,i,s);if(!c)return Oa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Cq&&(this.allowRedirects=!1));let v=new La(s,u,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,hx(i),Sr(i),i.component??i._loadedComponent??null,i,fx(i)),w=rp(v,a,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let P=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,v,e);return this.applyRedirects.lineralizeSegments(i,P).pipe(At(x=>this.processSegment(e,r,t,x.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=mq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(An(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(An(({routes:u})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:v}=c,w=new La(m,f,Object.freeze(B({},this.urlTree.queryParams)),this.urlTree.fragment,hx(r),Sr(r),r.component??r._loadedComponent??null,r,fx(r)),P=rp(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(P.params),w.data=Object.freeze(P.data);let{segmentGroup:x,slicedSegments:L}=dx(t,m,v,u);if(L.length===0&&x.hasChildren())return this.processChildren(d,u,x,w).pipe(Y(Q=>new Hn(w,Q)));if(u.length===0&&L.length===0)return ie(new Hn(w,[]));let q=Sr(r)===s;return this.processSegment(d,u,x,L,q?ye:s,!0,w).pipe(Y(Q=>new Hn(w,Q instanceof Hn?[Q]:[])))}))):Oa(t)))}getChildConfig(e,t,r){return t.children?ie({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ie({routes:t._loadedRoutes,injector:t._loadedInjector}):dq(e,t,r,this.urlSerializer).pipe(At(i=>i?this.configLoader.loadChildren(e,t).pipe(qt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):pq(t))):ie({routes:[],injector:e})}};function Tq(n){n.sort((e,t)=>e.value.outlet===ye?-1:t.value.outlet===ye?1:e.value.outlet.localeCompare(t.value.outlet))}function bq(n){let e=n.value.routeConfig;return e&&e.path===""}function Lx(n){let e=[],t=new Set;for(let r of n){if(!bq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Lx(r.children);e.push(new Hn(r.value,i))}return e.filter(r=>!t.has(r))}function hx(n){return n.data||{}}function fx(n){return n.resolve||{}}function Sq(n,e,t,r,i,s){return At(o=>Eq(n,e,t,r,o.extractedUrl,i,s).pipe(Y(({state:a,tree:c})=>be(B({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function Dq(n,e){return At(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ie(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of Vx(c))o.add(u);let a=0;return dt(o).pipe(Ws(c=>s.has(c)?Aq(c,r,n,e):(c.data=rp(c,c.parent,n).resolve,ie(void 0))),qt(()=>a++),pa(1),At(c=>a===o.size?ie(t):jn))})}function Vx(n){let e=n.children.map(t=>Vx(t)).flat();return[n,...e]}function Aq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!xx(i)&&(s[hu]=i.title),Rq(s,n,e,r).pipe(Y(o=>(n._resolvedData=o,n.data=rp(n,n.parent,t).resolve,null)))}function Rq(n,e,t,r){let i=Vy(n);if(i.length===0)return ie({});let s={};return dt(i).pipe(At(o=>xq(n[o],e,t,r).pipe(Ur(),qt(a=>{if(a instanceof lu)throw sp(new tu,a);s[o]=a}))),pa(1),bv(s),es(o=>Ox(o)?jn:ha(o)))}function xq(n,e,t,r){let i=fu(e)??r,s=Ha(n,i),o=s.resolve?s.resolve(e,t):vi(i,()=>s(e,t));return vs(o)}function Fy(n){return An(e=>{let t=n(e);return t?dt(t).pipe(Y(()=>e)):ie(e)})}var Ux=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ye);return r}getResolvedTitleForRoute(t){return t.data[hu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>M(Nq),providedIn:"root"})}}return n})(),Nq=(()=>{class n extends Ux{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ae(zf))}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),fw=new H("",{providedIn:"root",factory:()=>({})}),pw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=qe({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ge],decls:1,vars:0,template:function(r,i){r&1&&Ce(0,"router-outlet")},dependencies:[dw],encapsulation:2})}}return n})();function mw(n){let e=n.children&&n.children.map(mw),t=e?be(B({},n),{children:e}):B({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ye&&(t.component=pw),t}var gw=new H(""),Mq=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(gy)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ie(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=vs(t.loadComponent()).pipe(Y(jx),qt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Sl(()=>{this.componentLoaders.delete(t)})),i=new aa(r,()=>new pt).pipe(oa());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Pq(r,this.compiler,t,this.onLoadEndListener).pipe(Sl(()=>{this.childrenLoaders.delete(r)})),o=new aa(s,()=>new pt).pipe(oa());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Pq(n,e,t,r){return vs(n.loadChildren()).pipe(Y(jx),At(i=>i instanceof Fl||Array.isArray(i)?ie(i):dt(e.compileModuleAsync(i))),Y(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(gw,[],{optional:!0,self:!0}).flat()),{routes:o.map(mw),injector:s}}))}function Oq(n){return n&&typeof n=="object"&&"default"in n}function jx(n){return Oq(n)?n.default:n}var vw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>M(kq),providedIn:"root"})}}return n})(),kq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fq=new H("");var Lq=new H(""),Vq=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pt,this.transitionAbortSubject=new pt,this.configLoader=M(Mq),this.environmentInjector=M(Jn),this.urlSerializer=M(lw),this.rootContexts=M(ap),this.location=M(Gl),this.inputBindingEnabled=M(hw,{optional:!0})!==null,this.titleStrategy=M(Ux),this.options=M(fw,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(vw),this.createViewTransition=M(Fq,{optional:!0}),this.navigationErrorHandler=M(Lq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Wy(i)),r=i=>this.events.next(new Ky(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(be(B(B({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Xt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Xl,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yn(s=>s.id!==0),Y(s=>be(B({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),An(s=>{let o=!1,a=!1;return ie(s).pipe(An(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",qn.SupersededByNewNavigation),jn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?be(B({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!u&&d!=="reload"){let f="";return this.events.next(new po(c.id,this.urlSerializer.serialize(c.rawUrl),f,$y.IgnoredSameUrlNavigation)),c.resolve(!1),jn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ie(c).pipe(An(f=>{let m=this.transitions?.getValue();return this.events.next(new iu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),m!==this.transitions?.getValue()?jn:Promise.resolve(f)}),Sq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),qt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=be(B({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let m=new ep(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:m,source:v,restoredState:w,extras:P}=c,x=new iu(f,this.urlSerializer.serialize(m),v,w);this.events.next(x);let L=Ax(this.rootComponentType).snapshot;return this.currentTransition=s=be(B({},c),{targetSnapshot:L,urlAfterRedirects:m,extras:be(B({},P),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,ie(s)}else{let f="";return this.events.next(new po(c.id,this.urlSerializer.serialize(c.extractedUrl),f,$y.IgnoredByUrlHandlingStrategy)),c.resolve(!1),jn}}),qt(c=>{let u=new Hy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Y(c=>(this.currentTransition=s=be(B({},c),{guards:zH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),rq(this.environmentInjector,c=>this.events.next(c)),qt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw sp(this.urlSerializer,c.guardsResult);let u=new qy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),yn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",qn.GuardRejected),!1)),Fy(c=>{if(c.guards.canActivateChecks.length)return ie(c).pipe(qt(u=>{let d=new Gy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),An(u=>{let d=!1;return ie(u).pipe(Dq(this.paramsInheritanceStrategy,this.environmentInjector),qt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",qn.NoDataFromResolver)}}))}),qt(u=>{let d=new zy(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Fy(c=>{let u=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(qt(m=>{d.component=m}),Y(()=>{})));for(let m of d.children)f.push(...u(m));return f};return We(u(c.targetSnapshot.root)).pipe(ts(null),hi(1))}),Fy(()=>this.afterPreactivation()),An(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?dt(d).pipe(Y(()=>s)):ie(s)}),Y(c=>{let u=BH(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=be(B({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),qt(()=>{this.events.next(new au)}),GH(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),hi(1),qt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fo(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Wt(this.transitionAbortSubject.pipe(qt(c=>{throw c}))),Sl(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",qn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),es(c=>{if(a=!0,Px(c))this.events.next(new Ai(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),qH(c)?this.events.next(new ja(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let u=new su(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=vi(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof lu){let{message:f,cancellationCode:m}=sp(this.urlSerializer,d);this.events.next(new Ai(s.id,this.urlSerializer.serialize(s.extractedUrl),f,m)),this.events.next(new ja(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let f=t.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return jn}))}))}cancelNavigationTransition(t,r,i){let s=new Ai(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uq(n){return n!==Xl}var jq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>M(Bq),providedIn:"root"})}}return n})(),cw=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Bq=(()=>{class n extends cw{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bx=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:()=>M($q),providedIn:"root"})}}return n})(),$q=(()=>{class n extends Bx{constructor(){super(...arguments),this.location=M(Gl),this.urlSerializer=M(lw),this.options=M(fw,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(vw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ri,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Ax(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof iu)this.stateMemento=this.createStateMemento();else if(t instanceof po)this.rawUrlTree=r.initialUrl;else if(t instanceof ep){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof au?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Ai&&(t.code===qn.GuardRejected||t.code===qn.NoDataFromResolver)?this.restoreHistory(r):t instanceof su?this.restoreHistory(r,!0):t instanceof fo&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Ri?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=B(B({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=B(B({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Zl=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Zl||{});function Hq(n,e){n.events.pipe(yn(t=>t instanceof fo||t instanceof Ai||t instanceof su||t instanceof po),Y(t=>t instanceof fo||t instanceof po?Zl.COMPLETE:(t instanceof Ai?t.code===qn.Redirect||t.code===qn.SupersededByNewNavigation:!1)?Zl.REDIRECTING:Zl.FAILED),yn(t=>t!==Zl.REDIRECTING),hi(1)).subscribe(()=>{e()})}function qq(n){throw n}var Gq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lp=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=M(Rf),this.stateManager=M(Bx),this.options=M(fw,{optional:!0})||{},this.pendingTasks=M(so),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(Vq),this.urlSerializer=M(lw),this.location=M(Gl),this.urlHandlingStrategy=M(vw),this._events=new pt,this.errorHandler=this.options.errorHandler||qq,this.navigated=!1,this.routeReuseStrategy=M(jq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(gw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(hw,{optional:!0}),this.eventsSubscription=new Et,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ai&&r.code!==qn.Redirect&&r.code!==qn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fo)this.navigated=!0;else if(r instanceof ja){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=B({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Uq(i.source)},o);this.scheduleNavigation(a,Xl,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Kq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Xl,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=B({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(mw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=B(B({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let m=i?i.snapshot:this.routerState.snapshot.root;f=Tx(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return bx(f,t,d,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=nu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Xl,null,r)}navigate(t,r={skipLocationChange:!1}){return Wq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=B({},Gq):r===!1?i=B({},zq):i=r,nu(t))return ax(this.currentUrlTree,t,i);let s=this.parseUrl(t);return ax(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((f,m)=>{a=f,c=m});let d=this.pendingTasks.add();return Hq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Wq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Z(4008,!1)}function Kq(n){return!(n instanceof au)&&!(n instanceof ja)}var Qq=new H("");function $x(n,...e){return nt([{provide:gw,multi:!0,useValue:n},[],{provide:Ba,useFactory:Yq,deps:[lp]},{provide:my,multi:!0,useFactory:Zq},e.map(t=>t.\u0275providers)])}function Yq(n){return n.routerState.root}function Zq(){let n=M(Re);return e=>{let t=n.get(co);if(e!==t.components[0])return;let r=n.get(lp),i=n.get(Jq);n.get(Xq)===1&&r.initialNavigation(),n.get(eG,null,Ie.Optional)?.setUpPreloading(),n.get(Qq,null,Ie.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Jq=new H("",{factory:()=>new pt}),Xq=new H("",{providedIn:"root",factory:()=>1});var eG=new H("");var Hx=[];var nG="firebase",rG="10.14.1";X(nG,rG,"app");var at=new gi("ANGULARFIRE2_VERSION"),Ga=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function Lt(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var xt=(n,e)=>{let t=e?[e]:Kd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},On=class{constructor(){return xt(iG)}},iG="app-check";function qa(){}var up=class{zone;delegate;constructor(e,t=yv){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},_w=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qa,{},qa,qa)),t.pipe(qt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Tt=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new up(Zone.current)),this.insideAngular=t.run(()=>new up(Zone.current,da)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ae(oe))};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dp(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function sG(n){return dp().ngZone.runOutsideAngular(()=>n())}function mo(n){return dp().ngZone.run(()=>n())}function oG(n){return aG(dp())(n)}function aG(n){return function(t){return t=t.lift(new _w(n.ngZone)),t.pipe(Xi(n.outsideAngular),Ji(n.insideAngular))}}var cG=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),mo(()=>n.apply(void 0,r))},Ue=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=mo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qa,{},qa,qa))),r[s]=cG(r[s],t));let i=sG(()=>n.apply(this,r));if(!e)if(i instanceof pe){let s=dp();return i.pipe(Xi(s.outsideAngular),Ji(s.insideAngular))}else return mo(()=>i);return i instanceof pe?i.pipe(oG):i instanceof Promise?mo(()=>new Promise((s,o)=>i.then(a=>mo(()=>s(a)),a=>mo(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:mo(()=>i)};var ct=class{constructor(e){return e}},_t=class{constructor(){return Kd()}};function lG(n){return n&&n.length===1?n[0]:new ct(Pt())}var yw=new H("angularfire2._apps"),uG={provide:ct,useFactory:lG,deps:[[new ue,yw]]},dG={provide:_t,deps:[[new ue,yw]]};function hG(n){return(e,t)=>{let r=t.get(wr);X("angularfire",at.full,"core"),X("angularfire",at.full,"app"),X("angular",xR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ct(i)}}function qx(n,...e){return nt([uG,dG,{provide:yw,useFactory:hG(n),multi:!0,deps:[oe,Re,Tt,...e]}])}var Gx=Ue(Zb,!0);function oN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var aN=oN,cN=new kr("auth","Firebase",oN());var vp=new Lr("@firebase/auth");function fG(n,...e){vp.logLevel<=an.WARN&&vp.warn(`Auth (${Sn}): ${n}`,...e)}function fp(n,...e){vp.logLevel<=an.ERROR&&vp.error(`Auth (${Sn}): ${n}`,...e)}function ys(n,...e){throw Uw(n,...e)}function vo(n,...e){return Uw(n,...e)}function lN(n,e,t){let r=Object.assign(Object.assign({},aN()),{[e]:t});return new kr("auth","Firebase",r).create(e,{appName:n.name})}function go(n){return lN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uw(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cN.create(n,...e)}function fe(n,e,...t){if(!n)throw Uw(e,...t)}function xi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw fp(e),new Error(e)}function ws(n,e){n||xi(e)}function Cw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pG(){return zx()==="http:"||zx()==="https:"}function zx(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function mG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pG()||dl()||"connection"in navigator)?navigator.onLine:!0}function gG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var _o=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=ul()||Gd()}get(){return mG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jw(n,e){ws(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var _p=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var vG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var _G=new _o(3e4,6e4);function Bw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Wa(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return uN(n,i,()=>_(this,null,function*(){let u={},d={};r&&(e==="GET"?d=r:u={body:JSON.stringify(r)});let f=$s(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let v=Object.assign({method:e,headers:m},u);return $b()||(v.referrerPolicy="no-referrer"),_p.fetch()(dN(n,n.config.apiHost,t,f),v)}))})}function uN(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},vG),e);try{let i=new Tw(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hp(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw hp(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw hp(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw lN(n,d,u);ys(n,d)}}catch(i){if(i instanceof bn)throw i;ys(n,"network-request-failed",{message:String(i)})}})}function yG(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){let u=yield Wa(n,e,t,r,i);return"mfaPendingCredential"in u&&ys(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function dN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?jw(n.config,i):`${n.config.apiScheme}://${i}`}var Tw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(vo(this.auth,"network-request-failed")),_G.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=vo(n,e,r);return i.customData._tokenResponse=t,i}function wG(n,e){return _(this,null,function*(){return Wa(n,"POST","/v1/accounts:delete",e)})}function hN(n,e){return _(this,null,function*(){return Wa(n,"POST","/v1/accounts:lookup",e)})}function mu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $w(n,e=!1){return _(this,null,function*(){let t=Ne(n),r=yield t.getIdToken(e),i=Hw(r);fe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:mu(ww(i.auth_time)),issuedAtTime:mu(ww(i.iat)),expirationTime:mu(ww(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function ww(n){return Number(n)*1e3}function Hw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return fp("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ub(t);return i?JSON.parse(i):(fp("Failed to decode base64 JWT payload"),null)}catch(i){return fp("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Wx(n){let e=Hw(n);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function vu(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof bn&&IG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function IG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var bw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var _u=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yp(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield vu(n,hN(t,{idToken:r}));fe(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fN(s.providerUserInfo):[],a=EG(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,d=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _u(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function qw(n){return _(this,null,function*(){let e=Ne(n);yield yp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function EG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function fN(n){return n.map(e=>{var{providerId:t}=e,r=wv(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function CG(n,e){return _(this,null,function*(){let t=yield uN(n,{},()=>_(this,null,function*(){let r=$s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=dN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_p.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function TG(n,e){return _(this,null,function*(){return Wa(n,"POST","/v2/accounts:revokeToken",Bw(n,e))})}var gu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Wx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");let t=Wx(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield CG(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(fe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(fe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return xi("not implemented")}};function _s(n,e){fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var za=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=wv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _u(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield vu(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return $w(this,e)}reload(){return qw(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield yp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(ui(this.auth.app))return Promise.reject(go(this.auth));let e=yield this.getIdToken();return yield vu(this,wG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,u,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,v=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,P=(a=t.tenantId)!==null&&a!==void 0?a:void 0,x=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,L=(u=t.createdAt)!==null&&u!==void 0?u:void 0,q=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:Q,emailVerified:ne,isAnonymous:Ze,providerData:se,stsTokenManager:b}=t;fe(Q&&b,e,"internal-error");let y=gu.fromJSON(this.name,b);fe(typeof Q=="string",e,"internal-error"),_s(f,e.name),_s(m,e.name),fe(typeof ne=="boolean",e,"internal-error"),fe(typeof Ze=="boolean",e,"internal-error"),_s(v,e.name),_s(w,e.name),_s(P,e.name),_s(x,e.name),_s(L,e.name),_s(q,e.name);let I=new n({uid:Q,auth:e,email:m,emailVerified:ne,displayName:f,isAnonymous:Ze,photoURL:w,phoneNumber:v,tenantId:P,stsTokenManager:y,createdAt:L,lastLoginAt:q});return se&&Array.isArray(se)&&(I.providerData=se.map(S=>Object.assign({},S))),x&&(I._redirectEventId=x),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new gu;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield yp(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];fe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?fN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new gu;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new _u(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var Kx=new Map;function Ni(n){ws(n instanceof Function,"Expected a class definition");let e=Kx.get(n);return e?(ws(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kx.set(n,e),e)}var bG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Sw=bG;function pp(n,e,t){return`firebase:${n}:${e}:${t}`}var wp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=pp(this.userKey,i.apiKey,s),this.fullPersistenceKey=pp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?za._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(Ni(Sw),e,r);let i=(yield Promise.all(t.map(u=>_(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Ni(Sw),o=pp(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let d=yield u._get(o);if(d){let f=za._fromJSON(e,d);u!==s&&(a=f),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(u=>_(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,r))})}};function Qx(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yN(e))return"Blackberry";if(wN(e))return"Webos";if(mN(e))return"Safari";if((e.includes("chrome/")||gN(e))&&!e.includes("edge/"))return"Chrome";if(_N(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function pN(n=on()){return/firefox\//i.test(n)}function mN(n=on()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gN(n=on()){return/crios\//i.test(n)}function vN(n=on()){return/iemobile/i.test(n)}function _N(n=on()){return/android/i.test(n)}function yN(n=on()){return/blackberry/i.test(n)}function wN(n=on()){return/webos/i.test(n)}function Gw(n=on()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SG(n=on()){var e;return Gw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function DG(){return Hb()&&document.documentMode===10}function IN(n=on()){return Gw(n)||_N(n)||wN(n)||yN(n)||/windows phone/i.test(n)||vN(n)}function EN(n,e=[]){let t;switch(n){case"Browser":t=Qx(on());break;case"Worker":t=`${Qx(on())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Sn}/${r}`}var Dw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function AG(t){return _(this,arguments,function*(n,e={}){return Wa(n,"GET","/v2/passwordPolicy",Bw(n,e))})}var RG=6,Aw=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:RG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Rw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ip(this),this.idTokenSubscription=new Ip(this),this.beforeStateQueue=new Dw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ni(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield wp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield hN(this,{idToken:e}),r=yield za._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(ui(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield yp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=gG()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(ui(this.app))return Promise.reject(go(this));let t=e?Ne(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return ui(this.app)?Promise.reject(go(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ui(this.app)?Promise.reject(go(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(Ni(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield AG(this),t=new Aw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new kr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield TG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ni(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=yield wp.create(this,[Ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=EN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&fG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function zw(n){return Ne(n)}var Ip=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Kb(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Ww={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xG(n){Ww=n}function NG(n){return Ww.loadJS(n)}function MG(){return Ww.gapiScript}function CN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Kw(n,e){let t=Mt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(ml(s,e??{}))return i;ys(i,"already-initialized")}return t.initialize({options:e})}function PG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ni);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qw(n,e,t){let r=zw(n);fe(r._canInitEmulator,r,"emulator-config-failed"),fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=TN(e),{host:o,port:a}=OG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||kG()}function TN(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function OG(n){let e=TN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Yx(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:Yx(o)}}}function Yx(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function kG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ep=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xi("not implemented")}_getIdTokenResponse(e){return xi("not implemented")}_linkToIdToken(e,t){return xi("not implemented")}_getReauthenticationResolver(e){return xi("not implemented")}};function Iw(n,e){return _(this,null,function*(){return yG(n,"POST","/v1/accounts:signInWithIdp",Bw(n,e))})}var Cp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var xw=class extends Cp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var yu=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let s=yield za._fromIdTokenResponse(e,r,i),o=Zx(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Zx(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Zx(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Nw=class n extends bn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function bN(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Nw._fromErrorAndOperation(n,s,e,r):s})}function FG(n,e,t=!1){return _(this,null,function*(){let r=yield vu(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return yu._forOperation(n,"link",r)})}function LG(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(ui(r.app))return Promise.reject(go(r));let i="reauthenticate";try{let s=yield vu(n,bN(r,i,e,n),t);fe(s.idToken,r,"internal-error");let o=Hw(s.idToken);fe(o,r,"internal-error");let{sub:a}=o;return fe(n.uid===a,r,"user-mismatch"),yu._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ys(r,"user-mismatch"),s}})}function VG(n,e,t=!1){return _(this,null,function*(){if(ui(n.app))return Promise.reject(go(n));let r="signIn",i=yield bN(n,r,e),s=yield yu._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Ap(n,e,t,r){return Ne(n).onIdTokenChanged(e,t,r)}function Yw(n,e,t){return Ne(n).beforeAuthStateChanged(e,t)}function Rp(n,e,t,r){return Ne(n).onAuthStateChanged(e,t,r)}var Tp="__sak";var bp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Tp,"1"),this.storage.removeItem(Tp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var UG=1e3,jG=10,BG=(()=>{class n extends bp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IN(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);DG()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,jG):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},UG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Qi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Qi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Qi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),SN=BG;var $G=(()=>{class n extends bp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Zw=$G;function HG(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var qG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>_(this,null,function*(){return d(r.origin,o)})),u=yield HG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function DN(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Mw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=DN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let m=f;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Yr(){return window}function GG(n){Yr().location.href=n}function AN(){return typeof Yr().WorkerGlobalScope<"u"&&typeof Yr().importScripts=="function"}function zG(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function WG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function KG(){return AN()?self:null}var RN="firebaseLocalStorageDb",QG=1,Sp="firebaseLocalStorage",xN="fbase_key",yo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function xp(n,e){return n.transaction([Sp],e?"readwrite":"readonly").objectStore(Sp)}function YG(){let n=indexedDB.deleteDatabase(RN);return new yo(n).toPromise()}function Pw(){let n=indexedDB.open(RN,QG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Sp,{keyPath:xN})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Sp)?e(r):(r.close(),yield YG(),e(yield Pw()))}))})}function Jx(n,e,t){return _(this,null,function*(){let r=xp(n,!0).put({[xN]:e,value:t});return new yo(r).toPromise()})}function ZG(n,e){return _(this,null,function*(){let t=xp(n,!1).get(e),r=yield new yo(t).toPromise();return r===void 0?null:r.value})}function Xx(n,e){let t=xp(n,!0).delete(e);return new yo(t).toPromise()}var JG=800,XG=3,ez=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Pw(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>XG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return AN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=qG._getInstance(KG()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield zG(),!this.activeServiceWorker)return;this.sender=new Mw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||WG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Pw();return yield Jx(t,Tp,"1"),yield Xx(t,Tp),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>Jx(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>ZG(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>Xx(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=xp(s,!1).getAll();return new yo(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),JG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),NN=ez;var nse=CN("rcb"),rse=new _o(3e4,6e4);function tz(n,e){return e?Ni(e):(fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var wu=class extends Ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Iw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Iw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Iw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function nz(n){return VG(n.auth,new wu(n),n.bypassAuthState)}function rz(n){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),LG(t,new wu(n),n.bypassAuthState)}function iz(n){return _(this,null,function*(){let{auth:e,user:t}=n;return fe(t,e,"internal-error"),FG(t,new wu(n),n.bypassAuthState)})}var Ow=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nz;case"linkViaPopup":case"linkViaRedirect":return iz;case"reauthViaPopup":case"reauthViaRedirect":return rz;default:ys(this.auth,"internal-error")}}resolve(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ws(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var ise=new _o(2e3,1e4);var sz="pendingRedirect",mp=new Map,kw=class n extends Ow{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=mp.get(this.auth._key());if(!e){try{let r=(yield oz(this.resolver,this.auth))?yield Qi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}mp.set(this.auth._key(),e)}return this.bypassAuthState||mp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Qi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Qi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function oz(n,e){return _(this,null,function*(){let t=lz(e),r=cz(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function az(n,e){mp.set(n._key(),e)}function cz(n){return Ni(n._redirectPersistence)}function lz(n){return pp(sz,n.config.apiKey,n.name)}function uz(n,e,t=!1){return _(this,null,function*(){if(ui(n.app))return Promise.reject(go(n));let r=zw(n),i=tz(r,e),o=yield new kw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var dz=10*60*1e3,Fw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!MN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(vo(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dz&&this.cachedEventUids.clear(),this.cachedEventUids.has(eN(e))}saveEventToCache(e){this.cachedEventUids.add(eN(e)),this.lastProcessedEventTime=Date.now()}};function eN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function MN({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return MN(n);default:return!1}}function fz(t){return _(this,arguments,function*(n,e={}){return Wa(n,"GET","/v1/projects",e)})}var pz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mz=/^https?/;function gz(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield fz(n);for(let t of e)try{if(vz(t))return}catch{}ys(n,"unauthorized-domain")})}function vz(n){let e=Cw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!mz.test(t))return!1;if(pz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var _z=new _o(3e4,6e4);function tN(){let n=Yr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function yz(n){return new Promise((e,t)=>{var r,i,s;function o(){tN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{tN(),t(vo(n,"network-request-failed"))},timeout:_z.get()})}if(!((i=(r=Yr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Yr().gapi)===null||s===void 0)&&s.load)o();else{let a=CN("iframefcb");return Yr()[a]=()=>{gapi.load?o():t(vo(n,"network-request-failed"))},NG(`${MG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw gp=null,e})}var gp=null;function wz(n){return gp=gp||yz(n),gp}var Iz=new _o(5e3,15e3),Ez="__/auth/iframe",Cz="emulator/auth/iframe",Tz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},bz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sz(n){let e=n.config;fe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?jw(e,Cz):`https://${n.config.authDomain}/${Ez}`,r={apiKey:e.apiKey,appName:n.name,v:Sn},i=bz.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${$s(r).slice(1)}`}function Dz(n){return _(this,null,function*(){let e=yield wz(n),t=Yr().gapi;return fe(t,n,"internal-error"),e.open({where:document.body,url:Sz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Tz,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=vo(n,"network-request-failed"),a=Yr().setTimeout(()=>{s(o)},Iz.get());function c(){Yr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var Az={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rz=500,xz=600,Nz="_blank",Mz="http://localhost",Dp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Pz(n,e,t,r=Rz,i=xz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},Az),{width:r.toString(),height:i.toString(),top:s,left:o}),u=on().toLowerCase();t&&(a=gN(u)?Nz:t),pN(u)&&(e=e||Mz,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[v,w])=>`${m}${v}=${w},`,"");if(SG(u)&&a!=="_self")return Oz(e||"",a),new Dp(null);let f=window.open(e||"",a,d);fe(f,n,"popup-blocked");try{f.focus()}catch{}return new Dp(f)}function Oz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var kz="__/auth/handler",Fz="emulator/auth/handler",Lz=encodeURIComponent("fac");function nN(n,e,t,r,i,s){return _(this,null,function*(){fe(n.config.authDomain,n,"auth-domain-config-required"),fe(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Sn,eventId:i};if(e instanceof Cp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",fl(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof xw){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),u=c?`#${Lz}=${encodeURIComponent(c)}`:"";return`${Vz(n)}?${$s(a).slice(1)}${u}`})}function Vz({config:n}){return n.emulator?jw(n,Fz):`https://${n.authDomain}/${kz}`}var Ew="webStorageSupport",Lw=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zw,this._completeRedirectFn=uz,this._overrideRedirectResult=az}_openPopup(e,t,r,i){return _(this,null,function*(){var s;ws((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield nN(e,t,r,Cw(),i);return Pz(e,o,DN())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield nN(e,t,r,Cw(),i);return GG(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(ws(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield Dz(e),r=new Fw(e);return t.register("authEvent",i=>(fe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ew,{type:Ew},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ew];o!==void 0&&t(!!o),ys(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return IN()||mN()||Gw()}},PN=Lw;var rN="@firebase/auth",iN="1.7.9";var Vw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Uz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jz(n){Dt(new St("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:EN(n)},u=new Rw(r,i,s,c);return PG(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Dt(new St("auth-internal",e=>{let t=zw(e.getProvider("auth").getImmediate());return(r=>new Vw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),X(rN,iN,Uz(n)),X(rN,iN,"esm2017")}var Bz=5*60,$z=rv("authIdTokenMaxAge")||Bz,sN=null,Hz=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>$z)return;let i=t?.token;sN!==i&&(sN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Jw(n=Pt()){let e=Mt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Kw(n,{popupRedirectResolver:PN,persistence:[NN,SN,Zw]}),r=rv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Hz(s.toString());Yw(t,o,()=>o(t.currentUser)),Ap(t,a=>o(a))}}let i=Bb("auth");return i&&Qw(t,`http://${i}`),t}function qz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}xG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=vo("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",qz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jz("Browser");function kN(n){return new pe(function(e){var t=Rp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var FN="auth",wo=class{constructor(e){return e}},Dr=class{constructor(){return xt(FN)}};var Xw=new H("angularfire2.auth-instances");function FW(n,e){let t=Lt(FN,n,e);return t&&new wo(t)}function LW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new wo(r)}}var VW={provide:Dr,deps:[[new ue,Xw]]},UW={provide:wo,useFactory:FW,deps:[[new ue,Xw],ct]};function LN(n,...e){return X("angularfire",at.full,"auth"),nt([UW,VW,{provide:Xw,useFactory:LW(n),multi:!0,deps:[oe,Re,Tt,_t,[new ue,On],...e]}])}var VN=Ue(kN,!0);var UN=Ue(Jw,!0);var Np="analytics",BW="firebase_id",$W="origin",HW=60*1e3,qW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oI="https://www.googletagmanager.com/gtag/js";var Cn=new Lr("@firebase/analytics");var GW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gn=new kr("analytics","Analytics",GW);function zW(n){if(!n.startsWith(oI)){let e=Gn.create("invalid-gtag-resource",{gtagURL:n});return Cn.warn(e.message),""}return n}function zN(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function WW(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function KW(n,e){let t=WW("firebase-js-sdk-policy",{createScriptURL:zW}),r=document.createElement("script"),i=`${oI}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function QW(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function YW(n,e,t,r,i,s){return _(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield zN(t)).find(u=>u.measurementId===i);c&&(yield e[c.appId])}}catch(a){Cn.error(a)}n("config",i,s)})}function ZW(n,e,t,r,i){return _(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield zN(t);for(let c of o){let u=a.find(f=>f.measurementId===c),d=u&&e[u.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){Cn.error(s)}})}function JW(n,e,t,r){function i(s,...o){return _(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield ZW(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield YW(n,e,t,r,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,u]=o;n("get",a,c,u)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){Cn.error(a)}})}return i}function XW(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=JW(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function e4(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(oI)&&t.src.includes(n))return t;return null}var t4=30,n4=1e3,tI=class{constructor(e={},t=n4){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},WN=new tI;function r4(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function i4(n){return _(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:r4(r)},s=qW.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Gn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function s4(r){return _(this,arguments,function*(n,e=WN,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw Gn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw Gn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new nI;return setTimeout(()=>_(this,null,function*(){c.abort()}),t!==void 0?t:HW),KN({appId:i,apiKey:s,measurementId:o},a,c,e)})}function KN(s,o,a){return _(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=WN){var c;let{appId:u,measurementId:d}=n;try{yield o4(r,e)}catch(f){if(d)return Cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:d};throw f}try{let f=yield i4(n);return i.deleteThrottleMetadata(u),f}catch(f){let m=f;if(!a4(m)){if(i.deleteThrottleMetadata(u),d)return Cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:u,measurementId:d};throw f}let v=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?vl(t,i.intervalMillis,t4):vl(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(u,w),Cn.debug(`Calling attemptFetch again in ${v} millis`),KN(n,w,r,i)}})}function o4(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Gn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function a4(n){if(!(n instanceof bn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var nI=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var rI;function c4(n,e,t,r,i){return _(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}function l4(n,e,t,r){return _(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var iI;function u4(n){iI=n}function d4(n){rI=n}function h4(){return _(this,null,function*(){if(li())try{yield js()}catch(n){return Cn.warn(Gn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Cn.warn(Gn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function f4(n,e,t,r,i,s,o){return _(this,null,function*(){var a;let c=s4(n);c.then(v=>{t[v.measurementId]=v.appId,n.options.measurementId&&v.measurementId!==n.options.measurementId&&Cn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>Cn.error(v)),e.push(c);let u=h4().then(v=>{if(v)return r.getId()}),[d,f]=yield Promise.all([c,u]);e4(s)||KW(s,d.measurementId),iI&&(i("consent","default",iI),u4(void 0)),i("js",new Date);let m=(a=o?.config)!==null&&a!==void 0?a:{};return m[$W]="firebase",m.update=!0,f!=null&&(m[BW]=f),i("config",d.measurementId,m),rI&&(i("set",rI),d4(void 0)),d.measurementId})}var sI=class{constructor(e){this.app=e}_delete(){return delete Ka[this.app.options.appId],Promise.resolve()}},Ka={},jN=[],BN={},eI="dataLayer",p4="gtag",$N,aI,HN=!1;function m4(){let n=[];if(dl()&&n.push("This is a browser extension environment."),hl()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Gn.create("invalid-analytics-context",{errorInfo:e});Cn.warn(t.message)}}function g4(n,e,t){m4();let r=n.options.appId;if(!r)throw Gn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gn.create("no-api-key");if(Ka[r]!=null)throw Gn.create("already-exists",{id:r});if(!HN){QW(eI);let{wrappedGtag:s,gtagCore:o}=XW(Ka,jN,BN,eI,p4);aI=s,$N=o,HN=!0}return Ka[r]=f4(n,jN,BN,e,$N,eI,t),new sI(n)}function QN(n=Pt()){n=Ne(n);let e=Mt(n,Np);return e.isInitialized()?e.getImmediate():YN(n)}function YN(n,e={}){let t=Mt(n,Np);if(t.isInitialized()){let i=t.getImmediate();if(ml(e,t.getOptions()))return i;throw Gn.create("already-initialized")}return t.initialize({options:e})}function ZN(){return _(this,null,function*(){if(dl()||!hl()||!li())return!1;try{return yield js()}catch{return!1}})}function JN(n,e,t){n=Ne(n),l4(aI,Ka[n.app.options.appId],e,t).catch(r=>Cn.error(r))}function cI(n,e,t,r){n=Ne(n),c4(aI,Ka[n.app.options.appId],e,t,r).catch(i=>Cn.error(i))}var qN="@firebase/analytics",GN="0.10.8";function v4(){Dt(new St(Np,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return g4(r,i,t)},"PUBLIC")),Dt(new St("analytics-internal",n,"PRIVATE")),X(qN,GN),X(qN,GN,"esm2017");function n(e){try{let t=e.getProvider(Np).getImmediate();return{logEvent:(r,i,s)=>cI(t,r,i,s)}}catch(t){throw Gn.create("interop-component-reg-failed",{reason:t})}}}v4();var Io=class{constructor(e){return e}},tM="analytics",uI=class{constructor(){return xt(tM)}};var dI="__angularfire_symbol__analyticsIsSupportedValue",nM="__angularfire_symbol__analyticsIsSupported";globalThis[nM]||=ZN().then(n=>globalThis[dI]=n).catch(()=>globalThis[dI]=!1);var Mp={async:()=>globalThis[nM],sync:()=>{let n=globalThis[dI];if(n===void 0)throw new Error(Ga("Analytics"));return n}},rM=Mp.async,iM=Ue(QN,!0);var _4=Ue(cI,!0);var y4=Ue(JN,!0);var fI=(()=>{class n{initialized;disposables=[];constructor(t,r,i){X("angularfire",at.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),rM().then(()=>{let o=i.get(Io);o?this.disposables=[VN(t).subscribe(a=>{y4(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ae(wo),ae(oe),ae(Re))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),w4="firebase_event_origin",I4="firebase_previous_class",E4="firebase_previous_id",C4="firebase_previous_screen",T4="firebase_screen_class",XN="firebase_screen_id",b4="firebase_screen",hI="outlet",S4="page_path",D4="page_title",Iu="screen_class",eM="screen_name",A4="screen_view",R4="auto",x4="#",N4=Math.floor(Math.random()*(2**32-1))-2**31,lI={},M4=n=>{let e=[n[Iu],n[hI]].join(x4);if(lI.hasOwnProperty(e))return lI[e];{let t=N4++;return lI[e]=t,t}},P4=(n,e,t)=>n.events.pipe(yn(i=>i instanceof ou)).pipe(An(i=>{let o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return ie(null);let c=a;for(;c.firstChild;)c=c.firstChild;let u=c.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",d={[eM]:u,[S4]:`/${o}`,[w4]:R4,[b4]:u,[hI]:i.snapshot.outlet};e&&(d[D4]=e.getTitle());let f=a.component;if(f){if(f===pw){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;f=m.component}}else f=i.snapshot.component;if(typeof f=="string")return ie(be(B({},d),{[Iu]:f}));if(f){let m=t.resolveComponentFactory(f);return ie(be(B({},d),{[Iu]:m.selector}))}return ie(null)}),yn(i=>!!i),Y(i=>B({[T4]:i[Iu],[XN]:M4(i)},i)),Sv(i=>i[hI]),At(i=>i.pipe(Dh((s,o)=>JSON.stringify(s)===JSON.stringify(o)),ma(void 0),Rh(),Y(([s,o])=>s?B({[I4]:s[Iu],[C4]:s[eM],[E4]:s[XN]},o):o)))),sM=(()=>{class n{disposable;constructor(t,r,i,s,o,a){X("angularfire",at.full,"screen-tracking"),rM().then(()=>{let c=a.get(Io);!t||!c||s.runOutsideAngular(()=>{this.disposable=P4(t,r,i).pipe(An(u=>_(this,null,function*(){return o&&(yield o.initialized),_4(c,A4,u)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ae(lp,8),ae(zf,8),ae(as),ae(oe),ae(fI,8),ae(Re))};static \u0275prov=j({token:n,factory:n.\u0275fac})}return n})(),pI=new H("angularfire2.analytics-instances");function O4(n,e){if(!Mp.sync())return null;let t=Lt(tM,n,e);return t&&new Io(t)}function k4(n){return(e,t)=>{if(!Mp.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new Io(r)}}var F4={provide:uI,deps:[[new ue,pI]]},L4={provide:Io,useFactory:O4,deps:[[new ue,pI],ct]};function oM(n,...e){return X("angularfire",at.full,"analytics"),nt([L4,F4,{provide:ps,useValue:Mp.async,multi:!0},{provide:pI,useFactory:k4(n),multi:!0,deps:[oe,Re,Tt,_t,...e]}])}var aM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cM={};var Is,mI;(function(){var n;function e(b,y){function I(){}I.prototype=y.prototype,b.D=y.prototype,b.prototype=new I,b.prototype.constructor=b,b.C=function(S,D,N){for(var E=Array(arguments.length-2),oi=2;oi<arguments.length;oi++)E[oi-2]=arguments[oi];return y.prototype[D].apply(S,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,y,I){I||(I=0);var S=Array(16);if(typeof y=="string")for(var D=0;16>D;++D)S[D]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(D=0;16>D;++D)S[D]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=b.g[0],I=b.g[1],D=b.g[2];var N=b.g[3],E=y+(N^I&(D^N))+S[0]+3614090360&4294967295;y=I+(E<<7&4294967295|E>>>25),E=N+(D^y&(I^D))+S[1]+3905402710&4294967295,N=y+(E<<12&4294967295|E>>>20),E=D+(I^N&(y^I))+S[2]+606105819&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(y^D&(N^y))+S[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=y+(N^I&(D^N))+S[4]+4118548399&4294967295,y=I+(E<<7&4294967295|E>>>25),E=N+(D^y&(I^D))+S[5]+1200080426&4294967295,N=y+(E<<12&4294967295|E>>>20),E=D+(I^N&(y^I))+S[6]+2821735955&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(y^D&(N^y))+S[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=y+(N^I&(D^N))+S[8]+1770035416&4294967295,y=I+(E<<7&4294967295|E>>>25),E=N+(D^y&(I^D))+S[9]+2336552879&4294967295,N=y+(E<<12&4294967295|E>>>20),E=D+(I^N&(y^I))+S[10]+4294925233&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(y^D&(N^y))+S[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=y+(N^I&(D^N))+S[12]+1804603682&4294967295,y=I+(E<<7&4294967295|E>>>25),E=N+(D^y&(I^D))+S[13]+4254626195&4294967295,N=y+(E<<12&4294967295|E>>>20),E=D+(I^N&(y^I))+S[14]+2792965006&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(y^D&(N^y))+S[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=y+(D^N&(I^D))+S[1]+4129170786&4294967295,y=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(y^I))+S[6]+3225465664&4294967295,N=y+(E<<9&4294967295|E>>>23),E=D+(y^I&(N^y))+S[11]+643717713&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^y&(D^N))+S[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=y+(D^N&(I^D))+S[5]+3593408605&4294967295,y=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(y^I))+S[10]+38016083&4294967295,N=y+(E<<9&4294967295|E>>>23),E=D+(y^I&(N^y))+S[15]+3634488961&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^y&(D^N))+S[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=y+(D^N&(I^D))+S[9]+568446438&4294967295,y=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(y^I))+S[14]+3275163606&4294967295,N=y+(E<<9&4294967295|E>>>23),E=D+(y^I&(N^y))+S[3]+4107603335&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^y&(D^N))+S[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=y+(D^N&(I^D))+S[13]+2850285829&4294967295,y=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(y^I))+S[2]+4243563512&4294967295,N=y+(E<<9&4294967295|E>>>23),E=D+(y^I&(N^y))+S[7]+1735328473&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^y&(D^N))+S[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=y+(I^D^N)+S[5]+4294588738&4294967295,y=I+(E<<4&4294967295|E>>>28),E=N+(y^I^D)+S[8]+2272392833&4294967295,N=y+(E<<11&4294967295|E>>>21),E=D+(N^y^I)+S[11]+1839030562&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^y)+S[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=y+(I^D^N)+S[1]+2763975236&4294967295,y=I+(E<<4&4294967295|E>>>28),E=N+(y^I^D)+S[4]+1272893353&4294967295,N=y+(E<<11&4294967295|E>>>21),E=D+(N^y^I)+S[7]+4139469664&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^y)+S[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=y+(I^D^N)+S[13]+681279174&4294967295,y=I+(E<<4&4294967295|E>>>28),E=N+(y^I^D)+S[0]+3936430074&4294967295,N=y+(E<<11&4294967295|E>>>21),E=D+(N^y^I)+S[3]+3572445317&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^y)+S[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=y+(I^D^N)+S[9]+3654602809&4294967295,y=I+(E<<4&4294967295|E>>>28),E=N+(y^I^D)+S[12]+3873151461&4294967295,N=y+(E<<11&4294967295|E>>>21),E=D+(N^y^I)+S[15]+530742520&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^y)+S[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=y+(D^(I|~N))+S[0]+4096336452&4294967295,y=I+(E<<6&4294967295|E>>>26),E=N+(I^(y|~D))+S[7]+1126891415&4294967295,N=y+(E<<10&4294967295|E>>>22),E=D+(y^(N|~I))+S[14]+2878612391&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~y))+S[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=y+(D^(I|~N))+S[12]+1700485571&4294967295,y=I+(E<<6&4294967295|E>>>26),E=N+(I^(y|~D))+S[3]+2399980690&4294967295,N=y+(E<<10&4294967295|E>>>22),E=D+(y^(N|~I))+S[10]+4293915773&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~y))+S[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=y+(D^(I|~N))+S[8]+1873313359&4294967295,y=I+(E<<6&4294967295|E>>>26),E=N+(I^(y|~D))+S[15]+4264355552&4294967295,N=y+(E<<10&4294967295|E>>>22),E=D+(y^(N|~I))+S[6]+2734768916&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~y))+S[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=y+(D^(I|~N))+S[4]+4149444226&4294967295,y=I+(E<<6&4294967295|E>>>26),E=N+(I^(y|~D))+S[11]+3174756917&4294967295,N=y+(E<<10&4294967295|E>>>22),E=D+(y^(N|~I))+S[2]+718787259&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~y))+S[9]+3951481745&4294967295,b.g[0]=b.g[0]+y&4294967295,b.g[1]=b.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+N&4294967295}r.prototype.u=function(b,y){y===void 0&&(y=b.length);for(var I=y-this.blockSize,S=this.B,D=this.h,N=0;N<y;){if(D==0)for(;N<=I;)i(this,b,N),N+=this.blockSize;if(typeof b=="string"){for(;N<y;)if(S[D++]=b.charCodeAt(N++),D==this.blockSize){i(this,S),D=0;break}}else for(;N<y;)if(S[D++]=b[N++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=y},r.prototype.v=function(){var b=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);b[0]=128;for(var y=1;y<b.length-8;++y)b[y]=0;var I=8*this.o;for(y=b.length-8;y<b.length;++y)b[y]=I&255,I/=256;for(this.u(b),b=Array(16),y=I=0;4>y;++y)for(var S=0;32>S;S+=8)b[I++]=this.g[y]>>>S&255;return b};function s(b,y){var I=a;return Object.prototype.hasOwnProperty.call(I,b)?I[b]:I[b]=y(b)}function o(b,y){this.h=y;for(var I=[],S=!0,D=b.length-1;0<=D;D--){var N=b[D]|0;S&&N==y||(I[D]=N,S=!1)}this.g=I}var a={};function c(b){return-128<=b&&128>b?s(b,function(y){return new o([y|0],0>y?-1:0)}):new o([b|0],0>b?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return f;if(0>b)return x(u(-b));for(var y=[],I=1,S=0;b>=I;S++)y[S]=b/I|0,I*=4294967296;return new o(y,0)}function d(b,y){if(b.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(b.charAt(0)=="-")return x(d(b.substring(1),y));if(0<=b.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=u(Math.pow(y,8)),S=f,D=0;D<b.length;D+=8){var N=Math.min(8,b.length-D),E=parseInt(b.substring(D,D+N),y);8>N?(N=u(Math.pow(y,N)),S=S.j(N).add(u(E))):(S=S.j(I),S=S.add(u(E)))}return S}var f=c(0),m=c(1),v=c(16777216);n=o.prototype,n.m=function(){if(P(this))return-x(this).m();for(var b=0,y=1,I=0;I<this.g.length;I++){var S=this.i(I);b+=(0<=S?S:4294967296+S)*y,y*=4294967296}return b},n.toString=function(b){if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(w(this))return"0";if(P(this))return"-"+x(this).toString(b);for(var y=u(Math.pow(b,6)),I=this,S="";;){var D=ne(I,y).g;I=L(I,D.j(y));var N=((0<I.g.length?I.g[0]:I.h)>>>0).toString(b);if(I=D,w(I))return N+S;for(;6>N.length;)N="0"+N;S=N+S}},n.i=function(b){return 0>b?0:b<this.g.length?this.g[b]:this.h};function w(b){if(b.h!=0)return!1;for(var y=0;y<b.g.length;y++)if(b.g[y]!=0)return!1;return!0}function P(b){return b.h==-1}n.l=function(b){return b=L(this,b),P(b)?-1:w(b)?0:1};function x(b){for(var y=b.g.length,I=[],S=0;S<y;S++)I[S]=~b.g[S];return new o(I,~b.h).add(m)}n.abs=function(){return P(this)?x(this):this},n.add=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0,D=0;D<=y;D++){var N=S+(this.i(D)&65535)+(b.i(D)&65535),E=(N>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);S=E>>>16,N&=65535,E&=65535,I[D]=E<<16|N}return new o(I,I[I.length-1]&-2147483648?-1:0)};function L(b,y){return b.add(x(y))}n.j=function(b){if(w(this)||w(b))return f;if(P(this))return P(b)?x(this).j(x(b)):x(x(this).j(b));if(P(b))return x(this.j(x(b)));if(0>this.l(v)&&0>b.l(v))return u(this.m()*b.m());for(var y=this.g.length+b.g.length,I=[],S=0;S<2*y;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(var D=0;D<b.g.length;D++){var N=this.i(S)>>>16,E=this.i(S)&65535,oi=b.i(D)>>>16,Gc=b.i(D)&65535;I[2*S+2*D]+=E*Gc,q(I,2*S+2*D),I[2*S+2*D+1]+=N*Gc,q(I,2*S+2*D+1),I[2*S+2*D+1]+=E*oi,q(I,2*S+2*D+1),I[2*S+2*D+2]+=N*oi,q(I,2*S+2*D+2)}for(S=0;S<y;S++)I[S]=I[2*S+1]<<16|I[2*S];for(S=y;S<2*y;S++)I[S]=0;return new o(I,0)};function q(b,y){for(;(b[y]&65535)!=b[y];)b[y+1]+=b[y]>>>16,b[y]&=65535,y++}function Q(b,y){this.g=b,this.h=y}function ne(b,y){if(w(y))throw Error("division by zero");if(w(b))return new Q(f,f);if(P(b))return y=ne(x(b),y),new Q(x(y.g),x(y.h));if(P(y))return y=ne(b,x(y)),new Q(x(y.g),y.h);if(30<b.g.length){if(P(b)||P(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,S=y;0>=S.l(b);)I=Ze(I),S=Ze(S);var D=se(I,1),N=se(S,1);for(S=se(S,2),I=se(I,2);!w(S);){var E=N.add(S);0>=E.l(b)&&(D=D.add(I),N=E),S=se(S,1),I=se(I,1)}return y=L(b,D.j(y)),new Q(D,y)}for(D=f;0<=b.l(y);){for(I=Math.max(1,Math.floor(b.m()/y.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),N=u(I),E=N.j(y);P(E)||0<E.l(b);)I-=S,N=u(I),E=N.j(y);w(N)&&(N=m),D=D.add(N),b=L(b,E)}return new Q(D,b)}n.A=function(b){return ne(this,b).h},n.and=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)&b.i(S);return new o(I,this.h&b.h)},n.or=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)|b.i(S);return new o(I,this.h|b.h)},n.xor=function(b){for(var y=Math.max(this.g.length,b.g.length),I=[],S=0;S<y;S++)I[S]=this.i(S)^b.i(S);return new o(I,this.h^b.h)};function Ze(b){for(var y=b.g.length+1,I=[],S=0;S<y;S++)I[S]=b.i(S)<<1|b.i(S-1)>>>31;return new o(I,b.h)}function se(b,y){var I=y>>5;y%=32;for(var S=b.g.length-I,D=[],N=0;N<S;N++)D[N]=0<y?b.i(N+I)>>>y|b.i(N+I+1)<<32-y:b.i(N+I);return new o(D,b.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mI=cM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,Is=cM.Integer=o}).apply(typeof aM<"u"?aM:typeof self<"u"?self:typeof window<"u"?window:{});var Pp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mi={};var gI,V4,Qa,vI,Eu,Op,_I,yI,wI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pp=="object"&&Pp];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(l,h){if(h)e:{var p=r;l=l.split(".");for(var g=0;g<l.length-1;g++){var A=l[g];if(!(A in p))break e;p=p[A]}l=l[l.length-1],g=p[l],h=h(g),h!=g&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function s(l,h){l instanceof String&&(l+="");var p=0,g=!1,A={next:function(){if(!g&&p<l.length){var O=p++;return{value:h(O,l[O]),done:!1}}return g=!0,{done:!0,value:void 0}}};return A[Symbol.iterator]=function(){return A},A}i("Array.prototype.values",function(l){return l||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function u(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function d(l,h,p){return l.call.apply(l.bind,arguments)}function f(l,h,p){if(!l)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var A=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(A,g),l.apply(h,A)}}return function(){return l.apply(h,arguments)}}function m(l,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var g=p.slice();return g.push.apply(g,arguments),l.apply(this,g)}}function w(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(g,A,O){for(var U=Array(arguments.length-2),Je=2;Je<arguments.length;Je++)U[Je-2]=arguments[Je];return h.prototype[A].apply(g,U)}}function P(l){let h=l.length;if(0<h){let p=Array(h);for(let g=0;g<h;g++)p[g]=l[g];return p}return[]}function x(l,h){for(let p=1;p<arguments.length;p++){let g=arguments[p];if(c(g)){let A=l.length||0,O=g.length||0;l.length=A+O;for(let U=0;U<O;U++)l[A+U]=g[U]}else l.push(g)}}class L{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(l){return/^[\s\xa0]*$/.test(l)}function Q(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function ne(l){return ne[" "](l),l}ne[" "]=function(){};var Ze=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function se(l,h,p){for(let g in l)h.call(p,l[g],g,l)}function b(l,h){for(let p in l)h.call(void 0,l[p],p,l)}function y(l){let h={};for(let p in l)h[p]=l[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let p,g;for(let A=1;A<arguments.length;A++){g=arguments[A];for(p in g)l[p]=g[p];for(let O=0;O<I.length;O++)p=I[O],Object.prototype.hasOwnProperty.call(g,p)&&(l[p]=g[p])}}function D(l){var h=1;l=l.split(":");let p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function N(l){a.setTimeout(()=>{throw l},0)}function E(){var l=Mg;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class oi{constructor(){this.h=this.g=null}add(h,p){let g=Gc.get();g.set(h,p),this.h?this.h.next=g:this.g=g,this.h=g}}var Gc=new L(()=>new nL,l=>l.reset());class nL{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let zc,Wc=!1,Mg=new oi,FT=()=>{let l=a.Promise.resolve(void 0);zc=()=>{l.then(rL)}};var rL=()=>{for(var l;l=E();){try{l.h.call(l.g)}catch(p){N(p)}var h=Gc;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}Wc=!1};function Gi(){this.s=this.s,this.C=this.C}Gi.prototype.s=!1,Gi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Gi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function tn(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}tn.prototype.h=function(){this.defaultPrevented=!0};var iL=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return l}();function Kc(l,h){if(tn.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,g=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(Ze){e:{try{ne(h.nodeName);var A=!0;break e}catch{}A=!1}A||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:sL[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Kc.aa.h.call(this)}}w(Kc,tn);var sL={2:"touch",3:"pen",4:"mouse"};Kc.prototype.h=function(){Kc.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Qc="closure_listenable_"+(1e6*Math.random()|0),oL=0;function aL(l,h,p,g,A){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!g,this.ha=A,this.key=++oL,this.da=this.fa=!1}function Ad(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Rd(l){this.src=l,this.g={},this.h=0}Rd.prototype.add=function(l,h,p,g,A){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var U=Og(l,h,g,A);return-1<U?(h=l[U],p||(h.fa=!1)):(h=new aL(h,this.src,O,!!g,A),h.fa=p,l.push(h)),h};function Pg(l,h){var p=h.type;if(p in l.g){var g=l.g[p],A=Array.prototype.indexOf.call(g,h,void 0),O;(O=0<=A)&&Array.prototype.splice.call(g,A,1),O&&(Ad(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Og(l,h,p,g){for(var A=0;A<l.length;++A){var O=l[A];if(!O.da&&O.listener==h&&O.capture==!!p&&O.ha==g)return A}return-1}var kg="closure_lm_"+(1e6*Math.random()|0),Fg={};function LT(l,h,p,g,A){if(g&&g.once)return UT(l,h,p,g,A);if(Array.isArray(h)){for(var O=0;O<h.length;O++)LT(l,h[O],p,g,A);return null}return p=jg(p),l&&l[Qc]?l.K(h,p,u(g)?!!g.capture:!!g,A):VT(l,h,p,!1,g,A)}function VT(l,h,p,g,A,O){if(!h)throw Error("Invalid event type");var U=u(A)?!!A.capture:!!A,Je=Vg(l);if(Je||(l[kg]=Je=new Rd(l)),p=Je.add(h,p,g,U,O),p.proxy)return p;if(g=cL(),p.proxy=g,g.src=l,g.listener=p,l.addEventListener)iL||(A=U),A===void 0&&(A=!1),l.addEventListener(h.toString(),g,A);else if(l.attachEvent)l.attachEvent(BT(h.toString()),g);else if(l.addListener&&l.removeListener)l.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return p}function cL(){function l(p){return h.call(l.src,l.listener,p)}let h=lL;return l}function UT(l,h,p,g,A){if(Array.isArray(h)){for(var O=0;O<h.length;O++)UT(l,h[O],p,g,A);return null}return p=jg(p),l&&l[Qc]?l.L(h,p,u(g)?!!g.capture:!!g,A):VT(l,h,p,!0,g,A)}function jT(l,h,p,g,A){if(Array.isArray(h))for(var O=0;O<h.length;O++)jT(l,h[O],p,g,A);else g=u(g)?!!g.capture:!!g,p=jg(p),l&&l[Qc]?(l=l.i,h=String(h).toString(),h in l.g&&(O=l.g[h],p=Og(O,p,g,A),-1<p&&(Ad(O[p]),Array.prototype.splice.call(O,p,1),O.length==0&&(delete l.g[h],l.h--)))):l&&(l=Vg(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Og(h,p,g,A)),(p=-1<l?h[l]:null)&&Lg(p))}function Lg(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[Qc])Pg(h.i,l);else{var p=l.type,g=l.proxy;h.removeEventListener?h.removeEventListener(p,g,l.capture):h.detachEvent?h.detachEvent(BT(p),g):h.addListener&&h.removeListener&&h.removeListener(g),(p=Vg(h))?(Pg(p,l),p.h==0&&(p.src=null,h[kg]=null)):Ad(l)}}}function BT(l){return l in Fg?Fg[l]:Fg[l]="on"+l}function lL(l,h){if(l.da)l=!0;else{h=new Kc(h,this);var p=l.listener,g=l.ha||l.src;l.fa&&Lg(l),l=p.call(g,h)}return l}function Vg(l){return l=l[kg],l instanceof Rd?l:null}var Ug="__closure_events_fn_"+(1e9*Math.random()>>>0);function jg(l){return typeof l=="function"?l:(l[Ug]||(l[Ug]=function(h){return l.handleEvent(h)}),l[Ug])}function nn(){Gi.call(this),this.i=new Rd(this),this.M=this,this.F=null}w(nn,Gi),nn.prototype[Qc]=!0,nn.prototype.removeEventListener=function(l,h,p,g){jT(this,l,h,p,g)};function gn(l,h){var p,g=l.F;if(g)for(p=[];g;g=g.F)p.push(g);if(l=l.M,g=h.type||h,typeof h=="string")h=new tn(h,l);else if(h instanceof tn)h.target=h.target||l;else{var A=h;h=new tn(g,l),S(h,A)}if(A=!0,p)for(var O=p.length-1;0<=O;O--){var U=h.g=p[O];A=xd(U,g,!0,h)&&A}if(U=h.g=l,A=xd(U,g,!0,h)&&A,A=xd(U,g,!1,h)&&A,p)for(O=0;O<p.length;O++)U=h.g=p[O],A=xd(U,g,!1,h)&&A}nn.prototype.N=function(){if(nn.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],g=0;g<p.length;g++)Ad(p[g]);delete l.g[h],l.h--}}this.F=null},nn.prototype.K=function(l,h,p,g){return this.i.add(String(l),h,!1,p,g)},nn.prototype.L=function(l,h,p,g){return this.i.add(String(l),h,!0,p,g)};function xd(l,h,p,g){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var A=!0,O=0;O<h.length;++O){var U=h[O];if(U&&!U.da&&U.capture==p){var Je=U.listener,Jt=U.ha||U.src;U.fa&&Pg(l.i,U),A=Je.call(Jt,g)!==!1&&A}}return A&&!g.defaultPrevented}function $T(l,h,p){if(typeof l=="function")p&&(l=m(l,p));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(l,h||0)}function HT(l){l.g=$T(()=>{l.g=null,l.i&&(l.i=!1,HT(l))},l.l);let h=l.h;l.h=null,l.m.apply(null,h)}class uL extends Gi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:HT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yc(l){Gi.call(this),this.h=l,this.g={}}w(Yc,Gi);var qT=[];function GT(l){se(l.g,function(h,p){this.g.hasOwnProperty(p)&&Lg(h)},l),l.g={}}Yc.prototype.N=function(){Yc.aa.N.call(this),GT(this)},Yc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Bg=a.JSON.stringify,dL=a.JSON.parse,hL=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function $g(){}$g.prototype.h=null;function zT(l){return l.h||(l.h=l.i())}function WT(){}var Zc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hg(){tn.call(this,"d")}w(Hg,tn);function qg(){tn.call(this,"c")}w(qg,tn);var Fs={},KT=null;function Nd(){return KT=KT||new nn}Fs.La="serverreachability";function QT(l){tn.call(this,Fs.La,l)}w(QT,tn);function Jc(l){let h=Nd();gn(h,new QT(h))}Fs.STAT_EVENT="statevent";function YT(l,h){tn.call(this,Fs.STAT_EVENT,l),this.stat=h}w(YT,tn);function vn(l){let h=Nd();gn(h,new YT(h,l))}Fs.Ma="timingevent";function ZT(l,h){tn.call(this,Fs.Ma,l),this.size=h}w(ZT,tn);function Xc(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},h)}function el(){this.g=!0}el.prototype.xa=function(){this.g=!1};function fL(l,h,p,g,A,O){l.info(function(){if(l.g)if(O)for(var U="",Je=O.split("&"),Jt=0;Jt<Je.length;Jt++){var Ve=Je[Jt].split("=");if(1<Ve.length){var rn=Ve[0];Ve=Ve[1];var sn=rn.split("_");U=2<=sn.length&&sn[1]=="type"?U+(rn+"="+Ve+"&"):U+(rn+"=redacted&")}}else U=null;else U=O;return"XMLHTTP REQ ("+g+") [attempt "+A+"]: "+h+`
`+p+`
`+U})}function pL(l,h,p,g,A,O,U){l.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+A+"]: "+h+`
`+p+`
`+O+" "+U})}function Ko(l,h,p,g){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+gL(l,p)+(g?" "+g:"")})}function mL(l,h){l.info(function(){return"TIMEOUT: "+h})}el.prototype.info=function(){};function gL(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var g=p[l];if(!(2>g.length)){var A=g[1];if(Array.isArray(A)&&!(1>A.length)){var O=A[0];if(O!="noop"&&O!="stop"&&O!="close")for(var U=1;U<A.length;U++)A[U]=""}}}}return Bg(p)}catch{return h}}var Md={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},JT={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gg;function Pd(){}w(Pd,$g),Pd.prototype.g=function(){return new XMLHttpRequest},Pd.prototype.i=function(){return{}},Gg=new Pd;function zi(l,h,p,g){this.j=l,this.i=h,this.l=p,this.R=g||1,this.U=new Yc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new XT}function XT(){this.i=null,this.g="",this.h=!1}var eb={},zg={};function Wg(l,h,p){l.L=1,l.v=Ld(ai(h)),l.m=p,l.P=!0,tb(l,null)}function tb(l,h){l.F=Date.now(),Od(l),l.A=ai(l.v);var p=l.A,g=l.R;Array.isArray(g)||(g=[String(g)]),mb(p.i,"t",g),l.C=0,p=l.j.J,l.h=new XT,l.g=Pb(l.j,p?h:null,!l.m),0<l.O&&(l.M=new uL(m(l.Y,l,l.g),l.O)),h=l.U,p=l.g,g=l.ca;var A="readystatechange";Array.isArray(A)||(A&&(qT[0]=A.toString()),A=qT);for(var O=0;O<A.length;O++){var U=LT(p,A[O],g||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),Jc(),fL(l.i,l.u,l.A,l.l,l.R,l.m)}zi.prototype.ca=function(l){l=l.target;let h=this.M;h&&ci(l)==3?h.j():this.Y(l)},zi.prototype.Y=function(l){try{if(l==this.g)e:{let sn=ci(this.g);var h=this.g.Ba();let Zo=this.g.Z();if(!(3>sn)&&(sn!=3||this.g&&(this.h.h||this.g.oa()||Eb(this.g)))){this.J||sn!=4||h==7||(h==8||0>=Zo?Jc(3):Jc(2)),Kg(this);var p=this.g.Z();this.X=p;t:if(nb(this)){var g=Eb(this.g);l="";var A=g.length,O=ci(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ls(this),tl(this);var U="";break t}this.h.i=new a.TextDecoder}for(h=0;h<A;h++)this.h.h=!0,l+=this.h.i.decode(g[h],{stream:!(O&&h==A-1)});g.length=0,this.h.g+=l,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=p==200,pL(this.i,this.u,this.A,this.l,this.R,sn,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Je,Jt=this.g;if((Je=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Je)){var Ve=Je;break t}}Ve=null}if(p=Ve)Ko(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qg(this,p);else{this.o=!1,this.s=3,vn(12),Ls(this),tl(this);break e}}if(this.P){p=!0;let pr;for(;!this.J&&this.C<U.length;)if(pr=vL(this,U),pr==zg){sn==4&&(this.s=4,vn(14),p=!1),Ko(this.i,this.l,null,"[Incomplete Response]");break}else if(pr==eb){this.s=4,vn(15),Ko(this.i,this.l,U,"[Invalid Chunk]"),p=!1;break}else Ko(this.i,this.l,pr,null),Qg(this,pr);if(nb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),sn!=4||U.length!=0||this.h.h||(this.s=1,vn(16),p=!1),this.o=this.o&&p,!p)Ko(this.i,this.l,U,"[Invalid Chunked Response]"),Ls(this),tl(this);else if(0<U.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),tv(rn),rn.M=!0,vn(11))}}else Ko(this.i,this.l,U,null),Qg(this,U);sn==4&&Ls(this),this.o&&!this.J&&(sn==4?Rb(this.j,this):(this.o=!1,Od(this)))}else OL(this.g),p==400&&0<U.indexOf("Unknown SID")?(this.s=3,vn(12)):(this.s=0,vn(13)),Ls(this),tl(this)}}}catch{}finally{}};function nb(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function vL(l,h){var p=l.C,g=h.indexOf(`
`,p);return g==-1?zg:(p=Number(h.substring(p,g)),isNaN(p)?eb:(g+=1,g+p>h.length?zg:(h=h.slice(g,g+p),l.C=g+p,h)))}zi.prototype.cancel=function(){this.J=!0,Ls(this)};function Od(l){l.S=Date.now()+l.I,rb(l,l.I)}function rb(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Xc(m(l.ba,l),h)}function Kg(l){l.B&&(a.clearTimeout(l.B),l.B=null)}zi.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(mL(this.i,this.A),this.L!=2&&(Jc(),vn(17)),Ls(this),this.s=2,tl(this)):rb(this,this.S-l)};function tl(l){l.j.G==0||l.J||Rb(l.j,l)}function Ls(l){Kg(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,GT(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Qg(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Yg(p.h,l))){if(!l.K&&Yg(p.h,l)&&p.G==3){try{var g=p.Da.g.parse(h)}catch{g=null}if(Array.isArray(g)&&g.length==3){var A=g;if(A[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)$d(p),jd(p);else break e;ev(p),vn(18)}}else p.za=A[1],0<p.za-p.T&&37500>A[2]&&p.F&&p.v==0&&!p.C&&(p.C=Xc(m(p.Za,p),6e3));if(1>=ob(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Us(p,11)}else if((l.K||p.g==l)&&$d(p),!q(h))for(A=p.Da.g.parse(h),h=0;h<A.length;h++){let Ve=A[h];if(p.T=Ve[0],Ve=Ve[1],p.G==2)if(Ve[0]=="c"){p.K=Ve[1],p.ia=Ve[2];let rn=Ve[3];rn!=null&&(p.la=rn,p.j.info("VER="+p.la));let sn=Ve[4];sn!=null&&(p.Aa=sn,p.j.info("SVER="+p.Aa));let Zo=Ve[5];Zo!=null&&typeof Zo=="number"&&0<Zo&&(g=1.5*Zo,p.L=g,p.j.info("backChannelRequestTimeoutMs_="+g)),g=p;let pr=l.g;if(pr){let qd=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qd){var O=g.h;O.g||qd.indexOf("spdy")==-1&&qd.indexOf("quic")==-1&&qd.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Zg(O,O.h),O.h=null))}if(g.D){let nv=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;nv&&(g.ya=nv,ot(g.I,g.D,nv))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),g=p;var U=l;if(g.qa=Mb(g,g.J?g.ia:null,g.W),U.K){ab(g.h,U);var Je=U,Jt=g.L;Jt&&(Je.I=Jt),Je.B&&(Kg(Je),Od(Je)),g.g=U}else Db(g);0<p.i.length&&Bd(p)}else Ve[0]!="stop"&&Ve[0]!="close"||Us(p,7);else p.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Us(p,7):Xg(p):Ve[0]!="noop"&&p.l&&p.l.ta(Ve),p.v=0)}}Jc(4)}catch{}}var _L=class{constructor(l,h){this.g=l,this.map=h}};function ib(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function sb(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ob(l){return l.h?1:l.g?l.g.size:0}function Yg(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Zg(l,h){l.g?l.g.add(h):l.h=h}function ab(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}ib.prototype.cancel=function(){if(this.i=cb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function cb(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(let p of l.g.values())h=h.concat(p.D);return h}return P(l.i)}function yL(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var h=[],p=l.length,g=0;g<p;g++)h.push(l[g]);return h}h=[],p=0;for(g in l)h[p++]=l[g];return h}function wL(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(let g in l)h[p++]=g;return h}}}function lb(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=wL(l),g=yL(l),A=g.length,O=0;O<A;O++)h.call(void 0,g[O],p&&p[O],l)}var ub=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function IL(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var g=l[p].indexOf("="),A=null;if(0<=g){var O=l[p].substring(0,g);A=l[p].substring(g+1)}else O=l[p];h(O,A?decodeURIComponent(A.replace(/\+/g," ")):"")}}}function Vs(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Vs){this.h=l.h,kd(this,l.j),this.o=l.o,this.g=l.g,Fd(this,l.s),this.l=l.l;var h=l.i,p=new il;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),db(this,p),this.m=l.m}else l&&(h=String(l).match(ub))?(this.h=!1,kd(this,h[1]||"",!0),this.o=nl(h[2]||""),this.g=nl(h[3]||"",!0),Fd(this,h[4]),this.l=nl(h[5]||"",!0),db(this,h[6]||"",!0),this.m=nl(h[7]||"")):(this.h=!1,this.i=new il(null,this.h))}Vs.prototype.toString=function(){var l=[],h=this.j;h&&l.push(rl(h,hb,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(rl(h,hb,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(rl(p,p.charAt(0)=="/"?TL:CL,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",rl(p,SL)),l.join("")};function ai(l){return new Vs(l)}function kd(l,h,p){l.j=p?nl(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function Fd(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function db(l,h,p){h instanceof il?(l.i=h,DL(l.i,l.h)):(p||(h=rl(h,bL)),l.i=new il(h,l.h))}function ot(l,h,p){l.i.set(h,p)}function Ld(l){return ot(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function nl(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function rl(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,EL),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function EL(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var hb=/[#\/\?@]/g,CL=/[#\?:]/g,TL=/[#\?]/g,bL=/[#\?@]/g,SL=/#/g;function il(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Wi(l){l.g||(l.g=new Map,l.h=0,l.i&&IL(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=il.prototype,n.add=function(l,h){Wi(this),this.i=null,l=Qo(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function fb(l,h){Wi(l),h=Qo(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function pb(l,h){return Wi(l),h=Qo(l,h),l.g.has(h)}n.forEach=function(l,h){Wi(this),this.g.forEach(function(p,g){p.forEach(function(A){l.call(h,A,g,this)},this)},this)},n.na=function(){Wi(this);let l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let g=0;g<h.length;g++){let A=l[g];for(let O=0;O<A.length;O++)p.push(h[g])}return p},n.V=function(l){Wi(this);let h=[];if(typeof l=="string")pb(this,l)&&(h=h.concat(this.g.get(Qo(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},n.set=function(l,h){return Wi(this),this.i=null,l=Qo(this,l),pb(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},n.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function mb(l,h,p){fb(l,h),0<p.length&&(l.i=null,l.g.set(Qo(l,h),P(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var g=h[p];let O=encodeURIComponent(String(g)),U=this.V(g);for(g=0;g<U.length;g++){var A=O;U[g]!==""&&(A+="="+encodeURIComponent(String(U[g]))),l.push(A)}}return this.i=l.join("&")};function Qo(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function DL(l,h){h&&!l.j&&(Wi(l),l.i=null,l.g.forEach(function(p,g){var A=g.toLowerCase();g!=A&&(fb(this,g),mb(this,A,p))},l)),l.j=h}function AL(l,h){let p=new el;if(a.Image){let g=new Image;g.onload=v(Ki,p,"TestLoadImage: loaded",!0,h,g),g.onerror=v(Ki,p,"TestLoadImage: error",!1,h,g),g.onabort=v(Ki,p,"TestLoadImage: abort",!1,h,g),g.ontimeout=v(Ki,p,"TestLoadImage: timeout",!1,h,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=l}else h(!1)}function RL(l,h){let p=new el,g=new AbortController,A=setTimeout(()=>{g.abort(),Ki(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:g.signal}).then(O=>{clearTimeout(A),O.ok?Ki(p,"TestPingServer: ok",!0,h):Ki(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(A),Ki(p,"TestPingServer: error",!1,h)})}function Ki(l,h,p,g,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),g(p)}catch{}}function xL(){this.g=new hL}function NL(l,h,p){let g=p||"";try{lb(l,function(A,O){let U=A;u(A)&&(U=Bg(A)),h.push(g+O+"="+encodeURIComponent(U))})}catch(A){throw h.push(g+"type="+encodeURIComponent("_badmap")),A}}function sl(l){this.l=l.Ub||null,this.j=l.eb||!1}w(sl,$g),sl.prototype.g=function(){return new Vd(this.l,this.j)},sl.prototype.i=function(l){return function(){return l}}({});function Vd(l,h){nn.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Vd,nn),n=Vd.prototype,n.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,al(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ol(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;gb(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function gb(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?ol(this):al(this),this.readyState==3&&gb(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,ol(this))},n.Qa=function(l){this.g&&(this.response=l,ol(this))},n.ga=function(){this.g&&ol(this)};function ol(l){l.readyState=4,l.l=null,l.j=null,l.v=null,al(l)}n.setRequestHeader=function(l,h){this.u.append(l,h)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function al(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Vd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function vb(l){let h="";return se(l,function(p,g){h+=g,h+=":",h+=p,h+=`\r
`}),h}function Jg(l,h,p){e:{for(g in p){var g=!1;break e}g=!0}g||(p=vb(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):ot(l,h,p))}function It(l){nn.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(It,nn);var ML=/^https?$/i,PL=["POST","PUT"];n=It.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,h,p,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gg.g(),this.v=this.o?zT(this.o):zT(Gg),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(O){_b(this,O);return}if(l=p||"",p=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var A in g)p.set(A,g[A]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let O of g.keys())p.set(O,g.get(O));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(p.keys()).find(O=>O.toLowerCase()=="content-type"),A=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(PL,h,void 0))||g||A||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[O,U]of p)this.g.setRequestHeader(O,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ib(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){_b(this,O)}};function _b(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,yb(l),Ud(l)}function yb(l){l.A||(l.A=!0,gn(l,"complete"),gn(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,gn(this,"complete"),gn(this,"abort"),Ud(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ud(this,!0)),It.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?wb(this):this.bb())},n.bb=function(){wb(this)};function wb(l){if(l.h&&typeof o<"u"&&(!l.v[1]||ci(l)!=4||l.Z()!=2)){if(l.u&&ci(l)==4)$T(l.Ea,0,l);else if(gn(l,"readystatechange"),ci(l)==4){l.h=!1;try{let U=l.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var g;if(g=U===0){var A=String(l.D).match(ub)[1]||null;!A&&a.self&&a.self.location&&(A=a.self.location.protocol.slice(0,-1)),g=!ML.test(A?A.toLowerCase():"")}p=g}if(p)gn(l,"complete"),gn(l,"success");else{l.m=6;try{var O=2<ci(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",yb(l)}}finally{Ud(l)}}}}function Ud(l,h){if(l.g){Ib(l);let p=l.g,g=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||gn(l,"ready");try{p.onreadystatechange=g}catch{}}}function Ib(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function ci(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<ci(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),dL(h)}};function Eb(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function OL(l){let h={};l=(l.g&&2<=ci(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<l.length;g++){if(q(l[g]))continue;var p=D(l[g]);let A=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let O=h[A]||[];h[A]=O,O.push(p)}b(h,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function Cb(l){this.Aa=0,this.i=[],this.j=new el,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cl("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cl("baseRetryDelayMs",5e3,l),this.cb=cl("retryDelaySeedMs",1e4,l),this.Wa=cl("forwardChannelMaxRetries",2,l),this.wa=cl("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new ib(l&&l.concurrentRequestLimit),this.Da=new xL,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Cb.prototype,n.la=8,n.G=1,n.connect=function(l,h,p,g){vn(0),this.W=l,this.H=h||{},p&&g!==void 0&&(this.H.OSID=p,this.H.OAID=g),this.F=this.X,this.I=Mb(this,null,this.W),Bd(this)};function Xg(l){if(Tb(l),l.G==3){var h=l.U++,p=ai(l.I);if(ot(p,"SID",l.K),ot(p,"RID",h),ot(p,"TYPE","terminate"),ll(l,p),h=new zi(l,l.j,h),h.L=2,h.v=Ld(ai(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=Pb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Od(h)}Nb(l)}function jd(l){l.g&&(tv(l),l.g.cancel(),l.g=null)}function Tb(l){jd(l),l.u&&(a.clearTimeout(l.u),l.u=null),$d(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Bd(l){if(!sb(l.h)&&!l.s){l.s=!0;var h=l.Ga;zc||FT(),Wc||(zc(),Wc=!0),Mg.add(h,l),l.B=0}}function kL(l,h){return ob(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Xc(m(l.Ga,l,h),xb(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let A=new zi(this,this.j,l),O=this.o;if(this.S&&(O?(O=y(O),S(O,this.S)):O=this.S),this.m!==null||this.O||(A.H=O,O=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var g=this.i[p];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(h+=g,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=Sb(this,A,h),p=ai(this.I),ot(p,"RID",l),ot(p,"CVER",22),this.D&&ot(p,"X-HTTP-Session-Id",this.D),ll(this,p),O&&(this.O?h="headers="+encodeURIComponent(String(vb(O)))+"&"+h:this.m&&Jg(p,this.m,O)),Zg(this.h,A),this.Ua&&ot(p,"TYPE","init"),this.P?(ot(p,"$req",h),ot(p,"SID","null"),A.T=!0,Wg(A,p,null)):Wg(A,p,h),this.G=2}}else this.G==3&&(l?bb(this,l):this.i.length==0||sb(this.h)||bb(this))};function bb(l,h){var p;h?p=h.l:p=l.U++;let g=ai(l.I);ot(g,"SID",l.K),ot(g,"RID",p),ot(g,"AID",l.T),ll(l,g),l.m&&l.o&&Jg(g,l.m,l.o),p=new zi(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=Sb(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Zg(l.h,p),Wg(p,g,h)}function ll(l,h){l.H&&se(l.H,function(p,g){ot(h,g,p)}),l.l&&lb({},function(p,g){ot(h,g,p)})}function Sb(l,h,p){p=Math.min(l.i.length,p);var g=l.l?m(l.l.Na,l.l,l):null;e:{var A=l.i;let O=-1;for(;;){let U=["count="+p];O==-1?0<p?(O=A[0].g,U.push("ofs="+O)):O=0:U.push("ofs="+O);let Je=!0;for(let Jt=0;Jt<p;Jt++){let Ve=A[Jt].g,rn=A[Jt].map;if(Ve-=O,0>Ve)O=Math.max(0,A[Jt].g-100),Je=!1;else try{NL(rn,U,"req"+Ve+"_")}catch{g&&g(rn)}}if(Je){g=U.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,g}function Db(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;zc||FT(),Wc||(zc(),Wc=!0),Mg.add(h,l),l.v=0}}function ev(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Xc(m(l.Fa,l),xb(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Ab(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Xc(m(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vn(10),jd(this),Ab(this))};function tv(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ab(l){l.g=new zi(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=ai(l.qa);ot(h,"RID","rpc"),ot(h,"SID",l.K),ot(h,"AID",l.T),ot(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&ot(h,"TO",l.ja),ot(h,"TYPE","xmlhttp"),ll(l,h),l.m&&l.o&&Jg(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=Ld(ai(h)),p.m=null,p.P=!0,tb(p,l)}n.Za=function(){this.C!=null&&(this.C=null,jd(this),ev(this),vn(19))};function $d(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Rb(l,h){var p=null;if(l.g==h){$d(l),tv(l),l.g=null;var g=2}else if(Yg(l.h,h))p=h.D,ab(l.h,h),g=1;else return;if(l.G!=0){if(h.o)if(g==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var A=l.B;g=Nd(),gn(g,new ZT(g,p)),Bd(l)}else Db(l);else if(A=h.s,A==3||A==0&&0<h.X||!(g==1&&kL(l,h)||g==2&&ev(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),A){case 1:Us(l,5);break;case 4:Us(l,10);break;case 3:Us(l,6);break;default:Us(l,2)}}}function xb(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Us(l,h){if(l.j.info("Error code "+h),h==2){var p=m(l.fb,l),g=l.Xa;let A=!g;g=new Vs(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||kd(g,"https"),Ld(g),A?AL(g.toString(),p):RL(g.toString(),p)}else vn(2);l.G=0,l.l&&l.l.sa(h),Nb(l),Tb(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),vn(2)):(this.j.info("Failed to ping google.com"),vn(1))};function Nb(l){if(l.G=0,l.ka=[],l.l){let h=cb(l.h);(h.length!=0||l.i.length!=0)&&(x(l.ka,h),x(l.ka,l.i),l.h.i.length=0,P(l.i),l.i.length=0),l.l.ra()}}function Mb(l,h,p){var g=p instanceof Vs?ai(p):new Vs(p);if(g.g!="")h&&(g.g=h+"."+g.g),Fd(g,g.s);else{var A=a.location;g=A.protocol,h=h?h+"."+A.hostname:A.hostname,A=+A.port;var O=new Vs(null);g&&kd(O,g),h&&(O.g=h),A&&Fd(O,A),p&&(O.l=p),g=O}return p=l.D,h=l.ya,p&&h&&ot(g,p,h),ot(g,"VER",l.la),ll(l,g),g}function Pb(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new It(new sl({eb:p})):new It(l.pa),h.Ha(l.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ob(){}n=Ob.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Hd(){}Hd.prototype.g=function(l,h){return new Un(l,h)};function Un(l,h){nn.call(this),this.g=new Cb(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!q(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Yo(this)}w(Un,nn),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){Xg(this.g)},Un.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Bg(l),l=p);h.i.push(new _L(h.Ya++,l)),h.G==3&&Bd(h)},Un.prototype.N=function(){this.g.l=null,delete this.j,Xg(this.g),delete this.g,Un.aa.N.call(this)};function kb(l){Hg.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(let p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}w(kb,Hg);function Fb(){qg.call(this),this.status=1}w(Fb,qg);function Yo(l){this.g=l}w(Yo,Ob),Yo.prototype.ua=function(){gn(this.g,"a")},Yo.prototype.ta=function(l){gn(this.g,new kb(l))},Yo.prototype.sa=function(l){gn(this.g,new Fb)},Yo.prototype.ra=function(){gn(this.g,"b")},Hd.prototype.createWebChannel=Hd.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,wI=Mi.createWebChannelTransport=function(){return new Hd},yI=Mi.getStatEventTarget=function(){return Nd()},_I=Mi.Event=Fs,Op=Mi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Md.NO_ERROR=0,Md.TIMEOUT=8,Md.HTTP_ERROR=6,Eu=Mi.ErrorCode=Md,JT.COMPLETE="complete",vI=Mi.EventType=JT,WT.EventType=Zc,Zc.OPEN="a",Zc.CLOSE="b",Zc.ERROR="c",Zc.MESSAGE="d",nn.prototype.listen=nn.prototype.K,Qa=Mi.WebChannel=WT,V4=Mi.FetchXmlHttpFactory=sl,It.prototype.listenOnce=It.prototype.L,It.prototype.getLastError=It.prototype.Ka,It.prototype.getLastErrorCode=It.prototype.Ba,It.prototype.getStatus=It.prototype.Z,It.prototype.getResponseJson=It.prototype.Oa,It.prototype.getResponseText=It.prototype.oa,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Ha,gI=Mi.XhrIo=It}).apply(typeof Pp<"u"?Pp:typeof self<"u"?self:typeof window<"u"?window:{});var lM="@firebase/firestore";var Kt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Kt.UNAUTHENTICATED=new Kt(null),Kt.GOOGLE_CREDENTIALS=new Kt("google-credentials-uid"),Kt.FIRST_PARTY=new Kt("first-party-uid"),Kt.MOCK_USER=new Kt("mock-user");var pc="10.14.0";var So=new Lr("@firebase/firestore");function Cu(){return So.logLevel}function K(n,...e){if(So.logLevel<=an.DEBUG){let t=e.map(n0);So.debug(`Firestore (${pc}): ${n}`,...t)}}function Pi(n,...e){if(So.logLevel<=an.ERROR){let t=e.map(n0);So.error(`Firestore (${pc}): ${n}`,...t)}}function nc(n,...e){if(So.logLevel<=an.WARN){let t=e.map(n0);So.warn(`Firestore (${pc}): ${n}`,...t)}}function n0(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ce(n="Unexpected state"){let e=`FIRESTORE (${pc}) INTERNAL ASSERTION FAILED: `+n;throw Pi(e),new Error(e)}function Qe(n,e){n||ce()}function me(n,e){return n}var F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends bn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Up=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},bI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Kt.UNAUTHENTICATED))}shutdown(){}},SI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},DI=class{constructor(e){this.t=e,this.currentUser=Kt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new Up(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Kt(e)}},AI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Kt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},RI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new AI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Kt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},NI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Qe(this.o===void 0);let r=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe(typeof t.token=="string"),this.R=t.token,new xI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function U4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var jp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=U4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function je(n,e){return n<e?-1:n>e?1:0}function rc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Nt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var _e=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Nt(0,0))}static max(){return new n(new Nt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Bp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ce(),r===void 0?r=e.length-t:r>e.length-t&&ce(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},yt=class n extends Bp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},j4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,zn=class n extends Bp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return j4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var te=class n{constructor(e){this.path=e}static fromPath(e){return new n(yt.fromString(e))}static fromName(e){return new n(yt.fromString(e).popFirst(5))}static empty(){return new n(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new yt(e.slice()))}};var MI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};MI.UNKNOWN_ID=-1;function B4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=_e.fromTimestamp(r===1e9?new Nt(t+1,0):new Nt(t,r));return new Do(i,te.empty(),e)}function $4(n){return new Do(n.readTime,n.key,-1)}var Do=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(_e.min(),te.empty(),-1)}static max(){return new n(_e.max(),te.empty(),-1)}};function H4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(n.documentKey,e.documentKey),t!==0?t:je(n.largestBatchId,e.largestBatchId))}var q4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",PI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $u(n){return _(this,null,function*(){if(n.code!==F.FAILED_PRECONDITION||n.message!==q4)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var V=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(d=>{o[u]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function G4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Hu(n){return n.name==="IndexedDbTransactionError"}var qM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _m(n){return n==null}function Ru(n){return n===0&&1/n==-1/0}function z4(n){return typeof n=="number"&&Number.isInteger(n)&&!Ru(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var W4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Uoe=[...W4,"documentOverlays"],K4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Q4=K4,Y4=[...Q4,"indexConfiguration","indexState","indexEntries"];var joe=[...Y4,"globals"];function uM(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var bt=class n{constructor(e,t){this.comparator=e,this.root=t||ei.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ei.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xa(this.root,e,this.comparator,!0)}},Xa=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ei=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ce();let e=this.left.check();if(e!==this.right.check())throw ce();return e+(this.isRed()?0:1)}};ei.EMPTY=null,ei.RED=!0,ei.BLACK=!1;ei.EMPTY=new class{constructor(){this.size=0}get key(){throw ce()}get value(){throw ce()}get color(){throw ce()}get left(){throw ce()}get right(){throw ce()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var ln=class n{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new $p(this.data.getIterator())}getIteratorFrom(e){return new $p(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},$p=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Jr=class n{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new n([])}unionWith(e){let t=new ln(zn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return rc(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Hp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var un=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Hp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};un.EMPTY_BYTE_STRING=new un("");var Z4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oi(n){if(Qe(!!n),typeof n=="string"){let e=0,t=Z4.exec(n);if(Qe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ft(n.seconds),nanos:ft(n.nanos)}}function ft(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ts(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}function r0(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function i0(n){let e=n.mapValue.fields.__previous_value__;return r0(e)?i0(e):e}function xu(n){let e=Oi(n.mapValue.fields.__local_write_time__.timestampValue);return new Nt(e.seconds,e.nanos)}var OI=class{constructor(e,t,r,i,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},qp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var kp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ao(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?r0(n)?4:WM(n)?9007199254740991:zM(n)?10:11:ce()}function ri(n,e){if(n===e)return!0;let t=Ao(n);if(t!==Ao(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xu(n).isEqual(xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Oi(i.timestampValue),a=Oi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Ts(i.bytesValue).isEqual(Ts(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ft(i.geoPointValue.latitude)===ft(s.geoPointValue.latitude)&&ft(i.geoPointValue.longitude)===ft(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ft(i.integerValue)===ft(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ft(i.doubleValue),a=ft(s.doubleValue);return o===a?Ru(o)===Ru(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return rc(n.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(uM(o)!==uM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!ri(o[c],a[c])))return!1;return!0}(n,e);default:return ce()}}function Nu(n,e){return(n.values||[]).find(t=>ri(t,e))!==void 0}function ic(n,e){if(n===e)return 0;let t=Ao(n),r=Ao(e);if(t!==r)return je(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ft(s.integerValue||s.doubleValue),c=ft(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return dM(n.timestampValue,e.timestampValue);case 4:return dM(xu(n),xu(e));case 5:return je(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Ts(s),c=Ts(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let d=je(a[u],c[u]);if(d!==0)return d}return je(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=je(ft(s.latitude),ft(o.latitude));return a!==0?a:je(ft(s.longitude),ft(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return hM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,u,d;let f=s.fields||{},m=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,P=je(((u=v?.values)===null||u===void 0?void 0:u.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return P!==0?P:hM(v,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===kp.mapValue&&o===kp.mapValue)return 0;if(s===kp.mapValue)return 1;if(o===kp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let m=je(c[f],d[f]);if(m!==0)return m;let v=ic(a[c[f]],u[d[f]]);if(v!==0)return v}return je(c.length,d.length)}(n.mapValue,e.mapValue);default:throw ce()}}function dM(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return je(n,e);let t=Oi(n),r=Oi(e),i=je(t.seconds,r.seconds);return i!==0?i:je(t.nanos,r.nanos)}function hM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=ic(t[i],r[i]);if(s)return s}return je(t.length,r.length)}function sc(n){return kI(n)}function kI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Oi(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ts(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=kI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${kI(t.fields[o])}`;return i+"}"}(n.mapValue):ce()}function fM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function FI(n){return!!n&&"integerValue"in n}function s0(n){return!!n&&"arrayValue"in n}function pM(n){return!!n&&"nullValue"in n}function mM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lp(n){return!!n&&"mapValue"in n}function zM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function bu(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=bu(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=bu(n.arrayValue.values[t]);return e}return Object.assign({},n)}function WM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ar=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Lp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bu(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=bu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Lp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Lp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mc(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(bu(this.value))}};function KM(n){let e=[];return mc(n.fields,(t,r)=>{let i=new zn([t]);if(Lp(r)){let s=KM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Jr(e)}var Rr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,_e.min(),_e.min(),_e.min(),Ar.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,_e.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,_e.min(),_e.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,_e.min(),_e.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var oc=class{constructor(e,t){this.position=e,this.inclusive=t}};function gM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),t.key):r=ic(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ri(n.position[t],e.position[t]))return!1;return!0}var ac=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function J4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Gp=class{},jt=class n extends Gp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new VI(e,t,r):t==="array-contains"?new BI(e,r):t==="in"?new $I(e,r):t==="not-in"?new HI(e,r):t==="array-contains-any"?new qI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new UI(e,r):new jI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ic(t,this.value)):t!==null&&Ao(this.value)===Ao(t)&&this.matchesComparison(ic(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xr=class n extends Gp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return QM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function QM(n){return n.op==="and"}function YM(n){return X4(n)&&QM(n)}function X4(n){for(let e of n.filters)if(e instanceof xr)return!1;return!0}function LI(n){if(n instanceof jt)return n.field.canonicalString()+n.op.toString()+sc(n.value);if(YM(n))return n.filters.map(e=>LI(e)).join(",");{let e=n.filters.map(t=>LI(t)).join(",");return`${n.op}(${e})`}}function ZM(n,e){return n instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&ri(r.value,i.value)}(n,e):n instanceof xr?function(r,i){return i instanceof xr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&ZM(o,i.filters[a]),!0):!1}(n,e):void ce()}function JM(n){return n instanceof jt?function(t){return`${t.field.canonicalString()} ${t.op} ${sc(t.value)}`}(n):n instanceof xr?function(t){return t.op.toString()+" {"+t.getFilters().map(JM).join(" ,")+"}"}(n):"Filter"}var VI=class extends jt{constructor(e,t,r){super(e,t,r),this.key=te.fromName(r.referenceValue)}matches(e){let t=te.comparator(e.key,this.key);return this.matchesComparison(t)}},UI=class extends jt{constructor(e,t){super(e,"in",t),this.keys=XM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},jI=class extends jt{constructor(e,t){super(e,"not-in",t),this.keys=XM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function XM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>te.fromName(r.referenceValue))}var BI=class extends jt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return s0(t)&&Nu(t.arrayValue,this.value)}},$I=class extends jt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Nu(this.value.arrayValue,t)}},HI=class extends jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Nu(this.value.arrayValue,t)}},qI=class extends jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!s0(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}};var GI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function _M(n,e=null,t=[],r=[],i=null,s=null,o=null){return new GI(n,e,t,r,i,s,o)}function o0(n){let e=me(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>LI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_m(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sc(r)).join(",")),e.ue=t}return e.ue}function a0(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!J4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ZM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!vM(n.startAt,e.startAt)&&vM(n.endAt,e.endAt)}function zI(n){return te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Ro=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function e3(n,e,t,r,i,s,o,a){return new Ro(n,e,t,r,i,s,o,a)}function c0(n){return new Ro(n)}function yM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function eP(n){return n.collectionGroup!==null}function Su(n){let e=me(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ln(zn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ac(s,r))}),t.has(zn.keyField().canonicalString())||e.ce.push(new ac(zn.keyField(),r))}return e.ce}function ti(n){let e=me(n);return e.le||(e.le=t3(e,Su(n))),e.le}function t3(n,e){if(n.limitType==="F")return _M(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ac(i.field,s)});let t=n.endAt?new oc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new oc(n.startAt.position,n.startAt.inclusive):null;return _M(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function WI(n,e){let t=n.filters.concat([e]);return new Ro(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function KI(n,e,t){return new Ro(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ym(n,e){return a0(ti(n),ti(e))&&n.limitType===e.limitType}function tP(n){return`${o0(ti(n))}|lt:${n.limitType}`}function Ya(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>JM(i)).join(", ")}]`),_m(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>sc(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>sc(i)).join(",")),`Target(${r})`}(ti(n))}; limitType=${n.limitType})`}function wm(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):te.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of Su(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=gM(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,Su(r),i)||r.endAt&&!function(o,a,c){let u=gM(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,Su(r),i))}(n,e)}function n3(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function nP(n){return(e,t)=>{let r=!1;for(let i of Su(n)){let s=r3(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function r3(n,e,t){let r=n.field.isKeyField()?te.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?ic(c,u):ce()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ce()}}var bs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mc(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return GM(this.inner)}size(){return this.innerSize}};var i3=new bt(te.comparator);function ki(){return i3}var rP=new bt(te.comparator);function Tu(...n){let e=rP;for(let t of n)e=e.insert(t.key,t);return e}function iP(n){let e=rP;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Eo(){return Du()}function sP(){return Du()}function Du(){return new bs(n=>n.toString(),(n,e)=>n.isEqual(e))}var s3=new bt(te.comparator),o3=new ln(te.comparator);function xe(...n){let e=o3;for(let t of n)e=e.add(t);return e}var a3=new ln(je);function c3(){return a3}function l0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function oP(n){return{integerValue:""+n}}function l3(n,e){return z4(e)?oP(e):l0(n,e)}var cc=class{constructor(){this._=void 0}};function u3(n,e,t){return n instanceof lc?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&r0(s)&&(s=i0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof xo?cP(n,e):n instanceof No?lP(n,e):function(i,s){let o=aP(i,s),a=wM(o)+wM(i.Pe);return FI(o)&&FI(i.Pe)?oP(a):l0(i.serializer,a)}(n,e)}function d3(n,e,t){return n instanceof xo?cP(n,e):n instanceof No?lP(n,e):t}function aP(n,e){return n instanceof uc?function(r){return FI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var lc=class extends cc{},xo=class extends cc{constructor(e){super(),this.elements=e}};function cP(n,e){let t=uP(e);for(let r of n.elements)t.some(i=>ri(i,r))||t.push(r);return{arrayValue:{values:t}}}var No=class extends cc{constructor(e){super(),this.elements=e}};function lP(n,e){let t=uP(e);for(let r of n.elements)t=t.filter(i=>!ri(i,r));return{arrayValue:{values:t}}}var uc=class extends cc{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function wM(n){return ft(n.integerValue||n.doubleValue)}function uP(n){return s0(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function h3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof xo&&i instanceof xo||r instanceof No&&i instanceof No?rc(r.elements,i.elements,ri):r instanceof uc&&i instanceof uc?ri(r.Pe,i.Pe):r instanceof lc&&i instanceof lc}(n.transform,e.transform)}var QI=class{constructor(e,t){this.version=e,this.transformResults=t}},bo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Vp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var dc=class{};function dP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zp(n.key,bo.none()):new Mo(n.key,n.data,bo.none());{let t=n.data,r=Ar.empty(),i=new ln(zn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Fi(n.key,r,new Jr(i.toArray()),bo.none())}}function f3(n,e,t){n instanceof Mo?function(i,s,o){let a=i.value.clone(),c=EM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Fi?function(i,s,o){if(!Vp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=EM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(hP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Au(n,e,t,r){return n instanceof Mo?function(s,o,a,c){if(!Vp(s.precondition,o))return a;let u=s.value.clone(),d=CM(s.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Fi?function(s,o,a,c){if(!Vp(s.precondition,o))return a;let u=CM(s.fieldTransforms,c,o),d=o.data;return d.setAll(hP(s)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Vp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function p3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=aP(r.transform,i||null);s!=null&&(t===null&&(t=Ar.empty()),t.set(r.field,s))}return t||null}function IM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&rc(r,i,(s,o)=>h3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Mo=class extends dc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Fi=class extends dc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function hP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function EM(n,e,t){let r=new Map;Qe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,d3(o,a,t[i]))}return r}function CM(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,u3(s,o,e))}return r}var zp=class extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},YI=class extends dc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var ZI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&f3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Au(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Au(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=sP();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=dP(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(_e.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xe())}isEqual(e){return this.batchId===e.batchId&&rc(this.mutations,e.mutations,(t,r)=>IM(t,r))&&rc(this.baseMutations,e.baseMutations,(t,r)=>IM(t,r))}},JI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Qe(e.mutations.length===r.length);let i=function(){return s3}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var XI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var eE=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Vt,ke;function m3(n){switch(n){default:return ce();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function fP(n){if(n===void 0)return Pi("GRPC error has no .code"),F.UNKNOWN;switch(n){case Vt.OK:return F.OK;case Vt.CANCELLED:return F.CANCELLED;case Vt.UNKNOWN:return F.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return F.INTERNAL;case Vt.UNAVAILABLE:return F.UNAVAILABLE;case Vt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Vt.NOT_FOUND:return F.NOT_FOUND;case Vt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Vt.ABORTED:return F.ABORTED;case Vt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Vt.DATA_LOSS:return F.DATA_LOSS;default:return ce()}}(ke=Vt||(Vt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";var TM=null;function g3(){return new TextEncoder}var v3=new Is([4294967295,4294967295],0);function bM(n){let e=g3().encode(n),t=new mI;return t.update(e),new Uint8Array(t.digest())}function SM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Is([t,r],0),new Is([i,s],0)]}var tE=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Co(`Invalid padding: ${t}`);if(r<0)throw new Co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Co(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Co(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Is.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Is.fromNumber(r)));return i.compare(v3)===1&&(i=new Is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=bM(e),[r,i]=SM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=bM(e),[r,i]=SM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Co=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Wp=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(_e.min(),i,new bt(je),ki(),xe())}},Mu=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,xe(),xe(),xe())}};var ec=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Kp=class{constructor(e,t){this.targetId=e,this.me=t}},Qp=class{constructor(e,t,r=un.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Yp=class{constructor(){this.fe=0,this.ge=AM(),this.pe=un.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=xe(),t=xe(),r=xe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ce()}}),new Mu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=AM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Qe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},nE=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ki(),this.qe=DM(),this.Qe=new bt(je)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ce()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(zI(s))if(r===0){let o=new te(s.path);this.Ue(t,o,Rr.newNoDocument(o,_e.min()))}else Qe(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}TM?.et(function(d,f,m,v,w){var P,x,L,q,Q,ne;let Ze={localCacheCount:d,existenceFilterCount:f.count,databaseId:m.database,projectId:m.projectId},se=f.unchangedNames;return se&&(Ze.bloomFilter={applied:w===0,hashCount:(P=se?.hashCount)!==null&&P!==void 0?P:0,bitmapLength:(q=(L=(x=se?.bits)===null||x===void 0?void 0:x.bitmap)===null||L===void 0?void 0:L.length)!==null&&q!==void 0?q:0,padding:(ne=(Q=se?.bits)===null||Q===void 0?void 0:Q.padding)!==null&&ne!==void 0?ne:0,mightContain:b=>{var y;return(y=v?.mightContain(b))!==null&&y!==void 0&&y}}),Ze}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Ts(r).toUint8Array()}catch(c){if(c instanceof Hp)return nc("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new tE(o,i,s)}catch(c){return nc(c instanceof Co?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&zI(a.target)){let c=new te(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Rr.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=xe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Wp(e,t,this.Qe,this.ke,r);return this.ke=ki(),this.qe=DM(),this.Qe=new bt(je),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Yp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new ln(je),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Yp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function DM(){return new bt(te.comparator)}function AM(){return new bt(te.comparator)}var _3={asc:"ASCENDING",desc:"DESCENDING"},y3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},w3={and:"AND",or:"OR"},rE=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function iE(n,e){return n.useProto3Json||_m(e)?e:{value:e}}function Zp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function I3(n,e){return Zp(n,e.toTimestamp())}function ni(n){return Qe(!!n),_e.fromTimestamp(function(t){let r=Oi(t);return new Nt(r.seconds,r.nanos)}(n))}function u0(n,e){return sE(n,e).canonicalString()}function sE(n,e){let t=function(i){return new yt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function mP(n){let e=yt.fromString(n);return Qe(wP(e)),e}function oE(n,e){return u0(n.databaseId,e.path)}function II(n,e){let t=mP(e);if(t.get(1)!==n.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new te(vP(t))}function gP(n,e){return u0(n.databaseId,e)}function E3(n){let e=mP(n);return e.length===4?yt.emptyPath():vP(e)}function aE(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function vP(n){return Qe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function RM(n,e,t){return{name:oE(n,e),fields:t.value.mapValue.fields}}function C3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,d){return u.useProto3Json?(Qe(d===void 0||typeof d=="string"),un.fromBase64String(d||"")):(Qe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),un.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let d=u.code===void 0?F.UNKNOWN:fP(u.code);return new z(d,u.message||"")}(o);t=new Qp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=II(n,r.document.name),s=ni(r.document.updateTime),o=r.document.createTime?ni(r.document.createTime):_e.min(),a=new Ar({mapValue:{fields:r.document.fields}}),c=Rr.newFoundDocument(i,s,o,a),u=r.targetIds||[],d=r.removedTargetIds||[];t=new ec(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=II(n,r.document),s=r.readTime?ni(r.readTime):_e.min(),o=Rr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ec([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=II(n,r.document),s=r.removedTargetIds||[];t=new ec([],s,i,null)}else{if(!("filter"in e))return ce();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new eE(i,s),a=r.targetId;t=new Kp(a,o)}}return t}function T3(n,e){let t;if(e instanceof Mo)t={update:RM(n,e.key,e.value)};else if(e instanceof zp)t={delete:oE(n,e.key)};else if(e instanceof Fi)t={update:RM(n,e.key,e.data),updateMask:P3(e.fieldMask)};else{if(!(e instanceof YI))return ce();t={verify:oE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof lc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof No)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ce()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:I3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ce()}(n,e.precondition)),t}function b3(n,e){return n&&n.length>0?(Qe(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?ni(i.updateTime):ni(s);return o.isEqual(_e.min())&&(o=ni(s)),new QI(o,i.transformResults||[])}(t,e))):[]}function S3(n,e){return{documents:[gP(n,e.path)]}}function D3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=gP(n,i);let s=function(u){if(u.length!==0)return yP(xr.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:Za(m.field),direction:x3(m.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=iE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function A3(n){let e=E3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Qe(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let m=_P(f);return m instanceof xr&&YM(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(w){return new ac(Ja(w.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,_m(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(f){let m=!!f.before,v=f.values||[];return new oc(v,m)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let m=!f.before,v=f.values||[];return new oc(v,m)}(t.endAt)),e3(e,i,o,s,a,"F",c,u)}function R3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _P(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Ja(t.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Ja(t.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Ja(t.unaryFilter.field);return jt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Ja(t.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ce()}}(n):n.fieldFilter!==void 0?function(t){return jt.create(Ja(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ce()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xr.create(t.compositeFilter.filters.map(r=>_P(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ce()}}(t.compositeFilter.op))}(n):ce()}function x3(n){return _3[n]}function N3(n){return y3[n]}function M3(n){return w3[n]}function Za(n){return{fieldPath:n.canonicalString()}}function Ja(n){return zn.fromServerFormat(n.fieldPath)}function yP(n){return n instanceof jt?function(t){if(t.op==="=="){if(mM(t.value))return{unaryFilter:{field:Za(t.field),op:"IS_NAN"}};if(pM(t.value))return{unaryFilter:{field:Za(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(mM(t.value))return{unaryFilter:{field:Za(t.field),op:"IS_NOT_NAN"}};if(pM(t.value))return{unaryFilter:{field:Za(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Za(t.field),op:N3(t.op),value:t.value}}}(n):n instanceof xr?function(t){let r=t.getFilters().map(i=>yP(i));return r.length===1?r[0]:{compositeFilter:{op:M3(t.op),filters:r}}}(n):ce()}function P3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Pu=class n{constructor(e,t,r,i,s=_e.min(),o=_e.min(),a=un.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cE=class{constructor(e){this.ct=e}};function O3(n){let e=A3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?KI(e,e.limit,"L"):e}var Jp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ft(e.integerValue));else if("doubleValue"in e){let r=ft(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Ru(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Oi(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ts(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?WM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ce()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ft(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),te.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Jp.vt=new Jp;var lE=class{constructor(){this.un=new uE}addToCollectionParentIndex(e,t){return this.un.add(t),V.resolve()}getCollectionParents(e,t){return V.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return V.resolve()}deleteFieldIndex(e,t){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,t){return V.resolve()}getDocumentsMatchingTarget(e,t){return V.resolve(null)}getIndexType(e,t){return V.resolve(0)}getFieldIndexes(e,t){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,t){return V.resolve(Do.min())}getMinOffsetFromCollectionGroup(e,t){return V.resolve(Do.min())}updateCollectionGroup(e,t,r){return V.resolve()}updateIndexEntries(e,t){return V.resolve()}},uE=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ln(yt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ln(yt.comparator)).toArray()}};var $oe=new Uint8Array(0);var Zr=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Zr.DEFAULT_COLLECTION_PERCENTILE=10,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zr.DEFAULT=new Zr(41943040,Zr.DEFAULT_COLLECTION_PERCENTILE,Zr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zr.DISABLED=new Zr(-1,0,0);var Ou=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var dE=class{constructor(){this.changes=new bs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Rr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?V.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hE=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var fE=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Au(r.mutation,i,Jr.empty(),Nt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,t,r=xe()){let i=Eo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=Tu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Eo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,xe()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ki(),o=Du(),a=function(){return Du()}();return t.forEach((c,u)=>{let d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Fi)?s=s.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Au(d.mutation,u,d.mutation.getFieldMask(),Nt.now())):o.set(u.key,Jr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var f;return a.set(u,new hE(d,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=Du(),i=new bt((o,a)=>o-a),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let d=r.get(c)||Jr.empty();d=a.applyToLocalView(u,d),r.set(c,d);let f=(i.get(a.batchId)||xe()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,d=c.value,f=sP();d.forEach(m=>{if(!s.has(m)){let v=dP(t.get(m),r.get(m));v!==null&&f.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):eP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):V.resolve(Eo()),a=-1,c=s;return o.next(u=>V.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?V.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,xe())).next(d=>({batchId:a,changes:iP(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(r=>{let i=Tu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=Tu();return this.indexManager.getCollectionParents(e,s).next(a=>V.forEach(a,c=>{let u=function(f,m){return new Ro(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,u)=>{let d=u.getKey();o.get(d)===null&&(o=o.insert(d,Rr.newInvalidDocument(d)))});let a=Tu();return o.forEach((c,u)=>{let d=s.get(c);d!==void 0&&Au(d.mutation,u,Jr.empty(),Nt.now()),wm(t,u)&&(a=a.insert(c,u))}),a})}};var pE=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return V.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:ni(i.createTime)}}(t)),V.resolve()}getNamedQuery(e,t){return V.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:O3(i.bundledQuery),readTime:ni(i.readTime)}}(t)),V.resolve()}};var mE=class{constructor(){this.overlays=new bt(te.comparator),this.Ir=new Map}getOverlay(e,t){return V.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Eo();return V.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),V.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,t,r){let i=Eo(),s=t.length+1,o=new te(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return V.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new bt((u,d)=>u-d),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Eo(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}let a=Eo(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return V.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new XI(t,r));let s=this.Ir.get(t);s===void 0&&(s=xe(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var gE=class{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,V.resolve()}};var ku=class{constructor(){this.Tr=new ln(Ut.Er),this.dr=new ln(Ut.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Ut(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Ut(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new te(new yt([])),r=new Ut(t,e),i=new Ut(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new te(new yt([])),r=new Ut(t,e),i=new Ut(t,e+1),s=xe();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ut(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Ut=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return te.comparator(e.key,t.key)||je(e.wr,t.wr)}static Ar(e,t){return je(e.wr,t.wr)||te.comparator(e.key,t.key)}};var vE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new ln(Ut.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new ZI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Ut(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,t){return V.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return V.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Ut(t,0),i=new Ut(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),V.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ln(je);return t.forEach(i=>{let s=new Ut(i,0),o=new Ut(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;te.isDocumentKey(s)||(s=s.child(""));let o=new Ut(new te(s),0),a=new ln(je);return this.br.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.wr)),!0)},o),V.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Qe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(t.mutations,i=>{let s=new Ut(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Ut(t,0),i=this.br.firstAfterOrEqual(r);return V.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _E=class{constructor(e){this.Mr=e,this.docs=function(){return new bt(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return V.resolve(r?r.document.mutableCopy():Rr.newInvalidDocument(t))}getEntries(e,t){let r=ki();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Rr.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ki(),o=t.path,a=new te(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||H4($4(d),r)<=0||(i.has(d.key)||wm(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return V.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ce()}Or(e,t){return V.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new yE(this)}getSize(e){return V.resolve(this.size)}},yE=class extends dE{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),V.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var wE=class{constructor(e){this.persistence=e,this.Nr=new bs(t=>o0(t),a0),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ku,this.targetCount=0,this.kr=Ou.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),V.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Ou(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,V.resolve()}updateTargetData(e,t){return this.Kn(t),V.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),V.waitFor(s).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return V.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),V.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),V.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),V.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return V.resolve(r)}containsKey(e,t){return V.resolve(this.Br.containsKey(t))}};var IE=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new qM(0),this.Kr=!1,this.Kr=!0,this.$r=new gE,this.referenceDelegate=e(this),this.Ur=new wE(this),this.indexManager=new lE,this.remoteDocumentCache=function(i){return new _E(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cE(t),this.Gr=new pE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new vE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){K("MemoryPersistence","Starting transaction:",e);let i=new EE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},EE=class extends PI{constructor(e){super(),this.currentSequenceNumber=e}},CE=class n{constructor(e){this.persistence=e,this.Jr=new ku,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ce()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),V.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{let i=te.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,_e.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return V.or([()=>V.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var TE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=xe(),i=xe();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var bE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var SE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qb()?8:G4(on())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new bE;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Cu()<=an.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Ya(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Cu()<=an.DEBUG&&K("QueryEngine","Query:",Ya(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Cu()<=an.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Ya(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(t))):V.resolve())}Yi(e,t){if(yM(t))return V.resolve(null);let r=ti(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=KI(t,null,"F"),r=ti(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=xe(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ts(t,a);return this.ns(t,u,o,c.readTime)?this.Yi(e,KI(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return yM(t)||i.isEqual(_e.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?V.resolve(null):(Cu()<=an.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ya(t)),this.rs(e,o,t,B4(i,-1)).next(a=>a))})}ts(e,t){let r=new ln(nP(e));return t.forEach((i,s)=>{wm(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return Cu()<=an.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Ya(t)),this.Ji.getDocumentsMatchingQuery(e,t,Do.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var DE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new bt(je),this._s=new bs(s=>o0(s),a0),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function k3(n,e,t,r){return new DE(n,e,t,r)}function IP(n,e){return _(this,null,function*(){let t=me(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=xe();for(let u of i){o.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}for(let u of s){a.push(u.batchId);for(let d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})})}function F3(n,e){let t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,d){let f=u.batch,m=f.keys(),v=V.resolve();return m.forEach(w=>{v=v.next(()=>d.getEntry(c,w)).next(P=>{let x=u.docVersions.get(w);Qe(x!==null),P.version.compareTo(x)<0&&(f.applyToRemoteDocument(P,u),P.isValidDocument()&&(P.setReadTime(u.commitVersion),d.addEntry(P)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=xe();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function EP(n){let e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function L3(n,e){let t=me(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let m=i.get(f);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(un.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(f,v),function(P,x,L){return P.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,v,d)&&a.push(t.Ur.updateTargetData(s,v))});let c=ki(),u=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(V3(s,o,e.documentUpdates).next(d=>{c=d.Ps,u=d.Is})),!r.isEqual(_e.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return V.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function V3(n,e,t){let r=xe(),i=xe();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ki();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(_e.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function U3(n,e){let t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function j3(n,e){let t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,V.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Pu(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function AE(n,e,t){return _(this,null,function*(){let r=me(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Hu(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function xM(n,e,t){let r=me(n),i=_e.min(),s=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){let f=me(c),m=f._s.get(d);return m!==void 0?V.resolve(f.os.get(m)):f.Ur.getTargetData(u,d)}(r,o,ti(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:_e.min(),t?s:xe())).next(a=>(B3(r,n3(e),a),{documents:a,Ts:s})))}function B3(n,e,t){let r=n.us.get(e)||_e.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Xp=class{constructor(){this.activeTargetIds=c3()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var RE=class{constructor(){this.so=new Xp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Xp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var xE=class{_o(e){}shutdown(){}};var em=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Fp=null;function EI(){return Fp===null?Fp=function(){return 268435456+Math.round(2147483648*Math.random())}():Fp++,"0x"+Fp.toString(16)}var $3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var NE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var cn="WebChannelConnection",ME=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=EI(),c=this.xo(t,r.toUriEncodedString());K("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(t,c,u,i).then(d=>(K("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw nc("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pc}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=$3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=EI();return new Promise((o,a)=>{let c=new gI;c.setWithCredentials(!0),c.listenOnce(vI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Eu.NO_ERROR:let d=c.getResponseJson();K(cn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Eu.TIMEOUT:K(cn,`RPC '${e}' ${s} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Eu.HTTP_ERROR:let f=c.getStatus();if(K(cn,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let w=function(x){let L=x.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(L)>=0?L:F.UNKNOWN}(v.status);a(new z(w,v.message))}else a(new z(F.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:ce()}}finally{K(cn,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);K(cn,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){let i=EI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=wI(),a=yI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");K(cn,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),m=!1,v=!1,w=new NE({Io:x=>{v?K(cn,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(m||(K(cn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),K(cn,`RPC '${e}' stream ${i} sending:`,x),f.send(x))},To:()=>f.close()}),P=(x,L,q)=>{x.listen(L,Q=>{try{q(Q)}catch(ne){setTimeout(()=>{throw ne},0)}})};return P(f,Qa.EventType.OPEN,()=>{v||(K(cn,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),P(f,Qa.EventType.CLOSE,()=>{v||(v=!0,K(cn,`RPC '${e}' stream ${i} transport closed`),w.So())}),P(f,Qa.EventType.ERROR,x=>{v||(v=!0,nc(cn,`RPC '${e}' stream ${i} transport errored:`,x),w.So(new z(F.UNAVAILABLE,"The operation could not be completed")))}),P(f,Qa.EventType.MESSAGE,x=>{var L;if(!v){let q=x.data[0];Qe(!!q);let Q=q,ne=Q.error||((L=Q[0])===null||L===void 0?void 0:L.error);if(ne){K(cn,`RPC '${e}' stream ${i} received error:`,ne);let Ze=ne.status,se=function(I){let S=Vt[I];if(S!==void 0)return fP(S)}(Ze),b=ne.message;se===void 0&&(se=F.INTERNAL,b="Unknown error status: "+Ze+" with message "+ne.message),v=!0,w.So(new z(se,b)),f.close()}else K(cn,`RPC '${e}' stream ${i} received:`,q),w.bo(q)}}),P(a,_I.STAT_EVENT,x=>{x.stat===Op.PROXY?K(cn,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===Op.NOPROXY&&K(cn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function CI(){return typeof document<"u"?document:null}function Im(n){return new rE(n,!0)}var tm=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&K("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var nm=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new tm(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===F.RESOURCE_EXHAUSTED?(Pi(t.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},PE=class extends nm{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=C3(this.serializer,e),r=function(s){if(!("targetChange"in s))return _e.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?_e.min():o.readTime?ni(o.readTime):_e.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=aE(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=zI(c)?{documents:S3(s,c)}:{query:D3(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=pP(s,o.resumeToken);let u=iE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(_e.min())>0){a.readTime=Zp(s,o.snapshotVersion.toTimestamp());let u=iE(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=R3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=aE(this.serializer),t.removeTarget=e,this.a_(t)}},OE=class extends nm{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=b3(e.writeResults,e.commitTime),r=ni(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=aE(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>T3(this.serializer,r))};this.a_(t)}};var kE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,sE(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,sE(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},FE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Pi(t),this.D_=!1):K("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var LE=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){ko(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let u=me(c);u.L_.add(4),yield qu(u),u.q_.set("Unknown"),u.L_.delete(4),yield Em(u)})}(this))}))}),this.q_=new FE(r,i)}};function Em(n){return _(this,null,function*(){if(ko(n))for(let e of n.B_)yield e(!0)})}function qu(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function CP(n,e){let t=me(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),p0(t)?f0(t):gc(t).r_()&&h0(t,e))}function d0(n,e){let t=me(n),r=gc(t);t.N_.delete(e),r.r_()&&TP(t,e),t.N_.size===0&&(r.r_()?r.o_():ko(t)&&t.q_.set("Unknown"))}function h0(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gc(n).A_(e)}function TP(n,e){n.Q_.xe(e),gc(n).R_(e)}function f0(n){n.Q_=new nE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),gc(n).start(),n.q_.v_()}function p0(n){return ko(n)&&!gc(n).n_()&&n.N_.size>0}function ko(n){return me(n).L_.size===0}function bP(n){n.Q_=void 0}function H3(n){return _(this,null,function*(){n.q_.set("Online")})}function q3(n){return _(this,null,function*(){n.N_.forEach((e,t)=>{h0(n,e)})})}function G3(n,e){return _(this,null,function*(){bP(n),p0(n)?(n.q_.M_(e),f0(n)):n.q_.set("Unknown")})}function z3(n,e,t){return _(this,null,function*(){if(n.q_.set("Online"),e instanceof Qp&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield rm(n,r)}else if(e instanceof ec?n.Q_.Ke(e):e instanceof Kp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(_e.min()))try{let r=yield EP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(u);d&&s.N_.set(u,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(un.EMPTY_BYTE_STRING,d.snapshotVersion)),TP(s,c);let f=new Pu(d.target,c,u,d.sequenceNumber);h0(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){K("RemoteStore","Failed to raise snapshot:",r),yield rm(n,r)}})}function rm(n,e,t){return _(this,null,function*(){if(!Hu(e))throw e;n.L_.add(1),yield qu(n),n.q_.set("Offline"),t||(t=()=>EP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Em(n)}))})}function SP(n,e){return e().catch(t=>rm(n,t,e))}function Cm(n){return _(this,null,function*(){let e=me(n),t=Ss(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;W3(e);)try{let i=yield U3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,K3(e,i)}catch(i){yield rm(e,i)}DP(e)&&AP(e)})}function W3(n){return ko(n)&&n.O_.length<10}function K3(n,e){n.O_.push(e);let t=Ss(n);t.r_()&&t.V_&&t.m_(e.mutations)}function DP(n){return ko(n)&&!Ss(n).n_()&&n.O_.length>0}function AP(n){Ss(n).start()}function Q3(n){return _(this,null,function*(){Ss(n).p_()})}function Y3(n){return _(this,null,function*(){let e=Ss(n);for(let t of n.O_)e.m_(t.mutations)})}function Z3(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=JI.from(r,e,t);yield SP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Cm(n)})}function J3(n,e){return _(this,null,function*(){e&&Ss(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return m3(o)&&o!==F.ABORTED}(i.code)){let s=r.O_.shift();Ss(r).s_(),yield SP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Cm(r)}})}(n,e)),DP(n)&&AP(n)})}function NM(n,e){return _(this,null,function*(){let t=me(n);t.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let r=ko(t);t.L_.add(3),yield qu(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Em(t)})}function X3(n,e){return _(this,null,function*(){let t=me(n);e?(t.L_.delete(2),yield Em(t)):e||(t.L_.add(2),yield qu(t),t.q_.set("Unknown"))})}function gc(n){return n.K_||(n.K_=function(t,r,i){let s=me(t);return s.w_(),new PE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:H3.bind(null,n),Ro:q3.bind(null,n),mo:G3.bind(null,n),d_:z3.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.K_.s_(),p0(n)?f0(n):n.q_.set("Unknown")):(yield n.K_.stop(),bP(n))}))),n.K_}function Ss(n){return n.U_||(n.U_=function(t,r,i){let s=me(t);return s.w_(),new OE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Q3.bind(null,n),mo:J3.bind(null,n),f_:Y3.bind(null,n),g_:Z3.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield Cm(n)):(yield n.U_.stop(),n.O_.length>0&&(K("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var VE=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function m0(n,e){if(Pi("AsyncQueue",`${e}: ${n}`),Hu(n))return new z(F.UNAVAILABLE,`${e}: ${n}`);throw n}var im=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||te.comparator(t.key,r.key):(t,r)=>te.comparator(t.key,r.key),this.keyedMap=Tu(),this.sortedSet=new bt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var sm=class{constructor(){this.W_=new bt(te.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ce():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},hc=class n{constructor(e,t,r,i,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,im.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ym(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var UE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},jE=class{constructor(){this.queries=MM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=me(t),s=i.queries;i.queries=MM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}};function MM(){return new bs(n=>tP(n),ym)}function RP(n,e){return _(this,null,function*(){let t=me(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new UE,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=m0(o,`Initialization of query '${Ya(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&g0(t)})}function xP(n,e){return _(this,null,function*(){let t=me(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function e6(n,e){let t=me(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&g0(t)}function t6(n,e,t){let r=me(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function g0(n){n.Y_.forEach(e=>{e.next()})}var BE,PM;(PM=BE||(BE={})).ea="default",PM.Cache="cache";var om=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new hc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=hc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==BE.Cache}};var am=class{constructor(e){this.key=e}},cm=class{constructor(e){this.key=e}},$E=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=xe(),this.mutatedKeys=xe(),this.Aa=nP(e),this.Ra=new im(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new sm,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let m=i.get(d),v=wm(this.query,f)?f:null,w=!!m&&this.mutatedKeys.has(m.key),P=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),x=!1;m&&v?m.data.isEqual(v.data)?w!==P&&(r.track({type:3,doc:v}),x=!0):this.ga(m,v)||(r.track({type:2,doc:v}),x=!0,(c&&this.Aa(v,c)>0||u&&this.Aa(v,u)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),x=!0):m&&!v&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(a=!0)),x&&(v?(o=o.add(v),s=P?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(v,w){let P=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce()}};return P(v)-P(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,o.length!==0||u?{snapshot:new hc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new sm,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=xe(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new cm(r))}),this.da.forEach(r=>{e.has(r)||t.push(new am(r))}),t}ba(e){this.Ta=e.Ts,this.da=xe();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return hc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},HE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},qE=class{constructor(e){this.key=e,this.va=!1}},GE=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new bs(a=>tP(a),ym),this.Ma=new Map,this.xa=new Set,this.Oa=new bt(te.comparator),this.Na=new Map,this.La=new ku,this.Ba={},this.ka=new Map,this.qa=Ou.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function n6(n,e,t=!0){return _(this,null,function*(){let r=FP(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield NP(r,e,t,!0),i})}function r6(n,e){return _(this,null,function*(){let t=FP(n);yield NP(t,e,!0,!1)})}function NP(n,e,t,r){return _(this,null,function*(){let i=yield j3(n.localStore,ti(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield i6(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&CP(n.remoteStore,i),a})}function i6(n,e,t,r,i){return _(this,null,function*(){n.Ka=(f,m,v)=>function(P,x,L,q){return _(this,null,function*(){let Q=x.view.ma(L);Q.ns&&(Q=yield xM(P.localStore,x.query,!1).then(({documents:b})=>x.view.ma(b,Q)));let ne=q&&q.targetChanges.get(x.targetId),Ze=q&&q.targetMismatches.get(x.targetId)!=null,se=x.view.applyChanges(Q,P.isPrimaryClient,ne,Ze);return kM(P,x.targetId,se.wa),se.snapshot})}(n,f,m,v);let s=yield xM(n.localStore,e,!0),o=new $E(e,s.Ts),a=o.ma(s.documents),c=Mu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=o.applyChanges(a,n.isPrimaryClient,c);kM(n,t,u.wa);let d=new HE(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot})}function s6(n,e,t){return _(this,null,function*(){let r=me(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ym(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield AE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&d0(r.remoteStore,i.targetId),zE(r,i.targetId)}).catch($u))):(zE(r,i.targetId),yield AE(r.localStore,i.targetId,!0))})}function o6(n,e){return _(this,null,function*(){let t=me(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),d0(t.remoteStore,r.targetId))})}function a6(n,e,t){return _(this,null,function*(){let r=p6(n);try{let i=yield function(o,a){let c=me(o),u=Nt.now(),d=a.reduce((v,w)=>v.add(w.key),xe()),f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let w=ki(),P=xe();return c.cs.getEntries(v,d).next(x=>{w=x,w.forEach((L,q)=>{q.isValidDocument()||(P=P.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,w)).next(x=>{f=x;let L=[];for(let q of a){let Q=p3(q,f.get(q.key).overlayedDocument);Q!=null&&L.push(new Fi(q.key,Q,KM(Q.value.mapValue),bo.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,L,a)}).next(x=>{m=x;let L=x.applyToLocalDocumentSet(f,P);return c.documentOverlayCache.saveOverlays(v,x.batchId,L)})}).then(()=>({batchId:m.batchId,changes:iP(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Ba[o.currentUser.toKey()];u||(u=new bt(je)),u=u.insert(a,c),o.Ba[o.currentUser.toKey()]=u}(r,i.batchId,t),yield Gu(r,i.changes),yield Cm(r.remoteStore)}catch(i){let s=m0(i,"Failed to persist write");t.reject(s)}})}function MP(n,e){return _(this,null,function*(){let t=me(n);try{let r=yield L3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?Qe(o.va):i.removedDocuments.size>0&&(Qe(o.va),o.va=!1))}),yield Gu(t,r,e)}catch(r){yield $u(r)}})}function OM(n,e,t){let r=me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=me(o);c.onlineState=a;let u=!1;c.queries.forEach((d,f)=>{for(let m of f.j_)m.Z_(a)&&(u=!0)}),u&&g0(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function c6(n,e,t){return _(this,null,function*(){let r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new bt(te.comparator);o=o.insert(s,Rr.newNoDocument(s,_e.min()));let a=xe().add(s),c=new Wp(_e.min(),new Map,new bt(je),o,a);yield MP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),v0(r)}else yield AE(r.localStore,e,!1).then(()=>zE(r,e,t)).catch($u)})}function l6(n,e){return _(this,null,function*(){let t=me(n),r=e.batch.batchId;try{let i=yield F3(t.localStore,e);OP(t,r,null),PP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Gu(t,i)}catch(i){yield $u(i)}})}function u6(n,e,t){return _(this,null,function*(){let r=me(n);try{let i=yield function(o,a){let c=me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(Qe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);OP(r,e,t),PP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Gu(r,i)}catch(i){yield $u(i)}})}function PP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function OP(n,e,t){let r=me(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function zE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||kP(n,r)})}function kP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(d0(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),v0(n))}function kM(n,e,t){for(let r of t)r instanceof am?(n.La.addReference(r.key,e),d6(n,r)):r instanceof cm?(K("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||kP(n,r.key)):ce()}function d6(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(K("SyncEngine","New document in limbo: "+t),n.xa.add(r),v0(n))}function v0(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new te(yt.fromString(e)),r=n.qa.next();n.Na.set(r,new qE(t)),n.Oa=n.Oa.insert(t,r),CP(n.remoteStore,new Pu(ti(c0(t.path)),r,"TargetPurposeLimboResolution",qM.oe))}}function Gu(n,e,t){return _(this,null,function*(){let r=me(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){let f=u?!u.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){i.push(u);let f=TE.Wi(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,u){return _(this,null,function*(){let d=me(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>V.forEach(u,m=>V.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>V.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!Hu(f))throw f;K("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let m=f.targetId;if(!f.fromCache){let v=d.os.get(m),w=v.snapshotVersion,P=v.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(m,P)}}})}(r.localStore,s))})}function h6(n,e){return _(this,null,function*(){let t=me(n);if(!t.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let r=yield IP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new z(F.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Gu(t,r.hs)}})}function f6(n,e){let t=me(n),r=t.Na.get(e);if(r&&r.va)return xe().add(r.key);{let i=xe(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function FP(n){let e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=MP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=f6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=c6.bind(null,e),e.Ca.d_=e6.bind(null,e.eventManager),e.Ca.$a=t6.bind(null,e.eventManager),e}function p6(n){let e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=l6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=u6.bind(null,e),e}var FM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=Im(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return k3(this.persistence,new SE,t.initialUser,this.serializer)}Ga(t){return new IE(CE.Zr,this.serializer)}Wa(t){return new RE}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var m6=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>OM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=h6.bind(null,this.syncEngine),yield X3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new jE}()}createDatastore(t){let r=Im(t.databaseInfo.databaseId),i=function(o){return new ME(o)}(t.databaseInfo);return function(o,a,c,u){return new kE(o,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new LE(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>OM(this.syncEngine,r,0),function(){return em.D()?new em:new xE}())}createSyncEngine(t,r){return function(s,o,a,c,u,d,f){let m=new GE(s,o,a,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(s){return _(this,null,function*(){let o=me(s);K("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield qu(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var lm=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var WE=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Kt.UNAUTHENTICATED,this.clientId=jp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){K("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(K("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=m0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function TI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield IP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function LM(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield g6(n);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>NM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>NM(e.remoteStore,i)),n._onlineComponents=e})}function g6(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield TI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;nc("Error using user provided cache. Falling back to memory cache: "+t),yield TI(n,new FM)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield TI(n,new FM);return n._offlineComponents})}function LP(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield LM(n,n._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield LM(n,new m6))),n._onlineComponents})}function v6(n){return LP(n).then(e=>e.syncEngine)}function KE(n){return _(this,null,function*(){let e=yield LP(n),t=e.eventManager;return t.onListen=n6.bind(null,e.syncEngine),t.onUnlisten=s6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=r6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=o6.bind(null,e.syncEngine),t})}function _6(n,e,t={}){let r=new Xr;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,u){let d=new lm({next:m=>{d.Za(),o.enqueueAndForget(()=>xP(s,f)),m.fromCache&&c.source==="server"?u.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),f=new om(a,d,{includeMetadataChanges:!0,_a:!0});return RP(s,f)}(yield KE(n),n.asyncQueue,e,t,r)})),r.promise}function VP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var VM=new Map;function UP(n,e,t){if(!t)throw new z(F.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function y6(n,e,t,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function UM(n){if(!te.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function jM(n){if(te.isDocumentKey(n))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ce()}function Es(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Tm(n);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var um=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}y6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=VP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new um({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new um(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new bI;switch(r.type){case"firstParty":return new RI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=VM.get(t);r&&(K("ComponentProvider","Removing Datastore"),VM.delete(t),r.terminate())}(this),Promise.resolve()}};function jP(n,e,t,r={}){var i;let s=(n=Es(n,fc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&nc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Kt.MOCK_USER;else{a=Xo(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Kt(u)}n._authCredentials=new SI(new Up(a,c))}}var Po=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},kn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Cs=class n extends Po{constructor(e,t,r){super(e,t,c0(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new te(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function BP(n,e,...t){if(n=Ne(n),UP("collection","path",e),n instanceof fc){let r=yt.fromString(e,...t);return jM(r),new Cs(n,null,r)}{if(!(n instanceof kn||n instanceof Cs))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return jM(r),new Cs(n.firestore,null,r)}}function $P(n,e,...t){if(n=Ne(n),arguments.length===1&&(e=jp.newId()),UP("doc","path",e),n instanceof fc){let r=yt.fromString(e,...t);return UM(r),new kn(n,null,new te(r))}{if(!(n instanceof kn||n instanceof Cs))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(yt.fromString(e,...t));return UM(r),new kn(n.firestore,n instanceof Cs?n.converter:null,new te(r))}}var dm=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new tm(this,"async_queue_retry"),this.Vu=()=>{let r=CI();r&&K("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=CI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=CI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Xr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Hu(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Pi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=VE.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ce()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function BM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Oo=class extends fc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new dm,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new dm(e),this._firestoreClient=void 0,yield e}})}};function HP(n,e){let t=typeof n=="object"?n:Pt(),r=typeof n=="string"?n:e||"(default)",i=Mt(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Yi("firestore");s&&jP(i,...s)}return i}function _0(n){if(n._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||w6(n),n._firestoreClient}function w6(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,u,d){return new OI(a,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,VP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new WE(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Fu=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(un.fromBase64String(e))}catch(t){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Lu=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var hm=class{constructor(e){this._methodName=e}};var Vu=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}};var Uu=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var I6=/^__.*__$/,QE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Fi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Mo(e,this.data,t,this.fieldTransforms)}};function qP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce()}}var YE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(qP(this.Cu)&&I6.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ZE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Im(e)}Qu(e,t,r,i=!1){return new YE({Cu:e,methodName:t,qu:r,path:zn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function GP(n){let e=n._freezeSettings(),t=Im(n._databaseId);return new ZE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function E6(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);KP("Data must be an object, but it was:",o,r);let a=zP(r,o),c,u;if(s.merge)c=new Jr(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let m=T6(e,f,t);if(!o.contains(m))throw new z(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);S6(d,m)||d.push(m)}c=new Jr(d),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new QE(new Ar(a),c,u)}function C6(n,e,t,r=!1){return y0(t,n.Qu(r?4:3,e))}function y0(n,e){if(WP(n=Ne(n)))return KP("Unsupported field value:",e,n),zP(n,e);if(n instanceof hm)return function(r,i){if(!qP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=y0(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return l3(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Nt.fromDate(r);return{timestampValue:Zp(i.serializer,s)}}if(r instanceof Nt){let s=new Nt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zp(i.serializer,s)}}if(r instanceof Vu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fu)return{bytesValue:pP(i.serializer,r._byteString)};if(r instanceof kn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:u0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Uu)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return l0(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Tm(r)}`)}(n,e)}function zP(n,e){let t={};return GM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mc(n,(r,i)=>{let s=y0(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function WP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Nt||n instanceof Vu||n instanceof Fu||n instanceof kn||n instanceof hm||n instanceof Uu)}function KP(n,e,t){if(!WP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Tm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function T6(n,e,t){if((e=Ne(e))instanceof Lu)return e._internalPath;if(typeof e=="string")return QP(n,e);throw fm("Field path arguments must be of type string or ",n,!1,void 0,t)}var b6=new RegExp("[~\\*/\\[\\]]");function QP(n,e,t){if(e.search(b6)>=0)throw fm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Lu(...e.split("."))._internalPath}catch{throw fm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function fm(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new z(F.INVALID_ARGUMENT,a+n+c)}function S6(n,e){return n.some(t=>t.isEqual(e))}var pm=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new JE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(w0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},JE=class extends pm{data(){return super.data()}};function w0(n,e){return typeof e=="string"?QP(n,e):e instanceof Lu?e._internalPath:e._delegate._internalPath}function YP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ju=class{},XE=class extends ju{};function ZP(n,e,...t){let r=[];e instanceof ju&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof e0).length,a=s.filter(c=>c instanceof mm).length;if(o>1||o>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var mm=class n extends XE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return XP(e._query,t),new Po(e.firestore,e.converter,WI(e._query,t))}_parse(e){let t=GP(e.firestore);return function(s,o,a,c,u,d,f){let m;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){HM(f,d);let v=[];for(let w of f)v.push($M(c,s,w));m={arrayValue:{values:v}}}else m=$M(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||HM(f,d),m=C6(a,o,f,d==="in"||d==="not-in");return jt.create(u,d,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function JP(n,e,t){let r=e,i=w0("where",n);return mm._create(i,r,t)}var e0=class n extends ju{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:xr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)XP(o,c),o=WI(o,c)}(e._query,t),new Po(e.firestore,e.converter,WI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function $M(n,e,t){if(typeof(t=Ne(t))=="string"){if(t==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!eP(e)&&t.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(yt.fromString(t));if(!te.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fM(n,new te(r))}if(t instanceof kn)return fM(n,t._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tm(t)}.`)}function HM(n,e){if(!Array.isArray(n)||n.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function XP(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var t0=class{convertValue(e,t="none"){switch(Ao(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ft(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ce()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return mc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ft(o.doubleValue));return new Uu(s)}convertGeoPoint(e){return new Vu(ft(e.latitude),ft(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=i0(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(xu(e));default:return null}}convertTimestamp(e){let t=Oi(e);return new Nt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=yt.fromString(e);Qe(wP(r));let i=new qp(r.get(1),r.get(3)),s=new te(r.popFirst(5));return i.isEqual(t)||Pi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function D6(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var To=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gm=class extends pm{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new tc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(w0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},tc=class extends gm{data(e={}){return super.data(e)}},vm=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new To(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new tc(this._firestore,this._userDataWriter,r.key,r,new To(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new tc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new To(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new tc(i._firestore,i._userDataWriter,a.doc.key,a.doc,new To(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:A6(a.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function A6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce()}}var Bu=class extends t0{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}};function eO(n){n=Es(n,Po);let e=Es(n.firestore,Oo),t=_0(e),r=new Bu(e);return YP(n._query),_6(t,n._query).then(i=>new vm(e,r,n,i))}function tO(n,e,t){n=Es(n,kn);let r=Es(n.firestore,Oo),i=D6(n.converter,e,t);return R6(r,[E6(GP(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,bo.none())])}function I0(n,...e){var t,r,i;n=Ne(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||BM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(BM(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,u,d;if(n instanceof kn)u=Es(n.firestore,Oo),d=c0(n._key.path),c={next:f=>{e[o]&&e[o](x6(u,n,f))},error:e[o+1],complete:e[o+2]};else{let f=Es(n,Po);u=Es(f.firestore,Oo),d=f._query;let m=new Bu(u);c={next:v=>{e[o]&&e[o](new vm(u,m,f,v))},error:e[o+1],complete:e[o+2]},YP(n._query)}return function(m,v,w,P){let x=new lm(P),L=new om(v,x,w);return m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return RP(yield KE(m),L)})),()=>{x.Za(),m.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return xP(yield KE(m),L)}))}}(_0(u),d,a,c)}function R6(n,e){return function(r,i){let s=new Xr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return a6(yield v6(r),i,s)})),s.promise}(_0(n),e)}function x6(n,e,t){let r=t.docs.get(e._key),i=new Bu(n);return new gm(n,i,e._key,r,new To(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){pc=i})(Sn),Dt(new St("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Oo(new DI(r.getProvider("auth-internal")),new NI(r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qp(u.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),X(lM,"4.7.3",e),X(lM,"4.7.3","esm2017")})();var bm=function(){return bm=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},bm.apply(this,arguments)};var P6={includeMetadataChanges:!1};function nO(n,e){return e===void 0&&(e=P6),new pe(function(t){var r=I0(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function rO(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:bm(bm({},r),(t={},t[e.idField]=n.id,t))}function iO(n){return nO(n,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function sO(n,e){return e===void 0&&(e={}),iO(n).pipe(Y(function(t){return t.map(function(r){return rO(r,e)})}))}var Fo=class{constructor(e){return e}},oO="firestore",E0=class{constructor(){return xt(oO)}};var C0=new H("angularfire2.firestore-instances");function O6(n,e){let t=Lt(oO,n,e);return t&&new Fo(t)}function k6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Fo(r)}}var F6={provide:E0,deps:[[new ue,C0]]},L6={provide:Fo,useFactory:O6,deps:[[new ue,C0],ct]};function aO(n,...e){return X("angularfire",at.full,"fst"),nt([L6,F6,{provide:C0,useFactory:k6(n),multi:!0,deps:[oe,Re,Tt,_t,[new ue,Dr],[new ue,On],...e]}])}var lr=Ue(sO,!0);var ur=Ue(BP,!0);var T0=Ue($P,!0);var b0=Ue(eO,!0);var cO=Ue(HP,!0);var lO=Ue(ZP,!0);var S0=Ue(tO,!0);var uO=Ue(JP,!0);var dO="@firebase/database",hO="1.0.8";var TC="";function V6(n){TC=n}var O0=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),zt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:zd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var k0=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Fr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var qO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new O0(e)}}catch{}return new k0},Vo=qO("localStorage"),F0=qO("sessionStorage");var wc=new Lr("@firebase/database"),U6=function(){let n=1;return function(){return n++}}(),GO=function(n){let e=Yb(n),t=new Wb;t.update(e);let r=t.digest();return Lb.encodeByteArray(r)},id=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=id.apply(null,r):typeof r=="object"?e+=zt(r):e+=r,e+=" "}return e},Uo=null,fO=!0,j6=function(n,e){$(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(wc.logLevel=an.VERBOSE,Uo=wc.log.bind(wc),e&&F0.set("logging_enabled",!0)):typeof n=="function"?Uo=n:(Uo=null,F0.remove("logging_enabled"))},dn=function(...n){if(fO===!0&&(fO=!1,Uo===null&&F0.get("logging_enabled")===!0&&j6(!0)),Uo){let e=id.apply(null,n);Uo(e)}},sd=function(n){return function(...e){dn(n,...e)}},L0=function(...n){let e="FIREBASE INTERNAL ERROR: "+id(...n);wc.error(e)},Vi=function(...n){let e=`FIREBASE FATAL ERROR: ${id(...n)}`;throw wc.error(e),new Error(e)},Wn=function(...n){let e="FIREBASE WARNING: "+id(...n);wc.warn(e)},B6=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},zO=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},$6=function(n){if(Or()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Ec="[MIN_NAME]",jo="[MAX_NAME]",Rc=function(n,e){if(n===e)return 0;if(n===Ec||e===jo)return-1;if(e===Ec||n===jo)return 1;{let t=pO(n),r=pO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},H6=function(n,e){return n===e?0:n<e?-1:1},zu=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+zt(e))},bC=function(n){if(typeof n!="object"||n===null)return zt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=zt(e[r]),t+=":",t+=bC(n[e[r]]);return t+="}",t},WO=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function fr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var KO=function(n){$(!zO(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let u=[];for(c=t;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let d=u.join(""),f="";for(c=0;c<64;c+=8){let m=parseInt(d.substr(c,8),2).toString(16);m.length===1&&(m="0"+m),f=f+m}return f.toLowerCase()},q6=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},G6=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var z6=new RegExp("^-?(0*)\\d{1,10}$"),W6=-2147483648,K6=2147483647,pO=function(n){if(z6.test(n)){let e=Number(n);if(e>=W6&&e<=K6)return e}return null},od=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Wn("Exception was thrown by user callback.",t),e},Math.floor(0))}},Q6=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Zu=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var V0=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Wn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var U0=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(dn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wn(e)}},Ju=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Dm="5",QO="v",YO="s",ZO="r",JO="f",XO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ek="ls",tk="p",j0="ac",nk="websocket",rk="long_polling";var Am=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Vo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Vo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Y6(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function ik(n,e,t){$(typeof e=="string","typeof type must == string"),$(typeof t=="object","typeof params must == object");let r;if(e===nk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===rk)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Y6(n)&&(t.ns=n.namespace);let i=[];return fr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var B0=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Fr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return jb(this.counters_)}};var D0={},A0={};function SC(n){let e=n.toString();return D0[e]||(D0[e]=new B0),D0[e]}function Z6(n,e){let t=n.toString();return A0[t]||(A0[t]=e()),A0[t]}var $0=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&od(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var mO="start",J6="close",X6="pLPCommand",e9="pRTLPCB",sk="id",ok="pw",ak="ser",t9="cb",n9="seg",r9="ts",i9="d",s9="dframe",ck=1870,lk=30,o9=ck-lk,a9=25e3,c9=3e4,H0=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=sd(e),this.stats_=SC(t),this.urlFn=c=>(this.appCheckToken&&(c[j0]=this.appCheckToken),ik(t,rk,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new $0(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(c9)),$6(()=>{if(this.isClosed_)return;this.scriptTagHolder=new q0((...s)=>{let[o,a,c,u,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mO)this.id=a,this.password=c;else if(o===J6)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[mO]="t",r[ak]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[t9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[QO]=Dm,this.transportSessionId&&(r[YO]=this.transportSessionId),this.lastSessionId&&(r[ek]=this.lastSessionId),this.applicationId&&(r[tk]=this.applicationId),this.appCheckToken&&(r[j0]=this.appCheckToken),typeof location<"u"&&location.hostname&&XO.test(location.hostname)&&(r[ZO]=JO);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return Or()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!q6()&&!G6()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=zt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=Vb(t),i=WO(r,o9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(Or())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[s9]="t",r[sk]=e,r[ok]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=zt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},q0=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Or())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=U6(),window[X6+this.uniqueCallbackIdentifier]=e,window[e9+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){dn("frame writing exception"),a.stack&&dn(a.stack),dn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||dn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[sk]=this.myID,e[ok]=this.myPW,e[ak]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lk+r.length<=ck;){let o=this.pendingSegs.shift();r=r+"&"+n9+i+"="+o.seg+"&"+r9+i+"="+o.ts+"&"+i9+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(a9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){Or()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{dn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var l9=16384,u9=45e3,Rm=null;typeof MozWebSocket<"u"?Rm=MozWebSocket:typeof WebSocket<"u"&&(Rm=WebSocket);var Wu=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=sd(this.connId),this.stats_=SC(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[QO]=Dm,!Or()&&typeof location<"u"&&location.hostname&&XO.test(location.hostname)&&(a[ZO]=JO),r&&(a[YO]=r),i&&(a[ek]=i),s&&(a[j0]=s),o&&(a[tk]=o),ik(t,nk,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Vo.set("previous_websocket_failure",!0);try{let i;if(Or()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Dm}/${TC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Rm(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Rm!==null&&!n.forceDisallow_}static previouslyFailed(){return Vo.isInMemoryStorage||Vo.get("previous_websocket_failure")===!0}markConnectionHealthy(){Vo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=zd(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if($(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=zt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=WO(r,l9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(u9))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),d9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[H0,Wu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Wu&&Wu.isAvailable(),i=r&&!Wu.previouslyFailed();if(t.webSocketOnly&&(r||Wn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Wu];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),h9=6e4,f9=5e3,p9=10*1024,m9=100*1024,R0="t",gO="d",g9="s",vO="r",v9="e",_O="o",yO="a",wO="n",IO="p",_9="h",G0=class{constructor(e,t,r,i,s,o,a,c,u,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=sd("c:"+this.id+":"),this.transportManager_=new d9(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Zu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>m9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>p9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(R0 in e){let t=e[R0];t===yO?this.upgradeIfSecondaryHealthy_():t===vO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===_O&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=zu("t",e),r=zu("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:IO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:yO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=zu("t",e),r=zu("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=zu(R0,e);if(gO in e){let r=e[gO];if(t===_9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===wO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===g9?this.onConnectionShutdown_(r):t===vO?this.onReset_(r):t===v9?L0("Server Error: "+r):t===_O?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):L0("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Dm!==r&&Wn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Zu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(h9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Zu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(f9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:IO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Vo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var xm=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Nm=class{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){$(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Mm=class n extends Nm{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ul()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var EO=32,CO=768,tt=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ye(){return new tt("")}function Fe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function As(n){return n.pieces_.length-n.pieceNum_}function lt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new tt(n.pieces_,e)}function uk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function y9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function dk(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function hk(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new tt(e,0)}function Qt(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof tt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new tt(t,0)}function Pe(n){return n.pieceNum_>=n.pieces_.length}function dr(n,e){let t=Fe(n),r=Fe(e);if(t===null)return e;if(t===r)return dr(lt(n),lt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function fk(n,e){if(As(n)!==As(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Mr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(As(n)>As(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var z0=class{constructor(e,t){this.errorPrefix_=t,this.parts_=dk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=gl(this.parts_[r]);pk(this)}};function w9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=gl(e),pk(n)}function I9(n){let e=n.parts_.pop();n.byteLength_-=gl(e),n.parts_.length>0&&(n.byteLength_-=1)}function pk(n){if(n.byteLength_>CO)throw new Error(n.errorPrefix_+"has a key path longer than "+CO+" bytes ("+n.byteLength_+").");if(n.parts_.length>EO)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+EO+") or object contains a cycle "+Lo(n))}function Lo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var W0=class n extends Nm{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ku=1e3,E9=60*5*1e3,TO=30*1e3,C9=1.3,T9=3e4,b9="server_kill",bO=3,DC=(()=>{class n extends xm{constructor(t,r,i,s,o,a,c,u){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=u,this.id=n.nextPersistentConnectionId_++,this.log_=sd("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ku,this.maxReconnectDelay_=E9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Or())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");W0.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Mm.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(zt(o)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new iv,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),$(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let u=c.d,d=c.s;n.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,u))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Fr(t,"w")){let i=Bs(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Wn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||zb(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=TO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Gb(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),$(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+zt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):L0("Unrecognized action received from server: "+zt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ku,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Ku,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>T9&&(this.reconnectDelay_=Ku),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*C9)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,u=function(){c?c.close():(a=!0,i())},d=function(m){$(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(m)};this.realtime_={close:u,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?dn("getToken() completed but was canceled"):(dn("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,c=new G0(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{Wn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(b9)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Wn(m),u())}}})}interrupt(t){dn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){dn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],fl(this.interruptReasons_)&&(this.reconnectDelay_=Ku,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>bC(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new tt(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){dn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bO&&(this.reconnectDelay_=TO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){dn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";Or()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+TC.replace(/\./g,"-")]=1,ul()?t["framework.cordova"]=1:Gd()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Mm.getInstance().currentlyOnline();return fl(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Le=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Cc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Le(Ec,e),i=new Le(Ec,t);return this.compare(r,i)!==0}minPost(){return Le.MIN}};var Sm,Pm=class extends Cc{static get __EMPTY_NODE(){return Sm}static set __EMPTY_NODE(e){Sm=e}compare(e,t){return Rc(e.name,t.name)}isDefinedOn(e){throw Jo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Le.MIN}maxPost(){return new Le(jo,Sm)}makePost(e,t){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new Le(e,Sm)}toString(){return".key"}},Ic=new Pm;var _c=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Nr=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??hr.EMPTY_NODE,this.right=o??hr.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return hr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return hr.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),K0=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Nr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},hr=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Nr.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _c(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _c(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _c(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _c(this.root_,null,this.comparator_,!0,e)}};hr.EMPTY_NODE=new K0;function S9(n,e){return Rc(n.name,e.name)}function AC(n,e){return Rc(n,e)}var Q0;function D9(n){Q0=n}var mk=function(n){return typeof n=="number"?"number:"+KO(n):"string:"+n},gk=function(n){if(n.isLeafNode()){let e=n.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Fr(e,".sv"),"Priority must be a string or number.")}else $(n===Q0||n.isEmpty(),"priority of unexpected type.");$(n===Q0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var SO,Tc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),gk(this.priorityNode_)}static set __childrenNodeConstructor(t){SO=t}static get __childrenNodeConstructor(){return SO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Pe(t)?this:Fe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Fe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:($(i!==".priority"||As(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(lt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+mk(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=KO(this.value_):t+=this.value_,this.lazyHash_=GO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:($(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return $(s>=0,"Unknown leaf type: "+r),$(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),vk,_k;function A9(n){vk=n}function R9(n){_k=n}var Y0=class extends Cc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Rc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Le.MIN}maxPost(){return new Le(jo,new Tc("[PRIORITY-POST]",_k))}makePost(e,t){let r=vk(e);return new Le(t,new Tc("[PRIORITY-POST]",r))}toString(){return".priority"}},fn=new Y0;var x9=Math.log(2),Z0=class{constructor(e){let t=s=>parseInt(Math.log(s)/x9,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Om=function(n,e,t,r){n.sort(e);let i=function(c,u){let d=u-c,f,m;if(d===0)return null;if(d===1)return f=n[c],m=t?t(f):f,new Nr(m,f.node,Nr.BLACK,null,null);{let v=parseInt(d/2,10)+c,w=i(c,v),P=i(v+1,u);return f=n[v],m=t?t(f):f,new Nr(m,f.node,Nr.BLACK,w,P)}},s=function(c){let u=null,d=null,f=n.length,m=function(w,P){let x=f-w,L=f;f-=w;let q=i(x+1,L),Q=n[x],ne=t?t(Q):Q;v(new Nr(ne,Q.node,P,null,q))},v=function(w){u?(u.left=w,u=w):(d=w,u=w)};for(let w=0;w<c.count;++w){let P=c.nextBitIsOne(),x=Math.pow(2,c.count-(w+1));P?m(x,Nr.BLACK):(m(x,Nr.BLACK),m(x,Nr.RED))}return d},o=new Z0(n.length),a=s(o);return new hr(r||e,a)};var x0,vc={},bc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return $(vc&&fn,"ChildrenNode.ts has not been loaded"),x0=x0||new n({".priority":vc},{".priority":fn}),x0}get(e){let t=Bs(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof hr?t:null}hasIndex(e){return Fr(this.indexSet_,e.toString())}addIndex(e,t){$(e!==Ic,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Le.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Om(r,e.getCompare()):a=vc;let c=e.toString(),u=Object.assign({},this.indexSet_);u[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,u)}addToIndexes(e,t){let r=pl(this.indexes_,(i,s)=>{let o=Bs(this.indexSet_,s);if($(o,"Missing index implementation for "+s),i===vc)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(Le.Wrap),u=c.getNext();for(;u;)u.name!==e.name&&a.push(u),u=c.getNext();return a.push(e),Om(a,o.getCompare())}else return vc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Le(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=pl(this.indexes_,i=>{if(i===vc)return i;{let s=t.get(e.name);return s?i.remove(new Le(e.name,s)):i}});return new n(r,this.indexSet_)}};var Qu,wt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&gk(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Qu||(Qu=new n(new hr(AC),null,bc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Qu}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Qu:r}}getChild(t){let r=Fe(t);return r===null?this:this.getImmediateChild(r).getChild(lt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if($(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Le(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Qu:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Fe(t);if(i===null)return r;{$(Fe(t)!==".priority"||As(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(lt(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(fn,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+mk(this.getPriority().val())+":"),this.forEachChild(fn,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":GO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Le(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Le(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Le(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Le.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Le.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ad?-1:0}withIndex(t){if(t===Ic||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ic||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(fn),s=r.getIterator(fn),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Ic?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),J0=class extends wt{constructor(){super(new hr(AC),wt.EMPTY_NODE,bc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return wt.EMPTY_NODE}isEmpty(){return!1}},ad=new J0;Object.defineProperties(Le,{MIN:{value:new Le(Ec,wt.EMPTY_NODE)},MAX:{value:new Le(jo,ad)}});Pm.__EMPTY_NODE=wt.EMPTY_NODE;Tc.__childrenNodeConstructor=wt;D9(ad);R9(ad);var N9=!0;function hn(n,e=null){if(n===null)return wt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Tc(t,hn(e))}if(!(n instanceof Array)&&N9){let t=[],r=!1;if(fr(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=hn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Le(o,c)))}}),t.length===0)return wt.EMPTY_NODE;let s=Om(t,S9,o=>o.name,AC);if(r){let o=Om(t,fn.getCompare());return new wt(s,hn(e),new bc({".priority":o},{".priority":fn}))}else return new wt(s,hn(e),bc.Default)}else{let t=wt.EMPTY_NODE;return fr(n,(r,i)=>{if(Fr(n,r)&&r.substring(0,1)!=="."){let s=hn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(hn(e))}}A9(hn);var X0=class extends Cc{constructor(e){super(),this.indexPath_=e,$(!Pe(e)&&Fe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Rc(e.name,t.name):s}makePost(e,t){let r=hn(e),i=wt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Le(t,i)}maxPost(){let e=wt.EMPTY_NODE.updateChild(this.indexPath_,ad);return new Le(jo,e)}toString(){return dk(this.indexPath_,0).join("/")}};var eC=class extends Cc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Rc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Le.MIN}maxPost(){return Le.MAX}makePost(e,t){let r=hn(e);return new Le(t,r)}toString(){return".value"}},M9=new eC;function P9(n){return{type:"value",snapshotNode:n}}function O9(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function k9(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function DO(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function F9(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var tC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=fn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ec}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:jo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===fn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function AO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===fn?t="$priority":n.index_===M9?t="$value":n.index_===Ic?t="$key":($(n.index_ instanceof X0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=zt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=zt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+zt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=zt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+zt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function RO(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==fn&&(e.i=n.index_.toString()),e}var nC=class n extends xm{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=sd("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=AO(e._queryParams);this.restRequest_(s+".json",c,(u,d)=>{let f=d;if(u===404&&(f=null,u=null),u===null&&this.onDataUpdate_(s,f,!1,r),Bs(this.listens_,o)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=AO(e._queryParams),r=e._path.toString(),i=new iv;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+$s(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=zd(a.responseText)}catch{Wn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Wn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var rC=class{constructor(){this.rootNode_=wt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function km(){return{value:null,children:new Map}}function yk(n,e,t){if(Pe(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Fe(e);n.children.has(r)||n.children.set(r,km());let i=n.children.get(r);e=lt(e),yk(i,e,t)}}function iC(n,e,t){n.value!==null?t(e,n.value):L9(n,(r,i)=>{let s=new tt(e.toString()+"/"+r);iC(i,s,t)})}function L9(n,e){n.children.forEach((t,r)=>{e(r,t)})}var sC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&fr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var xO=10*1e3,V9=30*1e3,U9=5*60*1e3,oC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new sC(e);let r=xO+(V9-xO)*Math.random();Zu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;fr(e,(i,s)=>{s>0&&Fr(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Zu(this.reportStats_.bind(this),Math.floor(Math.random()*2*U9))}};var Li=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Li||{});function wk(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ik(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ek(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var aC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Li.ACK_USER_WRITE,this.source=wk()}operationForChild(e){if(Pe(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new tt(e));return new n(Ye(),t,this.revert)}}else return $(Fe(this.path)===e,"operationForChild called for unrelated child."),new n(lt(this.path),this.affectedTree,this.revert)}};var Sc=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Li.OVERWRITE}operationForChild(e){return Pe(this.path)?new n(this.source,Ye(),this.snap.getImmediateChild(e)):new n(this.source,lt(this.path),this.snap)}};var Fm=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Li.MERGE}operationForChild(e){if(Pe(this.path)){let t=this.children.subtree(new tt(e));return t.isEmpty()?null:t.value?new Sc(this.source,Ye(),t.value):new n(this.source,Ye(),t)}else return $(Fe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,lt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var td=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Pe(e))return this.isFullyInitialized()&&!this.filtered_;let t=Fe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function j9(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(F9(o.childName,o.snapshotNode))}),Yu(n,i,"child_removed",e,r,t),Yu(n,i,"child_added",e,r,t),Yu(n,i,"child_moved",s,r,t),Yu(n,i,"child_changed",e,r,t),Yu(n,i,"value",e,r,t),i}function Yu(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>$9(n,a,c)),o.forEach(a=>{let c=B9(n,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(c,n.query_))})})}function B9(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function $9(n,e,t){if(e.childName==null||t.childName==null)throw Jo("Should only compare child_ events.");let r=new Le(e.childName,e.snapshotNode),i=new Le(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function Ck(n,e){return{eventCache:n,serverCache:e}}function Xu(n,e,t,r){return Ck(new td(e,t,r),n.serverCache)}function Tk(n,e,t,r){return Ck(n.eventCache,new td(e,t,r))}function cC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Bo(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var N0,H9=()=>(N0||(N0=new hr(H6)),N0),Fn=class n{constructor(e,t=H9()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return fr(e,(r,i)=>{t=t.set(new tt(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ye(),value:this.value};if(Pe(e))return null;{let r=Fe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(lt(e),t);return s!=null?{path:Qt(new tt(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Pe(e))return this;{let t=Fe(e),r=this.children.get(t);return r!==null?r.subtree(lt(e)):new n(null)}}set(e,t){if(Pe(e))return new n(t,this.children);{let r=Fe(e),s=(this.children.get(r)||new n(null)).set(lt(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(Pe(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Fe(e),r=this.children.get(t);if(r){let i=r.remove(lt(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(Pe(e))return this.value;{let t=Fe(e),r=this.children.get(t);return r?r.get(lt(e)):null}}setTree(e,t){if(Pe(e))return t;{let r=Fe(e),s=(this.children.get(r)||new n(null)).setTree(lt(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Ye(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Qt(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ye(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Pe(e))return null;{let s=Fe(e),o=this.children.get(s);return o?o.findOnPath_(lt(e),Qt(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ye(),t)}foreachOnPath_(e,t,r){if(Pe(e))return this;{this.value&&r(t,this.value);let i=Fe(e),s=this.children.get(i);return s?s.foreachOnPath_(lt(e),Qt(t,i),r):new n(null)}}foreach(e){this.foreach_(Ye(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Qt(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Pr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Fn(null))}};function ed(n,e,t){if(Pe(e))return new Pr(new Fn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=dr(i,e);return s=s.updateChild(o,t),new Pr(n.writeTree_.set(i,s))}else{let i=new Fn(t),s=n.writeTree_.setTree(e,i);return new Pr(s)}}}function NO(n,e,t){let r=n;return fr(t,(i,s)=>{r=ed(r,Qt(e,i),s)}),r}function MO(n,e){if(Pe(e))return Pr.empty();{let t=n.writeTree_.setTree(e,new Fn(null));return new Pr(t)}}function lC(n,e){return $o(n,e)!=null}function $o(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(dr(t.path,e)):null}function PO(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(fn,(r,i)=>{e.push(new Le(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Le(r,i.value))}),e}function Ds(n,e){if(Pe(e))return n;{let t=$o(n,e);return t!=null?new Pr(new Fn(t)):new Pr(n.writeTree_.subtree(e))}}function uC(n){return n.writeTree_.isEmpty()}function Dc(n,e){return bk(Ye(),n.writeTree_,e)}function bk(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?($(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=bk(Qt(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Qt(n,".priority"),r)),t}}function Sk(n,e){return Nk(e,n)}function q9(n,e,t,r,i){$(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=ed(n.visibleWrites,e,t)),n.lastWriteId=r}function G9(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function z9(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);$(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&W9(a,r.path)?i=!1:Mr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return K9(n),!0;if(r.snap)n.visibleWrites=MO(n.visibleWrites,r.path);else{let a=r.children;fr(a,c=>{n.visibleWrites=MO(n.visibleWrites,Qt(r.path,c))})}return!0}else return!1}function W9(n,e){if(n.snap)return Mr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Mr(Qt(n.path,t),e))return!0;return!1}function K9(n){n.visibleWrites=Dk(n.allWrites,Q9,Ye()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Q9(n){return n.visible}function Dk(n,e,t){let r=Pr.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Mr(t,o)?(a=dr(t,o),r=ed(r,a,s.snap)):Mr(o,t)&&(a=dr(o,t),r=ed(r,Ye(),s.snap.getChild(a)));else if(s.children){if(Mr(t,o))a=dr(t,o),r=NO(r,a,s.children);else if(Mr(o,t))if(a=dr(o,t),Pe(a))r=NO(r,Ye(),s.children);else{let c=Bs(s.children,Fe(a));if(c){let u=c.getChild(lt(a));r=ed(r,Ye(),u)}}}else throw Jo("WriteRecord should have .snap or .children")}}return r}function Ak(n,e,t,r,i){if(!r&&!i){let s=$o(n.visibleWrites,e);if(s!=null)return s;{let o=Ds(n.visibleWrites,e);if(uC(o))return t;if(t==null&&!lC(o,Ye()))return null;{let a=t||wt.EMPTY_NODE;return Dc(o,a)}}}else{let s=Ds(n.visibleWrites,e);if(!i&&uC(s))return t;if(!i&&t==null&&!lC(s,Ye()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Mr(u.path,e)||Mr(e,u.path))},a=Dk(n.allWrites,o,e),c=t||wt.EMPTY_NODE;return Dc(a,c)}}}function Y9(n,e,t){let r=wt.EMPTY_NODE,i=$o(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(fn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=Ds(n.visibleWrites,e);return t.forEachChild(fn,(o,a)=>{let c=Dc(Ds(s,new tt(o)),a);r=r.updateImmediateChild(o,c)}),PO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ds(n.visibleWrites,e);return PO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Z9(n,e,t,r,i){$(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Qt(e,t);if(lC(n.visibleWrites,s))return null;{let o=Ds(n.visibleWrites,s);return uC(o)?i.getChild(t):Dc(o,i.getChild(t))}}function J9(n,e,t,r){let i=Qt(e,t),s=$o(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=Ds(n.visibleWrites,i);return Dc(o,r.getNode().getImmediateChild(t))}else return null}function X9(n,e){return $o(n.visibleWrites,e)}function e5(n,e,t,r,i,s,o){let a,c=Ds(n.visibleWrites,e),u=$o(c,Ye());if(u!=null)a=u;else if(t!=null)a=Dc(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),v=m.getNext();for(;v&&d.length<i;)f(v,r)!==0&&d.push(v),v=m.getNext();return d}else return[]}function t5(){return{visibleWrites:Pr.empty(),allWrites:[],lastWriteId:-1}}function dC(n,e,t,r){return Ak(n.writeTree,n.treePath,e,t,r)}function Rk(n,e){return Y9(n.writeTree,n.treePath,e)}function OO(n,e,t,r){return Z9(n.writeTree,n.treePath,e,t,r)}function Lm(n,e){return X9(n.writeTree,Qt(n.treePath,e))}function n5(n,e,t,r,i,s){return e5(n.writeTree,n.treePath,e,t,r,i,s)}function RC(n,e,t){return J9(n.writeTree,n.treePath,e,t)}function xk(n,e){return Nk(Qt(n.treePath,e),n.writeTree)}function Nk(n,e){return{treePath:n,writeTree:e}}var hC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;$(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),$(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,DO(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,k9(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,O9(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,DO(r,e.snapshotNode,i.oldSnap));else throw Jo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var fC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},Mk=new fC,nd=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new td(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return RC(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bo(this.viewCache_),s=n5(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function r5(n,e){$(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function i5(n,e,t,r,i){let s=new hC,o,a;if(t.type===Li.OVERWRITE){let u=t;u.source.fromUser?o=pC(n,e,u.path,u.snap,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!Pe(u.path),o=Vm(n,e,u.path,u.snap,r,i,a,s))}else if(t.type===Li.MERGE){let u=t;u.source.fromUser?o=o5(n,e,u.path,u.children,r,i,s):($(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=mC(n,e,u.path,u.children,r,i,a,s))}else if(t.type===Li.ACK_USER_WRITE){let u=t;u.revert?o=l5(n,e,u.path,r,i,s):o=a5(n,e,u.path,u.affectedTree,r,i,s)}else if(t.type===Li.LISTEN_COMPLETE)o=c5(n,e,t.path,r,s);else throw Jo("Unknown operation type: "+t.type);let c=s.getChanges();return s5(e,o,c),{viewCache:o,changes:c}}function s5(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=cC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(P9(cC(e)))}}function Pk(n,e,t,r,i,s){let o=e.eventCache;if(Lm(r,t)!=null)return e;{let a,c;if(Pe(t))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Bo(e),d=u instanceof wt?u:wt.EMPTY_NODE,f=Rk(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let u=dC(r,Bo(e));a=n.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=Fe(t);if(u===".priority"){$(As(t)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=OO(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{let d=lt(t),f;if(o.isCompleteForChild(u)){c=e.serverCache.getNode();let m=OO(r,t,o.getNode(),c);m!=null?f=o.getNode().getImmediateChild(u).updateChild(d,m):f=o.getNode().getImmediateChild(u)}else f=RC(r,u,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),u,f,d,i,s):a=o.getNode()}}return Xu(e,a,o.isFullyInitialized()||Pe(t),n.filter.filtersNodes())}}function Vm(n,e,t,r,i,s,o,a){let c=e.serverCache,u,d=o?n.filter:n.filter.getIndexedFilter();if(Pe(t))u=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let v=c.getNode().updateChild(t,r);u=d.updateFullNode(c.getNode(),v,null)}else{let v=Fe(t);if(!c.isCompleteForPath(t)&&As(t)>1)return e;let w=lt(t),x=c.getNode().getImmediateChild(v).updateChild(w,r);v===".priority"?u=d.updatePriority(c.getNode(),x):u=d.updateChild(c.getNode(),v,x,w,Mk,null)}let f=Tk(e,u,c.isFullyInitialized()||Pe(t),d.filtersNodes()),m=new nd(i,f,s);return Pk(n,f,t,i,m,a)}function pC(n,e,t,r,i,s,o){let a=e.eventCache,c,u,d=new nd(i,e,s);if(Pe(t))u=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Xu(e,u,!0,n.filter.filtersNodes());else{let f=Fe(t);if(f===".priority")u=n.filter.updatePriority(e.eventCache.getNode(),r),c=Xu(e,u,a.isFullyInitialized(),a.isFiltered());else{let m=lt(t),v=a.getNode().getImmediateChild(f),w;if(Pe(m))w=r;else{let P=d.getCompleteChild(f);P!=null?uk(m)===".priority"&&P.getChild(hk(m)).isEmpty()?w=P:w=P.updateChild(m,r):w=wt.EMPTY_NODE}if(v.equals(w))c=e;else{let P=n.filter.updateChild(a.getNode(),f,w,m,d,o);c=Xu(e,P,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function kO(n,e){return n.eventCache.isCompleteForChild(e)}function o5(n,e,t,r,i,s,o){let a=e;return r.foreach((c,u)=>{let d=Qt(t,c);kO(e,Fe(d))&&(a=pC(n,a,d,u,i,s,o))}),r.foreach((c,u)=>{let d=Qt(t,c);kO(e,Fe(d))||(a=pC(n,a,d,u,i,s,o))}),a}function FO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function mC(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,u;Pe(t)?u=r:u=new Fn(null).setTree(t,r);let d=e.serverCache.getNode();return u.children.inorderTraversal((f,m)=>{if(d.hasChild(f)){let v=e.serverCache.getNode().getImmediateChild(f),w=FO(n,v,m);c=Vm(n,c,new tt(f),w,i,s,o,a)}}),u.children.inorderTraversal((f,m)=>{let v=!e.serverCache.isCompleteForChild(f)&&m.value===null;if(!d.hasChild(f)&&!v){let w=e.serverCache.getNode().getImmediateChild(f),P=FO(n,w,m);c=Vm(n,c,new tt(f),P,i,s,o,a)}}),c}function a5(n,e,t,r,i,s,o){if(Lm(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Pe(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Vm(n,e,t,c.getNode().getChild(t),i,s,a,o);if(Pe(t)){let u=new Fn(null);return c.getNode().forEachChild(Ic,(d,f)=>{u=u.set(new tt(d),f)}),mC(n,e,t,u,i,s,a,o)}else return e}else{let u=new Fn(null);return r.foreach((d,f)=>{let m=Qt(t,d);c.isCompleteForPath(m)&&(u=u.set(d,c.getNode().getChild(m)))}),mC(n,e,t,u,i,s,a,o)}}function c5(n,e,t,r,i){let s=e.serverCache,o=Tk(e,s.getNode(),s.isFullyInitialized()||Pe(t),s.isFiltered());return Pk(n,o,t,r,Mk,i)}function l5(n,e,t,r,i,s){let o;if(Lm(r,t)!=null)return e;{let a=new nd(r,e,i),c=e.eventCache.getNode(),u;if(Pe(t)||Fe(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=dC(r,Bo(e));else{let f=e.serverCache.getNode();$(f instanceof wt,"serverChildren would be complete if leaf node"),d=Rk(r,f)}d=d,u=n.filter.updateFullNode(c,d,s)}else{let d=Fe(t),f=RC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?u=n.filter.updateChild(c,d,f,lt(t),a,s):e.eventCache.getNode().hasChild(d)?u=n.filter.updateChild(c,d,wt.EMPTY_NODE,lt(t),a,s):u=c,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=dC(r,Bo(e)),o.isLeafNode()&&(u=n.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Lm(r,Ye())!=null,Xu(e,u,o,n.filter.filtersNodes())}}function u5(n,e){let t=Bo(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Pe(e)&&!t.getImmediateChild(Fe(e)).isEmpty())?t.getChild(e):null}function LO(n,e,t,r){e.type===Li.MERGE&&e.source.queryId!==null&&($(Bo(n.viewCache_),"We should always have a full cache before handling merges"),$(cC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=i5(n.processor_,i,e,t,r);return r5(n.processor_,s.viewCache),$(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,d5(n,s.changes,s.viewCache.eventCache.getNode(),null)}function d5(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return j9(n.eventGenerator_,e,t,i)}var VO;function h5(n){$(!VO,"__referenceConstructor has already been defined"),VO=n}function xC(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return $(s!=null,"SyncTree gave us an op for an invalid query."),LO(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(LO(o,e,t,r));return s}}function NC(n,e){let t=null;for(let r of n.views.values())t=t||u5(r,e);return t}var UO;function f5(n){$(!UO,"__referenceConstructor has already been defined"),UO=n}var Um=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fn(null),this.pendingWriteTree_=t5(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function p5(n,e,t,r,i){return q9(n.pendingWriteTree_,e,t,r,i),i?Bm(n,new Sc(wk(),e,t)):[]}function yc(n,e,t=!1){let r=G9(n.pendingWriteTree_,e);if(z9(n.pendingWriteTree_,e)){let s=new Fn(null);return r.snap!=null?s=s.set(Ye(),!0):fr(r.children,o=>{s=s.set(new tt(o),!0)}),Bm(n,new aC(r.path,s,t))}else return[]}function jm(n,e,t){return Bm(n,new Sc(Ik(),e,t))}function m5(n,e,t){let r=Fn.fromObject(t);return Bm(n,new Fm(Ik(),e,r))}function g5(n,e,t,r){let i=Lk(n,r);if(i!=null){let s=Vk(i),o=s.path,a=s.queryId,c=dr(o,e),u=new Sc(Ek(a),c,t);return Uk(n,o,u)}else return[]}function v5(n,e,t,r){let i=Lk(n,r);if(i){let s=Vk(i),o=s.path,a=s.queryId,c=dr(o,e),u=Fn.fromObject(t),d=new Fm(Ek(a),c,u);return Uk(n,o,d)}else return[]}function Ok(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=dr(o,e),u=NC(a,c);if(u)return u});return Ak(i,e,s,t,!0)}function Bm(n,e){return kk(e,n.syncPointTree_,null,Sk(n.pendingWriteTree_,Ye()))}function kk(n,e,t,r){if(Pe(n.path))return Fk(n,e,t,r);{let i=e.get(Ye());t==null&&i!=null&&(t=NC(i,Ye()));let s=[],o=Fe(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let u=t?t.getImmediateChild(o):null,d=xk(r,o);s=s.concat(kk(a,c,u,d))}return i&&(s=s.concat(xC(i,n,r,t))),s}}function Fk(n,e,t,r){let i=e.get(Ye());t==null&&i!=null&&(t=NC(i,Ye()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,u=xk(r,o),d=n.operationForChild(o);d&&(s=s.concat(Fk(d,a,c,u)))}),i&&(s=s.concat(xC(i,n,r,t))),s}function Lk(n,e){return n.tagToQueryMap.get(e)}function Vk(n){let e=n.indexOf("$");return $(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new tt(n.substr(0,e))}}function Uk(n,e,t){let r=n.syncPointTree_.get(e);$(r,"Missing sync point for query tag that we're tracking");let i=Sk(n.pendingWriteTree_,e);return xC(r,t,i,null)}var gC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},vC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Qt(this.path_,e);return new n(this.syncTree_,t)}node(){return Ok(this.syncTree_,this.path_)}},_5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},jO=function(n,e,t){if(!n||typeof n!="object")return n;if($(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return y5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return w5(n[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},y5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:$(!1,"Unexpected server value: "+n)}},w5=function(n,e,t){n.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&$(!1,"Unexpected increment value: "+r);let i=e.node();if($(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},I5=function(n,e,t,r){return MC(e,new vC(t,n),r)},E5=function(n,e,t){return MC(n,new gC(e),t)};function MC(n,e,t){let r=n.getPriority().val(),i=jO(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=jO(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Tc(a,hn(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Tc(i))),o.forEachChild(fn,(a,c)=>{let u=MC(c,e.getImmediateChild(a),t);u!==c&&(s=s.updateImmediateChild(a,u))}),s}}var rd=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function PC(n,e){let t=e instanceof tt?e:new tt(e),r=n,i=Fe(t);for(;i!==null;){let s=Bs(r.node.children,i)||{children:{},childCount:0};r=new rd(i,r,s),t=lt(t),i=Fe(t)}return r}function xc(n){return n.node.value}function jk(n,e){n.node.value=e,_C(n)}function Bk(n){return n.node.childCount>0}function C5(n){return xc(n)===void 0&&!Bk(n)}function $m(n,e){fr(n.node.children,(t,r)=>{e(new rd(t,n,r))})}function $k(n,e,t,r){t&&!r&&e(n),$m(n,i=>{$k(i,e,!0,r)}),t&&r&&e(n)}function T5(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function cd(n){return new tt(n.parent===null?n.name:cd(n.parent)+"/"+n.name)}function _C(n){n.parent!==null&&b5(n.parent,n.name,n)}function b5(n,e,t){let r=C5(t),i=Fr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,_C(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,_C(n))}var S5=/[\[\].#$\/\u0000-\u001F\u007F]/,D5=/[\[\].#$\u0000-\u001F\u007F]/,M0=10*1024*1024,Hk=function(n){return typeof n=="string"&&n.length!==0&&!S5.test(n)},A5=function(n){return typeof n=="string"&&n.length!==0&&!D5.test(n)},R5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),A5(n)};var qk=function(n,e,t){let r=t instanceof tt?new z0(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Lo(r));if(typeof e=="function")throw new Error(n+"contains a function "+Lo(r)+" with contents = "+e.toString());if(zO(e))throw new Error(n+"contains "+e.toString()+" "+Lo(r));if(typeof e=="string"&&e.length>M0/3&&gl(e)>M0)throw new Error(n+"contains a string greater than "+M0+" utf8 bytes "+Lo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(fr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Hk(o)))throw new Error(n+" contains an invalid key ("+o+") "+Lo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);w9(r,o),qk(n,a,r),I9(r)}),i&&s)throw new Error(n+' contains ".value" child '+Lo(r)+" in addition to actual children.")}};var x5=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Hk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!R5(t))throw new Error(Qb(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function N5(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!fk(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ho(n,e,t){N5(n,t),M5(n,r=>Mr(r,e)||Mr(e,r))}function M5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(P5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function P5(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Uo&&dn("event: "+t.toString()),od(r)}}}var O5="repo_interrupt",k5=25,wC=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=km(),this.transactionQueueTree_=new rd,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function F5(n,e,t){if(n.stats_=SC(n.repoInfo_),n.forceRestClient_||Q6())n.server_=new nC(n.repoInfo_,(r,i,s,o)=>{BO(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>$O(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{zt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new DC(n.repoInfo_,e,(r,i,s,o)=>{BO(n,r,i,s,o)},r=>{$O(n,r)},r=>{V5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Z6(n.repoInfo_,()=>new oC(n.stats_,n.server_)),n.infoData_=new rC,n.infoSyncTree_=new Um({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=jm(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),OC(n,"connected",!1),n.serverSyncTree_=new Um({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let u=o(a,c);Ho(n.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function L5(n){let t=n.infoData_.getNode(new tt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Gk(n){return _5({timestamp:L5(n)})}function BO(n,e,t,r,i){n.dataUpdateCount++;let s=new tt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=pl(t,u=>hn(u));o=v5(n.serverSyncTree_,s,c,i)}else{let c=hn(t);o=g5(n.serverSyncTree_,s,c,i)}else if(r){let c=pl(t,u=>hn(u));o=m5(n.serverSyncTree_,s,c)}else{let c=hn(t);o=jm(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=FC(n,s)),Ho(n.eventQueue_,a,o)}function $O(n,e){OC(n,"connected",e),e===!1&&j5(n)}function V5(n,e){fr(e,(t,r)=>{OC(n,t,r)})}function OC(n,e,t){let r=new tt("/.info/"+e),i=hn(t);n.infoData_.updateSnapshot(r,i);let s=jm(n.infoSyncTree_,r,i);Ho(n.eventQueue_,r,s)}function U5(n){return n.nextWriteId_++}function j5(n){zk(n,"onDisconnectEvents");let e=Gk(n),t=km();iC(n.onDisconnect_,Ye(),(i,s)=>{let o=I5(i,s,n.serverSyncTree_,e);yk(t,i,o)});let r=[];iC(t,Ye(),(i,s)=>{r=r.concat(jm(n.serverSyncTree_,i,s));let o=q5(n,i);FC(n,o)}),n.onDisconnect_=km(),Ho(n.eventQueue_,Ye(),r)}function B5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(O5)}function zk(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),dn(t,...e)}function Wk(n,e,t){return Ok(n.serverSyncTree_,e,t)||wt.EMPTY_NODE}function kC(n,e=n.transactionQueueTree_){if(e||Hm(n,e),xc(e)){let t=Qk(n,e);$(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&$5(n,cd(e),t)}else Bk(e)&&$m(e,t=>{kC(n,t)})}function $5(n,e,t){let r=t.map(u=>u.currentWriteId),i=Wk(n,e,r),s=i,o=i.hash();for(let u=0;u<t.length;u++){let d=t[u];$(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=dr(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,u=>{zk(n,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){let f=[];for(let m=0;m<t.length;m++)t[m].status=2,d=d.concat(yc(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&f.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Hm(n,PC(n.transactionQueueTree_,e)),kC(n,n.transactionQueueTree_),Ho(n.eventQueue_,e,d);for(let m=0;m<f.length;m++)od(f[m])}else{if(u==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{Wn("transaction at "+c.toString()+" failed: "+u);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=u}FC(n,e)}},o)}function FC(n,e){let t=Kk(n,e),r=cd(t),i=Qk(n,t);return H5(n,i,r),r}function H5(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],u=dr(t,c.path),d=!1,f;if($(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(yc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=k5)d=!0,f="maxretry",i=i.concat(yc(n.serverSyncTree_,c.currentWriteId,!0));else{let m=Wk(n,c.path,o);c.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){qk("transaction failed: Data returned ",v,c.path);let w=hn(v);typeof v=="object"&&v!=null&&Fr(v,".priority")||(w=w.updatePriority(m.getPriority()));let x=c.currentWriteId,L=Gk(n),q=E5(w,m,L);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=q,c.currentWriteId=U5(n),o.splice(o.indexOf(x),1),i=i.concat(p5(n.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(yc(n.serverSyncTree_,x,!0))}else d=!0,f="nodata",i=i.concat(yc(n.serverSyncTree_,c.currentWriteId,!0))}Ho(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Hm(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)od(r[a]);kC(n,n.transactionQueueTree_)}function Kk(n,e){let t,r=n.transactionQueueTree_;for(t=Fe(e);t!==null&&xc(r)===void 0;)r=PC(r,t),e=lt(e),t=Fe(e);return r}function Qk(n,e){let t=[];return Yk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Yk(n,e,t){let r=xc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);$m(e,i=>{Yk(n,i,t)})}function Hm(n,e){let t=xc(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,jk(e,t.length>0?t:void 0)}$m(e,r=>{Hm(n,r)})}function q5(n,e){let t=cd(Kk(n,e)),r=PC(n.transactionQueueTree_,e);return T5(r,i=>{P0(n,i)}),P0(n,r),$k(r,i=>{P0(n,i)}),t}function P0(n,e){let t=xc(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?($(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):($(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(yc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?jk(e,void 0):t.length=s+1,Ho(n.eventQueue_,cd(e),i);for(let o=0;o<r.length;o++)od(r[o])}}function G5(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function z5(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wn(`Invalid query segment '${t}' in query '${n}'`)}return e}var HO=function(n,e){let t=W5(n),r=t.namespace;t.domain==="firebase.com"&&Vi(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Vi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||B6();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Am(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new tt(t.pathString)}},W5=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let u=n.indexOf("//");u>=0&&(a=n.substring(0,u-1),n=n.substring(u+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=G5(n.substring(d,f)));let m=z5(n.substring(Math.min(n.length,f)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(u+1),10)):u=e.length;let v=e.slice(0,u);if(v.toLowerCase()==="localhost")t="localhost";else if(v.split(".").length<=2)t=v;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var IC=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Pe(this._path)?null:uk(this._path)}get ref(){return new Ac(this._repo,this._path)}get _queryIdentifier(){let e=RO(this._queryParams),t=bC(e);return t==="{}"?"default":t}get _queryObject(){return RO(this._queryParams)}isEqual(e){if(e=Ne(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=fk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+y9(this._path)}};var Ac=class n extends IC{constructor(e,t){super(e,t,new tC,!1)}get parent(){let e=hk(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};h5(Ac);f5(Ac);var K5="FIREBASE_DATABASE_EMULATOR_HOST",EC={},Q5=!1;function Y5(n,e,t,r){n.repoInfo_=new Am(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function Z5(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Vi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),dn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=HO(s,i),a=o.repoInfo,c,u;typeof process<"u"&&process.env&&(u=process.env[K5]),u?(c=!0,s=`http://${u}?ns=${a.namespace}`,o=HO(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Ju(Ju.OWNER):new U0(n.name,n.options,e);x5("Invalid Firebase Database URL",o),Pe(o.path)||Vi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=X5(a,n,d,new V0(n.name,t));return new CC(f,n)}function J5(n,e){let t=EC[e];(!t||t[n.key]!==n)&&Vi(`Database ${e}(${n.repoInfo_}) has already been deleted.`),B5(n),delete t[n.key]}function X5(n,e,t,r){let i=EC[e.name];i||(i={},EC[e.name]=i);let s=i[n.toURLString()];return s&&Vi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new wC(n,Q5,t,r),i[n.toURLString()]=s,s}var CC=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(F5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ac(this._repo,Ye())),this._rootInternal}_delete(){return this._rootInternal!==null&&(J5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Vi("Cannot call "+e+" on a deleted database.")}};function Zk(n=Pt(),e){let t=Mt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Yi("database");r&&Jk(t,...r)}return t}function Jk(n,e,t,r={}){n=Ne(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Vi("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Vi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ju(Ju.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Xo(r.mockUserToken,n.app.options.projectId);s=new Ju(o)}Y5(i,e,t,s)}function e8(n){V6(Sn),Dt(new St("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Z5(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),X(dO,hO,n),X(dO,hO,"esm2017")}DC.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};DC.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};e8();var ld=class{constructor(e){return e}},Xk="database",LC=class{constructor(){return xt(Xk)}};var VC=new H("angularfire2.database-instances");function t8(n,e){let t=Lt(Xk,n,e);return t&&new ld(t)}function n8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ld(r)}}var r8={provide:LC,deps:[[new ue,VC]]},i8={provide:ld,useFactory:t8,deps:[[new ue,VC],ct]};function e1(n,...e){return X("angularfire",at.full,"rtdb"),nt([i8,r8,{provide:VC,useFactory:n8(n),multi:!0,deps:[oe,Re,Tt,_t,[new ue,Dr],[new ue,On],...e]}])}var t1=Ue(Zk,!0);var i1="functions";var UC=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return _(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var jC="us-central1";var BC=class{constructor(e,t,r,i,s=jC,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new UC(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=jC}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function s8(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var n1="@firebase/functions",r1="0.11.8";var o8="auth-internal",a8="app-check-internal",c8="messaging-internal";function l8(n,e){let t=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(o8),a=r.getProvider(c8),c=r.getProvider(a8);return new BC(s,o,a,c,i,n)};Dt(new St(i1,t,"PUBLIC").setMultipleInstances(!0)),X(n1,r1,e),X(n1,r1,"esm2017")}function s1(n=Pt(),e=jC){let r=Mt(Ne(n),i1).getImmediate({identifier:e}),i=Yi("functions");return i&&o1(r,...i),r}function o1(n,e,t){s8(Ne(n),e,t)}l8(fetch.bind(self));var ud=class{constructor(e){return e}},a1="functions",$C=class{constructor(){return xt(a1)}};var HC=new H("angularfire2.functions-instances");function u8(n,e){let t=Lt(a1,n,e);return t&&new ud(t)}function d8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ud(r)}}var h8={provide:$C,deps:[[new ue,HC]]},f8={provide:ud,useFactory:u8,deps:[[new ue,HC],ct]};function c1(n,...e){return X("angularfire",at.full,"fn"),nt([f8,h8,{provide:HC,useFactory:d8(n),multi:!0,deps:[oe,Re,Tt,_t,[new ue,Dr],[new ue,On],...e]}])}var l1=Ue(s1,!0);var p8="/firebase-messaging-sw.js",m8="/firebase-cloud-messaging-push-scope",m1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",g8="https://fcmregistrations.googleapis.com/v1",g1="google.c.a.c_id",v8="google.c.a.c_l",_8="google.c.a.ts",y8="google.c.a.e";var qm=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(qm||{});function Ui(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function w8(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var qC="fcm_token_details_db",I8=5,u1="fcm_token_object_Store";function E8(n){return _(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(qC))return null;let e=null;return(yield sv(qC,I8,{upgrade:(r,i,s,o)=>_(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(u1))return;let c=o.objectStore(u1),u=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!u){if(i===2){let d=u;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Ui(d.vapidKey)}}}else if(i===3){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ui(d.auth),p256dh:Ui(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ui(d.vapidKey)}}}else if(i===4){let d=u;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ui(d.auth),p256dh:Ui(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ui(d.vapidKey)}}}}})})).close(),yield Wd(qC),yield Wd("fcm_vapid_details_db"),yield Wd("undefined"),C8(e)?e:null})}function C8(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var T8="firebase-messaging-database",b8=1,dd="firebase-messaging-store",GC=null;function v1(){return GC||(GC=sv(T8,b8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(dd)}}})),GC}function S8(n){return _(this,null,function*(){let e=_1(n),r=yield(yield v1()).transaction(dd).objectStore(dd).get(e);if(r)return r;{let i=yield E8(n.appConfig.senderId);if(i)return yield KC(n,i),i}})}function KC(n,e){return _(this,null,function*(){let t=_1(n),i=(yield v1()).transaction(dd,"readwrite");return yield i.objectStore(dd).put(e,t),yield i.done,e})}function _1({appConfig:n}){return n.appId}var D8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Tn=new kr("messaging","Messaging",D8);function A8(n,e){return _(this,null,function*(){let t=yield YC(n),r=y1(e),i={method:"POST",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(QC(n.appConfig),i)).json()}catch(o){throw Tn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Tn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Tn.create("token-subscribe-no-token");return s.token})}function R8(n,e){return _(this,null,function*(){let t=yield YC(n),r=y1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${QC(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Tn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Tn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Tn.create("token-update-no-token");return s.token})}function x8(n,e){return _(this,null,function*(){let r={method:"DELETE",headers:yield YC(n)};try{let s=yield(yield fetch(`${QC(n.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw Tn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Tn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function QC({projectId:n}){return`${g8}/projects/${n}/registrations`}function YC(t){return _(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function y1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==m1&&(i.web.applicationPubKey=r),i}var N8=7*24*60*60*1e3;function M8(n){return _(this,null,function*(){let e=yield O8(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ui(e.getKey("auth")),p256dh:Ui(e.getKey("p256dh"))},r=yield S8(n.firebaseDependencies);if(r){if(k8(r.subscriptionOptions,t))return Date.now()>=r.createTime+N8?P8(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield x8(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return d1(n.firebaseDependencies,t)}else return d1(n.firebaseDependencies,t)})}function P8(n,e){return _(this,null,function*(){try{let t=yield R8(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield KC(n.firebaseDependencies,r),t}catch(t){throw t}})}function d1(n,e){return _(this,null,function*(){let r={token:yield A8(n,e),createTime:Date.now(),subscriptionOptions:e};return yield KC(n,r),r.token})}function O8(n,e){return _(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:w8(e)})})}function k8(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}function h1(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return F8(e,n),L8(e,n),V8(e,n),e}function F8(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let s=e.notification.icon;s&&(n.notification.icon=s)}function L8(n,e){e.data&&(n.data=e.data)}function V8(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function U8(n){return typeof n=="object"&&!!n&&g1 in n}j8("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function j8(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function B8(n){if(!n||!n.options)throw zC("App Configuration Object");if(!n.name)throw zC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw zC(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function zC(n){return Tn.create("missing-app-config-values",{valueName:n})}var WC=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=B8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function $8(n){return _(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(p8,{scope:m8}),n.swRegistration.update().catch(()=>{})}catch(e){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function H8(n,e){return _(this,null,function*(){if(!e&&!n.swRegistration&&(yield $8(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");n.swRegistration=e}})}function q8(n,e){return _(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=m1)})}function G8(n,e){return _(this,null,function*(){if(!navigator)throw Tn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Tn.create("permission-blocked");return yield q8(n,e?.vapidKey),yield H8(n,e?.serviceWorkerRegistration),M8(n)})}function z8(n,e,t){return _(this,null,function*(){let r=W8(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[g1],message_name:t[v8],message_time:t[_8],message_device_time:Math.floor(Date.now()/1e3)})})}function W8(n){switch(n){case qm.NOTIFICATION_CLICKED:return"notification_open";case qm.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function K8(n,e){return _(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===qm.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(h1(t)):n.onMessageHandler.next(h1(t)));let r=t.data;U8(r)&&r[y8]==="1"&&(yield z8(n,t.messageType,r))})}var f1="@firebase/messaging",p1="0.12.12";var Q8=n=>{let e=new WC(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>K8(e,t)),e},Y8=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>G8(e,r)}};function Z8(){Dt(new St("messaging",Q8,"PUBLIC")),Dt(new St("messaging-internal",Y8,"PRIVATE")),X(f1,p1),X(f1,p1,"esm2017")}function ZC(){return _(this,null,function*(){try{yield js()}catch{return!1}return typeof window<"u"&&li()&&hl()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function w1(n=Pt()){return ZC().then(e=>{if(!e)throw Tn.create("unsupported-browser")},e=>{throw Tn.create("indexed-db-unsupported")}),Mt(Ne(n),"messaging").getImmediate()}Z8();var hd=class{constructor(e){return e}},I1="messaging",JC=class{constructor(){return xt(I1)}};var E1="__angularfire_symbol__messagingIsSupported",XC="__angularfire_symbol__messagingIsSupportedValue";globalThis[E1]||=ZC().then(n=>globalThis[XC]=n).catch(()=>globalThis[XC]=!1);var Gm={async:()=>globalThis[E1],sync:()=>{let n=globalThis[XC];if(n===void 0)throw new Error(Ga("Messaging"));return n}},eT=new H("angularfire2.messaging-instances");function J8(n,e){if(!Gm.sync())return null;let t=Lt(I1,n,e);return t&&new hd(t)}function X8(n){return(e,t)=>{if(!Gm.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new hd(r)}}var eK={provide:JC,deps:[[new ue,eT]]},tK={provide:hd,useFactory:J8,deps:[[new ue,eT],ct]};function C1(n,...e){return X("angularfire",at.full,"fcm"),nt([tK,eK,{provide:ps,useValue:Gm.async,multi:!0},{provide:eT,useFactory:X8(n),multi:!0,deps:[oe,Re,Tt,_t,...e]}])}var rue=Gm.async;var T1=Ue(w1,!0);var fd=class{constructor(e){return e}},b1="performance",tT=class{constructor(){return xt(b1)}};var nT=new H("angularfire2.performance-instances");function nK(n,e,t){if(!Ty(t))return null;let r=Lt(b1,n,e);return r&&new fd(r)}function rK(n){return(e,t,r)=>{if(!Ty(t))return null;let i=e.runOutsideAngular(()=>n(r));return new fd(i)}}var iK={provide:tT,deps:[[new ue,nT]]},sK={provide:fd,useFactory:nK,deps:[[new ue,nT],ct,wr]};function S1(n,...e){return X("angularfire",at.full,"perf"),nt([sK,iK,{provide:nT,useFactory:rK(n),multi:!0,deps:[oe,wr,Re,Tt,_t,...e]}])}var D1=Ue(Jb,!0);var P1="firebasestorage.googleapis.com",oK="storageBucket",aK=2*60*1e3,cK=10*60*1e3;var ii=class n extends bn{constructor(e,t,r=0){super(rT(e),`Firebase Storage: ${t} (${rT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Bi=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Bi||{});function rT(n){return"storage/"+n}function lK(){let n="An unknown error occurred, please check the error payload for server response.";return new ii(Bi.UNKNOWN,n)}function uK(){return new ii(Bi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dK(){return new ii(Bi.CANCELED,"User canceled the upload/download.")}function hK(n){return new ii(Bi.INVALID_URL,"Invalid URL '"+n+"'.")}function fK(n){return new ii(Bi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function A1(n){return new ii(Bi.INVALID_ARGUMENT,n)}function O1(){return new ii(Bi.APP_DELETED,"The Firebase app was deleted.")}function pK(n){return new ii(Bi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var ji=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw fK(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(ne){ne.path.charAt(ne.path.length-1)==="/"&&(ne.path_=ne.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(ne){ne.path_=decodeURIComponent(ne.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),w={bucket:1,path:3},P=t===P1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,x="([^?#]*)",L=new RegExp(`^https?://${P}/${i}/${x}`,"i"),Q=[{regex:a,indices:c,postModify:s},{regex:v,indices:w,postModify:u},{regex:L,indices:{bucket:1,path:2},postModify:u}];for(let ne=0;ne<Q.length;ne++){let Ze=Q[ne],se=Ze.regex.exec(e);if(se){let b=se[Ze.indices.bucket],y=se[Ze.indices.path];y||(y=""),r=new n(b,y),Ze.postModify(r);break}}if(r==null)throw hK(e);return r}},iT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function mK(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function d(...x){u||(u=!0,e.apply(null,x))}function f(x){i=setTimeout(()=>{i=null,n(v,c())},x)}function m(){s&&clearTimeout(s)}function v(x,...L){if(u){m();return}if(x){m(),d.call(null,x,...L);return}if(c()||o){m(),d.call(null,x,...L);return}r<64&&(r*=2);let Q;a===1?(a=2,Q=0):Q=(r+Math.random())*1e3,f(Q)}let w=!1;function P(x){w||(w=!0,m(),!u&&(i!==null?(x||(a=2),clearTimeout(i),f(0)):x||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,P(!0)},t),P}function gK(n){n(!1)}function vK(n){return n!==void 0}function R1(n,e,t,r){if(r<e)throw A1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw A1(`Invalid value for '${n}'. Expected ${t} or less.`)}function _K(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var sT=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(sT||{});function yK(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var oT=class{constructor(e,t,r,i,s,o,a,c,u,d,f,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,w)=>{this.resolve_=v,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Nc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===sT.NO_ERROR,c=s.getStatus();if(!a||yK(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===sT.ABORT;r(!1,new Nc(!1,null,d));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new Nc(u,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());vK(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=lK();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?O1():dK();o(c)}else{let c=uK();o(c)}};this.canceled_?t(!1,new Nc(!1,null,!0)):this.backoffId_=mK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&gK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Nc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function wK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function IK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function EK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function CK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function TK(n,e,t,r,i,s,o=!0){let a=_K(n.urlParams),c=n.url+a,u=Object.assign({},n.headers);return EK(u,e),wK(u,t),IK(u,s),CK(u,r),new oT(c,n.method,u,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function bK(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function SK(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var wue=256*1024;var aT=class n{constructor(e,t){this._service=e,t instanceof ji?this._location=t:this._location=ji.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SK(this._location.path)}get storage(){return this._service}get parent(){let e=bK(this._location.path);if(e===null)return null;let t=new ji(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw pK(e)}};function x1(n,e){let t=e?.[oK];return t==null?null:ji.makeFromBucketSpec(t,n)}function DK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Xo(i,n.app.options.projectId))}var cT=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=P1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=aK,this._maxUploadRetryTime=cK,this._requests=new Set,i!=null?this._bucket=ji.makeFromBucketSpec(i,this._host):this._bucket=x1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ji.makeFromBucketSpec(this._url,e):this._bucket=x1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){R1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new aT(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new iT(O1());{let o=TK(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},N1="@firebase/storage",M1="0.13.2";var k1="storage";function F1(n=Pt(),e){n=Ne(n);let r=Mt(n,k1).getImmediate({identifier:e}),i=Yi("storage");return i&&L1(r,...i),r}function L1(n,e,t,r={}){DK(n,e,t,r)}function AK(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new cT(t,r,i,e,Sn)}function RK(){Dt(new St(k1,AK,"PUBLIC").setMultipleInstances(!0)),X(N1,M1,""),X(N1,M1,"esm2017")}RK();var pd=class{constructor(e){return e}},V1="storage",lT=class{constructor(){return xt(V1)}};var uT=new H("angularfire2.storage-instances");function xK(n,e){let t=Lt(V1,n,e);return t&&new pd(t)}function NK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new pd(r)}}var MK={provide:lT,deps:[[new ue,uT]]},PK={provide:pd,useFactory:xK,deps:[[new ue,uT],ct]};function U1(n,...e){return X("angularfire",at.full,"gcs"),nt([PK,MK,{provide:uT,useFactory:NK(n),multi:!0,deps:[oe,Re,Tt,_t,[new ue,Dr],[new ue,On],...e]}])}var j1=Ue(F1,!0);var dT="@firebase/remote-config",B1="0.4.9";var $1="remote-config";var OK={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Ln=new kr("remoteconfig","Remote Config",OK);function H1(n=Pt()){return n=Ne(n),Mt(n,$1).getImmediate()}function q1(n){let e=Ne(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var hT=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return _(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function kK(n=navigator){return n.languages&&n.languages[0]||n.language}var fT=class{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return _(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:kK()},c={method:"POST",headers:o,body:JSON.stringify(a)},u=fetch(s,c),d=new Promise((x,L)=>{e.signal.addEventListener(()=>{let q=new Error("The operation was aborted.");q.name="AbortError",L(q)})}),f;try{yield Promise.race([u,d]),f=yield u}catch(x){let L="fetch-client-network";throw x?.name==="AbortError"&&(L="fetch-timeout"),Ln.create(L,{originalErrorMessage:x?.message})}let m=f.status,v=f.headers.get("ETag")||void 0,w,P;if(f.status===200){let x;try{x=yield f.json()}catch(L){throw Ln.create("fetch-client-parse",{originalErrorMessage:L?.message})}w=x.entries,P=x.state}if(P==="INSTANCE_STATE_UNSPECIFIED"?m=500:P==="NO_CHANGE"?m=304:(P==="NO_TEMPLATE"||P==="EMPTY_CONFIG")&&(w={}),m!==304&&m!==200)throw Ln.create("fetch-status",{httpStatus:m});return{status:m,eTag:v,config:w}})}};function FK(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function LK(n){if(!(n instanceof bn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var pT=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return _(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,s){return _(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield FK(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!LK(o))throw o;let a={throttleEndTimeMillis:Date.now()+vl(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var VK=60*1e3,UK=12*60*60*1e3,mT=class{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:VK,minimumFetchIntervalMillis:UK},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function zm(n,e){let t=n.target.error||void 0;return Ln.create(e,{originalErrorMessage:t&&t?.message})}var qo="app_namespace_store",jK="firebase_remote_config",BK=1;function $K(){return new Promise((n,e)=>{try{let t=indexedDB.open(jK,BK);t.onerror=r=>{e(zm(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(qo,{keyPath:"compositeKey"})}}}catch(t){e(Ln.create("storage-open",{originalErrorMessage:t?.message}))}})}var gT=class{constructor(e,t,r,i=$K()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return _(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([qo],"readonly").objectStore(qo),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=u=>{i(zm(u,"storage-get"))},c.onsuccess=u=>{let d=u.target.result;r(d?d.value:void 0)}}catch(c){i(Ln.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,t){return _(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([qo],"readwrite").objectStore(qo),c=this.createCompositeKey(e);try{let u=a.put({compositeKey:c,value:t});u.onerror=d=>{s(zm(d,"storage-set"))},u.onsuccess=()=>{i()}}catch(u){s(Ln.create("storage-set",{originalErrorMessage:u?.message}))}})})}delete(e){return _(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([qo],"readwrite").objectStore(qo),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=u=>{i(zm(u,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Ln.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var vT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return _(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function HK(){Dt(new St($1,n,"PUBLIC").setMultipleInstances(!0)),X(dT,B1),X(dT,B1,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ln.create("registration-window");if(!li())throw Ln.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Ln.create("registration-project-id");if(!o)throw Ln.create("registration-api-key");if(!a)throw Ln.create("registration-app-id");t=t||"firebase";let c=new gT(a,r.name,t),u=new vT(c),d=new Lr(dT);d.logLevel=an.ERROR;let f=new fT(i,Sn,t,s,o,a),m=new pT(f,c),v=new hT(m,c,u,d),w=new mT(r,v,u,c,d);return q1(w),w}}function G1(){return _(this,null,function*(){if(!li())return!1;try{return yield js()}catch{return!1}})}HK();var md=class{constructor(e){return e}},z1="remote-config",_T=class{constructor(){return xt(z1)}};var yT="__angularfire_symbol__remoteConfigIsSupportedValue",W1="__angularfire_symbol__remoteConfigIsSupported";globalThis[W1]||=G1().then(n=>globalThis[yT]=n).catch(()=>globalThis[yT]=!1);var Wm={async:()=>globalThis[W1],sync:()=>{let n=globalThis[yT];if(n===void 0)throw new Error(Ga("RemoteConfig"));return n}},wT=new H("angularfire2.remote-config-instances");function qK(n,e){if(!Wm.sync())return null;let t=Lt(z1,n,e);return t&&new md(t)}function GK(n){return(e,t)=>{if(!Wm.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new md(r)}}var zK={provide:_T,deps:[[new ue,wT]]},WK={provide:md,useFactory:qK,deps:[[new ue,wT],ct]};function K1(n,...e){return X("angularfire",at.full,"rc"),nt([WK,zK,{provide:ps,useValue:Wm.async,multi:!0},{provide:wT,useFactory:GK(n),multi:!0,deps:[oe,Re,Tt,_t,...e]}])}var vde=Wm.async;var Q1=Ue(H1,!0);var Y1="@firebase/vertexai-preview",Z1="0.0.4";var J1="vertexAI",X1="us-central1";var IT=class{constructor(e,t,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=t?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||X1}_delete(){return Promise.resolve()}};var ET=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(ET||{});var Cde=[ET.RECITATION,ET.SAFETY];function eF(n=Pt(),e){return n=Ne(n),Mt(n,J1).getImmediate({identifier:e?.location||X1})}function KK(){Dt(new St(J1,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new IT(t,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),X(Y1,Z1),X(Y1,Z1,"esm2017")}KK();var gd=class{constructor(e){return e}},tF="vertexai",CT=class{constructor(){return xt(tF)}};var TT=new H("angularfire2.vertexai-instances");function QK(n,e){let t=Lt(tF,n,e);return t&&new gd(t)}function YK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gd(r)}}var ZK={provide:CT,deps:[[new ue,TT]]},JK={provide:gd,useFactory:QK,deps:[[new ue,TT],ct]};function nF(n,...e){return X("angularfire",at.full,"vertexai"),nt([JK,ZK,{provide:TT,useFactory:YK(n),multi:!0,deps:[oe,Re,Tt,_t,[new ue,On],...e]}])}var rF=Ue(eF,!0);var iF={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var sF={providers:[kR({eventCoalescing:!0}),$x(Hx),qx(()=>Gx(iF.firebaseConfig)),LN(()=>UN()),oM(()=>iM()),sM,fI,aO(()=>cO()),e1(()=>t1()),c1(()=>l1()),C1(()=>T1()),S1(()=>D1()),U1(()=>j1()),K1(()=>Q1()),nF(()=>rF())]};var Vn=class n{destroyRef=M(hs);firestore=M(Fo);destroyed=new pt;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return _(this,null,function*(){let e=yield b0(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>t&&(t=s)}),(t+1).toString()})}createData(e,t){let r=T0(this.collectionRef,e);return S0(r,t)}updateData(e,t){return S0(T0(this.collectionRef,e),t,{merge:!0})}getDataById(e){return _(this,null,function*(){let t=lO(this.collectionRef,uO("id","==",e)),r=yield b0(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function ut(n){n||(gf(ut),n=M(hs));let e=new pe(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Wt(e))}function Te(n,e){!e?.injector&&gf(Te);let t=e?.injector??M(Re),r=new Tl(1),i=Tr(()=>{let s;try{s=n()}catch(o){ir(()=>r.error(o));return}ir(()=>r.next(s))},{injector:t,manualCleanup:!0});return t.get(hs).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var st=class n extends Vn{collectionPath="/race-configs";collectionRef=ur(this.firestore,this.collectionPath);activeRaceConfig=J(void 0);constructor(){super(),this.getAll().pipe(ut()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.activeRaceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.activeRaceConfig();return t?(t.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.activeRaceConfig();return t?(t.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.activeRaceConfig();return t?(t.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}updateReferenceLapTime(e){let t=this.activeRaceConfig();return t?(t.referenceLapTimeMillisecond=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return lr(this.collectionRef).pipe(Wt(this.destroyed),Y(e=>e.filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var XK=Math.pow(10,8)*24*60*60*1e3,Ehe=-XK;var oF=864e5,Mc=6e4,Pc=36e5,aF=1e3;var e7=3600;var cF=e7*24,Che=cF*7,t7=cF*365.2425,n7=t7/12,The=n7*3,bT=Symbol.for("constructDateFrom");function Kn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&bT in n?n[bT](e):n instanceof Date?new n.constructor(e):new Date(e)}function Be(n,e){return Kn(e||n,n)}function lF(n,e,t){let r=Be(n,t?.in);return isNaN(e)?Kn(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function uF(n,e,t){let r=Be(n,t?.in);if(isNaN(e))return Kn(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),s=Kn(t?.in||n,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function Oc(n,e,t){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:u=0}=e,d=Be(n,t?.in),f=i||r?uF(d,i+r*12):d,m=o||s?lF(f,o+s*7):f,v=c+a*60,P=(u+v*60)*1e3;return Kn(t?.in||n,+m+P)}function Km(n,e,t){return Kn(t?.in||n,+Be(n)+e)}function Rs(n,e,t){return Km(n,e*Pc,t)}function ST(n){let e=Be(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function pn(n,...e){let t=Kn.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function DT(n,e){let t=Be(n,e?.in);return t.setHours(0,0,0,0),t}function dF(n,e,t){let[r,i]=pn(t?.in,n,e),s=DT(r),o=DT(i),a=+s-ST(s),c=+o-ST(o);return Math.round((a-c)/oF)}function Go(n,e,t){let r=Be(n,t?.in);return r.setTime(r.getTime()+e*Mc),r}function Qm(n,e,t){return Km(n,e*1e3,t)}function zo(n,e){let t=+Be(n)-+Be(e);return t<0?-1:t>0?1:t}function hF(n,e,t){let[r,i]=pn(t?.in,n,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function fF(n,e,t){let[r,i]=pn(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function mF(n,e,t){let[r,i]=pn(t?.in,n,e),s=pF(r,i),o=Math.abs(dF(r,i));r.setDate(r.getDate()-s*o);let a=+(pF(r,i)===-s),c=s*(o-a);return c===0?0:c}function pF(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function kc(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function gF(n,e,t){let[r,i]=pn(t?.in,n,e),s=(+r-+i)/Pc;return kc(t?.roundingMethod)(s)}function $i(n,e){return+Be(n)-+Be(e)}function Ym(n,e,t){let r=$i(n,e)/Mc;return kc(t?.roundingMethod)(r)}function vF(n,e){let t=Be(n,e?.in);return t.setHours(23,59,59,999),t}function _F(n,e){let t=Be(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function yF(n,e){let t=Be(n,e?.in);return+vF(t,e)==+_F(t,e)}function wF(n,e,t){let[r,i,s]=pn(t?.in,n,n,e),o=zo(i,s),a=Math.abs(hF(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=zo(i,s)===-o;yF(r)&&a===1&&zo(r,s)===1&&(c=!1);let u=o*(a-+c);return u===0?0:u}function IF(n,e,t){let r=$i(n,e)/1e3;return kc(t?.roundingMethod)(r)}function EF(n,e,t){let[r,i]=pn(t?.in,n,e),s=zo(r,i),o=Math.abs(fF(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=zo(r,i)===-s,c=s*(o-+a);return c===0?0:c}function CF(n,e){let[t,r]=pn(n,e.start,e.end);return{start:t,end:r}}function AT(n){return Math.trunc(n*Pc)}function RT(n,e){let{start:t,end:r}=CF(e?.in,n),i={},s=EF(r,t);s&&(i.years=s);let o=Oc(t,{years:i.years}),a=wF(r,o);a&&(i.months=a);let c=Oc(o,{months:i.months}),u=mF(r,c);u&&(i.days=u);let d=Oc(c,{days:i.days}),f=gF(r,d);f&&(i.hours=f);let m=Oc(d,{hours:i.hours}),v=Ym(r,m);v&&(i.minutes=v);let w=Oc(m,{minutes:i.minutes}),P=IF(r,w);return P&&(i.seconds=P),i}function TF(n,e){return+Be(n)>+Be(e)}function bF(n,e){return+Be(n)<+Be(e)}function Zm(n){return Math.trunc(n*Mc)}function SF(n){return n*aF}function DF(n,e,t){return Go(n,-e,t)}var Bt=class n extends Vn{collectionPath="/races";collectionRef=ur(this.firestore,this.collectionPath);raceConfigService=M(st);activeRace=J(void 0);endRaceDate=J(void 0);constructor(){super(),We({races:this.getAll(),raceConfig:Te(this.raceConfigService.activeRaceConfig)}).pipe(ut(),Y(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e,t),i=r?Rs(r.start.toDate(),t.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return _(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}getAll(){return lr(this.collectionRef).pipe(Wt(this.destroyed),Y(e=>e.filter(t=>!t.deleted)))}getActiveRace(e,t){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(Rs(s.start.toDate(),t.durationHour)>=r)return s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function xs(n,e){if(!n||!e)return"--:--:--";let t=RT({end:e,start:n});return Jm(t)}function Wo(n){if(!n)return"--:--:--";let e=RT({end:n,start:new Date});return Jm(e)}function Yt(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return Jm(t)}function AF(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return Jm(t)}function RF(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return r7(r,t)}function r7(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:---":[vd(n.minutes),vd(n.seconds),i7(e)].join(":")}function Jm(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:--":[vd(n.hours),vd(n.minutes),vd(n.seconds)].join(":")}function vd(n){return n?n<10?`0${n}`:`${n}`:"00"}function i7(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var mn=class n extends Vn{collectionPath="/pits";collectionRef=ur(this.firestore,this.collectionPath);raceService=M(Bt);raceConfigService=M(st);activePit=J(void 0);activePitRemainingMilliseconds=J(0);lastRefuelPit=J(void 0);pits=J([]);completedDriverChanges=J(0);lastDriverChangePit=J(void 0);remainingDriverChanges=J(0);constructor(){super(),We({pits:this.getRacePits(),activeRaceConfig:Te(this.raceConfigService.activeRaceConfig),ping:Ht(1e3)}).pipe(ut()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return We({pits:lr(this.collectionRef),activeRace:Te(this.raceService.activeRace)}).pipe(Wt(this.destroyed),Y(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return Qm(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let t=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of t)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ns=class n{raceService=M(Bt);pitService=M(mn);raceConfigService=M(st);optimizedStint=J(void 0);constructor(){We({activeRace:Te(this.raceService.activeRace),endRaceDate:Te(this.raceService.endRaceDate),activeRaceConfig:Te(this.raceConfigService.activeRaceConfig),remainingDriverChanges:Te(this.pitService.remainingDriverChanges),lastDriverChangePit:Te(this.pitService.lastDriverChangePit),ping:Ht(1e3)}).pipe(ut()).subscribe(({activeRace:e,endRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,lastDriverChangePit:s})=>{r?this.optimizedStint.set(this.calculateOptimizedStint(e?e.start.toDate():new Date,t||Rs(new Date,r.durationHour),r,i,s)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,s){let o=new Date;if(o>=t)return;let a=SF(r.minPitSeconds*i),c=$i(t,o)-a,u=s?Qm(s.entryTime.toDate(),r.minPitSeconds):e,f=($i(t,u)-a)/(i+1),m=c/i;return{avgStintMillisecondsTime:f,laps:Math.floor(f/r.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:m,lapsIfDriverChangeNow:Math.floor(m/r.referenceLapTimeMillisecond)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Zt=class n extends Vn{collectionPath="/stints";collectionRef=ur(this.firestore,this.collectionPath);raceService=M(Bt);raceConfigService=M(st);stintOptimizerService=M(Ns);activeRace=this.raceService.activeRace;stints=J([]);activeStint=J(void 0);activeStintTimeOnTrack=J(0);activeStintLaps=J(0);activeStintRemainingTimeOnTrack=J(0);activeStintRemainingLaps=J(0);activeStintGainedTimeOnTrack=J(0);activeStintGainedLaps=J(0);constructor(){super(),We({stints:this.getRaceStints(),activeRaceConfig:Te(this.raceConfigService.activeRaceConfig),optimizedStint:Te(this.stintOptimizerService.optimizedStint),ping:Ht(1e3)}).pipe(ut()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return _(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return We({stints:lr(this.collectionRef),activeRace:Te(this.activeRace)}).pipe(Wt(this.destroyed),Y(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Fc=class n{raceService=M(Bt);stintService=M(Zt);pitService=M(mn);stintOptimizerService=M(Ns);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;optimizedStintMilliseconds=Se(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.avgStintMillisecondsTime:0});startRace(e){return _(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}pitIn(e,t,r){return _(this,null,function*(){let i=this.activeRace(),s=this.activeStint();if(i&&s){let o=this.createPit(s.driverId,e,i.id,t,r),a=yield this.pitService.create(o);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return _(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Nt.now();yield this.closeActivePit(r),yield this.startStint(e.id,t.exitDriverId,r)}})}startStint(e,t,r){return _(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return _(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return _(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:Nt.now(),deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,optimumMilliseconds:this.optimizedStintMilliseconds(),raceId:e,startDate:r}}createPit(e,t,r,i,s){return{id:"1",entryDriverId:e,entryTime:Nt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:s,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var UF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(Ii),Ae(zr))}}static{this.\u0275dir=mt({type:n})}}return n})(),Td=(()=>{class n extends UF{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,features:[Pn]})}}return n})(),Bc=new H(""),s7={provide:Bc,useExisting:tr(()=>MT),multi:!0},MT=(()=>{class n extends Td{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&he("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[Kr([s7]),Pn]})}}return n})(),o7={provide:Bc,useExisting:tr(()=>$c),multi:!0};function a7(){let n=Di()?Di().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var c7=new H(""),$c=(()=>{class n extends UF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!a7())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(Ii),Ae(zr),Ae(c7,8))}}static{this.\u0275dir=mt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&he("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Kr([o7]),Pn]})}}return n})();function xT(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var og=new H(""),jF=new H("");function l7(n){return e=>{if(xT(e.value)||xT(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function u7(n){return xT(n.value)?{required:!0}:null}function xF(n){return null}function BF(n){return n!=null}function $F(n){return ao(n)?dt(n):n}function HF(n){let e={};return n.forEach(t=>{e=t!=null?B(B({},e),t):e}),Object.keys(e).length===0?null:e}function qF(n,e){return e.map(t=>t(n))}function d7(n){return!n.validate}function GF(n){return n.map(e=>d7(e)?e:t=>e.validate(t))}function h7(n){if(!n)return null;let e=n.filter(BF);return e.length==0?null:function(t){return HF(qF(t,e))}}function PT(n){return n!=null?h7(GF(n)):null}function f7(n){if(!n)return null;let e=n.filter(BF);return e.length==0?null:function(t){let r=qF(t,e).map($F);return Cv(r).pipe(Y(HF))}}function OT(n){return n!=null?f7(GF(n)):null}function NF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function p7(n){return n._rawValidators}function m7(n){return n._rawAsyncValidators}function NT(n){return n?Array.isArray(n)?n:[n]:[]}function eg(n,e){return Array.isArray(n)?n.includes(e):n===e}function MF(n,e){let t=NT(e);return NT(n).forEach(i=>{eg(t,i)||t.push(i)}),t}function PF(n,e){return NT(e).filter(t=>!eg(n,t))}var tg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=PT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=OT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Uc=class extends tg{get formDirective(){return null}get path(){return null}},Cd=class extends tg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ng=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},g7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Bme=be(B({},g7),{"[class.ng-submitted]":"isSubmitted"}),Ms=(()=>{class n extends ng{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(Cd,2))}}static{this.\u0275dir=mt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Af("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Pn]})}}return n})(),Ps=(()=>{class n extends ng{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Ae(Uc,10))}}static{this.\u0275dir=mt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Af("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Pn]})}}return n})();var _d="VALID",Xm="INVALID",Lc="PENDING",yd="DISABLED",jc=class{},rg=class extends jc{constructor(e,t){super(),this.value=e,this.source=t}},Id=class extends jc{constructor(e,t){super(),this.pristine=e,this.source=t}},Ed=class extends jc{constructor(e,t){super(),this.touched=e,this.source=t}},Vc=class extends jc{constructor(e,t){super(),this.status=e,this.source=t}};function zF(n){return(ag(n)?n.validators:n)||null}function v7(n){return Array.isArray(n)?PT(n):n||null}function WF(n,e){return(ag(e)?e.asyncValidators:n)||null}function _7(n){return Array.isArray(n)?OT(n):n||null}function ag(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function y7(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Z(1e3,"");if(!r[t])throw new Z(1001,"")}function w7(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Z(1002,"")})}var ig=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Se(()=>this.statusReactive()),this.statusReactive=J(void 0),this._pristine=Se(()=>this.pristineReactive()),this.pristineReactive=J(!0),this._touched=Se(()=>this.touchedReactive()),this.touchedReactive=J(!1),this._events=new pt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ir(this.statusReactive)}set status(e){ir(()=>this.statusReactive.set(e))}get valid(){return this.status===_d}get invalid(){return this.status===Xm}get pending(){return this.status==Lc}get disabled(){return this.status===yd}get enabled(){return this.status!==yd}get pristine(){return ir(this.pristineReactive)}set pristine(e){ir(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ir(this.touchedReactive)}set touched(e){ir(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(MF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(MF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PF(e,this._rawAsyncValidators))}hasValidator(e){return eg(this._rawValidators,e)}hasAsyncValidator(e){return eg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(be(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ed(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ed(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(be(B({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Id(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Id(!0,r))}markAsPending(e={}){this.status=Lc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(be(B({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=yd,this.errors=null,this._forEachChild(i=>{i.disable(be(B({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rg(this.value,r)),this._events.next(new Vc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(be(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_d,this._forEachChild(r=>{r.enable(be(B({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(be(B({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_d||this.status===Lc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rg(this.value,t)),this._events.next(new Vc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(be(B({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yd:_d}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Lc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=$F(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Vc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ot,this.statusChanges=new Ot}_calculateStatus(){return this._allControlsDisabled()?yd:this.errors?Xm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Lc)?Lc:this._anyControlsHaveStatus(Xm)?Xm:_d}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Id(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Ed(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ag(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=v7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_7(this._rawAsyncValidators)}},sg=class extends ig{constructor(e,t,r){super(zF(t),WF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){w7(this,!0,e),Object.keys(e).forEach(r=>{y7(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var cg=new H("CallSetDisabledState",{providedIn:"root",factory:()=>lg}),lg="always";function I7(n,e){return[...e.path,n]}function KF(n,e,t=lg){QF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),C7(n,e),b7(n,e),T7(n,e),E7(n,e)}function OF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function E7(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function QF(n,e){let t=p7(n);e.validator!==null?n.setValidators(NF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=m7(n);e.asyncValidator!==null?n.setAsyncValidators(NF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();OF(e._rawValidators,i),OF(e._rawAsyncValidators,i)}function C7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&YF(n,e)})}function T7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&YF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function YF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function b7(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function S7(n,e){n==null,QF(n,e)}function D7(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function A7(n){return Object.getPrototypeOf(n.constructor)===Td}function R7(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function x7(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===$c?t=s:A7(s)?r=s:i=s}),i||r||t||null}var N7={provide:Uc,useExisting:tr(()=>Hi)},wd=Promise.resolve(),Hi=(()=>{class n extends Uc{get submitted(){return ir(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Se(()=>this.submittedReactive()),this.submittedReactive=J(!1),this._directives=new Set,this.ngSubmit=new Ot,this.form=new sg({},PT(t),OT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),KF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wd.then(()=>{let r=this._findContainer(t.path),i=new sg({});S7(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){wd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),R7(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(Ae(og,10),Ae(jF,10),Ae(cg,8))}}static{this.\u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&he("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Kr([N7]),Pn]})}}return n})();function kF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function FF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var M7=class extends ig{constructor(e=null,t,r){super(zF(t),WF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ag(t)&&(t.nonNullable||t.initialValueIsDefault)&&(FF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){FF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var P7={provide:Cd,useExisting:tr(()=>qi)},LF=Promise.resolve(),qi=(()=>{class n extends Cd{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new M7,this._registered=!1,this.name="",this.update=new Ot,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=x7(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),D7(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){KF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){LF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&ql(r);LF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?I7(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Ae(Uc,9),Ae(og,10),Ae(jF,10),Ae(Bc,10),Ae(ms,8),Ae(cg,8))}}static{this.\u0275dir=mt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Kr([P7]),Pn,wi]})}}return n})(),Os=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=mt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),O7={provide:Bc,useExisting:tr(()=>bd),multi:!0},bd=(()=>{class n extends Td{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&he("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Kr([O7]),Pn]})}}return n})();var k7=new H("");var F7={provide:Bc,useExisting:tr(()=>Hc),multi:!0};function ZF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function L7(n){return n.split(":")[0]}var Hc=(()=>{class n extends Td{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=ZF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=L7(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&he("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Kr([F7]),Pn]})}}return n})(),ug=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ZF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Ae(zr),Ae(Ii),Ae(Hc,9))}}static{this.\u0275dir=mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),V7={provide:Bc,useExisting:tr(()=>JF),multi:!0};function VF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function U7(n){return n.split(":")[0]}var JF=(()=>{class n extends Td{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],u=this._getOptionValue(c.value);i.push(u)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=U7(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&he("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Kr([V7]),Pn]})}}return n})(),dg=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(VF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(VF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Ae(zr),Ae(Ii),Ae(JF,9))}}static{this.\u0275dir=mt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function j7(n){return typeof n=="number"?n:parseFloat(n)}var XF=(()=>{class n{constructor(){this._validator=xF}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xF,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=mt({type:n,features:[wi]})}}return n})();var B7={provide:og,useExisting:tr(()=>Sd),multi:!0},Sd=(()=>{class n extends XF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>j7(t),this.createValidator=t=>l7(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Hl("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Kr([B7]),Pn]})}}return n})(),$7={provide:og,useExisting:tr(()=>Dd),multi:!0};var Dd=(()=>{class n extends XF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ql,this.createValidator=t=>u7}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=yr(n)))(i||n)}})()}static{this.\u0275dir=mt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Hl("required",i._enabled?"":null)},inputs:{required:"required"},features:[Kr([$7]),Pn]})}}return n})();var eL=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=us({type:n})}static{this.\u0275inj=ls({})}}return n})();var ks=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cg,useValue:t.callSetDisabledState??lg}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=us({type:n})}static{this.\u0275inj=ls({imports:[eL]})}}return n})(),tL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:k7,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:cg,useValue:t.callSetDisabledState??lg}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=us({type:n})}static{this.\u0275inj=ls({imports:[eL]})}}return n})();var fg=class n extends Vn{collectionPath="/laps";collectionRef=ur(this.firestore,this.collectionPath);raceService=M(Bt);laps=J([]);constructor(){super(),We({laps:this.getRaceLaps(),activeRace:Te(this.raceService.activeRace)}).pipe(ut()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return We({laps:lr(this.collectionRef),activeRace:Te(this.raceService.activeRace)}).pipe(Wt(this.destroyed),Y(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var si=class n extends Vn{collectionPath="/drivers";collectionRef=ur(this.firestore,this.collectionPath);lapService=M(fg);stintService=M(Zt);raceConfigService=M(st);drivers=J([]);driversReferenceLapTimeMap=J(new Map);driversTimeOnTrackMap=J(new Map);driversTimeOnTrackWarningMap=J(new Map);driversStintCountMap=J(new Map);driverWithLessTimeOnTrack=J(void 0);driversTimeFromLastStintMap=J(new Map);driversTimeOnTrackWarningCount=Se(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),We({drivers:this.getAll(),laps:Te(this.lapService.laps),stints:Te(this.stintService.stints),activeRaceConfig:Te(this.raceConfigService.activeRaceConfig),ping:Ht(1e3)}).pipe(ut()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithLessTimeOnTrack.set(this.getDriverWithLessTimeOnTrack(r,e)),this.driversTimeFromLastStintMap.set(this.createDriverTimeFromLastStintMap(r,e))})}getAll(){return lr(this.collectionRef).pipe(Wt(this.destroyed),Y(e=>e.filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(s=>{r.set(s.id,0)});let i=e.reduce((s,o)=>(s[o.driverId]||(s[o.driverId]=[]),s[o.driverId].push(o.millisecondsTime),s),{});for(let s in i){let o=i[s],a=o.reduce((c,u)=>c+u,0)/o.length;r.set(s,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let s;i.endDate?s=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():s=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+s):r.set(i.driverId,s)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=AT(t.minDriverOnTrackHour),s=AT(t.maxDriverOnTrackHour),o=Zm(t.warningDriverOnTrackThresholdMinute);e.forEach((a,c)=>{let u=a<i,d=s-a<=o;r.set(c,u||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithLessTimeOnTrack(e,t){if(t.length===0)return;let r=this.createDriverTrackTimeMap(e,t),i=e.find(c=>c.endDate===null)?.driverId,s=new Map(t.map(c=>[c.id,c])),o=1/0,a;return r.forEach((c,u)=>{u!==i&&c<o&&(o=c,a=s.get(u))}),a}createDriverTimeFromLastStintMap(e,t){let r=new Map;return t.forEach(i=>{let s=e.filter(o=>o.driverId===i.id).sort((o,a)=>a.startDate.toDate().getTime()-o.startDate.toDate().getTime()).at(0);s&&s.endDate?r.set(i.id,new Date().getTime()-s.endDate.toDate().getTime()):r.set(i.id,0)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};function H7(n,e){if(n&1&&(C(0,"option",7),R(1),T()),n&2){let t=e.$implicit;ee("value",t.id),k(),W(" ",t.raceName," ")}}function q7(n,e){if(n&1){let t=Ei();C(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),R(4,"Start driver"),T(),C(5,"select",4),Er("ngModelChange",function(i){gt(t);let s=G();return Wr(s.selectedDriver,i)||(s.selectedDriver=i),vt(i)}),he("change",function(){gt(t);let i=G();return vt(i.updateDriverId())}),re(6,H7,2,2,"option",5),T()()(),C(7,"button",6),he("click",function(){gt(t);let i=G();return vt(i.startRace())}),R(8," Start race "),T()()}if(n&2){let t=G();k(5),Ir("ngModel",t.selectedDriver),k(),ee("ngForOf",t.drivers())}}function G7(n,e){if(n&1&&(C(0,"div",1),R(1),T()),n&2){let t=G();k(),W(" ",t.endRaceCountdown," ")}}var pg=class n{raceService=M(Bt);raceConfigService=M(st);raceManagerService=M(Fc);driverService=M(si);drivers=this.driverService.drivers;endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";selectedDriver="1";constructor(){We({endRaceDate:Te(this.endRaceDate),ping:Ht(1e3)}).pipe(ut()).subscribe(e=>{this.endRaceCountdown=Wo(e.endRaceDate)}),Tr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-race"]],standalone:!0,features:[Ge],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[3,"value"]],template:function(t,r){t&1&&re(0,q7,9,2,"div",0)(1,G7,2,1,"div",1),t&2&&de(r.endRaceDate()?1:0)},dependencies:[ks,Os,ug,dg,Hc,Ms,Ps,qi,Hi,ar]})};var qc=class n{raceService=M(Bt);raceConfigService=M(st);pitService=M(mn);openingTime=J(void 0);closingTime=J(void 0);tyreChangeWindowOpen=J(!1);remainingTyreChange=J(0);constructor(){We({pits:Te(this.pitService.pits),activeRace:Te(this.raceService.activeRace),raceConfig:Te(this.raceConfigService.activeRaceConfig),ping:Ht(1e3)}).pipe(ut()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(Rs(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(Rs(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var z7=n=>({"mb-2":n}),W7=n=>({"animate-bounce":n});function K7(n,e){if(n&1&&(C(0,"div",4),R(1),T()),n&2){let t=G();k(),W(" Remaining: ",t.remainingTyreChange()," ")}}function Q7(n,e){n&1&&(C(0,"div",5),R(1," Completed! "),T())}function Y7(n,e){if(n&1&&(C(0,"div",6),R(1," Window open "),T()),n&2){let t=G();ee("ngClass",rt(1,W7,t.remainingTyreChange()>0))}}function Z7(n,e){n&1&&(C(0,"div",7),R(1," Window closed "),T())}function J7(n,e){if(n&1&&(R(0),Ci(1,"date")),n&2){let t=G(2);W(" ",Ti(1,1,t.openingTime(),"HH:mm:ss")," ")}}function X7(n,e){n&1&&R(0," --:--:-- ")}function eQ(n,e){if(n&1&&(R(0),Ci(1,"date")),n&2){let t=G(2);W(" ",Ti(1,1,t.closingTime(),"HH:mm:ss")," ")}}function tQ(n,e){n&1&&R(0," --:--:-- ")}function nQ(n,e){if(n&1&&(C(0,"div",8)(1,"div")(2,"div",9),R(3,"Opening time"),T(),C(4,"div",10),re(5,J7,2,4)(6,X7,1,0),T()(),C(7,"div")(8,"div",11),R(9,"Opening in"),T(),C(10,"div",12),R(11),T()()(),Ce(12,"hr",13),C(13,"div",14)(14,"div")(15,"div",9),R(16,"Closing time"),T(),C(17,"div",10),re(18,eQ,2,4)(19,tQ,1,0),T()(),C(20,"div")(21,"div",11),R(22,"Closing in"),T(),C(23,"div",12),R(24),T()()()),n&2){let t=G();k(5),de(t.openingTime()?5:6),k(6),W(" ",t.countdownOpeningTime()," "),k(7),de(t.closingTime()?18:19),k(6),W(" ",t.countdownClosingTime()," ")}}var mg=class n{tyreService=M(qc);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Se(()=>Wo(this.tyreService.openingTime()));countdownClosingTime=Se(()=>Wo(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-tyre-change-window"]],standalone:!0,features:[Ge],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F6DE} \u{1F504} Tyre change"),T(),C(4,"div",3),re(5,K7,2,1,"div",4)(6,Q7,2,0,"div",5)(7,Y7,2,3,"div",6)(8,Z7,2,0,"div",7),T()(),re(9,nQ,25,4),T()),t&2&&(k(),ee("ngClass",rt(4,z7,r.isOpen)),k(4),de(r.remainingTyreChange()>0?5:6),k(2),de(r.tyreChangeWindowOpen()?7:8),k(2),de(r.isOpen?9:-1))},dependencies:[Pa,ht]})};var gg=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[wi,Ge],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),R(4),T()()(),Ce(5,"div",4),T()),t&2&&(k(),ee("ngClass",r.batteryBorderColor),k(),Df("width",r.charge,"%"),ee("ngClass",r.batteryColor),k(2),kt(r.charge),k(),ee("ngClass",r.batteryBorderColor))},dependencies:[ht],changeDetection:0})};var vg=class n{raceService=M(Bt);pitService=M(mn);raceConfigService=M(st);lastRefuelTime=J(void 0);emptyFuelTime=J(void 0);remainingFuelPercentage=J(100);remainingFuelLap=J(0);constructor(){We({lastRefuelPit:Te(this.pitService.lastRefuelPit),activeRace:Te(this.raceService.activeRace),raceConfig:Te(this.raceConfigService.activeRaceConfig),ping:Ht(1e3)}).pipe(ut()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e&&e.exitTime)return e.exitTime.toDate();if(t)return t.start.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return Go(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=Ym(e,new Date)/t.fuelDurationMinute*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=$i(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=Zm(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var rQ=n=>({"mb-2":n}),iQ=n=>({"animate-bounce":n});function sQ(n,e){if(n&1&&(R(0),Ci(1,"date")),n&2){let t=G(2);W(" ",Ti(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function oQ(n,e){n&1&&R(0," --:--:-- ")}function aQ(n,e){if(n&1&&(R(0),Ci(1,"date")),n&2){let t=G(2);W(" ",Ti(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function cQ(n,e){n&1&&R(0," --:--:-- ")}function lQ(n,e){if(n&1){let t=Ei();C(0,"div",7)(1,"div")(2,"div",8),R(3,"Last refuel time"),T(),C(4,"div",9),re(5,sQ,2,4)(6,oQ,1,0),T()(),C(7,"div")(8,"div",10),R(9,"Since last refuel"),T(),C(10,"div",11),R(11),T()()(),Ce(12,"hr",12),C(13,"div",7)(14,"div")(15,"div",8),R(16,"Empty time"),T(),C(17,"div",9),re(18,aQ,2,4)(19,cQ,1,0),T()(),C(20,"div")(21,"div",10),R(22,"Empty in"),T(),C(23,"div",11),R(24),T()()(),Ce(25,"hr",12),C(26,"div",13)(27,"div")(28,"div",8),R(29,"Remaining laps"),T(),C(30,"div",9),R(31),T()(),C(32,"div")(33,"div",10),R(34,"Fuel duration (min)"),T(),C(35,"div",14)(36,"button",15),he("click",function(){gt(t);let i=G();return vt(i.increaseFuelDuration())}),R(37,"+"),T(),C(38,"form",16),he("ngSubmit",function(){gt(t);let i=G();return vt(i.onSubmit())}),C(39,"input",17),Er("ngModelChange",function(i){gt(t);let s=G();return Wr(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),vt(i)}),T()(),C(40,"button",18),he("click",function(){gt(t);let i=G();return vt(i.decreaseFuelDuration())}),R(41,"-"),T()()()()}if(n&2){let t=G();k(5),de(t.lastRefuelTime()?5:6),k(6),W(" ",t.sinceLastRefuel()," "),k(7),de(t.emptyFuelTime()?18:19),k(6),W(" ",t.emptyFuelCountdown()," "),k(7),W(" ",t.remainingFuelLap()," "),k(8),Ir("ngModel",t.fuelDurationMinute)}}var _g=class n{raceConfigService=M(st);fuelService=M(vg);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Se(()=>Wo(this.emptyFuelTime()));sinceLastRefuel=Se(()=>xs(this.lastRefuelTime(),new Date));warning=Se(()=>this.remainingFuelPercentage()<=20);remainingColor=Se(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){Tr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-fuel"]],standalone:!0,features:[Ge],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u26FD\uFE0F Fuel"),T(),C(4,"div",3)(5,"div",4),R(6),T(),C(7,"div",5),R(8),T(),Ce(9,"app-battery",6),T()(),re(10,lQ,42,6),T()),t&2&&(k(),ee("ngClass",rt(8,rQ,r.isOpen)),k(3),ee("ngClass",rt(10,iQ,r.warning())),k(),ee("ngClass",r.remainingColor()),k(),W(" Empty: ",r.emptyFuelCountdown()," "),k(),ee("ngClass",r.remainingColor()),k(),W(" Laps: ",r.remainingFuelLap()," "),k(),ee("charge",r.remainingFuelPercentage()),k(),de(r.isOpen?10:-1))},dependencies:[ht,Pa,gg,ks,Os,$c,bd,Ms,Ps,Dd,Sd,qi,Hi]})};var uQ=n=>({"mb-2":n});function dQ(n,e){if(n&1&&(C(0,"div",6)(1,"div")(2,"div",7),R(3,"Optimized AVG time"),T(),C(4,"div",8),R(5),T()(),C(6,"div")(7,"div",9),R(8,"Laps"),T(),C(9,"div",10),R(10),T()()(),Ce(11,"hr",11),C(12,"div",12)(13,"div")(14,"div",7),R(15," Optimized AVG time "),C(16,"strong"),R(17,"if driver change now"),T()(),C(18,"div",8),R(19),T()(),C(20,"div")(21,"div",9),R(22,"Laps"),T(),C(23,"div",10),R(24),T()()()),n&2){let t=G();k(5),W(" ",t.AVGStintTime()," "),k(5),W(" ",t.laps()," "),k(9),W(" ",t.AVGStintTimeIfDriverChangeNow()," "),k(5),W(" ",t.lapsIfDriverChangeNow()," ")}}var yg=class n{stintOptimizerService=M(Ns);AVGStintTime=Se(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Yt(e.avgStintMillisecondsTime):"--:--:--"});laps=Se(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Se(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Yt(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Se(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-stint-optimizer"]],standalone:!0,features:[Ge],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F9E0} Stint optimizer"),T(),C(4,"div",3)(5,"div",4),R(6),T(),C(7,"div",5),R(8),T()()(),re(9,dQ,25,4),T()),t&2&&(k(),ee("ngClass",rt(4,uQ,r.isOpen)),k(5),W(" Optimum: ",r.AVGStintTime()," "),k(2),W(" Laps: ",r.laps()," "),k(),de(r.isOpen?9:-1))},dependencies:[ht]})};var hQ=n=>({"mb-2":n}),fQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),pQ=n=>({"bg-yellow-500 text-white":n});function mQ(n,e){if(n&1&&(C(0,"div",4),R(1),T()),n&2){let t=G();k(),W(" Warning: ",t.driversTimeOnTrackWarningCount()," ")}}function gQ(n,e){n&1&&(C(0,"div",5),R(1," Completed! "),T())}function vQ(n,e){if(n&1&&(C(0,"tr",17)(1,"td",18),R(2),T(),C(3,"td",19),R(4),T(),C(5,"td",20),R(6),T(),C(7,"td",21)(8,"div",22),R(9),T()(),C(10,"td",23),R(11),T()()),n&2){let t=e.$implicit,r=G(2);ee("ngClass",Cr(7,fQ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),k(2),kt(t.id),k(2),kt(t.raceName),k(2),W(" ",r.getDriverStintCount(t.id)," "),k(2),ee("ngClass",rt(10,pQ,r.getDriverTimeOnTrackWarning(t.id))),k(),W(" ",r.getDriverTimeOnTrack(t.id)," "),k(2),W("",r.getDriverTimeFromLastStint(t.id)," ")}}function _Q(n,e){if(n&1&&(C(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),Ce(4,"th",9),C(5,"th",10),R(6," Name "),T(),C(7,"th",11),R(8," Stint "),T(),C(9,"th",12),R(10," On track "),T(),C(11,"th",13),R(12," From last stint "),T()()()(),C(13,"div",14)(14,"table",15)(15,"tbody"),re(16,vQ,12,12,"tr",16),T()()()()),n&2){let t=G();k(16),ee("ngForOf",t.drivers())}}var wg=class n{driverService=M(si);stintService=M(Zt);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=Se(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverTimeOnTrack(e){return Yt(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)??0}getDriverTimeFromLastStint(e){return Yt(this.driverService.driversTimeFromLastStintMap().get(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-driver"]],standalone:!0,features:[Ge],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-left","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","rounded",3,"ngClass"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F417} Driver"),T(),C(4,"div",3),re(5,mQ,2,1,"div",4)(6,gQ,2,0,"div",5),T()(),re(7,_Q,17,1,"div",6),T()),t&2&&(k(),ee("ngClass",rt(3,hQ,r.isOpen)),k(4),de(r.driversTimeOnTrackWarningCount()>0?5:6),k(2),de(r.isOpen?7:-1))},dependencies:[ht,ar]})};var Ig=class n{raceService=M(Bt);stintService=M(Zt);raceConfigService=M(st);open=J(!1);openInMilliseconds=J(0);constructor(){We({endRaceDate:Te(this.raceService.endRaceDate),activeStint:Te(this.stintService.activeStint),activeRaceConfig:Te(this.raceConfigService.activeRaceConfig),ping:Ht(1e3)}).pipe(ut()).subscribe(({endRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return Go(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,s=DF(e,r.pitLaneCloseBeforeEndRaceMinute),o=bF(i,s),a=Go(t.startDate.toDate(),r.minStintMinute),c=TF(i,a);return o&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var Eg=class n{audio=new Audio;constructor(){this.audio.addEventListener("error",e=>console.error("Audio error:",e))}play(){this.audio.play()}playFile(e){this.audio=new Audio(e),this.audio.play()}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0}seek(e){this.audio.currentTime=e}setVolume(e){this.audio.volume=e}setLoop(e){this.audio.loop=e}on(e,t){this.audio.addEventListener(e,t)}off(e,t){this.audio.removeEventListener(e,t)}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var yQ=n=>({"mb-4":n}),wQ=n=>({"animate-bounce":n});function IQ(n,e){if(n&1&&(C(0,"div",3),R(1),T()),n&2){let t=G();k(),W(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function EQ(n,e){n&1&&(C(0,"div",5),R(1," Open "),T())}function CQ(n,e){n&1&&(C(0,"div",6),R(1," Closed "),T())}function TQ(n,e){if(n&1&&(C(0,"option",20),R(1),T()),n&2){let t=e.$implicit;ee("value",t.id),k(),W(" ",t.raceName," ")}}function bQ(n,e){if(n&1){let t=Ei();C(0,"div",11),R(1,"PIT SETTINGS"),T(),C(2,"form")(3,"div",12)(4,"label",13),R(5,"\u{1F417} Driver"),T(),C(6,"select",14),Er("ngModelChange",function(i){gt(t);let s=G(2);return Wr(s.selectedDriver,i)||(s.selectedDriver=i),vt(i)}),he("change",function(){gt(t);let i=G(2);return vt(i.updateDriverId())}),re(7,TQ,2,2,"option",15),T()(),C(8,"div",12)(9,"label",16),R(10,"\u26FD\uFE0F Refueling"),T(),C(11,"input",17),he("change",function(){gt(t);let i=G(2);return vt(i.updateRefueling())}),Er("ngModelChange",function(i){gt(t);let s=G(2);return Wr(s.refueling,i)||(s.refueling=i),vt(i)}),T()(),C(12,"div",12)(13,"label",18),R(14,"\u{1F6DE} Tyre change"),T(),C(15,"input",19),Er("ngModelChange",function(i){gt(t);let s=G(2);return Wr(s.tyreChange,i)||(s.tyreChange=i),vt(i)}),he("change",function(){gt(t);let i=G(2);return vt(i.updateTyreChange())}),T()()()}if(n&2){let t=G(2);k(6),ee("disabled",t.activePit()!==void 0),Ir("ngModel",t.selectedDriver),k(),ee("ngForOf",t.drivers()),k(4),ee("disabled",t.activePit()!==void 0),Ir("ngModel",t.refueling),k(4),ee("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),Ir("ngModel",t.tyreChange)}}function SQ(n,e){if(n&1&&(C(0,"div",21),R(1),T()),n&2){let t=G(3);ee("ngClass",rt(2,wQ,t.activePitRemainingMilliseconds()<1e4)),k(),W(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function DQ(n,e){n&1&&(C(0,"div",22),R(1," Pit out ready! "),T())}function AQ(n,e){if(n&1&&re(0,SQ,2,4,"div",21)(1,DQ,2,0,"div",22),n&2){let t=G(2);de(t.activePitRemainingMilliseconds()>0?0:1)}}function RQ(n,e){if(n&1){let t=Ei();C(0,"div",7),re(1,bQ,16,7)(2,AQ,2,1),T(),C(3,"div",8)(4,"button",9),he("click",function(){gt(t);let i=G();return vt(i.pitIn())}),R(5," Pit in "),T(),C(6,"button",10),he("click",function(){gt(t);let i=G();return vt(i.pitOut())}),R(7," Pit out "),T()()}if(n&2){let t=G();k(),de(t.activePit()?2:1),k(3),ee("disabled",!t.pitLaneOpen()),k(2),ee("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var Cg=class n{pitLaneService=M(Ig);pitService=M(mn);driverService=M(si);raceManagerService=M(Fc);tyreService=M(qc);raceConfigService=M(st);audioService=M(Eg);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=Se(()=>Yt(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=Se(()=>AF(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";constructor(){Tr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.selectedDriver=e.nextPitDriverId,this.refueling=e.nextPitRefueling,this.tyreChange=e.nextPitTyreChange)})}pitIn(){return _(this,null,function*(){this.audioService.playFile("assets/box_box_box_box.mp3"),yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)})}pitOut(){return _(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithLessTimeOnTrack();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-pit-lane"]],standalone:!0,features:[Ge],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F17F}\uFE0F Pit Lane"),T(),re(4,IQ,2,1,"div",3),C(5,"div",4),re(6,EQ,2,0,"div",5)(7,CQ,2,0,"div",6),T()(),re(8,RQ,8,3),T()),t&2&&(k(),ee("ngClass",rt(4,yQ,r.isOpen)),k(3),de(r.pitLaneOpenInMilliseconds()>0?4:-1),k(2),de(r.pitLaneOpen()?6:7),k(2),de(r.isOpen?8:-1))},dependencies:[ht,ks,Os,ug,dg,MT,Hc,Ms,Ps,qi,Hi,ar]})};var xQ=n=>({"mb-2":n});function NQ(n,e){if(n&1&&(C(0,"div",4),R(1),T()),n&2){let t=G();k(),W(" Remaining: ",t.remainingDriverChanges()," ")}}function MQ(n,e){n&1&&(C(0,"div",5),R(1," Completed! "),T())}function PQ(n,e){if(n&1&&(C(0,"div",6)(1,"div")(2,"div",7),R(3,"Competed"),T(),C(4,"div",8),R(5),T()(),C(6,"div")(7,"div",9),R(8,"Remaining"),T(),C(9,"div",10),R(10),T()()()),n&2){let t=G();k(5),W(" ",t.completedDriverChanges()," "),k(5),W(" ",t.remainingDriverChanges()," ")}}var Tg=class n{pitService=M(mn);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-driver-change"]],standalone:!0,features:[Ge],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F417} \u{1F504} Driver change"),T(),C(4,"div",3),re(5,NQ,2,1,"div",4)(6,MQ,2,0,"div",5),T()(),re(7,PQ,11,2,"div",6),T()),t&2&&(k(),ee("ngClass",rt(3,xQ,r.isOpen)),k(4),de(r.remainingDriverChanges()>0?5:6),k(2),de(r.isOpen?7:-1))},dependencies:[ht]})};var OQ=n=>({"mb-2":n});function kQ(n,e){if(n&1&&(C(0,"div",4),R(1),T(),C(2,"div",5),R(3),T()),n&2){let t=G(2);k(),W(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),k(2),W(" Laps: ",t.activeStintRemainingLaps()," ")}}function FQ(n,e){if(n&1&&(C(0,"div",6),R(1),T(),C(2,"div",7),R(3),T()),n&2){let t=G(2);k(),W(" Gaining: ",t.activeStintGainedTimeOnTrackString()," "),k(2),W(" Laps: ",t.activeStintGainedLaps()," ")}}function LQ(n,e){if(n&1&&re(0,kQ,4,2)(1,FQ,4,2),n&2){let t=G();de(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function VQ(n,e){if(n&1&&R(0),n&2){let t=G(2);W(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function UQ(n,e){n&1&&R(0," --:--:-- ")}function jQ(n,e){if(n&1&&R(0),n&2){let t=G(2);W(" ",t.activeStintRemainingLaps()," ")}}function BQ(n,e){n&1&&R(0," 0 ")}function $Q(n,e){if(n&1&&(C(0,"div",8)(1,"div")(2,"div",9),R(3,"Time on track"),T(),C(4,"div",10),R(5),T()(),C(6,"div")(7,"div",11),R(8,"Laps"),T(),C(9,"div",12),R(10),T()()(),Ce(11,"hr",13),C(12,"div",8)(13,"div")(14,"div",9),R(15,"Remaining time on track"),T(),C(16,"div",10),re(17,VQ,1,1)(18,UQ,1,0),T()(),C(19,"div")(20,"div",11),R(21,"Remaining laps"),T(),C(22,"div",12),re(23,jQ,1,1)(24,BQ,1,0),T()()(),Ce(25,"hr",13),C(26,"div",14)(27,"div")(28,"div",9),R(29,"Gained time on track"),T(),C(30,"div",10),R(31),T()(),C(32,"div")(33,"div",11),R(34,"Gained laps"),T(),C(35,"div",12),R(36),T()()()),n&2){let t=G();k(5),W(" ",t.activeStintTimeOnTrackString()," "),k(5),W(" ",t.activeStintLaps()," "),k(7),de(t.activeStint()?17:18),k(6),de(t.activeStint()?23:24),k(8),W(" ",t.activeStintGainedTimeOnTrackString()," "),k(5),W(" ",t.activeStintGainedLaps()," ")}}var bg=class n{stintService=M(Zt);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=Se(()=>Yt(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=Se(()=>Yt(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=Se(()=>Yt(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-active-stint"]],standalone:!0,features:[Ge],decls:7,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),T(),C(4,"div",3),re(5,LQ,2,1),T()(),re(6,$Q,37,6),T()),t&2&&(k(),ee("ngClass",rt(3,OQ,r.isOpen)),k(4),de(r.activeStint()?5:-1),k(),de(r.isOpen?6:-1))},dependencies:[ht]})};var HQ=n=>({"mb-2":n}),qQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function GQ(n,e){if(n&1&&(R(0),Ci(1,"date")),n&2){let t=G().$implicit;W(" ",Ti(1,1,t.endDate.toDate(),"HH:mm:ss")," ")}}function zQ(n,e){if(n&1&&(C(0,"tr",19)(1,"td",20),R(2),T(),C(3,"td",21),R(4),T(),C(5,"td",18),R(6),Ci(7,"date"),T(),C(8,"td",18),re(9,GQ,2,4),T(),C(10,"td",18),R(11),T()()),n&2){let t=e.$implicit,r=G(2);ee("ngClass",Cr(9,qQ,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),kt(t.id),k(2),W("",r.getDriverRacingName(t.driverId)," "),k(2),kt(Ti(7,6,t.startDate.toDate(),"HH:mm:ss")),k(3),de(t.endDate?9:-1),k(2),W(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function WQ(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),Ce(4,"th",8),C(5,"th",9),R(6,"Driver"),T(),C(7,"th",10),R(8,"Start"),T(),C(9,"th",10),R(10,"End"),T(),C(11,"th",10),R(12,"On track"),T()()()(),C(13,"div",11)(14,"table",12)(15,"tbody"),re(16,zQ,12,12,"tr",13),T()()(),C(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),R(22,"Totals"),T(),C(23,"td",18),R(24),T()()()()()()),n&2){let t=G();k(16),ee("ngForOf",t.stints()),k(8),kt(t.calculateTotalTimeOnTrack())}}var Sg=class n{stintService=M(Zt);driverService=M(si);stints=this.stintService.stints;activeStintId=Se(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?xs(e,t):xs(e,new Date)}calculateTotalTimeOnTrack(){let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),Yt(t)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-stint"]],standalone:!0,features:[Ge],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"py-2","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-xs","xl:text-base","text-black"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u23F3 Stint"),T(),C(4,"div",3)(5,"div",4),R(6),T()()(),re(7,WQ,25,2,"div",5),T()),t&2&&(k(),ee("ngClass",rt(3,HQ,r.isOpen)),k(5),W(" Total: ",r.stints().length," "),k(),de(r.isOpen&&r.stints().length>0?7:-1))},dependencies:[ht,ar,Pa]})};var KQ=n=>({"mb-2":n});function QQ(n,e){if(n&1){let t=Ei();C(0,"div",5)(1,"div")(2,"div",6),R(3,"Reference time (mills)"),T(),C(4,"div",7)(5,"button",8),he("click",function(){gt(t);let i=G();return vt(i.increaseReferenceLapTime())}),R(6,"+"),T(),C(7,"form",9),he("ngSubmit",function(){gt(t);let i=G();return vt(i.onSubmit())}),C(8,"input",10),Er("ngModelChange",function(i){gt(t);let s=G();return Wr(s.referenceLapTime,i)||(s.referenceLapTime=i),vt(i)}),T()(),C(9,"button",11),he("click",function(){gt(t);let i=G();return vt(i.decreaseReferenceLapTime())}),R(10,"-"),T()()()()}if(n&2){let t=G();k(8),Ir("ngModel",t.referenceLapTime)}}var Dg=class n{raceConfigService=M(st);isOpen=!0;referenceLapTime=0;referenceLapTimeString="--:--:---";constructor(){Tr(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.referenceLapTime=e.referenceLapTimeMillisecond,this.referenceLapTimeString=RF(e.referenceLapTimeMillisecond))})}onSubmit(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime)}increaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime+1)}decreaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime-1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-lap"]],standalone:!0,features:[Ge],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-center"],[1,"text-gray-600","text-center"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","referenceLapTime","name","referenceLapTime","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-36","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u23F1\uFE0F Lap"),T(),C(4,"div",3)(5,"div",4),R(6),T()()(),re(7,QQ,11,1,"div",5),T()),t&2&&(k(),ee("ngClass",rt(3,KQ,r.isOpen)),k(5),W(" Reference: ",r.referenceLapTimeString," "),k(),de(r.isOpen?7:-1))},dependencies:[ht,ks,Os,$c,bd,Ms,Ps,Dd,Sd,qi,Hi,tL]})};var YQ=n=>({"mb-2":n}),ZQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function JQ(n,e){n&1&&R(0," \u2705 ")}function XQ(n,e){n&1&&R(0," \u2705 ")}function eY(n,e){n&1&&R(0," \u2705 ")}function tY(n,e){if(n&1&&(C(0,"tr",20)(1,"td",17),R(2),T(),C(3,"td",21),re(4,JQ,1,0),T(),C(5,"td",22),re(6,XQ,1,0),T(),C(7,"td",22),re(8,eY,1,0),T(),C(9,"td",23),R(10),T()()),n&2){let t=e.$implicit,r=G(2);ee("ngClass",Cr(6,ZQ,t.id===r.activePitId(),t.id!==r.activePitId())),k(2),kt(t.id),k(2),de(t.entryDriverId!==t.exitDriverId?4:-1),k(2),de(t.refuel?6:-1),k(2),de(t.tyreChange?8:-1),k(2),W(" ",r.calculatePitTime(t.entryTime.toDate(),t.exitTime==null?null:t.exitTime.toDate())," ")}}function nY(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),Ce(4,"th",8),C(5,"th",9),R(6,"\u{1F417} \u{1F504}"),T(),C(7,"th",9),R(8,"\u26FD\uFE0F"),T(),C(9,"th",9),R(10,"\u{1F6DE} \u{1F504}"),T(),C(11,"th",10),R(12,"Time"),T()()()(),C(13,"div",11)(14,"table",12)(15,"tbody"),re(16,tY,11,9,"tr",13),T()()(),C(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),R(22,"Totals"),T(),C(23,"td",18),R(24),T(),C(25,"td",18),R(26),T(),C(27,"td",18),R(28),T(),C(29,"td",19),R(30),T()()()()()()),n&2){let t=G();k(16),ee("ngForOf",t.pits()),k(8),kt(t.completedDriverChanges()),k(2),kt(t.calculateTotalRefueling()),k(2),kt(t.calculateTotalTyreChanges()),k(2),kt(t.calculateTotalPitTime())}}var Ag=class n{pitService=M(mn);pits=this.pitService.pits;activePitId=Se(()=>{let e=this.pitService.activePit();if(e)return e.id});completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!0;calculatePitTime(e,t){return t?xs(e,t):xs(e,new Date)}calculateTotalPitTime(){let e=this.pitService.pits(),t=0;return e.forEach(r=>{r.exitTime?t+=r.exitTime.toDate().getTime()-r.entryTime.toDate().getTime():t+=new Date().getTime()-r.entryTime.toDate().getTime()}),Yt(t)}calculateTotalRefueling(){return this.pitService.pits().filter(e=>e.refuel).length}calculateTotalTyreChanges(){return this.pitService.pits().filter(e=>e.tyreChange).length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-pit"]],standalone:!0,features:[Ge],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],[1,"py-2","px-3","border-b","border-gray-200","text-sm","xl:text-base","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black"],[1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-sm","xl:text-base","text-black","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),T(),C(4,"div",3)(5,"div",4),R(6),T()()(),re(7,nY,31,5,"div",5),T()),t&2&&(k(),ee("ngClass",rt(3,YQ,r.isOpen)),k(5),W(" Total: ",r.pits().length," "),k(),de(r.isOpen?7:-1))},dependencies:[ht,ar]})};var Rg=class n{stintService=M(Zt);deltaStints=J([]);totalDeltaMilliseconds=J(0);constructor(){We({stints:Te(this.stintService.stints),ping:Ht(1e3)}).pipe(ut()).subscribe(({stints:e})=>{let t=this.createDeltaStints(e);this.deltaStints.set(t),this.totalDeltaMilliseconds.set(t.reduce((r,i)=>r+i.delta,0))})}createDeltaStints(e){let t=[];return e.forEach(r=>{t.push(this.createDeltaStint(r))}),t}createDeltaStint(e){let r=(e.endDate?e.endDate.toDate():new Date).getTime()-e.startDate.toDate().getTime(),i=r-e.optimumMilliseconds;return{id:e.id,delta:i,optimum:e.optimumMilliseconds,timeOnTrack:r}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=j({token:n,factory:n.\u0275fac,providedIn:"root"})};var rY=n=>({"mb-2":n}),kT=(n,e)=>({"bg-yellow-500":n,"bg-green-500":e}),iY=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e});function sY(n,e){n&1&&R(0," Losing: ")}function oY(n,e){n&1&&R(0," Gaining: ")}function aY(n,e){if(n&1&&(C(0,"tr",19)(1,"td",20),R(2),T(),C(3,"td",17),R(4),T(),C(5,"td",17),R(6),T(),C(7,"td",21)(8,"div",18),R(9),T()()()),n&2){let t=e.$implicit,r=G(2);ee("ngClass",Cr(6,iY,t.id===r.activeStintId(),t.id!==r.activeStintId())),k(2),kt(t.id),k(2),kt(r.getMillisecondsToTimeString(t.timeOnTrack)),k(2),kt(r.getMillisecondsToTimeString(t.optimum)),k(2),ee("ngClass",Cr(9,kT,t.delta<0,t.delta>=0)),k(),W(" ",r.getMillisecondsToTimeString(t.delta)," ")}}function cY(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),Ce(4,"th",8),C(5,"th",9),R(6,"On track"),T(),C(7,"th",9),R(8,"Optimum"),T(),C(9,"th",9),R(10,"Delta"),T()()()(),C(11,"div",10)(12,"table",11)(13,"tbody"),re(14,aY,10,12,"tr",12),T()()(),C(15,"div",13)(16,"table",11)(17,"tfoot",14)(18,"tr",15)(19,"td",16),R(20,"Totals"),T(),C(21,"td",17)(22,"div",18),R(23),T()()()()()()()),n&2){let t=G();k(14),ee("ngForOf",t.deltaStints()),k(8),ee("ngClass",Cr(3,kT,t.totalDeltaMilliseconds()<0,t.totalDeltaMilliseconds()>=0)),k(),W(" ",t.getMillisecondsToTimeString(t.totalDeltaMilliseconds())," ")}}var xg=class n{stintService=M(Zt);deltaStintService=M(Rg);deltaStints=this.deltaStintService.deltaStints;totalDeltaMilliseconds=this.deltaStintService.totalDeltaMilliseconds;activeStintId=Se(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!0;getMillisecondsToTimeString(e){return Yt(Math.abs(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-delta-stint"]],standalone:!0,features:[Ge],decls:10,vars:10,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"px-2","py-1","rounded-lg","text-white","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-white","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-xs","xl:text-base","font-medium","text-gray-700"],["colspan","2",1,"py-2","px-3","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-medium","text-gray-700"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-gray-100","font-bold"],["colspan","5",1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","text-black","font-mono"],[1,"p-1","text-center","text-white","rounded",3,"ngClass"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-xs","xl:text-base","text-black"],["colspan","2",1,"py-2","border-b","border-gray-200","text-center","text-xs","xl:text-base","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),he("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),R(3,"\u{1F9D0} Delta stint"),T(),C(4,"div",3)(5,"div",4),re(6,sY,1,0)(7,oY,1,0),R(8),T()()(),re(9,cY,24,6,"div",5),T()),t&2&&(k(),ee("ngClass",rt(5,rY,r.isOpen)),k(4),ee("ngClass",Cr(7,kT,r.totalDeltaMilliseconds()<0,r.totalDeltaMilliseconds()>=0)),k(),de(r.totalDeltaMilliseconds()<0?6:7),k(2),W(" ",r.getMillisecondsToTimeString(r.totalDeltaMilliseconds())," "),k(),de(r.isOpen?9:-1))},dependencies:[ar,ht]})};var Ng=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=qe({type:n,selectors:[["app-root"]],standalone:!0,features:[Ge],decls:37,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2),R(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),T(),C(4,"div",3),Ce(5,"app-race"),T()(),C(6,"div",4)(7,"div",5)(8,"div",6),Ce(9,"app-pit-lane"),T(),C(10,"div",6),Ce(11,"app-driver-change"),T(),C(12,"div",6),Ce(13,"app-tyre-change-window"),T(),C(14,"div",7),Ce(15,"app-pit"),T()(),C(16,"div",8)(17,"div",6),Ce(18,"app-fuel"),T(),C(19,"div",6),Ce(20,"app-stint-optimizer"),T(),C(21,"div",6),Ce(22,"app-lap"),T(),C(23,"div",7),Ce(24,"app-driver"),T()(),C(25,"div",8)(26,"div",6),Ce(27,"app-active-stint"),T(),C(28,"div",6),Ce(29,"app-stint"),T(),C(30,"div",7),Ce(31,"app-delta-stint"),T()()(),C(32,"div",9)(33,"div",2),R(34,"Cremona kart circuit"),T(),Ce(35,"img",10),T()(),Ce(36,"router-outlet"))},dependencies:[dw,pg,mg,_g,yg,wg,Cg,Tg,bg,Sg,Dg,Ag,xg]})};sx(Ng,sF).catch(n=>console.error(n));
