import{$ as rn,A as nn,B as dr,C as dd,D as Et,E as YD,F as ZD,G as hr,H as os,I as Lc,J as Vc,K as Uc,L as as,M as JD,N as XD,O as eb,P as tb,Q as jc,R as Bc,S as ve,T as st,U as Ft,V as fr,W as cm,X as hd,Y as ot,Z as lt,_ as Vr,a as F,aa as nb,b as ge,ba as dt,c as wi,ca as fd,d as y,da as q,e as L,ea as rb,f as Io,g as $D,h as HD,i as qD,j as GD,k as zD,l as Ii,m as om,n as am,o as Eo,p as Ot,q as kc,r as WD,s as Oc,t as ld,u as KD,v as lr,w as QD,x as Lr,y as ss,z as Fc}from"./chunk-VUN4IAWB.js";function ib(t,e){return Object.is(t,e)}var yt=null,$c=!1,pd=1,pr=Symbol("SIGNAL");function we(t){let e=yt;return yt=t,e}function sb(){return yt}function kF(){return $c}var Co={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function hm(t){if($c)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(t);let e=yt.nextProducerIndex++;if(wd(yt),e<yt.producerNode.length&&yt.producerNode[e]!==t&&Hc(yt)){let n=yt.producerNode[e];vd(n,yt.producerIndexOfThis[e])}yt.producerNode[e]!==t&&(yt.producerNode[e]=t,yt.producerIndexOfThis[e]=Hc(yt)?lb(t,yt,e):0),yt.producerLastReadVersion[e]=t.version}function OF(){pd++}function ob(t){if(!(Hc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===pd)){if(!t.producerMustRecompute(t)&&!_d(t)){t.dirty=!1,t.lastCleanEpoch=pd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=pd}}function ab(t){if(t.liveConsumerNode===void 0)return;let e=$c;$c=!0;try{for(let n of t.liveConsumerNode)n.dirty||ub(n)}finally{$c=e}}function cb(){return yt?.consumerAllowSignalWrites!==!1}function ub(t){t.dirty=!0,ab(t),t.consumerMarkedDirty?.(t)}function qc(t){return t&&(t.nextProducerIndex=0),we(t)}function md(t,e){if(we(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Hc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)vd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function _d(t){wd(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(ob(n),r!==n.version))return!0}return!1}function yd(t){if(wd(t),Hc(t))for(let e=0;e<t.producerNode.length;e++)vd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function lb(t,e,n){if(db(t),t.liveConsumerNode.length===0&&hb(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=lb(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function vd(t,e){if(db(t),t.liveConsumerNode.length===1&&hb(t))for(let r=0;r<t.producerNode.length;r++)vd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];wd(i),i.producerIndexOfThis[r]=e}}function Hc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function wd(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function db(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function hb(t){return t.producerNode!==void 0}function fb(t){let e=Object.create(FF);e.computation=t;let n=()=>{if(ob(e),hm(e),e.value===gd)throw e.error;return e.value};return n[pr]=e,n}var um=Symbol("UNSET"),lm=Symbol("COMPUTING"),gd=Symbol("ERRORED"),FF=ge(F({},Co),{value:um,dirty:!0,error:null,equal:ib,producerMustRecompute(t){return t.value===um||t.value===lm},producerRecomputeValue(t){if(t.value===lm)throw new Error("Detected cycle in computations.");let e=t.value;t.value=lm;let n=qc(t),r;try{r=t.computation()}catch(i){r=gd,t.error=i}finally{md(t,n)}if(e!==um&&e!==gd&&r!==gd&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function LF(){throw new Error}var pb=LF;function gb(){pb()}function mb(t){pb=t}var VF=null;function _b(t){let e=Object.create(vb);e.value=t;let n=()=>(hm(e),e.value);return n[pr]=e,n}function fm(t,e){cb()||gb(),t.equal(t.value,e)||(t.value=e,UF(t))}function yb(t,e){cb()||gb(),fm(t,e(t.value))}var vb=ge(F({},Co),{equal:ib,value:void 0});function UF(t){t.version++,OF(),ab(t),VF?.()}function wb(t,e,n){let r=Object.create(jF);n&&(r.consumerAllowSignalWrites=!0),r.fn=t,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(yd(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=dm)}let a=()=>{if(r.fn===null)return;if(kF())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!_d(r))return;r.hasRun=!0;let c=qc(r);try{r.cleanupFn(),r.cleanupFn=dm,r.fn(i)}finally{md(r,c)}};return r.ref={notify:()=>ub(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[pr]:r},r.ref}var dm=()=>{},jF=ge(F({},Co),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:dm});function ce(t){return typeof t=="function"}function To(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Id=To(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function cs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var tt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(ce(r))try{r()}catch(s){e=s instanceof Id?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Ib(s)}catch(o){e=e??[],o instanceof Id?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Id(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ib(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&cs(n,e)}remove(e){let{_finalizers:n}=this;n&&cs(n,e),e instanceof t&&e._removeParent(this)}};tt.EMPTY=(()=>{let t=new tt;return t.closed=!0,t})();var pm=tt.EMPTY;function Ed(t){return t instanceof tt||t&&"closed"in t&&ce(t.remove)&&ce(t.add)&&ce(t.unsubscribe)}function Ib(t){ce(t)?t():t.unsubscribe()}var Kn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Do={setTimeout(t,e,...n){let{delegate:r}=Do;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Do;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Cd(t){Do.setTimeout(()=>{let{onUnhandledError:e}=Kn;if(e)e(t);else throw t})}function Gc(){}var Eb=gm("C",void 0,void 0);function Cb(t){return gm("E",void 0,t)}function Tb(t){return gm("N",t,void 0)}function gm(t,e,n){return{kind:t,value:e,error:n}}var us=null;function bo(t){if(Kn.useDeprecatedSynchronousErrorHandling){let e=!us;if(e&&(us={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=us;if(us=null,n)throw r}}else t()}function Db(t){Kn.useDeprecatedSynchronousErrorHandling&&us&&(us.errorThrown=!0,us.error=t)}var ls=class extends tt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ed(e)&&e.add(this)):this.destination=HF}static create(e,n,r){return new So(e,n,r)}next(e){this.isStopped?_m(Tb(e),this):this._next(e)}error(e){this.isStopped?_m(Cb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?_m(Eb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},BF=Function.prototype.bind;function mm(t,e){return BF.call(t,e)}var ym=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Td(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Td(r)}else Td(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Td(n)}}},So=class extends ls{constructor(e,n,r){super();let i;if(ce(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Kn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&mm(e.next,s),error:e.error&&mm(e.error,s),complete:e.complete&&mm(e.complete,s)}):i=e}this.destination=new ym(i)}};function Td(t){Kn.useDeprecatedSynchronousErrorHandling?Db(t):Cd(t)}function $F(t){throw t}function _m(t,e){let{onStoppedNotification:n}=Kn;n&&Do.setTimeout(()=>n(t,e))}var HF={closed:!0,next:Gc,error:$F,complete:Gc};var Ao=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kt(t){return t}function Dd(...t){return vm(t)}function vm(t){return t.length===0?Kt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var oe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=GF(n)?n:new So(n,r,i);return bo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bb(r),new r((i,s)=>{let o=new So({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ao](){return this}pipe(...n){return vm(n)(this)}toPromise(n){return n=bb(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function bb(t){var e;return(e=t??Kn.Promise)!==null&&e!==void 0?e:Promise}function qF(t){return t&&ce(t.next)&&ce(t.error)&&ce(t.complete)}function GF(t){return t&&t instanceof ls||qF(t)&&Ed(t)}function wm(t){return ce(t?.lift)}function he(t){return e=>{if(wm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ue(t,e,n,r,i){return new zc(t,e,n,r,i)}var zc=class extends ls{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ro(){return he((t,e)=>{let n=null;t._refCount++;let r=ue(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var No=class extends oe{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,wm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new tt;let n=this.getSubject();e.add(this.source.subscribe(ue(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=tt.EMPTY)}return e}refCount(){return Ro()(this)}};var Sb=To(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ye=(()=>{class t extends oe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new bd(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Sb}next(n){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?pm:(this.currentObservers=null,s.push(n),new tt(()=>{this.currentObservers=null,cs(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new oe;return n.source=this,n}}return t.create=(e,n)=>new bd(e,n),t})(),bd=class extends Ye{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:pm}};var St=class extends Ye{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Wc={now(){return(Wc.delegate||Date).now()},delegate:void 0};var Kc=class extends Ye{constructor(e=1/0,n=1/0,r=Wc){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;n||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=n.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Sd=class extends tt{constructor(e,n){super()}schedule(e,n=0){return this}};var Qc={setInterval(t,e,...n){let{delegate:r}=Qc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Qc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Mo=class extends Sd{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Qc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Qc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,cs(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var xo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};xo.now=Wc.now;var Po=class extends xo{constructor(e,n=xo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var ko=new Po(Mo),Im=ko;var Ad=class extends Mo{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Rd=class extends Po{};var Em=new Rd(Ad);var mn=new oe(t=>t.complete());function Nd(t){return t&&ce(t.schedule)}function Ab(t){return t[t.length-1]}function Md(t){return ce(Ab(t))?t.pop():void 0}function Ei(t){return Nd(Ab(t))?t.pop():void 0}function Cm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Nb(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Rb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ds(t){return this instanceof ds?(this.v=t,this):new ds(t)}function Mb(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(w){return Promise.resolve(w).then(_,f)}}function a(_,w){r[_]&&(i[_]=function(R){return new Promise(function(S,P){s.push([_,R,S,P])>1||c(_,R)})},w&&(i[_]=w(i[_])))}function c(_,w){try{l(r[_](w))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof ds?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,w){_(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function xb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Rb=="function"?Rb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var xd=t=>t&&typeof t.length=="number"&&typeof t!="function";function Pd(t){return ce(t?.then)}function kd(t){return ce(t[Ao])}function Od(t){return Symbol.asyncIterator&&ce(t?.[Symbol.asyncIterator])}function Fd(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function zF(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ld=zF();function Vd(t){return ce(t?.[Ld])}function Ud(t){return Mb(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ds(n.read());if(i)return yield ds(void 0);yield yield ds(r)}}finally{n.releaseLock()}})}function jd(t){return ce(t?.getReader)}function nt(t){if(t instanceof oe)return t;if(t!=null){if(kd(t))return WF(t);if(xd(t))return KF(t);if(Pd(t))return QF(t);if(Od(t))return Pb(t);if(Vd(t))return YF(t);if(jd(t))return ZF(t)}throw Fd(t)}function WF(t){return new oe(e=>{let n=t[Ao]();if(ce(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function KF(t){return new oe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function QF(t){return new oe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Cd)})}function YF(t){return new oe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function Pb(t){return new oe(e=>{JF(t,e).catch(n=>e.error(n))})}function ZF(t){return Pb(Ud(t))}function JF(t,e){var n,r,i,s;return Nb(this,void 0,void 0,function*(){try{for(n=xb(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function sn(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ci(t,e=0){return he((n,r)=>{n.subscribe(ue(r,i=>sn(r,t,()=>r.next(i),e),()=>sn(r,t,()=>r.complete(),e),i=>sn(r,t,()=>r.error(i),e)))})}function Ti(t,e=0){return he((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function kb(t,e){return nt(t).pipe(Ti(e),Ci(e))}function Ob(t,e){return nt(t).pipe(Ti(e),Ci(e))}function Fb(t,e){return new oe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Lb(t,e){return new oe(n=>{let r;return sn(n,e,()=>{r=t[Ld](),sn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>ce(r?.return)&&r.return()})}function Bd(t,e){if(!t)throw new Error("Iterable cannot be null");return new oe(n=>{sn(n,e,()=>{let r=t[Symbol.asyncIterator]();sn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function Vb(t,e){return Bd(Ud(t),e)}function Ub(t,e){if(t!=null){if(kd(t))return kb(t,e);if(xd(t))return Fb(t,e);if(Pd(t))return Ob(t,e);if(Od(t))return Bd(t,e);if(Vd(t))return Lb(t,e);if(jd(t))return Vb(t,e)}throw Fd(t)}function Ke(t,e){return e?Ub(t,e):nt(t)}function Z(...t){let e=Ei(t);return Ke(t,e)}function Oo(t,e){let n=ce(t)?t:()=>t,r=i=>i.error(n());return new oe(e?i=>e.schedule(r,0,i):r)}function Tm(t){return!!t&&(t instanceof oe||ce(t.lift)&&ce(t.subscribe))}var Ur=To(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function jb(t){return t instanceof Date&&!isNaN(t)}function Y(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:XF}=Array;function eL(t,e){return XF(e)?t(...e):t(e)}function $d(t){return Y(e=>eL(t,e))}var{isArray:tL}=Array,{getPrototypeOf:nL,prototype:rL,keys:iL}=Object;function Hd(t){if(t.length===1){let e=t[0];if(tL(e))return{args:e,keys:null};if(sL(e)){let n=iL(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function sL(t){return t&&typeof t=="object"&&nL(t)===rL}function qd(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function gr(...t){let e=Ei(t),n=Md(t),{args:r,keys:i}=Hd(t);if(r.length===0)return Ke([],e);let s=new oe(oL(r,e,i?o=>qd(i,o):Kt));return n?s.pipe($d(n)):s}function oL(t,e,n=Kt){return r=>{Bb(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)Bb(e,()=>{let l=Ke(t[c],e),d=!1;l.subscribe(ue(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function Bb(t,e,n){t?sn(n,t,e):e()}function $b(t,e,n,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},_=R=>l<r?w(R):c.push(R),w=R=>{s&&e.next(R),l++;let S=!1;nt(n(R,d++)).subscribe(ue(e,P=>{i?.(P),s?_(P):e.next(P)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let P=c.shift();o?sn(e,o,()=>w(P)):w(P)}g()}catch(P){e.error(P)}}))};return t.subscribe(ue(e,_,()=>{f=!0,g()})),()=>{a?.()}}function at(t,e,n=1/0){return ce(e)?at((r,i)=>Y((s,o)=>e(r,s,i,o))(nt(t(r,i))),n):(typeof e=="number"&&(n=e),he((r,i)=>$b(r,i,t,n)))}function Dm(t=1/0){return at(Kt,t)}function Hb(){return Dm(1)}function Fo(...t){return Hb()(Ke(t,Ei(t)))}function Gd(t){return new oe(e=>{nt(t()).subscribe(e)})}function bm(...t){let e=Md(t),{args:n,keys:r}=Hd(t),i=new oe(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;nt(n[d]).subscribe(ue(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?qd(r,a):a),s.complete())}))}});return e?i.pipe($d(e)):i}function Sm(t=0,e,n=Im){let r=-1;return e!=null&&(Nd(e)?n=e:r=e),new oe(i=>{let s=jb(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function jr(t=0,e=ko){return t<0&&(t=0),Sm(t,t,e)}function Qt(t,e){return he((n,r)=>{let i=0;n.subscribe(ue(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Di(t){return he((e,n)=>{let r=null,i=!1,s;r=e.subscribe(ue(n,void 0,void 0,o=>{s=nt(t(o,Di(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function qb(t,e,n,r,i){return(s,o)=>{let a=n,c=e,l=0;s.subscribe(ue(o,d=>{let f=l++;c=a?t(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function hs(t,e){return ce(e)?at(t,e,1):at(t,1)}function bi(t){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Br(t){return t<=0?()=>mn:he((e,n)=>{let r=0;e.subscribe(ue(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Am(t){return Y(()=>t)}function zd(t,e=Kt){return t=t??aL,he((n,r)=>{let i,s=!0;n.subscribe(ue(r,o=>{let a=e(o);(s||!t(i,a))&&(s=!1,i=a,r.next(o))}))})}function aL(t,e){return t===e}function Wd(t=cL){return he((e,n)=>{let r=!1;e.subscribe(ue(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function cL(){return new Ur}function Yc(t){return he((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function mr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Qt((i,s)=>t(i,s,r)):Kt,Br(1),n?bi(e):Wd(()=>new Ur))}function Rm(t,e,n,r){return he((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:n,element:o,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(s)},l=w=>c(R=>R.error(w)),d=0,f=!1,g=new zc(s,w=>{try{let R=t(w),S=a.get(R);if(!S){a.set(R,S=r?r():new Ye);let P=_(R,S);if(s.next(P),n){let U=ue(S,()=>{S.complete(),U?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(nt(n(P)).subscribe(U))}}S.next(o?o(w):w)}catch(R){l(R)}},()=>c(w=>w.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function _(w,R){let S=new oe(P=>{d++;let U=R.subscribe(P);return()=>{U.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return S.key=w,S}})}function Lo(t){return t<=0?()=>mn:he((e,n)=>{let r=[];e.subscribe(ue(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Nm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Qt((i,s)=>t(i,s,r)):Kt,Lo(1),n?bi(e):Wd(()=>new Ur))}function Kd(){return he((t,e)=>{let n,r=!1;t.subscribe(ue(e,i=>{let s=n;n=i,r&&e.next([s,i]),r=!0}))})}function Qd(t,e){return he(qb(t,e,arguments.length>=2,!0))}function Vo(...t){let e=Ei(t);return he((n,r)=>{(e?Fo(t,n,e):Fo(t,n)).subscribe(r)})}function on(t,e){return he((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(ue(r,c=>{i?.unsubscribe();let l=0,d=s++;nt(t(c,d)).subscribe(i=ue(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function _r(t){return he((e,n)=>{nt(t).subscribe(ue(n,()=>n.complete(),Gc)),!n.closed&&e.subscribe(n)})}function vt(t,e,n){let r=ce(t)||e||n?{next:t,error:e,complete:n}:t;return r?he((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ue(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Kt}var uL="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(x_(e,n)),this.code=e}};function x_(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function cu(t){return{toString:t}.toString()}var Yd="__parameters__";function lL(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function dL(t,e,n){return cu(()=>{let r=lL(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Yd)?c[Yd]:Object.defineProperty(c,Yd,{value:[]})[Yd];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Zc=globalThis;function Le(t){for(let e in t)if(t[e]===Le)return e;throw Error("Could not find renamed property on target object.")}function hL(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function cn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(cn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function Gb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var fL=Le({__forward_ref__:Le});function zr(t){return t.__forward_ref__=zr,t.toString=function(){return cn(this())},t}function Yt(t){return SS(t)?t():t}function SS(t){return typeof t=="function"&&t.hasOwnProperty(fL)&&t.__forward_ref__===zr}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Cs(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nh(t){return zb(t,RS)||zb(t,NS)}function AS(t){return Nh(t)!==null}function zb(t,e){return t.hasOwnProperty(e)?t[e]:null}function pL(t){let e=t&&(t[RS]||t[NS]);return e||null}function Wb(t){return t&&(t.hasOwnProperty(Kb)||t.hasOwnProperty(gL))?t[Kb]:null}var RS=Le({\u0275prov:Le}),Kb=Le({\u0275inj:Le}),NS=Le({ngInjectableDef:Le}),gL=Le({ngInjectorDef:Le}),V=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function MS(t){return t&&!!t.\u0275providers}var mL=Le({\u0275cmp:Le}),_L=Le({\u0275dir:Le}),yL=Le({\u0275pipe:Le}),vL=Le({\u0275mod:Le}),oh=Le({\u0275fac:Le}),eu=Le({__NG_ELEMENT_ID__:Le}),Qb=Le({__NG_ENV_ID__:Le});function P_(t){return typeof t=="string"?t:t==null?"":String(t)}function wL(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():P_(t)}function IL(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function k_(t,e){throw new G(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),qm;function xS(){return qm}function an(t){let e=qm;return qm=t,e}function PS(t,e,n){let r=Nh(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&fe.Optional)return null;if(e!==void 0)return e;k_(t,"Injector")}var EL={},tu=EL,Gm="__NG_DI_FLAG__",ah="ngTempTokenPath",CL="ngTokenPath",TL=/\n/gm,DL="\u0275",Yb="__source",$o;function bL(){return $o}function Si(t){let e=$o;return $o=t,e}function SL(t,e=fe.Default){if($o===void 0)throw new G(-203,!1);return $o===null?PS(t,void 0,e):$o.get(t,e&fe.Optional?null:void 0,e)}function ee(t,e=fe.Default){return(xS()||SL)(Yt(t),e)}function x(t,e=fe.Default){return ee(t,Mh(e))}function Mh(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function zm(t){let e=[];for(let n=0;n<t.length;n++){let r=Yt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=fe.Default;for(let o=0;o<r.length;o++){let a=r[o],c=RL(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ee(i,s))}else e.push(ee(r))}return e}function AL(t,e){return t[Gm]=e,t.prototype[Gm]=e,t}function RL(t){return t[Gm]}function NL(t,e,n,r){let i=t[ah];throw e[Yb]&&i.unshift(e[Yb]),t.message=ML(`
`+t.message,i,n,r),t[CL]=i,t[ah]=null,t}function ML(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==DL?t.slice(2):t;let i=cn(e);if(Array.isArray(e))i=e.map(cn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):cn(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(TL,`
  `)}`}var ie=AL(dL("Optional"),8);function gs(t,e){let n=t.hasOwnProperty(oh);return n?t[oh]:null}function O_(t,e){t.forEach(n=>Array.isArray(n)?O_(n,e):e(n))}function kS(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ch(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function xL(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function PL(t,e,n){let r=uu(t,e);return r>=0?t[r|1]=n:(r=~r,xL(t,r,e,n)),r}function Mm(t,e){let n=uu(t,e);if(n>=0)return t[n|1]}function uu(t,e){return kL(t,e,1)}function kL(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var qo={},bn=[],Go=new V(""),OS=new V("",-1),FS=new V(""),uh=class{get(e,n=tu){if(n===tu){let r=new Error(`NullInjectorError: No provider for ${cn(e)}!`);throw r.name="NullInjectorError",r}return n}},LS=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(LS||{}),wr=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(wr||{}),Ni=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Ni||{});function OL(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Wm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];LL(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function FL(t){return t===3||t===4||t===6}function LL(t){return t.charCodeAt(0)===64}function nu(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Zb(t,n,i,null,e[++r]):Zb(t,n,i,null,null))}}return t}function Zb(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var VS="ng-template";function VL(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&OL(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(F_(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function F_(t){return t.type===4&&t.value!==VS}function UL(t,e,n){let r=t.type===4&&!n?VS:t.value;return e===r}function jL(t,e,n){let r=4,i=t.attrs,s=i!==null?HL(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Qn(r)&&!Qn(c))return!1;if(o&&Qn(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!UL(t,c,n)||c===""&&e.length===1){if(Qn(r))return!1;o=!0}}else if(r&8){if(i===null||!VL(t,i,c,n)){if(Qn(r))return!1;o=!0}}else{let l=e[++a],d=BL(c,i,F_(t),n);if(d===-1){if(Qn(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(Qn(r))return!1;o=!0}}}}return Qn(r)||o}function Qn(t){return(t&1)===0}function BL(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return qL(e,t)}function $L(t,e,n=!1){for(let r=0;r<e.length;r++)if(jL(t,e[r],n))return!0;return!1}function HL(t){for(let e=0;e<t.length;e++){let n=t[e];if(FL(n))return e}return t.length}function qL(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function Jb(t,e){return t?":not("+e.trim()+")":e}function GL(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Qn(o)&&(e+=Jb(s,i),i=""),r=o,s=s||!Qn(r);n++}return i!==""&&(e+=Jb(s,i)),e}function zL(t){return t.map(GL).join(",")}function WL(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Qn(i))break;i=s}r++}return{attrs:e,classes:n}}function Mn(t){return cu(()=>{let e=qS(t),n=ge(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===LS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||wr.Emulated,styles:t.styles||bn,_:null,schemas:t.schemas||null,tView:null,id:""});GS(n);let r=t.dependencies;return n.directiveDefs=eS(r,!1),n.pipeDefs=eS(r,!0),n.id=YL(n),n})}function KL(t){return ms(t)||jS(t)}function QL(t){return t!==null}function Ts(t){return cu(()=>({type:t.type,bootstrap:t.bootstrap||bn,declarations:t.declarations||bn,imports:t.imports||bn,exports:t.exports||bn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Xb(t,e){if(t==null)return qo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Ni.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Ni.None?[r,a]:r,e[s]=o):n[s]=r}return n}function At(t){return cu(()=>{let e=qS(t);return GS(e),e})}function US(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function ms(t){return t[mL]||null}function jS(t){return t[_L]||null}function BS(t){return t[yL]||null}function $S(t){let e=ms(t)||jS(t)||BS(t);return e!==null?e.standalone:!1}function HS(t,e){let n=t[vL]||null;if(!n&&e===!0)throw new Error(`Type ${cn(t)} does not have '\u0275mod' property.`);return n}function qS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||qo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||bn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Xb(t.inputs,e),outputs:Xb(t.outputs),debugInfo:null}}function GS(t){t.features?.forEach(e=>e(t))}function eS(t,e){if(!t)return null;let n=e?BS:KL;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(QL)}function YL(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Be(t){return{\u0275providers:t}}function ZL(...t){return{\u0275providers:zS(!0,t),\u0275fromNgModule:!0}}function zS(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return O_(e,o=>{let a=o;Km(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&WS(i,s),n}function WS(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];L_(i,s=>{e(s,r)})}}function Km(t,e,n,r){if(t=Yt(t),!t)return!1;let i=null,s=Wb(t),o=!s&&ms(t);if(!s&&!o){let c=t.ngModule;if(s=Wb(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Km(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{O_(s.imports,d=>{Km(d,e,n,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&WS(l,e)}if(!a){let l=gs(i)||(()=>new i);e({provide:i,useFactory:l,deps:bn},i),e({provide:FS,useValue:i,multi:!0},i),e({provide:Go,useValue:()=>ee(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=t;L_(c,d=>{e(d,l)})}}else return!1;return i!==t&&t.providers!==void 0}function L_(t,e){for(let n of t)MS(n)&&(n=n.\u0275providers),Array.isArray(n)?L_(n,e):e(n)}var JL=Le({provide:String,useValue:Le});function KS(t){return t!==null&&typeof t=="object"&&JL in t}function XL(t){return!!(t&&t.useExisting)}function eV(t){return!!(t&&t.useFactory)}function zo(t){return typeof t=="function"}function tV(t){return!!t.useClass}var xh=new V(""),eh={},nV={},xm;function V_(){return xm===void 0&&(xm=new uh),xm}var An=class{},ru=class extends An{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ym(e,o=>this.processProvider(o)),this.records.set(OS,Uo(void 0,this)),i.has("environment")&&this.records.set(An,Uo(void 0,this));let s=this.records.get(xh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(FS,bn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=we(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),we(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Si(this),r=an(void 0),i;try{return e()}finally{Si(n),an(r)}}get(e,n=tu,r=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Qb))return e[Qb](this);r=Mh(r);let i,s=Si(this),o=an(void 0);try{if(!(r&fe.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=aV(e)&&Nh(e);l&&this.injectableDefInScope(l)?c=Uo(Qm(e),eh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&fe.Self?V_():this.parent;return n=r&fe.Optional&&n===tu?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[ah]=a[ah]||[]).unshift(cn(e)),s)throw a;return NL(a,e,"R3InjectorError",this.source)}else throw a}finally{an(o),Si(s)}}resolveInjectorInitializers(){let e=we(null),n=Si(this),r=an(void 0),i;try{let s=this.get(Go,bn,fe.Self);for(let o of s)o()}finally{Si(n),an(r),we(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=Yt(e);let n=zo(e)?e:Yt(e&&e.provide),r=iV(e);if(!zo(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Uo(void 0,eh,!0),i.factory=()=>zm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=we(null);try{return n.value===eh&&(n.value=nV,n.value=n.factory()),typeof n.value=="object"&&n.value&&oV(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{we(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Yt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Qm(t){let e=Nh(t),n=e!==null?e.factory:gs(t);if(n!==null)return n;if(t instanceof V)throw new G(204,!1);if(t instanceof Function)return rV(t);throw new G(204,!1)}function rV(t){if(t.length>0)throw new G(204,!1);let n=pL(t);return n!==null?()=>n.factory(t):()=>new t}function iV(t){if(KS(t))return Uo(void 0,t.useValue);{let e=QS(t);return Uo(e,eh)}}function QS(t,e,n){let r;if(zo(t)){let i=Yt(t);return gs(i)||Qm(i)}else if(KS(t))r=()=>Yt(t.useValue);else if(eV(t))r=()=>t.useFactory(...zm(t.deps||[]));else if(XL(t))r=()=>ee(Yt(t.useExisting));else{let i=Yt(t&&(t.useClass||t.provide));if(sV(t))r=()=>new i(...zm(t.deps));else return gs(i)||Qm(i)}return r}function Uo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function sV(t){return!!t.deps}function oV(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function aV(t){return typeof t=="function"||typeof t=="object"&&t instanceof V}function Ym(t,e){for(let n of t)Array.isArray(n)?Ym(n,e):n&&MS(n)?Ym(n.\u0275providers,e):e(n)}function Wr(t,e){t instanceof ru&&t.assertNotDestroyed();let n,r=Si(t),i=an(void 0);try{return e()}finally{Si(r),an(i)}}function YS(){return xS()!==void 0||bL()!=null}function Ph(t){if(!YS())throw new G(-203,!1)}function cV(t){return typeof t=="function"}var Kr=0,pe=1,ne=2,Zt=3,Yn=4,Zn=5,lh=6,dh=7,Rn=8,Wo=9,$r=10,wt=11,iu=12,tS=13,ta=14,Ir=15,Ko=16,jo=17,Qo=18,kh=19,ZS=20,Ai=21,th=22,Sn=23,Nn=25,JS=1;var _s=7,hh=8,fh=9,_n=10,ph=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(ph||{});function Ri(t){return Array.isArray(t)&&typeof t[JS]=="object"}function Qr(t){return Array.isArray(t)&&t[JS]===!0}function XS(t){return(t.flags&4)!==0}function Oh(t){return t.componentOffset>-1}function U_(t){return(t.flags&1)===1}function Mi(t){return!!t.template}function Zm(t){return(t[ne]&512)!==0}var Jm=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function e0(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Yr(){return t0}function t0(t){return t.type.prototype.ngOnChanges&&(t.setInput=lV),uV}Yr.ngInherit=!0;function uV(){let t=r0(this),e=t?.current;if(e){let n=t.previous;if(n===qo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function lV(t,e,n,r,i){let s=this.declaredInputs[r],o=r0(t)||dV(t,{previous:qo,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Jm(l&&l.currentValue,n,c===qo),e0(t,e,i,n)}var n0="__ngSimpleChanges__";function r0(t){return t[n0]||null}function dV(t,e){return t[n0]=e}var nS=null;var yr=function(t,e,n){nS?.(t,e,n)},hV="svg",fV="math";function Er(t){for(;Array.isArray(t);)t=t[Kr];return t}function i0(t,e){return Er(e[t])}function xn(t,e){return Er(e[t.index])}function j_(t,e){return t.data[e]}function pV(t,e){return t[e]}function ki(t,e){let n=e[t];return Ri(n)?n:n[Kr]}function B_(t){return(t[ne]&128)===128}function gV(t){return Qr(t[Zt])}function gh(t,e){return e==null?null:t[e]}function s0(t){t[jo]=0}function o0(t){t[ne]&1024||(t[ne]|=1024,B_(t)&&Lh(t))}function mV(t,e){for(;t>0;)e=e[ta],t--;return e}function Fh(t){return!!(t[ne]&9216||t[Sn]?.dirty)}function Xm(t){t[$r].changeDetectionScheduler?.notify(8),t[ne]&64&&(t[ne]|=1024),Fh(t)&&Lh(t)}function Lh(t){t[$r].changeDetectionScheduler?.notify(0);let e=ys(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!B_(e)));)e=ys(e)}function a0(t,e){if((t[ne]&256)===256)throw new G(911,!1);t[Ai]===null&&(t[Ai]=[]),t[Ai].push(e)}function _V(t,e){if(t[Ai]===null)return;let n=t[Ai].indexOf(e);n!==-1&&t[Ai].splice(n,1)}function ys(t){let e=t[Zt];return Qr(e)?e[Zt]:e}var me={lFrame:_0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var c0=!1;function yV(){return me.lFrame.elementDepthCount}function vV(){me.lFrame.elementDepthCount++}function wV(){me.lFrame.elementDepthCount--}function u0(){return me.bindingsEnabled}function IV(){return me.skipHydrationRootTNode!==null}function EV(t){return me.skipHydrationRootTNode===t}function CV(){me.skipHydrationRootTNode=null}function Ve(){return me.lFrame.lView}function un(){return me.lFrame.tView}function Ds(t){return me.lFrame.contextLView=t,t[Rn]}function bs(t){return me.lFrame.contextLView=null,t}function yn(){let t=l0();for(;t!==null&&t.type===64;)t=t.parent;return t}function l0(){return me.lFrame.currentTNode}function TV(){let t=me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function lu(t,e){let n=me.lFrame;n.currentTNode=t,n.isParent=e}function d0(){return me.lFrame.isParent}function DV(){me.lFrame.isParent=!1}function h0(){return c0}function rS(t){c0=t}function f0(){let t=me.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function bV(t){return me.lFrame.bindingIndex=t}function du(){return me.lFrame.bindingIndex++}function SV(t){let e=me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AV(){return me.lFrame.inI18n}function RV(t,e){let n=me.lFrame;n.bindingIndex=n.bindingRootIndex=t,e_(e)}function NV(){return me.lFrame.currentDirectiveIndex}function e_(t){me.lFrame.currentDirectiveIndex=t}function MV(t){let e=me.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function p0(t){me.lFrame.currentQueryIndex=t}function xV(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[Zn]:null}function g0(t,e,n){if(n&fe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&fe.Host);)if(i=xV(s),i===null||(s=s[ta],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=me.lFrame=m0();return r.currentTNode=e,r.lView=t,!0}function $_(t){let e=m0(),n=t[pe];me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function m0(){let t=me.lFrame,e=t===null?null:t.child;return e===null?_0(t):e}function _0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function y0(){let t=me.lFrame;return me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var v0=y0;function H_(){let t=y0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function PV(t){return(me.lFrame.contextLView=mV(t,me.lFrame.contextLView))[Rn]}function na(){return me.lFrame.selectedIndex}function vs(t){me.lFrame.selectedIndex=t}function q_(){let t=me.lFrame;return j_(t.tView,t.selectedIndex)}function kV(){return me.lFrame.currentNamespace}var w0=!0;function G_(){return w0}function z_(t){w0=t}function OV(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=t0(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function W_(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),d!=null&&(t.destroyHooks??=[]).push(n,d)}}function nh(t,e,n){I0(t,e,3,n)}function rh(t,e,n,r){(t[ne]&3)===n&&I0(t,e,n,r)}function Pm(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function I0(t,e,n,r){let i=r!==void 0?t[jo]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[jo]+=65536),(a<s||s==-1)&&(FV(t,n,e,c),t[jo]=(t[jo]&4294901760)+c+2),c++}function iS(t,e){yr(4,t,e);let n=we(null);try{e.call(t)}finally{we(n),yr(5,t,e)}}function FV(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ne]>>14<t[jo]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,iS(a,s)):iS(a,s)}var Ho=-1,ws=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function LV(t){return t instanceof ws}function VV(t){return(t.flags&8)!==0}function UV(t){return(t.flags&16)!==0}var km={},t_=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Mh(r);let i=this.injector.get(e,km,r);return i!==km||n===km?i:this.parentInjector.get(e,n,r)}};function E0(t){return t!==Ho}function mh(t){return t&32767}function jV(t){return t>>16}function _h(t,e){let n=jV(t),r=e;for(;n>0;)r=r[ta],n--;return r}var n_=!0;function yh(t){let e=n_;return n_=t,e}var BV=256,C0=BV-1,T0=5,$V=0,vr={};function HV(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(eu)&&(r=n[eu]),r==null&&(r=n[eu]=$V++);let i=r&C0,s=1<<i;e.data[t+(i>>T0)]|=s}function vh(t,e){let n=D0(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,Om(r.data,t),Om(e,null),Om(r.blueprint,null));let i=K_(t,e),s=t.injectorIndex;if(E0(i)){let o=mh(i),a=_h(i,e),c=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function Om(t,e){t.push(0,0,0,0,0,0,0,0,e)}function D0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function K_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=N0(i),r===null)return Ho;if(n++,i=i[ta],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ho}function r_(t,e,n){HV(t,e,n)}function b0(t,e,n){if(n&fe.Optional||t!==void 0)return t;k_(e,"NodeInjector")}function S0(t,e,n,r){if(n&fe.Optional&&r===void 0&&(r=null),!(n&(fe.Self|fe.Host))){let i=t[Wo],s=an(void 0);try{return i?i.get(e,r,n&fe.Optional):PS(e,r,n&fe.Optional)}finally{an(s)}}return b0(r,e,n)}function A0(t,e,n,r=fe.Default,i){if(t!==null){if(e[ne]&2048&&!(r&fe.Self)){let o=KV(t,e,n,r,vr);if(o!==vr)return o}let s=R0(t,e,n,r,vr);if(s!==vr)return s}return S0(e,n,r,i)}function R0(t,e,n,r,i){let s=zV(n);if(typeof s=="function"){if(!g0(e,t,r))return r&fe.Host?b0(i,n,r):S0(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&fe.Optional))k_(n);else return o}finally{v0()}}else if(typeof s=="number"){let o=null,a=D0(t,e),c=Ho,l=r&fe.Host?e[Ir][Zn]:null;for((a===-1||r&fe.SkipSelf)&&(c=a===-1?K_(t,e):e[a+8],c===Ho||!oS(r,!1)?a=-1:(o=e[pe],a=mh(c),e=_h(c,e)));a!==-1;){let d=e[pe];if(sS(s,a,d.data)){let f=qV(a,e,n,o,r,l);if(f!==vr)return f}c=e[a+8],c!==Ho&&oS(r,e[pe].data[a+8]===l)&&sS(s,a,e)?(o=d,a=mh(c),e=_h(c,e)):a=-1}}return i}function qV(t,e,n,r,i,s){let o=e[pe],a=o.data[t+8],c=r==null?Oh(a)&&n_:r!=o&&(a.type&3)!==0,l=i&fe.Host&&s===a,d=GV(a,o,n,c,l);return d!==null?Yo(e,o,d,a):vr}function GV(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,l=t.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let _=f;_<g;_++){let w=o[_];if(_<c&&n===w||_>=c&&w.type===n)return _}if(i){let _=o[c];if(_&&Mi(_)&&_.type===n)return c}return null}function Yo(t,e,n,r){let i=t[n],s=e.data;if(LV(i)){let o=i;o.resolving&&IL(wL(s[n]));let a=yh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?an(o.injectImpl):null,d=g0(t,r,fe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&OV(n,s[n],e)}finally{l!==null&&an(l),yh(a),o.resolving=!1,v0()}}return i}function zV(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(eu)?t[eu]:void 0;return typeof e=="number"?e>=0?e&C0:WV:e}function sS(t,e,n){let r=1<<t;return!!(n[e+(t>>T0)]&r)}function oS(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var ps=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return A0(this._tNode,this._lView,e,Mh(r),n)}};function WV(){return new ps(yn(),Ve())}function Oi(t){return cu(()=>{let e=t.prototype.constructor,n=e[oh]||i_(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[oh]||i_(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function i_(t){return SS(t)?()=>{let e=i_(Yt(t));return e&&e()}:gs(t)}function KV(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ne]&2048&&!(o[ne]&512);){let a=R0(s,o,n,r|fe.Self,vr);if(a!==vr)return a;let c=s.parent;if(!c){let l=o[ZS];if(l){let d=l.get(n,vr,r);if(d!==vr)return d}c=N0(o),o=o[ta]}s=c}return i}function N0(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[Zn]:null}function aS(t,e=null,n=null,r){let i=M0(t,e,n,r);return i.resolveInjectorInitializers(),i}function M0(t,e=null,n=null,r,i=new Set){let s=[n||bn,ZL(t)];return r=r||(typeof t=="object"?void 0:cn(t)),new ru(s,e||V_(),r||null,i)}var _e=class t{static{this.THROW_IF_NOT_FOUND=tu}static{this.NULL=new uh}static create(e,n){if(Array.isArray(e))return aS({name:""},n,e,"");{let r=e.name??"";return aS({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=H({token:t,providedIn:"any",factory:()=>ee(OS)})}static{this.__NG_ELEMENT_ID__=-1}};var QV=new V("");QV.__NG_ELEMENT_ID__=t=>{let e=yn();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new G(204,!1)};var YV="ngOriginalError";function Fm(t){return t[YV]}var x0=!0,ra=(()=>{class t{static{this.__NG_ELEMENT_ID__=ZV}static{this.__NG_ENV_ID__=n=>n}}return t})(),s_=class extends ra{constructor(e){super(),this._lView=e}onDestroy(e){return a0(this._lView,e),()=>_V(this._lView,e)}};function ZV(){return new s_(Ve())}var Ss=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new St(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})();var o_=class extends Ye{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,YS()&&(this.destroyRef=x(ra,{optional:!0})??void 0,this.pendingTasks=x(Ss,{optional:!0})??void 0)}emit(e){let n=we(null);try{super.next(e)}finally{we(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof tt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},ht=o_;function wh(...t){}function P0(t){let e,n;function r(){t=wh;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function cS(t){return queueMicrotask(()=>t()),()=>{t=wh}}var Q_="isAngularZone",Ih=Q_+"_ID",JV=0,X=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ht(!1),this.onMicrotaskEmpty=new ht(!1),this.onStable=new ht(!1),this.onError=new ht(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=x0}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,tU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Q_)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,XV,wh,wh);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},XV={};function Y_(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function eU(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){P0(()=>{t.callbackScheduled=!1,a_(t),t.isCheckStableRunning=!0,Y_(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),a_(t)}function tU(t){let e=()=>{eU(t)},n=JV++;t._inner=t._inner.fork({name:"angular",properties:{[Q_]:!0,[Ih]:n,[Ih+n]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(nU(c))return r.invokeTask(s,o,a,c);try{return uS(t),r.invokeTask(s,o,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),lS(t)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return uS(t),r.invoke(s,o,a,c,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!rU(c)&&e(),lS(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,a_(t),Y_(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function a_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function uS(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function lS(t){t._nesting--,Y_(t)}var c_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ht,this.onMicrotaskEmpty=new ht,this.onStable=new ht,this.onError=new ht}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function nU(t){return k0(t,"__ignore_ng_zone__")}function rU(t){return k0(t,"__scheduler_tick__")}function k0(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Cr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Fm(e);for(;n&&Fm(n);)n=Fm(n);return n||null}},iU=new V("",{providedIn:"root",factory:()=>{let t=x(X),e=x(Cr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function sU(){return Z_(yn(),Ve())}function Z_(t,e){return new Fi(xn(t,e))}var Fi=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=sU}}return t})();function O0(t){return(t.flags&128)===128}var F0=new Map,oU=0;function aU(){return oU++}function cU(t){F0.set(t[kh],t)}function u_(t){F0.delete(t[kh])}var dS="__ngContext__";function Is(t,e){Ri(e)?(t[dS]=e[kh],cU(e)):t[dS]=e}function L0(t){return U0(t[iu])}function V0(t){return U0(t[Yn])}function U0(t){for(;t!==null&&!Qr(t);)t=t[Yn];return t}var l_;function j0(t){l_=t}function uU(){if(l_!==void 0)return l_;if(typeof document<"u")return document;throw new G(210,!1)}var J_=new V("",{providedIn:"root",factory:()=>lU}),lU="ng",X_=new V(""),Jn=new V("",{providedIn:"platform",factory:()=>"unknown"});var ey=new V("",{providedIn:"root",factory:()=>uU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var dU="h",hU="b";var fU=()=>null;function ty(t,e,n=!1){return fU(t,e,n)}var B0=!1,pU=new V("",{providedIn:"root",factory:()=>B0});var d_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uL})`}};function ny(t){return t instanceof d_?t.changingThisBreaksApplicationSecurity:t}function $0(t){return t instanceof Function?t():t}var Hr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Hr||{}),gU;function ry(t,e){return gU(t,e)}function Bo(t,e,n,r,i){if(r!=null){let s,o=!1;Qr(r)?s=r:Ri(r)&&(o=!0,r=r[Kr]);let a=Er(r);t===0&&n!==null?i==null?z0(e,n,a):Ch(e,n,a,i||null,!0):t===1&&n!==null?Ch(e,n,a,i||null,!0):t===2?NU(e,a,o):t===3&&e.destroyNode(a),s!=null&&xU(e,t,s,n,i)}}function mU(t,e){return t.createText(e)}function _U(t,e,n){t.setValue(e,n)}function H0(t,e,n){return t.createElement(e,n)}function yU(t,e){q0(t,e),e[Kr]=null,e[Zn]=null}function vU(t,e,n,r,i,s){r[Kr]=i,r[Zn]=e,Vh(t,r,n,1,i,s)}function q0(t,e){e[$r].changeDetectionScheduler?.notify(9),Vh(t,e,e[wt],2,null,null)}function wU(t){let e=t[iu];if(!e)return Lm(t[pe],t);for(;e;){let n=null;if(Ri(e))n=e[iu];else{let r=e[_n];r&&(n=r)}if(!n){for(;e&&!e[Yn]&&e!==t;)Ri(e)&&Lm(e[pe],e),e=e[Zt];e===null&&(e=t),Ri(e)&&Lm(e[pe],e),n=e&&e[Yn]}e=n}}function IU(t,e,n,r){let i=_n+r,s=n.length;r>0&&(n[i-1][Yn]=e),r<s-_n?(e[Yn]=n[i],kS(n,_n+r,e)):(n.push(e),e[Yn]=null),e[Zt]=n;let o=e[Ko];o!==null&&n!==o&&G0(o,e);let a=e[Qo];a!==null&&a.insertView(t),Xm(e),e[ne]|=128}function G0(t,e){let n=t[fh],r=e[Zt];if(Ri(r))t[ne]|=ph.HasTransplantedViews;else{let i=r[Zt][Ir];e[Ir]!==i&&(t[ne]|=ph.HasTransplantedViews)}n===null?t[fh]=[e]:n.push(e)}function iy(t,e){let n=t[fh],r=n.indexOf(e);n.splice(r,1)}function Eh(t,e){if(t.length<=_n)return;let n=_n+e,r=t[n];if(r){let i=r[Ko];i!==null&&i!==t&&iy(i,r),e>0&&(t[n-1][Yn]=r[Yn]);let s=ch(t,_n+e);yU(r[pe],r);let o=s[Qo];o!==null&&o.detachView(s[pe]),r[Zt]=null,r[Yn]=null,r[ne]&=-129}return r}function sy(t,e){if(!(e[ne]&256)){let n=e[wt];n.destroyNode&&Vh(t,e,n,3,null,null),wU(e)}}function Lm(t,e){if(e[ne]&256)return;let n=we(null);try{e[ne]&=-129,e[ne]|=256,e[Sn]&&yd(e[Sn]),CU(t,e),EU(t,e),e[pe].type===1&&e[wt].destroy();let r=e[Ko];if(r!==null&&Qr(e[Zt])){r!==e[Zt]&&iy(r,e);let i=e[Qo];i!==null&&i.detachView(t)}u_(e)}finally{we(n)}}function EU(t,e){let n=t.cleanup,r=e[dh];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[dh]=null);let i=e[Ai];if(i!==null){e[Ai]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function CU(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ws)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];yr(4,a,c);try{c.call(a)}finally{yr(5,a,c)}}else{yr(4,i,s);try{s.call(i)}finally{yr(5,i,s)}}}}}function TU(t,e,n){return DU(t,e.parent,n)}function DU(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Kr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===wr.None||s===wr.Emulated)return null}return xn(r,n)}}function Ch(t,e,n,r,i){t.insertBefore(e,n,r,i)}function z0(t,e,n){t.appendChild(e,n)}function hS(t,e,n,r,i){r!==null?Ch(t,e,n,r,i):z0(t,e,n)}function W0(t,e){return t.parentNode(e)}function bU(t,e){return t.nextSibling(e)}function SU(t,e,n){return RU(t,e,n)}function AU(t,e,n){return t.type&40?xn(t,n):null}var RU=AU,fS;function oy(t,e,n,r){let i=TU(t,r,e),s=e[wt],o=r.parent||e[Zn],a=SU(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)hS(s,i,n[c],a,!1);else hS(s,i,n,a,!1);fS!==void 0&&fS(s,r,e,n,i)}function Jc(t,e){if(e!==null){let n=e.type;if(n&3)return xn(e,t);if(n&4)return h_(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Jc(t,r);{let i=t[e.index];return Qr(i)?h_(-1,i):Er(i)}}else{if(n&128)return Jc(t,e.next);if(n&32)return ry(e,t)()||Er(t[e.index]);{let r=K0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ys(t[Ir]);return Jc(i,r)}else return Jc(t,e.next)}}}return null}function K0(t,e){if(e!==null){let r=t[Ir][Zn],i=e.projection;return r.projection[i]}return null}function h_(t,e){let n=_n+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return Jc(r,i)}return e[_s]}function NU(t,e,n){t.removeChild(null,e,n)}function ay(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Is(Er(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)ay(t,e,n.child,r,i,s,!1),Bo(e,t,i,a,s);else if(c&32){let l=ry(n,r),d;for(;d=l();)Bo(e,t,i,d,s);Bo(e,t,i,a,s)}else c&16?MU(t,e,r,n,i,s):Bo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Vh(t,e,n,r,i,s){ay(n,r,t.firstChild,e,i,s,!1)}function MU(t,e,n,r,i,s){let o=n[Ir],c=o[Zn].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];Bo(e,t,i,d,s)}else{let l=c,d=o[Zt];O0(r)&&(l.flags|=128),ay(t,e,l,d,i,s,!0)}}function xU(t,e,n,r,i){let s=n[_s],o=Er(n);s!==o&&Bo(e,t,r,s,i);for(let a=_n;a<n.length;a++){let c=n[a];Vh(c[pe],c,t,e,r,s)}}function PU(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Hr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Hr.Important),t.setStyle(n,r,i,s))}}function kU(t,e,n){t.setAttribute(e,"style",n)}function Q0(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Y0(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Wm(t,e,r),i!==null&&Q0(t,e,i),s!==null&&kU(t,e,s)}var Li={};function Se(t=1){Z0(un(),Ve(),na()+t,!1)}function Z0(t,e,n,r){if(!r)if((e[ne]&3)===3){let s=t.preOrderCheckHooks;s!==null&&nh(e,s,n)}else{let s=t.preOrderHooks;s!==null&&rh(e,s,0,n)}vs(n)}function Pe(t,e=fe.Default){let n=Ve();if(n===null)return ee(t,e);let r=yn();return A0(r,n,Yt(t),e)}function J0(t,e,n,r,i,s){let o=we(null);try{let a=null;i&Ni.SignalBased&&(a=e[r][pr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Ni.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):e0(e,a,r,s)}finally{we(o)}}function OU(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)vs(~i);else{let s=i,o=n[++r],a=n[++r];RV(o,s);let c=e[s];a(2,c)}}}finally{vs(-1)}}function Uh(t,e,n,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[Kr]=i,f[ne]=r|4|128|8|64,(l!==null||t&&t[ne]&2048)&&(f[ne]|=2048),s0(f),f[Zt]=f[ta]=t,f[Rn]=n,f[$r]=o||t&&t[$r],f[wt]=a||t&&t[wt],f[Wo]=c||t&&t[Wo]||null,f[Zn]=s,f[kh]=aU(),f[lh]=d,f[ZS]=l,f[Ir]=e.type==2?t[Ir]:f,f}function jh(t,e,n,r,i){let s=t.data[e];if(s===null)s=FU(t,e,n,r,i),AV()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=TV();s.injectorIndex=o===null?-1:o.injectorIndex}return lu(s,!0),s}function FU(t,e,n,r,i){let s=l0(),o=d0(),a=o?s:s&&s.parent,c=t.data[e]=BU(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function X0(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function eA(t,e,n,r,i){let s=na(),o=r&2;try{vs(-1),o&&e.length>Nn&&Z0(t,e,Nn,!1),yr(o?2:0,i),n(r,i)}finally{vs(s),yr(o?3:1,i)}}function tA(t,e,n){if(XS(e)){let r=we(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{we(r)}}}function nA(t,e,n){u0()&&(WU(t,e,n,xn(n,e)),(n.flags&64)===64&&cA(t,e,n))}function rA(t,e,n=xn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function iA(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=cy(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function cy(t,e,n,r,i,s,o,a,c,l,d){let f=Nn+r,g=f+i,_=LU(f,g),w=typeof l=="function"?l():l;return _[pe]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function LU(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Li);return n}function VU(t,e,n,r){let s=r.get(pU,B0)||n===wr.ShadowDom,o=t.selectRootElement(e,s);return UU(o),o}function UU(t){jU(t)}var jU=()=>null;function BU(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return IV()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function pS(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Ni.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?gS(r,n,l,a,c):gS(r,n,l,a)}return r}function gS(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function $U(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=n?n.get(f):null,_=g?g.inputs:null,w=g?g.outputs:null;c=pS(0,f.inputs,d,c,_),l=pS(1,f.outputs,d,l,w);let R=c!==null&&o!==null&&!F_(e)?ij(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function HU(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function sA(t,e,n,r,i,s,o,a){let c=xn(e,n),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(uy(t,n,d,r,i),Oh(e)&&qU(n,e.index)):e.type&3?(r=HU(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function qU(t,e){let n=ki(e,t);n[ne]&16||(n[ne]|=64)}function oA(t,e,n,r){if(u0()){let i=r===null?null:{"":-1},s=QU(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&aA(t,e,n,o,i,a),i&&YU(n,r,i)}n.mergedAttrs=nu(n.mergedAttrs,n.attrs)}function aA(t,e,n,r,i,s){for(let l=0;l<r.length;l++)r_(vh(n,e),t,r[l].type);JU(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=X0(t,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];n.mergedAttrs=nu(n.mergedAttrs,d.hostAttrs),XU(t,n,e,c,d),ZU(c,d,i),d.contentQueries!==null&&(n.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(n.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}$U(t,n,s)}function GU(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;zU(o)!=a&&o.push(a),o.push(n,r,s)}}function zU(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function WU(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Oh(n)&&ej(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||vh(n,e),Is(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],l=Yo(e,t,a,n);if(Is(l,e),o!==null&&rj(e,a-i,l,c,n,o),Mi(c)){let d=ki(n.index,e);d[Rn]=Yo(e,t,a,n)}}}function cA(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=NV();try{vs(s);for(let a=r;a<i;a++){let c=t.data[a],l=e[a];e_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&KU(c,l)}}finally{vs(-1),e_(o)}}function KU(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function QU(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if($L(e,o.selectors,!1))if(r||(r=[]),Mi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;f_(t,e,c)}else r.unshift(o),f_(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function f_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function YU(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function ZU(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Mi(e)&&(n[""]=t)}}function JU(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function XU(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=gs(i.type,!0)),o=new ws(s,Mi(i),Pe);t.blueprint[r]=o,n[r]=o,GU(t,e,r,X0(t,n,i.hostVars,Li),i)}function ej(t,e,n){let r=xn(e,t),i=iA(n),s=t[$r].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Bh(t,Uh(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function tj(t,e,n,r,i,s){let o=xn(t,e);nj(e[wt],o,s,t.value,n,r,i)}function nj(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?P_(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function rj(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];J0(r,n,c,l,d,f)}}function ij(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function uA(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function lA(t,e){let n=t.contentQueries;if(n!==null){let r=we(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];p0(s),a.contentQueries(2,e[o],o)}}}finally{we(r)}}}function Bh(t,e){return t[iu]?t[tS][Yn]=e:t[iu]=e,t[tS]=e,e}function p_(t,e,n){p0(0);let r=we(null);try{e(t,n)}finally{we(r)}}function sj(t){return t[dh]??=[]}function oj(t){return t.cleanup??=[]}function dA(t,e){let n=t[Wo],r=n?n.get(Cr,null):null;r&&r.handleError(e)}function uy(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],l=e[o],d=t.data[o];J0(d,l,r,a,c,i)}}function aj(t,e,n){let r=i0(e,t);_U(t[wt],r,n)}function cj(t,e){let n=ki(e,t),r=n[pe];uj(r,n);let i=n[Kr];i!==null&&n[lh]===null&&(n[lh]=ty(i,n[Wo])),ly(r,n,n[Rn])}function uj(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function ly(t,e,n){$_(e);try{let r=t.viewQuery;r!==null&&p_(1,r,n);let i=t.template;i!==null&&eA(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Qo]?.finishViewCreation(t),t.staticContentQueries&&lA(t,e),t.staticViewQueries&&p_(2,t.viewQuery,n);let s=t.components;s!==null&&lj(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,H_()}}function lj(t,e){for(let n=0;n<e.length;n++)cj(t,e[n])}function dj(t,e,n,r){let i=we(null);try{let s=e.tView,a=t[ne]&4096?4096:16,c=Uh(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];c[Ko]=l;let d=t[Qo];return d!==null&&(c[Qo]=d.createEmbeddedView(s)),ly(s,c,n),c}finally{we(i)}}function hj(t,e){let n=_n+e;if(n<t.length)return t[n]}function g_(t,e){return!e||e.firstChild===null||O0(t)}function hA(t,e,n,r=!0){let i=e[pe];if(IU(i,e,t,n),r){let o=h_(n,t),a=e[wt],c=W0(a,t[_s]);c!==null&&vU(i,t[Zn],a,e,c,o)}let s=e[lh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function fj(t,e){let n=Eh(t,e);return n!==void 0&&sy(n[pe],n),n}function Th(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(Er(s)),Qr(s)&&pj(s,r);let o=n.type;if(o&8)Th(t,e,n.child,r);else if(o&32){let a=ry(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=K0(e,n);if(Array.isArray(a))r.push(...a);else{let c=ys(e[Ir]);Th(c[pe],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function pj(t,e){for(let n=_n;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&Th(r[pe],r,i,e)}t[_s]!==t[Kr]&&e.push(t[_s])}var fA=[];function gj(t){return t[Sn]??mj(t)}function mj(t){let e=fA.pop()??Object.create(yj);return e.lView=t,e}function _j(t){t.lView[Sn]!==t&&(t.lView=null,fA.push(t))}var yj=ge(F({},Co),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Lh(t.lView)},consumerOnSignalRead(){this.lView[Sn]=this}});function vj(t){let e=t[Sn]??Object.create(wj);return e.lView=t,e}var wj=ge(F({},Co),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=ys(t.lView);for(;e&&!pA(e[pe]);)e=ys(e);e&&o0(e)},consumerOnSignalRead(){this.lView[Sn]=this}});function pA(t){return t.type!==2}var Ij=100;function gA(t,e=!0,n=0){let r=t[$r],i=r.rendererFactory,s=!1;s||i.begin?.();try{Ej(t,n)}catch(o){throw e&&dA(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function Ej(t,e){let n=h0();try{rS(!0),m_(t,e);let r=0;for(;Fh(t);){if(r===Ij)throw new G(103,!1);r++,m_(t,1)}}finally{rS(n)}}function Cj(t,e,n,r){let i=e[ne];if((i&256)===256)return;let s=!1,o=!1;!s&&e[$r].inlineEffectRunner?.flush(),$_(e);let a=!0,c=null,l=null;s||(pA(t)?(l=gj(e),c=qc(l)):sb()===null?(a=!1,l=vj(e),c=qc(l)):e[Sn]&&(yd(e[Sn]),e[Sn]=null));try{s0(e),bV(t.bindingStartIndex),n!==null&&eA(t,e,n,2,r);let d=(i&3)===3;if(!s)if(d){let _=t.preOrderCheckHooks;_!==null&&nh(e,_,null)}else{let _=t.preOrderHooks;_!==null&&rh(e,_,0,null),Pm(e,0)}if(o||Tj(e),mA(e,0),t.contentQueries!==null&&lA(t,e),!s)if(d){let _=t.contentCheckHooks;_!==null&&nh(e,_)}else{let _=t.contentHooks;_!==null&&rh(e,_,1),Pm(e,1)}OU(t,e);let f=t.components;f!==null&&yA(e,f,0);let g=t.viewQuery;if(g!==null&&p_(2,g,r),!s)if(d){let _=t.viewCheckHooks;_!==null&&nh(e,_)}else{let _=t.viewHooks;_!==null&&rh(e,_,2),Pm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[th]){for(let _ of e[th])_();e[th]=null}s||(e[ne]&=-73)}catch(d){throw s||Lh(e),d}finally{l!==null&&(md(l,c),a&&_j(l)),H_()}}function mA(t,e){for(let n=L0(t);n!==null;n=V0(n))for(let r=_n;r<n.length;r++){let i=n[r];_A(i,e)}}function Tj(t){for(let e=L0(t);e!==null;e=V0(e)){if(!(e[ne]&ph.HasTransplantedViews))continue;let n=e[fh];for(let r=0;r<n.length;r++){let i=n[r];o0(i)}}}function Dj(t,e,n){let r=ki(e,t);_A(r,n)}function _A(t,e){B_(t)&&m_(t,e)}function m_(t,e){let r=t[pe],i=t[ne],s=t[Sn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&_d(s)),o||=!1,s&&(s.dirty=!1),t[ne]&=-9217,o)Cj(r,t,r.template,t[Rn]);else if(i&8192){mA(t,1);let a=r.components;a!==null&&yA(t,a,1)}}function yA(t,e,n){for(let r=0;r<e.length;r++)Dj(t,e[r],n)}function dy(t,e){let n=h0()?64:1088;for(t[$r].changeDetectionScheduler?.notify(e);t;){t[ne]|=n;let r=ys(t);if(Zm(t)&&!r)return t;t=r}return null}var Zo=class{get rootNodes(){let e=this._lView,n=e[pe];return Th(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Rn]}set context(e){this._lView[Rn]=e}get destroyed(){return(this._lView[ne]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Zt];if(Qr(e)){let n=e[hh],r=n?n.indexOf(this):-1;r>-1&&(Eh(e,r),ch(n,r))}this._attachedToViewContainer=!1}sy(this._lView[pe],this._lView)}onDestroy(e){a0(this._lView,e)}markForCheck(){dy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){Xm(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,gA(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Zm(this._lView),n=this._lView[Ko];n!==null&&!e&&iy(n,this._lView),q0(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let n=Zm(this._lView),r=this._lView[Ko];r!==null&&!n&&G0(r,this._lView),Xm(this._lView)}};var $ee=new RegExp(`^(\\d+)*(${hU}|${dU})*(.*)`);var bj=()=>null;function __(t,e){return bj(t,e)}var Jo=class{},$h=new V("",{providedIn:"root",factory:()=>!1});var vA=new V(""),wA=new V(""),y_=class{},Dh=class{};function Sj(t){let e=Error(`No component factory found for ${cn(t)}.`);return e[Aj]=t,e}var Aj="ngComponent";var v_=class{resolveComponentFactory(e){throw Sj(e)}},xi=class{static{this.NULL=new v_}},Xo=class{},As=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Rj()}}return t})();function Rj(){let t=Ve(),e=yn(),n=ki(e.index,t);return(Ri(n)?n:t)[wt]}var Nj=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>null})}}return t})();function w_(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=Gb(i,a);else if(s==2){let c=a,l=e[++o];r=Gb(r,c+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var bh=class extends xi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=ms(e);return new su(n,this.ngModule)}};function mS(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Ni.None;e?n.push({propName:o,templateName:r,isSignal:(a&Ni.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function Mj(t){let e=t.toLowerCase();return e==="svg"?hV:e==="math"?fV:null}var su=class extends Dh{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=mS(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return mS(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=zL(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=we(null);try{i=i||this.ngModule;let o=i instanceof An?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new t_(e,o):e,c=a.get(Xo,null);if(c===null)throw new G(407,!1);let l=a.get(Nj,null),d=a.get(Jo,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",w=r?VU(g,r,this.componentDef.encapsulation,a):H0(g,_,Mj(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;w!==null&&(S=ty(w,a,!0));let P=cy(0,null,null,1,0,null,null,null,null,null,null),U=Uh(null,P,null,R,null,null,f,g,a,null,S);$_(U);let $,W,Oe=null;try{let J=this.componentDef,C,v=null;J.findHostDirectiveDefs?(C=[],v=new Map,J.findHostDirectiveDefs(J,C,v),C.push(J)):C=[J];let I=xj(U,w);Oe=Pj(I,w,J,C,U,f,g),W=j_(P,Nn),w&&Fj(g,J,w,r),n!==void 0&&Lj(W,this.ngContentSelectors,n),$=Oj(Oe,J,C,v,U,[Vj]),ly(P,U,null)}catch(J){throw Oe!==null&&u_(Oe),u_(U),J}finally{H_()}return new I_(this.componentType,$,Z_(W,U),U,W)}finally{we(s)}}},I_=class extends y_{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Zo(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;uy(s[pe],s,i,e,n),this.previousInputValues.set(e,n);let o=ki(this._tNode.index,s);dy(o,1)}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function xj(t,e){let n=t[pe],r=Nn;return t[r]=e,jh(n,r,2,"#host",null)}function Pj(t,e,n,r,i,s,o){let a=i[pe];kj(r,t,e,o);let c=null;e!==null&&(c=ty(e,i[Wo]));let l=s.rendererFactory.createRenderer(e,n),d=16;n.signals?d=4096:n.onPush&&(d=64);let f=Uh(i,iA(n),null,d,i[t.index],t,s,l,null,null,c);return a.firstCreatePass&&f_(a,t,r.length-1),Bh(i,f),i[t.index]=f}function kj(t,e,n,r){for(let i of t)e.mergedAttrs=nu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(w_(e,e.mergedAttrs,!0),n!==null&&Y0(r,n,e))}function Oj(t,e,n,r,i,s){let o=yn(),a=i[pe],c=xn(o,i);aA(a,i,o,n,null,r);for(let d=0;d<n.length;d++){let f=o.directiveStart+d,g=Yo(i,a,f,o);Is(g,i)}cA(a,i,o),c&&Is(c,i);let l=Yo(i,a,o.directiveStart+o.componentOffset,o);if(t[Rn]=i[Rn]=l,s!==null)for(let d of s)d(l,e);return tA(a,o,i),l}function Fj(t,e,n,r){if(r)Wm(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=WL(e.selectors[0]);i&&Wm(t,n,i),s&&s.length>0&&Q0(t,n,s.join(" "))}}function Lj(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function Vj(){let t=yn();W_(Ve()[pe],t)}var Hh=(()=>{class t{static{this.__NG_ELEMENT_ID__=Uj}}return t})();function Uj(){let t=yn();return Bj(t,Ve())}var jj=Hh,IA=class extends jj{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Z_(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){let e=K_(this._hostTNode,this._hostLView);if(E0(e)){let n=_h(e,this._hostLView),r=mh(e),i=n[pe].data[r+8];return new ps(i,n)}else return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=_S(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-_n}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=__(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,g_(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!cV(e),a;if(o)a=n;else{let w=n||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new su(ms(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(An,null);R&&(s=R)}let d=ms(c.componentType??{}),f=__(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,g_(this._hostTNode,f)),_}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(gV(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Zt],l=new IA(c,c[Zn],c[Zt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return hA(o,i,s,r),e.attachToViewContainerRef(),kS(Vm(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=_S(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Eh(this._lContainer,n);r&&(ch(Vm(this._lContainer),n),sy(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=Eh(this._lContainer,n);return r&&ch(Vm(this._lContainer),n)!=null?new Zo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function _S(t){return t[hh]}function Vm(t){return t[hh]||(t[hh]=[])}function Bj(t,e){let n,r=e[t.index];return Qr(r)?n=r:(n=uA(r,e,null,t),e[t.index]=n,Bh(e,n)),Hj(n,e,t,r),new IA(n,t,e)}function $j(t,e){let n=t[wt],r=n.createComment(""),i=xn(e,t),s=W0(n,i);return Ch(n,s,r,bU(n,i),!1),r}var Hj=zj,qj=()=>!1;function Gj(t,e,n){return qj(t,e,n)}function zj(t,e,n,r){if(t[_s])return;let i;n.type&8?i=Er(r):i=$j(e,n),t[_s]=i}var yS=new Set;function Rs(t){yS.has(t)||(yS.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Wj(t){return typeof t=="function"&&t[pr]!==void 0}function Pn(t,e){Rs("NgSignals");let n=_b(t),r=n[pr];return e?.equal&&(r.equal=e.equal),n.set=i=>fm(r,i),n.update=i=>yb(r,i),n.asReadonly=Kj.bind(n),n}function Kj(){let t=this[pr];if(t.readonlyFn===void 0){let e=()=>this();e[pr]=t,t.readonlyFn=e}return t.readonlyFn}function EA(t){return Wj(t)&&typeof t.set=="function"}function Qj(t){return Object.getPrototypeOf(t.prototype).constructor}function Xn(t){let e=Qj(t.type),n=!0,r=[t];for(;e;){let i;if(Mi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Zd(t.inputs),o.inputTransforms=Zd(t.inputTransforms),o.declaredInputs=Zd(t.declaredInputs),o.outputs=Zd(t.outputs);let a=i.hostBindings;a&&e2(t,a);let c=i.viewQuery,l=i.contentQueries;if(c&&Jj(t,c),l&&Xj(t,l),Yj(t,i),hL(t.outputs,i.outputs),Mi(i)&&i.data.animation){let d=t.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Xn&&(n=!1)}}e=Object.getPrototypeOf(e)}Zj(r)}function Yj(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Zj(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=nu(i.hostAttrs,n=nu(n,i.hostAttrs))}}function Zd(t){return t===qo?{}:t===bn?[]:t}function Jj(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function Xj(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function e2(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Pi=class{},ou=class{};var E_=class extends Pi{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bh(this);let s=HS(e);this._bootstrapComponents=$0(s.bootstrap),this._r3Injector=M0(e,n,[{provide:Pi,useValue:this},{provide:xi,useValue:this.componentFactoryResolver},...r],cn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},C_=class extends ou{constructor(e){super(),this.moduleType=e}create(e){return new E_(this.moduleType,e,[])}};var Sh=class extends Pi{constructor(e){super(),this.componentFactoryResolver=new bh(this),this.instance=null;let n=new ru([...e.providers,{provide:Pi,useValue:this},{provide:xi,useValue:this.componentFactoryResolver}],e.parent||V_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hy(t,e,n=null){return new Sh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function CA(t,e,n){return t[e]=n}function qr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function t2(t,e,n,r){let i=qr(t,e,n);return qr(t,e+1,r)||i}function n2(t){return(t.flags&32)===32}function r2(t,e,n,r,i,s,o,a,c){let l=e.consts,d=jh(e,t,4,o||null,a||null);oA(e,n,d,gh(l,c)),W_(e,d);let f=d.tView=cy(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function i2(t,e,n,r,i,s,o,a,c,l){let d=n+Nn,f=e.firstCreatePass?r2(d,e,t,r,i,s,o,a,c):e.data[d];lu(f,!1);let g=s2(e,t,f,n);G_()&&oy(e,t,g,f),Is(g,t);let _=uA(g,t,g,f);return t[d]=_,Bh(t,_),Gj(_,f,t),U_(f)&&nA(e,t,f),c!=null&&rA(t,f,l),f}function kn(t,e,n,r,i,s,o,a){let c=Ve(),l=un(),d=gh(l.consts,s);return i2(c,l,t,e,n,r,i,d,o,a),kn}var s2=o2;function o2(t,e,n,r){return z_(!0),e[wt].createComment("")}var Xc=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Xc||{}),a2=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}}return t})(),vS=class t{constructor(){this.ngZone=x(X),this.scheduler=x(Jo),this.errorHandler=x(Cr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Xc.EarlyRead,Xc.Write,Xc.MixedReadWrite,Xc.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}};function hu(t,e,n,r){let i=Ve(),s=du();if(qr(i,s,e)){let o=un(),a=q_();tj(a,i,t,e,n,r)}return hu}function c2(t,e,n,r){return qr(t,du(),n)?e+P_(n)+r:Li}function Jd(t,e){return t<<17|e<<2}function Es(t){return t>>17&32767}function u2(t){return(t&2)==2}function l2(t,e){return t&131071|e<<17}function T_(t){return t|2}function ea(t){return(t&131068)>>2}function Um(t,e){return t&-131069|e<<2}function d2(t){return(t&1)===1}function D_(t){return t|1}function h2(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Es(o),c=ea(o);t[r]=n;let l=!1,d;if(Array.isArray(n)){let f=n;d=f[1],(d===null||uu(f,d)>0)&&(l=!0)}else d=n;if(i)if(c!==0){let g=Es(t[a+1]);t[r+1]=Jd(g,a),g!==0&&(t[g+1]=Um(t[g+1],r)),t[a+1]=l2(t[a+1],r)}else t[r+1]=Jd(a,0),a!==0&&(t[a+1]=Um(t[a+1],r)),a=r;else t[r+1]=Jd(c,0),a===0?a=r:t[c+1]=Um(t[c+1],r),c=r;l&&(t[r+1]=T_(t[r+1])),wS(t,d,r,!0),wS(t,d,r,!1),f2(e,d,t,r,s),o=Jd(a,c),s?e.classBindings=o:e.styleBindings=o}function f2(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&uu(s,e)>=0&&(n[r+1]=D_(n[r+1]))}function wS(t,e,n,r){let i=t[n+1],s=e===null,o=r?Es(i):ea(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],l=t[o+1];p2(c,e)&&(a=!0,t[o+1]=r?D_(l):T_(l)),o=r?Es(l):ea(l)}a&&(t[n+1]=r?T_(i):D_(i))}function p2(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?uu(t,e)>=0:!1}function ln(t,e,n){let r=Ve(),i=du();if(qr(r,i,e)){let s=un(),o=q_();sA(s,o,r,t,e,r[wt],n,!1)}return ln}function IS(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";uy(t,n,s[o],o,r)}function qh(t,e,n){return TA(t,e,n,!1),qh}function Gh(t,e){return TA(t,e,null,!0),Gh}function TA(t,e,n,r){let i=Ve(),s=un(),o=SV(2);if(s.firstUpdatePass&&m2(s,t,o,r),e!==Li&&qr(i,o,e)){let a=s.data[na()];I2(s,a,i,i[wt],t,i[o+1]=E2(e,n),r,o)}}function g2(t,e){return e>=t.expandoStartIndex}function m2(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[na()],o=g2(t,n);C2(s,r)&&e===null&&!o&&(e=!1),e=_2(i,s,e,r),h2(i,s,e,n,o,r)}}function _2(t,e,n,r){let i=MV(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=jm(null,t,e,n,r),n=au(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=jm(i,t,e,n,r),s===null){let c=y2(t,e,r);c!==void 0&&Array.isArray(c)&&(c=jm(null,t,e,c[1],r),c=au(c,e.attrs,r),v2(t,e,r,c))}else s=w2(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function y2(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ea(r)!==0)return t[Es(r)]}function v2(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Es(i)]=r}function w2(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=au(r,o,n)}return au(r,e.attrs,n)}function jm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=au(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function au(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),PL(t,o,n?!0:e[++s]))}return t===void 0?null:t}function I2(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,l=c[a+1],d=d2(l)?ES(c,e,n,i,ea(l),o):void 0;if(!Ah(d)){Ah(s)||u2(l)&&(s=ES(c,null,n,i,a,o));let f=i0(na(),n);PU(r,o,f,i,s)}}function ES(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=n[i+1];g===Li&&(g=f?bn:void 0);let _=f?Mm(g,r):d===r?g:void 0;if(l&&!Ah(_)&&(_=Mm(c,r)),Ah(_)&&(a=_,o))return a;let w=t[i+1];i=o?Es(w):ea(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Mm(c,r))}return a}function Ah(t){return t!==void 0}function E2(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=cn(ny(t)))),t}function C2(t,e){return(t.flags&(e?8:16))!==0}function On(t,e){Rs("NgControlFlow");let n=Ve(),r=du(),i=n[r]!==Li?n[r]:-1,s=i!==-1?CS(n,Nn+i):void 0,o=0;if(qr(n,r,t)){let a=we(null);try{if(s!==void 0&&fj(s,o),t!==-1){let c=Nn+t,l=CS(n,c),d=T2(n[pe],c),f=__(l,d.tView.ssrId),g=dj(n,d,e,{dehydratedView:f});hA(l,g,o,g_(d,f))}}finally{we(a)}}else if(s!==void 0){let a=hj(s,o);a!==void 0&&(a[Rn]=e)}}function CS(t,e){return t[e]}function T2(t,e){return j_(t,e)}function D2(t,e,n,r,i,s){let o=e.consts,a=gh(o,i),c=jh(e,t,2,r,a);return oA(e,n,c,gh(o,s)),c.attrs!==null&&w_(c,c.attrs,!1),c.mergedAttrs!==null&&w_(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function K(t,e,n,r){let i=Ve(),s=un(),o=Nn+t,a=i[wt],c=s.firstCreatePass?D2(o,s,i,e,n,r):s.data[o],l=b2(s,i,c,a,e,t);i[o]=l;let d=U_(c);return lu(c,!0),Y0(a,l,c),!n2(c)&&G_()&&oy(s,i,l,c),yV()===0&&Is(l,i),vV(),d&&(nA(s,i,c),tA(s,c,i)),r!==null&&rA(i,c),K}function Q(){let t=yn();d0()?DV():(t=t.parent,lu(t,!1));let e=t;EV(e)&&CV(),wV();let n=un();return n.firstCreatePass&&(W_(n,t),XS(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&VV(e)&&IS(n,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&UV(e)&&IS(n,e,Ve(),e.stylesWithoutHost,!1),Q}function er(t,e,n,r){return K(t,e,n,r),Q(),er}var b2=(t,e,n,r,i,s)=>(z_(!0),H0(r,i,kV()));function zh(){return Ve()}var fs=void 0;function S2(t){let e=t,n=Math.floor(Math.abs(t)),r=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&r===0?1:5}var A2=["en",[["a","p"],["AM","PM"],fs],[["AM","PM"],fs,fs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],fs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],fs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",fs,"{1} 'at' {0}",fs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",S2],Bm={};function Fn(t){let e=R2(t),n=TS(e);if(n)return n;let r=e.split("-")[0];if(n=TS(r),n)return n;if(r==="en")return A2;throw new G(701,!1)}function TS(t){return t in Bm||(Bm[t]=Zc.ng&&Zc.ng.common&&Zc.ng.common.locales&&Zc.ng.common.locales[t]),Bm[t]}var ct=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(ct||{});function R2(t){return t.toLowerCase().replace(/_/g,"-")}var Rh="en-US";var N2=Rh;function M2(t){typeof t=="string"&&(N2=t.toLowerCase().replace(/_/g,"-"))}var x2=(t,e,n)=>{};function Jt(t,e,n,r){let i=Ve(),s=un(),o=yn();return DA(s,i,i[wt],o,t,e,r),Jt}function P2(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[dh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function DA(t,e,n,r,i,s,o){let a=U_(r),l=t.firstCreatePass&&oj(t),d=e[Rn],f=sj(e),g=!0;if(r.type&3||o){let R=xn(r,e),S=o?o(R):R,P=f.length,U=o?W=>o(Er(W[r.index])):r.index,$=null;if(!o&&a&&($=P2(t,e,i,r.index)),$!==null){let W=$.__ngLastListenerFn__||$;W.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,g=!1}else{s=bS(r,e,d,s),x2(R,i,s);let W=n.listen(S,i,s);f.push(s,W),l&&l.push(i,U,P,P+1)}}else s=bS(r,e,d,s);let _=r.outputs,w;if(g&&_!==null&&(w=_[i])){let R=w.length;if(R)for(let S=0;S<R;S+=2){let P=w[S],U=w[S+1],Oe=e[P][U].subscribe(s),J=f.length;f.push(s,Oe),l&&l.push(i,r.index,J,-(J+1))}}}function DS(t,e,n,r){let i=we(null);try{return yr(6,e,n),n(r)!==!1}catch(s){return dA(t,s),!1}finally{yr(7,e,n),we(i)}}function bS(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?ki(t.index,e):e;dy(o,5);let a=DS(e,n,r,s),c=i.__ngNextListenerFn__;for(;c;)a=DS(e,n,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function Rt(t=1){return PV(t)}function k2(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function re(t,e=""){let n=Ve(),r=un(),i=t+Nn,s=r.firstCreatePass?jh(r,i,1,e,null):r.data[i],o=O2(r,n,s,e,t);n[i]=o,G_()&&oy(r,n,o,s),lu(s,!1)}var O2=(t,e,n,r,i)=>(z_(!0),mU(e[wt],r));function fy(t){return Ct("",t,""),fy}function Ct(t,e,n){let r=Ve(),i=c2(r,t,e,n);return i!==Li&&aj(r,na(),i),Ct}function py(t,e,n){EA(e)&&(e=e());let r=Ve(),i=du();if(qr(r,i,e)){let s=un(),o=q_();sA(s,o,r,t,e,r[wt],n,!1)}return py}function bA(t,e){let n=EA(t);return n&&t.set(e),n}function gy(t,e){let n=Ve(),r=un(),i=yn();return DA(r,n,n[wt],i,t,e),gy}function F2(t,e,n){let r=un();if(r.firstCreatePass){let i=Mi(t);b_(n,r.data,r.blueprint,i,!0),b_(e,r.data,r.blueprint,i,!1)}}function b_(t,e,n,r,i){if(t=Yt(t),Array.isArray(t))for(let s=0;s<t.length;s++)b_(t[s],e,n,r,i);else{let s=un(),o=Ve(),a=yn(),c=zo(t)?t:Yt(t.provide),l=QS(t),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(zo(t)||!t.multi){let _=new ws(l,i,Pe),w=Hm(c,e,i?d:d+g,f);w===-1?(r_(vh(a,o),s,c),$m(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(_),o.push(_)):(n[w]=_,o[w]=_)}else{let _=Hm(c,e,d+g,f),w=Hm(c,e,d,d+g),R=_>=0&&n[_],S=w>=0&&n[w];if(i&&!S||!i&&!R){r_(vh(a,o),s,c);let P=U2(i?V2:L2,n.length,i,r,l);!i&&S&&(n[w].providerFactory=P),$m(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=SA(n[i?w:_],l,!i&&r);$m(s,t,_>-1?_:w,P)}!i&&r&&S&&n[w].componentProviders++}}}function $m(t,e,n,r){let i=zo(e),s=tV(e);if(i||s){let c=(s?Yt(e.useClass):e).prototype.ngOnDestroy;if(c){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(n);d===-1?l.push(n,[r,c]):l[d+1].push(r,c)}else l.push(n,c)}}}function SA(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Hm(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function L2(t,e,n,r){return S_(this.multi,[])}function V2(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Yo(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),S_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],S_(i,s);return s}function S_(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function U2(t,e,n,r,i){let s=new ws(t,n,Pe);return s.multi=[],s.index=e,s.componentProviders=0,SA(s,i,r&&!n),s}function Ns(t,e=[]){return n=>{n.providersResolver=(r,i)=>F2(r,i?i(t):t,e)}}var j2=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=zS(!1,n.type),i=r.length>0?hy([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(ee(An))})}}return t})();function Ln(t){Rs("NgStandalone"),t.getStandaloneInjector=e=>e.get(j2).getOrCreateStandaloneInjector(t)}function ia(t,e,n,r){return B2(Ve(),f0(),t,e,n,r)}function AA(t,e){let n=t[e];return n===Li?void 0:n}function B2(t,e,n,r,i,s){let o=e+n;return qr(t,o,i)?CA(t,o+1,s?r.call(s,i):r(i)):AA(t,o+1)}function $2(t,e,n,r,i,s,o){let a=e+n;return t2(t,a,i,s)?CA(t,a+2,o?r.call(o,i,s):r(i,s)):AA(t,a+2)}function sa(t,e){let n=un(),r,i=t+Nn;n.firstCreatePass?(r=H2(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=gs(r.type,!0)),o,a=an(Pe);try{let c=yh(!1),l=s();return yh(c),k2(n,Ve(),i,l),l}finally{an(a)}}function H2(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function oa(t,e,n,r){let i=t+Nn,s=Ve(),o=pV(s,i);return q2(s,i)?$2(s,f0(),e,o.transform,n,r,o):o.transform(n,r)}function q2(t,e){return t[pe].data[e].pure}var Gr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},RA=new Gr("18.2.13");var Wh=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var NA=new V("");function Ms(t){return!!t&&typeof t.then=="function"}function MA(t){return!!t&&typeof t.subscribe=="function"}var Vi=new V(""),xA=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=x(Vi,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Ms(s))n.push(s);else if(MA(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),my=new V("");function G2(){mb(()=>{throw new G(600,!1)})}function z2(t){return t.isBoundToModule}var W2=10;function K2(t,e,n){try{let r=n();return Ms(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var xs=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(iU),this.afterRenderManager=x(a2),this.zonelessEnabled=x($h),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new Ye,this.afterTick=new Ye,this.componentTypes=[],this.components=[],this.isStable=x(Ss).hasPendingTasks.pipe(Y(n=>!n)),this._injector=x(An)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Dh;if(!this._injector.get(xA).done){let g=!i&&$S(n),_=!1;throw new G(405,_)}let o;i?o=n:o=this._injector.get(xi).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=z2(o)?void 0:this._injector.get(Pi),c=r||o.selector,l=o.create(_e.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(NA,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),ih(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new G(101,!1);let n=we(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,we(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Xo,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<W2;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)Q2(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Fh(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ih(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(my,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ih(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new G(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function ih(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Q2(t,e,n,r){if(!n&&!Fh(t))return;gA(t,e,n&&!r?0:1)}var A_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},_y=(()=>{class t{compileModuleSync(n){return new C_(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=HS(n),s=$0(i.declarations).reduce((o,a)=>{let c=ms(a);return c&&o.push(new su(c)),o},[]);return new A_(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var Y2=(()=>{class t{constructor(){this.zone=x(X),this.changeDetectionScheduler=x(Jo),this.applicationRef=x(xs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Z2=new V("",{factory:()=>!1});function PA({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new X(ge(F({},OA()),{scheduleInRootZone:n})),[{provide:X,useFactory:t},{provide:Go,multi:!0,useFactory:()=>{let r=x(Y2,{optional:!0});return()=>r.initialize()}},{provide:Go,multi:!0,useFactory:()=>{let r=x(J2);return()=>{r.initialize()}}},e===!0?{provide:vA,useValue:!0}:[],{provide:wA,useValue:n??x0}]}function kA(t){let e=t?.ignoreChangesOutsideZone,n=t?.scheduleInRootZone,r=PA({ngZoneFactory:()=>{let i=OA(t);return i.scheduleInRootZone=n,i.shouldCoalesceEventChangeDetection&&Rs("NgZone_CoalesceEvent"),new X(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:n});return Be([{provide:Z2,useValue:!0},{provide:$h,useValue:!1},r])}function OA(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var J2=(()=>{class t{constructor(){this.subscription=new tt,this.initialized=!1,this.zone=x(X),this.pendingTasks=x(Ss)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{X.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{X.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var X2=(()=>{class t{constructor(){this.appRef=x(xs),this.taskService=x(Ss),this.ngZone=x(X),this.zonelessEnabled=x($h),this.disableScheduling=x(vA,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new tt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ih):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(wA,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof c_||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?cS:P0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ih+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,cS(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function eB(){return typeof $localize<"u"&&$localize.locale||Rh}var Kh=new V("",{providedIn:"root",factory:()=>x(Kh,fe.Optional|fe.SkipSelf)||eB()});var R_=new V("");function Xd(t){return!t.moduleRef}function tB(t){let e=Xd(t)?t.r3Injector:t.moduleRef.injector,n=e.get(X);return n.run(()=>{Xd(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Cr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),Xd(t)){let s=()=>e.destroy(),o=t.platformInjector.get(R_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(R_);o.add(s),t.moduleRef.onDestroy(()=>{ih(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return K2(r,n,()=>{let s=e.get(xA);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(Kh,Rh);if(M2(o||Rh),Xd(t)){let a=e.get(xs);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return nB(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function nB(t,e){let n=t.injector.get(xs);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new G(-403,!1);e.push(t)}var sh=null;function rB(t=[],e){return _e.create({name:e,providers:[{provide:xh,useValue:"platform"},{provide:R_,useValue:new Set([()=>sh=null])},...t]})}function iB(t=[]){if(sh)return sh;let e=rB(t);return sh=e,G2(),sB(e),e}function sB(t){t.get(X_,null)?.forEach(n=>n())}var Ui=(()=>{class t{static{this.__NG_ELEMENT_ID__=oB}}return t})();function oB(t){return aB(yn(),Ve(),(t&16)===16)}function aB(t,e,n){if(Oh(t)&&!n){let r=ki(t.index,e);return new Zo(r,r)}else if(t.type&175){let r=e[Ir];return new Zo(r,e)}return null}function FA(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=iB(r),s=[PA({}),{provide:Jo,useExisting:X2},...n||[]],o=new Sh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return tB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function fu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Zr(t,e){Rs("NgSignals");let n=fb(t);return e?.equal&&(n[pr].equal=e.equal),n}function Vn(t){let e=we(null);try{return t()}finally{we(e)}}var cB=new V("",{providedIn:"root",factory:()=>x(uB)}),uB=(()=>{class t{static{this.\u0275prov=H({token:t,providedIn:"root",factory:()=>new N_})}}return t})(),N_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=x(Ss),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},M_=class{constructor(e,n,r,i,s,o){this.scheduler=e,this.effectFn=n,this.creationZone=r,this.injector=s,this.watcher=wb(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Cr,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function yy(t,e){Rs("NgSignals"),!e?.injector&&Ph(yy);let n=e?.injector??x(_e),r=e?.manualCleanup!==!0?n.get(ra):null,i=new M_(n.get(cB),t,typeof Zone>"u"?null:Zone.current,r,n,e?.allowSignalWrites??!1),s=n.get(Ui,null,{optional:!0});return!s||!(s._lView[ne]&8)?i.watcher.notify():(s._lView[th]??=[]).push(i.watcher.notify),i}var BA=null;function ei(){return BA}function $A(t){BA??=t}var rf=class{};var jn=new V(""),HA=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(hB),providedIn:"platform"})}}return t})();var hB=(()=>{class t extends HA{constructor(){super(),this._doc=x(jn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ei().getBaseHref(this._doc)}onPopState(n){let r=ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ei().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function qA(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function LA(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ps(t){return t&&t[0]!=="?"?"?"+t:t}var af=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(GA),providedIn:"root"})}}return t})(),fB=new V(""),GA=(()=>{class t extends af{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(jn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return qA(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ps(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ps(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ps(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(ee(HA),ee(fB,8))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var pu=(()=>{class t{constructor(n){this._subject=new ht,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=mB(LA(VA(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ps(r))}normalize(n){return t.stripTrailingSlash(gB(this._basePath,VA(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ps(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ps(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ps}static{this.joinWithSlash=qA}static{this.stripTrailingSlash=LA}static{this.\u0275fac=function(r){return new(r||t)(ee(af))}}static{this.\u0275prov=H({token:t,factory:()=>pB(),providedIn:"root"})}}return t})();function pB(){return new pu(ee(af))}function gB(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function VA(t){return t.replace(/\/index.html$/,"")}function mB(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Xt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Xt||{}),Ue=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(Ue||{}),vn=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(vn||{}),ji={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function _B(t){return Fn(t)[ct.LocaleId]}function yB(t,e,n){let r=Fn(t),i=[r[ct.DayPeriodsFormat],r[ct.DayPeriodsStandalone]],s=Un(i,e);return Un(s,n)}function vB(t,e,n){let r=Fn(t),i=[r[ct.DaysFormat],r[ct.DaysStandalone]],s=Un(i,e);return Un(s,n)}function wB(t,e,n){let r=Fn(t),i=[r[ct.MonthsFormat],r[ct.MonthsStandalone]],s=Un(i,e);return Un(s,n)}function IB(t,e){let r=Fn(t)[ct.Eras];return Un(r,e)}function Qh(t,e){let n=Fn(t);return Un(n[ct.DateFormat],e)}function Yh(t,e){let n=Fn(t);return Un(n[ct.TimeFormat],e)}function Zh(t,e){let r=Fn(t)[ct.DateTimeFormat];return Un(r,e)}function cf(t,e){let n=Fn(t),r=n[ct.NumberSymbols][e];if(typeof r>"u"){if(e===ji.CurrencyDecimal)return n[ct.NumberSymbols][ji.Decimal];if(e===ji.CurrencyGroup)return n[ct.NumberSymbols][ji.Group]}return r}function zA(t){if(!t[ct.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[ct.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function EB(t){let e=Fn(t);return zA(e),(e[ct.ExtraData][2]||[]).map(r=>typeof r=="string"?vy(r):[vy(r[0]),vy(r[1])])}function CB(t,e,n){let r=Fn(t);zA(r);let i=[r[ct.ExtraData][0],r[ct.ExtraData][1]],s=Un(i,e)||[];return Un(s,n)||[]}function Un(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function vy(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var TB=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Jh={},DB=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Xr=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Xr||{}),Ne=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ne||{}),Re=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(Re||{});function bB(t,e,n,r){let i=OB(t);e=Jr(n,e)||e;let o=[],a;for(;e;)if(a=DB.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=KA(r,c),i=kB(i,r,!0));let l="";return o.forEach(d=>{let f=xB(d);l+=f?f(i,n,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function sf(t,e,n){let r=new Date(0);return r.setFullYear(t,e,n),r.setHours(0,0,0),r}function Jr(t,e){let n=_B(t);if(Jh[n]??={},Jh[n][e])return Jh[n][e];let r="";switch(e){case"shortDate":r=Qh(t,vn.Short);break;case"mediumDate":r=Qh(t,vn.Medium);break;case"longDate":r=Qh(t,vn.Long);break;case"fullDate":r=Qh(t,vn.Full);break;case"shortTime":r=Yh(t,vn.Short);break;case"mediumTime":r=Yh(t,vn.Medium);break;case"longTime":r=Yh(t,vn.Long);break;case"fullTime":r=Yh(t,vn.Full);break;case"short":let i=Jr(t,"shortTime"),s=Jr(t,"shortDate");r=Xh(Zh(t,vn.Short),[i,s]);break;case"medium":let o=Jr(t,"mediumTime"),a=Jr(t,"mediumDate");r=Xh(Zh(t,vn.Medium),[o,a]);break;case"long":let c=Jr(t,"longTime"),l=Jr(t,"longDate");r=Xh(Zh(t,vn.Long),[c,l]);break;case"full":let d=Jr(t,"fullTime"),f=Jr(t,"fullDate");r=Xh(Zh(t,vn.Full),[d,f]);break}return r&&(Jh[n][e]=r),r}function Xh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,r){return e!=null&&r in e?e[r]:n})),t}function tr(t,e,n="-",r,i){let s="";(t<0||i&&t<=0)&&(i?t=-t+1:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function SB(t,e){return tr(t,3).substring(0,e)}function ft(t,e,n=0,r=!1,i=!1){return function(s,o){let a=AB(t,s);if((n>0||a>-n)&&(a+=n),t===Ne.Hours)a===0&&n===-12&&(a=12);else if(t===Ne.FractionalSeconds)return SB(a,e);let c=cf(o,ji.MinusSign);return tr(a,e,c,r,i)}}function AB(t,e){switch(t){case Ne.FullYear:return e.getFullYear();case Ne.Month:return e.getMonth();case Ne.Date:return e.getDate();case Ne.Hours:return e.getHours();case Ne.Minutes:return e.getMinutes();case Ne.Seconds:return e.getSeconds();case Ne.FractionalSeconds:return e.getMilliseconds();case Ne.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function $e(t,e,n=Xt.Format,r=!1){return function(i,s){return RB(i,s,t,e,n,r)}}function RB(t,e,n,r,i,s){switch(n){case Re.Months:return wB(e,i,r)[t.getMonth()];case Re.Days:return vB(e,i,r)[t.getDay()];case Re.DayPeriods:let o=t.getHours(),a=t.getMinutes();if(s){let l=EB(e),d=CB(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[_,w]=g,R=o>=_.hours&&a>=_.minutes,S=o<w.hours||o===w.hours&&a<w.minutes;if(_.hours<w.hours){if(R&&S)return!0}else if(R||S)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return yB(e,i,r)[o<12?0:1];case Re.Eras:return IB(e,r)[t.getFullYear()<=0?0:1];default:let c=n;throw new Error(`unexpected translation type ${c}`)}}function ef(t){return function(e,n,r){let i=-1*r,s=cf(n,ji.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(t){case Xr.Short:return(i>=0?"+":"")+tr(o,2,s)+tr(Math.abs(i%60),2,s);case Xr.ShortGMT:return"GMT"+(i>=0?"+":"")+tr(o,1,s);case Xr.Long:return"GMT"+(i>=0?"+":"")+tr(o,2,s)+":"+tr(Math.abs(i%60),2,s);case Xr.Extended:return r===0?"Z":(i>=0?"+":"")+tr(o,2,s)+":"+tr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}var NB=0,nf=4;function MB(t){let e=sf(t,NB,1).getDay();return sf(t,0,1+(e<=nf?nf:nf+7)-e)}function WA(t){let e=t.getDay(),n=e===0?-3:nf-e;return sf(t.getFullYear(),t.getMonth(),t.getDate()+n)}function wy(t,e=!1){return function(n,r){let i;if(e){let s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();i=1+Math.floor((o+s)/7)}else{let s=WA(n),o=MB(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return tr(i,t,cf(r,ji.MinusSign))}}function tf(t,e=!1){return function(n,r){let s=WA(n).getFullYear();return tr(s,t,cf(r,ji.MinusSign),e)}}var Iy={};function xB(t){if(Iy[t])return Iy[t];let e;switch(t){case"G":case"GG":case"GGG":e=$e(Re.Eras,Ue.Abbreviated);break;case"GGGG":e=$e(Re.Eras,Ue.Wide);break;case"GGGGG":e=$e(Re.Eras,Ue.Narrow);break;case"y":e=ft(Ne.FullYear,1,0,!1,!0);break;case"yy":e=ft(Ne.FullYear,2,0,!0,!0);break;case"yyy":e=ft(Ne.FullYear,3,0,!1,!0);break;case"yyyy":e=ft(Ne.FullYear,4,0,!1,!0);break;case"Y":e=tf(1);break;case"YY":e=tf(2,!0);break;case"YYY":e=tf(3);break;case"YYYY":e=tf(4);break;case"M":case"L":e=ft(Ne.Month,1,1);break;case"MM":case"LL":e=ft(Ne.Month,2,1);break;case"MMM":e=$e(Re.Months,Ue.Abbreviated);break;case"MMMM":e=$e(Re.Months,Ue.Wide);break;case"MMMMM":e=$e(Re.Months,Ue.Narrow);break;case"LLL":e=$e(Re.Months,Ue.Abbreviated,Xt.Standalone);break;case"LLLL":e=$e(Re.Months,Ue.Wide,Xt.Standalone);break;case"LLLLL":e=$e(Re.Months,Ue.Narrow,Xt.Standalone);break;case"w":e=wy(1);break;case"ww":e=wy(2);break;case"W":e=wy(1,!0);break;case"d":e=ft(Ne.Date,1);break;case"dd":e=ft(Ne.Date,2);break;case"c":case"cc":e=ft(Ne.Day,1);break;case"ccc":e=$e(Re.Days,Ue.Abbreviated,Xt.Standalone);break;case"cccc":e=$e(Re.Days,Ue.Wide,Xt.Standalone);break;case"ccccc":e=$e(Re.Days,Ue.Narrow,Xt.Standalone);break;case"cccccc":e=$e(Re.Days,Ue.Short,Xt.Standalone);break;case"E":case"EE":case"EEE":e=$e(Re.Days,Ue.Abbreviated);break;case"EEEE":e=$e(Re.Days,Ue.Wide);break;case"EEEEE":e=$e(Re.Days,Ue.Narrow);break;case"EEEEEE":e=$e(Re.Days,Ue.Short);break;case"a":case"aa":case"aaa":e=$e(Re.DayPeriods,Ue.Abbreviated);break;case"aaaa":e=$e(Re.DayPeriods,Ue.Wide);break;case"aaaaa":e=$e(Re.DayPeriods,Ue.Narrow);break;case"b":case"bb":case"bbb":e=$e(Re.DayPeriods,Ue.Abbreviated,Xt.Standalone,!0);break;case"bbbb":e=$e(Re.DayPeriods,Ue.Wide,Xt.Standalone,!0);break;case"bbbbb":e=$e(Re.DayPeriods,Ue.Narrow,Xt.Standalone,!0);break;case"B":case"BB":case"BBB":e=$e(Re.DayPeriods,Ue.Abbreviated,Xt.Format,!0);break;case"BBBB":e=$e(Re.DayPeriods,Ue.Wide,Xt.Format,!0);break;case"BBBBB":e=$e(Re.DayPeriods,Ue.Narrow,Xt.Format,!0);break;case"h":e=ft(Ne.Hours,1,-12);break;case"hh":e=ft(Ne.Hours,2,-12);break;case"H":e=ft(Ne.Hours,1);break;case"HH":e=ft(Ne.Hours,2);break;case"m":e=ft(Ne.Minutes,1);break;case"mm":e=ft(Ne.Minutes,2);break;case"s":e=ft(Ne.Seconds,1);break;case"ss":e=ft(Ne.Seconds,2);break;case"S":e=ft(Ne.FractionalSeconds,1);break;case"SS":e=ft(Ne.FractionalSeconds,2);break;case"SSS":e=ft(Ne.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=ef(Xr.Short);break;case"ZZZZZ":e=ef(Xr.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=ef(Xr.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=ef(Xr.Long);break;default:return null}return Iy[t]=e,e}function KA(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function PB(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function kB(t,e,n){let r=n?-1:1,i=t.getTimezoneOffset(),s=KA(e,i);return PB(t,r*(s-i))}function OB(t){if(UA(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[i,s=1,o=1]=t.split("-").map(a=>+a);return sf(i,s-1,o)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let r;if(r=t.match(TB))return FB(r)}let e=new Date(t);if(!UA(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function FB(t){let e=new Date(0),n=0,r=0,i=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),r=Number(t[9]+t[11])),i.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let o=Number(t[4]||0)-n,a=Number(t[5]||0)-r,c=Number(t[6]||0),l=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return s.call(e,o,a,c,l),e}function UA(t){return t instanceof Date&&!isNaN(t.valueOf())}function QA(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Ey=/\s+/,jA=[],aa=(()=>{class t{constructor(n,r){this._ngEl=n,this._renderer=r,this.initialClasses=jA,this.stateMap=new Map}set klass(n){this.initialClasses=n!=null?n.trim().split(Ey):jA}set ngClass(n){this.rawClass=typeof n=="string"?n.trim().split(Ey):n}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let n=this.rawClass;if(Array.isArray(n)||n instanceof Set)for(let r of n)this._updateState(r,!0);else if(n!=null)for(let r of Object.keys(n))this._updateState(r,!!n[r]);this._applyStateDiff()}_updateState(n,r){let i=this.stateMap.get(n);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(n,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let n of this.stateMap){let r=n[0],i=n[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(n,r){n=n.trim(),n.length>0&&n.split(Ey).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||t)(Pe(Fi),Pe(As))}}static{this.\u0275dir=At({type:t,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return t})();function LB(t,e){return new G(2100,!1)}var VB="mediumDate",UB=new V(""),jB=new V(""),uf=(()=>{class t{constructor(n,r,i){this.locale=n,this.defaultTimezone=r,this.defaultOptions=i}transform(n,r,i,s){if(n==null||n===""||n!==n)return null;try{let o=r??this.defaultOptions?.dateFormat??VB,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return bB(n,o,s||this.locale,a)}catch(o){throw LB(t,o.message)}}static{this.\u0275fac=function(r){return new(r||t)(Pe(Kh,16),Pe(UB,24),Pe(jB,24))}}static{this.\u0275pipe=US({name:"date",type:t,pure:!0,standalone:!0})}}return t})();var Cy="browser",BB="server";function Ty(t){return t===Cy}function Dy(t){return t===BB}var of=class{};var Ay=class extends rf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ry=class t extends Ay{static makeCurrent(){$A(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=$B();return n==null?null:HB(n)}resetBaseElement(){gu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return QA(document.cookie,e)}},gu=null;function $B(){return gu=gu||document.querySelector("base"),gu?gu.getAttribute("href"):null}function HB(t){return new URL(t,document.baseURI).pathname}var qB=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Ny=new V(""),XA=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(ee(Ny),ee(X))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),lf=class{constructor(e){this._doc=e}},by="ng-app-id",eR=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Dy(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${by}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(by),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(by,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(ee(jn),ee(J_),ee(ey,8),ee(Jn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),Sy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},xy=/%COMP%/g,tR="%COMP%",GB=`_nghost-${tR}`,zB=`_ngcontent-${tR}`,WB=!0,KB=new V("",{providedIn:"root",factory:()=>WB});function QB(t){return zB.replace(xy,t)}function YB(t){return GB.replace(xy,t)}function nR(t,e){return e.map(n=>n.replace(xy,t))}var YA=(()=>{class t{constructor(n,r,i,s,o,a,c,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Dy(a),this.defaultRenderer=new mu(n,o,c,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===wr.ShadowDom&&(r=ge(F({},r),{encapsulation:wr.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof df?i.applyToHost(n):i instanceof _u&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case wr.Emulated:s=new df(c,l,r,this.appId,d,o,a,f);break;case wr.ShadowDom:return new My(c,l,n,r,o,a,this.nonce,f);default:s=new _u(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(ee(XA),ee(eR),ee(J_),ee(KB),ee(jn),ee(Jn),ee(X),ee(ey))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),mu=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Sy[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(ZA(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(ZA(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Sy[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Sy[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Hr.DashCase|Hr.Important)?e.style.setProperty(n,r,i&Hr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Hr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=ei().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function ZA(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var My=class extends mu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=nR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_u=class extends mu{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?nR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},df=class extends _u{constructor(e,n,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,n,r,s,o,a,c,l),this.contentAttr=QB(l),this.hostAttr=YB(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},ZB=(()=>{class t extends lf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(ee(jn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})(),JA=["alt","control","meta","shift"],JB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},e$=(()=>{class t extends lf{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ei().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),JA.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(n,r){let i=JB[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),JA.forEach(o=>{if(o!==i){let a=XB[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(ee(jn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac})}}return t})();function rR(t,e){return FA(F({rootComponent:t},t$(e)))}function t$(t){return{appProviders:[...o$,...t?.providers??[]],platformProviders:s$}}function n$(){Ry.makeCurrent()}function r$(){return new Cr}function i$(){return j0(document),document}var s$=[{provide:Jn,useValue:Cy},{provide:X_,useValue:n$,multi:!0},{provide:jn,useFactory:i$,deps:[]}];var o$=[{provide:xh,useValue:"root"},{provide:Cr,useFactory:r$,deps:[]},{provide:Ny,useClass:ZB,multi:!0,deps:[jn,X,Jn]},{provide:Ny,useClass:e$,multi:!0,deps:[jn]},YA,eR,XA,{provide:Xo,useExisting:YA},{provide:of,useClass:qB,deps:[]},[]];var hf=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(ee(jn))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var de="primary",Ou=Symbol("RouteTitle"),Ly=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function fa(t){return new Ly(t)}function a$(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function c$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Tr(t[n],e[n]))return!1;return!0}function Tr(t,e){let n=t?Vy(t):void 0,r=e?Vy(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!hR(t[i],e[i]))return!1;return!0}function Vy(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function hR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function fR(t){return t.length>0?t[t.length-1]:null}function Bi(t){return Tm(t)?t:Ms(t)?Ke(Promise.resolve(t)):Z(t)}var u$={exact:gR,subset:mR},pR={exact:l$,subset:d$,ignored:()=>!0};function sR(t,e,n){return u$[n.paths](t.root,e.root,n.matrixParams)&&pR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function l$(t,e){return Tr(t,e)}function gR(t,e,n){if(!Os(t.segments,e.segments)||!gf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!gR(t.children[r],e.children[r],n))return!1;return!0}function d$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>hR(t[n],e[n]))}function mR(t,e,n){return _R(t,e,e.segments,n)}function _R(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Os(i,n)||e.hasChildren()||!gf(i,n,r))}else if(t.segments.length===n.length){if(!Os(t.segments,n)||!gf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!mR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Os(t.segments,i)||!gf(t.segments,i,r)||!t.children[de]?!1:_R(t.children[de],e,s,r)}}function gf(t,e,n){return e.every((r,i)=>pR[n](t[i].parameters,r.parameters))}var ni=class{constructor(e=new Me([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=fa(this.queryParams),this._queryParamMap}toString(){return p$.serialize(this)}},Me=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mf(this)}},ks=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=fa(this.parameters),this._parameterMap}toString(){return vR(this)}};function h$(t,e){return Os(t,e)&&t.every((n,r)=>Tr(n.parameters,e[r].parameters))}function Os(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function f$(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===de&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==de&&(n=n.concat(e(i,r)))}),n}var uv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>new Tu,providedIn:"root"})}}return t})(),Tu=class{parse(e){let n=new jy(e);return new ni(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${yu(e.root,!0)}`,r=_$(e.queryParams),i=typeof e.fragment=="string"?`#${g$(e.fragment)}`:"";return`${n}${r}${i}`}},p$=new Tu;function mf(t){return t.segments.map(e=>vR(e)).join("/")}function yu(t,e){if(!t.hasChildren())return mf(t);if(e){let n=t.children[de]?yu(t.children[de],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==de&&r.push(`${i}:${yu(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=f$(t,(r,i)=>i===de?[yu(t.children[de],!1)]:[`${i}:${yu(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[de]!=null?`${mf(t)}/${n[0]}`:`${mf(t)}/(${n.join("//")})`}}function yR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ff(t){return yR(t).replace(/%3B/gi,";")}function g$(t){return encodeURI(t)}function Uy(t){return yR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _f(t){return decodeURIComponent(t)}function oR(t){return _f(t.replace(/\+/g,"%20"))}function vR(t){return`${Uy(t.path)}${m$(t.parameters)}`}function m$(t){return Object.entries(t).map(([e,n])=>`;${Uy(e)}=${Uy(n)}`).join("")}function _$(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${ff(n)}=${ff(i)}`).join("&"):`${ff(n)}=${ff(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var y$=/^[^\/()?;#]+/;function Py(t){let e=t.match(y$);return e?e[0]:""}var v$=/^[^\/()?;=#]+/;function w$(t){let e=t.match(v$);return e?e[0]:""}var I$=/^[^=?&#]+/;function E$(t){let e=t.match(I$);return e?e[0]:""}var C$=/^[^&#]+/;function T$(t){let e=t.match(C$);return e?e[0]:""}var jy=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Me([],{}):new Me([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[de]=new Me(e,n)),r}parseSegment(){let e=Py(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new ks(_f(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=w$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Py(this.remaining);i&&(r=i,this.capture(r))}e[_f(n)]=_f(r)}parseQueryParam(e){let n=E$(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=T$(this.remaining);o&&(r=o,this.capture(r))}let i=oR(n),s=oR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Py(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=de);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[de]:new Me([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function wR(t){return t.segments.length>0?new Me([],{[de]:t}):t}function IR(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=IR(i);if(r===de&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Me(t.segments,e);return D$(n)}function D$(t){if(t.numberOfChildren===1&&t.children[de]){let e=t.children[de];return new Me(t.segments.concat(e.segments),e.children)}return t}function Du(t){return t instanceof ni}function b$(t,e,n=null,r=null){let i=ER(t);return CR(i,e,n,r)}function ER(t){let e;function n(s){let o={};for(let c of s.children){let l=n(c);o[c.outlet]=l}let a=new Me(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=wR(r);return e??i}function CR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ky(i,i,i,n,r);let s=S$(e);if(s.toRoot())return ky(i,i,new Me([],{}),n,r);let o=A$(s,i,t),a=o.processChildren?Iu(o.segmentGroup,o.index,s.commands):DR(o.segmentGroup,o.index,s.commands);return ky(i,o.segmentGroup,a,n,r)}function yf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function bu(t){return typeof t=="object"&&t!=null&&t.outlets}function ky(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;t===e?o=n:o=TR(t,e,n);let a=wR(IR(o));return new ni(a,s,i)}function TR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=TR(s,e,n)}),new Me(t.segments,r)}var vf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&yf(r[0]))throw new G(4003,!1);let i=r.find(bu);if(i&&i!==fR(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S$(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new vf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new vf(n,e,r)}var la=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function A$(t,e,n){if(t.isAbsolute)return new la(e,!0,0);if(!n)return new la(e,!1,NaN);if(n.parent===null)return new la(n,!0,0);let r=yf(t.commands[0])?0:1,i=n.segments.length-1+r;return R$(n,i,t.numberOfDoubleDots)}function R$(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new la(r,!1,i-s)}function N$(t){return bu(t[0])?t[0].outlets:{[de]:t}}function DR(t,e,n){if(t??=new Me([],{}),t.segments.length===0&&t.hasChildren())return Iu(t,e,n);let r=M$(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Me(t.segments.slice(0,r.pathIndex),{});return s.children[de]=new Me(t.segments.slice(r.pathIndex),t.children),Iu(s,0,i)}else return r.match&&i.length===0?new Me(t.segments,{}):r.match&&!t.hasChildren()?By(t,e,n):r.match?Iu(t,0,i):By(t,e,n)}function Iu(t,e,n){if(n.length===0)return new Me(t.segments,{});{let r=N$(n),i={};if(Object.keys(r).some(s=>s!==de)&&t.children[de]&&t.numberOfChildren===1&&t.children[de].segments.length===0){let s=Iu(t.children[de],e,n);return new Me(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=DR(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Me(t.segments,i)}}function M$(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(bu(a))break;let c=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!cR(c,l,o))return s;r+=2}else{if(!cR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function By(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(bu(s)){let c=x$(s.outlets);return new Me(r,c)}if(i===0&&yf(n[0])){let c=t.segments[e];r.push(new ks(c.path,aR(n[0]))),i++;continue}let o=bu(s)?s.outlets[de]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&yf(a)?(r.push(new ks(o,aR(a))),i+=2):(r.push(new ks(o,{})),i++)}return new Me(r,{})}function x$(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=By(new Me([],{}),0,r))}),e}function aR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function cR(t,e,n){return t==n.path&&Tr(e,n.parameters)}var Eu="imperative",Nt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Nt||{}),Bn=class{constructor(e,n){this.id=e,this.url=n}},Su=class extends Bn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Nt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fs=class extends Bn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Nt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},In=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(In||{}),$y=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}($y||{}),ti=class extends Bn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Nt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ls=class extends Bn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Nt.NavigationSkipped}},Au=class extends Bn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Nt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wf=class extends Bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hy=class extends Bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qy=class extends Bn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Nt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gy=class extends Bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zy=class extends Bn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Nt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wy=class{constructor(e){this.route=e,this.type=Nt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ky=class{constructor(e){this.route=e,this.type=Nt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Qy=class{constructor(e){this.snapshot=e,this.type=Nt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yy=class{constructor(e){this.snapshot=e,this.type=Nt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zy=class{constructor(e){this.snapshot=e,this.type=Nt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ru=class{constructor(e){this.snapshot=e,this.type=Nt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Nu=class{},pa=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function P$(t,e){return t.providers&&!t._injector&&(t._injector=hy(t.providers,e,`Route: ${t.path}`)),t._injector??e}function nr(t){return t.outlet||de}function k$(t,e){let n=t.filter(r=>nr(r)===e);return n.push(...t.filter(r=>nr(r)!==e)),n}function Fu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Jy=class{get injector(){return Fu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Sf(this.rootInjector),this.attachRef=null}},Sf=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Jy(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(ee(An))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),If=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Xy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Xy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=ev(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return ev(e,this._root).map(n=>n.value)}};function Xy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Xy(t,n);if(r)return r}return null}function ev(t,e){if(t===e.value)return[e];for(let n of e.children){let r=ev(t,n);if(r.length)return r.unshift(e),r}return[]}var wn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ua(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ef=class extends If{constructor(e,n){super(e),this.snapshot=n,lv(this,e)}toString(){return this.snapshot.toString()}};function bR(t){let e=O$(t),n=new St([new ks("",{})]),r=new St({}),i=new St({}),s=new St({}),o=new St(""),a=new ga(n,r,s,o,i,de,t,e.root);return a.snapshot=e.root,new Ef(new wn(a,[]),e)}function O$(t){let e={},n={},r={},i="",s=new da([],e,r,i,n,de,t,null,{});return new Tf("",new wn(s,[]))}var ga=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Y(l=>l[Ou]))??Z(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Y(e=>fa(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Y(e=>fa(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Cf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&AR(i)&&(r.resolve[Ou]=i.title),r}var da=class{get title(){return this.data?.[Ou]}constructor(e,n,r,i,s,o,a,c,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fa(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fa(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Tf=class extends If{constructor(e,n){super(n),this.url=e,lv(this,n)}toString(){return SR(this._root)}};function lv(t,e){e.value._routerState=t,e.children.forEach(n=>lv(t,n))}function SR(t){let e=t.children.length>0?` { ${t.children.map(SR).join(", ")} } `:"";return`${t.value}${e}`}function Oy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Tr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Tr(e.params,n.params)||t.paramsSubject.next(n.params),c$(e.url,n.url)||t.urlSubject.next(n.url),Tr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function tv(t,e){let n=Tr(t.params,e.params)&&h$(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||tv(t.parent,e.parent))}function AR(t){return typeof t.title=="string"||t.title===null}var dv=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=de,this.activateEvents=new ht,this.deactivateEvents=new ht,this.attachEvents=new ht,this.detachEvents=new ht,this.parentContexts=x(Sf),this.location=x(Hh),this.changeDetector=x(Ui),this.inputBinder=x(hv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new nv(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=At({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yr]})}}return t})(),nv=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===ga?this.route:e===Sf?this.childContexts:this.parent.get(e,n)}},hv=new V("");function F$(t,e,n){let r=Mu(t,e._root,n?n._root:void 0);return new Ef(r,e)}function Mu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=L$(t,e,n);return new wn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Mu(t,a)),o}}let r=V$(e.value),i=e.children.map(s=>Mu(t,s));return new wn(r,i)}}function L$(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Mu(t,r,i);return Mu(t,r)})}function V$(t){return new ga(new St(t.url),new St(t.params),new St(t.queryParams),new St(t.fragment),new St(t.data),t.outlet,t.component,t)}var xu=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},RR="ngNavigationCancelingError";function Df(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=NR(!1,In.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function NR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[RR]=!0,n.cancellationCode=e,n}function U$(t){return MR(t)&&Du(t.url)}function MR(t){return!!t&&t[RR]}var j$=(t,e,n,r)=>Y(i=>(new rv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),rv=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Oy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ua(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ua(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ua(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ua(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ru(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Yy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(Oy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Oy(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},bf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ha=class{constructor(e,n){this.component=e,this.route=n}};function B$(t,e,n){let r=t._root,i=e?e._root:null;return vu(r,i,n,[r.value])}function $$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function _a(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!AS(t)?t:e.get(t):r}function vu(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ua(e);return t.children.forEach(o=>{H$(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Cu(a,n.getContext(o),i)),i}function H$(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=q$(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new bf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?vu(t,e,a?a.children:null,r,i):vu(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ha(a.outlet.component,o))}else o&&Cu(e,a,i),i.canActivateChecks.push(new bf(r)),s.component?vu(t,null,a?a.children:null,r,i):vu(t,null,n,r,i);return i}function q$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Os(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Os(t.url,e.url)||!Tr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tv(t,e)||!Tr(t.queryParams,e.queryParams);case"paramsChange":default:return!tv(t,e)}}function Cu(t,e,n){let r=ua(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Cu(o,e.children.getContext(s),n):Cu(o,null,n):Cu(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ha(e.outlet.component,i)):n.canDeactivateChecks.push(new ha(null,i)):n.canDeactivateChecks.push(new ha(null,i))}function Lu(t){return typeof t=="function"}function G$(t){return typeof t=="boolean"}function z$(t){return t&&Lu(t.canLoad)}function W$(t){return t&&Lu(t.canActivate)}function K$(t){return t&&Lu(t.canActivateChild)}function Q$(t){return t&&Lu(t.canDeactivate)}function Y$(t){return t&&Lu(t.canMatch)}function xR(t){return t instanceof Ur||t?.name==="EmptyError"}var pf=Symbol("INITIAL_VALUE");function ma(){return on(t=>gr(t.map(e=>e.pipe(Br(1),Vo(pf)))).pipe(Y(e=>{for(let n of e)if(n!==!0){if(n===pf)return pf;if(n===!1||Z$(n))return n}return!0}),Qt(e=>e!==pf),Br(1)))}function Z$(t){return Du(t)||t instanceof xu}function J$(t,e){return at(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Z(ge(F({},n),{guardsResult:!0})):X$(o,r,i,t).pipe(at(a=>a&&G$(a)?eH(r,s,t,e):Z(a)),Y(a=>ge(F({},n),{guardsResult:a})))})}function X$(t,e,n,r){return Ke(t).pipe(at(i=>sH(i.component,i.route,n,e,r)),mr(i=>i!==!0,!0))}function eH(t,e,n,r){return Ke(e).pipe(hs(i=>Fo(nH(i.route.parent,r),tH(i.route,r),iH(t,i.path,n),rH(t,i.route,n))),mr(i=>i!==!0,!0))}function tH(t,e){return t!==null&&e&&e(new Zy(t)),Z(!0)}function nH(t,e){return t!==null&&e&&e(new Qy(t)),Z(!0)}function rH(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(s=>Gd(()=>{let o=Fu(e)??n,a=_a(s,o),c=W$(a)?a.canActivate(e,t):Wr(o,()=>a(e,t));return Bi(c).pipe(mr())}));return Z(i).pipe(ma())}function iH(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>$$(o)).filter(o=>o!==null).map(o=>Gd(()=>{let a=o.guards.map(c=>{let l=Fu(o.node)??n,d=_a(c,l),f=K$(d)?d.canActivateChild(r,t):Wr(l,()=>d(r,t));return Bi(f).pipe(mr())});return Z(a).pipe(ma())}));return Z(s).pipe(ma())}function sH(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=Fu(e)??i,l=_a(a,c),d=Q$(l)?l.canDeactivate(t,e,n,r):Wr(c,()=>l(t,e,n,r));return Bi(d).pipe(mr())});return Z(o).pipe(ma())}function oH(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let s=i.map(o=>{let a=_a(o,t),c=z$(a)?a.canLoad(e,n):Wr(t,()=>a(e,n));return Bi(c)});return Z(s).pipe(ma(),PR(r))}function PR(t){return Dd(vt(e=>{if(typeof e!="boolean")throw Df(t,e)}),Y(e=>e===!0))}function aH(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let s=i.map(o=>{let a=_a(o,t),c=Y$(a)?a.canMatch(e,n):Wr(t,()=>a(e,n));return Bi(c)});return Z(s).pipe(ma(),PR(r))}var Pu=class{constructor(e){this.segmentGroup=e||null}},ku=class extends Error{constructor(e){super(),this.urlTree=e}};function ca(t){return Oo(new Pu(t))}function cH(t){return Oo(new G(4e3,!1))}function uH(t){return Oo(NR(!1,In.GuardRejected))}var iv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[de])return cH(`${e.redirectTo}`);i=i.children[de]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:_,data:w,title:R}=i,S=Wr(s,()=>a({params:_,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(S instanceof ni)throw new ku(S);n=S}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new ku(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ni(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Me(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},sv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lH(t,e,n,r,i){let s=kR(t,e,n);return s.matched?(r=P$(e,r),aH(r,e,n,i).pipe(Y(o=>o===!0?s:F({},sv)))):Z(s)}function kR(t,e,n){if(e.path==="**")return dH(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},sv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||a$)(n,t,e);if(!i)return F({},sv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function dH(t){return{matched:!0,parameters:t.length>0?fR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function uR(t,e,n,r){return n.length>0&&pH(t,n,r)?{segmentGroup:new Me(e,fH(r,new Me(n,t.children))),slicedSegments:[]}:n.length===0&&gH(t,n,r)?{segmentGroup:new Me(t.segments,hH(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Me(t.segments,t.children),slicedSegments:n}}function hH(t,e,n,r){let i={};for(let s of n)if(Af(t,e,s)&&!r[nr(s)]){let o=new Me([],{});i[nr(s)]=o}return F(F({},r),i)}function fH(t,e){let n={};n[de]=e;for(let r of t)if(r.path===""&&nr(r)!==de){let i=new Me([],{});n[nr(r)]=i}return n}function pH(t,e,n){return n.some(r=>Af(t,e,r)&&nr(r)!==de)}function gH(t,e,n){return n.some(r=>Af(t,e,r))}function Af(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function mH(t,e,n){return e.length===0&&!t.children[n]}var ov=class{};function _H(t,e,n,r,i,s,o="emptyOnly"){return new av(t,e,n,r,i,o,s).recognize()}var yH=31,av=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new iv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=uR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Y(({children:n,rootSnapshot:r})=>{let i=new wn(r,n),s=new Tf("",i),o=b$(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new da([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),de,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,de,n).pipe(Y(r=>({children:r,rootSnapshot:n})),Di(r=>{if(r instanceof ku)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pu?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(Y(o=>o instanceof wn?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Ke(s).pipe(hs(o=>{let a=r.children[o],c=k$(n,o);return this.processSegmentGroup(e,c,a,o,i)}),Qd((o,a)=>(o.push(...a),o)),bi(null),Nm(),at(o=>{if(o===null)return ca(r);let a=OR(o);return vH(a),Z(a)}))}processSegment(e,n,r,i,s,o,a){return Ke(n).pipe(hs(c=>this.processSegmentAgainstRoute(c._injector??e,n,c,r,i,s,o,a).pipe(Di(l=>{if(l instanceof Pu)return Z(null);throw l}))),mr(c=>!!c),Di(c=>{if(xR(c))return mH(r,i,s)?Z(new ov):ca(r);throw c}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,c){return nr(r)!==o&&(o===de||!Af(i,s,r))?ca(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,c):ca(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=kR(n,i,s);if(!c)return ca(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yH&&(this.allowRedirects=!1));let _=new da(s,l,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,lR(i),nr(i),i.component??i._loadedComponent??null,i,dR(i)),w=Cf(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(at(S=>this.processSegment(e,r,n,S.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=lH(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(on(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(on(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:_}=c,w=new da(g,f,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,lR(r),nr(r),r.component??r._loadedComponent??null,r,dR(r)),R=Cf(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:P}=uR(n,g,_,l);if(P.length===0&&S.hasChildren())return this.processChildren(d,l,S,w).pipe(Y($=>new wn(w,$)));if(l.length===0&&P.length===0)return Z(new wn(w,[]));let U=nr(r)===s;return this.processSegment(d,l,S,P,U?de:s,!0,w).pipe(Y($=>new wn(w,$ instanceof wn?[$]:[])))}))):ca(n)))}getChildConfig(e,n,r){return n.children?Z({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Z({routes:n._loadedRoutes,injector:n._loadedInjector}):oH(e,n,r,this.urlSerializer).pipe(at(i=>i?this.configLoader.loadChildren(e,n).pipe(vt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):uH(n))):Z({routes:[],injector:e})}};function vH(t){t.sort((e,n)=>e.value.outlet===de?-1:n.value.outlet===de?1:e.value.outlet.localeCompare(n.value.outlet))}function wH(t){let e=t.value.routeConfig;return e&&e.path===""}function OR(t){let e=[],n=new Set;for(let r of t){if(!wH(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=OR(r.children);e.push(new wn(r.value,i))}return e.filter(r=>!n.has(r))}function lR(t){return t.data||{}}function dR(t){return t.resolve||{}}function IH(t,e,n,r,i,s){return at(o=>_H(t,e,n,r,o.extractedUrl,i,s).pipe(Y(({state:a,tree:c})=>ge(F({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function EH(t,e){return at(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Z(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of FR(c))o.add(l);let a=0;return Ke(o).pipe(hs(c=>s.has(c)?CH(c,r,t,e):(c.data=Cf(c,c.parent,t).resolve,Z(void 0))),vt(()=>a++),Lo(1),at(c=>a===o.size?Z(n):mn))})}function FR(t){let e=t.children.map(n=>FR(n)).flat();return[t,...e]}function CH(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!AR(i)&&(s[Ou]=i.title),TH(s,t,e,r).pipe(Y(o=>(t._resolvedData=o,t.data=Cf(t,t.parent,n).resolve,null)))}function TH(t,e,n,r){let i=Vy(t);if(i.length===0)return Z({});let s={};return Ke(i).pipe(at(o=>DH(t[o],e,n,r).pipe(mr(),vt(a=>{if(a instanceof xu)throw Df(new Tu,a);s[o]=a}))),Lo(1),Am(s),Di(o=>xR(o)?mn:Oo(o)))}function DH(t,e,n,r){let i=Fu(e)??r,s=_a(t,i),o=s.resolve?s.resolve(e,n):Wr(i,()=>s(e,n));return Bi(o)}function Fy(t){return on(e=>{let n=t(e);return n?Ke(n).pipe(Y(()=>e)):Z(e)})}var LR=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===de);return r}getResolvedTitleForRoute(n){return n.data[Ou]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(bH),providedIn:"root"})}}return t})(),bH=(()=>{class t extends LR{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(ee(hf))}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),fv=new V("",{providedIn:"root",factory:()=>({})}),pv=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Mn({type:t,selectors:[["ng-component"]],standalone:!0,features:[Ln],decls:1,vars:0,template:function(r,i){r&1&&er(0,"router-outlet")},dependencies:[dv],encapsulation:2})}}return t})();function gv(t){let e=t.children&&t.children.map(gv),n=e?ge(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==de&&(n.component=pv),n}var mv=new V(""),SH=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(_y)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return Z(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=Bi(n.loadComponent()).pipe(Y(VR),vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Yc(()=>{this.componentLoaders.delete(n)})),i=new No(r,()=>new Ye).pipe(Ro());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=AH(r,this.compiler,n,this.onLoadEndListener).pipe(Yc(()=>{this.childrenLoaders.delete(r)})),o=new No(s,()=>new Ye).pipe(Ro());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function AH(t,e,n,r){return Bi(t.loadChildren()).pipe(Y(VR),at(i=>i instanceof ou||Array.isArray(i)?Z(i):Ke(e.compileModuleAsync(i))),Y(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(mv,[],{optional:!0,self:!0}).flat()),{routes:o.map(gv),injector:s}}))}function RH(t){return t&&typeof t=="object"&&"default"in t}function VR(t){return RH(t)?t.default:t}var _v=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(NH),providedIn:"root"})}}return t})(),NH=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),MH=new V("");var xH=new V(""),PH=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ye,this.transitionAbortSubject=new Ye,this.configLoader=x(SH),this.environmentInjector=x(An),this.urlSerializer=x(uv),this.rootContexts=x(Sf),this.location=x(pu),this.inputBindingEnabled=x(hv,{optional:!0})!==null,this.titleStrategy=x(LR),this.options=x(fv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(_v),this.createViewTransition=x(MH,{optional:!0}),this.navigationErrorHandler=x(xH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let n=i=>this.events.next(new Wy(i)),r=i=>this.events.next(new Ky(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(ge(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new St({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Eu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Qt(s=>s.id!==0),Y(s=>ge(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),on(s=>{let o=!1,a=!1;return Z(s).pipe(on(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",In.SupersededByNewNavigation),mn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ge(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Ls(c.id,this.urlSerializer.serialize(c.rawUrl),f,$y.IgnoredSameUrlNavigation)),c.resolve(!1),mn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Z(c).pipe(on(f=>{let g=this.transitions?.getValue();return this.events.next(new Su(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?mn:Promise.resolve(f)}),IH(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ge(F({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new wf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:_,restoredState:w,extras:R}=c,S=new Su(f,this.urlSerializer.serialize(g),_,w);this.events.next(S);let P=bR(this.rootComponentType).snapshot;return this.currentTransition=s=ge(F({},c),{targetSnapshot:P,urlAfterRedirects:g,extras:ge(F({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(s)}else{let f="";return this.events.next(new Ls(c.id,this.urlSerializer.serialize(c.extractedUrl),f,$y.IgnoredByUrlHandlingStrategy)),c.resolve(!1),mn}}),vt(c=>{let l=new Hy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Y(c=>(this.currentTransition=s=ge(F({},c),{guards:B$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),J$(this.environmentInjector,c=>this.events.next(c)),vt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Df(this.urlSerializer,c.guardsResult);let l=new qy(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Qt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",In.GuardRejected),!1)),Fy(c=>{if(c.guards.canActivateChecks.length)return Z(c).pipe(vt(l=>{let d=new Gy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),on(l=>{let d=!1;return Z(l).pipe(EH(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",In.NoDataFromResolver)}}))}),vt(l=>{let d=new zy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),Fy(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(vt(g=>{d.component=g}),Y(()=>{})));for(let g of d.children)f.push(...l(g));return f};return gr(l(c.targetSnapshot.root)).pipe(bi(null),Br(1))}),Fy(()=>this.afterPreactivation()),on(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?Ke(d).pipe(Y(()=>s)):Z(s)}),Y(c=>{let l=F$(n.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ge(F({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),vt(()=>{this.events.next(new Nu)}),j$(this.rootContexts,n.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Br(1),vt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fs(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),_r(this.transitionAbortSubject.pipe(vt(c=>{throw c}))),Yc(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",In.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Di(c=>{if(a=!0,MR(c))this.events.next(new ti(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),U$(c)?this.events.next(new pa(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Au(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=Wr(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof xu){let{message:f,cancellationCode:g}=Df(this.urlSerializer,d);this.events.next(new ti(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new pa(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=n.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return mn}))}))}cancelNavigationTransition(n,r,i){let s=new ti(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function kH(t){return t!==Eu}var OH=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(FH),providedIn:"root"})}}return t})(),cv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},FH=(()=>{class t extends cv{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Oi(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),UR=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:()=>x(LH),providedIn:"root"})}}return t})(),LH=(()=>{class t extends UR{constructor(){super(...arguments),this.location=x(pu),this.urlSerializer=x(uv),this.options=x(fv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(_v),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ni,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=bR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Su)this.stateMemento=this.createStateMemento();else if(n instanceof Ls)this.rawUrlTree=r.initialUrl;else if(n instanceof wf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Nu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof ti&&(n.code===In.GuardRejected||n.code===In.NoDataFromResolver)?this.restoreHistory(r):n instanceof Au?this.restoreHistory(r,!0):n instanceof Fs&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof ni?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Oi(t)))(i||t)}})()}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),wu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(wu||{});function VH(t,e){t.events.pipe(Qt(n=>n instanceof Fs||n instanceof ti||n instanceof Au||n instanceof Ls),Y(n=>n instanceof Fs||n instanceof Ls?wu.COMPLETE:(n instanceof ti?n.code===In.Redirect||n.code===In.SupersededByNewNavigation:!1)?wu.REDIRECTING:wu.FAILED),Qt(n=>n!==wu.REDIRECTING),Br(1)).subscribe(()=>{e()})}function UH(t){throw t}var jH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Rf=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(Wh),this.stateManager=x(UR),this.options=x(fv,{optional:!0})||{},this.pendingTasks=x(Ss),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(PH),this.urlSerializer=x(uv),this.location=x(pu),this.urlHandlingStrategy=x(_v),this._events=new Ye,this.errorHandler=this.options.errorHandler||UH,this.navigated=!1,this.routeReuseStrategy=x(OH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(mv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(hv,{optional:!0}),this.eventsSubscription=new tt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof ti&&r.code!==In.Redirect&&r.code!==In.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fs)this.navigated=!0;else if(r instanceof pa){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kH(i.source)},o);this.scheduleNavigation(a,Eu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}HH(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Eu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=F({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(gv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=ER(g)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),f=this.currentUrlTree.root}return CR(f,n,d,l??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Du(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Eu,null,r)}navigate(n,r={skipLocationChange:!1}){return $H(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},jH):r===!1?i=F({},BH):i=r,Du(n))return sR(this.currentUrlTree,n,i);let s=this.parseUrl(n);return sR(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return VH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function $H(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function HH(t){return!(t instanceof Nu)&&!(t instanceof pa)}var qH=new V("");function jR(t,...e){return Be([{provide:mv,multi:!0,useValue:t},[],{provide:ga,useFactory:GH,deps:[Rf]},{provide:my,multi:!0,useFactory:zH},e.map(n=>n.\u0275providers)])}function GH(t){return t.routerState.root}function zH(){let t=x(_e);return e=>{let n=t.get(xs);if(e!==n.components[0])return;let r=t.get(Rf),i=t.get(WH);t.get(KH)===1&&r.initialNavigation(),t.get(QH,null,fe.Optional)?.setUpPreloading(),t.get(qH,null,fe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var WH=new V("",{factory:()=>new Ye}),KH=new V("",{providedIn:"root",factory:()=>1});var QH=new V("");var BR=[];var ZH="firebase",JH="10.14.1";q(ZH,JH,"app");var Ge=new Gr("ANGULARFIRE2_VERSION"),va=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function pt(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ut=(t,e)=>{let n=e?[e]:fd(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},dn=class{constructor(){return ut(XH)}},XH="app-check";function ya(){}var Nf=class{zone;delegate;constructor(e,n=Em){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},yv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ya,{},ya,ya)),n.pipe(vt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},rt=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Nf(Zone.current)),this.insideAngular=n.run(()=>new Nf(Zone.current,ko)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(ee(X))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Mf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function eq(t){return Mf().ngZone.runOutsideAngular(()=>t())}function Vs(t){return Mf().ngZone.run(()=>t())}function tq(t){return nq(Mf())(t)}function nq(t){return function(n){return n=n.lift(new yv(t.ngZone)),n.pipe(Ti(t.outsideAngular),Ci(t.insideAngular))}}var rq=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Vs(()=>t.apply(void 0,r))},De=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Vs(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ya,{},ya,ya))),r[s]=rq(r[s],n));let i=eq(()=>t.apply(this,r));if(!e)if(i instanceof oe){let s=Mf();return i.pipe(Ti(s.outsideAngular),Ci(s.insideAngular))}else return Vs(()=>i);return i instanceof oe?i.pipe(tq):i instanceof Promise?Vs(()=>new Promise((s,o)=>i.then(a=>Vs(()=>s(a)),a=>Vs(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Vs(()=>i)};var ze=class{constructor(e){return e}},Ze=class{constructor(){return fd()}};function iq(t){return t&&t.length===1?t[0]:new ze(dt())}var vv=new V("angularfire2._apps"),sq={provide:ze,useFactory:iq,deps:[[new ie,vv]]},oq={provide:Ze,deps:[[new ie,vv]]};function aq(t){return(e,n)=>{let r=n.get(Jn);q("angularfire",Ge.full,"core"),q("angularfire",Ge.full,"app"),q("angular",RA.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new ze(i)}}function $R(t,...e){return Be([sq,oq,{provide:vv,useFactory:aq(t),multi:!0,deps:[X,_e,rt,...e]}])}var HR=De(nb,!0);function iN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sN=iN,oN=new dr("auth","Firebase",iN());var Lf=new fr("@firebase/auth");function cq(t,...e){Lf.logLevel<=Ft.WARN&&Lf.warn(`Auth (${rn}): ${t}`,...e)}function Pf(t,...e){Lf.logLevel<=Ft.ERROR&&Lf.error(`Auth (${rn}): ${t}`,...e)}function Hi(t,...e){throw Uv(t,...e)}function js(t,...e){return Uv(t,...e)}function aN(t,e,n){let r=Object.assign(Object.assign({},sN()),{[e]:n});return new dr("auth","Firebase",r).create(e,{appName:t.name})}function Us(t){return aN(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Uv(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oN.create(t,...e)}function se(t,e,...n){if(!t)throw Uv(e,...n)}function ri(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Pf(e),new Error(e)}function qi(t,e){t||ri(e)}function Cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function uq(){return qR()==="http:"||qR()==="https:"}function qR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function lq(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uq()||Oc()||"connection"in navigator)?navigator.onLine:!0}function dq(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Bs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,qi(n>e,"Short delay should be less than long delay!"),this.isMobile=kc()||ld()}get(){return lq()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function jv(t,e){qi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Vf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var hq={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var fq=new Bs(3e4,6e4);function Bv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function Ia(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){return cN(t,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=as(Object.assign({key:t.config.apiKey},d)).slice(1),g=yield t._getAdditionalHeaders();g["Content-Type"]="application/json",t.languageCode&&(g["X-Firebase-Locale"]=t.languageCode);let _=Object.assign({method:e,headers:g},l);return WD()||(_.referrerPolicy="no-referrer"),Vf.fetch()(uN(t,t.config.apiHost,n,f),_)}))})}function cN(t,e,n){return y(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},hq),e);try{let i=new Tv(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw xf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw xf(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw xf(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw xf(t,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw aN(t,d,l);Hi(t,d)}}catch(i){if(i instanceof nn)throw i;Hi(t,"network-request-failed",{message:String(i)})}})}function pq(s,o,a,c){return y(this,arguments,function*(t,e,n,r,i={}){let l=yield Ia(t,e,n,r,i);return"mfaPendingCredential"in l&&Hi(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function uN(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?jv(t.config,i):`${t.config.apiScheme}://${i}`}var Tv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(js(this.auth,"network-request-failed")),fq.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function xf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=js(t,e,r);return i.customData._tokenResponse=n,i}function gq(t,e){return y(this,null,function*(){return Ia(t,"POST","/v1/accounts:delete",e)})}function lN(t,e){return y(this,null,function*(){return Ia(t,"POST","/v1/accounts:lookup",e)})}function Vu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function $v(t,e=!1){return y(this,null,function*(){let n=ve(t),r=yield n.getIdToken(e),i=Hv(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Vu(wv(i.auth_time)),issuedAtTime:Vu(wv(i.iat)),expirationTime:Vu(wv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function wv(t){return Number(t)*1e3}function Hv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{let i=qD(n);return i?JSON.parse(i):(Pf("Failed to decode base64 JWT payload"),null)}catch(i){return Pf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function GR(t){let e=Hv(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ju(t,e,n=!1){return y(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof nn&&mq(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function mq({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Dv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),n)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Bu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vu(this.lastLoginAt),this.creationTime=Vu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Uf(t){return y(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield ju(t,lN(n,{idToken:r}));se(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dN(s.providerUserInfo):[],a=_q(t.providerData,o),c=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Bu(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,f)})}function qv(t){return y(this,null,function*(){let e=ve(t);yield Uf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function _q(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dN(t){return t.map(e=>{var{providerId:n}=e,r=Cm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function yq(t,e){return y(this,null,function*(){let n=yield cN(t,{},()=>y(this,null,function*(){let r=as({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=uN(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function vq(t,e){return y(this,null,function*(){return Ia(t,"POST","/v2/accounts:revokeToken",Bv(t,e))})}var Uu=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):GR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");let n=GR(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return y(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield yq(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ri("not implemented")}};function $i(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var wa=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Cm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Bu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let n=yield ju(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return $v(this,e)}reload(){return qv(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Uf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(Vr(this.auth.app))return Promise.reject(Us(this.auth));let e=yield this.getIdToken();return yield ju(this,gq(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,l,d;let f=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(i=n.email)!==null&&i!==void 0?i:void 0,_=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(a=n.tenantId)!==null&&a!==void 0?a:void 0,S=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,U=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:$,emailVerified:W,isAnonymous:Oe,providerData:J,stsTokenManager:C}=n;se($&&C,e,"internal-error");let v=Uu.fromJSON(this.name,C);se(typeof $=="string",e,"internal-error"),$i(f,e.name),$i(g,e.name),se(typeof W=="boolean",e,"internal-error"),se(typeof Oe=="boolean",e,"internal-error"),$i(_,e.name),$i(w,e.name),$i(R,e.name),$i(S,e.name),$i(P,e.name),$i(U,e.name);let I=new t({uid:$,auth:e,email:g,emailVerified:W,displayName:f,isAnonymous:Oe,photoURL:w,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:P,lastLoginAt:U});return J&&Array.isArray(J)&&(I.providerData=J.map(T=>Object.assign({},T))),S&&(I._redirectEventId=S),I}static _fromIdTokenResponse(e,n,r=!1){return y(this,null,function*(){let i=new Uu;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Uf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return y(this,null,function*(){let i=n.users[0];se(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?dN(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Uu;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Bu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var zR=new Map;function ii(t){qi(t instanceof Function,"Expected a class definition");let e=zR.get(t);return e?(qi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,zR.set(t,e),e)}var wq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(n,r){return y(this,null,function*(){this.storage[n]=r})}_get(n){return y(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return y(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),bv=wq;function kf(t,e,n){return`firebase:${t}:${e}:${n}`}var jf=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=kf(this.userKey,i.apiKey,s),this.fullPersistenceKey=kf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?wa._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return y(this,null,function*(){if(!n.length)return new t(ii(bv),e,r);let i=(yield Promise.all(n.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||ii(bv),o=kf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let d=yield l._get(o);if(d){let f=wa._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function WR(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(gN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_N(e))return"Blackberry";if(yN(e))return"Webos";if(fN(e))return"Safari";if((e.includes("chrome/")||pN(e))&&!e.includes("edge/"))return"Chrome";if(mN(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function hN(t=Ot()){return/firefox\//i.test(t)}function fN(t=Ot()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pN(t=Ot()){return/crios\//i.test(t)}function gN(t=Ot()){return/iemobile/i.test(t)}function mN(t=Ot()){return/android/i.test(t)}function _N(t=Ot()){return/blackberry/i.test(t)}function yN(t=Ot()){return/webos/i.test(t)}function Gv(t=Ot()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Iq(t=Ot()){var e;return Gv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Eq(){return KD()&&document.documentMode===10}function vN(t=Ot()){return Gv(t)||mN(t)||yN(t)||_N(t)||/windows phone/i.test(t)||gN(t)}function wN(t,e=[]){let n;switch(t){case"Browser":n=WR(Ot());break;case"Worker":n=`${WR(Ot())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${rn}/${r}`}var Sv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Cq(n){return y(this,arguments,function*(t,e={}){return Ia(t,"GET","/v2/passwordPolicy",Bv(t,e))})}var Tq=6,Av=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Tq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Rv=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bf(this),this.idTokenSubscription=new Bf(this),this.beforeStateQueue=new Sv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ii(n)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield jf.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let n=yield lN(this,{idToken:e}),r=yield wa._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var n;if(Vr(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield Uf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=dq()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(Vr(this.app))return Promise.reject(Us(this));let n=e?ve(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return y(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return Vr(this.app)?Promise.reject(Us(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Vr(this.app)?Promise.reject(Us(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(ii(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield Cq(this),n=new Av(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield vq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ii(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield jf.create(this,[ii(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return y(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&cq(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function zv(t){return ve(t)}var Bf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=XD(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Wv={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Dq(t){Wv=t}function bq(t){return Wv.loadJS(t)}function Sq(){return Wv.gapiScript}function IN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function Kv(t,e){let n=lt(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(Uc(s,e??{}))return i;Hi(i,"already-initialized")}return n.initialize({options:e})}function Aq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ii);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function Qv(t,e,n){let r=zv(t);se(r._canInitEmulator,r,"emulator-config-failed"),se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=EN(e),{host:o,port:a}=Rq(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Nq()}function EN(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rq(t){let e=EN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:KR(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:KR(o)}}}function KR(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function Nq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var $f=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,n){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}};function Iv(t,e){return y(this,null,function*(){return pq(t,"POST","/v1/accounts:signInWithIdp",Bv(t,e))})}var Hf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Nv=class extends Hf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var $u=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return y(this,null,function*(){let s=yield wa._fromIdTokenResponse(e,r,i),o=QR(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=QR(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function QR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var Mv=class t extends nn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function CN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mv._fromErrorAndOperation(t,s,e,r):s})}function Mq(t,e,n=!1){return y(this,null,function*(){let r=yield ju(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return $u._forOperation(t,"link",r)})}function xq(t,e,n=!1){return y(this,null,function*(){let{auth:r}=t;if(Vr(r.app))return Promise.reject(Us(r));let i="reauthenticate";try{let s=yield ju(t,CN(r,i,e,t),n);se(s.idToken,r,"internal-error");let o=Hv(s.idToken);se(o,r,"internal-error");let{sub:a}=o;return se(t.uid===a,r,"user-mismatch"),$u._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Hi(r,"user-mismatch"),s}})}function Pq(t,e,n=!1){return y(this,null,function*(){if(Vr(t.app))return Promise.reject(Us(t));let r="signIn",i=yield CN(t,r,e),s=yield $u._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function Kf(t,e,n,r){return ve(t).onIdTokenChanged(e,n,r)}function Yv(t,e,n){return ve(t).beforeAuthStateChanged(e,n)}function Qf(t,e,n,r){return ve(t).onAuthStateChanged(e,n,r)}var qf="__sak";var Gf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qf,"1"),this.storage.removeItem(qf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var kq=1e3,Oq=10,Fq=(()=>{class t extends Gf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=vN(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=n.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);Eq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,Oq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},kq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return y(this,null,function*(){yield wi(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return y(this,null,function*(){let r=yield wi(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return y(this,null,function*(){yield wi(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),TN=Fq;var Lq=(()=>{class t extends Gf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),Zv=Lq;function Vq(t){return Promise.all(t.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Uq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return y(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield Vq(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function DN(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var xv=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=DN("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Dr(){return window}function jq(t){Dr().location.href=t}function bN(){return typeof Dr().WorkerGlobalScope<"u"&&typeof Dr().importScripts=="function"}function Bq(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function $q(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Hq(){return bN()?self:null}var SN="firebaseLocalStorageDb",qq=1,zf="firebaseLocalStorage",AN="fbase_key",$s=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Yf(t,e){return t.transaction([zf],e?"readwrite":"readonly").objectStore(zf)}function Gq(){let t=indexedDB.deleteDatabase(SN);return new $s(t).toPromise()}function Pv(){let t=indexedDB.open(SN,qq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(zf,{keyPath:AN})}catch(i){n(i)}}),t.addEventListener("success",()=>y(this,null,function*(){let r=t.result;r.objectStoreNames.contains(zf)?e(r):(r.close(),yield Gq(),e(yield Pv()))}))})}function YR(t,e,n){return y(this,null,function*(){let r=Yf(t,!0).put({[AN]:e,value:n});return new $s(r).toPromise()})}function zq(t,e){return y(this,null,function*(){let n=Yf(t,!1).get(e),r=yield new $s(n).toPromise();return r===void 0?null:r.value})}function ZR(t,e){let n=Yf(t,!0).delete(e);return new $s(n).toPromise()}var Wq=800,Kq=3,Qq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield Pv(),this.db)})}_withRetries(n){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Kq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return bN()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=Uq._getInstance(Hq()),this.receiver._subscribe("keyChanged",(n,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var n,r;if(this.activeServiceWorker=yield Bq(),!this.activeServiceWorker)return;this.sender=new xv(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||$q()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Pv();return yield YR(n,qf,"1"),yield ZR(n,qf),!0}catch{}return!1})}_withPendingWrite(n){return y(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>YR(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return y(this,null,function*(){let r=yield this._withRetries(i=>zq(i,n));return this.localCache[n]=r,r})}_remove(n){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>ZR(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return y(this,null,function*(){let n=yield this._withRetries(s=>{let o=Yf(s,!1).getAll();return new $s(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),Wq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),RN=Qq;var zne=IN("rcb"),Wne=new Bs(3e4,6e4);function Yq(t,e){return e?ii(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Hu=class extends $f{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Iv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Iv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Iv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function Zq(t){return Pq(t.auth,new Hu(t),t.bypassAuthState)}function Jq(t){let{auth:e,user:n}=t;return se(n,e,"internal-error"),xq(n,new Hu(t),t.bypassAuthState)}function Xq(t){return y(this,null,function*(){let{auth:e,user:n}=t;return se(n,e,"internal-error"),Mq(n,new Hu(t),t.bypassAuthState)})}var kv=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zq;case"linkViaPopup":case"linkViaRedirect":return Xq;case"reauthViaPopup":case"reauthViaRedirect":return Jq;default:Hi(this.auth,"internal-error")}}resolve(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){qi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Kne=new Bs(2e3,1e4);var eG="pendingRedirect",Of=new Map,Ov=class t extends kv{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=Of.get(this.auth._key());if(!e){try{let r=(yield tG(this.resolver,this.auth))?yield wi(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Of.set(this.auth._key(),e)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return wi(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,wi(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function tG(t,e){return y(this,null,function*(){let n=iG(e),r=rG(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function nG(t,e){Of.set(t._key(),e)}function rG(t){return ii(t._redirectPersistence)}function iG(t){return kf(eG,t.config.apiKey,t.name)}function sG(t,e,n=!1){return y(this,null,function*(){if(Vr(t.app))return Promise.reject(Us(t));let r=zv(t),i=Yq(r,e),o=yield new Ov(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var oG=10*60*1e3,Fv=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!aG(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!NN(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(js(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oG&&this.cachedEventUids.clear(),this.cachedEventUids.has(JR(e))}saveEventToCache(e){this.cachedEventUids.add(JR(e)),this.lastProcessedEventTime=Date.now()}};function JR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function NN({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function aG(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NN(t);default:return!1}}function cG(n){return y(this,arguments,function*(t,e={}){return Ia(t,"GET","/v1/projects",e)})}var uG=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lG=/^https?/;function dG(t){return y(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield cG(t);for(let n of e)try{if(hG(n))return}catch{}Hi(t,"unauthorized-domain")})}function hG(t){let e=Cv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lG.test(n))return!1;if(uG.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var fG=new Bs(3e4,6e4);function XR(){let t=Dr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function pG(t){return new Promise((e,n)=>{var r,i,s;function o(){XR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{XR(),n(js(t,"network-request-failed"))},timeout:fG.get()})}if(!((i=(r=Dr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Dr().gapi)===null||s===void 0)&&s.load)o();else{let a=IN("iframefcb");return Dr()[a]=()=>{gapi.load?o():n(js(t,"network-request-failed"))},bq(`${Sq()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw Ff=null,e})}var Ff=null;function gG(t){return Ff=Ff||pG(t),Ff}var mG=new Bs(5e3,15e3),_G="__/auth/iframe",yG="emulator/auth/iframe",vG={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wG=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IG(t){let e=t.config;se(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?jv(e,yG):`https://${t.config.authDomain}/${_G}`,r={apiKey:e.apiKey,appName:t.name,v:rn},i=wG.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${as(r).slice(1)}`}function EG(t){return y(this,null,function*(){let e=yield gG(t),n=Dr().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:IG(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vG,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=js(t,"network-request-failed"),a=Dr().setTimeout(()=>{s(o)},mG.get());function c(){Dr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var CG={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TG=500,DG=600,bG="_blank",SG="http://localhost",Wf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function AG(t,e,n,r=TG,i=DG){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},CG),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ot().toLowerCase();n&&(a=pN(l)?bG:n),hN(l)&&(e=e||SG,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,w])=>`${g}${_}=${w},`,"");if(Iq(l)&&a!=="_self")return RG(e||"",a),new Wf(null);let f=window.open(e||"",a,d);se(f,t,"popup-blocked");try{f.focus()}catch{}return new Wf(f)}function RG(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var NG="__/auth/handler",MG="emulator/auth/handler",xG=encodeURIComponent("fac");function eN(t,e,n,r,i,s){return y(this,null,function*(){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:rn,eventId:i};if(e instanceof Hf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Lc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof Nv){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield t._getAppCheckToken(),l=c?`#${xG}=${encodeURIComponent(c)}`:"";return`${PG(t)}?${as(a).slice(1)}${l}`})}function PG({config:t}){return t.emulator?jv(t,MG):`https://${t.authDomain}/${NG}`}var Ev="webStorageSupport",Lv=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zv,this._completeRedirectFn=sG,this._overrideRedirectResult=nG}_openPopup(e,n,r,i){return y(this,null,function*(){var s;qi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield eN(e,n,r,Cv(),i);return AG(e,o,DN())})}_openRedirect(e,n,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield eN(e,n,r,Cv(),i);return jq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(qi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return y(this,null,function*(){let n=yield EG(e),r=new Fv(e);return n.register("authEvent",i=>(se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ev,{type:Ev},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ev];o!==void 0&&n(!!o),Hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=dG(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vN()||fN()||Gv()}},MN=Lv;var tN="@firebase/auth",nN="1.7.9";var Vv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function kG(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OG(t){ot(new st("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wN(t)},l=new Rv(r,i,s,c);return Aq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ot(new st("auth-internal",e=>{let n=zv(e.getProvider("auth").getImmediate());return(r=>new Vv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),q(tN,nN,kG(t)),q(tN,nN,"esm2017")}var FG=5*60,LG=om("authIdTokenMaxAge")||FG,rN=null,VG=t=>e=>y(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LG)return;let i=n?.token;rN!==i&&(rN=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Jv(t=dt()){let e=lt(t,"auth");if(e.isInitialized())return e.getImmediate();let n=Kv(t,{popupRedirectResolver:MN,persistence:[RN,TN,Zv]}),r=om("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=VG(s.toString());Yv(n,o,()=>o(n.currentUser)),Kf(n,a=>o(a))}}let i=zD("auth");return i&&Qv(n,`http://${i}`),n}function UG(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Dq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=js("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",UG().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OG("Browser");function PN(t){return new oe(function(e){var n=Qf(t,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:n}})}var kN="auth",Hs=class{constructor(e){return e}},rr=class{constructor(){return ut(kN)}};var Xv=new V("angularfire2.auth-instances");function Mz(t,e){let n=pt(kN,t,e);return n&&new Hs(n)}function xz(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Hs(r)}}var Pz={provide:rr,deps:[[new ie,Xv]]},kz={provide:Hs,useFactory:Mz,deps:[[new ie,Xv],ze]};function ON(t,...e){return q("angularfire",Ge.full,"auth"),Be([kz,Pz,{provide:Xv,useFactory:xz(t),multi:!0,deps:[X,_e,rt,Ze,[new ie,dn],...e]}])}var FN=De(PN,!0);var LN=De(Jv,!0);var Zf="analytics",Fz="firebase_id",Lz="origin",Vz=60*1e3,Uz="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ow="https://www.googletagmanager.com/gtag/js";var en=new fr("@firebase/analytics");var jz={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new dr("analytics","Analytics",jz);function Bz(t){if(!t.startsWith(ow)){let e=En.create("invalid-gtag-resource",{gtagURL:t});return en.warn(e.message),""}return t}function qN(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function $z(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Hz(t,e){let n=$z("firebase-js-sdk-policy",{createScriptURL:Bz}),r=document.createElement("script"),i=`${ow}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function qz(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}function Gz(t,e,n,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield qN(n)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){en.error(a)}t("config",i,s)})}function zz(t,e,n,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield qN(n);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),t("event",r,i||{})}catch(s){en.error(s)}})}function Wz(t,e,n,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield zz(t,e,n,a,c)}else if(s==="config"){let[a,c]=o;yield Gz(t,e,n,r,a,c)}else if(s==="consent"){let[a,c]=o;t("consent",a,c)}else if(s==="get"){let[a,c,l]=o;t("get",a,c,l)}else if(s==="set"){let[a]=o;t("set",a)}else t(s,...o)}catch(a){en.error(a)}})}return i}function Kz(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Wz(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Qz(t){let e=window.document.getElementsByTagName("script");for(let n of Object.values(e))if(n.src&&n.src.includes(ow)&&n.src.includes(t))return n;return null}var Yz=30,Zz=1e3,tw=class{constructor(e={},n=Zz){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},GN=new tw;function Jz(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Xz(t){return y(this,null,function*(){var e;let{appId:n,apiKey:r}=t,i={method:"GET",headers:Jz(r)},s=Uz.replace("{app-id}",n),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function eW(r){return y(this,arguments,function*(t,e=GN,n){let{appId:i,apiKey:s,measurementId:o}=t.options;if(!i)throw En.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw En.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new nw;return setTimeout(()=>y(this,null,function*(){c.abort()}),n!==void 0?n:Vz),zN({appId:i,apiKey:s,measurementId:o},a,c,e)})}function zN(s,o,a){return y(this,arguments,function*(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=GN){var c;let{appId:l,measurementId:d}=t;try{yield tW(r,e)}catch(f){if(d)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield Xz(t);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!nW(g)){if(i.deleteThrottleMetadata(l),d)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Bc(n,i.intervalMillis,Yz):Bc(n,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:n+1};return i.setThrottleMetadata(l,w),en.debug(`Calling attemptFetch again in ${_} millis`),zN(t,w,r,i)}})}function tW(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function nW(t){if(!(t instanceof nn)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var nw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var rw;function rW(t,e,n,r,i){return y(this,null,function*(){if(i&&i.global){t("event",n,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}})}function iW(t,e,n,r){return y(this,null,function*(){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{let i=yield e;t("config",i,{update:!0,user_id:n})}})}var iw;function sW(t){iw=t}function oW(t){rw=t}function aW(){return y(this,null,function*(){if(Lr())try{yield ss()}catch(t){return en.warn(En.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return en.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function cW(t,e,n,r,i,s,o){return y(this,null,function*(){var a;let c=eW(t);c.then(_=>{n[_.measurementId]=_.appId,t.options.measurementId&&_.measurementId!==t.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>en.error(_)),e.push(c);let l=aW().then(_=>{if(_)return r.getId()}),[d,f]=yield Promise.all([c,l]);Qz(s)||Hz(s,d.measurementId),iw&&(i("consent","default",iw),sW(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[Lz]="firebase",g.update=!0,f!=null&&(g[Fz]=f),i("config",d.measurementId,g),rw&&(i("set",rw),oW(void 0)),d.measurementId})}var sw=class{constructor(e){this.app=e}_delete(){return delete Ea[this.app.options.appId],Promise.resolve()}},Ea={},VN=[],UN={},ew="dataLayer",uW="gtag",jN,aw,BN=!1;function lW(){let t=[];if(Oc()&&t.push("This is a browser extension environment."),Fc()||t.push("Cookies are not available."),t.length>0){let e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});en.warn(n.message)}}function dW(t,e,n){lW();let r=t.options.appId;if(!r)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Ea[r]!=null)throw En.create("already-exists",{id:r});if(!BN){qz(ew);let{wrappedGtag:s,gtagCore:o}=Kz(Ea,VN,UN,ew,uW);aw=s,jN=o,BN=!0}return Ea[r]=cW(t,VN,UN,e,jN,ew,n),new sw(t)}function WN(t=dt()){t=ve(t);let e=lt(t,Zf);return e.isInitialized()?e.getImmediate():KN(t)}function KN(t,e={}){let n=lt(t,Zf);if(n.isInitialized()){let i=n.getImmediate();if(Uc(e,n.getOptions()))return i;throw En.create("already-initialized")}return n.initialize({options:e})}function QN(){return y(this,null,function*(){if(Oc()||!Fc()||!Lr())return!1;try{return yield ss()}catch{return!1}})}function YN(t,e,n){t=ve(t),iW(aw,Ea[t.app.options.appId],e,n).catch(r=>en.error(r))}function cw(t,e,n,r){t=ve(t),rW(aw,Ea[t.app.options.appId],e,n,r).catch(i=>en.error(i))}var $N="@firebase/analytics",HN="0.10.8";function hW(){ot(new st(Zf,(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return dW(r,i,n)},"PUBLIC")),ot(new st("analytics-internal",t,"PRIVATE")),q($N,HN),q($N,HN,"esm2017");function t(e){try{let n=e.getProvider(Zf).getImmediate();return{logEvent:(r,i,s)=>cw(n,r,i,s)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}hW();var qs=class{constructor(e){return e}},XN="analytics",lw=class{constructor(){return ut(XN)}};var dw="__angularfire_symbol__analyticsIsSupportedValue",eM="__angularfire_symbol__analyticsIsSupported";globalThis[eM]||=QN().then(t=>globalThis[dw]=t).catch(()=>globalThis[dw]=!1);var Jf={async:()=>globalThis[eM],sync:()=>{let t=globalThis[dw];if(t===void 0)throw new Error(va("Analytics"));return t}},tM=Jf.async,nM=De(WN,!0);var fW=De(cw,!0);var pW=De(YN,!0);var fw=(()=>{class t{initialized;disposables=[];constructor(n,r,i){q("angularfire",Ge.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),tM().then(()=>{let o=i.get(qs);o?this.disposables=[FN(n).subscribe(a=>{pW(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(n=>n.unsubscribe())}static \u0275fac=function(r){return new(r||t)(ee(Hs),ee(X),ee(_e))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),gW="firebase_event_origin",mW="firebase_previous_class",_W="firebase_previous_id",yW="firebase_previous_screen",vW="firebase_screen_class",ZN="firebase_screen_id",wW="firebase_screen",hw="outlet",IW="page_path",EW="page_title",qu="screen_class",JN="screen_name",CW="screen_view",TW="auto",DW="#",bW=Math.floor(Math.random()*(2**32-1))-2**31,uw={},SW=t=>{let e=[t[qu],t[hw]].join(DW);if(uw.hasOwnProperty(e))return uw[e];{let n=bW++;return uw[e]=n,n}},AW=(t,e,n)=>t.events.pipe(Qt(i=>i instanceof Ru)).pipe(on(i=>{let o=t.parseUrl(t.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=t.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return Z(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[JN]:l,[IW]:`/${o}`,[gW]:TW,[wW]:l,[hw]:i.snapshot.outlet};e&&(d[EW]=e.getTitle());let f=a.component;if(f){if(f===pv){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return Z(ge(F({},d),{[qu]:f}));if(f){let g=n.resolveComponentFactory(f);return Z(ge(F({},d),{[qu]:g.selector}))}return Z(null)}),Qt(i=>!!i),Y(i=>F({[vW]:i[qu],[ZN]:SW(i)},i)),Rm(i=>i[hw]),at(i=>i.pipe(zd((s,o)=>JSON.stringify(s)===JSON.stringify(o)),Vo(void 0),Kd(),Y(([s,o])=>s?F({[mW]:s[qu],[yW]:s[JN],[_W]:s[ZN]},o):o)))),rM=(()=>{class t{disposable;constructor(n,r,i,s,o,a){q("angularfire",Ge.full,"screen-tracking"),tM().then(()=>{let c=a.get(qs);!n||!c||s.runOutsideAngular(()=>{this.disposable=AW(n,r,i).pipe(on(l=>y(this,null,function*(){return o&&(yield o.initialized),fW(c,CW,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||t)(ee(Rf,8),ee(hf,8),ee(xi),ee(X),ee(fw,8),ee(_e))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),pw=new V("angularfire2.analytics-instances");function RW(t,e){if(!Jf.sync())return null;let n=pt(XN,t,e);return n&&new qs(n)}function NW(t){return(e,n)=>{if(!Jf.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new qs(r)}}var MW={provide:lw,deps:[[new ie,pw]]},xW={provide:qs,useFactory:RW,deps:[[new ie,pw],ze]};function iM(t,...e){return q("angularfire",Ge.full,"analytics"),Be([xW,MW,{provide:Vi,useValue:Jf.async,multi:!0},{provide:pw,useFactory:NW(t),multi:!0,deps:[X,_e,rt,Ze,...e]}])}var sM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oM={};var Gi,gw;(function(){var t;function e(C,v){function I(){}I.prototype=v.prototype,C.D=v.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(T,D,A){for(var E=Array(arguments.length-2),kr=2;kr<arguments.length;kr++)E[kr-2]=arguments[kr];return v.prototype[D].apply(T,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)T[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)T[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=C.g[0],I=C.g[1],D=C.g[2];var A=C.g[3],E=v+(A^I&(D^A))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=A+(D^v&(I^D))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=D+(I^A&(v^I))+T[2]+606105819&4294967295,D=A+(E<<17&4294967295|E>>>15),E=I+(v^D&(A^v))+T[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(A^I&(D^A))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(D^v&(I^D))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=D+(I^A&(v^I))+T[6]+2821735955&4294967295,D=A+(E<<17&4294967295|E>>>15),E=I+(v^D&(A^v))+T[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(A^I&(D^A))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(D^v&(I^D))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=D+(I^A&(v^I))+T[10]+4294925233&4294967295,D=A+(E<<17&4294967295|E>>>15),E=I+(v^D&(A^v))+T[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(A^I&(D^A))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(D^v&(I^D))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=D+(I^A&(v^I))+T[14]+2792965006&4294967295,D=A+(E<<17&4294967295|E>>>15),E=I+(v^D&(A^v))+T[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^A&(I^D))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^D&(v^I))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(A^v))+T[11]+643717713&4294967295,D=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(D^A))+T[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^A&(I^D))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^D&(v^I))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(A^v))+T[15]+3634488961&4294967295,D=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(D^A))+T[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^A&(I^D))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^D&(v^I))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(A^v))+T[3]+4107603335&4294967295,D=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(D^A))+T[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^A&(I^D))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^D&(v^I))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(A^v))+T[7]+1735328473&4294967295,D=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(D^A))+T[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^A)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^D)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=D+(A^v^I)+T[11]+1839030562&4294967295,D=A+(E<<16&4294967295|E>>>16),E=I+(D^A^v)+T[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^A)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^D)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=D+(A^v^I)+T[7]+4139469664&4294967295,D=A+(E<<16&4294967295|E>>>16),E=I+(D^A^v)+T[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^A)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^D)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=D+(A^v^I)+T[3]+3572445317&4294967295,D=A+(E<<16&4294967295|E>>>16),E=I+(D^A^v)+T[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^A)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^D)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=D+(A^v^I)+T[15]+530742520&4294967295,D=A+(E<<16&4294967295|E>>>16),E=I+(D^A^v)+T[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~A))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~D))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=D+(v^(A|~I))+T[14]+2878612391&4294967295,D=A+(E<<15&4294967295|E>>>17),E=I+(A^(D|~v))+T[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~A))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~D))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=D+(v^(A|~I))+T[10]+4293915773&4294967295,D=A+(E<<15&4294967295|E>>>17),E=I+(A^(D|~v))+T[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~A))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~D))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=D+(v^(A|~I))+T[6]+2734768916&4294967295,D=A+(E<<15&4294967295|E>>>17),E=I+(A^(D|~v))+T[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~A))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~D))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=D+(v^(A|~I))+T[2]+718787259&4294967295,D=A+(E<<15&4294967295|E>>>17),E=I+(A^(D|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var I=v-this.blockSize,T=this.B,D=this.h,A=0;A<v;){if(D==0)for(;A<=I;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(T[D++]=C.charCodeAt(A++),D==this.blockSize){i(this,T),D=0;break}}else for(;A<v;)if(T[D++]=C[A++],D==this.blockSize){i(this,T),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var I=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=I&255,I/=256;for(this.u(C),C=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)C[I++]=this.g[v]>>>T&255;return C};function s(C,v){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=v(C)}function o(C,v){this.h=v;for(var I=[],T=!0,D=C.length-1;0<=D;D--){var A=C[D]|0;T&&A==v||(I[D]=A,T=!1)}this.g=I}var a={};function c(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return S(l(-C));for(var v=[],I=1,T=0;C>=I;T++)v[T]=C/I|0,I*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return S(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=f,D=0;D<C.length;D+=8){var A=Math.min(8,C.length-D),E=parseInt(C.substring(D,D+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(I),T=T.add(l(E)))}return T}var f=c(0),g=c(1),_=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-S(this).m();for(var C=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(R(this))return"-"+S(this).toString(C);for(var v=l(Math.pow(C,6)),I=this,T="";;){var D=W(I,v).g;I=P(I,D.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,w(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}t.l=function(C){return C=P(this,C),R(C)?-1:w(C)?0:1};function S(C){for(var v=C.g.length,I=[],T=0;T<v;T++)I[T]=~C.g[T];return new o(I,~C.h).add(g)}t.abs=function(){return R(this)?S(this):this},t.add=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0,D=0;D<=v;D++){var A=T+(this.i(D)&65535)+(C.i(D)&65535),E=(A>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);T=E>>>16,A&=65535,E&=65535,I[D]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function P(C,v){return C.add(S(v))}t.j=function(C){if(w(this)||w(C))return f;if(R(this))return R(C)?S(this).j(S(C)):S(S(this).j(C));if(R(C))return S(this.j(S(C)));if(0>this.l(_)&&0>C.l(_))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var D=0;D<C.g.length;D++){var A=this.i(T)>>>16,E=this.i(T)&65535,kr=C.i(D)>>>16,gc=C.i(D)&65535;I[2*T+2*D]+=E*gc,U(I,2*T+2*D),I[2*T+2*D+1]+=A*gc,U(I,2*T+2*D+1),I[2*T+2*D+1]+=E*kr,U(I,2*T+2*D+1),I[2*T+2*D+2]+=A*kr,U(I,2*T+2*D+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function U(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function $(C,v){this.g=C,this.h=v}function W(C,v){if(w(v))throw Error("division by zero");if(w(C))return new $(f,f);if(R(C))return v=W(S(C),v),new $(S(v.g),S(v.h));if(R(v))return v=W(C,S(v)),new $(S(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(C);)I=Oe(I),T=Oe(T);var D=J(I,1),A=J(T,1);for(T=J(T,2),I=J(I,2);!w(T);){var E=A.add(T);0>=E.l(C)&&(D=D.add(I),A=E),T=J(T,1),I=J(I,1)}return v=P(C,D.j(v)),new $(D,v)}for(D=f;0<=C.l(v);){for(I=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),E=A.j(v);R(E)||0<E.l(C);)I-=T,A=l(I),E=A.j(v);w(A)&&(A=g),D=D.add(A),C=P(C,E)}return new $(D,C)}t.A=function(C){return W(this,C).h},t.and=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&C.i(T);return new o(I,this.h&C.h)},t.or=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|C.i(T);return new o(I,this.h|C.h)},t.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^C.i(T);return new o(I,this.h^C.h)};function Oe(C){for(var v=C.g.length+1,I=[],T=0;T<v;T++)I[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(I,C.h)}function J(C,v){var I=v>>5;v%=32;for(var T=C.g.length-I,D=[],A=0;A<T;A++)D[A]=0<v?C.i(A+I)>>>v|C.i(A+I+1)<<32-v:C.i(A+I);return new o(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,gw=oM.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,Gi=oM.Integer=o}).apply(typeof sM<"u"?sM:typeof self<"u"?self:typeof window<"u"?window:{});var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},si={};var mw,PW,Ca,_w,Gu,ep,yw,vw,ww;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xf=="object"&&Xf];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var b=u[m];if(!(b in p))break e;p=p[b]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,b={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return b[Symbol.iterator]=function(){return b},b}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(b,m),u.apply(h,b)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,b,N){for(var O=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)O[Fe-2]=arguments[Fe];return h.prototype[b].apply(m,O)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let b=u.length||0,N=m.length||0;u.length=b+N;for(let O=0;O<N;O++)u[b+O]=m[O]}else u.push(m)}}class P{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function U(u){return/^[\s\xa0]*$/.test(u)}function $(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function W(u){return W[" "](u),u}W[" "]=function(){};var Oe=$().indexOf("Gecko")!=-1&&!($().toLowerCase().indexOf("webkit")!=-1&&$().indexOf("Edge")==-1)&&!($().indexOf("Trident")!=-1||$().indexOf("MSIE")!=-1)&&$().indexOf("Edge")==-1;function J(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(p in m)u[p]=m[p];for(let N=0;N<I.length;N++)p=I[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function D(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=Og;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class kr{constructor(){this.h=this.g=null}add(h,p){let m=gc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var gc=new P(()=>new eF,u=>u.reset());class eF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let mc,_c=!1,Og=new kr,BT=()=>{let u=a.Promise.resolve(void 0);mc=()=>{u.then(tF)}};var tF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=gc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}_c=!1};function mi(){this.s=this.s,this.C=this.C}mi.prototype.s=!1,mi.prototype.ma=function(){this.s||(this.s=!0,this.N())},mi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Mt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Mt.prototype.h=function(){this.defaultPrevented=!0};var nF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function yc(u,h){if(Mt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(Oe){e:{try{W(h.nodeName);var b=!0;break e}catch{}b=!1}b||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:rF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&yc.aa.h.call(this)}}w(yc,Mt);var rF={2:"touch",3:"pen",4:"mouse"};yc.prototype.h=function(){yc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var vc="closure_listenable_"+(1e6*Math.random()|0),iF=0;function sF(u,h,p,m,b){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=b,this.key=++iF,this.da=this.fa=!1}function Wl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Kl(u){this.src=u,this.g={},this.h=0}Kl.prototype.add=function(u,h,p,m,b){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var O=Lg(u,h,m,b);return-1<O?(h=u[O],p||(h.fa=!1)):(h=new sF(h,this.src,N,!!m,b),h.fa=p,u.push(h)),h};function Fg(u,h){var p=h.type;if(p in u.g){var m=u.g[p],b=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=b)&&Array.prototype.splice.call(m,b,1),N&&(Wl(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Lg(u,h,p,m){for(var b=0;b<u.length;++b){var N=u[b];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return b}return-1}var Vg="closure_lm_"+(1e6*Math.random()|0),Ug={};function $T(u,h,p,m,b){if(m&&m.once)return qT(u,h,p,m,b);if(Array.isArray(h)){for(var N=0;N<h.length;N++)$T(u,h[N],p,m,b);return null}return p=Hg(p),u&&u[vc]?u.K(h,p,l(m)?!!m.capture:!!m,b):HT(u,h,p,!1,m,b)}function HT(u,h,p,m,b,N){if(!h)throw Error("Invalid event type");var O=l(b)?!!b.capture:!!b,Fe=Bg(u);if(Fe||(u[Vg]=Fe=new Kl(u)),p=Fe.add(h,p,m,O,N),p.proxy)return p;if(m=oF(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)nF||(b=O),b===void 0&&(b=!1),u.addEventListener(h.toString(),m,b);else if(u.attachEvent)u.attachEvent(zT(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function oF(){function u(p){return h.call(u.src,u.listener,p)}let h=aF;return u}function qT(u,h,p,m,b){if(Array.isArray(h)){for(var N=0;N<h.length;N++)qT(u,h[N],p,m,b);return null}return p=Hg(p),u&&u[vc]?u.L(h,p,l(m)?!!m.capture:!!m,b):HT(u,h,p,!0,m,b)}function GT(u,h,p,m,b){if(Array.isArray(h))for(var N=0;N<h.length;N++)GT(u,h[N],p,m,b);else m=l(m)?!!m.capture:!!m,p=Hg(p),u&&u[vc]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=Lg(N,p,m,b),-1<p&&(Wl(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Bg(u))&&(h=u.g[h.toString()],u=-1,h&&(u=Lg(h,p,m,b)),(p=-1<u?h[u]:null)&&jg(p))}function jg(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[vc])Fg(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(zT(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Bg(h))?(Fg(p,u),p.h==0&&(p.src=null,h[Vg]=null)):Wl(u)}}}function zT(u){return u in Ug?Ug[u]:Ug[u]="on"+u}function aF(u,h){if(u.da)u=!0;else{h=new yc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&jg(u),u=p.call(m,h)}return u}function Bg(u){return u=u[Vg],u instanceof Kl?u:null}var $g="__closure_events_fn_"+(1e9*Math.random()>>>0);function Hg(u){return typeof u=="function"?u:(u[$g]||(u[$g]=function(h){return u.handleEvent(h)}),u[$g])}function xt(){mi.call(this),this.i=new Kl(this),this.M=this,this.F=null}w(xt,mi),xt.prototype[vc]=!0,xt.prototype.removeEventListener=function(u,h,p,m){GT(this,u,h,p,m)};function zt(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Mt(h,u);else if(h instanceof Mt)h.target=h.target||u;else{var b=h;h=new Mt(m,u),T(h,b)}if(b=!0,p)for(var N=p.length-1;0<=N;N--){var O=h.g=p[N];b=Ql(O,m,!0,h)&&b}if(O=h.g=u,b=Ql(O,m,!0,h)&&b,b=Ql(O,m,!1,h)&&b,p)for(N=0;N<p.length;N++)O=h.g=p[N],b=Ql(O,m,!1,h)&&b}xt.prototype.N=function(){if(xt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)Wl(p[m]);delete u.g[h],u.h--}}this.F=null},xt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},xt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function Ql(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var b=!0,N=0;N<h.length;++N){var O=h[N];if(O&&!O.da&&O.capture==p){var Fe=O.listener,bt=O.ha||O.src;O.fa&&Fg(u.i,O),b=Fe.call(bt,m)!==!1&&b}}return b&&!m.defaultPrevented}function WT(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function KT(u){u.g=WT(()=>{u.g=null,u.i&&(u.i=!1,KT(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class cF extends mi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:KT(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wc(u){mi.call(this),this.h=u,this.g={}}w(wc,mi);var QT=[];function YT(u){J(u.g,function(h,p){this.g.hasOwnProperty(p)&&jg(h)},u),u.g={}}wc.prototype.N=function(){wc.aa.N.call(this),YT(this)},wc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qg=a.JSON.stringify,uF=a.JSON.parse,lF=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Gg(){}Gg.prototype.h=null;function ZT(u){return u.h||(u.h=u.i())}function JT(){}var Ic={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zg(){Mt.call(this,"d")}w(zg,Mt);function Wg(){Mt.call(this,"c")}w(Wg,Mt);var ts={},XT=null;function Yl(){return XT=XT||new xt}ts.La="serverreachability";function eD(u){Mt.call(this,ts.La,u)}w(eD,Mt);function Ec(u){let h=Yl();zt(h,new eD(h))}ts.STAT_EVENT="statevent";function tD(u,h){Mt.call(this,ts.STAT_EVENT,u),this.stat=h}w(tD,Mt);function Wt(u){let h=Yl();zt(h,new tD(h,u))}ts.Ma="timingevent";function nD(u,h){Mt.call(this,ts.Ma,u),this.size=h}w(nD,Mt);function Cc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Tc(){this.g=!0}Tc.prototype.xa=function(){this.g=!1};function dF(u,h,p,m,b,N){u.info(function(){if(u.g)if(N)for(var O="",Fe=N.split("&"),bt=0;bt<Fe.length;bt++){var be=Fe[bt].split("=");if(1<be.length){var Pt=be[0];be=be[1];var kt=Pt.split("_");O=2<=kt.length&&kt[1]=="type"?O+(Pt+"="+be+"&"):O+(Pt+"=redacted&")}}else O=null;else O=N;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+p+`
`+O})}function hF(u,h,p,m,b,N,O){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+p+`
`+N+" "+O})}function _o(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+pF(u,p)+(m?" "+m:"")})}function fF(u,h){u.info(function(){return"TIMEOUT: "+h})}Tc.prototype.info=function(){};function pF(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var b=m[1];if(Array.isArray(b)&&!(1>b.length)){var N=b[0];if(N!="noop"&&N!="stop"&&N!="close")for(var O=1;O<b.length;O++)b[O]=""}}}}return qg(p)}catch{return h}}var Zl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rD={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Kg;function Jl(){}w(Jl,Gg),Jl.prototype.g=function(){return new XMLHttpRequest},Jl.prototype.i=function(){return{}},Kg=new Jl;function _i(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new wc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new iD}function iD(){this.i=null,this.g="",this.h=!1}var sD={},Qg={};function Yg(u,h,p){u.L=1,u.v=nd(Or(h)),u.m=p,u.P=!0,oD(u,null)}function oD(u,h){u.F=Date.now(),Xl(u),u.A=Or(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),wD(p.i,"t",m),u.C=0,p=u.j.J,u.h=new iD,u.g=VD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new cF(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var b="readystatechange";Array.isArray(b)||(b&&(QT[0]=b.toString()),b=QT);for(var N=0;N<b.length;N++){var O=$T(p,b[N],m||h.handleEvent,!1,h.h||h);if(!O)break;h.g[O.key]=O}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Ec(),dF(u.i,u.u,u.A,u.l,u.R,u.m)}_i.prototype.ca=function(u){u=u.target;let h=this.M;h&&Fr(u)==3?h.j():this.Y(u)},_i.prototype.Y=function(u){try{if(u==this.g)e:{let kt=Fr(this.g);var h=this.g.Ba();let wo=this.g.Z();if(!(3>kt)&&(kt!=3||this.g&&(this.h.h||this.g.oa()||SD(this.g)))){this.J||kt!=4||h==7||(h==8||0>=wo?Ec(3):Ec(2)),Zg(this);var p=this.g.Z();this.X=p;t:if(aD(this)){var m=SD(this.g);u="";var b=m.length,N=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ns(this),Dc(this);var O="";break t}this.h.i=new a.TextDecoder}for(h=0;h<b;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==b-1)});m.length=0,this.h.g+=u,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=p==200,hF(this.i,this.u,this.A,this.l,this.R,kt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,bt=this.g;if((Fe=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Fe)){var be=Fe;break t}}be=null}if(p=be)_o(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jg(this,p);else{this.o=!1,this.s=3,Wt(12),ns(this),Dc(this);break e}}if(this.P){p=!0;let Wn;for(;!this.J&&this.C<O.length;)if(Wn=gF(this,O),Wn==Qg){kt==4&&(this.s=4,Wt(14),p=!1),_o(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==sD){this.s=4,Wt(15),_o(this.i,this.l,O,"[Invalid Chunk]"),p=!1;break}else _o(this.i,this.l,Wn,null),Jg(this,Wn);if(aD(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),kt!=4||O.length!=0||this.h.h||(this.s=1,Wt(16),p=!1),this.o=this.o&&p,!p)_o(this.i,this.l,O,"[Invalid Chunked Response]"),ns(this),Dc(this);else if(0<O.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),im(Pt),Pt.M=!0,Wt(11))}}else _o(this.i,this.l,O,null),Jg(this,O);kt==4&&ns(this),this.o&&!this.J&&(kt==4?kD(this.j,this):(this.o=!1,Xl(this)))}else xF(this.g),p==400&&0<O.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),ns(this),Dc(this)}}}catch{}finally{}};function aD(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function gF(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Qg:(p=Number(h.substring(p,m)),isNaN(p)?sD:(m+=1,m+p>h.length?Qg:(h=h.slice(m,m+p),u.C=m+p,h)))}_i.prototype.cancel=function(){this.J=!0,ns(this)};function Xl(u){u.S=Date.now()+u.I,cD(u,u.I)}function cD(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Cc(g(u.ba,u),h)}function Zg(u){u.B&&(a.clearTimeout(u.B),u.B=null)}_i.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(fF(this.i,this.A),this.L!=2&&(Ec(),Wt(17)),ns(this),this.s=2,Dc(this)):cD(this,this.S-u)};function Dc(u){u.j.G==0||u.J||kD(u.j,u)}function ns(u){Zg(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,YT(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Jg(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Xg(p.h,u))){if(!u.K&&Xg(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)ad(p),sd(p);else break e;rm(p),Wt(18)}}else p.za=b[1],0<p.za-p.T&&37500>b[2]&&p.F&&p.v==0&&!p.C&&(p.C=Cc(g(p.Za,p),6e3));if(1>=dD(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else is(p,11)}else if((u.K||p.g==u)&&ad(p),!U(h))for(b=p.Da.g.parse(h),h=0;h<b.length;h++){let be=b[h];if(p.T=be[0],be=be[1],p.G==2)if(be[0]=="c"){p.K=be[1],p.ia=be[2];let Pt=be[3];Pt!=null&&(p.la=Pt,p.j.info("VER="+p.la));let kt=be[4];kt!=null&&(p.Aa=kt,p.j.info("SVER="+p.Aa));let wo=be[5];wo!=null&&typeof wo=="number"&&0<wo&&(m=1.5*wo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let Wn=u.g;if(Wn){let ud=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ud){var N=m.h;N.g||ud.indexOf("spdy")==-1&&ud.indexOf("quic")==-1&&ud.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(em(N,N.h),N.h=null))}if(m.D){let sm=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;sm&&(m.ya=sm,qe(m.I,m.D,sm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var O=u;if(m.qa=LD(m,m.J?m.ia:null,m.W),O.K){hD(m.h,O);var Fe=O,bt=m.L;bt&&(Fe.I=bt),Fe.B&&(Zg(Fe),Xl(Fe)),m.g=O}else xD(m);0<p.i.length&&od(p)}else be[0]!="stop"&&be[0]!="close"||is(p,7);else p.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?is(p,7):nm(p):be[0]!="noop"&&p.l&&p.l.ta(be),p.v=0)}}Ec(4)}catch{}}var mF=class{constructor(u,h){this.g=u,this.map=h}};function uD(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function lD(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function dD(u){return u.h?1:u.g?u.g.size:0}function Xg(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function em(u,h){u.g?u.g.add(h):u.h=h}function hD(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}uD.prototype.cancel=function(){if(this.i=fD(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function fD(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function _F(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function yF(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function pD(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=yF(u),m=_F(u),b=m.length,N=0;N<b;N++)h.call(void 0,m[N],p&&p[N],u)}var gD=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vF(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),b=null;if(0<=m){var N=u[p].substring(0,m);b=u[p].substring(m+1)}else N=u[p];h(N,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function rs(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof rs){this.h=u.h,ed(this,u.j),this.o=u.o,this.g=u.g,td(this,u.s),this.l=u.l;var h=u.i,p=new Ac;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),mD(this,p),this.m=u.m}else u&&(h=String(u).match(gD))?(this.h=!1,ed(this,h[1]||"",!0),this.o=bc(h[2]||""),this.g=bc(h[3]||"",!0),td(this,h[4]),this.l=bc(h[5]||"",!0),mD(this,h[6]||"",!0),this.m=bc(h[7]||"")):(this.h=!1,this.i=new Ac(null,this.h))}rs.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Sc(h,_D,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Sc(h,_D,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Sc(p,p.charAt(0)=="/"?EF:IF,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Sc(p,TF)),u.join("")};function Or(u){return new rs(u)}function ed(u,h,p){u.j=p?bc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function td(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function mD(u,h,p){h instanceof Ac?(u.i=h,DF(u.i,u.h)):(p||(h=Sc(h,CF)),u.i=new Ac(h,u.h))}function qe(u,h,p){u.i.set(h,p)}function nd(u){return qe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function bc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Sc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,wF),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wF(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var _D=/[#\/\?@]/g,IF=/[#\?:]/g,EF=/[#\?]/g,CF=/[#\?@]/g,TF=/#/g;function Ac(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function yi(u){u.g||(u.g=new Map,u.h=0,u.i&&vF(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=Ac.prototype,t.add=function(u,h){yi(this),this.i=null,u=yo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function yD(u,h){yi(u),h=yo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function vD(u,h){return yi(u),h=yo(u,h),u.g.has(h)}t.forEach=function(u,h){yi(this),this.g.forEach(function(p,m){p.forEach(function(b){u.call(h,b,m,this)},this)},this)},t.na=function(){yi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let b=u[m];for(let N=0;N<b.length;N++)p.push(h[m])}return p},t.V=function(u){yi(this);let h=[];if(typeof u=="string")vD(this,u)&&(h=h.concat(this.g.get(yo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},t.set=function(u,h){return yi(this),this.i=null,u=yo(this,u),vD(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},t.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function wD(u,h,p){yD(u,h),0<p.length&&(u.i=null,u.g.set(yo(u,h),R(p)),u.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),O=this.V(m);for(m=0;m<O.length;m++){var b=N;O[m]!==""&&(b+="="+encodeURIComponent(String(O[m]))),u.push(b)}}return this.i=u.join("&")};function yo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function DF(u,h){h&&!u.j&&(yi(u),u.i=null,u.g.forEach(function(p,m){var b=m.toLowerCase();m!=b&&(yD(this,m),wD(this,b,p))},u)),u.j=h}function bF(u,h){let p=new Tc;if(a.Image){let m=new Image;m.onload=_(vi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(vi,p,"TestLoadImage: error",!1,h,m),m.onabort=_(vi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(vi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function SF(u,h){let p=new Tc,m=new AbortController,b=setTimeout(()=>{m.abort(),vi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(b),N.ok?vi(p,"TestPingServer: ok",!0,h):vi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),vi(p,"TestPingServer: error",!1,h)})}function vi(u,h,p,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(p)}catch{}}function AF(){this.g=new lF}function RF(u,h,p){let m=p||"";try{pD(u,function(b,N){let O=b;l(b)&&(O=qg(b)),h.push(m+N+"="+encodeURIComponent(O))})}catch(b){throw h.push(m+"type="+encodeURIComponent("_badmap")),b}}function Rc(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Rc,Gg),Rc.prototype.g=function(){return new rd(this.l,this.j)},Rc.prototype.i=function(u){return function(){return u}}({});function rd(u,h){xt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(rd,xt),t=rd.prototype,t.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Mc(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nc(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Mc(this)),this.g&&(this.readyState=3,Mc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ID(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function ID(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Nc(this):Mc(this),this.readyState==3&&ID(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,Nc(this))},t.Qa=function(u){this.g&&(this.response=u,Nc(this))},t.ga=function(){this.g&&Nc(this)};function Nc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Mc(u)}t.setRequestHeader=function(u,h){this.u.append(u,h)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Mc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ED(u){let h="";return J(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function tm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=ED(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):qe(u,h,p))}function et(u){xt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(et,xt);var NF=/^https?$/i,MF=["POST","PUT"];t=et.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Kg.g(),this.v=this.o?ZT(this.o):ZT(Kg),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){CD(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)p.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),b=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(MF,h,void 0))||m||b||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,O]of p)this.g.setRequestHeader(N,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{bD(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){CD(this,N)}};function CD(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,TD(u),id(u)}function TD(u){u.A||(u.A=!0,zt(u,"complete"),zt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,zt(this,"complete"),zt(this,"abort"),id(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),id(this,!0)),et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?DD(this):this.bb())},t.bb=function(){DD(this)};function DD(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Fr(u)!=4||u.Z()!=2)){if(u.u&&Fr(u)==4)WT(u.Ea,0,u);else if(zt(u,"readystatechange"),Fr(u)==4){u.h=!1;try{let O=u.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=O===0){var b=String(u.D).match(gD)[1]||null;!b&&a.self&&a.self.location&&(b=a.self.location.protocol.slice(0,-1)),m=!NF.test(b?b.toLowerCase():"")}p=m}if(p)zt(u,"complete"),zt(u,"success");else{u.m=6;try{var N=2<Fr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",TD(u)}}finally{id(u)}}}}function id(u,h){if(u.g){bD(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||zt(u,"ready");try{p.onreadystatechange=m}catch{}}}function bD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function Fr(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),uF(h)}};function SD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function xF(u){let h={};u=(u.g&&2<=Fr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(U(u[m]))continue;var p=D(u[m]);let b=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[b]||[];h[b]=N,N.push(p)}C(h,function(m){return m.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function AD(u){this.Aa=0,this.i=[],this.j=new Tc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xc("baseRetryDelayMs",5e3,u),this.cb=xc("retryDelaySeedMs",1e4,u),this.Wa=xc("forwardChannelMaxRetries",2,u),this.wa=xc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new uD(u&&u.concurrentRequestLimit),this.Da=new AF,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=AD.prototype,t.la=8,t.G=1,t.connect=function(u,h,p,m){Wt(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=LD(this,null,this.W),od(this)};function nm(u){if(RD(u),u.G==3){var h=u.U++,p=Or(u.I);if(qe(p,"SID",u.K),qe(p,"RID",h),qe(p,"TYPE","terminate"),Pc(u,p),h=new _i(u,u.j,h),h.L=2,h.v=nd(Or(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=VD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Xl(h)}FD(u)}function sd(u){u.g&&(im(u),u.g.cancel(),u.g=null)}function RD(u){sd(u),u.u&&(a.clearTimeout(u.u),u.u=null),ad(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function od(u){if(!lD(u.h)&&!u.s){u.s=!0;var h=u.Ga;mc||BT(),_c||(mc(),_c=!0),Og.add(h,u),u.B=0}}function PF(u,h){return dD(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Cc(g(u.Ga,u,h),OD(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let b=new _i(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(b.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=MD(this,b,h),p=Or(this.I),qe(p,"RID",u),qe(p,"CVER",22),this.D&&qe(p,"X-HTTP-Session-Id",this.D),Pc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(ED(N)))+"&"+h:this.m&&tm(p,this.m,N)),em(this.h,b),this.Ua&&qe(p,"TYPE","init"),this.P?(qe(p,"$req",h),qe(p,"SID","null"),b.T=!0,Yg(b,p,null)):Yg(b,p,h),this.G=2}}else this.G==3&&(u?ND(this,u):this.i.length==0||lD(this.h)||ND(this))};function ND(u,h){var p;h?p=h.l:p=u.U++;let m=Or(u.I);qe(m,"SID",u.K),qe(m,"RID",p),qe(m,"AID",u.T),Pc(u,m),u.m&&u.o&&tm(m,u.m,u.o),p=new _i(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=MD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),em(u.h,p),Yg(p,m,h)}function Pc(u,h){u.H&&J(u.H,function(p,m){qe(h,m,p)}),u.l&&pD({},function(p,m){qe(h,m,p)})}function MD(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var b=u.i;let N=-1;for(;;){let O=["count="+p];N==-1?0<p?(N=b[0].g,O.push("ofs="+N)):N=0:O.push("ofs="+N);let Fe=!0;for(let bt=0;bt<p;bt++){let be=b[bt].g,Pt=b[bt].map;if(be-=N,0>be)N=Math.max(0,b[bt].g-100),Fe=!1;else try{RF(Pt,O,"req"+be+"_")}catch{m&&m(Pt)}}if(Fe){m=O.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function xD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;mc||BT(),_c||(mc(),_c=!0),Og.add(h,u),u.v=0}}function rm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Cc(g(u.Fa,u),OD(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,PD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Cc(g(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),sd(this),PD(this))};function im(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function PD(u){u.g=new _i(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Or(u.qa);qe(h,"RID","rpc"),qe(h,"SID",u.K),qe(h,"AID",u.T),qe(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&qe(h,"TO",u.ja),qe(h,"TYPE","xmlhttp"),Pc(u,h),u.m&&u.o&&tm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=nd(Or(h)),p.m=null,p.P=!0,oD(p,u)}t.Za=function(){this.C!=null&&(this.C=null,sd(this),rm(this),Wt(19))};function ad(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function kD(u,h){var p=null;if(u.g==h){ad(u),im(u),u.g=null;var m=2}else if(Xg(u.h,h))p=h.D,hD(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var b=u.B;m=Yl(),zt(m,new nD(m,p)),od(u)}else xD(u);else if(b=h.s,b==3||b==0&&0<h.X||!(m==1&&PF(u,h)||m==2&&rm(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),b){case 1:is(u,5);break;case 4:is(u,10);break;case 3:is(u,6);break;default:is(u,2)}}}function OD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function is(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let b=!m;m=new rs(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ed(m,"https"),nd(m),b?bF(m.toString(),p):SF(m.toString(),p)}else Wt(2);u.G=0,u.l&&u.l.sa(h),FD(u),RD(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function FD(u){if(u.G=0,u.ka=[],u.l){let h=fD(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function LD(u,h,p){var m=p instanceof rs?Or(p):new rs(p);if(m.g!="")h&&(m.g=h+"."+m.g),td(m,m.s);else{var b=a.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;var N=new rs(null);m&&ed(N,m),h&&(N.g=h),b&&td(N,b),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&qe(m,p,h),qe(m,"VER",u.la),Pc(u,m),m}function VD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new et(new Rc({eb:p})):new et(u.pa),h.Ha(u.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function UD(){}t=UD.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function cd(){}cd.prototype.g=function(u,h){return new gn(u,h)};function gn(u,h){xt.call(this),this.g=new AD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!U(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!U(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new vo(this)}w(gn,xt),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){nm(this.g)},gn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=qg(u),u=p);h.i.push(new mF(h.Ya++,u)),h.G==3&&od(h)},gn.prototype.N=function(){this.g.l=null,delete this.j,nm(this.g),delete this.g,gn.aa.N.call(this)};function jD(u){zg.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(jD,zg);function BD(){Wg.call(this),this.status=1}w(BD,Wg);function vo(u){this.g=u}w(vo,UD),vo.prototype.ua=function(){zt(this.g,"a")},vo.prototype.ta=function(u){zt(this.g,new jD(u))},vo.prototype.sa=function(u){zt(this.g,new BD)},vo.prototype.ra=function(){zt(this.g,"b")},cd.prototype.createWebChannel=cd.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ww=si.createWebChannelTransport=function(){return new cd},vw=si.getStatEventTarget=function(){return Yl()},yw=si.Event=ts,ep=si.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Zl.NO_ERROR=0,Zl.TIMEOUT=8,Zl.HTTP_ERROR=6,Gu=si.ErrorCode=Zl,rD.COMPLETE="complete",_w=si.EventType=rD,JT.EventType=Ic,Ic.OPEN="a",Ic.CLOSE="b",Ic.ERROR="c",Ic.MESSAGE="d",xt.prototype.listen=xt.prototype.K,Ca=si.WebChannel=JT,PW=si.FetchXmlHttpFactory=Rc,et.prototype.listenOnce=et.prototype.L,et.prototype.getLastError=et.prototype.Ka,et.prototype.getLastErrorCode=et.prototype.Ba,et.prototype.getStatus=et.prototype.Z,et.prototype.getResponseJson=et.prototype.Oa,et.prototype.getResponseText=et.prototype.oa,et.prototype.send=et.prototype.ea,et.prototype.setWithCredentials=et.prototype.Ha,mw=si.XhrIo=et}).apply(typeof Xf<"u"?Xf:typeof self<"u"?self:typeof window<"u"?window:{});var aM="@firebase/firestore";var Tt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Tt.UNAUTHENTICATED=new Tt(null),Tt.GOOGLE_CREDENTIALS=new Tt("google-credentials-uid"),Tt.FIRST_PARTY=new Tt("first-party-uid"),Tt.MOCK_USER=new Tt("mock-user");var $a="10.14.0";var Ks=new fr("@firebase/firestore");function zu(){return Ks.logLevel}function B(t,...e){if(Ks.logLevel<=Ft.DEBUG){let n=e.map(nE);Ks.debug(`Firestore (${$a}): ${t}`,...n)}}function ai(t,...e){if(Ks.logLevel<=Ft.ERROR){let n=e.map(nE);Ks.error(`Firestore (${$a}): ${t}`,...n)}}function Na(t,...e){if(Ks.logLevel<=Ft.WARN){let n=e.map(nE);Ks.warn(`Firestore (${$a}): ${t}`,...n)}}function nE(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function te(t="Unexpected state"){let e=`FIRESTORE (${$a}) INTERNAL ASSERTION FAILED: `+t;throw ai(e),new Error(e)}function xe(t,e){t||te()}function ae(t,e){return t}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=class extends nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ar=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var sp=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Dw=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Tt.UNAUTHENTICATED))}shutdown(){}},bw=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Sw=class{constructor(e){this.t=e,this.currentUser=Tt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){xe(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ar,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ar)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(xe(typeof r.accessToken=="string"),new sp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return xe(e===null||typeof e=="string"),new Tt(e)}},Aw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Tt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Rw=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Aw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Tt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Nw=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mw=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){xe(this.o===void 0);let r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(xe(typeof n.token=="string"),this.R=n.token,new Nw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function kW(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var op=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=kW(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function Ae(t,e){return t<e?-1:t>e?1:0}function Ma(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var It=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var le=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new It(0,0))}static max(){return new t(new It(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var ap=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&te(),r===void 0?r=e.length-n:r>e.length-n&&te(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Je=class t extends ap{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new j(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},OW=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Cn=class t extends ap{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return OW.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new j(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new j(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new j(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var z=class t{constructor(e){this.path=e}static fromPath(e){return new t(Je.fromString(e))}static fromName(e){return new t(Je.fromString(e).popFirst(5))}static empty(){return new t(Je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Je(e.slice()))}};var xw=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};xw.UNKNOWN_ID=-1;function FW(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new It(n+1,0):new It(n,r));return new Qs(i,z.empty(),e)}function LW(t){return new Qs(t.readTime,t.key,-1)}var Qs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(le.min(),z.empty(),-1)}static max(){return new t(le.max(),z.empty(),-1)}};function VW(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=z.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}var UW="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pw=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function hl(t){return y(this,null,function*(){if(t.code!==M.FAILED_PRECONDITION||t.message!==UW)throw t;B("LocalStore","Unexpectedly lost primary lease")})}var k=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;n(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function jW(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fl(t){return t.name==="IndexedDbTransactionError"}var $M=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Lp(t){return t==null}function Ju(t){return t===0&&1/t==-1/0}function BW(t){return typeof t=="number"&&Number.isInteger(t)&&!Ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $W=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Rie=[...$W,"documentOverlays"],HW=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qW=HW,GW=[...qW,"indexConfiguration","indexState","indexEntries"];var Nie=[...GW,"globals"];function cM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ha(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function HM(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var it=class t{constructor(e,n){this.comparator=e,this.root=n||Rr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sa(this.root,e,this.comparator,!0)}},Sa=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Rr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw te();let e=this.left.check();if(e!==this.right.check())throw te();return e+(this.isRed()?0:1)}};Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1;Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw te()}get value(){throw te()}get color(){throw te()}get left(){throw te()}get right(){throw te()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Rr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ut=class t{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new cp(this.data.getIterator())}getIteratorFrom(e){return new cp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},cp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Sr=class t{constructor(e){this.fields=e,e.sort(Cn.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ut(Cn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ma(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var up=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var jt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new up("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};jt.EMPTY_BYTE_STRING=new jt("");var zW=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ci(t){if(xe(!!t),typeof t=="string"){let e=0,n=zW.exec(t);if(xe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Qe(t.seconds),nanos:Qe(t.nanos)}}function Qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ki(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}function rE(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function iE(t){let e=t.mapValue.fields.__previous_value__;return rE(e)?iE(e):e}function Xu(t){let e=ci(t.mapValue.fields.__local_write_time__.timestampValue);return new It(e.seconds,e.nanos)}var kw=class{constructor(e,n,r,i,s,o,a,c,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},lp=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var tp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rE(t)?4:GM(t)?9007199254740991:qM(t)?10:11:te()}function xr(t,e){if(t===e)return!0;let n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xu(t).isEqual(Xu(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ci(i.timestampValue),a=ci(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ki(i.bytesValue).isEqual(Ki(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Qe(i.geoPointValue.latitude)===Qe(s.geoPointValue.latitude)&&Qe(i.geoPointValue.longitude)===Qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Qe(i.integerValue)===Qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Qe(i.doubleValue),a=Qe(s.doubleValue);return o===a?Ju(o)===Ju(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ma(t.arrayValue.values||[],e.arrayValue.values||[],xr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(cM(o)!==cM(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!xr(o[c],a[c])))return!1;return!0}(t,e);default:return te()}}function el(t,e){return(t.values||[]).find(n=>xr(n,e))!==void 0}function xa(t,e){if(t===e)return 0;let n=Ys(t),r=Ys(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Qe(s.integerValue||s.doubleValue),c=Qe(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return uM(t.timestampValue,e.timestampValue);case 4:return uM(Xu(t),Xu(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(s,o){let a=Ki(s),c=Ki(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Ae(a[l],c[l]);if(d!==0)return d}return Ae(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ae(Qe(s.latitude),Qe(o.latitude));return a!==0?a:Ae(Qe(s.longitude),Qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return lM(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Ae(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:lM(_,w)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===tp.mapValue&&o===tp.mapValue)return 0;if(s===tp.mapValue)return 1;if(o===tp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Ae(c[f],d[f]);if(g!==0)return g;let _=xa(a[c[f]],l[d[f]]);if(_!==0)return _}return Ae(c.length,d.length)}(t.mapValue,e.mapValue);default:throw te()}}function uM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);let n=ci(t),r=ci(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function lM(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let s=xa(n[i],r[i]);if(s)return s}return Ae(n.length,r.length)}function Pa(t){return Ow(t)}function Ow(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ci(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Ow(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Ow(n.fields[o])}`;return i+"}"}(t.mapValue):te()}function dM(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Fw(t){return!!t&&"integerValue"in t}function sE(t){return!!t&&"arrayValue"in t}function hM(t){return!!t&&"nullValue"in t}function fM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function rp(t){return!!t&&"mapValue"in t}function qM(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Ku(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ku(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ku(t.arrayValue.values[n]);return e}return Object.assign({},t)}function GM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ir=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!rp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ku(n)}setAll(e){let n=Cn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Ku(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());rp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return xr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];rp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ha(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Ku(this.value))}};function zM(t){let e=[];return Ha(t.fields,(n,r)=>{let i=new Cn([n]);if(rp(r)){let s=zM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Sr(e)}var sr=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,le.min(),le.min(),le.min(),ir.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,le.min(),le.min(),ir.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,le.min(),le.min(),ir.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ka=class{constructor(e,n){this.position=e,this.inclusive=n}};function pM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),n.key):r=xa(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function gM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!xr(t.position[n],e.position[n]))return!1;return!0}var Oa=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function WW(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var dp=class{},_t=class t extends dp{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Vw(e,n,r):n==="array-contains"?new Bw(e,r):n==="in"?new $w(e,r):n==="not-in"?new Hw(e,r):n==="array-contains-any"?new qw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Uw(e,r):new jw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(xa(n,this.value)):n!==null&&Ys(this.value)===Ys(n)&&this.matchesComparison(xa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},or=class t extends dp{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return WM(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function WM(t){return t.op==="and"}function KM(t){return KW(t)&&WM(t)}function KW(t){for(let e of t.filters)if(e instanceof or)return!1;return!0}function Lw(t){if(t instanceof _t)return t.field.canonicalString()+t.op.toString()+Pa(t.value);if(KM(t))return t.filters.map(e=>Lw(e)).join(",");{let e=t.filters.map(n=>Lw(n)).join(",");return`${t.op}(${e})`}}function QM(t,e){return t instanceof _t?function(r,i){return i instanceof _t&&r.op===i.op&&r.field.isEqual(i.field)&&xr(r.value,i.value)}(t,e):t instanceof or?function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&QM(o,i.filters[a]),!0):!1}(t,e):void te()}function YM(t){return t instanceof _t?function(n){return`${n.field.canonicalString()} ${n.op} ${Pa(n.value)}`}(t):t instanceof or?function(n){return n.op.toString()+" {"+n.getFilters().map(YM).join(" ,")+"}"}(t):"Filter"}var Vw=class extends _t{constructor(e,n,r){super(e,n,r),this.key=z.fromName(r.referenceValue)}matches(e){let n=z.comparator(e.key,this.key);return this.matchesComparison(n)}},Uw=class extends _t{constructor(e,n){super(e,"in",n),this.keys=ZM("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},jw=class extends _t{constructor(e,n){super(e,"not-in",n),this.keys=ZM("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function ZM(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>z.fromName(r.referenceValue))}var Bw=class extends _t{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return sE(n)&&el(n.arrayValue,this.value)}},$w=class extends _t{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}},Hw=class extends _t{constructor(e,n){super(e,"not-in",n)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!el(this.value.arrayValue,n)}},qw=class extends _t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!sE(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>el(this.value.arrayValue,r))}};var Gw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function mM(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Gw(t,e,n,r,i,s,o)}function oE(t){let e=ae(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Lp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Pa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Pa(r)).join(",")),e.ue=n}return e.ue}function aE(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WW(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QM(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gM(t.startAt,e.startAt)&&gM(t.endAt,e.endAt)}function zw(t){return z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var Zs=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function QW(t,e,n,r,i,s,o,a){return new Zs(t,e,n,r,i,s,o,a)}function cE(t){return new Zs(t)}function _M(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JM(t){return t.collectionGroup!==null}function Qu(t){let e=ae(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ut(Cn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Oa(s,r))}),n.has(Cn.keyField().canonicalString())||e.ce.push(new Oa(Cn.keyField(),r))}return e.ce}function Nr(t){let e=ae(t);return e.le||(e.le=YW(e,Qu(t))),e.le}function YW(t,e){if(t.limitType==="F")return mM(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Oa(i.field,s)});let n=t.endAt?new ka(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ka(t.startAt.position,t.startAt.inclusive):null;return mM(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ww(t,e){let n=t.filters.concat([e]);return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kw(t,e,n){return new Zs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Vp(t,e){return aE(Nr(t),Nr(e))&&t.limitType===e.limitType}function XM(t){return`${oE(Nr(t))}|lt:${t.limitType}`}function Ta(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>YM(i)).join(", ")}]`),Lp(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Pa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Pa(i)).join(",")),`Target(${r})`}(Nr(t))}; limitType=${t.limitType})`}function Up(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Qu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=pM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,Qu(r),i)||r.endAt&&!function(o,a,c){let l=pM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,Qu(r),i))}(t,e)}function ZW(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ex(t){return(e,n)=>{let r=!1;for(let i of Qu(t)){let s=JW(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function JW(t,e,n){let r=t.field.isKeyField()?z.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?xa(c,l):te()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return te()}}var Qi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ha(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return HM(this.inner)}size(){return this.innerSize}};var XW=new it(z.comparator);function ui(){return XW}var tx=new it(z.comparator);function Wu(...t){let e=tx;for(let n of t)e=e.insert(n.key,n);return e}function nx(t){let e=tx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Gs(){return Yu()}function rx(){return Yu()}function Yu(){return new Qi(t=>t.toString(),(t,e)=>t.isEqual(e))}var e4=new it(z.comparator),t4=new Ut(z.comparator);function ye(...t){let e=t4;for(let n of t)e=e.add(n);return e}var n4=new Ut(Ae);function r4(){return n4}function uE(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ju(e)?"-0":e}}function ix(t){return{integerValue:""+t}}function i4(t,e){return BW(e)?ix(e):uE(t,e)}var Fa=class{constructor(){this._=void 0}};function s4(t,e,n){return t instanceof La?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&rE(s)&&(s=iE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Js?ox(t,e):t instanceof Xs?ax(t,e):function(i,s){let o=sx(i,s),a=yM(o)+yM(i.Pe);return Fw(o)&&Fw(i.Pe)?ix(a):uE(i.serializer,a)}(t,e)}function o4(t,e,n){return t instanceof Js?ox(t,e):t instanceof Xs?ax(t,e):n}function sx(t,e){return t instanceof Va?function(r){return Fw(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var La=class extends Fa{},Js=class extends Fa{constructor(e){super(),this.elements=e}};function ox(t,e){let n=cx(e);for(let r of t.elements)n.some(i=>xr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Xs=class extends Fa{constructor(e){super(),this.elements=e}};function ax(t,e){let n=cx(e);for(let r of t.elements)n=n.filter(i=>!xr(i,r));return{arrayValue:{values:n}}}var Va=class extends Fa{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function yM(t){return Qe(t.integerValue||t.doubleValue)}function cx(t){return sE(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function a4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Js&&i instanceof Js||r instanceof Xs&&i instanceof Xs?Ma(r.elements,i.elements,xr):r instanceof Va&&i instanceof Va?xr(r.Pe,i.Pe):r instanceof La&&i instanceof La}(t.transform,e.transform)}var Qw=class{constructor(e,n){this.version=e,this.transformResults=n}},zi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ip(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var Ua=class{};function ux(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new tl(t.key,zi.none()):new eo(t.key,t.data,zi.none());{let n=t.data,r=ir.empty(),i=new Ut(Cn.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new li(t.key,r,new Sr(i.toArray()),zi.none())}}function c4(t,e,n){t instanceof eo?function(i,s,o){let a=i.value.clone(),c=wM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof li?function(i,s,o){if(!ip(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=wM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(lx(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zu(t,e,n,r){return t instanceof eo?function(s,o,a,c){if(!ip(s.precondition,o))return a;let l=s.value.clone(),d=IM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof li?function(s,o,a,c){if(!ip(s.precondition,o))return a;let l=IM(s.fieldTransforms,c,o),d=o.data;return d.setAll(lx(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return ip(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function u4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=sx(r.transform,i||null);s!=null&&(n===null&&(n=ir.empty()),n.set(r.field,s))}return n||null}function vM(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ma(r,i,(s,o)=>a4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var eo=class extends Ua{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},li=class extends Ua{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function lx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function wM(t,e,n){let r=new Map;xe(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,o4(o,a,n[i]))}return r}function IM(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,s4(s,o,e))}return r}var tl=class extends Ua{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yw=class extends Ua{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Zw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&c4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Zu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=rx();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=ux(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ye())}isEqual(e){return this.batchId===e.batchId&&Ma(this.mutations,e.mutations,(n,r)=>vM(n,r))&&Ma(this.baseMutations,e.baseMutations,(n,r)=>vM(n,r))}},Jw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){xe(e.mutations.length===r.length);let i=function(){return e4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Xw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var eI=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var gt,Ee;function l4(t){switch(t){default:return te();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function dx(t){if(t===void 0)return ai("GRPC error has no .code"),M.UNKNOWN;switch(t){case gt.OK:return M.OK;case gt.CANCELLED:return M.CANCELLED;case gt.UNKNOWN:return M.UNKNOWN;case gt.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case gt.INTERNAL:return M.INTERNAL;case gt.UNAVAILABLE:return M.UNAVAILABLE;case gt.UNAUTHENTICATED:return M.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case gt.NOT_FOUND:return M.NOT_FOUND;case gt.ALREADY_EXISTS:return M.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return M.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case gt.ABORTED:return M.ABORTED;case gt.OUT_OF_RANGE:return M.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return M.UNIMPLEMENTED;case gt.DATA_LOSS:return M.DATA_LOSS;default:return te()}}(Ee=gt||(gt={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var EM=null;function d4(){return new TextEncoder}var h4=new Gi([4294967295,4294967295],0);function CM(t){let e=d4().encode(t),n=new gw;return n.update(e),new Uint8Array(n.digest())}function TM(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Gi([n,r],0),new Gi([i,s],0)]}var tI=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new zs(`Invalid padding: ${n}`);if(r<0)throw new zs(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zs(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new zs(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Gi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Gi.fromNumber(r)));return i.compare(h4)===1&&(i=new Gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=CM(e),[r,i]=TM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=CM(e),[r,i]=TM(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},zs=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var hp=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,nl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(le.min(),i,new it(Ae),ui(),ye())}},nl=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ye(),ye(),ye())}};var Aa=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},fp=class{constructor(e,n){this.targetId=e,this.me=n}},pp=class{constructor(e,n,r=jt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},gp=class{constructor(){this.fe=0,this.ge=bM(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ye(),n=ye(),r=ye();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:te()}}),new nl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=bM()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,xe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},nI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=ui(),this.qe=DM(),this.Qe=new it(Ae)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:te()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(zw(s))if(r===0){let o=new z(s.path);this.Ue(n,o,sr.newNoDocument(o,le.min()))}else xe(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}EM?.et(function(d,f,g,_,w){var R,S,P,U,$,W;let Oe={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},J=f.unchangedNames;return J&&(Oe.bloomFilter={applied:w===0,hashCount:(R=J?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(U=(P=(S=J?.bits)===null||S===void 0?void 0:S.bitmap)===null||P===void 0?void 0:P.length)!==null&&U!==void 0?U:0,padding:(W=($=J?.bits)===null||$===void 0?void 0:$.padding)!==null&&W!==void 0?W:0,mightContain:C=>{var v;return(v=_?.mightContain(C))!==null&&v!==void 0&&v}}),Oe}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=Ki(r).toUint8Array()}catch(c){if(c instanceof up)return Na("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new tI(o,i,s)}catch(c){return Na(c instanceof zs?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&zw(a.target)){let c=new z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,sr.newNoDocument(c,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=ye();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new hp(e,n,this.Qe,this.ke,r);return this.ke=ui(),this.qe=DM(),this.Qe=new it(Ae),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new gp,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ut(Ae),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new gp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function DM(){return new it(z.comparator)}function bM(){return new it(z.comparator)}var f4={asc:"ASCENDING",desc:"DESCENDING"},p4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},g4={and:"AND",or:"OR"},rI=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function iI(t,e){return t.useProto3Json||Lp(e)?e:{value:e}}function mp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function hx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function m4(t,e){return mp(t,e.toTimestamp())}function Mr(t){return xe(!!t),le.fromTimestamp(function(n){let r=ci(n);return new It(r.seconds,r.nanos)}(t))}function lE(t,e){return sI(t,e).canonicalString()}function sI(t,e){let n=function(i){return new Je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function fx(t){let e=Je.fromString(t);return xe(yx(e)),e}function oI(t,e){return lE(t.databaseId,e.path)}function Iw(t,e){let n=fx(e);if(n.get(1)!==t.databaseId.projectId)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new z(gx(n))}function px(t,e){return lE(t.databaseId,e)}function _4(t){let e=fx(t);return e.length===4?Je.emptyPath():gx(e)}function aI(t){return new Je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gx(t){return xe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function SM(t,e,n){return{name:oI(t,e),fields:n.value.mapValue.fields}}function y4(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:te()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(xe(d===void 0||typeof d=="string"),jt.fromBase64String(d||"")):(xe(d===void 0||d instanceof Buffer||d instanceof Uint8Array),jt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?M.UNKNOWN:dx(l.code);return new j(d,l.message||"")}(o);n=new pp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Iw(t,r.document.name),s=Mr(r.document.updateTime),o=r.document.createTime?Mr(r.document.createTime):le.min(),a=new ir({mapValue:{fields:r.document.fields}}),c=sr.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];n=new Aa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Iw(t,r.document),s=r.readTime?Mr(r.readTime):le.min(),o=sr.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Aa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Iw(t,r.document),s=r.removedTargetIds||[];n=new Aa([],s,i,null)}else{if(!("filter"in e))return te();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new eI(i,s),a=r.targetId;n=new fp(a,o)}}return n}function v4(t,e){let n;if(e instanceof eo)n={update:SM(t,e.key,e.value)};else if(e instanceof tl)n={delete:oI(t,e.key)};else if(e instanceof li)n={update:SM(t,e.key,e.data),updateMask:A4(e.fieldMask)};else{if(!(e instanceof Yw))return te();n={verify:oI(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof La)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Js)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Va)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw te()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:m4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:te()}(t,e.precondition)),n}function w4(t,e){return t&&t.length>0?(xe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Mr(i.updateTime):Mr(s);return o.isEqual(le.min())&&(o=Mr(s)),new Qw(o,i.transformResults||[])}(n,e))):[]}function I4(t,e){return{documents:[px(t,e.path)]}}function E4(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=px(t,i);let s=function(l){if(l.length!==0)return _x(or.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Da(g.field),direction:D4(g.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=iI(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function C4(t){let e=_4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){xe(r===1);let d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){let g=mx(f);return g instanceof or&&KM(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(g=>function(w){return new Oa(ba(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,Lp(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new ka(_,g)}(n.startAt));let l=null;return n.endAt&&(l=function(f){let g=!f.before,_=f.values||[];return new ka(_,g)}(n.endAt)),QW(e,i,o,s,a,"F",c,l)}function T4(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return te()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function mx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=ba(n.unaryFilter.field);return _t.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ba(n.unaryFilter.field);return _t.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=ba(n.unaryFilter.field);return _t.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=ba(n.unaryFilter.field);return _t.create(o,"!=",{nullValue:"NULL_VALUE"});default:return te()}}(t):t.fieldFilter!==void 0?function(n){return _t.create(ba(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return te()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return or.create(n.compositeFilter.filters.map(r=>mx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return te()}}(n.compositeFilter.op))}(t):te()}function D4(t){return f4[t]}function b4(t){return p4[t]}function S4(t){return g4[t]}function Da(t){return{fieldPath:t.canonicalString()}}function ba(t){return Cn.fromServerFormat(t.fieldPath)}function _x(t){return t instanceof _t?function(n){if(n.op==="=="){if(fM(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NAN"}};if(hM(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fM(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NOT_NAN"}};if(hM(n.value))return{unaryFilter:{field:Da(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Da(n.field),op:b4(n.op),value:n.value}}}(t):t instanceof or?function(n){let r=n.getFilters().map(i=>_x(i));return r.length===1?r[0]:{compositeFilter:{op:S4(n.op),filters:r}}}(t):te()}function A4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function yx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var rl=class t{constructor(e,n,r,i,s=le.min(),o=le.min(),a=jt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cI=class{constructor(e){this.ct=e}};function R4(t){let e=C4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kw(e,e.limit,"L"):e}var _p=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Qe(e.integerValue));else if("doubleValue"in e){let r=Qe(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),Ju(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=ci(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(Ki(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?GM(e)?this.dt(n,Number.MAX_SAFE_INTEGER):qM(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):te()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Qe(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),z.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};_p.vt=new _p;var uI=class{constructor(){this.un=new lI}addToCollectionParentIndex(e,n){return this.un.add(n),k.resolve()}getCollectionParents(e,n){return k.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return k.resolve()}deleteFieldIndex(e,n){return k.resolve()}deleteAllFieldIndexes(e){return k.resolve()}createTargetIndexes(e,n){return k.resolve()}getDocumentsMatchingTarget(e,n){return k.resolve(null)}getIndexType(e,n){return k.resolve(0)}getFieldIndexes(e,n){return k.resolve([])}getNextCollectionGroupToUpdate(e){return k.resolve(null)}getMinOffset(e,n){return k.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,n){return k.resolve(Qs.min())}updateCollectionGroup(e,n,r){return k.resolve()}updateIndexEntries(e,n){return k.resolve()}},lI=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ut(Je.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ut(Je.comparator)).toArray()}};var xie=new Uint8Array(0);var br=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};br.DEFAULT_COLLECTION_PERCENTILE=10,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,br.DEFAULT=new br(41943040,br.DEFAULT_COLLECTION_PERCENTILE,br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),br.DISABLED=new br(-1,0,0);var il=class t{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new t(0)}static kn(){return new t(-1)}};var dI=class{constructor(){this.changes=new Qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,sr.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var hI=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var fI=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zu(r.mutation,i,Sr.empty(),It.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ye()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ye()){let i=Gs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Wu();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ye()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=ui(),o=Yu(),a=function(){return Yu()}();return n.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof li)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Zu(d.mutation,l,d.mutation.getFieldMask(),It.now())):o.set(l.key,Sr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),n.forEach((l,d)=>{var f;return a.set(l,new hI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Yu(),i=new it((o,a)=>o-a),s=ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=n.get(c);if(l===null)return;let d=r.get(c)||Sr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||ye()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=rx();d.forEach(g=>{if(!s.has(g)){let _=ux(n.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return k.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):k.resolve(Gs()),a=-1,c=s;return o.next(l=>k.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?k.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,ye())).next(d=>({batchId:a,changes:nx(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new z(n)).next(r=>{let i=Wu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Wu();return this.indexManager.getCollectionParents(e,s).next(a=>k.forEach(a,c=>{let l=function(f,g){return new Zs(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,sr.newInvalidDocument(d)))});let a=Wu();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Zu(d.mutation,l,Sr.empty(),It.now()),Up(n,l)&&(a=a.insert(c,l))}),a})}};var pI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return k.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Mr(i.createTime)}}(n)),k.resolve()}getNamedQuery(e,n){return k.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:R4(i.bundledQuery),readTime:Mr(i.readTime)}}(n)),k.resolve()}};var gI=class{constructor(){this.overlays=new it(z.comparator),this.Ir=new Map}getOverlay(e,n){return k.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Gs();return k.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),k.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),k.resolve()}getOverlaysForCollection(e,n,r){let i=Gs(),s=n.length+1,o=new z(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return k.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new it((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=Gs(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Gs(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return k.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Xw(n,r));let s=this.Ir.get(n);s===void 0&&(s=ye(),this.Ir.set(n,s)),this.Ir.set(n,s.add(r.key))}};var mI=class{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return k.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,k.resolve()}};var sl=class{constructor(){this.Tr=new Ut(mt.Er),this.dr=new Ut(mt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){let r=new mt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new mt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){let n=new z(new Je([])),r=new mt(n,e),i=new mt(n,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let n=new z(new Je([])),r=new mt(n,e),i=new mt(n,e+1),s=ye();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new mt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},mt=class{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return z.comparator(e.key,n.key)||Ae(e.wr,n.wr)}static Ar(e,n){return Ae(e.wr,n.wr)||z.comparator(e.key,n.key)}};var _I=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ut(mt.Er)}checkEmpty(e){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Zw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new mt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return k.resolve(o)}lookupMutationBatch(e,n){return k.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.vr(r),s=i<0?0:i;return k.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new mt(n,0),i=new mt(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),k.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ut(Ae);return n.forEach(i=>{let s=new mt(i,0),o=new mt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),k.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let o=new mt(new z(s),0),a=new Ut(Ae);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),k.resolve(this.Cr(a))}Cr(e){let n=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){xe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return k.forEach(n.mutations,i=>{let s=new mt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){let r=new mt(n,0),i=this.br.firstAfterOrEqual(r);return k.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,k.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var yI=class{constructor(e){this.Mr=e,this.docs=function(){return new it(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():sr.newInvalidDocument(n))}getEntries(e,n){let r=ui();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():sr.newInvalidDocument(i))}),k.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ui(),o=n.path,a=new z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||VW(LW(d),r)<=0||(i.has(d.key)||Up(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return k.resolve(s)}getAllFromCollectionGroup(e,n,r,i){te()}Or(e,n){return k.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vI(this)}getSize(e){return k.resolve(this.size)}},vI=class extends dI{constructor(e){super(),this.cr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),k.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}};var wI=class{constructor(e){this.persistence=e,this.Nr=new Qi(n=>oE(n),aE),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.Lr=0,this.Br=new sl,this.targetCount=0,this.kr=il.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),k.resolve()}getLastRemoteSnapshotVersion(e){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return k.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),k.resolve()}Kn(e){this.Nr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.kr=new il(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,k.resolve()}updateTargetData(e,n){return this.Kn(n),k.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),k.waitFor(s).next(()=>i)}getTargetCount(e){return k.resolve(this.targetCount)}getTargetData(e,n){let r=this.Nr.get(n)||null;return k.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),k.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),k.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),k.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Br.yr(n);return k.resolve(r)}containsKey(e,n){return k.resolve(this.Br.containsKey(n))}};var II=class{constructor(e,n){this.qr={},this.overlays={},this.Qr=new $M(0),this.Kr=!1,this.Kr=!0,this.$r=new mI,this.referenceDelegate=e(this),this.Ur=new wI(this),this.indexManager=new uI,this.remoteDocumentCache=function(i){return new yI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new cI(n),this.Gr=new pI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new _I(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new EI(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,n){return k.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}},EI=class extends Pw{constructor(e){super(),this.currentSequenceNumber=e}},CI=class t{constructor(e){this.persistence=e,this.Jr=new sl,this.Yr=null}static Zr(e){return new t(e)}get Xr(){if(this.Yr)return this.Yr;throw te()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),k.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),k.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),k.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return k.or([()=>k.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}};var TI=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=ye(),i=ye();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var DI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var bI=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return QD()?8:jW(Ot())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new DI;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(zu()<=Ft.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Ta(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),k.resolve()):(zu()<=Ft.DEBUG&&B("QueryEngine","Query:",Ta(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(zu()<=Ft.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Ta(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nr(n))):k.resolve())}Yi(e,n){if(_M(n))return k.resolve(null);let r=Nr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kw(n,null,"F"),r=Nr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=ye(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(n,a);return this.ns(n,l,o,c.readTime)?this.Yi(e,Kw(n,null,"F")):this.rs(e,l,n,c)}))})))}Zi(e,n,r,i){return _M(n)||i.isEqual(le.min())?k.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(n,s);return this.ns(n,o,r,i)?k.resolve(null):(zu()<=Ft.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ta(n)),this.rs(e,o,n,FW(i,-1)).next(a=>a))})}ts(e,n){let r=new Ut(ex(e));return n.forEach((i,s)=>{Up(e,s)&&(r=r.add(s))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,n,r){return zu()<=Ft.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Ta(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qs.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var SI=class{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new it(Ae),this._s=new Qi(s=>oE(s),aE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}};function N4(t,e,n,r){return new SI(t,e,n,r)}function vx(t,e){return y(this,null,function*(){let n=ae(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=ye();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function M4(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),_=k.resolve();return g.forEach(w=>{_=_.next(()=>d.getEntry(c,w)).next(R=>{let S=l.docVersions.get(w);xe(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ye();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function wx(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function x4(t,e){let n=ae(t),r=e.snapshotVersion,i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(n.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(jt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(R,S,P){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,_,d)&&a.push(n.Ur.updateTargetData(s,_))});let c=ui(),l=ye();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(P4(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(le.min())){let d=n.Ur.getLastRemoteSnapshotVersion(s).next(f=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return k.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(n.os=i,s))}function P4(t,e,n){let r=ye(),i=ye();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ui();return n.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(le.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function k4(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function O4(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(s=>s?(i=s,k.resolve(i)):n.Ur.allocateTargetId(r).next(o=>(i=new rl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}function AI(t,e,n){return y(this,null,function*(){let r=ae(t),i=r.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!fl(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function AM(t,e,n){let r=ae(t),i=le.min(),s=ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=ae(c),g=f._s.get(d);return g!==void 0?k.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,Nr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:ye())).next(a=>(F4(r,ZW(e),a),{documents:a,Ts:s})))}function F4(t,e,n){let r=t.us.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.us.set(e,r)}var yp=class{constructor(){this.activeTargetIds=r4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var RI=class{constructor(){this.so=new yp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new yp,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var NI=class{_o(e){}shutdown(){}};var vp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var np=null;function Ew(){return np===null?np=function(){return 268435456+Math.round(2147483648*Math.random())}():np++,"0x"+np.toString(16)}var L4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var MI=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Vt="WebChannelConnection",xI=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(n,r,i,s,o){let a=Ew(),c=this.xo(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(n,c,l,i).then(d=>(B("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Na("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(n,r,i,s,o,a){return this.Mo(n,r,i,s,o)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$a}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}xo(n,r){let i=L4[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){let s=Ew();return new Promise((o,a)=>{let c=new mw;c.setWithCredentials(!0),c.listenOnce(_w.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Gu.NO_ERROR:let d=c.getResponseJson();B(Vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case Gu.TIMEOUT:B(Vt,`RPC '${e}' ${s} timed out`),a(new j(M.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:let f=c.getStatus();if(B(Vt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let w=function(S){let P=S.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(P)>=0?P:M.UNKNOWN}(_.status);a(new j(w,_.message))}else a(new j(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new j(M.UNAVAILABLE,"Connection failed."));break;default:te()}}finally{B(Vt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);B(Vt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",l,r,15)})}Bo(e,n,r){let i=Ew(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ww(),a=vw(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let d=s.join("");B(Vt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,_=!1,w=new MI({Io:S=>{_?B(Vt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(B(Vt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),B(Vt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),R=(S,P,U)=>{S.listen(P,$=>{try{U($)}catch(W){setTimeout(()=>{throw W},0)}})};return R(f,Ca.EventType.OPEN,()=>{_||(B(Vt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),R(f,Ca.EventType.CLOSE,()=>{_||(_=!0,B(Vt,`RPC '${e}' stream ${i} transport closed`),w.So())}),R(f,Ca.EventType.ERROR,S=>{_||(_=!0,Na(Vt,`RPC '${e}' stream ${i} transport errored:`,S),w.So(new j(M.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ca.EventType.MESSAGE,S=>{var P;if(!_){let U=S.data[0];xe(!!U);let $=U,W=$.error||((P=$[0])===null||P===void 0?void 0:P.error);if(W){B(Vt,`RPC '${e}' stream ${i} received error:`,W);let Oe=W.status,J=function(I){let T=gt[I];if(T!==void 0)return dx(T)}(Oe),C=W.message;J===void 0&&(J=M.INTERNAL,C="Unknown error status: "+Oe+" with message "+W.message),_=!0,w.So(new j(J,C)),f.close()}else B(Vt,`RPC '${e}' stream ${i} received:`,U),w.bo(U)}}),R(a,yw.STAT_EVENT,S=>{S.stat===ep.PROXY?B(Vt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===ep.NOPROXY&&B(Vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function Cw(){return typeof document<"u"?document:null}function jp(t){return new rI(t,!0)}var wp=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Ip=class{constructor(e,n,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new wp(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,n){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ai(n.toString()),ai("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(n)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{let i=new j(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){let r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},PI=class extends Ip{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let n=y4(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Mr(o.readTime):le.min()}(e);return this.listener.d_(n,r)}A_(e){let n={};n.database=aI(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=zw(c)?{documents:I4(s,c)}:{query:E4(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=hx(s,o.resumeToken);let l=iI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=mp(s,o.snapshotVersion.toTimestamp());let l=iI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=T4(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){let n={};n.database=aI(this.serializer),n.removeTarget=e,this.a_(n)}},kI=class extends Ip{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return xe(!!e.streamToken),this.lastStreamToken=e.streamToken,xe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){xe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let n=w4(e.writeResults,e.commitTime),r=Mr(e.commitTime);return this.listener.g_(r,n)}p_(){let e={};e.database=aI(this.serializer),this.a_(e)}m_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>v4(this.serializer,r))};this.a_(n)}};var OI=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,sI(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(M.UNKNOWN,s.toString())})}Lo(e,n,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,sI(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new j(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},FI=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ai(n),this.D_=!1):B("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var LI=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){no(this)&&(B("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=ae(c);l.L_.add(4),yield pl(l),l.q_.set("Unknown"),l.L_.delete(4),yield Bp(l)})}(this))}))}),this.q_=new FI(r,i)}};function Bp(t){return y(this,null,function*(){if(no(t))for(let e of t.B_)yield e(!0)})}function pl(t){return y(this,null,function*(){for(let e of t.B_)yield e(!1)})}function Ix(t,e){let n=ae(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),pE(n)?fE(n):qa(n).r_()&&hE(n,e))}function dE(t,e){let n=ae(t),r=qa(n);n.N_.delete(e),r.r_()&&Ex(n,e),n.N_.size===0&&(r.r_()?r.o_():no(n)&&n.q_.set("Unknown"))}function hE(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}qa(t).A_(e)}function Ex(t,e){t.Q_.xe(e),qa(t).R_(e)}function fE(t){t.Q_=new nI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),qa(t).start(),t.q_.v_()}function pE(t){return no(t)&&!qa(t).n_()&&t.N_.size>0}function no(t){return ae(t).L_.size===0}function Cx(t){t.Q_=void 0}function V4(t){return y(this,null,function*(){t.q_.set("Online")})}function U4(t){return y(this,null,function*(){t.N_.forEach((e,n)=>{hE(t,e)})})}function j4(t,e){return y(this,null,function*(){Cx(t),pE(t)?(t.q_.M_(e),fE(t)):t.q_.set("Unknown")})}function B4(t,e,n){return y(this,null,function*(){if(t.q_.set("Online"),e instanceof pp&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ep(t,r)}else if(e instanceof Aa?t.Q_.Ke(e):e instanceof fp?t.Q_.He(e):t.Q_.We(e),!n.isEqual(le.min()))try{let r=yield wx(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(jt.EMPTY_BYTE_STRING,d.snapshotVersion)),Ex(s,c);let f=new rl(d.target,c,l,d.sequenceNumber);hE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){B("RemoteStore","Failed to raise snapshot:",r),yield Ep(t,r)}})}function Ep(t,e,n){return y(this,null,function*(){if(!fl(e))throw e;t.L_.add(1),yield pl(t),t.q_.set("Offline"),n||(n=()=>wx(t.localStore)),t.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){B("RemoteStore","Retrying IndexedDB access"),yield n(),t.L_.delete(1),yield Bp(t)}))})}function Tx(t,e){return e().catch(n=>Ep(t,n,e))}function $p(t){return y(this,null,function*(){let e=ae(t),n=Yi(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$4(e);)try{let i=yield k4(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,H4(e,i)}catch(i){yield Ep(e,i)}Dx(e)&&bx(e)})}function $4(t){return no(t)&&t.O_.length<10}function H4(t,e){t.O_.push(e);let n=Yi(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Dx(t){return no(t)&&!Yi(t).n_()&&t.O_.length>0}function bx(t){Yi(t).start()}function q4(t){return y(this,null,function*(){Yi(t).p_()})}function G4(t){return y(this,null,function*(){let e=Yi(t);for(let n of t.O_)e.m_(n.mutations)})}function z4(t,e,n){return y(this,null,function*(){let r=t.O_.shift(),i=Jw.from(r,e,n);yield Tx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield $p(t)})}function W4(t,e){return y(this,null,function*(){e&&Yi(t).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return l4(o)&&o!==M.ABORTED}(i.code)){let s=r.O_.shift();Yi(r).s_(),yield Tx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield $p(r)}})}(t,e)),Dx(t)&&bx(t)})}function RM(t,e){return y(this,null,function*(){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");let r=no(n);n.L_.add(3),yield pl(n),r&&n.q_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),yield Bp(n)})}function K4(t,e){return y(this,null,function*(){let n=ae(t);e?(n.L_.delete(2),yield Bp(n)):e||(n.L_.add(2),yield pl(n),n.q_.set("Unknown"))})}function qa(t){return t.K_||(t.K_=function(n,r,i){let s=ae(n);return s.w_(),new PI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:V4.bind(null,t),Ro:U4.bind(null,t),mo:j4.bind(null,t),d_:B4.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.K_.s_(),pE(t)?fE(t):t.q_.set("Unknown")):(yield t.K_.stop(),Cx(t))}))),t.K_}function Yi(t){return t.U_||(t.U_=function(n,r,i){let s=ae(n);return s.w_(),new kI(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:q4.bind(null,t),mo:W4.bind(null,t),f_:G4.bind(null,t),g_:z4.bind(null,t)}),t.B_.push(e=>y(this,null,function*(){e?(t.U_.s_(),yield $p(t)):(yield t.U_.stop(),t.O_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))}))),t.U_}var VI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function gE(t,e){if(ai("AsyncQueue",`${e}: ${t}`),fl(t))return new j(M.UNAVAILABLE,`${e}: ${t}`);throw t}var Cp=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||z.comparator(n.key,r.key):(n,r)=>z.comparator(n.key,r.key),this.keyedMap=Wu(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Tp=class{constructor(){this.W_=new it(z.comparator)}track(e){let n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):te():this.W_=this.W_.insert(n,e)}G_(){let e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}},ja=class t{constructor(e,n,r,i,s,o,a,c,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Cp.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var UI=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},jI=class{constructor(){this.queries=NM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){let i=ae(n),s=i.queries;i.queries=NM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new j(M.ABORTED,"Firestore shutting down"))}};function NM(){return new Qi(t=>XM(t),Vp)}function Sx(t,e){return y(this,null,function*(){let n=ae(t),r=3,i=e.query,s=n.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new UI,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield n.onListen(i,!0);break;case 1:s.z_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=gE(o,`Initialization of query '${Ta(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&mE(n)})}function Ax(t,e){return y(this,null,function*(){let n=ae(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Q4(t,e){let n=ae(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&mE(n)}function Y4(t,e,n){let r=ae(t),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(n);r.queries.delete(e)}function mE(t){t.Y_.forEach(e=>{e.next()})}var BI,MM;(MM=BI||(BI={})).ea="default",MM.Cache="cache";var Dp=class{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;let r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==BI.Cache}};var bp=class{constructor(e){this.key=e}},Sp=class{constructor(e){this.key=e}},$I=class{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ye(),this.mutatedKeys=ye(),this.Aa=ex(e),this.Ra=new Cp(this.Aa)}get Va(){return this.Ta}ma(e,n){let r=n?n.fa:new Tp,i=n?n.Ra:this.Ra,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=Up(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;g&&_?g.data.isEqual(_.data)?w!==R&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(_,w){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return te()}};return R(_)-R(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=n&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new ja(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Tp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ye(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Sp(r))}),this.da.forEach(r=>{e.has(r)||n.push(new bp(r))}),n}ba(e){this.Ta=e.Ts,this.da=ye();let n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return ja.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},HI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},qI=class{constructor(e){this.key=e,this.va=!1}},GI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Qi(a=>XM(a),Vp),this.Ma=new Map,this.xa=new Set,this.Oa=new it(z.comparator),this.Na=new Map,this.La=new sl,this.Ba={},this.ka=new Map,this.qa=il.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Z4(t,e,n=!0){return y(this,null,function*(){let r=kx(t),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield Rx(r,e,n,!0),i})}function J4(t,e){return y(this,null,function*(){let n=kx(t);yield Rx(n,e,!0,!1)})}function Rx(t,e,n,r){return y(this,null,function*(){let i=yield O4(t.localStore,Nr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n),a;return r&&(a=yield X4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ix(t.remoteStore,i),a})}function X4(t,e,n,r,i){return y(this,null,function*(){t.Ka=(f,g,_)=>function(R,S,P,U){return y(this,null,function*(){let $=S.view.ma(P);$.ns&&($=yield AM(R.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,$)));let W=U&&U.targetChanges.get(S.targetId),Oe=U&&U.targetMismatches.get(S.targetId)!=null,J=S.view.applyChanges($,R.isPrimaryClient,W,Oe);return PM(R,S.targetId,J.wa),J.snapshot})}(t,f,g,_);let s=yield AM(t.localStore,e,!0),o=new $I(e,s.Ts),a=o.ma(s.documents),c=nl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,c);PM(t,n,l.wa);let d=new HI(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),l.snapshot})}function e3(t,e,n){return y(this,null,function*(){let r=ae(t),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!Vp(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield AI(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dE(r.remoteStore,i.targetId),zI(r,i.targetId)}).catch(hl))):(zI(r,i.targetId),yield AI(r.localStore,i.targetId,!0))})}function t3(t,e){return y(this,null,function*(){let n=ae(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dE(n.remoteStore,r.targetId))})}function n3(t,e,n){return y(this,null,function*(){let r=u3(t);try{let i=yield function(o,a){let c=ae(o),l=It.now(),d=a.reduce((_,w)=>_.add(w.key),ye()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=ui(),R=ye();return c.cs.getEntries(_,d).next(S=>{w=S,w.forEach((P,U)=>{U.isValidDocument()||(R=R.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,w)).next(S=>{f=S;let P=[];for(let U of a){let $=u4(U,f.get(U.key).overlayedDocument);$!=null&&P.push(new li(U.key,$,zM($.value.mapValue),zi.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,P,a)}).next(S=>{g=S;let P=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(_,S.batchId,P)})}).then(()=>({batchId:g.batchId,changes:nx(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new it(Ae)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,n),yield gl(r,i.changes),yield $p(r.remoteStore)}catch(i){let s=gE(i,"Failed to persist write");n.reject(s)}})}function Nx(t,e){return y(this,null,function*(){let n=ae(t);try{let r=yield x4(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Na.get(s);o&&(xe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?xe(o.va):i.removedDocuments.size>0&&(xe(o.va),o.va=!1))}),yield gl(n,r,e)}catch(r){yield hl(r)}})}function xM(t,e,n){let r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ae(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&mE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function r3(t,e,n){return y(this,null,function*(){let r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new it(z.comparator);o=o.insert(s,sr.newNoDocument(s,le.min()));let a=ye().add(s),c=new hp(le.min(),new Map,new it(Ae),o,a);yield Nx(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),_E(r)}else yield AI(r.localStore,e,!1).then(()=>zI(r,e,n)).catch(hl)})}function i3(t,e){return y(this,null,function*(){let n=ae(t),r=e.batch.batchId;try{let i=yield M4(n.localStore,e);xx(n,r,null),Mx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield gl(n,i)}catch(i){yield hl(i)}})}function s3(t,e,n){return y(this,null,function*(){let r=ae(t);try{let i=yield function(o,a){let c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(xe(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);xx(r,e,n),Mx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield gl(r,i)}catch(i){yield hl(i)}})}function Mx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function xx(t,e,n){let r=ae(t),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function zI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Px(t,r)})}function Px(t,e){t.xa.delete(e.path.canonicalString());let n=t.Oa.get(e);n!==null&&(dE(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_E(t))}function PM(t,e,n){for(let r of n)r instanceof bp?(t.La.addReference(r.key,e),o3(t,r)):r instanceof Sp?(B("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Px(t,r.key)):te()}function o3(t,e){let n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(B("SyncEngine","New document in limbo: "+n),t.xa.add(r),_E(t))}function _E(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){let e=t.xa.values().next().value;t.xa.delete(e);let n=new z(Je.fromString(e)),r=t.qa.next();t.Na.set(r,new qI(n)),t.Oa=t.Oa.insert(n,r),Ix(t.remoteStore,new rl(Nr(cE(n.path)),r,"TargetPurposeLimboResolution",$M.oe))}}function gl(t,e,n){return y(this,null,function*(){let r=ae(t),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,n).then(l=>{var d;if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=n?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=TI.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=ae(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>k.forEach(l,g=>k.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>k.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!fl(f))throw f;B("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let _=d.os.get(g),w=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function a3(t,e){return y(this,null,function*(){let n=ae(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());let r=yield vx(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new j(M.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield gl(n,r.hs)}})}function c3(t,e){let n=ae(t),r=n.Na.get(e);if(r&&r.va)return ye().add(r.key);{let i=ye(),s=n.Ma.get(e);if(!s)return i;for(let o of s){let a=n.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function kx(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r3.bind(null,e),e.Ca.d_=Q4.bind(null,e.eventManager),e.Ca.$a=Y4.bind(null,e.eventManager),e}function u3(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=i3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s3.bind(null,e),e}var kM=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(n){return y(this,null,function*(){this.serializer=jp(n.databaseInfo.databaseId),this.sharedClientState=this.Wa(n),this.persistence=this.Ga(n),yield this.persistence.start(),this.localStore=this.za(n),this.gcScheduler=this.ja(n,this.localStore),this.indexBackfillerScheduler=this.Ha(n,this.localStore)})}ja(n,r){return null}Ha(n,r){return null}za(n){return N4(this.persistence,new bI,n.initialUser,this.serializer)}Ga(n){return new II(CI.Zr,this.serializer)}Wa(n){return new RI}terminate(){return y(this,null,function*(){var n,r;(n=this.gcScheduler)===null||n===void 0||n.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return t.provider={build:()=>new t},t})();var l3=(()=>{class t{initialize(n,r){return y(this,null,function*(){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=a3.bind(null,this.syncEngine),yield K4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(n){return function(){return new jI}()}createDatastore(n){let r=jp(n.databaseInfo.databaseId),i=function(o){return new xI(o)}(n.databaseInfo);return function(o,a,c,l){return new OI(o,a,c,l)}(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return function(i,s,o,a,c){return new LI(i,s,o,a,c)}(this.localStore,this.datastore,n.asyncQueue,r=>xM(this.syncEngine,r,0),function(){return vp.D()?new vp:new NI}())}createSyncEngine(n,r){return function(s,o,a,c,l,d,f){let g=new GI(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var n,r;yield function(s){return y(this,null,function*(){let o=ae(s);B("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield pl(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(n=this.datastore)===null||n===void 0||n.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return t.provider={build:()=>new t},t})();var Ap=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ai("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var WI=class{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tt.UNAUTHENTICATED,this.clientId=op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){B("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=gE(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Tw(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield vx(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function OM(t,e){return y(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield d3(t);B("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>RM(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>RM(e.remoteStore,i)),t._onlineComponents=e})}function d3(t){return y(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tw(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!function(i){return i.name==="FirebaseError"?i.code===M.FAILED_PRECONDITION||i.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Na("Error using user provided cache. Falling back to memory cache: "+n),yield Tw(t,new kM)}}else B("FirestoreClient","Using default OfflineComponentProvider"),yield Tw(t,new kM);return t._offlineComponents})}function Ox(t){return y(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),yield OM(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),yield OM(t,new l3))),t._onlineComponents})}function h3(t){return Ox(t).then(e=>e.syncEngine)}function KI(t){return y(this,null,function*(){let e=yield Ox(t),n=e.eventManager;return n.onListen=Z4.bind(null,e.syncEngine),n.onUnlisten=e3.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=J4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=t3.bind(null,e.syncEngine),n})}function f3(t,e,n={}){let r=new Ar;return t.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new Ap({next:g=>{d.Za(),o.enqueueAndForget(()=>Ax(s,f)),g.fromCache&&c.source==="server"?l.reject(new j(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Dp(a,d,{includeMetadataChanges:!0,_a:!0});return Sx(s,f)}(yield KI(t),t.asyncQueue,e,n,r)})),r.promise}function Fx(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var FM=new Map;function Lx(t,e,n){if(!n)throw new j(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function p3(t,e,n,r){if(e===!0&&r===!0)throw new j(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function LM(t){if(!z.isDocumentKey(t))throw new j(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function VM(t){if(z.isDocumentKey(t))throw new j(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":te()}function oi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Hp(t);throw new j(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Rp=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new j(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}p3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fx((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new j(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ba=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new j(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new j(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dw;switch(r.type){case"firstParty":return new Rw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new j(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=FM.get(n);r&&(B("ComponentProvider","Removing Datastore"),FM.delete(n),r.terminate())}(this),Promise.resolve()}};function Vx(t,e,n,r={}){var i;let s=(t=oi(t,Ba))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Na("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Tt.MOCK_USER;else{a=Eo(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Tt(l)}t._authCredentials=new bw(new sp(a,c))}}var to=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},hn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Wi=class t extends to{constructor(e,n,r){super(e,n,cE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new hn(this.firestore,null,new z(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Ux(t,e,...n){if(t=ve(t),Lx("collection","path",e),t instanceof Ba){let r=Je.fromString(e,...n);return VM(r),new Wi(t,null,r)}{if(!(t instanceof hn||t instanceof Wi))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Je.fromString(e,...n));return VM(r),new Wi(t.firestore,null,r)}}function jx(t,e,...n){if(t=ve(t),arguments.length===1&&(e=op.newId()),Lx("doc","path",e),t instanceof Ba){let r=Je.fromString(e,...n);return LM(r),new hn(t,null,new z(r))}{if(!(t instanceof hn||t instanceof Wi))throw new j(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Je.fromString(e,...n));return LM(r),new hn(t.firestore,t instanceof Wi?t.converter:null,new z(r))}}var Np=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new wp(this,"async_queue_retry"),this.Vu=()=>{let r=Cw();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Cw();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Cw();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Ar;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fl(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ai("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=VI.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&te()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};function UM(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var Zi=class extends Ba{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Np,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Np(e),this._firestoreClient=void 0,yield e}})}};function Bx(t,e){let n=typeof t=="object"?t:dt(),r=typeof t=="string"?t:e||"(default)",i=lt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Ii("firestore");s&&Vx(i,...s)}return i}function yE(t){if(t._terminated)throw new j(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||g3(t),t._firestoreClient}function g3(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,l,d){return new kw(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Fx(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new WI(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(t._componentsProvider))}var ol=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(jt.fromBase64String(e))}catch(n){throw new j(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var al=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mp=class{constructor(e){this._methodName=e}};var cl=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}};var ul=class{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var m3=/^__.*__$/,QI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new li(e,this.data,this.fieldMask,n,this.fieldTransforms):new eo(e,this.data,n,this.fieldTransforms)}};function $x(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw te()}}var YI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return xp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if($x(this.Cu)&&m3.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ZI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jp(e)}Qu(e,n,r,i=!1){return new YI({Cu:e,methodName:n,qu:r,path:Cn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Hx(t){let e=t._freezeSettings(),n=jp(t._databaseId);return new ZI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function _3(t,e,n,r,i,s={}){let o=t.Qu(s.merge||s.mergeFields?2:0,e,n,i);zx("Data must be an object, but it was:",o,r);let a=qx(r,o),c,l;if(s.merge)c=new Sr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=v3(e,f,n);if(!o.contains(g))throw new j(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);I3(d,g)||d.push(g)}c=new Sr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new QI(new ir(a),c,l)}function y3(t,e,n,r=!1){return vE(n,t.Qu(r?4:3,e))}function vE(t,e){if(Gx(t=ve(t)))return zx("Unsupported field value:",e,t),qx(t,e);if(t instanceof Mp)return function(r,i){if(!$x(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=vE(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return i4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=It.fromDate(r);return{timestampValue:mp(i.serializer,s)}}if(r instanceof It){let s=new It(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mp(i.serializer,s)}}if(r instanceof cl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ol)return{bytesValue:hx(i.serializer,r._byteString)};if(r instanceof hn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ul)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return uE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Hp(r)}`)}(t,e)}function qx(t,e){let n={};return HM(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ha(t,(r,i)=>{let s=vE(i,e.Mu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Gx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof It||t instanceof cl||t instanceof ol||t instanceof hn||t instanceof Mp||t instanceof ul)}function zx(t,e,n){if(!Gx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Hp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function v3(t,e,n){if((e=ve(e))instanceof al)return e._internalPath;if(typeof e=="string")return Wx(t,e);throw xp("Field path arguments must be of type string or ",t,!1,void 0,n)}var w3=new RegExp("[~\\*/\\[\\]]");function Wx(t,e,n){if(e.search(w3)>=0)throw xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new al(...e.split("."))._internalPath}catch{throw xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xp(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new j(M.INVALID_ARGUMENT,a+t+c)}function I3(t,e){return t.some(n=>n.isEqual(e))}var Pp=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new hn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new JI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(wE("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},JI=class extends Pp{data(){return super.data()}};function wE(t,e){return typeof e=="string"?Wx(t,e):e instanceof al?e._internalPath:e._delegate._internalPath}function Kx(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ll=class{},XI=class extends ll{};function Qx(t,e,...n){let r=[];e instanceof ll&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof eE).length,a=s.filter(c=>c instanceof kp).length;if(o>1||o>0&&a>0)throw new j(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var kp=class t extends XI{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return Zx(e._query,n),new to(e.firestore,e.converter,Ww(e._query,n))}_parse(e){let n=Hx(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new j(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){BM(f,d);let _=[];for(let w of f)_.push(jM(c,s,w));g={arrayValue:{values:_}}}else g=jM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||BM(f,d),g=y3(a,o,f,d==="in"||d==="not-in");return _t.create(l,d,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};function Yx(t,e,n){let r=e,i=wE("where",t);return kp._create(i,r,n)}var eE=class t extends ll{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:or.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)Zx(o,c),o=Ww(o,c)}(e._query,n),new to(e.firestore,e.converter,Ww(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function jM(t,e,n){if(typeof(n=ve(n))=="string"){if(n==="")throw new j(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JM(e)&&n.indexOf("/")!==-1)throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(Je.fromString(n));if(!z.isDocumentKey(r))throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dM(t,new z(r))}if(n instanceof hn)return dM(t,n._key);throw new j(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hp(n)}.`)}function BM(t,e){if(!Array.isArray(t)||t.length===0)throw new j(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Zx(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var tE=class{convertValue(e,n="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw te()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Ha(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;let s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Qe(o.doubleValue));return new ul(s)}convertGeoPoint(e){return new cl(Qe(e.latitude),Qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=iE(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xu(e));default:return null}}convertTimestamp(e){let n=ci(e);return new It(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Je.fromString(e);xe(yx(r));let i=new lp(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(n)||ai(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function E3(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ws=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Op=class extends Pp{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ra(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(wE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Ra=class extends Op{data(e={}){return super.data(e)}},Fp=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ws(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ra(this._firestore,this._userDataWriter,r.key,r,new Ws(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ra(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ws(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:C3(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function C3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return te()}}var dl=class extends tE{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new hn(this.firestore,null,n)}};function Jx(t){t=oi(t,to);let e=oi(t.firestore,Zi),n=yE(e),r=new dl(e);return Kx(t._query),f3(n,t._query).then(i=>new Fp(e,r,t,i))}function Xx(t,e,n){t=oi(t,hn);let r=oi(t.firestore,Zi),i=E3(t.converter,e,n);return tP(r,[_3(Hx(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,zi.none())])}function eP(t){return tP(oi(t.firestore,Zi),[new tl(t._key,zi.none())])}function IE(t,...e){var n,r,i;t=ve(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||UM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(UM(e[o])){let f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(t instanceof hn)l=oi(t.firestore,Zi),d=cE(t._key.path),c={next:f=>{e[o]&&e[o](T3(l,t,f))},error:e[o+1],complete:e[o+2]};else{let f=oi(t,to);l=oi(f.firestore,Zi),d=f._query;let g=new dl(l);c={next:_=>{e[o]&&e[o](new Fp(l,g,f,_))},error:e[o+1],complete:e[o+2]},Kx(t._query)}return function(g,_,w,R){let S=new Ap(R),P=new Dp(_,S,w);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Sx(yield KI(g),P)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Ax(yield KI(g),P)}))}}(yE(l),d,a,c)}function tP(t,e){return function(r,i){let s=new Ar;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return n3(yield h3(r),i,s)})),s.promise}(yE(t),e)}function T3(t,e,n){let r=n.docs.get(e._key),i=new dl(t);return new Op(t,i,e._key,r,new Ws(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){$a=i})(rn),ot(new st("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Zi(new Sw(r.getProvider("auth-internal")),new Mw(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new j(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lp(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),q(aM,"4.7.3",e),q(aM,"4.7.3","esm2017")})();var qp=function(){return qp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qp.apply(this,arguments)};var S3={includeMetadataChanges:!1};function nP(t,e){return e===void 0&&(e=S3),new oe(function(n){var r=IE(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function rP(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:qp(qp({},r),(n={},n[e.idField]=t.id,n))}function iP(t){return nP(t,{includeMetadataChanges:!0}).pipe(Y(function(e){return e.docs}))}function sP(t,e){return e===void 0&&(e={}),iP(t).pipe(Y(function(n){return n.map(function(r){return rP(r,e)})}))}var ro=class{constructor(e){return e}},oP="firestore",EE=class{constructor(){return ut(oP)}};var CE=new V("angularfire2.firestore-instances");function A3(t,e){let n=pt(oP,t,e);return n&&new ro(n)}function R3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ro(r)}}var N3={provide:EE,deps:[[new ie,CE]]},M3={provide:ro,useFactory:A3,deps:[[new ie,CE],ze]};function aP(t,...e){return q("angularfire",Ge.full,"fst"),Be([M3,N3,{provide:CE,useFactory:R3(t),multi:!0,deps:[X,_e,rt,Ze,[new ie,rr],[new ie,dn],...e]}])}var Gp=De(sP,!0);var zp=De(Ux,!0);var cP=De(eP,!0);var Wp=De(jx,!0);var TE=De(Jx,!0);var uP=De(Bx,!0);var lP=De(Qx,!0);var DE=De(Xx,!0);var dP=De(Yx,!0);var hP="@firebase/database",fP="1.0.8";var CC="";function x3(t){CC=t}var PE=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Et(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dd(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var kE=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return hr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var GP=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new PE(e)}}catch{}return new kE},so=GP("localStorage"),OE=GP("sessionStorage");var Ka=new fr("@firebase/database"),P3=function(){let t=1;return function(){return t++}}(),zP=function(t){let e=tb(t),n=new JD;n.update(e);let r=n.digest();return $D.encodeByteArray(r)},Al=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Al.apply(null,r):typeof r=="object"?e+=Et(r):e+=r,e+=" "}return e},oo=null,pP=!0,k3=function(t,e){L(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Ka.logLevel=Ft.VERBOSE,oo=Ka.log.bind(Ka),e&&OE.set("logging_enabled",!0)):typeof t=="function"?oo=t:(oo=null,OE.remove("logging_enabled"))},Bt=function(...t){if(pP===!0&&(pP=!1,oo===null&&OE.get("logging_enabled")===!0&&k3(!0)),oo){let e=Al.apply(null,t);oo(e)}},Rl=function(t){return function(...e){Bt(t,...e)}},FE=function(...t){let e="FIREBASE INTERNAL ERROR: "+Al(...t);Ka.error(e)},hi=function(...t){let e=`FIREBASE FATAL ERROR: ${Al(...t)}`;throw Ka.error(e),new Error(e)},Tn=function(...t){let e="FIREBASE WARNING: "+Al(...t);Ka.warn(e)},O3=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},WP=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},F3=function(t){if(lr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Ya="[MIN_NAME]",ao="[MAX_NAME]",rc=function(t,e){if(t===e)return 0;if(t===Ya||e===ao)return-1;if(e===Ya||t===ao)return 1;{let n=gP(t),r=gP(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},L3=function(t,e){return t===e?0:t<e?-1:1},ml=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Et(e))},TC=function(t){if(typeof t!="object"||t===null)return Et(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=Et(e[r]),n+=":",n+=TC(t[e[r]]);return n+="}",n},KP=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function qn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var QP=function(t){L(!WP(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,c;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(c=n;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},V3=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},U3=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var j3=new RegExp("^-?(0*)\\d{1,10}$"),B3=-2147483648,$3=2147483647,gP=function(t){if(j3.test(t)){let e=Number(t);if(e>=B3&&e<=$3)return e}return null},Nl=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},H3=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Il=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var LE=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var VE=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Bt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Tn(e)}},El=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Qp="5",YP="v",ZP="s",JP="r",XP="f",ek=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tk="ls",nk="p",UE="ac",rk="websocket",ik="long_polling";var Yp=class{constructor(e,n,r,i,s=!1,o="",a=!1,c=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=so.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&so.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function q3(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function sk(t,e,n){L(typeof e=="string","typeof type must == string"),L(typeof n=="object","typeof params must == object");let r;if(e===rk)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ik)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);q3(t)&&(n.ns=t.namespace);let i=[];return qn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var jE=class{constructor(){this.counters_={}}incrementCounter(e,n=1){hr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return GD(this.counters_)}};var bE={},SE={};function DC(t){let e=t.toString();return bE[e]||(bE[e]=new jE),bE[e]}function G3(t,e){let n=t.toString();return SE[n]||(SE[n]=e()),SE[n]}var BE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Nl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var mP="start",z3="close",W3="pLPCommand",K3="pRTLPCB",ok="id",ak="pw",ck="ser",Q3="cb",Y3="seg",Z3="ts",J3="d",X3="dframe",uk=1870,lk=30,e9=uk-lk,t9=25e3,n9=3e4,$E=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Rl(e),this.stats_=DC(n),this.urlFn=c=>(this.appCheckToken&&(c[UE]=this.appCheckToken),sk(n,ik,c))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new BE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(n9)),F3(()=>{if(this.isClosed_)return;this.scriptTagHolder=new HE((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===mP)this.id=a,this.password=c;else if(o===z3)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[mP]="t",r[ck]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[Q3]=this.scriptTagHolder.uniqueCallbackIdentifier),r[YP]=Qp,this.transportSessionId&&(r[ZP]=this.transportSessionId),this.lastSessionId&&(r[tk]=this.lastSessionId),this.applicationId&&(r[nk]=this.applicationId),this.appCheckToken&&(r[UE]=this.appCheckToken),typeof location<"u"&&location.hostname&&ek.test(location.hostname)&&(r[JP]=XP);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return lr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!V3()&&!U3()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=Et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=HD(n),i=KP(r,e9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(lr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[X3]="t",r[ok]=e,r[ak]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=Et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},HE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,lr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=P3(),window[W3+this.uniqueCallbackIdentifier]=e,window[K3+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Bt("frame writing exception"),a.stack&&Bt(a.stack),Bt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Bt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[ok]=this.myID,e[ak]=this.myPW,e[ck]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+lk+r.length<=uk;){let o=this.pendingSegs.shift();r=r+"&"+Y3+i+"="+o.seg+"&"+Z3+i+"="+o.ts+"&"+J3+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(t9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){lr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{Bt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var r9=16384,i9=45e3,Zp=null;typeof MozWebSocket<"u"?Zp=MozWebSocket:typeof WebSocket<"u"&&(Zp=WebSocket);var _l=(()=>{class t{constructor(n,r,i,s,o,a,c){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Rl(this.connId),this.stats_=DC(r),this.connURL=t.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[YP]=Qp,!lr()&&typeof location<"u"&&location.hostname&&ek.test(location.hostname)&&(a[JP]=XP),r&&(a[ZP]=r),i&&(a[tk]=i),s&&(a[UE]=s),o&&(a[nk]=o),sk(n,rk,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,so.set("previous_websocket_failure",!0);try{let i;if(lr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Qp}/${CC}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Zp(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Zp!==null&&!t.forceDisallow_}static previouslyFailed(){return so.isInMemoryStorage||so.get("previous_websocket_failure")===!0}markConnectionHealthy(){so.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=dd(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(L(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=Et(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=KP(r,r9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(i9))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),s9=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[$E,_l]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=_l&&_l.isAvailable(),i=r&&!_l.previouslyFailed();if(n.webSocketOnly&&(r||Tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[_l];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),o9=6e4,a9=5e3,c9=10*1024,u9=100*1024,AE="t",_P="d",l9="s",yP="r",d9="e",vP="o",wP="a",IP="n",EP="p",h9="h",qE=class{constructor(e,n,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Rl("c:"+this.id+":"),this.transportManager_=new s9(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Il(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>u9?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>c9?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(AE in e){let n=e[AE];n===wP?this.upgradeIfSecondaryHealthy_():n===yP?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===vP&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=ml("t",e),r=ml("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:EP,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:wP,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:IP,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=ml("t",e),r=ml("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=ml(AE,e);if(_P in e){let r=e[_P];if(n===h9){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===IP){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===l9?this.onConnectionShutdown_(r):n===yP?this.onReset_(r):n===d9?FE("Server Error: "+r):n===vP?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):FE("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Qp!==r&&Tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Il(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(o9))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Il(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(a9))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:EP,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(so.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Jp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Xp=class{constructor(e){this.allowedEvents_=e,this.listeners_={},L(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){L(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var eg=class t extends Xp{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!kc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return L(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var CP=32,TP=768,je=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function ke(){return new je("")}function Ce(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Xi(t){return t.pieces_.length-t.pieceNum_}function We(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new je(t.pieces_,e)}function dk(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function f9(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function hk(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function fk(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new je(e,0)}function Dt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof je)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new je(n,0)}function Ie(t){return t.pieceNum_>=t.pieces_.length}function $n(t,e){let n=Ce(t),r=Ce(e);if(n===null)return e;if(n===r)return $n(We(t),We(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function pk(t,e){if(Xi(t)!==Xi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function cr(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Xi(t)>Xi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var GE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=hk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=jc(this.parts_[r]);gk(this)}};function p9(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=jc(e),gk(t)}function g9(t){let e=t.parts_.pop();t.byteLength_-=jc(e),t.parts_.length>0&&(t.byteLength_-=1)}function gk(t){if(t.byteLength_>TP)throw new Error(t.errorPrefix_+"has a key path longer than "+TP+" bytes ("+t.byteLength_+").");if(t.parts_.length>CP)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+CP+") or object contains a cycle "+io(t))}function io(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var zE=class t extends Xp{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return L(e==="visible","Unknown event type: "+e),[this.visible_]}};var yl=1e3,m9=60*5*1e3,DP=30*1e3,_9=1.3,y9=3e4,v9="server_kill",bP=3,bC=(()=>{class t extends Jp{constructor(n,r,i,s,o,a,c,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Rl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=yl,this.maxReconnectDelay_=m9,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!lr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");zE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&eg.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(Et(o)),L(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new am,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),L(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(d,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&hr(n,"w")){let i=os(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||ZD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=DP)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=YD(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),L(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+Et(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):FE("Unrecognized action received from server: "+Et(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){L(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=yl,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=yl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>y9&&(this.reconnectDelay_=yl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*_9)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){L(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?Bt("getToken() completed but was canceled"):(Bt("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new qE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,w=>{Tn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(v9)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&Tn(g),l())}}})}interrupt(n){Bt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Bt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Lc(this.interruptReasons_)&&(this.reconnectDelay_=yl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>TC(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new je(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){Bt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=bP&&(this.reconnectDelay_=DP,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){Bt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=bP&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";lr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+CC.replace(/\./g,"-")]=1,kc()?n["framework.cordova"]=1:ld()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=eg.getInstance().currentlyOnline();return Lc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Te=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Za=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Te(Ya,e),i=new Te(Ya,n);return this.compare(r,i)!==0}minPost(){return Te.MIN}};var Kp,tg=class extends Za{static get __EMPTY_NODE(){return Kp}static set __EMPTY_NODE(e){Kp=e}compare(e,n){return rc(e.name,n.name)}isDefinedOn(e){throw Io("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Te.MIN}maxPost(){return new Te(ao,Kp)}makePost(e,n){return L(typeof e=="string","KeyIndex indexValue must always be a string."),new Te(e,Kp)}toString(){return".key"}},Qa=new tg;var za=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},ar=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??Hn.EMPTY_NODE,this.right=o??Hn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Hn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return Hn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),WE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new ar(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Hn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ar.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ar.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new za(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new za(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new za(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new za(this.root_,null,this.comparator_,!0,e)}};Hn.EMPTY_NODE=new WE;function w9(t,e){return rc(t.name,e.name)}function SC(t,e){return rc(t,e)}var KE;function I9(t){KE=t}var mk=function(t){return typeof t=="number"?"number:"+QP(t):"string:"+t},_k=function(t){if(t.isLeafNode()){let e=t.val();L(typeof e=="string"||typeof e=="number"||typeof e=="object"&&hr(e,".sv"),"Priority must be a string or number.")}else L(t===KE||t.isEmpty(),"priority of unexpected type.");L(t===KE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var SP,Ja=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,L(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),_k(this.priorityNode_)}static set __childrenNodeConstructor(n){SP=n}static get __childrenNodeConstructor(){return SP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Ie(n)?this:Ce(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Ce(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(L(i!==".priority"||Xi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(We(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+mk(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=QP(this.value_):n+=this.value_,this.lazyHash_=zP(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(L(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return L(s>=0,"Unknown leaf type: "+r),L(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),yk,vk;function E9(t){yk=t}function C9(t){vk=t}var QE=class extends Za{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?rc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Te.MIN}maxPost(){return new Te(ao,new Ja("[PRIORITY-POST]",vk))}makePost(e,n){let r=yk(e);return new Te(n,new Ja("[PRIORITY-POST]",r))}toString(){return".priority"}},Ht=new QE;var T9=Math.log(2),YE=class{constructor(e){let n=s=>parseInt(Math.log(s)/T9,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},ng=function(t,e,n,r){t.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=t[c],g=n?n(f):f,new ar(g,f.node,ar.BLACK,null,null);{let _=parseInt(d/2,10)+c,w=i(c,_),R=i(_+1,l);return f=t[_],g=n?n(f):f,new ar(g,f.node,ar.BLACK,w,R)}},s=function(c){let l=null,d=null,f=t.length,g=function(w,R){let S=f-w,P=f;f-=w;let U=i(S+1,P),$=t[S],W=n?n($):$;_(new ar(W,$.node,R,null,U))},_=function(w){l?(l.left=w,l=w):(d=w,l=w)};for(let w=0;w<c.count;++w){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(w+1));R?g(S,ar.BLACK):(g(S,ar.BLACK),g(S,ar.RED))}return d},o=new YE(t.length),a=s(o);return new Hn(r||e,a)};var RE,Ga={},Xa=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return L(Ga&&Ht,"ChildrenNode.ts has not been loaded"),RE=RE||new t({".priority":Ga},{".priority":Ht}),RE}get(e){let n=os(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Hn?n:null}hasIndex(e){return hr(this.indexSet_,e.toString())}addIndex(e,n){L(e!==Qa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Te.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=ng(r,e.getCompare()):a=Ga;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new t(d,l)}addToIndexes(e,n){let r=Vc(this.indexes_,(i,s)=>{let o=os(this.indexSet_,s);if(L(o,"Missing index implementation for "+s),i===Ga)if(o.isDefinedOn(e.node)){let a=[],c=n.getIterator(Te.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),ng(a,o.getCompare())}else return Ga;else{let a=n.get(e.name),c=i;return a&&(c=c.remove(new Te(e.name,a))),c.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Vc(this.indexes_,i=>{if(i===Ga)return i;{let s=n.get(e.name);return s?i.remove(new Te(e.name,s)):i}});return new t(r,this.indexSet_)}};var vl,Xe=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&_k(this.priorityNode_),this.children_.isEmpty()&&L(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return vl||(vl=new t(new Hn(SC),null,Xa.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||vl}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?vl:r}}getChild(n){let r=Ce(n);return r===null?this:this.getImmediateChild(r).getChild(We(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(L(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Te(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?vl:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Ce(n);if(i===null)return r;{L(Ce(n)!==".priority"||Xi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(We(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Ht,(a,c)=>{r[a]=c.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+mk(this.getPriority().val())+":"),this.forEachChild(Ht,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":zP(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Te(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Te(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Te(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Te.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Ml?-1:0}withIndex(n){if(n===Qa||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Qa||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Ht),s=r.getIterator(Ht),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Qa?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),ZE=class extends Xe{constructor(){super(new Hn(SC),Xe.EMPTY_NODE,Xa.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Xe.EMPTY_NODE}isEmpty(){return!1}},Ml=new ZE;Object.defineProperties(Te,{MIN:{value:new Te(Ya,Xe.EMPTY_NODE)},MAX:{value:new Te(ao,Ml)}});tg.__EMPTY_NODE=Xe.EMPTY_NODE;Ja.__childrenNodeConstructor=Xe;I9(Ml);C9(Ml);var D9=!0;function $t(t,e=null){if(t===null)return Xe.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),L(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ja(n,$t(e))}if(!(t instanceof Array)&&D9){let n=[],r=!1;if(qn(t,(o,a)=>{if(o.substring(0,1)!=="."){let c=$t(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),n.push(new Te(o,c)))}}),n.length===0)return Xe.EMPTY_NODE;let s=ng(n,w9,o=>o.name,SC);if(r){let o=ng(n,Ht.getCompare());return new Xe(s,$t(e),new Xa({".priority":o},{".priority":Ht}))}else return new Xe(s,$t(e),Xa.Default)}else{let n=Xe.EMPTY_NODE;return qn(t,(r,i)=>{if(hr(t,r)&&r.substring(0,1)!=="."){let s=$t(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority($t(e))}}E9($t);var JE=class extends Za{constructor(e){super(),this.indexPath_=e,L(!Ie(e)&&Ce(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?rc(e.name,n.name):s}makePost(e,n){let r=$t(e),i=Xe.EMPTY_NODE.updateChild(this.indexPath_,r);return new Te(n,i)}maxPost(){let e=Xe.EMPTY_NODE.updateChild(this.indexPath_,Ml);return new Te(ao,e)}toString(){return hk(this.indexPath_,0).join("/")}};var XE=class extends Za{compare(e,n){let r=e.node.compareTo(n.node);return r===0?rc(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Te.MIN}maxPost(){return Te.MAX}makePost(e,n){let r=$t(e);return new Te(n,r)}toString(){return".value"}},b9=new XE;function S9(t){return{type:"value",snapshotNode:t}}function A9(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function R9(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function AP(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function N9(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var eC=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return L(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return L(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ya}hasEnd(){return this.endSet_}getIndexEndValue(){return L(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return L(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ao}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return L(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ht}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function RP(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Ht?n="$priority":t.index_===b9?n="$value":t.index_===Qa?n="$key":(L(t.index_ instanceof JE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Et(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=Et(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+Et(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=Et(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+Et(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function NP(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Ht&&(e.i=t.index_.toString()),e}var tC=class t extends Jp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Rl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(L(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let c=RP(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),os(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=RP(e._queryParams),r=e._path.toString(),i=new am;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+as(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=dd(a.responseText)}catch{Tn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Tn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var nC=class{constructor(){this.rootNode_=Xe.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function rg(){return{value:null,children:new Map}}function wk(t,e,n){if(Ie(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Ce(e);t.children.has(r)||t.children.set(r,rg());let i=t.children.get(r);e=We(e),wk(i,e,n)}}function rC(t,e,n){t.value!==null?n(e,t.value):M9(t,(r,i)=>{let s=new je(e.toString()+"/"+r);rC(i,s,n)})}function M9(t,e){t.children.forEach((n,r)=>{e(r,n)})}var iC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&qn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var MP=10*1e3,x9=30*1e3,P9=5*60*1e3,sC=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new iC(e);let r=MP+(x9-MP)*Math.random();Il(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;qn(e,(i,s)=>{s>0&&hr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Il(this.reportStats_.bind(this),Math.floor(Math.random()*2*P9))}};var di=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(di||{});function Ik(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ek(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Ck(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var oC=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=di.ACK_USER_WRITE,this.source=Ik()}operationForChild(e){if(Ie(this.path)){if(this.affectedTree.value!=null)return L(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new je(e));return new t(ke(),n,this.revert)}}else return L(Ce(this.path)===e,"operationForChild called for unrelated child."),new t(We(this.path),this.affectedTree,this.revert)}};var ec=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=di.OVERWRITE}operationForChild(e){return Ie(this.path)?new t(this.source,ke(),this.snap.getImmediateChild(e)):new t(this.source,We(this.path),this.snap)}};var ig=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=di.MERGE}operationForChild(e){if(Ie(this.path)){let n=this.children.subtree(new je(e));return n.isEmpty()?null:n.value?new ec(this.source,ke(),n.value):new t(this.source,ke(),n)}else return L(Ce(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,We(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Dl=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ie(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ce(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function k9(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(N9(o.childName,o.snapshotNode))}),wl(t,i,"child_removed",e,r,n),wl(t,i,"child_added",e,r,n),wl(t,i,"child_moved",s,r,n),wl(t,i,"child_changed",e,r,n),wl(t,i,"value",e,r,n),i}function wl(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,c)=>F9(t,a,c)),o.forEach(a=>{let c=O9(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,t.query_))})})}function O9(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function F9(t,e,n){if(e.childName==null||n.childName==null)throw Io("Should only compare child_ events.");let r=new Te(e.childName,e.snapshotNode),i=new Te(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function Tk(t,e){return{eventCache:t,serverCache:e}}function Cl(t,e,n,r){return Tk(new Dl(e,n,r),t.serverCache)}function Dk(t,e,n,r){return Tk(t.eventCache,new Dl(e,n,r))}function aC(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function co(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var NE,L9=()=>(NE||(NE=new Hn(L3)),NE),fn=class t{constructor(e,n=L9()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return qn(e,(r,i)=>{n=n.set(new je(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(Ie(e))return null;{let r=Ce(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(We(e),n);return s!=null?{path:Dt(new je(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ie(e))return this;{let n=Ce(e),r=this.children.get(n);return r!==null?r.subtree(We(e)):new t(null)}}set(e,n){if(Ie(e))return new t(n,this.children);{let r=Ce(e),s=(this.children.get(r)||new t(null)).set(We(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(Ie(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ce(e),r=this.children.get(n);if(r){let i=r.remove(We(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(Ie(e))return this.value;{let n=Ce(e),r=this.children.get(n);return r?r.get(We(e)):null}}setTree(e,n){if(Ie(e))return n;{let r=Ce(e),s=(this.children.get(r)||new t(null)).setTree(We(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Dt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(Ie(e))return null;{let s=Ce(e),o=this.children.get(s);return o?o.findOnPath_(We(e),Dt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,r){if(Ie(e))return this;{this.value&&r(n,this.value);let i=Ce(e),s=this.children.get(i);return s?s.foreachOnPath_(We(e),Dt(n,i),r):new t(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(Dt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var ur=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new fn(null))}};function Tl(t,e,n){if(Ie(e))return new ur(new fn(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=$n(i,e);return s=s.updateChild(o,n),new ur(t.writeTree_.set(i,s))}else{let i=new fn(n),s=t.writeTree_.setTree(e,i);return new ur(s)}}}function xP(t,e,n){let r=t;return qn(n,(i,s)=>{r=Tl(r,Dt(e,i),s)}),r}function PP(t,e){if(Ie(e))return ur.empty();{let n=t.writeTree_.setTree(e,new fn(null));return new ur(n)}}function cC(t,e){return uo(t,e)!=null}function uo(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild($n(n.path,e)):null}function kP(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Ht,(r,i)=>{e.push(new Te(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Te(r,i.value))}),e}function Ji(t,e){if(Ie(e))return t;{let n=uo(t,e);return n!=null?new ur(new fn(n)):new ur(t.writeTree_.subtree(e))}}function uC(t){return t.writeTree_.isEmpty()}function tc(t,e){return bk(ke(),t.writeTree_,e)}function bk(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(L(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=bk(Dt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(Dt(t,".priority"),r)),n}}function Sk(t,e){return xk(e,t)}function V9(t,e,n,r,i){L(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Tl(t.visibleWrites,e,n)),t.lastWriteId=r}function U9(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function j9(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);L(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&B9(a,r.path)?i=!1:cr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return $9(t),!0;if(r.snap)t.visibleWrites=PP(t.visibleWrites,r.path);else{let a=r.children;qn(a,c=>{t.visibleWrites=PP(t.visibleWrites,Dt(r.path,c))})}return!0}else return!1}function B9(t,e){if(t.snap)return cr(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&cr(Dt(t.path,n),e))return!0;return!1}function $9(t){t.visibleWrites=Ak(t.allWrites,H9,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function H9(t){return t.visible}function Ak(t,e,n){let r=ur.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)cr(n,o)?(a=$n(n,o),r=Tl(r,a,s.snap)):cr(o,n)&&(a=$n(o,n),r=Tl(r,ke(),s.snap.getChild(a)));else if(s.children){if(cr(n,o))a=$n(n,o),r=xP(r,a,s.children);else if(cr(o,n))if(a=$n(o,n),Ie(a))r=xP(r,ke(),s.children);else{let c=os(s.children,Ce(a));if(c){let l=c.getChild(We(a));r=Tl(r,ke(),l)}}}else throw Io("WriteRecord should have .snap or .children")}}return r}function Rk(t,e,n,r,i){if(!r&&!i){let s=uo(t.visibleWrites,e);if(s!=null)return s;{let o=Ji(t.visibleWrites,e);if(uC(o))return n;if(n==null&&!cC(o,ke()))return null;{let a=n||Xe.EMPTY_NODE;return tc(o,a)}}}else{let s=Ji(t.visibleWrites,e);if(!i&&uC(s))return n;if(!i&&n==null&&!cC(s,ke()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(cr(l.path,e)||cr(e,l.path))},a=Ak(t.allWrites,o,e),c=n||Xe.EMPTY_NODE;return tc(a,c)}}}function q9(t,e,n){let r=Xe.EMPTY_NODE,i=uo(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ht,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ji(t.visibleWrites,e);return n.forEachChild(Ht,(o,a)=>{let c=tc(Ji(s,new je(o)),a);r=r.updateImmediateChild(o,c)}),kP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ji(t.visibleWrites,e);return kP(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function G9(t,e,n,r,i){L(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=Dt(e,n);if(cC(t.visibleWrites,s))return null;{let o=Ji(t.visibleWrites,s);return uC(o)?i.getChild(n):tc(o,i.getChild(n))}}function z9(t,e,n,r){let i=Dt(e,n),s=uo(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ji(t.visibleWrites,i);return tc(o,r.getNode().getImmediateChild(n))}else return null}function W9(t,e){return uo(t.visibleWrites,e)}function K9(t,e,n,r,i,s,o){let a,c=Ji(t.visibleWrites,e),l=uo(c,ke());if(l!=null)a=l;else if(n!=null)a=tc(c,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)f(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function Q9(){return{visibleWrites:ur.empty(),allWrites:[],lastWriteId:-1}}function lC(t,e,n,r){return Rk(t.writeTree,t.treePath,e,n,r)}function Nk(t,e){return q9(t.writeTree,t.treePath,e)}function OP(t,e,n,r){return G9(t.writeTree,t.treePath,e,n,r)}function sg(t,e){return W9(t.writeTree,Dt(t.treePath,e))}function Y9(t,e,n,r,i,s){return K9(t.writeTree,t.treePath,e,n,r,i,s)}function AC(t,e,n){return z9(t.writeTree,t.treePath,e,n)}function Mk(t,e){return xk(Dt(t.treePath,e),t.writeTree)}function xk(t,e){return{treePath:t,writeTree:e}}var dC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;L(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),L(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,AP(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,R9(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,A9(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,AP(r,e.snapshotNode,i.oldSnap));else throw Io("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var hC=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},Pk=new hC,bl=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Dl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return AC(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:co(this.viewCache_),s=Y9(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Z9(t,e){L(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),L(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function J9(t,e,n,r,i){let s=new dC,o,a;if(n.type===di.OVERWRITE){let l=n;l.source.fromUser?o=fC(t,e,l.path,l.snap,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ie(l.path),o=og(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===di.MERGE){let l=n;l.source.fromUser?o=e6(t,e,l.path,l.children,r,i,s):(L(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=pC(t,e,l.path,l.children,r,i,a,s))}else if(n.type===di.ACK_USER_WRITE){let l=n;l.revert?o=r6(t,e,l.path,r,i,s):o=t6(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===di.LISTEN_COMPLETE)o=n6(t,e,n.path,r,s);else throw Io("Unknown operation type: "+n.type);let c=s.getChanges();return X9(e,o,c),{viewCache:o,changes:c}}function X9(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=aC(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(S9(aC(e)))}}function kk(t,e,n,r,i,s){let o=e.eventCache;if(sg(r,n)!=null)return e;{let a,c;if(Ie(n))if(L(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=co(e),d=l instanceof Xe?l:Xe.EMPTY_NODE,f=Nk(r,d);a=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=lC(r,co(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Ce(n);if(l===".priority"){L(Xi(n)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=OP(r,n,d,c);f!=null?a=t.filter.updatePriority(d,f):a=o.getNode()}else{let d=We(n),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=OP(r,n,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=AC(r,l,e.serverCache);f!=null?a=t.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Cl(e,a,o.isFullyInitialized()||Ie(n),t.filter.filtersNodes())}}function og(t,e,n,r,i,s,o,a){let c=e.serverCache,l,d=o?t.filter:t.filter.getIndexedFilter();if(Ie(n))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(n,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=Ce(n);if(!c.isCompleteForPath(n)&&Xi(n)>1)return e;let w=We(n),S=c.getNode().getImmediateChild(_).updateChild(w,r);_===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),_,S,w,Pk,null)}let f=Dk(e,l,c.isFullyInitialized()||Ie(n),d.filtersNodes()),g=new bl(i,f,s);return kk(t,f,n,i,g,a)}function fC(t,e,n,r,i,s,o){let a=e.eventCache,c,l,d=new bl(i,e,s);if(Ie(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Cl(e,l,!0,t.filter.filtersNodes());else{let f=Ce(n);if(f===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),c=Cl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=We(n),_=a.getNode().getImmediateChild(f),w;if(Ie(g))w=r;else{let R=d.getCompleteChild(f);R!=null?dk(g)===".priority"&&R.getChild(fk(g)).isEmpty()?w=R:w=R.updateChild(g,r):w=Xe.EMPTY_NODE}if(_.equals(w))c=e;else{let R=t.filter.updateChild(a.getNode(),f,w,g,d,o);c=Cl(e,R,a.isFullyInitialized(),t.filter.filtersNodes())}}}return c}function FP(t,e){return t.eventCache.isCompleteForChild(e)}function e6(t,e,n,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=Dt(n,c);FP(e,Ce(d))&&(a=fC(t,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=Dt(n,c);FP(e,Ce(d))||(a=fC(t,a,d,l,i,s,o))}),a}function LP(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function pC(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ie(n)?l=r:l=new fn(null).setTree(n,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let _=e.serverCache.getNode().getImmediateChild(f),w=LP(t,_,g);c=og(t,c,new je(f),w,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let _=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!_){let w=e.serverCache.getNode().getImmediateChild(f),R=LP(t,w,g);c=og(t,c,new je(f),R,i,s,o,a)}}),c}function t6(t,e,n,r,i,s,o){if(sg(i,n)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ie(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return og(t,e,n,c.getNode().getChild(n),i,s,a,o);if(Ie(n)){let l=new fn(null);return c.getNode().forEachChild(Qa,(d,f)=>{l=l.set(new je(d),f)}),pC(t,e,n,l,i,s,a,o)}else return e}else{let l=new fn(null);return r.foreach((d,f)=>{let g=Dt(n,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),pC(t,e,n,l,i,s,a,o)}}function n6(t,e,n,r,i){let s=e.serverCache,o=Dk(e,s.getNode(),s.isFullyInitialized()||Ie(n),s.isFiltered());return kk(t,o,n,r,Pk,i)}function r6(t,e,n,r,i,s){let o;if(sg(r,n)!=null)return e;{let a=new bl(r,e,i),c=e.eventCache.getNode(),l;if(Ie(n)||Ce(n)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=lC(r,co(e));else{let f=e.serverCache.getNode();L(f instanceof Xe,"serverChildren would be complete if leaf node"),d=Nk(r,f)}d=d,l=t.filter.updateFullNode(c,d,s)}else{let d=Ce(n),f=AC(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=t.filter.updateChild(c,d,f,We(n),a,s):e.eventCache.getNode().hasChild(d)?l=t.filter.updateChild(c,d,Xe.EMPTY_NODE,We(n),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=lC(r,co(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||sg(r,ke())!=null,Cl(e,l,o,t.filter.filtersNodes())}}function i6(t,e){let n=co(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Ie(e)&&!n.getImmediateChild(Ce(e)).isEmpty())?n.getChild(e):null}function VP(t,e,n,r){e.type===di.MERGE&&e.source.queryId!==null&&(L(co(t.viewCache_),"We should always have a full cache before handling merges"),L(aC(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=J9(t.processor_,i,e,n,r);return Z9(t.processor_,s.viewCache),L(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,s6(t,s.changes,s.viewCache.eventCache.getNode(),null)}function s6(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return k9(t.eventGenerator_,e,n,i)}var UP;function o6(t){L(!UP,"__referenceConstructor has already been defined"),UP=t}function RC(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return L(s!=null,"SyncTree gave us an op for an invalid query."),VP(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(VP(o,e,n,r));return s}}function NC(t,e){let n=null;for(let r of t.views.values())n=n||i6(r,e);return n}var jP;function a6(t){L(!jP,"__referenceConstructor has already been defined"),jP=t}var ag=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new fn(null),this.pendingWriteTree_=Q9(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function c6(t,e,n,r,i){return V9(t.pendingWriteTree_,e,n,r,i),i?ug(t,new ec(Ik(),e,n)):[]}function Wa(t,e,n=!1){let r=U9(t.pendingWriteTree_,e);if(j9(t.pendingWriteTree_,e)){let s=new fn(null);return r.snap!=null?s=s.set(ke(),!0):qn(r.children,o=>{s=s.set(new je(o),!0)}),ug(t,new oC(r.path,s,n))}else return[]}function cg(t,e,n){return ug(t,new ec(Ek(),e,n))}function u6(t,e,n){let r=fn.fromObject(n);return ug(t,new ig(Ek(),e,r))}function l6(t,e,n,r){let i=Vk(t,r);if(i!=null){let s=Uk(i),o=s.path,a=s.queryId,c=$n(o,e),l=new ec(Ck(a),c,n);return jk(t,o,l)}else return[]}function d6(t,e,n,r){let i=Vk(t,r);if(i){let s=Uk(i),o=s.path,a=s.queryId,c=$n(o,e),l=fn.fromObject(n),d=new ig(Ck(a),c,l);return jk(t,o,d)}else return[]}function Ok(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let c=$n(o,e),l=NC(a,c);if(l)return l});return Rk(i,e,s,n,!0)}function ug(t,e){return Fk(e,t.syncPointTree_,null,Sk(t.pendingWriteTree_,ke()))}function Fk(t,e,n,r){if(Ie(t.path))return Lk(t,e,n,r);{let i=e.get(ke());n==null&&i!=null&&(n=NC(i,ke()));let s=[],o=Ce(t.path),a=t.operationForChild(o),c=e.children.get(o);if(c&&a){let l=n?n.getImmediateChild(o):null,d=Mk(r,o);s=s.concat(Fk(a,c,l,d))}return i&&(s=s.concat(RC(i,t,r,n))),s}}function Lk(t,e,n,r){let i=e.get(ke());n==null&&i!=null&&(n=NC(i,ke()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=n?n.getImmediateChild(o):null,l=Mk(r,o),d=t.operationForChild(o);d&&(s=s.concat(Lk(d,a,c,l)))}),i&&(s=s.concat(RC(i,t,r,n))),s}function Vk(t,e){return t.tagToQueryMap.get(e)}function Uk(t){let e=t.indexOf("$");return L(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new je(t.substr(0,e))}}function jk(t,e,n){let r=t.syncPointTree_.get(e);L(r,"Missing sync point for query tag that we're tracking");let i=Sk(t.pendingWriteTree_,e);return RC(r,n,i,null)}var gC=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},mC=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=Dt(this.path_,e);return new t(this.syncTree_,n)}node(){return Ok(this.syncTree_,this.path_)}},h6=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},BP=function(t,e,n){if(!t||typeof t!="object")return t;if(L(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return f6(t[".sv"],e,n);if(typeof t[".sv"]=="object")return p6(t[".sv"],e);L(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},f6=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:L(!1,"Unexpected server value: "+t)}},p6=function(t,e,n){t.hasOwnProperty("increment")||L(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&L(!1,"Unexpected increment value: "+r);let i=e.node();if(L(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},g6=function(t,e,n,r){return MC(e,new mC(n,t),r)},m6=function(t,e,n){return MC(t,new gC(e),n)};function MC(t,e,n){let r=t.getPriority().val(),i=BP(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=BP(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ja(a,$t(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ja(i))),o.forEachChild(Ht,(a,c)=>{let l=MC(c,e.getImmediateChild(a),n);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Sl=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function xC(t,e){let n=e instanceof je?e:new je(e),r=t,i=Ce(n);for(;i!==null;){let s=os(r.node.children,i)||{children:{},childCount:0};r=new Sl(i,r,s),n=We(n),i=Ce(n)}return r}function ic(t){return t.node.value}function Bk(t,e){t.node.value=e,_C(t)}function $k(t){return t.node.childCount>0}function _6(t){return ic(t)===void 0&&!$k(t)}function lg(t,e){qn(t.node.children,(n,r)=>{e(new Sl(n,t,r))})}function Hk(t,e,n,r){n&&!r&&e(t),lg(t,i=>{Hk(i,e,!0,r)}),n&&r&&e(t)}function y6(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function xl(t){return new je(t.parent===null?t.name:xl(t.parent)+"/"+t.name)}function _C(t){t.parent!==null&&v6(t.parent,t.name,t)}function v6(t,e,n){let r=_6(n),i=hr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,_C(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,_C(t))}var w6=/[\[\].#$\/\u0000-\u001F\u007F]/,I6=/[\[\].#$\u0000-\u001F\u007F]/,ME=10*1024*1024,qk=function(t){return typeof t=="string"&&t.length!==0&&!w6.test(t)},E6=function(t){return typeof t=="string"&&t.length!==0&&!I6.test(t)},C6=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),E6(t)};var Gk=function(t,e,n){let r=n instanceof je?new GE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+io(r));if(typeof e=="function")throw new Error(t+"contains a function "+io(r)+" with contents = "+e.toString());if(WP(e))throw new Error(t+"contains "+e.toString()+" "+io(r));if(typeof e=="string"&&e.length>ME/3&&jc(e)>ME)throw new Error(t+"contains a string greater than "+ME+" utf8 bytes "+io(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(qn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qk(o)))throw new Error(t+" contains an invalid key ("+o+") "+io(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);p9(r,o),Gk(t,a,r),g9(r)}),i&&s)throw new Error(t+' contains ".value" child '+io(r)+" in addition to actual children.")}};var T6=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!qk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!C6(n))throw new Error(eb(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yC=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function D6(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!pk(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function lo(t,e,n){D6(t,n),b6(t,r=>cr(r,e)||cr(e,r))}function b6(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(S6(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function S6(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();oo&&Bt("event: "+n.toString()),Nl(r)}}}var A6="repo_interrupt",R6=25,vC=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yC,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rg(),this.transactionQueueTree_=new Sl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function N6(t,e,n){if(t.stats_=DC(t.repoInfo_),t.forceRestClient_||H3())t.server_=new tC(t.repoInfo_,(r,i,s,o)=>{$P(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>HP(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new bC(t.repoInfo_,e,(r,i,s,o)=>{$P(t,r,i,s,o)},r=>{HP(t,r)},r=>{x6(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=G3(t.repoInfo_,()=>new sC(t.stats_,t.server_)),t.infoData_=new nC,t.infoSyncTree_=new ag({startListening:(r,i,s,o)=>{let a=[],c=t.infoData_.getNode(r._path);return c.isEmpty()||(a=cg(t.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),PC(t,"connected",!1),t.serverSyncTree_=new ag({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);lo(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function M6(t){let n=t.infoData_.getNode(new je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zk(t){return h6({timestamp:M6(t)})}function $P(t,e,n,r,i){t.dataUpdateCount++;let s=new je(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let c=Vc(n,l=>$t(l));o=d6(t.serverSyncTree_,s,c,i)}else{let c=$t(n);o=l6(t.serverSyncTree_,s,c,i)}else if(r){let c=Vc(n,l=>$t(l));o=u6(t.serverSyncTree_,s,c)}else{let c=$t(n);o=cg(t.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=OC(t,s)),lo(t.eventQueue_,a,o)}function HP(t,e){PC(t,"connected",e),e===!1&&k6(t)}function x6(t,e){qn(e,(n,r)=>{PC(t,n,r)})}function PC(t,e,n){let r=new je("/.info/"+e),i=$t(n);t.infoData_.updateSnapshot(r,i);let s=cg(t.infoSyncTree_,r,i);lo(t.eventQueue_,r,s)}function P6(t){return t.nextWriteId_++}function k6(t){Wk(t,"onDisconnectEvents");let e=zk(t),n=rg();rC(t.onDisconnect_,ke(),(i,s)=>{let o=g6(i,s,t.serverSyncTree_,e);wk(n,i,o)});let r=[];rC(n,ke(),(i,s)=>{r=r.concat(cg(t.serverSyncTree_,i,s));let o=V6(t,i);OC(t,o)}),t.onDisconnect_=rg(),lo(t.eventQueue_,ke(),r)}function O6(t){t.persistentConnection_&&t.persistentConnection_.interrupt(A6)}function Wk(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Bt(n,...e)}function Kk(t,e,n){return Ok(t.serverSyncTree_,e,n)||Xe.EMPTY_NODE}function kC(t,e=t.transactionQueueTree_){if(e||dg(t,e),ic(e)){let n=Yk(t,e);L(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&F6(t,xl(e),n)}else $k(e)&&lg(e,n=>{kC(t,n)})}function F6(t,e,n){let r=n.map(l=>l.currentWriteId),i=Kk(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let d=n[l];L(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=$n(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;t.server_.put(c.toString(),a,l=>{Wk(t,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<n.length;g++)n[g].status=2,d=d.concat(Wa(t.serverSyncTree_,n[g].currentWriteId)),n[g].onComplete&&f.push(()=>n[g].onComplete(null,!0,n[g].currentOutputSnapshotResolved)),n[g].unwatcher();dg(t,xC(t.transactionQueueTree_,e)),kC(t,t.transactionQueueTree_),lo(t.eventQueue_,e,d);for(let g=0;g<f.length;g++)Nl(f[g])}else{if(l==="datastale")for(let f=0;f<n.length;f++)n[f].status===3?n[f].status=4:n[f].status=0;else{Tn("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<n.length;f++)n[f].status=4,n[f].abortReason=l}OC(t,e)}},o)}function OC(t,e){let n=Qk(t,e),r=xl(n),i=Yk(t,n);return L6(t,i,r),r}function L6(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=$n(n,c.path),d=!1,f;if(L(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(Wa(t.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=R6)d=!0,f="maxretry",i=i.concat(Wa(t.serverSyncTree_,c.currentWriteId,!0));else{let g=Kk(t,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){Gk("transaction failed: Data returned ",_,c.path);let w=$t(_);typeof _=="object"&&_!=null&&hr(_,".priority")||(w=w.updatePriority(g.getPriority()));let S=c.currentWriteId,P=zk(t),U=m6(w,g,P);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=U,c.currentWriteId=P6(t),o.splice(o.indexOf(S),1),i=i.concat(c6(t.serverSyncTree_,c.path,U,c.currentWriteId,c.applyLocally)),i=i.concat(Wa(t.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(Wa(t.serverSyncTree_,c.currentWriteId,!0))}lo(t.eventQueue_,n,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}dg(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)Nl(r[a]);kC(t,t.transactionQueueTree_)}function Qk(t,e){let n,r=t.transactionQueueTree_;for(n=Ce(e);n!==null&&ic(r)===void 0;)r=xC(r,n),e=We(e),n=Ce(e);return r}function Yk(t,e){let n=[];return Zk(t,e,n),n.sort((r,i)=>r.order-i.order),n}function Zk(t,e,n){let r=ic(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);lg(e,i=>{Zk(t,i,n)})}function dg(t,e){let n=ic(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Bk(e,n.length>0?n:void 0)}lg(e,r=>{dg(t,r)})}function V6(t,e){let n=xl(Qk(t,e)),r=xC(t.transactionQueueTree_,e);return y6(r,i=>{xE(t,i)}),xE(t,r),Hk(r,i=>{xE(t,i)}),n}function xE(t,e){let n=ic(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(L(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(L(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Wa(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Bk(e,void 0):n.length=s+1,lo(t.eventQueue_,xl(e),i);for(let o=0;o<r.length;o++)Nl(r[o])}}function U6(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function j6(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Tn(`Invalid query segment '${n}' in query '${t}'`)}return e}var qP=function(t,e){let n=B6(t),r=n.namespace;n.domain==="firebase.com"&&hi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&hi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||O3();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Yp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new je(n.pathString)}},B6=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",c=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let d=t.indexOf("/");d===-1&&(d=t.length);let f=t.indexOf("?");f===-1&&(f=t.length),e=t.substring(0,Math.min(d,f)),d<f&&(i=U6(t.substring(d,f)));let g=j6(t.substring(Math.min(t.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")n="localhost";else if(_.split(".").length<=2)n=_;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),n=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var wC=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return Ie(this._path)?null:dk(this._path)}get ref(){return new nc(this._repo,this._path)}get _queryIdentifier(){let e=NP(this._queryParams),n=TC(e);return n==="{}"?"default":n}get _queryObject(){return NP(this._queryParams)}isEqual(e){if(e=ve(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=pk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+f9(this._path)}};var nc=class t extends wC{constructor(e,n){super(e,n,new eC,!1)}get parent(){let e=fk(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};o6(nc);a6(nc);var $6="FIREBASE_DATABASE_EMULATOR_HOST",IC={},H6=!1;function q6(t,e,n,r){t.repoInfo_=new Yp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function G6(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||hi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Bt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=qP(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[$6]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=qP(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new El(El.OWNER):new VE(t.name,t.options,e);T6("Invalid Firebase Database URL",o),Ie(o.path)||hi("Database URL must point to the root of a Firebase Database (not including a child path).");let f=W6(a,t,d,new LE(t.name,n));return new EC(f,t)}function z6(t,e){let n=IC[e];(!n||n[t.key]!==t)&&hi(`Database ${e}(${t.repoInfo_}) has already been deleted.`),O6(t),delete n[t.key]}function W6(t,e,n,r){let i=IC[e.name];i||(i={},IC[e.name]=i);let s=i[t.toURLString()];return s&&hi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new vC(t,H6,n,r),i[t.toURLString()]=s,s}var EC=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(N6(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nc(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(z6(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hi("Cannot call "+e+" on a deleted database.")}};function Jk(t=dt(),e){let n=lt(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Ii("database");r&&Xk(n,...r)}return n}function Xk(t,e,n,r={}){t=ve(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&hi("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&hi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new El(El.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Eo(r.mockUserToken,t.app.options.projectId);s=new El(o)}q6(i,e,n,s)}function K6(t){x3(rn),ot(new st("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return G6(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),q(hP,fP,t),q(hP,fP,"esm2017")}bC.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};bC.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};K6();var Pl=class{constructor(e){return e}},eO="database",FC=class{constructor(){return ut(eO)}};var LC=new V("angularfire2.database-instances");function Q6(t,e){let n=pt(eO,t,e);return n&&new Pl(n)}function Y6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Pl(r)}}var Z6={provide:FC,deps:[[new ie,LC]]},J6={provide:Pl,useFactory:Q6,deps:[[new ie,LC],ze]};function tO(t,...e){return q("angularfire",Ge.full,"rtdb"),Be([J6,Z6,{provide:LC,useFactory:Y6(t),multi:!0,deps:[X,_e,rt,Ze,[new ie,rr],[new ie,dn],...e]}])}var nO=De(Jk,!0);var sO="functions";var VC=class{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||n.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let n=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return n.error?null:n.token}return null})}getContext(e){return y(this,null,function*(){let n=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:i}})}};var UC="us-central1";var jC=class{constructor(e,n,r,i,s=UC,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new VC(n,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=UC}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}};function X6(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}var rO="@firebase/functions",iO="0.11.8";var e5="auth-internal",t5="app-check-internal",n5="messaging-internal";function r5(t,e){let n=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(e5),a=r.getProvider(n5),c=r.getProvider(t5);return new jC(s,o,a,c,i,t)};ot(new st(sO,n,"PUBLIC").setMultipleInstances(!0)),q(rO,iO,e),q(rO,iO,"esm2017")}function oO(t=dt(),e=UC){let r=lt(ve(t),sO).getImmediate({identifier:e}),i=Ii("functions");return i&&aO(r,...i),r}function aO(t,e,n){X6(ve(t),e,n)}r5(fetch.bind(self));var kl=class{constructor(e){return e}},cO="functions",BC=class{constructor(){return ut(cO)}};var $C=new V("angularfire2.functions-instances");function i5(t,e){let n=pt(cO,t,e);return n&&new kl(n)}function s5(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new kl(r)}}var o5={provide:BC,deps:[[new ie,$C]]},a5={provide:kl,useFactory:i5,deps:[[new ie,$C],ze]};function uO(t,...e){return q("angularfire",Ge.full,"fn"),Be([a5,o5,{provide:$C,useFactory:s5(t),multi:!0,deps:[X,_e,rt,Ze,[new ie,rr],[new ie,dn],...e]}])}var lO=De(oO,!0);var c5="/firebase-messaging-sw.js",u5="/firebase-cloud-messaging-push-scope",mO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",l5="https://fcmregistrations.googleapis.com/v1",_O="google.c.a.c_id",d5="google.c.a.c_l",h5="google.c.a.ts",f5="google.c.a.e";var hg=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(hg||{});function fi(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p5(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var HC="fcm_token_details_db",g5=5,dO="fcm_token_object_Store";function m5(t){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(HC))return null;let e=null;return(yield cm(HC,g5,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(dO))return;let c=o.objectStore(dO),l=yield c.index("fcmSenderId").get(t);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:fi(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:fi(d.auth),p256dh:fi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:fi(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:fi(d.auth),p256dh:fi(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:fi(d.vapidKey)}}}}})})).close(),yield hd(HC),yield hd("fcm_vapid_details_db"),yield hd("undefined"),_5(e)?e:null})}function _5(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var y5="firebase-messaging-database",v5=1,Ol="firebase-messaging-store",qC=null;function yO(){return qC||(qC=cm(y5,v5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ol)}}})),qC}function w5(t){return y(this,null,function*(){let e=vO(t),r=yield(yield yO()).transaction(Ol).objectStore(Ol).get(e);if(r)return r;{let i=yield m5(t.appConfig.senderId);if(i)return yield WC(t,i),i}})}function WC(t,e){return y(this,null,function*(){let n=vO(t),i=(yield yO()).transaction(Ol,"readwrite");return yield i.objectStore(Ol).put(e,n),yield i.done,e})}function vO({appConfig:t}){return t.appId}var I5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},tn=new dr("messaging","Messaging",I5);function E5(t,e){return y(this,null,function*(){let n=yield QC(t),r=wO(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(KC(t.appConfig),i)).json()}catch(o){throw tn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw tn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw tn.create("token-subscribe-no-token");return s.token})}function C5(t,e){return y(this,null,function*(){let n=yield QC(t),r=wO(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${KC(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw tn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw tn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw tn.create("token-update-no-token");return s.token})}function T5(t,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield QC(t)};try{let s=yield(yield fetch(`${KC(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw tn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw tn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function KC({projectId:t}){return`${l5}/projects/${t}/registrations`}function QC(n){return y(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function wO({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==mO&&(i.web.applicationPubKey=r),i}var D5=7*24*60*60*1e3;function b5(t){return y(this,null,function*(){let e=yield A5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:fi(e.getKey("auth")),p256dh:fi(e.getKey("p256dh"))},r=yield w5(t.firebaseDependencies);if(r){if(R5(r.subscriptionOptions,n))return Date.now()>=r.createTime+D5?S5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield T5(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return hO(t.firebaseDependencies,n)}else return hO(t.firebaseDependencies,n)})}function S5(t,e){return y(this,null,function*(){try{let n=yield C5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield WC(t.firebaseDependencies,r),n}catch(n){throw n}})}function hO(t,e){return y(this,null,function*(){let r={token:yield E5(t,e),createTime:Date.now(),subscriptionOptions:e};return yield WC(t,r),r.token})}function A5(t,e){return y(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:p5(e)})})}function R5(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function fO(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return N5(e,t),M5(e,t),x5(e,t),e}function N5(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function M5(t,e){e.data&&(t.data=e.data)}function x5(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}function P5(t){return typeof t=="object"&&!!t&&_O in t}k5("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function k5(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function O5(t){if(!t||!t.options)throw GC("App Configuration Object");if(!t.name)throw GC("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw GC(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function GC(t){return tn.create("missing-app-config-values",{valueName:t})}var zC=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=O5(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function F5(t){return y(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(c5,{scope:u5}),t.swRegistration.update().catch(()=>{})}catch(e){throw tn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function L5(t,e){return y(this,null,function*(){if(!e&&!t.swRegistration&&(yield F5(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw tn.create("invalid-sw-registration");t.swRegistration=e}})}function V5(t,e){return y(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=mO)})}function U5(t,e){return y(this,null,function*(){if(!navigator)throw tn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw tn.create("permission-blocked");return yield V5(t,e?.vapidKey),yield L5(t,e?.serviceWorkerRegistration),b5(t)})}function j5(t,e,n){return y(this,null,function*(){let r=B5(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[_O],message_name:n[d5],message_time:n[h5],message_device_time:Math.floor(Date.now()/1e3)})})}function B5(t){switch(t){case hg.NOTIFICATION_CLICKED:return"notification_open";case hg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function $5(t,e){return y(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===hg.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(fO(n)):t.onMessageHandler.next(fO(n)));let r=n.data;P5(r)&&r[f5]==="1"&&(yield j5(t,n.messageType,r))})}var pO="@firebase/messaging",gO="0.12.12";var H5=t=>{let e=new zC(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>$5(e,n)),e},q5=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>U5(e,r)}};function G5(){ot(new st("messaging",H5,"PUBLIC")),ot(new st("messaging-internal",q5,"PRIVATE")),q(pO,gO),q(pO,gO,"esm2017")}function YC(){return y(this,null,function*(){try{yield ss()}catch{return!1}return typeof window<"u"&&Lr()&&Fc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function IO(t=dt()){return YC().then(e=>{if(!e)throw tn.create("unsupported-browser")},e=>{throw tn.create("indexed-db-unsupported")}),lt(ve(t),"messaging").getImmediate()}G5();var Fl=class{constructor(e){return e}},EO="messaging",ZC=class{constructor(){return ut(EO)}};var CO="__angularfire_symbol__messagingIsSupported",JC="__angularfire_symbol__messagingIsSupportedValue";globalThis[CO]||=YC().then(t=>globalThis[JC]=t).catch(()=>globalThis[JC]=!1);var fg={async:()=>globalThis[CO],sync:()=>{let t=globalThis[JC];if(t===void 0)throw new Error(va("Messaging"));return t}},XC=new V("angularfire2.messaging-instances");function z5(t,e){if(!fg.sync())return null;let n=pt(EO,t,e);return n&&new Fl(n)}function W5(t){return(e,n)=>{if(!fg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Fl(r)}}var K5={provide:ZC,deps:[[new ie,XC]]},Q5={provide:Fl,useFactory:z5,deps:[[new ie,XC],ze]};function TO(t,...e){return q("angularfire",Ge.full,"fcm"),Be([Q5,K5,{provide:Vi,useValue:fg.async,multi:!0},{provide:XC,useFactory:W5(t),multi:!0,deps:[X,_e,rt,Ze,...e]}])}var zae=fg.async;var DO=De(IO,!0);var Ll=class{constructor(e){return e}},bO="performance",eT=class{constructor(){return ut(bO)}};var tT=new V("angularfire2.performance-instances");function Y5(t,e,n){if(!Ty(n))return null;let r=pt(bO,t,e);return r&&new Ll(r)}function Z5(t){return(e,n,r)=>{if(!Ty(n))return null;let i=e.runOutsideAngular(()=>t(r));return new Ll(i)}}var J5={provide:eT,deps:[[new ie,tT]]},X5={provide:Ll,useFactory:Y5,deps:[[new ie,tT],ze,Jn]};function SO(t,...e){return q("angularfire",Ge.full,"perf"),Be([X5,J5,{provide:tT,useFactory:Z5(t),multi:!0,deps:[X,Jn,_e,rt,Ze,...e]}])}var AO=De(rb,!0);var kO="firebasestorage.googleapis.com",e8="storageBucket",t8=2*60*1e3,n8=10*60*1e3;var Pr=class t extends nn{constructor(e,n,r=0){super(nT(e),`Firebase Storage: ${n} (${nT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},gi=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(gi||{});function nT(t){return"storage/"+t}function r8(){let t="An unknown error occurred, please check the error payload for server response.";return new Pr(gi.UNKNOWN,t)}function i8(){return new Pr(gi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function s8(){return new Pr(gi.CANCELED,"User canceled the upload/download.")}function o8(t){return new Pr(gi.INVALID_URL,"Invalid URL '"+t+"'.")}function a8(t){return new Pr(gi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function RO(t){return new Pr(gi.INVALID_ARGUMENT,t)}function OO(){return new Pr(gi.APP_DELETED,"The Firebase app was deleted.")}function c8(t){return new Pr(gi.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var pi=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw a8(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(W){W.path.charAt(W.path.length-1)==="/"&&(W.path_=W.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(W){W.path_=decodeURIComponent(W.path)}let d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},R=n===kO?"(?:storage.googleapis.com|storage.cloud.google.com)":n,S="([^?#]*)",P=new RegExp(`^https?://${R}/${i}/${S}`,"i"),$=[{regex:a,indices:c,postModify:s},{regex:_,indices:w,postModify:l},{regex:P,indices:{bucket:1,path:2},postModify:l}];for(let W=0;W<$.length;W++){let Oe=$[W],J=Oe.regex.exec(e);if(J){let C=J[Oe.indices.bucket],v=J[Oe.indices.path];v||(v=""),r=new t(C,v),Oe.postModify(r);break}}if(r==null)throw o8(e);return r}},rT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function u8(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,t(_,c())},S)}function g(){s&&clearTimeout(s)}function _(S,...P){if(l){g();return}if(S){g(),d.call(null,S,...P);return}if(c()||o){g(),d.call(null,S,...P);return}r<64&&(r*=2);let $;a===1?(a=2,$=0):$=(r+Math.random())*1e3,f($)}let w=!1;function R(S){w||(w=!0,g(),!l&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},n),R}function l8(t){t(!1)}function d8(t){return t!==void 0}function NO(t,e,n,r){if(r<e)throw RO(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw RO(`Invalid value for '${t}'. Expected ${n} or less.`)}function h8(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var iT=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(iT||{});function f8(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var sT=class{constructor(e,n,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new sc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===iT.NO_ERROR,c=s.getStatus();if(!a||f8(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===iT.ABORT;r(!1,new sc(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new sc(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());d8(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=r8();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?OO():s8();o(c)}else{let c=i8();o(c)}};this.canceled_?n(!1,new sc(!1,null,!0)):this.backoffId_=u8(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&l8(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},sc=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function p8(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function g8(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function m8(t,e){e&&(t["X-Firebase-GMPID"]=e)}function _8(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function y8(t,e,n,r,i,s,o=!0){let a=h8(t.urlParams),c=t.url+a,l=Object.assign({},t.headers);return m8(l,e),p8(l,n),g8(l,s),_8(l,r),new sT(c,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function v8(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function w8(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var uce=256*1024;var oT=class t{constructor(e,n){this._service=e,n instanceof pi?this._location=n:this._location=pi.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new pi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return w8(this._location.path)}get storage(){return this._service}get parent(){let e=v8(this._location.path);if(e===null)return null;let n=new pi(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw c8(e)}};function MO(t,e){let n=e?.[e8];return n==null?null:pi.makeFromBucketSpec(n,t)}function I8(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Eo(i,t.app.options.projectId))}var aT=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=kO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=t8,this._maxUploadRetryTime=n8,this._requests=new Set,i!=null?this._bucket=pi.makeFromBucketSpec(i,this._host):this._bucket=MO(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=pi.makeFromBucketSpec(this._url,e):this._bucket=MO(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){NO("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){NO("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oT(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new rT(OO());{let o=y8(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},xO="@firebase/storage",PO="0.13.2";var FO="storage";function LO(t=dt(),e){t=ve(t);let r=lt(t,FO).getImmediate({identifier:e}),i=Ii("storage");return i&&VO(r,...i),r}function VO(t,e,n,r={}){I8(t,e,n,r)}function E8(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new aT(n,r,i,e,rn)}function C8(){ot(new st(FO,E8,"PUBLIC").setMultipleInstances(!0)),q(xO,PO,""),q(xO,PO,"esm2017")}C8();var Vl=class{constructor(e){return e}},UO="storage",cT=class{constructor(){return ut(UO)}};var uT=new V("angularfire2.storage-instances");function T8(t,e){let n=pt(UO,t,e);return n&&new Vl(n)}function D8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Vl(r)}}var b8={provide:cT,deps:[[new ie,uT]]},S8={provide:Vl,useFactory:T8,deps:[[new ie,uT],ze]};function jO(t,...e){return q("angularfire",Ge.full,"gcs"),Be([S8,b8,{provide:uT,useFactory:D8(t),multi:!0,deps:[X,_e,rt,Ze,[new ie,rr],[new ie,dn],...e]}])}var BO=De(LO,!0);var lT="@firebase/remote-config",$O="0.4.9";var HO="remote-config";var A8={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},pn=new dr("remoteconfig","Remote Config",A8);function qO(t=dt()){return t=ve(t),lt(t,HO).getImmediate()}function GO(t){let e=ve(t);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var dT=class{constructor(e,n,r,i){this.client=e,this.storage=n,this.storageCache=r,this.logger=i}isCachedDataFresh(e,n){if(!n)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-n,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function R8(t=navigator){return t.languages&&t.languages[0]||t.language}var hT=class{constructor(e,n,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[n,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:R8()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((S,P)=>{e.signal.addEventListener(()=>{let U=new Error("The operation was aborted.");U.name="AbortError",P(U)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(S){let P="fetch-client-network";throw S?.name==="AbortError"&&(P="fetch-timeout"),pn.create(P,{originalErrorMessage:S?.message})}let g=f.status,_=f.headers.get("ETag")||void 0,w,R;if(f.status===200){let S;try{S=yield f.json()}catch(P){throw pn.create("fetch-client-parse",{originalErrorMessage:P?.message})}w=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(w={}),g!==304&&g!==200)throw pn.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:w}})}};function N8(t,e){return new Promise((n,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function M8(t){if(!(t instanceof nn)||!t.customData)return!1;let e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}var fT=class{constructor(e,n){this.client=e,this.storage=n}fetch(e){return y(this,null,function*(){let n=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,n)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:n,backoffCount:r}){yield N8(e.signal,n);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!M8(o))throw o;let a={throttleEndTimeMillis:Date.now()+Bc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var x8=60*1e3,P8=12*60*60*1e3,pT=class{constructor(e,n,r,i,s){this.app=e,this._client=n,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:x8,minimumFetchIntervalMillis:P8},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function pg(t,e){let n=t.target.error||void 0;return pn.create(e,{originalErrorMessage:n&&n?.message})}var ho="app_namespace_store",k8="firebase_remote_config",O8=1;function F8(){return new Promise((t,e)=>{try{let n=indexedDB.open(k8,O8);n.onerror=r=>{e(pg(r,"storage-open"))},n.onsuccess=r=>{t(r.target.result)},n.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(ho,{keyPath:"compositeKey"})}}}catch(n){e(pn.create("storage-open",{originalErrorMessage:n?.message}))}})}var gT=class{constructor(e,n,r,i=F8()){this.appId=e,this.appName=n,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([ho],"readonly").objectStore(ho),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(pg(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(pn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,n){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([ho],"readwrite").objectStore(ho),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:n});l.onerror=d=>{s(pg(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(pn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let n=yield this.openDbPromise;return new Promise((r,i)=>{let o=n.transaction([ho],"readwrite").objectStore(ho),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(pg(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(pn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var mT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield n;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function L8(){ot(new st(HO,t,"PUBLIC").setMultipleInstances(!0)),q(lT,$O),q(lT,$O,"esm2017");function t(e,{instanceIdentifier:n}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw pn.create("registration-window");if(!Lr())throw pn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw pn.create("registration-project-id");if(!o)throw pn.create("registration-api-key");if(!a)throw pn.create("registration-app-id");n=n||"firebase";let c=new gT(a,r.name,n),l=new mT(c),d=new fr(lT);d.logLevel=Ft.ERROR;let f=new hT(i,rn,n,s,o,a),g=new fT(f,c),_=new dT(g,c,l,d),w=new pT(r,_,l,c,d);return GO(w),w}}function zO(){return y(this,null,function*(){if(!Lr())return!1;try{return yield ss()}catch{return!1}})}L8();var Ul=class{constructor(e){return e}},WO="remote-config",_T=class{constructor(){return ut(WO)}};var yT="__angularfire_symbol__remoteConfigIsSupportedValue",KO="__angularfire_symbol__remoteConfigIsSupported";globalThis[KO]||=zO().then(t=>globalThis[yT]=t).catch(()=>globalThis[yT]=!1);var gg={async:()=>globalThis[KO],sync:()=>{let t=globalThis[yT];if(t===void 0)throw new Error(va("RemoteConfig"));return t}},vT=new V("angularfire2.remote-config-instances");function V8(t,e){if(!gg.sync())return null;let n=pt(WO,t,e);return n&&new Ul(n)}function U8(t){return(e,n)=>{if(!gg.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Ul(r)}}var j8={provide:_T,deps:[[new ie,vT]]},B8={provide:Ul,useFactory:V8,deps:[[new ie,vT],ze]};function QO(t,...e){return q("angularfire",Ge.full,"rc"),Be([B8,j8,{provide:Vi,useValue:gg.async,multi:!0},{provide:vT,useFactory:U8(t),multi:!0,deps:[X,_e,rt,Ze,...e]}])}var oue=gg.async;var YO=De(qO,!0);var ZO="@firebase/vertexai-preview",JO="0.0.4";var XO="vertexAI",e1="us-central1";var wT=class{constructor(e,n,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=n?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||e1}_delete(){return Promise.resolve()}};var IT=function(t){return t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.OTHER="OTHER",t}(IT||{});var hue=[IT.RECITATION,IT.SAFETY];function t1(t=dt(),e){return t=ve(t),lt(t,XO).getImmediate({identifier:e?.location||e1})}function $8(){ot(new st(XO,(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new wT(n,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),q(ZO,JO),q(ZO,JO,"esm2017")}$8();var jl=class{constructor(e){return e}},n1="vertexai",ET=class{constructor(){return ut(n1)}};var CT=new V("angularfire2.vertexai-instances");function H8(t,e){let n=pt(n1,t,e);return n&&new jl(n)}function q8(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new jl(r)}}var G8={provide:ET,deps:[[new ie,CT]]},z8={provide:jl,useFactory:H8,deps:[[new ie,CT],ze]};function r1(t,...e){return q("angularfire",Ge.full,"vertexai"),Be([z8,G8,{provide:CT,useFactory:q8(t),multi:!0,deps:[X,_e,rt,Ze,[new ie,dn],...e]}])}var i1=De(t1,!0);var s1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var o1={providers:[kA({eventCoalescing:!0}),jR(BR),$R(()=>HR(s1.firebaseConfig)),ON(()=>LN()),iM(()=>nM()),rM,fw,aP(()=>uP()),tO(()=>nO()),uO(()=>lO()),TO(()=>DO()),SO(()=>AO()),jO(()=>BO()),QO(()=>YO()),r1(()=>i1())]};var Gn=class t{constructor(){}get(){return{durationHour:24,endTyreChangeWindowHour:14,fuelDurationMinute:120,minDriverChange:30,minStintMinute:5,minTyreChange:1,startTyreChangeWindowHour:10}}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var oc=class t{firestore=x(ro);destroy$=new Ye;constructor(){}delete(e){return cP(Wp(this.collectionRef,e))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}generateNextId(){return y(this,null,function*(){let e=yield TE(this.collectionRef),n=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>n&&(n=s)}),(n+1).toString()})}createData(e,n){let r=Wp(this.collectionRef,e);return DE(r,n)}updateData(e,n){return DE(Wp(this.collectionRef,e),n,{merge:!0})}getDataById(e){return y(this,null,function*(){let n=lP(this.collectionRef,dP("id","==",e)),r=yield TE(n);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var W8=Math.pow(10,8)*24*60*60*1e3,Jue=-W8;var a1=864e5,mg=6e4,_g=36e5;var K8=3600;var c1=K8*24,Xue=c1*7,Q8=c1*365.2425,Y8=Q8/12,ele=Y8*3,TT=Symbol.for("constructDateFrom");function Dn(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&TT in t?t[TT](e):t instanceof Date?new t.constructor(e):new Date(e)}function He(t,e){return Dn(e||t,t)}function u1(t,e,n){let r=He(t,n?.in);return isNaN(e)?Dn(n?.in||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function l1(t,e,n){let r=He(t,n?.in);if(isNaN(e))return Dn(n?.in||t,NaN);if(!e)return r;let i=r.getDate(),s=Dn(n?.in||t,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function ac(t,e,n){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=He(t,n?.in),f=i||r?l1(d,i+r*12):d,g=o||s?u1(f,o+s*7):f,_=c+a*60,R=(l+_*60)*1e3;return Dn(n?.in||t,+g+R)}function d1(t,e,n){return Dn(n?.in||t,+He(t)+e)}function cc(t,e,n){return d1(t,e*_g,n)}function DT(t){let e=He(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function qt(t,...e){let n=Dn.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function bT(t,e){let n=He(t,e?.in);return n.setHours(0,0,0,0),n}function h1(t,e,n){let[r,i]=qt(n?.in,t,e),s=bT(r),o=bT(i),a=+s-DT(s),c=+o-DT(o);return Math.round((a-c)/a1)}function f1(t,e,n){let r=He(t,n?.in);return r.setTime(r.getTime()+e*mg),r}function fo(t,e){let n=+He(t)-+He(e);return n<0?-1:n>0?1:n}function p1(t,e,n){let[r,i]=qt(n?.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function g1(t,e,n){let[r,i]=qt(n?.in,t,e);return r.getFullYear()-i.getFullYear()}function _1(t,e,n){let[r,i]=qt(n?.in,t,e),s=m1(r,i),o=Math.abs(h1(r,i));r.setDate(r.getDate()-s*o);let a=+(m1(r,i)===-s),c=s*(o-a);return c===0?0:c}function m1(t,e){let n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function uc(t){return e=>{let r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function y1(t,e,n){let[r,i]=qt(n?.in,t,e),s=(+r-+i)/_g;return uc(n?.roundingMethod)(s)}function lc(t,e){return+He(t)-+He(e)}function po(t,e,n){let r=lc(t,e)/mg;return uc(n?.roundingMethod)(r)}function v1(t,e){let n=He(t,e?.in);return n.setHours(23,59,59,999),n}function w1(t,e){let n=He(t,e?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function I1(t,e){let n=He(t,e?.in);return+v1(n,e)==+w1(n,e)}function E1(t,e,n){let[r,i,s]=qt(n?.in,t,t,e),o=fo(i,s),a=Math.abs(p1(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=fo(i,s)===-o;I1(r)&&a===1&&fo(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function C1(t,e,n){let r=lc(t,e)/1e3;return uc(n?.roundingMethod)(r)}function T1(t,e,n){let[r,i]=qt(n?.in,t,e),s=fo(r,i),o=Math.abs(g1(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=fo(r,i)===-s,c=s*(o-+a);return c===0?0:c}function D1(t,e){let[n,r]=qt(t,e.start,e.end);return{start:n,end:r}}function ST(t,e){let{start:n,end:r}=D1(e?.in,t),i={},s=T1(r,n);s&&(i.years=s);let o=ac(n,{years:i.years}),a=E1(r,o);a&&(i.months=a);let c=ac(o,{months:i.months}),l=_1(r,c);l&&(i.days=l);let d=ac(c,{days:i.days}),f=y1(r,d);f&&(i.hours=f);let g=ac(d,{hours:i.hours}),_=po(r,g);_&&(i.minutes=_);let w=ac(g,{minutes:i.minutes}),R=C1(r,w);return R&&(i.seconds=R),i}function Gt(t){t||(Ph(Gt),t=x(ra));let e=new oe(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(_r(e))}function go(t,e){!e?.injector&&Ph(go);let n=e?.injector??x(_e),r=new Kc(1),i=yy(()=>{let s;try{s=t()}catch(o){Vn(()=>r.error(o));return}Vn(()=>r.next(s))},{injector:n,manualCleanup:!0});return n.get(ra).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var zn=class t extends oc{collectionPath="/races";collectionRef=zp(this.firestore,this.collectionPath);raceConfigService=x(Gn);activeRace=Pn(void 0);constructor(){super(),this.getAll().pipe(Gt()).subscribe(e=>{let n=this.getActiveRace(e);this.activeRace.set(n)})}getAll(){return Gp(this.collectionRef).pipe(_r(this.destroy$),Y(e=>e.filter(n=>!n.deleted)))}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),this.createData(e.id,e))})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getActiveRace(e){let n=new Date,r=e.sort((i,s)=>s.start.toDate().getTime()-i.start.toDate().getTime());for(let i of r)if(cc(i.start.toDate(),this.raceConfigService.get().durationHour)>=n)return i}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function b1(t,e){if(!t||!e)return"--:--:--";let n=ST({end:e,start:t});return S1(n)}function mo(t){if(!t)return"--:--:--";let e=ST({end:t,start:new Date});return S1(e)}function S1(t){return t.hours&&t.hours<0||t.minutes&&t.minutes<0||t.seconds&&t.seconds<0?"00:00:00":[AT(t.hours),AT(t.minutes),AT(t.seconds)].join(":")}function AT(t){return t?t<10?`0${t}`:`${t}`:"00"}function Z8(t,e){if(t&1){let n=zh();K(0,"button",2),Jt("click",function(){Ds(n);let i=Rt();return bs(i.startRace())}),re(1," Start race "),Q()}}function J8(t,e){if(t&1&&(K(0,"div",1),re(1),Q()),t&2){let n=Rt();Se(),Ct(" ",n.countdown," ")}}var yg=class t{raceService=x(zn);raceConfigService=x(Gn);durationHour=this.raceConfigService.get().durationHour;activeRace=this.raceService.activeRace;countdown="--:--:--";constructor(){jr(1e3).pipe(Gt()).subscribe(()=>{let e=this.activeRace();if(e){let n=cc(e.start.toDate(),this.durationHour);this.countdown=mo(n)}})}startRace(){this.raceService.create({id:"1",start:It.now(),deleted:!1})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Mn({type:t,selectors:[["app-race"]],standalone:!0,features:[Ln],decls:2,vars:1,consts:[[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(n,r){n&1&&kn(0,Z8,2,0,"button",0)(1,J8,2,1,"div",1),n&2&&On(r.activeRace()?1:0)}})};var es=class t extends oc{collectionPath="/pits";collectionRef=zp(this.firestore,this.collectionPath);raceService=x(zn);activeRace=this.raceService.activeRace;activePit=Pn(void 0);constructor(){super(),this.getRacePits().pipe(Gt()).subscribe(e=>{let n=this.getActivePit(e);this.activePit.set(n)})}getRacePits(){return gr({pits:Gp(this.collectionRef),activeRace:go(this.activeRace)}).pipe(_r(this.destroy$),Y(({pits:e,activeRace:n})=>n?e.filter(r=>!r.deleted&&r.raceId===n.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),this.createData(e.id,e)})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getActivePit(e){let n=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of n)if(!r.exitTime)return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var X8=t=>({"mb-2":t}),eK=t=>({"animate-bounce":t});function tK(t,e){if(t&1&&(K(0,"div",4),re(1),Q()),t&2){let n=Rt();Se(),Ct(" Remaining: ",n.remainingTyreChange," ")}}function nK(t,e){t&1&&(K(0,"div",5),re(1," Completed! "),Q())}function rK(t,e){if(t&1&&(K(0,"div",6),re(1," Window open "),Q()),t&2){let n=Rt();ln("ngClass",ia(1,eK,n.remainingTyreChange>0))}}function iK(t,e){t&1&&(K(0,"div",7),re(1," Window close "),Q())}function sK(t,e){if(t&1&&(re(0),sa(1,"date")),t&2){let n=Rt(2);Ct(" ",oa(1,1,n.openingTime(),"HH:mm:ss")," ")}}function oK(t,e){t&1&&re(0," --:--:-- ")}function aK(t,e){if(t&1&&(re(0),sa(1,"date")),t&2){let n=Rt(2);Ct(" ",oa(1,1,n.closingTime(),"HH:mm:ss")," ")}}function cK(t,e){t&1&&re(0," --:--:-- ")}function uK(t,e){if(t&1&&(K(0,"div",8)(1,"div")(2,"div",9),re(3,"Opening time"),Q(),K(4,"div",10),kn(5,sK,2,4)(6,oK,1,0),Q()(),K(7,"div")(8,"div",11),re(9,"Closing time"),Q(),K(10,"div",12),kn(11,aK,2,4)(12,cK,1,0),Q()()(),K(13,"div",13)(14,"div")(15,"div",9),re(16,"Opening in"),Q(),K(17,"div",10),re(18),Q()(),K(19,"div")(20,"div",11),re(21,"Closing in"),Q(),K(22,"div",12),re(23),Q()()()),t&2){let n=Rt();Se(5),On(n.openingTime()?5:6),Se(6),On(n.closingTime()?11:12),Se(7),Ct(" ",n.countdownOpeningTime," "),Se(5),Ct(" ",n.countdownClosingTime," ")}}var wg=class t{raceService=x(zn);raceConfigService=x(Gn);pitService=x(es);startTyreChangeWindowHour=this.raceConfigService.get().startTyreChangeWindowHour;endTyreChangeWindowHour=this.raceConfigService.get().endTyreChangeWindowHour;minTyreChange=this.raceConfigService.get().minTyreChange;activeRace=this.raceService.activeRace;isOpen=!0;isTyreChangeWindowOpen=!1;remainingTyreChange=this.raceConfigService.get().minTyreChange;openingTime=Zr(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.startTyreChangeWindowHour*60*60*1e3;return new Date(n)}});closingTime=Zr(()=>{let e=this.activeRace();if(e){let n=e.start.toDate().getTime()+this.endTyreChangeWindowHour*60*60*1e3;return new Date(n)}});countdownOpeningTime="--:--:--";countdownClosingTime="--:--:--";constructor(){jr(1e3).pipe(Gt()).subscribe(()=>{let e=this.openingTime(),n=this.closingTime();this.updateCountdownOpeningTime(e),this.updateCountdownClosingTime(n),this.updateTyreChangeWindowOpen(e,n)}),this.pitService.getRacePits().pipe(Gt()).subscribe(e=>{let n=e.filter(r=>r.tyreChange).length;this.remainingTyreChange=this.minTyreChange-n})}updateCountdownOpeningTime(e){e?this.countdownOpeningTime=mo(e):this.countdownOpeningTime="--:--:--"}updateCountdownClosingTime(e){e?this.countdownClosingTime=mo(e):this.countdownClosingTime="--:--:--"}updateTyreChangeWindowOpen(e,n){if(e&&n){let r=new Date;this.isTyreChangeWindowOpen=r>=e&&r<=n}else this.isTyreChangeWindowOpen=!1}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Mn({type:t,selectors:[["app-tyre-change-window"]],standalone:!0,features:[Ln],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"]],template:function(n,r){n&1&&(K(0,"div",0)(1,"div",1),Jt("click",function(){return r.isOpen=!r.isOpen}),K(2,"div",2),re(3,"\u{1F6DE} Tyre change"),Q(),K(4,"div",3),kn(5,tK,2,1,"div",4)(6,nK,2,0,"div",5)(7,rK,2,3,"div",6)(8,iK,2,0,"div",7),Q()(),kn(9,uK,24,4),Q()),n&2&&(Se(),ln("ngClass",ia(4,X8,r.isOpen)),Se(4),On(r.remainingTyreChange>0?5:6),Se(2),On(r.isTyreChangeWindowOpen?7:8),Se(2),On(r.isOpen?9:-1))},dependencies:[uf,aa]})};var Ig=class t{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return this.charge<=10?"bg-red-500":this.charge<=25?"bg-orange-500":this.charge<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return this.charge<=10?"border-red-500":this.charge<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Mn({type:t,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[Yr,Ln],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(n,r){n&1&&(K(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),re(4),Q()()(),er(5,"div",4),Q()),n&2&&(Se(),ln("ngClass",r.batteryBorderColor),Se(),qh("width",r.charge,"%"),ln("ngClass",r.batteryColor),Se(2),fy(r.charge),Se(),ln("ngClass",r.batteryBorderColor))},dependencies:[aa],changeDetection:0})};var F1=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(As),Pe(Fi))}}static{this.\u0275dir=At({type:t})}}return t})(),L1=(()=>{class t extends F1{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Oi(t)))(i||t)}})()}static{this.\u0275dir=At({type:t,features:[Xn]})}}return t})(),MT=new V("");var lK={provide:MT,useExisting:zr(()=>Rg),multi:!0};function dK(){let t=ei()?ei().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var hK=new V(""),Rg=(()=>{class t extends F1{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!dK())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(As),Pe(Fi),Pe(hK,8))}}static{this.\u0275dir=At({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Jt("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Ns([lK]),Xn]})}}return t})();function RT(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Ng=new V(""),V1=new V("");function fK(t){return e=>{if(RT(e.value)||RT(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function pK(t){return RT(t.value)?{required:!0}:null}function A1(t){return null}function U1(t){return t!=null}function j1(t){return Ms(t)?Ke(t):t}function B1(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function $1(t,e){return e.map(n=>n(t))}function gK(t){return!t.validate}function H1(t){return t.map(e=>gK(e)?e:n=>e.validate(n))}function mK(t){if(!t)return null;let e=t.filter(U1);return e.length==0?null:function(n){return B1($1(n,e))}}function xT(t){return t!=null?mK(H1(t)):null}function _K(t){if(!t)return null;let e=t.filter(U1);return e.length==0?null:function(n){let r=$1(n,e).map(j1);return bm(r).pipe(Y(B1))}}function PT(t){return t!=null?_K(H1(t)):null}function R1(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function yK(t){return t._rawValidators}function vK(t){return t._rawAsyncValidators}function NT(t){return t?Array.isArray(t)?t:[t]:[]}function Cg(t,e){return Array.isArray(t)?t.includes(e):t===e}function N1(t,e){let n=NT(e);return NT(t).forEach(i=>{Cg(n,i)||n.push(i)}),n}function M1(t,e){return NT(e).filter(n=>!Cg(t,n))}var Tg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=PT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},fc=class extends Tg{get formDirective(){return null}get path(){return null}},zl=class extends Tg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Dg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},wK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Zhe=ge(F({},wK),{"[class.ng-submitted]":"isSubmitted"}),q1=(()=>{class t extends Dg{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(zl,2))}}static{this.\u0275dir=At({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Gh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Xn]})}}return t})(),G1=(()=>{class t extends Dg{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(Pe(fc,10))}}static{this.\u0275dir=At({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Gh("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Xn]})}}return t})();var Bl="VALID",Eg="INVALID",dc="PENDING",$l="DISABLED",pc=class{},bg=class extends pc{constructor(e,n){super(),this.value=e,this.source=n}},ql=class extends pc{constructor(e,n){super(),this.pristine=e,this.source=n}},Gl=class extends pc{constructor(e,n){super(),this.touched=e,this.source=n}},hc=class extends pc{constructor(e,n){super(),this.status=e,this.source=n}};function z1(t){return(Mg(t)?t.validators:t)||null}function IK(t){return Array.isArray(t)?xT(t):t||null}function W1(t,e){return(Mg(e)?e.asyncValidators:t)||null}function EK(t){return Array.isArray(t)?PT(t):t||null}function Mg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function CK(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function TK(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var Sg=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Zr(()=>this.statusReactive()),this.statusReactive=Pn(void 0),this._pristine=Zr(()=>this.pristineReactive()),this.pristineReactive=Pn(!0),this._touched=Zr(()=>this.touchedReactive()),this.touchedReactive=Pn(!1),this._events=new Ye,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Vn(this.statusReactive)}set status(e){Vn(()=>this.statusReactive.set(e))}get valid(){return this.status===Bl}get invalid(){return this.status===Eg}get pending(){return this.status==dc}get disabled(){return this.status===$l}get enabled(){return this.status!==$l}get pristine(){return Vn(this.pristineReactive)}set pristine(e){Vn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Vn(this.touchedReactive)}set touched(e){Vn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(N1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(N1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(M1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(M1(e,this._rawAsyncValidators))}hasValidator(e){return Cg(this._rawValidators,e)}hasAsyncValidator(e){return Cg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Gl(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Gl(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new ql(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new ql(!0,r))}markAsPending(e={}){this.status=dc;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new hc(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$l,this.errors=null,this._forEachChild(i=>{i.disable(ge(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bg(this.value,r)),this._events.next(new hc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Bl,this._forEachChild(r=>{r.enable(ge(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Bl||this.status===dc)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bg(this.value,n)),this._events.next(new hc(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?$l:Bl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=dc,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=j1(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new hc(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new ht,this.statusChanges=new ht}_calculateStatus(){return this._allControlsDisabled()?$l:this.errors?Eg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dc)?dc:this._anyControlsHaveStatus(Eg)?Eg:Bl}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new ql(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Gl(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=IK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=EK(this._rawAsyncValidators)}},Ag=class extends Sg{constructor(e,n,r){super(z1(n),W1(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){TK(this,!0,e),Object.keys(e).forEach(r=>{CK(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var kT=new V("CallSetDisabledState",{providedIn:"root",factory:()=>OT}),OT="always";function DK(t,e){return[...e.path,t]}function K1(t,e,n=OT){Q1(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),SK(t,e),RK(t,e),AK(t,e),bK(t,e)}function x1(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function bK(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Q1(t,e){let n=yK(t);e.validator!==null?t.setValidators(R1(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=vK(t);e.asyncValidator!==null?t.setAsyncValidators(R1(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();x1(e._rawValidators,i),x1(e._rawAsyncValidators,i)}function SK(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Y1(t,e)})}function AK(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Y1(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Y1(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function RK(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function NK(t,e){t==null,Q1(t,e)}function MK(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function xK(t){return Object.getPrototypeOf(t.constructor)===L1}function PK(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function kK(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Rg?n=s:xK(s)?r=s:i=s}),i||r||n||null}var OK={provide:fc,useExisting:zr(()=>FT)},Hl=Promise.resolve(),FT=(()=>{class t extends fc{get submitted(){return Vn(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Zr(()=>this.submittedReactive()),this.submittedReactive=Pn(!1),this._directives=new Set,this.ngSubmit=new ht,this.form=new Ag({},xT(n),PT(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Hl.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),K1(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Hl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Hl.then(()=>{let r=this._findContainer(n.path),i=new Ag({});NK(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Hl.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Hl.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),PK(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(Pe(Ng,10),Pe(V1,10),Pe(kT,8))}}static{this.\u0275dir=At({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Jt("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ns([OK]),Xn]})}}return t})();function P1(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function k1(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var FK=class extends Sg{constructor(e=null,n,r){super(z1(n),W1(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(k1(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){P1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){P1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){k1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var LK={provide:zl,useExisting:zr(()=>LT)},O1=Promise.resolve(),LT=(()=>{class t extends zl{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new FK,this._registered=!1,this.name="",this.update=new ht,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=kK(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),MK(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){K1(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){O1.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&fu(r);O1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?DK(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(Pe(fc,9),Pe(Ng,10),Pe(V1,10),Pe(MT,10),Pe(Ui,8),Pe(kT,8))}}static{this.\u0275dir=At({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ns([LK]),Xn,Yr]})}}return t})(),Z1=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=At({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),VK={provide:MT,useExisting:zr(()=>VT),multi:!0},VT=(()=>{class t extends L1{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Oi(t)))(i||t)}})()}static{this.\u0275dir=At({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Jt("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Ns([VK]),Xn]})}}return t})();function UK(t){return typeof t=="number"?t:parseFloat(t)}var J1=(()=>{class t{constructor(){this._validator=A1}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):A1,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=At({type:t,features:[Yr]})}}return t})();var jK={provide:Ng,useExisting:zr(()=>UT),multi:!0},UT=(()=>{class t extends J1{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=n=>UK(n),this.createValidator=n=>fK(n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Oi(t)))(i||t)}})()}static{this.\u0275dir=At({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&hu("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Ns([jK]),Xn]})}}return t})(),BK={provide:Ng,useExisting:zr(()=>jT),multi:!0};var jT=(()=>{class t extends J1{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=fu,this.createValidator=n=>pK}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=Oi(t)))(i||t)}})()}static{this.\u0275dir=At({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&hu("required",i._enabled?"":null)},inputs:{required:"required"},features:[Ns([BK]),Xn]})}}return t})();var $K=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ts({type:t})}static{this.\u0275inj=Cs({})}}return t})();var X1=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:kT,useValue:n.callSetDisabledState??OT}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=Ts({type:t})}static{this.\u0275inj=Cs({imports:[$K]})}}return t})();var qK=t=>({"mb-2":t}),GK=t=>({"animate-bounce":t});function zK(t,e){if(t&1&&(re(0),sa(1,"date")),t&2){let n=Rt(2);Ct(" ",oa(1,1,n.lastRefuelTime,"HH:mm:ss")," ")}}function WK(t,e){t&1&&re(0," --:--:-- ")}function KK(t,e){if(t&1&&(re(0),sa(1,"date")),t&2){let n=Rt(2);Ct(" ",oa(1,1,n.emptyTime,"HH:mm:ss")," ")}}function QK(t,e){t&1&&re(0," --:--:-- ")}function YK(t,e){if(t&1){let n=zh();K(0,"div",7)(1,"div")(2,"div",8),re(3,"Last refuel time"),Q(),K(4,"div",9),kn(5,zK,2,4)(6,WK,1,0),Q()(),K(7,"div")(8,"div",10),re(9,"Empty time"),Q(),K(10,"div",11),kn(11,KK,2,4)(12,QK,1,0),Q()()(),K(13,"div",7)(14,"div")(15,"div",8),re(16,"Since last refuel"),Q(),K(17,"div",9),re(18),Q()(),K(19,"div")(20,"div",10),re(21,"Empty in"),Q(),K(22,"div",11),re(23),Q()()(),K(24,"div",12)(25,"div")(26,"div",8),re(27,"Remaining laps"),Q(),K(28,"div",9),re(29),Q()(),K(30,"div")(31,"div",10),re(32,"Fuel Duration (min):"),Q(),K(33,"div",13)(34,"button",14),Jt("click",function(){Ds(n);let i=Rt();return bs(i.increaseFuelDuration())}),re(35,"+"),Q(),K(36,"form",15),Jt("ngSubmit",function(){Ds(n);let i=Rt();return bs(i.onSubmit())}),K(37,"input",16),gy("ngModelChange",function(i){Ds(n);let s=Rt();return bA(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),bs(i)}),Q()(),K(38,"button",17),Jt("click",function(){Ds(n);let i=Rt();return bs(i.decreaseFuelDuration())}),re(39,"-"),Q()()()()}if(t&2){let n=Rt();Se(5),On(n.lastRefuelTime?5:6),Se(6),On(n.emptyTime?11:12),Se(7),Ct(" ",n.sinceLastRefuel," "),Se(5),Ct(" ",n.emptyCountdown," "),Se(6),Ct(" ",n.remainingLap," "),Se(8),py("ngModel",n.fuelDurationMinute)}}var xg=class t{raceService=x(zn);pitService=x(es);raceConfigService=x(Gn);referenceLapTimeMillisecond=Pn(64567);activeRace=this.raceService.activeRace;fuelDurationMinute=this.raceConfigService.get().fuelDurationMinute;isOpen=!0;warning=!1;remainingColor="bg-green-500";fuelPercentage=100;remainingLap=0;emptyTime;emptyCountdown="--:--:--";lastRefuelTime;sinceLastRefuel="--:--:--";constructor(){let e=this.pitService.getRacePits().pipe(Gt()),n=jr(1e3).pipe(Gt());gr([go(this.activeRace),e,n]).pipe(Gt(),Y(([r,i])=>{let s=this.getRecentRefuelPit(i);return{activeRace:r,recentRefuelPit:s}})).subscribe(({activeRace:r,recentRefuelPit:i})=>{let s;i&&i.exitTime?s=i.exitTime.toDate():r&&(s=r.start.toDate()),this.updateInfoFromDate(s)})}onSubmit(){console.log("New fuel duration minute:",this.fuelDurationMinute)}increaseFuelDuration(){this.fuelDurationMinute++}decreaseFuelDuration(){this.fuelDurationMinute--}updateInfoFromDate(e){this.lastRefuelTime=e,this.emptyTime=this.calculateEmptyTime(e),this.emptyCountdown=mo(this.emptyTime),this.fuelPercentage=this.calculateFuelPercentage(this.emptyTime,this.fuelDurationMinute),this.warning=this.fuelPercentage<=20,this.remainingColor=this.getRemainingColor(this.fuelPercentage),this.remainingLap=this.calculateRemainingLaps(this.emptyTime,this.referenceLapTimeMillisecond()),this.sinceLastRefuel=b1(e,new Date)}getRecentRefuelPit(e){let n=e.filter(r=>r.refuel&&r.exitTime!==void 0).sort((r,i)=>{let s=r.exitTime?r.exitTime.toDate().getTime():0;return(i.exitTime?i.exitTime.toDate().getTime():0)-s});if(n.length>0)return n[0]}calculateEmptyTime(e){if(e)return f1(e,this.fuelDurationMinute)}calculateRemainingLaps(e,n){if(e&&n){let r=lc(e,new Date);return Math.floor(r/n)}else return 0}calculateFuelPercentage(e,n){if(e){let i=po(e,new Date)/n*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}else return 100}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Mn({type:t,selectors:[["app-fuel"]],standalone:!0,features:[Ln],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(n,r){n&1&&(K(0,"div",0)(1,"div",1),Jt("click",function(){return r.isOpen=!r.isOpen}),K(2,"div",2),re(3,"\u26FD\uFE0F Fuel"),Q(),K(4,"div",3)(5,"div",4),re(6),Q(),K(7,"div",5),re(8),Q(),er(9,"app-battery",6),Q()(),kn(10,YK,40,6),Q()),n&2&&(Se(),ln("ngClass",ia(8,qK,r.isOpen)),Se(3),ln("ngClass",ia(10,GK,r.warning)),Se(),ln("ngClass",r.remainingColor),Se(),Ct(" Laps: ",r.remainingLap," "),Se(),ln("ngClass",r.remainingColor),Se(),Ct(" Empty: ",r.emptyCountdown," "),Se(),ln("charge",r.fuelPercentage),Se(),On(r.isOpen?10:-1))},dependencies:[aa,uf,Ig,X1,Z1,Rg,VT,q1,G1,jT,UT,LT,FT]})};var Pg=class t{raceService=x(zn);activeRace=this.raceService.activeRace;pitService=x(es);raceConfigService=x(Gn);durationHour=this.raceConfigService.get().durationHour;minDriverChange=this.raceConfigService.get().minDriverChange;constructor(){gr({pits:this.pitService.getRacePits(),activeRace:go(this.activeRace),ping:jr(1e3)}).pipe(Gt()).subscribe(({pits:e,activeRace:n})=>{n&&this.nextStintsAvgTime(e,n,0)})}nextStintsAvgTime(e,n,r){let i=new Date,s=cc(n.start.toDate(),this.durationHour);if(i>=s)return{avgStintTime:void 0,avgIfChangedNow:void 0};let o=po(s,i),a=e.reduce((w,R)=>w+(R.entryDriverId!==R.exitDriverId?1:0),0),c=Math.max(0,this.minDriverChange-a);if(c===0)return console.info("Hai gi\xE0 fatto tutti i cambi pilota richiesti."),{avgStintTime:void 0,avgIfChangedNow:void 0};let l=this.getLastPitWithDriverChange(e),d=l?l.entryTime.toDate():n.start.toDate(),g=po(s,d)/c,_=o/c;return{avgStintTime:g||void 0,avgIfChangedNow:_||void 0}}getLastPitWithDriverChange(e){if(e.length===0||e.length<2)return;let n=e.sort((r,i)=>i.entryTime.toMillis()-r.entryTime.toMillis());for(let r of n)if(r.entryDriverId!==r.exitDriverId)return r}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};var kg=class t{raceLogicService=x(Pg);static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Mn({type:t,selectors:[["app-root"]],standalone:!0,features:[Ln],decls:19,vars:0,consts:[[1,"w-full","h-screen","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3"]],template:function(n,r){n&1&&(K(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),re(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),Q()(),K(5,"div",4),er(6,"app-race"),Q()(),K(7,"div",5),er(8,"app-tyre-change-window")(9,"app-fuel"),K(10,"div"),re(11,"Placeholder"),Q(),K(12,"div"),re(13,"Placeholder"),Q(),K(14,"div"),re(15,"Placeholder"),Q(),K(16,"div"),re(17,"Placeholder"),Q()()(),er(18,"router-outlet"))},dependencies:[dv,yg,wg,xg]})};rR(kg,o1).catch(t=>console.error(t));
