import{$ as cr,A as Dr,B as jr,C as Qp,D as yn,E as XM,F as JM,G as Oi,H as ba,I as Bd,J as $d,K as Hd,L as wa,M as ZM,N as eP,O as tP,P as nP,Q as zd,R as Kc,S as Ye,T as Ut,U as Dn,V as Ur,W as Nb,X as Xp,Y as Bt,Z as un,_ as _o,a as q,aa as rP,b as fe,ba as dn,c as vs,ca as Jp,d as I,da as ce,e as Q,ea as iP,f as zc,g as Kp,h as zM,i as WM,j as qM,k as GM,l as _s,m as kb,n as Wc,o as qc,p as Fn,q as Vd,r as KM,s as jd,t as Yp,u as YM,v as ki,w as QM,x as Ni,y as Gc,z as Ud}from"./chunk-TSZ4SNPW.js";function jb(n,e){return Object.is(n,e)}var hn=null,Wd=!1,Ub=1,lr=Symbol("SIGNAL");function Oe(n){let e=hn;return hn=n,e}function oP(){return hn}function d4(){return Wd}var Ea={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function em(n){if(Wd)throw new Error("");if(hn===null)return;hn.consumerOnSignalRead(n);let e=hn.nextProducerIndex++;if(nm(hn),e<hn.producerNode.length&&hn.producerNode[e]!==n&&qd(hn)){let t=hn.producerNode[e];tm(t,hn.producerIndexOfThis[e])}hn.producerNode[e]!==n&&(hn.producerNode[e]=n,hn.producerIndexOfThis[e]=qd(hn)?lP(n,hn,e):0),hn.producerLastReadVersion[e]=n.version}function h4(){Ub++}function Bb(n){if(!(qd(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ub)){if(!n.producerMustRecompute(n)&&!Kd(n)){Lb(n);return}n.producerRecomputeValue(n),Lb(n)}}function sP(n){if(n.liveConsumerNode===void 0)return;let e=Wd;Wd=!0;try{for(let t of n.liveConsumerNode)t.dirty||cP(t)}finally{Wd=e}}function aP(){return hn?.consumerAllowSignalWrites!==!1}function cP(n){n.dirty=!0,sP(n),n.consumerMarkedDirty?.(n)}function Lb(n){n.dirty=!1,n.lastCleanEpoch=Ub}function Yc(n){return n&&(n.nextProducerIndex=0),Oe(n)}function Gd(n,e){if(Oe(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(qd(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)tm(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Kd(n){nm(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Bb(t),r!==t.version))return!0}return!1}function Qc(n){if(nm(n),qd(n))for(let e=0;e<n.producerNode.length;e++)tm(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function lP(n,e,t){if(uP(n),n.liveConsumerNode.length===0&&dP(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=lP(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function tm(n,e){if(uP(n),n.liveConsumerNode.length===1&&dP(n))for(let r=0;r<n.producerNode.length;r++)tm(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];nm(i),i.producerIndexOfThis[r]=e}}function qd(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function nm(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function uP(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function dP(n){return n.producerNode!==void 0}function hP(n){let e=Object.create(f4);e.computation=n;let t=()=>{if(Bb(e),em(e),e.value===Zp)throw e.error;return e.value};return t[lr]=e,t}var Ob=Symbol("UNSET"),Fb=Symbol("COMPUTING"),Zp=Symbol("ERRORED"),f4=fe(q({},Ea),{value:Ob,dirty:!0,error:null,equal:jb,kind:"computed",producerMustRecompute(n){return n.value===Ob||n.value===Fb},producerRecomputeValue(n){if(n.value===Fb)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Fb;let t=Yc(n),r,i=!1;try{r=n.computation(),Oe(null),i=e!==Ob&&e!==Zp&&r!==Zp&&n.equal(e,r)}catch(o){r=Zp,n.error=o}finally{Gd(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function p4(){throw new Error}var fP=p4;function pP(){fP()}function mP(n){fP=n}var m4=null;function gP(n){let e=Object.create($b);e.value=n;let t=()=>(em(e),e.value);return t[lr]=e,t}function rm(n,e){aP()||pP(),n.equal(n.value,e)||(n.value=e,g4(n))}function yP(n,e){aP()||pP(),rm(n,e(n.value))}var $b=fe(q({},Ea),{equal:jb,value:void 0,kind:"signal"});function g4(n){n.version++,h4(),sP(n),m4?.()}function vP(n,e,t){let r=Object.create(y4);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(Qc(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Vb)}let a=()=>{if(r.fn===null)return;if(d4())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Kd(r))return;r.hasRun=!0;let c=Yc(r);try{r.cleanupFn(),r.cleanupFn=Vb,r.fn(i)}finally{Gd(r,c)}};return r.ref={notify:()=>cP(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>s(r),[lr]:r},r.ref}var Vb=()=>{},y4=fe(q({},Ea),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Vb});function Ee(n){return typeof n=="function"}function Xc(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var im=Xc(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ia(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var $t=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Ee(r))try{r()}catch(o){e=o instanceof im?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_P(o)}catch(s){e=e??[],s instanceof im?e=[...e,...s.errors]:e.push(s)}}if(e)throw new im(e)}}add(e){var t;if(e&&e!==this)if(this.closed)_P(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ia(t,e)}remove(e){let{_finalizers:t}=this;t&&Ia(t,e),e instanceof n&&e._removeParent(this)}};$t.EMPTY=(()=>{let n=new $t;return n.closed=!0,n})();var Hb=$t.EMPTY;function om(n){return n instanceof $t||n&&"closed"in n&&Ee(n.remove)&&Ee(n.add)&&Ee(n.unsubscribe)}function _P(n){Ee(n)?n():n.unsubscribe()}var li={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Jc={setTimeout(n,e,...t){let{delegate:r}=Jc;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Jc;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function sm(n){Jc.setTimeout(()=>{let{onUnhandledError:e}=li;if(e)e(n);else throw n})}function Yd(){}var bP=zb("C",void 0,void 0);function wP(n){return zb("E",void 0,n)}function EP(n){return zb("N",n,void 0)}function zb(n,e,t){return{kind:n,value:e,error:t}}var Ca=null;function Zc(n){if(li.useDeprecatedSynchronousErrorHandling){let e=!Ca;if(e&&(Ca={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ca;if(Ca=null,t)throw r}}else n()}function IP(n){li.useDeprecatedSynchronousErrorHandling&&Ca&&(Ca.errorThrown=!0,Ca.error=n)}var Ta=class extends $t{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,om(e)&&e.add(this)):this.destination=b4}static create(e,t,r){return new el(e,t,r)}next(e){this.isStopped?qb(EP(e),this):this._next(e)}error(e){this.isStopped?qb(wP(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?qb(bP,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},v4=Function.prototype.bind;function Wb(n,e){return v4.call(n,e)}var Gb=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){am(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){am(r)}else am(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){am(t)}}},el=class extends Ta{constructor(e,t,r){super();let i;if(Ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&li.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Wb(e.next,o),error:e.error&&Wb(e.error,o),complete:e.complete&&Wb(e.complete,o)}):i=e}this.destination=new Gb(i)}};function am(n){li.useDeprecatedSynchronousErrorHandling?IP(n):sm(n)}function _4(n){throw n}function qb(n,e){let{onStoppedNotification:t}=li;t&&Jc.setTimeout(()=>t(n,e))}var b4={closed:!0,next:Yd,error:_4,complete:Yd};var tl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Zn(n){return n}function cm(...n){return Kb(n)}function Kb(n){return n.length===0?Zn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ye=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=E4(t)?t:new el(t,r,i);return Zc(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=CP(r),new r((i,o)=>{let s=new el({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[tl](){return this}pipe(...t){return Kb(t)(this)}toPromise(t){return t=CP(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function CP(n){var e;return(e=n??li.Promise)!==null&&e!==void 0?e:Promise}function w4(n){return n&&Ee(n.next)&&Ee(n.error)&&Ee(n.complete)}function E4(n){return n&&n instanceof Ta||w4(n)&&om(n)}function Yb(n){return Ee(n?.lift)}function Me(n){return e=>{if(Yb(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Se(n,e,t,r,i){return new Qd(n,e,t,r,i)}var Qd=class extends Ta{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function nl(){return Me((n,e)=>{let t=null;n._refCount++;let r=Se(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var rl=class extends ye{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Yb(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $t;let t=this.getSubject();e.add(this.source.subscribe(Se(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$t.EMPTY)}return e}refCount(){return nl()(this)}};var TP=Xc(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ct=(()=>{class n extends ye{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new lm(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new TP}next(t){Zc(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Zc(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Zc(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Hb:(this.currentObservers=null,o.push(t),new $t(()=>{this.currentObservers=null,Ia(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ye;return t.source=this,t}}return n.create=(e,t)=>new lm(e,t),n})(),lm=class extends Ct{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Hb}};var fn=class extends Ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Xd={now(){return(Xd.delegate||Date).now()},delegate:void 0};var Jd=class extends Ct{constructor(e=1/0,t=1/0,r=Xd){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var um=class extends $t{constructor(e,t){super()}schedule(e,t=0){return this}};var Zd={setInterval(n,e,...t){let{delegate:r}=Zd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Zd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var il=class extends um{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Zd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Zd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ia(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var ol=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};ol.now=Xd.now;var sl=class extends ol{constructor(e,t=ol.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var al=new sl(il),Qb=al;var dm=class extends il{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var hm=class extends sl{};var Xb=new hm(dm);var xr=new ye(n=>n.complete());function fm(n){return n&&Ee(n.schedule)}function SP(n){return n[n.length-1]}function pm(n){return Ee(SP(n))?n.pop():void 0}function bs(n){return fm(SP(n))?n.pop():void 0}function Jb(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function xP(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(h){s(h)}}function c(u){try{l(r.throw(u))}catch(h){s(h)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function DP(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sa(n){return this instanceof Sa?(this.v=n,this):new Sa(n)}function AP(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(p){return function(g){return Promise.resolve(g).then(p,h)}}function a(p,g){r[p]&&(i[p]=function(v){return new Promise(function(_,D){o.push([p,v,_,D])>1||c(p,v)})},g&&(i[p]=g(i[p])))}function c(p,g){try{l(r[p](g))}catch(v){f(o[0][3],v)}}function l(p){p.value instanceof Sa?Promise.resolve(p.value.v).then(u,h):f(o[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,g){p(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function RP(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof DP=="function"?DP(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var mm=n=>n&&typeof n.length=="number"&&typeof n!="function";function gm(n){return Ee(n?.then)}function ym(n){return Ee(n[tl])}function vm(n){return Symbol.asyncIterator&&Ee(n?.[Symbol.asyncIterator])}function _m(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function I4(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var bm=I4();function wm(n){return Ee(n?.[bm])}function Em(n){return AP(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Sa(t.read());if(i)return yield Sa(void 0);yield yield Sa(r)}}finally{t.releaseLock()}})}function Im(n){return Ee(n?.getReader)}function Ht(n){if(n instanceof ye)return n;if(n!=null){if(ym(n))return C4(n);if(mm(n))return T4(n);if(gm(n))return S4(n);if(vm(n))return MP(n);if(wm(n))return D4(n);if(Im(n))return x4(n)}throw _m(n)}function C4(n){return new ye(e=>{let t=n[tl]();if(Ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function T4(n){return new ye(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function S4(n){return new ye(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,sm)})}function D4(n){return new ye(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function MP(n){return new ye(e=>{A4(n,e).catch(t=>e.error(t))})}function x4(n){return MP(Em(n))}function A4(n,e){var t,r,i,o;return xP(this,void 0,void 0,function*(){try{for(t=RP(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function ur(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function ws(n,e=0){return Me((t,r)=>{t.subscribe(Se(r,i=>ur(r,n,()=>r.next(i),e),()=>ur(r,n,()=>r.complete(),e),i=>ur(r,n,()=>r.error(i),e)))})}function Es(n,e=0){return Me((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function PP(n,e){return Ht(n).pipe(Es(e),ws(e))}function kP(n,e){return Ht(n).pipe(Es(e),ws(e))}function NP(n,e){return new ye(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function OP(n,e){return new ye(t=>{let r;return ur(t,e,()=>{r=n[bm](),ur(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Ee(r?.return)&&r.return()})}function Cm(n,e){if(!n)throw new Error("Iterable cannot be null");return new ye(t=>{ur(t,e,()=>{let r=n[Symbol.asyncIterator]();ur(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function FP(n,e){return Cm(Em(n),e)}function LP(n,e){if(n!=null){if(ym(n))return PP(n,e);if(mm(n))return NP(n,e);if(gm(n))return kP(n,e);if(vm(n))return Cm(n,e);if(wm(n))return OP(n,e);if(Im(n))return FP(n,e)}throw _m(n)}function yt(n,e){return e?LP(n,e):Ht(n)}function de(...n){let e=bs(n);return yt(n,e)}function cl(n,e){let t=Ee(n)?n:()=>n,r=i=>i.error(t());return new ye(e?i=>e.schedule(r,0,i):r)}function Zb(n){return!!n&&(n instanceof ye||Ee(n.lift)&&Ee(n.subscribe))}var bo=Xc(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function VP(n){return n instanceof Date&&!isNaN(n)}function te(n,e){return Me((t,r)=>{let i=0;t.subscribe(Se(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:R4}=Array;function M4(n,e){return R4(e)?n(...e):n(e)}function Tm(n){return te(e=>M4(n,e))}var{isArray:P4}=Array,{getPrototypeOf:k4,prototype:N4,keys:O4}=Object;function Sm(n){if(n.length===1){let e=n[0];if(P4(e))return{args:e,keys:null};if(F4(e)){let t=O4(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function F4(n){return n&&typeof n=="object"&&k4(n)===N4}function Dm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function xe(...n){let e=bs(n),t=pm(n),{args:r,keys:i}=Sm(n);if(r.length===0)return yt([],e);let o=new ye(L4(r,e,i?s=>Dm(i,s):Zn));return t?o.pipe(Tm(t)):o}function L4(n,e,t=Zn){return r=>{jP(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)jP(e,()=>{let l=yt(n[c],e),u=!1;l.subscribe(Se(r,h=>{o[c]=h,u||(u=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jP(n,e,t){n?ur(t,n,e):e()}function UP(n,e,t,r,i,o,s,a){let c=[],l=0,u=0,h=!1,f=()=>{h&&!c.length&&!l&&e.complete()},p=v=>l<r?g(v):c.push(v),g=v=>{o&&e.next(v),l++;let _=!1;Ht(t(v,u++)).subscribe(Se(e,D=>{i?.(D),o?p(D):e.next(D)},()=>{_=!0},void 0,()=>{if(_)try{for(l--;c.length&&l<r;){let D=c.shift();s?ur(e,s,()=>g(D)):g(D)}f()}catch(D){e.error(D)}}))};return n.subscribe(Se(e,p,()=>{h=!0,f()})),()=>{a?.()}}function Kt(n,e,t=1/0){return Ee(e)?Kt((r,i)=>te((o,s)=>e(r,o,i,s))(Ht(n(r,i))),t):(typeof e=="number"&&(t=e),Me((r,i)=>UP(r,i,n,t)))}function ew(n=1/0){return Kt(Zn,n)}function BP(){return ew(1)}function ll(...n){return BP()(yt(n,bs(n)))}function xm(n){return new ye(e=>{Ht(n()).subscribe(e)})}function tw(...n){let e=pm(n),{args:t,keys:r}=Sm(n),i=new ye(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let h=!1;Ht(t[u]).subscribe(Se(o,f=>{h||(h=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!h)&&(l||o.next(r?Dm(r,a):a),o.complete())}))}});return e?i.pipe(Tm(e)):i}function nw(n=0,e,t=Qb){let r=-1;return e!=null&&(fm(e)?t=e:r=e),new ye(i=>{let o=VP(n)?+n-t.now():n;o<0&&(o=0);let s=0;return t.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Tt(n=0,e=al){return n<0&&(n=0),nw(n,n,e)}function xn(n,e){return Me((t,r)=>{let i=0;t.subscribe(Se(r,o=>n.call(e,o,i++)&&r.next(o)))})}function Is(n){return Me((e,t)=>{let r=null,i=!1,o;r=e.subscribe(Se(t,void 0,void 0,s=>{o=Ht(n(s,Is(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function $P(n,e,t,r,i){return(o,s)=>{let a=t,c=e,l=0;o.subscribe(Se(s,u=>{let h=l++;c=a?n(c,u,h):(a=!0,u),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function wo(n,e){return Ee(e)?Kt(n,e,1):Kt(n,1)}function Cs(n){return Me((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Fi(n){return n<=0?()=>xr:Me((e,t)=>{let r=0;e.subscribe(Se(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ul(n,e=Zn){return n=n??V4,Me((t,r)=>{let i,o=!0;t.subscribe(Se(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function V4(n,e){return n===e}function Am(n=j4){return Me((e,t)=>{let r=!1;e.subscribe(Se(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function j4(){return new bo}function Da(n){return Me((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Eo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xn((i,o)=>n(i,o,r)):Zn,Fi(1),t?Cs(e):Am(()=>new bo))}function rw(n,e,t,r){return Me((i,o)=>{let s;!e||typeof e=="function"?s=e:{duration:t,element:s,connector:r}=e;let a=new Map,c=g=>{a.forEach(g),g(o)},l=g=>c(v=>v.error(g)),u=0,h=!1,f=new Qd(o,g=>{try{let v=n(g),_=a.get(v);if(!_){a.set(v,_=r?r():new Ct);let D=p(v,_);if(o.next(D),t){let R=Se(_,()=>{_.complete(),R?.unsubscribe()},void 0,void 0,()=>a.delete(v));f.add(Ht(t(D)).subscribe(R))}}_.next(s?s(g):g)}catch(v){l(v)}},()=>c(g=>g.complete()),l,()=>a.clear(),()=>(h=!0,u===0));i.subscribe(f);function p(g,v){let _=new ye(D=>{u++;let R=v.subscribe(D);return()=>{R.unsubscribe(),--u===0&&h&&f.unsubscribe()}});return _.key=g,_}})}function dl(n){return n<=0?()=>xr:Me((e,t)=>{let r=[];e.subscribe(Se(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function iw(n,e){let t=arguments.length>=2;return r=>r.pipe(n?xn((i,o)=>n(i,o,r)):Zn,dl(1),t?Cs(e):Am(()=>new bo))}function Rm(){return Me((n,e)=>{let t,r=!1;n.subscribe(Se(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Mm(n,e){return Me($P(n,e,arguments.length>=2,!0))}function hl(...n){let e=bs(n);return Me((t,r)=>{(e?ll(n,t,e):ll(n,t)).subscribe(r)})}function pn(n,e){return Me((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(Se(r,c=>{i?.unsubscribe();let l=0,u=o++;Ht(n(c,u)).subscribe(i=Se(r,h=>r.next(e?e(c,h,u,l++):h),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function vn(n){return Me((e,t)=>{Ht(n).subscribe(Se(t,()=>t.complete(),Yd)),!t.closed&&e.subscribe(t)})}function _n(n,e,t){let r=Ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?Me((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Se(o,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Zn}var Dk="https://g.co/ng/security#xss",oe=class extends Error{code;constructor(e,t){super(pg(e,t)),this.code=e}};function pg(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}var xk=Symbol("InputSignalNode#UNSET"),U4=fe(q({},$b),{transformFn:void 0,applyValueToInputSignal(n,e){rm(n,e)}});function Ak(n,e){let t=Object.create(U4);t.value=n,t.transformFn=e?.transform;function r(){if(em(t),t.value===xk)throw new oe(-950,!1);return t.value}return r[lr]=t,r}function gh(n){return{toString:n}.toString()}var Pm="__parameters__";function B4(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function Rk(n,e,t){return gh(()=>{let r=B4(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,l,u){let h=c.hasOwnProperty(Pm)?c[Pm]:Object.defineProperty(c,Pm,{value:[]})[Pm];for(;h.length<=u;)h.push(null);return(h[u]=h[u]||[]).push(s),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var th=globalThis;function ut(n){for(let e in n)if(n[e]===ut)return e;throw Error("Could not find renamed property on target object.")}function $4(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function hr(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(hr).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function HP(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var H4=ut({__forward_ref__:ut});function Hr(n){return n.__forward_ref__=Hr,n.toString=function(){return hr(this())},n}function er(n){return Mk(n)?n():n}function Mk(n){return typeof n=="function"&&n.hasOwnProperty(H4)&&n.__forward_ref__===Hr}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function xo(n){return{providers:n.providers||[],imports:n.imports||[]}}function mg(n){return zP(n,kk)||zP(n,Nk)}function Pk(n){return mg(n)!==null}function zP(n,e){return n.hasOwnProperty(e)?n[e]:null}function z4(n){let e=n&&(n[kk]||n[Nk]);return e||null}function WP(n){return n&&(n.hasOwnProperty(qP)||n.hasOwnProperty(W4))?n[qP]:null}var kk=ut({\u0275prov:ut}),qP=ut({\u0275inj:ut}),Nk=ut({ngInjectableDef:ut}),W4=ut({ngInjectorDef:ut}),K=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Ok(n){return n&&!!n.\u0275providers}var q4=ut({\u0275cmp:ut}),G4=ut({\u0275dir:ut}),K4=ut({\u0275pipe:ut}),Y4=ut({\u0275mod:ut}),Bm=ut({\u0275fac:ut}),ih=ut({__NG_ELEMENT_ID__:ut}),GP=ut({__NG_ENV_ID__:ut});function gg(n){return typeof n=="string"?n:n==null?"":String(n)}function Q4(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():gg(n)}function X4(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new oe(-200,n)}function fE(n,e){throw new oe(-201,!1)}var ke=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ke||{}),vw;function Fk(){return vw}function dr(n){let e=vw;return vw=n,e}function Lk(n,e,t){let r=mg(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ke.Optional)return null;if(e!==void 0)return e;fE(n,"Injector")}var J4={},oh=J4,_w="__NG_DI_FLAG__",$m="ngTempTokenPath",Z4="ngTokenPath",eG=/\n/gm,tG="\u0275",KP="__source",gl;function nG(){return gl}function Ts(n){let e=gl;return gl=n,e}function rG(n,e=ke.Default){if(gl===void 0)throw new oe(-203,!1);return gl===null?Lk(n,void 0,e):gl.get(n,e&ke.Optional?null:void 0,e)}function ae(n,e=ke.Default){return(Fk()||rG)(er(n),e)}function P(n,e=ke.Default){return ae(n,yg(e))}function yg(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function bw(n){let e=[];for(let t=0;t<n.length;t++){let r=er(n[t]);if(Array.isArray(r)){if(r.length===0)throw new oe(900,!1);let i,o=ke.Default;for(let s=0;s<r.length;s++){let a=r[s],c=iG(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ae(i,o))}else e.push(ae(r))}return e}function Vk(n,e){return n[_w]=e,n.prototype[_w]=e,n}function iG(n){return n[_w]}function oG(n,e,t,r){let i=n[$m];throw e[KP]&&i.unshift(e[KP]),n.message=sG(`
`+n.message,i,t,r),n[Z4]=i,n[$m]=null,n}function sG(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==tG?n.slice(2):n;let i=hr(e);if(Array.isArray(e))i=e.map(hr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):hr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(eG,`
  `)}`}var Ae=Vk(Rk("Optional"),8);var aG=Vk(Rk("SkipSelf"),4);function Ra(n,e){let t=n.hasOwnProperty(Bm);return t?n[Bm]:null}function pE(n,e){n.forEach(t=>Array.isArray(t)?pE(t,e):e(t))}function jk(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Hm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function cG(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function lG(n,e,t){let r=yh(n,e);return r>=0?n[r|1]=t:(r=~r,cG(n,r,e,t)),r}function ow(n,e){let t=yh(n,e);if(t>=0)return n[t|1]}function yh(n,e){return uG(n,e,1)}function uG(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var vl={},Br=[],_l=new K(""),Uk=new K("",-1),Bk=new K(""),zm=class{get(e,t=oh){if(t===oh){let r=new Error(`NullInjectorError: No provider for ${hr(e)}!`);throw r.name="NullInjectorError",r}return t}};function $k(n,e){let t=n[Y4]||null;if(!t&&e===!0)throw new Error(`Type ${hr(n)} does not have '\u0275mod' property.`);return t}function Ma(n){return n[q4]||null}function Hk(n){return n[G4]||null}function zk(n){return n[K4]||null}function Wk(n){let e=Ma(n)||Hk(n)||zk(n);return e!==null&&e.standalone}function vt(n){return{\u0275providers:n}}function dG(...n){return{\u0275providers:qk(!0,n),\u0275fromNgModule:!0}}function qk(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return pE(e,s=>{let a=s;ww(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Gk(i,o),t}function Gk(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];mE(i,o=>{e(o,r)})}}function ww(n,e,t,r){if(n=er(n),!n)return!1;let i=null,o=WP(n),s=!o&&Ma(n);if(!o&&!s){let c=n.ngModule;if(o=WP(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)ww(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{pE(o.imports,u=>{ww(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&Gk(l,e)}if(!a){let l=Ra(i)||(()=>new i);e({provide:i,useFactory:l,deps:Br},i),e({provide:Bk,useValue:i,multi:!0},i),e({provide:_l,useValue:()=>ae(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let l=n;mE(c,u=>{e(u,l)})}}else return!1;return i!==n&&n.providers!==void 0}function mE(n,e){for(let t of n)Ok(t)&&(t=t.\u0275providers),Array.isArray(t)?mE(t,e):e(t)}var hG=ut({provide:String,useValue:ut});function Kk(n){return n!==null&&typeof n=="object"&&hG in n}function fG(n){return!!(n&&n.useExisting)}function pG(n){return!!(n&&n.useFactory)}function bl(n){return typeof n=="function"}function mG(n){return!!n.useClass}var vg=new K(""),Om={},gG={},sw;function gE(){return sw===void 0&&(sw=new zm),sw}var Vn=class{},sh=class extends Vn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Iw(e,s=>this.processProvider(s)),this.records.set(Uk,fl(void 0,this)),i.has("environment")&&this.records.set(Vn,fl(void 0,this));let o=this.records.get(vg);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Bk,Br,ke.Self))}destroy(){nh(this),this._destroyed=!0;let e=Oe(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Oe(e)}}onDestroy(e){return nh(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){nh(this);let t=Ts(this),r=dr(void 0),i;try{return e()}finally{Ts(t),dr(r)}}get(e,t=oh,r=ke.Default){if(nh(this),e.hasOwnProperty(GP))return e[GP](this);r=yg(r);let i,o=Ts(this),s=dr(void 0);try{if(!(r&ke.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=wG(e)&&mg(e);l&&this.injectableDefInScope(l)?c=fl(Ew(e),Om):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ke.Self?gE():this.parent;return t=r&ke.Optional&&t===oh?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[$m]=a[$m]||[]).unshift(hr(e)),o)throw a;return oG(a,e,"R3InjectorError",this.source)}else throw a}finally{dr(s),Ts(o)}}resolveInjectorInitializers(){let e=Oe(null),t=Ts(this),r=dr(void 0),i;try{let o=this.get(_l,Br,ke.Self);for(let s of o)s()}finally{Ts(t),dr(r),Oe(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(hr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=er(e);let t=bl(e)?e:er(e&&e.provide),r=vG(e);if(!bl(e)&&e.multi===!0){let i=this.records.get(t);i||(i=fl(void 0,Om,!0),i.factory=()=>bw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Oe(null);try{return t.value===Om&&(t.value=gG,t.value=t.factory()),typeof t.value=="object"&&t.value&&bG(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Oe(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=er(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Ew(n){let e=mg(n),t=e!==null?e.factory:Ra(n);if(t!==null)return t;if(n instanceof K)throw new oe(204,!1);if(n instanceof Function)return yG(n);throw new oe(204,!1)}function yG(n){if(n.length>0)throw new oe(204,!1);let t=z4(n);return t!==null?()=>t.factory(n):()=>new n}function vG(n){if(Kk(n))return fl(void 0,n.useValue);{let e=Yk(n);return fl(e,Om)}}function Yk(n,e,t){let r;if(bl(n)){let i=er(n);return Ra(i)||Ew(i)}else if(Kk(n))r=()=>er(n.useValue);else if(pG(n))r=()=>n.useFactory(...bw(n.deps||[]));else if(fG(n))r=()=>ae(er(n.useExisting));else{let i=er(n&&(n.useClass||n.provide));if(_G(n))r=()=>new i(...bw(n.deps));else return Ra(i)||Ew(i)}return r}function nh(n){if(n.destroyed)throw new oe(205,!1)}function fl(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _G(n){return!!n.deps}function bG(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function wG(n){return typeof n=="function"||typeof n=="object"&&n instanceof K}function Iw(n,e){for(let t of n)Array.isArray(t)?Iw(t,e):t&&Ok(t)?Iw(t.\u0275providers,e):e(t)}function An(n,e){n instanceof sh&&nh(n);let t,r=Ts(n),i=dr(void 0);try{return e()}finally{Ts(r),dr(i)}}function Qk(){return Fk()!==void 0||nG()!=null}function xl(n){if(!Qk())throw new oe(-203,!1)}function EG(n){return typeof n=="function"}var Ao=0,Pe=1,ve=2,rr=3,di=4,fi=5,ah=6,Wm=7,Ln=8,wl=9,Io=10,Qt=11,ch=12,YP=13,Al=14,hi=15,El=16,pl=17,Il=18,_g=19,Xk=20,Ss=21,Fm=22,Pa=23,Ar=24,tr=25,Jk=1;var ka=7,qm=8,Gm=9,nr=10;function Ds(n){return Array.isArray(n)&&typeof n[Jk]=="object"}function Ro(n){return Array.isArray(n)&&n[Jk]===!0}function yE(n){return(n.flags&4)!==0}function bg(n){return n.componentOffset>-1}function wg(n){return(n.flags&1)===1}function xs(n){return!!n.template}function Cw(n){return(n[ve]&512)!==0}function vh(n){return(n[ve]&256)===256}var Tw=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function Zk(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Bi=(()=>{let n=()=>eN;return n.ngInherit=!0,n})();function eN(n){return n.type.prototype.ngOnChanges&&(n.setInput=CG),IG}function IG(){let n=nN(this),e=n?.current;if(e){let t=n.previous;if(t===vl)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function CG(n,e,t,r,i){let o=this.declaredInputs[r],s=nN(n)||TG(n,{previous:vl,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new Tw(l&&l.currentValue,t,c===vl),Zk(n,e,i,t)}var tN="__ngSimpleChanges__";function nN(n){return n[tN]||null}function TG(n,e){return n[tN]=e}var QP=null;var $r=function(n,e,t){QP?.(n,e,t)},SG="svg",DG="math";function Vi(n){for(;Array.isArray(n);)n=n[Ao];return n}function rN(n,e){return Vi(e[n])}function zr(n,e){return Vi(e[n.index])}function vE(n,e){return n.data[e]}function xG(n,e){return n[e]}function Ns(n,e){let t=e[n];return Ds(t)?t:t[Ao]}function _E(n){return(n[ve]&128)===128}function AG(n){return Ro(n[rr])}function As(n,e){return e==null?null:n[e]}function iN(n){n[pl]=0}function bE(n){n[ve]&1024||(n[ve]|=1024,_E(n)&&_h(n))}function RG(n,e){for(;n>0;)e=e[Al],n--;return e}function Eg(n){return!!(n[ve]&9216||n[Ar]?.dirty)}function Sw(n){n[Io].changeDetectionScheduler?.notify(9),n[ve]&64&&(n[ve]|=1024),Eg(n)&&_h(n)}function _h(n){n[Io].changeDetectionScheduler?.notify(0);let e=Na(n);for(;e!==null&&!(e[ve]&8192||(e[ve]|=8192,!_E(e)));)e=Na(e)}function oN(n,e){if(vh(n))throw new oe(911,!1);n[Ss]===null&&(n[Ss]=[]),n[Ss].push(e)}function MG(n,e){if(n[Ss]===null)return;let t=n[Ss].indexOf(e);t!==-1&&n[Ss].splice(t,1)}function Na(n){let e=n[rr];return Ro(e)?e[rr]:e}function PG(n){return n[Wm]??=[]}function kG(n){return n.cleanup??=[]}var je={lFrame:fN(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Dw=!1;function NG(){return je.lFrame.elementDepthCount}function OG(){je.lFrame.elementDepthCount++}function FG(){je.lFrame.elementDepthCount--}function sN(){return je.bindingsEnabled}function LG(){return je.skipHydrationRootTNode!==null}function VG(n){return je.skipHydrationRootTNode===n}function jG(){je.skipHydrationRootTNode=null}function Ue(){return je.lFrame.lView}function bn(){return je.lFrame.tView}function Fe(n){return je.lFrame.contextLView=n,n[Ln]}function Le(n){return je.lFrame.contextLView=null,n}function jn(){let n=aN();for(;n!==null&&n.type===64;)n=n.parent;return n}function aN(){return je.lFrame.currentTNode}function UG(){let n=je.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ua(n,e){let t=je.lFrame;t.currentTNode=n,t.isParent=e}function wE(){return je.lFrame.isParent}function cN(){je.lFrame.isParent=!1}function lN(){return Dw}function Km(n){let e=Dw;return Dw=n,e}function Ig(){let n=je.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function BG(n){return je.lFrame.bindingIndex=n}function Rl(){return je.lFrame.bindingIndex++}function $G(n){let e=je.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function HG(){return je.lFrame.inI18n}function zG(n,e){let t=je.lFrame;t.bindingIndex=t.bindingRootIndex=n,xw(e)}function WG(){return je.lFrame.currentDirectiveIndex}function xw(n){je.lFrame.currentDirectiveIndex=n}function qG(n){let e=je.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function uN(n){je.lFrame.currentQueryIndex=n}function GG(n){let e=n[Pe];return e.type===2?e.declTNode:e.type===1?n[fi]:null}function dN(n,e,t){if(t&ke.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&ke.Host);)if(i=GG(o),i===null||(o=o[Al],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=je.lFrame=hN();return r.currentTNode=e,r.lView=n,!0}function EE(n){let e=hN(),t=n[Pe];je.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function hN(){let n=je.lFrame,e=n===null?null:n.child;return e===null?fN(n):e}function fN(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function pN(){let n=je.lFrame;return je.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var mN=pN;function IE(){let n=pN();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function KG(n){return(je.lFrame.contextLView=RG(n,je.lFrame.contextLView))[Ln]}function Ba(){return je.lFrame.selectedIndex}function Oa(n){je.lFrame.selectedIndex=n}function Cg(){let n=je.lFrame;return vE(n.tView,n.selectedIndex)}function YG(){return je.lFrame.currentNamespace}var gN=!0;function Tg(){return gN}function Sg(n){gN=n}function QG(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=eN(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Dg(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Lm(n,e,t){yN(n,e,3,t)}function Vm(n,e,t,r){(n[ve]&3)===t&&yN(n,e,t,r)}function aw(n,e){let t=n[ve];(t&3)===e&&(t&=16383,t+=1,n[ve]=t)}function yN(n,e,t,r){let i=r!==void 0?n[pl]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[pl]+=65536),(a<o||o==-1)&&(XG(n,t,e,c),n[pl]=(n[pl]&4294901760)+c+2),c++}function XP(n,e){$r(4,n,e);let t=Oe(null);try{e.call(n)}finally{Oe(t),$r(5,n,e)}}function XG(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[ve]>>14<n[pl]>>16&&(n[ve]&3)===e&&(n[ve]+=16384,XP(a,o)):XP(a,o)}var yl=-1,Fa=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function JG(n){return n instanceof Fa}function ZG(n){return(n.flags&8)!==0}function e3(n){return(n.flags&16)!==0}function t3(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];r3(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function n3(n){return n===3||n===4||n===6}function r3(n){return n.charCodeAt(0)===64}function Cl(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?JP(n,t,i,null,e[++r]):JP(n,t,i,null,null))}}return n}function JP(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var cw={},Aw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=yg(r);let i=this.injector.get(e,cw,r);return i!==cw||t===cw?i:this.parentInjector.get(e,t,r)}};function vN(n){return n!==yl}function Ym(n){return n&32767}function i3(n){return n>>16}function Qm(n,e){let t=i3(n),r=e;for(;t>0;)r=r[Al],t--;return r}var Rw=!0;function Xm(n){let e=Rw;return Rw=n,e}var o3=256,_N=o3-1,bN=5,s3=0,Li={};function a3(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ih)&&(r=t[ih]),r==null&&(r=t[ih]=s3++);let i=r&_N,o=1<<i;e.data[n+(i>>bN)]|=o}function Jm(n,e){let t=wN(n,e);if(t!==-1)return t;let r=e[Pe];r.firstCreatePass&&(n.injectorIndex=e.length,lw(r.data,n),lw(e,null),lw(r.blueprint,null));let i=CE(n,e),o=n.injectorIndex;if(vN(i)){let s=Ym(i),a=Qm(i,e),c=a[Pe].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|c[s+l]}return e[o+8]=i,o}function lw(n,e){n.push(0,0,0,0,0,0,0,0,e)}function wN(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function CE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=SN(i),r===null)return yl;if(t++,i=i[Al],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return yl}function Mw(n,e,t){a3(n,e,t)}function EN(n,e,t){if(t&ke.Optional||n!==void 0)return n;fE(e,"NodeInjector")}function IN(n,e,t,r){if(t&ke.Optional&&r===void 0&&(r=null),!(t&(ke.Self|ke.Host))){let i=n[wl],o=dr(void 0);try{return i?i.get(e,r,t&ke.Optional):Lk(e,r,t&ke.Optional)}finally{dr(o)}}return EN(r,e,t)}function CN(n,e,t,r=ke.Default,i){if(n!==null){if(e[ve]&2048&&!(r&ke.Self)){let s=h3(n,e,t,r,Li);if(s!==Li)return s}let o=TN(n,e,t,r,Li);if(o!==Li)return o}return IN(e,t,r,i)}function TN(n,e,t,r,i){let o=u3(t);if(typeof o=="function"){if(!dN(e,n,r))return r&ke.Host?EN(i,t,r):IN(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&ke.Optional))fE(t);else return s}finally{mN()}}else if(typeof o=="number"){let s=null,a=wN(n,e),c=yl,l=r&ke.Host?e[hi][fi]:null;for((a===-1||r&ke.SkipSelf)&&(c=a===-1?CE(n,e):e[a+8],c===yl||!ek(r,!1)?a=-1:(s=e[Pe],a=Ym(c),e=Qm(c,e)));a!==-1;){let u=e[Pe];if(ZP(o,a,u.data)){let h=c3(a,e,t,s,r,l);if(h!==Li)return h}c=e[a+8],c!==yl&&ek(r,e[Pe].data[a+8]===l)&&ZP(o,a,e)?(s=u,a=Ym(c),e=Qm(c,e)):a=-1}}return i}function c3(n,e,t,r,i,o){let s=e[Pe],a=s.data[n+8],c=r==null?bg(a)&&Rw:r!=s&&(a.type&3)!==0,l=i&ke.Host&&o===a,u=l3(a,s,t,c,l);return u!==null?Tl(e,s,u,a):Li}function l3(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,l=n.directiveEnd,u=o>>20,h=r?a:a+u,f=i?a+u:l;for(let p=h;p<f;p++){let g=s[p];if(p<c&&t===g||p>=c&&g.type===t)return p}if(i){let p=s[c];if(p&&xs(p)&&p.type===t)return c}return null}function Tl(n,e,t,r){let i=n[t],o=e.data;if(JG(i)){let s=i;s.resolving&&X4(Q4(o[t]));let a=Xm(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?dr(s.injectImpl):null,u=dN(n,r,ke.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&QG(t,o[t],e)}finally{l!==null&&dr(l),Xm(a),s.resolving=!1,mN()}}return i}function u3(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ih)?n[ih]:void 0;return typeof e=="number"?e>=0?e&_N:d3:e}function ZP(n,e,t){let r=1<<n;return!!(t[e+(n>>bN)]&r)}function ek(n,e){return!(n&ke.Self)&&!(n&ke.Host&&e)}var Aa=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return CN(this._tNode,this._lView,e,yg(r),t)}};function d3(){return new Aa(jn(),Ue())}function pi(n){return gh(()=>{let e=n.prototype.constructor,t=e[Bm]||Pw(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Bm]||Pw(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Pw(n){return Mk(n)?()=>{let e=Pw(er(n));return e&&e()}:Ra(n)}function h3(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[ve]&2048&&!(s[ve]&512);){let a=TN(o,s,t,r|ke.Self,Li);if(a!==Li)return a;let c=o.parent;if(!c){let l=s[Xk];if(l){let u=l.get(t,Li,r);if(u!==Li)return u}c=SN(s),s=s[Al]}o=c}return i}function SN(n){let e=n[Pe],t=e.type;return t===2?e.declTNode:t===1?n[fi]:null}function tk(n,e=null,t=null,r){let i=DN(n,e,t,r);return i.resolveInjectorInitializers(),i}function DN(n,e=null,t=null,r,i=new Set){let o=[t||Br,dG(n)];return r=r||(typeof n=="object"?void 0:hr(n)),new sh(o,e||gE(),r||null,i)}var Ne=class n{static THROW_IF_NOT_FOUND=oh;static NULL=new zm;static create(e,t){if(Array.isArray(e))return tk({name:""},t,e,"");{let r=e.name??"";return tk({name:r},e.parent,e.providers,r)}}static \u0275prov=z({token:n,providedIn:"any",factory:()=>ae(Uk)});static __NG_ELEMENT_ID__=-1};var f3=new K("");f3.__NG_ELEMENT_ID__=n=>{let e=jn();if(e===null)throw new oe(204,!1);if(e.type&2)return e.value;if(n&ke.Optional)return null;throw new oe(204,!1)};var xN=!1,Mo=(()=>{class n{static __NG_ELEMENT_ID__=p3;static __NG_ENV_ID__=t=>t}return n})(),Zm=class extends Mo{_lView;constructor(e){super(),this._lView=e}onDestroy(e){return oN(this._lView,e),()=>MG(this._lView,e)}};function p3(){return new Zm(Ue())}var La=class{},xg=new K("",{providedIn:"root",factory:()=>!1});var AN=new K(""),RN=new K(""),$i=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new fn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}return n})(),Ag=(()=>{class n{internalPendingTasks=P($i);scheduler=P(La);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(12),this.internalPendingTasks.remove(t))}}run(t){return I(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}return n})(),kw=class extends Ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Qk()&&(this.destroyRef=P(Mo,{optional:!0})??void 0,this.pendingTasks=P($i,{optional:!0})??void 0)}emit(e){let t=Oe(null);try{super.next(e)}finally{Oe(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof $t&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Yt=kw;function lh(...n){}function MN(n){let e,t;function r(){n=lh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function nk(n){return queueMicrotask(()=>n()),()=>{n=lh}}var TE="isAngularZone",eg=TE+"_ID",m3=0,pe=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Yt(!1);onMicrotaskEmpty=new Yt(!1);onStable=new Yt(!1);onError=new Yt(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=xN}=e;if(typeof Zone>"u")throw new oe(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,v3(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(TE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new oe(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new oe(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,g3,lh,lh);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},g3={};function SE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function y3(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){MN(()=>{n.callbackScheduled=!1,Nw(n),n.isCheckStableRunning=!0,SE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Nw(n)}function v3(n){let e=()=>{y3(n)},t=m3++;n._inner=n._inner.fork({name:"angular",properties:{[TE]:!0,[eg]:t,[eg+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(_3(c))return r.invokeTask(o,s,a,c);try{return rk(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ik(n)}},onInvoke:(r,i,o,s,a,c,l)=>{try{return rk(n),r.invoke(o,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!b3(c)&&e(),ik(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Nw(n),SE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Nw(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function rk(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ik(n){n._nesting--,SE(n)}var Ow=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Yt;onMicrotaskEmpty=new Yt;onStable=new Yt;onError=new Yt;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function _3(n){return PN(n,"__ignore_ng_zone__")}function b3(n){return PN(n,"__scheduler_tick__")}function PN(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Co=class{_console=console;handleError(e){this._console.error("ERROR",e)}},w3=new K("",{providedIn:"root",factory:()=>{let n=P(pe),e=P(Co);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function ok(n,e){return Ak(n,e)}function E3(n){return Ak(xk,n)}var kN=(ok.required=E3,ok);function I3(){return Rg(jn(),Ue())}function Rg(n,e){return new fr(zr(n,e))}var fr=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=I3}return n})();var sk=new Set;function Hi(n){sk.has(n)||(sk.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function C3(n){return typeof n=="function"&&n[lr]!==void 0}function Z(n,e){Hi("NgSignals");let t=gP(n),r=t[lr];return e?.equal&&(r.equal=e.equal),t.set=i=>rm(r,i),t.update=i=>yP(r,i),t.asReadonly=T3.bind(t),t}function T3(){let n=this[lr];if(n.readonlyFn===void 0){let e=()=>this();e[lr]=n,n.readonlyFn=e}return n.readonlyFn}function NN(n){return C3(n)&&typeof n.set=="function"}function ON(n){return(n.flags&128)===128}var FN=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(FN||{}),LN=new Map,S3=0;function D3(){return S3++}function x3(n){LN.set(n[_g],n)}function Fw(n){LN.delete(n[_g])}var ak="__ngContext__";function Rs(n,e){Ds(e)?(n[ak]=e[_g],x3(e)):n[ak]=e}function VN(n){return UN(n[ch])}function jN(n){return UN(n[di])}function UN(n){for(;n!==null&&!Ro(n);)n=n[di];return n}var Lw;function BN(n){Lw=n}function A3(){if(Lw!==void 0)return Lw;if(typeof document<"u")return document;throw new oe(210,!1)}var DE=new K("",{providedIn:"root",factory:()=>R3}),R3="ng",xE=new K(""),zt=new K("",{providedIn:"platform",factory:()=>"unknown"});var AE=new K("",{providedIn:"root",factory:()=>A3().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var M3="h",P3="b";var $N=!1,k3=new K("",{providedIn:"root",factory:()=>$N});var HN=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(HN||{}),Mg=new K("");var N3=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}return n})();var O3=()=>null;function RE(n,e,t=!1){return O3(n,e,t)}function zN(n,e){let t=n.contentQueries;if(t!==null){let r=Oe(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];uN(o),a.contentQueries(2,e[s],s)}}}finally{Oe(r)}}}function Vw(n,e,t){uN(0);let r=Oe(null);try{e(n,t)}finally{Oe(r)}}function ME(n,e,t){if(yE(e)){let r=Oe(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Oe(r)}}}var ji=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(ji||{});var tg=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Dk})`}};function Pg(n){return n instanceof tg?n.changingThisBreaksApplicationSecurity:n}function WN(n,e){let t=F3(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Dk})`)}return t===e}function F3(n){return n instanceof tg&&n.getTypeName()||null}var L3=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function qN(n){return n=String(n),n.match(L3)?n:"unsafe:"+n}var PE=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(PE||{});function kE(n){let e=V3();return e?e.sanitize(PE.URL,n)||"":WN(n,"URL")?Pg(n):qN(gg(n))}function V3(){let n=Ue();return n&&n[Io].sanitizer}var j3=/^>|^->|<!--|-->|--!>|<!-$/g,U3=/(<|>)/g,B3="\u200B$1\u200B";function $3(n){return n.replace(j3,e=>e.replace(U3,B3))}function GN(n){return n instanceof Function?n():n}var Ms=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Ms||{});function H3(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var KN="ng-template";function z3(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&H3(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(NE(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function NE(n){return n.type===4&&n.value!==KN}function W3(n,e,t){let r=n.type===4&&!t?KN:n.value;return e===r}function q3(n,e,t){let r=4,i=n.attrs,o=i!==null?Y3(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!ui(r)&&!ui(c))return!1;if(s&&ui(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!W3(n,c,t)||c===""&&e.length===1){if(ui(r))return!1;s=!0}}else if(r&8){if(i===null||!z3(n,i,c,t)){if(ui(r))return!1;s=!0}}else{let l=e[++a],u=G3(c,i,NE(n),t);if(u===-1){if(ui(r))return!1;s=!0;continue}if(l!==""){let h;if(u>o?h="":h=i[u+1].toLowerCase(),r&2&&l!==h){if(ui(r))return!1;s=!0}}}}return ui(r)||s}function ui(n){return(n&1)===0}function G3(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return Q3(e,n)}function K3(n,e,t=!1){for(let r=0;r<e.length;r++)if(q3(n,e[r],t))return!0;return!1}function Y3(n){for(let e=0;e<n.length;e++){let t=n[e];if(n3(t))return e}return n.length}function Q3(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function ck(n,e){return n?":not("+e.trim()+")":e}function X3(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ui(s)&&(e+=ck(o,i),i=""),r=s,o=o||!ui(r);t++}return i!==""&&(e+=ck(o,i)),e}function J3(n){return n.map(X3).join(",")}function Z3(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!ui(i))break;i=o}r++}return{attrs:e,classes:t}}var Po={};function O(n=1){YN(bn(),Ue(),Ba()+n,!1)}function YN(n,e,t,r){if(!r)if((e[ve]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Lm(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Vm(e,o,0,t)}Oa(t)}function De(n,e=ke.Default){let t=Ue();if(t===null)return ae(n,e);let r=jn();return CN(r,t,er(n),e)}function QN(n,e,t,r,i,o){let s=Oe(null);try{let a=null;i&Ms.SignalBased&&(a=e[r][lr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Ms.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):Zk(e,a,r,o)}finally{Oe(s)}}function e5(n,e){return n.createText(e)}function t5(n,e,t){n.setValue(e,t)}function n5(n,e){return n.createComment($3(e))}function XN(n,e,t){return n.createElement(e,t)}function ng(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JN(n,e,t){n.appendChild(e,t)}function lk(n,e,t,r,i){r!==null?ng(n,e,t,r,i):JN(n,e,t)}function r5(n,e,t){n.removeChild(null,e,t)}function i5(n,e,t){n.setAttribute(e,"style",t)}function o5(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function ZN(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&t3(n,e,r),i!==null&&o5(n,e,i),o!==null&&i5(n,e,o)}function kg(n,e,t,r,i,o,s,a,c,l,u){let h=e.blueprint.slice();return h[Ao]=i,h[ve]=r|4|128|8|64|1024,(l!==null||n&&n[ve]&2048)&&(h[ve]|=2048),iN(h),h[rr]=h[Al]=n,h[Ln]=t,h[Io]=s||n&&n[Io],h[Qt]=a||n&&n[Qt],h[wl]=c||n&&n[wl]||null,h[fi]=o,h[_g]=D3(),h[ah]=u,h[Xk]=l,h[hi]=e.type==2?n[hi]:h,h}function e1(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function t1(n,e,t,r,i){let o=Ba(),s=r&2;try{Oa(-1),s&&e.length>tr&&YN(n,e,tr,!1),$r(s?2:0,i),t(r,i)}finally{Oa(o),$r(s?3:1,i)}}function OE(n,e,t){sN()&&(m5(n,e,t,zr(t,e)),(t.flags&64)===64&&i1(n,e,t))}function FE(n,e,t=zr){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function n1(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=LE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function LE(n,e,t,r,i,o,s,a,c,l,u){let h=tr+r,f=h+i,p=s5(h,f),g=typeof l=="function"?l():l;return p[Pe]={type:n,blueprint:p,template:t,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:u}}function s5(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Po);return t}function a5(n,e,t,r){let o=r.get(k3,$N)||t===ji.ShadowDom,s=n.selectRootElement(e,o);return c5(s),s}function c5(n){l5(n)}var l5=()=>null;function uk(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,c=Ms.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?dk(r,t,l,a,c):dk(r,t,l,a)}return r}function dk(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function u5(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<i;u++){let h=o[u],f=t?t.get(h):null,p=f?f.inputs:null,g=f?f.outputs:null;c=uk(0,h.inputs,u,c,p),l=uk(1,h.outputs,u,l,g);let v=c!==null&&s!==null&&!NE(e)?S5(c,u,s):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function d5(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function VE(n,e,t,r,i,o,s,a){let c=zr(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(UE(n,t,u,r,i),bg(e)&&h5(t,e.index)):e.type&3?(r=d5(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)):e.type&12}function h5(n,e){let t=Ns(e,n);t[ve]&16||(t[ve]|=64)}function jE(n,e,t,r){if(sN()){let i=r===null?null:{"":-1},o=y5(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&r1(n,e,t,s,i,a),i&&v5(t,r,i)}t.mergedAttrs=Cl(t.mergedAttrs,t.attrs)}function r1(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Mw(Jm(t,e),n,r[l].type);b5(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=e1(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Cl(t.mergedAttrs,u.hostAttrs),w5(n,t,e,c,u),_5(c,u,i),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let h=u.type.prototype;!s&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}u5(n,t,o)}function f5(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;p5(s)!=a&&s.push(a),s.push(t,r,o)}}function p5(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function m5(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;bg(t)&&E5(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Jm(t,e),Rs(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let c=n.data[a],l=Tl(e,n,a,t);if(Rs(l,e),s!==null&&T5(e,a-i,l,c,t,s),xs(c)){let u=Ns(t.index,e);u[Ln]=Tl(e,n,a,t)}}}function i1(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=WG();try{Oa(o);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];xw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&g5(c,l)}}finally{Oa(-1),xw(s)}}function g5(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function y5(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(K3(e,s.selectors,!1))if(r||(r=[]),xs(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let c=a.length;jw(n,e,c)}else r.unshift(s),jw(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function jw(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function v5(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new oe(-301,!1);r.push(e[i],o)}}}function _5(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;xs(e)&&(t[""]=n)}}function b5(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function w5(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Ra(i.type,!0)),s=new Fa(o,xs(i),De);n.blueprint[r]=s,t[r]=s,f5(n,e,r,e1(n,t,i.hostVars,Po),i)}function o1(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function E5(n,e,t){let r=zr(e,n),i=n1(t),o=n[Io].rendererFactory,s=Ng(n,kg(n,i,null,o1(t),r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=s}function I5(n,e,t,r,i,o){let s=zr(n,e);C5(e[Qt],s,o,n.value,t,r,i)}function C5(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?gg(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function T5(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],h=s[a++];QN(r,t,c,l,u,h)}}function S5(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function s1(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Ng(n,e){return n[ch]?n[YP][di]=e:n[ch]=e,n[YP]=e,e}function a1(n,e){let t=n[wl],r=t?t.get(Co,null):null;r&&r.handleError(e)}function UE(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],c=t[o++],l=e[s],u=n.data[s];QN(u,l,r,a,c,i)}}function D5(n,e){let t=Ns(e,n),r=t[Pe];x5(r,t);let i=t[Ao];i!==null&&t[ah]===null&&(t[ah]=RE(i,t[wl])),BE(r,t,t[Ln])}function x5(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function BE(n,e,t){EE(e);try{let r=n.viewQuery;r!==null&&Vw(1,r,t);let i=n.template;i!==null&&t1(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Il]?.finishViewCreation(n),n.staticContentQueries&&zN(n,e),n.staticViewQueries&&Vw(2,n.viewQuery,t);let o=n.components;o!==null&&A5(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ve]&=-5,IE()}}function A5(n,e){for(let t=0;t<e.length;t++)D5(n,e[t])}var To=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(To||{}),R5;function $E(n,e){return R5(n,e)}function ml(n,e,t,r,i){if(r!=null){let o,s=!1;Ro(r)?o=r:Ds(r)&&(s=!0,r=r[Ao]);let a=Vi(r);n===0&&t!==null?i==null?JN(e,t,a):ng(e,t,a,i||null,!0):n===1&&t!==null?ng(e,t,a,i||null,!0):n===2?r5(e,a,s):n===3&&e.destroyNode(a),o!=null&&H5(e,n,o,t,i)}}function M5(n,e){c1(n,e),e[Ao]=null,e[fi]=null}function P5(n,e,t,r,i,o){r[Ao]=i,r[fi]=e,Lg(n,r,t,1,i,o)}function c1(n,e){e[Io].changeDetectionScheduler?.notify(10),Lg(n,e,e[Qt],2,null,null)}function k5(n){let e=n[ch];if(!e)return uw(n[Pe],n);for(;e;){let t=null;if(Ds(e))t=e[ch];else{let r=e[nr];r&&(t=r)}if(!t){for(;e&&!e[di]&&e!==n;)Ds(e)&&uw(e[Pe],e),e=e[rr];e===null&&(e=n),Ds(e)&&uw(e[Pe],e),t=e&&e[di]}e=t}}function N5(n,e,t,r){let i=nr+r,o=t.length;r>0&&(t[i-1][di]=e),r<o-nr?(e[di]=t[i],jk(t,nr+r,e)):(t.push(e),e[di]=null),e[rr]=t;let s=e[El];s!==null&&t!==s&&l1(s,e);let a=e[Il];a!==null&&a.insertView(n),Sw(e),e[ve]|=128}function l1(n,e){let t=n[Gm],r=e[rr];if(Ds(r))n[ve]|=2;else{let i=r[rr][hi];e[hi]!==i&&(n[ve]|=2)}t===null?n[Gm]=[e]:t.push(e)}function HE(n,e){let t=n[Gm],r=t.indexOf(e);t.splice(r,1)}function uh(n,e){if(n.length<=nr)return;let t=nr+e,r=n[t];if(r){let i=r[El];i!==null&&i!==n&&HE(i,r),e>0&&(n[t-1][di]=r[di]);let o=Hm(n,nr+e);M5(r[Pe],r);let s=o[Il];s!==null&&s.detachView(o[Pe]),r[rr]=null,r[di]=null,r[ve]&=-129}return r}function Og(n,e){if(vh(e))return;let t=e[Qt];t.destroyNode&&Lg(n,e,t,3,null,null),k5(e)}function uw(n,e){if(vh(e))return;let t=Oe(null);try{e[ve]&=-129,e[ve]|=256,e[Ar]&&Qc(e[Ar]),F5(n,e),O5(n,e),e[Pe].type===1&&e[Qt].destroy();let r=e[El];if(r!==null&&Ro(e[rr])){r!==e[rr]&&HE(r,e);let i=e[Il];i!==null&&i.detachView(n)}Fw(e)}finally{Oe(t)}}function O5(n,e){let t=n.cleanup,r=e[Wm];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Wm]=null);let i=e[Ss];if(i!==null){e[Ss]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Pa];if(o!==null){e[Pa]=null;for(let s of o)s.destroy()}}function F5(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Fa)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];$r(4,a,c);try{c.call(a)}finally{$r(5,a,c)}}else{$r(4,i,o);try{o.call(i)}finally{$r(5,i,o)}}}}}function L5(n,e,t){return V5(n,e.parent,t)}function V5(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Ao];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===ji.None||o===ji.Emulated)return null}return zr(r,t)}}function j5(n,e,t){return B5(n,e,t)}function U5(n,e,t){return n.type&40?zr(n,t):null}var B5=U5,hk;function Fg(n,e,t,r){let i=L5(n,r,e),o=e[Qt],s=r.parent||e[fi],a=j5(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)lk(o,i,t[c],a,!1);else lk(o,i,t,a,!1);hk!==void 0&&hk(o,r,e,t,i)}function rh(n,e){if(e!==null){let t=e.type;if(t&3)return zr(e,n);if(t&4)return Uw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return rh(n,r);{let i=n[e.index];return Ro(i)?Uw(-1,i):Vi(i)}}else{if(t&128)return rh(n,e.next);if(t&32)return $E(e,n)()||Vi(n[e.index]);{let r=u1(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Na(n[hi]);return rh(i,r)}else return rh(n,e.next)}}}return null}function u1(n,e){if(e!==null){let r=n[hi][fi],i=e.projection;return r.projection[i]}return null}function Uw(n,e){let t=nr+n+1;if(t<e.length){let r=e[t],i=r[Pe].firstChild;if(i!==null)return rh(r,i)}return e[ka]}function zE(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Rs(Vi(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)zE(n,e,t.child,r,i,o,!1),ml(e,n,i,a,o);else if(c&32){let l=$E(t,r),u;for(;u=l();)ml(e,n,i,u,o);ml(e,n,i,a,o)}else c&16?$5(n,e,r,t,i,o):ml(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Lg(n,e,t,r,i,o){zE(t,r,n.firstChild,e,i,o,!1)}function $5(n,e,t,r,i,o){let s=t[hi],c=s[fi].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];ml(e,n,i,u,o)}else{let l=c,u=s[rr];ON(r)&&(l.flags|=128),zE(n,e,l,u,i,o,!0)}}function H5(n,e,t,r,i){let o=t[ka],s=Vi(t);o!==s&&ml(e,n,r,o,i);for(let a=nr;a<t.length;a++){let c=t[a];Lg(c[Pe],c,n,e,r,o)}}function z5(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:To.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=To.Important),n.setStyle(t,r,i,o))}}function Vg(n,e,t,r){let i=Oe(null);try{let o=e.tView,a=n[ve]&4096?4096:16,c=kg(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[El]=l;let u=n[Il];return u!==null&&(c[Il]=u.createEmbeddedView(o)),BE(o,c,t),c}finally{Oe(i)}}function d1(n,e){let t=nr+e;if(t<n.length)return n[t]}function dh(n,e){return!e||e.firstChild===null||ON(n)}function jg(n,e,t,r=!0){let i=e[Pe];if(N5(i,e,n,t),r){let s=Uw(t,n),a=e[Qt],c=a.parentNode(n[ka]);c!==null&&P5(i,n[fi],a,e,c,s)}let o=e[ah];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function h1(n,e){let t=uh(n,e);return t!==void 0&&Og(t[Pe],t),t}function rg(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Vi(o)),Ro(o)&&W5(o,r);let s=t.type;if(s&8)rg(n,e,t.child,r);else if(s&32){let a=$E(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=u1(e,t);if(Array.isArray(a))r.push(...a);else{let c=Na(e[hi]);rg(c[Pe],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function W5(n,e){for(let t=nr;t<n.length;t++){let r=n[t],i=r[Pe].firstChild;i!==null&&rg(r[Pe],r,i,e)}n[ka]!==n[Ao]&&e.push(n[ka])}var f1=[];function q5(n){return n[Ar]??G5(n)}function G5(n){let e=f1.pop()??Object.create(Y5);return e.lView=n,e}function K5(n){n.lView[Ar]!==n&&(n.lView=null,f1.push(n))}var Y5=fe(q({},Ea),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{_h(n.lView)},consumerOnSignalRead(){this.lView[Ar]=this}});function Q5(n){let e=n[Ar]??Object.create(X5);return e.lView=n,e}var X5=fe(q({},Ea),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Na(n.lView);for(;e&&!p1(e[Pe]);)e=Na(e);e&&bE(e)},consumerOnSignalRead(){this.lView[Ar]=this}});function p1(n){return n.type!==2}function m1(n){if(n[Pa]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Pa])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[ve]&8192)}}var J5=100;function g1(n,e=!0,t=0){let i=n[Io].rendererFactory,o=!1;o||i.begin?.();try{Z5(n,t)}catch(s){throw e&&a1(n,s),s}finally{o||i.end?.()}}function Z5(n,e){let t=lN();try{Km(!0),Bw(n,e);let r=0;for(;Eg(n);){if(r===J5)throw new oe(103,!1);r++,Bw(n,1)}}finally{Km(t)}}function e9(n,e,t,r){if(vh(e))return;let i=e[ve],o=!1,s=!1;EE(e);let a=!0,c=null,l=null;o||(p1(n)?(l=q5(e),c=Yc(l)):oP()===null?(a=!1,l=Q5(e),c=Yc(l)):e[Ar]&&(Qc(e[Ar]),e[Ar]=null));try{iN(e),BG(n.bindingStartIndex),t!==null&&t1(n,e,t,2,r);let u=(i&3)===3;if(!o)if(u){let p=n.preOrderCheckHooks;p!==null&&Lm(e,p,null)}else{let p=n.preOrderHooks;p!==null&&Vm(e,p,0,null),aw(e,0)}if(s||t9(e),m1(e),y1(e,0),n.contentQueries!==null&&zN(n,e),!o)if(u){let p=n.contentCheckHooks;p!==null&&Lm(e,p)}else{let p=n.contentHooks;p!==null&&Vm(e,p,1),aw(e,1)}r9(n,e);let h=n.components;h!==null&&_1(e,h,0);let f=n.viewQuery;if(f!==null&&Vw(2,f,r),!o)if(u){let p=n.viewCheckHooks;p!==null&&Lm(e,p)}else{let p=n.viewHooks;p!==null&&Vm(e,p,2),aw(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Fm]){for(let p of e[Fm])p();e[Fm]=null}o||(e[ve]&=-73)}catch(u){throw o||_h(e),u}finally{l!==null&&(Gd(l,c),a&&K5(l)),IE()}}function y1(n,e){for(let t=VN(n);t!==null;t=jN(t))for(let r=nr;r<t.length;r++){let i=t[r];v1(i,e)}}function t9(n){for(let e=VN(n);e!==null;e=jN(e)){if(!(e[ve]&2))continue;let t=e[Gm];for(let r=0;r<t.length;r++){let i=t[r];bE(i)}}}function n9(n,e,t){let r=Ns(e,n);v1(r,t)}function v1(n,e){_E(n)&&Bw(n,e)}function Bw(n,e){let r=n[Pe],i=n[ve],o=n[Ar],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Kd(o)),s||=!1,o&&(o.dirty=!1),n[ve]&=-9217,s)e9(r,n,r.template,n[Ln]);else if(i&8192){m1(n),y1(n,1);let a=r.components;a!==null&&_1(n,a,1)}}function _1(n,e,t){for(let r=0;r<e.length;r++)n9(n,e[r],t)}function r9(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Oa(~i);else{let o=i,s=t[++r],a=t[++r];zG(s,o);let c=e[o];$r(24,c),a(2,c),$r(25,c)}}}finally{Oa(-1)}}function WE(n,e){let t=lN()?64:1088;for(n[Io].changeDetectionScheduler?.notify(e);n;){n[ve]|=t;let r=Na(n);if(Cw(n)&&!r)return n;n=r}return null}var Va=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Pe];return rg(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Ln]}get dirty(){return!!(this._lView[ve]&9280)||!!this._lView[Ar]?.dirty}set context(e){this._lView[Ln]=e}get destroyed(){return vh(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[rr];if(Ro(e)){let t=e[qm],r=t?t.indexOf(this):-1;r>-1&&(uh(e,r),Hm(t,r))}this._attachedToViewContainer=!1}Og(this._lView[Pe],this._lView)}onDestroy(e){oN(this._lView,e)}markForCheck(){WE(this._cdRefInjectingView||this._lView,4)}markForRefresh(){bE(this._cdRefInjectingView||this._lView)}detach(){this._lView[ve]&=-129}reattach(){Sw(this._lView),this._lView[ve]|=128}detectChanges(){this._lView[ve]|=1024,g1(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new oe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Cw(this._lView),t=this._lView[El];t!==null&&!e&&HE(t,this._lView),c1(this._lView[Pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new oe(902,!1);this._appRef=e;let t=Cw(this._lView),r=this._lView[El];r!==null&&!t&&l1(r,this._lView),Sw(this._lView)}},qE=(()=>{class n{static __NG_ELEMENT_ID__=s9}return n})(),i9=qE,o9=class extends i9{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Vg(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Va(i)}};function s9(){return a9(jn(),Ue())}function a9(n,e){return n.type&4?new o9(e,n,Rg(n,e)):null}function bh(n,e,t,r,i){let o=n.data[e];if(o===null)o=c9(n,e,t,r,i),HG()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=UG();o.injectorIndex=s===null?-1:s.injectorIndex}return Ua(o,!0),o}function c9(n,e,t,r,i){let o=aN(),s=wE(),a=s?o:o&&o.parent,c=n.data[e]=u9(n,a,t,e,r,i);return l9(n,c,o,s),c}function l9(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function u9(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return LG()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var BEe=new RegExp(`^(\\d+)*(${P3}|${M3})*(.*)`);var d9=()=>null;function hh(n,e){return d9(n,e)}var $w=class{},ig=class{},Hw=class{resolveComponentFactory(e){throw Error(`No component factory found for ${hr(e)}.`)}},Ps=class{static NULL=new Hw},Sl=class{},ko=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>h9()}return n})();function h9(){let n=Ue(),e=jn(),t=Ns(e.index,n);return(Ds(t)?t:n)[Qt]}var f9=(()=>{class n{static \u0275prov=z({token:n,providedIn:"root",factory:()=>null})}return n})();function og(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=HP(i,a);else if(o==2){let c=a,l=e[++s];r=HP(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var sg=class extends Ps{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ma(e);return new fh(t,this.ngModule)}};function fk(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Ms.None;e?t.push({propName:s,templateName:r,isSignal:(a&Ms.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function p9(n){let e=n.toLowerCase();return e==="svg"?SG:e==="math"?DG:null}function m9(n){let{attrs:e,classes:t}=Z3(n),r=e;return t.length&&r.push(1,...t),r}var fh=class extends ig{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;get inputs(){let e=this.componentDef,t=e.inputTransforms,r=fk(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return fk(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=J3(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=Oe(null);try{i=i||this.ngModule;let s=i instanceof Vn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Aw(e,s):e,c=a.get(Sl,null);if(c===null)throw new oe(407,!1);let l=a.get(f9,null),u=a.get(La,null),h={rendererFactory:c,sanitizer:l,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",g=r?a5(f,r,this.componentDef.encapsulation,a):XN(f,p,p9(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let _=null;g!==null&&(_=RE(g,a,!0));let D=LE(0,null,null,1,0,null,null,null,null,null,null),R=kg(null,D,null,v,null,null,h,f,a,null,_);R[tr]=g,EE(R);let F,V=null;try{let j=this.componentDef,T,b=null;j.findHostDirectiveDefs?(T=[],b=new Map,j.findHostDirectiveDefs(j,T,b),T.push(j)):T=[j];let E=r?["ng-version","19.1.3"]:m9(this.componentDef.selectors[0]),x=bh(D,tr,2,"#host",E);for(let M of T)x.mergedAttrs=Cl(x.mergedAttrs,M.hostAttrs);x.mergedAttrs=Cl(x.mergedAttrs,E),og(x,x.mergedAttrs,!0),g&&ZN(f,g,x),V=g9(x,g,j,T,R,h),t!==void 0&&v9(x,this.ngContentSelectors,t),F=y9(V,j,T,b,R,[_9]),BE(D,R,null)}catch(j){throw V!==null&&Fw(V),Fw(R),j}finally{IE()}let U=vE(D,tr);return new zw(this.componentType,F,Rg(U,R),R,U)}finally{Oe(o)}}},zw=class extends $w{location;_rootLView;_tNode;instance;hostView;changeDetectorRef;componentType;previousInputValues=null;constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.instance=t,this.hostView=this.changeDetectorRef=new Va(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;UE(o[Pe],o,i,e,t),this.previousInputValues.set(e,t);let s=Ns(this._tNode.index,o);WE(s,1)}}get injector(){return new Aa(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function g9(n,e,t,r,i,o){let s=i[Pe],a=null;e!==null&&(a=RE(e,i[wl]));let c=o.rendererFactory.createRenderer(e,t),l=kg(i,n1(t),null,o1(t),i[n.index],n,o,c,null,null,a);return s.firstCreatePass&&jw(s,n,r.length-1),Ng(i,l),i[n.index]=l}function y9(n,e,t,r,i,o){let s=jn(),a=i[Pe],c=zr(s,i);r1(a,i,s,t,null,r);for(let u=0;u<t.length;u++){let h=s.directiveStart+u,f=Tl(i,a,h,s);Rs(f,i)}i1(a,i,s),c&&Rs(c,i);let l=Tl(i,a,s.directiveStart+s.componentOffset,s);if(n[Ln]=i[Ln]=l,o!==null)for(let u of o)u(l,e);return ME(a,s,i),l}function v9(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}function _9(){let n=jn();Dg(Ue()[Pe],n)}var $a=(()=>{class n{static __NG_ELEMENT_ID__=b9}return n})();function b9(){let n=jn();return E9(n,Ue())}var w9=$a,b1=class extends w9{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Rg(this._hostTNode,this._hostLView)}get injector(){return new Aa(this._hostTNode,this._hostLView)}get parentInjector(){let e=CE(this._hostTNode,this._hostLView);if(vN(e)){let t=Qm(e,this._hostLView),r=Ym(e),i=t[Pe].data[r+8];return new Aa(i,t)}else return new Aa(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=pk(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-nr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=hh(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,dh(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!EG(e),a;if(s)a=t;else{let g=t||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new fh(Ma(e)),l=r||this.parentInjector;if(!o&&c.ngModule==null){let v=(s?l:this.parentInjector).get(Vn,null);v&&(o=v)}let u=Ma(c.componentType??{}),h=hh(this._lContainer,u?.id??null),f=h?.firstChild??null,p=c.create(l,i,f,o);return this.insertImpl(p.hostView,a,dh(this._hostTNode,h)),p}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(AG(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[rr],l=new b1(c,c[fi],c[rr]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return jg(s,i,o,r),e.attachToViewContainerRef(),jk(dw(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=pk(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=uh(this._lContainer,t);r&&(Hm(dw(this._lContainer),t),Og(r[Pe],r))}detach(e){let t=this._adjustIndex(e,-1),r=uh(this._lContainer,t);return r&&Hm(dw(this._lContainer),t)!=null?new Va(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function pk(n){return n[qm]}function dw(n){return n[qm]||(n[qm]=[])}function E9(n,e){let t,r=e[n.index];return Ro(r)?t=r:(t=s1(r,e,null,n),e[n.index]=t,Ng(e,t)),C9(t,e,n,r),new b1(t,n,e)}function I9(n,e){let t=n[Qt],r=t.createComment(""),i=zr(e,n),o=t.parentNode(i);return ng(t,o,r,t.nextSibling(i),!1),r}var C9=D9,T9=()=>!1;function S9(n,e,t){return T9(n,e,t)}function D9(n,e,t,r){if(n[ka])return;let i;t.type&8?i=Vi(r):i=I9(e,t),n[ka]=i}var ks=class{},ph=class{};var Ww=class extends ks{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new sg(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=$k(e);this._bootstrapComponents=GN(o.bootstrap),this._r3Injector=DN(e,t,[{provide:ks,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver},...r],hr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},qw=class extends ph{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ww(this.moduleType,e,[])}};var ag=class extends ks{injector;componentFactoryResolver=new sg(this);instance=null;constructor(e){super();let t=new sh([...e.providers,{provide:ks,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],e.parent||gE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function GE(n,e,t=null){return new ag({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var x9=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=qk(!1,t.type),i=r.length>0?GE([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(ae(Vn))})}return n})();function be(n){return gh(()=>{let e=E1(n),t=fe(q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===FN.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(x9).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||ji.Emulated,styles:n.styles||Br,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Hi("NgStandalone"),I1(t);let r=n.dependencies;return t.directiveDefs=gk(r,!1),t.pipeDefs=gk(r,!0),t.id=M9(t),t})}function A9(n){return Ma(n)||Hk(n)}function R9(n){return n!==null}function No(n){return gh(()=>({type:n.type,bootstrap:n.bootstrap||Br,declarations:n.declarations||Br,imports:n.imports||Br,exports:n.exports||Br,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function mk(n,e){if(n==null)return vl;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Ms.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Ms.None?[r,a]:r,e[o]=s):t[o]=r}return t}function dt(n){return gh(()=>{let e=E1(n);return I1(e),e})}function w1(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function E1(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||vl,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||Br,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mk(n.inputs,e),outputs:mk(n.outputs),debugInfo:null}}function I1(n){n.features?.forEach(e=>e(n))}function gk(n,e){if(!n)return null;let t=e?zk:A9;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(R9)}function M9(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function P9(n){return Object.getPrototypeOf(n.prototype).constructor}function pr(n){let e=P9(n.type),t=!0,r=[n];for(;e;){let i;if(xs(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new oe(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=km(n.inputs),s.inputTransforms=km(n.inputTransforms),s.declaredInputs=km(n.declaredInputs),s.outputs=km(n.outputs);let a=i.hostBindings;a&&L9(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&O9(n,c),l&&F9(n,l),k9(n,i),$4(n.outputs,i.outputs),xs(i)&&i.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===pr&&(t=!1)}}e=Object.getPrototypeOf(e)}N9(r)}function k9(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function N9(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Cl(i.hostAttrs,t=Cl(t,i.hostAttrs))}}function km(n){return n===vl?{}:n===Br?[]:n}function O9(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function F9(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function L9(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function C1(n){return j9(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function V9(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function j9(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function KE(n,e,t){return n[e]=t}function Ui(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function Gw(n,e,t,r){let i=Ui(n,e,t);return Ui(n,e+1,r)||i}function U9(n,e,t,r,i,o){let s=Gw(n,e,t,r);return Gw(n,e+2,i,o)||s}function B9(n){return(n.flags&32)===32}function $9(n,e,t,r,i,o,s,a,c){let l=e.consts,u=bh(e,n,4,s||null,a||null);jE(e,t,u,As(l,c)),Dg(e,u);let h=u.tView=LE(2,u,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),h.queries=e.queries.embeddedTView(u)),u}function Kw(n,e,t,r,i,o,s,a,c,l){let u=t+tr,h=e.firstCreatePass?$9(u,e,n,r,i,o,s,a,c):e.data[u];Ua(h,!1);let f=H9(e,n,h,t);Tg()&&Fg(e,n,f,h),Rs(f,n);let p=s1(f,n,f,h);return n[u]=p,Ng(n,p),S9(p,h,n),wg(h)&&OE(e,n,h),c!=null&&FE(n,h,l),h}function J(n,e,t,r,i,o,s,a){let c=Ue(),l=bn(),u=As(l.consts,o);return Kw(c,l,n,e,t,r,i,u,s,a),J}var H9=z9;function z9(n,e,t,r){return Sg(!0),e[Qt].createComment("")}var YE=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var T1=new K("");function Ha(n){return!!n&&typeof n.then=="function"}function S1(n){return!!n&&typeof n.subscribe=="function"}var D1=new K("");var x1=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=P(D1,{optional:!0})??[];injector=P(Ne);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=An(this.injector,i);if(Ha(o))t.push(o);else if(S1(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),A1=(()=>{class n{static \u0275prov=z({token:n,providedIn:"root",factory:()=>new cg})}return n})(),cg=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},Ug=new K("");function W9(){mP(()=>{throw new oe(600,!1)})}function q9(n){return n.isBoundToModule}var G9=10;function K9(n,e,t){try{let r=t();return Ha(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var So=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(w3);afterRenderManager=P(N3);zonelessEnabled=P(xg);rootEffectScheduler=P(A1);dirtyFlags=0;deferredDirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new Ct;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=P($i).hasPendingTasks.pipe(te(t=>!t));constructor(){P(Mg,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=P(Vn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ig;if(!this._injector.get(x1).done){let f=!i&&Wk(t),p=!1;throw new oe(405,p)}let s;i?s=t:s=this._injector.get(Ps).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=q9(s)?void 0:this._injector.get(ks),c=r||s.selector,l=s.create(Ne.NULL,[],c,a),u=l.location.nativeElement,h=l.injector.get(T1,null);return h?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),jm(this.components,l),h?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick=()=>{if(this.tracingSnapshot!==null){let r=this.tracingSnapshot;this.tracingSnapshot=null,r.run(HN.CHANGE_DETECTION,this._tick),r.dispose();return}if(this._runningTick)throw new oe(101,!1);let t=Oe(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Oe(t),this.afterTick.next()}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Sl,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let t=0;for(;this.dirtyFlags!==0&&t++<G9;)this.synchronizeOnce()}synchronizeOnce(){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)Y9(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Eg(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;jm(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ug,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jm(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new oe(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jm(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Y9(n,e,t,r){if(!t&&!Eg(n))return;g1(n,e,t&&!r?0:1)}function wh(n,e,t,r){let i=Ue(),o=Rl();if(Ui(i,o,e)){let s=bn(),a=Cg();I5(a,i,n,e,t,r)}return wh}function R1(n,e,t,r){return Ui(n,Rl(),t)?e+gg(t)+r:Po}function Nm(n,e){return n<<17|e<<2}function ja(n){return n>>17&32767}function Q9(n){return(n&2)==2}function X9(n,e){return n&131071|e<<17}function Yw(n){return n|2}function Dl(n){return(n&131068)>>2}function hw(n,e){return n&-131069|e<<2}function J9(n){return(n&1)===1}function Qw(n){return n|1}function Z9(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=ja(s),c=Dl(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let h=t;u=h[1],(u===null||yh(h,u)>0)&&(l=!0)}else u=t;if(i)if(c!==0){let f=ja(n[a+1]);n[r+1]=Nm(f,a),f!==0&&(n[f+1]=hw(n[f+1],r)),n[a+1]=X9(n[a+1],r)}else n[r+1]=Nm(a,0),a!==0&&(n[a+1]=hw(n[a+1],r)),a=r;else n[r+1]=Nm(c,0),a===0?a=r:n[c+1]=hw(n[c+1],r),c=r;l&&(n[r+1]=Yw(n[r+1])),yk(n,u,r,!0),yk(n,u,r,!1),e6(e,u,n,r,o),s=Nm(a,c),o?e.classBindings=s:e.styleBindings=s}function e6(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&yh(o,e)>=0&&(t[r+1]=Qw(t[r+1]))}function yk(n,e,t,r){let i=n[t+1],o=e===null,s=r?ja(i):Dl(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],l=n[s+1];t6(c,e)&&(a=!0,n[s+1]=r?Qw(l):Yw(l)),s=r?ja(l):Dl(l)}a&&(n[t+1]=r?Yw(i):Qw(i))}function t6(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?yh(n,e)>=0:!1}function X(n,e,t){let r=Ue(),i=Rl();if(Ui(r,i,e)){let o=bn(),s=Cg();VE(o,s,r,n,e,r[Qt],t,!1)}return X}function vk(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";UE(n,t,o[s],s,r)}function Ml(n,e,t){return M1(n,e,t,!1),Ml}function Bg(n,e){return M1(n,e,null,!0),Bg}function M1(n,e,t,r){let i=Ue(),o=bn(),s=$G(2);if(o.firstUpdatePass&&r6(o,n,s,r),e!==Po&&Ui(i,s,e)){let a=o.data[Ba()];c6(o,a,i,i[Qt],n,i[s+1]=l6(e,t),r,s)}}function n6(n,e){return e>=n.expandoStartIndex}function r6(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ba()],s=n6(n,t);u6(o,r)&&e===null&&!s&&(e=!1),e=i6(i,o,e,r),Z9(i,o,e,t,s,r)}}function i6(n,e,t,r){let i=qG(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=fw(null,n,e,t,r),t=mh(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=fw(i,n,e,t,r),o===null){let c=o6(n,e,r);c!==void 0&&Array.isArray(c)&&(c=fw(null,n,e,c[1],r),c=mh(c,e.attrs,r),s6(n,e,r,c))}else o=a6(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function o6(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Dl(r)!==0)return n[ja(r)]}function s6(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ja(i)]=r}function a6(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=mh(r,s,t)}return mh(r,e.attrs,t)}function fw(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=mh(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function mh(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),lG(n,s,t?!0:e[++o]))}return n===void 0?null:n}function c6(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=J9(l)?_k(c,e,t,i,Dl(l),s):void 0;if(!lg(u)){lg(o)||Q9(l)&&(o=_k(c,null,t,i,a,s));let h=rN(Ba(),t);z5(r,s,h,i,o)}}function _k(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),u=l?c[1]:c,h=u===null,f=t[i+1];f===Po&&(f=h?Br:void 0);let p=h?ow(f,r):u===r?f:void 0;if(l&&!lg(p)&&(p=ow(c,r)),lg(p)&&(a=p,s))return a;let g=n[i+1];i=s?ja(g):Dl(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=ow(c,r))}return a}function lg(n){return n!==void 0}function l6(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=hr(Pg(n)))),n}function u6(n,e){return(n.flags&(e?8:16))!==0}var Xw=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function pw(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function d6(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;o<=s&&o<=c;){let l=n.at(o),u=e[o],h=pw(o,l,o,u,t);if(h!==0){h<0&&n.updateValue(o,u),o++;continue}let f=n.at(s),p=e[c],g=pw(s,f,c,p,t);if(g!==0){g<0&&n.updateValue(s,p),s--,c--;continue}let v=t(o,l),_=t(s,f),D=t(o,u);if(Object.is(D,_)){let R=t(c,p);Object.is(R,v)?(n.swap(o,s),n.updateValue(s,p),c--,s--):n.move(s,o),n.updateValue(o,u),o++;continue}if(r??=new ug,i??=wk(n,o,s,t),Jw(n,r,o,D))n.updateValue(o,u),o++,s++;else if(i.has(D))r.set(v,n.detach(o)),s--;else{let R=n.create(o,e[o]);n.attach(o,R),o++,s++}}for(;o<=c;)bk(n,r,t,o,e[o]),o++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&o<=s;){let u=n.at(o),h=l.value,f=pw(o,u,o,h,t);if(f!==0)f<0&&n.updateValue(o,h),o++,l=c.next();else{r??=new ug,i??=wk(n,o,s,t);let p=t(o,h);if(Jw(n,r,o,p))n.updateValue(o,h),o++,s++,l=c.next();else if(!i.has(p))n.attach(o,n.create(o,h)),o++,s++,l=c.next();else{let g=t(o,u);r.set(g,n.detach(o)),s--}}}for(;!l.done;)bk(n,r,t,n.length,l.value),l=c.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function Jw(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function bk(n,e,t,r,i){if(Jw(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function wk(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var ug=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function ne(n,e){Hi("NgControlFlow");let t=Ue(),r=Rl(),i=t[r]!==Po?t[r]:-1,o=i!==-1?dg(t,tr+i):void 0,s=0;if(Ui(t,r,n)){let a=Oe(null);try{if(o!==void 0&&h1(o,s),n!==-1){let c=tr+n,l=dg(t,c),u=nE(t[Pe],c),h=hh(l,u.tView.ssrId),f=Vg(t,u,e,{dehydratedView:h});jg(l,f,s,dh(u,h))}}finally{Oe(a)}}else if(o!==void 0){let a=d1(o,s);a!==void 0&&(a[Ln]=e)}}var Zw=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-nr}};function P1(n,e){return e}var eE=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function k1(n,e,t,r,i,o,s,a,c,l,u,h,f){Hi("NgControlFlow");let p=Ue(),g=bn(),v=c!==void 0,_=Ue(),D=a?s.bind(_[hi][Ln]):s,R=new eE(v,D);_[tr+n]=R,Kw(p,g,n+1,e,t,r,i,As(g.consts,o)),v&&Kw(p,g,n+2,c,l,u,h,As(g.consts,f))}var tE=class extends Xw{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-nr}at(e){return this.getLView(e)[Ln].$implicit}attach(e,t){let r=t[ah];this.needsIndexUpdate||=e!==this.length,jg(this.lContainer,t,e,dh(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,h6(this.lContainer,e)}create(e,t){let r=hh(this.lContainer,this.templateTNode.tView.ssrId),i=Vg(this.hostLView,this.templateTNode,new Zw(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Og(e[Pe],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ln].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ln].$index=e}getLView(e){return f6(this.lContainer,e)}};function N1(n){let e=Oe(null),t=Ba();try{let r=Ue(),i=r[Pe],o=r[t],s=t+1,a=dg(r,s);if(o.liveCollection===void 0){let l=nE(i,s);o.liveCollection=new tE(a,r,l)}else o.liveCollection.reset();let c=o.liveCollection;if(d6(c,n,o.trackByFn),c.updateIndexes(),o.hasEmptyBlock){let l=Rl(),u=c.length===0;if(Ui(r,l,u)){let h=t+2,f=dg(r,h);if(u){let p=nE(i,h),g=hh(f,p.tView.ssrId),v=Vg(r,p,void 0,{dehydratedView:g});jg(f,v,0,dh(p,g))}else h1(f,0)}}}finally{Oe(e)}}function dg(n,e){return n[e]}function h6(n,e){return uh(n,e)}function f6(n,e){return d1(n,e)}function nE(n,e){return vE(n,e)}function p6(n,e,t,r,i,o){let s=e.consts,a=As(s,i),c=bh(e,n,2,r,a);return jE(e,t,c,As(s,o)),c.attrs!==null&&og(c,c.attrs,!1),c.mergedAttrs!==null&&og(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function C(n,e,t,r){let i=Ue(),o=bn(),s=tr+n,a=i[Qt],c=o.firstCreatePass?p6(s,o,i,e,t,r):o.data[s],l=m6(o,i,c,a,e,n);i[s]=l;let u=wg(c);return Ua(c,!0),ZN(a,l,c),!B9(c)&&Tg()&&Fg(o,i,l,c),NG()===0&&Rs(l,i),OG(),u&&(OE(o,i,c),ME(o,c,i)),r!==null&&FE(i,c),C}function S(){let n=jn();wE()?cN():(n=n.parent,Ua(n,!1));let e=n;VG(e)&&jG(),FG();let t=bn();return t.firstCreatePass&&(Dg(t,n),yE(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&ZG(e)&&vk(t,e,Ue(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&e3(e)&&vk(t,e,Ue(),e.stylesWithoutHost,!1),S}function le(n,e,t,r){return C(n,e,t,r),S(),le}var m6=(n,e,t,r,i,o)=>(Sg(!0),XN(r,i,YG()));function g6(n,e,t,r,i){let o=e.consts,s=As(o,r),a=bh(e,n,8,"ng-container",s);s!==null&&og(a,s,!0);let c=As(o,i);return jE(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function QE(n,e,t){let r=Ue(),i=bn(),o=n+tr,s=i.firstCreatePass?g6(o,i,r,e,t):i.data[o];Ua(s,!0);let a=y6(i,r,s,n);return r[o]=a,Tg()&&Fg(i,r,a,s),Rs(a,r),wg(s)&&(OE(i,r,s),ME(i,s,r)),t!=null&&FE(r,s),QE}function XE(){let n=jn(),e=bn();return wE()?cN():(n=n.parent,Ua(n,!1)),e.firstCreatePass&&(Dg(e,n),yE(n)&&e.queries.elementEnd(n)),XE}var y6=(n,e,t,r)=>(Sg(!0),n5(e[Qt],""));function wn(){return Ue()}var xa=void 0;function v6(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var _6=["en",[["a","p"],["AM","PM"],xa],[["AM","PM"],xa,xa],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xa,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xa,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xa,"{1} 'at' {0}",xa],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",v6],mw={};function Wr(n){let e=b6(n),t=Ek(e);if(t)return t;let r=e.split("-")[0];if(t=Ek(r),t)return t;if(r==="en")return _6;throw new oe(701,!1)}function Ek(n){return n in mw||(mw[n]=th.ng&&th.ng.common&&th.ng.common.locales&&th.ng.common.locales[n]),mw[n]}var Xt=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Xt||{});function b6(n){return n.toLowerCase().replace(/_/g,"-")}var hg="en-US";var w6=hg;function E6(n){typeof n=="string"&&(w6=n.toLowerCase().replace(/_/g,"-"))}var I6=(n,e,t)=>{};function ie(n,e,t,r){let i=Ue(),o=bn(),s=jn();return O1(o,i,i[Qt],s,n,e,r),ie}function C6(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Wm],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function O1(n,e,t,r,i,o,s){let a=wg(r),l=n.firstCreatePass&&kG(n),u=e[Ln],h=PG(e),f=!0;if(r.type&3||s){let v=zr(r,e),_=s?s(v):v,D=h.length,R=s?V=>s(Vi(V[r.index])):r.index,F=null;if(!s&&a&&(F=C6(n,e,i,r.index)),F!==null){let V=F.__ngLastListenerFn__||F;V.__ngNextListenerFn__=o,F.__ngLastListenerFn__=o,f=!1}else{o=Ck(r,e,u,o),I6(v,i,o);let V=t.listen(_,i,o);h.push(o,V),l&&l.push(i,R,D,D+1)}}else o=Ck(r,e,u,o);let p=r.outputs,g;if(f&&p!==null&&(g=p[i])){let v=g.length;if(v)for(let _=0;_<v;_+=2){let D=g[_],R=g[_+1],U=e[D][R].subscribe(o),j=h.length;h.push(o,U),l&&l.push(i,r.index,j,-(j+1))}}}function Ik(n,e,t,r){let i=Oe(null);try{return $r(6,e,t),t(r)!==!1}catch(o){return a1(n,o),!1}finally{$r(7,e,t),Oe(i)}}function Ck(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?Ns(n.index,e):e;WE(s,5);let a=Ik(e,t,r,o),c=i.__ngNextListenerFn__;for(;c;)a=Ik(e,t,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function W(n=1){return KG(n)}function $g(n,e,t,r,i){let o=Ue(),s=R1(o,e,t,r);if(s!==Po){let a=bn(),c=Cg();VE(a,c,o,n,s,o[Qt],i,!1)}return $g}function T6(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function k(n,e=""){let t=Ue(),r=bn(),i=n+tr,o=r.firstCreatePass?bh(r,i,1,e,null):r.data[i],s=S6(r,t,o,e,n);t[i]=s,Tg()&&Fg(r,t,s,o),Ua(o,!1)}var S6=(n,e,t,r,i)=>(Sg(!0),e5(e[Qt],r));function Un(n){return G("",n,""),Un}function G(n,e,t){let r=Ue(),i=R1(r,n,e,t);return i!==Po&&D6(r,Ba(),i),G}function D6(n,e,t){let r=rN(e,n);t5(n[Qt],r,t)}function mr(n,e,t){NN(e)&&(e=e());let r=Ue(),i=Rl();if(Ui(r,i,e)){let o=bn(),s=Cg();VE(o,s,r,n,e,r[Qt],t,!1)}return mr}function Rr(n,e){let t=NN(n);return t&&n.set(e),t}function gr(n,e){let t=Ue(),r=bn(),i=jn();return O1(r,t,t[Qt],i,n,e),gr}function x6(n,e,t){let r=bn();if(r.firstCreatePass){let i=xs(n);rE(t,r.data,r.blueprint,i,!0),rE(e,r.data,r.blueprint,i,!1)}}function rE(n,e,t,r,i){if(n=er(n),Array.isArray(n))for(let o=0;o<n.length;o++)rE(n[o],e,t,r,i);else{let o=bn(),s=Ue(),a=jn(),c=bl(n)?n:er(n.provide),l=Yk(n),u=a.providerIndexes&1048575,h=a.directiveStart,f=a.providerIndexes>>20;if(bl(n)||!n.multi){let p=new Fa(l,i,De),g=yw(c,e,i?u:u+f,h);g===-1?(Mw(Jm(a,s),o,c),gw(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(p),s.push(p)):(t[g]=p,s[g]=p)}else{let p=yw(c,e,u+f,h),g=yw(c,e,u,u+f),v=p>=0&&t[p],_=g>=0&&t[g];if(i&&!_||!i&&!v){Mw(Jm(a,s),o,c);let D=M6(i?R6:A6,t.length,i,r,l);!i&&_&&(t[g].providerFactory=D),gw(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(D),s.push(D)}else{let D=F1(t[i?g:p],l,!i&&r);gw(o,n,p>-1?p:g,D)}!i&&r&&_&&t[g].componentProviders++}}}function gw(n,e,t,r){let i=bl(e),o=mG(e);if(i||o){let c=(o?er(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function F1(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function yw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function A6(n,e,t,r){return iE(this.multi,[])}function R6(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Tl(t,t[Pe],this.providerFactory.index,r);o=a.slice(0,s),iE(i,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],iE(i,o);return o}function iE(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function M6(n,e,t,r,i){let o=new Fa(n,t,De);return o.multi=[],o.index=e,o.componentProviders=0,F1(o,i,r&&!t),o}function zi(n,e=[]){return t=>{t.providersResolver=(r,i)=>x6(r,i?i(n):n,e)}}function We(n,e,t,r){return P6(Ue(),Ig(),n,e,t,r)}function mi(n,e,t,r,i){return V1(Ue(),Ig(),n,e,t,r,i)}function L1(n,e,t,r,i,o,s){return k6(Ue(),Ig(),n,e,t,r,i,o,s)}function JE(n,e){let t=n[e];return t===Po?void 0:t}function P6(n,e,t,r,i,o){let s=e+t;return Ui(n,s,i)?KE(n,s+1,o?r.call(o,i):r(i)):JE(n,s+1)}function V1(n,e,t,r,i,o,s){let a=e+t;return Gw(n,a,i,o)?KE(n,a+2,s?r.call(s,i,o):r(i,o)):JE(n,a+2)}function k6(n,e,t,r,i,o,s,a,c){let l=e+t;return U9(n,l,i,o,s,a)?KE(n,l+4,c?r.call(c,i,o,s,a):r(i,o,s,a)):JE(n,l+4)}function gi(n,e){let t=bn(),r,i=n+tr;t.firstCreatePass?(r=N6(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=Ra(r.type,!0)),s,a=dr(De);try{let c=Xm(!1),l=o();return Xm(c),T6(t,Ue(),i,l),l}finally{dr(a)}}function N6(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function yi(n,e,t,r){let i=n+tr,o=Ue(),s=xG(o,i);return O6(o,i)?V1(o,Ig(),e,s.transform,t,r,s):s.transform(t,r)}function O6(n,e){return n[Pe].data[e].pure}var Do=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},j1=new Do("19.1.3"),oE=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},ZE=(()=>{class n{compileModuleSync(t){return new qw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=$k(t),o=GN(i.declarations).reduce((s,a)=>{let c=Ma(a);return c&&s.push(new fh(c)),s},[]);return new oE(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var F6=(()=>{class n{zone=P(pe);changeDetectionScheduler=P(La);applicationRef=P(So);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),L6=new K("",{factory:()=>!1});function U1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new pe(fe(q({},$1()),{scheduleInRootZone:t})),[{provide:pe,useFactory:n},{provide:_l,multi:!0,useFactory:()=>{let r=P(F6,{optional:!0});return()=>r.initialize()}},{provide:_l,multi:!0,useFactory:()=>{let r=P(V6);return()=>{r.initialize()}}},e===!0?{provide:AN,useValue:!0}:[],{provide:RN,useValue:t??xN}]}function B1(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=U1({ngZoneFactory:()=>{let i=$1(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Hi("NgZone_CoalesceEvent"),new pe(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return vt([{provide:L6,useValue:!0},{provide:xg,useValue:!1},r])}function $1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var V6=(()=>{class n{subscription=new $t;initialized=!1;zone=P(pe);pendingTasks=P($i);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{pe.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{pe.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var j6=(()=>{class n{appRef=P(So);taskService=P($i);ngZone=P(pe);zonelessEnabled=P(xg);tracing=P(Mg,{optional:!0});disableScheduling=P(AN,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new $t;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(eg):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(RN,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ow||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 8:{this.appRef.deferredDirtyFlags|=8;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 13:{this.appRef.dirtyFlags|=16,r=!0;break}case 14:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{r=!0;break}case 10:case 9:case 7:case 11:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?nk:MN;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(eg+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,nk(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function U6(){return typeof $localize<"u"&&$localize.locale||hg}var Hg=new K("",{providedIn:"root",factory:()=>P(Hg,ke.Optional|ke.SkipSelf)||U6()});var sE=new K(""),B6=new K("");function eh(n){return!n.moduleRef}function $6(n){let e=eh(n)?n.r3Injector:n.moduleRef.injector,t=e.get(pe);return t.run(()=>{eh(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Co,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),eh(n)){let o=()=>e.destroy(),s=n.platformInjector.get(sE);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(sE);s.add(o),n.moduleRef.onDestroy(()=>{jm(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return K9(r,t,()=>{let o=e.get(x1);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Hg,hg);if(E6(s||hg),!e.get(B6,!0))return eh(n)?e.get(So):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(eh(n)){let c=e.get(So);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return H6(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function H6(n,e){let t=n.injector.get(So);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new oe(-403,!1);e.push(n)}var Um=null;function z6(n=[],e){return Ne.create({name:e,providers:[{provide:vg,useValue:"platform"},{provide:sE,useValue:new Set([()=>Um=null])},...n]})}function W6(n=[]){if(Um)return Um;let e=z6(n);return Um=e,W9(),q6(e),e}function q6(n){let e=n.get(xE,null);An(n,()=>{e?.forEach(t=>t())})}function eI(){return!1}var Os=(()=>{class n{static __NG_ELEMENT_ID__=G6}return n})();function G6(n){return K6(jn(),Ue(),(n&16)===16)}function K6(n,e,t){if(bg(n)&&!t){let r=Ns(n.index,e);return new Va(r,r)}else if(n.type&175){let r=e[hi];return new Va(r,e)}return null}var aE=class{constructor(){}supports(e){return C1(e)}create(e){return new cE(e)}},Y6=(n,e)=>e,cE=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||Y6}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<Tk(r,i,o)?t:r,a=Tk(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,u=c-i;if(l!=u){for(let f=0;f<l;f++){let p=f<o.length?o[f]:o[f]=0,g=p+f;u<=g&&g<l&&(o[f]=p+1)}let h=s.previousIndex;o[h]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!C1(e))throw new oe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,V9(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new lE(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new fg),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new fg),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lE=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},uE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},fg=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new uE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Tk(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function Sk(){return new tI([new aE])}var tI=(()=>{class n{factories;static \u0275prov=z({token:n,providedIn:"root",factory:Sk});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Sk()),deps:[[n,new aG,new Ae]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new oe(901,!1)}}return n})();function H1(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=W6(r),o=[U1({}),{provide:La,useExisting:j6},...t||[]],s=new ag({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return $6({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Eh(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ie(n,e){Hi("NgSignals");let t=hP(n);return e?.equal&&(t[lr].equal=e.equal),t}function qr(n){let e=Oe(null);try{return n()}finally{Oe(e)}}var z1=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=Q6}return n})();function Q6(){return new z1(Ue(),jn())}var X6=!1,J6=(()=>{class n extends cg{pendingTasks=P($i);taskId=null;schedule(t){super.schedule(t),this.taskId===null&&(this.taskId=this.pendingTasks.add(),queueMicrotask(()=>this.flush()))}flush(){try{super.flush()}finally{this.taskId!==null&&(this.pendingTasks.remove(this.taskId),this.taskId=null)}}static \u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}return n})(),dE=class{scheduler;effectFn;zone;injector;unregisterOnDestroy;watcher;constructor(e,t,r,i,o,s){this.scheduler=e,this.effectFn=t,this.zone=r,this.injector=o,this.watcher=vP(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Co,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.schedule(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Z6(){}function W1(n,e){Hi("NgSignals"),!e?.injector&&xl(Z6);let t=e?.injector??P(Ne),r=e?.manualCleanup!==!0?t.get(Mo):null,i=new dE(t.get(J6),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),o=t.get(Os,null,{optional:!0});return!o||!(o._lView[ve]&8)?i.watcher.notify():(o._lView[Fm]??=[]).push(i.watcher.notify),i}var e8=X6;var hE=class{[lr];constructor(e){this[lr]=e}destroy(){this[lr].destroy()}};function Mr(n,e){if(e8)return W1(n,e);Hi("NgSignals"),!e?.injector&&xl(Mr);let t=e?.injector??P(Ne),r=e?.manualCleanup!==!0?t.get(Mo):null,i,o=t.get(z1,null,{optional:!0}),s=t.get(La);return o!==null&&!e?.forceRoot?(i=r8(o.view,s,n),r instanceof Zm&&r._lView===o.view&&(r=null)):i=i8(n,t.get(A1),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new hE(i)}var q1=fe(q({},Ea),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:lh,run(){if(this.dirty=!1,this.hasRun&&!Kd(this))return;this.hasRun=!0;let n=r=>(this.cleanupFns??=[]).push(r),e=Yc(this),t=Km(!1);try{this.maybeCleanup(),this.fn(n)}finally{Km(t),Gd(this,e)}},maybeCleanup(){if(this.cleanupFns?.length)try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[]}}}),t8=fe(q({},q1),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(13)},destroy(){Qc(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}}),n8=fe(q({},q1),{consumerMarkedDirty(){this.view[ve]|=8192,_h(this.view),this.notifier.notify(14)},destroy(){Qc(this),this.onDestroyFn(),this.maybeCleanup(),this.view[Pa]?.delete(this)}});function r8(n,e,t){let r=Object.create(n8);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=t,n[Pa]??=new Set,n[Pa].add(r),r.consumerMarkedDirty(r),r}function i8(n,e,t){let r=Object.create(t8);return r.fn=n,r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.schedule(r),r.notifier.notify(13),r}var J1=null;function Fo(){return J1}function Z1(n){J1??=n}var Jg=class{};var Bn=new K(""),eO=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>P(a8),providedIn:"platform"})}return n})();var a8=(()=>{class n extends eO{_location;_history;_doc=P(Bn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Fo().getBaseHref(this._doc)}onPopState(t){let r=Fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Fo().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function tO(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function G1(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function za(n){return n&&n[0]!=="?"?"?"+n:n}var ey=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>P(nO),providedIn:"root"})}return n})(),c8=new K(""),nO=(()=>{class n extends ey{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P(Bn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return tO(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+za(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+za(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+za(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ae(eO),ae(c8,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Ih=(()=>{class n{_subject=new Ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=d8(G1(K1(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+za(r))}normalize(t){return n.stripTrailingSlash(u8(this._basePath,K1(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+za(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+za(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=za;static joinWithSlash=tO;static stripTrailingSlash=G1;static \u0275fac=function(r){return new(r||n)(ae(ey))};static \u0275prov=z({token:n,factory:()=>l8(),providedIn:"root"})}return n})();function l8(){return new Ih(ae(ey))}function u8(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function K1(n){return n.replace(/\/index.html$/,"")}function d8(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var ir=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(ir||{}),ht=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ht||{}),Pr=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Pr||{}),Fs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function h8(n){return Wr(n)[Xt.LocaleId]}function f8(n,e,t){let r=Wr(n),i=[r[Xt.DayPeriodsFormat],r[Xt.DayPeriodsStandalone]],o=Gr(i,e);return Gr(o,t)}function p8(n,e,t){let r=Wr(n),i=[r[Xt.DaysFormat],r[Xt.DaysStandalone]],o=Gr(i,e);return Gr(o,t)}function m8(n,e,t){let r=Wr(n),i=[r[Xt.MonthsFormat],r[Xt.MonthsStandalone]],o=Gr(i,e);return Gr(o,t)}function g8(n,e){let r=Wr(n)[Xt.Eras];return Gr(r,e)}function zg(n,e){let t=Wr(n);return Gr(t[Xt.DateFormat],e)}function Wg(n,e){let t=Wr(n);return Gr(t[Xt.TimeFormat],e)}function qg(n,e){let r=Wr(n)[Xt.DateTimeFormat];return Gr(r,e)}function ty(n,e){let t=Wr(n),r=t[Xt.NumberSymbols][e];if(typeof r>"u"){if(e===Fs.CurrencyDecimal)return t[Xt.NumberSymbols][Fs.Decimal];if(e===Fs.CurrencyGroup)return t[Xt.NumberSymbols][Fs.Group]}return r}function rO(n){if(!n[Xt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Xt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function y8(n){let e=Wr(n);return rO(e),(e[Xt.ExtraData][2]||[]).map(r=>typeof r=="string"?nI(r):[nI(r[0]),nI(r[1])])}function v8(n,e,t){let r=Wr(n);rO(r);let i=[r[Xt.ExtraData][0],r[Xt.ExtraData][1]],o=Gr(i,e)||[];return Gr(o,t)||[]}function Gr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function nI(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var _8=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gg={},b8=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function w8(n,e,t,r){let i=R8(n);e=Oo(t,e)||e;let s=[],a;for(;e;)if(a=b8.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let c=i.getTimezoneOffset();r&&(c=oO(r,c),i=A8(i,r,!0));let l="";return s.forEach(u=>{let h=D8(u);l+=h?h(i,t,c):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Zg(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Oo(n,e){let t=h8(n);if(Gg[t]??={},Gg[t][e])return Gg[t][e];let r="";switch(e){case"shortDate":r=zg(n,Pr.Short);break;case"mediumDate":r=zg(n,Pr.Medium);break;case"longDate":r=zg(n,Pr.Long);break;case"fullDate":r=zg(n,Pr.Full);break;case"shortTime":r=Wg(n,Pr.Short);break;case"mediumTime":r=Wg(n,Pr.Medium);break;case"longTime":r=Wg(n,Pr.Long);break;case"fullTime":r=Wg(n,Pr.Full);break;case"short":let i=Oo(n,"shortTime"),o=Oo(n,"shortDate");r=Kg(qg(n,Pr.Short),[i,o]);break;case"medium":let s=Oo(n,"mediumTime"),a=Oo(n,"mediumDate");r=Kg(qg(n,Pr.Medium),[s,a]);break;case"long":let c=Oo(n,"longTime"),l=Oo(n,"longDate");r=Kg(qg(n,Pr.Long),[c,l]);break;case"full":let u=Oo(n,"fullTime"),h=Oo(n,"fullDate");r=Kg(qg(n,Pr.Full),[u,h]);break}return r&&(Gg[t][e]=r),r}function Kg(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function vi(n,e,t="-",r,i){let o="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,o=t));let s=String(n);for(;s.length<e;)s="0"+s;return r&&(s=s.slice(s.length-e)),o+s}function E8(n,e){return vi(n,3).substring(0,e)}function en(n,e,t=0,r=!1,i=!1){return function(o,s){let a=I8(n,o);if((t>0||a>-t)&&(a+=t),n===3)a===0&&t===-12&&(a=12);else if(n===6)return E8(a,e);let c=ty(s,Fs.MinusSign);return vi(a,e,c,r,i)}}function I8(n,e){switch(n){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();case 3:return e.getHours();case 4:return e.getMinutes();case 5:return e.getSeconds();case 6:return e.getMilliseconds();case 7:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function _t(n,e,t=ir.Format,r=!1){return function(i,o){return C8(i,o,n,e,t,r)}}function C8(n,e,t,r,i,o){switch(t){case 2:return m8(e,i,r)[n.getMonth()];case 1:return p8(e,i,r)[n.getDay()];case 0:let s=n.getHours(),a=n.getMinutes();if(o){let l=y8(e),u=v8(e,i,r),h=l.findIndex(f=>{if(Array.isArray(f)){let[p,g]=f,v=s>=p.hours&&a>=p.minutes,_=s<g.hours||s===g.hours&&a<g.minutes;if(p.hours<g.hours){if(v&&_)return!0}else if(v||_)return!0}else if(f.hours===s&&f.minutes===a)return!0;return!1});if(h!==-1)return u[h]}return f8(e,i,r)[s<12?0:1];case 3:return g8(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Yg(n){return function(e,t,r){let i=-1*r,o=ty(t,Fs.MinusSign),s=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case 0:return(i>=0?"+":"")+vi(s,2,o)+vi(Math.abs(i%60),2,o);case 1:return"GMT"+(i>=0?"+":"")+vi(s,1,o);case 2:return"GMT"+(i>=0?"+":"")+vi(s,2,o)+":"+vi(Math.abs(i%60),2,o);case 3:return r===0?"Z":(i>=0?"+":"")+vi(s,2,o)+":"+vi(Math.abs(i%60),2,o);default:throw new Error(`Unknown zone width "${n}"`)}}}var T8=0,Xg=4;function S8(n){let e=Zg(n,T8,1).getDay();return Zg(n,0,1+(e<=Xg?Xg:Xg+7)-e)}function iO(n){let e=n.getDay(),t=e===0?-3:Xg-e;return Zg(n.getFullYear(),n.getMonth(),n.getDate()+t)}function rI(n,e=!1){return function(t,r){let i;if(e){let o=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,s=t.getDate();i=1+Math.floor((s+o)/7)}else{let o=iO(t),s=S8(o.getFullYear()),a=o.getTime()-s.getTime();i=1+Math.round(a/6048e5)}return vi(i,n,ty(r,Fs.MinusSign))}}function Qg(n,e=!1){return function(t,r){let o=iO(t).getFullYear();return vi(o,n,ty(r,Fs.MinusSign),e)}}var iI={};function D8(n){if(iI[n])return iI[n];let e;switch(n){case"G":case"GG":case"GGG":e=_t(3,ht.Abbreviated);break;case"GGGG":e=_t(3,ht.Wide);break;case"GGGGG":e=_t(3,ht.Narrow);break;case"y":e=en(0,1,0,!1,!0);break;case"yy":e=en(0,2,0,!0,!0);break;case"yyy":e=en(0,3,0,!1,!0);break;case"yyyy":e=en(0,4,0,!1,!0);break;case"Y":e=Qg(1);break;case"YY":e=Qg(2,!0);break;case"YYY":e=Qg(3);break;case"YYYY":e=Qg(4);break;case"M":case"L":e=en(1,1,1);break;case"MM":case"LL":e=en(1,2,1);break;case"MMM":e=_t(2,ht.Abbreviated);break;case"MMMM":e=_t(2,ht.Wide);break;case"MMMMM":e=_t(2,ht.Narrow);break;case"LLL":e=_t(2,ht.Abbreviated,ir.Standalone);break;case"LLLL":e=_t(2,ht.Wide,ir.Standalone);break;case"LLLLL":e=_t(2,ht.Narrow,ir.Standalone);break;case"w":e=rI(1);break;case"ww":e=rI(2);break;case"W":e=rI(1,!0);break;case"d":e=en(2,1);break;case"dd":e=en(2,2);break;case"c":case"cc":e=en(7,1);break;case"ccc":e=_t(1,ht.Abbreviated,ir.Standalone);break;case"cccc":e=_t(1,ht.Wide,ir.Standalone);break;case"ccccc":e=_t(1,ht.Narrow,ir.Standalone);break;case"cccccc":e=_t(1,ht.Short,ir.Standalone);break;case"E":case"EE":case"EEE":e=_t(1,ht.Abbreviated);break;case"EEEE":e=_t(1,ht.Wide);break;case"EEEEE":e=_t(1,ht.Narrow);break;case"EEEEEE":e=_t(1,ht.Short);break;case"a":case"aa":case"aaa":e=_t(0,ht.Abbreviated);break;case"aaaa":e=_t(0,ht.Wide);break;case"aaaaa":e=_t(0,ht.Narrow);break;case"b":case"bb":case"bbb":e=_t(0,ht.Abbreviated,ir.Standalone,!0);break;case"bbbb":e=_t(0,ht.Wide,ir.Standalone,!0);break;case"bbbbb":e=_t(0,ht.Narrow,ir.Standalone,!0);break;case"B":case"BB":case"BBB":e=_t(0,ht.Abbreviated,ir.Format,!0);break;case"BBBB":e=_t(0,ht.Wide,ir.Format,!0);break;case"BBBBB":e=_t(0,ht.Narrow,ir.Format,!0);break;case"h":e=en(3,1,-12);break;case"hh":e=en(3,2,-12);break;case"H":e=en(3,1);break;case"HH":e=en(3,2);break;case"m":e=en(4,1);break;case"mm":e=en(4,2);break;case"s":e=en(5,1);break;case"ss":e=en(5,2);break;case"S":e=en(6,1);break;case"SS":e=en(6,2);break;case"SSS":e=en(6,3);break;case"Z":case"ZZ":case"ZZZ":e=Yg(0);break;case"ZZZZZ":e=Yg(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Yg(1);break;case"OOOO":case"ZZZZ":case"zzzz":e=Yg(2);break;default:return null}return iI[n]=e,e}function oO(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function x8(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function A8(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),o=oO(e,i);return x8(n,r*(o-i))}function R8(n){if(Y1(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,o=1,s=1]=n.split("-").map(a=>+a);return Zg(i,o-1,s)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(_8))return M8(r)}let e=new Date(n);if(!Y1(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function M8(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,o=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let s=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return o.call(e,s,a,c,l),e}function Y1(n){return n instanceof Date&&!isNaN(n.valueOf())}function ny(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var oI=/\s+/,Q1=[],He=(()=>{class n{_ngEl;_renderer;initialClasses=Q1;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(oI):Q1}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(oI):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(oI).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(De(fr),De(ko))};static \u0275dir=dt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var sI=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},$n=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sI(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),X1(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);X1(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(De($a),De(qE),De(tI))};static \u0275dir=dt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function X1(n,e){n.context.$implicit=e.item}function P8(n,e){return new oe(2100,!1)}var k8="mediumDate",N8=new K(""),O8=new K(""),Ls=(()=>{class n{locale;defaultTimezone;defaultOptions;constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,o){if(t==null||t===""||t!==t)return null;try{let s=r??this.defaultOptions?.dateFormat??k8,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return w8(t,s,o||this.locale,a)}catch(s){throw P8(n,s.message)}}static \u0275fac=function(r){return new(r||n)(De(Hg,16),De(N8,24),De(O8,24))};static \u0275pipe=w1({name:"date",type:n,pure:!0})}return n})();var aI="browser",F8="server";function kl(n){return n===aI}function Lo(n){return n===F8}var Pl=class{};var Th=class{},iy=class{},Wa=class n{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let r=t.indexOf(":");if(r>0){let i=t.slice(0,r),o=t.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.addHeaderEntry(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,t);let i=(e.op==="a"?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":let o=e.value;if(!o)this.headers.delete(t),this.normalizedNames.delete(t);else{let s=this.headers.get(t);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,s)}break}}addHeaderEntry(e,t){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(t):this.headers.set(r,[t])}setHeaderEntries(e,t){let r=(Array.isArray(t)?t:[t]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var lI=class{encodeKey(e){return sO(e)}encodeValue(e){return sO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function V8(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],c=t.get(s)||[];c.push(a),t.set(s,c)}),t}var j8=/%(\d[a-f0-9])/gi,U8={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sO(n){return encodeURIComponent(n).replace(j8,(e,t)=>U8[t]??e)}function ry(n){return`${n}`}var Vs=class n{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new lI,e.fromString){if(e.fromObject)throw new oe(2805,!1);this.map=V8(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let r=e.fromObject[t],i=Array.isArray(r)?r.map(ry):[ry(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{t.push({param:r,value:o,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(ry(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(ry(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var uI=class{map=new Map;set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function B8(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aO(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function cO(n){return typeof Blob<"u"&&n instanceof Blob}function lO(n){return typeof FormData<"u"&&n instanceof FormData}function $8(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var uO="Content-Type",fO="X-Request-URL",pO="text/plain",mO="application/json",H8=`${mO}, ${pO}, */*`,Ch=class n{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;responseType="json";method;params;urlWithParams;transferCache;constructor(e,t,r,i){this.url=t,this.method=e.toUpperCase();let o;if(B8(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Wa,this.context??=new uI,!this.params)this.params=new Vs,this.urlWithParams=t;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||aO(this.body)||cO(this.body)||lO(this.body)||$8(this.body)?this.body:this.body instanceof Vs?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||lO(this.body)?null:cO(this.body)?this.body.type||null:aO(this.body)?null:typeof this.body=="string"?pO:this.body instanceof Vs?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?mO:null}clone(e={}){let t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,u=e.params||this.params,h=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((f,p)=>f.set(p,e.setHeaders[p]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((f,p)=>f.set(p,e.setParams[p]),u)),new n(t,r,s,{params:u,headers:l,context:h,reportProgress:c,responseType:i,withCredentials:a,transferCache:o})}},Nl=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(Nl||{}),Sh=class{headers;status;statusText;url;ok;type;constructor(e,t=200,r="OK"){this.headers=e.headers||new Wa,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},dI=class n extends Sh{constructor(e={}){super(e)}type=Nl.ResponseHeader;clone(e={}){return new n({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},oy=class n extends Sh{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Nl.Response;clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},sy=class extends Sh{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},z8=200,W8=204;function cI(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Dh=(()=>{class n{handler;constructor(t){this.handler=t}request(t,r,i={}){let o;if(t instanceof Ch)o=t;else{let c;i.headers instanceof Wa?c=i.headers:c=new Wa(i.headers);let l;i.params&&(i.params instanceof Vs?l=i.params:l=new Vs({fromObject:i.params})),o=new Ch(t,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let s=de(o).pipe(wo(c=>this.handler.handle(c)));if(t instanceof Ch||i.observe==="events")return s;let a=s.pipe(xn(c=>c instanceof oy));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(te(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(te(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(te(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(te(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Vs().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,cI(i,r))}post(t,r,i={}){return this.request("POST",t,cI(i,r))}put(t,r,i={}){return this.request("PUT",t,cI(i,r))}static \u0275fac=function(r){return new(r||n)(ae(Th))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();var q8=new K("");function G8(n,e){return e(n)}function K8(n,e,t){return(r,i)=>An(t,()=>e(r,o=>n(o,i)))}var gO=new K(""),Y8=new K(""),Q8=new K("",{providedIn:"root",factory:()=>!0});var dO=(()=>{class n extends Th{backend;injector;chain=null;pendingTasks=P($i);contributeToStability=P(Q8);constructor(t,r){super(),this.backend=t,this.injector=r}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(gO),...this.injector.get(Y8,[])]));this.chain=r.reduceRight((i,o)=>K8(i,o,this.injector),G8)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(Da(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||n)(ae(iy),ae(Vn))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();var X8=/^\)\]\}',?\n/,J8=RegExp(`^${fO}:`,"m");function Z8(n){return"responseURL"in n&&n.responseURL?n.responseURL:J8.test(n.getAllResponseHeaders())?n.getResponseHeader(fO):null}var hO=(()=>{class n{xhrFactory;constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new oe(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?yt(r.\u0275loadImpl()):de(null)).pipe(pn(()=>new ye(o=>{let s=r.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((v,_)=>s.setRequestHeader(v,_.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept",H8),!t.headers.has(uO)){let v=t.detectContentTypeHeader();v!==null&&s.setRequestHeader(uO,v)}if(t.responseType){let v=t.responseType.toLowerCase();s.responseType=v!=="json"?v:"text"}let a=t.serializeBody(),c=null,l=()=>{if(c!==null)return c;let v=s.statusText||"OK",_=new Wa(s.getAllResponseHeaders()),D=Z8(s)||t.url;return c=new dI({headers:_,status:s.status,statusText:v,url:D}),c},u=()=>{let{headers:v,status:_,statusText:D,url:R}=l(),F=null;_!==W8&&(F=typeof s.response>"u"?s.responseText:s.response),_===0&&(_=F?z8:0);let V=_>=200&&_<300;if(t.responseType==="json"&&typeof F=="string"){let U=F;F=F.replace(X8,"");try{F=F!==""?JSON.parse(F):null}catch(j){F=U,V&&(V=!1,F={error:j,text:F})}}V?(o.next(new oy({body:F,headers:v,status:_,statusText:D,url:R||void 0})),o.complete()):o.error(new sy({error:F,headers:v,status:_,statusText:D,url:R||void 0}))},h=v=>{let{url:_}=l(),D=new sy({error:v,status:s.status||0,statusText:s.statusText||"Unknown Error",url:_||void 0});o.error(D)},f=!1,p=v=>{f||(o.next(l()),f=!0);let _={type:Nl.DownloadProgress,loaded:v.loaded};v.lengthComputable&&(_.total=v.total),t.responseType==="text"&&s.responseText&&(_.partialText=s.responseText),o.next(_)},g=v=>{let _={type:Nl.UploadProgress,loaded:v.loaded};v.lengthComputable&&(_.total=v.total),o.next(_)};return s.addEventListener("load",u),s.addEventListener("error",h),s.addEventListener("timeout",h),s.addEventListener("abort",h),t.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",g)),s.send(a),o.next({type:Nl.Sent}),()=>{s.removeEventListener("error",h),s.removeEventListener("abort",h),s.removeEventListener("load",u),s.removeEventListener("timeout",h),t.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",g)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||n)(ae(Pl))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),yO=new K(""),eK="XSRF-TOKEN",tK=new K("",{providedIn:"root",factory:()=>eK}),nK="X-XSRF-TOKEN",rK=new K("",{providedIn:"root",factory:()=>nK}),ay=class{},iK=(()=>{class n{doc;platform;cookieName;lastCookieString="";lastToken=null;parseCount=0;constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ny(t,this.cookieName),this.lastCookieString=t),this.lastToken}static \u0275fac=function(r){return new(r||n)(ae(Bn),ae(zt),ae(tK))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function oK(n,e){let t=n.url.toLowerCase();if(!P(yO)||n.method==="GET"||n.method==="HEAD"||t.startsWith("http://")||t.startsWith("https://"))return e(n);let r=P(ay).getToken(),i=P(rK);return r!=null&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}function vO(...n){let e=[Dh,hO,dO,{provide:Th,useExisting:dO},{provide:iy,useFactory:()=>P(q8,{optional:!0})??P(hO)},{provide:gO,useValue:oK,multi:!0},{provide:yO,useValue:!0},{provide:ay,useClass:iK}];for(let t of n)e.push(...t.\u0275providers);return vt(e)}var fI=class extends Jg{supportsDOMEvents=!0},pI=class n extends fI{static makeCurrent(){Z1(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=sK();return t==null?null:aK(t)}resetBaseElement(){xh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ny(document.cookie,e)}},xh=null;function sK(){return xh=xh||document.querySelector("base"),xh?xh.getAttribute("href"):null}function aK(n){return new URL(n,document.baseURI).pathname}var cK=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),mI=new K(""),CO=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new oe(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ae(mI),ae(pe))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),ly=class{_doc;constructor(e){this._doc=e}manager},cy="ng-app-id";function _O(n){for(let e of n)e.remove()}function bO(n,e){let t=e.createElement("style");return t.textContent=n,t}function lK(n,e,t,r){let i=n.head?.querySelectorAll(`style[${cy}="${e}"],link[${cy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(cy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function gI(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var TO=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=Lo(o),lK(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,bO);r?.forEach(i=>this.addUsage(i,this.external,gI))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(_O(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])_O(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,bO(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,gI(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(cy,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ae(Bn),ae(DE),ae(AE,8),ae(zt))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),hI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vI=/%COMP%/g,SO="%COMP%",uK=`_nghost-${SO}`,dK=`_ngcontent-${SO}`,hK=!0,fK=new K("",{providedIn:"root",factory:()=>hK});function pK(n){return dK.replace(vI,n)}function mK(n){return uK.replace(vI,n)}function DO(n,e){return e.map(t=>t.replace(vI,n))}var wO=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,l=null,u=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.tracingService=u,this.platformIsServer=Lo(a),this.defaultRenderer=new Ah(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ji.ShadowDom&&(r=fe(q({},r),{encapsulation:ji.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof uy?i.applyToHost(t):i instanceof Rh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case ji.Emulated:o=new uy(c,l,r,this.appId,u,s,a,h,this.tracingService);break;case ji.ShadowDom:return new yI(c,l,t,r,s,a,this.nonce,h,this.tracingService);default:o=new Rh(c,l,r,u,s,a,h,this.tracingService);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ae(CO),ae(TO),ae(DE),ae(fK),ae(Bn),ae(zt),ae(pe),ae(AE),ae(Mg,8))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),Ah=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(hI[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(EO(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(EO(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new oe(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=hI[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hI[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(To.DashCase|To.Important)?e.style.setProperty(t,r,i&To.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&To.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=Fo().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);let o=this.decoratePreventDefault(r);return this.tracingService!==null&&this.tracingService.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function EO(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var yI=class extends Ah{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,c,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=DO(i.id,i.styles);for(let f of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}let h=i.getExternalStyles?.();if(h)for(let f of h){let p=gI(f,o);a&&p.setAttribute("nonce",a),this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Rh=class extends Ah{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,l){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=l?DO(l,r.styles):r.styles,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},uy=class extends Rh{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,l){let u=i+"-"+r.id;super(e,t,r,o,s,a,c,l,u),this.contentAttr=pK(u),this.hostAttr=mK(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},gK=(()=>{class n extends ly{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ae(Bn))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),IO=["alt","control","meta","shift"],yK={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vK={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},_K=(()=>{class n extends ly{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fo().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),IO.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=yK[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),IO.forEach(s=>{if(s!==i){let a=vK[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ae(Bn))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})();function xO(n,e){return H1(q({rootComponent:n},bK(e)))}function bK(n){return{appProviders:[...TK,...n?.providers??[]],platformProviders:CK}}function wK(){pI.makeCurrent()}function EK(){return new Co}function IK(){return BN(document),document}var CK=[{provide:zt,useValue:aI},{provide:xE,useValue:wK,multi:!0},{provide:Bn,useFactory:IK,deps:[]}];var TK=[{provide:vg,useValue:"root"},{provide:Co,useFactory:EK,deps:[]},{provide:mI,useClass:gK,multi:!0,deps:[Bn,pe,zt]},{provide:mI,useClass:_K,multi:!0,deps:[Bn]},wO,TO,CO,{provide:Sl,useExisting:wO},{provide:Pl,useClass:cK,deps:[]},[]];var dy=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ae(Bn))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Re="primary",Gh=Symbol("RouteTitle"),II=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ul(n){return new II(n)}function SK(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function DK(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wi(n[t],e[t]))return!1;return!0}function Wi(n,e){let t=n?CI(n):void 0,r=e?CI(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!LO(n[i],e[i]))return!1;return!0}function CI(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LO(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function VO(n){return n.length>0?n[n.length-1]:null}function js(n){return Zb(n)?n:Ha(n)?yt(Promise.resolve(n)):de(n)}var xK={exact:UO,subset:BO},jO={exact:AK,subset:RK,ignored:()=>!0};function RO(n,e,t){return xK[t.paths](n.root,e.root,t.matrixParams)&&jO[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function AK(n,e){return Wi(n,e)}function UO(n,e,t){if(!Ga(n.segments,e.segments)||!py(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!UO(n.children[r],e.children[r],t))return!1;return!0}function RK(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LO(n[t],e[t]))}function BO(n,e,t){return $O(n,e,e.segments,t)}function $O(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ga(i,t)||e.hasChildren()||!py(i,t,r))}else if(n.segments.length===t.length){if(!Ga(n.segments,t)||!py(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!BO(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Ga(n.segments,i)||!py(n.segments,i,r)||!n.children[Re]?!1:$O(n.children[Re],e,o,r)}}function py(n,e,t){return e.every((r,i)=>jO[t](n[i].parameters,r.parameters))}var jo=class{root;queryParams;fragment;_queryParamMap;constructor(e=new rt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ul(this.queryParams),this._queryParamMap}toString(){return kK.serialize(this)}},rt=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return my(this)}},qa=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ul(this.parameters),this._parameterMap}toString(){return zO(this)}};function MK(n,e){return Ga(n,e)&&n.every((t,r)=>Wi(t.parameters,e[r].parameters))}function Ga(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function PK(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Re&&(t=t.concat(e(i,r)))}),t}var YI=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>new Fh,providedIn:"root"})}return n})(),Fh=class{parse(e){let t=new SI(e);return new jo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Mh(e.root,!0)}`,r=FK(e.queryParams),i=typeof e.fragment=="string"?`#${NK(e.fragment)}`:"";return`${t}${r}${i}`}},kK=new Fh;function my(n){return n.segments.map(e=>zO(e)).join("/")}function Mh(n,e){if(!n.hasChildren())return my(n);if(e){let t=n.children[Re]?Mh(n.children[Re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Re&&r.push(`${i}:${Mh(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=PK(n,(r,i)=>i===Re?[Mh(n.children[Re],!1)]:[`${i}:${Mh(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Re]!=null?`${my(n)}/${t[0]}`:`${my(n)}/(${t.join("//")})`}}function HO(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hy(n){return HO(n).replace(/%3B/gi,";")}function NK(n){return encodeURI(n)}function TI(n){return HO(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gy(n){return decodeURIComponent(n)}function MO(n){return gy(n.replace(/\+/g,"%20"))}function zO(n){return`${TI(n.path)}${OK(n.parameters)}`}function OK(n){return Object.entries(n).map(([e,t])=>`;${TI(e)}=${TI(t)}`).join("")}function FK(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${hy(t)}=${hy(i)}`).join("&"):`${hy(t)}=${hy(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var LK=/^[^\/()?;#]+/;function _I(n){let e=n.match(LK);return e?e[0]:""}var VK=/^[^\/()?;=#]+/;function jK(n){let e=n.match(VK);return e?e[0]:""}var UK=/^[^=?&#]+/;function BK(n){let e=n.match(UK);return e?e[0]:""}var $K=/^[^&#]+/;function HK(n){let e=n.match($K);return e?e[0]:""}var SI=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new rt([],{}):new rt([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Re]=new rt(e,t)),r}parseSegment(){let e=_I(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new oe(4009,!1);return this.capture(e),new qa(gy(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=jK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=_I(this.remaining);i&&(r=i,this.capture(r))}e[gy(t)]=gy(r)}parseQueryParam(e){let t=BK(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=HK(this.remaining);s&&(r=s,this.capture(r))}let i=MO(t),o=MO(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_I(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new oe(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Re);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Re]:new rt([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new oe(4011,!1)}};function WO(n){return n.segments.length>0?new rt([],{[Re]:n}):n}function qO(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=qO(i);if(r===Re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new rt(n.segments,e);return zK(t)}function zK(n){if(n.numberOfChildren===1&&n.children[Re]){let e=n.children[Re];return new rt(n.segments.concat(e.segments),e.children)}return n}function Lh(n){return n instanceof jo}function WK(n,e,t=null,r=null){let i=GO(n);return KO(i,e,t,r)}function GO(n){let e;function t(o){let s={};for(let c of o.children){let l=t(c);s[c.outlet]=l}let a=new rt(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=WO(r);return e??i}function KO(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return bI(i,i,i,t,r);let o=qK(e);if(o.toRoot())return bI(i,i,new rt([],{}),t,r);let s=GK(o,i,n),a=s.processChildren?kh(s.segmentGroup,s.index,o.commands):QO(s.segmentGroup,s.index,o.commands);return bI(i,s.segmentGroup,a,t,r)}function yy(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Vh(n){return typeof n=="object"&&n!=null&&n.outlets}function bI(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=YO(n,e,t);let a=WO(qO(s));return new jo(a,o,i)}function YO(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=YO(o,e,t)}),new rt(n.segments,r)}var vy=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yy(r[0]))throw new oe(4003,!1);let i=r.find(Vh);if(i&&i!==VO(r))throw new oe(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function qK(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new vy(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new vy(t,e,r)}var Ll=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function GK(n,e,t){if(n.isAbsolute)return new Ll(e,!0,0);if(!t)return new Ll(e,!1,NaN);if(t.parent===null)return new Ll(t,!0,0);let r=yy(n.commands[0])?0:1,i=t.segments.length-1+r;return KK(t,i,n.numberOfDoubleDots)}function KK(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new oe(4005,!1);i=r.segments.length}return new Ll(r,!1,i-o)}function YK(n){return Vh(n[0])?n[0].outlets:{[Re]:n}}function QO(n,e,t){if(n??=new rt([],{}),n.segments.length===0&&n.hasChildren())return kh(n,e,t);let r=QK(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new rt(n.segments.slice(0,r.pathIndex),{});return o.children[Re]=new rt(n.segments.slice(r.pathIndex),n.children),kh(o,0,i)}else return r.match&&i.length===0?new rt(n.segments,{}):r.match&&!n.hasChildren()?DI(n,e,t):r.match?kh(n,0,i):DI(n,e,t)}function kh(n,e,t){if(t.length===0)return new rt(n.segments,{});{let r=YK(t),i={};if(Object.keys(r).some(o=>o!==Re)&&n.children[Re]&&n.numberOfChildren===1&&n.children[Re].segments.length===0){let o=kh(n.children[Re],e,t);return new rt(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QO(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new rt(n.segments,i)}}function QK(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Vh(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!kO(c,l,s))return o;r+=2}else{if(!kO(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function DI(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Vh(o)){let c=XK(o.outlets);return new rt(r,c)}if(i===0&&yy(t[0])){let c=n.segments[e];r.push(new qa(c.path,PO(t[0]))),i++;continue}let s=Vh(o)?o.outlets[Re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&yy(a)?(r.push(new qa(s,PO(a))),i+=2):(r.push(new qa(s,{})),i++)}return new rt(r,{})}function XK(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=DI(new rt([],{}),0,r))}),e}function PO(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function kO(n,e,t){return n==t.path&&Wi(e,t.parameters)}var Nh="imperative",Rn=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Rn||{}),Kr=class{id;url;constructor(e,t){this.id=e,this.url=t}},jh=class extends Kr{type=Rn.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ka=class extends Kr{urlAfterRedirects;type=Rn.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Nr=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Nr||{}),xI=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(xI||{}),Vo=class extends Kr{reason;code;type=Rn.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ya=class extends Kr{reason;code;type=Rn.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},Uh=class extends Kr{error;target;type=Rn.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_y=class extends Kr{urlAfterRedirects;state;type=Rn.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},AI=class extends Kr{urlAfterRedirects;state;type=Rn.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},RI=class extends Kr{urlAfterRedirects;state;shouldActivate;type=Rn.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},MI=class extends Kr{urlAfterRedirects;state;type=Rn.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},PI=class extends Kr{urlAfterRedirects;state;type=Rn.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},kI=class{route;type=Rn.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},NI=class{route;type=Rn.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},OI=class{snapshot;type=Rn.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},FI=class{snapshot;type=Rn.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},LI=class{snapshot;type=Rn.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Bh=class{snapshot;type=Rn.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var $h=class{},Bl=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function JK(n,e){return n.providers&&!n._injector&&(n._injector=GE(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _i(n){return n.outlet||Re}function ZK(n,e){let t=n.filter(r=>_i(r)===e);return t.push(...n.filter(r=>_i(r)!==e)),t}function Kh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var VI=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Kh(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Sy(this.rootInjector)}},Sy=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new VI(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ae(Vn))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),by=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=jI(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=jI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=UI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return UI(e,this._root).map(t=>t.value)}};function jI(n,e){if(n===e.value)return e;for(let t of e.children){let r=jI(n,t);if(r)return r}return null}function UI(n,e){if(n===e.value)return[e];for(let t of e.children){let r=UI(n,t);if(r.length)return r.unshift(e),r}return[]}var kr=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Fl(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var wy=class extends by{snapshot;constructor(e,t){super(e),this.snapshot=t,QI(this,e)}toString(){return this.snapshot.toString()}};function XO(n){let e=e7(n),t=new fn([new qa("",{})]),r=new fn({}),i=new fn({}),o=new fn({}),s=new fn(""),a=new $l(t,r,o,s,i,Re,n,e.root);return a.snapshot=e.root,new wy(new kr(a,[]),e)}function e7(n){let e={},t={},r={},i="",o=new Vl([],e,r,i,t,Re,n,null,{});return new Iy("",new kr(o,[]))}var $l=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(te(l=>l[Gh]))??de(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Ul(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Ul(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ey(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:q(q({},e.params),n.params),data:q(q({},e.data),n.data),resolve:q(q(q(q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:q({},n.params),data:q({},n.data),resolve:q(q({},n.data),n._resolvedData??{})},i&&ZO(i)&&(r.resolve[Gh]=i.title),r}var Vl=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Gh]}constructor(e,t,r,i,o,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ul(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ul(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Iy=class extends by{url;constructor(e,t){super(t),this.url=e,QI(this,t)}toString(){return JO(this._root)}};function QI(n,e){e.value._routerState=n,e.children.forEach(t=>QI(n,t))}function JO(n){let e=n.children.length>0?` { ${n.children.map(JO).join(", ")} } `:"";return`${n.value}${e}`}function wI(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wi(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Wi(e.params,t.params)||n.paramsSubject.next(t.params),DK(e.url,t.url)||n.urlSubject.next(t.url),Wi(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function BI(n,e){let t=Wi(n.params,e.params)&&MK(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||BI(n.parent,e.parent))}function ZO(n){return typeof n.title=="string"||n.title===null}var t7=new K(""),XI=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Re;activateEvents=new Yt;deactivateEvents=new Yt;attachEvents=new Yt;detachEvents=new Yt;routerOutletData=kN(void 0);parentContexts=P(Sy);location=P($a);changeDetector=P(Os);inputBinder=P(JI,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new oe(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new oe(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new oe(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new oe(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new $I(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Bi]})}return n})(),$I=class n{route;childContexts;parent;outletData;__ngOutletInjector(e){return new n(this.route,this.childContexts,e,this.outletData)}constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===$l?this.route:e===Sy?this.childContexts:e===t7?this.outletData:this.parent.get(e,t)}},JI=new K("");function n7(n,e,t){let r=Hh(n,e._root,t?t._root:void 0);return new wy(r,e)}function Hh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=r7(n,e,t);return new kr(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Hh(n,a)),s}}let r=i7(e.value),i=e.children.map(o=>Hh(n,o));return new kr(r,i)}}function r7(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Hh(n,r,i);return Hh(n,r)})}function i7(n){return new $l(new fn(n.url),new fn(n.params),new fn(n.queryParams),new fn(n.fragment),new fn(n.data),n.outlet,n.component,n)}var zh=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},eF="ngNavigationCancelingError";function Cy(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Lh(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=tF(!1,Nr.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function tF(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[eF]=!0,t.cancellationCode=e,t}function o7(n){return nF(n)&&Lh(n.url)}function nF(n){return!!n&&n[eF]}var s7=(n,e,t,r)=>te(i=>(new HI(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),HI=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wI(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Fl(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Fl(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Fl(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Bh(o.value.snapshot))}),e.children.length&&this.forwardEvent(new FI(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(wI(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wI(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Ty=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},jl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function a7(n,e,t){let r=n._root,i=e?e._root:null;return Ph(r,i,t,[r.value])}function c7(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function zl(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Pk(n)?n:e.get(n):r}function Ph(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fl(e);return n.children.forEach(s=>{l7(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Oh(a,t.getContext(s),i)),i}function l7(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=u7(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Ty(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ph(n,e,a?a.children:null,r,i):Ph(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new jl(a.outlet.component,s))}else s&&Oh(e,a,i),i.canActivateChecks.push(new Ty(r)),o.component?Ph(n,null,a?a.children:null,r,i):Ph(n,null,t,r,i);return i}function u7(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ga(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ga(n.url,e.url)||!Wi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!BI(n,e)||!Wi(n.queryParams,e.queryParams);case"paramsChange":default:return!BI(n,e)}}function Oh(n,e,t){let r=Fl(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Oh(s,e.children.getContext(o),t):Oh(s,null,t):Oh(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new jl(e.outlet.component,i)):t.canDeactivateChecks.push(new jl(null,i)):t.canDeactivateChecks.push(new jl(null,i))}function Yh(n){return typeof n=="function"}function d7(n){return typeof n=="boolean"}function h7(n){return n&&Yh(n.canLoad)}function f7(n){return n&&Yh(n.canActivate)}function p7(n){return n&&Yh(n.canActivateChild)}function m7(n){return n&&Yh(n.canDeactivate)}function g7(n){return n&&Yh(n.canMatch)}function rF(n){return n instanceof bo||n?.name==="EmptyError"}var fy=Symbol("INITIAL_VALUE");function Hl(){return pn(n=>xe(n.map(e=>e.pipe(Fi(1),hl(fy)))).pipe(te(e=>{for(let t of e)if(t!==!0){if(t===fy)return fy;if(t===!1||y7(t))return t}return!0}),xn(e=>e!==fy),Fi(1)))}function y7(n){return Lh(n)||n instanceof zh}function v7(n,e){return Kt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?de(fe(q({},t),{guardsResult:!0})):_7(s,r,i,n).pipe(Kt(a=>a&&d7(a)?b7(r,o,n,e):de(a)),te(a=>fe(q({},t),{guardsResult:a})))})}function _7(n,e,t,r){return yt(n).pipe(Kt(i=>T7(i.component,i.route,t,e,r)),Eo(i=>i!==!0,!0))}function b7(n,e,t,r){return yt(e).pipe(wo(i=>ll(E7(i.route.parent,r),w7(i.route,r),C7(n,i.path,t),I7(n,i.route,t))),Eo(i=>i!==!0,!0))}function w7(n,e){return n!==null&&e&&e(new LI(n)),de(!0)}function E7(n,e){return n!==null&&e&&e(new OI(n)),de(!0)}function I7(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return de(!0);let i=r.map(o=>xm(()=>{let s=Kh(e)??t,a=zl(o,s),c=f7(a)?a.canActivate(e,n):An(s,()=>a(e,n));return js(c).pipe(Eo())}));return de(i).pipe(Hl())}function C7(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>c7(s)).filter(s=>s!==null).map(s=>xm(()=>{let a=s.guards.map(c=>{let l=Kh(s.node)??t,u=zl(c,l),h=p7(u)?u.canActivateChild(r,n):An(l,()=>u(r,n));return js(h).pipe(Eo())});return de(a).pipe(Hl())}));return de(o).pipe(Hl())}function T7(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return de(!0);let s=o.map(a=>{let c=Kh(e)??i,l=zl(a,c),u=m7(l)?l.canDeactivate(n,e,t,r):An(c,()=>l(n,e,t,r));return js(u).pipe(Eo())});return de(s).pipe(Hl())}function S7(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return de(!0);let o=i.map(s=>{let a=zl(s,n),c=h7(a)?a.canLoad(e,t):An(n,()=>a(e,t));return js(c)});return de(o).pipe(Hl(),iF(r))}function iF(n){return cm(_n(e=>{if(typeof e!="boolean")throw Cy(n,e)}),te(e=>e===!0))}function D7(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return de(!0);let o=i.map(s=>{let a=zl(s,n),c=g7(a)?a.canMatch(e,t):An(n,()=>a(e,t));return js(c)});return de(o).pipe(Hl(),iF(r))}var Wh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},qh=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function Ol(n){return cl(new Wh(n))}function x7(n){return cl(new oe(4e3,!1))}function A7(n){return cl(tF(!1,Nr.GuardRejected))}var zI=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return de(r);if(i.numberOfChildren>1||!i.children[Re])return x7(`${e.redirectTo}`);i=i.children[Re]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:h,outlet:f,params:p,data:g,title:v}=i,_=An(o,()=>a({params:p,data:g,queryParams:c,fragment:l,routeConfig:u,url:h,outlet:f,title:v}));if(_ instanceof jo)throw new qh(_);t=_}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new qh(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new jo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new rt(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new oe(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},WI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R7(n,e,t,r,i){let o=oF(n,e,t);return o.matched?(r=JK(e,r),D7(r,e,t,i).pipe(te(s=>s===!0?o:q({},WI)))):de(o)}function oF(n,e,t){if(e.path==="**")return M7(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?q({},WI):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||SK)(t,n,e);if(!i)return q({},WI);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?q(q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function M7(n){return{matched:!0,parameters:n.length>0?VO(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function NO(n,e,t,r){return t.length>0&&N7(n,t,r)?{segmentGroup:new rt(e,k7(r,new rt(t,n.children))),slicedSegments:[]}:t.length===0&&O7(n,t,r)?{segmentGroup:new rt(n.segments,P7(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new rt(n.segments,n.children),slicedSegments:t}}function P7(n,e,t,r){let i={};for(let o of t)if(Dy(n,e,o)&&!r[_i(o)]){let s=new rt([],{});i[_i(o)]=s}return q(q({},r),i)}function k7(n,e){let t={};t[Re]=e;for(let r of n)if(r.path===""&&_i(r)!==Re){let i=new rt([],{});t[_i(r)]=i}return t}function N7(n,e,t){return t.some(r=>Dy(n,e,r)&&_i(r)!==Re)}function O7(n,e,t){return t.some(r=>Dy(n,e,r))}function Dy(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function F7(n,e,t){return e.length===0&&!n.children[t]}var qI=class{};function L7(n,e,t,r,i,o,s="emptyOnly"){return new GI(n,e,t,r,i,s,o).recognize()}var V7=31,GI=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new zI(this.urlSerializer,this.urlTree)}noMatchError(e){return new oe(4002,`'${e.segmentGroup}'`)}recognize(){let e=NO(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(({children:t,rootSnapshot:r})=>{let i=new kr(r,t),o=new Iy("",i),s=WK(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Vl([],Object.freeze({}),Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Re,t).pipe(te(r=>({children:r,rootSnapshot:t})),Is(r=>{if(r instanceof qh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Wh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(te(s=>s instanceof kr?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return yt(o).pipe(wo(s=>{let a=r.children[s],c=ZK(t,s);return this.processSegmentGroup(e,c,a,s,i)}),Mm((s,a)=>(s.push(...a),s)),Cs(null),iw(),Kt(s=>{if(s===null)return Ol(r);let a=sF(s);return j7(a),de(a)}))}processSegment(e,t,r,i,o,s,a){return yt(t).pipe(wo(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(Is(l=>{if(l instanceof Wh)return de(null);throw l}))),Eo(c=>!!c),Is(c=>{if(rF(c))return F7(r,i,o)?de(new qI):Ol(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return _i(r)!==s&&(s===Re||!Dy(i,o,r))?Ol(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):Ol(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:h,remainingSegments:f}=oF(t,i,o);if(!c)return Ol(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>V7&&(this.allowRedirects=!1));let p=new Vl(o,l,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,OO(i),_i(i),i.component??i._loadedComponent??null,i,FO(i)),g=Ey(p,a,this.paramsInheritanceStrategy);p.params=Object.freeze(g.params),p.data=Object.freeze(g.data);let v=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,h,p,e);return this.applyRedirects.lineralizeSegments(i,v).pipe(Kt(_=>this.processSegment(e,r,t,_.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=R7(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(pn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(pn(({routes:l})=>{let u=r._loadedInjector??e,{parameters:h,consumedSegments:f,remainingSegments:p}=c,g=new Vl(f,h,Object.freeze(q({},this.urlTree.queryParams)),this.urlTree.fragment,OO(r),_i(r),r.component??r._loadedComponent??null,r,FO(r)),v=Ey(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(v.params),g.data=Object.freeze(v.data);let{segmentGroup:_,slicedSegments:D}=NO(t,f,p,l);if(D.length===0&&_.hasChildren())return this.processChildren(u,l,_,g).pipe(te(F=>new kr(g,F)));if(l.length===0&&D.length===0)return de(new kr(g,[]));let R=_i(r)===o;return this.processSegment(u,l,_,D,R?Re:o,!0,g).pipe(te(F=>new kr(g,F instanceof kr?[F]:[])))}))):Ol(t)))}getChildConfig(e,t,r){return t.children?de({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?de({routes:t._loadedRoutes,injector:t._loadedInjector}):S7(e,t,r,this.urlSerializer).pipe(Kt(i=>i?this.configLoader.loadChildren(e,t).pipe(_n(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):A7(t))):de({routes:[],injector:e})}};function j7(n){n.sort((e,t)=>e.value.outlet===Re?-1:t.value.outlet===Re?1:e.value.outlet.localeCompare(t.value.outlet))}function U7(n){let e=n.value.routeConfig;return e&&e.path===""}function sF(n){let e=[],t=new Set;for(let r of n){if(!U7(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=sF(r.children);e.push(new kr(r.value,i))}return e.filter(r=>!t.has(r))}function OO(n){return n.data||{}}function FO(n){return n.resolve||{}}function B7(n,e,t,r,i,o){return Kt(s=>L7(n,e,t,r,s.extractedUrl,i,o).pipe(te(({state:a,tree:c})=>fe(q({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function $7(n,e){return Kt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return de(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of aF(c))s.add(l);let a=0;return yt(s).pipe(wo(c=>o.has(c)?H7(c,r,n,e):(c.data=Ey(c,c.parent,n).resolve,de(void 0))),_n(()=>a++),dl(1),Kt(c=>a===s.size?de(t):xr))})}function aF(n){let e=n.children.map(t=>aF(t)).flat();return[n,...e]}function H7(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ZO(i)&&(o[Gh]=i.title),z7(o,n,e,r).pipe(te(s=>(n._resolvedData=s,n.data=Ey(n,n.parent,t).resolve,null)))}function z7(n,e,t,r){let i=CI(n);if(i.length===0)return de({});let o={};return yt(i).pipe(Kt(s=>W7(n[s],e,t,r).pipe(Eo(),_n(a=>{if(a instanceof zh)throw Cy(new Fh,a);o[s]=a}))),dl(1),te(()=>o),Is(s=>rF(s)?xr:cl(s)))}function W7(n,e,t,r){let i=Kh(e)??r,o=zl(n,i),s=o.resolve?o.resolve(e,t):An(i,()=>o(e,t));return js(s)}function EI(n){return pn(e=>{let t=n(e);return t?yt(t).pipe(te(()=>e)):de(e)})}var cF=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Re);return r}getResolvedTitleForRoute(t){return t.data[Gh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>P(q7),providedIn:"root"})}return n})(),q7=(()=>{class n extends cF{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ae(dy))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ZI=new K("",{providedIn:"root",factory:()=>({})}),eC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=be({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&le(0,"router-outlet")},dependencies:[XI],encapsulation:2})}return n})();function tC(n){let e=n.children&&n.children.map(tC),t=e?fe(q({},n),{children:e}):q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Re&&(t.component=eC),t}var nC=new K(""),G7=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(ZE);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return de(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=js(t.loadComponent()).pipe(te(lF),_n(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Da(()=>{this.componentLoaders.delete(t)})),i=new rl(r,()=>new Ct).pipe(nl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return de({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=K7(r,this.compiler,t,this.onLoadEndListener).pipe(Da(()=>{this.childrenLoaders.delete(r)})),s=new rl(o,()=>new Ct).pipe(nl());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function K7(n,e,t,r){return js(n.loadChildren()).pipe(te(lF),Kt(i=>i instanceof ph||Array.isArray(i)?de(i):yt(e.compileModuleAsync(i))),te(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(nC,[],{optional:!0,self:!0}).flat()),{routes:s.map(tC),injector:o}}))}function Y7(n){return n&&typeof n=="object"&&"default"in n}function lF(n){return Y7(n)?n.default:n}var rC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>P(Q7),providedIn:"root"})}return n})(),Q7=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),X7=new K("");var J7=new K(""),Z7=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new Ct;transitionAbortSubject=new Ct;configLoader=P(G7);environmentInjector=P(Vn);urlSerializer=P(YI);rootContexts=P(Sy);location=P(Ih);inputBindingEnabled=P(JI,{optional:!0})!==null;titleStrategy=P(cF);options=P(ZI,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(rC);createViewTransition=P(X7,{optional:!0});navigationErrorHandler=P(J7,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>de(void 0);rootComponentType=null;constructor(){let t=i=>this.events.next(new kI(i)),r=i=>this.events.next(new NI(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(q(q({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new fn({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Nh,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(xn(o=>o.id!==0),te(o=>fe(q({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),pn(o=>{let s=!1,a=!1;return de(o).pipe(pn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Nr.SupersededByNewNavigation),xr;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?fe(q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let h="";return this.events.next(new Ya(c.id,this.urlSerializer.serialize(c.rawUrl),h,xI.IgnoredSameUrlNavigation)),c.resolve(!1),xr}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return de(c).pipe(pn(h=>{let f=this.transitions?.getValue();return this.events.next(new jh(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?xr:Promise.resolve(h)}),B7(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),_n(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=fe(q({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new _y(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:g,extras:v}=c,_=new jh(h,this.urlSerializer.serialize(f),p,g);this.events.next(_);let D=XO(this.rootComponentType).snapshot;return this.currentTransition=o=fe(q({},c),{targetSnapshot:D,urlAfterRedirects:f,extras:fe(q({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,de(o)}else{let h="";return this.events.next(new Ya(c.id,this.urlSerializer.serialize(c.extractedUrl),h,xI.IgnoredByUrlHandlingStrategy)),c.resolve(!1),xr}}),_n(c=>{let l=new AI(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),te(c=>(this.currentTransition=o=fe(q({},c),{guards:a7(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),v7(this.environmentInjector,c=>this.events.next(c)),_n(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Cy(this.urlSerializer,c.guardsResult);let l=new RI(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),xn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Nr.GuardRejected),!1)),EI(c=>{if(c.guards.canActivateChecks.length)return de(c).pipe(_n(l=>{let u=new MI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),pn(l=>{let u=!1;return de(l).pipe($7(this.paramsInheritanceStrategy,this.environmentInjector),_n({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",Nr.NoDataFromResolver)}}))}),_n(l=>{let u=new PI(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),EI(c=>{let l=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(_n(f=>{u.component=f}),te(()=>{})));for(let f of u.children)h.push(...l(f));return h};return xe(l(c.targetSnapshot.root)).pipe(Cs(null),Fi(1))}),EI(()=>this.afterPreactivation()),pn(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?yt(u).pipe(te(()=>o)):de(o)}),te(c=>{let l=n7(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=fe(q({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),_n(()=>{this.events.next(new $h)}),s7(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Fi(1),_n({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ka(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),vn(this.transitionAbortSubject.pipe(_n(c=>{throw c}))),Da(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",Nr.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Is(c=>{if(a=!0,nF(c))this.events.next(new Vo(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),o7(c)?this.events.next(new Bl(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let l=new Uh(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let u=An(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof zh){let{message:h,cancellationCode:f}=Cy(this.urlSerializer,u);this.events.next(new Vo(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new Bl(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(l),c}catch(u){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(u)}}return xr}))}))}cancelNavigationTransition(t,r,i){let o=new Vo(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function eY(n){return n!==Nh}var tY=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>P(nY),providedIn:"root"})}return n})(),KI=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},nY=(()=>{class n extends KI{static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),uF=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:()=>P(rY),providedIn:"root"})}return n})(),rY=(()=>{class n extends uF{location=P(Ih);urlSerializer=P(YI);options=P(ZI,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";urlHandlingStrategy=P(rC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new jo;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}routerState=XO(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof jh)this.stateMemento=this.createStateMemento();else if(t instanceof Ya)this.rawUrlTree=r.initialUrl;else if(t instanceof _y){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof $h?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Vo&&(t.code===Nr.GuardRejected||t.code===Nr.NoDataFromResolver)?this.restoreHistory(r):t instanceof Uh?this.restoreHistory(r,!0):t instanceof Ka&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof jo?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=q(q({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=q(q({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function iY(n,e){n.events.pipe(xn(t=>t instanceof Ka||t instanceof Vo||t instanceof Uh||t instanceof Ya),te(t=>t instanceof Ka||t instanceof Ya?0:(t instanceof Vo?t.code===Nr.Redirect||t.code===Nr.SupersededByNewNavigation:!1)?2:1),xn(t=>t!==2),Fi(1)).subscribe(()=>{e()})}var oY={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},xy=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(YE);stateManager=P(uF);options=P(ZI,{optional:!0})||{};pendingTasks=P($i);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(Z7);urlSerializer=P(YI);location=P(Ih);urlHandlingStrategy=P(rC);_events=new Ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(tY);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(nC,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(JI,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new $t;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Vo&&r.code!==Nr.Redirect&&r.code!==Nr.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ka)this.navigated=!0;else if(r instanceof Bl){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||eY(i.source)},s);this.scheduleNavigation(a,Nh,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}cY(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Nh,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(tC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=q(q({},this.currentUrlTree.queryParams),o);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=o||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=GO(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),h=this.currentUrlTree.root}return KO(h,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Lh(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Nh,null,r)}navigate(t,r={skipLocationChange:!1}){return aY(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=q({},oY):r===!1?i=q({},sY):i=r,Lh(t))return RO(this.currentUrlTree,t,i);let o=this.parseUrl(t);return RO(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((h,f)=>{a=h,c=f});let u=this.pendingTasks.add();return iY(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function aY(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new oe(4008,!1)}function cY(n){return!(n instanceof $h)&&!(n instanceof Bl)}var lY=new K("");function dF(n,...e){return vt([{provide:nC,multi:!0,useValue:n},[],{provide:$l,useFactory:uY,deps:[xy]},{provide:Ug,multi:!0,useFactory:dY},e.map(t=>t.\u0275providers)])}function uY(n){return n.routerState.root}function dY(){let n=P(Ne);return e=>{let t=n.get(So);if(e!==t.components[0])return;let r=n.get(xy),i=n.get(hY);n.get(fY)===1&&r.initialNavigation(),n.get(pY,null,ke.Optional)?.setUpPreloading(),n.get(lY,null,ke.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var hY=new K("",{factory:()=>new Ct}),fY=new K("",{providedIn:"root",factory:()=>1});var pY=new K("");var hF=[];var gY="firebase",yY="11.2.0";ce(gY,yY,"app");function Be(n){n||(xl(Be),n=P(Mo));let e=new ye(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(vn(e))}function se(n,e){!e?.injector&&xl(se);let t=e?.injector??P(Ne),r=new Jd(1),i=Mr(()=>{let o;try{o=n()}catch(s){qr(()=>r.error(s));return}qr(()=>r.next(o))},{injector:t,manualCleanup:!0});return t.get(Mo).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}function iC(n){n===void 0&&(xl(iC),n=P(Ne));let e=n.get(Ag);return t=>new ye(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var xt=new Do("ANGULARFIRE2_VERSION");function mn(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var tn=(n,e)=>{let t=e?[e]:Jp(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Wl=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Wl||{}),fF=eI()&&typeof Zone<"u"?Wl.WARN:Wl.SILENT;var Ay=class{zone;delegate;constructor(e,t=Xb){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Wt=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=P(pe);this.outsideAngular=t.runOutsideAngular(()=>new Ay(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Ay(typeof Zone>"u"?void 0:Zone.current,al))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pF=!1;function vY(n,e){!pF&&(fF>Wl.SILENT||eI())&&(pF=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),fF>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function _Y(n){let e=P(pe,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Qa(n){let e=P(pe,{optional:!0});return e?e.run(()=>n()):n()}var bY=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),An(t,()=>Qa(()=>n.apply(void 0,r)))),tt=(n,e,t)=>(t||=e?Wl.WARN:Wl.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=P(Wt),s=P(Ag),a=P(Vn)}catch{return vY(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=Qa(()=>s.add())),i[l]=bY(i[l],r,a));let c=_Y(()=>n.apply(this,i));return e?c instanceof ye?c.pipe(Es(o.outsideAngular),ws(o.insideAngular),iC(a)):c instanceof Promise?Qa(()=>new Promise((l,u)=>{s.run(()=>c).then(h=>An(a,()=>Qa(()=>l(h))),h=>An(a,()=>Qa(()=>u(h))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Qa(()=>c):c instanceof ye?c.pipe(Es(o.outsideAngular),ws(o.insideAngular)):Qa(()=>c)});var kt=class{constructor(e){return e}},Jt=class{constructor(){return Jp()}};function wY(n){return n&&n.length===1?n[0]:new kt(dn())}var oC=new K("angularfire2._apps"),EY={provide:kt,useFactory:wY,deps:[[new Ae,oC]]},IY={provide:Jt,deps:[[new Ae,oC]]};function CY(n){return(e,t)=>{let r=t.get(zt);ce("angularfire",xt.full,"core"),ce("angularfire",xt.full,"app"),ce("angular",j1.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new kt(i)}}function mF(n,...e){return vt([EY,IY,{provide:oC,useFactory:CY(n),multi:!0,deps:[pe,Ne,Wt,...e]}])}var gF=tt(rP,!0);var TY=new Map,SY={activated:!1,tokenObservers:[]},DY={initialized:!1,enabled:!1};function bi(n){return TY.get(n)||Object.assign({},SY)}function wF(){return DY}var xY="https://content-firebaseappcheck.googleapis.com/v1";var AY="exchangeDebugToken",yF={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},dTe=24*60*60*1e3;var aC=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return I(this,null,function*(){this.stop();try{this.pending=new Wc,this.pending.promise.catch(t=>{}),yield RY(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Wc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function RY(n){return new Promise(e=>{setTimeout(e,n)})}var MY={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Us=new jr("appCheck","AppCheck",MY);function EF(n){if(!bi(n).activated)throw Us.create("use-before-activation",{appName:n.name})}function IF(r,i){return I(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let p=yield s.getHeartbeatsHeader();p&&(o["X-Firebase-Client"]=p)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(p){throw Us.create("fetch-network-error",{originalErrorMessage:p?.message})}if(c.status!==200)throw Us.create("fetch-status-error",{httpStatus:c.status});let l;try{l=yield c.json()}catch(p){throw Us.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=l.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Us.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let h=Number(u[1])*1e3,f=Date.now();return{token:l.token,expireTimeMillis:f+h,issuedAtTimeMillis:f}})}function CF(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${xY}/projects/${t}/apps/${r}:${AY}?key=${i}`,body:{debug_token:e}}}var PY="firebase-app-check-database",kY=1,cC="firebase-app-check-store";var Ry=null;function NY(){return Ry||(Ry=new Promise((n,e)=>{try{let t=indexedDB.open(PY,kY);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Us.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(cC,{keyPath:"compositeKey"})}}}catch(t){e(Us.create("storage-open",{originalErrorMessage:t?.message}))}}),Ry)}function OY(n,e){return FY(LY(n),e)}function FY(n,e){return I(this,null,function*(){let r=(yield NY()).transaction(cC,"readwrite"),o=r.objectStore(cC).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var l;a(Us.create("storage-set",{originalErrorMessage:(l=c.target.error)===null||l===void 0?void 0:l.message}))}})})}function LY(n){return`${n.options.appId}-${n.name}`}var lC=new Ur("@firebase/app-check");function sC(n,e){return Ni()?OY(n,e).catch(t=>{lC.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function TF(){return wF().enabled}function SF(){return I(this,null,function*(){let n=wF();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var VY={error:"UNKNOWN_ERROR"};function jY(n){return Kp.encodeString(JSON.stringify(n),!1)}function uC(n,e=!1){return I(this,null,function*(){let t=n.app;EF(t);let r=bi(t),i=r.token,o;if(i&&!Qh(i)&&(r.token=void 0,i=void 0),!i){let c=yield r.cachedTokenPromise;c&&(Qh(c)?i=c:yield sC(t,void 0))}if(!e&&i&&Qh(i))return{token:i.token};let s=!1;if(TF()){r.exchangeTokenPromise||(r.exchangeTokenPromise=IF(CF(t,yield SF()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let c=yield r.exchangeTokenPromise;return yield sC(t,c),r.token=c,{token:c.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield bi(t).exchangeTokenPromise}catch(c){c.code==="appCheck/throttled"?lC.warn(c.message):lC.error(c),o=c}let a;return i?o?Qh(i)?a={token:i.token,internalError:o}:a=_F(o):(a={token:i.token},r.token=i,yield sC(t,i)):a=_F(o),s&&HY(t,a),a})}function UY(n){return I(this,null,function*(){let e=n.app;EF(e);let{provider:t}=bi(e);if(TF()){let r=yield SF(),{token:i}=yield IF(CF(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function BY(n,e,t,r){let{app:i}=n,o=bi(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Qh(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),vF(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>vF(n))}function DF(n,e){let t=bi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function vF(n){let{app:e}=n,t=bi(e),r=t.tokenRefresher;r||(r=$Y(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function $Y(n){let{app:e}=n;return new aC(()=>I(this,null,function*(){let t=bi(e),r;if(t.token?r=yield uC(n,!0):r=yield uC(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},yF.RETRIAL_MIN_WAIT,yF.RETRIAL_MAX_WAIT)}function HY(n,e){let t=bi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Qh(n){return n.expireTimeMillis-Date.now()>0}function _F(n){return{token:jY(VY),error:n}}var dC=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=bi(this.app);for(let t of e)DF(this.app,t.next);return Promise.resolve()}};function zY(n,e){return new dC(n,e)}function WY(n){return{getToken:e=>uC(n,e),getLimitedUseToken:()=>UY(n),addTokenListener:e=>BY(n,"INTERNAL",e),removeTokenListener:e=>DF(n.app,e)}}var qY="@firebase/app-check",GY="0.8.11";var KY="app-check",bF="app-check-internal";function YY(){Bt(new Ut(KY,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return zY(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(bF).initialize()})),Bt(new Ut(bF,n=>{let e=n.getProvider("app-check").getImmediate();return WY(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),ce(qY,GY)}YY();var QY="app-check";var Yr=class{constructor(){return tn(QY)}};var XY=["localhost","0.0.0.0","127.0.0.1"],CTe=typeof window<"u"&&XY.includes(window.location.hostname);function $F(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var HF=$F,zF=new jr("auth","Firebase",$F());var Fy=new Ur("@firebase/auth");function JY(n,...e){Fy.logLevel<=Dn.WARN&&Fy.warn(`Auth (${cr}): ${n}`,...e)}function Py(n,...e){Fy.logLevel<=Dn.ERROR&&Fy.error(`Auth (${cr}): ${n}`,...e)}function $s(n,...e){throw MC(n,...e)}function Ja(n,...e){return MC(n,...e)}function WF(n,e,t){let r=Object.assign(Object.assign({},HF()),{[e]:t});return new jr("auth","Firebase",r).create(e,{appName:n.name})}function Xa(n){return WF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MC(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zF.create(n,...e)}function _e(n,e,...t){if(!n)throw MC(e,...t)}function Uo(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Py(e),new Error(e)}function Hs(n,e){n||Uo(e)}function mC(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function ZY(){return xF()==="http:"||xF()==="https:"}function xF(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function eQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZY()||jd()||"connection"in navigator)?navigator.onLine:!0}function tQ(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Za=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hs(t>e,"Short delay should be less than long delay!"),this.isMobile=Vd()||Yp()}get(){return eQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function PC(n,e){Hs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ly=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Uo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Uo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Uo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var nQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rQ=new Za(3e4,6e4);function kC(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Gl(o,s,a,c){return I(this,arguments,function*(n,e,t,r,i={}){return qF(n,i,()=>I(this,null,function*(){let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});let h=wa(Object.assign({key:n.config.apiKey},u)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let p=Object.assign({method:e,headers:f},l);return KM()||(p.referrerPolicy="no-referrer"),Ly.fetch()(GF(n,n.config.apiHost,t,h),p)}))})}function qF(n,e,t){return I(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},nQ),e);try{let i=new gC(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw My(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw My(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw My(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw My(n,"user-disabled",s);let u=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw WF(n,u,l);$s(n,u)}}catch(i){if(i instanceof Dr)throw i;$s(n,"network-request-failed",{message:String(i)})}})}function iQ(o,s,a,c){return I(this,arguments,function*(n,e,t,r,i={}){let l=yield Gl(n,e,t,r,i);return"mfaPendingCredential"in l&&$s(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function GF(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?PC(n.config,i):`${n.config.apiScheme}://${i}`}var gC=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ja(this.auth,"network-request-failed")),rQ.get())})}};function My(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ja(n,e,r);return i.customData._tokenResponse=t,i}function oQ(n,e){return I(this,null,function*(){return Gl(n,"POST","/v1/accounts:delete",e)})}function KF(n,e){return I(this,null,function*(){return Gl(n,"POST","/v1/accounts:lookup",e)})}function Xh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function NC(n,e=!1){return I(this,null,function*(){let t=Ye(n),r=yield t.getIdToken(e),i=OC(r);_e(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Xh(hC(i.auth_time)),issuedAtTime:Xh(hC(i.iat)),expirationTime:Xh(hC(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function hC(n){return Number(n)*1e3}function OC(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Py("JWT malformed, contained fewer than 3 sections"),null;try{let i=WM(t);return i?JSON.parse(i):(Py("Failed to decode base64 JWT payload"),null)}catch(i){return Py("Caught error parsing JWT payload as JSON",i?.toString()),null}}function AF(n){let e=OC(n);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Zh(n,e,t=!1){return I(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Dr&&sQ(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function sQ({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var yC=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),t)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ef=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xh(this.lastLoginAt),this.creationTime=Xh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Vy(n){return I(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Zh(n,KF(t,{idToken:r}));_e(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?YF(o.providerUserInfo):[],a=aQ(n.providerData,s),c=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,u=c?l:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new ef(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(n,h)})}function FC(n){return I(this,null,function*(){let e=Ye(n);yield Vy(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function aQ(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YF(n){return n.map(e=>{var{providerId:t}=e,r=Jb(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function cQ(n,e){return I(this,null,function*(){let t=yield qF(n,{},()=>I(this,null,function*(){let r=wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=GF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Ly.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function lQ(n,e){return I(this,null,function*(){return Gl(n,"POST","/v2/accounts:revokeToken",kC(n,e))})}var Jh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):AF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");let t=AF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return I(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield cQ(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(_e(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(_e(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(_e(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Uo("not implemented")}};function Bs(n,e){_e(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ql=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Jb(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ef(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let t=yield Zh(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return NC(this,e)}reload(){return FC(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Vy(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(_o(this.auth.app))return Promise.reject(Xa(this.auth));let e=yield this.getIdToken();return yield Zh(this,oQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,l,u;let h=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,p=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=t.photoURL)!==null&&s!==void 0?s:void 0,v=(a=t.tenantId)!==null&&a!==void 0?a:void 0,_=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,D=(l=t.createdAt)!==null&&l!==void 0?l:void 0,R=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:F,emailVerified:V,isAnonymous:U,providerData:j,stsTokenManager:T}=t;_e(F&&T,e,"internal-error");let b=Jh.fromJSON(this.name,T);_e(typeof F=="string",e,"internal-error"),Bs(h,e.name),Bs(f,e.name),_e(typeof V=="boolean",e,"internal-error"),_e(typeof U=="boolean",e,"internal-error"),Bs(p,e.name),Bs(g,e.name),Bs(v,e.name),Bs(_,e.name),Bs(D,e.name),Bs(R,e.name);let E=new n({uid:F,auth:e,email:f,emailVerified:V,displayName:h,isAnonymous:U,photoURL:g,phoneNumber:p,tenantId:v,stsTokenManager:b,createdAt:D,lastLoginAt:R});return j&&Array.isArray(j)&&(E.providerData=j.map(x=>Object.assign({},x))),_&&(E._redirectEventId=_),E}static _fromIdTokenResponse(e,t,r=!1){return I(this,null,function*(){let i=new Jh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Vy(o),o})}static _fromGetAccountInfoResponse(e,t,r){return I(this,null,function*(){let i=t.users[0];_e(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?YF(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Jh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ef(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,l),c})}};var RF=new Map;function Bo(n){Hs(n instanceof Function,"Expected a class definition");let e=RF.get(n);return e?(Hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,RF.set(n,e),e)}var uQ=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(t,r){return I(this,null,function*(){this.storage[t]=r})}_get(t){return I(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return I(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),vC=uQ;function ky(n,e,t){return`firebase:${n}:${e}:${t}`}var jy=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=ky(this.userKey,i.apiKey,o),this.fullPersistenceKey=ky("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ql._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return I(this,null,function*(){if(!t.length)return new n(Bo(vC),e,r);let i=(yield Promise.all(t.map(l=>I(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),o=i[0]||Bo(vC),s=ky(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let u=yield l._get(s);if(u){let h=ql._fromJSON(e,u);l!==o&&(a=h),o=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(l=>I(this,null,function*(){if(l!==o)try{yield l._remove(s)}catch{}}))),new n(o,e,r))})}};function MF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tL(e))return"Blackberry";if(nL(e))return"Webos";if(XF(e))return"Safari";if((e.includes("chrome/")||JF(e))&&!e.includes("edge/"))return"Chrome";if(eL(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function QF(n=Fn()){return/firefox\//i.test(n)}function XF(n=Fn()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JF(n=Fn()){return/crios\//i.test(n)}function ZF(n=Fn()){return/iemobile/i.test(n)}function eL(n=Fn()){return/android/i.test(n)}function tL(n=Fn()){return/blackberry/i.test(n)}function nL(n=Fn()){return/webos/i.test(n)}function LC(n=Fn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function dQ(n=Fn()){var e;return LC(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function hQ(){return YM()&&document.documentMode===10}function rL(n=Fn()){return LC(n)||eL(n)||nL(n)||tL(n)||/windows phone/i.test(n)||ZF(n)}function iL(n,e=[]){let t;switch(n){case"Browser":t=MF(Fn());break;case"Worker":t=`${MF(Fn())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cr}/${r}`}var _C=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function fQ(t){return I(this,arguments,function*(n,e={}){return Gl(n,"GET","/v2/passwordPolicy",kC(n,e))})}var pQ=6,bC=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:pQ,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var wC=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Uy(this),this.idTokenSubscription=new Uy(this),this.beforeStateQueue=new _C(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Bo(t)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield jy.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let t=yield KF(this,{idToken:e}),r=yield ql._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var t;if(_o(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield Vy(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=tQ()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(_o(this.app))return Promise.reject(Xa(this));let t=e?Ye(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return I(this,null,function*(){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return _o(this.app)?Promise.reject(Xa(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return _o(this.app)?Promise.reject(Xa(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(Bo(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield fQ(this),t=new bC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new jr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield lQ(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Bo(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=yield jy.create(this,[Bo(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=iL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return I(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&JY(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function VC(n){return Ye(n)}var Uy=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=eP(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var jC={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mQ(n){jC=n}function gQ(n){return jC.loadJS(n)}function yQ(){return jC.gapiScript}function oL(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function UC(n,e){let t=un(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Hd(o,e??{}))return i;$s(i,"already-initialized")}return t.initialize({options:e})}function vQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Bo);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function BC(n,e,t){let r=VC(n);_e(r._canInitEmulator,r,"emulator-config-failed"),_e(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=sL(e),{host:s,port:a}=_Q(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${o}//${s}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||bQ()}function sL(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function _Q(n){let e=sL(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:PF(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:PF(s)}}}function PF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bQ(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var By=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Uo("not implemented")}_getIdTokenResponse(e){return Uo("not implemented")}_linkToIdToken(e,t){return Uo("not implemented")}_getReauthenticationResolver(e){return Uo("not implemented")}};function fC(n,e){return I(this,null,function*(){return iQ(n,"POST","/v1/accounts:signInWithIdp",kC(n,e))})}var $y=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var EC=class extends $y{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var tf=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return I(this,null,function*(){let o=yield ql._fromIdTokenResponse(e,r,i),s=kF(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=kF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function kF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var IC=class n extends Dr{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function aL(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?IC._fromErrorAndOperation(n,o,e,r):o})}function wQ(n,e,t=!1){return I(this,null,function*(){let r=yield Zh(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return tf._forOperation(n,"link",r)})}function EQ(n,e,t=!1){return I(this,null,function*(){let{auth:r}=n;if(_o(r.app))return Promise.reject(Xa(r));let i="reauthenticate";try{let o=yield Zh(n,aL(r,i,e,n),t);_e(o.idToken,r,"internal-error");let s=OC(o.idToken);_e(s,r,"internal-error");let{sub:a}=s;return _e(n.uid===a,r,"user-mismatch"),tf._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&$s(r,"user-mismatch"),o}})}function IQ(n,e,t=!1){return I(this,null,function*(){if(_o(n.app))return Promise.reject(Xa(n));let r="signIn",i=yield aL(n,r,e),o=yield tf._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Gy(n,e,t,r){return Ye(n).onIdTokenChanged(e,t,r)}function $C(n,e,t){return Ye(n).beforeAuthStateChanged(e,t)}function Ky(n,e,t,r){return Ye(n).onAuthStateChanged(e,t,r)}var Hy="__sak";var zy=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Hy,"1"),this.storage.removeItem(Hy),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var CQ=1e3,TQ=10,SQ=(()=>{class n extends zy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rL(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);hQ()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,TQ):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},CQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return I(this,null,function*(){yield vs(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return I(this,null,function*(){let r=yield vs(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return I(this,null,function*(){yield vs(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),cL=SQ;var DQ=(()=>{class n extends zy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),HC=DQ;function xQ(n){return Promise.all(n.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var AQ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return I(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(u=>I(this,null,function*(){return u(r.origin,s)})),l=yield xQ(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function lL(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var CC=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let l=lL("",20);i.port1.start();let u=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(h){let f=h;if(f.data.eventId===l)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(u),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function qi(){return window}function RQ(n){qi().location.href=n}function uL(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}function MQ(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function PQ(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function kQ(){return uL()?self:null}var dL="firebaseLocalStorageDb",NQ=1,Wy="firebaseLocalStorage",hL="fbase_key",ec=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Yy(n,e){return n.transaction([Wy],e?"readwrite":"readonly").objectStore(Wy)}function OQ(){let n=indexedDB.deleteDatabase(dL);return new ec(n).toPromise()}function TC(){let n=indexedDB.open(dL,NQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Wy,{keyPath:hL})}catch(i){t(i)}}),n.addEventListener("success",()=>I(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Wy)?e(r):(r.close(),yield OQ(),e(yield TC()))}))})}function NF(n,e,t){return I(this,null,function*(){let r=Yy(n,!0).put({[hL]:e,value:t});return new ec(r).toPromise()})}function FQ(n,e){return I(this,null,function*(){let t=Yy(n,!1).get(e),r=yield new ec(t).toPromise();return r===void 0?null:r.value})}function OF(n,e){let t=Yy(n,!0).delete(e);return new ec(t).toPromise()}var LQ=800,VQ=3,jQ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield TC(),this.db)})}_withRetries(t){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>VQ)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return uL()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=AQ._getInstance(kQ()),this.receiver._subscribe("keyChanged",(t,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var t,r;if(this.activeServiceWorker=yield MQ(),!this.activeServiceWorker)return;this.sender=new CC(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||PQ()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let t=yield TC();return yield NF(t,Hy,"1"),yield OF(t,Hy),!0}catch{}return!1})}_withPendingWrite(t){return I(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>NF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return I(this,null,function*(){let r=yield this._withRetries(i=>FQ(i,t));return this.localCache[t]=r,r})}_remove(t){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>OF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return I(this,null,function*(){let t=yield this._withRetries(o=>{let s=Yy(o,!1).getAll();return new ec(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),LQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),fL=jQ;var NTe=oL("rcb"),OTe=new Za(3e4,6e4);function UQ(n,e){return e?Bo(e):(_e(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var nf=class extends By{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fC(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fC(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fC(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function BQ(n){return IQ(n.auth,new nf(n),n.bypassAuthState)}function $Q(n){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),EQ(t,new nf(n),n.bypassAuthState)}function HQ(n){return I(this,null,function*(){let{auth:e,user:t}=n;return _e(t,e,"internal-error"),wQ(t,new nf(n),n.bypassAuthState)})}var SC=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BQ;case"linkViaPopup":case"linkViaRedirect":return HQ;case"reauthViaPopup":case"reauthViaRedirect":return $Q;default:$s(this.auth,"internal-error")}}resolve(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var FTe=new Za(2e3,1e4);var zQ="pendingRedirect",Ny=new Map,DC=class n extends SC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=Ny.get(this.auth._key());if(!e){try{let r=(yield WQ(this.resolver,this.auth))?yield vs(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ny.set(this.auth._key(),e)}return this.bypassAuthState||Ny.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return vs(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,vs(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function WQ(n,e){return I(this,null,function*(){let t=KQ(e),r=GQ(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function qQ(n,e){Ny.set(n._key(),e)}function GQ(n){return Bo(n._redirectPersistence)}function KQ(n){return ky(zQ,n.config.apiKey,n.name)}function YQ(n,e,t=!1){return I(this,null,function*(){if(_o(n.app))return Promise.reject(Xa(n));let r=VC(n),i=UQ(r,e),s=yield new DC(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var QQ=10*60*1e3,xC=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XQ(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!pL(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ja(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=QQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(FF(e))}saveEventToCache(e){this.cachedEventUids.add(FF(e)),this.lastProcessedEventTime=Date.now()}};function FF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function pL({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function XQ(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return pL(n);default:return!1}}function JQ(t){return I(this,arguments,function*(n,e={}){return Gl(n,"GET","/v1/projects",e)})}var ZQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eX=/^https?/;function tX(n){return I(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield JQ(n);for(let t of e)try{if(nX(t))return}catch{}$s(n,"unauthorized-domain")})}function nX(n){let e=mC(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!eX.test(t))return!1;if(ZQ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var rX=new Za(3e4,6e4);function LF(){let n=qi().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function iX(n){return new Promise((e,t)=>{var r,i,o;function s(){LF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{LF(),t(Ja(n,"network-request-failed"))},timeout:rX.get()})}if(!((i=(r=qi().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=qi().gapi)===null||o===void 0)&&o.load)s();else{let a=oL("iframefcb");return qi()[a]=()=>{gapi.load?s():t(Ja(n,"network-request-failed"))},gQ(`${yQ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Oy=null,e})}var Oy=null;function oX(n){return Oy=Oy||iX(n),Oy}var sX=new Za(5e3,15e3),aX="__/auth/iframe",cX="emulator/auth/iframe",lX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dX(n){let e=n.config;_e(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?PC(e,cX):`https://${n.config.authDomain}/${aX}`,r={apiKey:e.apiKey,appName:n.name,v:cr},i=uX.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${wa(r).slice(1)}`}function hX(n){return I(this,null,function*(){let e=yield oX(n),t=qi().gapi;return _e(t,n,"internal-error"),e.open({where:document.body,url:dX(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lX,dontclear:!0},r=>new Promise((i,o)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Ja(n,"network-request-failed"),a=qi().setTimeout(()=>{o(s)},sX.get());function c(){qi().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var fX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pX=500,mX=600,gX="_blank",yX="http://localhost",qy=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vX(n,e,t,r=pX,i=mX){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},fX),{width:r.toString(),height:i.toString(),top:o,left:s}),l=Fn().toLowerCase();t&&(a=JF(l)?gX:t),QF(l)&&(e=e||yX,c.scrollbars="yes");let u=Object.entries(c).reduce((f,[p,g])=>`${f}${p}=${g},`,"");if(dQ(l)&&a!=="_self")return _X(e||"",a),new qy(null);let h=window.open(e||"",a,u);_e(h,n,"popup-blocked");try{h.focus()}catch{}return new qy(h)}function _X(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var bX="__/auth/handler",wX="emulator/auth/handler",EX=encodeURIComponent("fac");function VF(n,e,t,r,i,o){return I(this,null,function*(){_e(n.config.authDomain,n,"auth-domain-config-required"),_e(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:cr,eventId:i};if(e instanceof $y){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",Bd(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,h]of Object.entries(o||{}))s[u]=h}if(e instanceof EC){let u=e.getScopes().filter(h=>h!=="");u.length>0&&(s.scopes=u.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let c=yield n._getAppCheckToken(),l=c?`#${EX}=${encodeURIComponent(c)}`:"";return`${IX(n)}?${wa(a).slice(1)}${l}`})}function IX({config:n}){return n.emulator?PC(n,wX):`https://${n.authDomain}/${bX}`}var pC="webStorageSupport",AC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HC,this._completeRedirectFn=YQ,this._overrideRedirectResult=qQ}_openPopup(e,t,r,i){return I(this,null,function*(){var o;Hs((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield VF(e,t,r,mC(),i);return vX(e,s,lL())})}_openRedirect(e,t,r,i){return I(this,null,function*(){yield this._originValidation(e);let o=yield VF(e,t,r,mC(),i);return RQ(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Hs(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return I(this,null,function*(){let t=yield hX(e),r=new xC(e);return t.register("authEvent",i=>(_e(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pC,{type:pC},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[pC];s!==void 0&&t(!!s),$s(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=tX(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return rL()||XF()||LC()}},mL=AC;var jF="@firebase/auth",UF="1.8.2";var RC=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function CX(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TX(n){Bt(new Ut("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;_e(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:iL(n)},l=new wC(r,i,o,c);return vQ(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Bt(new Ut("auth-internal",e=>{let t=VC(e.getProvider("auth").getImmediate());return(r=>new RC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ce(jF,UF,CX(n)),ce(jF,UF,"esm2017")}var SX=5*60,DX=kb("authIdTokenMaxAge")||SX,BF=null,xX=n=>e=>I(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>DX)return;let i=t?.token;BF!==i&&(BF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function zC(n=dn()){let e=un(n,"auth");if(e.isInitialized())return e.getImmediate();let t=UC(n,{popupRedirectResolver:mL,persistence:[fL,cL,HC]}),r=kb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=xX(o.toString());$C(t,s,()=>s(t.currentUser)),Gy(t,a=>s(a))}}let i=GM("auth");return i&&BC(t,`http://${i}`),t}function AX(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}mQ({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ja("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",AX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TX("Browser");function yL(n){return new ye(function(e){var t=Ky(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var vL="auth",tc=class{constructor(e){return e}},wi=class{constructor(){return tn(vL)}};var WC=new K("angularfire2.auth-instances");function bJ(n,e){let t=mn(vL,n,e);return t&&new tc(t)}function wJ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new tc(r)}}var EJ={provide:wi,deps:[[new Ae,WC]]},IJ={provide:tc,useFactory:bJ,deps:[[new Ae,WC],kt]};function _L(n,...e){return ce("angularfire",xt.full,"auth"),vt([IJ,EJ,{provide:WC,useFactory:wJ(n),multi:!0,deps:[pe,Ne,Wt,Jt,[new Ae,Yr],...e]}])}var bL=tt(yL,!0);var wL=tt(zC,!0);var Qy="analytics",TJ="firebase_id",SJ="origin",DJ=60*1e3,xJ="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",JC="https://www.googletagmanager.com/gtag/js";var or=new Ur("@firebase/analytics");var AJ={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Or=new jr("analytics","Analytics",AJ);function RJ(n){if(!n.startsWith(JC)){let e=Or.create("invalid-gtag-resource",{gtagURL:n});return or.warn(e.message),""}return n}function xL(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function MJ(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function PJ(n,e){let t=MJ("firebase-js-sdk-policy",{createScriptURL:RJ}),r=document.createElement("script"),i=`${JC}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function kJ(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function NJ(n,e,t,r,i,o){return I(this,null,function*(){let s=r[i];try{if(s)yield e[s];else{let c=(yield xL(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){or.error(a)}n("config",i,o)})}function OJ(n,e,t,r,i){return I(this,null,function*(){try{let o=[];if(i&&i.send_to){let s=i.send_to;Array.isArray(s)||(s=[s]);let a=yield xL(t);for(let c of s){let l=a.find(h=>h.measurementId===c),u=l&&e[l.appId];if(u)o.push(u);else{o=[];break}}}o.length===0&&(o=Object.values(e)),yield Promise.all(o),n("event",r,i||{})}catch(o){or.error(o)}})}function FJ(n,e,t,r){function i(o,...s){return I(this,null,function*(){try{if(o==="event"){let[a,c]=s;yield OJ(n,e,t,a,c)}else if(o==="config"){let[a,c]=s;yield NJ(n,e,t,r,a,c)}else if(o==="consent"){let[a,c]=s;n("consent",a,c)}else if(o==="get"){let[a,c,l]=s;n("get",a,c,l)}else if(o==="set"){let[a]=s;n("set",a)}else n(o,...s)}catch(a){or.error(a)}})}return i}function LJ(n,e,t,r,i){let o=function(...s){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=FJ(o,n,e,t),{gtagCore:o,wrappedGtag:window[i]}}function VJ(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(JC)&&t.src.includes(n))return t;return null}var jJ=30,UJ=1e3,GC=class{constructor(e={},t=UJ){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},AL=new GC;function BJ(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function $J(n){return I(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:BJ(r)},o=xJ.replace("{app-id}",t),s=yield fetch(o,i);if(s.status!==200&&s.status!==304){let a="";try{let c=yield s.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Or.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a})}return s.json()})}function HJ(r){return I(this,arguments,function*(n,e=AL,t){let{appId:i,apiKey:o,measurementId:s}=n.options;if(!i)throw Or.create("no-app-id");if(!o){if(s)return{measurementId:s,appId:i};throw Or.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new KC;return setTimeout(()=>I(this,null,function*(){c.abort()}),t!==void 0?t:DJ),RL({appId:i,apiKey:o,measurementId:s},a,c,e)})}function RL(o,s,a){return I(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=AL){var c;let{appId:l,measurementId:u}=n;try{yield zJ(r,e)}catch(h){if(u)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:u};throw h}try{let h=yield $J(n);return i.deleteThrottleMetadata(l),h}catch(h){let f=h;if(!WJ(f)){if(i.deleteThrottleMetadata(l),u)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:u};throw h}let p=Number((c=f?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Kc(t,i.intervalMillis,jJ):Kc(t,i.intervalMillis),g={throttleEndTimeMillis:Date.now()+p,backoffCount:t+1};return i.setThrottleMetadata(l,g),or.debug(`Calling attemptFetch again in ${p} millis`),RL(n,g,r,i)}})}function zJ(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(Or.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function WJ(n){if(!(n instanceof Dr)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var KC=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var YC;function qJ(n,e,t,r,i){return I(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let o=yield e,s=Object.assign(Object.assign({},r),{send_to:o});n("event",t,s)}})}function GJ(n,e,t,r){return I(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var QC;function KJ(n){QC=n}function YJ(n){YC=n}function QJ(){return I(this,null,function*(){if(Ni())try{yield Gc()}catch(n){return or.warn(Or.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return or.warn(Or.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function XJ(n,e,t,r,i,o,s){return I(this,null,function*(){var a;let c=HJ(n);c.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>or.error(p)),e.push(c);let l=QJ().then(p=>{if(p)return r.getId()}),[u,h]=yield Promise.all([c,l]);VJ(o)||PJ(o,u.measurementId),QC&&(i("consent","default",QC),KJ(void 0)),i("js",new Date);let f=(a=s?.config)!==null&&a!==void 0?a:{};return f[SJ]="firebase",f.update=!0,h!=null&&(f[TJ]=h),i("config",u.measurementId,f),YC&&(i("set",YC),YJ(void 0)),u.measurementId})}var XC=class{constructor(e){this.app=e}_delete(){return delete Kl[this.app.options.appId],Promise.resolve()}},Kl={},EL=[],IL={},qC="dataLayer",JJ="gtag",CL,ZC,TL=!1;function ZJ(){let n=[];if(jd()&&n.push("This is a browser extension environment."),Ud()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Or.create("invalid-analytics-context",{errorInfo:e});or.warn(t.message)}}function eZ(n,e,t){ZJ();let r=n.options.appId;if(!r)throw Or.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Or.create("no-api-key");if(Kl[r]!=null)throw Or.create("already-exists",{id:r});if(!TL){kJ(qC);let{wrappedGtag:o,gtagCore:s}=LJ(Kl,EL,IL,qC,JJ);ZC=o,CL=s,TL=!0}return Kl[r]=XJ(n,EL,IL,e,CL,qC,t),new XC(n)}function ML(n=dn()){n=Ye(n);let e=un(n,Qy);return e.isInitialized()?e.getImmediate():PL(n)}function PL(n,e={}){let t=un(n,Qy);if(t.isInitialized()){let i=t.getImmediate();if(Hd(e,t.getOptions()))return i;throw Or.create("already-initialized")}return t.initialize({options:e})}function kL(){return I(this,null,function*(){if(jd()||!Ud()||!Ni())return!1;try{return yield Gc()}catch{return!1}})}function NL(n,e,t){n=Ye(n),GJ(ZC,Kl[n.app.options.appId],e,t).catch(r=>or.error(r))}function eT(n,e,t,r){n=Ye(n),qJ(ZC,Kl[n.app.options.appId],e,t,r).catch(i=>or.error(i))}var SL="@firebase/analytics",DL="0.10.11";function tZ(){Bt(new Ut(Qy,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return eZ(r,i,t)},"PUBLIC")),Bt(new Ut("analytics-internal",n,"PRIVATE")),ce(SL,DL),ce(SL,DL,"esm2017");function n(e){try{let t=e.getProvider(Qy).getImmediate();return{logEvent:(r,i,o)=>eT(t,r,i,o)}}catch(t){throw Or.create("interop-component-reg-failed",{reason:t})}}}tZ();var nc=class{constructor(e){return e}},LL="analytics",nT=class{constructor(){return tn(LL)}};var VL=tt(ML,!0);var jL=tt(kL,!1),nZ=tt(eT,!1,2);var rZ=tt(NL,!0,2);var iT=(()=>{class n{initialized;disposables=[];constructor(t,r,i){ce("angularfire",xt.full,"user-tracking");let o;this.initialized=r.runOutsideAngular(()=>new Promise(s=>{o=s})),jL().then(()=>{let s=i.get(nc);s?this.disposables=[bL(t).subscribe(a=>{rZ(s,a?.uid),o()})]:o()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ae(tc),ae(pe),ae(Ne))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),iZ="firebase_event_origin",oZ="firebase_previous_class",sZ="firebase_previous_id",aZ="firebase_previous_screen",cZ="firebase_screen_class",OL="firebase_screen_id",lZ="firebase_screen",rT="outlet",uZ="page_path",dZ="page_title",rf="screen_class",FL="screen_name",hZ="screen_view",fZ="auto",pZ="#",mZ=Math.floor(Math.random()*(2**32-1))-2**31,tT={},gZ=n=>{let e=[n[rf],n[rT]].join(pZ);if(tT.hasOwnProperty(e))return tT[e];{let t=mZ++;return tT[e]=t,t}},yZ=(n,e,t)=>n.events.pipe(xn(i=>i instanceof Bh)).pipe(pn(i=>{let s=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,f=>f.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(f=>f).find(f=>f.outlet===i.snapshot.outlet);if(!a)return de(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(f=>f.routeConfig?.path).filter(f=>f).join("/")||"/",u={[FL]:l,[uZ]:`/${s}`,[iZ]:fZ,[lZ]:l,[rT]:i.snapshot.outlet};e&&(u[dZ]=e.getTitle());let h=a.component;if(h){if(h===eC){let f=i.snapshot;for(;f.firstChild;)f=f.firstChild;h=f.component}}else h=i.snapshot.component;if(typeof h=="string")return de(fe(q({},u),{[rf]:h}));if(h){let f=t.resolveComponentFactory(h);return de(fe(q({},u),{[rf]:f.selector}))}return de(null)}),xn(i=>!!i),te(i=>q({[cZ]:i[rf],[OL]:gZ(i)},i)),rw(i=>i[rT]),Kt(i=>i.pipe(ul((o,s)=>JSON.stringify(o)===JSON.stringify(s)),hl(void 0),Rm(),te(([o,s])=>o?q({[oZ]:o[rf],[aZ]:o[FL],[sZ]:o[OL]},s):s)))),UL=(()=>{class n{disposable;constructor(t,r,i,o,s,a){ce("angularfire",xt.full,"screen-tracking"),jL().then(()=>{let c=a.get(nc);!t||!c||o.runOutsideAngular(()=>{this.disposable=yZ(t,r,i).pipe(pn(l=>I(this,null,function*(){return s&&(yield s.initialized),nZ(c,hZ,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ae(xy,8),ae(dy,8),ae(Ps),ae(pe),ae(iT,8),ae(Ne))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),oT=new K("angularfire2.analytics-instances");function vZ(n,e,t){if(!kl(t))return null;let r=mn(LL,n,e);return r&&new nc(r)}function _Z(n){return(e,t,r)=>{if(!kl(r))return null;let i=e.runOutsideAngular(()=>n(t));return new nc(i)}}var bZ={provide:nT,deps:[[new Ae,oT]]},wZ={provide:nc,useFactory:vZ,deps:[[new Ae,oT],kt,zt]};function BL(n,...e){return ce("angularfire",xt.full,"analytics"),vt([wZ,bZ,{provide:oT,useFactory:_Z(n),multi:!0,deps:[pe,Ne,zt,Wt,Jt,...e]}])}var $L=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},HL={};var $o,sT;(function(){var n;function e(T,b){function E(){}E.prototype=b.prototype,T.D=b.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(x,M,N){for(var A=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)A[Pt-2]=arguments[Pt];return b.prototype[M].apply(x,A)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,b,E){E||(E=0);var x=Array(16);if(typeof b=="string")for(var M=0;16>M;++M)x[M]=b.charCodeAt(E++)|b.charCodeAt(E++)<<8|b.charCodeAt(E++)<<16|b.charCodeAt(E++)<<24;else for(M=0;16>M;++M)x[M]=b[E++]|b[E++]<<8|b[E++]<<16|b[E++]<<24;b=T.g[0],E=T.g[1],M=T.g[2];var N=T.g[3],A=b+(N^E&(M^N))+x[0]+3614090360&4294967295;b=E+(A<<7&4294967295|A>>>25),A=N+(M^b&(E^M))+x[1]+3905402710&4294967295,N=b+(A<<12&4294967295|A>>>20),A=M+(E^N&(b^E))+x[2]+606105819&4294967295,M=N+(A<<17&4294967295|A>>>15),A=E+(b^M&(N^b))+x[3]+3250441966&4294967295,E=M+(A<<22&4294967295|A>>>10),A=b+(N^E&(M^N))+x[4]+4118548399&4294967295,b=E+(A<<7&4294967295|A>>>25),A=N+(M^b&(E^M))+x[5]+1200080426&4294967295,N=b+(A<<12&4294967295|A>>>20),A=M+(E^N&(b^E))+x[6]+2821735955&4294967295,M=N+(A<<17&4294967295|A>>>15),A=E+(b^M&(N^b))+x[7]+4249261313&4294967295,E=M+(A<<22&4294967295|A>>>10),A=b+(N^E&(M^N))+x[8]+1770035416&4294967295,b=E+(A<<7&4294967295|A>>>25),A=N+(M^b&(E^M))+x[9]+2336552879&4294967295,N=b+(A<<12&4294967295|A>>>20),A=M+(E^N&(b^E))+x[10]+4294925233&4294967295,M=N+(A<<17&4294967295|A>>>15),A=E+(b^M&(N^b))+x[11]+2304563134&4294967295,E=M+(A<<22&4294967295|A>>>10),A=b+(N^E&(M^N))+x[12]+1804603682&4294967295,b=E+(A<<7&4294967295|A>>>25),A=N+(M^b&(E^M))+x[13]+4254626195&4294967295,N=b+(A<<12&4294967295|A>>>20),A=M+(E^N&(b^E))+x[14]+2792965006&4294967295,M=N+(A<<17&4294967295|A>>>15),A=E+(b^M&(N^b))+x[15]+1236535329&4294967295,E=M+(A<<22&4294967295|A>>>10),A=b+(M^N&(E^M))+x[1]+4129170786&4294967295,b=E+(A<<5&4294967295|A>>>27),A=N+(E^M&(b^E))+x[6]+3225465664&4294967295,N=b+(A<<9&4294967295|A>>>23),A=M+(b^E&(N^b))+x[11]+643717713&4294967295,M=N+(A<<14&4294967295|A>>>18),A=E+(N^b&(M^N))+x[0]+3921069994&4294967295,E=M+(A<<20&4294967295|A>>>12),A=b+(M^N&(E^M))+x[5]+3593408605&4294967295,b=E+(A<<5&4294967295|A>>>27),A=N+(E^M&(b^E))+x[10]+38016083&4294967295,N=b+(A<<9&4294967295|A>>>23),A=M+(b^E&(N^b))+x[15]+3634488961&4294967295,M=N+(A<<14&4294967295|A>>>18),A=E+(N^b&(M^N))+x[4]+3889429448&4294967295,E=M+(A<<20&4294967295|A>>>12),A=b+(M^N&(E^M))+x[9]+568446438&4294967295,b=E+(A<<5&4294967295|A>>>27),A=N+(E^M&(b^E))+x[14]+3275163606&4294967295,N=b+(A<<9&4294967295|A>>>23),A=M+(b^E&(N^b))+x[3]+4107603335&4294967295,M=N+(A<<14&4294967295|A>>>18),A=E+(N^b&(M^N))+x[8]+1163531501&4294967295,E=M+(A<<20&4294967295|A>>>12),A=b+(M^N&(E^M))+x[13]+2850285829&4294967295,b=E+(A<<5&4294967295|A>>>27),A=N+(E^M&(b^E))+x[2]+4243563512&4294967295,N=b+(A<<9&4294967295|A>>>23),A=M+(b^E&(N^b))+x[7]+1735328473&4294967295,M=N+(A<<14&4294967295|A>>>18),A=E+(N^b&(M^N))+x[12]+2368359562&4294967295,E=M+(A<<20&4294967295|A>>>12),A=b+(E^M^N)+x[5]+4294588738&4294967295,b=E+(A<<4&4294967295|A>>>28),A=N+(b^E^M)+x[8]+2272392833&4294967295,N=b+(A<<11&4294967295|A>>>21),A=M+(N^b^E)+x[11]+1839030562&4294967295,M=N+(A<<16&4294967295|A>>>16),A=E+(M^N^b)+x[14]+4259657740&4294967295,E=M+(A<<23&4294967295|A>>>9),A=b+(E^M^N)+x[1]+2763975236&4294967295,b=E+(A<<4&4294967295|A>>>28),A=N+(b^E^M)+x[4]+1272893353&4294967295,N=b+(A<<11&4294967295|A>>>21),A=M+(N^b^E)+x[7]+4139469664&4294967295,M=N+(A<<16&4294967295|A>>>16),A=E+(M^N^b)+x[10]+3200236656&4294967295,E=M+(A<<23&4294967295|A>>>9),A=b+(E^M^N)+x[13]+681279174&4294967295,b=E+(A<<4&4294967295|A>>>28),A=N+(b^E^M)+x[0]+3936430074&4294967295,N=b+(A<<11&4294967295|A>>>21),A=M+(N^b^E)+x[3]+3572445317&4294967295,M=N+(A<<16&4294967295|A>>>16),A=E+(M^N^b)+x[6]+76029189&4294967295,E=M+(A<<23&4294967295|A>>>9),A=b+(E^M^N)+x[9]+3654602809&4294967295,b=E+(A<<4&4294967295|A>>>28),A=N+(b^E^M)+x[12]+3873151461&4294967295,N=b+(A<<11&4294967295|A>>>21),A=M+(N^b^E)+x[15]+530742520&4294967295,M=N+(A<<16&4294967295|A>>>16),A=E+(M^N^b)+x[2]+3299628645&4294967295,E=M+(A<<23&4294967295|A>>>9),A=b+(M^(E|~N))+x[0]+4096336452&4294967295,b=E+(A<<6&4294967295|A>>>26),A=N+(E^(b|~M))+x[7]+1126891415&4294967295,N=b+(A<<10&4294967295|A>>>22),A=M+(b^(N|~E))+x[14]+2878612391&4294967295,M=N+(A<<15&4294967295|A>>>17),A=E+(N^(M|~b))+x[5]+4237533241&4294967295,E=M+(A<<21&4294967295|A>>>11),A=b+(M^(E|~N))+x[12]+1700485571&4294967295,b=E+(A<<6&4294967295|A>>>26),A=N+(E^(b|~M))+x[3]+2399980690&4294967295,N=b+(A<<10&4294967295|A>>>22),A=M+(b^(N|~E))+x[10]+4293915773&4294967295,M=N+(A<<15&4294967295|A>>>17),A=E+(N^(M|~b))+x[1]+2240044497&4294967295,E=M+(A<<21&4294967295|A>>>11),A=b+(M^(E|~N))+x[8]+1873313359&4294967295,b=E+(A<<6&4294967295|A>>>26),A=N+(E^(b|~M))+x[15]+4264355552&4294967295,N=b+(A<<10&4294967295|A>>>22),A=M+(b^(N|~E))+x[6]+2734768916&4294967295,M=N+(A<<15&4294967295|A>>>17),A=E+(N^(M|~b))+x[13]+1309151649&4294967295,E=M+(A<<21&4294967295|A>>>11),A=b+(M^(E|~N))+x[4]+4149444226&4294967295,b=E+(A<<6&4294967295|A>>>26),A=N+(E^(b|~M))+x[11]+3174756917&4294967295,N=b+(A<<10&4294967295|A>>>22),A=M+(b^(N|~E))+x[2]+718787259&4294967295,M=N+(A<<15&4294967295|A>>>17),A=E+(N^(M|~b))+x[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(M+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+M&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.u=function(T,b){b===void 0&&(b=T.length);for(var E=b-this.blockSize,x=this.B,M=this.h,N=0;N<b;){if(M==0)for(;N<=E;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<b;)if(x[M++]=T.charCodeAt(N++),M==this.blockSize){i(this,x),M=0;break}}else for(;N<b;)if(x[M++]=T[N++],M==this.blockSize){i(this,x),M=0;break}}this.h=M,this.o+=b},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;var E=8*this.o;for(b=T.length-8;b<T.length;++b)T[b]=E&255,E/=256;for(this.u(T),T=Array(16),b=E=0;4>b;++b)for(var x=0;32>x;x+=8)T[E++]=this.g[b]>>>x&255;return T};function o(T,b){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=b(T)}function s(T,b){this.h=b;for(var E=[],x=!0,M=T.length-1;0<=M;M--){var N=T[M]|0;x&&N==b||(E[M]=N,x=!1)}this.g=E}var a={};function c(T){return-128<=T&&128>T?o(T,function(b){return new s([b|0],0>b?-1:0)}):new s([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return h;if(0>T)return _(l(-T));for(var b=[],E=1,x=0;T>=E;x++)b[x]=T/E|0,E*=4294967296;return new s(b,0)}function u(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return _(u(T.substring(1),b));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=l(Math.pow(b,8)),x=h,M=0;M<T.length;M+=8){var N=Math.min(8,T.length-M),A=parseInt(T.substring(M,M+N),b);8>N?(N=l(Math.pow(b,N)),x=x.j(N).add(l(A))):(x=x.j(E),x=x.add(l(A)))}return x}var h=c(0),f=c(1),p=c(16777216);n=s.prototype,n.m=function(){if(v(this))return-_(this).m();for(var T=0,b=1,E=0;E<this.g.length;E++){var x=this.i(E);T+=(0<=x?x:4294967296+x)*b,b*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(g(this))return"0";if(v(this))return"-"+_(this).toString(T);for(var b=l(Math.pow(T,6)),E=this,x="";;){var M=V(E,b).g;E=D(E,M.j(b));var N=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=M,g(E))return N+x;for(;6>N.length;)N="0"+N;x=N+x}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function g(T){if(T.h!=0)return!1;for(var b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function v(T){return T.h==-1}n.l=function(T){return T=D(this,T),v(T)?-1:g(T)?0:1};function _(T){for(var b=T.g.length,E=[],x=0;x<b;x++)E[x]=~T.g[x];return new s(E,~T.h).add(f)}n.abs=function(){return v(this)?_(this):this},n.add=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0,M=0;M<=b;M++){var N=x+(this.i(M)&65535)+(T.i(M)&65535),A=(N>>>16)+(this.i(M)>>>16)+(T.i(M)>>>16);x=A>>>16,N&=65535,A&=65535,E[M]=A<<16|N}return new s(E,E[E.length-1]&-2147483648?-1:0)};function D(T,b){return T.add(_(b))}n.j=function(T){if(g(this)||g(T))return h;if(v(this))return v(T)?_(this).j(_(T)):_(_(this).j(T));if(v(T))return _(this.j(_(T)));if(0>this.l(p)&&0>T.l(p))return l(this.m()*T.m());for(var b=this.g.length+T.g.length,E=[],x=0;x<2*b;x++)E[x]=0;for(x=0;x<this.g.length;x++)for(var M=0;M<T.g.length;M++){var N=this.i(x)>>>16,A=this.i(x)&65535,Pt=T.i(M)>>>16,Ke=T.i(M)&65535;E[2*x+2*M]+=A*Ke,R(E,2*x+2*M),E[2*x+2*M+1]+=N*Ke,R(E,2*x+2*M+1),E[2*x+2*M+1]+=A*Pt,R(E,2*x+2*M+1),E[2*x+2*M+2]+=N*Pt,R(E,2*x+2*M+2)}for(x=0;x<b;x++)E[x]=E[2*x+1]<<16|E[2*x];for(x=b;x<2*b;x++)E[x]=0;return new s(E,0)};function R(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function F(T,b){this.g=T,this.h=b}function V(T,b){if(g(b))throw Error("division by zero");if(g(T))return new F(h,h);if(v(T))return b=V(_(T),b),new F(_(b.g),_(b.h));if(v(b))return b=V(T,_(b)),new F(_(b.g),b.h);if(30<T.g.length){if(v(T)||v(b))throw Error("slowDivide_ only works with positive integers.");for(var E=f,x=b;0>=x.l(T);)E=U(E),x=U(x);var M=j(E,1),N=j(x,1);for(x=j(x,2),E=j(E,2);!g(x);){var A=N.add(x);0>=A.l(T)&&(M=M.add(E),N=A),x=j(x,1),E=j(E,1)}return b=D(T,M.j(b)),new F(M,b)}for(M=h;0<=T.l(b);){for(E=Math.max(1,Math.floor(T.m()/b.m())),x=Math.ceil(Math.log(E)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),N=l(E),A=N.j(b);v(A)||0<A.l(T);)E-=x,N=l(E),A=N.j(b);g(N)&&(N=f),M=M.add(N),T=D(T,A)}return new F(M,T)}n.A=function(T){return V(this,T).h},n.and=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0;x<b;x++)E[x]=this.i(x)&T.i(x);return new s(E,this.h&T.h)},n.or=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0;x<b;x++)E[x]=this.i(x)|T.i(x);return new s(E,this.h|T.h)},n.xor=function(T){for(var b=Math.max(this.g.length,T.g.length),E=[],x=0;x<b;x++)E[x]=this.i(x)^T.i(x);return new s(E,this.h^T.h)};function U(T){for(var b=T.g.length+1,E=[],x=0;x<b;x++)E[x]=T.i(x)<<1|T.i(x-1)>>>31;return new s(E,T.h)}function j(T,b){var E=b>>5;b%=32;for(var x=T.g.length-E,M=[],N=0;N<x;N++)M[N]=0<b?T.i(N+E)>>>b|T.i(N+E+1)<<32-b:T.i(N+E);return new s(M,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sT=HL.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=u,$o=HL.Integer=s}).apply(typeof $L<"u"?$L:typeof self<"u"?self:typeof window<"u"?window:{});var Xy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={};var aT,EZ,Yl,cT,of,Jy,lT,uT,dT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,m,y){return d==Array.prototype||d==Object.prototype||(d[m]=y.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xy=="object"&&Xy];for(var m=0;m<d.length;++m){var y=d[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=t(this);function i(d,m){if(m)e:{var y=r;d=d.split(".");for(var w=0;w<d.length-1;w++){var L=d[w];if(!(L in y))break e;y=y[L]}d=d[d.length-1],w=y[d],m=m(w),m!=w&&m!=null&&e(y,d,{configurable:!0,writable:!0,value:m})}}function o(d,m){d instanceof String&&(d+="");var y=0,w=!1,L={next:function(){if(!w&&y<d.length){var B=y++;return{value:m(B,d[B]),done:!1}}return w=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return o(this,function(m,y){return y})}});var s=s||{},a=this||self;function c(d){var m=typeof d;return m=m!="object"?m:d?Array.isArray(d)?"array":m:"null",m=="array"||m=="object"&&typeof d.length=="number"}function l(d){var m=typeof d;return m=="object"&&d!=null||m=="function"}function u(d,m,y){return d.call.apply(d.bind,arguments)}function h(d,m,y){if(!d)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,w),d.apply(m,L)}}return function(){return d.apply(m,arguments)}}function f(d,m,y){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,f.apply(null,arguments)}function p(d,m){var y=Array.prototype.slice.call(arguments,1);return function(){var w=y.slice();return w.push.apply(w,arguments),d.apply(this,w)}}function g(d,m){function y(){}y.prototype=m.prototype,d.aa=m.prototype,d.prototype=new y,d.prototype.constructor=d,d.Qb=function(w,L,B){for(var Y=Array(arguments.length-2),lt=2;lt<arguments.length;lt++)Y[lt-2]=arguments[lt];return m.prototype[L].apply(w,Y)}}function v(d){let m=d.length;if(0<m){let y=Array(m);for(let w=0;w<m;w++)y[w]=d[w];return y}return[]}function _(d,m){for(let y=1;y<arguments.length;y++){let w=arguments[y];if(c(w)){let L=d.length||0,B=w.length||0;d.length=L+B;for(let Y=0;Y<B;Y++)d[L+Y]=w[Y]}else d.push(w)}}class D{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function R(d){return/^[\s\xa0]*$/.test(d)}function F(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function V(d){return V[" "](d),d}V[" "]=function(){};var U=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function j(d,m,y){for(let w in d)m.call(y,d[w],w,d)}function T(d,m){for(let y in d)m.call(void 0,d[y],y,d)}function b(d){let m={};for(let y in d)m[y]=d[y];return m}let E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(d,m){let y,w;for(let L=1;L<arguments.length;L++){w=arguments[L];for(y in w)d[y]=w[y];for(let B=0;B<E.length;B++)y=E[B],Object.prototype.hasOwnProperty.call(w,y)&&(d[y]=w[y])}}function M(d){var m=1;d=d.split(":");let y=[];for(;0<m&&d.length;)y.push(d.shift()),m--;return d.length&&y.push(d.join(":")),y}function N(d){a.setTimeout(()=>{throw d},0)}function A(){var d=Zt;let m=null;return d.g&&(m=d.g,d.g=d.g.next,d.g||(d.h=null),m.next=null),m}class Pt{constructor(){this.h=this.g=null}add(m,y){let w=Ke.get();w.set(m,y),this.h?this.h.next=w:this.g=w,this.h=w}}var Ke=new D(()=>new gt,d=>d.reset());class gt{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ct,Tn=!1,Zt=new Pt,po=()=>{let d=a.Promise.resolve(void 0);ct=()=>{d.then(jc)}};var jc=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(y){N(y)}var m=Ke;m.j(d),100>m.h&&(m.h++,d.next=m.g,m.g=d)}Tn=!1};function Qn(){this.s=this.s,this.C=this.C}Qn.prototype.s=!1,Qn.prototype.ma=function(){this.s||(this.s=!0,this.N())},Qn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Vt(d,m){this.type=d,this.g=this.target=m,this.defaultPrevented=!1}Vt.prototype.h=function(){this.defaultPrevented=!0};var mo=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,m=Object.defineProperty({},"passive",{get:function(){d=!0}});try{let y=()=>{};a.addEventListener("test",y,m),a.removeEventListener("test",y,m)}catch{}return d}();function ai(d,m){if(Vt.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var y=this.type=d.type,w=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=m,m=d.relatedTarget){if(U){e:{try{V(m.nodeName);var L=!0;break e}catch{}L=!1}L||(m=null)}}else y=="mouseover"?m=d.fromElement:y=="mouseout"&&(m=d.toElement);this.relatedTarget=m,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:go[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&ai.aa.h.call(this)}}g(ai,Vt);var go={2:"touch",3:"pen",4:"mouse"};ai.prototype.h=function(){ai.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Id="closure_listenable_"+(1e6*Math.random()|0),Oq=0;function Fq(d,m,y,w,L){this.listener=d,this.proxy=null,this.src=m,this.type=y,this.capture=!!w,this.ha=L,this.key=++Oq,this.da=this.fa=!1}function Mp(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Pp(d){this.src=d,this.g={},this.h=0}Pp.prototype.add=function(d,m,y,w,L){var B=d.toString();d=this.g[B],d||(d=this.g[B]=[],this.h++);var Y=ub(d,m,w,L);return-1<Y?(m=d[Y],y||(m.fa=!1)):(m=new Fq(m,this.src,B,!!w,L),m.fa=y,d.push(m)),m};function lb(d,m){var y=m.type;if(y in d.g){var w=d.g[y],L=Array.prototype.indexOf.call(w,m,void 0),B;(B=0<=L)&&Array.prototype.splice.call(w,L,1),B&&(Mp(m),d.g[y].length==0&&(delete d.g[y],d.h--))}}function ub(d,m,y,w){for(var L=0;L<d.length;++L){var B=d[L];if(!B.da&&B.listener==m&&B.capture==!!y&&B.ha==w)return L}return-1}var db="closure_lm_"+(1e6*Math.random()|0),hb={};function zR(d,m,y,w,L){if(w&&w.once)return qR(d,m,y,w,L);if(Array.isArray(m)){for(var B=0;B<m.length;B++)zR(d,m[B],y,w,L);return null}return y=gb(y),d&&d[Id]?d.K(m,y,l(w)?!!w.capture:!!w,L):WR(d,m,y,!1,w,L)}function WR(d,m,y,w,L,B){if(!m)throw Error("Invalid event type");var Y=l(L)?!!L.capture:!!L,lt=pb(d);if(lt||(d[db]=lt=new Pp(d)),y=lt.add(m,y,w,Y,B),y.proxy)return y;if(w=Lq(),y.proxy=w,w.src=d,w.listener=y,d.addEventListener)mo||(L=Y),L===void 0&&(L=!1),d.addEventListener(m.toString(),w,L);else if(d.attachEvent)d.attachEvent(KR(m.toString()),w);else if(d.addListener&&d.removeListener)d.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Lq(){function d(y){return m.call(d.src,d.listener,y)}let m=Vq;return d}function qR(d,m,y,w,L){if(Array.isArray(m)){for(var B=0;B<m.length;B++)qR(d,m[B],y,w,L);return null}return y=gb(y),d&&d[Id]?d.L(m,y,l(w)?!!w.capture:!!w,L):WR(d,m,y,!0,w,L)}function GR(d,m,y,w,L){if(Array.isArray(m))for(var B=0;B<m.length;B++)GR(d,m[B],y,w,L);else w=l(w)?!!w.capture:!!w,y=gb(y),d&&d[Id]?(d=d.i,m=String(m).toString(),m in d.g&&(B=d.g[m],y=ub(B,y,w,L),-1<y&&(Mp(B[y]),Array.prototype.splice.call(B,y,1),B.length==0&&(delete d.g[m],d.h--)))):d&&(d=pb(d))&&(m=d.g[m.toString()],d=-1,m&&(d=ub(m,y,w,L)),(y=-1<d?m[d]:null)&&fb(y))}function fb(d){if(typeof d!="number"&&d&&!d.da){var m=d.src;if(m&&m[Id])lb(m.i,d);else{var y=d.type,w=d.proxy;m.removeEventListener?m.removeEventListener(y,w,d.capture):m.detachEvent?m.detachEvent(KR(y),w):m.addListener&&m.removeListener&&m.removeListener(w),(y=pb(m))?(lb(y,d),y.h==0&&(y.src=null,m[db]=null)):Mp(d)}}}function KR(d){return d in hb?hb[d]:hb[d]="on"+d}function Vq(d,m){if(d.da)d=!0;else{m=new ai(m,this);var y=d.listener,w=d.ha||d.src;d.fa&&fb(d),d=y.call(w,m)}return d}function pb(d){return d=d[db],d instanceof Pp?d:null}var mb="__closure_events_fn_"+(1e9*Math.random()>>>0);function gb(d){return typeof d=="function"?d:(d[mb]||(d[mb]=function(m){return d.handleEvent(m)}),d[mb])}function kn(){Qn.call(this),this.i=new Pp(this),this.M=this,this.F=null}g(kn,Qn),kn.prototype[Id]=!0,kn.prototype.removeEventListener=function(d,m,y,w){GR(this,d,m,y,w)};function Xn(d,m){var y,w=d.F;if(w)for(y=[];w;w=w.F)y.push(w);if(d=d.M,w=m.type||m,typeof m=="string")m=new Vt(m,d);else if(m instanceof Vt)m.target=m.target||d;else{var L=m;m=new Vt(w,d),x(m,L)}if(L=!0,y)for(var B=y.length-1;0<=B;B--){var Y=m.g=y[B];L=kp(Y,w,!0,m)&&L}if(Y=m.g=d,L=kp(Y,w,!0,m)&&L,L=kp(Y,w,!1,m)&&L,y)for(B=0;B<y.length;B++)Y=m.g=y[B],L=kp(Y,w,!1,m)&&L}kn.prototype.N=function(){if(kn.aa.N.call(this),this.i){var d=this.i,m;for(m in d.g){for(var y=d.g[m],w=0;w<y.length;w++)Mp(y[w]);delete d.g[m],d.h--}}this.F=null},kn.prototype.K=function(d,m,y,w){return this.i.add(String(d),m,!1,y,w)},kn.prototype.L=function(d,m,y,w){return this.i.add(String(d),m,!0,y,w)};function kp(d,m,y,w){if(m=d.i.g[String(m)],!m)return!0;m=m.concat();for(var L=!0,B=0;B<m.length;++B){var Y=m[B];if(Y&&!Y.da&&Y.capture==y){var lt=Y.listener,Sn=Y.ha||Y.src;Y.fa&&lb(d.i,Y),L=lt.call(Sn,w)!==!1&&L}}return L&&!w.defaultPrevented}function YR(d,m,y){if(typeof d=="function")y&&(d=f(d,y));else if(d&&typeof d.handleEvent=="function")d=f(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:a.setTimeout(d,m||0)}function QR(d){d.g=YR(()=>{d.g=null,d.i&&(d.i=!1,QR(d))},d.l);let m=d.h;d.h=null,d.m.apply(null,m)}class jq extends Qn{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:QR(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cd(d){Qn.call(this),this.h=d,this.g={}}g(Cd,Qn);var XR=[];function JR(d){j(d.g,function(m,y){this.g.hasOwnProperty(y)&&fb(m)},d),d.g={}}Cd.prototype.N=function(){Cd.aa.N.call(this),JR(this)},Cd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yb=a.JSON.stringify,Uq=a.JSON.parse,Bq=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function vb(){}vb.prototype.h=null;function ZR(d){return d.h||(d.h=d.i())}function eM(){}var Td={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _b(){Vt.call(this,"d")}g(_b,Vt);function bb(){Vt.call(this,"c")}g(bb,Vt);var ga={},tM=null;function Np(){return tM=tM||new kn}ga.La="serverreachability";function nM(d){Vt.call(this,ga.La,d)}g(nM,Vt);function Sd(d){let m=Np();Xn(m,new nM(m))}ga.STAT_EVENT="statevent";function rM(d,m){Vt.call(this,ga.STAT_EVENT,d),this.stat=m}g(rM,Vt);function Jn(d){let m=Np();Xn(m,new rM(m,d))}ga.Ma="timingevent";function iM(d,m){Vt.call(this,ga.Ma,d),this.size=m}g(iM,Vt);function Dd(d,m){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},m)}function xd(){this.g=!0}xd.prototype.xa=function(){this.g=!1};function $q(d,m,y,w,L,B){d.info(function(){if(d.g)if(B)for(var Y="",lt=B.split("&"),Sn=0;Sn<lt.length;Sn++){var et=lt[Sn].split("=");if(1<et.length){var Nn=et[0];et=et[1];var On=Nn.split("_");Y=2<=On.length&&On[1]=="type"?Y+(Nn+"="+et+"&"):Y+(Nn+"=redacted&")}}else Y=null;else Y=B;return"XMLHTTP REQ ("+w+") [attempt "+L+"]: "+m+`
`+y+`
`+Y})}function Hq(d,m,y,w,L,B,Y){d.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+L+"]: "+m+`
`+y+`
`+B+" "+Y})}function Uc(d,m,y,w){d.info(function(){return"XMLHTTP TEXT ("+m+"): "+Wq(d,y)+(w?" "+w:"")})}function zq(d,m){d.info(function(){return"TIMEOUT: "+m})}xd.prototype.info=function(){};function Wq(d,m){if(!d.g)return m;if(!m)return null;try{var y=JSON.parse(m);if(y){for(d=0;d<y.length;d++)if(Array.isArray(y[d])){var w=y[d];if(!(2>w.length)){var L=w[1];if(Array.isArray(L)&&!(1>L.length)){var B=L[0];if(B!="noop"&&B!="stop"&&B!="close")for(var Y=1;Y<L.length;Y++)L[Y]=""}}}}return yb(y)}catch{return m}}var Op={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},oM={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wb;function Fp(){}g(Fp,vb),Fp.prototype.g=function(){return new XMLHttpRequest},Fp.prototype.i=function(){return{}},wb=new Fp;function ms(d,m,y,w){this.j=d,this.i=m,this.l=y,this.R=w||1,this.U=new Cd(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new sM}function sM(){this.i=null,this.g="",this.h=!1}var aM={},Eb={};function Ib(d,m,y){d.L=1,d.v=Up(yo(m)),d.m=y,d.P=!0,cM(d,null)}function cM(d,m){d.F=Date.now(),Lp(d),d.A=yo(d.v);var y=d.A,w=d.R;Array.isArray(w)||(w=[String(w)]),EM(y.i,"t",w),d.C=0,y=d.j.J,d.h=new sM,d.g=UM(d.j,y?m:null,!d.m),0<d.O&&(d.M=new jq(f(d.Y,d,d.g),d.O)),m=d.U,y=d.g,w=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(XR[0]=L.toString()),L=XR);for(var B=0;B<L.length;B++){var Y=zR(y,L[B],w||m.handleEvent,!1,m.h||m);if(!Y)break;m.g[Y.key]=Y}m=d.H?b(d.H):{},d.m?(d.u||(d.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,m)):(d.u="GET",d.g.ea(d.A,d.u,null,m)),Sd(),$q(d.i,d.u,d.A,d.l,d.R,d.m)}ms.prototype.ca=function(d){d=d.target;let m=this.M;m&&vo(d)==3?m.j():this.Y(d)},ms.prototype.Y=function(d){try{if(d==this.g)e:{let On=vo(this.g);var m=this.g.Ba();let Hc=this.g.Z();if(!(3>On)&&(On!=3||this.g&&(this.h.h||this.g.oa()||AM(this.g)))){this.J||On!=4||m==7||(m==8||0>=Hc?Sd(3):Sd(2)),Cb(this);var y=this.g.Z();this.X=y;t:if(lM(this)){var w=AM(this.g);d="";var L=w.length,B=vo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ya(this),Ad(this);var Y="";break t}this.h.i=new a.TextDecoder}for(m=0;m<L;m++)this.h.h=!0,d+=this.h.i.decode(w[m],{stream:!(B&&m==L-1)});w.length=0,this.h.g+=d,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=y==200,Hq(this.i,this.u,this.A,this.l,this.R,On,y),this.o){if(this.T&&!this.K){t:{if(this.g){var lt,Sn=this.g;if((lt=Sn.g?Sn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(lt)){var et=lt;break t}}et=null}if(y=et)Uc(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Tb(this,y);else{this.o=!1,this.s=3,Jn(12),ya(this),Ad(this);break e}}if(this.P){y=!0;let ci;for(;!this.J&&this.C<Y.length;)if(ci=qq(this,Y),ci==Eb){On==4&&(this.s=4,Jn(14),y=!1),Uc(this.i,this.l,null,"[Incomplete Response]");break}else if(ci==aM){this.s=4,Jn(15),Uc(this.i,this.l,Y,"[Invalid Chunk]"),y=!1;break}else Uc(this.i,this.l,ci,null),Tb(this,ci);if(lM(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),On!=4||Y.length!=0||this.h.h||(this.s=1,Jn(16),y=!1),this.o=this.o&&y,!y)Uc(this.i,this.l,Y,"[Invalid Chunked Response]"),ya(this),Ad(this);else if(0<Y.length&&!this.W){this.W=!0;var Nn=this.j;Nn.g==this&&Nn.ba&&!Nn.M&&(Nn.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Mb(Nn),Nn.M=!0,Jn(11))}}else Uc(this.i,this.l,Y,null),Tb(this,Y);On==4&&ya(this),this.o&&!this.J&&(On==4?FM(this.j,this):(this.o=!1,Lp(this)))}else l4(this.g),y==400&&0<Y.indexOf("Unknown SID")?(this.s=3,Jn(12)):(this.s=0,Jn(13)),ya(this),Ad(this)}}}catch{}finally{}};function lM(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function qq(d,m){var y=d.C,w=m.indexOf(`
`,y);return w==-1?Eb:(y=Number(m.substring(y,w)),isNaN(y)?aM:(w+=1,w+y>m.length?Eb:(m=m.slice(w,w+y),d.C=w+y,m)))}ms.prototype.cancel=function(){this.J=!0,ya(this)};function Lp(d){d.S=Date.now()+d.I,uM(d,d.I)}function uM(d,m){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Dd(f(d.ba,d),m)}function Cb(d){d.B&&(a.clearTimeout(d.B),d.B=null)}ms.prototype.ba=function(){this.B=null;let d=Date.now();0<=d-this.S?(zq(this.i,this.A),this.L!=2&&(Sd(),Jn(17)),ya(this),this.s=2,Ad(this)):uM(this,this.S-d)};function Ad(d){d.j.G==0||d.J||FM(d.j,d)}function ya(d){Cb(d);var m=d.M;m&&typeof m.ma=="function"&&m.ma(),d.M=null,JR(d.U),d.g&&(m=d.g,d.g=null,m.abort(),m.ma())}function Tb(d,m){try{var y=d.j;if(y.G!=0&&(y.g==d||Sb(y.h,d))){if(!d.K&&Sb(y.h,d)&&y.G==3){try{var w=y.Da.g.parse(m)}catch{w=null}if(Array.isArray(w)&&w.length==3){var L=w;if(L[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<d.F)Wp(y),Hp(y);else break e;Rb(y),Jn(18)}}else y.za=L[1],0<y.za-y.T&&37500>L[2]&&y.F&&y.v==0&&!y.C&&(y.C=Dd(f(y.Za,y),6e3));if(1>=fM(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else _a(y,11)}else if((d.K||y.g==d)&&Wp(y),!R(m))for(L=y.Da.g.parse(m),m=0;m<L.length;m++){let et=L[m];if(y.T=et[0],et=et[1],y.G==2)if(et[0]=="c"){y.K=et[1],y.ia=et[2];let Nn=et[3];Nn!=null&&(y.la=Nn,y.j.info("VER="+y.la));let On=et[4];On!=null&&(y.Aa=On,y.j.info("SVER="+y.Aa));let Hc=et[5];Hc!=null&&typeof Hc=="number"&&0<Hc&&(w=1.5*Hc,y.L=w,y.j.info("backChannelRequestTimeoutMs_="+w)),w=y;let ci=d.g;if(ci){let Gp=ci.g?ci.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gp){var B=w.h;B.g||Gp.indexOf("spdy")==-1&&Gp.indexOf("quic")==-1&&Gp.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Db(B,B.h),B.h=null))}if(w.D){let Pb=ci.g?ci.g.getResponseHeader("X-HTTP-Session-Id"):null;Pb&&(w.ya=Pb,It(w.I,w.D,Pb))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-d.F,y.j.info("Handshake RTT: "+y.R+"ms")),w=y;var Y=d;if(w.qa=jM(w,w.J?w.ia:null,w.W),Y.K){pM(w.h,Y);var lt=Y,Sn=w.L;Sn&&(lt.I=Sn),lt.B&&(Cb(lt),Lp(lt)),w.g=Y}else NM(w);0<y.i.length&&zp(y)}else et[0]!="stop"&&et[0]!="close"||_a(y,7);else y.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?_a(y,7):Ab(y):et[0]!="noop"&&y.l&&y.l.ta(et),y.v=0)}}Sd(4)}catch{}}var Gq=class{constructor(d,m){this.g=d,this.map=m}};function dM(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function hM(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function fM(d){return d.h?1:d.g?d.g.size:0}function Sb(d,m){return d.h?d.h==m:d.g?d.g.has(m):!1}function Db(d,m){d.g?d.g.add(m):d.h=m}function pM(d,m){d.h&&d.h==m?d.h=null:d.g&&d.g.has(m)&&d.g.delete(m)}dM.prototype.cancel=function(){if(this.i=mM(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let d of this.g.values())d.cancel();this.g.clear()}};function mM(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let m=d.i;for(let y of d.g.values())m=m.concat(y.D);return m}return v(d.i)}function Kq(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var m=[],y=d.length,w=0;w<y;w++)m.push(d[w]);return m}m=[],y=0;for(w in d)m[y++]=d[w];return m}function Yq(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var m=[];d=d.length;for(var y=0;y<d;y++)m.push(y);return m}m=[],y=0;for(let w in d)m[y++]=w;return m}}}function gM(d,m){if(d.forEach&&typeof d.forEach=="function")d.forEach(m,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,m,void 0);else for(var y=Yq(d),w=Kq(d),L=w.length,B=0;B<L;B++)m.call(void 0,w[B],y&&y[B],d)}var yM=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qq(d,m){if(d){d=d.split("&");for(var y=0;y<d.length;y++){var w=d[y].indexOf("="),L=null;if(0<=w){var B=d[y].substring(0,w);L=d[y].substring(w+1)}else B=d[y];m(B,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function va(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof va){this.h=d.h,Vp(this,d.j),this.o=d.o,this.g=d.g,jp(this,d.s),this.l=d.l;var m=d.i,y=new Pd;y.i=m.i,m.g&&(y.g=new Map(m.g),y.h=m.h),vM(this,y),this.m=d.m}else d&&(m=String(d).match(yM))?(this.h=!1,Vp(this,m[1]||"",!0),this.o=Rd(m[2]||""),this.g=Rd(m[3]||"",!0),jp(this,m[4]),this.l=Rd(m[5]||"",!0),vM(this,m[6]||"",!0),this.m=Rd(m[7]||"")):(this.h=!1,this.i=new Pd(null,this.h))}va.prototype.toString=function(){var d=[],m=this.j;m&&d.push(Md(m,_M,!0),":");var y=this.g;return(y||m=="file")&&(d.push("//"),(m=this.o)&&d.push(Md(m,_M,!0),"@"),d.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&d.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&d.push("/"),d.push(Md(y,y.charAt(0)=="/"?Zq:Jq,!0))),(y=this.i.toString())&&d.push("?",y),(y=this.m)&&d.push("#",Md(y,t4)),d.join("")};function yo(d){return new va(d)}function Vp(d,m,y){d.j=y?Rd(m,!0):m,d.j&&(d.j=d.j.replace(/:$/,""))}function jp(d,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);d.s=m}else d.s=null}function vM(d,m,y){m instanceof Pd?(d.i=m,n4(d.i,d.h)):(y||(m=Md(m,e4)),d.i=new Pd(m,d.h))}function It(d,m,y){d.i.set(m,y)}function Up(d){return It(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Rd(d,m){return d?m?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Md(d,m,y){return typeof d=="string"?(d=encodeURI(d).replace(m,Xq),y&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Xq(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var _M=/[#\/\?@]/g,Jq=/[#\?:]/g,Zq=/[#\?]/g,e4=/[#\?@]/g,t4=/#/g;function Pd(d,m){this.h=this.g=null,this.i=d||null,this.j=!!m}function gs(d){d.g||(d.g=new Map,d.h=0,d.i&&Qq(d.i,function(m,y){d.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}n=Pd.prototype,n.add=function(d,m){gs(this),this.i=null,d=Bc(this,d);var y=this.g.get(d);return y||this.g.set(d,y=[]),y.push(m),this.h+=1,this};function bM(d,m){gs(d),m=Bc(d,m),d.g.has(m)&&(d.i=null,d.h-=d.g.get(m).length,d.g.delete(m))}function wM(d,m){return gs(d),m=Bc(d,m),d.g.has(m)}n.forEach=function(d,m){gs(this),this.g.forEach(function(y,w){y.forEach(function(L){d.call(m,L,w,this)},this)},this)},n.na=function(){gs(this);let d=Array.from(this.g.values()),m=Array.from(this.g.keys()),y=[];for(let w=0;w<m.length;w++){let L=d[w];for(let B=0;B<L.length;B++)y.push(m[w])}return y},n.V=function(d){gs(this);let m=[];if(typeof d=="string")wM(this,d)&&(m=m.concat(this.g.get(Bc(this,d))));else{d=Array.from(this.g.values());for(let y=0;y<d.length;y++)m=m.concat(d[y])}return m},n.set=function(d,m){return gs(this),this.i=null,d=Bc(this,d),wM(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[m]),this.h+=1,this},n.get=function(d,m){return d?(d=this.V(d),0<d.length?String(d[0]):m):m};function EM(d,m,y){bM(d,m),0<y.length&&(d.i=null,d.g.set(Bc(d,m),v(y)),d.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let d=[],m=Array.from(this.g.keys());for(var y=0;y<m.length;y++){var w=m[y];let B=encodeURIComponent(String(w)),Y=this.V(w);for(w=0;w<Y.length;w++){var L=B;Y[w]!==""&&(L+="="+encodeURIComponent(String(Y[w]))),d.push(L)}}return this.i=d.join("&")};function Bc(d,m){return m=String(m),d.j&&(m=m.toLowerCase()),m}function n4(d,m){m&&!d.j&&(gs(d),d.i=null,d.g.forEach(function(y,w){var L=w.toLowerCase();w!=L&&(bM(this,w),EM(this,L,y))},d)),d.j=m}function r4(d,m){let y=new xd;if(a.Image){let w=new Image;w.onload=p(ys,y,"TestLoadImage: loaded",!0,m,w),w.onerror=p(ys,y,"TestLoadImage: error",!1,m,w),w.onabort=p(ys,y,"TestLoadImage: abort",!1,m,w),w.ontimeout=p(ys,y,"TestLoadImage: timeout",!1,m,w),a.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=d}else m(!1)}function i4(d,m){let y=new xd,w=new AbortController,L=setTimeout(()=>{w.abort(),ys(y,"TestPingServer: timeout",!1,m)},1e4);fetch(d,{signal:w.signal}).then(B=>{clearTimeout(L),B.ok?ys(y,"TestPingServer: ok",!0,m):ys(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(L),ys(y,"TestPingServer: error",!1,m)})}function ys(d,m,y,w,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),w(y)}catch{}}function o4(){this.g=new Bq}function s4(d,m,y){let w=y||"";try{gM(d,function(L,B){let Y=L;l(L)&&(Y=yb(L)),m.push(w+B+"="+encodeURIComponent(Y))})}catch(L){throw m.push(w+"type="+encodeURIComponent("_badmap")),L}}function kd(d){this.l=d.Ub||null,this.j=d.eb||!1}g(kd,vb),kd.prototype.g=function(){return new Bp(this.l,this.j)},kd.prototype.i=function(d){return function(){return d}}({});function Bp(d,m){kn.call(this),this.D=d,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Bp,kn),n=Bp.prototype,n.open=function(d,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=m,this.readyState=1,Od(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(m.body=d),(this.D||a).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nd(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Od(this)),this.g&&(this.readyState=3,Od(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;IM(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function IM(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var m=d.value?d.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!d.done}))&&(this.response=this.responseText+=m)}d.done?Nd(this):Od(this),this.readyState==3&&IM(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,Nd(this))},n.Qa=function(d){this.g&&(this.response=d,Nd(this))},n.ga=function(){this.g&&Nd(this)};function Nd(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Od(d)}n.setRequestHeader=function(d,m){this.u.append(d,m)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let d=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,d.push(y[0]+": "+y[1]),y=m.next();return d.join(`\r
`)};function Od(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Bp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function CM(d){let m="";return j(d,function(y,w){m+=w,m+=":",m+=y,m+=`\r
`}),m}function xb(d,m,y){e:{for(w in y){var w=!1;break e}w=!0}w||(y=CM(y),typeof d=="string"?y!=null&&encodeURIComponent(String(y)):It(d,m,y))}function jt(d){kn.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(jt,kn);var a4=/^https?$/i,c4=["POST","PUT"];n=jt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,m,y,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);m=m?m.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wb.g(),this.v=this.o?ZR(this.o):ZR(wb),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(m,String(d),!0),this.B=!1}catch(B){TM(this,B);return}if(d=y||"",y=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var L in w)y.set(L,w[L]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(let B of w.keys())y.set(B,w.get(B));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(y.keys()).find(B=>B.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(c4,m,void 0))||w||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[B,Y]of y)this.g.setRequestHeader(B,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xM(this),this.u=!0,this.g.send(d),this.u=!1}catch(B){TM(this,B)}};function TM(d,m){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=m,d.m=5,SM(d),$p(d)}function SM(d){d.A||(d.A=!0,Xn(d,"complete"),Xn(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Xn(this,"complete"),Xn(this,"abort"),$p(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$p(this,!0)),jt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?DM(this):this.bb())},n.bb=function(){DM(this)};function DM(d){if(d.h&&typeof s<"u"&&(!d.v[1]||vo(d)!=4||d.Z()!=2)){if(d.u&&vo(d)==4)YR(d.Ea,0,d);else if(Xn(d,"readystatechange"),vo(d)==4){d.h=!1;try{let Y=d.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var w;if(w=Y===0){var L=String(d.D).match(yM)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),w=!a4.test(L?L.toLowerCase():"")}y=w}if(y)Xn(d,"complete"),Xn(d,"success");else{d.m=6;try{var B=2<vo(d)?d.g.statusText:""}catch{B=""}d.l=B+" ["+d.Z()+"]",SM(d)}}finally{$p(d)}}}}function $p(d,m){if(d.g){xM(d);let y=d.g,w=d.v[0]?()=>{}:null;d.g=null,d.v=null,m||Xn(d,"ready");try{y.onreadystatechange=w}catch{}}}function xM(d){d.I&&(a.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function vo(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<vo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var m=this.g.responseText;return d&&m.indexOf(d)==0&&(m=m.substring(d.length)),Uq(m)}};function AM(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function l4(d){let m={};d=(d.g&&2<=vo(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<d.length;w++){if(R(d[w]))continue;var y=M(d[w]);let L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let B=m[L]||[];m[L]=B,B.push(y)}T(m,function(w){return w.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fd(d,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[d]||m}function RM(d){this.Aa=0,this.i=[],this.j=new xd,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fd("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fd("baseRetryDelayMs",5e3,d),this.cb=Fd("retryDelaySeedMs",1e4,d),this.Wa=Fd("forwardChannelMaxRetries",2,d),this.wa=Fd("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new dM(d&&d.concurrentRequestLimit),this.Da=new o4,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=RM.prototype,n.la=8,n.G=1,n.connect=function(d,m,y,w){Jn(0),this.W=d,this.H=m||{},y&&w!==void 0&&(this.H.OSID=y,this.H.OAID=w),this.F=this.X,this.I=jM(this,null,this.W),zp(this)};function Ab(d){if(MM(d),d.G==3){var m=d.U++,y=yo(d.I);if(It(y,"SID",d.K),It(y,"RID",m),It(y,"TYPE","terminate"),Ld(d,y),m=new ms(d,d.j,m),m.L=2,m.v=Up(yo(y)),y=!1,a.navigator&&a.navigator.sendBeacon)try{y=a.navigator.sendBeacon(m.v.toString(),"")}catch{}!y&&a.Image&&(new Image().src=m.v,y=!0),y||(m.g=UM(m.j,null),m.g.ea(m.v)),m.F=Date.now(),Lp(m)}VM(d)}function Hp(d){d.g&&(Mb(d),d.g.cancel(),d.g=null)}function MM(d){Hp(d),d.u&&(a.clearTimeout(d.u),d.u=null),Wp(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function zp(d){if(!hM(d.h)&&!d.s){d.s=!0;var m=d.Ga;ct||po(),Tn||(ct(),Tn=!0),Zt.add(m,d),d.B=0}}function u4(d,m){return fM(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=m.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Dd(f(d.Ga,d,m),LM(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;let L=new ms(this,this.j,d),B=this.o;if(this.S&&(B?(B=b(B),x(B,this.S)):B=this.S),this.m!==null||this.O||(L.H=B,B=null),this.P)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var w=this.i[y];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(m+=w,4096<m){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=kM(this,L,m),y=yo(this.I),It(y,"RID",d),It(y,"CVER",22),this.D&&It(y,"X-HTTP-Session-Id",this.D),Ld(this,y),B&&(this.O?m="headers="+encodeURIComponent(String(CM(B)))+"&"+m:this.m&&xb(y,this.m,B)),Db(this.h,L),this.Ua&&It(y,"TYPE","init"),this.P?(It(y,"$req",m),It(y,"SID","null"),L.T=!0,Ib(L,y,null)):Ib(L,y,m),this.G=2}}else this.G==3&&(d?PM(this,d):this.i.length==0||hM(this.h)||PM(this))};function PM(d,m){var y;m?y=m.l:y=d.U++;let w=yo(d.I);It(w,"SID",d.K),It(w,"RID",y),It(w,"AID",d.T),Ld(d,w),d.m&&d.o&&xb(w,d.m,d.o),y=new ms(d,d.j,y,d.B+1),d.m===null&&(y.H=d.o),m&&(d.i=m.D.concat(d.i)),m=kM(d,y,1e3),y.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Db(d.h,y),Ib(y,w,m)}function Ld(d,m){d.H&&j(d.H,function(y,w){It(m,w,y)}),d.l&&gM({},function(y,w){It(m,w,y)})}function kM(d,m,y){y=Math.min(d.i.length,y);var w=d.l?f(d.l.Na,d.l,d):null;e:{var L=d.i;let B=-1;for(;;){let Y=["count="+y];B==-1?0<y?(B=L[0].g,Y.push("ofs="+B)):B=0:Y.push("ofs="+B);let lt=!0;for(let Sn=0;Sn<y;Sn++){let et=L[Sn].g,Nn=L[Sn].map;if(et-=B,0>et)B=Math.max(0,L[Sn].g-100),lt=!1;else try{s4(Nn,Y,"req"+et+"_")}catch{w&&w(Nn)}}if(lt){w=Y.join("&");break e}}}return d=d.i.splice(0,y),m.D=d,w}function NM(d){if(!d.g&&!d.u){d.Y=1;var m=d.Fa;ct||po(),Tn||(ct(),Tn=!0),Zt.add(m,d),d.v=0}}function Rb(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Dd(f(d.Fa,d),LM(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,OM(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Dd(f(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jn(10),Hp(this),OM(this))};function Mb(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function OM(d){d.g=new ms(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var m=yo(d.qa);It(m,"RID","rpc"),It(m,"SID",d.K),It(m,"AID",d.T),It(m,"CI",d.F?"0":"1"),!d.F&&d.ja&&It(m,"TO",d.ja),It(m,"TYPE","xmlhttp"),Ld(d,m),d.m&&d.o&&xb(m,d.m,d.o),d.L&&(d.g.I=d.L);var y=d.g;d=d.ia,y.L=1,y.v=Up(yo(m)),y.m=null,y.P=!0,cM(y,d)}n.Za=function(){this.C!=null&&(this.C=null,Hp(this),Rb(this),Jn(19))};function Wp(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function FM(d,m){var y=null;if(d.g==m){Wp(d),Mb(d),d.g=null;var w=2}else if(Sb(d.h,m))y=m.D,pM(d.h,m),w=1;else return;if(d.G!=0){if(m.o)if(w==1){y=m.m?m.m.length:0,m=Date.now()-m.F;var L=d.B;w=Np(),Xn(w,new iM(w,y)),zp(d)}else NM(d);else if(L=m.s,L==3||L==0&&0<m.X||!(w==1&&u4(d,m)||w==2&&Rb(d)))switch(y&&0<y.length&&(m=d.h,m.i=m.i.concat(y)),L){case 1:_a(d,5);break;case 4:_a(d,10);break;case 3:_a(d,6);break;default:_a(d,2)}}}function LM(d,m){let y=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(y*=2),y*m}function _a(d,m){if(d.j.info("Error code "+m),m==2){var y=f(d.fb,d),w=d.Xa;let L=!w;w=new va(w||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Vp(w,"https"),Up(w),L?r4(w.toString(),y):i4(w.toString(),y)}else Jn(2);d.G=0,d.l&&d.l.sa(m),VM(d),MM(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Jn(2)):(this.j.info("Failed to ping google.com"),Jn(1))};function VM(d){if(d.G=0,d.ka=[],d.l){let m=mM(d.h);(m.length!=0||d.i.length!=0)&&(_(d.ka,m),_(d.ka,d.i),d.h.i.length=0,v(d.i),d.i.length=0),d.l.ra()}}function jM(d,m,y){var w=y instanceof va?yo(y):new va(y);if(w.g!="")m&&(w.g=m+"."+w.g),jp(w,w.s);else{var L=a.location;w=L.protocol,m=m?m+"."+L.hostname:L.hostname,L=+L.port;var B=new va(null);w&&Vp(B,w),m&&(B.g=m),L&&jp(B,L),y&&(B.l=y),w=B}return y=d.D,m=d.ya,y&&m&&It(w,y,m),It(w,"VER",d.la),Ld(d,w),w}function UM(d,m,y){if(m&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=d.Ca&&!d.pa?new jt(new kd({eb:y})):new jt(d.pa),m.Ha(d.J),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function BM(){}n=BM.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qp(){}qp.prototype.g=function(d,m){return new Sr(d,m)};function Sr(d,m){kn.call(this),this.g=new RM(m),this.l=d,this.h=m&&m.messageUrlParams||null,d=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(d?d["X-WebChannel-Content-Type"]=m.messageContentType:d={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(d?d["X-WebChannel-Client-Profile"]=m.va:d={"X-WebChannel-Client-Profile":m.va}),this.g.S=d,(d=m&&m.Sb)&&!R(d)&&(this.g.m=d),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.D=m,d=this.h,d!==null&&m in d&&(d=this.h,m in d&&delete d[m])),this.j=new $c(this)}g(Sr,kn),Sr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sr.prototype.close=function(){Ab(this.g)},Sr.prototype.o=function(d){var m=this.g;if(typeof d=="string"){var y={};y.__data__=d,d=y}else this.u&&(y={},y.__data__=yb(d),d=y);m.i.push(new Gq(m.Ya++,d)),m.G==3&&zp(m)},Sr.prototype.N=function(){this.g.l=null,delete this.j,Ab(this.g),delete this.g,Sr.aa.N.call(this)};function $M(d){_b.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var m=d.__sm__;if(m){e:{for(let y in m){d=y;break e}d=void 0}(this.i=d)&&(d=this.i,m=m!==null&&d in m?m[d]:void 0),this.data=m}else this.data=d}g($M,_b);function HM(){bb.call(this),this.status=1}g(HM,bb);function $c(d){this.g=d}g($c,BM),$c.prototype.ua=function(){Xn(this.g,"a")},$c.prototype.ta=function(d){Xn(this.g,new $M(d))},$c.prototype.sa=function(d){Xn(this.g,new HM)},$c.prototype.ra=function(){Xn(this.g,"b")},qp.prototype.createWebChannel=qp.prototype.g,Sr.prototype.send=Sr.prototype.o,Sr.prototype.open=Sr.prototype.m,Sr.prototype.close=Sr.prototype.close,dT=Ho.createWebChannelTransport=function(){return new qp},uT=Ho.getStatEventTarget=function(){return Np()},lT=Ho.Event=ga,Jy=Ho.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Op.NO_ERROR=0,Op.TIMEOUT=8,Op.HTTP_ERROR=6,of=Ho.ErrorCode=Op,oM.COMPLETE="complete",cT=Ho.EventType=oM,eM.EventType=Td,Td.OPEN="a",Td.CLOSE="b",Td.ERROR="c",Td.MESSAGE="d",kn.prototype.listen=kn.prototype.K,Yl=Ho.WebChannel=eM,EZ=Ho.FetchXmlHttpFactory=kd,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,aT=Ho.XhrIo=jt}).apply(typeof Xy<"u"?Xy:typeof self<"u"?self:typeof window<"u"?window:{});var zL="@firebase/firestore";var En=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");var mu="11.2.0";var ac=new Ur("@firebase/firestore");function Ql(){return ac.logLevel}function ee(n,...e){if(ac.logLevel<=Dn.DEBUG){let t=e.map(QS);ac.debug(`Firestore (${mu}): ${n}`,...t)}}function zo(n,...e){if(ac.logLevel<=Dn.ERROR){let t=e.map(QS);ac.error(`Firestore (${mu}): ${n}`,...t)}}function ru(n,...e){if(ac.logLevel<=Dn.WARN){let t=e.map(QS);ac.warn(`Firestore (${mu}): ${n}`,...t)}}function QS(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ge(n="Unexpected state"){let e=`FIRESTORE (${mu}) INTERNAL ASSERTION FAILED: `+n;throw zo(e),new Error(e)}function it(n,e){n||ge()}function we(n,e){return n}var $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},re=class extends Dr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ki=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ov=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},gT=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(En.UNAUTHENTICATED))}shutdown(){}},yT=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},vT=class{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ki,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>I(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ki)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string"),new ov(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new En(e)}},_T=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=En.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);let e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}},bT=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new _T(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(En.FIRST_PARTY))}shutdown(){}invalidateToken(){}},wT=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},ET=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){it(this.o===void 0);let r=o=>{o.error!=null&&ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,ee("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string"),this.R=t.token,new wT(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function IZ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var sv=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=IZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function qe(n,e){return n<e?-1:n>e?1:0}function iu(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Rt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?qe(this.nanoseconds,e.nanoseconds):qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Ce=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new Rt(0,0))}static max(){return new n(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var av=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(),r===void 0?r=e.length-t:r>e.length-t&&ge(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Math.sign(e.length-t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $o.fromString(e.substring(4,e.length-2))}},Nt=class n extends av{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new re($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},CZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fr=class n extends av{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return CZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new re($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new re($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new re($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var ue=class n{constructor(e){this.path=e}static fromPath(e){return new n(Nt.fromString(e))}static fromName(e){return new n(Nt.fromString(e).popFirst(5))}static empty(){return new n(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Nt(e.slice()))}};var IT=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};IT.UNKNOWN_ID=-1;function TZ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new Rt(t+1,0):new Rt(t,r));return new cc(i,ue.empty(),e)}function SZ(n){return new cc(n.readTime,n.key,-1)}var cc=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Ce.min(),ue.empty(),-1)}static max(){return new n(Ce.max(),ue.empty(),-1)}};function DZ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ue.comparator(n.documentKey,e.documentKey),t!==0?t:qe(n.largestBatchId,e.largestBatchId))}var xZ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",CT=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gu(n){return I(this,null,function*(){if(n.code!==$.FAILED_PRECONDITION||n.message!==xZ)throw n;ee("LocalStore","Unexpectedly lost primary lease")})}var H=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let l=c;t(e[l]).next(u=>{s[l]=u,++a,a===o&&r(s)},u=>i(u))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function AZ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yu(n){return n.name==="IndexedDbTransactionError"}var XS=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Uv(n){return n==null}function df(n){return n===0&&1/n==-1/0}function RZ(n){return typeof n=="number"&&Number.isInteger(n)&&!df(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function MZ(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=WL(e)),e=PZ(n.get(t),e);return WL(e)}function PZ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function WL(n){return n+""}var kZ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bDe=[...kZ,"documentOverlays"],NZ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],OZ=NZ,FZ=[...OZ,"indexConfiguration","indexState","indexEntries"];var wDe=[...FZ,"globals"];function qL(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function SV(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qt=class n{constructor(e,t){this.comparator=e,this.root=t||Yi.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yi.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eu(this.root,e,this.comparator,!1)}getReverseIterator(){return new eu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eu(this.root,e,this.comparator,!0)}},eu=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Yi=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();let e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}};Yi.EMPTY=null,Yi.RED=!0,Yi.BLACK=!1;Yi.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Yi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var In=class n{constructor(e){this.comparator=e,this.data=new qt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cv(this.data.getIterator())}getIteratorFrom(e){return new cv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},cv=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gi=class n{constructor(e){this.fields=e,e.sort(Fr.comparator)}static empty(){return new n([])}unionWith(e){let t=new In(Fr.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return iu(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var lv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var zn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new lv("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};zn.EMPTY_BYTE_STRING=new zn("");var LZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wo(n){if(it(!!n),typeof n=="string"){let e=0,t=LZ.exec(n);if(it(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(n.seconds),nanos:At(n.nanos)}}function At(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qo(n){return typeof n=="string"?zn.fromBase64String(n):zn.fromUint8Array(n)}function JS(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Bv(n){let e=n.mapValue.fields.__previous_value__;return JS(e)?Bv(e):e}function hf(n){let e=Wo(n.mapValue.fields.__local_write_time__.timestampValue);return new Rt(e.seconds,e.nanos)}var TT=class{constructor(e,t,r,i,o,s,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},uv=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Zy={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?JS(n)?4:xV(n)?9007199254740991:DV(n)?10:11:ge()}function Ji(n,e){if(n===e)return!0;let t=qs(n);if(t!==qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hf(n).isEqual(hf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Wo(i.timestampValue),a=Wo(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qo(i.bytesValue).isEqual(qo(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return At(i.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return At(i.integerValue)===At(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=At(i.doubleValue),a=At(o.doubleValue);return s===a?df(s)===df(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return iu(n.arrayValue.values||[],e.arrayValue.values||[],Ji);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(qL(s)!==qL(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Ji(s[c],a[c])))return!1;return!0}(n,e);default:return ge()}}function ff(n,e){return(n.values||[]).find(t=>Ji(t,e))!==void 0}function ou(n,e){if(n===e)return 0;let t=qs(n),r=qs(e);if(t!==r)return qe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return qe(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=At(o.integerValue||o.doubleValue),c=At(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return GL(n.timestampValue,e.timestampValue);case 4:return GL(hf(n),hf(e));case 5:return qe(n.stringValue,e.stringValue);case 6:return function(o,s){let a=qo(o),c=qo(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let l=0;l<a.length&&l<c.length;l++){let u=qe(a[l],c[l]);if(u!==0)return u}return qe(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=qe(At(o.latitude),At(s.latitude));return a!==0?a:qe(At(o.longitude),At(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return KL(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,l,u;let h=o.fields||{},f=s.fields||{},p=(a=h.value)===null||a===void 0?void 0:a.arrayValue,g=(c=f.value)===null||c===void 0?void 0:c.arrayValue,v=qe(((l=p?.values)===null||l===void 0?void 0:l.length)||0,((u=g?.values)===null||u===void 0?void 0:u.length)||0);return v!==0?v:KL(p,g)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===Zy.mapValue&&s===Zy.mapValue)return 0;if(o===Zy.mapValue)return 1;if(s===Zy.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),l=s.fields||{},u=Object.keys(l);c.sort(),u.sort();for(let h=0;h<c.length&&h<u.length;++h){let f=qe(c[h],u[h]);if(f!==0)return f;let p=ou(a[c[h]],l[u[h]]);if(p!==0)return p}return qe(c.length,u.length)}(n.mapValue,e.mapValue);default:throw ge()}}function GL(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return qe(n,e);let t=Wo(n),r=Wo(e),i=qe(t.seconds,r.seconds);return i!==0?i:qe(t.nanos,r.nanos)}function KL(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=ou(t[i],r[i]);if(o)return o}return qe(t.length,r.length)}function su(n){return ST(n)}function ST(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Wo(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qo(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ue.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=ST(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${ST(t.fields[s])}`;return i+"}"}(n.mapValue):ge()}function nv(n){switch(qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Bv(n);return e?16+nv(e):16;case 5:return 2*n.stringValue.length;case 6:return qo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+nv(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return mc(r.fields,(o,s)=>{i+=o.length+nv(s)}),i}(n.mapValue);default:throw ge()}}function YL(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function DT(n){return!!n&&"integerValue"in n}function ZS(n){return!!n&&"arrayValue"in n}function QL(n){return!!n&&"nullValue"in n}function XL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rv(n){return!!n&&"mapValue"in n}function DV(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function af(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=af(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=af(n.arrayValue.values[t]);return e}return Object.assign({},n)}function xV(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ei=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!rv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=af(t)}setAll(e){let t=Fr.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=af(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());rv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];rv(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mc(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(af(this.value))}};function AV(n){let e=[];return mc(n.fields,(t,r)=>{let i=new Fr([t]);if(rv(r)){let o=AV(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new Gi(e)}var Ii=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Ce.min(),Ce.min(),Ce.min(),Ei.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Ce.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Ce.min(),Ce.min(),Ei.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Ce.min(),Ce.min(),Ei.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ei.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ei.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var au=class{constructor(e,t){this.position=e,this.inclusive=t}};function JL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=ue.comparator(ue.fromName(s.referenceValue),t.key):r=ou(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ZL(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ji(n.position[t],e.position[t]))return!1;return!0}var cu=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function VZ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var dv=class{},on=class n extends dv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new AT(e,t,r):t==="array-contains"?new PT(e,r):t==="in"?new kT(e,r):t==="not-in"?new NT(e,r):t==="array-contains-any"?new OT(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new RT(e,r):new MT(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ou(t,this.value)):t!==null&&qs(this.value)===qs(t)&&this.matchesComparison(ou(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ci=class n extends dv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return RV(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function RV(n){return n.op==="and"}function MV(n){return jZ(n)&&RV(n)}function jZ(n){for(let e of n.filters)if(e instanceof Ci)return!1;return!0}function xT(n){if(n instanceof on)return n.field.canonicalString()+n.op.toString()+su(n.value);if(MV(n))return n.filters.map(e=>xT(e)).join(",");{let e=n.filters.map(t=>xT(t)).join(",");return`${n.op}(${e})`}}function PV(n,e){return n instanceof on?function(r,i){return i instanceof on&&r.op===i.op&&r.field.isEqual(i.field)&&Ji(r.value,i.value)}(n,e):n instanceof Ci?function(r,i){return i instanceof Ci&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&PV(s,i.filters[a]),!0):!1}(n,e):void ge()}function kV(n){return n instanceof on?function(t){return`${t.field.canonicalString()} ${t.op} ${su(t.value)}`}(n):n instanceof Ci?function(t){return t.op.toString()+" {"+t.getFilters().map(kV).join(" ,")+"}"}(n):"Filter"}var AT=class extends on{constructor(e,t,r){super(e,t,r),this.key=ue.fromName(r.referenceValue)}matches(e){let t=ue.comparator(e.key,this.key);return this.matchesComparison(t)}},RT=class extends on{constructor(e,t){super(e,"in",t),this.keys=NV("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},MT=class extends on{constructor(e,t){super(e,"not-in",t),this.keys=NV("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function NV(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ue.fromName(r.referenceValue))}var PT=class extends on{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ZS(t)&&ff(t.arrayValue,this.value)}},kT=class extends on{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ff(this.value.arrayValue,t)}},NT=class extends on{constructor(e,t){super(e,"not-in",t)}matches(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ff(this.value.arrayValue,t)}},OT=class extends on{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ZS(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ff(this.value.arrayValue,r))}};var FT=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function eV(n,e=null,t=[],r=[],i=null,o=null,s=null){return new FT(n,e,t,r,i,o,s)}function eD(n){let e=we(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>xT(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Uv(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>su(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>su(r)).join(",")),e.ue=t}return e.ue}function tD(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!VZ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!PV(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ZL(n.startAt,e.startAt)&&ZL(n.endAt,e.endAt)}function LT(n){return ue.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var lc=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function UZ(n,e,t,r,i,o,s,a){return new lc(n,e,t,r,i,o,s,a)}function nD(n){return new lc(n)}function tV(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function OV(n){return n.collectionGroup!==null}function cf(n){let e=we(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new In(Fr.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new cu(o,r))}),t.has(Fr.keyField().canonicalString())||e.ce.push(new cu(Fr.keyField(),r))}return e.ce}function Qi(n){let e=we(n);return e.le||(e.le=BZ(e,cf(n))),e.le}function BZ(n,e){if(n.limitType==="F")return eV(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new cu(i.field,o)});let t=n.endAt?new au(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new au(n.startAt.position,n.startAt.inclusive):null;return eV(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function VT(n,e){let t=n.filters.concat([e]);return new lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jT(n,e,t){return new lc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function $v(n,e){return tD(Qi(n),Qi(e))&&n.limitType===e.limitType}function FV(n){return`${eD(Qi(n))}|lt:${n.limitType}`}function Xl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>kV(i)).join(", ")}]`),Uv(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>su(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>su(i)).join(",")),`Target(${r})`}(Qi(n))}; limitType=${n.limitType})`}function Hv(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of cf(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let l=JL(s,a,c);return s.inclusive?l<=0:l<0}(r.startAt,cf(r),i)||r.endAt&&!function(s,a,c){let l=JL(s,a,c);return s.inclusive?l>=0:l>0}(r.endAt,cf(r),i))}(n,e)}function $Z(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function LV(n){return(e,t)=>{let r=!1;for(let i of cf(n)){let o=HZ(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function HZ(n,e,t){let r=n.field.isKeyField()?ue.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),l=a.data.field(o);return c!==null&&l!==null?ou(c,l):ge()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}var Go=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mc(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return SV(this.inner)}size(){return this.innerSize}};var zZ=new qt(ue.comparator);function Ko(){return zZ}var VV=new qt(ue.comparator);function sf(...n){let e=VV;for(let t of n)e=e.insert(t.key,t);return e}function jV(n){let e=VV;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function rc(){return lf()}function UV(){return lf()}function lf(){return new Go(n=>n.toString(),(n,e)=>n.isEqual(e))}var WZ=new qt(ue.comparator),qZ=new In(ue.comparator);function ze(...n){let e=qZ;for(let t of n)e=e.add(t);return e}var GZ=new In(qe);function KZ(){return GZ}function rD(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:df(e)?"-0":e}}function BV(n){return{integerValue:""+n}}function YZ(n,e){return RZ(e)?BV(e):rD(n,e)}var lu=class{constructor(){this._=void 0}};function QZ(n,e,t){return n instanceof uu?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&JS(o)&&(o=Bv(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof uc?HV(n,e):n instanceof dc?zV(n,e):function(i,o){let s=$V(i,o),a=nV(s)+nV(i.Pe);return DT(s)&&DT(i.Pe)?BV(a):rD(i.serializer,a)}(n,e)}function XZ(n,e,t){return n instanceof uc?HV(n,e):n instanceof dc?zV(n,e):t}function $V(n,e){return n instanceof du?function(r){return DT(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var uu=class extends lu{},uc=class extends lu{constructor(e){super(),this.elements=e}};function HV(n,e){let t=WV(e);for(let r of n.elements)t.some(i=>Ji(i,r))||t.push(r);return{arrayValue:{values:t}}}var dc=class extends lu{constructor(e){super(),this.elements=e}};function zV(n,e){let t=WV(e);for(let r of n.elements)t=t.filter(i=>!Ji(i,r));return{arrayValue:{values:t}}}var du=class extends lu{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function nV(n){return At(n.integerValue||n.doubleValue)}function WV(n){return ZS(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function JZ(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof uc&&i instanceof uc||r instanceof dc&&i instanceof dc?iu(r.elements,i.elements,Ji):r instanceof du&&i instanceof du?Ji(r.Pe,i.Pe):r instanceof uu&&i instanceof uu}(n.transform,e.transform)}var UT=class{constructor(e,t){this.version=e,this.transformResults=t}},sc=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function iv(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var hu=class{};function qV(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hv(n.key,sc.none()):new hc(n.key,n.data,sc.none());{let t=n.data,r=Ei.empty(),i=new In(Fr.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yo(n.key,r,new Gi(i.toArray()),sc.none())}}function ZZ(n,e,t){n instanceof hc?function(i,o,s){let a=i.value.clone(),c=iV(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Yo?function(i,o,s){if(!iv(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=iV(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(GV(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function uf(n,e,t,r){return n instanceof hc?function(o,s,a,c){if(!iv(o.precondition,s))return a;let l=o.value.clone(),u=oV(o.fieldTransforms,c,s);return l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yo?function(o,s,a,c){if(!iv(o.precondition,s))return a;let l=oV(o.fieldTransforms,c,s),u=s.data;return u.setAll(GV(o)),u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(n,e,t,r):function(o,s,a){return iv(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function eee(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=$V(r.transform,i||null);o!=null&&(t===null&&(t=Ei.empty()),t.set(r.field,o))}return t||null}function rV(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&iu(r,i,(o,s)=>JZ(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var hc=class extends hu{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Yo=class extends hu{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function GV(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function iV(n,e,t){let r=new Map;it(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,XZ(s,a,t[i]))}return r}function oV(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,QZ(o,s,e))}return r}var hv=class extends hu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},BT=class extends hu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var $T=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&ZZ(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=uf(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=uf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=UV();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=qV(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ze())}isEqual(e){return this.batchId===e.batchId&&iu(this.mutations,e.mutations,(t,r)=>rV(t,r))&&iu(this.baseMutations,e.baseMutations,(t,r)=>rV(t,r))}},HT=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){it(e.mutations.length===r.length);let i=function(){return WZ}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var zT=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var WT=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var nn,Qe;function tee(n){switch(n){default:return ge();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function KV(n){if(n===void 0)return zo("GRPC error has no .code"),$.UNKNOWN;switch(n){case nn.OK:return $.OK;case nn.CANCELLED:return $.CANCELLED;case nn.UNKNOWN:return $.UNKNOWN;case nn.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case nn.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case nn.INTERNAL:return $.INTERNAL;case nn.UNAVAILABLE:return $.UNAVAILABLE;case nn.UNAUTHENTICATED:return $.UNAUTHENTICATED;case nn.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case nn.NOT_FOUND:return $.NOT_FOUND;case nn.ALREADY_EXISTS:return $.ALREADY_EXISTS;case nn.PERMISSION_DENIED:return $.PERMISSION_DENIED;case nn.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case nn.ABORTED:return $.ABORTED;case nn.OUT_OF_RANGE:return $.OUT_OF_RANGE;case nn.UNIMPLEMENTED:return $.UNIMPLEMENTED;case nn.DATA_LOSS:return $.DATA_LOSS;default:return ge()}}(Qe=nn||(nn={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";var sV=null;function nee(){return new TextEncoder}var ree=new $o([4294967295,4294967295],0);function aV(n){let e=nee().encode(n),t=new sT;return t.update(e),new Uint8Array(t.digest())}function cV(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new $o([t,r],0),new $o([i,o],0)]}var qT=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ic(`Invalid padding: ${t}`);if(r<0)throw new ic(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ic(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ic(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=$o.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply($o.fromNumber(r)));return i.compare(ree)===1&&(i=new $o([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let t=aV(e),[r,i]=cV(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);if(!this.Ee(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;let t=aV(e),[r,i]=cV(t);for(let o=0;o<this.hashCount;o++){let s=this.de(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ic=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var fv=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(Ce.min(),i,new qt(qe),Ko(),ze())}},pf=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ze(),ze(),ze())}};var tu=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},pv=class{constructor(e,t){this.targetId=e,this.me=t}},mv=class{constructor(e,t,r=zn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},gv=class{constructor(){this.fe=0,this.ge=lV(),this.pe=zn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ze(),t=ze(),r=ze();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ge()}}),new pf(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=lV()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,it(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},GT=class{constructor(e){this.Be=e,this.Le=new Map,this.ke=Ko(),this.qe=ev(),this.Qe=ev(),this.Ke=new qt(qe)}$e(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{let r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:ge()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Le.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){let t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){let o=i.target;if(LT(o))if(r===0){let s=new ue(o.path);this.We(t,s,Ii.newNoDocument(s,Ce.min()))}else it(r===1);else{let s=this.Ze(t);if(s!==r){let a=this.Xe(e),c=a?this.et(a,e,s):1;if(c!==0){this.He(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,l)}sV?.tt(function(u,h,f,p,g){var v,_,D,R,F,V;let U={localCacheCount:u,existenceFilterCount:h.count,databaseId:f.database,projectId:f.projectId},j=h.unchangedNames;return j&&(U.bloomFilter={applied:g===0,hashCount:(v=j?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(R=(D=(_=j?.bits)===null||_===void 0?void 0:_.bitmap)===null||D===void 0?void 0:D.length)!==null&&R!==void 0?R:0,padding:(V=(F=j?.bits)===null||F===void 0?void 0:F.padding)!==null&&V!==void 0?V:0,mightContain:T=>{var b;return(b=p?.mightContain(T))!==null&&b!==void 0&&b}}),U}(s,e.me,this.Be.nt(),a,c))}}}}Xe(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=qo(r).toUint8Array()}catch(c){if(c instanceof lv)return ru("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new qT(s,i,o)}catch(c){return ru(c instanceof ic?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){let r=this.Be.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Be.nt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.We(t,o,null),i++)}),i}it(e){let t=new Map;this.Le.forEach((o,s)=>{let a=this.Ye(s);if(a){if(o.current&&LT(a.target)){let c=new ue(a.target.path);this.st(c).has(s)||this.ot(s,c)||this.We(s,c,Ii.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ze();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let l=this.Ye(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new fv(e,t,this.Ke,this.ke,r);return this.ke=Ko(),this.qe=ev(),this.Qe=ev(),this.Ke=new qt(qe),i}Ue(e,t){if(!this.je(e))return;let r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;let i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Le.delete(e)}Ze(e){let t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Le.get(e);return t||(t=new gv,this.Le.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new In(qe),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new In(qe),this.qe=this.qe.insert(e,t)),t}je(e){let t=this.Ye(e)!==null;return t||ee("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){let t=this.Le.get(e);return t&&t.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new gv),this.Be.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}};function ev(){return new qt(ue.comparator)}function lV(){return new qt(ue.comparator)}var iee={asc:"ASCENDING",desc:"DESCENDING"},oee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},see={and:"AND",or:"OR"},KT=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function YT(n,e){return n.useProto3Json||Uv(e)?e:{value:e}}function yv(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YV(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function aee(n,e){return yv(n,e.toTimestamp())}function Xi(n){return it(!!n),Ce.fromTimestamp(function(t){let r=Wo(t);return new Rt(r.seconds,r.nanos)}(n))}function iD(n,e){return QT(n,e).canonicalString()}function QT(n,e){let t=function(i){return new Nt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function QV(n){let e=Nt.fromString(n);return it(t2(e)),e}function XT(n,e){return iD(n.databaseId,e.path)}function hT(n,e){let t=QV(e);if(t.get(1)!==n.databaseId.projectId)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ue(JV(t))}function XV(n,e){return iD(n.databaseId,e)}function cee(n){let e=QV(n);return e.length===4?Nt.emptyPath():JV(e)}function JT(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JV(n){return it(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function uV(n,e,t){return{name:XT(n,e),fields:t.value.mapValue.fields}}function lee(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ge()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,u){return l.useProto3Json?(it(u===void 0||typeof u=="string"),zn.fromBase64String(u||"")):(it(u===void 0||u instanceof Buffer||u instanceof Uint8Array),zn.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let u=l.code===void 0?$.UNKNOWN:KV(l.code);return new re(u,l.message||"")}(s);t=new mv(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=hT(n,r.document.name),o=Xi(r.document.updateTime),s=r.document.createTime?Xi(r.document.createTime):Ce.min(),a=new Ei({mapValue:{fields:r.document.fields}}),c=Ii.newFoundDocument(i,o,s,a),l=r.targetIds||[],u=r.removedTargetIds||[];t=new tu(l,u,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=hT(n,r.document),o=r.readTime?Xi(r.readTime):Ce.min(),s=Ii.newNoDocument(i,o),a=r.removedTargetIds||[];t=new tu([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=hT(n,r.document),o=r.removedTargetIds||[];t=new tu([],o,i,null)}else{if(!("filter"in e))return ge();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new WT(i,o),a=r.targetId;t=new pv(a,s)}}return t}function uee(n,e){let t;if(e instanceof hc)t={update:uV(n,e.key,e.value)};else if(e instanceof hv)t={delete:XT(n,e.key)};else if(e instanceof Yo)t={update:uV(n,e.key,e.data),updateMask:_ee(e.fieldMask)};else{if(!(e instanceof BT))return ge();t={verify:XT(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof uu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof uc)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof dc)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof du)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw ge()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:aee(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ge()}(n,e.precondition)),t}function dee(n,e){return n&&n.length>0?(it(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Xi(i.updateTime):Xi(o);return s.isEqual(Ce.min())&&(s=Xi(o)),new UT(s,i.transformResults||[])}(t,e))):[]}function hee(n,e){return{documents:[XV(n,e.path)]}}function fee(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=XV(n,i);let o=function(l){if(l.length!==0)return e2(Ci.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(u=>function(f){return{field:Jl(f.field),direction:gee(f.dir)}}(u))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=YT(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ct:t,parent:i}}function pee(n){let e=cee(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){it(r===1);let u=t.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];t.where&&(o=function(h){let f=ZV(h);return f instanceof Ci&&MV(f)?f.getFilters():[f]}(t.where));let s=[];t.orderBy&&(s=function(h){return h.map(f=>function(g){return new cu(Zl(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(h){let f;return f=typeof h=="object"?h.value:h,Uv(f)?null:f}(t.limit));let c=null;t.startAt&&(c=function(h){let f=!!h.before,p=h.values||[];return new au(p,f)}(t.startAt));let l=null;return t.endAt&&(l=function(h){let f=!h.before,p=h.values||[];return new au(p,f)}(t.endAt)),UZ(e,i,s,o,a,"F",c,l)}function mee(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ZV(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Zl(t.unaryFilter.field);return on.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Zl(t.unaryFilter.field);return on.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Zl(t.unaryFilter.field);return on.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Zl(t.unaryFilter.field);return on.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(n):n.fieldFilter!==void 0?function(t){return on.create(Zl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ci.create(t.compositeFilter.filters.map(r=>ZV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(t.compositeFilter.op))}(n):ge()}function gee(n){return iee[n]}function yee(n){return oee[n]}function vee(n){return see[n]}function Jl(n){return{fieldPath:n.canonicalString()}}function Zl(n){return Fr.fromServerFormat(n.fieldPath)}function e2(n){return n instanceof on?function(t){if(t.op==="=="){if(XL(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NAN"}};if(QL(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(XL(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NAN"}};if(QL(t.value))return{unaryFilter:{field:Jl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(t.field),op:yee(t.op),value:t.value}}}(n):n instanceof Ci?function(t){let r=t.getFilters().map(i=>e2(i));return r.length===1?r[0]:{compositeFilter:{op:vee(t.op),filters:r}}}(n):ge()}function _ee(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function t2(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var mf=class n{constructor(e,t,r,i,o=Ce.min(),s=Ce.min(),a=zn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ZT=class{constructor(e){this.ht=e}};function bee(n){let e=pee({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jT(e,e.limit,"L"):e}var vv=class{constructor(){}dt(e,t){this.Et(e,t),t.At()}Et(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(At(e.integerValue));else if("doubleValue"in e){let r=At(e.doubleValue);isNaN(r)?this.Rt(t,13):(this.Rt(t,15),df(r)?t.Vt(0):t.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(t,20),typeof r=="string"&&(r=Wo(r)),t.ft(`${r.seconds||""}`),t.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(qo(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Rt(t,45),t.Vt(r.latitude||0),t.Vt(r.longitude||0)}else"mapValue"in e?xV(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):DV(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):ge()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){let r=e.fields||{};this.Rt(t,55);for(let i of Object.keys(r))this.gt(i,t),this.Et(r[i],t)}bt(e,t){var r,i;let o=e.fields||{};this.Rt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(t,15),t.Vt(At(a)),this.gt(s,t),this.Et(o[s],t)}vt(e,t){let r=e.values||[];this.Rt(t,50);for(let i of r)this.Et(i,t)}St(e,t){this.Rt(t,37),ue.fromName(e).path.forEach(r=>{this.Rt(t,60),this.Ct(r,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}};vv.Ft=new vv;var eS=class{constructor(){this.ln=new tS}addToCollectionParentIndex(e,t){return this.ln.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(cc.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(cc.min())}updateCollectionGroup(e,t,r){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}},tS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new In(Nt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new In(Nt.comparator)).toArray()}};var IDe=new Uint8Array(0);var dV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Qr=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};Qr.DEFAULT_COLLECTION_PERCENTILE=10,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qr.DEFAULT=new Qr(41943040,Qr.DEFAULT_COLLECTION_PERCENTILE,Qr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qr.DISABLED=new Qr(-1,0,0);var gf=class n{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new n(0)}static Qn(){return new n(-1)}};function hV([n,e],[t,r]){let i=qe(n,t);return i===0?qe(e,r):i}var nS=class{constructor(e){this.Gn=e,this.buffer=new In(hV),this.zn=0}jn(){return++this.zn}Hn(e){let t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();hV(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},rS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){ee("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>I(this,null,function*(){this.Jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){yu(t)?ee("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield gu(t)}yield this.Yn(3e5)}))}},iS=class{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return H.resolve(XS.oe);let r=new nS(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ee("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(dV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dV):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,a,c,l,u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,s=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,t))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(l=Date.now(),Ql()<=Dn.DEBUG&&ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${h} documents in `+(l-c)+`ms
Total Duration: ${l-u}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:h})))}};function wee(n,e){return new iS(n,e)}var oS=class{constructor(){this.changes=new Go(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?H.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sS=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var aS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&uf(r.mutation,i,Gi.empty(),Rt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ze()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ze()){let i=rc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=sf();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=rc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ze()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=Ko(),s=lf(),a=function(){return lf()}();return t.forEach((c,l)=>{let u=r.get(l.key);i.has(l.key)&&(u===void 0||u.mutation instanceof Yo)?o=o.insert(l.key,l):u!==void 0?(s.set(l.key,u.mutation.getFieldMask()),uf(u.mutation,l,u.mutation.getFieldMask(),Rt.now())):s.set(l.key,Gi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((l,u)=>s.set(l,u)),t.forEach((l,u)=>{var h;return a.set(l,new sS(u,(h=s.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,t){let r=lf(),i=new qt((s,a)=>s-a),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let u=r.get(c)||Gi.empty();u=a.applyToLocalView(l,u),r.set(c,u);let h=(i.get(a.batchId)||ze()).add(c);i=i.insert(a.batchId,h)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,u=c.value,h=UV();u.forEach(f=>{if(!o.has(f)){let p=qV(t.get(f),r.get(f));p!==null&&h.set(f,p),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,h))}return H.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return ue.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):OV(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):H.resolve(rc()),a=-1,c=o;return s.next(l=>H.forEach(l,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),o.get(u)?H.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{c=c.insert(u,f)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,c,l,ze())).next(u=>({batchId:a,changes:jV(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ue(t)).next(r=>{let i=sf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=sf();return this.indexManager.getCollectionParents(e,o).next(a=>H.forEach(a,c=>{let l=function(h,f){return new lc(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(u=>{u.forEach((h,f)=>{s=s.insert(h,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,l)=>{let u=l.getKey();s.get(u)===null&&(s=s.insert(u,Ii.newInvalidDocument(u)))});let a=sf();return s.forEach((c,l)=>{let u=o.get(c);u!==void 0&&uf(u.mutation,l,Gi.empty(),Rt.now()),Hv(t,l)&&(a=a.insert(c,l))}),a})}};var cS=class{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return H.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xi(i.createTime)}}(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:bee(i.bundledQuery),readTime:Xi(i.readTime)}}(t)),H.resolve()}};var lS=class{constructor(){this.overlays=new qt(ue.comparator),this.dr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){let r=rc();return H.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),H.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.dr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.dr.delete(r)),H.resolve()}getOverlaysForCollection(e,t,r){let i=rc(),o=t.length+1,s=new ue(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return H.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new qt((l,u)=>l-u),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let u=o.get(l.largestBatchId);u===null&&(u=rc(),o=o.insert(l.largestBatchId,u)),u.set(l.getKey(),l)}}let a=rc(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,u)=>a.set(l,u)),!(a.size()>=i)););return H.resolve(a)}Tt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new zT(t,r));let o=this.dr.get(t);o===void 0&&(o=ze(),this.dr.set(t,o)),this.dr.set(t,o.add(r.key))}};var uS=class{constructor(){this.sessionToken=zn.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}};var yf=class{constructor(){this.Er=new In(rn.Ar),this.Rr=new In(rn.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,t){let r=new rn(e,t);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new rn(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){let t=new ue(new Nt([])),r=new rn(t,e),i=new rn(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){let t=new ue(new Nt([])),r=new rn(t,e),i=new rn(t,e+1),o=ze();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new rn(e,0),r=this.Er.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},rn=class{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ue.comparator(e.key,t.key)||qe(e.br,t.br)}static Vr(e,t){return qe(e.br,t.br)||ue.comparator(e.key,t.key)}};var dS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new In(rn.Ar)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new $T(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.vr=this.vr.add(new rn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(s)}lookupMutationBatch(e,t){return H.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Fr(r),o=i<0?0:i;return H.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new rn(t,0),i=new rn(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{let a=this.Cr(s.br);o.push(a)}),H.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new In(qe);return t.forEach(i=>{let o=new rn(i,0),s=new rn(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],a=>{r=r.add(a.br)})}),H.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;ue.isDocumentKey(o)||(o=o.child(""));let s=new rn(new ue(o),0),a=new In(qe);return this.vr.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.br)),!0)},s),H.resolve(this.Mr(a))}Mr(e){let t=[];return e.forEach(r=>{let i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){it(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return H.forEach(t.mutations,i=>{let o=new rn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,t){let r=new rn(t,0),i=this.vr.firstAfterOrEqual(r);return H.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){let t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hS=class{constructor(e){this.Nr=e,this.docs=function(){return new qt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return H.resolve(r?r.document.mutableCopy():Ii.newInvalidDocument(t))}getEntries(e,t){let r=Ko();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ii.newInvalidDocument(i))}),H.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ko(),s=t.path,a=new ue(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:u}}=c.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||DZ(SZ(u),r)<=0||(i.has(u.key)||Hv(t,u))&&(o=o.insert(u.key,u.mutableCopy()))}return H.resolve(o)}getAllFromCollectionGroup(e,t,r,i){ge()}Br(e,t){return H.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new fS(this)}getSize(e){return H.resolve(this.size)}},fS=class extends oS{constructor(e){super(),this.hr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),H.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}};var pS=class{constructor(e){this.persistence=e,this.Lr=new Go(t=>eD(t),tD),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.kr=0,this.qr=new yf,this.targetCount=0,this.Qr=gf.qn()}forEachTarget(e,t){return this.Lr.forEach((r,i)=>t(i)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),H.resolve()}Un(e){this.Lr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Qr=new gf(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Un(t),H.resolve()}removeTargetData(e,t){return this.Lr.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Lr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Lr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),H.waitFor(o).next(()=>i)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){let r=this.Lr.get(t)||null;return H.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),H.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),H.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),H.resolve()}getMatchingKeysForTargetId(e,t){let r=this.qr.Sr(t);return H.resolve(r)}containsKey(e,t){return H.resolve(this.qr.containsKey(t))}};var _v=class{constructor(e,t){this.Kr={},this.overlays={},this.$r=new XS(0),this.Ur=!1,this.Ur=!0,this.Wr=new uS,this.referenceDelegate=e(this),this.Gr=new pS(this),this.indexManager=new eS,this.remoteDocumentCache=function(i){return new hS(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new ZT(t),this.jr=new cS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new dS(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){ee("MemoryPersistence","Starting transaction:",e);let i=new mS(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return H.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}},mS=class extends CT{constructor(e){super(),this.currentSequenceNumber=e}},gS=class n{constructor(e){this.persistence=e,this.Zr=new yf,this.Xr=null}static ei(e){return new n(e)}get ti(){if(this.Xr)return this.Xr;throw ge()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),H.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),H.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.ti,r=>{let i=ue.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,Ce.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return H.or([()=>H.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}},bv=class n{constructor(e,t){this.persistence=e,this.ri=new Go(r=>MZ(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wee(this,t)}static ei(e,t){return new n(e,t)}Hr(){}Jr(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){let t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return H.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?H.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Br(e,s=>this.ir(e,s,t).next(a=>{a||(r++,o.removeEntry(s,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),H.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),H.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=nv(e.data.value)),t}ir(e,t,r){return H.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.ri.get(t);return H.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var yS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=ze(),i=ze();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var vS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var _S=class{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return QM()?8:AZ(Fn())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new vS;return this.ts(e,t,s).next(a=>{if(o.result=a,this.Hi)return this.ns(e,t,s,a.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?(Ql()<=Dn.DEBUG&&ee("QueryEngine","SDK will not create cache indexes for query:",Xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),H.resolve()):(Ql()<=Dn.DEBUG&&ee("QueryEngine","Query:",Xl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Ql()<=Dn.DEBUG&&ee("QueryEngine","The SDK decides to create cache indexes for query:",Xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(t))):H.resolve())}Xi(e,t){if(tV(t))return H.resolve(null);let r=Qi(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=jT(t,null,"F"),r=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ze(...o);return this.Zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.rs(t,a);return this.ss(t,l,s,c.readTime)?this.Xi(e,jT(t,null,"F")):this.os(e,l,t,c)}))})))}es(e,t,r,i){return tV(t)||i.isEqual(Ce.min())?H.resolve(null):this.Zi.getDocuments(e,r).next(o=>{let s=this.rs(t,o);return this.ss(t,s,r,i)?H.resolve(null):(Ql()<=Dn.DEBUG&&ee("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xl(t)),this.os(e,s,t,TZ(i,-1)).next(a=>a))})}rs(e,t){let r=new In(LV(e));return t.forEach((i,o)=>{Hv(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return Ql()<=Dn.DEBUG&&ee("QueryEngine","Using full collection scan to execute query:",Xl(t)),this.Zi.getDocumentsMatchingQuery(e,t,cc.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var bS=class{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new qt(qe),this.cs=new Go(o=>eD(o),tD),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aS(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}};function Eee(n,e,t,r){return new bS(n,e,t,r)}function n2(n,e){return I(this,null,function*(){let t=we(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=ze();for(let l of i){s.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}for(let l of o){a.push(l.batchId);for(let u of l.mutations)c=c.add(u.key)}return t.localDocuments.getDocuments(r,c).next(l=>({Ts:l,removedBatchIds:s,addedBatchIds:a}))})})})}function Iee(n,e){let t=we(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,u){let h=l.batch,f=h.keys(),p=H.resolve();return f.forEach(g=>{p=p.next(()=>u.getEntry(c,g)).next(v=>{let _=l.docVersions.get(g);it(_!==null),v.version.compareTo(_)<0&&(h.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),u.addEntry(v)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=ze();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function r2(n){let e=we(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Cee(n,e){let t=we(n),r=e.snapshotVersion,i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;let a=[];e.targetChanges.forEach((u,h)=>{let f=i.get(h);if(!f)return;a.push(t.Gr.removeMatchingKeys(o,u.removedDocuments,h).next(()=>t.Gr.addMatchingKeys(o,u.addedDocuments,h)));let p=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?p=p.withResumeToken(zn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(h,p),function(v,_,D){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(f,p,u)&&a.push(t.Gr.updateTargetData(o,p))});let c=Ko(),l=ze();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,u))}),a.push(Tee(o,s,e.documentUpdates).next(u=>{c=u.Is,l=u.ds})),!r.isEqual(Ce.min())){let u=t.Gr.getLastRemoteSnapshotVersion(o).next(h=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(u)}return H.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,l)).next(()=>c)}).then(o=>(t.us=i,o))}function Tee(n,e,t){let r=ze(),i=ze();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=Ko();return t.forEach((a,c)=>{let l=o.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(Ce.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ee("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Is:s,ds:i}})}function See(n,e){let t=we(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Dee(n,e){let t=we(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,H.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new mf(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}function wS(n,e,t){return I(this,null,function*(){let r=we(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!yu(s))throw s;ee("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)})}function fV(n,e,t){let r=we(n),i=Ce.min(),o=ze();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,l,u){let h=we(c),f=h.cs.get(u);return f!==void 0?H.resolve(h.us.get(f)):h.Gr.getTargetData(l,u)}(r,s,Qi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:Ce.min(),t?o:ze())).next(a=>(xee(r,$Z(e),a),{documents:a,Es:o})))}function xee(n,e,t){let r=n.ls.get(e)||Ce.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}var wv=class{constructor(){this.activeTargetIds=KZ()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var ES=class{constructor(){this._o=new wv,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new wv,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var IS=class{uo(e){}shutdown(){}};var Ev=class{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){ee("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.To)e(0)}Po(){ee("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var tv=null;function fT(){return tv===null?tv=function(){return 268435456+Math.round(2147483648*Math.random())}():tv++,"0x"+tv.toString(16)}var Aee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var CS=class{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}};var Hn="WebChannelConnection",TS=class extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){let a=fT(),c=this.No(t,r.toUriEncodedString());ee("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(l,o,s),this.Lo(t,c,l,i).then(u=>(ee("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw ru("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",c,"request:",i),u})}ko(t,r,i,o,s,a){return this.Oo(t,r,i,o,s)}Bo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+mu}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){let i=Aee[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,t,r,i){let o=fT();return new Promise((s,a)=>{let c=new aT;c.setWithCredentials(!0),c.listenOnce(cT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case of.NO_ERROR:let u=c.getResponseJson();ee(Hn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case of.TIMEOUT:ee(Hn,`RPC '${e}' ${o} timed out`),a(new re($.DEADLINE_EXCEEDED,"Request time out"));break;case of.HTTP_ERROR:let h=c.getStatus();if(ee(Hn,`RPC '${e}' ${o} failed with status:`,h,"response text:",c.getResponseText()),h>0){let f=c.getResponseJson();Array.isArray(f)&&(f=f[0]);let p=f?.error;if(p&&p.status&&p.message){let g=function(_){let D=_.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(D)>=0?D:$.UNKNOWN}(p.status);a(new re(g,p.message))}else a(new re($.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new re($.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{ee(Hn,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);ee(Hn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",l,r,15)})}qo(e,t,r){let i=fT(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=dT(),a=uT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Bo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let u=o.join("");ee(Hn,`Creating RPC '${e}' stream ${i}: ${u}`,c);let h=s.createWebChannel(u,c),f=!1,p=!1,g=new CS({Eo:_=>{p?ee(Hn,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(f||(ee(Hn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),f=!0),ee(Hn,`RPC '${e}' stream ${i} sending:`,_),h.send(_))},Ao:()=>h.close()}),v=(_,D,R)=>{_.listen(D,F=>{try{R(F)}catch(V){setTimeout(()=>{throw V},0)}})};return v(h,Yl.EventType.OPEN,()=>{p||(ee(Hn,`RPC '${e}' stream ${i} transport opened.`),g.So())}),v(h,Yl.EventType.CLOSE,()=>{p||(p=!0,ee(Hn,`RPC '${e}' stream ${i} transport closed`),g.Do())}),v(h,Yl.EventType.ERROR,_=>{p||(p=!0,ru(Hn,`RPC '${e}' stream ${i} transport errored:`,_),g.Do(new re($.UNAVAILABLE,"The operation could not be completed")))}),v(h,Yl.EventType.MESSAGE,_=>{var D;if(!p){let R=_.data[0];it(!!R);let F=R,V=F?.error||((D=F[0])===null||D===void 0?void 0:D.error);if(V){ee(Hn,`RPC '${e}' stream ${i} received error:`,V);let U=V.status,j=function(E){let x=nn[E];if(x!==void 0)return KV(x)}(U),T=V.message;j===void 0&&(j=$.INTERNAL,T="Unknown error status: "+U+" with message "+V.message),p=!0,g.Do(new re(j,T)),h.close()}else ee(Hn,`RPC '${e}' stream ${i} received:`,R),g.vo(R)}}),v(a,lT.STAT_EVENT,_=>{_.stat===Jy.PROXY?ee(Hn,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===Jy.NOPROXY&&ee(Hn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.bo()},0),g}};function pT(){return typeof document<"u"?document:null}function zv(n){return new KT(n,!0)}var Iv=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();let t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&ee("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}};var Cv=class{constructor(e,t,r,i,o,s,a,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Iv(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}stop(){return I(this,null,function*(){this.i_()&&(yield this.close(0))})}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}u_(){return I(this,null,function*(){if(this.s_())return this.close(0)})}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}close(e,t){return I(this,null,function*(){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(zo(t.toString()),zo("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.po(t)})}P_(){}auth(){this.state=1;let e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{let i=new re($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,t){let r=this.T_(this.Xo);this.stream=this.E_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(()=>I(this,null,function*(){this.state=0,this.start()}))}d_(e){return ee("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(ee("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},SS=class extends Cv{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}E_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();let t=lee(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ce.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?Ce.min():s.readTime?Xi(s.readTime):Ce.min()}(e);return this.listener.R_(t,r)}V_(e){let t={};t.database=JT(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=LT(c)?{documents:hee(o,c)}:{query:fee(o,c).ct},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=YV(o,s.resumeToken);let l=YT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(Ce.min())>0){a.readTime=yv(o,s.snapshotVersion.toTimestamp());let l=YT(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=mee(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){let t={};t.database=JT(this.serializer),t.removeTarget=e,this.c_(t)}},DS=class extends Cv{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,t){return this.connection.qo("Write",e,t)}A_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();let t=dee(e.writeResults,e.commitTime),r=Xi(e.commitTime);return this.listener.y_(r,t)}w_(){let e={};e.database=JT(this.serializer),this.c_(e)}g_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>uee(this.serializer,r))};this.c_(t)}};var xS=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,QT(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re($.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.ko(e,QT(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re($.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}},AS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(zo(t),this.C_=!1):ee("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}};var RS=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(()=>I(this,null,function*(){gc(this)&&(ee("RemoteStore","Restarting streams for network reachability change."),yield function(c){return I(this,null,function*(){let l=we(c);l.k_.add(4),yield Cf(l),l.K_.set("Unknown"),l.k_.delete(4),yield Wv(l)})}(this))}))}),this.K_=new AS(r,i)}};function Wv(n){return I(this,null,function*(){if(gc(n))for(let e of n.q_)yield e(!0)})}function Cf(n){return I(this,null,function*(){for(let e of n.q_)yield e(!1)})}function i2(n,e){let t=we(n);t.L_.has(e.targetId)||(t.L_.set(e.targetId,e),cD(t)?aD(t):vu(t).s_()&&sD(t,e))}function oD(n,e){let t=we(n),r=vu(t);t.L_.delete(e),r.s_()&&o2(t,e),t.L_.size===0&&(r.s_()?r.a_():gc(t)&&t.K_.set("Unknown"))}function sD(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vu(n).V_(e)}function o2(n,e){n.U_.xe(e),vu(n).m_(e)}function aD(n){n.U_=new GT({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.L_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),vu(n).start(),n.K_.F_()}function cD(n){return gc(n)&&!vu(n).i_()&&n.L_.size>0}function gc(n){return we(n).k_.size===0}function s2(n){n.U_=void 0}function Ree(n){return I(this,null,function*(){n.K_.set("Online")})}function Mee(n){return I(this,null,function*(){n.L_.forEach((e,t)=>{sD(n,e)})})}function Pee(n,e){return I(this,null,function*(){s2(n),cD(n)?(n.K_.O_(e),aD(n)):n.K_.set("Unknown")})}function kee(n,e,t){return I(this,null,function*(){if(n.K_.set("Online"),e instanceof mv&&e.state===2&&e.cause)try{yield function(i,o){return I(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.L_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.L_.delete(a),i.U_.removeTarget(a))})}(n,e)}catch(r){ee("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Tv(n,r)}else if(e instanceof tu?n.U_.$e(e):e instanceof pv?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Ce.min()))try{let r=yield r2(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.U_.it(s);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let u=o.L_.get(l);u&&o.L_.set(l,u.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,l)=>{let u=o.L_.get(c);if(!u)return;o.L_.set(c,u.withResumeToken(zn.EMPTY_BYTE_STRING,u.snapshotVersion)),o2(o,c);let h=new mf(u.target,c,l,u.sequenceNumber);sD(o,h)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ee("RemoteStore","Failed to raise snapshot:",r),yield Tv(n,r)}})}function Tv(n,e,t){return I(this,null,function*(){if(!yu(e))throw e;n.k_.add(1),yield Cf(n),n.K_.set("Offline"),t||(t=()=>r2(n.localStore)),n.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){ee("RemoteStore","Retrying IndexedDB access"),yield t(),n.k_.delete(1),yield Wv(n)}))})}function a2(n,e){return e().catch(t=>Tv(n,t,e))}function qv(n){return I(this,null,function*(){let e=we(n),t=Gs(e),r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;Nee(e);)try{let i=yield See(e.localStore,r);if(i===null){e.B_.length===0&&t.a_();break}r=i.batchId,Oee(e,i)}catch(i){yield Tv(e,i)}c2(e)&&l2(e)})}function Nee(n){return gc(n)&&n.B_.length<10}function Oee(n,e){n.B_.push(e);let t=Gs(n);t.s_()&&t.f_&&t.g_(e.mutations)}function c2(n){return gc(n)&&!Gs(n).i_()&&n.B_.length>0}function l2(n){Gs(n).start()}function Fee(n){return I(this,null,function*(){Gs(n).w_()})}function Lee(n){return I(this,null,function*(){let e=Gs(n);for(let t of n.B_)e.g_(t.mutations)})}function Vee(n,e,t){return I(this,null,function*(){let r=n.B_.shift(),i=HT.from(r,e,t);yield a2(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield qv(n)})}function jee(n,e){return I(this,null,function*(){e&&Gs(n).f_&&(yield function(r,i){return I(this,null,function*(){if(function(s){return tee(s)&&s!==$.ABORTED}(i.code)){let o=r.B_.shift();Gs(r).__(),yield a2(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield qv(r)}})}(n,e)),c2(n)&&l2(n)})}function pV(n,e){return I(this,null,function*(){let t=we(n);t.asyncQueue.verifyOperationInProgress(),ee("RemoteStore","RemoteStore received new credentials");let r=gc(t);t.k_.add(3),yield Cf(t),r&&t.K_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),yield Wv(t)})}function Uee(n,e){return I(this,null,function*(){let t=we(n);e?(t.k_.delete(2),yield Wv(t)):e||(t.k_.add(2),yield Cf(t),t.K_.set("Unknown"))})}function vu(n){return n.W_||(n.W_=function(t,r,i){let o=we(t);return o.b_(),new SS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:Ree.bind(null,n),mo:Mee.bind(null,n),po:Pee.bind(null,n),R_:kee.bind(null,n)}),n.q_.push(e=>I(this,null,function*(){e?(n.W_.__(),cD(n)?aD(n):n.K_.set("Unknown")):(yield n.W_.stop(),s2(n))}))),n.W_}function Gs(n){return n.G_||(n.G_=function(t,r,i){let o=we(t);return o.b_(),new DS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:Fee.bind(null,n),po:jee.bind(null,n),p_:Lee.bind(null,n),y_:Vee.bind(null,n)}),n.q_.push(e=>I(this,null,function*(){e?(n.G_.__(),yield qv(n)):(yield n.G_.stop(),n.B_.length>0&&(ee("RemoteStore",`Stopping write stream with ${n.B_.length} pending writes`),n.B_=[]))}))),n.G_}var MS=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lD(n,e){if(zo("AsyncQueue",`${e}: ${n}`),yu(n))return new re($.UNAVAILABLE,`${e}: ${n}`);throw n}var Sv=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||ue.comparator(t.key,r.key):(t,r)=>ue.comparator(t.key,r.key),this.keyedMap=sf(),this.sortedSet=new qt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Dv=class{constructor(){this.z_=new qt(ue.comparator)}track(e){let t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):ge():this.z_=this.z_.insert(t,e)}j_(){let e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}},fu=class n{constructor(e,t,r,i,o,s,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Sv.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$v(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var PS=class{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}},kS=class{constructor(){this.queries=mV(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){let i=we(t),o=i.queries;i.queries=mV(),o.forEach((s,a)=>{for(let c of a.J_)c.onError(r)})})(this,new re($.ABORTED,"Firestore shutting down"))}};function mV(){return new Go(n=>FV(n),$v)}function u2(n,e){return I(this,null,function*(){let t=we(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new PS,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=yield t.onListen(i,!0);break;case 1:o.H_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=lD(s,`Initialization of query '${Xl(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&uD(t)})}function d2(n,e){return I(this,null,function*(){let t=we(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Bee(n,e){let t=we(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.J_)a.ta(i)&&(r=!0);s.H_=i}}r&&uD(t)}function $ee(n,e,t){let r=we(n),i=r.queries.get(e);if(i)for(let o of i.J_)o.onError(t);r.queries.delete(e)}function uD(n){n.X_.forEach(e=>{e.next()})}var NS,gV;(gV=NS||(NS={})).na="default",gV.Cache="cache";var xv=class{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;let r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;let t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==NS.Cache}};var Av=class{constructor(e){this.key=e}},Rv=class{constructor(e){this.key=e}},OS=class{constructor(e,t){this.query=e,this.Ea=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=ze(),this.mutatedKeys=ze(),this.Va=LV(e),this.ma=new Sv(this.Va)}get fa(){return this.Ea}ga(e,t){let r=t?t.pa:new Dv,i=t?t.ma:this.ma,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{let f=i.get(u),p=Hv(this.query,h)?h:null,g=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations),_=!1;f&&p?f.data.isEqual(p.data)?g!==v&&(r.track({type:3,doc:p}),_=!0):this.ya(f,p)||(r.track({type:2,doc:p}),_=!0,(c&&this.Va(p,c)>0||l&&this.Va(p,l)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),_=!0):f&&!p&&(r.track({type:1,doc:f}),_=!0,(c||l)&&(a=!0)),_&&(p?(s=s.add(p),o=v?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ma:s,pa:r,ss:a,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;let s=e.pa.j_();s.sort((u,h)=>function(p,g){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge()}};return v(p)-v(g)}(u.type,h.type)||this.Va(u.doc,h.doc)),this.wa(r),i=i!=null&&i;let a=t&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,l=c!==this.Aa;return this.Aa=c,s.length!==0||l?{snapshot:new fu(this.query,e.ma,o,s,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Dv,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.Ea=this.Ea.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ea=this.Ea.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];let e=this.Ra;this.Ra=ze(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});let t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new Rv(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new Av(r))}),t}va(e){this.Ea=e.Es,this.Ra=ze();let t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return fu.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}},FS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},LS=class{constructor(e){this.key=e,this.Fa=!1}},VS=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new Go(a=>FV(a),$v),this.Oa=new Map,this.Na=new Set,this.Ba=new qt(ue.comparator),this.La=new Map,this.ka=new yf,this.qa={},this.Qa=new Map,this.Ka=gf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}};function Hee(n,e,t=!0){return I(this,null,function*(){let r=y2(n),i,o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=yield h2(r,e,t,!0),i})}function zee(n,e){return I(this,null,function*(){let t=y2(n);yield h2(t,e,!0,!1)})}function h2(n,e,t,r){return I(this,null,function*(){let i=yield Dee(n.localStore,Qi(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Wee(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&i2(n.remoteStore,i),a})}function Wee(n,e,t,r,i){return I(this,null,function*(){n.Ua=(h,f,p)=>function(v,_,D,R){return I(this,null,function*(){let F=_.view.ga(D);F.ss&&(F=yield fV(v.localStore,_.query,!1).then(({documents:T})=>_.view.ga(T,F)));let V=R&&R.targetChanges.get(_.targetId),U=R&&R.targetMismatches.get(_.targetId)!=null,j=_.view.applyChanges(F,v.isPrimaryClient,V,U);return vV(v,_.targetId,j.ba),j.snapshot})}(n,h,f,p);let o=yield fV(n.localStore,e,!0),s=new OS(e,o.Es),a=s.ga(o.documents),c=pf.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,c);vV(n,t,l.ba);let u=new FS(e,t,s);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),l.snapshot})}function qee(n,e,t){return I(this,null,function*(){let r=we(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!$v(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield wS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&oD(r.remoteStore,i.targetId),jS(r,i.targetId)}).catch(gu))):(jS(r,i.targetId),yield wS(r.localStore,i.targetId,!0))})}function Gee(n,e){return I(this,null,function*(){let t=we(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),oD(t.remoteStore,r.targetId))})}function Kee(n,e,t){return I(this,null,function*(){let r=tte(n);try{let i=yield function(s,a){let c=we(s),l=Rt.now(),u=a.reduce((p,g)=>p.add(g.key),ze()),h,f;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=Ko(),v=ze();return c.hs.getEntries(p,u).next(_=>{g=_,g.forEach((D,R)=>{R.isValidDocument()||(v=v.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,g)).next(_=>{h=_;let D=[];for(let R of a){let F=eee(R,h.get(R.key).overlayedDocument);F!=null&&D.push(new Yo(R.key,F,AV(F.value.mapValue),sc.exists(!0)))}return c.mutationQueue.addMutationBatch(p,l,D,a)}).next(_=>{f=_;let D=_.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(p,_.batchId,D)})}).then(()=>({batchId:f.batchId,changes:jV(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let l=s.qa[s.currentUser.toKey()];l||(l=new qt(qe)),l=l.insert(a,c),s.qa[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Tf(r,i.changes),yield qv(r.remoteStore)}catch(i){let o=lD(i,"Failed to persist write");t.reject(o)}})}function f2(n,e){return I(this,null,function*(){let t=we(n);try{let r=yield Cee(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.La.get(o);s&&(it(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?it(s.Fa):i.removedDocuments.size>0&&(it(s.Fa),s.Fa=!1))}),yield Tf(t,r,e)}catch(r){yield gu(r)}})}function yV(n,e,t){let r=we(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.xa.forEach((o,s)=>{let a=s.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=we(s);c.onlineState=a;let l=!1;c.queries.forEach((u,h)=>{for(let f of h.J_)f.ea(a)&&(l=!0)}),l&&uD(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Yee(n,e,t){return I(this,null,function*(){let r=we(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.La.get(e),o=i&&i.key;if(o){let s=new qt(ue.comparator);s=s.insert(o,Ii.newNoDocument(o,Ce.min()));let a=ze().add(o),c=new fv(Ce.min(),new Map,new qt(qe),s,a);yield f2(r,c),r.Ba=r.Ba.remove(o),r.La.delete(e),dD(r)}else yield wS(r.localStore,e,!1).then(()=>jS(r,e,t)).catch(gu)})}function Qee(n,e){return I(this,null,function*(){let t=we(n),r=e.batch.batchId;try{let i=yield Iee(t.localStore,e);m2(t,r,null),p2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Tf(t,i)}catch(i){yield gu(i)}})}function Xee(n,e,t){return I(this,null,function*(){let r=we(n);try{let i=yield function(s,a){let c=we(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(it(h!==null),u=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,u,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>c.localDocuments.getDocuments(l,u))})}(r.localStore,e);m2(r,e,t),p2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Tf(r,i)}catch(i){yield gu(i)}})}function p2(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function m2(n,e,t){let r=we(n),i=r.qa[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function jS(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||g2(n,r)})}function g2(n,e){n.Na.delete(e.path.canonicalString());let t=n.Ba.get(e);t!==null&&(oD(n.remoteStore,t),n.Ba=n.Ba.remove(e),n.La.delete(t),dD(n))}function vV(n,e,t){for(let r of t)r instanceof Av?(n.ka.addReference(r.key,e),Jee(n,r)):r instanceof Rv?(ee("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||g2(n,r.key)):ge()}function Jee(n,e){let t=e.key,r=t.path.canonicalString();n.Ba.get(t)||n.Na.has(r)||(ee("SyncEngine","New document in limbo: "+t),n.Na.add(r),dD(n))}function dD(n){for(;n.Na.size>0&&n.Ba.size<n.maxConcurrentLimboResolutions;){let e=n.Na.values().next().value;n.Na.delete(e);let t=new ue(Nt.fromString(e)),r=n.Ka.next();n.La.set(r,new LS(t)),n.Ba=n.Ba.insert(t,r),i2(n.remoteStore,new mf(Qi(nD(t.path)),r,"TargetPurposeLimboResolution",XS.oe))}}function Tf(n,e,t){return I(this,null,function*(){let r=we(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((a,c)=>{s.push(r.Ua(c,e,t).then(l=>{var u;if((l||t)&&r.isPrimaryClient){let h=l?!l.fromCache:(u=t?.targetChanges.get(c.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){i.push(l);let h=yS.zi(c.targetId,l);o.push(h)}}))}),yield Promise.all(s),r.Ma.R_(i),yield function(c,l){return I(this,null,function*(){let u=we(c);try{yield u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>H.forEach(l,f=>H.forEach(f.Wi,p=>u.persistence.referenceDelegate.addReference(h,f.targetId,p)).next(()=>H.forEach(f.Gi,p=>u.persistence.referenceDelegate.removeReference(h,f.targetId,p)))))}catch(h){if(!yu(h))throw h;ee("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let f=h.targetId;if(!h.fromCache){let p=u.us.get(f),g=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(g);u.us=u.us.insert(f,v)}}})}(r.localStore,o))})}function Zee(n,e){return I(this,null,function*(){let t=we(n);if(!t.currentUser.isEqual(e)){ee("SyncEngine","User change. New user:",e.toKey());let r=yield n2(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(a=>{a.forEach(c=>{c.reject(new re($.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Tf(t,r.Ts)}})}function ete(n,e){let t=we(n),r=t.La.get(e);if(r&&r.Fa)return ze().add(r.key);{let i=ze(),o=t.Oa.get(e);if(!o)return i;for(let s of o){let a=t.xa.get(s);i=i.unionWith(a.view.fa)}return i}}function y2(n){let e=we(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=f2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ete.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yee.bind(null,e),e.Ma.R_=Bee.bind(null,e.eventManager),e.Ma.Wa=$ee.bind(null,e.eventManager),e}function tte(n){let e=we(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Qee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xee.bind(null,e),e}var v2=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return I(this,null,function*(){this.serializer=zv(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),yield this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)})}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return Eee(this.persistence,new _S,t.initialUser,this.serializer)}ja(t){return new _v(gS.ei,this.serializer)}za(t){return new ES}terminate(){return I(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),US=class extends v2{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){it(this.persistence.referenceDelegate instanceof bv);let r=this.persistence.referenceDelegate.garbageCollector;return new rS(r,e.asyncQueue,t)}ja(e){let t=this.cacheSizeBytes!==void 0?Qr.withCacheSize(this.cacheSizeBytes):Qr.DEFAULT;return new _v(r=>bv.ei(r,t),this.serializer)}};var nte=(()=>{class n{initialize(t,r){return I(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>yV(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Zee.bind(null,this.syncEngine),yield Uee(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new kS}()}createDatastore(t){let r=zv(t.databaseInfo.databaseId),i=function(s){return new TS(s)}(t.databaseInfo);return function(s,a,c,l){return new xS(s,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new RS(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>yV(this.syncEngine,r,0),function(){return Ev.p()?new Ev:new IS}())}createSyncEngine(t,r){return function(o,s,a,c,l,u,h){let f=new VS(o,s,a,c,l,u);return h&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return I(this,null,function*(){var t,r;yield function(o){return I(this,null,function*(){let s=we(o);ee("RemoteStore","RemoteStore shutting down."),s.k_.add(5),yield Cf(s),s.Q_.shutdown(),s.K_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Mv=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):zo("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var BS=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=En.UNAUTHENTICATED,this.clientId=sv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>I(this,null,function*(){ee("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ee("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=lD(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function mT(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ee("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield n2(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function _V(n,e){return I(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield rte(n);ee("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>pV(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>pV(e.remoteStore,i)),n._onlineComponents=e})}function rte(n){return I(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ee("FirestoreClient","Using user provided OfflineComponentProvider");try{yield mT(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;ru("Error using user provided cache. Falling back to memory cache: "+t),yield mT(n,new v2)}}else ee("FirestoreClient","Using default OfflineComponentProvider"),yield mT(n,new US(void 0));return n._offlineComponents})}function _2(n){return I(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ee("FirestoreClient","Using user provided OnlineComponentProvider"),yield _V(n,n._uninitializedComponentsProvider._online)):(ee("FirestoreClient","Using default OnlineComponentProvider"),yield _V(n,new nte))),n._onlineComponents})}function ite(n){return _2(n).then(e=>e.syncEngine)}function $S(n){return I(this,null,function*(){let e=yield _2(n),t=e.eventManager;return t.onListen=Hee.bind(null,e.syncEngine),t.onUnlisten=qee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=zee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Gee.bind(null,e.syncEngine),t})}function ote(n,e,t={}){let r=new Ki;return n.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return function(o,s,a,c,l){let u=new Mv({next:f=>{u.eu(),s.enqueueAndForget(()=>d2(o,h)),f.fromCache&&c.source==="server"?l.reject(new re($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(f)},error:f=>l.reject(f)}),h=new xv(a,u,{includeMetadataChanges:!0,ua:!0});return u2(o,h)}(yield $S(n),n.asyncQueue,e,t,r)})),r.promise}function b2(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var bV=new Map;function w2(n,e,t){if(!t)throw new re($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ste(n,e,t,r){if(e===!0&&r===!0)throw new re($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wV(n){if(!ue.isDocumentKey(n))throw new re($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EV(n){if(ue.isDocumentKey(n))throw new re($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Gv(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ge()}function zs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Gv(n);throw new re($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Pv=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new re($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new re($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ste("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=b2((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new re($.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pu=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gT;switch(r.type){case"firstParty":return new bT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return I(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=bV.get(t);r&&(ee("ComponentProvider","Removing Datastore"),bV.delete(t),r.terminate())}(this),Promise.resolve()}};function E2(n,e,t,r={}){var i;let o=(n=zs(n,pu))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&ru("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=En.MOCK_USER;else{a=qc(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new re($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new En(l)}n._authCredentials=new yT(new ov(a,c))}}var fc=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},yr=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ws=class n extends fc{constructor(e,t,r){super(e,t,nD(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new yr(this.firestore,null,new ue(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function I2(n,e,...t){if(n=Ye(n),w2("collection","path",e),n instanceof pu){let r=Nt.fromString(e,...t);return EV(r),new Ws(n,null,r)}{if(!(n instanceof yr||n instanceof Ws))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Nt.fromString(e,...t));return EV(r),new Ws(n.firestore,null,r)}}function C2(n,e,...t){if(n=Ye(n),arguments.length===1&&(e=sv.newId()),w2("doc","path",e),n instanceof pu){let r=Nt.fromString(e,...t);return wV(r),new yr(n,null,new ue(r))}{if(!(n instanceof yr||n instanceof Ws))throw new re($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Nt.fromString(e,...t));return wV(r),new yr(n.firestore,n instanceof Ws?n.converter:null,new ue(r))}}var kv=class{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Iv(this,"async_queue_retry"),this.fu=()=>{let r=pT();r&&ee("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;let t=pT();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;let t=pT();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});let t=new Ki;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}wu(){return I(this,null,function*(){if(this.Iu.length!==0){try{yield this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!yu(e))throw e;ee("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}})}yu(e){let t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw zo("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);let i=MS.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.Eu.push(i),i}pu(){this.Au&&ge()}verifyOperationInProgress(){}bu(){return I(this,null,function*(){let e;do e=this.gu,yield e;while(e!==this.gu)})}Du(e){for(let t of this.Eu)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Eu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){let t=this.Eu.indexOf(e);this.Eu.splice(t,1)}};function IV(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var pc=class extends pu{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kv,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return I(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kv(e),this._firestoreClient=void 0,yield e}})}};function T2(n,e){let t=typeof n=="object"?n:dn(),r=typeof n=="string"?n:e||"(default)",i=un(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=_s("firestore");o&&E2(i,...o)}return i}function hD(n){if(n._terminated)throw new re($.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ate(n),n._firestoreClient}function ate(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,l,u){return new TT(a,c,l,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,b2(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new BS(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var vf=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(zn.fromBase64String(e))}catch(t){throw new re($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(zn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var _f=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nv=class{constructor(e){this._methodName=e}};var bf=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return qe(this._lat,e._lat)||qe(this._long,e._long)}};var wf=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var cte=/^__.*__$/,HS=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new hc(e,this.data,t,this.fieldTransforms)}};function S2(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}var zS=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Ov(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(S2(this.Mu)&&cte.test(e))throw this.qu('Document fields cannot begin and end with "__"')}},WS=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zv(e)}$u(e,t,r,i=!1){return new zS({Mu:e,methodName:t,Ku:r,path:Fr.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function D2(n){let e=n._freezeSettings(),t=zv(n._databaseId);return new WS(n._databaseId,!!e.ignoreUndefinedProperties,t)}function lte(n,e,t,r,i,o={}){let s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);R2("Data must be an object, but it was:",s,r);let a=x2(r,s),c,l;if(o.merge)c=new Gi(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let u=[];for(let h of o.mergeFields){let f=dte(e,h,t);if(!s.contains(f))throw new re($.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);fte(u,f)||u.push(f)}c=new Gi(u),l=s.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=s.fieldTransforms;return new HS(new Ei(a),c,l)}function ute(n,e,t,r=!1){return fD(t,n.$u(r?4:3,e))}function fD(n,e){if(A2(n=Ye(n)))return R2("Unsupported field value:",e,n),x2(n,e);if(n instanceof Nv)return function(r,i){if(!S2(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=fD(a,i.ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YZ(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Rt.fromDate(r);return{timestampValue:yv(i.serializer,o)}}if(r instanceof Rt){let o=new Rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yv(i.serializer,o)}}if(r instanceof bf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof vf)return{bytesValue:YV(i.serializer,r._byteString)};if(r instanceof yr){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:iD(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wf)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.qu("VectorValues must only contain numeric values.");return rD(a.serializer,c)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Gv(r)}`)}(n,e)}function x2(n,e){let t={};return SV(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mc(n,(r,i)=>{let o=fD(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function A2(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Rt||n instanceof bf||n instanceof vf||n instanceof yr||n instanceof Nv||n instanceof wf)}function R2(n,e,t){if(!A2(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Gv(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function dte(n,e,t){if((e=Ye(e))instanceof _f)return e._internalPath;if(typeof e=="string")return M2(n,e);throw Ov("Field path arguments must be of type string or ",n,!1,void 0,t)}var hte=new RegExp("[~\\*/\\[\\]]");function M2(n,e,t){if(e.search(hte)>=0)throw Ov(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new _f(...e.split("."))._internalPath}catch{throw Ov(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ov(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new re($.INVALID_ARGUMENT,a+n+c)}function fte(n,e){return n.some(t=>t.isEqual(e))}var Fv=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new yr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new qS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(pD("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},qS=class extends Fv{data(){return super.data()}};function pD(n,e){return typeof e=="string"?M2(n,e):e instanceof _f?e._internalPath:e._delegate._internalPath}function P2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ef=class{},GS=class extends Ef{};function k2(n,e,...t){let r=[];e instanceof Ef&&r.push(e),r=r.concat(t),function(o){let s=o.filter(c=>c instanceof KS).length,a=o.filter(c=>c instanceof Lv).length;if(s>1||s>0&&a>0)throw new re($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Lv=class n extends GS{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return O2(e._query,t),new fc(e.firestore,e.converter,VT(e._query,t))}_parse(e){let t=D2(e.firestore);return function(o,s,a,c,l,u,h){let f;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new re($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){TV(h,u);let p=[];for(let g of h)p.push(CV(c,o,g));f={arrayValue:{values:p}}}else f=CV(c,o,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||TV(h,u),f=ute(a,s,h,u==="in"||u==="not-in");return on.create(l,u,f)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function N2(n,e,t){let r=e,i=pD("where",n);return Lv._create(i,r,t)}var KS=class n extends Ef{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ci.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let c of a)O2(s,c),s=VT(s,c)}(e._query,t),new fc(e.firestore,e.converter,VT(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function CV(n,e,t){if(typeof(t=Ye(t))=="string"){if(t==="")throw new re($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!OV(e)&&t.indexOf("/")!==-1)throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Nt.fromString(t));if(!ue.isDocumentKey(r))throw new re($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return YL(n,new ue(r))}if(t instanceof yr)return YL(n,t._key);throw new re($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Gv(t)}.`)}function TV(n,e){if(!Array.isArray(n)||n.length===0)throw new re($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O2(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new re($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var YS=class{convertValue(e,t="none"){switch(qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(qo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return mc(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>At(s.doubleValue));return new wf(o)}convertGeoPoint(e){return new bf(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Bv(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hf(e));default:return null}}convertTimestamp(e){let t=Wo(e);return new Rt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Nt.fromString(e);it(t2(r));let i=new uv(r.get(1),r.get(3)),o=new ue(r.popFirst(5));return i.isEqual(t)||zo(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function pte(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var oc=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Vv=class extends Fv{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(pD("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},nu=class extends Vv{data(e={}){return super.data(e)}},jv=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new oc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new nu(this._firestore,this._userDataWriter,r.key,r,new oc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new nu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new nu(i._firestore,i._userDataWriter,a.doc.key,a.doc,new oc(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,u=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),u=s.indexOf(a.doc.key)),{type:mte(a.type),doc:c,oldIndex:l,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function mte(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge()}}var If=class extends YS{constructor(e){super(),this.firestore=e}convertBytes(e){return new vf(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new yr(this.firestore,null,t)}};function F2(n){n=zs(n,fc);let e=zs(n.firestore,pc),t=hD(e),r=new If(e);return P2(n._query),ote(t,n._query).then(i=>new jv(e,r,n,i))}function L2(n,e,t){n=zs(n,yr);let r=zs(n.firestore,pc),i=pte(n.converter,e,t);return gte(r,[lte(D2(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,sc.none())])}function mD(n,...e){var t,r,i;n=Ye(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||IV(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(IV(e[s])){let h=e[s];e[s]=(t=h.next)===null||t===void 0?void 0:t.bind(h),e[s+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[s+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let c,l,u;if(n instanceof yr)l=zs(n.firestore,pc),u=nD(n._key.path),c={next:h=>{e[s]&&e[s](yte(l,n,h))},error:e[s+1],complete:e[s+2]};else{let h=zs(n,fc);l=zs(h.firestore,pc),u=h._query;let f=new If(l);c={next:p=>{e[s]&&e[s](new jv(l,f,h,p))},error:e[s+1],complete:e[s+2]},P2(n._query)}return function(f,p,g,v){let _=new Mv(v),D=new xv(p,_,g);return f.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return u2(yield $S(f),D)})),()=>{_.eu(),f.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return d2(yield $S(f),D)}))}}(hD(l),u,a,c)}function gte(n,e){return function(r,i){let o=new Ki;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return Kee(yield ite(r),i,o)})),o.promise}(hD(n),e)}function yte(n,e,t){let r=t.docs.get(e._key),i=new If(n);return new Vv(n,i,e._key,r,new oc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){mu=i})(cr),Bt(new Ut("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new pc(new vT(r.getProvider("auth-internal")),new ET(r.getProvider("app-check-internal")),function(l,u){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new re($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uv(l.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ce(zL,"4.7.6",e),ce(zL,"4.7.6","esm2017")})();var Kv=function(){return Kv=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Kv.apply(this,arguments)};var bte={includeMetadataChanges:!1};function V2(n,e){return e===void 0&&(e=bte),new ye(function(t){var r=mD(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function j2(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:Kv(Kv({},r),(t={},t[e.idField]=n.id,t))}function U2(n){return V2(n,{includeMetadataChanges:!0}).pipe(te(function(e){return e.docs}))}function B2(n,e){return e===void 0&&(e={}),U2(n).pipe(te(function(t){return t.map(function(r){return j2(r,e)})}))}var yc=class{constructor(e){return e}},$2="firestore",gD=class{constructor(){return tn($2)}};var yD=new K("angularfire2.firestore-instances");function wte(n,e){let t=mn($2,n,e);return t&&new yc(t)}function Ete(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new yc(r)}}var Ite={provide:gD,deps:[[new Ae,yD]]},Cte={provide:yc,useFactory:wte,deps:[[new Ae,yD],kt]};function H2(n,...e){return ce("angularfire",xt.full,"fst"),vt([Cte,Ite,{provide:yD,useFactory:Ete(n),multi:!0,deps:[pe,Ne,Wt,Jt,[new Ae,wi],[new Ae,Yr],...e]}])}var Xr=tt(B2,!0);var Jr=tt(I2,!0,2);var vD=tt(C2,!0,2);var _D=tt(F2,!0);var z2=tt(T2,!0);var W2=tt(k2,!0,2);var bD=tt(L2,!0,2);var q2=tt(N2,!0,2);var G2="@firebase/database",K2="1.0.11";var vx="";function Tte(n){vx=n}var xD=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yn(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Qp(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var AD=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Oi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Sj=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xD(e)}}catch{}return new AD},_c=Sj("localStorage"),RD=Sj("sessionStorage");var Eu=new Ur("@firebase/database"),Ste=function(){let n=1;return function(){return n++}}(),Dj=function(n){let e=nP(n),t=new ZM;t.update(e);let r=t.digest();return Kp.encodeByteArray(r)},Vf=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Vf.apply(null,r):typeof r=="object"?e+=yn(r):e+=r,e+=" "}return e},bc=null,Y2=!0,Dte=function(n,e){Q(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(Eu.logLevel=Dn.VERBOSE,bc=Eu.log.bind(Eu),e&&RD.set("logging_enabled",!0)):typeof n=="function"?bc=n:(bc=null,RD.remove("logging_enabled"))},Wn=function(...n){if(Y2===!0&&(Y2=!1,bc===null&&RD.get("logging_enabled")===!0&&Dte(!0)),bc){let e=Vf.apply(null,n);bc(e)}},jf=function(n){return function(...e){Wn(n,...e)}},MD=function(...n){let e="FIREBASE INTERNAL ERROR: "+Vf(...n);Eu.error(e)},Xo=function(...n){let e=`FIREBASE FATAL ERROR: ${Vf(...n)}`;throw Eu.error(e),new Error(e)},Lr=function(...n){let e="FIREBASE WARNING: "+Vf(...n);Eu.warn(e)},xte=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Lr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xj=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Ate=function(n){if(ki()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Cu="[MIN_NAME]",wc="[MAX_NAME]",Mu=function(n,e){if(n===e)return 0;if(n===Cu||e===wc)return-1;if(e===Cu||n===wc)return 1;{let t=Q2(n),r=Q2(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},Rte=function(n,e){return n===e?0:n<e?-1:1},Sf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+yn(e))},_x=function(n){if(typeof n!="object"||n===null)return yn(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=yn(e[r]),t+=":",t+=_x(n[e[r]]);return t+="}",t},Aj=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function ti(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Rj=function(n){Q(!xj(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,o,s,a,c;n===0?(o=0,s=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),o=a+r,s=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(o=0,s=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);for(c=e;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);l.push(i?1:0),l.reverse();let u=l.join(""),h="";for(c=0;c<64;c+=8){let f=parseInt(u.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},Mte=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Pte=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var kte=new RegExp("^-?(0*)\\d{1,10}$"),Nte=-2147483648,Ote=2147483647,Q2=function(n){if(kte.test(n)){let e=Number(n);if(e>=Nte&&e<=Ote)return e}return null},Uf=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Lr("Exception was thrown by user callback.",t),e},Math.floor(0))}},Fte=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Mf=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var PD=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Lr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var kD=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Wn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lr(e)}},Pf=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),Qv="5",Mj="v",Pj="s",kj="r",Nj="f",Oj=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Fj="ls",Lj="p",ND="ac",Vj="websocket",jj="long_polling";var Xv=class{constructor(e,t,r,i,o=!1,s="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=s,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_c.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&_c.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function Lte(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function Uj(n,e,t){Q(typeof e=="string","typeof type must == string"),Q(typeof t=="object","typeof params must == object");let r;if(e===Vj)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===jj)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);Lte(n)&&(t.ns=n.namespace);let i=[];return ti(t,(o,s)=>{i.push(o+"="+s)}),r+i.join("&")}var OD=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Oi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return qM(this.counters_)}};var wD={},ED={};function bx(n){let e=n.toString();return wD[e]||(wD[e]=new OD),wD[e]}function Vte(n,e){let t=n.toString();return ED[t]||(ED[t]=e()),ED[t]}var FD=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Uf(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var X2="start",jte="close",Ute="pLPCommand",Bte="pRTLPCB",Bj="id",$j="pw",Hj="ser",$te="cb",Hte="seg",zte="ts",Wte="d",qte="dframe",zj=1870,Wj=30,Gte=zj-Wj,Kte=25e3,Yte=3e4,LD=class n{constructor(e,t,r,i,o,s,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=s,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=jf(e),this.stats_=bx(t),this.urlFn=c=>(this.appCheckToken&&(c[ND]=this.appCheckToken),Uj(t,jj,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new FD(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Yte)),Ate(()=>{if(this.isClosed_)return;this.scriptTagHolder=new VD((...o)=>{let[s,a,c,l,u]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,s===X2)this.id=a,this.password=c;else if(s===jte)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+s)},(...o)=>{let[s,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(s,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[X2]="t",r[Hj]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[$te]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Mj]=Qv,this.transportSessionId&&(r[Pj]=this.transportSessionId),this.lastSessionId&&(r[Fj]=this.lastSessionId),this.applicationId&&(r[Lj]=this.applicationId),this.appCheckToken&&(r[ND]=this.appCheckToken),typeof location<"u"&&location.hostname&&Oj.test(location.hostname)&&(r[kj]=Nj);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return ki()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Mte()&&!Pte()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=yn(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=zM(t),i=Aj(r,Gte);for(let o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ki())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[qte]="t",r[Bj]=e,r[$j]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=yn(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},VD=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,ki())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Ste(),window[Ute+this.uniqueCallbackIdentifier]=e,window[Bte+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let s="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(a){Wn("frame writing exception"),a.stack&&Wn(a.stack),Wn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Wn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Bj]=this.myID,e[$j]=this.myPW,e[Hj]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Wj+r.length<=zj;){let s=this.pendingSegs.shift();r=r+"&"+Hte+i+"="+s.seg+"&"+zte+i+"="+s.ts+"&"+Wte+i+"="+s.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Kte)),o=()=>{clearTimeout(i),r()};this.addTag(e,o)}addTag(e,t){ki()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Wn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Qte=16384,Xte=45e3,Jv=null;typeof MozWebSocket<"u"?Jv=MozWebSocket:typeof WebSocket<"u"&&(Jv=WebSocket);var Df=(()=>{class n{constructor(t,r,i,o,s,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=o,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=jf(this.connId),this.stats_=bx(r),this.connURL=n.connectionURL_(r,a,c,o,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,o,s){let a={};return a[Mj]=Qv,!ki()&&typeof location<"u"&&location.hostname&&Oj.test(location.hostname)&&(a[kj]=Nj),r&&(a[Pj]=r),i&&(a[Fj]=i),o&&(a[ND]=o),s&&(a[Lj]=s),Uj(t,Vj,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_c.set("previous_websocket_failure",!0);try{let i;if(ki()){let o=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Qv}/${vx}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let s=process.env,a=this.connURL.indexOf("wss://")===0?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Jv(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let o=i.message||i.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&Jv!==null&&!n.forceDisallow_}static previouslyFailed(){return _c.isInMemoryStorage||_c.get("previous_websocket_failure")===!0}markConnectionHealthy(){_c.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Qp(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Q(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=yn(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Aj(r,Qte);i.length>1&&this.sendString_(String(i.length));for(let o=0;o<i.length;o++)this.sendString_(i[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(Xte))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),Jte=(()=>{class n{static get ALL_TRANSPORTS(){return[LD,Df]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){let r=Df&&Df.isAvailable(),i=r&&!Df.previouslyFailed();if(t.webSocketOnly&&(r||Lr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Df];else{let o=this.transports_=[];for(let s of n.ALL_TRANSPORTS)s&&s.isAvailable()&&o.push(s);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),Zte=6e4,ene=5e3,tne=10*1024,nne=100*1024,ID="t",J2="d",rne="s",Z2="r",ine="e",ej="o",tj="a",nj="n",rj="p",one="h",jD=class{constructor(e,t,r,i,o,s,a,c,l,u){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=s,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=jf("c:"+this.id+":"),this.transportManager_=new Jte(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Mf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>nne?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>tne?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(ID in e){let t=e[ID];t===tj?this.upgradeIfSecondaryHealthy_():t===Z2?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===ej&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Sf("t",e),r=Sf("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rj,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tj,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:nj,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Sf("t",e),r=Sf("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Sf(ID,e);if(J2 in e){let r=e[J2];if(t===one){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===nj){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===rne?this.onConnectionShutdown_(r):t===Z2?this.onReset_(r):t===ine?MD("Server Error: "+r):t===ej?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):MD("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Qv!==r&&Lr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Mf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Zte))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Mf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(ene))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rj,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_c.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Zv=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var e_=class{constructor(e){this.allowedEvents_=e,this.listeners_={},Q(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let o=0;o<i.length;o++)if(i[o].callback===t&&(!r||r===i[o].context)){i.splice(o,1);return}}validateEventType_(e){Q(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var t_=class n extends e_{static getInstance(){return new n}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Q(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var ij=32,oj=768,ft=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function st(){return new ft("")}function Xe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Ys(n){return n.pieces_.length-n.pieceNum_}function St(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new ft(n.pieces_,e)}function qj(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function sne(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Gj(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Kj(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new ft(e,0)}function Cn(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof ft)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new ft(t,0)}function Ge(n){return n.pieceNum_>=n.pieces_.length}function Zr(n,e){let t=Xe(n),r=Xe(e);if(t===null)return e;if(t===r)return Zr(St(n),St(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Yj(n,e){if(Ys(n)!==Ys(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Si(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Ys(n)>Ys(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var UD=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Gj(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=zd(this.parts_[r]);Qj(this)}};function ane(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=zd(e),Qj(n)}function cne(n){let e=n.parts_.pop();n.byteLength_-=zd(e),n.parts_.length>0&&(n.byteLength_-=1)}function Qj(n){if(n.byteLength_>oj)throw new Error(n.errorPrefix_+"has a key path longer than "+oj+" bytes ("+n.byteLength_+").");if(n.parts_.length>ij)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ij+") or object contains a cycle "+vc(n))}function vc(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var BD=class n extends e_{static getInstance(){return new n}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}getInitialEvent(e){return Q(e==="visible","Unknown event type: "+e),[this.visible_]}};var xf=1e3,lne=60*5*1e3,sj=30*1e3,une=1.3,dne=3e4,hne="server_kill",aj=3,wx=(()=>{class n extends Zv{constructor(t,r,i,o,s,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=o,this.onServerInfoUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=jf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xf,this.maxReconnectDelay_=lne,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!ki())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");BD.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&t_.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let o=++this.requestNumber_,s={r:o,a:t,b:r};this.log_(yn(s)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),i&&(this.requestCBHash_[o]=i)}get(t){this.initConnection_();let r=new Wc,o={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),r.promise}listen(t,r,i,o){this.initConnection_();let s=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+s),this.listens.has(a)||this.listens.set(a,new Map),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(a).has(s),"listen() called twice for same path/queryId.");let c={onComplete:o,hashFn:r,query:t,tag:i};this.listens.get(a).set(s,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);let s={p:i},a="q";t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest(a,s,c=>{let l=c.d,u=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(o))===t&&(this.log_("listen response",c),u!=="ok"&&this.removeListen_(i,o),t.onComplete&&t.onComplete(u,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Oi(t,"w")){let i=ba(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let o='".indexOn": "'+r._queryParams.getIndex().toString()+'"',s=r._path.toString();Lr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||JM(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=sj)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=XM(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,o=>{let s=o.s,a=o.d||"error";this.authToken_===t&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),o=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+o),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,o)&&this.connected_&&this.sendUnlisten_(i,o,t._queryObject,r)}sendUnlisten_(t,r,i,o){this.log_("Unlisten on "+t+" for "+r);let s={p:t},a="n";o&&(s.q=i,s.t=o),this.sendRequest(a,s)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,o){let s={p:r,d:i};this.log_("onDisconnect "+t,s),this.sendRequest(t,s,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(t,r,i,o){this.putInternal("p",t,r,i,o)}merge(t,r,i,o){this.putInternal("m",t,r,i,o)}putInternal(t,r,i,o,s){this.initConnection_();let a={p:r,d:i};s!==void 0&&(a.h=s),this.outstandingPuts_.push({action:t,request:a,onComplete:o}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,o=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,s=>{this.log_(r+" response",s),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(s.s,s.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let s=i.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+yn(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):MD("Unrecognized action received from server: "+yn(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>dne&&(this.reconnectDelay_=xf),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*une)}this.onConnectStatus_(!1)}establishConnection_(){return I(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+n.nextConnectionId_++,s=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},u=function(f){Q(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(f)};this.realtime_={close:l,sendRequest:u};let h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[f,p]=yield Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);a?Wn("getToken() completed but was canceled"):(Wn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new jD(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,g=>{Lr(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(hne)},s))}catch(f){this.log_("Failed to get token: "+f),a||(this.repoInfo_.nodeAdmin&&Lr(f),l())}}})}interrupt(t){Wn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Wn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Bd(this.interruptReasons_)&&(this.reconnectDelay_=xf,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(s=>_x(s)).join("$"):i="default";let o=this.removeListen_(t,i);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(t,r){let i=new ft(t).toString(),o;if(this.listens.has(i)){let s=this.listens.get(i);o=s.get(r),s.delete(r),s.size===0&&this.listens.delete(i)}else o=void 0;return o}onAuthRevoked_(t,r){Wn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=aj&&(this.reconnectDelay_=sj,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Wn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=aj&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";ki()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+vx.replace(/\./g,"-")]=1,Vd()?t["framework.cordova"]=1:Yp()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=t_.getInstance().currentlyOnline();return Bd(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Je=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var Tu=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Je(Cu,e),i=new Je(Cu,t);return this.compare(r,i)!==0}minPost(){return Je.MIN}};var Yv,n_=class extends Tu{static get __EMPTY_NODE(){return Yv}static set __EMPTY_NODE(e){Yv=e}compare(e,t){return Mu(e.name,t.name)}isDefinedOn(e){throw zc("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Je.MIN}maxPost(){return new Je(wc,Yv)}makePost(e,t){return Q(typeof e=="string","KeyIndex indexValue must always be a string."),new Je(e,Yv)}toString(){return".key"}},Iu=new n_;var bu=class{constructor(e,t,r,i,o=null){this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?r(e.key,t):1,i&&(s*=-1),s<0)this.isReverse_?e=e.left:e=e.right;else if(s===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ti=(()=>{class n{constructor(t,r,i,o,s){this.key=t,this.value=r,this.color=i??n.RED,this.left=o??ei.EMPTY_NODE,this.right=s??ei.EMPTY_NODE}copy(t,r,i,o,s){return new n(t??this.key,r??this.value,i??this.color,o??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let o=this,s=i(t,o.key);return s<0?o=o.copy(null,null,null,o.left.insert(t,r,i),null):s===0?o=o.copy(null,r,null,null,null):o=o.copy(null,null,null,null,o.right.insert(t,r,i)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return ei.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,o;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return ei.EMPTY_NODE;o=i.right.min_(),i=i.copy(o.key,o.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),$D=class{copy(e,t,r,i,o){return this}insert(e,t,r){return new Ti(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ei=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Ti.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ti.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bu(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new bu(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new bu(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new bu(this.root_,null,this.comparator_,!0,e)}};ei.EMPTY_NODE=new $D;function fne(n,e){return Mu(n.name,e.name)}function Ex(n,e){return Mu(n,e)}var HD;function pne(n){HD=n}var Xj=function(n){return typeof n=="number"?"number:"+Rj(n):"string:"+n},Jj=function(n){if(n.isLeafNode()){let e=n.val();Q(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Oi(e,".sv"),"Priority must be a string or number.")}else Q(n===HD||n.isEmpty(),"priority of unexpected type.");Q(n===HD||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var cj,Su=(()=>{class n{static set __childrenNodeConstructor(t){cj=t}static get __childrenNodeConstructor(){return cj}constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Jj(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ge(t)?this:Xe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Xe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(Q(i!==".priority"||Ys(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(St(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+Xj(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=Rj(this.value_):t+=this.value_,this.lazyHash_=Dj(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(Q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,o=n.VALUE_TYPE_ORDER.indexOf(r),s=n.VALUE_TYPE_ORDER.indexOf(i);return Q(o>=0,"Unknown leaf type: "+r),Q(s>=0,"Unknown leaf type: "+i),o===s?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),Zj,eU;function mne(n){Zj=n}function gne(n){eU=n}var zD=class extends Tu{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),o=r.compareTo(i);return o===0?Mu(e.name,t.name):o}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Je.MIN}maxPost(){return new Je(wc,new Su("[PRIORITY-POST]",eU))}makePost(e,t){let r=Zj(e);return new Je(t,new Su("[PRIORITY-POST]",r))}toString(){return".priority"}},Gn=new zD;var yne=Math.log(2),WD=class{constructor(e){let t=o=>parseInt(Math.log(o)/yne,10),r=o=>parseInt(Array(o+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},r_=function(n,e,t,r){n.sort(e);let i=function(c,l){let u=l-c,h,f;if(u===0)return null;if(u===1)return h=n[c],f=t?t(h):h,new Ti(f,h.node,Ti.BLACK,null,null);{let p=parseInt(u/2,10)+c,g=i(c,p),v=i(p+1,l);return h=n[p],f=t?t(h):h,new Ti(f,h.node,Ti.BLACK,g,v)}},o=function(c){let l=null,u=null,h=n.length,f=function(g,v){let _=h-g,D=h;h-=g;let R=i(_+1,D),F=n[_],V=t?t(F):F;p(new Ti(V,F.node,v,null,R))},p=function(g){l?(l.left=g,l=g):(u=g,l=g)};for(let g=0;g<c.count;++g){let v=c.nextBitIsOne(),_=Math.pow(2,c.count-(g+1));v?f(_,Ti.BLACK):(f(_,Ti.BLACK),f(_,Ti.RED))}return u},s=new WD(n.length),a=o(s);return new ei(r||e,a)};var CD,_u={},Du=class n{static get Default(){return Q(_u&&Gn,"ChildrenNode.ts has not been loaded"),CD=CD||new n({".priority":_u},{".priority":Gn}),CD}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){let t=ba(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ei?t:null}hasIndex(e){return Oi(this.indexSet_,e.toString())}addIndex(e,t){Q(e!==Iu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,o=t.getIterator(Je.Wrap),s=o.getNext();for(;s;)i=i||e.isDefinedOn(s.node),r.push(s),s=o.getNext();let a;i?a=r_(r,e.getCompare()):a=_u;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let u=Object.assign({},this.indexes_);return u[c]=a,new n(u,l)}addToIndexes(e,t){let r=$d(this.indexes_,(i,o)=>{let s=ba(this.indexSet_,o);if(Q(s,"Missing index implementation for "+o),i===_u)if(s.isDefinedOn(e.node)){let a=[],c=t.getIterator(Je.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),r_(a,s.getCompare())}else return _u;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Je(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=$d(this.indexes_,i=>{if(i===_u)return i;{let o=t.get(e.name);return o?i.remove(new Je(e.name,o)):i}});return new n(r,this.indexSet_)}};var Af,Ot=(()=>{class n{static get EMPTY_NODE(){return Af||(Af=new n(new ei(Ex),null,Du.Default))}constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Jj(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Af}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Af:r}}getChild(t){let r=Xe(t);return r===null?this:this.getImmediateChild(r).getChild(St(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Je(t,r),o,s;r.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(i,this.children_)):(o=this.children_.insert(t,r),s=this.indexMap_.addToIndexes(i,this.children_));let a=o.isEmpty()?Af:this.priorityNode_;return new n(o,a,s)}}updateChild(t,r){let i=Xe(t);if(i===null)return r;{Q(Xe(t)!==".priority"||Ys(t)===1,".priority must be the last token in a path");let o=this.getImmediateChild(i).updateChild(St(t),r);return this.updateImmediateChild(i,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,o=0,s=!0;if(this.forEachChild(Gn,(a,c)=>{r[a]=c.val(t),i++,s&&n.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):s=!1}),!t&&s&&o<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+Xj(this.getPriority().val())+":"),this.forEachChild(Gn,(r,i)=>{let o=i.hash();o!==""&&(t+=":"+r+":"+o)}),this.lazyHash_=t===""?"":Dj(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let o=this.resolveIndex_(i);if(o){let s=o.getPredecessorKey(new Je(t,r));return s?s.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Je(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Je(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(o=>r(o.name,o.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,o=>o);{let o=this.children_.getIteratorFrom(t.name,Je.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)<0;)o.getNext(),s=o.peek();return o}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,o=>o);{let o=this.children_.getReverseIteratorFrom(t.name,Je.Wrap),s=o.peek();for(;s!=null&&r.compare(s,t)>0;)o.getNext(),s=o.peek();return o}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Bf?-1:0}withIndex(t){if(t===Iu||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Iu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Gn),o=r.getIterator(Gn),s=i.getNext(),a=o.getNext();for(;s&&a;){if(s.name!==a.name||!s.node.equals(a.node))return!1;s=i.getNext(),a=o.getNext()}return s===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===Iu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),qD=class extends Ot{constructor(){super(new ei(Ex),Ot.EMPTY_NODE,Du.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}},Bf=new qD;Object.defineProperties(Je,{MIN:{value:new Je(Cu,Ot.EMPTY_NODE)},MAX:{value:new Je(wc,Bf)}});n_.__EMPTY_NODE=Ot.EMPTY_NODE;Su.__childrenNodeConstructor=Ot;pne(Bf);gne(Bf);var vne=!0;function qn(n,e=null){if(n===null)return Ot.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),Q(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new Su(t,qn(e))}if(!(n instanceof Array)&&vne){let t=[],r=!1;if(ti(n,(s,a)=>{if(s.substring(0,1)!=="."){let c=qn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Je(s,c)))}}),t.length===0)return Ot.EMPTY_NODE;let o=r_(t,fne,s=>s.name,Ex);if(r){let s=r_(t,Gn.getCompare());return new Ot(o,qn(e),new Du({".priority":s},{".priority":Gn}))}else return new Ot(o,qn(e),Du.Default)}else{let t=Ot.EMPTY_NODE;return ti(n,(r,i)=>{if(Oi(n,r)&&r.substring(0,1)!=="."){let o=qn(i);(o.isLeafNode()||!o.isEmpty())&&(t=t.updateImmediateChild(r,o))}}),t.updatePriority(qn(e))}}mne(qn);var GD=class extends Tu{constructor(e){super(),this.indexPath_=e,Q(!Ge(e)&&Xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),o=r.compareTo(i);return o===0?Mu(e.name,t.name):o}makePost(e,t){let r=qn(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new Je(t,i)}maxPost(){let e=Ot.EMPTY_NODE.updateChild(this.indexPath_,Bf);return new Je(wc,e)}toString(){return Gj(this.indexPath_,0).join("/")}};var KD=class extends Tu{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Mu(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Je.MIN}maxPost(){return Je.MAX}makePost(e,t){let r=qn(e);return new Je(t,r)}toString(){return".value"}},_ne=new KD;function bne(n){return{type:"value",snapshotNode:n}}function wne(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Ene(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function lj(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function Ine(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var YD=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Gn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cu}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:wc}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Gn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function uj(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Gn?t="$priority":n.index_===_ne?t="$value":n.index_===Iu?t="$key":(Q(n.index_ instanceof GD,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=yn(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=yn(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+yn(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=yn(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+yn(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function dj(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Gn&&(e.i=n.index_.toString()),e}var QD=class n extends Zv{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(Q(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=jf("p:rest:"),this.listens_={}}listen(e,t,r,i){let o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);let s=n.getListenId_(e,r),a={};this.listens_[s]=a;let c=uj(e._queryParams);this.restRequest_(o+".json",c,(l,u)=>{let h=u;if(l===404&&(h=null,l=null),l===null&&this.onDataUpdate_(o,h,!1,r),ba(this.listens_,s)===a){let f;l?l===401?f="permission_denied":f="rest_error:"+l:f="ok",i(f,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=uj(e._queryParams),r=e._path.toString(),i=new Wc;return this.restRequest_(r+".json",t,(o,s)=>{let a=s;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,o])=>{i&&i.accessToken&&(t.auth=i.accessToken),o&&o.token&&(t.ac=o.token);let s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+wa(t);this.log_("Sending REST request for "+s);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+s+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Qp(a.responseText)}catch{Lr("Failed to parse JSON response for "+s+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&Lr("Got unsuccessful REST response for "+s+" Status: "+a.status),r(a.status);r=null}},a.open("GET",s,!0),a.send()})}};var XD=class{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function i_(){return{value:null,children:new Map}}function tU(n,e,t){if(Ge(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Xe(e);n.children.has(r)||n.children.set(r,i_());let i=n.children.get(r);e=St(e),tU(i,e,t)}}function JD(n,e,t){n.value!==null?t(e,n.value):Cne(n,(r,i)=>{let o=new ft(e.toString()+"/"+r);JD(i,o,t)})}function Cne(n,e){n.children.forEach((t,r)=>{e(r,t)})}var ZD=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ti(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var hj=10*1e3,Tne=30*1e3,Sne=5*60*1e3,ex=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new ZD(e);let r=hj+(Tne-hj)*Math.random();Mf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;ti(e,(i,o)=>{o>0&&Oi(this.statsToReport_,i)&&(t[i]=o,r=!0)}),r&&this.server_.reportStats(t),Mf(this.reportStats_.bind(this),Math.floor(Math.random()*2*Sne))}};var Qo=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Qo||{});function nU(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rU(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function iU(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var tx=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Qo.ACK_USER_WRITE,this.source=nU()}operationForChild(e){if(Ge(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new ft(e));return new n(st(),t,this.revert)}}else return Q(Xe(this.path)===e,"operationForChild called for unrelated child."),new n(St(this.path),this.affectedTree,this.revert)}};var xu=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Qo.OVERWRITE}operationForChild(e){return Ge(this.path)?new n(this.source,st(),this.snap.getImmediateChild(e)):new n(this.source,St(this.path),this.snap)}};var o_=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Qo.MERGE}operationForChild(e){if(Ge(this.path)){let t=this.children.subtree(new ft(e));return t.isEmpty()?null:t.value?new xu(this.source,st(),t.value):new n(this.source,st(),t)}else return Q(Xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,St(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Of=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ge(e))return this.isFullyInitialized()&&!this.filtered_;let t=Xe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function Dne(n,e,t,r){let i=[],o=[];return e.forEach(s=>{s.type==="child_changed"&&n.index_.indexedValueChanged(s.oldSnap,s.snapshotNode)&&o.push(Ine(s.childName,s.snapshotNode))}),Rf(n,i,"child_removed",e,r,t),Rf(n,i,"child_added",e,r,t),Rf(n,i,"child_moved",o,r,t),Rf(n,i,"child_changed",e,r,t),Rf(n,i,"value",e,r,t),i}function Rf(n,e,t,r,i,o){let s=r.filter(a=>a.type===t);s.sort((a,c)=>Ane(n,a,c)),s.forEach(a=>{let c=xne(n,a,o);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function xne(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function Ane(n,e,t){if(e.childName==null||t.childName==null)throw zc("Should only compare child_ events.");let r=new Je(e.childName,e.snapshotNode),i=new Je(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function oU(n,e){return{eventCache:n,serverCache:e}}function kf(n,e,t,r){return oU(new Of(e,t,r),n.serverCache)}function sU(n,e,t,r){return oU(n.eventCache,new Of(e,t,r))}function nx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ec(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var TD,Rne=()=>(TD||(TD=new ei(Rte)),TD),vr=class n{static fromObject(e){let t=new n(null);return ti(e,(r,i)=>{t=t.set(new ft(r),i)}),t}constructor(e,t=Rne()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if(Ge(e))return null;{let r=Xe(e),i=this.children.get(r);if(i!==null){let o=i.findRootMostMatchingPathAndValue(St(e),t);return o!=null?{path:Cn(new ft(r),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ge(e))return this;{let t=Xe(e),r=this.children.get(t);return r!==null?r.subtree(St(e)):new n(null)}}set(e,t){if(Ge(e))return new n(t,this.children);{let r=Xe(e),o=(this.children.get(r)||new n(null)).set(St(e),t),s=this.children.insert(r,o);return new n(this.value,s)}}remove(e){if(Ge(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Xe(e),r=this.children.get(t);if(r){let i=r.remove(St(e)),o;return i.isEmpty()?o=this.children.remove(t):o=this.children.insert(t,i),this.value===null&&o.isEmpty()?new n(null):new n(this.value,o)}else return this}}get(e){if(Ge(e))return this.value;{let t=Xe(e),r=this.children.get(t);return r?r.get(St(e)):null}}setTree(e,t){if(Ge(e))return t;{let r=Xe(e),o=(this.children.get(r)||new n(null)).setTree(St(e),t),s;return o.isEmpty()?s=this.children.remove(r):s=this.children.insert(r,o),new n(this.value,s)}}fold(e){return this.fold_(st(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,o)=>{r[i]=o.fold_(Cn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,st(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Ge(e))return null;{let o=Xe(e),s=this.children.get(o);return s?s.findOnPath_(St(e),Cn(t,o),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,st(),t)}foreachOnPath_(e,t,r){if(Ge(e))return this;{this.value&&r(t,this.value);let i=Xe(e),o=this.children.get(i);return o?o.foreachOnPath_(St(e),Cn(t,i),r):new n(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Cn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Di=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new vr(null))}};function Nf(n,e,t){if(Ge(e))return new Di(new vr(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,o=r.value,s=Zr(i,e);return o=o.updateChild(s,t),new Di(n.writeTree_.set(i,o))}else{let i=new vr(t),o=n.writeTree_.setTree(e,i);return new Di(o)}}}function fj(n,e,t){let r=n;return ti(t,(i,o)=>{r=Nf(r,Cn(e,i),o)}),r}function pj(n,e){if(Ge(e))return Di.empty();{let t=n.writeTree_.setTree(e,new vr(null));return new Di(t)}}function rx(n,e){return Ic(n,e)!=null}function Ic(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(Zr(t.path,e)):null}function mj(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Gn,(r,i)=>{e.push(new Je(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Je(r,i.value))}),e}function Ks(n,e){if(Ge(e))return n;{let t=Ic(n,e);return t!=null?new Di(new vr(t)):new Di(n.writeTree_.subtree(e))}}function ix(n){return n.writeTree_.isEmpty()}function Au(n,e){return aU(st(),n.writeTree_,e)}function aU(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,o)=>{i===".priority"?(Q(o.value!==null,"Priority writes must always be leaf nodes"),r=o.value):t=aU(Cn(n,i),o,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(Cn(n,".priority"),r)),t}}function cU(n,e){return fU(e,n)}function Mne(n,e,t,r,i){Q(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Nf(n.visibleWrites,e,t)),n.lastWriteId=r}function Pne(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function kne(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);Q(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,o=!1,s=n.allWrites.length-1;for(;i&&s>=0;){let a=n.allWrites[s];a.visible&&(s>=t&&Nne(a,r.path)?i=!1:Si(r.path,a.path)&&(o=!0)),s--}if(i){if(o)return One(n),!0;if(r.snap)n.visibleWrites=pj(n.visibleWrites,r.path);else{let a=r.children;ti(a,c=>{n.visibleWrites=pj(n.visibleWrites,Cn(r.path,c))})}return!0}else return!1}function Nne(n,e){if(n.snap)return Si(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Si(Cn(n.path,t),e))return!0;return!1}function One(n){n.visibleWrites=lU(n.allWrites,Fne,st()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function Fne(n){return n.visible}function lU(n,e,t){let r=Di.empty();for(let i=0;i<n.length;++i){let o=n[i];if(e(o)){let s=o.path,a;if(o.snap)Si(t,s)?(a=Zr(t,s),r=Nf(r,a,o.snap)):Si(s,t)&&(a=Zr(s,t),r=Nf(r,st(),o.snap.getChild(a)));else if(o.children){if(Si(t,s))a=Zr(t,s),r=fj(r,a,o.children);else if(Si(s,t))if(a=Zr(s,t),Ge(a))r=fj(r,st(),o.children);else{let c=ba(o.children,Xe(a));if(c){let l=c.getChild(St(a));r=Nf(r,st(),l)}}}else throw zc("WriteRecord should have .snap or .children")}}return r}function uU(n,e,t,r,i){if(!r&&!i){let o=Ic(n.visibleWrites,e);if(o!=null)return o;{let s=Ks(n.visibleWrites,e);if(ix(s))return t;if(t==null&&!rx(s,st()))return null;{let a=t||Ot.EMPTY_NODE;return Au(s,a)}}}else{let o=Ks(n.visibleWrites,e);if(!i&&ix(o))return t;if(!i&&t==null&&!rx(o,st()))return null;{let s=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Si(l.path,e)||Si(e,l.path))},a=lU(n.allWrites,s,e),c=t||Ot.EMPTY_NODE;return Au(a,c)}}}function Lne(n,e,t){let r=Ot.EMPTY_NODE,i=Ic(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Gn,(o,s)=>{r=r.updateImmediateChild(o,s)}),r;if(t){let o=Ks(n.visibleWrites,e);return t.forEachChild(Gn,(s,a)=>{let c=Au(Ks(o,new ft(s)),a);r=r.updateImmediateChild(s,c)}),mj(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}else{let o=Ks(n.visibleWrites,e);return mj(o).forEach(s=>{r=r.updateImmediateChild(s.name,s.node)}),r}}function Vne(n,e,t,r,i){Q(r||i,"Either existingEventSnap or existingServerSnap must exist");let o=Cn(e,t);if(rx(n.visibleWrites,o))return null;{let s=Ks(n.visibleWrites,o);return ix(s)?i.getChild(t):Au(s,i.getChild(t))}}function jne(n,e,t,r){let i=Cn(e,t),o=Ic(n.visibleWrites,i);if(o!=null)return o;if(r.isCompleteForChild(t)){let s=Ks(n.visibleWrites,i);return Au(s,r.getNode().getImmediateChild(t))}else return null}function Une(n,e){return Ic(n.visibleWrites,e)}function Bne(n,e,t,r,i,o,s){let a,c=Ks(n.visibleWrites,e),l=Ic(c,st());if(l!=null)a=l;else if(t!=null)a=Au(c,t);else return[];if(a=a.withIndex(s),!a.isEmpty()&&!a.isLeafNode()){let u=[],h=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),p=f.getNext();for(;p&&u.length<i;)h(p,r)!==0&&u.push(p),p=f.getNext();return u}else return[]}function $ne(){return{visibleWrites:Di.empty(),allWrites:[],lastWriteId:-1}}function ox(n,e,t,r){return uU(n.writeTree,n.treePath,e,t,r)}function dU(n,e){return Lne(n.writeTree,n.treePath,e)}function gj(n,e,t,r){return Vne(n.writeTree,n.treePath,e,t,r)}function s_(n,e){return Une(n.writeTree,Cn(n.treePath,e))}function Hne(n,e,t,r,i,o){return Bne(n.writeTree,n.treePath,e,t,r,i,o)}function Ix(n,e,t){return jne(n.writeTree,n.treePath,e,t)}function hU(n,e){return fU(Cn(n.treePath,e),n.writeTree)}function fU(n,e){return{treePath:n,writeTree:e}}var sx=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;Q(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),Q(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let o=i.type;if(t==="child_added"&&o==="child_removed")this.changeMap.set(r,lj(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&o==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&o==="child_changed")this.changeMap.set(r,Ene(r,i.oldSnap));else if(t==="child_changed"&&o==="child_added")this.changeMap.set(r,wne(r,e.snapshotNode));else if(t==="child_changed"&&o==="child_changed")this.changeMap.set(r,lj(r,e.snapshotNode,i.oldSnap));else throw zc("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var ax=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},pU=new ax,Ff=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Of(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ix(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ec(this.viewCache_),o=Hne(this.writes_,i,t,1,r,e);return o.length===0?null:o[0]}};function zne(n,e){Q(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),Q(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function Wne(n,e,t,r,i){let o=new sx,s,a;if(t.type===Qo.OVERWRITE){let l=t;l.source.fromUser?s=cx(n,e,l.path,l.snap,r,i,o):(Q(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ge(l.path),s=a_(n,e,l.path,l.snap,r,i,a,o))}else if(t.type===Qo.MERGE){let l=t;l.source.fromUser?s=Gne(n,e,l.path,l.children,r,i,o):(Q(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=lx(n,e,l.path,l.children,r,i,a,o))}else if(t.type===Qo.ACK_USER_WRITE){let l=t;l.revert?s=Qne(n,e,l.path,r,i,o):s=Kne(n,e,l.path,l.affectedTree,r,i,o)}else if(t.type===Qo.LISTEN_COMPLETE)s=Yne(n,e,t.path,r,o);else throw zc("Unknown operation type: "+t.type);let c=o.getChanges();return qne(e,s,c),{viewCache:s,changes:c}}function qne(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=nx(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&t.push(bne(nx(e)))}}function mU(n,e,t,r,i,o){let s=e.eventCache;if(s_(r,t)!=null)return e;{let a,c;if(Ge(t))if(Q(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Ec(e),u=l instanceof Ot?l:Ot.EMPTY_NODE,h=dU(r,u);a=n.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{let l=ox(r,Ec(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{let l=Xe(t);if(l===".priority"){Q(Ys(t)===1,"Can't have a priority with additional path components");let u=s.getNode();c=e.serverCache.getNode();let h=gj(r,t,u,c);h!=null?a=n.filter.updatePriority(u,h):a=s.getNode()}else{let u=St(t),h;if(s.isCompleteForChild(l)){c=e.serverCache.getNode();let f=gj(r,t,s.getNode(),c);f!=null?h=s.getNode().getImmediateChild(l).updateChild(u,f):h=s.getNode().getImmediateChild(l)}else h=Ix(r,l,e.serverCache);h!=null?a=n.filter.updateChild(s.getNode(),l,h,u,i,o):a=s.getNode()}}return kf(e,a,s.isFullyInitialized()||Ge(t),n.filter.filtersNodes())}}function a_(n,e,t,r,i,o,s,a){let c=e.serverCache,l,u=s?n.filter:n.filter.getIndexedFilter();if(Ge(t))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){let p=c.getNode().updateChild(t,r);l=u.updateFullNode(c.getNode(),p,null)}else{let p=Xe(t);if(!c.isCompleteForPath(t)&&Ys(t)>1)return e;let g=St(t),_=c.getNode().getImmediateChild(p).updateChild(g,r);p===".priority"?l=u.updatePriority(c.getNode(),_):l=u.updateChild(c.getNode(),p,_,g,pU,null)}let h=sU(e,l,c.isFullyInitialized()||Ge(t),u.filtersNodes()),f=new Ff(i,h,o);return mU(n,h,t,i,f,a)}function cx(n,e,t,r,i,o,s){let a=e.eventCache,c,l,u=new Ff(i,e,o);if(Ge(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,s),c=kf(e,l,!0,n.filter.filtersNodes());else{let h=Xe(t);if(h===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=kf(e,l,a.isFullyInitialized(),a.isFiltered());else{let f=St(t),p=a.getNode().getImmediateChild(h),g;if(Ge(f))g=r;else{let v=u.getCompleteChild(h);v!=null?qj(f)===".priority"&&v.getChild(Kj(f)).isEmpty()?g=v:g=v.updateChild(f,r):g=Ot.EMPTY_NODE}if(p.equals(g))c=e;else{let v=n.filter.updateChild(a.getNode(),h,g,f,u,s);c=kf(e,v,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function yj(n,e){return n.eventCache.isCompleteForChild(e)}function Gne(n,e,t,r,i,o,s){let a=e;return r.foreach((c,l)=>{let u=Cn(t,c);yj(e,Xe(u))&&(a=cx(n,a,u,l,i,o,s))}),r.foreach((c,l)=>{let u=Cn(t,c);yj(e,Xe(u))||(a=cx(n,a,u,l,i,o,s))}),a}function vj(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lx(n,e,t,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ge(t)?l=r:l=new vr(null).setTree(t,r);let u=e.serverCache.getNode();return l.children.inorderTraversal((h,f)=>{if(u.hasChild(h)){let p=e.serverCache.getNode().getImmediateChild(h),g=vj(n,p,f);c=a_(n,c,new ft(h),g,i,o,s,a)}}),l.children.inorderTraversal((h,f)=>{let p=!e.serverCache.isCompleteForChild(h)&&f.value===null;if(!u.hasChild(h)&&!p){let g=e.serverCache.getNode().getImmediateChild(h),v=vj(n,g,f);c=a_(n,c,new ft(h),v,i,o,s,a)}}),c}function Kne(n,e,t,r,i,o,s){if(s_(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ge(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return a_(n,e,t,c.getNode().getChild(t),i,o,a,s);if(Ge(t)){let l=new vr(null);return c.getNode().forEachChild(Iu,(u,h)=>{l=l.set(new ft(u),h)}),lx(n,e,t,l,i,o,a,s)}else return e}else{let l=new vr(null);return r.foreach((u,h)=>{let f=Cn(t,u);c.isCompleteForPath(f)&&(l=l.set(u,c.getNode().getChild(f)))}),lx(n,e,t,l,i,o,a,s)}}function Yne(n,e,t,r,i){let o=e.serverCache,s=sU(e,o.getNode(),o.isFullyInitialized()||Ge(t),o.isFiltered());return mU(n,s,t,r,pU,i)}function Qne(n,e,t,r,i,o){let s;if(s_(r,t)!=null)return e;{let a=new Ff(r,e,i),c=e.eventCache.getNode(),l;if(Ge(t)||Xe(t)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=ox(r,Ec(e));else{let h=e.serverCache.getNode();Q(h instanceof Ot,"serverChildren would be complete if leaf node"),u=dU(r,h)}u=u,l=n.filter.updateFullNode(c,u,o)}else{let u=Xe(t),h=Ix(r,u,e.serverCache);h==null&&e.serverCache.isCompleteForChild(u)&&(h=c.getImmediateChild(u)),h!=null?l=n.filter.updateChild(c,u,h,St(t),a,o):e.eventCache.getNode().hasChild(u)?l=n.filter.updateChild(c,u,Ot.EMPTY_NODE,St(t),a,o):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(s=ox(r,Ec(e)),s.isLeafNode()&&(l=n.filter.updateFullNode(l,s,o)))}return s=e.serverCache.isFullyInitialized()||s_(r,st())!=null,kf(e,l,s,n.filter.filtersNodes())}}function Xne(n,e){let t=Ec(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ge(e)&&!t.getImmediateChild(Xe(e)).isEmpty())?t.getChild(e):null}function _j(n,e,t,r){e.type===Qo.MERGE&&e.source.queryId!==null&&(Q(Ec(n.viewCache_),"We should always have a full cache before handling merges"),Q(nx(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,o=Wne(n.processor_,i,e,t,r);return zne(n.processor_,o.viewCache),Q(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=o.viewCache,Jne(n,o.changes,o.viewCache.eventCache.getNode(),null)}function Jne(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return Dne(n.eventGenerator_,e,t,i)}var bj;function Zne(n){Q(!bj,"__referenceConstructor has already been defined"),bj=n}function Cx(n,e,t,r){let i=e.source.queryId;if(i!==null){let o=n.views.get(i);return Q(o!=null,"SyncTree gave us an op for an invalid query."),_j(o,e,t,r)}else{let o=[];for(let s of n.views.values())o=o.concat(_j(s,e,t,r));return o}}function Tx(n,e){let t=null;for(let r of n.views.values())t=t||Xne(r,e);return t}var wj;function ere(n){Q(!wj,"__referenceConstructor has already been defined"),wj=n}var c_=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vr(null),this.pendingWriteTree_=$ne(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function tre(n,e,t,r,i){return Mne(n.pendingWriteTree_,e,t,r,i),i?u_(n,new xu(nU(),e,t)):[]}function wu(n,e,t=!1){let r=Pne(n.pendingWriteTree_,e);if(kne(n.pendingWriteTree_,e)){let o=new vr(null);return r.snap!=null?o=o.set(st(),!0):ti(r.children,s=>{o=o.set(new ft(s),!0)}),u_(n,new tx(r.path,o,t))}else return[]}function l_(n,e,t){return u_(n,new xu(rU(),e,t))}function nre(n,e,t){let r=vr.fromObject(t);return u_(n,new o_(rU(),e,r))}function rre(n,e,t,r){let i=_U(n,r);if(i!=null){let o=bU(i),s=o.path,a=o.queryId,c=Zr(s,e),l=new xu(iU(a),c,t);return wU(n,s,l)}else return[]}function ire(n,e,t,r){let i=_U(n,r);if(i){let o=bU(i),s=o.path,a=o.queryId,c=Zr(s,e),l=vr.fromObject(t),u=new o_(iU(a),c,l);return wU(n,s,u)}else return[]}function gU(n,e,t){let i=n.pendingWriteTree_,o=n.syncPointTree_.findOnPath(e,(s,a)=>{let c=Zr(s,e),l=Tx(a,c);if(l)return l});return uU(i,e,o,t,!0)}function u_(n,e){return yU(e,n.syncPointTree_,null,cU(n.pendingWriteTree_,st()))}function yU(n,e,t,r){if(Ge(n.path))return vU(n,e,t,r);{let i=e.get(st());t==null&&i!=null&&(t=Tx(i,st()));let o=[],s=Xe(n.path),a=n.operationForChild(s),c=e.children.get(s);if(c&&a){let l=t?t.getImmediateChild(s):null,u=hU(r,s);o=o.concat(yU(a,c,l,u))}return i&&(o=o.concat(Cx(i,n,r,t))),o}}function vU(n,e,t,r){let i=e.get(st());t==null&&i!=null&&(t=Tx(i,st()));let o=[];return e.children.inorderTraversal((s,a)=>{let c=t?t.getImmediateChild(s):null,l=hU(r,s),u=n.operationForChild(s);u&&(o=o.concat(vU(u,a,c,l)))}),i&&(o=o.concat(Cx(i,n,r,t))),o}function _U(n,e){return n.tagToQueryMap.get(e)}function bU(n){let e=n.indexOf("$");return Q(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new ft(n.substr(0,e))}}function wU(n,e,t){let r=n.syncPointTree_.get(e);Q(r,"Missing sync point for query tag that we're tracking");let i=cU(n.pendingWriteTree_,e);return Cx(r,t,i,null)}var ux=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},dx=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=Cn(this.path_,e);return new n(this.syncTree_,t)}node(){return gU(this.syncTree_,this.path_)}},ore=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Ej=function(n,e,t){if(!n||typeof n!="object")return n;if(Q(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return sre(n[".sv"],e,t);if(typeof n[".sv"]=="object")return are(n[".sv"],e);Q(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},sre=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:Q(!1,"Unexpected server value: "+n)}},are=function(n,e,t){n.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&Q(!1,"Unexpected increment value: "+r);let i=e.node();if(Q(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let s=i.getValue();return typeof s!="number"?r:s+r},cre=function(n,e,t,r){return Sx(e,new dx(t,n),r)},lre=function(n,e,t){return Sx(n,new ux(e),t)};function Sx(n,e,t){let r=n.getPriority().val(),i=Ej(r,e.getImmediateChild(".priority"),t),o;if(n.isLeafNode()){let s=n,a=Ej(s.getValue(),e,t);return a!==s.getValue()||i!==s.getPriority().val()?new Su(a,qn(i)):n}else{let s=n;return o=s,i!==s.getPriority().val()&&(o=o.updatePriority(new Su(i))),s.forEachChild(Gn,(a,c)=>{let l=Sx(c,e.getImmediateChild(a),t);l!==c&&(o=o.updateImmediateChild(a,l))}),o}}var Lf=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function Dx(n,e){let t=e instanceof ft?e:new ft(e),r=n,i=Xe(t);for(;i!==null;){let o=ba(r.node.children,i)||{children:{},childCount:0};r=new Lf(i,r,o),t=St(t),i=Xe(t)}return r}function Pu(n){return n.node.value}function EU(n,e){n.node.value=e,hx(n)}function IU(n){return n.node.childCount>0}function ure(n){return Pu(n)===void 0&&!IU(n)}function d_(n,e){ti(n.node.children,(t,r)=>{e(new Lf(t,n,r))})}function CU(n,e,t,r){t&&!r&&e(n),d_(n,i=>{CU(i,e,!0,r)}),t&&r&&e(n)}function dre(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function $f(n){return new ft(n.parent===null?n.name:$f(n.parent)+"/"+n.name)}function hx(n){n.parent!==null&&hre(n.parent,n.name,n)}function hre(n,e,t){let r=ure(t),i=Oi(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,hx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,hx(n))}var fre=/[\[\].#$\/\u0000-\u001F\u007F]/,pre=/[\[\].#$\u0000-\u001F\u007F]/,SD=10*1024*1024,TU=function(n){return typeof n=="string"&&n.length!==0&&!fre.test(n)},mre=function(n){return typeof n=="string"&&n.length!==0&&!pre.test(n)},gre=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),mre(n)};var SU=function(n,e,t){let r=t instanceof ft?new UD(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+vc(r));if(typeof e=="function")throw new Error(n+"contains a function "+vc(r)+" with contents = "+e.toString());if(xj(e))throw new Error(n+"contains "+e.toString()+" "+vc(r));if(typeof e=="string"&&e.length>SD/3&&zd(e)>SD)throw new Error(n+"contains a string greater than "+SD+" utf8 bytes "+vc(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,o=!1;if(ti(e,(s,a)=>{if(s===".value")i=!0;else if(s!==".priority"&&s!==".sv"&&(o=!0,!TU(s)))throw new Error(n+" contains an invalid key ("+s+") "+vc(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);ane(r,s),SU(n,a,r),cne(r)}),i&&o)throw new Error(n+' contains ".value" child '+vc(r)+" in addition to actual children.")}};var yre=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!TU(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!gre(t))throw new Error(tP(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var fx=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function vre(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],o=i.getPath();t!==null&&!Yj(o,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:o}),t.events.push(i)}t&&n.eventLists_.push(t)}function Cc(n,e,t){vre(n,t),_re(n,r=>Si(r,e)||Si(e,r))}function _re(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let o=i.path;e(o)?(bre(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function bre(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();bc&&Wn("event: "+t.toString()),Uf(r)}}}var wre="repo_interrupt",Ere=25,px=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new fx,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=i_(),this.transactionQueueTree_=new Lf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Ire(n,e,t){if(n.stats_=bx(n.repoInfo_),n.forceRestClient_||Fte())n.server_=new QD(n.repoInfo_,(r,i,o,s)=>{Ij(n,r,i,o,s)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Cj(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yn(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wx(n.repoInfo_,e,(r,i,o,s)=>{Ij(n,r,i,o,s)},r=>{Cj(n,r)},r=>{Tre(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=Vte(n.repoInfo_,()=>new ex(n.stats_,n.server_)),n.infoData_=new XD,n.infoSyncTree_=new c_({startListening:(r,i,o,s)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=l_(n.infoSyncTree_,r._path,c),setTimeout(()=>{s("ok")},0)),a},stopListening:()=>{}}),xx(n,"connected",!1),n.serverSyncTree_=new c_({startListening:(r,i,o,s)=>(n.server_.listen(r,o,i,(a,c)=>{let l=s(a,c);Cc(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function Cre(n){let t=n.infoData_.getNode(new ft(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function DU(n){return ore({timestamp:Cre(n)})}function Ij(n,e,t,r,i){n.dataUpdateCount++;let o=new ft(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let s=[];if(i)if(r){let c=$d(t,l=>qn(l));s=ire(n.serverSyncTree_,o,c,i)}else{let c=qn(t);s=rre(n.serverSyncTree_,o,c,i)}else if(r){let c=$d(t,l=>qn(l));s=nre(n.serverSyncTree_,o,c)}else{let c=qn(t);s=l_(n.serverSyncTree_,o,c)}let a=o;s.length>0&&(a=Rx(n,o)),Cc(n.eventQueue_,a,s)}function Cj(n,e){xx(n,"connected",e),e===!1&&Dre(n)}function Tre(n,e){ti(e,(t,r)=>{xx(n,t,r)})}function xx(n,e,t){let r=new ft("/.info/"+e),i=qn(t);n.infoData_.updateSnapshot(r,i);let o=l_(n.infoSyncTree_,r,i);Cc(n.eventQueue_,r,o)}function Sre(n){return n.nextWriteId_++}function Dre(n){xU(n,"onDisconnectEvents");let e=DU(n),t=i_();JD(n.onDisconnect_,st(),(i,o)=>{let s=cre(i,o,n.serverSyncTree_,e);tU(t,i,s)});let r=[];JD(t,st(),(i,o)=>{r=r.concat(l_(n.serverSyncTree_,i,o));let s=Mre(n,i);Rx(n,s)}),n.onDisconnect_=i_(),Cc(n.eventQueue_,st(),r)}function xre(n){n.persistentConnection_&&n.persistentConnection_.interrupt(wre)}function xU(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Wn(t,...e)}function AU(n,e,t){return gU(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function Ax(n,e=n.transactionQueueTree_){if(e||h_(n,e),Pu(e)){let t=MU(n,e);Q(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&Are(n,$f(e),t)}else IU(e)&&d_(e,t=>{Ax(n,t)})}function Are(n,e,t){let r=t.map(l=>l.currentWriteId),i=AU(n,e,r),o=i,s=i.hash();for(let l=0;l<t.length;l++){let u=t[l];Q(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let h=Zr(e,u.path);o=o.updateChild(h,u.currentOutputSnapshotRaw)}let a=o.val(!0),c=e;n.server_.put(c.toString(),a,l=>{xU(n,"transaction put response",{path:c.toString(),status:l});let u=[];if(l==="ok"){let h=[];for(let f=0;f<t.length;f++)t[f].status=2,u=u.concat(wu(n.serverSyncTree_,t[f].currentWriteId)),t[f].onComplete&&h.push(()=>t[f].onComplete(null,!0,t[f].currentOutputSnapshotResolved)),t[f].unwatcher();h_(n,Dx(n.transactionQueueTree_,e)),Ax(n,n.transactionQueueTree_),Cc(n.eventQueue_,e,u);for(let f=0;f<h.length;f++)Uf(h[f])}else{if(l==="datastale")for(let h=0;h<t.length;h++)t[h].status===3?t[h].status=4:t[h].status=0;else{Lr("transaction at "+c.toString()+" failed: "+l);for(let h=0;h<t.length;h++)t[h].status=4,t[h].abortReason=l}Rx(n,e)}},s)}function Rx(n,e){let t=RU(n,e),r=$f(t),i=MU(n,t);return Rre(n,i,r),r}function Rre(n,e,t){if(e.length===0)return;let r=[],i=[],s=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=Zr(t,c.path),u=!1,h;if(Q(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)u=!0,h=c.abortReason,i=i.concat(wu(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=Ere)u=!0,h="maxretry",i=i.concat(wu(n.serverSyncTree_,c.currentWriteId,!0));else{let f=AU(n,c.path,s);c.currentInputSnapshot=f;let p=e[a].update(f.val());if(p!==void 0){SU("transaction failed: Data returned ",p,c.path);let g=qn(p);typeof p=="object"&&p!=null&&Oi(p,".priority")||(g=g.updatePriority(f.getPriority()));let _=c.currentWriteId,D=DU(n),R=lre(g,f,D);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=R,c.currentWriteId=Sre(n),s.splice(s.indexOf(_),1),i=i.concat(tre(n.serverSyncTree_,c.path,R,c.currentWriteId,c.applyLocally)),i=i.concat(wu(n.serverSyncTree_,_,!0))}else u=!0,h="nodata",i=i.concat(wu(n.serverSyncTree_,c.currentWriteId,!0))}Cc(n.eventQueue_,t,i),i=[],u&&(e[a].status=2,function(f){setTimeout(f,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(h==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(h),!1,null))))}h_(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Uf(r[a]);Ax(n,n.transactionQueueTree_)}function RU(n,e){let t,r=n.transactionQueueTree_;for(t=Xe(e);t!==null&&Pu(r)===void 0;)r=Dx(r,t),e=St(e),t=Xe(e);return r}function MU(n,e){let t=[];return PU(n,e,t),t.sort((r,i)=>r.order-i.order),t}function PU(n,e,t){let r=Pu(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);d_(e,i=>{PU(n,i,t)})}function h_(n,e){let t=Pu(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,EU(e,t.length>0?t:void 0)}d_(e,r=>{h_(n,r)})}function Mre(n,e){let t=$f(RU(n,e)),r=Dx(n.transactionQueueTree_,e);return dre(r,i=>{DD(n,i)}),DD(n,r),CU(r,i=>{DD(n,i)}),t}function DD(n,e){let t=Pu(e);if(t){let r=[],i=[],o=-1;for(let s=0;s<t.length;s++)t[s].status===3||(t[s].status===1?(Q(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=3,t[s].abortReason="set"):(Q(t[s].status===0,"Unexpected transaction status in abort"),t[s].unwatcher(),i=i.concat(wu(n.serverSyncTree_,t[s].currentWriteId,!0)),t[s].onComplete&&r.push(t[s].onComplete.bind(null,new Error("set"),!1,null))));o===-1?EU(e,void 0):t.length=o+1,Cc(n.eventQueue_,$f(e),i);for(let s=0;s<r.length;s++)Uf(r[s])}}function Pre(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function kre(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Lr(`Invalid query segment '${t}' in query '${n}'`)}return e}var Tj=function(n,e){let t=Nre(n),r=t.namespace;t.domain==="firebase.com"&&Xo(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Xo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||xte();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new Xv(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new ft(t.pathString)}},Nre=function(n){let e="",t="",r="",i="",o="",s=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let u=n.indexOf("/");u===-1&&(u=n.length);let h=n.indexOf("?");h===-1&&(h=n.length),e=n.substring(0,Math.min(u,h)),u<h&&(i=Pre(n.substring(u,h)));let f=kre(n.substring(Math.min(n.length,h)));l=e.indexOf(":"),l>=0?(s=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let p=e.slice(0,l);if(p.toLowerCase()==="localhost")t="localhost";else if(p.split(".").length<=2)t=p;else{let g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),t=e.substring(g+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}};var mx=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ge(this._path)?null:qj(this._path)}get ref(){return new Ru(this._repo,this._path)}get _queryIdentifier(){let e=dj(this._queryParams),t=_x(e);return t==="{}"?"default":t}get _queryObject(){return dj(this._queryParams)}isEqual(e){if(e=Ye(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=Yj(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+sne(this._path)}};var Ru=class n extends mx{constructor(e,t){super(e,t,new YD,!1)}get parent(){let e=Kj(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};Zne(Ru);ere(Ru);var Ore="FIREBASE_DATABASE_EMULATOR_HOST",gx={},Fre=!1;function Lre(n,e,t,r){n.repoInfo_=new Xv(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function Vre(n,e,t,r,i){let o=r||n.options.databaseURL;o===void 0&&(n.options.projectId||Xo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wn("Using default host for project ",n.options.projectId),o=`${n.options.projectId}-default-rtdb.firebaseio.com`);let s=Tj(o,i),a=s.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[Ore]),l?(c=!0,o=`http://${l}?ns=${a.namespace}`,s=Tj(o,i),a=s.repoInfo):c=!s.repoInfo.secure;let u=i&&c?new Pf(Pf.OWNER):new kD(n.name,n.options,e);yre("Invalid Firebase Database URL",s),Ge(s.path)||Xo("Database URL must point to the root of a Firebase Database (not including a child path).");let h=Ure(a,n,u,new PD(n.name,t));return new yx(h,n)}function jre(n,e){let t=gx[e];(!t||t[n.key]!==n)&&Xo(`Database ${e}(${n.repoInfo_}) has already been deleted.`),xre(n),delete t[n.key]}function Ure(n,e,t,r){let i=gx[e.name];i||(i={},gx[e.name]=i);let o=i[n.toURLString()];return o&&Xo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new px(n,Fre,t,r),i[n.toURLString()]=o,o}var yx=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Ire(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ru(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(jre(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Xo("Cannot call "+e+" on a deleted database.")}};function kU(n=dn(),e){let t=un(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=_s("database");r&&NU(t,...r)}return t}function NU(n,e,t,r={}){n=Ye(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Xo("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Xo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Pf(Pf.OWNER);else if(r.mockUserToken){let s=typeof r.mockUserToken=="string"?r.mockUserToken:qc(r.mockUserToken,n.app.options.projectId);o=new Pf(s)}Lre(i,e,t,o)}function Bre(n){Tte(cr),Bt(new Ut("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return Vre(r,i,o,t)},"PUBLIC").setMultipleInstances(!0)),ce(G2,K2,n),ce(G2,K2,"esm2017")}wx.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};wx.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};Bre();var Hf=class{constructor(e){return e}},OU="database",Mx=class{constructor(){return tn(OU)}};var Px=new K("angularfire2.database-instances");function $re(n,e){let t=mn(OU,n,e);return t&&new Hf(t)}function Hre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Hf(r)}}var zre={provide:Mx,deps:[[new Ae,Px]]},Wre={provide:Hf,useFactory:$re,deps:[[new Ae,Px],kt]};function FU(n,...e){return ce("angularfire",xt.full,"rtdb"),vt([Wre,zre,{provide:Px,useFactory:Hre(n),multi:!0,deps:[pe,Ne,Wt,Jt,[new Ae,wi],[new Ae,Yr],...e]}])}var LU=tt(kU,!0);var UU="functions";var kx=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return I(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return I(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return I(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return I(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var Nx="us-central1";var Ox=class{constructor(e,t,r,i,o=Nx,s=(...a)=>fetch(...a)){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new kx(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(o);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=Nx}catch{this.customDomain=null,this.region=o}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function qre(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var VU="@firebase/functions",jU="0.12.1";var Gre="auth-internal",Kre="app-check-internal",Yre="messaging-internal";function Qre(n){let e=(t,{instanceIdentifier:r})=>{let i=t.getProvider("app").getImmediate(),o=t.getProvider(Gre),s=t.getProvider(Yre),a=t.getProvider(Kre);return new Ox(i,o,s,a,r)};Bt(new Ut(UU,e,"PUBLIC").setMultipleInstances(!0)),ce(VU,jU,n),ce(VU,jU,"esm2017")}function BU(n=dn(),e=Nx){let r=un(Ye(n),UU).getImmediate({identifier:e}),i=_s("functions");return i&&$U(r,...i),r}function $U(n,e,t){qre(Ye(n),e,t)}Qre();var zf=class{constructor(e){return e}},HU="functions",Fx=class{constructor(){return tn(HU)}};var Lx=new K("angularfire2.functions-instances");function Xre(n,e){let t=mn(HU,n,e);return t&&new zf(t)}function Jre(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zf(r)}}var Zre={provide:Fx,deps:[[new Ae,Lx]]},eie={provide:zf,useFactory:Xre,deps:[[new Ae,Lx],kt]};function zU(n,...e){return ce("angularfire",xt.full,"fn"),vt([eie,Zre,{provide:Lx,useFactory:Jre(n),multi:!0,deps:[pe,Ne,Wt,Jt,[new Ae,wi],[new Ae,Yr],...e]}])}var WU=tt(BU,!0);var tie="/firebase-messaging-sw.js",nie="/firebase-cloud-messaging-push-scope",JU="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",rie="https://fcmregistrations.googleapis.com/v1",ZU="google.c.a.c_id",iie="google.c.a.c_l",oie="google.c.a.ts",sie="google.c.a.e",qU=1e4;var f_=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(f_||{});function Jo(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function aie(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}var Vx="fcm_token_details_db",cie=5,GU="fcm_token_object_Store";function lie(n){return I(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(o=>o.name).includes(Vx))return null;let e=null;return(yield Nb(Vx,cie,{upgrade:(r,i,o,s)=>I(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(GU))return;let c=s.objectStore(GU),l=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!l){if(i===2){let u=l;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:(a=u.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:Jo(u.vapidKey)}}}else if(i===3){let u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Jo(u.auth),p256dh:Jo(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Jo(u.vapidKey)}}}else if(i===4){let u=l;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:Jo(u.auth),p256dh:Jo(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:Jo(u.vapidKey)}}}}})})).close(),yield Xp(Vx),yield Xp("fcm_vapid_details_db"),yield Xp("undefined"),uie(e)?e:null})}function uie(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var die="firebase-messaging-database",hie=1,Wf="firebase-messaging-store",jx=null;function eB(){return jx||(jx=Nb(die,hie,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Wf)}}})),jx}function fie(n){return I(this,null,function*(){let e=tB(n),r=yield(yield eB()).transaction(Wf).objectStore(Wf).get(e);if(r)return r;{let i=yield lie(n.appConfig.senderId);if(i)return yield $x(n,i),i}})}function $x(n,e){return I(this,null,function*(){let t=tB(n),i=(yield eB()).transaction(Wf,"readwrite");return yield i.objectStore(Wf).put(e,t),yield i.done,e})}function tB({appConfig:n}){return n.appId}var pie={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},sr=new jr("messaging","Messaging",pie);function mie(n,e){return I(this,null,function*(){let t=yield zx(n),r=nB(e),i={method:"POST",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(Hx(n.appConfig),i)).json()}catch(s){throw sr.create("token-subscribe-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw sr.create("token-subscribe-failed",{errorInfo:s})}if(!o.token)throw sr.create("token-subscribe-no-token");return o.token})}function gie(n,e){return I(this,null,function*(){let t=yield zx(n),r=nB(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},o;try{o=yield(yield fetch(`${Hx(n.appConfig)}/${e.token}`,i)).json()}catch(s){throw sr.create("token-update-failed",{errorInfo:s?.toString()})}if(o.error){let s=o.error.message;throw sr.create("token-update-failed",{errorInfo:s})}if(!o.token)throw sr.create("token-update-no-token");return o.token})}function yie(n,e){return I(this,null,function*(){let r={method:"DELETE",headers:yield zx(n)};try{let o=yield(yield fetch(`${Hx(n.appConfig)}/${e}`,r)).json();if(o.error){let s=o.error.message;throw sr.create("token-unsubscribe-failed",{errorInfo:s})}}catch(i){throw sr.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function Hx({projectId:n}){return`${rie}/projects/${n}/registrations`}function zx(t){return I(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function nB({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==JU&&(i.web.applicationPubKey=r),i}var vie=7*24*60*60*1e3;function _ie(n){return I(this,null,function*(){let e=yield wie(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Jo(e.getKey("auth")),p256dh:Jo(e.getKey("p256dh"))},r=yield fie(n.firebaseDependencies);if(r){if(Eie(r.subscriptionOptions,t))return Date.now()>=r.createTime+vie?bie(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield yie(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return KU(n.firebaseDependencies,t)}else return KU(n.firebaseDependencies,t)})}function bie(n,e){return I(this,null,function*(){try{let t=yield gie(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield $x(n.firebaseDependencies,r),t}catch(t){throw t}})}function KU(n,e){return I(this,null,function*(){let r={token:yield mie(n,e),createTime:Date.now(),subscriptionOptions:e};return yield $x(n,r),r.token})}function wie(n,e){return I(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:aie(e)})})}function Eie(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,o=e.p256dh===n.p256dh;return t&&r&&i&&o}function YU(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Iie(e,n),Cie(e,n),Tie(e,n),e}function Iie(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let o=e.notification.icon;o&&(n.notification.icon=o)}function Cie(n,e){e.data&&(n.data=e.data)}function Tie(n,e){var t,r,i,o,s;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(o=e.notification)===null||o===void 0?void 0:o.click_action;a&&(n.fcmOptions.link=a);let c=(s=e.fcmOptions)===null||s===void 0?void 0:s.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function Sie(n){return typeof n=="object"&&!!n&&ZU in n}Die("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Die(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function xie(n){if(!n||!n.options)throw Ux("App Configuration Object");if(!n.name)throw Ux("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw Ux(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function Ux(n){return sr.create("missing-app-config-values",{valueName:n})}var Bx=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=xie(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function Aie(n){return I(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(tie,{scope:nie}),n.swRegistration.update().catch(()=>{}),yield Rie(n.swRegistration)}catch(e){throw sr.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function Rie(n){return I(this,null,function*(){return new Promise((e,t)=>{let r=setTimeout(()=>t(new Error(`Service worker not registered after ${qU} ms`)),qU),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=o=>{var s;((s=o.target)===null||s===void 0?void 0:s.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})})}function Mie(n,e){return I(this,null,function*(){if(!e&&!n.swRegistration&&(yield Aie(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw sr.create("invalid-sw-registration");n.swRegistration=e}})}function Pie(n,e){return I(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=JU)})}function kie(n,e){return I(this,null,function*(){if(!navigator)throw sr.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw sr.create("permission-blocked");return yield Pie(n,e?.vapidKey),yield Mie(n,e?.serviceWorkerRegistration),_ie(n)})}function Nie(n,e,t){return I(this,null,function*(){let r=Oie(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[ZU],message_name:t[iie],message_time:t[oie],message_device_time:Math.floor(Date.now()/1e3)})})}function Oie(n){switch(n){case f_.NOTIFICATION_CLICKED:return"notification_open";case f_.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fie(n,e){return I(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===f_.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(YU(t)):n.onMessageHandler.next(YU(t)));let r=t.data;Sie(r)&&r[sie]==="1"&&(yield Nie(n,t.messageType,r))})}var QU="@firebase/messaging",XU="0.12.16";var Lie=n=>{let e=new Bx(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>Fie(e,t)),e},Vie=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>kie(e,r)}};function jie(){Bt(new Ut("messaging",Lie,"PUBLIC")),Bt(new Ut("messaging-internal",Vie,"PRIVATE")),ce(QU,XU),ce(QU,XU,"esm2017")}function rB(){return I(this,null,function*(){try{yield Gc()}catch{return!1}return typeof window<"u"&&Ni()&&Ud()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function iB(n=dn()){return rB().then(e=>{if(!e)throw sr.create("unsupported-browser")},e=>{throw sr.create("indexed-db-unsupported")}),un(Ye(n),"messaging").getImmediate()}jie();var qf=class{constructor(e){return e}},oB="messaging",Wx=class{constructor(){return tn(oB)}};var qx=new K("angularfire2.messaging-instances");function Uie(n,e,t){if(Lo(t))return null;let r=mn(oB,n,e);return r&&new qf(r)}function Bie(n){return(e,t,r)=>{if(Lo(r))return null;let i=e.runOutsideAngular(()=>n(t));return new qf(i)}}var $ie={provide:Wx,deps:[[new Ae,qx]]},Hie={provide:qf,useFactory:Uie,deps:[[new Ae,qx],kt,zt]};function sB(n,...e){return ce("angularfire",xt.full,"fcm"),vt([Hie,$ie,{provide:qx,useFactory:Bie(n),multi:!0,deps:[pe,Ne,zt,Wt,Jt,...e]}])}var aB=tt(iB,!0);var Gf=class{constructor(e){return e}},cB="performance",Gx=class{constructor(){return tn(cB)}};var Kx=new K("angularfire2.performance-instances");function zie(n,e,t){if(!kl(t))return null;let r=mn(cB,n,e);return r&&new Gf(r)}function Wie(n){return(e,t,r)=>{if(!kl(t))return null;let i=e.runOutsideAngular(()=>n(r));return new Gf(i)}}var qie={provide:Gx,deps:[[new Ae,Kx]]},Gie={provide:Gf,useFactory:zie,deps:[[new Ae,Kx],kt,zt]};function lB(n,...e){return ce("angularfire",xt.full,"perf"),vt([Gie,qie,{provide:Kx,useFactory:Wie(n),multi:!0,deps:[pe,zt,Ne,Wt,Jt,...e]}])}var uB=tt(iP,!0);var gB="firebasestorage.googleapis.com",Kie="storageBucket",Yie=2*60*1e3,Qie=10*60*1e3;var Zi=class n extends Dr{constructor(e,t,r=0){super(Yx(e),`Firebase Storage: ${t} (${Yx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},es=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(es||{});function Yx(n){return"storage/"+n}function Xie(){let n="An unknown error occurred, please check the error payload for server response.";return new Zi(es.UNKNOWN,n)}function Jie(){return new Zi(es.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Zie(){return new Zi(es.CANCELED,"User canceled the upload/download.")}function eoe(n){return new Zi(es.INVALID_URL,"Invalid URL '"+n+"'.")}function toe(n){return new Zi(es.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dB(n){return new Zi(es.INVALID_ARGUMENT,n)}function yB(){return new Zi(es.APP_DELETED,"The Firebase app was deleted.")}function noe(n){return new Zi(es.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Zo=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw toe(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}let s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function l(V){V.path_=decodeURIComponent(V.path)}let u="v[A-Za-z0-9_]+",h=t.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${u}/b/${i}/o${f}`,"i"),g={bucket:1,path:3},v=t===gB?"(?:storage.googleapis.com|storage.cloud.google.com)":t,_="([^?#]*)",D=new RegExp(`^https?://${v}/${i}/${_}`,"i"),F=[{regex:a,indices:c,postModify:o},{regex:p,indices:g,postModify:l},{regex:D,indices:{bucket:1,path:2},postModify:l}];for(let V=0;V<F.length;V++){let U=F[V],j=U.regex.exec(e);if(j){let T=j[U.indices.bucket],b=j[U.indices.path];b||(b=""),r=new n(T,b),U.postModify(r);break}}if(r==null)throw eoe(e);return r}},Qx=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function roe(n,e,t){let r=1,i=null,o=null,s=!1,a=0;function c(){return a===2}let l=!1;function u(..._){l||(l=!0,e.apply(null,_))}function h(_){i=setTimeout(()=>{i=null,n(p,c())},_)}function f(){o&&clearTimeout(o)}function p(_,...D){if(l){f();return}if(_){f(),u.call(null,_,...D);return}if(c()||s){f(),u.call(null,_,...D);return}r<64&&(r*=2);let F;a===1?(a=2,F=0):F=(r+Math.random())*1e3,h(F)}let g=!1;function v(_){g||(g=!0,f(),!l&&(i!==null?(_||(a=2),clearTimeout(i),h(0)):_||(a=1)))}return h(0),o=setTimeout(()=>{s=!0,v(!0)},t),v}function ioe(n){n(!1)}function ooe(n){return n!==void 0}function hB(n,e,t,r){if(r<e)throw dB(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dB(`Invalid value for '${n}'. Expected ${t} or less.`)}function soe(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var Xx=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(Xx||{});function aoe(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}var Jx=class{constructor(e,t,r,i,o,s,a,c,l,u,h,f=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,g)=>{this.resolve_=p,this.reject_=g,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new ku(!1,null,!0));return}let o=this.connectionFactory_();this.pendingConnection_=o;let s=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;let a=o.getErrorCode()===Xx.NO_ERROR,c=o.getStatus();if(!a||aoe(c,this.additionalRetryCodes_)&&this.retry){let u=o.getErrorCode()===Xx.ABORT;r(!1,new ku(!1,null,u));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new ku(l,o))})},t=(r,i)=>{let o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());ooe(c)?o(c):o()}catch(c){s(c)}else if(a!==null){let c=Xie();c.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,c)):s(c)}else if(i.canceled){let c=this.appDelete_?yB():Zie();s(c)}else{let c=Jie();s(c)}};this.canceled_?t(!1,new ku(!1,null,!0)):this.backoffId_=roe(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&ioe(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},ku=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function coe(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function loe(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function uoe(n,e){e&&(n["X-Firebase-GMPID"]=e)}function doe(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function hoe(n,e,t,r,i,o,s=!0){let a=soe(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return uoe(l,e),coe(l,t),loe(l,o),doe(l,r),new Jx(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}function foe(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function poe(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var GRe=256*1024;var Zx=class n{constructor(e,t){this._service=e,t instanceof Zo?this._location=t:this._location=Zo.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Zo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return poe(this._location.path)}get storage(){return this._service}get parent(){let e=foe(this._location.path);if(e===null)return null;let t=new Zo(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw noe(e)}};function fB(n,e){let t=e?.[Kie];return t==null?null:Zo.makeFromBucketSpec(t,n)}function moe(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:qc(i,n.app.options.projectId))}var eA=class{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=gB,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yie,this._maxUploadRetryTime=Qie,this._requests=new Set,i!=null?this._bucket=Zo.makeFromBucketSpec(i,this._host):this._bucket=fB(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zo.makeFromBucketSpec(this._url,e):this._bucket=fB(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hB("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hB("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return I(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return I(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zx(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new Qx(yB());{let s=hoe(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(e,t){return I(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},pB="@firebase/storage",mB="0.13.5";var vB="storage";function _B(n=dn(),e){n=Ye(n);let r=un(n,vB).getImmediate({identifier:e}),i=_s("storage");return i&&bB(r,...i),r}function bB(n,e,t,r={}){moe(n,e,t,r)}function goe(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new eA(t,r,i,e,cr)}function yoe(){Bt(new Ut(vB,goe,"PUBLIC").setMultipleInstances(!0)),ce(pB,mB,""),ce(pB,mB,"esm2017")}yoe();var Kf=class{constructor(e){return e}},wB="storage",tA=class{constructor(){return tn(wB)}};var nA=new K("angularfire2.storage-instances");function voe(n,e){let t=mn(wB,n,e);return t&&new Kf(t)}function _oe(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Kf(r)}}var boe={provide:tA,deps:[[new Ae,nA]]},woe={provide:Kf,useFactory:voe,deps:[[new Ae,nA],kt]};function EB(n,...e){return ce("angularfire",xt.full,"gcs"),vt([woe,boe,{provide:nA,useFactory:_oe(n),multi:!0,deps:[pe,Ne,Wt,Jt,[new Ae,wi],[new Ae,Yr],...e]}])}var IB=tt(_B,!0);var rA="@firebase/remote-config",CB="0.5.0";var SB="remote-config",TB=100;var Eoe={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser","custom-signal-max-allowed-signals":"Setting more than {$maxSignals} custom signals is not supported."},ar=new jr("remoteconfig","Remote Config",Eoe);function DB(n=dn()){return n=Ye(n),un(n,SB).getImmediate()}function xB(n){let e=Ye(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var iA=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return I(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(o),i})}};function Ioe(n=navigator){return n.languages&&n.languages[0]||n.language}var oA=class{constructor(e,t,r,i,o,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=s}fetch(e){return I(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),o=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:Ioe(),custom_signals:e.customSignals},c={method:"POST",headers:s,body:JSON.stringify(a)},l=fetch(o,c),u=new Promise((_,D)=>{e.signal.addEventListener(()=>{let R=new Error("The operation was aborted.");R.name="AbortError",D(R)})}),h;try{yield Promise.race([l,u]),h=yield l}catch(_){let D="fetch-client-network";throw _?.name==="AbortError"&&(D="fetch-timeout"),ar.create(D,{originalErrorMessage:_?.message})}let f=h.status,p=h.headers.get("ETag")||void 0,g,v;if(h.status===200){let _;try{_=yield h.json()}catch(D){throw ar.create("fetch-client-parse",{originalErrorMessage:D?.message})}g=_.entries,v=_.state}if(v==="INSTANCE_STATE_UNSPECIFIED"?f=500:v==="NO_CHANGE"?f=304:(v==="NO_TEMPLATE"||v==="EMPTY_CONFIG")&&(g={}),f!==304&&f!==200)throw ar.create("fetch-status",{httpStatus:f});return{status:f,eTag:p,config:g}})}};function Coe(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),o=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(o),r(ar.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Toe(n){if(!(n instanceof Dr)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var sA=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return I(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,o){return I(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield Coe(e.signal,t);try{let s=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),s}catch(s){if(!Toe(s))throw s;let a={throttleEndTimeMillis:Date.now()+Kc(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var Soe=60*1e3,Doe=12*60*60*1e3,aA=class{get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}constructor(e,t,r,i,o){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:Soe,minimumFetchIntervalMillis:Doe},this.defaultConfig={}}};function p_(n,e){let t=n.target.error||void 0;return ar.create(e,{originalErrorMessage:t&&t?.message})}var Qs="app_namespace_store",xoe="firebase_remote_config",Aoe=1;function Roe(){return new Promise((n,e)=>{try{let t=indexedDB.open(xoe,Aoe);t.onerror=r=>{e(p_(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Qs,{keyPath:"compositeKey"})}}}catch(t){e(ar.create("storage-open",{originalErrorMessage:t?.message}))}})}var cA=class{constructor(e,t,r,i=Roe()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}getCustomSignals(){return this.get("custom_signals")}setCustomSignals(e){return I(this,null,function*(){let r=(yield this.openDbPromise).transaction([Qs],"readwrite"),i=yield this.getWithTransaction("custom_signals",r),o=Object.assign(Object.assign({},i),e),s=Object.fromEntries(Object.entries(o).filter(([a,c])=>c!==null).map(([a,c])=>typeof c=="number"?[a,c.toString()]:[a,c]));if(Object.keys(s).length>TB)throw ar.create("custom-signal-max-allowed-signals",{maxSignals:TB});return yield this.setWithTransaction("custom_signals",s,r),s})}getWithTransaction(e,t){return I(this,null,function*(){return new Promise((r,i)=>{let o=t.objectStore(Qs),s=this.createCompositeKey(e);try{let a=o.get(s);a.onerror=c=>{i(p_(c,"storage-get"))},a.onsuccess=c=>{let l=c.target.result;r(l?l.value:void 0)}}catch(a){i(ar.create("storage-get",{originalErrorMessage:a?.message}))}})})}setWithTransaction(e,t,r){return I(this,null,function*(){return new Promise((i,o)=>{let s=r.objectStore(Qs),a=this.createCompositeKey(e);try{let c=s.put({compositeKey:a,value:t});c.onerror=l=>{o(p_(l,"storage-set"))},c.onsuccess=()=>{i()}}catch(c){o(ar.create("storage-set",{originalErrorMessage:c?.message}))}})})}get(e){return I(this,null,function*(){let r=(yield this.openDbPromise).transaction([Qs],"readonly");return this.getWithTransaction(e,r)})}set(e,t){return I(this,null,function*(){let i=(yield this.openDbPromise).transaction([Qs],"readwrite");return this.setWithTransaction(e,t,i)})}delete(e){return I(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let s=t.transaction([Qs],"readwrite").objectStore(Qs),a=this.createCompositeKey(e);try{let c=s.delete(a);c.onerror=l=>{i(p_(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(ar.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var lA=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}getCustomSignals(){return this.customSignals}loadFromStorage(){return I(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=this.storage.getCustomSignals(),o=yield e;o&&(this.lastFetchStatus=o);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let a=yield r;a&&(this.activeConfig=a);let c=yield i;c&&(this.customSignals=c)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}setCustomSignals(e){return I(this,null,function*(){this.customSignals=yield this.storage.setCustomSignals(e)})}};function Moe(){Bt(new Ut(SB,n,"PUBLIC").setMultipleInstances(!0)),ce(rA,CB),ce(rA,CB,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ar.create("registration-window");if(!Ni())throw ar.create("indexed-db-unavailable");let{projectId:o,apiKey:s,appId:a}=r.options;if(!o)throw ar.create("registration-project-id");if(!s)throw ar.create("registration-api-key");if(!a)throw ar.create("registration-app-id");t=t||"firebase";let c=new cA(a,r.name,t),l=new lA(c),u=new Ur(rA);u.logLevel=Dn.ERROR;let h=new oA(i,cr,t,o,s,a),f=new sA(h,c),p=new iA(f,c,l,u),g=new aA(r,p,l,c,u);return xB(g),g}}Moe();var Yf=class{constructor(e){return e}},AB="remote-config",uA=class{constructor(){return tn(AB)}};var dA=new K("angularfire2.remote-config-instances");function Poe(n,e,t){if(Lo(t))return null;let r=mn(AB,n,e);return r&&new Yf(r)}function koe(n){return(e,t,r)=>{if(Lo(r))return null;let i=e.runOutsideAngular(()=>n(t));return new Yf(i)}}var Noe={provide:uA,deps:[[new Ae,dA]]},Ooe={provide:Yf,useFactory:Poe,deps:[[new Ae,dA],kt,zt]};function RB(n,...e){return ce("angularfire",xt.full,"rc"),vt([Ooe,Noe,{provide:dA,useFactory:koe(n),multi:!0,deps:[pe,Ne,zt,Wt,Jt,...e]}])}var MB=tt(DB,!0);var ni={firebaseConfig:{apiKey:"AIzaSyByCHDUnGztWtr1CT1TL4xusEWynOMhQZo",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0,baseUrl:"https://wild-boar-racing-be-325394396819.europe-west1.run.app/wild-boar-racing/api/v1",circuitName:"lignano"};function Jf(n){return n+.5|0}var Xs=(n,e,t)=>Math.max(Math.min(n,t),e);function Qf(n){return Xs(Jf(n*2.55),0,255)}function Js(n){return Xs(Jf(n*255),0,255)}function ts(n){return Xs(Jf(n/2.55)/100,0,1)}function PB(n){return Xs(Jf(n*100),0,100)}var ri={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},fA=[..."0123456789ABCDEF"],Foe=n=>fA[n&15],Loe=n=>fA[(n&240)>>4]+fA[n&15],m_=n=>(n&240)>>4===(n&15),Voe=n=>m_(n.r)&&m_(n.g)&&m_(n.b)&&m_(n.a);function joe(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&ri[n[1]]*17,g:255&ri[n[2]]*17,b:255&ri[n[3]]*17,a:e===5?ri[n[4]]*17:255}:(e===7||e===9)&&(t={r:ri[n[1]]<<4|ri[n[2]],g:ri[n[3]]<<4|ri[n[4]],b:ri[n[5]]<<4|ri[n[6]],a:e===9?ri[n[7]]<<4|ri[n[8]]:255})),t}var Uoe=(n,e)=>n<255?e(n):"";function Boe(n){var e=Voe(n)?Foe:Loe;return n?"#"+e(n.r)+e(n.g)+e(n.b)+Uoe(n.a,e):void 0}var $oe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function FB(n,e,t){let r=e*Math.min(t,1-t),i=(o,s=(o+n/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function Hoe(n,e,t){let r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function zoe(n,e,t){let r=FB(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function Woe(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function pA(n){let t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=(o+s)/2,c,l,u;return o!==s&&(u=o-s,l=a>.5?u/(2-o-s):u/(o+s),c=Woe(t,r,i,u,o),c=c*60+.5),[c|0,l||0,a]}function mA(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Js)}function gA(n,e,t){return mA(FB,n,e,t)}function qoe(n,e,t){return mA(zoe,n,e,t)}function Goe(n,e,t){return mA(Hoe,n,e,t)}function LB(n){return(n%360+360)%360}function Koe(n){let e=$oe.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Qf(+e[5]):Js(+e[5]));let i=LB(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?r=qoe(i,o,s):e[1]==="hsv"?r=Goe(i,o,s):r=gA(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}function Yoe(n,e){var t=pA(n);t[0]=LB(t[0]+e),t=gA(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Qoe(n){if(!n)return;let e=pA(n),t=e[0],r=PB(e[1]),i=PB(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${ts(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var kB={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},NB={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Xoe(){let n={},e=Object.keys(NB),t=Object.keys(kB),r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<t.length;i++)o=t[i],a=a.replace(o,kB[o]);o=parseInt(NB[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}var g_;function Joe(n){g_||(g_=Xoe(),g_.transparent=[0,0,0,0]);let e=g_[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Zoe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function ese(n){let e=Zoe.exec(n),t=255,r,i,o;if(e){if(e[7]!==r){let s=+e[7];t=e[8]?Qf(s):Xs(s*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Qf(r):Xs(r,0,255)),i=255&(e[4]?Qf(i):Xs(i,0,255)),o=255&(e[6]?Qf(o):Xs(o,0,255)),{r,g:i,b:o,a:t}}}function tse(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ts(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var hA=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Nu=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function nse(n,e,t){let r=Nu(ts(n.r)),i=Nu(ts(n.g)),o=Nu(ts(n.b));return{r:Js(hA(r+t*(Nu(ts(e.r))-r))),g:Js(hA(i+t*(Nu(ts(e.g))-i))),b:Js(hA(o+t*(Nu(ts(e.b))-o))),a:n.a+t*(e.a-n.a)}}function y_(n,e,t){if(n){let r=pA(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=gA(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function VB(n,e){return n&&Object.assign(e||{},n)}function OB(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Js(n[3]))):(e=VB(n,{r:0,g:0,b:0,a:1}),e.a=Js(e.a)),e}function rse(n){return n.charAt(0)==="r"?ese(n):Koe(n)}var Xf=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=OB(e):t==="string"&&(r=joe(e)||Joe(e)||rse(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=VB(this._rgb);return e&&(e.a=ts(e.a)),e}set rgb(e){this._rgb=OB(e)}rgbString(){return this._valid?tse(this._rgb):void 0}hexString(){return this._valid?Boe(this._rgb):void 0}hslString(){return this._valid?Qoe(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,o,s=t===o?.5:t,a=2*s-1,c=r.a-i.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;o=1-l,r.r=255&l*r.r+o*i.r+.5,r.g=255&l*r.g+o*i.g+.5,r.b=255&l*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=nse(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Js(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Jf(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return y_(this._rgb,2,e),this}darken(e){return y_(this._rgb,2,-e),this}saturate(e){return y_(this._rgb,1,e),this}desaturate(e){return y_(this._rgb,1,-e),this}rotate(e){return Yoe(this._rgb,e),this}};function no(){}var YB=(()=>{let n=0;return()=>n++})();function Ve(n){return n==null}function bt(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function $e(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ft(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function br(n,e){return Ft(n)?n:e}function Te(n,e){return typeof n>"u"?e:n}var QB=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,bA=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function pt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ot(n,e,t,r){let i,o,s;if(bt(n))if(o=n.length,r)for(i=o-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<o;i++)e.call(t,n[i],i);else if($e(n))for(s=Object.keys(n),o=s.length,i=0;i<o;i++)e.call(t,n[s[i]],s[i])}function tp(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function E_(n){if(bt(n))return n.map(E_);if($e(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=E_(n[t[i]]);return e}return n}function XB(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function ise(n,e,t,r){if(!XB(n))return;let i=e[n],o=t[n];$e(i)&&$e(o)?Fu(i,o,r):e[n]=E_(o)}function Fu(n,e,t){let r=bt(e)?e:[e],i=r.length;if(!$e(n))return n;t=t||{};let o=t.merger||ise,s;for(let a=0;a<i;++a){if(s=r[a],!$e(s))continue;let c=Object.keys(s);for(let l=0,u=c.length;l<u;++l)o(c[l],n,s,t)}return n}function Vu(n,e){return Fu(n,e,{merger:ose})}function ose(n,e,t){if(!XB(n))return;let r=e[n],i=t[n];$e(r)&&$e(i)?Vu(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=E_(i))}var jB={"":n=>n,x:n=>n.x,y:n=>n.y};function sse(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function ase(n){let e=sse(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function is(n,e){return(jB[e]||(jB[e]=ase(e)))(n)}function S_(n){return n.charAt(0).toUpperCase()+n.slice(1)}var ju=n=>typeof n<"u",ns=n=>typeof n=="function",wA=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function JB(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var wt=Math.PI,Et=2*wt,cse=Et+wt,I_=Number.POSITIVE_INFINITY,lse=wt/180,Gt=wt/2,Tc=wt/4,UB=wt*2/3,rs=Math.log10,xi=Math.sign;function Uu(n,e,t){return Math.abs(n-e)<t}function EA(n){let e=Math.round(n);n=Uu(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(rs(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function ZB(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function use(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function xc(n){return!use(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function e$(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function IA(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ii(n){return n*(wt/180)}function D_(n){return n*(180/wt)}function CA(n){if(!Ft(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function TA(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),o=Math.atan2(r,t);return o<-.5*wt&&(o+=Et),{angle:o,distance:i}}function C_(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function dse(n,e){return(n-e+cse)%Et-wt}function _r(n){return(n%Et+Et)%Et}function Bu(n,e,t,r){let i=_r(n),o=_r(e),s=_r(t),a=_r(o-i),c=_r(s-i),l=_r(i-o),u=_r(i-s);return i===o||i===s||r&&o===s||a>c&&l<u}function gn(n,e,t){return Math.max(e,Math.min(t,n))}function t$(n){return gn(n,-32768,32767)}function ro(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function x_(n,e,t){t=t||(s=>n[s]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}var eo=(n,e,t,r)=>x_(n,t,r?i=>{let o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),n$=(n,e,t)=>x_(n,t,r=>n[r][e]>=t);function r$(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var i$=["push","pop","shift","splice","unshift"];function o$(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),i$.forEach(t=>{let r="_onData"+S_(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){let s=i.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...o)}),s}})})}function SA(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(i$.forEach(o=>{delete n[o]}),delete n._chartjs)}function DA(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var xA=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function AA(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,xA.call(window,()=>{r=!1,n.apply(e,t)}))}}function s$(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var A_=n=>n==="start"?"left":n==="end"?"right":"center",Mn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,a$=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function RA(n,e,t){let r=e.length,i=0,o=r;if(n._sorted){let{iScale:s,vScale:a,_parsed:c}=n,l=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,u=s.axis,{min:h,max:f,minDefined:p,maxDefined:g}=s.getUserBounds();if(p){if(i=Math.min(eo(c,u,h).lo,t?r:eo(e,u,s.getPixelForValue(h)).lo),l){let v=c.slice(0,i+1).reverse().findIndex(_=>!Ve(_[a.axis]));i-=Math.max(0,v)}i=gn(i,0,r-1)}if(g){let v=Math.max(eo(c,s.axis,f,!0).hi+1,t?0:eo(e,u,s.getPixelForValue(f),!0).hi+1);if(l){let _=c.slice(v-1).findIndex(D=>!Ve(D[a.axis]));v+=Math.max(0,_)}o=gn(v,i,r)-i}else o=r-i}return{start:i,count:o}}function MA(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}var v_=n=>n===0||n===1,BB=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Et/t)),$B=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Et/t)+1,Ou={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Gt)+1,easeOutSine:n=>Math.sin(n*Gt),easeInOutSine:n=>-.5*(Math.cos(wt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>v_(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>v_(n)?n:BB(n,.075,.3),easeOutElastic:n=>v_(n)?n:$B(n,.075,.3),easeInOutElastic(n){return v_(n)?n:n<.5?.5*BB(n*2,.1125,.45):.5+.5*$B(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ou.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ou.easeInBounce(n*2)*.5:Ou.easeOutBounce(n*2-1)*.5+.5};function PA(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function kA(n){return PA(n)?n:new Xf(n)}function yA(n){return PA(n)?n:new Xf(n).saturate(.5).darken(.1).hexString()}var hse=["x","y","borderWidth","radius","tension"],fse=["color","borderColor","backgroundColor"];function pse(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:fse},numbers:{type:"number",properties:hse}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function mse(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var HB=new Map;function gse(n,e){e=e||{};let t=n+JSON.stringify(e),r=HB.get(t);return r||(r=new Intl.NumberFormat(n,e),HB.set(t,r)),r}function $u(n,e,t){return gse(e,t).format(n)}var c$={values(n){return bt(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,o=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(i="scientific"),o=yse(n,t)}let s=rs(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),$u(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(rs(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?c$.numeric.call(this,n,e,t):""}};function yse(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var np={formatters:c$};function vse(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:np.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var ea=Object.create(null),R_=Object.create(null);function Zf(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function vA(n,e,t){return typeof e=="string"?Fu(Zf(n,e),t):Fu(Zf(n,""),e)}var _A=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>yA(i.backgroundColor),this.hoverBorderColor=(r,i)=>yA(i.borderColor),this.hoverColor=(r,i)=>yA(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return vA(this,e,t)}get(e){return Zf(this,e)}describe(e,t){return vA(R_,e,t)}override(e,t){return vA(ea,e,t)}route(e,t,r,i){let o=Zf(this,e),s=Zf(this,r),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=s[i];return $e(c)?Object.assign({},l,c):Te(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},mt=new _A({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[pse,mse,vse]);function _se(n){return!n||Ve(n.size)||Ve(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function ep(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function l$(n,e,t,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let s=0,a=t.length,c,l,u,h,f;for(c=0;c<a;c++)if(h=t[c],h!=null&&!bt(h))s=ep(n,i,o,s,h);else if(bt(h))for(l=0,u=h.length;l<u;l++)f=h[l],f!=null&&!bt(f)&&(s=ep(n,i,o,s,f));n.restore();let p=o.length/2;if(p>t.length){for(c=0;c<p;c++)delete i[o[c]];o.splice(0,p)}return s}function ta(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function NA(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function M_(n,e,t,r){OA(n,e,t,r,null)}function OA(n,e,t,r,i){let o,s,a,c,l,u,h,f,p=e.pointStyle,g=e.rotation,v=e.radius,_=(g||0)*lse;if(p&&typeof p=="object"&&(o=p.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(_),n.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),n.restore();return}if(!(isNaN(v)||v<=0)){switch(n.beginPath(),p){default:i?n.ellipse(t,r,i/2,v,0,0,Et):n.arc(t,r,v,0,Et),n.closePath();break;case"triangle":u=i?i/2:v,n.moveTo(t+Math.sin(_)*u,r-Math.cos(_)*v),_+=UB,n.lineTo(t+Math.sin(_)*u,r-Math.cos(_)*v),_+=UB,n.lineTo(t+Math.sin(_)*u,r-Math.cos(_)*v),n.closePath();break;case"rectRounded":l=v*.516,c=v-l,s=Math.cos(_+Tc)*c,h=Math.cos(_+Tc)*(i?i/2-l:c),a=Math.sin(_+Tc)*c,f=Math.sin(_+Tc)*(i?i/2-l:c),n.arc(t-h,r-a,l,_-wt,_-Gt),n.arc(t+f,r-s,l,_-Gt,_),n.arc(t+h,r+a,l,_,_+Gt),n.arc(t-f,r+s,l,_+Gt,_+wt),n.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*v,u=i?i/2:c,n.rect(t-u,r-c,2*u,2*c);break}_+=Tc;case"rectRot":h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+f,r-s),n.lineTo(t+h,r+a),n.lineTo(t-f,r+s),n.closePath();break;case"crossRot":_+=Tc;case"cross":h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"star":h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s),_+=Tc,h=Math.cos(_)*(i?i/2:v),s=Math.cos(_)*v,a=Math.sin(_)*v,f=Math.sin(_)*(i?i/2:v),n.moveTo(t-h,r-a),n.lineTo(t+h,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"line":s=i?i/2:Math.cos(_)*v,a=Math.sin(_)*v,n.moveTo(t-s,r-a),n.lineTo(t+s,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(_)*(i?i/2:v),r+Math.sin(_)*v);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function to(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function rp(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function ip(n){n.restore()}function u$(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function d$(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function bse(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Ve(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function wse(n,e,t,r,i){if(i.strikethrough||i.underline){let o=n.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,c=t-o.actualBoundingBoxAscent,l=t+o.actualBoundingBoxDescent,u=i.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(s,u),n.lineTo(a,u),n.stroke()}}function Ese(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function na(n,e,t,r,i,o={}){let s=bt(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",c,l;for(n.save(),n.font=i.string,bse(n,o),c=0;c<s.length;++c)l=s[c],o.backdrop&&Ese(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),Ve(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(l,t,r,o.maxWidth)),n.fillText(l,t,r,o.maxWidth),wse(n,t,r,l,o),r+=Number(i.lineHeight);n.restore()}function Hu(n,e){let{x:t,y:r,w:i,h:o,radius:s}=e;n.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*wt,wt,!0),n.lineTo(t,r+o-s.bottomLeft),n.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,wt,Gt,!0),n.lineTo(t+i-s.bottomRight,r+o),n.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,Gt,0,!0),n.lineTo(t+i,r+s.topRight),n.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-Gt,!0),n.lineTo(t+s.topLeft,r)}var Ise=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Cse=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tse(n,e){let t=(""+n).match(Ise);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var Sse=n=>+n||0;function P_(n,e){let t={},r=$e(e),i=r?Object.keys(e):e,o=$e(n)?r?s=>Te(n[s],n[e[s]]):s=>n[s]:()=>n;for(let s of i)t[s]=Sse(o(s));return t}function FA(n){return P_(n,{top:"y",right:"x",bottom:"y",left:"x"})}function ra(n){return P_(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Pn(n){let e=FA(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function sn(n,e){n=n||{},e=e||mt.font;let t=Te(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Te(n.style,e.style);r&&!(""+r).match(Cse)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:Te(n.family,e.family),lineHeight:Tse(Te(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Te(n.weight,e.weight),string:""};return i.string=_se(i),i}function zu(n,e,t,r){let i=!0,o,s,a;for(o=0,s=n.length;o<s;++o)if(a=n[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&bt(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function h$(n,e,t){let{min:r,max:i}=n,o=bA(e,(i-r)/2),s=(a,c)=>t&&a===0?0:a+c;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function os(n,e){return Object.assign(Object.create(n),e)}function k_(n,e=[""],t,r,i=()=>n[0]){let o=t||n;typeof r>"u"&&(r=m$("_fallback",n));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:a=>k_([a,...n],e,o,r)};return new Proxy(s,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return f$(a,c,()=>Nse(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return WB(a).includes(c)},ownKeys(a){return WB(a)},set(a,c,l){let u=a._storage||(a._storage=i());return a[c]=u[c]=l,delete a._keys,!0}})}function Dc(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:LA(n,r),setContext:o=>Dc(n,o,t,r),override:o=>Dc(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return f$(o,s,()=>xse(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function LA(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:ns(t)?t:()=>t,isIndexable:ns(r)?r:()=>r}}var Dse=(n,e)=>n?n+S_(e):e,VA=(n,e)=>$e(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function f$(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let r=t();return n[e]=r,r}function xse(n,e,t){let{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=n,a=r[e];return ns(a)&&s.isScriptable(e)&&(a=Ase(e,a,n,t)),bt(a)&&a.length&&(a=Rse(e,a,n,s.isIndexable)),VA(e,a)&&(a=Dc(a,i,o&&o[e],s)),a}function Ase(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(o,s||r);return a.delete(n),VA(n,c)&&(c=jA(i._scopes,i,n,c)),c}function Rse(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if($e(e[0])){let c=e,l=i._scopes.filter(u=>u!==c);e=[];for(let u of c){let h=jA(l,i,n,u);e.push(Dc(h,o,s&&s[n],a))}}return e}function p$(n,e,t){return ns(n)?n(e,t):n}var Mse=(n,e)=>n===!0?e:typeof n=="string"?is(e,n):void 0;function Pse(n,e,t,r,i){for(let o of e){let s=Mse(t,o);if(s){n.add(s);let a=p$(s._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(s===!1&&typeof r<"u"&&t!==r)return null}return!1}function jA(n,e,t,r){let i=e._rootScopes,o=p$(e._fallback,t,r),s=[...n,...i],a=new Set;a.add(r);let c=zB(a,s,t,o||t,r);return c===null||typeof o<"u"&&o!==t&&(c=zB(a,s,o,c,r),c===null)?!1:k_(Array.from(a),[""],i,o,()=>kse(e,t,r))}function zB(n,e,t,r,i){for(;t;)t=Pse(n,e,t,r,i);return t}function kse(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return bt(i)&&$e(t)?t:i||{}}function Nse(n,e,t,r){let i;for(let o of e)if(i=m$(Dse(o,n),t),typeof i<"u")return VA(n,i)?jA(t,r,n,i):i}function m$(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function WB(n){let e=n._keys;return e||(e=n._keys=Ose(n._scopes)),e}function Ose(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function UA(n,e,t,r){let{iScale:i}=n,{key:o="r"}=this._parsing,s=new Array(r),a,c,l,u;for(a=0,c=r;a<c;++a)l=a+t,u=e[l],s[a]={r:i.parse(is(u,o),l)};return s}var Fse=Number.EPSILON||1e-14,Lu=(n,e)=>e<n.length&&!n[e].skip&&n[e],g$=n=>n==="x"?"y":"x";function Lse(n,e,t,r){let i=n.skip?e:n,o=e,s=t.skip?e:t,a=C_(o,i),c=C_(s,o),l=a/(a+c),u=c/(a+c);l=isNaN(l)?0:l,u=isNaN(u)?0:u;let h=r*l,f=r*u;return{previous:{x:o.x-h*(s.x-i.x),y:o.y-h*(s.y-i.y)},next:{x:o.x+f*(s.x-i.x),y:o.y+f*(s.y-i.y)}}}function Vse(n,e,t){let r=n.length,i,o,s,a,c,l=Lu(n,0);for(let u=0;u<r-1;++u)if(c=l,l=Lu(n,u+1),!(!c||!l)){if(Uu(e[u],0,Fse)){t[u]=t[u+1]=0;continue}i=t[u]/e[u],o=t[u+1]/e[u],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[u]=i*s*e[u],t[u+1]=o*s*e[u])}}function jse(n,e,t="x"){let r=g$(t),i=n.length,o,s,a,c=Lu(n,0);for(let l=0;l<i;++l){if(s=a,a=c,c=Lu(n,l+1),!a)continue;let u=a[t],h=a[r];s&&(o=(u-s[t])/3,a[`cp1${t}`]=u-o,a[`cp1${r}`]=h-o*e[l]),c&&(o=(c[t]-u)/3,a[`cp2${t}`]=u+o,a[`cp2${r}`]=h+o*e[l])}}function Use(n,e="x"){let t=g$(e),r=n.length,i=Array(r).fill(0),o=Array(r),s,a,c,l=Lu(n,0);for(s=0;s<r;++s)if(a=c,c=l,l=Lu(n,s+1),!!c){if(l){let u=l[e]-c[e];i[s]=u!==0?(l[t]-c[t])/u:0}o[s]=a?l?xi(i[s-1])!==xi(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}Vse(n,i,o),jse(n,o,e)}function __(n,e,t){return Math.max(Math.min(n,t),e)}function Bse(n,e){let t,r,i,o,s,a=to(n[0],e);for(t=0,r=n.length;t<r;++t)s=o,o=a,a=t<r-1&&to(n[t+1],e),o&&(i=n[t],s&&(i.cp1x=__(i.cp1x,e.left,e.right),i.cp1y=__(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=__(i.cp2x,e.left,e.right),i.cp2y=__(i.cp2y,e.top,e.bottom)))}function y$(n,e,t,r,i){let o,s,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")Use(n,i);else{let l=r?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],c=Lse(l,a,n[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&Bse(n,t)}function N_(){return typeof window<"u"&&typeof document<"u"}function O_(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function T_(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var F_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function $se(n,e){return F_(n).getPropertyValue(e)}var Hse=["top","right","bottom","left"];function Sc(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let o=Hse[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var zse=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Wse(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r,s=!1,a,c;if(zse(i,o,n.target))a=i,c=o;else{let l=e.getBoundingClientRect();a=r.clientX-l.left,c=r.clientY-l.top,s=!0}return{x:a,y:c,box:s}}function ia(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=F_(t),o=i.boxSizing==="border-box",s=Sc(i,"padding"),a=Sc(i,"border","width"),{x:c,y:l,box:u}=Wse(n,t),h=s.left+(u&&a.left),f=s.top+(u&&a.top),{width:p,height:g}=e;return o&&(p-=s.width+a.width,g-=s.height+a.height),{x:Math.round((c-h)/p*t.width/r),y:Math.round((l-f)/g*t.height/r)}}function qse(n,e,t){let r,i;if(e===void 0||t===void 0){let o=n&&O_(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{let s=o.getBoundingClientRect(),a=F_(o),c=Sc(a,"border","width"),l=Sc(a,"padding");e=s.width-l.width-c.width,t=s.height-l.height-c.height,r=T_(a.maxWidth,o,"clientWidth"),i=T_(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||I_,maxHeight:i||I_}}var b_=n=>Math.round(n*10)/10;function v$(n,e,t,r){let i=F_(n),o=Sc(i,"margin"),s=T_(i.maxWidth,n,"clientWidth")||I_,a=T_(i.maxHeight,n,"clientHeight")||I_,c=qse(n,e,t),{width:l,height:u}=c;if(i.boxSizing==="content-box"){let f=Sc(i,"border","width"),p=Sc(i,"padding");l-=p.width+f.width,u-=p.height+f.height}return l=Math.max(0,l-o.width),u=Math.max(0,r?l/r:u-o.height),l=b_(Math.min(l,s,c.maxWidth)),u=b_(Math.min(u,a,c.maxHeight)),l&&!u&&(u=b_(l/2)),(e!==void 0||t!==void 0)&&r&&c.height&&u>c.height&&(u=c.height,l=b_(Math.floor(u*r))),{width:l,height:u}}function BA(n,e,t){let r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||s.height!==i||s.width!==o?(n.currentDevicePixelRatio=r,s.height=i,s.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var _$=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};N_()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function $A(n,e){let t=$se(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Zs(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function b$(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function w$(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},s=Zs(n,i,t),a=Zs(i,o,t),c=Zs(o,e,t),l=Zs(s,a,t),u=Zs(a,c,t);return Zs(l,u,t)}var Gse=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},Kse=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Ac(n,e,t){return n?Gse(e,t):Kse()}function HA(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function zA(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function E$(n){return n==="angle"?{between:Bu,compare:dse,normalize:_r}:{between:ro,compare:(e,t)=>e-t,normalize:e=>e}}function qB({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function Yse(n,e,t){let{property:r,start:i,end:o}=t,{between:s,normalize:a}=E$(r),c=e.length,{start:l,end:u,loop:h}=n,f,p;if(h){for(l+=c,u+=c,f=0,p=c;f<p&&s(a(e[l%c][r]),i,o);++f)l--,u--;l%=c,u%=c}return u<l&&(u+=c),{start:l,end:u,loop:h,style:n.style}}function WA(n,e,t){if(!t)return[n];let{property:r,start:i,end:o}=t,s=e.length,{compare:a,between:c,normalize:l}=E$(r),{start:u,end:h,loop:f,style:p}=Yse(n,e,t),g=[],v=!1,_=null,D,R,F,V=()=>c(i,F,D)&&a(i,F)!==0,U=()=>a(o,D)===0||c(o,F,D),j=()=>v||V(),T=()=>!v||U();for(let b=u,E=u;b<=h;++b)R=e[b%s],!R.skip&&(D=l(R[r]),D!==F&&(v=c(D,i,o),_===null&&j()&&(_=a(D,i)===0?b:E),_!==null&&T()&&(g.push(qB({start:_,end:b,loop:f,count:s,style:p})),_=null),E=b,F=D));return _!==null&&g.push(qB({start:_,end:h,loop:f,count:s,style:p})),g}function qA(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let o=WA(r[i],n.points,e);o.length&&t.push(...o)}return t}function Qse(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function Xse(n,e,t,r){let i=n.length,o=[],s=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%i];l.skip||l.stop?a.skip||(r=!1,o.push({start:e%i,end:(c-1)%i,loop:r}),e=s=l.stop?c:null):(s=c,a.skip&&(e=c)),a=l}return s!==null&&o.push({start:e%i,end:s%i,loop:r}),o}function I$(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let o=!!n._loop,{start:s,end:a}=Qse(t,i,o,r);if(r===!0)return GB(n,[{start:s,end:a,loop:o}],t,e);let c=a<s?a+i:a,l=!!n._fullLoop&&s===0&&a===i-1;return GB(n,Xse(t,s,c,l),t,e)}function GB(n,e,t,r){return!r||!r.setContext||!t?e:Jse(n,e,t,r)}function Jse(n,e,t,r){let i=n._chart.getContext(),o=KB(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,c=t.length,l=[],u=o,h=e[0].start,f=h;function p(g,v,_,D){let R=a?-1:1;if(g!==v){for(g+=c;t[g%c].skip;)g-=R;for(;t[v%c].skip;)v+=R;g%c!==v%c&&(l.push({start:g%c,end:v%c,loop:_,style:D}),u=D,h=v%c)}}for(let g of e){h=a?h:g.start;let v=t[h%c],_;for(f=h+1;f<=g.end;f++){let D=t[f%c];_=KB(r.setContext(os(i,{type:"segment",p0:v,p1:D,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),Zse(_,u)&&p(h,f-1,g.loop,u),v=D,u=_}h<f-1&&p(h,f-1,g.loop,u)}return l}function KB(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Zse(n,e){if(!e)return!1;let t=[],r=function(i,o){return PA(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function w_(n,e,t){return n.options.clip?n[t]:e[t]}function eae(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:w_(t,e,"left"),right:w_(t,e,"right"),top:w_(r,e,"top"),bottom:w_(r,e,"bottom")}:e}function GA(n,e){let t=e._clip;if(t.disabled)return!1;let r=eae(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}var iR=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let o=t.listeners[i],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=xA.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let o=r.items,s=o.length-1,a=!1,c;for(;s>=0;--s)c=o[s],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},ss=new iR,C$="transparent",tae={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=kA(n||C$),i=r.valid&&kA(e||C$);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},oR=class{constructor(e,t,r,i){let o=t[r];i=zu([e.to,i,o,e.from]);let s=zu([e.from,o,i]);this._active=!0,this._fn=e.fn||tae[e.type||typeof s],this._easing=Ou[e.easing]||Ou.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=zu([e.to,t,i,e.from]),this._from=zu([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to,c;if(this._active=o!==a&&(s||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}c=t/r%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(o,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},W_=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!$e(e))return;let t=Object.keys(mt.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let o=e[i];if(!$e(o))return;let s={};for(let a of t)s[a]=o[a];(bt(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,s)})})}_animateOptions(e,t){let r=t.options,i=rae(e,r);if(!i)return[];let o=this._createAnimations(i,r);return r.$shared&&nae(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){let r=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now(),c;for(c=s.length-1;c>=0;--c){let l=s[c];if(l.charAt(0)==="$")continue;if(l==="options"){i.push(...this._animateOptions(e,t));continue}let u=t[l],h=o[l],f=r.get(l);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[l]=u;continue}o[l]=h=new oR(f,e,l,u),i.push(h)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return ss.add(this._chart,r),!0}};function nae(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function rae(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function T$(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function iae(n,e,t){if(t===!1)return!1;let r=T$(n,t),i=T$(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function oae(n){let e,t,r,i;return $e(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function CH(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function S$(n,e,t,r={}){let i=n.keys,o=r.mode==="single",s,a,c,l;if(e===null)return;let u=!1;for(s=0,a=i.length;s<a;++s){if(c=+i[s],c===t){if(u=!0,r.all)continue;break}l=n.values[c],Ft(l)&&(o||e===0||xi(e)===xi(l))&&(e+=l)}return!u&&!r.all?0:e}function sae(n,e){let{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",o=r.axis==="x"?"x":"y",s=Object.keys(n),a=new Array(s.length),c,l,u;for(c=0,l=s.length;c<l;++c)u=s[c],a[c]={[i]:u,[o]:n[u]};return a}function KA(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function aae(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function cae(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function lae(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function D$(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function x$(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=r,c=o.axis,l=s.axis,u=aae(o,s,r),h=e.length,f;for(let p=0;p<h;++p){let g=e[p],{[c]:v,[l]:_}=g,D=g._stacks||(g._stacks={});f=D[l]=lae(i,u,v),f[a]=_,f._top=D$(f,s,!0,r.type),f._bottom=D$(f,s,!1,r.type);let R=f._visualValues||(f._visualValues={});R[a]=_}}function YA(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function uae(n,e){return os(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function dae(n,e,t){return os(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function op(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}var QA=n=>n==="reset"||n==="none",A$=(n,e)=>e?n:Object.assign({},n),hae=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:CH(t,!0),values:null},sa=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=KA(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&op(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),o=(f,p,g,v)=>f==="x"?p:f==="r"?v:g,s=r.xAxisID=Te(i.xAxisID,YA(t,"x")),a=r.yAxisID=Te(i.yAxisID,YA(t,"y")),c=r.rAxisID=Te(i.rAxisID,YA(t,"r")),l=r.indexAxis,u=r.iAxisID=o(l,s,a,c),h=r.vAxisID=o(l,a,s,c);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(u),r.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&SA(this._data,this),t._stacked&&op(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if($e(r)){let o=this._cachedMeta;this._data=sae(r,o)}else if(i!==r){if(i){SA(i,this);let o=this._cachedMeta;op(o),o._parsed=[]}r&&Object.isExtensible(r)&&o$(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),o=!1;this._dataCheck();let s=r._stacked;r._stacked=KA(r.vScale,r),r.stack!==i.stack&&(o=!0,op(r),r.stack=i.stack),this._resyncElements(t),(o||s!==r._stacked)&&(x$(this,r._parsed),r._stacked=KA(r.vScale,r))}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:a}=i,c=s.axis,l=t===0&&r===o.length?!0:i._sorted,u=t>0&&i._parsed[t-1],h,f,p;if(this._parsing===!1)i._parsed=o,i._sorted=!0,p=o;else{bt(o[t])?p=this.parseArrayData(i,o,t,r):$e(o[t])?p=this.parseObjectData(i,o,t,r):p=this.parsePrimitiveData(i,o,t,r);let g=()=>f[c]===null||u&&f[c]<u[c];for(h=0;h<r;++h)i._parsed[h+t]=f=p[h],l&&(g()&&(l=!1),u=f);i._sorted=l}a&&x$(this,p)}parsePrimitiveData(t,r,i,o){let{iScale:s,vScale:a}=t,c=s.axis,l=a.axis,u=s.getLabels(),h=s===a,f=new Array(o),p,g,v;for(p=0,g=o;p<g;++p)v=p+i,f[p]={[c]:h||s.parse(u[v],v),[l]:a.parse(r[v],v)};return f}parseArrayData(t,r,i,o){let{xScale:s,yScale:a}=t,c=new Array(o),l,u,h,f;for(l=0,u=o;l<u;++l)h=l+i,f=r[h],c[l]={x:s.parse(f[0],h),y:a.parse(f[1],h)};return c}parseObjectData(t,r,i,o){let{xScale:s,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=new Array(o),h,f,p,g;for(h=0,f=o;h<f;++h)p=h+i,g=r[p],u[h]={x:s.parse(is(g,c),p),y:a.parse(is(g,l),p)};return u}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let o=this.chart,s=this._cachedMeta,a=r[t.axis],c={keys:CH(o,!0),values:r._stacks[t.axis]._visualValues};return S$(c,a,s.index,{mode:i})}updateRangeFromParsed(t,r,i,o){let s=i[r.axis],a=s===null?NaN:s,c=o&&i._stacks[r.axis];o&&c&&(o.values=c,a=S$(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,a=o.length,c=this._getOtherScale(t),l=hae(r,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:f}=cae(c),p,g;function v(){g=o[p];let _=g[c.axis];return!Ft(g[t.axis])||h>_||f<_}for(p=0;p<a&&!(!v()&&(this.updateRangeFromParsed(u,t,g,l),s));++p);if(s){for(p=a-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(u,t,g,l);break}}return u}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],o,s,a;for(o=0,s=r.length;o<s;++o)a=r[o][t.axis],Ft(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,o=r.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=oae(Te(this.options.clip,iae(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,o=i.data||[],s=r.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||o.length-c,u=this.options.drawActiveElementsOnTop,h;for(i.dataset&&i.dataset.draw(t,s,c,l),h=c;h<c+l;++h){let f=o[h];f.hidden||(f.active&&u?a.push(f):f.draw(t,s))}for(h=0;h<a.length;++h)a[h].draw(t,s)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=dae(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=uae(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let o=r==="active",s=this._cachedDataOpts,a=t+"-"+r,c=s[a],l=this.enableOptionSharing&&ju(i);if(c)return A$(c,l);let u=this.chart.config,h=u.datasetElementScopeKeys(this._type,t),f=o?[`${t}Hover`,"hover",t,""]:[t,""],p=u.getOptionScopes(this.getDataset(),h),g=Object.keys(mt.elements[t]),v=()=>this.getContext(i,o,r),_=u.resolveNamedOptions(p,g,v,f);return _.$shared&&(_.$shared=l,s[a]=Object.freeze(A$(_,l))),_}_resolveAnimations(t,r,i){let o=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,c=s[a];if(c)return c;let l;if(o.options.animation!==!1){let h=this.chart.config,f=h.datasetAnimationScopeKeys(this._type,r),p=h.getOptionScopes(this.getDataset(),f);l=h.createResolver(p,this.getContext(t,i,r))}let u=new W_(o,l&&l.animations);return l&&l._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||QA(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),o=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(r,s)||s!==o;return this.updateSharedOptions(s,r,i),{sharedOptions:s,includeOptions:a}}updateElement(t,r,i,o){QA(o)?Object.assign(t,i):this._resolveAnimations(r,o).update(t,i)}updateSharedOptions(t,r,i){t&&!QA(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,o){t.active=o;let s=this.getStyle(r,o);this._resolveAnimations(r,i,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,l,u]of this._syncList)this[c](l,u);this._syncList=[];let o=i.length,s=r.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,r,i=!0){let o=this._cachedMeta,s=o.data,a=t+r,c,l=u=>{for(u.length+=r,c=u.length-1;c>=a;c--)u[c]=u[c-r]};for(l(s),c=t;c<a;++c)s[c]=new this.dataElementType;this._parsing&&l(o._parsed),this.parse(t,r),i&&this.updateElements(s,t,r,"reset")}updateElements(t,r,i,o){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let o=i._parsed.splice(t,r);i._stacked&&op(i,o)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,o]=t;this[r](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function fae(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=DA(r.sort((i,o)=>i-o))}return n._cache.$bar}function pae(n){let e=n.iScale,t=fae(e,n.type),r=e._length,i,o,s,a,c=()=>{s===32767||s===-32768||(ju(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=t.length;i<o;++i)s=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),c();return r}function mae(n,e,t,r){let i=t.barThickness,o,s;return Ve(i)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[n]-o/2}}function gae(n,e,t,r){let i=e.pixels,o=i[n],s=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let l=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/r,ratio:t.barPercentage,start:l}}function yae(n,e,t,r){let i=t.parse(n[0],r),o=t.parse(n[1],r),s=Math.min(i,o),a=Math.max(i,o),c=s,l=a;Math.abs(s)>Math.abs(a)&&(c=a,l=s),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:i,end:o,min:s,max:a}}function TH(n,e,t,r){return bt(n)?yae(n,e,t,r):e[t.axis]=t.parse(n,r),e}function R$(n,e,t,r){let i=n.iScale,o=n.vScale,s=i.getLabels(),a=i===o,c=[],l,u,h,f;for(l=t,u=t+r;l<u;++l)f=e[l],h={},h[i.axis]=a||i.parse(s[l],l),c.push(TH(f,h,o,l));return c}function XA(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function vae(n,e,t){return n!==0?xi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function _ae(n){let e,t,r,i,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:e,top:i,bottom:o}}function bae(n,e,t,r){let i=e.borderSkipped,o={};if(!i){n.borderSkipped=o;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:c,top:l,bottom:u}=_ae(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=l:(t._bottom||0)===r?i=u:(o[M$(u,s,a,c)]=!0,i=l)),o[M$(i,s,a,c)]=!0,n.borderSkipped=o}function M$(n,e,t,r){return r?(n=wae(n,e,t),n=P$(n,t,e)):n=P$(n,e,t),n}function wae(n,e,t){return n===e?t:n===t?e:n}function P$(n,e,t){return n==="start"?e:n==="end"?t:n}function Eae(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var Iae=(()=>{class n extends sa{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,o){return R$(t,r,i,o)}parseArrayData(t,r,i,o){return R$(t,r,i,o)}parseObjectData(t,r,i,o){let{iScale:s,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,u=s.axis==="x"?c:l,h=a.axis==="x"?c:l,f=[],p,g,v,_;for(p=i,g=i+o;p<g;++p)_=r[p],v={},v[s.axis]=s.parse(is(_,u),p),f.push(TH(is(_,h),v,a,p));return f}updateRangeFromParsed(t,r,i,o){super.updateRangeFromParsed(t,r,i,o);let s=i._custom;s&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:o}=r,s=this.getParsed(t),a=s._custom,c=XA(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),u=c.isHorizontal(),h=this._getRuler(),{sharedOptions:f,includeOptions:p}=this._getSharedOptions(r,o);for(let g=r;g<r+i;g++){let v=this.getParsed(g),_=s||Ve(v[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),D=this._calculateBarIndexPixels(g,h),R=(v._stacks||{})[c.axis],F={horizontal:u,base:_.base,enableBorderRadius:!R||XA(v._custom)||a===R._top||a===R._bottom,x:u?_.head:D.center,y:u?D.center:_.head,height:u?D.size:Math.abs(_.size),width:u?Math.abs(_.size):D.size};p&&(F.options=f||this.resolveDataElementOptions(g,t[g].active?"active":o));let V=F.options||t[g].options;bae(F,V,R,a),Eae(F,V,h.ratio),this.updateElement(t[g],g,F,o)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),s=i.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(r),l=c&&c[i.axis],u=h=>{let f=h._parsed.find(g=>g[i.axis]===l),p=f&&f[h.vScale.axis];if(Ve(p)||isNaN(p))return!0};for(let h of o)if(!(r!==void 0&&u(h))&&((s===!1||a.indexOf(h.stack)===-1||s===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){let o=this._getStacks(t,i),s=r!==void 0?o.indexOf(r):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,o=[],s,a;for(s=0,a=r.data.length;s<a;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));let c=t.barThickness;return{min:c||pae(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:o},options:{base:s,minBarLength:a}}=this,c=s||0,l=this.getParsed(t),u=l._custom,h=XA(u),f=l[r.axis],p=0,g=i?this.applyStack(r,l,i):f,v,_;g!==f&&(p=g-f,g=f),h&&(f=u.barStart,g=u.barEnd-u.barStart,f!==0&&xi(f)!==xi(u.barEnd)&&(p=0),p+=f);let D=!Ve(s)&&!h?s:p,R=r.getPixelForValue(D);if(this.chart.getDataVisibility(t)?v=r.getPixelForValue(p+g):v=R,_=v-R,Math.abs(_)<a){_=vae(_,r,c)*a,f===c&&(R-=_/2);let F=r.getPixelForDecimal(0),V=r.getPixelForDecimal(1),U=Math.min(F,V),j=Math.max(F,V);R=Math.max(Math.min(R,j),U),v=R+_,i&&!h&&(l._stacks[r.axis]._visualValues[o]=r.getValueForPixel(v)-r.getValueForPixel(R))}if(R===r.getPixelForValue(c)){let F=xi(_)*r.getLineWidthForValue(c)/2;R+=F,_-=F}return{size:_,base:R,head:v,center:v+_/2}}_calculateBarIndexPixels(t,r){let i=r.scale,o=this.options,s=o.skipNull,a=Te(o.maxBarThickness,1/0),c,l;if(r.grouped){let u=s?this._getStackCount(t):r.stackCount,h=o.barThickness==="flex"?gae(t,r,o,u):mae(t,r,o,u),f=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);c=h.start+h.chunk*f+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),l=Math.min(a,r.min*r.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,o=i.length,s=0;for(;s<o;++s)this.getParsed(s)[r.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}return n})(),Cae=(()=>{class n extends sa{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,o){let s=super.parsePrimitiveData(t,r,i,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(t,r,i,o){let s=super.parseArrayData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=Te(c[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(t,r,i,o){let s=super.parseObjectData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=Te(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y),u=a._custom;return{label:i[t]||"",value:"("+c+", "+l+(u?", "+u:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:u}=this._getSharedOptions(r,o),h=a.axis,f=c.axis;for(let p=r;p<r+i;p++){let g=t[p],v=!s&&this.getParsed(p),_={},D=_[h]=s?a.getPixelForDecimal(.5):a.getPixelForValue(v[h]),R=_[f]=s?c.getBasePixel():c.getPixelForValue(v[f]);_.skip=isNaN(D)||isNaN(R),u&&(_.options=l||this.resolveDataElementOptions(p,g.active?"active":o),s&&(_.options.radius=0)),this.updateElement(g,p,_,o)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),o=super.resolveDataElementOptions(t,r);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return r!=="active"&&(o.radius=0),o.radius+=Te(i&&i._custom,s),o}}return n})();function Tae(n,e,t){let r=1,i=1,o=0,s=0;if(e<Et){let a=n,c=a+e,l=Math.cos(a),u=Math.sin(a),h=Math.cos(c),f=Math.sin(c),p=(F,V,U)=>Bu(F,a,c,!0)?1:Math.max(V,V*t,U,U*t),g=(F,V,U)=>Bu(F,a,c,!0)?-1:Math.min(V,V*t,U,U*t),v=p(0,l,h),_=p(Gt,u,f),D=g(wt,l,h),R=g(wt+Gt,u,f);r=(v-D)/2,i=(_-R)/2,o=-(v+D)/2,s=-(_+R)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}var TR=(()=>{class n extends sa{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let s=l=>+i[l];if($e(i[t])){let{key:l="value"}=this._parsing;s=u=>+is(i[u],l)}let a,c;for(a=t,c=t+r;a<c;++a)o._parsed[a]=s(a)}}_getRotation(){return ii(this.options.rotation-90)}_getCircumference(){return ii(this.options.circumference)}_getRotationExtents(){let t=Et,r=-Et;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),r=Math.max(r,s+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),l=Math.min(QB(this.options.cutout,c),1),u=this._getRingWeight(this.index),{circumference:h,rotation:f}=this._getRotationExtents(),{ratioX:p,ratioY:g,offsetX:v,offsetY:_}=Tae(f,h,l),D=(i.width-a)/p,R=(i.height-a)/g,F=Math.max(Math.min(D,R)/2,0),V=bA(this.options.radius,F),U=Math.max(V*l,0),j=(V-U)/this._getVisibleDatasetWeightTotal();this.offsetX=v*V,this.offsetY=_*V,o.total=this.calculateTotal(),this.outerRadius=V-j*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-j*u,0),this.updateElements(s,0,s.length,t)}_circumference(t,r){let i=this.options,o=this._cachedMeta,s=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/Et)}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,c=a.chartArea,u=a.options.animation,h=(c.left+c.right)/2,f=(c.top+c.bottom)/2,p=s&&u.animateScale,g=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:_,includeOptions:D}=this._getSharedOptions(r,o),R=this._getRotation(),F;for(F=0;F<r;++F)R+=this._circumference(F,s);for(F=r;F<r+i;++F){let V=this._circumference(F,s),U=t[F],j={x:h+this.offsetX,y:f+this.offsetY,startAngle:R,endAngle:R+V,circumference:V,outerRadius:v,innerRadius:g};D&&(j.options=_||this.resolveDataElementOptions(F,U.active?"active":o)),R+=V,this.updateElement(U,F,j,o)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,o;for(o=0;o<r.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?Et*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=$u(r._parsed[t],i.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let r=0,i=this.chart,o,s,a,c,l;if(!t){for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){a=i.getDatasetMeta(o),t=a.data,c=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)l=c.resolveDataElementOptions(o),l.borderAlign!=="inner"&&(r=Math.max(r,l.borderWidth||0,l.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,o=t.length;i<o;++i){let s=this.resolveDataElementOptions(i);r=Math.max(r,s.offset||0,s.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Te(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),Sae=(()=>{class n extends sa{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=r,a=this.chart._animationsDisabled,{start:c,count:l}=RA(r,o,a);this._drawStart=c,this._drawCount=l,MA(r)&&(c=0,l=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;let u=this.resolveDatasetElementOptions(t);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:u},t),this.updateElements(o,c,l,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:f}=this._getSharedOptions(r,o),p=a.axis,g=c.axis,{spanGaps:v,segment:_}=this.options,D=xc(v)?v:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||s||o==="none",F=r+i,V=t.length,U=r>0&&this.getParsed(r-1);for(let j=0;j<V;++j){let T=t[j],b=R?T:{};if(j<r||j>=F){b.skip=!0;continue}let E=this.getParsed(j),x=Ve(E[g]),M=b[p]=a.getPixelForValue(E[p],j),N=b[g]=s||x?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,E,l):E[g],j);b.skip=isNaN(M)||isNaN(N)||x,b.stop=j>0&&Math.abs(E[p]-U[p])>D,_&&(b.parsed=E,b.raw=u.data[j]),f&&(b.options=h||this.resolveDataElementOptions(j,T.active?"active":o)),R||this.updateElement(T,j,b,o),U=E}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return i;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),SH=(()=>{class n extends sa{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:o,lineWidth:l.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=$u(r._parsed[t].r,i.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,r,i,o){return UA.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<r.min&&(r.min=s),s>r.max&&(r.max=s))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,o=Math.min(r.right-r.left,r.bottom-r.top),s=Math.max(o/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),c=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,l=a.options.animation,u=this._cachedMeta.rScale,h=u.xCenter,f=u.yCenter,p=u.getIndexAngle(0)-.5*wt,g=p,v,_=360/this.countVisibleElements();for(v=0;v<r;++v)g+=this._computeAngle(v,o,_);for(v=r;v<r+i;v++){let D=t[v],R=g,F=g+this._computeAngle(v,o,_),V=a.getDataVisibility(v)?u.getDistanceFromCenterForValue(this.getParsed(v).r):0;g=F,s&&(l.animateScale&&(V=0),l.animateRotate&&(R=F=p));let U={x:h,y:f,innerRadius:0,outerRadius:V,startAngle:R,endAngle:F,options:this.resolveDataElementOptions(v,D.active?"active":o)};this.updateElement(D,v,U,o)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?ii(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),Dae=(()=>{class n extends TR{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),xae=(()=>{class n extends sa{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,o){return UA.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta,i=r.dataset,o=r.data||[],s=r.iScale.getLabels();if(i.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(o,0,o.length,t)}updateElements(t,r,i,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let c=r;c<r+i;c++){let l=t[c],u=this.resolveDataElementOptions(c,l.active?"active":o),h=s.getPointPositionForValue(c,this.getParsed(c).r),f=a?s.xCenter:h.x,p=a?s.yCenter:h.y,g={x:f,y:p,angle:h.angle,skip:isNaN(f)||isNaN(p),options:u};this.updateElement(l,c,g,o)}}}return n})(),Aae=(()=>{class n extends sa{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),l=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+l+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,o=this.chart._animationsDisabled,{start:s,count:a}=RA(r,i,o);if(this._drawStart=s,this._drawCount=a,MA(r)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=i;let u=this.resolveDatasetElementOptions(t);u.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:u},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:u}=this._cachedMeta,h=this.resolveDataElementOptions(r,o),f=this.getSharedOptions(h),p=this.includeOptions(o,f),g=a.axis,v=c.axis,{spanGaps:_,segment:D}=this.options,R=xc(_)?_:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||s||o==="none",V=r>0&&this.getParsed(r-1);for(let U=r;U<r+i;++U){let j=t[U],T=this.getParsed(U),b=F?j:{},E=Ve(T[v]),x=b[g]=a.getPixelForValue(T[g],U),M=b[v]=s||E?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,T,l):T[v],U);b.skip=isNaN(x)||isNaN(M)||E,b.stop=U>0&&Math.abs(T[g]-V[g])>R,D&&(b.parsed=T,b.raw=u.data[U]),p&&(b.options=f||this.resolveDataElementOptions(U,j.active?"active":o)),F||this.updateElement(j,U,b,o),V=T}this.updateSharedOptions(f,o,h)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let l=r.length-1;l>=0;--l)c=Math.max(c,r[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!r.length)return o;let s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,s,a)/2}}return n})(),Rae=Object.freeze({__proto__:null,BarController:Iae,BubbleController:Cae,DoughnutController:TR,LineController:Sae,PieController:Dae,PolarAreaController:SH,RadarController:xae,ScatterController:Aae});function Rc(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var sR=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return Rc()}parse(){return Rc()}format(){return Rc()}add(){return Rc()}diff(){return Rc()}startOf(){return Rc()}endOf(){return Rc()}},Mae={_date:sR};function Pae(n,e,t,r){let{controller:i,data:o,_sorted:s}=n,a=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let l=a._reversePixels?n$:eo;if(r){if(i._sharedOptions){let u=o[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){let f=l(o,e,t-h),p=l(o,e,t+h);return{lo:f.lo,hi:p.hi}}}}else{let u=l(o,e,t);if(c){let{vScale:h}=i._cachedMeta,{_parsed:f}=n,p=f.slice(0,u.lo+1).reverse().findIndex(v=>!Ve(v[h.axis]));u.lo-=Math.max(0,p);let g=f.slice(u.hi).findIndex(v=>!Ve(v[h.axis]));u.hi+=Math.max(0,g)}return u}}return{lo:0,hi:o.length-1}}function mp(n,e,t,r,i){let o=n.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,c=o.length;a<c;++a){let{index:l,data:u}=o[a],{lo:h,hi:f}=Pae(o[a],e,s,i);for(let p=h;p<=f;++p){let g=u[p];g.skip||r(g,l,p)}}}function kae(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let o=e?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function JA(n,e,t,r,i){let o=[];return!i&&!n.isPointInArea(e)||mp(n,t,e,function(a,c,l){!i&&!to(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&o.push({element:a,datasetIndex:c,index:l})},!0),o}function Nae(n,e,t,r){let i=[];function o(s,a,c){let{startAngle:l,endAngle:u}=s.getProps(["startAngle","endAngle"],r),{angle:h}=TA(s,{x:e.x,y:e.y});Bu(h,l,u)&&i.push({element:s,datasetIndex:a,index:c})}return mp(n,t,e,o),i}function Oae(n,e,t,r,i,o){let s=[],a=kae(t),c=Number.POSITIVE_INFINITY;function l(u,h,f){let p=u.inRange(e.x,e.y,i);if(r&&!p)return;let g=u.getCenterPoint(i);if(!(!!o||n.isPointInArea(g))&&!p)return;let _=a(e,g);_<c?(s=[{element:u,datasetIndex:h,index:f}],c=_):_===c&&s.push({element:u,datasetIndex:h,index:f})}return mp(n,t,e,l),s}function ZA(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?Nae(n,e,t,i):Oae(n,e,t,r,i,o)}function k$(n,e,t,r,i){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return mp(n,t,e,(c,l,u)=>{c[s]&&c[s](e[t],i)&&(o.push({element:c,datasetIndex:l,index:u}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:o}var Fae={evaluateInteractionItems:mp,modes:{index(n,e,t,r){let i=ia(e,n),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?JA(n,i,o,r,s):ZA(n,i,o,!1,r,s),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let u=a[0].index,h=l.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:u})}),c):[]},dataset(n,e,t,r){let i=ia(e,n),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?JA(n,i,o,r,s):ZA(n,i,o,!1,r,s);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let u=0;u<l.length;++u)a.push({element:l[u],datasetIndex:c,index:u})}return a},point(n,e,t,r){let i=ia(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return JA(n,i,o,r,s)},nearest(n,e,t,r){let i=ia(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return ZA(n,i,o,t.intersect,r,s)},x(n,e,t,r){let i=ia(e,n);return k$(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=ia(e,n);return k$(n,i,"y",t.intersect,r)}}},DH=["left","top","right","bottom"];function sp(n,e){return n.filter(t=>t.pos===e)}function N$(n,e){return n.filter(t=>DH.indexOf(t.pos)===-1&&t.box.axis===e)}function ap(n,e){return n.sort((t,r)=>{let i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function Lae(n){let e=[],t,r,i,o,s,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:s,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}function Vae(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:o}=t;if(!r||!DH.includes(i))continue;let s=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function jae(n,e){let t=Vae(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];let{fullSize:c}=a.box,l=t[a.stack],u=l&&a.stackWeight/l.weight;a.horizontal?(a.width=u?u*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=u?u*i:c&&e.availableHeight)}return t}function Uae(n){let e=Lae(n),t=ap(e.filter(l=>l.box.fullSize),!0),r=ap(sp(e,"left"),!0),i=ap(sp(e,"right")),o=ap(sp(e,"top"),!0),s=ap(sp(e,"bottom")),a=N$(e,"x"),c=N$(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(c).concat(s).concat(a),chartArea:sp(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:o.concat(s).concat(a)}}function O$(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function xH(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function Bae(n,e,t,r){let{pos:i,box:o}=t,s=n.maxPadding;if(!$e(i)){t.size&&(n[i]-=t.size);let h=r[t.stack]||{size:0,count:1};h.size=Math.max(h.size,t.horizontal?o.height:o.width),t.size=h.size/h.count,n[i]+=t.size}o.getPadding&&xH(s,o.getPadding());let a=Math.max(0,e.outerWidth-O$(s,n,"left","right")),c=Math.max(0,e.outerHeight-O$(s,n,"top","bottom")),l=a!==n.w,u=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:u}:{same:u,other:l}}function $ae(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Hae(n,e){let t=e.maxPadding;function r(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return r(n?["left","right"]:["top","bottom"])}function up(n,e,t,r){let i=[],o,s,a,c,l,u;for(o=0,s=n.length,l=0;o<s;++o){a=n[o],c=a.box,c.update(a.width||e.w,a.height||e.h,Hae(a.horizontal,e));let{same:h,other:f}=Bae(e,t,a,r);l|=h&&i.length,u=u||f,c.fullSize||i.push(a)}return l&&up(i,e,t,r)||u}function L_(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function F$(n,e,t,r){let i=t.padding,{x:o,y:s}=e;for(let a of n){let c=a.box,l=r[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/l.weight||1;if(a.horizontal){let h=e.w*u,f=l.size||c.height;ju(l.start)&&(s=l.start),c.fullSize?L_(c,i.left,s,t.outerWidth-i.right-i.left,f):L_(c,e.left+l.placed,s,h,f),l.start=s,l.placed+=h,s=c.bottom}else{let h=e.h*u,f=l.size||c.width;ju(l.start)&&(o=l.start),c.fullSize?L_(c,o,i.top,f,t.outerHeight-i.bottom-i.top):L_(c,o,e.top+l.placed,f,h),l.start=o,l.placed+=h,o=c.right}}e.x=o,e.y=s}var Kn={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=Pn(n.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(t-i.height,0),a=Uae(n.boxes),c=a.vertical,l=a.horizontal;ot(n.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});let u=c.reduce((v,_)=>_.box.options&&_.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),f=Object.assign({},i);xH(f,Pn(r));let p=Object.assign({maxPadding:f,w:o,h:s,x:i.left,y:i.top},i),g=jae(c.concat(l),h);up(a.fullSize,p,h,g),up(c,p,h,g),up(l,p,h,g)&&up(c,p,h,g),$ae(p),F$(a.leftAndTop,p,h,g),p.x+=p.w,p.y+=p.h,F$(a.rightAndBottom,p,h,g),n.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},ot(a.chartArea,v=>{let _=v.box;Object.assign(_,n.chartArea),_.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}},q_=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},aR=class extends q_{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},H_="$chartjs",zae={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},L$=n=>n===null||n==="";function Wae(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[H_]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",L$(i)){let o=$A(n,"width");o!==void 0&&(n.width=o)}if(L$(r))if(n.style.height==="")n.height=n.width/(e||2);else{let o=$A(n,"height");o!==void 0&&(n.height=o)}return n}var AH=_$?{passive:!0}:!1;function qae(n,e,t){n&&n.addEventListener(e,t,AH)}function Gae(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,AH)}function Kae(n,e){let t=zae[n.type]||n.type,{x:r,y:i}=ia(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function G_(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Yae(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||G_(a.addedNodes,r),s=s&&!G_(a.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Qae(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||G_(a.removedNodes,r),s=s&&!G_(a.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var hp=new Map,V$=0;function RH(){let n=window.devicePixelRatio;n!==V$&&(V$=n,hp.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Xae(n,e){hp.size||window.addEventListener("resize",RH),hp.set(n,e)}function Jae(n){hp.delete(n),hp.size||window.removeEventListener("resize",RH)}function Zae(n,e,t){let r=n.canvas,i=r&&O_(r);if(!i)return;let o=AA((a,c)=>{let l=i.clientWidth;t(a,c),l<i.clientWidth&&t()},window),s=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,u=c.contentRect.height;l===0&&u===0||o(l,u)});return s.observe(i),Xae(n,o),s}function eR(n,e,t){t&&t.disconnect(),e==="resize"&&Jae(n)}function ece(n,e,t){let r=n.canvas,i=AA(o=>{n.ctx!==null&&t(Kae(o,n))},n);return qae(r,e,i),i}var cR=class extends q_{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Wae(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[H_])return!1;let r=t[H_].initial;["height","width"].forEach(o=>{let s=r[o];Ve(s)?t.removeAttribute(o):t.setAttribute(o,s)});let i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[H_],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),s={attach:Yae,detach:Qae,resize:Zae}[t]||ece;i[t]=s(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:eR,detach:eR,resize:eR}[t]||Gae)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return v$(e,t,r,i)}isAttached(e){let t=e&&O_(e);return!!(t&&t.isConnected)}};function tce(n){return!N_()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?aR:cR}var Ai=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return xc(this.x)&&xc(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}};function nce(n,e){let t=n.options.ticks,r=rce(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?oce(e):[],s=o.length,a=o[0],c=o[s-1],l=[];if(s>i)return sce(e,l,o,s/i),l;let u=ice(o,e,i);if(s>0){let h,f,p=s>1?Math.round((c-a)/(s-1)):null;for(V_(e,l,u,Ve(p)?0:a-p,a),h=0,f=s-1;h<f;h++)V_(e,l,u,o[h],o[h+1]);return V_(e,l,u,c,Ve(p)?e.length:c+p),l}return V_(e,l,u),l}function rce(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function ice(n,e,t){let r=ace(n),i=e.length/t;if(!r)return Math.max(i,1);let o=ZB(r);for(let s=0,a=o.length-1;s<a;s++){let c=o[s];if(c>i)return c}return Math.max(i,1)}function oce(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function sce(n,e,t,r){let i=0,o=t[0],s;for(r=Math.ceil(r),s=0;s<n.length;s++)s===o&&(e.push(n[s]),i++,o=t[i*r])}function V_(n,e,t,r,i){let o=Te(r,0),s=Math.min(Te(i,n.length),n.length),a=0,c,l,u;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),u=o;u<0;)a++,u=Math.round(o+a*t);for(l=Math.max(o,0);l<s;l++)l===u&&(e.push(n[l]),a++,u=Math.round(o+a*t))}function ace(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var cce=n=>n==="left"?"right":n==="right"?"left":n,j$=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,U$=(n,e)=>Math.min(e||n,n);function B$(n,e){let t=[],r=n.length/e,i=n.length,o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function lce(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,s=n._endPixel,a=1e-6,c=n.getPixelForTick(i),l;if(!(t&&(r===1?l=Math.max(c-o,s-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-a||c>s+a)))return c}function uce(n,e){ot(n,t=>{let r=t.gc,i=r.length/2,o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function cp(n){return n.drawTicks?n.tickLength:0}function $$(n,e){if(!n.display)return 0;let t=sn(n.font,e),r=Pn(n.padding);return(bt(n.text)?n.text.length:1)*t.lineHeight+r.height}function dce(n,e){return os(n,{scale:e,type:"scale"})}function hce(n,e,t){return os(n,{tick:t,index:e,type:"tick"})}function fce(n,e,t){let r=A_(n);return(t&&e!=="right"||!t&&e==="right")&&(r=cce(r)),r}function pce(n,e,t,r){let{top:i,left:o,bottom:s,right:a,chart:c}=n,{chartArea:l,scales:u}=c,h=0,f,p,g,v=s-i,_=a-o;if(n.isHorizontal()){if(p=Mn(r,o,a),$e(t)){let D=Object.keys(t)[0],R=t[D];g=u[D].getPixelForValue(R)+v-e}else t==="center"?g=(l.bottom+l.top)/2+v-e:g=j$(n,t,e);f=a-o}else{if($e(t)){let D=Object.keys(t)[0],R=t[D];p=u[D].getPixelForValue(R)-_+e}else t==="center"?p=(l.left+l.right)/2-_+e:p=j$(n,t,e);g=Mn(r,s,i),h=t==="left"?-Gt:Gt}return{titleX:p,titleY:g,maxWidth:f,rotation:h}}var Pc=class n extends Ai{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=br(e,Number.POSITIVE_INFINITY),t=br(t,Number.NEGATIVE_INFINITY),r=br(r,Number.POSITIVE_INFINITY),i=br(i,Number.NEGATIVE_INFINITY),{min:br(e,r),max:br(t,i),minDefined:Ft(e),maxDefined:Ft(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)s=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:br(t,br(r,t)),max:br(r,br(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){pt(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=h$(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?B$(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=nce(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){pt(this.options.afterUpdate,[this])}beforeSetDimensions(){pt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){pt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),pt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){pt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=pt(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){pt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){pt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=U$(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation,s=i,a,c,l;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=gn(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/r:p/(r-1),h+6>a&&(a=p/(r-(e.offset?.5:1)),c=this.maxHeight-cp(e.grid)-t.padding-$$(e.title,this.chart.options.font),l=Math.sqrt(h*h+f*f),s=D_(Math.min(Math.asin(gn((u.highest.height+6)/a,-1,1)),Math.asin(gn(c/l,-1,1))-Math.asin(gn(f/l,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){pt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){pt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let c=$$(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=cp(o)+c):(e.height=this.maxHeight,e.width=cp(o)+c),r.display&&this.ticks.length){let{first:l,last:u,widest:h,highest:f}=this._getLabelSizes(),p=r.padding*2,g=ii(this.labelRotation),v=Math.cos(g),_=Math.sin(g);if(a){let D=r.mirror?0:_*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+D+p)}else{let D=r.mirror?0:v*h.width+_*f.height;e.width=Math.min(this.maxWidth,e.width+D+p)}this._calculatePadding(l,u,_,v)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:o,padding:s},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),f=0,p=0;c?l?(f=i*e.width,p=r*t.height):(f=r*e.height,p=i*t.width):o==="start"?p=t.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,p=t.width/2),this.paddingLeft=Math.max((f-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+s)*this.width/(this.width-h),0)}else{let u=t.height/2,h=e.height/2;o==="start"?(u=0,h=e.height):o==="end"&&(u=t.height,h=0),this.paddingTop=u+s,this.paddingBottom=h+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){pt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Ve(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=B$(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:o}=this,s=[],a=[],c=Math.floor(t/U$(t,r)),l=0,u=0,h,f,p,g,v,_,D,R,F,V,U;for(h=0;h<t;h+=c){if(g=e[h].label,v=this._resolveTickFontOptions(h),i.font=_=v.string,D=o[_]=o[_]||{data:{},gc:[]},R=v.lineHeight,F=V=0,!Ve(g)&&!bt(g))F=ep(i,D.data,D.gc,F,g),V=R;else if(bt(g))for(f=0,p=g.length;f<p;++f)U=g[f],!Ve(U)&&!bt(U)&&(F=ep(i,D.data,D.gc,F,U),V+=R);s.push(F),a.push(V),l=Math.max(F,l),u=Math.max(V,u)}uce(o,t);let j=s.indexOf(l),T=a.indexOf(u),b=E=>({width:s[E]||0,height:a[E]||0});return{first:b(0),last:b(t-1),widest:b(j),highest:b(T),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return t$(this._alignToPixels?ta(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=hce(this.getContext(),e,r))}return this.$context||(this.$context=dce(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=ii(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,c=o?o.highest.height+s:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:a}=i,c=o.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=cp(o),p=[],g=a.setContext(this.getContext()),v=g.display?g.width:0,_=v/2,D=function(gt){return ta(r,gt,v)},R,F,V,U,j,T,b,E,x,M,N,A;if(s==="top")R=D(this.bottom),T=this.bottom-f,E=R-_,M=D(e.top)+_,A=e.bottom;else if(s==="bottom")R=D(this.top),M=e.top,A=D(e.bottom)-_,T=R+_,E=this.top+f;else if(s==="left")R=D(this.right),j=this.right-f,b=R-_,x=D(e.left)+_,N=e.right;else if(s==="right")R=D(this.left),x=e.left,N=D(e.right)-_,j=R+_,b=this.left+f;else if(t==="x"){if(s==="center")R=D((e.top+e.bottom)/2+.5);else if($e(s)){let gt=Object.keys(s)[0],ct=s[gt];R=D(this.chart.scales[gt].getPixelForValue(ct))}M=e.top,A=e.bottom,T=R+_,E=T+f}else if(t==="y"){if(s==="center")R=D((e.left+e.right)/2);else if($e(s)){let gt=Object.keys(s)[0],ct=s[gt];R=D(this.chart.scales[gt].getPixelForValue(ct))}j=R-_,b=j-f,x=e.left,N=e.right}let Pt=Te(i.ticks.maxTicksLimit,h),Ke=Math.max(1,Math.ceil(h/Pt));for(F=0;F<h;F+=Ke){let gt=this.getContext(F),ct=o.setContext(gt),Tn=a.setContext(gt),Zt=ct.lineWidth,po=ct.color,jc=Tn.dash||[],Qn=Tn.dashOffset,Vt=ct.tickWidth,mo=ct.tickColor,ai=ct.tickBorderDash||[],go=ct.tickBorderDashOffset;V=lce(this,F,c),V!==void 0&&(U=ta(r,V,Zt),l?j=b=x=N=U:T=E=M=A=U,p.push({tx1:j,ty1:T,tx2:b,ty2:E,x1:x,y1:M,x2:N,y2:A,width:Zt,color:po,borderDash:jc,borderDashOffset:Qn,tickWidth:Vt,tickColor:mo,tickBorderDash:ai,tickBorderDashOffset:go}))}return this._ticksLength=h,this._borderValue=R,p}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:u,mirror:h}=o,f=cp(r.grid),p=f+u,g=h?-u:p,v=-ii(this.labelRotation),_=[],D,R,F,V,U,j,T,b,E,x,M,N,A="middle";if(i==="top")j=this.bottom-g,T=this._getXAxisLabelAlignment();else if(i==="bottom")j=this.top+g,T=this._getXAxisLabelAlignment();else if(i==="left"){let Ke=this._getYAxisLabelAlignment(f);T=Ke.textAlign,U=Ke.x}else if(i==="right"){let Ke=this._getYAxisLabelAlignment(f);T=Ke.textAlign,U=Ke.x}else if(t==="x"){if(i==="center")j=(e.top+e.bottom)/2+p;else if($e(i)){let Ke=Object.keys(i)[0],gt=i[Ke];j=this.chart.scales[Ke].getPixelForValue(gt)+p}T=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")U=(e.left+e.right)/2-p;else if($e(i)){let Ke=Object.keys(i)[0],gt=i[Ke];U=this.chart.scales[Ke].getPixelForValue(gt)}T=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?A="top":c==="end"&&(A="bottom"));let Pt=this._getLabelSizes();for(D=0,R=a.length;D<R;++D){F=a[D],V=F.label;let Ke=o.setContext(this.getContext(D));b=this.getPixelForTick(D)+o.labelOffset,E=this._resolveTickFontOptions(D),x=E.lineHeight,M=bt(V)?V.length:1;let gt=M/2,ct=Ke.color,Tn=Ke.textStrokeColor,Zt=Ke.textStrokeWidth,po=T;s?(U=b,T==="inner"&&(D===R-1?po=this.options.reverse?"left":"right":D===0?po=this.options.reverse?"right":"left":po="center"),i==="top"?l==="near"||v!==0?N=-M*x+x/2:l==="center"?N=-Pt.highest.height/2-gt*x+x:N=-Pt.highest.height+x/2:l==="near"||v!==0?N=x/2:l==="center"?N=Pt.highest.height/2-gt*x:N=Pt.highest.height-M*x,h&&(N*=-1),v!==0&&!Ke.showLabelBackdrop&&(U+=x/2*Math.sin(v))):(j=b,N=(1-M)*x/2);let jc;if(Ke.showLabelBackdrop){let Qn=Pn(Ke.backdropPadding),Vt=Pt.heights[D],mo=Pt.widths[D],ai=N-Qn.top,go=0-Qn.left;switch(A){case"middle":ai-=Vt/2;break;case"bottom":ai-=Vt;break}switch(T){case"center":go-=mo/2;break;case"right":go-=mo;break;case"inner":D===R-1?go-=mo:D>0&&(go-=mo/2);break}jc={left:go,top:ai,width:mo+Qn.width,height:Vt+Qn.height,color:Ke.backdropColor}}_.push({label:V,font:E,textOffset:N,options:{rotation:v,color:ct,strokeColor:Tn,strokeWidth:Zt,textAlign:po,textBaseline:A,translation:[U,j],backdrop:jc}})}return _}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-ii(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,c=s.widest.width,l,u;return t==="left"?i?(u=this.right+o,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u+=c)):(u=this.right-a,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u=this.left)):t==="right"?i?(u=this.left+o,r==="near"?l="right":r==="center"?(l="center",u-=c/2):(l="left",u-=c)):(u=this.left+a,r==="near"?l="left":r==="center"?(l="center",u+=c/2):(l="right",u=this.right)):l="right",{textAlign:l,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(c,l,u)=>{!u.width||!u.color||(r.save(),r.lineWidth=u.width,r.strokeStyle=u.color,r.setLineDash(u.borderDash||[]),r.lineDashOffset=u.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(l.x,l.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){let c=i[o];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,u,h,f;this.isHorizontal()?(l=ta(e,this.left,s)-s/2,u=ta(e,this.right,a)+a/2,h=f=c):(h=ta(e,this.top,s)-s/2,f=ta(e,this.bottom,a)+a/2,l=u=c),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(l,h),t.lineTo(u,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&rp(r,i);let o=this.getLabelItems(e);for(let s of o){let a=s.options,c=s.font,l=s.label,u=s.textOffset;na(r,l,0,u,c,a)}i&&ip(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let o=sn(r.font),s=Pn(r.padding),a=r.align,c=o.lineHeight/2;t==="bottom"||t==="center"||$e(t)?(c+=s.bottom,bt(r.text)&&(c+=o.lineHeight*(r.text.length-1))):c+=s.top;let{titleX:l,titleY:u,maxWidth:h,rotation:f}=pce(this,c,t,a);na(e,r.text,0,0,o,{color:r.color,maxWidth:h,rotation:f,textAlign:fce(a,t,i),textBaseline:"middle",translation:[l,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=Te(e.grid&&e.grid.z,-1),i=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return sn(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},qu=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;yce(t)&&(r=this.register(t));let i=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,mce(e,s,r),this.override&&mt.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in mt[i]&&(delete mt[i][r],this.override&&delete ea[r])}};function mce(n,e,t){let r=Fu(Object.create(null),[t?mt.get(t):{},mt.get(e),n.defaults]);mt.set(e,r),n.defaultRoutes&&gce(e,n.defaultRoutes),n.descriptors&&mt.describe(e,n.descriptors)}function gce(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),s=e[t].split("."),a=s.pop(),c=s.join(".");mt.route(o,i,c,a)})}function yce(n){return"id"in n&&"defaults"in n}var lR=class{constructor(){this.controllers=new qu(sa,"datasets",!0),this.elements=new qu(Ai,"elements"),this.plugins=new qu(Object,"plugins"),this.scales=new qu(Pc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):ot(i,s=>{let a=r||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,r){let i=S_(e);pt(r["before"+i],[],r),t[e](r),pt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},oo=new lR,uR=class{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,r,i){i=i||{};for(let o of e){let s=o.plugin,a=s[r],c=[t,i,o.options];if(pt(a,c,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=Te(r.options&&r.options.plugins,{}),o=vce(r);return i===!1&&!t?[]:bce(e,o,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(a=>!s.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function vce(n){let e={},t=[],r=Object.keys(oo.plugins.items);for(let o=0;o<r.length;o++)t.push(oo.getPlugin(r[o]));let i=n.plugins||[];for(let o=0;o<i.length;o++){let s=i[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function _ce(n,e){return!e&&n===!1?null:n===!0?{}:n}function bce(n,{plugins:e,localIds:t},r,i){let o=[],s=n.getContext();for(let a of e){let c=a.id,l=_ce(r[c],i);l!==null&&o.push({plugin:a,options:wce(n.config,{plugin:a,local:t[c]},l,s)})}return o}function wce(n,{plugin:e,local:t},r,i){let o=n.pluginScopeKeys(e),s=n.getOptionScopes(r,o);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dR(n,e){let t=mt.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Ece(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Ice(n,e){return n===e?"_index_":"_value_"}function H$(n){if(n==="x"||n==="y"||n==="r")return n}function Cce(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function hR(n,...e){if(H$(n))return n;for(let t of e){let r=t.axis||Cce(t.position)||n.length>1&&H$(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function z$(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Tce(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return z$(n,"x",t[0])||z$(n,"y",t[0])}return{}}function Sce(n,e){let t=ea[n.type]||{scales:{}},r=e.scales||{},i=dR(n.type,e),o=Object.create(null);return Object.keys(r).forEach(s=>{let a=r[s];if(!$e(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let c=hR(s,a,Tce(s,n),mt.scales[a.type]),l=Ice(c,i),u=t.scales||{};o[s]=Vu(Object.create(null),[{axis:c},a,u[c],u[l]])}),n.data.datasets.forEach(s=>{let a=s.type||n.type,c=s.indexAxis||dR(a,e),u=(ea[a]||{}).scales||{};Object.keys(u).forEach(h=>{let f=Ece(h,c),p=s[f+"AxisID"]||f;o[p]=o[p]||Object.create(null),Vu(o[p],[{axis:f},r[p],u[h]])})}),Object.keys(o).forEach(s=>{let a=o[s];Vu(a,[mt.scales[a.type],mt.scale])}),o}function MH(n){let e=n.options||(n.options={});e.plugins=Te(e.plugins,{}),e.scales=Sce(n,e)}function PH(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Dce(n){return n=n||{},n.data=PH(n.data),MH(n),n}var W$=new Map,kH=new Set;function j_(n,e){let t=W$.get(n);return t||(t=e(),W$.set(n,t),kH.add(t)),t}var lp=(n,e,t)=>{let r=is(e,t);r!==void 0&&n.add(r)},fR=class{constructor(e){this._config=Dce(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PH(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),MH(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return j_(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return j_(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return j_(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return j_(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:o}=this,s=this._cachedScopes(e,r),a=s.get(t);if(a)return a;let c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(h=>lp(c,e,h))),u.forEach(h=>lp(c,i,h)),u.forEach(h=>lp(c,ea[o]||{},h)),u.forEach(h=>lp(c,mt,h)),u.forEach(h=>lp(c,R_,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),kH.has(t)&&s.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,ea[t]||{},mt.datasets[t]||{},{type:t},mt,R_]}resolveNamedOptions(e,t,r,i=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=q$(this._resolverCache,e,i),c=s;if(Ace(s,t)){o.$shared=!1,r=ns(r)?r():r;let l=this.createResolver(e,r,a);c=Dc(s,r,l)}for(let l of t)o[l]=c[l];return o}createResolver(e,t,r=[""],i){let{resolver:o}=q$(this._resolverCache,e,r);return $e(t)?Dc(o,t,void 0,i):o}};function q$(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),o=r.get(i);return o||(o={resolver:k_(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,o)),o}var xce=n=>$e(n)&&Object.getOwnPropertyNames(n).some(e=>ns(n[e]));function Ace(n,e){let{isScriptable:t,isIndexable:r}=LA(n);for(let i of e){let o=t(i),s=r(i),a=(s||o)&&n[i];if(o&&(ns(a)||xce(a))||s&&bt(a))return!0}return!1}var Rce="4.4.9",Mce=["top","bottom","left","right","chartArea"];function G$(n,e){return n==="top"||n==="bottom"||Mce.indexOf(n)===-1&&e==="x"}function K$(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function Y$(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),pt(t&&t.onComplete,[n],e)}function Pce(n){let e=n.chart,t=e.options.animation;pt(t&&t.onProgress,[n],e)}function NH(n){return N_()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var z_={},Q$=n=>{let e=NH(n);return Object.values(z_).filter(t=>t.canvas===e).pop()};function kce(n,e,t){let r=Object.keys(n);for(let i of r){let o=+i;if(o>=e){let s=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=s)}}}function Nce(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}var X_=(()=>{class n{static defaults=mt;static instances=z_;static overrides=ea;static registry=oo;static version=Rce;static getChart=Q$;static register(...t){oo.add(...t),X$()}static unregister(...t){oo.remove(...t),X$()}constructor(t,r){let i=this.config=new fR(r),o=NH(t),s=Q$(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||tce(o)),this.platform.updateConfig(i);let c=this.platform.acquireContext(o,a.aspectRatio),l=c&&c.canvas,u=l&&l.height,h=l&&l.width;if(this.id=YB(),this.ctx=c,this.canvas=l,this.width=h,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new uR,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=s$(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],z_[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}ss.listen(this,"complete",Y$),ss.listen(this,"progress",Pce),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:o,_aspectRatio:s}=this;return Ve(t)?r&&s?s:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return oo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():BA(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return NA(this.canvas,this.ctx),this}stop(){return ss.stop(this),this}resize(t,r){ss.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,r,s),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,BA(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),pt(i.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};ot(r,(i,o)=>{i.id=o})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,o=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),s=[];r&&(s=s.concat(Object.keys(r).map(a=>{let c=r[a],l=hR(a,c),u=l==="r",h=l==="x";return{options:c,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),ot(s,a=>{let c=a.options,l=c.id,u=hR(l,c),h=Te(c.type,a.dtype);(c.position===void 0||G$(c.position,u)!==G$(a.dposition))&&(c.position=a.dposition),o[l]=!0;let f=null;if(l in i&&i[l].type===h)f=i[l];else{let p=oo.getScale(h);f=new p({id:l,type:h,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(c,t)}),ot(o,(a,c)=>{a||delete i[c]}),ot(i,a=>{Kn.configure(this,a,a.options),Kn.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((o,s)=>o.index-s.index),i>r){for(let o=r;o<i;++o)this._destroyDatasetMeta(o);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(K$("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,o)=>{r.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,o;for(this._removeUnreferencedMetasets(),i=0,o=r.length;i<o;i++){let s=r[i],a=this.getDatasetMeta(i),c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=s.indexAxis||dR(c,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let l=oo.getController(c),{datasetElementType:u,dataElementType:h}=mt.datasets[c];Object.assign(l,{dataElementType:oo.getElement(h),datasetElementType:u&&oo.getElement(u)}),a.controller=new l(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ot(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,h=this.data.datasets.length;u<h;u++){let{controller:f}=this.getDatasetMeta(u),p=!o&&s.indexOf(f)===-1;f.buildOrUpdateElements(p),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),o||ot(s,u=>{u.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(K$("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ot(this.scales,t=>{Kn.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!wA(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:o,count:s}of r){let a=i==="_removeElements"?-s:s;kce(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),o=i(0);for(let s=1;s<r;s++)if(!wA(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Kn.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],ot(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,ns(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),o={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(ss.has(this)?this.attached&&!ss.running(this)&&ss.start(this):(this.draw(),Y$({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],o,s;for(o=0,s=r.length;o<s;++o){let a=r[o];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i={meta:t,index:t.index,cancelable:!0},o=GA(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&rp(r,o),t.controller.draw(),o&&ip(r),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return to(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,o){let s=Fae.modes[r];return typeof s=="function"?s(this,t,i,o):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,o=i.filter(s=>s&&s._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=os(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let o=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);ju(r)?(s.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(c=>c.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),ss.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),NA(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete z_[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(s,a)=>{r.addEventListener(this,s,a),t[s]=a},o=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};ot(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(l,u)=>{r.addEventListener(this,l,u),t[l]=u},o=(l,u)=>{t[l]&&(r.removeEventListener(this,l,u),delete t[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)},a,c=()=>{o("attach",c),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){ot(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ot(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let o=i?"set":"remove",s,a,c,l;for(r==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{let c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!tp(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let o=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(f=>h.datasetIndex===f.datasetIndex&&h.index===f.index)),a=s(r,t),c=i?t:s(t,r);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;let s=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:o=[],options:s}=this,a=r,c=this._getActiveElements(t,o,i,a),l=JB(t),u=Nce(t,this._lastEvent,i,l);i&&(this._lastEvent=null,pt(s.onHover,[t,c,this],this),l&&pt(s.onClick,[t,c,this],this));let h=!tp(c,o);return(h||r)&&(this._active=c,this._updateHoverStyles(c,o,r)),this._lastEvent=u,h}_getActiveElements(t,r,i,o){if(t.type==="mouseout")return[];if(!i)return r;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return n})();function X$(){return ot(X_.instances,n=>n._plugins.invalidate())}function Oce(n,e,t){let{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:c}=e,l=i/a;n.beginPath(),n.arc(o,s,a,r-l,t+l),c>i?(l=i/c,n.arc(o,s,c,t+l,r-l,!0)):n.arc(o,s,i,t+Gt,r-Gt),n.closePath(),n.clip()}function Fce(n){return P_(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Lce(n,e,t,r){let i=Fce(n.options.borderRadius),o=(t-e)/2,s=Math.min(o,r*e/2),a=c=>{let l=(t-Math.min(o,c))*r/2;return gn(c,0,Math.min(o,l))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:gn(i.innerStart,0,s),innerEnd:gn(i.innerEnd,0,s)}}function Wu(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function K_(n,e,t,r,i,o){let{x:s,y:a,startAngle:c,pixelMargin:l,innerRadius:u}=e,h=Math.max(e.outerRadius+r+t-l,0),f=u>0?u+r+t+l:0,p=0,g=i-c;if(r){let Ke=u>0?u-r:0,gt=h>0?h-r:0,ct=(Ke+gt)/2,Tn=ct!==0?g*ct/(ct+r):g;p=(g-Tn)/2}let v=Math.max(.001,g*h-t/wt)/h,_=(g-v)/2,D=c+_+p,R=i-_-p,{outerStart:F,outerEnd:V,innerStart:U,innerEnd:j}=Lce(e,f,h,R-D),T=h-F,b=h-V,E=D+F/T,x=R-V/b,M=f+U,N=f+j,A=D+U/M,Pt=R-j/N;if(n.beginPath(),o){let Ke=(E+x)/2;if(n.arc(s,a,h,E,Ke),n.arc(s,a,h,Ke,x),V>0){let Zt=Wu(b,x,s,a);n.arc(Zt.x,Zt.y,V,x,R+Gt)}let gt=Wu(N,R,s,a);if(n.lineTo(gt.x,gt.y),j>0){let Zt=Wu(N,Pt,s,a);n.arc(Zt.x,Zt.y,j,R+Gt,Pt+Math.PI)}let ct=(R-j/f+(D+U/f))/2;if(n.arc(s,a,f,R-j/f,ct,!0),n.arc(s,a,f,ct,D+U/f,!0),U>0){let Zt=Wu(M,A,s,a);n.arc(Zt.x,Zt.y,U,A+Math.PI,D-Gt)}let Tn=Wu(T,D,s,a);if(n.lineTo(Tn.x,Tn.y),F>0){let Zt=Wu(T,E,s,a);n.arc(Zt.x,Zt.y,F,D-Gt,E)}}else{n.moveTo(s,a);let Ke=Math.cos(E)*h+s,gt=Math.sin(E)*h+a;n.lineTo(Ke,gt);let ct=Math.cos(x)*h+s,Tn=Math.sin(x)*h+a;n.lineTo(ct,Tn)}n.closePath()}function Vce(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a}=e,c=e.endAngle;if(o){K_(n,e,t,r,c,i);for(let l=0;l<o;++l)n.fill();isNaN(a)||(c=s+(a%Et||Et))}return K_(n,e,t,r,c,i),n.fill(),c}function jce(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:u,borderDash:h,borderDashOffset:f}=c,p=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=f,p?(n.lineWidth=l*2,n.lineJoin=u||"round"):(n.lineWidth=l,n.lineJoin=u||"bevel");let g=e.endAngle;if(o){K_(n,e,t,r,g,i);for(let v=0;v<o;++v)n.stroke();isNaN(a)||(g=s+(a%Et||Et))}p&&Oce(n,e,g),o||(K_(n,e,t,r,g,i),n.stroke())}var pR=class extends Ai{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:o,distance:s}=TA(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,p=Te(h,c-a),g=Bu(o,a,c)&&a!==c,v=p>=Et||g,_=ro(s,l+f,u+f);return v&&_}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,u=(i+o)/2,h=(s+a+l+c)/2;return{x:t+Math.cos(u)*h,y:r+Math.sin(u)*h}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>Et?Math.floor(r/Et):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(wt,r||0)),l=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,Vce(e,this,l,o,s),jce(e,this,l,o,s),e.restore()}};function OH(n,e,t=e){n.lineCap=Te(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Te(t.borderDash,e.borderDash)),n.lineDashOffset=Te(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Te(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Te(t.borderWidth,e.borderWidth),n.strokeStyle=Te(t.borderColor,e.borderColor)}function Uce(n,e,t){n.lineTo(t.x,t.y)}function Bce(n){return n.stepped?u$:n.tension||n.cubicInterpolationMode==="monotone"?d$:Uce}function FH(n,e,t={}){let r=n.length,{start:i=0,end:o=r-1}=t,{start:s,end:a}=e,c=Math.max(i,s),l=Math.min(o,a),u=i<s&&o<s||i>a&&o>a;return{count:r,start:c,loop:e.loop,ilen:l<c&&!u?r+l-c:l-c}}function $ce(n,e,t,r){let{points:i,options:o}=e,{count:s,start:a,loop:c,ilen:l}=FH(i,t,r),u=Bce(o),{move:h=!0,reverse:f}=r||{},p,g,v;for(p=0;p<=l;++p)g=i[(a+(f?l-p:p))%s],!g.skip&&(h?(n.moveTo(g.x,g.y),h=!1):u(n,v,g,f,o.stepped),v=g);return c&&(g=i[(a+(f?l:0))%s],u(n,v,g,f,o.stepped)),!!c}function Hce(n,e,t,r){let i=e.points,{count:o,start:s,ilen:a}=FH(i,t,r),{move:c=!0,reverse:l}=r||{},u=0,h=0,f,p,g,v,_,D,R=V=>(s+(l?a-V:V))%o,F=()=>{v!==_&&(n.lineTo(u,_),n.lineTo(u,v),n.lineTo(u,D))};for(c&&(p=i[R(0)],n.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=i[R(f)],p.skip)continue;let V=p.x,U=p.y,j=V|0;j===g?(U<v?v=U:U>_&&(_=U),u=(h*u+V)/++h):(F(),n.lineTo(V,U),g=j,h=0,v=_=U),D=U}F()}function mR(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Hce:$ce}function zce(n){return n.stepped?b$:n.tension||n.cubicInterpolationMode==="monotone"?w$:Zs}function Wce(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),OH(n,e.options),n.stroke(i)}function qce(n,e,t,r){let{segments:i,options:o}=e,s=mR(e);for(let a of i)OH(n,o,a.style),n.beginPath(),s(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var Gce=typeof Path2D=="function";function Kce(n,e,t,r){Gce&&!e.options.segment?Wce(n,e,t,r):qce(n,e,t,r)}var J_=(()=>{class n extends Ai{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let o=i.spanGaps?this._loop:this._fullLoop;y$(this._points,i,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=I$(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,o=t[r],s=this.points,a=qA(this,{property:r,start:o,end:o});if(!a.length)return;let c=[],l=zce(i),u,h;for(u=0,h=a.length;u<h;++u){let{start:f,end:p}=a[u],g=s[f],v=s[p];if(g===v){c.push(g);continue}let _=Math.abs((o-g[r])/(v[r]-g[r])),D=l(g,v,_,i.stepped);D[r]=t[r],c.push(D)}return c.length===1?c[0]:c}pathSegment(t,r,i){return mR(this)(t,this,r,i)}path(t,r,i){let o=this.segments,s=mR(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of o)a&=s(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),Kce(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function J$(n,e,t,r){let i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}var Yce=(()=>{class n extends Ai{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(r-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return J$(this,t,"x",r)}inYRange(t,r){return J$(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!to(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,M_(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function LH(n,e){let{x:t,y:r,base:i,width:o,height:s}=n.getProps(["x","y","base","width","height"],e),a,c,l,u,h;return n.horizontal?(h=s/2,a=Math.min(t,i),c=Math.max(t,i),l=r-h,u=r+h):(h=o/2,a=t-h,c=t+h,l=Math.min(r,i),u=Math.max(r,i)),{left:a,top:l,right:c,bottom:u}}function oa(n,e,t,r){return n?0:gn(e,t,r)}function Qce(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,o=FA(r);return{t:oa(i.top,o.top,0,t),r:oa(i.right,o.right,0,e),b:oa(i.bottom,o.bottom,0,t),l:oa(i.left,o.left,0,e)}}function Xce(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,o=ra(i),s=Math.min(e,t),a=n.borderSkipped,c=r||$e(i);return{topLeft:oa(!c||a.top||a.left,o.topLeft,0,s),topRight:oa(!c||a.top||a.right,o.topRight,0,s),bottomLeft:oa(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:oa(!c||a.bottom||a.right,o.bottomRight,0,s)}}function Jce(n){let e=LH(n),t=e.right-e.left,r=e.bottom-e.top,i=Qce(n,t/2,r/2),o=Xce(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function tR(n,e,t,r){let i=e===null,o=t===null,a=n&&!(i&&o)&&LH(n,r);return a&&(i||ro(e,a.left,a.right))&&(o||ro(t,a.top,a.bottom))}function Zce(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function ele(n,e){n.rect(e.x,e.y,e.w,e.h)}function nR(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,s=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+o,h:n.h+s,radius:n.radius}}var gR=class extends Ai{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=Jce(this),a=Zce(s.radius)?Hu:ele;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,nR(s,t,o)),e.clip(),a(e,nR(o,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,nR(o,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return tR(this,e,t,r)}inXRange(e,t){return tR(this,e,null,t)}inYRange(e,t){return tR(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},tle=Object.freeze({__proto__:null,ArcElement:pR,BarElement:gR,LineElement:J_,PointElement:Yce}),yR=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Z$=yR.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function VH(n){return yR[n%yR.length]}function jH(n){return Z$[n%Z$.length]}function nle(n,e){return n.borderColor=VH(e),n.backgroundColor=jH(e),++e}function rle(n,e){return n.backgroundColor=n.data.map(()=>VH(e++)),e}function ile(n,e){return n.backgroundColor=n.data.map(()=>jH(e++)),e}function ole(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof TR?e=rle(t,e):i instanceof SH?e=ile(t,e):i&&(e=nle(t,e))}}function eH(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function sle(n){return n&&(n.borderColor||n.backgroundColor)}function ale(){return mt.borderColor!=="rgba(0,0,0,0.1)"||mt.backgroundColor!=="rgba(0,0,0,0.1)"}var cle={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:o}=i,s=eH(r)||sle(i)||o&&eH(o)||ale();if(!t.forceOverride&&s)return;let a=ole(n);r.forEach(a)}};function lle(n,e,t,r,i){let o=i.samples||r;if(o>=t)return n.slice(e,e+t);let s=[],a=(t-2)/(o-2),c=0,l=e+t-1,u=e,h,f,p,g,v;for(s[c++]=n[u],h=0;h<o-2;h++){let _=0,D=0,R,F=Math.floor((h+1)*a)+1+e,V=Math.min(Math.floor((h+2)*a)+1,t)+e,U=V-F;for(R=F;R<V;R++)_+=n[R].x,D+=n[R].y;_/=U,D/=U;let j=Math.floor(h*a)+1+e,T=Math.min(Math.floor((h+1)*a)+1,t)+e,{x:b,y:E}=n[u];for(p=g=-1,R=j;R<T;R++)g=.5*Math.abs((b-_)*(n[R].y-E)-(b-n[R].x)*(D-E)),g>p&&(p=g,f=n[R],v=R);s[c++]=f,u=v}return s[c++]=n[l],s}function ule(n,e,t,r){let i=0,o=0,s,a,c,l,u,h,f,p,g,v,_=[],D=e+t-1,R=n[e].x,V=n[D].x-R;for(s=e;s<e+t;++s){a=n[s],c=(a.x-R)/V*r,l=a.y;let U=c|0;if(U===u)l<g?(g=l,h=s):l>v&&(v=l,f=s),i=(o*i+a.x)/++o;else{let j=s-1;if(!Ve(h)&&!Ve(f)){let T=Math.min(h,f),b=Math.max(h,f);T!==p&&T!==j&&_.push(fe(q({},n[T]),{x:i})),b!==p&&b!==j&&_.push(fe(q({},n[b]),{x:i}))}s>0&&j!==p&&_.push(n[j]),_.push(a),u=U,o=0,g=v=l,h=f=p=s}}return _}function UH(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function tH(n){n.data.datasets.forEach(e=>{UH(e)})}function dle(n,e){let t=e.length,r=0,i,{iScale:o}=n,{min:s,max:a,minDefined:c,maxDefined:l}=o.getUserBounds();return c&&(r=gn(eo(e,o.axis,s).lo,0,t-1)),l?i=gn(eo(e,o.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var hle={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){tH(n);return}let r=n.width;n.data.datasets.forEach((i,o)=>{let{_data:s,indexAxis:a}=i,c=n.getDatasetMeta(o),l=s||i.data;if(zu([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let u=n.scales[c.xAxisID];if(u.type!=="linear"&&u.type!=="time"||n.options.parsing)return;let{start:h,count:f}=dle(c,l),p=t.threshold||4*r;if(f<=p){UH(i);return}Ve(s)&&(i._data=l,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(v){this._data=v}}));let g;switch(t.algorithm){case"lttb":g=lle(l,h,f,r,t);break;case"min-max":g=ule(l,h,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=g})},destroy(n){tH(n)}};function fle(n,e,t){let r=n.segments,i=n.points,o=e.points,s=[];for(let a of r){let{start:c,end:l}=a;l=SR(c,l,i);let u=vR(t,i[c],i[l],a.loop);if(!e.segments){s.push({source:a,target:u,start:i[c],end:i[l]});continue}let h=qA(e,u);for(let f of h){let p=vR(t,o[f.start],o[f.end],f.loop),g=WA(a,i,p);for(let v of g)s.push({source:v,target:f,start:{[t]:nH(u,p,"start",Math.max)},end:{[t]:nH(u,p,"end",Math.min)}})}}return s}function vR(n,e,t,r){if(r)return;let i=e[n],o=t[n];return n==="angle"&&(i=_r(i),o=_r(o)),{property:n,start:i,end:o}}function ple(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=SR(s,a,i);let c=i[s],l=i[a];r!==null?(o.push({x:c.x,y:r}),o.push({x:l.x,y:r})):t!==null&&(o.push({x:t,y:c.y}),o.push({x:t,y:l.y}))}),o}function SR(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function nH(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function BH(n,e){let t=[],r=!1;return bt(n)?(r=!0,t=n):t=ple(n,e),t.length?new J_({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function rH(n){return n&&n.fill!==!1}function mle(n,e,t){let i=n[e].fill,o=[e],s;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Ft(i))return i;if(s=n[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function gle(n,e,t){let r=ble(n);if($e(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ft(i)&&Math.floor(i)===i?yle(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function yle(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function vle(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:$e(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function _le(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:$e(n)?r=n.value:r=e.getBaseValue(),r}function ble(n){let e=n.options,t=e.fill,r=Te(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function wle(n){let{scale:e,index:t,line:r}=n,i=[],o=r.segments,s=r.points,a=Ele(e,t);a.push(BH({x:null,y:e.bottom},r));for(let c=0;c<o.length;c++){let l=o[c];for(let u=l.start;u<=l.end;u++)Ile(i,s[u],a)}return new J_({points:i,options:{}})}function Ele(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let o=r[i];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function Ile(n,e,t){let r=[];for(let i=0;i<t.length;i++){let o=t[i],{first:s,last:a,point:c}=Cle(o,e,"x");if(!(!c||s&&a)){if(s)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function Cle(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],o=n.segments,s=n.points,a=!1,c=!1;for(let l=0;l<o.length;l++){let u=o[l],h=s[u.start][t],f=s[u.end][t];if(ro(i,h,f)){a=i===h,c=i===f;break}}return{first:a,last:c,point:r}}var Y_=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:o,radius:s}=this;return t=t||{start:0,end:Et},e.arc(i,o,s,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,o=e.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}};function Tle(n){let{chart:e,fill:t,line:r}=n;if(Ft(t))return Sle(e,t);if(t==="stack")return wle(n);if(t==="shape")return!0;let i=Dle(n);return i instanceof Y_?i:BH(i,r)}function Sle(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Dle(n){return(n.scale||{}).getPointPositionForValue?Ale(n):xle(n)}function xle(n){let{scale:e={},fill:t}=n,r=vle(t,e);if(Ft(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Ale(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=_le(t,e,o),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,o);return new Y_({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(s)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,s));return a}function rR(n,e,t){let r=Tle(e),{chart:i,index:o,line:s,scale:a,axis:c}=e,l=s.options,u=l.fill,h=l.backgroundColor,{above:f=h,below:p=h}=u||{},g=i.getDatasetMeta(o),v=GA(i,g);r&&s.points.length&&(rp(n,t),Rle(n,{line:s,target:r,above:f,below:p,area:t,scale:a,axis:c,clip:v}),ip(n))}function Rle(n,e){let{line:t,target:r,above:i,below:o,area:s,scale:a,clip:c}=e,l=t._loop?"angle":e.axis;n.save(),l==="x"&&o!==i&&(iH(n,r,s.top),oH(n,{line:t,target:r,color:i,scale:a,property:l,clip:c}),n.restore(),n.save(),iH(n,r,s.bottom)),oH(n,{line:t,target:r,color:o,scale:a,property:l,clip:c}),n.restore()}function iH(n,e,t){let{segments:r,points:i}=e,o=!0,s=!1;n.beginPath();for(let a of r){let{start:c,end:l}=a,u=i[c],h=i[SR(c,l,i)];o?(n.moveTo(u.x,u.y),o=!1):(n.lineTo(u.x,t),n.lineTo(u.x,u.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(h.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function oH(n,e){let{line:t,target:r,property:i,color:o,scale:s,clip:a}=e,c=fle(t,r,i);for(let{source:l,target:u,start:h,end:f}of c){let{style:{backgroundColor:p=o}={}}=l,g=r!==!0;n.save(),n.fillStyle=p,Mle(n,s,a,g&&vR(i,h,f)),n.beginPath();let v=!!t.pathSegment(n,l),_;if(g){v?n.closePath():sH(n,r,f,i);let D=!!r.pathSegment(n,u,{move:v,reverse:!0});_=v&&D,_||sH(n,r,h,i)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function Mle(n,e,t,r){let i=e.chart.chartArea,{property:o,start:s,end:a}=r||{};if(o==="x"||o==="y"){let c,l,u,h;o==="x"?(c=s,l=i.top,u=a,h=i.bottom):(c=i.left,l=s,u=i.right,h=a),n.beginPath(),t&&(c=Math.max(c,t.left),u=Math.min(u,t.right),l=Math.max(l,t.top),h=Math.min(h,t.bottom)),n.rect(c,l,u-c,h-l),n.clip()}}function sH(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var Ple={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],o,s,a,c;for(s=0;s<r;++s)o=n.getDatasetMeta(s),a=o.dataset,c=null,a&&a.options&&a instanceof J_&&(c={visible:n.isDatasetVisible(s),index:s,fill:gle(a,s,r),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,i.push(c);for(s=0;s<r;++s)c=i[s],!(!c||c.fill===!1)&&(c.fill=mle(i,s,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let s=i.length-1;s>=0;--s){let a=i[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),r&&a.fill&&rR(n.ctx,a,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let o=r[i].$filler;rH(o)&&rR(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!rH(r)||t.drawTime!=="beforeDatasetDraw"||rR(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},aH=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},kle=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,Q_=class extends Ai{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=pt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=sn(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=aH(r,o),l,u;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,u=this._fitRows(s,o,a,c)+10):(u=this.maxHeight,l=this._fitCols(s,i,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],u=i+a,h=e;o.textAlign="left",o.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((g,v)=>{let _=r+t/2+o.measureText(g.text).width;(v===0||l[l.length-1]+_+2*a>s)&&(h+=u,l[l.length-(v>0?0:1)]=0,p+=u,f++),c[v]={left:0,top:p,row:f,width:_,height:i},l[l.length-1]+=_+a}),h}_fitCols(e,t,r,i){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],u=s-e,h=a,f=0,p=0,g=0,v=0;return this.legendItems.forEach((_,D)=>{let{itemWidth:R,itemHeight:F}=Nle(r,t,o,_,i);D>0&&p+F+2*a>u&&(h+=f+a,l.push({width:f,height:p}),g+=f+a,v++,f=p=0),c[D]={left:g,top:p,col:v,width:R,height:F},f=Math.max(f,R),p+=F+a}),h+=f,l.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=Ac(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=Mn(r,this.left+i,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=Mn(r,this.left+i,this.right-this.lineWidths[a])),l.top+=this.top+e+i,l.left=s.leftForLtr(s.x(c),l.width),c+=l.width+i}else{let a=0,c=Mn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=Mn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+i,l.left=s.leftForLtr(s.x(l.left),l.width),c+=l.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;rp(e,this),this._draw(),ip(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=e,a=mt.color,c=Ac(e.rtl,this.left,this.width),l=sn(s.font),{padding:u}=s,h=l.size,f=h/2,p;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;let{boxWidth:g,boxHeight:v,itemHeight:_}=aH(s,h),D=function(j,T,b){if(isNaN(g)||g<=0||isNaN(v)||v<0)return;i.save();let E=Te(b.lineWidth,1);if(i.fillStyle=Te(b.fillStyle,a),i.lineCap=Te(b.lineCap,"butt"),i.lineDashOffset=Te(b.lineDashOffset,0),i.lineJoin=Te(b.lineJoin,"miter"),i.lineWidth=E,i.strokeStyle=Te(b.strokeStyle,a),i.setLineDash(Te(b.lineDash,[])),s.usePointStyle){let x={radius:v*Math.SQRT2/2,pointStyle:b.pointStyle,rotation:b.rotation,borderWidth:E},M=c.xPlus(j,g/2),N=T+f;OA(i,x,M,N,s.pointStyleWidth&&g)}else{let x=T+Math.max((h-v)/2,0),M=c.leftForLtr(j,g),N=ra(b.borderRadius);i.beginPath(),Object.values(N).some(A=>A!==0)?Hu(i,{x:M,y:x,w:g,h:v,radius:N}):i.rect(M,x,g,v),i.fill(),E!==0&&i.stroke()}i.restore()},R=function(j,T,b){na(i,b.text,j,T+_/2,l,{strikethrough:b.hidden,textAlign:c.textAlign(b.textAlign)})},F=this.isHorizontal(),V=this._computeTitleHeight();F?p={x:Mn(o,this.left+u,this.right-r[0]),y:this.top+u+V,line:0}:p={x:this.left+u,y:Mn(o,this.top+V+u,this.bottom-t[0].height),line:0},HA(this.ctx,e.textDirection);let U=_+u;this.legendItems.forEach((j,T)=>{i.strokeStyle=j.fontColor,i.fillStyle=j.fontColor;let b=i.measureText(j.text).width,E=c.textAlign(j.textAlign||(j.textAlign=s.textAlign)),x=g+f+b,M=p.x,N=p.y;c.setWidth(this.width),F?T>0&&M+x+u>this.right&&(N=p.y+=U,p.line++,M=p.x=Mn(o,this.left+u,this.right-r[p.line])):T>0&&N+U>this.bottom&&(M=p.x=M+t[p.line].width+u,p.line++,N=p.y=Mn(o,this.top+V+u,this.bottom-t[p.line].height));let A=c.x(M);if(D(A,N,j),M=a$(E,M+g+f,F?M+x:this.right,e.rtl),R(c.x(M),N,j),F)p.x+=x+u;else if(typeof j.text!="string"){let Pt=l.lineHeight;p.y+=$H(j,Pt)+u}else p.y+=U}),zA(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=sn(t.font),i=Pn(t.padding);if(!t.display)return;let o=Ac(e.rtl,this.left,this.width),s=this.ctx,a=t.position,c=r.size/2,l=i.top+c,u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+l,h=Mn(e.align,h,this.right-f);else{let g=this.columnSizes.reduce((v,_)=>Math.max(v,_.height),0);u=l+Mn(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}let p=Mn(a,h,h+f);s.textAlign=o.textAlign(A_(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,na(s,t.text,p,u,r)}_computeTitleHeight(){let e=this.options.title,t=sn(e.font),r=Pn(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(ro(e,this.left,this.right)&&ro(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],ro(e,i.left,i.left+i.width)&&ro(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!Lle(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,o=kle(i,r);i&&!o&&pt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&pt(t.onHover,[e,r,this],this)}else r&&pt(t.onClick,[e,r,this],this)}};function Nle(n,e,t,r,i){let o=Ole(r,n,e,t),s=Fle(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}function Ole(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+r.measureText(i).width}function Fle(n,e,t){let r=n;return typeof e.text!="string"&&(r=$H(e,t)),r}function $H(n,e){let t=n.text?n.text.length:0;return e*t}function Lle(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var Vle={id:"legend",_element:Q_,start(n,e,t){let r=n.legend=new Q_({ctx:n.ctx,options:t,chart:n});Kn.configure(n,r,t),Kn.addBox(n,r)},stop(n){Kn.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;Kn.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),u=Pn(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:s&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},fp=class extends Ai{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=bt(r.text)?r.text.length:1;this._padding=Pn(r.padding);let o=i*sn(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:o,options:s}=this,a=s.align,c=0,l,u,h;return this.isHorizontal()?(u=Mn(a,r,o),h=t+e,l=o-r):(s.position==="left"?(u=r+e,h=Mn(a,i,t),c=wt*-.5):(u=o-e,h=Mn(a,t,i),c=wt*.5),l=i-t),{titleX:u,titleY:h,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=sn(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(o);na(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:l,textAlign:A_(t.align),textBaseline:"middle",translation:[s,a]})}};function jle(n,e){let t=new fp({ctx:n.ctx,options:e,chart:n});Kn.configure(n,t,e),Kn.addBox(n,t),n.titleBlock=t}var Ule={id:"title",_element:fp,start(n,e,t){jle(n,t)},stop(n){let e=n.titleBlock;Kn.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;Kn.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},U_=new WeakMap,Ble={id:"subtitle",start(n,e,t){let r=new fp({ctx:n.ctx,options:t,chart:n});Kn.configure(n,r,t),Kn.addBox(n,r),U_.set(n,r)},stop(n){Kn.removeBox(n,U_.get(n)),U_.delete(n)},beforeUpdate(n,e,t){let r=U_.get(n);Kn.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},dp={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,o=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();r.add(c.x),i+=c.y,++o}}return o===0||r.size===0?!1:{x:[...r].reduce((a,c)=>a+c)/r.size,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){let c=n[o].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),u=C_(e,l);u<i&&(i=u,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function io(n,e){return e&&(bt(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function as(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function $le(n,e){let{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:n,label:s,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function cH(n,e){let t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:s,boxHeight:a}=e,c=sn(e.bodyFont),l=sn(e.titleFont),u=sn(e.footerFont),h=o.length,f=i.length,p=r.length,g=Pn(e.padding),v=g.height,_=0,D=r.reduce((V,U)=>V+U.before.length+U.lines.length+U.after.length,0);if(D+=n.beforeBody.length+n.afterBody.length,h&&(v+=h*l.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),D){let V=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;v+=p*V+(D-p)*c.lineHeight+(D-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let R=0,F=function(V){_=Math.max(_,t.measureText(V).width+R)};return t.save(),t.font=l.string,ot(n.title,F),t.font=c.string,ot(n.beforeBody.concat(n.afterBody),F),R=e.displayColors?s+2+e.boxPadding:0,ot(r,V=>{ot(V.before,F),ot(V.lines,F),ot(V.after,F)}),R=0,t.font=u.string,ot(n.footer,F),t.restore(),_+=g.width,{width:_,height:v}}function Hle(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function zle(n,e,t,r){let{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if(n==="left"&&i+o+s>e.width||n==="right"&&i-o-s<0)return!0}function Wle(n,e,t,r){let{x:i,width:o}=t,{width:s,chartArea:{left:a,right:c}}=n,l="center";return r==="center"?l=i<=(a+c)/2?"left":"right":i<=o/2?l="left":i>=s-o/2&&(l="right"),zle(l,n,e,t)&&(l="center"),l}function lH(n,e,t){let r=t.yAlign||e.yAlign||Hle(n,t);return{xAlign:t.xAlign||e.xAlign||Wle(n,e,t,r),yAlign:r}}function qle(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Gle(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function uH(n,e,t,r){let{caretSize:i,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:c}=t,l=i+o,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=ra(s),g=qle(e,a),v=Gle(e,c,l);return c==="center"?a==="left"?g+=l:a==="right"&&(g-=l):a==="left"?g-=Math.max(u,f)+i:a==="right"&&(g+=Math.max(h,p)+i),{x:gn(g,0,r.width-e.width),y:gn(v,0,r.height-e.height)}}function B_(n,e,t){let r=Pn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function dH(n){return io([],as(n))}function Kle(n,e,t){return os(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function hH(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var HH={beforeTitle:no,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:no,beforeBody:no,beforeLabel:no,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return Ve(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:no,afterBody:no,beforeFooter:no,footer:no,afterFooter:no};function wr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?HH[e].call(t,r):i}var fH=(()=>{class n extends Ai{static positioners=dp;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&r.options.animation&&i.animations,s=new W_(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Kle(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,o=wr(i,"beforeTitle",this,t),s=wr(i,"title",this,t),a=wr(i,"afterTitle",this,t),c=[];return c=io(c,as(o)),c=io(c,as(s)),c=io(c,as(a)),c}getBeforeBody(t,r){return dH(wr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,o=[];return ot(t,s=>{let a={before:[],lines:[],after:[]},c=hH(i,s);io(a.before,as(wr(c,"beforeLabel",this,s))),io(a.lines,wr(c,"label",this,s)),io(a.after,as(wr(c,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,r){return dH(wr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,o=wr(i,"beforeFooter",this,t),s=wr(i,"footer",this,t),a=wr(i,"afterFooter",this,t),c=[];return c=io(c,as(o)),c=io(c,as(s)),c=io(c,as(a)),c}_createItems(t){let r=this._active,i=this.chart.data,o=[],s=[],a=[],c=[],l,u;for(l=0,u=r.length;l<u;++l)c.push($le(this.chart,r[l]));return t.filter&&(c=c.filter((h,f,p)=>t.filter(h,f,p,i))),t.itemSort&&(c=c.sort((h,f)=>t.itemSort(h,f,i))),ot(c,h=>{let f=hH(t.callbacks,h);o.push(wr(f,"labelColor",this,h)),s.push(wr(f,"labelPointStyle",this,h)),a.push(wr(f,"labelTextColor",this,h))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let c=dp[i.position].call(this,o,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let l=this._size=cH(this,i),u=Object.assign({},c,l),h=lH(this.chart,i,u),f=uH(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:f.x,y:f.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,o){let s=this.getCaretPosition(t,i,o);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(t,r,i){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:f}=ra(c),{x:p,y:g}=t,{width:v,height:_}=r,D,R,F,V,U,j;return s==="center"?(U=g+_/2,o==="left"?(D=p,R=D-a,V=U+a,j=U-a):(D=p+v,R=D+a,V=U-a,j=U+a),F=D):(o==="left"?R=p+Math.max(l,h)+a:o==="right"?R=p+v-Math.max(u,f)-a:R=this.caretX,s==="top"?(V=g,U=V-a,D=R-a,F=R+a):(V=g+_,U=V+a,D=R+a,F=R-a),j=V),{x1:D,x2:R,x3:F,y1:V,y2:U,y3:j}}drawTitle(t,r,i){let o=this.title,s=o.length,a,c,l;if(s){let u=Ac(i.rtl,this.x,this.width);for(t.x=B_(this,i.titleAlign,i),r.textAlign=u.textAlign(i.titleAlign),r.textBaseline="middle",a=sn(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,l=0;l<s;++l)r.fillText(o[l],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===s&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,o,s){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=sn(s.bodyFont),f=B_(this,"left",s),p=o.x(f),g=l<h.lineHeight?(h.lineHeight-l)/2:0,v=r.y+g;if(s.usePointStyle){let _={radius:Math.min(u,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},D=o.leftForLtr(p,u)+u/2,R=v+l/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,M_(t,_,D,R),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,M_(t,_,D,R)}else{t.lineWidth=$e(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let _=o.leftForLtr(p,u),D=o.leftForLtr(o.xPlus(p,1),u-2),R=ra(a.borderRadius);Object.values(R).some(F=>F!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Hu(t,{x:_,y:v,w:u,h:l,radius:R}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Hu(t,{x:D,y:v+1,w:u-2,h:l-2,radius:R}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(_,v,u,l),t.strokeRect(_,v,u,l),t.fillStyle=a.backgroundColor,t.fillRect(D,v+1,u-2,l-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:u,boxPadding:h}=i,f=sn(i.bodyFont),p=f.lineHeight,g=0,v=Ac(i.rtl,this.x,this.width),_=function(E){r.fillText(E,v.x(t.x+g),t.y+p/2),t.y+=p+s},D=v.textAlign(a),R,F,V,U,j,T,b;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=B_(this,D,i),r.fillStyle=i.bodyColor,ot(this.beforeBody,_),g=c&&D!=="right"?a==="center"?u/2+h:u+2+h:0,U=0,T=o.length;U<T;++U){for(R=o[U],F=this.labelTextColors[U],r.fillStyle=F,ot(R.before,_),V=R.lines,c&&V.length&&(this._drawColorBox(r,t,U,v,i),p=Math.max(f.lineHeight,l)),j=0,b=V.length;j<b;++j)_(V[j]),p=f.lineHeight;ot(R.after,_)}g=0,p=f.lineHeight,ot(this.afterBody,_),t.y-=s}drawFooter(t,r,i){let o=this.footer,s=o.length,a,c;if(s){let l=Ac(i.rtl,this.x,this.width);for(t.x=B_(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=l.textAlign(i.footerAlign),r.textBaseline="middle",a=sn(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<s;++c)r.fillText(o[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,o){let{xAlign:s,yAlign:a}=this,{x:c,y:l}=t,{width:u,height:h}=i,{topLeft:f,topRight:p,bottomLeft:g,bottomRight:v}=ra(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(c+f,l),a==="top"&&this.drawCaret(t,r,i,o),r.lineTo(c+u-p,l),r.quadraticCurveTo(c+u,l,c+u,l+p),a==="center"&&s==="right"&&this.drawCaret(t,r,i,o),r.lineTo(c+u,l+h-v),r.quadraticCurveTo(c+u,l+h,c+u-v,l+h),a==="bottom"&&this.drawCaret(t,r,i,o),r.lineTo(c+g,l+h),r.quadraticCurveTo(c,l+h,c,l+h-g),a==="center"&&s==="left"&&this.drawCaret(t,r,i,o),r.lineTo(c,l+f),r.quadraticCurveTo(c,l,c+f,l),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){let a=dp[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=cH(this,t),l=Object.assign({},a,this._size),u=lH(r,t,l),h=uH(t,l,u,r);(o._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=Pn(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,o,r),HA(t,r.textDirection),s.y+=a.top,this.drawTitle(s,t,r),this.drawBody(s,t,r),this.drawFooter(s,t,r),zA(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,o=t.map(({datasetIndex:c,index:l})=>{let u=this.chart.getDatasetMeta(c);if(!u)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:u.data[l],index:l}}),s=!tp(i,o),a=this._positionChanged(o,r);(s||a)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,r,i),c=this._positionChanged(a,t),l=r||!tp(a,s)||c;return l&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),l}_getActiveElements(t,r,i,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return r.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:o,options:s}=this,a=dp[s.position].call(this,t,r);return a!==!1&&(i!==a.x||o!==a.y)}}return n})(),Yle={id:"tooltip",_element:fH,positioners:dp,afterInit(n,e,t){t&&(n.tooltip=new fH({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",fe(q({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HH},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Qle=Object.freeze({__proto__:null,Colors:cle,Decimation:hle,Filler:Ple,Legend:Vle,SubTitle:Ble,Title:Ule,Tooltip:Yle}),Xle=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Jle(n,e,t,r){let i=n.indexOf(e);if(i===-1)return Xle(n,e,t,r);let o=n.lastIndexOf(e);return i!==o?t:i}var Zle=(n,e)=>n===null?null:gn(Math.round(n),0,e);function pH(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var eue=(()=>{class n extends Pc{static id="category";static defaults={ticks:{callback:pH}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:o,label:s}of r)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(Ve(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:Jle(i,t,Te(r,t),this._addedLabels),Zle(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,o=[],s=this.getLabels();s=t===0&&r===s.length-1?s:s.slice(t,r+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)o.push({value:a});return o}getLabelForValue(t){return pH.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function tue(n,e){let t=[],{bounds:i,step:o,min:s,max:a,precision:c,count:l,maxTicks:u,maxDigits:h,includeBounds:f}=n,p=o||1,g=u-1,{min:v,max:_}=e,D=!Ve(s),R=!Ve(a),F=!Ve(l),V=(_-v)/(h+1),U=EA((_-v)/g/p)*p,j,T,b,E;if(U<1e-14&&!D&&!R)return[{value:v},{value:_}];E=Math.ceil(_/U)-Math.floor(v/U),E>g&&(U=EA(E*U/g/p)*p),Ve(c)||(j=Math.pow(10,c),U=Math.ceil(U*j)/j),i==="ticks"?(T=Math.floor(v/U)*U,b=Math.ceil(_/U)*U):(T=v,b=_),D&&R&&o&&e$((a-s)/o,U/1e3)?(E=Math.round(Math.min((a-s)/U,u)),U=(a-s)/E,T=s,b=a):F?(T=D?s:T,b=R?a:b,E=l-1,U=(b-T)/E):(E=(b-T)/U,Uu(E,Math.round(E),U/1e3)?E=Math.round(E):E=Math.ceil(E));let x=Math.max(CA(U),CA(T));j=Math.pow(10,Ve(c)?x:c),T=Math.round(T*j)/j,b=Math.round(b*j)/j;let M=0;for(D&&(f&&T!==s?(t.push({value:s}),T<s&&M++,Uu(Math.round((T+M*U)*j)/j,s,mH(s,V,n))&&M++):T<s&&M++);M<E;++M){let N=Math.round((T+M*U)*j)/j;if(R&&N>a)break;t.push({value:N})}return R&&f&&b!==a?t.length&&Uu(t[t.length-1].value,a,mH(a,V,n))?t[t.length-1].value=a:t.push({value:a}):(!R||b===a)&&t.push({value:b}),t}function mH(n,e,{horizontal:t,minRotation:r}){let i=ii(r),o=(t?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+n).length;return Math.min(e/o,s)}var Gu=class extends Pc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this,s=c=>i=t?i:c,a=c=>o=r?o:c;if(e){let c=xi(i),l=xi(o);c<0&&l<0?a(0):c>0&&l>0&&s(0)}if(i===o){let c=o===0?1:Math.abs(o*.05);a(o+c),e||s(i-c)}this.min=i,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=tue(i,o);return e.bounds==="ticks"&&IA(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return $u(e,this.chart.options.locale,this.options.ticks.format)}},_R=class extends Gu{static id="linear";static defaults={ticks:{callback:np.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ft(e)?e:0,this.max=Ft(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=ii(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},pp=n=>Math.floor(rs(n)),Mc=(n,e)=>Math.pow(10,pp(n)+e);function gH(n){return n/Math.pow(10,pp(n))===1}function yH(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function nue(n,e){let t=e-n,r=pp(t);for(;yH(n,e,r)>10;)r++;for(;yH(n,e,r)<10;)r--;return Math.min(r,pp(n))}function rue(n,{min:e,max:t}){e=br(n.min,e);let r=[],i=pp(e),o=nue(e,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),c=i>o?Math.pow(10,i):0,l=Math.round((e-c)*s)/s,u=Math.floor((e-c)/a/10)*a*10,h=Math.floor((l-u)/Math.pow(10,o)),f=br(n.min,Math.round((c+u+h*Math.pow(10,o))*s)/s);for(;f<t;)r.push({value:f,major:gH(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,s=o>=0?1:s),f=Math.round((c+u+h*Math.pow(10,o))*s)/s;let p=br(n.max,f);return r.push({value:p,major:gH(p),significand:h}),r}var bR=class extends Pc{static id="logarithmic";static defaults={ticks:{callback:np.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=Gu.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Ft(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Ft(e)?Math.max(0,e):null,this.max=Ft(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ft(this._userMin)&&(this.min=e===Mc(this.min,0)?Mc(this.min,-1):Mc(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,o=a=>r=e?r:a,s=a=>i=t?i:a;r===i&&(r<=0?(o(1),s(10)):(o(Mc(r,-1)),s(Mc(i,1)))),r<=0&&o(Mc(i,-1)),i<=0&&s(Mc(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=rue(t,this);return e.bounds==="ticks"&&IA(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":$u(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=rs(e),this._valueRange=rs(this.max)-rs(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(rs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function wR(n){let e=n.ticks;if(e.display&&n.display){let t=Pn(e.backdropPadding);return Te(e.font&&e.font.size,mt.font.size)+t.height}return 0}function iue(n,e,t){return t=bt(t)?t:[t],{w:l$(n,e.string,t),h:t.length*e.lineHeight}}function vH(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function oue(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?wt/o:0;for(let c=0;c<o;c++){let l=s.setContext(n.getPointLabelContext(c));i[c]=l.padding;let u=n.getPointPosition(c,n.drawingArea+i[c],a),h=sn(l.font),f=iue(n.ctx,h,n._pointLabels[c]);r[c]=f;let p=_r(n.getIndexAngle(c)+a),g=Math.round(D_(p)),v=vH(g,u.x,f.w,0,180),_=vH(g,u.y,f.h,90,270);sue(t,e,p,v,_)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=lue(n,r,i)}function sue(n,e,t,r,i){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/o,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/s,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/s,n.b=Math.max(n.b,e.b+c))}function aue(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=t,c=n.getPointPosition(e,r+i+s,o),l=Math.round(D_(_r(c.angle+Gt))),u=hue(c.y,a.h,l),h=uue(l),f=due(c.x,a.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+a.w,bottom:u+a.h}}function cue(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:o}=n;return!(to({x:t,y:r},e)||to({x:t,y:o},e)||to({x:i,y:r},e)||to({x:i,y:o},e))}function lue(n,e,t){let r=[],i=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:wR(o)/2,additionalAngle:s?wt/i:0},l;for(let u=0;u<i;u++){c.padding=t[u],c.size=e[u];let h=aue(n,u,c);r.push(h),a==="auto"&&(h.visible=cue(h,l),h.visible&&(l=h))}return r}function uue(n){return n===0||n===180?"center":n<180?"left":"right"}function due(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function hue(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function fue(n,e,t){let{left:r,top:i,right:o,bottom:s}=t,{backdropColor:a}=e;if(!Ve(a)){let c=ra(e.borderRadius),l=Pn(e.backdropPadding);n.fillStyle=a;let u=r-l.left,h=i-l.top,f=o-r+l.width,p=s-i+l.height;Object.values(c).some(g=>g!==0)?(n.beginPath(),Hu(n,{x:u,y:h,w:f,h:p,radius:c}),n.fill()):n.fillRect(u,h,f,p)}}function pue(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let o=n._pointLabelItems[i];if(!o.visible)continue;let s=r.setContext(n.getPointLabelContext(i));fue(t,s,o);let a=sn(s.font),{x:c,y:l,textAlign:u}=o;na(t,n._pointLabels[i],c,l+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function zH(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Et);else{let o=n.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=n.getPointPosition(s,e),i.lineTo(o.x,o.y)}}function mue(n,e,t,r,i){let o=n.ctx,s=e.circular,{color:a,lineWidth:c}=e;!s&&!r||!a||!c||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),zH(n,t,s,r),o.closePath(),o.stroke(),o.restore())}function gue(n,e,t){return os(n,{label:t,index:e,type:"pointLabel"})}var ER=class extends Gu{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:np.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Pn(wR(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Ft(e)&&!isNaN(e)?e:0,this.max=Ft(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/wR(this.options))}generateTickLabels(e){Gu.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=pt(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?oue(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=Et/(this._pointLabels.length||1),r=this.options.startAngle||0;return _r(e*t+ii(r))}getDistanceFromCenterForValue(e){if(Ve(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Ve(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return gue(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-Gt+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),zH(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&pue(this,s),i.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);let f=this.getContext(h),p=i.setContext(f),g=o.setContext(f);mue(this,p,c,s,g)}}),r.display){for(e.save(),a=s-1;a>=0;a--){let u=r.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=r.setContext(this.getContext(c)),u=sn(l.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=u.string,s=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let h=Pn(l.backdropPadding);e.fillRect(-s/2-h.left,-o-u.size/2-h.top,s+h.width,u.size+h.height)}na(e,a.label,0,-o,u,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},Z_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Er=Object.keys(Z_);function _H(n,e){return n-e}function bH(n,e){if(Ve(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts,s=e;return typeof r=="function"&&(s=r(s)),Ft(s)||(s=typeof r=="string"?t.parse(s,r):t.parse(s)),s===null?null:(i&&(s=i==="week"&&(xc(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,i)),+s)}function wH(n,e,t,r){let i=Er.length;for(let o=Er.indexOf(n);o<i-1;++o){let s=Z_[Er[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=r)return Er[o]}return Er[i-1]}function yue(n,e,t,r,i){for(let o=Er.length-1;o>=Er.indexOf(t);o--){let s=Er[o];if(Z_[s].common&&n._adapter.diff(i,r,s)>=e-1)return s}return Er[t?Er.indexOf(t):0]}function vue(n){for(let e=Er.indexOf(n)+1,t=Er.length;e<t;++e)if(Z_[Er[e]].common)return Er[e]}function EH(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=x_(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function _ue(n,e,t,r){let i=n._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value,a,c;for(a=o;a<=s;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function IH(n,e,t){let r=[],i={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return o===0||!t?r:_ue(n,r,i,t)}var IR=(()=>{class n extends Pc{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),o=this._adapter=new Mae._date(t.adapters.date);o.init(r),Vu(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:bH(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function l(u){!a&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!c&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),o=Ft(o)&&!isNaN(o)?o:+r.startOf(Date.now(),i),s=Ft(s)&&!isNaN(s)?s:+r.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,c=r$(o,s,a);return this._unit=r.unit||(i.autoSkip?wH(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):yue(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:vue(this._unit),this.initOffsets(o),t.reverse&&c.reverse(),IH(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=gn(r,0,a),i=gn(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,o=this.options,s=o.time,a=s.unit||wH(s.minUnit,r,i,this._getLabelCapacity(r)),c=Te(o.ticks.stepSize,1),l=a==="week"?s.isoWeekday:!1,u=xc(l)||l===!0,h={},f=r,p,g;if(u&&(f=+t.startOf(f,"isoWeek",l)),f=+t.startOf(f,u?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let v=o.ticks.source==="data"&&this.getDataTimestamps();for(p=f,g=0;p<i;p=+t.add(p,c,a),g++)EH(h,p,v);return(p===i||o.bounds==="ticks"||g===1)&&EH(h,p,v),Object.keys(h).sort(_H).map(_=>+_)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let o=this.options.time.displayFormats,s=this._unit,a=r||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,o){let s=this.options,a=s.ticks.callback;if(a)return pt(a,[t,r,i],this);let c=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&c[l],f=u&&c[u],p=i[r],g=u&&f&&p&&p.major;return this._adapter.format(t,o||(g?f:h))}generateTickLabels(t){let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,o=ii(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:i*s+c*a,h:i*a+c*s}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,o=i[r.unit]||i.millisecond,s=this._tickFormatFunction(t,0,IH(this,[t],this._majorUnit),o),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,i=o.length;r<i;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let o=this.getLabels();for(r=0,i=o.length;r<i;++r)t.push(bH(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return DA(t.sort(_H))}}return n})();function $_(n,e,t){let r=0,i=n.length-1,o,s,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=eo(n,"pos",e)),{pos:o,time:a}=n[r],{pos:s,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=eo(n,"time",e)),{time:o,pos:a}=n[r],{time:s,pos:c}=n[i]);let l=s-o;return l?a+(c-a)*(e-o)/l:a}var CR=class extends IR{static id="timeseries";static defaults=IR.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=$_(t,this.min),this._tableRange=$_(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],o=[],s,a,c,l,u;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=r&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,a=i.length;s<a;++s)u=i[s+1],c=i[s-1],l=i[s],Math.round((u+c)/2)!==l&&o.push({time:l,pos:s/(a-1)});return o}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return($_(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return $_(this._table,r*this._tableRange+this._minPos,!0)}},bue=Object.freeze({__proto__:null,CategoryScale:eue,LinearScale:_R,LogarithmicScale:bR,RadialLinearScale:ER,TimeScale:IR,TimeSeriesScale:CR}),WH=[Rae,tle,Qle,bue];var wue=typeof global=="object"&&global&&global.Object===Object&&global,e0=wue;var Eue=typeof self=="object"&&self&&self.Object===Object&&self,Iue=e0||Eue||Function("return this")(),oi=Iue;var Cue=oi.Symbol,Ku=Cue;var qH=Object.prototype,Tue=qH.hasOwnProperty,Sue=qH.toString,gp=Ku?Ku.toStringTag:void 0;function Due(n){var e=Tue.call(n,gp),t=n[gp];try{n[gp]=void 0;var r=!0}catch{}var i=Sue.call(n);return r&&(e?n[gp]=t:delete n[gp]),i}var GH=Due;var xue=Object.prototype,Aue=xue.toString;function Rue(n){return Aue.call(n)}var KH=Rue;var Mue="[object Null]",Pue="[object Undefined]",YH=Ku?Ku.toStringTag:void 0;function kue(n){return n==null?n===void 0?Pue:Mue:YH&&YH in Object(n)?GH(n):KH(n)}var aa=kue;function Nue(n){return n!=null&&typeof n=="object"}var so=Nue;var Oue=Array.isArray,yp=Oue;function Fue(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var Ir=Fue;function Lue(n){return n}var t0=Lue;var Vue="[object AsyncFunction]",jue="[object Function]",Uue="[object GeneratorFunction]",Bue="[object Proxy]";function $ue(n){if(!Ir(n))return!1;var e=aa(n);return e==jue||e==Uue||e==Vue||e==Bue}var Yu=$ue;var Hue=oi["__core-js_shared__"],n0=Hue;var QH=function(){var n=/[^.]+$/.exec(n0&&n0.keys&&n0.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function zue(n){return!!QH&&QH in n}var XH=zue;var Wue=Function.prototype,que=Wue.toString;function Gue(n){if(n!=null){try{return que.call(n)}catch{}try{return n+""}catch{}}return""}var JH=Gue;var Kue=/[\\^$.*+?()[\]{}|]/g,Yue=/^\[object .+?Constructor\]$/,Que=Function.prototype,Xue=Object.prototype,Jue=Que.toString,Zue=Xue.hasOwnProperty,ede=RegExp("^"+Jue.call(Zue).replace(Kue,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tde(n){if(!Ir(n)||XH(n))return!1;var e=Yu(n)?ede:Yue;return e.test(JH(n))}var ZH=tde;function nde(n,e){return n?.[e]}var ez=nde;function rde(n,e){var t=ez(n,e);return ZH(t)?t:void 0}var Qu=rde;var tz=Object.create,ide=function(){function n(){}return function(e){if(!Ir(e))return{};if(tz)return tz(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),nz=ide;function ode(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var rz=ode;function sde(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var iz=sde;var ade=800,cde=16,lde=Date.now;function ude(n){var e=0,t=0;return function(){var r=lde(),i=cde-(r-t);if(t=r,i>0){if(++e>=ade)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var oz=ude;function dde(n){return function(){return n}}var sz=dde;var hde=function(){try{var n=Qu(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Xu=hde;var fde=Xu?function(n,e){return Xu(n,"toString",{configurable:!0,enumerable:!1,value:sz(e),writable:!0})}:t0,az=fde;var pde=oz(az),cz=pde;var mde=9007199254740991,gde=/^(?:0|[1-9]\d*)$/;function yde(n,e){var t=typeof n;return e=e??mde,!!e&&(t=="number"||t!="symbol"&&gde.test(n))&&n>-1&&n%1==0&&n<e}var r0=yde;function vde(n,e,t){e=="__proto__"&&Xu?Xu(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Ju=vde;function _de(n,e){return n===e||n!==n&&e!==e}var ca=_de;var bde=Object.prototype,wde=bde.hasOwnProperty;function Ede(n,e,t){var r=n[e];(!(wde.call(n,e)&&ca(r,t))||t===void 0&&!(e in n))&&Ju(n,e,t)}var lz=Ede;function Ide(n,e,t,r){var i=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),i?Ju(t,a,c):lz(t,a,c)}return t}var uz=Ide;var dz=Math.max;function Cde(n,e,t){return e=dz(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=dz(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),rz(n,this,a)}}var hz=Cde;function Tde(n,e){return cz(hz(n,e,t0),n+"")}var fz=Tde;var Sde=9007199254740991;function Dde(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Sde}var i0=Dde;function xde(n){return n!=null&&i0(n.length)&&!Yu(n)}var Zu=xde;function Ade(n,e,t){if(!Ir(t))return!1;var r=typeof e;return(r=="number"?Zu(t)&&r0(e,t.length):r=="string"&&e in t)?ca(t[e],n):!1}var pz=Ade;function Rde(n){return fz(function(e,t){var r=-1,i=t.length,o=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(i--,o):void 0,s&&pz(t[0],t[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,o)}return e})}var mz=Rde;var Mde=Object.prototype;function Pde(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||Mde;return n===t}var o0=Pde;function kde(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var gz=kde;var Nde="[object Arguments]";function Ode(n){return so(n)&&aa(n)==Nde}var DR=Ode;var yz=Object.prototype,Fde=yz.hasOwnProperty,Lde=yz.propertyIsEnumerable,Vde=DR(function(){return arguments}())?DR:function(n){return so(n)&&Fde.call(n,"callee")&&!Lde.call(n,"callee")},vp=Vde;function jde(){return!1}var vz=jde;var wz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_z=wz&&typeof module=="object"&&module&&!module.nodeType&&module,Ude=_z&&_z.exports===wz,bz=Ude?oi.Buffer:void 0,Bde=bz?bz.isBuffer:void 0,$de=Bde||vz,s0=$de;var Hde="[object Arguments]",zde="[object Array]",Wde="[object Boolean]",qde="[object Date]",Gde="[object Error]",Kde="[object Function]",Yde="[object Map]",Qde="[object Number]",Xde="[object Object]",Jde="[object RegExp]",Zde="[object Set]",ehe="[object String]",the="[object WeakMap]",nhe="[object ArrayBuffer]",rhe="[object DataView]",ihe="[object Float32Array]",ohe="[object Float64Array]",she="[object Int8Array]",ahe="[object Int16Array]",che="[object Int32Array]",lhe="[object Uint8Array]",uhe="[object Uint8ClampedArray]",dhe="[object Uint16Array]",hhe="[object Uint32Array]",Dt={};Dt[ihe]=Dt[ohe]=Dt[she]=Dt[ahe]=Dt[che]=Dt[lhe]=Dt[uhe]=Dt[dhe]=Dt[hhe]=!0;Dt[Hde]=Dt[zde]=Dt[nhe]=Dt[Wde]=Dt[rhe]=Dt[qde]=Dt[Gde]=Dt[Kde]=Dt[Yde]=Dt[Qde]=Dt[Xde]=Dt[Jde]=Dt[Zde]=Dt[ehe]=Dt[the]=!1;function fhe(n){return so(n)&&i0(n.length)&&!!Dt[aa(n)]}var Ez=fhe;function phe(n){return function(e){return n(e)}}var Iz=phe;var Cz=typeof exports=="object"&&exports&&!exports.nodeType&&exports,_p=Cz&&typeof module=="object"&&module&&!module.nodeType&&module,mhe=_p&&_p.exports===Cz,xR=mhe&&e0.process,ghe=function(){try{var n=_p&&_p.require&&_p.require("util").types;return n||xR&&xR.binding&&xR.binding("util")}catch{}}(),AR=ghe;var Tz=AR&&AR.isTypedArray,yhe=Tz?Iz(Tz):Ez,a0=yhe;var vhe=Object.prototype,_he=vhe.hasOwnProperty;function bhe(n,e){var t=yp(n),r=!t&&vp(n),i=!t&&!r&&s0(n),o=!t&&!r&&!i&&a0(n),s=t||r||i||o,a=s?gz(n.length,String):[],c=a.length;for(var l in n)(e||_he.call(n,l))&&!(s&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||r0(l,c)))&&a.push(l);return a}var Sz=bhe;function whe(n,e){return function(t){return n(e(t))}}var Dz=whe;function Ehe(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var xz=Ehe;var Ihe=Object.prototype,Che=Ihe.hasOwnProperty;function The(n){if(!Ir(n))return xz(n);var e=o0(n),t=[];for(var r in n)r=="constructor"&&(e||!Che.call(n,r))||t.push(r);return t}var Az=The;function She(n){return Zu(n)?Sz(n,!0):Az(n)}var c0=She;var Dhe=Qu(Object,"create"),cs=Dhe;function xhe(){this.__data__=cs?cs(null):{},this.size=0}var Rz=xhe;function Ahe(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var Mz=Ahe;var Rhe="__lodash_hash_undefined__",Mhe=Object.prototype,Phe=Mhe.hasOwnProperty;function khe(n){var e=this.__data__;if(cs){var t=e[n];return t===Rhe?void 0:t}return Phe.call(e,n)?e[n]:void 0}var Pz=khe;var Nhe=Object.prototype,Ohe=Nhe.hasOwnProperty;function Fhe(n){var e=this.__data__;return cs?e[n]!==void 0:Ohe.call(e,n)}var kz=Fhe;var Lhe="__lodash_hash_undefined__";function Vhe(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=cs&&e===void 0?Lhe:e,this}var Nz=Vhe;function ed(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}ed.prototype.clear=Rz;ed.prototype.delete=Mz;ed.prototype.get=Pz;ed.prototype.has=kz;ed.prototype.set=Nz;var RR=ed;function jhe(){this.__data__=[],this.size=0}var Oz=jhe;function Uhe(n,e){for(var t=n.length;t--;)if(ca(n[t][0],e))return t;return-1}var la=Uhe;var Bhe=Array.prototype,$he=Bhe.splice;function Hhe(n){var e=this.__data__,t=la(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():$he.call(e,t,1),--this.size,!0}var Fz=Hhe;function zhe(n){var e=this.__data__,t=la(e,n);return t<0?void 0:e[t][1]}var Lz=zhe;function Whe(n){return la(this.__data__,n)>-1}var Vz=Whe;function qhe(n,e){var t=this.__data__,r=la(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var jz=qhe;function td(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}td.prototype.clear=Oz;td.prototype.delete=Fz;td.prototype.get=Lz;td.prototype.has=Vz;td.prototype.set=jz;var ua=td;var Ghe=Qu(oi,"Map"),l0=Ghe;function Khe(){this.size=0,this.__data__={hash:new RR,map:new(l0||ua),string:new RR}}var Uz=Khe;function Yhe(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var Bz=Yhe;function Qhe(n,e){var t=n.__data__;return Bz(e)?t[typeof e=="string"?"string":"hash"]:t.map}var da=Qhe;function Xhe(n){var e=da(this,n).delete(n);return this.size-=e?1:0,e}var $z=Xhe;function Jhe(n){return da(this,n).get(n)}var Hz=Jhe;function Zhe(n){return da(this,n).has(n)}var zz=Zhe;function efe(n,e){var t=da(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var Wz=efe;function nd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}nd.prototype.clear=Uz;nd.prototype.delete=$z;nd.prototype.get=Hz;nd.prototype.has=zz;nd.prototype.set=Wz;var qz=nd;var tfe=Dz(Object.getPrototypeOf,Object),u0=tfe;var nfe="[object Object]",rfe=Function.prototype,ife=Object.prototype,Gz=rfe.toString,ofe=ife.hasOwnProperty,sfe=Gz.call(Object);function afe(n){if(!so(n)||aa(n)!=nfe)return!1;var e=u0(n);if(e===null)return!0;var t=ofe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&Gz.call(t)==sfe}var Kz=afe;function cfe(){this.__data__=new ua,this.size=0}var Yz=cfe;function lfe(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var Qz=lfe;function ufe(n){return this.__data__.get(n)}var Xz=ufe;function dfe(n){return this.__data__.has(n)}var Jz=dfe;var hfe=200;function ffe(n,e){var t=this.__data__;if(t instanceof ua){var r=t.__data__;if(!l0||r.length<hfe-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new qz(r)}return t.set(n,e),this.size=t.size,this}var Zz=ffe;function rd(n){var e=this.__data__=new ua(n);this.size=e.size}rd.prototype.clear=Yz;rd.prototype.delete=Qz;rd.prototype.get=Xz;rd.prototype.has=Jz;rd.prototype.set=Zz;var eW=rd;var iW=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tW=iW&&typeof module=="object"&&module&&!module.nodeType&&module,pfe=tW&&tW.exports===iW,nW=pfe?oi.Buffer:void 0,rW=nW?nW.allocUnsafe:void 0;function mfe(n,e){if(e)return n.slice();var t=n.length,r=rW?rW(t):new n.constructor(t);return n.copy(r),r}var oW=mfe;var gfe=oi.Uint8Array,MR=gfe;function yfe(n){var e=new n.constructor(n.byteLength);return new MR(e).set(new MR(n)),e}var sW=yfe;function vfe(n,e){var t=e?sW(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var aW=vfe;function _fe(n){return typeof n.constructor=="function"&&!o0(n)?nz(u0(n)):{}}var cW=_fe;function bfe(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[n?a:++i];if(t(o[c],c,o)===!1)break}return e}}var lW=bfe;var wfe=lW(),uW=wfe;function Efe(n,e,t){(t!==void 0&&!ca(n[e],t)||t===void 0&&!(e in n))&&Ju(n,e,t)}var bp=Efe;function Ife(n){return so(n)&&Zu(n)}var dW=Ife;function Cfe(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var wp=Cfe;function Tfe(n){return uz(n,c0(n))}var hW=Tfe;function Sfe(n,e,t,r,i,o,s){var a=wp(n,t),c=wp(e,t),l=s.get(c);if(l){bp(n,t,l);return}var u=o?o(a,c,t+"",n,e,s):void 0,h=u===void 0;if(h){var f=yp(c),p=!f&&s0(c),g=!f&&!p&&a0(c);u=c,f||p||g?yp(a)?u=a:dW(a)?u=iz(a):p?(h=!1,u=oW(c,!0)):g?(h=!1,u=aW(c,!0)):u=[]:Kz(c)||vp(c)?(u=a,vp(a)?u=hW(a):(!Ir(a)||Yu(a))&&(u=cW(c))):h=!1}h&&(s.set(c,u),i(u,c,r,o,s),s.delete(c)),bp(n,t,u)}var fW=Sfe;function pW(n,e,t,r,i){n!==e&&uW(e,function(o,s){if(i||(i=new eW),Ir(o))fW(n,e,s,t,pW,r,i);else{var a=r?r(wp(n,s),o,s+"",n,e,i):void 0;a===void 0&&(a=o),bp(n,s,a)}},c0)}var mW=pW;var Dfe=mz(function(n,e,t){mW(n,e,t)}),d0=Dfe;var gW=new K("Configuration for ngCharts");function yW(...n){return{registerables:[...WH,...n]}}function vW(...n){let e=d0({},...n);return{provide:gW,useValue:e}}var xfe=(()=>{class n{constructor(){this.colorschemesOptions=new fn(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),_W=(()=>{class n{constructor(t,r,i,o){this.zone=r,this.themeService=i,this.type="bar",this.plugins=[],this.chartClick=new Yt,this.chartHover=new Yt,this.subs=[],this.themeOverrides={},o?.registerables&&X_.register(...o.registerables),o?.defaults&&mt.set(o.defaults),this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(ul()).subscribe(s=>this.themeChanged(s)))}ngOnChanges(t){let r=["type"],i=Object.getOwnPropertyNames(t);if(i.some(o=>r.includes(o))||i.every(o=>t[o].isFirstChange()))this.render();else{let o=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,o.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,o.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,o.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new X_(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,r){this.chart&&(this.chart.getDatasetMeta(t).hidden=r,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return d0({onHover:(t,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:r}))},onClick:(t,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}static{this.\u0275fac=function(r){return new(r||n)(De(fr),De(pe),De(xfe),De(gW,8))}}static{this.\u0275dir=dt({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[Bi]})}}return n})();var bW={providers:[vO(),B1({eventCoalescing:!0}),dF(hF),mF(()=>gF(ni.firebaseConfig)),_L(()=>wL()),BL(()=>VL()),UL,iT,H2(()=>z2()),FU(()=>LU()),zU(()=>WU()),sB(()=>aB()),lB(()=>uB()),EB(()=>IB()),RB(()=>MB()),vW(yW())]};var Cr=class n{destroyRef=P(Mo);firestore=P(yc);destroyed=new Ct;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return I(this,null,function*(){let e=yield _D(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),o=parseInt(i.id,10);!isNaN(o)&&o>t&&(t=o)}),(t+1).toString()})}createData(e,t){let r=vD(this.collectionRef,e);return bD(r,t)}updateData(e,t){return bD(vD(this.collectionRef,e),t,{merge:!0})}getDataById(e){return I(this,null,function*(){let t=W2(this.collectionRef,q2("id","==",e)),r=yield _D(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ze=class n extends Cr{collectionPath="/race-configs";collectionRef=Jr(this.firestore,this.collectionPath);raceConfig=Z(void 0);constructor(){super(),this.getAll().pipe(Be()).subscribe(e=>{e.length>0&&this.raceConfig.set(e.at(0))})}updateFuelDurationMinute(e){let t=this.raceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateInterphoneBatteryDurationMinute(e){let t=this.raceConfig();return t?(t.interphoneBatteryDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}updateStartRaceDriverId(e){let t=this.raceConfig();return t?(t.startRaceDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitDriverId(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitDriverId=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitRefueling(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitRefueling=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitTyreChange(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitTyreChange=e,this.updateData(t.id,t)):Promise.resolve()}updateNextPitInterphoneChange(e){let t=this.raceConfig();return t?(t.pitConfig.nextPitInterphoneChange=e,this.updateData(t.id,t)):Promise.resolve()}updateReferenceLapTime(e){let t=this.raceConfig();return t?(t.referenceLapTimeMillisecond=e,this.updateData(t.id,t)):Promise.resolve()}getAll(){return Xr(this.collectionRef).pipe(vn(this.destroyed),te(e=>e.map(t=>t).filter(t=>!t.deleted)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Afe=Math.pow(10,8)*24*60*60*1e3,xFe=-Afe,h0=6048e5,wW=864e5,id=6e4,od=36e5,EW=1e3;var Rfe=3600;var IW=Rfe*24,AFe=IW*7,Mfe=IW*365.2425,Pfe=Mfe/12,RFe=Pfe*3,PR=Symbol.for("constructDateFrom");function Lt(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&PR in n?n[PR](e):n instanceof Date?new n.constructor(e):new Date(e)}function he(n,e){return Lt(e||n,n)}function CW(n,e,t){let r=he(n,t?.in);return isNaN(e)?Lt(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function TW(n,e,t){let r=he(n,t?.in);if(isNaN(e))return Lt(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),o=Lt(t?.in||n,r.getTime());o.setMonth(r.getMonth()+e+1,0);let s=o.getDate();return i>=s?o:(r.setFullYear(o.getFullYear(),o.getMonth(),i),r)}function sd(n,e,t){let{years:r=0,months:i=0,weeks:o=0,days:s=0,hours:a=0,minutes:c=0,seconds:l=0}=e,u=he(n,t?.in),h=i||r?TW(u,i+r*12):u,f=s||o?CW(h,s+o*7):h,p=c+a*60,v=(l+p*60)*1e3;return Lt(t?.in||n,+f+v)}function Vr(n,e,t){return Lt(t?.in||n,+he(n)+e)}function ls(n,e,t){return Vr(n,e*od,t)}var kfe={};function ha(){return kfe}function us(n,e){let t=ha(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,i=he(n,e?.in),o=i.getDay(),s=(o<r?7:0)+o-r;return i.setDate(i.getDate()-s),i.setHours(0,0,0,0),i}function kc(n,e){return us(n,fe(q({},e),{weekStartsOn:1}))}function f0(n,e){let t=he(n,e?.in),r=t.getFullYear(),i=Lt(t,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);let o=kc(i),s=Lt(t,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);let a=kc(s);return t.getTime()>=o.getTime()?r+1:t.getTime()>=a.getTime()?r:r-1}function kR(n){let e=he(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Yn(n,...e){let t=Lt.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function NR(n,e){let t=he(n,e?.in);return t.setHours(0,0,0,0),t}function p0(n,e,t){let[r,i]=Yn(t?.in,n,e),o=NR(r),s=NR(i),a=+o-kR(o),c=+s-kR(s);return Math.round((a-c)/wW)}function SW(n,e){let t=f0(n,e),r=Lt(e?.in||n,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),kc(r)}function ds(n,e,t){let r=he(n,t?.in);return r.setTime(r.getTime()+e*id),r}function ad(n,e,t){return Vr(n,e*1e3,t)}function Nc(n,e){let t=+he(n)-+he(e);return t<0?-1:t>0?1:t}function DW(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function xW(n){return!(!DW(n)&&typeof n!="number"||isNaN(+he(n)))}function AW(n,e,t){let[r,i]=Yn(t?.in,n,e),o=r.getFullYear()-i.getFullYear(),s=r.getMonth()-i.getMonth();return o*12+s}function RW(n,e,t){let[r,i]=Yn(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function PW(n,e,t){let[r,i]=Yn(t?.in,n,e),o=MW(r,i),s=Math.abs(p0(r,i));r.setDate(r.getDate()-o*s);let a=+(MW(r,i)===-o),c=o*(s-a);return c===0?0:c}function MW(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function cd(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function kW(n,e,t){let[r,i]=Yn(t?.in,n,e),o=(+r-+i)/od;return cd(t?.roundingMethod)(o)}function hs(n,e){return+he(n)-+he(e)}function ld(n,e,t){let r=hs(n,e)/id;return cd(t?.roundingMethod)(r)}function NW(n,e){let t=he(n,e?.in);return t.setHours(23,59,59,999),t}function OW(n,e){let t=he(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function FW(n,e){let t=he(n,e?.in);return+NW(t,e)==+OW(t,e)}function LW(n,e,t){let[r,i,o]=Yn(t?.in,n,n,e),s=Nc(i,o),a=Math.abs(AW(i,o));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-s*a);let c=Nc(i,o)===-s;FW(r)&&a===1&&Nc(r,o)===1&&(c=!1);let l=s*(a-+c);return l===0?0:l}function m0(n,e,t){let r=hs(n,e)/1e3;return cd(t?.roundingMethod)(r)}function VW(n,e,t){let[r,i]=Yn(t?.in,n,e),o=Nc(r,i),s=Math.abs(RW(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=Nc(r,i)===-o,c=o*(s-+a);return c===0?0:c}function jW(n,e){let[t,r]=Yn(n,e.start,e.end);return{start:t,end:r}}function UW(n,e){let t=he(n,e?.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}var Nfe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},BW=(n,e,t)=>{let r,i=Nfe[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function g0(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var Ofe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ffe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Lfe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},$W={date:g0({formats:Ofe,defaultWidth:"full"}),time:g0({formats:Ffe,defaultWidth:"full"}),dateTime:g0({formats:Lfe,defaultWidth:"full"})};var Vfe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},HW=(n,e,t,r)=>Vfe[n];function ud(n){return(e,t)=>{let r=t?.context?String(t.context):"standalone",i;if(r==="formatting"&&n.formattingValues){let s=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{let s=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}let o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}var jfe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ufe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Bfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},$fe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Hfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Wfe=(n,e)=>{let t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},zW={ordinalNumber:Wfe,era:ud({values:jfe,defaultWidth:"wide"}),quarter:ud({values:Ufe,defaultWidth:"wide",argumentCallback:n=>n-1}),month:ud({values:Bfe,defaultWidth:"wide"}),day:ud({values:$fe,defaultWidth:"wide"}),dayPeriod:ud({values:Hfe,defaultWidth:"wide",formattingValues:zfe,defaultFormattingWidth:"wide"})};function dd(n){return(e,t={})=>{let r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;let s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?Gfe(a,h=>h.test(s)):qfe(a,h=>h.test(s)),l;l=n.valueCallback?n.valueCallback(c):c,l=t.valueCallback?t.valueCallback(l):l;let u=e.slice(s.length);return{value:l,rest:u}}}function qfe(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function Gfe(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function WW(n){return(e,t={})=>{let r=e.match(n.matchPattern);if(!r)return null;let i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;let a=e.slice(i.length);return{value:s,rest:a}}}var Kfe=/^(\d+)(th|st|nd|rd)?/i,Yfe=/\d+/i,Qfe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xfe={any:[/^b/i,/^(a|c)/i]},Jfe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Zfe={any:[/1/i,/2/i,/3/i,/4/i]},epe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},tpe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},npe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},rpe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ipe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ope={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},qW={ordinalNumber:WW({matchPattern:Kfe,parsePattern:Yfe,valueCallback:n=>parseInt(n,10)}),era:dd({matchPatterns:Qfe,defaultMatchWidth:"wide",parsePatterns:Xfe,defaultParseWidth:"any"}),quarter:dd({matchPatterns:Jfe,defaultMatchWidth:"wide",parsePatterns:Zfe,defaultParseWidth:"any",valueCallback:n=>n+1}),month:dd({matchPatterns:epe,defaultMatchWidth:"wide",parsePatterns:tpe,defaultParseWidth:"any"}),day:dd({matchPatterns:npe,defaultMatchWidth:"wide",parsePatterns:rpe,defaultParseWidth:"any"}),dayPeriod:dd({matchPatterns:ipe,defaultMatchWidth:"any",parsePatterns:ope,defaultParseWidth:"any"})};var OR={code:"en-US",formatDistance:BW,formatLong:$W,formatRelative:HW,localize:zW,match:qW,options:{weekStartsOn:0,firstWeekContainsDate:1}};function GW(n,e){let t=he(n,e?.in);return p0(t,UW(t))+1}function KW(n,e){let t=he(n,e?.in),r=+kc(t)-+SW(t);return Math.round(r/h0)+1}function y0(n,e){let t=he(n,e?.in),r=t.getFullYear(),i=ha(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,s=Lt(e?.in||n,0);s.setFullYear(r+1,0,o),s.setHours(0,0,0,0);let a=us(s,e),c=Lt(e?.in||n,0);c.setFullYear(r,0,o),c.setHours(0,0,0,0);let l=us(c,e);return+t>=+a?r+1:+t>=+l?r:r-1}function YW(n,e){let t=ha(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,i=y0(n,e),o=Lt(e?.in||n,0);return o.setFullYear(i,0,r),o.setHours(0,0,0,0),us(o,e)}function QW(n,e){let t=he(n,e?.in),r=+us(t,e)-+YW(t,e);return Math.round(r/h0)+1}function nt(n,e){let t=n<0?"-":"",r=Math.abs(n).toString().padStart(e,"0");return t+r}var fs={y(n,e){let t=n.getFullYear(),r=t>0?t:1-t;return nt(e==="yy"?r%100:r,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):nt(t+1,2)},d(n,e){return nt(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return nt(n.getHours()%12||12,e.length)},H(n,e){return nt(n.getHours(),e.length)},m(n,e){return nt(n.getMinutes(),e.length)},s(n,e){return nt(n.getSeconds(),e.length)},S(n,e){let t=e.length,r=n.getMilliseconds(),i=Math.trunc(r*Math.pow(10,t-3));return nt(i,e.length)}};var hd={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},FR={G:function(n,e,t){let r=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let r=n.getFullYear(),i=r>0?r:1-r;return t.ordinalNumber(i,{unit:"year"})}return fs.y(n,e)},Y:function(n,e,t,r){let i=y0(n,r),o=i>0?i:1-i;if(e==="YY"){let s=o%100;return nt(s,2)}return e==="Yo"?t.ordinalNumber(o,{unit:"year"}):nt(o,e.length)},R:function(n,e){let t=f0(n);return nt(t,e.length)},u:function(n,e){let t=n.getFullYear();return nt(t,e.length)},Q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return nt(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(n,e,t){let r=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return nt(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(n,e,t){let r=n.getMonth();switch(e){case"M":case"MM":return fs.M(n,e);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(n,e,t){let r=n.getMonth();switch(e){case"L":return String(r+1);case"LL":return nt(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(n,e,t,r){let i=QW(n,r);return e==="wo"?t.ordinalNumber(i,{unit:"week"}):nt(i,e.length)},I:function(n,e,t){let r=KW(n);return e==="Io"?t.ordinalNumber(r,{unit:"week"}):nt(r,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):fs.d(n,e)},D:function(n,e,t){let r=GW(n);return e==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):nt(r,e.length)},E:function(n,e,t){let r=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(o);case"ee":return nt(o,2);case"eo":return t.ordinalNumber(o,{unit:"day"});case"eee":return t.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(i,{width:"short",context:"formatting"});case"eeee":default:return t.day(i,{width:"wide",context:"formatting"})}},c:function(n,e,t,r){let i=n.getDay(),o=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(o);case"cc":return nt(o,e.length);case"co":return t.ordinalNumber(o,{unit:"day"});case"ccc":return t.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(i,{width:"narrow",context:"standalone"});case"cccccc":return t.day(i,{width:"short",context:"standalone"});case"cccc":default:return t.day(i,{width:"wide",context:"standalone"})}},i:function(n,e,t){let r=n.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return nt(i,e.length);case"io":return t.ordinalNumber(i,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(n,e,t){let i=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(n,e,t){let r=n.getHours(),i;switch(r===12?i=hd.noon:r===0?i=hd.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(n,e,t){let r=n.getHours(),i;switch(r>=17?i=hd.evening:r>=12?i=hd.afternoon:r>=4?i=hd.morning:i=hd.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let r=n.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return fs.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):fs.H(n,e)},K:function(n,e,t){let r=n.getHours()%12;return e==="Ko"?t.ordinalNumber(r,{unit:"hour"}):nt(r,e.length)},k:function(n,e,t){let r=n.getHours();return r===0&&(r=24),e==="ko"?t.ordinalNumber(r,{unit:"hour"}):nt(r,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):fs.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):fs.s(n,e)},S:function(n,e){return fs.S(n,e)},X:function(n,e,t){let r=n.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return JW(r);case"XXXX":case"XX":return Oc(r);case"XXXXX":case"XXX":default:return Oc(r,":")}},x:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"x":return JW(r);case"xxxx":case"xx":return Oc(r);case"xxxxx":case"xxx":default:return Oc(r,":")}},O:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+XW(r,":");case"OOOO":default:return"GMT"+Oc(r,":")}},z:function(n,e,t){let r=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+XW(r,":");case"zzzz":default:return"GMT"+Oc(r,":")}},t:function(n,e,t){let r=Math.trunc(+n/1e3);return nt(r,e.length)},T:function(n,e,t){return nt(+n,e.length)}};function XW(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=Math.trunc(r/60),o=r%60;return o===0?t+String(i):t+String(i)+e+nt(o,2)}function JW(n,e){return n%60===0?(n>0?"-":"+")+nt(Math.abs(n)/60,2):Oc(n,e)}function Oc(n,e=""){let t=n>0?"-":"+",r=Math.abs(n),i=nt(Math.trunc(r/60),2),o=nt(r%60,2);return t+i+e+o}var ZW=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},eq=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},spe=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],r=t[1],i=t[2];if(!i)return ZW(n,e);let o;switch(r){case"P":o=e.dateTime({width:"short"});break;case"PP":o=e.dateTime({width:"medium"});break;case"PPP":o=e.dateTime({width:"long"});break;case"PPPP":default:o=e.dateTime({width:"full"});break}return o.replace("{{date}}",ZW(r,e)).replace("{{time}}",eq(i,e))},tq={p:eq,P:spe};var ape=/^D+$/,cpe=/^Y+$/,lpe=["D","DD","YY","YYYY"];function nq(n){return ape.test(n)}function rq(n){return cpe.test(n)}function iq(n,e,t){let r=upe(n,e,t);if(console.warn(r),lpe.includes(n))throw new RangeError(r)}function upe(n,e,t){let r=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var dpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,hpe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fpe=/^'([^]*?)'?$/,ppe=/''/g,mpe=/[a-zA-Z]/;function Ri(n,e,t){let r=ha(),i=t?.locale??r.locale??OR,o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=he(n,t?.in);if(!xW(a))throw new RangeError("Invalid time value");let c=e.match(hpe).map(u=>{let h=u[0];if(h==="p"||h==="P"){let f=tq[h];return f(u,i.formatLong)}return u}).join("").match(dpe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};let h=u[0];if(h==="'")return{isToken:!1,value:gpe(u)};if(FR[h])return{isToken:!0,value:u};if(h.match(mpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});i.localize.preprocessor&&(c=i.localize.preprocessor(a,c));let l={firstWeekContainsDate:o,weekStartsOn:s,locale:i};return c.map(u=>{if(!u.isToken)return u.value;let h=u.value;(!t?.useAdditionalWeekYearTokens&&rq(h)||!t?.useAdditionalDayOfYearTokens&&nq(h))&&iq(h,e,String(n));let f=FR[h[0]];return f(a,h,i.localize,l)}).join("")}function gpe(n){let e=n.match(fpe);return e?e[1].replace(ppe,"'"):n}function LR(n){return Math.trunc(n*od)}function VR(n,e){let{start:t,end:r}=jW(e?.in,n),i={},o=VW(r,t);o&&(i.years=o);let s=sd(t,{years:i.years}),a=LW(r,s);a&&(i.months=a);let c=sd(s,{months:i.months}),l=PW(r,c);l&&(i.days=l);let u=sd(c,{days:i.days}),h=kW(r,u);h&&(i.hours=h);let f=sd(u,{hours:i.hours}),p=ld(r,f);p&&(i.minutes=p);let g=sd(f,{minutes:i.minutes}),v=m0(r,g);return v&&(i.seconds=v),i}function v0(n,e){return+he(n)>+he(e)}function oq(n,e){return+he(n)<+he(e)}function _0(n){return Math.trunc(n*id)}function fd(n){return n*EW}function sq(n,e,t){return ds(n,-e,t)}var at=class n extends Cr{httpClient=P(Dh);collectionPath="/races";collectionRef=Jr(this.firestore,this.collectionPath);raceConfigService=P(Ze);activeRace=Z(void 0);willEndRaceDate=Z(void 0);constructor(){super(),xe({races:this.getAll(),raceConfig:se(this.raceConfigService.raceConfig)}).pipe(Be(),te(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e),i=this.getWillEndRaceDate(r,t);return{activeRace:r,willEndRaceDate:i}}return{activeRace:void 0,willEndRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.willEndRaceDate.set(e.willEndRaceDate)})}create(e){return I(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=parseInt(yield this.generateNextId()),yield this.createData(e.id.toString(),e),e)})}update(e){return this.updateData(e.id.toString(),e)}getAll(){return Xr(this.collectionRef).pipe(vn(this.destroyed),te(e=>e.map(t=>t).filter(t=>!t.deleted)))}getActiveRace(e){return e.sort((r,i)=>i.startedAt.toDate().getTime()-r.startedAt.toDate().getTime()).at(0)}getWillEndRaceDate(e,t){if(e!==void 0)return e.endedAt!==null?e.endedAt.toDate():ls(e.startedAt.toDate(),t.durationHour)}startRace(e){return this.httpClient.post(`${ni.baseUrl}/race-management/start`,{startedAt:e}).pipe(te(t=>this.deserialize(t)))}endRace(e,t){return this.httpClient.post(`${ni.baseUrl}/race-management/end/${e}`,{endedAt:t}).pipe(te(r=>this.deserialize(r)))}deserialize(e){return{deleted:!1,endedAt:e.endedAt,id:e.id,startedAt:e.startedAt}}deserializeTimestamp(e){return new Rt(e.seconds,e.nanoseconds)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function Tr(n,e){if(!n||!e)return"--:--:--";let t=VR({end:e,start:n});return b0(t)}function ps(n){if(!n)return"--:--:--";let e=VR({end:n,start:new Date});return b0(e)}function Mt(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return b0(t)}function aq(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return b0(t)}function cq(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return ype(r,t)}function ype(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:---":[Ep(n.minutes),Ep(n.seconds),vpe(e)].join(":")}function b0(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"--:--:--":[Ep(n.hours),Ep(n.minutes),Ep(n.seconds)].join(":")}function Ep(n){return n?n<10?`0${n}`:`${n}`:"00"}function vpe(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var an=class n extends Cr{collectionPath="/pits";collectionRef=Jr(this.firestore,this.collectionPath);raceService=P(at);raceConfigService=P(Ze);activePit=Z(void 0);activePitRemainingMilliseconds=Z(0);lastRefuelPit=Z(void 0);lastInterphoneChangePit=Z(void 0);pits=Z([]);completedDriverChanges=Z(0);lastPit=Z(void 0);remainingDriverChanges=Z(0);constructor(){super(),xe({pits:this.getRacePits(),activeRaceConfig:se(this.raceConfigService.raceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastInterphoneChangePit.set(this.getLastInterphoneChangePit(e)),this.lastPit.set(this.getLastPit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))})}create(e){return I(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getRacePits(){return xe({pits:Xr(this.collectionRef),activeRace:se(this.raceService.activeRace)}).pipe(vn(this.destroyed),te(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id.toString()).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()):[]))}getActivePit(e){for(let t of e)if(!t.exitTime)return t}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return ad(r.entryTime.toDate(),t.pitConfig.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastInterphoneChangePit(e){return e.filter(r=>r.interphoneChange&&r.exitTime).sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}getLastPit(e){return e.length===0?void 0:e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime()).at(0)}calculateCompletedDriverChanges(e){return e.reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.driverConfig.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var ao=class n{raceService=P(at);raceConfigService=P(Ze);pitService=P(an);openingTime=Z(void 0);closingTime=Z(void 0);tyreChangeWindowOpen=Z(!1);remainingTyreChange=Z(0);constructor(){xe({pits:se(this.pitService.pits),race:se(this.raceService.activeRace),raceConfig:se(this.raceConfigService.raceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({pits:e,race:t,raceConfig:r})=>{t&&r?(this.openingTime.set(ls(t.startedAt.toDate(),r.tyreConfig.startTyreChangeWindowHour)),this.closingTime.set(ls(t.startedAt.toDate(),r.tyreConfig.startTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.tyreConfig.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var co=class n{raceService=P(at);pitService=P(an);raceConfigService=P(Ze);tyreService=P(ao);optimizedStint=Z(void 0);constructor(){xe({activeRace:se(this.raceService.activeRace),willEndRaceDate:se(this.raceService.willEndRaceDate),activeRaceConfig:se(this.raceConfigService.raceConfig),remainingDriverChanges:se(this.pitService.remainingDriverChanges),remainingTyreChange:se(this.tyreService.remainingTyreChange),lastPit:se(this.pitService.lastPit),ping:Tt(1e3)}).pipe(Be()).subscribe(({activeRace:e,willEndRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,remainingTyreChange:o,lastPit:s})=>{r?this.optimizedStint.set(this.calculateOptimizedStint(e,e?e.startedAt.toDate():new Date,t||ls(new Date,r.durationHour),r,i,o,s)):this.optimizedStint.set(void 0)})}calculateOptimizedStint(e,t,r,i,o,s,a){let c=new Date;if(c>=r)return;let l=this.calculateRemainingPitTime(i.pitConfig,o,s),u=hs(r,c)-l,h;a&&(a.exitTime?h=a.exitTime.toDate():h=ad(a.entryTime.toDate(),i.pitConfig.minPitSeconds));let g=(hs(r,h||t)-l)/(o+1),v=0,_=0;return o>0&&e!==void 0&&(v=u/o,_=Math.floor(v/i.referenceLapTimeMillisecond)),{avgStintMillisecondsTime:g,laps:Math.floor(g/i.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:v,lapsIfDriverChangeNow:_}}calculateRemainingPitTime(e,t,r){let i=t-r,o=fd(e.minPitSeconds*i),s=fd(e.minPitWithTyreChangeSeconds*r);return o+s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var cn=class n extends Cr{collectionPath="/stints";collectionRef=Jr(this.firestore,this.collectionPath);raceService=P(at);raceConfigService=P(Ze);stintOptimizerService=P(co);activeRace=this.raceService.activeRace;stints=Z([]);activeStint=Z(void 0);activeStintTimeOnTrack=Z(0);activeStintLaps=Z(0);activeStintRemainingTimeOnTrack=Z(0);activeStintRemainingLaps=Z(0);activeStintGainedTimeOnTrack=Z(0);activeStintGainedLaps=Z(0);constructor(){super(),xe({stints:this.getRaceStints(),activeRaceConfig:se(this.raceConfigService.raceConfig),optimizedStint:se(this.stintOptimizerService.optimizedStint),ping:Tt(1e3)}).pipe(Be()).subscribe(({stints:e,activeRaceConfig:t,optimizedStint:r})=>{this.stints.set(e),this.activeStint.set(this.getActiveStint(e)),this.activeStintTimeOnTrack.set(this.calculateActiveStintTimeOnTrack(this.activeStint())),this.activeStintLaps.set(this.calculateActiveStintLaps(this.activeStintTimeOnTrack(),t)),this.activeStintRemainingTimeOnTrack.set(this.calculateActiveStintRemainingTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintRemainingLaps.set(this.calculateActiveStintRemainingLaps(this.activeStintLaps(),r)),this.activeStintGainedTimeOnTrack.set(this.calculateActiveStintGainedTimeOnTrack(this.activeStintTimeOnTrack(),r)),this.activeStintGainedLaps.set(this.calculateActiveStintGainedLaps(this.activeStintLaps(),r))})}create(e){return I(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return I(this,null,function*(){return yield this.updateData(e.id,e),e})}getRaceStints(){return xe({stints:Xr(this.collectionRef),activeRace:se(this.activeRace)}).pipe(vn(this.destroyed),te(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id.toString()).sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime()):[]))}getActiveStint(e){for(let t of e)if(!t.endDate)return t}calculateActiveStintTimeOnTrack(e){return e?new Date().getTime()-e.startDate.toDate().getTime():0}calculateActiveStintLaps(e,t){return e>=0&&t?Math.floor(e/t.referenceLapTimeMillisecond):0}calculateActiveStintRemainingTimeOnTrack(e,t){return e>=0&&t?t.avgStintMillisecondsTime-e:0}calculateActiveStintRemainingLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r>0?r:0}calculateActiveStintGainedTimeOnTrack(e,t){let r=0;return e>=0&&t&&(r=t.avgStintMillisecondsTime-e),r<0?Math.abs(r):0}calculateActiveStintGainedLaps(e,t){let r=0;return e>=0&&t&&(r=t.laps-e),r<0?Math.abs(r):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var fa=class n{raceService=P(at);stintService=P(cn);pitService=P(an);stintOptimizerService=P(co);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;optimizedStintMilliseconds=Ie(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.avgStintMillisecondsTime:0});startRace(e){return I(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id.toString(),e,r.startedAt))})}endRace(){return I(this,null,function*(){let e=this.activeRace();if(e){let t=Rt.now();e.endedAt=t,yield this.raceService.update(e),yield this.closeActiveStint(t),yield this.closeActivePit(t)}})}pitIn(e,t,r,i){return I(this,null,function*(){let o=this.activeRace(),s=this.activeStint();if(o&&s){let a=this.createPit(s.driverId,e,o.id.toString(),t,r,i),c=yield this.pitService.create(a);yield this.closeActiveStint(c.entryTime)}})}pitOut(){return I(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Rt.now();yield this.closeActivePit(r),yield this.startStint(e.id.toString(),t.exitDriverId,r)}})}startStint(e,t,r){return I(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return I(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return I(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:1,startedAt:Rt.now(),endedAt:null,deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,optimumMilliseconds:this.optimizedStintMilliseconds(),raceId:e,startDate:r}}createPit(e,t,r,i,o,s){return{id:"1",entryDriverId:e,entryTime:Rt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:o,interphoneChange:s,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var vq=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(De(ko),De(fr))};static \u0275dir=dt({type:n})}return n})(),Ap=(()=>{class n extends vq{static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,features:[pr]})}return n})(),vd=new K(""),_pe={provide:vd,useExisting:Hr(()=>BR),multi:!0},BR=(()=>{class n extends Ap{writeValue(t){this.setProperty("checked",t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&ie("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[zi([_pe]),pr]})}return n})(),bpe={provide:vd,useExisting:Hr(()=>pa),multi:!0};function wpe(){let n=Fo()?Fo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var Epe=new K(""),pa=(()=>{class n extends vq{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!wpe())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(De(ko),De(fr),De(Epe,8))};static \u0275dir=dt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&ie("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[zi([bpe]),pr]})}return n})();function jR(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var x0=new K(""),_q=new K("");function Ipe(n){return e=>{if(jR(e.value)||jR(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function Cpe(n){return jR(n.value)?{required:!0}:null}function lq(n){return null}function bq(n){return n!=null}function wq(n){return Ha(n)?yt(n):n}function Eq(n){let e={};return n.forEach(t=>{e=t!=null?q(q({},e),t):e}),Object.keys(e).length===0?null:e}function Iq(n,e){return e.map(t=>t(n))}function Tpe(n){return!n.validate}function Cq(n){return n.map(e=>Tpe(e)?e:t=>e.validate(t))}function Spe(n){if(!n)return null;let e=n.filter(bq);return e.length==0?null:function(t){return Eq(Iq(t,e))}}function $R(n){return n!=null?Spe(Cq(n)):null}function Dpe(n){if(!n)return null;let e=n.filter(bq);return e.length==0?null:function(t){let r=Iq(t,e).map(wq);return tw(r).pipe(te(Eq))}}function HR(n){return n!=null?Dpe(Cq(n)):null}function uq(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function xpe(n){return n._rawValidators}function Ape(n){return n._rawAsyncValidators}function UR(n){return n?Array.isArray(n)?n:[n]:[]}function E0(n,e){return Array.isArray(n)?n.includes(e):n===e}function dq(n,e){let t=UR(e);return UR(n).forEach(i=>{E0(t,i)||t.push(i)}),t}function hq(n,e){return UR(e).filter(t=>!E0(n,t))}var I0=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$R(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=HR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},gd=class extends I0{name;get formDirective(){return null}get path(){return null}},xp=class extends I0{_parent=null;name=null;valueAccessor=null},C0=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Rpe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},UUe=fe(q({},Rpe),{"[class.ng-submitted]":"isSubmitted"}),lo=(()=>{class n extends C0{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(De(xp,2))};static \u0275dir=dt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Bg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[pr]})}return n})(),uo=(()=>{class n extends C0{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(De(gd,10))};static \u0275dir=dt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Bg("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[pr]})}return n})();var Ip="VALID",w0="INVALID",pd="PENDING",Cp="DISABLED",yd=class{},T0=class extends yd{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Sp=class extends yd{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Dp=class extends yd{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},md=class extends yd{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function Tq(n){return(A0(n)?n.validators:n)||null}function Mpe(n){return Array.isArray(n)?$R(n):n||null}function Sq(n,e){return(A0(e)?e.asyncValidators:n)||null}function Ppe(n){return Array.isArray(n)?HR(n):n||null}function A0(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function kpe(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new oe(1e3,"");if(!r[t])throw new oe(1001,"")}function Npe(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new oe(1002,"")})}var S0=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return qr(this.statusReactive)}set status(e){qr(()=>this.statusReactive.set(e))}_status=Ie(()=>this.statusReactive());statusReactive=Z(void 0);get valid(){return this.status===Ip}get invalid(){return this.status===w0}get pending(){return this.status==pd}get disabled(){return this.status===Cp}get enabled(){return this.status!==Cp}errors;get pristine(){return qr(this.pristineReactive)}set pristine(e){qr(()=>this.pristineReactive.set(e))}_pristine=Ie(()=>this.pristineReactive());pristineReactive=Z(!0);get dirty(){return!this.pristine}get touched(){return qr(this.touchedReactive)}set touched(e){qr(()=>this.touchedReactive.set(e))}_touched=Ie(()=>this.touchedReactive());touchedReactive=Z(!1);get untouched(){return!this.touched}_events=new Ct;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hq(e,this._rawAsyncValidators))}hasValidator(e){return E0(this._rawValidators,e)}hasAsyncValidator(e){return E0(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Dp(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Dp(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Sp(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Sp(!0,r))}markAsPending(e={}){this.status=pd;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new md(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cp,this.errors=null,this._forEachChild(i=>{i.disable(fe(q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new T0(this.value,r)),this._events.next(new md(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ip,this._forEachChild(r=>{r.enable(fe(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ip||this.status===pd)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new T0(this.value,t)),this._events.next(new md(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cp:Ip}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=pd,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=wq(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new md(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Yt,this.statusChanges=new Yt}_calculateStatus(){return this._allControlsDisabled()?Cp:this.errors?w0:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pd)?pd:this._anyControlsHaveStatus(w0)?w0:Ip}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Sp(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Dp(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){A0(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Mpe(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Ppe(this._rawAsyncValidators)}},D0=class extends S0{constructor(e,t,r){super(Tq(t),Sq(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Npe(this,!0,e),Object.keys(e).forEach(r=>{kpe(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var R0=new K("",{providedIn:"root",factory:()=>M0}),M0="always";function Ope(n,e){return[...e.path,n]}function Dq(n,e,t=M0){xq(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),Lpe(n,e),jpe(n,e),Vpe(n,e),Fpe(n,e)}function fq(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fpe(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function xq(n,e){let t=xpe(n);e.validator!==null?n.setValidators(uq(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Ape(n);e.asyncValidator!==null?n.setAsyncValidators(uq(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();fq(e._rawValidators,i),fq(e._rawAsyncValidators,i)}function Lpe(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Aq(n,e)})}function Vpe(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Aq(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Aq(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function jpe(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Upe(n,e){n==null,xq(n,e)}function Bpe(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $pe(n){return Object.getPrototypeOf(n.constructor)===Ap}function Hpe(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function zpe(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===pa?t=o:$pe(o)?r=o:i=o}),i||r||t||null}var Wpe={provide:gd,useExisting:Hr(()=>Mi)},Tp=Promise.resolve(),Mi=(()=>{class n extends gd{callSetDisabledState;get submitted(){return qr(this.submittedReactive)}_submitted=Ie(()=>this.submittedReactive());submittedReactive=Z(!1);_directives=new Set;form;ngSubmit=new Yt;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new D0({},$R(t),HR(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Tp.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Dq(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Tp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Tp.then(()=>{let r=this._findContainer(t.path),i=new D0({});Upe(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Tp.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Tp.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Hpe(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(De(x0,10),De(_q,10),De(R0,8))};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&ie("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[zi([Wpe]),pr]})}return n})();function pq(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function mq(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var qpe=class extends S0{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(Tq(t),Sq(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),A0(t)&&(t.nonNullable||t.initialValueIsDefault)&&(mq(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pq(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pq(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){mq(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Gpe={provide:xp,useExisting:Hr(()=>Pi)},gq=Promise.resolve(),Pi=(()=>{class n extends xp{_changeDetectorRef;callSetDisabledState;control=new qpe;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Yt;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=zpe(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Bpe(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Dq(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){gq.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Eh(r);gq.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Ope(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(De(gd,9),De(x0,10),De(_q,10),De(vd,10),De(Os,8),De(R0,8))};static \u0275dir=dt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[zi([Gpe]),pr,Bi]})}return n})(),ho=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),Kpe={provide:vd,useExisting:Hr(()=>Fc),multi:!0},Fc=(()=>{class n extends Ap{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&ie("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[zi([Kpe]),pr]})}return n})();var Ype=new K("");var Qpe={provide:vd,useExisting:Hr(()=>_d),multi:!0};function Rq(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Xpe(n){return n.split(":")[0]}var _d=(()=>{class n extends Ap{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=Rq(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=Xpe(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&ie("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[zi([Qpe]),pr]})}return n})(),P0=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Rq(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(De(fr),De(ko),De(_d,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),Jpe={provide:vd,useExisting:Hr(()=>Mq),multi:!0};function yq(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Zpe(n){return n.split(":")[0]}var Mq=(()=>{class n extends Ap{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Zpe(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&ie("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[zi([Jpe]),pr]})}return n})(),k0=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(yq(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(yq(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(De(fr),De(ko),De(Mq,9))};static \u0275dir=dt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function eme(n){return typeof n=="number"?n:parseFloat(n)}var Pq=(()=>{class n{_validator=lq;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):lq,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=dt({type:n,features:[Bi]})}return n})();var tme={provide:x0,useExisting:Hr(()=>Lc),multi:!0},Lc=(()=>{class n extends Pq{min;inputName="min";normalizeInput=t=>eme(t);createValidator=t=>Ipe(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&wh("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[zi([tme]),pr]})}return n})(),nme={provide:x0,useExisting:Hr(()=>Vc),multi:!0};var Vc=(()=>{class n extends Pq{required;inputName="required";normalizeInput=Eh;createValidator=t=>Cpe;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=pi(n)))(i||n)}})();static \u0275dir=dt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&wh("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[zi([nme]),pr]})}return n})();var kq=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=No({type:n});static \u0275inj=xo({})}return n})();var fo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:R0,useValue:t.callSetDisabledState??M0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=No({type:n});static \u0275inj=xo({imports:[kq]})}return n})(),N0=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ype,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:R0,useValue:t.callSetDisabledState??M0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=No({type:n});static \u0275inj=xo({imports:[kq]})}return n})();var O0=class n extends Cr{collectionPath="/lap-updates";collectionRef=Jr(this.firestore,this.collectionPath);raceService=P(at);lastLapUpdates=Z(void 0);constructor(){super(),xe({lapUpdates:this.getLapUpdates()}).pipe(Be()).subscribe(({lapUpdates:e})=>{this.areLapUpdatesEqual(this.lastLapUpdates(),e)||this.lastLapUpdates.set(e)})}areLapUpdatesEqual(e,t){if(e===t)return!0;if(!e||!t)return!1;let r=e.raceId===t.raceId,i=e.updatedIds.length===t.updatedIds.length&&e.updatedIds.every((a,c)=>a===t.updatedIds[c]),o=e.updatedAt.toMillis()===t.updatedAt.toMillis(),s=e.deleted===t.deleted;return r&&i&&o&&s}getLapUpdates(){return xe({lapUpdates:Xr(this.collectionRef),activeRace:se(this.raceService.activeRace)}).pipe(vn(this.destroyed),te(({lapUpdates:e,activeRace:t})=>e.at(0)))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var ma=class n{httpClient=P(Dh);raceService=P(at);lapUpdatesService=P(O0);laps=Z(new Map);constructor(){xe({lastLapUpdates:se(this.lapUpdatesService.lastLapUpdates),activeRace:se(this.raceService.activeRace)}).pipe(Be(),pn(({lastLapUpdates:e,activeRace:t})=>e?this.getRaceLaps(1,e.updatedIds).pipe(te(r=>({fetchedLaps:r}))):[])).subscribe(({fetchedLaps:e})=>{console.log(e),this.laps.set(this.mergeLaps(this.laps(),e)),console.log(this.laps())})}getRaceLaps(e,t){return this.httpClient.post(`${ni.baseUrl}/lap-management/laps`,{raceId:e,lapIds:t}).pipe(te(r=>r.map(i=>this.deserialize(i))))}checkMissingLaps(){let e=this.raceService.activeRace();if(e){let r=[...this.laps().keys()];this.getMissingLaps(e.id,r).subscribe(i=>{this.laps.set(this.mergeLaps(this.laps(),i))})}let t=[...this.laps().keys()];this.getMissingLaps(1,t).subscribe(r=>{this.laps.set(this.mergeLaps(this.laps(),r))})}mergeLaps(e,t){let r=new Map(this.laps());return t.forEach(i=>{r.set(i.id,i)}),r}getMissingLaps(e,t){return this.httpClient.post(`${ni.baseUrl}/lap-management/missing-laps`,{raceId:e,currentLapIds:t}).pipe(te(r=>r.map(i=>this.deserialize(i))))}serialize(e){return{}}deserialize(e){return{driverName:e.driverName,lapMilliseconds:e.lastLapMilliseconds,lapNumber:e.lapNumber,pitStop:e.pitStop,raceNumber:e.raceNumber,deleted:e.deleted,driverId:e.driverId,id:e.id,raceId:e.raceId}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var si=class n extends Cr{collectionPath="/drivers";collectionRef=Jr(this.firestore,this.collectionPath);lapService=P(ma);stintService=P(cn);raceConfigService=P(Ze);drivers=Z([]);driversReferenceLapTimeMap=Z(new Map);driversTimeOnTrackMap=Z(new Map);driversTimeOnTrackWarningMap=Z(new Map);driversStintCountMap=Z(new Map);driverWithMoreTimeFromLastStint=Z(void 0);driversTimeFromLastStintMap=Z(new Map);driversTimeOnTrackWarningCount=Ie(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),xe({drivers:this.getAll(),laps:se(this.lapService.laps),stints:se(this.stintService.stints),activeRaceConfig:se(this.raceConfigService.raceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e)),this.driverWithMoreTimeFromLastStint.set(this.getDriverWithMoreTimeFromLastStint(r,e)),this.driversTimeFromLastStintMap.set(this.createDriversTimeFromLastStintMap(r,e))})}getAll(){return Xr(this.collectionRef).pipe(vn(this.destroyed),te(e=>e.map(t=>t).filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){return new Map}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let o;i.endDate?o=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():o=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+o):r.set(i.driverId,o)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=LR(t.driverConfig.minDriverOnTrackHour),o=LR(t.driverConfig.maxDriverOnTrackHour),s=_0(t.driverConfig.warningDriverOnTrackThresholdMinute);e.forEach((a,c)=>{let l=a<i,u=o-a<=s;r.set(c,l||u)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}getDriverWithMoreTimeFromLastStint(e,t){if(t.length===0)return;let r,i=this.createDriversTimeFromLastStintMap(e,t),o=e.find(l=>l.endDate===null)?.driverId,s=new Map(t.map(l=>[l.id,l])),a=-1,c=!1;return i.forEach((l,u)=>{u!==o&&(l===0?(!c||c&&l>a)&&(a=l,r=s.get(u),c=!0):!c&&l>a&&(a=l,r=s.get(u)))}),r}createDriversTimeFromLastStintMap(e,t){let r=new Map;return t.forEach(i=>{let o=e.filter(s=>s.driverId===i.id).sort((s,a)=>a.startDate.toDate().getTime()-s.startDate.toDate().getTime()).at(0);o&&o.endDate?r.set(i.id,new Date().getTime()-o.endDate.toDate().getTime()):r.set(i.id,0)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function rme(n,e){if(n&1&&(C(0,"option",6),k(1),S()),n&2){let t=e.$implicit;X("value",t.id),O(),G(" ",t.raceName," ")}}function ime(n,e){if(n&1){let t=wn();C(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),k(4,"Start driver"),S(),C(5,"select",4),gr("ngModelChange",function(i){Fe(t);let o=W();return Rr(o.selectedDriver,i)||(o.selectedDriver=i),Le(i)}),ie("change",function(){Fe(t);let i=W();return Le(i.updateDriverId())}),J(6,rme,2,2,"option",5),S()()()()}if(n&2){let t=W();O(5),mr("ngModel",t.selectedDriver),O(),X("ngForOf",t.drivers())}}function ome(n,e){if(n&1&&(C(0,"div",1),k(1),S()),n&2){let t=W();O(),G(" ",t.endRaceCountdown," ")}}var F0=class n{raceService=P(at);raceConfigService=P(Ze);raceManagerService=P(fa);driverService=P(si);drivers=this.driverService.drivers;willEndRaceDate=this.raceService.willEndRaceDate;endRaceCountdown="00:00:00";selectedDriver="1";constructor(){xe({willEndRaceDate:se(this.willEndRaceDate),ping:Tt(1e3)}).pipe(Be()).subscribe(e=>{let t=e.willEndRaceDate;t&&(v0(new Date,t)?this.endRaceCountdown="00:00:00":this.endRaceCountdown=ps(t))}),Mr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.selectedDriver=e.startRaceDriverId)})}updateDriverId(){this.raceConfigService.updateStartRaceDriverId(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-race"]],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","text-neutral-900","dark:text-neutral-100","font-bold","font-mono"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2","text-neutral-900","dark:text-neutral-100"],["id","driverSelect","name","driverSelect",1,"border","border-neutral-100","rounded-sm","p-1","text-neutral-900","dark:text-neutral-100",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,r){t&1&&J(0,ime,7,2,"div",0)(1,ome,2,1,"div",1),t&2&&ne(r.willEndRaceDate()?1:0)},dependencies:[fo,ho,P0,k0,_d,lo,uo,Pi,Mi,$n],encapsulation:2})};var sme=n=>({"mb-2":n}),ame=n=>({"animate-bounce":n});function cme(n,e){if(n&1&&(C(0,"div",4),k(1),S()),n&2){let t=W();O(),G(" Remaining: ",t.remainingTyreChange()," ")}}function lme(n,e){n&1&&(C(0,"div",5),k(1," Completed! "),S())}function ume(n,e){if(n&1&&(C(0,"div",6),k(1," Window open "),S()),n&2){let t=W();X("ngClass",We(1,ame,t.remainingTyreChange()>0))}}function dme(n,e){n&1&&(C(0,"div",7),k(1," Window closed "),S())}function hme(n,e){if(n&1&&(k(0),gi(1,"date")),n&2){let t=W(2);G(" ",yi(1,1,t.openingTime(),"HH:mm:ss")," ")}}function fme(n,e){n&1&&k(0," --:--:-- ")}function pme(n,e){if(n&1&&(k(0),gi(1,"date")),n&2){let t=W(2);G(" ",yi(1,1,t.closingTime(),"HH:mm:ss")," ")}}function mme(n,e){n&1&&k(0," --:--:-- ")}function gme(n,e){if(n&1&&(C(0,"div",8)(1,"div")(2,"div",9),k(3,"Opening time"),S(),C(4,"div",10),J(5,hme,2,4)(6,fme,1,0),S()(),C(7,"div")(8,"div",11),k(9,"Opening in"),S(),C(10,"div",12),k(11),S()()(),le(12,"hr",13),C(13,"div",14)(14,"div")(15,"div",9),k(16,"Closing time"),S(),C(17,"div",10),J(18,pme,2,4)(19,mme,1,0),S()(),C(20,"div")(21,"div",11),k(22,"Closing in"),S(),C(23,"div",12),k(24),S()()()),n&2){let t=W();O(5),ne(t.openingTime()?5:6),O(6),G(" ",t.countdownOpeningTime()," "),O(7),ne(t.closingTime()?18:19),O(6),G(" ",t.countdownClosingTime()," ")}}var L0=class n{tyreService=P(ao);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Ie(()=>ps(this.tyreService.openingTime()));countdownClosingTime=Ie(()=>ps(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-tyre-change-window"]],decls:10,vars:6,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-neutral-500","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono"],[1,"text-neutral-500","dark:text-neutral-400","text-right"],[1,"text-neutral-900","dark:text-neutral-100","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F6DE} \u{1F504} Tyre change"),S(),C(4,"div",3),J(5,cme,2,1,"div",4)(6,lme,2,0,"div",5)(7,ume,2,3,"div",6)(8,dme,2,0,"div",7),S()(),J(9,gme,25,4),S()),t&2&&(O(),X("ngClass",We(4,sme,r.isOpen)),O(4),ne(r.remainingTyreChange()>0?5:6),O(2),ne(r.tyreChangeWindowOpen()?7:8),O(2),ne(r.isOpen?9:-1))},dependencies:[Ls,He],encapsulation:2})};var bd=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},features:[Bi],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow-sm","col-span-5","rounded-sm","border-2","flex","relative","bg-neutral-100","dark:bg-neutral-900",3,"ngClass"],[1,"cursor-default","leading-none","rounded-xs","flex","items-center","py-3",3,"ngClass"],[1,"absolute","right-2","text-neutral-900","dark:text-neutral-100","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),k(4),S()()(),le(5,"div",4),S()),t&2&&(O(),X("ngClass",r.batteryBorderColor),O(),Ml("width",r.charge,"%"),X("ngClass",r.batteryColor),O(2),Un(r.charge),O(),X("ngClass",r.batteryBorderColor))},dependencies:[He],encapsulation:2,changeDetection:0})};var V0=class n{raceService=P(at);pitService=P(an);raceConfigService=P(Ze);lastRefuelTime=Z(void 0);emptyFuelTime=Z(void 0);remainingFuelPercentage=Z(100);remainingFuelLap=Z(0);constructor(){xe({lastRefuelPit:se(this.pitService.lastRefuelPit),race:se(this.raceService.activeRace),raceConfig:se(this.raceConfigService.raceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({lastRefuelPit:e,race:t,raceConfig:r})=>{this.lastRefuelTime.set(this.getLastRefuelDate(e,t)),this.emptyFuelTime.set(this.calculateEmptyFuelTime(this.lastRefuelTime(),r)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r))})}getLastRefuelDate(e,t){if(e?.exitTime)return e.exitTime.toDate();if(t)return t.startedAt.toDate()}calculateEmptyFuelTime(e,t){if(e&&t)return ds(e,t.fuelDurationMinute)}calculateRemainingFuelPercentage(e,t){if(e&&t){let i=ld(e,new Date)/t.fuelDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}calculateRemainingFuelLaps(e,t){if(e&&t){let r=hs(e,new Date);return Math.floor(r/t.referenceLapTimeMillisecond)}if(!e&&t){let r=_0(t.fuelDurationMinute);return Math.floor(r/t.referenceLapTimeMillisecond)}return 0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var yme=n=>({"mb-2":n}),vme=n=>({"animate-bounce":n});function _me(n,e){if(n&1&&(k(0),gi(1,"date")),n&2){let t=W(2);G(" ",yi(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function bme(n,e){n&1&&k(0," --:--:-- ")}function wme(n,e){if(n&1&&(k(0),gi(1,"date")),n&2){let t=W(2);G(" ",yi(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function Eme(n,e){n&1&&k(0," --:--:-- ")}function Ime(n,e){if(n&1){let t=wn();C(0,"div",7)(1,"div")(2,"div",8),k(3,"Last refuel time"),S(),C(4,"div",9),J(5,_me,2,4)(6,bme,1,0),S()(),C(7,"div")(8,"div",10),k(9,"Since last refuel"),S(),C(10,"div",11),k(11),S()()(),le(12,"hr",12),C(13,"div",7)(14,"div")(15,"div",8),k(16,"Empty time"),S(),C(17,"div",9),J(18,wme,2,4)(19,Eme,1,0),S()(),C(20,"div")(21,"div",10),k(22,"Empty in"),S(),C(23,"div",11),k(24),S()()(),le(25,"hr",12),C(26,"div",13)(27,"div")(28,"div",8),k(29,"Remaining laps"),S(),C(30,"div",9),k(31),S()(),C(32,"div")(33,"div",10),k(34,"Fuel duration (min)"),S(),C(35,"div",14)(36,"button",15),ie("click",function(){Fe(t);let i=W();return Le(i.increaseFuelDuration())}),k(37," + "),S(),C(38,"form",16),ie("ngSubmit",function(){Fe(t);let i=W();return Le(i.onSubmit())}),C(39,"input",17),gr("ngModelChange",function(i){Fe(t);let o=W();return Rr(o.fuelDurationMinute,i)||(o.fuelDurationMinute=i),Le(i)}),S()(),C(40,"button",18),ie("click",function(){Fe(t);let i=W();return Le(i.decreaseFuelDuration())}),k(41," - "),S()()()()}if(n&2){let t=W();O(5),ne(t.lastRefuelTime()?5:6),O(6),G(" ",t.sinceLastRefuel()," "),O(7),ne(t.emptyFuelTime()?18:19),O(6),G(" ",t.emptyFuelCountdown()," "),O(7),G(" ",t.remainingFuelLap()," "),O(8),mr("ngModel",t.fuelDurationMinute)}}var j0=class n{raceConfigService=P(Ze);fuelService=P(V0);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Ie(()=>ps(this.emptyFuelTime()));sinceLastRefuel=Ie(()=>Tr(this.lastRefuelTime(),new Date));warning=Ie(()=>this.remainingFuelPercentage()<=20);remainingColor=Ie(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!1;fuelDurationMinute=0;constructor(){Mr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-fuel"]],decls:11,vars:12,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-neutral-100","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-neutral-100","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-neutral-500","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono"],[1,"text-neutral-500","dark:text-neutral-400","text-right"],[1,"text-neutral-900","dark:text-neutral-100","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-neutral-200","hover:bg-neutral-400","active:bg-neutral-500","text-neutral-900","px-4","mr-1","rounded-sm",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right","text-neutral-900","dark:text-neutral-100",3,"ngModelChange","ngModel"],[1,"bg-neutral-200","hover:bg-neutral-400","active:bg-neutral-500","text-neutral-900","px-4","ml-1","rounded-sm",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u26FD\uFE0F Fuel"),S(),C(4,"div",3)(5,"div",4),k(6),S(),C(7,"div",5),k(8),S(),le(9,"app-battery",6),S()(),J(10,Ime,42,6),S()),t&2&&(O(),X("ngClass",We(8,yme,r.isOpen)),O(3),X("ngClass",We(10,vme,r.warning())),O(),X("ngClass",r.remainingColor()),O(),G(" Empty: ",r.emptyFuelCountdown()," "),O(),X("ngClass",r.remainingColor()),O(),G(" Laps: ",r.remainingFuelLap()," "),O(),X("charge",r.remainingFuelPercentage()),O(),ne(r.isOpen?10:-1))},dependencies:[He,Ls,bd,fo,ho,pa,Fc,lo,uo,Vc,Lc,Pi,Mi],encapsulation:2})};var Cme=n=>({"mb-2":n});function Tme(n,e){if(n&1&&(C(0,"div",6)(1,"div")(2,"div",7),k(3,"Optimized AVG time"),S(),C(4,"div",8),k(5),S()(),C(6,"div")(7,"div",9),k(8,"Laps"),S(),C(9,"div",10),k(10),S()()(),le(11,"hr",11),C(12,"div",12)(13,"div")(14,"div",7),k(15," Optimized AVG time "),C(16,"strong"),k(17,"if driver change now"),S()(),C(18,"div",8),k(19),S()(),C(20,"div")(21,"div",9),k(22,"Laps"),S(),C(23,"div",10),k(24),S()()()),n&2){let t=W();O(5),G(" ",t.AVGStintTime()," "),O(5),G(" ",t.laps()," "),O(9),G(" ",t.AVGStintTimeIfDriverChangeNow()," "),O(5),G(" ",t.lapsIfDriverChangeNow()," ")}}var U0=class n{stintOptimizerService=P(co);AVGStintTime=Ie(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Mt(e.avgStintMillisecondsTime):"--:--:--"});laps=Ie(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Ie(()=>{let e=this.stintOptimizerService.optimizedStint();return e?Mt(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Ie(()=>{let e=this.stintOptimizerService.optimizedStint();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-stint-optimizer"]],decls:10,vars:6,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-neutral-500","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono"],[1,"text-neutral-500","dark:text-neutral-400","text-right"],[1,"text-neutral-900","dark:text-neutral-100","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F9E0} Stint optimizer"),S(),C(4,"div",3)(5,"div",4),k(6),S(),C(7,"div",5),k(8),S()()(),J(9,Tme,25,4),S()),t&2&&(O(),X("ngClass",We(4,Cme,r.isOpen)),O(5),G(" Optimum: ",r.AVGStintTime()," "),O(2),G(" Laps: ",r.laps()," "),O(),ne(r.isOpen?9:-1))},dependencies:[He],encapsulation:2})};var Sme=n=>({"mb-2":n}),Dme=(n,e)=>({"bg-green-100 dark:bg-green-900 font-semibold":n,"hover:bg-neutral-50 dark:hover:bg-neutral-700":e}),xme=n=>({"bg-yellow-500 text-white":n});function Ame(n,e){if(n&1&&(C(0,"div",4),k(1),S()),n&2){let t=W();O(),G(" Warning: ",t.driversTimeOnTrackWarningCount()," ")}}function Rme(n,e){n&1&&(C(0,"div",5),k(1," Completed! "),S())}function Mme(n,e){if(n&1&&(C(0,"tr",17)(1,"td",18),k(2),S(),C(3,"td",19),k(4),S(),C(5,"td",20),k(6),S(),C(7,"td",21)(8,"div",22),k(9),S()(),C(10,"td",23),k(11),S()()),n&2){let t=e.$implicit,r=W(2);X("ngClass",mi(7,Dme,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),O(2),Un(t.id),O(2),Un(t.raceName),O(2),G(" ",r.getDriverStintCount(t.id)," "),O(2),X("ngClass",We(10,xme,r.getDriverTimeOnTrackWarning(t.id))),O(),G(" ",r.getDriverTimeOnTrack(t.id)," "),O(2),G("",r.getDriverTimeFromLastStint(t.id)," ")}}function Pme(n,e){if(n&1&&(C(0,"div",6)(1,"table",7)(2,"thead",8)(3,"tr"),le(4,"th",9),C(5,"th",10),k(6," Name "),S(),C(7,"th",11),k(8," Stint "),S(),C(9,"th",12),k(10," On track "),S(),C(11,"th",13),k(12," From last stint "),S()()()(),C(13,"div",14)(14,"table",15)(15,"tbody"),J(16,Mme,12,12,"tr",16),S()()()()),n&2){let t=W();O(16),X("ngForOf",t.drivers())}}var B0=class n{driverService=P(si);stintService=P(cn);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=Ie(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!1;getDriverTimeOnTrack(e){return Mt(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)??0}getDriverTimeFromLastStint(e){return Mt(this.driverService.driversTimeFromLastStintMap().get(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-driver"]],decls:8,vars:5,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","overflow-clip"],[1,"w-full","bg-neutral-50","dark:bg-neutral-800","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],["colspan","2",1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],["colspan","2",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],["colspan","2",1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],[1,"p-1","text-center","rounded-sm",3,"ngClass"],["colspan","2",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F417} Driver"),S(),C(4,"div",3),J(5,Ame,2,1,"div",4)(6,Rme,2,0,"div",5),S()(),J(7,Pme,17,1,"div",6),S()),t&2&&(O(),X("ngClass",We(3,Sme,r.isOpen)),O(4),ne(r.driversTimeOnTrackWarningCount()>0?5:6),O(2),ne(r.isOpen?7:-1))},dependencies:[He,$n],encapsulation:2})};var $0=class n{raceService=P(at);stintService=P(cn);raceConfigService=P(Ze);open=Z(!1);openInMilliseconds=Z(0);constructor(){xe({willEndRaceDate:se(this.raceService.willEndRaceDate),activeStint:se(this.stintService.activeStint),raceConfig:se(this.raceConfigService.raceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({willEndRaceDate:e,activeStint:t,raceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return ds(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,o=sq(e,r.pitConfig.pitLaneCloseBeforeEndRaceMinute),s=oq(i,o),a=ds(t.startDate.toDate(),r.minStintMinute),c=v0(i,a);return s&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var H0=class n{audio=new Audio;constructor(){this.audio.addEventListener("error",e=>console.error("Audio error:",e))}play(){this.audio.play()}playFile(e){this.audio=new Audio(e),this.audio.play()}pause(){this.audio.pause()}stop(){this.audio.pause(),this.audio.currentTime=0}seek(e){this.audio.currentTime=e}setVolume(e){this.audio.volume=e}setLoop(e){this.audio.loop=e}on(e,t){this.audio.addEventListener(e,t)}off(e,t){this.audio.removeEventListener(e,t)}getCurrentTime(){return this.audio.currentTime}getDuration(){return this.audio.duration}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var kme=n=>({"mb-4":n}),Nme=n=>({"animate-bounce":n});function Ome(n,e){if(n&1&&(C(0,"div",3),k(1),S()),n&2){let t=W();O(),G(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function Fme(n,e){n&1&&(C(0,"div",5),k(1," Open "),S())}function Lme(n,e){n&1&&(C(0,"div",6),k(1," Closed "),S())}function Vme(n,e){if(n&1&&(C(0,"option",21),k(1),S()),n&2){let t=e.$implicit;X("value",t.id),O(),G(" ",t.raceName," ")}}function jme(n,e){if(n&1){let t=wn();C(0,"div",11),k(1,"PIT SETTINGS"),S(),C(2,"form")(3,"div",12)(4,"label",13),k(5,"\u{1F417} Driver"),S(),C(6,"select",14),gr("ngModelChange",function(i){Fe(t);let o=W(2);return Rr(o.selectedDriver,i)||(o.selectedDriver=i),Le(i)}),ie("change",function(){Fe(t);let i=W(2);return Le(i.updateDriverId())}),J(7,Vme,2,2,"option",15),S()(),C(8,"div",12)(9,"label",16),k(10,"\u26FD\uFE0F Refueling"),S(),C(11,"input",17),ie("change",function(){Fe(t);let i=W(2);return Le(i.updateRefueling())}),gr("ngModelChange",function(i){Fe(t);let o=W(2);return Rr(o.refueling,i)||(o.refueling=i),Le(i)}),S()(),C(12,"div",12)(13,"label",18),k(14,"\u{1F6DE} Tyre change"),S(),C(15,"input",19),gr("ngModelChange",function(i){Fe(t);let o=W(2);return Rr(o.tyreChange,i)||(o.tyreChange=i),Le(i)}),ie("change",function(){Fe(t);let i=W(2);return Le(i.updateTyreChange())}),S()(),C(16,"div",12)(17,"label",18),k(18,"\u{1F50A} Interphone change"),S(),C(19,"input",20),gr("ngModelChange",function(i){Fe(t);let o=W(2);return Rr(o.interphoneChange,i)||(o.interphoneChange=i),Le(i)}),ie("change",function(){Fe(t);let i=W(2);return Le(i.updateInterphoneChange())}),S()()()}if(n&2){let t=W(2);O(6),X("disabled",t.activePit()!==void 0),mr("ngModel",t.selectedDriver),O(),X("ngForOf",t.drivers()),O(4),X("disabled",t.activePit()!==void 0),mr("ngModel",t.refueling),O(4),X("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),mr("ngModel",t.tyreChange),O(4),X("disabled",t.activePit()!==void 0),mr("ngModel",t.interphoneChange)}}function Ume(n,e){if(n&1&&(C(0,"div",22),k(1),S()),n&2){let t=W(3);X("ngClass",We(2,Nme,t.activePitRemainingMilliseconds()<1e4)),O(),G(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function Bme(n,e){n&1&&(C(0,"div",23),k(1," Pit out ready! "),S())}function $me(n,e){if(n&1&&J(0,Ume,2,4,"div",22)(1,Bme,2,0,"div",23),n&2){let t=W(2);ne(t.activePitRemainingMilliseconds()>0?0:1)}}function Hme(n,e){if(n&1){let t=wn();C(0,"div",7),J(1,jme,20,9)(2,$me,2,1),S(),C(3,"div",8)(4,"button",9),ie("click",function(){Fe(t);let i=W();return Le(i.pitIn())}),k(5," Pit in "),S(),C(6,"button",10),ie("click",function(){Fe(t);let i=W();return Le(i.pitOut())}),k(7," Pit out "),S()()}if(n&2){let t=W();O(),ne(t.activePit()?2:1),O(3),X("disabled",!t.pitLaneOpen()),O(2),X("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var z0=class n{pitLaneService=P($0);pitService=P(an);driverService=P(si);raceManagerService=P(fa);tyreService=P(ao);raceConfigService=P(Ze);audioService=P(H0);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=Ie(()=>Mt(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=Ie(()=>aq(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;interphoneChange=!1;selectedDriver="1";constructor(){Mr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.selectedDriver=e.pitConfig.nextPitDriverId,this.refueling=e.pitConfig.nextPitRefueling,this.tyreChange=e.pitConfig.nextPitTyreChange,this.interphoneChange=e.pitConfig.nextPitInterphoneChange)})}pitIn(){return I(this,null,function*(){this.audioService.playFile("assets/box_box_box_box.mp3"),yield this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange,this.interphoneChange)})}pitOut(){return I(this,null,function*(){yield this.raceManagerService.pitOut(),this.raceConfigService.updateNextPitRefueling(!1),this.raceConfigService.updateNextPitTyreChange(!1);let e=this.driverService.driverWithMoreTimeFromLastStint();e&&this.raceConfigService.updateNextPitDriverId(e.id)})}updateDriverId(){this.raceConfigService.updateNextPitDriverId(this.selectedDriver)}updateTyreChange(){this.raceConfigService.updateNextPitTyreChange(this.tyreChange)}updateRefueling(){this.raceConfigService.updateNextPitRefueling(this.refueling)}updateInterphoneChange(){this.raceConfigService.updateNextPitInterphoneChange(this.interphoneChange)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-pit-lane"]],decls:9,vars:6,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded-sm",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded-sm",3,"click","disabled"],[1,"font-semibold","mb-2","text-neutral-900","dark:text-neutral-100"],[1,"mb-2"],["for","driverSelect",1,"mr-2","text-neutral-900","dark:text-neutral-100"],["id","driverSelect","name","driverSelect",1,"border","rounded-sm","p-1","text-neutral-900","dark:text-neutral-100",3,"ngModelChange","change","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2","text-neutral-900","dark:text-neutral-100"],["type","checkbox","id","refueling","name","refueling",3,"change","ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2","text-neutral-900","dark:text-neutral-100"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","change","disabled","ngModel"],["type","checkbox","id","interphoneChange","name","interphoneChange",3,"ngModelChange","change","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-neutral-100","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-neutral-100","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F17F}\uFE0F Pit Lane"),S(),J(4,Ome,2,1,"div",3),C(5,"div",4),J(6,Fme,2,0,"div",5)(7,Lme,2,0,"div",6),S()(),J(8,Hme,8,3),S()),t&2&&(O(),X("ngClass",We(4,kme,r.isOpen)),O(3),ne(r.pitLaneOpenInMilliseconds()>0?4:-1),O(2),ne(r.pitLaneOpen()?6:7),O(2),ne(r.isOpen?8:-1))},dependencies:[He,fo,ho,P0,k0,BR,_d,lo,uo,Pi,Mi,$n],encapsulation:2})};var zme=n=>({"mb-2":n});function Wme(n,e){if(n&1&&(C(0,"div",4),k(1),S()),n&2){let t=W();O(),G(" Remaining: ",t.remainingDriverChanges()," ")}}function qme(n,e){n&1&&(C(0,"div",5),k(1," Completed! "),S())}function Gme(n,e){if(n&1&&(C(0,"div",6)(1,"div")(2,"div",7),k(3,"Competed"),S(),C(4,"div",8),k(5),S()(),C(6,"div")(7,"div",9),k(8,"Remaining"),S(),C(9,"div",10),k(10),S()()()),n&2){let t=W();O(5),G(" ",t.completedDriverChanges()," "),O(5),G(" ",t.remainingDriverChanges()," ")}}var W0=class n{pitService=P(an);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-driver-change"]],decls:8,vars:5,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between"],[1,"text-neutral-500","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono"],[1,"text-neutral-600","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono","text-right"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F417} \u{1F504} Driver change"),S(),C(4,"div",3),J(5,Wme,2,1,"div",4)(6,qme,2,0,"div",5),S()(),J(7,Gme,11,2,"div",6),S()),t&2&&(O(),X("ngClass",We(3,zme,r.isOpen)),O(4),ne(r.remainingDriverChanges()>0?5:6),O(2),ne(r.isOpen?7:-1))},dependencies:[He],encapsulation:2})};var Kme=n=>({"mb-2":n});function Yme(n,e){if(n&1&&(C(0,"div",4),k(1),S(),C(2,"div",5),k(3),S()),n&2){let t=W(2);O(),G(" Remaining: ",t.activeStintRemainingTimeOnTrackString()," "),O(2),G(" Laps: ",t.activeStintRemainingLaps()," ")}}function Qme(n,e){if(n&1&&(C(0,"div",6),k(1),S(),C(2,"div",7),k(3),S()),n&2){let t=W(2);O(),G(" Gaining: ",t.activeStintGainedTimeOnTrackString()," "),O(2),G(" Laps: ",t.activeStintGainedLaps()," ")}}function Xme(n,e){if(n&1&&J(0,Yme,4,2)(1,Qme,4,2),n&2){let t=W();ne(t.activeStintRemainingTimeOnTrack()>0?0:1)}}function Jme(n,e){if(n&1&&k(0),n&2){let t=W(2);G(" ",t.activeStintRemainingTimeOnTrackString()," ")}}function Zme(n,e){n&1&&k(0," --:--:-- ")}function ege(n,e){if(n&1&&k(0),n&2){let t=W(2);G(" ",t.activeStintRemainingLaps()," ")}}function tge(n,e){n&1&&k(0," 0 ")}function nge(n,e){if(n&1&&(C(0,"div",8)(1,"div")(2,"div",9),k(3,"Time on track"),S(),C(4,"div",10),k(5),S()(),C(6,"div")(7,"div",11),k(8,"Laps"),S(),C(9,"div",12),k(10),S()()(),le(11,"hr",13),C(12,"div",8)(13,"div")(14,"div",9),k(15,"Remaining time on track"),S(),C(16,"div",10),J(17,Jme,1,1)(18,Zme,1,0),S()(),C(19,"div")(20,"div",11),k(21,"Remaining laps"),S(),C(22,"div",12),J(23,ege,1,1)(24,tge,1,0),S()()(),le(25,"hr",13),C(26,"div",14)(27,"div")(28,"div",9),k(29,"Gained time on track"),S(),C(30,"div",10),k(31),S()(),C(32,"div")(33,"div",11),k(34,"Gained laps"),S(),C(35,"div",12),k(36),S()()()),n&2){let t=W();O(5),G(" ",t.activeStintTimeOnTrackString()," "),O(5),G(" ",t.activeStintLaps()," "),O(7),ne(t.activeStint()?17:18),O(6),ne(t.activeStint()?23:24),O(8),G(" ",t.activeStintGainedTimeOnTrackString()," "),O(5),G(" ",t.activeStintGainedLaps()," ")}}var q0=class n{stintService=P(cn);activeStint=this.stintService.activeStint;activeStintRemainingTimeOnTrack=this.stintService.activeStintRemainingTimeOnTrack;activeStintTimeOnTrackString=Ie(()=>Mt(this.stintService.activeStintTimeOnTrack()));activeStintRemainingTimeOnTrackString=Ie(()=>Mt(this.stintService.activeStintRemainingTimeOnTrack()));activeStintGainedTimeOnTrackString=Ie(()=>Mt(this.stintService.activeStintGainedTimeOnTrack()));activeStintLaps=this.stintService.activeStintLaps;activeStintRemainingLaps=this.stintService.activeStintRemainingLaps;activeStintGainedLaps=this.stintService.activeStintGainedLaps;isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-active-stint"]],decls:7,vars:5,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","mr-1","font-medium","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-neutral-500","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono"],[1,"text-neutral-500","dark:text-neutral-400","text-right"],[1,"text-neutral-900","dark:text-neutral-100","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F3CE}\uFE0F \u{1F4A8} Active stint"),S(),C(4,"div",3),J(5,Xme,2,1),S()(),J(6,nge,37,6),S()),t&2&&(O(),X("ngClass",We(3,Kme,r.isOpen)),O(4),ne(r.activeStint()?5:-1),O(),ne(r.isOpen?6:-1))},dependencies:[He],encapsulation:2})};var rge=n=>({"mb-2":n}),ige=(n,e)=>({"bg-green-100 dark:bg-green-900 font-semibold":n,"hover:bg-neutral-100 dark:hover:bg-neutral-700":e});function oge(n,e){if(n&1&&(C(0,"tr",19)(1,"td",20),k(2),S(),C(3,"td",21),k(4),S(),C(5,"td",18),k(6),gi(7,"date"),S(),C(8,"td",18),k(9),S(),C(10,"td",18),k(11),S()()),n&2){let t=e.$implicit,r=W(2);X("ngClass",mi(9,ige,t.id===r.activeStintId(),t.id!==r.activeStintId())),O(2),Un(t.id),O(2),G("",r.getDriverRacingName(t.driverId)," "),O(2),G("",yi(7,6,t.startDate.toDate(),"HH:mm:ss")," "),O(3),G(" ",r.getEndDate(t)," "),O(2),G(" ",r.calculateTimeOnTrack(t.startDate.toDate(),t.endDate==null?null:t.endDate.toDate())," ")}}function sge(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),le(4,"th",8),C(5,"th",9),k(6," Driver "),S(),C(7,"th",10),k(8,"Start "),S(),C(9,"th",10),k(10,"End "),S(),C(11,"th",10),k(12,"On track "),S()()()(),C(13,"div",11)(14,"table",12)(15,"tbody"),J(16,oge,12,12,"tr",13),S()()(),C(17,"div",14)(18,"table",12)(19,"tfoot",15)(20,"tr",16)(21,"td",17),k(22,"Totals "),S(),C(23,"td",18),k(24),S()()()()()()),n&2){let t=W();O(16),X("ngForOf",t.stints()),O(8),G("",t.calculateTotalTimeOnTrack()," ")}}var G0=class n{stintService=P(cn);driverService=P(si);stints=this.stintService.stints;activeStintId=Ie(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!1;getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}calculateTimeOnTrack(e,t){return t?Tr(e,t):Tr(e,new Date)}calculateTotalTimeOnTrack(){let e=this.stintService.stints(),t=0;return e.forEach(r=>{r.endDate?t+=r.endDate.toDate().getTime()-r.startDate.toDate().getTime():t+=new Date().getTime()-r.startDate.toDate().getTime()}),Mt(t)}getEndDate(e){if(e.endDate)return Ri(e.endDate.toDate(),"HH:mm:ss");let t=Vr(e.startDate.toDate(),e.optimumMilliseconds);return"("+Ri(t,"HH:mm:ss")+")"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-stint"]],decls:8,vars:5,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-neutral-50","dark:bg-neutral-800","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-xs","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-xs","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],["colspan","2",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-xs","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-neutral-100","dark:bg-neutral-700","font-bold"],["colspan","6",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100"],["colspan","2",1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u23F3 Stint"),S(),C(4,"div",3)(5,"div",4),k(6),S()()(),J(7,sge,25,2,"div",5),S()),t&2&&(O(),X("ngClass",We(3,rge,r.isOpen)),O(5),G(" Total: ",r.stints().length," "),O(),ne(r.isOpen?7:-1))},dependencies:[He,$n,Ls],encapsulation:2})};var age=n=>({"mb-2":n});function cge(n,e){if(n&1){let t=wn();C(0,"div",5)(1,"div")(2,"div",6),k(3,"Reference time (mills)"),S(),C(4,"div",7)(5,"button",8),ie("click",function(){Fe(t);let i=W();return Le(i.increaseReferenceLapTime())}),k(6," + "),S(),C(7,"form",9),ie("ngSubmit",function(){Fe(t);let i=W();return Le(i.onSubmit())}),C(8,"input",10),gr("ngModelChange",function(i){Fe(t);let o=W();return Rr(o.referenceLapTime,i)||(o.referenceLapTime=i),Le(i)}),S()(),C(9,"button",11),ie("click",function(){Fe(t);let i=W();return Le(i.decreaseReferenceLapTime())}),k(10," - "),S()()()()}if(n&2){let t=W();O(8),mr("ngModel",t.referenceLapTime)}}var K0=class n{raceConfigService=P(Ze);isOpen=!1;referenceLapTime=0;referenceLapTimeString="--:--:---";constructor(){Mr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.referenceLapTime=e.referenceLapTimeMillisecond,this.referenceLapTimeString=cq(e.referenceLapTimeMillisecond))})}onSubmit(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime)}increaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime+1)}decreaseReferenceLapTime(){this.raceConfigService.updateReferenceLapTime(this.referenceLapTime-1)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-lap"]],decls:8,vars:5,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"flex","justify-center"],[1,"text-neutral-500","dark:text-neutral-400","text-center"],[1,"flex","justify-end"],[1,"bg-neutral-200","hover:bg-neutral-400","active:bg-neutral-500","text-black","px-4","mr-1","rounded-sm",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","referenceLapTime","name","referenceLapTime","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-36","text-right","text-neutral-900","dark:text-neutral-100",3,"ngModelChange","ngModel"],[1,"bg-neutral-200","hover:bg-neutral-400","active:bg-neutral-500","text-black","px-4","ml-1","rounded-sm",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u23F1\uFE0F Lap"),S(),C(4,"div",3)(5,"div",4),k(6),S()()(),J(7,cge,11,1,"div",5),S()),t&2&&(O(),X("ngClass",We(3,age,r.isOpen)),O(5),G(" Reference: ",r.referenceLapTimeString," "),O(),ne(r.isOpen?7:-1))},dependencies:[He,fo,ho,pa,Fc,lo,uo,Vc,Lc,Pi,Mi,N0],encapsulation:2})};var lge=n=>({"mb-2":n}),uge=(n,e)=>({"bg-green-100 dark:bg-green-900 font-semibold":n,"hover:bg-neutral-50 dark:hover:bg-neutral-700":e});function dge(n,e){n&1&&k(0," \u2705 ")}function hge(n,e){n&1&&k(0," \u2705 ")}function fge(n,e){n&1&&k(0," \u2705 ")}function pge(n,e){n&1&&k(0," \u2705 ")}function mge(n,e){if(n&1&&(C(0,"tr",20)(1,"td",17),k(2),S(),C(3,"td",21),J(4,dge,1,0),S(),C(5,"td",22),J(6,hge,1,0),S(),C(7,"td",22),J(8,fge,1,0),S(),C(9,"td",22),J(10,pge,1,0),S(),C(11,"td",23),k(12),S()()),n&2){let t=e.$implicit,r=W(2);X("ngClass",mi(7,uge,t.id===r.activePitId(),t.id!==r.activePitId())),O(2),Un(t.id),O(2),ne(t.entryDriverId!==t.exitDriverId?4:-1),O(2),ne(t.refuel?6:-1),O(2),ne(t.tyreChange?8:-1),O(2),ne(t.interphoneChange?10:-1),O(2),G(" ",r.calculatePitTime(t.entryTime.toDate(),t.exitTime==null?null:t.exitTime.toDate())," ")}}function gge(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),le(4,"th",8),C(5,"th",9),k(6," \u{1F417} \u{1F504} "),S(),C(7,"th",9),k(8," \u26FD\uFE0F "),S(),C(9,"th",9),k(10," \u{1F6DE} \u{1F504} "),S(),C(11,"th",9),k(12," \u{1F50A} \u{1F504} "),S(),C(13,"th",10),k(14,"Time "),S()()()(),C(15,"div",11)(16,"table",12)(17,"tbody"),J(18,mge,13,10,"tr",13),S()()(),C(19,"div",14)(20,"table",12)(21,"tfoot",15)(22,"tr",16)(23,"td",17),k(24,"Totals "),S(),C(25,"td",18),k(26),S(),C(27,"td",18),k(28),S(),C(29,"td",18),k(30),S(),C(31,"td",18),k(32),S(),C(33,"td",19),k(34),S()()()()()()),n&2){let t=W();O(18),X("ngForOf",t.pits()),O(8),Un(t.completedDriverChanges()),O(2),Un(t.calculateTotalRefueling()),O(2),Un(t.calculateTotalTyreChanges()),O(2),Un(t.calculateTotalInterphoneChanges()),O(2),G("",t.calculateTotalPitTime()," ")}}var Y0=class n{pitService=P(an);pits=this.pitService.pits;activePitId=Ie(()=>{let e=this.pitService.activePit();if(e)return e.id});completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!0;calculatePitTime(e,t){return t?Tr(e,t):Tr(e,new Date)}calculateTotalPitTime(){let e=this.pitService.pits(),t=0;return e.forEach(r=>{r.exitTime?t+=r.exitTime.toDate().getTime()-r.entryTime.toDate().getTime():t+=new Date().getTime()-r.entryTime.toDate().getTime()}),Mt(t)}calculateTotalRefueling(){return this.pitService.pits().filter(e=>e.refuel).length}calculateTotalTyreChanges(){return this.pitService.pits().filter(e=>e.tyreChange).length}calculateTotalInterphoneChanges(){return this.pitService.pits().filter(e=>e.interphoneChange).length}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-pit"]],decls:8,vars:5,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],[1,"bg-blue-500","px-2","py-1","rounded-lg","text-neutral-100","text-center","font-medium","hover:cursor-default"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-neutral-50","dark:bg-neutral-800","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],["colspan","2",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-neutral-100","dark:bg-neutral-700","font-bold"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],["colspan","2",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100"],[1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],["colspan","2",1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-sm","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F468}\u{1F3FB}\u200D\u{1F527} Pit"),S(),C(4,"div",3)(5,"div",4),k(6),S()()(),J(7,gge,35,6,"div",5),S()),t&2&&(O(),X("ngClass",We(3,lge,r.isOpen)),O(5),G(" Total: ",r.pits().length," "),O(),ne(r.isOpen?7:-1))},dependencies:[He,$n],encapsulation:2})};var Q0=class n{stintService=P(cn);deltaStints=Z([]);totalDeltaMilliseconds=Z(0);deltaMilliseconds=Z(0);constructor(){xe({stints:se(this.stintService.stints),ping:Tt(1e3)}).pipe(Be()).subscribe(({stints:e})=>{let t=this.createDeltaStints(e);this.deltaStints.set(t),this.totalDeltaMilliseconds.set(t.reduce((r,i)=>r+i.delta,0)),this.deltaMilliseconds.set(this.createDeltaStints(this.filterCompletedStints(e)).reduce((r,i)=>r+i.delta,0))})}filterCompletedStints(e){return e.filter(t=>t.endDate!==null)}createDeltaStints(e){let t=[];return e.forEach(r=>{t.push(this.createDeltaStint(r))}),t}createDeltaStint(e){let r=(e.endDate?e.endDate.toDate():new Date).getTime()-e.startDate.toDate().getTime(),i=r-e.optimumMilliseconds;return{id:e.id,delta:i,optimum:e.optimumMilliseconds,timeOnTrack:r}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var wd=(i=>(i.ABOVE="above",i.BELOW="below",i.LEFT="left",i.RIGHT="right",i))(wd||{});var yge=(n,e,t,r)=>({"tooltip--above":n,"tooltip--below":e,"tooltip--left":t,"tooltip--right":r});function vge(n,e){n&1&&le(0,"hr",2)}function _ge(n,e){if(n&1&&(C(0,"div",2),k(1),S(),J(2,vge,1,0,"hr",2)),n&2){let t=W(),r=t.$implicit,i=t.$index,o=t.$count;O(),G(" ",r," "),O(),ne(i!==o-1?2:-1)}}function bge(n,e){if(n&1&&J(0,_ge,3,2),n&2){let t=e.$implicit;ne(t!==""?0:-1)}}function wge(n,e){if(n&1&&(le(0,"hr",2),C(1,"div",3),k(2),S()),n&2){let t=W();O(2),G(" ",t.data==null?null:t.data.footer," ")}}var X0=class n{left=0;top=0;data;position="below";TooltipPosition=wd;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["tooltip"]],inputs:{left:"left",top:"top",data:"data",position:"position"},decls:6,vars:12,consts:[[1,"whitespace-pre-line","fixed","bg-neutral-900","rounded-lg","shadow-md","p-4","text-neutral-100",3,"ngClass"],[1,"font-bold","text-lg","mb-2"],[1,"mb-1"],[1,"text-lg"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),k(2),S(),k1(3,bge,1,1,null,null,P1),J(5,wge,3,1),S()),t&2&&(Ml("left",r.left+"px")("top",r.top+"px"),X("ngClass",L1(7,yge,r.position===r.TooltipPosition.ABOVE,r.position===r.TooltipPosition.BELOW,r.position===r.TooltipPosition.LEFT,r.position===r.TooltipPosition.RIGHT)),O(2),G(" ",r.data==null?null:r.data.title," "),O(),N1(r.data==null?null:r.data.paragraphs),O(2),ne((r.data==null?null:r.data.footer)!==""?5:-1))},dependencies:[He],styles:[".tooltip--below[_ngcontent-%COMP%]{transform:translate(-50%);margin-top:7px}.tooltip--below[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-top:none;left:calc(50% - 5px);top:-5px}.tooltip--above[_ngcontent-%COMP%]{transform:translate(-50%,-100%);margin-bottom:7px}.tooltip--above[_ngcontent-%COMP%]:before{border-left-color:transparent;border-right-color:transparent;border-bottom:none;left:calc(50% - 5px);bottom:-5px}.tooltip--left[_ngcontent-%COMP%]{transform:translate(calc(-100% - 7px),-50%)}.tooltip--left[_ngcontent-%COMP%]:before{border-top-color:transparent;border-bottom-color:transparent;border-right:none;right:-5px;top:calc(50% - 5px)}.tooltip--right[_ngcontent-%COMP%]{transform:translateY(-50%);margin-left:7px}.tooltip--right[_ngcontent-%COMP%]:before{left:-5px;top:calc(50% - 5px)}"]})};var Ed=class n{elementRef=P(fr);viewContainerRef=P($a);document=P(Bn);tooltipData;tooltipPosition="below";tooltipComponent;hideTooltipTimeout;onMouseEnter(){this.tooltipComponent||(this.tooltipComponent=this.viewContainerRef.createComponent(X0),this.document.body.appendChild(this.tooltipComponent.location.nativeElement),this.setTooltipComponentProperties(),this.tooltipComponent.hostView.detectChanges())}onMouseLeave(){this.removeTooltip()}removeTooltip(){this.tooltipComponent&&(this.tooltipComponent.destroy(),this.tooltipComponent=void 0,this.hideTooltipTimeout&&(clearTimeout(this.hideTooltipTimeout),this.hideTooltipTimeout=void 0))}setTooltipComponentProperties(){if(!this.tooltipComponent)return;this.tooltipComponent.instance.data=this.tooltipData,this.tooltipComponent.instance.position=this.tooltipPosition;let{left:e,right:t,top:r,bottom:i}=this.elementRef.nativeElement.getBoundingClientRect();switch(this.tooltipPosition){case"below":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(i);break}case"above":{this.tooltipComponent.instance.left=Math.round((t-e)/2+e),this.tooltipComponent.instance.top=Math.round(r);break}case"right":{this.tooltipComponent.instance.left=Math.round(t),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}case"left":{this.tooltipComponent.instance.left=Math.round(e),this.tooltipComponent.instance.top=Math.round(r+(i-r)/2);break}default:break}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=dt({type:n,selectors:[["","tooltip",""]],hostBindings:function(t,r){t&1&&ie("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})},inputs:{tooltipData:"tooltipData",tooltipPosition:"tooltipPosition"}})};var Ege=n=>({"mb-2":n}),Nq=(n,e)=>({"bg-yellow-500 text-neutral-100":n,"bg-green-500 text-neutral-100":e}),Ige=(n,e)=>({"bg-green-100 dark:bg-green-900 font-semibold":n,"hover:bg-neutral-50 dark:hover:bg-neutral-700":e}),Cge=(n,e)=>({"bg-yellow-500":n,"bg-green-500":e});function Tge(n,e){n&1&&k(0," Losing: ")}function Sge(n,e){n&1&&k(0," Gaining: ")}function Dge(n,e){if(n&1&&(C(0,"tr",19)(1,"td",20),k(2),S(),C(3,"td",21),k(4),S(),C(5,"td",21),k(6),S(),C(7,"td",22)(8,"div",23),k(9),S()()()),n&2){let t=e.$implicit,r=W(2);X("ngClass",mi(6,Ige,t.id===r.activeStintId(),t.id!==r.activeStintId())),O(2),Un(t.id),O(2),G("",r.getMillisecondsToTimeString(t.timeOnTrack)," "),O(2),G("",r.getMillisecondsToTimeString(t.optimum)," "),O(2),X("ngClass",mi(9,Cge,t.delta<0,t.delta>=0)),O(),G(" ",r.getMillisecondsToTimeString(t.delta)," ")}}function xge(n,e){if(n&1&&(C(0,"div",5)(1,"table",6)(2,"thead",7)(3,"tr"),le(4,"th",8),C(5,"th",9),k(6,"On track "),S(),C(7,"th",9),k(8,"Optimum "),S(),C(9,"th",9),k(10,"Delta "),S()()()(),C(11,"div",10)(12,"table",11)(13,"tbody"),J(14,Dge,10,12,"tr",12),S()()(),C(15,"div",13)(16,"table",11)(17,"tfoot",14)(18,"tr",15)(19,"td",16),k(20,"Totals "),S(),C(21,"td",17)(22,"div",18),k(23),S()()()()()()()),n&2){let t=W();O(14),X("ngForOf",t.deltaStints()),O(8),X("ngClass",mi(3,Nq,t.totalDeltaMilliseconds()<0,t.totalDeltaMilliseconds()>0)),O(),G(" ",t.getMillisecondsToTimeString(t.totalDeltaMilliseconds())," ")}}var J0=class n{stintService=P(cn);deltaStintService=P(Q0);deltaStints=this.deltaStintService.deltaStints;totalDeltaMilliseconds=this.deltaStintService.totalDeltaMilliseconds;deltaMilliseconds=this.deltaStintService.deltaMilliseconds;activeStintId=Ie(()=>{let e=this.stintService.activeStint();if(e)return e.id});isOpen=!1;tooltipInfo={footer:"",paragraphs:["Only completed stint"],title:""};tooltipPosition="above";getMillisecondsToTimeString(e){return Mt(Math.abs(e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-delta-stint"]],decls:10,vars:12,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center"],["tooltip","",1,"px-2","py-1","rounded-lg","text-center","font-medium","hover:cursor-default","text-neutral-900","dark:text-neutral-100",3,"ngClass","tooltipData","tooltipPosition"],[1,"max-h-72","flex","flex-col","overflow-clip"],[1,"w-full","bg-neutral-50","dark:bg-neutral-800","table-fixed"],[1,"sticky","top-0"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-left","text-xs","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],["colspan","2",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-xs","xl:text-base","font-medium","text-neutral-700","dark:text-neutral-400"],[1,"flex-1","overflow-y-auto"],[1,"w-full","table-fixed"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"flex"],[1,"sticky","bottom-0-0"],[1,"bg-neutral-100","dark:bg-neutral-700","font-bold"],["colspan","5",1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100"],["colspan","2",1,"py-2","pr-1","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],[1,"p-1","text-center","rounded-sm",3,"ngClass"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-neutral-200","dark:border-neutral-400","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100"],["colspan","2",1,"py-2","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-xs","xl:text-base","text-neutral-900","dark:text-neutral-100","font-mono"],["colspan","2",1,"py-2","pr-1","border-b","border-neutral-200","dark:border-neutral-400","text-center","text-xs","xl:text-base","font-mono"],[1,"p-1","text-center","text-neutral-100","rounded-sm",3,"ngClass"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F9D0} Delta stint"),S(),C(4,"div",3)(5,"div",4),J(6,Tge,1,0)(7,Sge,1,0),k(8),S()()(),J(9,xge,24,6,"div",5),S()),t&2&&(O(),X("ngClass",We(7,Ege,r.isOpen)),O(4),X("ngClass",mi(9,Nq,r.deltaMilliseconds()<0,r.deltaMilliseconds()>0))("tooltipData",r.tooltipInfo)("tooltipPosition",r.tooltipPosition),O(),ne(r.deltaMilliseconds()<0?6:r.deltaMilliseconds()>0?7:-1),O(2),G(" ",r.getMillisecondsToTimeString(r.deltaMilliseconds())," "),O(),ne(r.isOpen?9:-1))},dependencies:[$n,He,Ed],encapsulation:2})};var Z0=class n{stintService=P(cn);pitService=P(an);stintOptimizerService=P(co);raceConfigService=P(Ze);tyreService=P(ao);timelineSteps=Z([]);constructor(){xe({stints:se(this.stintService.stints),pits:se(this.pitService.pits),remainingDriverChanges:se(this.pitService.remainingDriverChanges),raceConfig:se(this.raceConfigService.raceConfig),optimizedStint:se(this.stintOptimizerService.optimizedStint),remainingTyreChange:se(this.tyreService.remainingTyreChange),ping:Tt(1e3)}).pipe(Be()).subscribe(({stints:e,pits:t,remainingDriverChanges:r,raceConfig:i,optimizedStint:o,remainingTyreChange:s})=>{let a=this.createRealSteps(e,t);if(a=a.sort((c,l)=>c.start.getTime()-l.start.getTime()),o&&i){let c=this.createFutureSteps(a.at(a.length-1),r,o,i,s);a.push(...c)}a=a.sort((c,l)=>c.start.getTime()-l.start.getTime()),this.timelineSteps.set(a)})}createRealSteps(e,t){let r=[];return e.forEach(i=>{r.push(this.createTimelineStepFromStint(i))}),t.forEach(i=>{r.push(this.createTimelineStepFromPit(i))}),r}createTimelineStepFromPit(e){return{durationMills:e.exitTime?e.exitTime.toDate().getTime()-e.entryTime.toDate().getTime():void 0,end:e.exitTime?.toDate(),pit:e,start:e.entryTime.toDate(),status:e.exitTime?"DONE":"ACTIVE",stint:void 0,type:"PIT"}}createTimelineStepFromStint(e){return{durationMills:e.endDate?e.endDate.toDate().getTime()-e.startDate.toDate().getTime():void 0,end:e.endDate?.toDate(),pit:void 0,start:e.startDate.toDate(),status:e.endDate?"DONE":"ACTIVE",stint:e,type:"STINT"}}createFutureSteps(e,t,r,i,o){let s=[],a=this.calculateLastEndDateFromRealStep(e,r,i.pitConfig);if(e===void 0||e.type==="PIT"){let l=Vr(a,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(a,l,r.avgStintMillisecondsTime)),a=l}let c=Math.floor(t/2);for(let l=0;l<t;l++){let u=fd(i.pitConfig.minPitSeconds);o>0&&l>=c-Math.floor(o/2)&&l<c+Math.ceil(o/2)&&(u=fd(i.pitConfig.minPitWithTyreChangeSeconds),o--);let h=Vr(a,u);s.push(this.createFuturePitStep(a,h,u));let f=Vr(h,r.avgStintMillisecondsTime);s.push(this.createFutureStintStep(h,f,r.avgStintMillisecondsTime)),a=f}return s}createFutureStintStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"STINT"}}createFuturePitStep(e,t,r){return{durationMills:r,end:t,pit:void 0,start:e,status:"FUTURE",stint:void 0,type:"PIT"}}calculateLastEndDateFromRealStep(e,t,r){if(e===void 0)return new Date;let i;return e.type==="PIT"?i=ad(e.start,r.minPitSeconds):i=Vr(e.start,t.avgStintMillisecondsTime),i>new Date?i:new Date}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function Age(n,e){if(n&1&&(C(0,"div",2),k(1),S()),n&2){let t=W(),r=t.$implicit,i=t.index,o=W(2);X("ngClass",o.getStintColor(r))("tooltipData",o.getStintTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),O(),G(" ",o.getStintIcon(r)," ")}}function Rge(n,e){if(n&1&&(C(0,"div",3),k(1),S()),n&2){let t=W(),r=t.$implicit,i=t.index,o=W(2);X("ngClass",o.getPitColor(r))("tooltipData",o.getPitTooltipInfo(r))("tooltipPosition",o.getTooltipPosition(i)),O(),G(" ",o.getPitIcon(r)," ")}}function Mge(n,e){if(n&1&&(QE(0),J(1,Age,2,4,"div",2)(2,Rge,2,4,"div",3),XE()),n&2){let t=e.$implicit;O(),ne(t.type==="STINT"?1:2)}}function Pge(n,e){if(n&1&&(C(0,"div",0),J(1,Mge,3,1,"ng-container",1),S()),n&2){let t=W();O(),X("ngForOf",t.timelineSteps())}}var eb=class n{timelineService=P(Z0);driverService=P(si);timelineSteps=this.timelineService.timelineSteps;hide=!1;constructor(){this.onResize(),window.addEventListener("resize",this.onResize.bind(this))}onResize(){this.hide=window.innerWidth<=1460}getTooltipPosition(e){let t=this.timelineSteps().length;if(t<=9)return"below";let r=Math.floor(t/10);return e<r?"right":e>=t-r?"left":"below"}getStintColor(e){return e.status==="DONE"?"bg-blue-400":e.status==="FUTURE"?"bg-blue-100":"bg-green-500"}getStintIcon(e){return e.status==="ACTIVE"?"\u{1F3CE}\uFE0F":"\u23F3"}getStintTooltipInfo(e){return{footer:"",paragraphs:[this.getStintTimeInfo(e),this.getDriverInfo(e)].filter(Boolean),title:this.getTooltipTitle(e)}}getStintTimeInfo(e){let t=[];t.push("Start: "+Ri(e.start,"HH:mm:ss"));let r=e.stint?e.stint.optimumMilliseconds??0:0;switch(e.status){case"ACTIVE":t.push("On track: "+Tr(e.start,new Date)),t.push("Optimum: "+Mt(r)),t.push("End: ("+Ri(Vr(e.start,r),"HH:mm:ss")+")");break;case"DONE":t.push("On track: "+Tr(e.start,e.end)),t.push("Optimum: "+Mt(r)),t.push("End: "+(e.end?Ri(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Optimum: "+Mt(e.durationMills)),t.push("End: "+(e.end?Ri(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitColor(e){return e.status==="DONE"?"bg-amber-400":e.status==="FUTURE"?"bg-amber-100":"bg-green-500"}getPitIcon(e){return e.status==="ACTIVE"?"\u{1F17F}\uFE0F":"\u{1F468}\u{1F3FB}\u200D\u{1F527}"}getPitTooltipInfo(e){let t=[this.getPitTimeInfo(e),this.getDriverInfo(e)].filter(Boolean);return{footer:this.getPitFooter(e),paragraphs:t,title:this.getTooltipTitle(e)}}getPitTimeInfo(e){let t=[];switch(t.push("Enter: "+Ri(e.start,"HH:mm:ss")),e.status){case"ACTIVE":t.push("Time: "+Tr(e.start,new Date));break;case"DONE":t.push("Time: "+Mt(e.durationMills)),t.push("Exit: "+(e.end?Ri(e.end,"HH:mm:ss"):""));break;case"FUTURE":t.push("Time: "+Mt(e.durationMills)),t.push("Exit: "+(e.end?Ri(e.end,"HH:mm:ss"):""));break}return t.filter(Boolean).join(`
`)}getPitFooter(e){let t=[];return e.pit&&(e.pit.entryDriverId!==e.pit.exitDriverId&&t.push("\u{1F417}"),e.pit.refuel&&t.push("\u26FD\uFE0F"),e.pit.tyreChange&&t.push("\u{1F6DE}\uFE0F")),t.join(" | ")}getTooltipTitle(e){if(e.type==="STINT"){let t=e.stint?"("+e.stint.id+")":"";return e.status==="ACTIVE"?"Active stint "+t:e.status==="DONE"?"Stint "+t:"Future stint"}if(e.type==="PIT"){let t=e.pit?"("+e.pit.id+")":"";return e.status==="ACTIVE"?"Active pit "+t:e.status==="DONE"?"Pit "+t:"Future pit"}return""}getDriverInfo(e){if(e.type==="STINT"&&e.stint)return"Driver: "+this.getDriverRacingName(e.stint.driverId);if(e.type==="PIT"&&e.pit){let t="Driver in: "+this.getDriverRacingName(e.pit.entryDriverId),r="Driver out: "+this.getDriverRacingName(e.pit.exitDriverId);return t+`
`+r}return""}getDriverRacingName(e){let r=this.driverService.drivers().find(i=>i.id===e);return r?r.raceName:""}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-timeline"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[4,"ngFor","ngForOf"],["tooltip","",1,"flex-1","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"],["tooltip","",1,"flex-0","flex","px-1","py-3","justify-center","items-center",3,"ngClass","tooltipData","tooltipPosition"]],template:function(t,r){t&1&&J(0,Pge,2,1,"div",0),t&2&&ne(r.hide?-1:0)},dependencies:[$n,He,Ed],encapsulation:2})};function kge(n,e){if(n&1){let t=wn();C(0,"button",3),ie("click",function(){Fe(t);let i=W(2);return Le(i.startRace())}),k(1," Start race "),S()}}function Nge(n,e){if(n&1){let t=wn();C(0,"button",4),ie("click",function(){Fe(t);let i=W(2);return Le(i.endRace())}),k(1," End race "),S()}}function Oge(n,e){if(n&1&&(C(0,"div",0),J(1,kge,2,0,"button",1)(2,Nge,2,0,"button",2),S()),n&2){let t=W();O(),ne(t.willEndRaceDate()?-1:1),O(),ne(t.hideEndRaceButton?-1:2)}}var tb=class n{raceService=P(at);raceConfigService=P(Ze);raceManagerService=P(fa);activeRace=this.raceService.activeRace;activeRaceConfig=this.raceConfigService.raceConfig;willEndRaceDate=this.raceService.willEndRaceDate;hideEndRaceButton=!0;constructor(){xe({activeRace:se(this.activeRace),activeRaceConfig:se(this.activeRaceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({activeRace:e,activeRaceConfig:t})=>{e&&t?this.hideEndRaceButton=this.calculateHide(e,t):this.hideEndRaceButton=!0})}endRace(){this.raceManagerService.endRace()}calculateHide(e,t){if(e.endedAt!==null)return!0;let r=ls(e.startedAt.toDate(),t.durationHour);return m0(r,new Date)>t.endRaceThresholdSeconds||e.endedAt!==null}startRace(){let e=this.raceConfigService.raceConfig()?.startRaceDriverId;e&&this.raceManagerService.startRace(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-race-button"]],decls:1,vars:1,consts:[[1,"mb-3","flex","justify-center","items-center"],[1,"bg-green-500","hover:bg-green-700","text-neutral-100","font-bold","py-2","px-4","rounded-sm"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-neutral-100","font-bold","py-2","px-4","rounded-sm"],[1,"bg-green-500","hover:bg-green-700","text-neutral-100","font-bold","py-2","px-4","rounded-sm",3,"click"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-neutral-100","font-bold","py-2","px-4","rounded-sm",3,"click"]],template:function(t,r){t&1&&J(0,Oge,3,2,"div",0),t&2&&ne(!r.hideEndRaceButton||!r.willEndRaceDate()?0:-1)},encapsulation:2})};var Fge=n=>({"mb-2":n});function Lge(n,e){if(n&1){let t=wn();C(0,"li",6),ie("click",function(){let i=Fe(t).$implicit,o=W(2);return Le(o.openDocument(i.url))}),k(1),S()}if(n&2){let t=e.$implicit;O(),G(" ",t.name," ")}}function Vge(n,e){if(n&1&&(C(0,"div",3)(1,"ul",4),J(2,Lge,2,1,"li",5),S()()),n&2){let t=W();O(2),X("ngForOf",t.documents)}}var nb=class n{circuitName=ni.circuitName;isOpen=!1;documents=[{name:"Interfono cuffie",url:"assets/documents/interfono-cuffie.pdf"}];openDocument(e){window.open(e,"_blank")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-document"]],decls:5,vars:4,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex"],[1,"list-disc","list-inside"],["class","hover:underline cursor-pointer text-neutral-900 dark:text-neutral-100",3,"click",4,"ngFor","ngForOf"],[1,"hover:underline","cursor-pointer","text-neutral-900","dark:text-neutral-100",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F5C2}\uFE0F Document"),S()(),J(4,Vge,3,1,"div",3),S()),t&2&&(O(),X("ngClass",We(2,Fge,r.isOpen)),O(3),ne(r.isOpen?4:-1))},dependencies:[He,$n],encapsulation:2})};var jge=n=>({"mb-2":n});function Uge(n,e){n&1&&(C(0,"div",3)(1,"ul",4)(2,"li",5),k(3," \u{1F3A7} Spegnere interfono CUFFIE (premere tasto centrale e posteriore per 3 secondi) "),S(),C(4,"li",5),k(5," \u{1F3A7} Mettere interfono CUFFIE in Impostazioni (premere tasto centrale per 7 secondi - si accende il led rosso) "),S(),C(6,"li",5),k(7," \u{1F3A7} Mettere interfono CUFFIE in abbinamento (premere tasto centrale per 3 secondi - il led flasha) "),S(),C(8,"li",5),k(9," \u{1FA96} Accendere interfono CASCO (premere tasto davanti e basso per 3 secondi) "),S(),C(10,"li",5),k(11," \u{1FA96} Mettere interfono CASCO in abbinamento (premete tasto sopra per 3 secondi) "),S(),C(12,"li",5),k(13," \u{1FA96} Aspettare l'abbinamento (i led di entrambi i dispositivi smettono di flashare) "),S()()())}var rb=class n{isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-interphone-pairing"]],decls:5,vars:4,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex"],[1,"list-decimal","list-inside","text-neutral-900","dark:text-neutral-100"],[1,"mb-2"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F3A7} \u{1FA96} Interphone pairing procedure"),S()(),J(4,Uge,14,0,"div",3),S()),t&2&&(O(),X("ngClass",We(2,jge,r.isOpen)),O(3),ne(r.isOpen?4:-1))},dependencies:[He],encapsulation:2})};var ib=class n{raceService=P(at);pitService=P(an);raceConfigService=P(Ze);lastChangeDate=Z(void 0);emptyBatteryDate=Z(void 0);remainingBatteryPercentage=Z(100);constructor(){xe({lastInterphoneChangePit:se(this.pitService.lastInterphoneChangePit),race:se(this.raceService.activeRace),raceConfig:se(this.raceConfigService.raceConfig),ping:Tt(1e3)}).pipe(Be()).subscribe(({lastInterphoneChangePit:e,race:t,raceConfig:r})=>{this.lastChangeDate.set(this.getInterphoneChangeDate(e,t)),this.emptyBatteryDate.set(this.calculateEmptyBatteryDate(this.lastChangeDate(),r)),this.remainingBatteryPercentage.set(this.calculateRemainingBatteryPercentage(this.emptyBatteryDate(),r))})}getInterphoneChangeDate(e,t){if(e?.exitTime)return e.exitTime.toDate();if(t)return t.startedAt.toDate()}calculateEmptyBatteryDate(e,t){if(e&&t)return ds(e,t.interphoneBatteryDurationMinute)}calculateRemainingBatteryPercentage(e,t){if(e&&t){let i=ld(e,new Date)/t.interphoneBatteryDurationMinute*100,o=Math.max(0,Math.min(i,100));return parseFloat(o.toFixed(0))}return 100}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Bge=n=>({"mb-2":n}),$ge=n=>({"animate-bounce":n});function Hge(n,e){if(n&1&&(k(0),gi(1,"date")),n&2){let t=W(2);G(" ",yi(1,1,t.lastChangeTime(),"HH:mm:ss")," ")}}function zge(n,e){n&1&&k(0," --:--:-- ")}function Wge(n,e){if(n&1&&(k(0),gi(1,"date")),n&2){let t=W(2);G(" ",yi(1,1,t.emptyBatteryDate(),"HH:mm:ss")," ")}}function qge(n,e){n&1&&k(0," --:--:-- ")}function Gge(n,e){if(n&1){let t=wn();C(0,"div",6)(1,"div")(2,"div",7),k(3,"Last change time"),S(),C(4,"div",8),J(5,Hge,2,4)(6,zge,1,0),S()(),C(7,"div")(8,"div",9),k(9,"Since last change"),S(),C(10,"div",10),k(11),S()()(),le(12,"hr",11),C(13,"div",6)(14,"div")(15,"div",7),k(16,"Empty time"),S(),C(17,"div",8),J(18,Wge,2,4)(19,qge,1,0),S()(),C(20,"div")(21,"div",9),k(22,"Empty in"),S(),C(23,"div",10),k(24),S()()(),le(25,"hr",11),C(26,"div",12)(27,"div")(28,"div",9),k(29,"Battery duration (min)"),S(),C(30,"div",13)(31,"button",14),ie("click",function(){Fe(t);let i=W();return Le(i.increaseBatteryDuration())}),k(32," + "),S(),C(33,"form",15),ie("ngSubmit",function(){Fe(t);let i=W();return Le(i.onSubmit())}),C(34,"input",16),gr("ngModelChange",function(i){Fe(t);let o=W();return Rr(o.batteryDurationMinute,i)||(o.batteryDurationMinute=i),Le(i)}),S()(),C(35,"button",17),ie("click",function(){Fe(t);let i=W();return Le(i.decreaseBatteryDuration())}),k(36," - "),S()()()()}if(n&2){let t=W();O(5),ne(t.lastChangeTime()?5:6),O(6),G(" ",t.sinceLastChange()," "),O(7),ne(t.emptyBatteryDate()?18:19),O(6),G(" ",t.emptyBatteryCountdown()," "),O(10),mr("ngModel",t.batteryDurationMinute)}}var ob=class n{raceConfigService=P(Ze);interphoneService=P(ib);remainingBatteryPercentage=this.interphoneService.remainingBatteryPercentage;emptyBatteryDate=this.interphoneService.emptyBatteryDate;lastChangeTime=this.interphoneService.lastChangeDate;emptyBatteryCountdown=Ie(()=>ps(this.emptyBatteryDate()));sinceLastChange=Ie(()=>Tr(this.lastChangeTime(),new Date));warning=Ie(()=>this.remainingBatteryPercentage()<=20);remainingColor=Ie(()=>this.getRemainingColor(this.remainingBatteryPercentage()));isOpen=!1;batteryDurationMinute=0;constructor(){Mr(()=>{let e=this.raceConfigService.raceConfig();e&&(this.batteryDurationMinute=e.interphoneBatteryDurationMinute)})}onSubmit(){this.raceConfigService.updateInterphoneBatteryDurationMinute(this.batteryDurationMinute)}increaseBatteryDuration(){this.raceConfigService.updateInterphoneBatteryDurationMinute(this.batteryDurationMinute+1)}decreaseBatteryDuration(){this.raceConfigService.updateInterphoneBatteryDurationMinute(this.batteryDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-interphone"]],decls:9,vars:10,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-neutral-100","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-neutral-500","dark:text-neutral-400"],[1,"text-neutral-900","dark:text-neutral-100","font-mono"],[1,"text-neutral-500","dark:text-neutral-400","text-right"],[1,"text-neutral-900","dark:text-neutral-100","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-center"],[1,"flex","justify-end"],[1,"bg-neutral-200","hover:bg-neutral-400","active:bg-neutral-500","text-neutral-900","px-4","mr-1","rounded-sm",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right","text-neutral-900","dark:text-neutral-100",3,"ngModelChange","ngModel"],[1,"bg-neutral-200","hover:bg-neutral-400","active:bg-neutral-500","text-neutral-900","px-4","ml-1","rounded-sm",3,"click"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F50A} Interphone"),S(),C(4,"div",3)(5,"div",4),k(6),S(),le(7,"app-battery",5),S()(),J(8,Gge,37,5),S()),t&2&&(O(),X("ngClass",We(6,Bge,r.isOpen)),O(3),X("ngClass",We(8,$ge,r.warning())),O(),X("ngClass",r.remainingColor()),O(),G(" Empty: ",r.emptyBatteryCountdown()," "),O(),X("charge",r.remainingBatteryPercentage()),O(),ne(r.isOpen?8:-1))},dependencies:[bd,Ls,fo,ho,pa,Fc,lo,uo,Vc,Lc,Pi,Mi,N0,He],encapsulation:2})};var sb=class n{lapService=P(ma);worker;paces=Z(new Map);cumulatedTimeLaps=Z(new Map);simulatedTimeLaps=Z(new Map);teamNameByRaceNumber=Z(new Map);constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL("worker-OHO37V4F.js",import.meta.url),{type:"module"}),this.worker.onmessage=({data:e})=>{this.paces.set(e.paces),this.cumulatedTimeLaps.set(e.cumulatedTimeLaps)}),xe({laps:se(this.lapService.laps)}).pipe(Be()).subscribe(({laps:e})=>{this.worker&&this.worker.postMessage(e)})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kge=n=>({"mb-2":n});function Yge(n,e){if(n&1){let t=wn();C(0,"div",3)(1,"button",4),ie("click",function(){Fe(t);let i=W();return Le(i.checkMissingLaps())}),k(2," Check missing laps "),S(),C(3,"canvas",5),ie("chartHover",function(i){Fe(t);let o=W();return Le(o.chartHovered(i))})("chartClick",function(i){Fe(t);let o=W();return Le(o.chartClicked(i))}),S()()}if(n&2){let t=W();O(3),X("data",t.lineChartData)("options",t.lineChartOptions)("type",t.lineChartType)}}var ab=class n{raceService=P(at);lapService=P(ma);gapChartService=P(sb);worker;isOpen=!1;cumulatedTimeLaps=this.gapChartService.cumulatedTimeLaps;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL("worker-MRXFCAZY.js",import.meta.url),{type:"module"}),this.worker.onmessage=({data:e})=>{this.lineChartData=e.chartData}),xe({cumulatedTimeLaps:se(this.cumulatedTimeLaps)}).pipe(Be()).subscribe(({cumulatedTimeLaps:e})=>{this.worker&&this.worker.postMessage(e)})}lineChartData={datasets:[],labels:[]};lineChartOptions={scales:{y:{position:"left"}},plugins:{legend:{display:!0}},animation:!1,animations:{colors:!1,x:!1},transitions:{active:{animation:{duration:0}}}};lineChartType="line";chartClicked({event:e,active:t}){console.log(e,t)}chartHovered({event:e,active:t}){console.log(e,t)}checkMissingLaps(){this.lapService.checkMissingLaps()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-gap-chart"]],decls:5,vars:4,consts:[[1,"bg-neutral-50","dark:bg-neutral-800","shadow-md","dark:shadow-white/20","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold","text-neutral-900","dark:text-neutral-100"],[1,"flex","flex-col"],[1,"bg-green-500","hover:bg-green-700","text-neutral-100","font-bold","py-2","px-4","rounded-sm",3,"click"],["baseChart","",3,"chartHover","chartClick","data","options","type"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1),ie("click",function(){return r.isOpen=!r.isOpen}),C(2,"div",2),k(3,"\u{1F4C8} Gap chart"),S()(),J(4,Yge,4,3,"div",3),S()),t&2&&(O(),X("ngClass",We(2,Kge,r.isOpen)),O(3),ne(r.isOpen?4:-1))},dependencies:[He,_W],encapsulation:2})};var cb=class n{circuitName=ni.circuitName;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-root"]],decls:48,vars:4,consts:[[1,"w-full","h-full","min-h-full","dark:bg-neutral-900","bg-neutral-200"],[1,"p-4","grid","grid-cols-1","lg:grid-cols-3","gap-3"],[1,"text-xl","md:text-3xl","dark:text-neutral-100","text-neutral-900","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"flex-col"],[1,"lg:mb-4"],[1,"p-4"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/lignano/logo.png","alt","Circuito",1,"max-w-48","md:max-w-xs","m-4"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-1"],["alt","Mappa 1",1,"max-w-sm","md:max-w-xl","2xl:max-w-4xl",3,"src"],["alt","Mappa 2",1,"max-w-sm","md:max-w-xl","2xl:max-w-4xl",3,"src"]],template:function(t,r){t&1&&(C(0,"div",0)(1,"div",1)(2,"div",2),k(3,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),S(),C(4,"div",3),le(5,"app-race"),S()(),le(6,"app-race-button")(7,"app-timeline"),C(8,"div",4)(9,"div",5)(10,"div",6),le(11,"app-pit-lane"),S(),C(12,"div",6),le(13,"app-interphone-pairing"),S(),C(14,"div",6),le(15,"app-driver-change"),S(),C(16,"div",6),le(17,"app-tyre-change-window"),S(),C(18,"div",6),le(19,"app-pit"),S()(),C(20,"div",7)(21,"div",6),le(22,"app-fuel"),S(),C(23,"div",6),le(24,"app-stint-optimizer"),S(),C(25,"div",6),le(26,"app-lap"),S(),C(27,"div",6),le(28,"app-driver"),S(),C(29,"div",8),le(30,"app-document"),S()(),C(31,"div",7)(32,"div",6),le(33,"app-interphone"),S(),C(34,"div",6),le(35,"app-active-stint"),S(),C(36,"div",6),le(37,"app-stint"),S(),C(38,"div",6),le(39,"app-delta-stint"),S()()(),C(40,"div",9),le(41,"app-gap-chart"),S(),C(42,"div",10),le(43,"img",11),C(44,"div",12),le(45,"img",13)(46,"img",14),S()()(),le(47,"router-outlet")),t&2&&(O(45),$g("src","assets/",r.circuitName,"/mappa1.jpg",kE),O(),$g("src","assets/",r.circuitName,"/mappa2.jpg",kE))},dependencies:[XI,F0,L0,j0,U0,B0,z0,W0,q0,G0,K0,Y0,J0,eb,tb,nb,rb,ob,ab],encapsulation:2})};xO(cb,bW).catch(n=>console.error(n));
