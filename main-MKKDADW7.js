import{$ as _n,A as yn,B as Dr,C as Nd,D as Lt,E as RD,F as ND,G as Sr,H as ys,I as Yc,J as Zc,K as Jc,L as _s,M as xD,N as MD,O as PD,P as kD,Q as Xc,R as eu,S as Ee,T as _t,U as Jt,V as Ar,W as jm,X as xd,Y as vt,Z as bt,_ as ti,a as U,aa as OD,b as ye,ba as Dt,c as Oi,ca as Md,d as _,da as Y,e as j,ea as FD,f as Fo,g as ID,h as ED,i as CD,j as TD,k as bD,l as Fi,m as Vm,n as Um,o as Lo,p as Zt,q as Wc,r as DD,s as Kc,t as Rd,u as SD,v as br,w as AD,x as ei,y as ms,z as Qc}from"./chunk-VUN4IAWB.js";function LD(n,e){return Object.is(n,e)}var kt=null,tu=!1,Pd=1,Rr=Symbol("SIGNAL");function Ce(n){let e=kt;return kt=n,e}function VD(){return kt}function SL(){return tu}var Vo={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function qm(n){if(tu)throw new Error("");if(kt===null)return;kt.consumerOnSignalRead(n);let e=kt.nextProducerIndex++;if(Ud(kt),e<kt.producerNode.length&&kt.producerNode[e]!==n&&nu(kt)){let t=kt.producerNode[e];Vd(t,kt.producerIndexOfThis[e])}kt.producerNode[e]!==n&&(kt.producerNode[e]=n,kt.producerIndexOfThis[e]=nu(kt)?HD(n,kt,e):0),kt.producerLastReadVersion[e]=n.version}function AL(){Pd++}function UD(n){if(!(nu(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Pd)){if(!n.producerMustRecompute(n)&&!Fd(n)){n.dirty=!1,n.lastCleanEpoch=Pd;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Pd}}function jD(n){if(n.liveConsumerNode===void 0)return;let e=tu;tu=!0;try{for(let t of n.liveConsumerNode)t.dirty||$D(t)}finally{tu=e}}function BD(){return kt?.consumerAllowSignalWrites!==!1}function $D(n){n.dirty=!0,jD(n),n.consumerMarkedDirty?.(n)}function ru(n){return n&&(n.nextProducerIndex=0),Ce(n)}function Od(n,e){if(Ce(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(nu(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Vd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Fd(n){Ud(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(UD(t),r!==t.version))return!0}return!1}function Ld(n){if(Ud(n),nu(n))for(let e=0;e<n.producerNode.length;e++)Vd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function HD(n,e,t){if(qD(n),n.liveConsumerNode.length===0&&GD(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=HD(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Vd(n,e){if(qD(n),n.liveConsumerNode.length===1&&GD(n))for(let r=0;r<n.producerNode.length;r++)Vd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Ud(i),i.producerIndexOfThis[r]=e}}function nu(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Ud(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function qD(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function GD(n){return n.producerNode!==void 0}function zD(n){let e=Object.create(RL);e.computation=n;let t=()=>{if(UD(e),qm(e),e.value===kd)throw e.error;return e.value};return t[Rr]=e,t}var Bm=Symbol("UNSET"),$m=Symbol("COMPUTING"),kd=Symbol("ERRORED"),RL=ye(U({},Vo),{value:Bm,dirty:!0,error:null,equal:LD,producerMustRecompute(n){return n.value===Bm||n.value===$m},producerRecomputeValue(n){if(n.value===$m)throw new Error("Detected cycle in computations.");let e=n.value;n.value=$m;let t=ru(n),r;try{r=n.computation()}catch(i){r=kd,n.error=i}finally{Od(n,t)}if(e!==Bm&&e!==kd&&r!==kd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function NL(){throw new Error}var WD=NL;function KD(){WD()}function QD(n){WD=n}var xL=null;function YD(n){let e=Object.create(JD);e.value=n;let t=()=>(qm(e),e.value);return t[Rr]=e,t}function Gm(n,e){BD()||KD(),n.equal(n.value,e)||(n.value=e,ML(n))}function ZD(n,e){BD()||KD(),Gm(n,e(n.value))}var JD=ye(U({},Vo),{equal:LD,value:void 0});function ML(n){n.version++,AL(),jD(n),xL?.()}function XD(n,e,t){let r=Object.create(PL);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Ld(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Hm)}let a=()=>{if(r.fn===null)return;if(SL())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!Fd(r))return;r.hasRun=!0;let c=ru(r);try{r.cleanupFn(),r.cleanupFn=Hm,r.fn(i)}finally{Od(r,c)}};return r.ref={notify:()=>$D(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Rr]:r},r.ref}var Hm=()=>{},PL=ye(U({},Vo),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Hm});function le(n){return typeof n=="function"}function Uo(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var jd=Uo(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function vs(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ft=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(s){e=s instanceof jd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{e0(s)}catch(o){e=e??[],o instanceof jd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new jd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)e0(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&vs(t,e)}remove(e){let{_finalizers:t}=this;t&&vs(t,e),e instanceof n&&e._removeParent(this)}};ft.EMPTY=(()=>{let n=new ft;return n.closed=!0,n})();var zm=ft.EMPTY;function Bd(n){return n instanceof ft||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function e0(n){le(n)?n():n.unsubscribe()}var lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var jo={setTimeout(n,e,...t){let{delegate:r}=jo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=jo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function $d(n){jo.setTimeout(()=>{let{onUnhandledError:e}=lr;if(e)e(n);else throw n})}function iu(){}var t0=Wm("C",void 0,void 0);function n0(n){return Wm("E",void 0,n)}function r0(n){return Wm("N",n,void 0)}function Wm(n,e,t){return{kind:n,value:e,error:t}}var ws=null;function Bo(n){if(lr.useDeprecatedSynchronousErrorHandling){let e=!ws;if(e&&(ws={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=ws;if(ws=null,t)throw r}}else n()}function i0(n){lr.useDeprecatedSynchronousErrorHandling&&ws&&(ws.errorThrown=!0,ws.error=n)}var Is=class extends ft{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Bd(e)&&e.add(this)):this.destination=FL}static create(e,t,r){return new $o(e,t,r)}next(e){this.isStopped?Qm(r0(e),this):this._next(e)}error(e){this.isStopped?Qm(n0(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Qm(t0,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},kL=Function.prototype.bind;function Km(n,e){return kL.call(n,e)}var Ym=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Hd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Hd(r)}else Hd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Hd(t)}}},$o=class extends Is{constructor(e,t,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&lr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Km(e.next,s),error:e.error&&Km(e.error,s),complete:e.complete&&Km(e.complete,s)}):i=e}this.destination=new Ym(i)}};function Hd(n){lr.useDeprecatedSynchronousErrorHandling?i0(n):$d(n)}function OL(n){throw n}function Qm(n,e){let{onStoppedNotification:t}=lr;t&&jo.setTimeout(()=>t(n,e))}var FL={closed:!0,next:iu,error:OL,complete:iu};var Ho=typeof Symbol=="function"&&Symbol.observable||"@@observable";function un(n){return n}function qd(...n){return Zm(n)}function Zm(n){return n.length===0?un:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=VL(t)?t:new $o(t,r,i);return Bo(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=s0(r),new r((i,s)=>{let o=new $o({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Ho](){return this}pipe(...t){return Zm(t)(this)}toPromise(t){return t=s0(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function s0(n){var e;return(e=n??lr.Promise)!==null&&e!==void 0?e:Promise}function LL(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}function VL(n){return n&&n instanceof Is||LL(n)&&Bd(n)}function Jm(n){return le(n?.lift)}function pe(n){return e=>{if(Jm(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new su(n,e,t,r,i)}var su=class extends Is{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function qo(){return pe((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Go=class extends ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Jm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ft;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ft.EMPTY)}return e}refCount(){return qo()(this)}};var o0=Uo(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var at=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Gd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new o0}next(t){Bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Bo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?zm:(this.currentObservers=null,s.push(t),new ft(()=>{this.currentObservers=null,vs(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new Gd(e,t),n})(),Gd=class extends at{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:zm}};var Gt=class extends at{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ou={now(){return(ou.delegate||Date).now()},delegate:void 0};var au=class extends at{constructor(e=1/0,t=1/0,r=ou){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var zd=class extends ft{constructor(e,t){super()}schedule(e,t=0){return this}};var cu={setInterval(n,e,...t){let{delegate:r}=cu;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=cu;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var zo=class extends zd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return cu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&cu.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,vs(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Wo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Wo.now=ou.now;var Ko=class extends Wo{constructor(e,t=Wo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Qo=new Ko(zo),Xm=Qo;var Wd=class extends zo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Kd=class extends Ko{};var ey=new Kd(Wd);var Mn=new ae(n=>n.complete());function Qd(n){return n&&le(n.schedule)}function a0(n){return n[n.length-1]}function Yd(n){return le(a0(n))?n.pop():void 0}function Li(n){return Qd(a0(n))?n.pop():void 0}function ty(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function u0(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function c0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Es(n){return this instanceof Es?(this.v=n,this):new Es(n)}function l0(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(w){return Promise.resolve(w).then(y,f)}}function a(y,w){r[y]&&(i[y]=function(R){return new Promise(function(S,O){s.push([y,R,S,O])>1||c(y,R)})},w&&(i[y]=w(i[y])))}function c(y,w){try{l(r[y](w))}catch(R){g(s[0][3],R)}}function l(y){y.value instanceof Es?Promise.resolve(y.value.v).then(d,f):g(s[0][2],y)}function d(y){c("next",y)}function f(y){c("throw",y)}function g(y,w){y(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function d0(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof c0=="function"?c0(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var Zd=n=>n&&typeof n.length=="number"&&typeof n!="function";function Jd(n){return le(n?.then)}function Xd(n){return le(n[Ho])}function eh(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function th(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function UL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var nh=UL();function rh(n){return le(n?.[nh])}function ih(n){return l0(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Es(t.read());if(i)return yield Es(void 0);yield yield Es(r)}}finally{t.releaseLock()}})}function sh(n){return le(n?.getReader)}function pt(n){if(n instanceof ae)return n;if(n!=null){if(Xd(n))return jL(n);if(Zd(n))return BL(n);if(Jd(n))return $L(n);if(eh(n))return h0(n);if(rh(n))return HL(n);if(sh(n))return qL(n)}throw th(n)}function jL(n){return new ae(e=>{let t=n[Ho]();if(le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function BL(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function $L(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,$d)})}function HL(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function h0(n){return new ae(e=>{GL(n,e).catch(t=>e.error(t))})}function qL(n){return h0(ih(n))}function GL(n,e){var t,r,i,s;return u0(this,void 0,void 0,function*(){try{for(t=d0(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function vn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function Vi(n,e=0){return pe((t,r)=>{t.subscribe(de(r,i=>vn(r,n,()=>r.next(i),e),()=>vn(r,n,()=>r.complete(),e),i=>vn(r,n,()=>r.error(i),e)))})}function Ui(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function f0(n,e){return pt(n).pipe(Ui(e),Vi(e))}function p0(n,e){return pt(n).pipe(Ui(e),Vi(e))}function g0(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function m0(n,e){return new ae(t=>{let r;return vn(t,e,()=>{r=n[nh](),vn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function oh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{vn(t,e,()=>{let r=n[Symbol.asyncIterator]();vn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function y0(n,e){return oh(ih(n),e)}function _0(n,e){if(n!=null){if(Xd(n))return f0(n,e);if(Zd(n))return g0(n,e);if(Jd(n))return p0(n,e);if(eh(n))return oh(n,e);if(rh(n))return m0(n,e);if(sh(n))return y0(n,e)}throw th(n)}function it(n,e){return e?_0(n,e):pt(n)}function X(...n){let e=Li(n);return it(n,e)}function Yo(n,e){let t=le(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function ny(n){return!!n&&(n instanceof ae||le(n.lift)&&le(n.subscribe))}var ni=Uo(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function v0(n){return n instanceof Date&&!isNaN(n)}function K(n,e){return pe((t,r)=>{let i=0;t.subscribe(de(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:zL}=Array;function WL(n,e){return zL(e)?n(...e):n(e)}function ah(n){return K(e=>WL(n,e))}var{isArray:KL}=Array,{getPrototypeOf:QL,prototype:YL,keys:ZL}=Object;function ch(n){if(n.length===1){let e=n[0];if(KL(e))return{args:e,keys:null};if(JL(e)){let t=ZL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function JL(n){return n&&typeof n=="object"&&QL(n)===YL}function uh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Ke(...n){let e=Li(n),t=Yd(n),{args:r,keys:i}=ch(n);if(r.length===0)return it([],e);let s=new ae(XL(r,e,i?o=>uh(i,o):un));return t?s.pipe(ah(t)):s}function XL(n,e,t=un){return r=>{w0(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)w0(e,()=>{let l=it(n[c],e),d=!1;l.subscribe(de(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function w0(n,e,t){n?vn(t,n,e):e()}function I0(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},y=R=>l<r?w(R):c.push(R),w=R=>{s&&e.next(R),l++;let S=!1;pt(t(R,d++)).subscribe(de(e,O=>{i?.(O),s?y(O):e.next(O)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let O=c.shift();o?vn(e,o,()=>w(O)):w(O)}g()}catch(O){e.error(O)}}))};return n.subscribe(de(e,y,()=>{f=!0,g()})),()=>{a?.()}}function wt(n,e,t=1/0){return le(e)?wt((r,i)=>K((s,o)=>e(r,s,i,o))(pt(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>I0(r,i,n,t)))}function ry(n=1/0){return wt(un,n)}function E0(){return ry(1)}function Zo(...n){return E0()(it(n,Li(n)))}function lh(n){return new ae(e=>{pt(n()).subscribe(e)})}function iy(...n){let e=Yd(n),{args:t,keys:r}=ch(n),i=new ae(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;pt(t[d]).subscribe(de(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?uh(r,a):a),s.complete())}))}});return e?i.pipe(ah(e)):i}function sy(n=0,e,t=Xm){let r=-1;return e!=null&&(Qd(e)?t=e:r=e),new ae(i=>{let s=v0(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function ln(n=0,e=Qo){return n<0&&(n=0),sy(n,n,e)}function dn(n,e){return pe((t,r)=>{let i=0;t.subscribe(de(r,s=>n.call(e,s,i++)&&r.next(s)))})}function ji(n){return pe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(de(t,void 0,void 0,o=>{s=pt(n(o,ji(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function C0(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(de(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Cs(n,e){return le(e)?wt(n,e,1):wt(n,1)}function Bi(n){return pe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ri(n){return n<=0?()=>Mn:pe((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function oy(n){return K(()=>n)}function dh(n,e=un){return n=n??eV,pe((t,r)=>{let i,s=!0;t.subscribe(de(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function eV(n,e){return n===e}function hh(n=tV){return pe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function tV(){return new ni}function uu(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Nr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):un,ri(1),t?Bi(e):hh(()=>new ni))}function ay(n,e,t,r){return pe((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(s)},l=w=>c(R=>R.error(w)),d=0,f=!1,g=new su(s,w=>{try{let R=n(w),S=a.get(R);if(!S){a.set(R,S=r?r():new at);let O=y(R,S);if(s.next(O),t){let q=de(S,()=>{S.complete(),q?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(pt(t(O)).subscribe(q))}}S.next(o?o(w):w)}catch(R){l(R)}},()=>c(w=>w.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function y(w,R){let S=new ae(O=>{d++;let q=R.subscribe(O);return()=>{q.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return S.key=w,S}})}function Jo(n){return n<=0?()=>Mn:pe((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cy(n,e){let t=arguments.length>=2;return r=>r.pipe(n?dn((i,s)=>n(i,s,r)):un,Jo(1),t?Bi(e):hh(()=>new ni))}function fh(){return pe((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function ph(n,e){return pe(C0(n,e,arguments.length>=2,!0))}function Xo(...n){let e=Li(n);return pe((t,r)=>{(e?Zo(n,t,e):Zo(n,t)).subscribe(r)})}function wn(n,e){return pe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(de(r,c=>{i?.unsubscribe();let l=0,d=s++;pt(n(c,d)).subscribe(i=de(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Vt(n){return pe((e,t)=>{pt(n).subscribe(de(t,()=>t.complete(),iu)),!t.closed&&e.subscribe(t)})}function Ot(n,e,t){let r=le(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(de(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):un}var nV="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,t){super(p_(e,t)),this.code=e}};function p_(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Eu(n){return{toString:n}.toString()}var gh="__parameters__";function rV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cS(n,e,t){return Eu(()=>{let r=rV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(gh)?c[gh]:Object.defineProperty(c,gh,{value:[]})[gh];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var lu=globalThis;function qe(n){for(let e in n)if(n[e]===qe)return e;throw Error("Could not find renamed property on target object.")}function iV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function En(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(En).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function T0(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var sV=qe({__forward_ref__:qe});function Qn(n){return n.__forward_ref__=Qn,n.toString=function(){return En(this())},n}function hn(n){return uS(n)?n():n}function uS(n){return typeof n=="function"&&n.hasOwnProperty(sV)&&n.__forward_ref__===Qn}function B(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Os(n){return{providers:n.providers||[],imports:n.imports||[]}}function Yh(n){return b0(n,dS)||b0(n,hS)}function lS(n){return Yh(n)!==null}function b0(n,e){return n.hasOwnProperty(e)?n[e]:null}function oV(n){let e=n&&(n[dS]||n[hS]);return e||null}function D0(n){return n&&(n.hasOwnProperty(S0)||n.hasOwnProperty(aV))?n[S0]:null}var dS=qe({\u0275prov:qe}),S0=qe({\u0275inj:qe}),hS=qe({ngInjectableDef:qe}),aV=qe({ngInjectorDef:qe}),$=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=B({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function fS(n){return n&&!!n.\u0275providers}var cV=qe({\u0275cmp:qe}),uV=qe({\u0275dir:qe}),lV=qe({\u0275pipe:qe}),dV=qe({\u0275mod:qe}),bh=qe({\u0275fac:qe}),fu=qe({__NG_ELEMENT_ID__:qe}),A0=qe({__NG_ENV_ID__:qe});function pu(n){return typeof n=="string"?n:n==null?"":String(n)}function hV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():pu(n)}function fV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Q(-200,n)}function g_(n,e){throw new Q(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),Ey;function pS(){return Ey}function In(n){let e=Ey;return Ey=n,e}function gS(n,e,t){let r=Yh(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;g_(n,"Injector")}var pV={},gu=pV,Cy="__NG_DI_FLAG__",Dh="ngTempTokenPath",gV="ngTokenPath",mV=/\n/gm,yV="\u0275",R0="__source",ra;function _V(){return ra}function $i(n){let e=ra;return ra=n,e}function vV(n,e=ge.Default){if(ra===void 0)throw new Q(-203,!1);return ra===null?gS(n,void 0,e):ra.get(n,e&ge.Optional?null:void 0,e)}function ne(n,e=ge.Default){return(pS()||vV)(hn(n),e)}function x(n,e=ge.Default){return ne(n,Zh(e))}function Zh(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Ty(n){let e=[];for(let t=0;t<n.length;t++){let r=hn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=ge.Default;for(let o=0;o<r.length;o++){let a=r[o],c=wV(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ne(i,s))}else e.push(ne(r))}return e}function mS(n,e){return n[Cy]=e,n.prototype[Cy]=e,n}function wV(n){return n[Cy]}function IV(n,e,t,r){let i=n[Dh];throw e[R0]&&i.unshift(e[R0]),n.message=EV(`
`+n.message,i,t,r),n[gV]=i,n[Dh]=null,n}function EV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==yV?n.slice(2):n;let i=En(e);if(Array.isArray(e))i=e.map(En).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):En(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(mV,`
  `)}`}var se=mS(cS("Optional"),8);var yS=mS(cS("SkipSelf"),4);function Ds(n,e){let t=n.hasOwnProperty(bh);return t?n[bh]:null}function m_(n,e){n.forEach(t=>Array.isArray(t)?m_(t,e):e(t))}function _S(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Sh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function CV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function TV(n,e,t){let r=Cu(n,e);return r>=0?n[r|1]=t:(r=~r,CV(n,r,e,t)),r}function uy(n,e){let t=Cu(n,e);if(t>=0)return n[t|1]}function Cu(n,e){return bV(n,e,1)}function bV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var sa={},qn=[],oa=new $(""),vS=new $("",-1),wS=new $(""),Ah=class{get(e,t=gu){if(t===gu){let r=new Error(`NullInjectorError: No provider for ${En(e)}!`);throw r.name="NullInjectorError",r}return t}},IS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(IS||{}),Pr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pr||{}),Gi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Gi||{});function DV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function by(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];AV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function SV(n){return n===3||n===4||n===6}function AV(n){return n.charCodeAt(0)===64}function mu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?N0(n,t,i,null,e[++r]):N0(n,t,i,null,null))}}return n}function N0(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var ES="ng-template";function RV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&DV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(y_(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function y_(n){return n.type===4&&n.value!==ES}function NV(n,e,t){let r=n.type===4&&!t?ES:n.value;return e===r}function xV(n,e,t){let r=4,i=n.attrs,s=i!==null?kV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!dr(r)&&!dr(c))return!1;if(o&&dr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!NV(n,c,t)||c===""&&e.length===1){if(dr(r))return!1;o=!0}}else if(r&8){if(i===null||!RV(n,i,c,t)){if(dr(r))return!1;o=!0}}else{let l=e[++a],d=MV(c,i,y_(n),t);if(d===-1){if(dr(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(dr(r))return!1;o=!0}}}}return dr(r)||o}function dr(n){return(n&1)===0}function MV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return OV(e,n)}function PV(n,e,t=!1){for(let r=0;r<e.length;r++)if(xV(n,e[r],t))return!0;return!1}function kV(n){for(let e=0;e<n.length;e++){let t=n[e];if(SV(t))return e}return n.length}function OV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function x0(n,e){return n?":not("+e.trim()+")":e}function FV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!dr(o)&&(e+=x0(s,i),i=""),r=o,s=s||!dr(r);t++}return i!==""&&(e+=x0(s,i)),e}function LV(n){return n.map(FV).join(",")}function VV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!dr(i))break;i=s}r++}return{attrs:e,classes:t}}function Ut(n){return Eu(()=>{let e=AS(n),t=ye(U({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===IS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pr.Emulated,styles:n.styles||qn,_:null,schemas:n.schemas||null,tView:null,id:""});RS(t);let r=n.dependencies;return t.directiveDefs=P0(r,!1),t.pipeDefs=P0(r,!0),t.id=BV(t),t})}function UV(n){return Ss(n)||TS(n)}function jV(n){return n!==null}function Fs(n){return Eu(()=>({type:n.type,bootstrap:n.bootstrap||qn,declarations:n.declarations||qn,imports:n.imports||qn,exports:n.exports||qn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function M0(n,e){if(n==null)return sa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Gi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Gi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function ct(n){return Eu(()=>{let e=AS(n);return RS(e),e})}function CS(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Ss(n){return n[cV]||null}function TS(n){return n[uV]||null}function bS(n){return n[lV]||null}function DS(n){let e=Ss(n)||TS(n)||bS(n);return e!==null?e.standalone:!1}function SS(n,e){let t=n[dV]||null;if(!t&&e===!0)throw new Error(`Type ${En(n)} does not have '\u0275mod' property.`);return t}function AS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||sa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||qn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:M0(n.inputs,e),outputs:M0(n.outputs),debugInfo:null}}function RS(n){n.features?.forEach(e=>e(n))}function P0(n,e){if(!n)return null;let t=e?bS:UV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(jV)}function BV(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Qe(n){return{\u0275providers:n}}function $V(...n){return{\u0275providers:NS(!0,n),\u0275fromNgModule:!0}}function NS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return m_(e,o=>{let a=o;Dy(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&xS(i,s),t}function xS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];__(i,s=>{e(s,r)})}}function Dy(n,e,t,r){if(n=hn(n),!n)return!1;let i=null,s=D0(n),o=!s&&Ss(n);if(!s&&!o){let c=n.ngModule;if(s=D0(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)Dy(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{m_(s.imports,d=>{Dy(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&xS(l,e)}if(!a){let l=Ds(i)||(()=>new i);e({provide:i,useFactory:l,deps:qn},i),e({provide:wS,useValue:i,multi:!0},i),e({provide:oa,useValue:()=>ne(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;__(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function __(n,e){for(let t of n)fS(t)&&(t=t.\u0275providers),Array.isArray(t)?__(t,e):e(t)}var HV=qe({provide:String,useValue:qe});function MS(n){return n!==null&&typeof n=="object"&&HV in n}function qV(n){return!!(n&&n.useExisting)}function GV(n){return!!(n&&n.useFactory)}function aa(n){return typeof n=="function"}function zV(n){return!!n.useClass}var Jh=new $(""),vh={},WV={},ly;function v_(){return ly===void 0&&(ly=new Ah),ly}var zn=class{},yu=class extends zn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ay(e,o=>this.processProvider(o)),this.records.set(vS,ea(void 0,this)),i.has("environment")&&this.records.set(zn,ea(void 0,this));let s=this.records.get(Jh);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(wS,qn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=$i(this),r=In(void 0),i;try{return e()}finally{$i(t),In(r)}}get(e,t=gu,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(A0))return e[A0](this);r=Zh(r);let i,s=$i(this),o=In(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=JV(e)&&Yh(e);l&&this.injectableDefInScope(l)?c=ea(Sy(e),vh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?v_():this.parent;return t=r&ge.Optional&&t===gu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Dh]=a[Dh]||[]).unshift(En(e)),s)throw a;return IV(a,e,"R3InjectorError",this.source)}else throw a}finally{In(o),$i(s)}}resolveInjectorInitializers(){let e=Ce(null),t=$i(this),r=In(void 0),i;try{let s=this.get(oa,qn,ge.Self);for(let o of s)o()}finally{$i(t),In(r),Ce(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(En(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=hn(e);let t=aa(e)?e:hn(e&&e.provide),r=QV(e);if(!aa(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ea(void 0,vh,!0),i.factory=()=>Ty(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ce(null);try{return t.value===vh&&(t.value=WV,t.value=t.factory()),typeof t.value=="object"&&t.value&&ZV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=hn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Sy(n){let e=Yh(n),t=e!==null?e.factory:Ds(n);if(t!==null)return t;if(n instanceof $)throw new Q(204,!1);if(n instanceof Function)return KV(n);throw new Q(204,!1)}function KV(n){if(n.length>0)throw new Q(204,!1);let t=oV(n);return t!==null?()=>t.factory(n):()=>new n}function QV(n){if(MS(n))return ea(void 0,n.useValue);{let e=PS(n);return ea(e,vh)}}function PS(n,e,t){let r;if(aa(n)){let i=hn(n);return Ds(i)||Sy(i)}else if(MS(n))r=()=>hn(n.useValue);else if(GV(n))r=()=>n.useFactory(...Ty(n.deps||[]));else if(qV(n))r=()=>ne(hn(n.useExisting));else{let i=hn(n&&(n.useClass||n.provide));if(YV(n))r=()=>new i(...Ty(n.deps));else return Ds(i)||Sy(i)}return r}function ea(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YV(n){return!!n.deps}function ZV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function JV(n){return typeof n=="function"||typeof n=="object"&&n instanceof $}function Ay(n,e){for(let t of n)Array.isArray(t)?Ay(t,e):t&&fS(t)?Ay(t.\u0275providers,e):e(t)}function ci(n,e){n instanceof yu&&n.assertNotDestroyed();let t,r=$i(n),i=In(void 0);try{return e()}finally{$i(r),In(i)}}function kS(){return pS()!==void 0||_V()!=null}function Xh(n){if(!kS())throw new Q(-203,!1)}function XV(n){return typeof n=="function"}var ui=0,me=1,ie=2,fn=3,hr=4,fr=5,Rh=6,Nh=7,Wn=8,ca=9,ii=10,Ft=11,_u=12,k0=13,ga=14,kr=15,ua=16,ta=17,la=18,ef=19,OS=20,Hi=21,wh=22,Gn=23,Kn=25,FS=1;var As=7,xh=8,Mh=9,Pn=10,Ph=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Ph||{});function qi(n){return Array.isArray(n)&&typeof n[FS]=="object"}function li(n){return Array.isArray(n)&&n[FS]===!0}function LS(n){return(n.flags&4)!==0}function tf(n){return n.componentOffset>-1}function w_(n){return(n.flags&1)===1}function zi(n){return!!n.template}function Ry(n){return(n[ie]&512)!==0}var Ny=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function VS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function di(){return US}function US(n){return n.type.prototype.ngOnChanges&&(n.setInput=tU),eU}di.ngInherit=!0;function eU(){let n=BS(this),e=n?.current;if(e){let t=n.previous;if(t===sa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function tU(n,e,t,r,i){let s=this.declaredInputs[r],o=BS(n)||nU(n,{previous:sa,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new Ny(l&&l.currentValue,t,c===sa),VS(n,e,i,t)}var jS="__ngSimpleChanges__";function BS(n){return n[jS]||null}function nU(n,e){return n[jS]=e}var O0=null;var xr=function(n,e,t){O0?.(n,e,t)},rU="svg",iU="math";function Or(n){for(;Array.isArray(n);)n=n[ui];return n}function $S(n,e){return Or(e[n])}function Yn(n,e){return Or(e[n.index])}function I_(n,e){return n.data[e]}function sU(n,e){return n[e]}function Qi(n,e){let t=e[n];return qi(t)?t:t[ui]}function E_(n){return(n[ie]&128)===128}function oU(n){return li(n[fn])}function kh(n,e){return e==null?null:n[e]}function HS(n){n[ta]=0}function qS(n){n[ie]&1024||(n[ie]|=1024,E_(n)&&rf(n))}function aU(n,e){for(;n>0;)e=e[ga],n--;return e}function nf(n){return!!(n[ie]&9216||n[Gn]?.dirty)}function xy(n){n[ii].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),nf(n)&&rf(n)}function rf(n){n[ii].changeDetectionScheduler?.notify(0);let e=Rs(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!E_(e)));)e=Rs(e)}function GS(n,e){if((n[ie]&256)===256)throw new Q(911,!1);n[Hi]===null&&(n[Hi]=[]),n[Hi].push(e)}function cU(n,e){if(n[Hi]===null)return;let t=n[Hi].indexOf(e);t!==-1&&n[Hi].splice(t,1)}function Rs(n){let e=n[fn];return li(e)?e[fn]:e}var _e={lFrame:tA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zS=!1;function uU(){return _e.lFrame.elementDepthCount}function lU(){_e.lFrame.elementDepthCount++}function dU(){_e.lFrame.elementDepthCount--}function WS(){return _e.bindingsEnabled}function hU(){return _e.skipHydrationRootTNode!==null}function fU(n){return _e.skipHydrationRootTNode===n}function pU(){_e.skipHydrationRootTNode=null}function Le(){return _e.lFrame.lView}function Cn(){return _e.lFrame.tView}function kn(n){return _e.lFrame.contextLView=n,n[Wn]}function On(n){return _e.lFrame.contextLView=null,n}function Tn(){let n=KS();for(;n!==null&&n.type===64;)n=n.parent;return n}function KS(){return _e.lFrame.currentTNode}function gU(){let n=_e.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Tu(n,e){let t=_e.lFrame;t.currentTNode=n,t.isParent=e}function QS(){return _e.lFrame.isParent}function mU(){_e.lFrame.isParent=!1}function YS(){return zS}function F0(n){zS=n}function C_(){let n=_e.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function yU(){return _e.lFrame.bindingIndex}function _U(n){return _e.lFrame.bindingIndex=n}function bu(){return _e.lFrame.bindingIndex++}function ZS(n){let e=_e.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function vU(){return _e.lFrame.inI18n}function wU(n,e){let t=_e.lFrame;t.bindingIndex=t.bindingRootIndex=n,My(e)}function IU(){return _e.lFrame.currentDirectiveIndex}function My(n){_e.lFrame.currentDirectiveIndex=n}function EU(n){let e=_e.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function JS(n){_e.lFrame.currentQueryIndex=n}function CU(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[fr]:null}function XS(n,e,t){if(t&ge.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=CU(s),i===null||(s=s[ga],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=_e.lFrame=eA();return r.currentTNode=e,r.lView=n,!0}function T_(n){let e=eA(),t=n[me];_e.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function eA(){let n=_e.lFrame,e=n===null?null:n.child;return e===null?tA(n):e}function tA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function nA(){let n=_e.lFrame;return _e.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var rA=nA;function b_(){let n=nA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function TU(n){return(_e.lFrame.contextLView=aU(n,_e.lFrame.contextLView))[Wn]}function Ls(){return _e.lFrame.selectedIndex}function Ns(n){_e.lFrame.selectedIndex=n}function D_(){let n=_e.lFrame;return I_(n.tView,n.selectedIndex)}function bU(){return _e.lFrame.currentNamespace}var iA=!0;function S_(){return iA}function A_(n){iA=n}function DU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=US(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function R_(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Ih(n,e,t){sA(n,e,3,t)}function Eh(n,e,t,r){(n[ie]&3)===t&&sA(n,e,t,r)}function dy(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function sA(n,e,t,r){let i=r!==void 0?n[ta]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[ta]+=65536),(a<s||s==-1)&&(SU(n,t,e,c),n[ta]=(n[ta]&4294901760)+c+2),c++}function L0(n,e){xr(4,n,e);let t=Ce(null);try{e.call(n)}finally{Ce(t),xr(5,n,e)}}function SU(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ie]>>14<n[ta]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,L0(a,s)):L0(a,s)}var ia=-1,xs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function AU(n){return n instanceof xs}function RU(n){return(n.flags&8)!==0}function NU(n){return(n.flags&16)!==0}var hy={},Py=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Zh(r);let i=this.injector.get(e,hy,r);return i!==hy||t===hy?i:this.parentInjector.get(e,t,r)}};function oA(n){return n!==ia}function Oh(n){return n&32767}function xU(n){return n>>16}function Fh(n,e){let t=xU(n),r=e;for(;t>0;)r=r[ga],t--;return r}var ky=!0;function Lh(n){let e=ky;return ky=n,e}var MU=256,aA=MU-1,cA=5,PU=0,Mr={};function kU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(fu)&&(r=t[fu]),r==null&&(r=t[fu]=PU++);let i=r&aA,s=1<<i;e.data[n+(i>>cA)]|=s}function Vh(n,e){let t=uA(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,fy(r.data,n),fy(e,null),fy(r.blueprint,null));let i=N_(n,e),s=n.injectorIndex;if(oA(i)){let o=Oh(i),a=Fh(i,e),c=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function fy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function uA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function N_(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=pA(i),r===null)return ia;if(t++,i=i[ga],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ia}function Oy(n,e,t){kU(n,e,t)}function lA(n,e,t){if(t&ge.Optional||n!==void 0)return n;g_(e,"NodeInjector")}function dA(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[ca],s=In(void 0);try{return i?i.get(e,r,t&ge.Optional):gS(e,r,t&ge.Optional)}finally{In(s)}}return lA(r,e,t)}function hA(n,e,t,r=ge.Default,i){if(n!==null){if(e[ie]&2048&&!(r&ge.Self)){let o=UU(n,e,t,r,Mr);if(o!==Mr)return o}let s=fA(n,e,t,r,Mr);if(s!==Mr)return s}return dA(e,t,r,i)}function fA(n,e,t,r,i){let s=LU(t);if(typeof s=="function"){if(!XS(e,n,r))return r&ge.Host?lA(i,t,r):dA(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ge.Optional))g_(t);else return o}finally{rA()}}else if(typeof s=="number"){let o=null,a=uA(n,e),c=ia,l=r&ge.Host?e[kr][fr]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?N_(n,e):e[a+8],c===ia||!U0(r,!1)?a=-1:(o=e[me],a=Oh(c),e=Fh(c,e)));a!==-1;){let d=e[me];if(V0(s,a,d.data)){let f=OU(a,e,t,o,r,l);if(f!==Mr)return f}c=e[a+8],c!==ia&&U0(r,e[me].data[a+8]===l)&&V0(s,a,e)?(o=d,a=Oh(c),e=Fh(c,e)):a=-1}}return i}function OU(n,e,t,r,i,s){let o=e[me],a=o.data[n+8],c=r==null?tf(a)&&ky:r!=o&&(a.type&3)!==0,l=i&ge.Host&&s===a,d=FU(a,o,t,c,l);return d!==null?da(e,o,d,a):Mr}function FU(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let y=f;y<g;y++){let w=o[y];if(y<c&&t===w||y>=c&&w.type===t)return y}if(i){let y=o[c];if(y&&zi(y)&&y.type===t)return c}return null}function da(n,e,t,r){let i=n[t],s=e.data;if(AU(i)){let o=i;o.resolving&&fV(hV(s[t]));let a=Lh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?In(o.injectImpl):null,d=XS(n,r,ge.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&DU(t,s[t],e)}finally{l!==null&&In(l),Lh(a),o.resolving=!1,rA()}}return i}function LU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(fu)?n[fu]:void 0;return typeof e=="number"?e>=0?e&aA:VU:e}function V0(n,e,t){let r=1<<n;return!!(t[e+(n>>cA)]&r)}function U0(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var bs=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return hA(this._tNode,this._lView,e,Zh(r),t)}};function VU(){return new bs(Tn(),Le())}function pr(n){return Eu(()=>{let e=n.prototype.constructor,t=e[bh]||Fy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[bh]||Fy(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Fy(n){return uS(n)?()=>{let e=Fy(hn(n));return e&&e()}:Ds(n)}function UU(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ie]&2048&&!(o[ie]&512);){let a=fA(s,o,t,r|ge.Self,Mr);if(a!==Mr)return a;let c=s.parent;if(!c){let l=o[OS];if(l){let d=l.get(t,Mr,r);if(d!==Mr)return d}c=pA(o),o=o[ga]}s=c}return i}function pA(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[fr]:null}function j0(n,e=null,t=null,r){let i=gA(n,e,t,r);return i.resolveInjectorInitializers(),i}function gA(n,e=null,t=null,r,i=new Set){let s=[t||qn,$V(n)];return r=r||(typeof n=="object"?void 0:En(n)),new yu(s,e||v_(),r||null,i)}var we=class n{static{this.THROW_IF_NOT_FOUND=gu}static{this.NULL=new Ah}static create(e,t){if(Array.isArray(e))return j0({name:""},t,e,"");{let r=e.name??"";return j0({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=B({token:n,providedIn:"any",factory:()=>ne(vS)})}static{this.__NG_ELEMENT_ID__=-1}};var jU=new $("");jU.__NG_ELEMENT_ID__=n=>{let e=Tn();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&ge.Optional)return null;throw new Q(204,!1)};var BU="ngOriginalError";function py(n){return n[BU]}var mA=!0,Yi=(()=>{class n{static{this.__NG_ELEMENT_ID__=$U}static{this.__NG_ENV_ID__=t=>t}}return n})(),Ly=class extends Yi{constructor(e){super(),this._lView=e}onDestroy(e){return GS(this._lView,e),()=>cU(this._lView,e)}};function $U(){return new Ly(Le())}var Vs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Vy=class extends at{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,kS()&&(this.destroyRef=x(Yi,{optional:!0})??void 0,this.pendingTasks=x(Vs,{optional:!0})??void 0)}emit(e){let t=Ce(null);try{super.next(e)}finally{Ce(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ft&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},St=Vy;function Uh(...n){}function yA(n){let e,t;function r(){n=Uh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function B0(n){return queueMicrotask(()=>n()),()=>{n=Uh}}var x_="isAngularZone",jh=x_+"_ID",HU=0,te=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=mA}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,zU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(x_)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,qU,Uh,Uh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},qU={};function M_(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function GU(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){yA(()=>{n.callbackScheduled=!1,Uy(n),n.isCheckStableRunning=!0,M_(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Uy(n)}function zU(n){let e=()=>{GU(n)},t=HU++;n._inner=n._inner.fork({name:"angular",properties:{[x_]:!0,[jh]:t,[jh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(WU(c))return r.invokeTask(s,o,a,c);try{return $0(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),H0(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return $0(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!KU(c)&&e(),H0(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,Uy(n),M_(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function Uy(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function $0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function H0(n){n._nesting--,M_(n)}var jy=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function WU(n){return _A(n,"__ignore_ng_zone__")}function KU(n){return _A(n,"__scheduler_tick__")}function _A(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Fr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&py(e);for(;t&&py(t);)t=py(t);return t||null}},QU=new $("",{providedIn:"root",factory:()=>{let n=x(te),e=x(Fr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function YU(){return sf(Tn(),Le())}function sf(n,e){return new Lr(Yn(n,e))}var Lr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=YU}}return n})();function vA(n){return(n.flags&128)===128}var wA=new Map,ZU=0;function JU(){return ZU++}function XU(n){wA.set(n[ef],n)}function By(n){wA.delete(n[ef])}var q0="__ngContext__";function Ms(n,e){qi(e)?(n[q0]=e[ef],XU(e)):n[q0]=e}function IA(n){return CA(n[_u])}function EA(n){return CA(n[hr])}function CA(n){for(;n!==null&&!li(n);)n=n[hr];return n}var $y;function TA(n){$y=n}function ej(){if($y!==void 0)return $y;if(typeof document<"u")return document;throw new Q(210,!1)}var P_=new $("",{providedIn:"root",factory:()=>tj}),tj="ng",k_=new $(""),gr=new $("",{providedIn:"platform",factory:()=>"unknown"});var O_=new $("",{providedIn:"root",factory:()=>ej().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var nj="h",rj="b";var ij=()=>null;function F_(n,e,t=!1){return ij(n,e,t)}var bA=!1,sj=new $("",{providedIn:"root",factory:()=>bA});var Hy=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${nV})`}};function L_(n){return n instanceof Hy?n.changingThisBreaksApplicationSecurity:n}function DA(n){return n instanceof Function?n():n}var si=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(si||{}),oj;function V_(n,e){return oj(n,e)}function na(n,e,t,r,i){if(r!=null){let s,o=!1;li(r)?s=r:qi(r)&&(o=!0,r=r[ui]);let a=Or(r);n===0&&t!==null?i==null?NA(e,t,a):$h(e,t,a,i||null,!0):n===1&&t!==null?$h(e,t,a,i||null,!0):n===2?Ij(e,a,o):n===3&&e.destroyNode(a),s!=null&&Cj(e,n,s,t,i)}}function aj(n,e){return n.createText(e)}function cj(n,e,t){n.setValue(e,t)}function SA(n,e,t){return n.createElement(e,t)}function uj(n,e){AA(n,e),e[ui]=null,e[fr]=null}function lj(n,e,t,r,i,s){r[ui]=i,r[fr]=e,of(n,r,t,1,i,s)}function AA(n,e){e[ii].changeDetectionScheduler?.notify(9),of(n,e,e[Ft],2,null,null)}function dj(n){let e=n[_u];if(!e)return gy(n[me],n);for(;e;){let t=null;if(qi(e))t=e[_u];else{let r=e[Pn];r&&(t=r)}if(!t){for(;e&&!e[hr]&&e!==n;)qi(e)&&gy(e[me],e),e=e[fn];e===null&&(e=n),qi(e)&&gy(e[me],e),t=e&&e[hr]}e=t}}function hj(n,e,t,r){let i=Pn+r,s=t.length;r>0&&(t[i-1][hr]=e),r<s-Pn?(e[hr]=t[i],_S(t,Pn+r,e)):(t.push(e),e[hr]=null),e[fn]=t;let o=e[ua];o!==null&&t!==o&&RA(o,e);let a=e[la];a!==null&&a.insertView(n),xy(e),e[ie]|=128}function RA(n,e){let t=n[Mh],r=e[fn];if(qi(r))n[ie]|=Ph.HasTransplantedViews;else{let i=r[fn][kr];e[kr]!==i&&(n[ie]|=Ph.HasTransplantedViews)}t===null?n[Mh]=[e]:t.push(e)}function U_(n,e){let t=n[Mh],r=t.indexOf(e);t.splice(r,1)}function Bh(n,e){if(n.length<=Pn)return;let t=Pn+e,r=n[t];if(r){let i=r[ua];i!==null&&i!==n&&U_(i,r),e>0&&(n[t-1][hr]=r[hr]);let s=Sh(n,Pn+e);uj(r[me],r);let o=s[la];o!==null&&o.detachView(s[me]),r[fn]=null,r[hr]=null,r[ie]&=-129}return r}function j_(n,e){if(!(e[ie]&256)){let t=e[Ft];t.destroyNode&&of(n,e,t,3,null,null),dj(e)}}function gy(n,e){if(e[ie]&256)return;let t=Ce(null);try{e[ie]&=-129,e[ie]|=256,e[Gn]&&Ld(e[Gn]),pj(n,e),fj(n,e),e[me].type===1&&e[Ft].destroy();let r=e[ua];if(r!==null&&li(e[fn])){r!==e[fn]&&U_(r,e);let i=e[la];i!==null&&i.detachView(n)}By(e)}finally{Ce(t)}}function fj(n,e){let t=n.cleanup,r=e[Nh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Nh]=null);let i=e[Hi];if(i!==null){e[Hi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function pj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof xs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];xr(4,a,c);try{c.call(a)}finally{xr(5,a,c)}}else{xr(4,i,s);try{s.call(i)}finally{xr(5,i,s)}}}}}function gj(n,e,t){return mj(n,e.parent,t)}function mj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ui];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Pr.None||s===Pr.Emulated)return null}return Yn(r,t)}}function $h(n,e,t,r,i){n.insertBefore(e,t,r,i)}function NA(n,e,t){n.appendChild(e,t)}function G0(n,e,t,r,i){r!==null?$h(n,e,t,r,i):NA(n,e,t)}function xA(n,e){return n.parentNode(e)}function yj(n,e){return n.nextSibling(e)}function _j(n,e,t){return wj(n,e,t)}function vj(n,e,t){return n.type&40?Yn(n,t):null}var wj=vj,z0;function B_(n,e,t,r){let i=gj(n,r,e),s=e[Ft],o=r.parent||e[fr],a=_j(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)G0(s,i,t[c],a,!1);else G0(s,i,t,a,!1);z0!==void 0&&z0(s,r,e,t,i)}function du(n,e){if(e!==null){let t=e.type;if(t&3)return Yn(e,n);if(t&4)return qy(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return du(n,r);{let i=n[e.index];return li(i)?qy(-1,i):Or(i)}}else{if(t&128)return du(n,e.next);if(t&32)return V_(e,n)()||Or(n[e.index]);{let r=MA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Rs(n[kr]);return du(i,r)}else return du(n,e.next)}}}return null}function MA(n,e){if(e!==null){let r=n[kr][fr],i=e.projection;return r.projection[i]}return null}function qy(n,e){let t=Pn+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return du(r,i)}return e[As]}function Ij(n,e,t){n.removeChild(null,e,t)}function $_(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Ms(Or(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)$_(n,e,t.child,r,i,s,!1),na(e,n,i,a,s);else if(c&32){let l=V_(t,r),d;for(;d=l();)na(e,n,i,d,s);na(e,n,i,a,s)}else c&16?Ej(n,e,r,t,i,s):na(e,n,i,a,s);t=o?t.projectionNext:t.next}}function of(n,e,t,r,i,s){$_(t,r,n.firstChild,e,i,s,!1)}function Ej(n,e,t,r,i,s){let o=t[kr],c=o[fr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];na(e,n,i,d,s)}else{let l=c,d=o[fn];vA(r)&&(l.flags|=128),$_(n,e,l,d,i,s,!0)}}function Cj(n,e,t,r,i){let s=t[As],o=Or(t);s!==o&&na(e,n,r,s,i);for(let a=Pn;a<t.length;a++){let c=t[a];of(c[me],c,n,e,r,s)}}function Tj(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:si.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=si.Important),n.setStyle(t,r,i,s))}}function bj(n,e,t){n.setAttribute(e,"style",t)}function PA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function kA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&by(n,e,r),i!==null&&PA(n,e,i),s!==null&&bj(n,e,s)}var Vr={};function H(n=1){OA(Cn(),Le(),Ls()+n,!1)}function OA(n,e,t,r){if(!r)if((e[ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Ih(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Eh(e,s,0,t)}Ns(t)}function ve(n,e=ge.Default){let t=Le();if(t===null)return ne(n,e);let r=Tn();return hA(r,t,hn(n),e)}function FA(n,e,t,r,i,s){let o=Ce(null);try{let a=null;i&Gi.SignalBased&&(a=e[r][Rr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Gi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):VS(e,a,r,s)}finally{Ce(o)}}function Dj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ns(~i);else{let s=i,o=t[++r],a=t[++r];wU(o,s);let c=e[s];a(2,c)}}}finally{Ns(-1)}}function af(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[ui]=i,f[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(f[ie]|=2048),HS(f),f[fn]=f[ga]=n,f[Wn]=t,f[ii]=o||n&&n[ii],f[Ft]=a||n&&n[Ft],f[ca]=c||n&&n[ca]||null,f[fr]=s,f[ef]=JU(),f[Rh]=d,f[OS]=l,f[kr]=e.type==2?n[kr]:f,f}function cf(n,e,t,r,i){let s=n.data[e];if(s===null)s=Sj(n,e,t,r,i),vU()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=gU();s.injectorIndex=o===null?-1:o.injectorIndex}return Tu(s,!0),s}function Sj(n,e,t,r,i){let s=KS(),o=QS(),a=o?s:s&&s.parent,c=n.data[e]=Mj(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function LA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function VA(n,e,t,r,i){let s=Ls(),o=r&2;try{Ns(-1),o&&e.length>Kn&&OA(n,e,Kn,!1),xr(o?2:0,i),t(r,i)}finally{Ns(s),xr(o?3:1,i)}}function UA(n,e,t){if(LS(e)){let r=Ce(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Ce(r)}}}function jA(n,e,t){WS()&&(Vj(n,e,t,Yn(t,e)),(t.flags&64)===64&&zA(n,e,t))}function BA(n,e,t=Yn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function $A(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=H_(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function H_(n,e,t,r,i,s,o,a,c,l,d){let f=Kn+r,g=f+i,y=Aj(f,g),w=typeof l=="function"?l():l;return y[me]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function Aj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Vr);return t}function Rj(n,e,t,r){let s=r.get(sj,bA)||t===Pr.ShadowDom,o=n.selectRootElement(e,s);return Nj(o),o}function Nj(n){xj(n)}var xj=()=>null;function Mj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return hU()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function W0(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Gi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?K0(r,t,l,a,c):K0(r,t,l,a)}return r}function K0(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function Pj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,y=g?g.inputs:null,w=g?g.outputs:null;c=W0(0,f.inputs,d,c,y),l=W0(1,f.outputs,d,l,w);let R=c!==null&&o!==null&&!y_(e)?Qj(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function kj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function HA(n,e,t,r,i,s,o,a){let c=Yn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(q_(n,t,d,r,i),tf(e)&&Oj(t,e.index)):e.type&3?(r=kj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Oj(n,e){let t=Qi(e,n);t[ie]&16||(t[ie]|=64)}function qA(n,e,t,r){if(WS()){let i=r===null?null:{"":-1},s=jj(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&GA(n,e,t,o,i,a),i&&Bj(t,r,i)}t.mergedAttrs=mu(t.mergedAttrs,t.attrs)}function GA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)Oy(Vh(t,e),n,r[l].type);Hj(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=LA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=mu(t.mergedAttrs,d.hostAttrs),qj(n,t,e,c,d),$j(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Pj(n,t,s)}function Fj(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Lj(o)!=a&&o.push(a),o.push(t,r,s)}}function Lj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Vj(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;tf(t)&&Gj(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Vh(t,e),Ms(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=da(e,n,a,t);if(Ms(l,e),o!==null&&Kj(e,a-i,l,c,t,o),zi(c)){let d=Qi(t.index,e);d[Wn]=da(e,n,a,t)}}}function zA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=IU();try{Ns(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];My(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Uj(c,l)}}finally{Ns(-1),My(o)}}function Uj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function jj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(PV(e,o.selectors,!1))if(r||(r=[]),zi(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Gy(n,e,c)}else r.unshift(o),Gy(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Gy(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Bj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function $j(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;zi(e)&&(t[""]=n)}}function Hj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function qj(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ds(i.type,!0)),o=new xs(s,zi(i),ve);n.blueprint[r]=o,t[r]=o,Fj(n,e,r,LA(n,t,i.hostVars,Vr),i)}function Gj(n,e,t){let r=Yn(e,n),i=$A(t),s=n[ii].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=uf(n,af(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function zj(n,e,t,r,i,s){let o=Yn(n,e);Wj(e[Ft],o,s,n.value,t,r,i)}function Wj(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?pu(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function Kj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];FA(r,t,c,l,d,f)}}function Qj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function WA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function KA(n,e){let t=n.contentQueries;if(t!==null){let r=Ce(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];JS(s),a.contentQueries(2,e[o],o)}}}finally{Ce(r)}}}function uf(n,e){return n[_u]?n[k0][hr]=e:n[_u]=e,n[k0]=e,e}function zy(n,e,t){JS(0);let r=Ce(null);try{e(n,t)}finally{Ce(r)}}function Yj(n){return n[Nh]??=[]}function Zj(n){return n.cleanup??=[]}function QA(n,e){let t=n[ca],r=t?t.get(Fr,null):null;r&&r.handleError(e)}function q_(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];FA(d,l,r,a,c,i)}}function YA(n,e,t){let r=$S(e,n);cj(n[Ft],r,t)}function Jj(n,e){let t=Qi(e,n),r=t[me];Xj(r,t);let i=t[ui];i!==null&&t[Rh]===null&&(t[Rh]=F_(i,t[ca])),G_(r,t,t[Wn])}function Xj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function G_(n,e,t){T_(e);try{let r=n.viewQuery;r!==null&&zy(1,r,t);let i=n.template;i!==null&&VA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[la]?.finishViewCreation(n),n.staticContentQueries&&KA(n,e),n.staticViewQueries&&zy(2,n.viewQuery,t);let s=n.components;s!==null&&e2(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,b_()}}function e2(n,e){for(let t=0;t<e.length;t++)Jj(n,e[t])}function ZA(n,e,t,r){let i=Ce(null);try{let s=e.tView,a=n[ie]&4096?4096:16,c=af(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[ua]=l;let d=n[la];return d!==null&&(c[la]=d.createEmbeddedView(s)),G_(s,c,t),c}finally{Ce(i)}}function t2(n,e){let t=Pn+e;if(t<n.length)return n[t]}function Wy(n,e){return!e||e.firstChild===null||vA(n)}function JA(n,e,t,r=!0){let i=e[me];if(hj(i,e,n,t),r){let o=qy(t,n),a=e[Ft],c=xA(a,n[As]);c!==null&&lj(i,n[fr],a,e,c,o)}let s=e[Rh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function n2(n,e){let t=Bh(n,e);return t!==void 0&&j_(t[me],t),t}function Hh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(Or(s)),li(s)&&r2(s,r);let o=t.type;if(o&8)Hh(n,e,t.child,r);else if(o&32){let a=V_(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=MA(e,t);if(Array.isArray(a))r.push(...a);else{let c=Rs(e[kr]);Hh(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function r2(n,e){for(let t=Pn;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&Hh(r[me],r,i,e)}n[As]!==n[ui]&&e.push(n[As])}var XA=[];function i2(n){return n[Gn]??s2(n)}function s2(n){let e=XA.pop()??Object.create(a2);return e.lView=n,e}function o2(n){n.lView[Gn]!==n&&(n.lView=null,XA.push(n))}var a2=ye(U({},Vo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{rf(n.lView)},consumerOnSignalRead(){this.lView[Gn]=this}});function c2(n){let e=n[Gn]??Object.create(u2);return e.lView=n,e}var u2=ye(U({},Vo),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Rs(n.lView);for(;e&&!eR(e[me]);)e=Rs(e);e&&qS(e)},consumerOnSignalRead(){this.lView[Gn]=this}});function eR(n){return n.type!==2}var l2=100;function tR(n,e=!0,t=0){let r=n[ii],i=r.rendererFactory,s=!1;s||i.begin?.();try{d2(n,t)}catch(o){throw e&&QA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function d2(n,e){let t=YS();try{F0(!0),Ky(n,e);let r=0;for(;nf(n);){if(r===l2)throw new Q(103,!1);r++,Ky(n,1)}}finally{F0(t)}}function h2(n,e,t,r){let i=e[ie];if((i&256)===256)return;let s=!1,o=!1;!s&&e[ii].inlineEffectRunner?.flush(),T_(e);let a=!0,c=null,l=null;s||(eR(n)?(l=i2(e),c=ru(l)):VD()===null?(a=!1,l=c2(e),c=ru(l)):e[Gn]&&(Ld(e[Gn]),e[Gn]=null));try{HS(e),_U(n.bindingStartIndex),t!==null&&VA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let y=n.preOrderCheckHooks;y!==null&&Ih(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Eh(e,y,0,null),dy(e,0)}if(o||f2(e),nR(e,0),n.contentQueries!==null&&KA(n,e),!s)if(d){let y=n.contentCheckHooks;y!==null&&Ih(e,y)}else{let y=n.contentHooks;y!==null&&Eh(e,y,1),dy(e,1)}Dj(n,e);let f=n.components;f!==null&&iR(e,f,0);let g=n.viewQuery;if(g!==null&&zy(2,g,r),!s)if(d){let y=n.viewCheckHooks;y!==null&&Ih(e,y)}else{let y=n.viewHooks;y!==null&&Eh(e,y,2),dy(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[wh]){for(let y of e[wh])y();e[wh]=null}s||(e[ie]&=-73)}catch(d){throw s||rf(e),d}finally{l!==null&&(Od(l,c),a&&o2(l)),b_()}}function nR(n,e){for(let t=IA(n);t!==null;t=EA(t))for(let r=Pn;r<t.length;r++){let i=t[r];rR(i,e)}}function f2(n){for(let e=IA(n);e!==null;e=EA(e)){if(!(e[ie]&Ph.HasTransplantedViews))continue;let t=e[Mh];for(let r=0;r<t.length;r++){let i=t[r];qS(i)}}}function p2(n,e,t){let r=Qi(e,n);rR(r,t)}function rR(n,e){E_(n)&&Ky(n,e)}function Ky(n,e){let r=n[me],i=n[ie],s=n[Gn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Fd(s)),o||=!1,s&&(s.dirty=!1),n[ie]&=-9217,o)h2(r,n,r.template,n[Wn]);else if(i&8192){nR(n,1);let a=r.components;a!==null&&iR(n,a,1)}}function iR(n,e,t){for(let r=0;r<e.length;r++)p2(n,e[r],t)}function z_(n,e){let t=YS()?64:1088;for(n[ii].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=Rs(n);if(Ry(n)&&!r)return n;n=r}return null}var Ps=class{get rootNodes(){let e=this._lView,t=e[me];return Hh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(e){this._lView[Wn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[fn];if(li(e)){let t=e[xh],r=t?t.indexOf(this):-1;r>-1&&(Bh(e,r),Sh(t,r))}this._attachedToViewContainer=!1}j_(this._lView[me],this._lView)}onDestroy(e){GS(this._lView,e)}markForCheck(){z_(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){xy(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,tR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ry(this._lView),t=this._lView[ua];t!==null&&!e&&U_(t,this._lView),AA(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=Ry(this._lView),r=this._lView[ua];r!==null&&!t&&RA(r,this._lView),xy(this._lView)}},W_=(()=>{class n{static{this.__NG_ELEMENT_ID__=y2}}return n})(),g2=W_,m2=class extends g2{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=ZA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ps(i)}};function y2(){return _2(Tn(),Le())}function _2(n,e){return n.type&4?new m2(e,n,sf(n,e)):null}var ane=new RegExp(`^(\\d+)*(${rj}|${nj})*(.*)`);var v2=()=>null;function Qy(n,e){return v2(n,e)}var ha=class{},lf=new $("",{providedIn:"root",factory:()=>!1});var sR=new $(""),oR=new $(""),Yy=class{},qh=class{};function w2(n){let e=Error(`No component factory found for ${En(n)}.`);return e[I2]=n,e}var I2="ngComponent";var Zy=class{resolveComponentFactory(e){throw w2(e)}},Wi=class{static{this.NULL=new Zy}},fa=class{},hi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>E2()}}return n})();function E2(){let n=Le(),e=Tn(),t=Qi(e.index,n);return(qi(t)?t:n)[Ft]}var C2=(()=>{class n{static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>null})}}return n})();function Jy(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=T0(i,a);else if(s==2){let c=a,l=e[++o];r=T0(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Gh=class extends Wi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Ss(e);return new vu(t,this.ngModule)}};function Q0(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Gi.None;e?t.push({propName:o,templateName:r,isSignal:(a&Gi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function T2(n){let e=n.toLowerCase();return e==="svg"?rU:e==="math"?iU:null}var vu=class extends qh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Q0(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return Q0(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=LV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Ce(null);try{i=i||this.ngModule;let o=i instanceof zn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Py(e,o):e,c=a.get(fa,null);if(c===null)throw new Q(407,!1);let l=a.get(C2,null),d=a.get(ha,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",w=r?Rj(g,r,this.componentDef.encapsulation,a):SA(g,y,T2(y)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;w!==null&&(S=F_(w,a,!0));let O=H_(0,null,null,1,0,null,null,null,null,null,null),q=af(null,O,null,R,null,null,f,g,a,null,S);T_(q);let W,J,$e=null;try{let ee=this.componentDef,C,v=null;ee.findHostDirectiveDefs?(C=[],v=new Map,ee.findHostDirectiveDefs(ee,C,v),C.push(ee)):C=[ee];let I=b2(q,w);$e=D2(I,w,ee,C,q,f,g),J=I_(O,Kn),w&&R2(g,ee,w,r),t!==void 0&&N2(J,this.ngContentSelectors,t),W=A2($e,ee,C,v,q,[x2]),G_(O,q,null)}catch(ee){throw $e!==null&&By($e),By(q),ee}finally{b_()}return new Xy(this.componentType,W,sf(J,q),q,J)}finally{Ce(s)}}},Xy=class extends Yy{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ps(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;q_(s[me],s,i,e,t),this.previousInputValues.set(e,t);let o=Qi(this._tNode.index,s);z_(o,1)}}get injector(){return new bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function b2(n,e){let t=n[me],r=Kn;return n[r]=e,cf(t,r,2,"#host",null)}function D2(n,e,t,r,i,s,o){let a=i[me];S2(r,n,e,o);let c=null;e!==null&&(c=F_(e,i[ca]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=af(i,$A(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&Gy(a,n,r.length-1),uf(i,f),i[n.index]=f}function S2(n,e,t,r){for(let i of n)e.mergedAttrs=mu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Jy(e,e.mergedAttrs,!0),t!==null&&kA(r,t,e))}function A2(n,e,t,r,i,s){let o=Tn(),a=i[me],c=Yn(o,i);GA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=da(i,a,f,o);Ms(g,i)}zA(a,i,o),c&&Ms(c,i);let l=da(i,a,o.directiveStart+o.componentOffset,o);if(n[Wn]=i[Wn]=l,s!==null)for(let d of s)d(l,e);return UA(a,o,i),l}function R2(n,e,t,r){if(r)by(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=VV(e.selectors[0]);i&&by(n,t,i),s&&s.length>0&&PA(n,t,s.join(" "))}}function N2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function x2(){let n=Tn();R_(Le()[me],n)}var Du=(()=>{class n{static{this.__NG_ELEMENT_ID__=M2}}return n})();function M2(){let n=Tn();return k2(n,Le())}var P2=Du,aR=class extends P2{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return sf(this._hostTNode,this._hostLView)}get injector(){return new bs(this._hostTNode,this._hostLView)}get parentInjector(){let e=N_(this._hostTNode,this._hostLView);if(oA(e)){let t=Fh(e,this._hostLView),r=Oh(e),i=t[me].data[r+8];return new bs(i,t)}else return new bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Y0(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Pn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Qy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Wy(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!XV(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new vu(Ss(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(zn,null);R&&(s=R)}let d=Ss(c.componentType??{}),f=Qy(this._lContainer,d?.id??null),g=f?.firstChild??null,y=c.create(l,i,g,s);return this.insertImpl(y.hostView,a,Wy(this._hostTNode,f)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(oU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[fn],l=new aR(c,c[fr],c[fn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return JA(o,i,s,r),e.attachToViewContainerRef(),_S(my(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Y0(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Bh(this._lContainer,t);r&&(Sh(my(this._lContainer),t),j_(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=Bh(this._lContainer,t);return r&&Sh(my(this._lContainer),t)!=null?new Ps(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Y0(n){return n[xh]}function my(n){return n[xh]||(n[xh]=[])}function k2(n,e){let t,r=e[n.index];return li(r)?t=r:(t=WA(r,e,null,n),e[n.index]=t,uf(e,t)),F2(t,e,n,r),new aR(t,n,e)}function O2(n,e){let t=n[Ft],r=t.createComment(""),i=Yn(e,n),s=xA(t,i);return $h(t,s,r,yj(t,i),!1),r}var F2=U2,L2=()=>!1;function V2(n,e,t){return L2(n,e,t)}function U2(n,e,t,r){if(n[As])return;let i;t.type&8?i=Or(r):i=O2(e,t),n[As]=i}var Z0=new Set;function Us(n){Z0.has(n)||(Z0.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function j2(n){return typeof n=="function"&&n[Rr]!==void 0}function ce(n,e){Us("NgSignals");let t=YD(n),r=t[Rr];return e?.equal&&(r.equal=e.equal),t.set=i=>Gm(r,i),t.update=i=>ZD(r,i),t.asReadonly=B2.bind(t),t}function B2(){let n=this[Rr];if(n.readonlyFn===void 0){let e=()=>this();e[Rr]=n,n.readonlyFn=e}return n.readonlyFn}function cR(n){return j2(n)&&typeof n.set=="function"}function $2(n){return Object.getPrototypeOf(n.prototype).constructor}function bn(n){let e=$2(n.type),t=!0,r=[n];for(;e;){let i;if(zi(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=mh(n.inputs),o.inputTransforms=mh(n.inputTransforms),o.declaredInputs=mh(n.declaredInputs),o.outputs=mh(n.outputs);let a=i.hostBindings;a&&W2(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&G2(n,c),l&&z2(n,l),H2(n,i),iV(n.outputs,i.outputs),zi(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===bn&&(t=!1)}}e=Object.getPrototypeOf(e)}q2(r)}function H2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function q2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=mu(i.hostAttrs,t=mu(t,i.hostAttrs))}}function mh(n){return n===sa?{}:n===qn?[]:n}function G2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function z2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function W2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Ki=class{},wu=class{};var e_=class extends Ki{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Gh(this);let s=SS(e);this._bootstrapComponents=DA(s.bootstrap),this._r3Injector=gA(e,t,[{provide:Ki,useValue:this},{provide:Wi,useValue:this.componentFactoryResolver},...r],En(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},t_=class extends wu{constructor(e){super(),this.moduleType=e}create(e){return new e_(this.moduleType,e,[])}};var zh=class extends Ki{constructor(e){super(),this.componentFactoryResolver=new Gh(this),this.instance=null;let t=new yu([...e.providers,{provide:Ki,useValue:this},{provide:Wi,useValue:this.componentFactoryResolver}],e.parent||v_(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function K_(n,e,t=null){return new zh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function uR(n){return Q2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function K2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function Q2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function lR(n,e,t){return n[e]=t}function oi(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function dR(n,e,t,r){let i=oi(n,e,t);return oi(n,e+1,r)||i}function Y2(n){return(n.flags&32)===32}function Z2(n,e,t,r,i,s,o,a,c){let l=e.consts,d=cf(e,n,4,o||null,a||null);qA(e,t,d,kh(l,c)),R_(e,d);let f=d.tView=H_(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function J2(n,e,t,r,i,s,o,a,c,l){let d=t+Kn,f=e.firstCreatePass?Z2(d,e,n,r,i,s,o,a,c):e.data[d];Tu(f,!1);let g=X2(e,n,f,t);S_()&&B_(e,n,g,f),Ms(g,n);let y=WA(g,n,g,f);return n[d]=y,uf(n,y),V2(y,f,n),w_(f)&&jA(e,n,f),c!=null&&BA(n,f,l),f}function gt(n,e,t,r,i,s,o,a){let c=Le(),l=Cn(),d=kh(l.consts,s);return J2(c,l,n,e,t,r,i,d,o,a),gt}var X2=eB;function eB(n,e,t,r){return A_(!0),e[Ft].createComment("")}var hu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(hu||{}),tB=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}}return n})(),J0=class n{constructor(){this.ngZone=x(te),this.scheduler=x(ha),this.errorHandler=x(Fr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[hu.EarlyRead,hu.Write,hu.MixedReadWrite,hu.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new n})}};function Su(n,e,t,r){let i=Le(),s=bu();if(oi(i,s,e)){let o=Cn(),a=D_();zj(a,i,n,e,t,r)}return Su}function nB(n,e,t,r){return oi(n,bu(),t)?e+pu(t)+r:Vr}function rB(n,e,t,r,i,s){let o=yU(),a=dR(n,o,t,i);return ZS(2),a?e+pu(t)+r+pu(i)+s:Vr}function yh(n,e){return n<<17|e<<2}function ks(n){return n>>17&32767}function iB(n){return(n&2)==2}function sB(n,e){return n&131071|e<<17}function n_(n){return n|2}function pa(n){return(n&131068)>>2}function yy(n,e){return n&-131069|e<<2}function oB(n){return(n&1)===1}function r_(n){return n|1}function aB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=ks(o),c=pa(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||Cu(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=ks(n[a+1]);n[r+1]=yh(g,a),g!==0&&(n[g+1]=yy(n[g+1],r)),n[a+1]=sB(n[a+1],r)}else n[r+1]=yh(a,0),a!==0&&(n[a+1]=yy(n[a+1],r)),a=r;else n[r+1]=yh(c,0),a===0?a=r:n[c+1]=yy(n[c+1],r),c=r;l&&(n[r+1]=n_(n[r+1])),X0(n,d,r,!0),X0(n,d,r,!1),cB(e,d,n,r,s),o=yh(a,c),s?e.classBindings=o:e.styleBindings=o}function cB(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&Cu(s,e)>=0&&(t[r+1]=r_(t[r+1]))}function X0(n,e,t,r){let i=n[t+1],s=e===null,o=r?ks(i):pa(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];uB(c,e)&&(a=!0,n[o+1]=r?r_(l):n_(l)),o=r?ks(l):pa(l)}a&&(n[t+1]=r?n_(i):r_(i))}function uB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Cu(n,e)>=0:!1}function Ge(n,e,t){let r=Le(),i=bu();if(oi(r,i,e)){let s=Cn(),o=D_();HA(s,o,r,n,e,r[Ft],t,!1)}return Ge}function eS(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";q_(n,t,s[o],o,r)}function df(n,e,t){return hR(n,e,t,!1),df}function hf(n,e){return hR(n,e,null,!0),hf}function hR(n,e,t,r){let i=Le(),s=Cn(),o=ZS(2);if(s.firstUpdatePass&&dB(s,n,o,r),e!==Vr&&oi(i,o,e)){let a=s.data[Ls()];mB(s,a,i,i[Ft],n,i[o+1]=yB(e,t),r,o)}}function lB(n,e){return e>=n.expandoStartIndex}function dB(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[Ls()],o=lB(n,t);_B(s,r)&&e===null&&!o&&(e=!1),e=hB(i,s,e,r),aB(i,s,e,t,o,r)}}function hB(n,e,t,r){let i=EU(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=_y(null,n,e,t,r),t=Iu(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=_y(i,n,e,t,r),s===null){let c=fB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=_y(null,n,e,c[1],r),c=Iu(c,e.attrs,r),pB(n,e,r,c))}else s=gB(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function fB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(pa(r)!==0)return n[ks(r)]}function pB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[ks(i)]=r}function gB(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Iu(r,o,t)}return Iu(r,e.attrs,t)}function _y(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Iu(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Iu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),TV(n,o,t?!0:e[++s]))}return n===void 0?null:n}function mB(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=oB(l)?tS(c,e,t,i,pa(l),o):void 0;if(!Wh(d)){Wh(s)||iB(l)&&(s=tS(c,null,t,i,a,o));let f=$S(Ls(),t);Tj(r,o,f,i,s)}}function tS(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Vr&&(g=f?qn:void 0);let y=f?uy(g,r):d===r?g:void 0;if(l&&!Wh(y)&&(y=uy(c,r)),Wh(y)&&(a=y,o))return a;let w=n[i+1];i=o?ks(w):pa(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=uy(c,r))}return a}function Wh(n){return n!==void 0}function yB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=En(L_(n)))),n}function _B(n,e){return(n.flags&(e?8:16))!==0}function It(n,e){Us("NgControlFlow");let t=Le(),r=bu(),i=t[r]!==Vr?t[r]:-1,s=i!==-1?nS(t,Kn+i):void 0,o=0;if(oi(t,r,n)){let a=Ce(null);try{if(s!==void 0&&n2(s,o),n!==-1){let c=Kn+n,l=nS(t,c),d=vB(t[me],c),f=Qy(l,d.tView.ssrId),g=ZA(t,d,e,{dehydratedView:f});JA(l,g,o,Wy(d,f))}}finally{Ce(a)}}else if(s!==void 0){let a=t2(s,o);a!==void 0&&(a[Wn]=e)}}function nS(n,e){return n[e]}function vB(n,e){return I_(n,e)}function wB(n,e,t,r,i,s){let o=e.consts,a=kh(o,i),c=cf(e,n,2,r,a);return qA(e,t,c,kh(o,s)),c.attrs!==null&&Jy(c,c.attrs,!1),c.mergedAttrs!==null&&Jy(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function P(n,e,t,r){let i=Le(),s=Cn(),o=Kn+n,a=i[Ft],c=s.firstCreatePass?wB(o,s,i,e,t,r):s.data[o],l=IB(s,i,c,a,e,n);i[o]=l;let d=w_(c);return Tu(c,!0),kA(a,l,c),!Y2(c)&&S_()&&B_(s,i,l,c),uU()===0&&Ms(l,i),lU(),d&&(jA(s,i,c),UA(s,c,i)),r!==null&&BA(i,c),P}function M(){let n=Tn();QS()?mU():(n=n.parent,Tu(n,!1));let e=n;fU(e)&&pU(),dU();let t=Cn();return t.firstCreatePass&&(R_(t,n),LS(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&RU(e)&&eS(t,e,Le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&NU(e)&&eS(t,e,Le(),e.stylesWithoutHost,!1),M}function Ue(n,e,t,r){return P(n,e,t,r),M(),Ue}var IB=(n,e,t,r,i,s)=>(A_(!0),SA(r,i,bU()));function ma(){return Le()}var Ts=void 0;function EB(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var CB=["en",[["a","p"],["AM","PM"],Ts],[["AM","PM"],Ts,Ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ts,"{1} 'at' {0}",Ts],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",EB],vy={};function Zn(n){let e=TB(n),t=rS(e);if(t)return t;let r=e.split("-")[0];if(t=rS(r),t)return t;if(r==="en")return CB;throw new Q(701,!1)}function rS(n){return n in vy||(vy[n]=lu.ng&&lu.ng.common&&lu.ng.common.locales&&lu.ng.common.locales[n]),vy[n]}var Et=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Et||{});function TB(n){return n.toLowerCase().replace(/_/g,"-")}var Kh="en-US";var bB=Kh;function DB(n){typeof n=="string"&&(bB=n.toLowerCase().replace(/_/g,"-"))}var SB=(n,e,t)=>{};function Ye(n,e,t,r){let i=Le(),s=Cn(),o=Tn();return fR(s,i,i[Ft],o,n,e,r),Ye}function AB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Nh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function fR(n,e,t,r,i,s,o){let a=w_(r),l=n.firstCreatePass&&Zj(n),d=e[Wn],f=Yj(e),g=!0;if(r.type&3||o){let R=Yn(r,e),S=o?o(R):R,O=f.length,q=o?J=>o(Or(J[r.index])):r.index,W=null;if(!o&&a&&(W=AB(n,e,i,r.index)),W!==null){let J=W.__ngLastListenerFn__||W;J.__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,g=!1}else{s=sS(r,e,d,s),SB(R,i,s);let J=t.listen(S,i,s);f.push(s,J),l&&l.push(i,q,O,O+1)}}else s=sS(r,e,d,s);let y=r.outputs,w;if(g&&y!==null&&(w=y[i])){let R=w.length;if(R)for(let S=0;S<R;S+=2){let O=w[S],q=w[S+1],$e=e[O][q].subscribe(s),ee=f.length;f.push(s,$e),l&&l.push(i,r.index,ee,-(ee+1))}}}function iS(n,e,t,r){let i=Ce(null);try{return xr(6,e,t),t(r)!==!1}catch(s){return QA(n,s),!1}finally{xr(7,e,t),Ce(i)}}function sS(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Qi(n.index,e):e;z_(o,5);let a=iS(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=iS(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function ke(n=1){return TU(n)}function RB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function L(n,e=""){let t=Le(),r=Cn(),i=n+Kn,s=r.firstCreatePass?cf(r,i,1,e,null):r.data[i],o=NB(r,t,s,e,n);t[i]=o,S_()&&B_(r,t,o,s),Tu(s,!1)}var NB=(n,e,t,r,i)=>(A_(!0),aj(e[Ft],r));function js(n){return Re("",n,""),js}function Re(n,e,t){let r=Le(),i=nB(r,n,e,t);return i!==Vr&&YA(r,Ls(),i),Re}function Q_(n,e,t,r,i){let s=Le(),o=rB(s,n,e,t,r,i);return o!==Vr&&YA(s,Ls(),o),Q_}function Bs(n,e,t){cR(e)&&(e=e());let r=Le(),i=bu();if(oi(r,i,e)){let s=Cn(),o=D_();HA(s,o,r,n,e,r[Ft],t,!1)}return Bs}function ya(n,e){let t=cR(n);return t&&n.set(e),t}function $s(n,e){let t=Le(),r=Cn(),i=Tn();return fR(r,t,t[Ft],i,n,e),$s}function xB(n,e,t){let r=Cn();if(r.firstCreatePass){let i=zi(n);i_(t,r.data,r.blueprint,i,!0),i_(e,r.data,r.blueprint,i,!1)}}function i_(n,e,t,r,i){if(n=hn(n),Array.isArray(n))for(let s=0;s<n.length;s++)i_(n[s],e,t,r,i);else{let s=Cn(),o=Le(),a=Tn(),c=aa(n)?n:hn(n.provide),l=PS(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(aa(n)||!n.multi){let y=new xs(l,i,ve),w=Iy(c,e,i?d:d+g,f);w===-1?(Oy(Vh(a,o),s,c),wy(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),o.push(y)):(t[w]=y,o[w]=y)}else{let y=Iy(c,e,d+g,f),w=Iy(c,e,d,d+g),R=y>=0&&t[y],S=w>=0&&t[w];if(i&&!S||!i&&!R){Oy(Vh(a,o),s,c);let O=kB(i?PB:MB,t.length,i,r,l);!i&&S&&(t[w].providerFactory=O),wy(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(O),o.push(O)}else{let O=pR(t[i?w:y],l,!i&&r);wy(s,n,y>-1?y:w,O)}!i&&r&&S&&t[w].componentProviders++}}}function wy(n,e,t,r){let i=aa(e),s=zV(e);if(i||s){let c=(s?hn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function pR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Iy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function MB(n,e,t,r){return s_(this.multi,[])}function PB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=da(t,t[me],this.providerFactory.index,r);s=a.slice(0,o),s_(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],s_(i,s);return s}function s_(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function kB(n,e,t,r,i){let s=new xs(n,t,ve);return s.multi=[],s.index=e,s.componentProviders=0,pR(s,i,r&&!t),s}function Ur(n,e=[]){return t=>{t.providersResolver=(r,i)=>xB(r,i?i(n):n,e)}}var OB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=NS(!1,t.type),i=r.length>0?K_([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=B({token:n,providedIn:"environment",factory:()=>new n(ne(zn))})}}return n})();function jt(n){Us("NgStandalone"),n.getStandaloneInjector=e=>e.get(OB).getOrCreateStandaloneInjector(n)}function Fn(n,e,t,r){return FB(Le(),C_(),n,e,t,r)}function gR(n,e,t,r,i){return yR(Le(),C_(),n,e,t,r,i)}function mR(n,e){let t=n[e];return t===Vr?void 0:t}function FB(n,e,t,r,i,s){let o=e+t;return oi(n,o,i)?lR(n,o+1,s?r.call(s,i):r(i)):mR(n,o+1)}function yR(n,e,t,r,i,s,o){let a=e+t;return dR(n,a,i,s)?lR(n,a+2,o?r.call(o,i,s):r(i,s)):mR(n,a+2)}function _a(n,e){let t=Cn(),r,i=n+Kn;t.firstCreatePass?(r=LB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ds(r.type,!0)),o,a=In(ve);try{let c=Lh(!1),l=s();return Lh(c),RB(t,Le(),i,l),l}finally{In(a)}}function LB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function va(n,e,t,r){let i=n+Kn,s=Le(),o=sU(s,i);return VB(s,i)?yR(s,C_(),e,o.transform,t,r,o):o.transform(t,r)}function VB(n,e){return n[me].data[e].pure}var ai=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},_R=new ai("18.2.13");var ff=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var vR=new $("");function Hs(n){return!!n&&typeof n.then=="function"}function wR(n){return!!n&&typeof n.subscribe=="function"}var Zi=new $(""),IR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=x(Zi,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Hs(s))t.push(s);else if(wR(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Y_=new $("");function UB(){QD(()=>{throw new Q(600,!1)})}function jB(n){return n.isBoundToModule}var BB=10;function $B(n,e,t){try{let r=t();return Hs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var qs=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(QU),this.afterRenderManager=x(tB),this.zonelessEnabled=x(lf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new at,this.afterTick=new at,this.componentTypes=[],this.components=[],this.isStable=x(Vs).hasPendingTasks.pipe(K(t=>!t)),this._injector=x(zn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof qh;if(!this._injector.get(IR).done){let g=!i&&DS(t),y=!1;throw new Q(405,y)}let o;i?o=t:o=this._injector.get(Wi).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=jB(o)?void 0:this._injector.get(Ki),c=r||o.selector,l=o.create(we.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(vR,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Ch(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let t=Ce(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ce(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(fa,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<BB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)HB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>nf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Ch(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Y_,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Ch(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ch(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function HB(n,e,t,r){if(!t&&!nf(n))return;tR(n,e,t&&!r?0:1)}var o_=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Z_=(()=>{class n{compileModuleSync(t){return new t_(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=SS(t),s=DA(i.declarations).reduce((o,a)=>{let c=Ss(a);return c&&o.push(new vu(c)),o},[]);return new o_(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qB=(()=>{class n{constructor(){this.zone=x(te),this.changeDetectionScheduler=x(ha),this.applicationRef=x(qs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),GB=new $("",{factory:()=>!1});function ER({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new te(ye(U({},TR()),{scheduleInRootZone:t})),[{provide:te,useFactory:n},{provide:oa,multi:!0,useFactory:()=>{let r=x(qB,{optional:!0});return()=>r.initialize()}},{provide:oa,multi:!0,useFactory:()=>{let r=x(zB);return()=>{r.initialize()}}},e===!0?{provide:sR,useValue:!0}:[],{provide:oR,useValue:t??mA}]}function CR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=ER({ngZoneFactory:()=>{let i=TR(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Us("NgZone_CoalesceEvent"),new te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Qe([{provide:GB,useValue:!0},{provide:lf,useValue:!1},r])}function TR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var zB=(()=>{class n{constructor(){this.subscription=new ft,this.initialized=!1,this.zone=x(te),this.pendingTasks=x(Vs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var WB=(()=>{class n{constructor(){this.appRef=x(qs),this.taskService=x(Vs),this.ngZone=x(te),this.zonelessEnabled=x(lf),this.disableScheduling=x(sR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ft,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(jh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(oR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof jy||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?B0:yA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(jh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,B0(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function KB(){return typeof $localize<"u"&&$localize.locale||Kh}var pf=new $("",{providedIn:"root",factory:()=>x(pf,ge.Optional|ge.SkipSelf)||KB()});var a_=new $("");function _h(n){return!n.moduleRef}function QB(n){let e=_h(n)?n.r3Injector:n.moduleRef.injector,t=e.get(te);return t.run(()=>{_h(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Fr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),_h(n)){let s=()=>e.destroy(),o=n.platformInjector.get(a_);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(a_);o.add(s),n.moduleRef.onDestroy(()=>{Ch(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return $B(r,t,()=>{let s=e.get(IR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(pf,Kh);if(DB(o||Kh),_h(n)){let a=e.get(qs);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return YB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function YB(n,e){let t=n.injector.get(qs);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}var Th=null;function ZB(n=[],e){return we.create({name:e,providers:[{provide:Jh,useValue:"platform"},{provide:a_,useValue:new Set([()=>Th=null])},...n]})}function JB(n=[]){if(Th)return Th;let e=ZB(n);return Th=e,UB(),XB(e),e}function XB(n){n.get(k_,null)?.forEach(t=>t())}var Ji=(()=>{class n{static{this.__NG_ELEMENT_ID__=e$}}return n})();function e$(n){return t$(Tn(),Le(),(n&16)===16)}function t$(n,e,t){if(tf(n)&&!t){let r=Qi(n.index,e);return new Ps(r,r)}else if(n.type&175){let r=e[kr];return new Ps(r,e)}return null}var c_=class{constructor(){}supports(e){return uR(e)}create(e){return new u_(e)}},n$=(n,e)=>e,u_=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||n$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<oS(r,i,s)?t:r,a=oS(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let y=g<s.length?s[g]:s[g]=0,w=y+g;d<=w&&w<l&&(s[g]=y+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!uR(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,K2(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new l_(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Qh),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Qh),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},l_=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},d_=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Qh=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new d_,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function oS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function aS(){return new J_([new c_])}var J_=(()=>{class n{static{this.\u0275prov=B({token:n,providedIn:"root",factory:aS})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||aS()),deps:[[n,new yS,new se]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();function bR(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=JB(r),s=[ER({}),{provide:ha,useExisting:WB},...t||[]],o=new zh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return QB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Au(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Ze(n,e){Us("NgSignals");let t=zD(n);return e?.equal&&(t[Rr].equal=e.equal),t}function Jn(n){let e=Ce(null);try{return n()}finally{Ce(e)}}var r$=new $("",{providedIn:"root",factory:()=>x(i$)}),i$=(()=>{class n{static{this.\u0275prov=B({token:n,providedIn:"root",factory:()=>new h_})}}return n})(),h_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=x(Vs),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},f_=class{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=XD(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Fr,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Ru(n,e){Us("NgSignals"),!e?.injector&&Xh(Ru);let t=e?.injector??x(we),r=e?.manualCleanup!==!0?t.get(Yi):null,i=new f_(t.get(r$),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(Ji,null,{optional:!0});return!s||!(s._lView[ie]&8)?i.watcher.notify():(s._lView[wh]??=[]).push(i.watcher.notify),i}var xR=null;function gi(){return xR}function MR(n){xR??=n}var Cf=class{};var er=new $(""),PR=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>x(a$),providedIn:"platform"})}}return n})();var a$=(()=>{class n extends PR{constructor(){super(),this._doc=x(er),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return gi().getBaseHref(this._doc)}onPopState(t){let r=gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=gi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function kR(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function DR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Gs(n){return n&&n[0]!=="?"?"?"+n:n}var Df=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>x(OR),providedIn:"root"})}}return n})(),c$=new $(""),OR=(()=>{class n extends Df{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(er).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return kR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Gs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Gs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Gs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ne(PR),ne(c$,8))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Nu=(()=>{class n{constructor(t){this._subject=new St,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=d$(DR(SR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Gs(r))}normalize(t){return n.stripTrailingSlash(l$(this._basePath,SR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Gs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Gs}static{this.joinWithSlash=kR}static{this.stripTrailingSlash=DR}static{this.\u0275fac=function(r){return new(r||n)(ne(Df))}}static{this.\u0275prov=B({token:n,factory:()=>u$(),providedIn:"root"})}}return n})();function u$(){return new Nu(ne(Df))}function l$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SR(n){return n.replace(/\/index.html$/,"")}function d$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var pn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(pn||{}),ze=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(ze||{}),Ln=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Ln||{}),Xi={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function h$(n){return Zn(n)[Et.LocaleId]}function f$(n,e,t){let r=Zn(n),i=[r[Et.DayPeriodsFormat],r[Et.DayPeriodsStandalone]],s=Xn(i,e);return Xn(s,t)}function p$(n,e,t){let r=Zn(n),i=[r[Et.DaysFormat],r[Et.DaysStandalone]],s=Xn(i,e);return Xn(s,t)}function g$(n,e,t){let r=Zn(n),i=[r[Et.MonthsFormat],r[Et.MonthsStandalone]],s=Xn(i,e);return Xn(s,t)}function m$(n,e){let r=Zn(n)[Et.Eras];return Xn(r,e)}function gf(n,e){let t=Zn(n);return Xn(t[Et.DateFormat],e)}function mf(n,e){let t=Zn(n);return Xn(t[Et.TimeFormat],e)}function yf(n,e){let r=Zn(n)[Et.DateTimeFormat];return Xn(r,e)}function Sf(n,e){let t=Zn(n),r=t[Et.NumberSymbols][e];if(typeof r>"u"){if(e===Xi.CurrencyDecimal)return t[Et.NumberSymbols][Xi.Decimal];if(e===Xi.CurrencyGroup)return t[Et.NumberSymbols][Xi.Group]}return r}function FR(n){if(!n[Et.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Et.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function y$(n){let e=Zn(n);return FR(e),(e[Et.ExtraData][2]||[]).map(r=>typeof r=="string"?X_(r):[X_(r[0]),X_(r[1])])}function _$(n,e,t){let r=Zn(n);FR(r);let i=[r[Et.ExtraData][0],r[Et.ExtraData][1]],s=Xn(i,e)||[];return Xn(s,t)||[]}function Xn(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function X_(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var v$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,_f={},w$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,pi=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(pi||{}),Fe=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Fe||{}),Oe=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Oe||{});function I$(n,e,t,r){let i=N$(n);e=fi(t,e)||e;let o=[],a;for(;e;)if(a=w$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=VR(r,c),i=R$(i,r,!0));let l="";return o.forEach(d=>{let f=S$(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Tf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function fi(n,e){let t=h$(n);if(_f[t]??={},_f[t][e])return _f[t][e];let r="";switch(e){case"shortDate":r=gf(n,Ln.Short);break;case"mediumDate":r=gf(n,Ln.Medium);break;case"longDate":r=gf(n,Ln.Long);break;case"fullDate":r=gf(n,Ln.Full);break;case"shortTime":r=mf(n,Ln.Short);break;case"mediumTime":r=mf(n,Ln.Medium);break;case"longTime":r=mf(n,Ln.Long);break;case"fullTime":r=mf(n,Ln.Full);break;case"short":let i=fi(n,"shortTime"),s=fi(n,"shortDate");r=vf(yf(n,Ln.Short),[i,s]);break;case"medium":let o=fi(n,"mediumTime"),a=fi(n,"mediumDate");r=vf(yf(n,Ln.Medium),[o,a]);break;case"long":let c=fi(n,"longTime"),l=fi(n,"longDate");r=vf(yf(n,Ln.Long),[c,l]);break;case"full":let d=fi(n,"fullTime"),f=fi(n,"fullDate");r=vf(yf(n,Ln.Full),[d,f]);break}return r&&(_f[t][e]=r),r}function vf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function mr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function E$(n,e){return mr(n,3).substring(0,e)}function At(n,e,t=0,r=!1,i=!1){return function(s,o){let a=C$(n,s);if((t>0||a>-t)&&(a+=t),n===Fe.Hours)a===0&&t===-12&&(a=12);else if(n===Fe.FractionalSeconds)return E$(a,e);let c=Sf(o,Xi.MinusSign);return mr(a,e,c,r,i)}}function C$(n,e){switch(n){case Fe.FullYear:return e.getFullYear();case Fe.Month:return e.getMonth();case Fe.Date:return e.getDate();case Fe.Hours:return e.getHours();case Fe.Minutes:return e.getMinutes();case Fe.Seconds:return e.getSeconds();case Fe.FractionalSeconds:return e.getMilliseconds();case Fe.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function Xe(n,e,t=pn.Format,r=!1){return function(i,s){return T$(i,s,n,e,t,r)}}function T$(n,e,t,r,i,s){switch(t){case Oe.Months:return g$(e,i,r)[n.getMonth()];case Oe.Days:return p$(e,i,r)[n.getDay()];case Oe.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=y$(e),d=_$(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[y,w]=g,R=o>=y.hours&&a>=y.minutes,S=o<w.hours||o===w.hours&&a<w.minutes;if(y.hours<w.hours){if(R&&S)return!0}else if(R||S)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return f$(e,i,r)[o<12?0:1];case Oe.Eras:return m$(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function wf(n){return function(e,t,r){let i=-1*r,s=Sf(t,Xi.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case pi.Short:return(i>=0?"+":"")+mr(o,2,s)+mr(Math.abs(i%60),2,s);case pi.ShortGMT:return"GMT"+(i>=0?"+":"")+mr(o,1,s);case pi.Long:return"GMT"+(i>=0?"+":"")+mr(o,2,s)+":"+mr(Math.abs(i%60),2,s);case pi.Extended:return r===0?"Z":(i>=0?"+":"")+mr(o,2,s)+":"+mr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var b$=0,Ef=4;function D$(n){let e=Tf(n,b$,1).getDay();return Tf(n,0,1+(e<=Ef?Ef:Ef+7)-e)}function LR(n){let e=n.getDay(),t=e===0?-3:Ef-e;return Tf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function ev(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=LR(t),o=D$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return mr(i,n,Sf(r,Xi.MinusSign))}}function If(n,e=!1){return function(t,r){let s=LR(t).getFullYear();return mr(s,n,Sf(r,Xi.MinusSign),e)}}var tv={};function S$(n){if(tv[n])return tv[n];let e;switch(n){case"G":case"GG":case"GGG":e=Xe(Oe.Eras,ze.Abbreviated);break;case"GGGG":e=Xe(Oe.Eras,ze.Wide);break;case"GGGGG":e=Xe(Oe.Eras,ze.Narrow);break;case"y":e=At(Fe.FullYear,1,0,!1,!0);break;case"yy":e=At(Fe.FullYear,2,0,!0,!0);break;case"yyy":e=At(Fe.FullYear,3,0,!1,!0);break;case"yyyy":e=At(Fe.FullYear,4,0,!1,!0);break;case"Y":e=If(1);break;case"YY":e=If(2,!0);break;case"YYY":e=If(3);break;case"YYYY":e=If(4);break;case"M":case"L":e=At(Fe.Month,1,1);break;case"MM":case"LL":e=At(Fe.Month,2,1);break;case"MMM":e=Xe(Oe.Months,ze.Abbreviated);break;case"MMMM":e=Xe(Oe.Months,ze.Wide);break;case"MMMMM":e=Xe(Oe.Months,ze.Narrow);break;case"LLL":e=Xe(Oe.Months,ze.Abbreviated,pn.Standalone);break;case"LLLL":e=Xe(Oe.Months,ze.Wide,pn.Standalone);break;case"LLLLL":e=Xe(Oe.Months,ze.Narrow,pn.Standalone);break;case"w":e=ev(1);break;case"ww":e=ev(2);break;case"W":e=ev(1,!0);break;case"d":e=At(Fe.Date,1);break;case"dd":e=At(Fe.Date,2);break;case"c":case"cc":e=At(Fe.Day,1);break;case"ccc":e=Xe(Oe.Days,ze.Abbreviated,pn.Standalone);break;case"cccc":e=Xe(Oe.Days,ze.Wide,pn.Standalone);break;case"ccccc":e=Xe(Oe.Days,ze.Narrow,pn.Standalone);break;case"cccccc":e=Xe(Oe.Days,ze.Short,pn.Standalone);break;case"E":case"EE":case"EEE":e=Xe(Oe.Days,ze.Abbreviated);break;case"EEEE":e=Xe(Oe.Days,ze.Wide);break;case"EEEEE":e=Xe(Oe.Days,ze.Narrow);break;case"EEEEEE":e=Xe(Oe.Days,ze.Short);break;case"a":case"aa":case"aaa":e=Xe(Oe.DayPeriods,ze.Abbreviated);break;case"aaaa":e=Xe(Oe.DayPeriods,ze.Wide);break;case"aaaaa":e=Xe(Oe.DayPeriods,ze.Narrow);break;case"b":case"bb":case"bbb":e=Xe(Oe.DayPeriods,ze.Abbreviated,pn.Standalone,!0);break;case"bbbb":e=Xe(Oe.DayPeriods,ze.Wide,pn.Standalone,!0);break;case"bbbbb":e=Xe(Oe.DayPeriods,ze.Narrow,pn.Standalone,!0);break;case"B":case"BB":case"BBB":e=Xe(Oe.DayPeriods,ze.Abbreviated,pn.Format,!0);break;case"BBBB":e=Xe(Oe.DayPeriods,ze.Wide,pn.Format,!0);break;case"BBBBB":e=Xe(Oe.DayPeriods,ze.Narrow,pn.Format,!0);break;case"h":e=At(Fe.Hours,1,-12);break;case"hh":e=At(Fe.Hours,2,-12);break;case"H":e=At(Fe.Hours,1);break;case"HH":e=At(Fe.Hours,2);break;case"m":e=At(Fe.Minutes,1);break;case"mm":e=At(Fe.Minutes,2);break;case"s":e=At(Fe.Seconds,1);break;case"ss":e=At(Fe.Seconds,2);break;case"S":e=At(Fe.FractionalSeconds,1);break;case"SS":e=At(Fe.FractionalSeconds,2);break;case"SSS":e=At(Fe.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=wf(pi.Short);break;case"ZZZZZ":e=wf(pi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=wf(pi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=wf(pi.Long);break;default:return null}return tv[n]=e,e}function VR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function A$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function R$(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=VR(e,i);return A$(n,r*(s-i))}function N$(n){if(AR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Tf(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(v$))return x$(r)}let e=new Date(n);if(!AR(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function x$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function AR(n){return n instanceof Date&&!isNaN(n.valueOf())}function UR(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var nv=/\s+/,RR=[],tr=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=RR,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(nv):RR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(nv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(nv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(ve(Lr),ve(hi))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var rv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Af=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new rv(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),NR(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);NR(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(ve(Du),ve(W_),ve(J_))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function NR(n,e){n.context.$implicit=e.item}function M$(n,e){return new Q(2100,!1)}var P$="mediumDate",k$=new $(""),O$=new $(""),Rf=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??P$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return I$(t,o,s||this.locale,a)}catch(o){throw M$(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(ve(pf,16),ve(k$,24),ve(O$,24))}}static{this.\u0275pipe=CS({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var iv="browser",F$="server";function sv(n){return n===iv}function ov(n){return n===F$}var bf=class{};var uv=class extends Cf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},lv=class n extends uv{static makeCurrent(){MR(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=L$();return t==null?null:V$(t)}resetBaseElement(){xu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return UR(document.cookie,e)}},xu=null;function L$(){return xu=xu||document.querySelector("base"),xu?xu.getAttribute("href"):null}function V$(n){return new URL(n,document.baseURI).pathname}var U$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),dv=new $(""),HR=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ne(dv),ne(te))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Nf=class{constructor(e){this._doc=e}},av="ng-app-id",qR=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ov(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${av}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(av),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(av,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ne(er),ne(P_),ne(O_,8),ne(gr))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),cv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},fv=/%COMP%/g,GR="%COMP%",j$=`_nghost-${GR}`,B$=`_ngcontent-${GR}`,$$=!0,H$=new $("",{providedIn:"root",factory:()=>$$});function q$(n){return B$.replace(fv,n)}function G$(n){return j$.replace(fv,n)}function zR(n,e){return e.map(t=>t.replace(fv,n))}var jR=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ov(a),this.defaultRenderer=new Mu(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Pr.ShadowDom&&(r=ye(U({},r),{encapsulation:Pr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof xf?i.applyToHost(t):i instanceof Pu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Pr.Emulated:s=new xf(c,l,r,this.appId,d,o,a,f);break;case Pr.ShadowDom:return new hv(c,l,t,r,o,a,this.nonce,f);default:s=new Pu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ne(HR),ne(qR),ne(P_),ne(H$),ne(er),ne(gr),ne(te),ne(O_))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),Mu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(cv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(BR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=cv[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=cv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(si.DashCase|si.Important)?e.style.setProperty(t,r,i&si.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&si.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=gi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function BR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hv=class extends Mu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=zR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Pu=class extends Mu{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?zR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},xf=class extends Pu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=q$(l),this.hostAttr=G$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},z$=(()=>{class n extends Nf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ne(er))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})(),$R=["alt","control","meta","shift"],W$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Q$=(()=>{class n extends Nf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gi().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),$R.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=W$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$R.forEach(o=>{if(o!==i){let a=K$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ne(er))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac})}}return n})();function WR(n,e){return bR(U({rootComponent:n},Y$(e)))}function Y$(n){return{appProviders:[...tH,...n?.providers??[]],platformProviders:eH}}function Z$(){lv.makeCurrent()}function J$(){return new Fr}function X$(){return TA(document),document}var eH=[{provide:gr,useValue:iv},{provide:k_,useValue:Z$,multi:!0},{provide:er,useFactory:X$,deps:[]}];var tH=[{provide:Jh,useValue:"root"},{provide:Fr,useFactory:J$,deps:[]},{provide:dv,useClass:z$,multi:!0,deps:[er,te,gr]},{provide:dv,useClass:Q$,multi:!0,deps:[er]},jR,qR,HR,{provide:fa,useExisting:jR},{provide:bf,useClass:U$,deps:[]},[]];var Mf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ne(er))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe="primary",Zu=Symbol("RouteTitle"),_v=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ba(n){return new _v(n)}function nH(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function rH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!jr(n[t],e[t]))return!1;return!0}function jr(n,e){let t=n?vv(n):void 0,r=e?vv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!nN(n[i],e[i]))return!1;return!0}function vv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function rN(n){return n.length>0?n[n.length-1]:null}function es(n){return ny(n)?n:Hs(n)?it(Promise.resolve(n)):X(n)}var iH={exact:sN,subset:oN},iN={exact:sH,subset:oH,ignored:()=>!0};function QR(n,e,t){return iH[t.paths](n.root,e.root,t.matrixParams)&&iN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function sH(n,e){return jr(n,e)}function sN(n,e,t){if(!Ws(n.segments,e.segments)||!Of(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!sN(n.children[r],e.children[r],t))return!1;return!0}function oH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nN(n[t],e[t]))}function oN(n,e,t){return aN(n,e,e.segments,t)}function aN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Ws(i,t)||e.hasChildren()||!Of(i,t,r))}else if(n.segments.length===t.length){if(!Ws(n.segments,t)||!Of(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Ws(n.segments,i)||!Of(n.segments,i,r)||!n.children[fe]?!1:aN(n.children[fe],e,s,r)}}function Of(n,e,t){return e.every((r,i)=>iN[t](n[i].parameters,r.parameters))}var yi=class{constructor(e=new Ve([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ba(this.queryParams),this._queryParamMap}toString(){return uH.serialize(this)}},Ve=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ff(this)}},zs=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ba(this.parameters),this._parameterMap}toString(){return uN(this)}};function aH(n,e){return Ws(n,e)&&n.every((t,r)=>jr(t.parameters,e[r].parameters))}function Ws(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function cH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var qv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>new ju,providedIn:"root"})}}return n})(),ju=class{parse(e){let t=new Iv(e);return new yi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ku(e.root,!0)}`,r=hH(e.queryParams),i=typeof e.fragment=="string"?`#${lH(e.fragment)}`:"";return`${t}${r}${i}`}},uH=new ju;function Ff(n){return n.segments.map(e=>uN(e)).join("/")}function ku(n,e){if(!n.hasChildren())return Ff(n);if(e){let t=n.children[fe]?ku(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==fe&&r.push(`${i}:${ku(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=cH(n,(r,i)=>i===fe?[ku(n.children[fe],!1)]:[`${i}:${ku(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Ff(n)}/${t[0]}`:`${Ff(n)}/(${t.join("//")})`}}function cN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pf(n){return cN(n).replace(/%3B/gi,";")}function lH(n){return encodeURI(n)}function wv(n){return cN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lf(n){return decodeURIComponent(n)}function YR(n){return Lf(n.replace(/\+/g,"%20"))}function uN(n){return`${wv(n.path)}${dH(n.parameters)}`}function dH(n){return Object.entries(n).map(([e,t])=>`;${wv(e)}=${wv(t)}`).join("")}function hH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Pf(t)}=${Pf(i)}`).join("&"):`${Pf(t)}=${Pf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var fH=/^[^\/()?;#]+/;function pv(n){let e=n.match(fH);return e?e[0]:""}var pH=/^[^\/()?;=#]+/;function gH(n){let e=n.match(pH);return e?e[0]:""}var mH=/^[^=?&#]+/;function yH(n){let e=n.match(mH);return e?e[0]:""}var _H=/^[^&#]+/;function vH(n){let e=n.match(_H);return e?e[0]:""}var Iv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ve([],{}):new Ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Ve(e,t)),r}parseSegment(){let e=pv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new zs(Lf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=gH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=pv(this.remaining);i&&(r=i,this.capture(r))}e[Lf(t)]=Lf(r)}parseQueryParam(e){let t=yH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=vH(this.remaining);o&&(r=o,this.capture(r))}let i=YR(t),s=YR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=pv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[fe]:new Ve([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function lN(n){return n.segments.length>0?new Ve([],{[fe]:n}):n}function dN(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=dN(i);if(r===fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ve(n.segments,e);return wH(t)}function wH(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ve(n.segments.concat(e.segments),e.children)}return n}function Bu(n){return n instanceof yi}function IH(n,e,t=null,r=null){let i=hN(n);return fN(i,e,t,r)}function hN(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Ve(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=lN(r);return e??i}function fN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return gv(i,i,i,t,r);let s=EH(e);if(s.toRoot())return gv(i,i,new Ve([],{}),t,r);let o=CH(s,i,n),a=o.processChildren?Lu(o.segmentGroup,o.index,s.commands):gN(o.segmentGroup,o.index,s.commands);return gv(i,o.segmentGroup,a,t,r)}function Vf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function $u(n){return typeof n=="object"&&n!=null&&n.outlets}function gv(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=pN(n,e,t);let a=lN(dN(o));return new yi(a,s,i)}function pN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=pN(s,e,t)}),new Ve(n.segments,r)}var Uf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Vf(r[0]))throw new Q(4003,!1);let i=r.find($u);if(i&&i!==rN(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function EH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Uf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Uf(t,e,r)}var Ea=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function CH(n,e,t){if(n.isAbsolute)return new Ea(e,!0,0);if(!t)return new Ea(e,!1,NaN);if(t.parent===null)return new Ea(t,!0,0);let r=Vf(n.commands[0])?0:1,i=t.segments.length-1+r;return TH(t,i,n.numberOfDoubleDots)}function TH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Ea(r,!1,i-s)}function bH(n){return $u(n[0])?n[0].outlets:{[fe]:n}}function gN(n,e,t){if(n??=new Ve([],{}),n.segments.length===0&&n.hasChildren())return Lu(n,e,t);let r=DH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ve(n.segments.slice(0,r.pathIndex),{});return s.children[fe]=new Ve(n.segments.slice(r.pathIndex),n.children),Lu(s,0,i)}else return r.match&&i.length===0?new Ve(n.segments,{}):r.match&&!n.hasChildren()?Ev(n,e,t):r.match?Lu(n,0,i):Ev(n,e,t)}function Lu(n,e,t){if(t.length===0)return new Ve(n.segments,{});{let r=bH(t),i={};if(Object.keys(r).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=Lu(n.children[fe],e,t);return new Ve(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gN(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ve(n.segments,i)}}function DH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if($u(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!JR(c,l,o))return s;r+=2}else{if(!JR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ev(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if($u(s)){let c=SH(s.outlets);return new Ve(r,c)}if(i===0&&Vf(t[0])){let c=n.segments[e];r.push(new zs(c.path,ZR(t[0]))),i++;continue}let o=$u(s)?s.outlets[fe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Vf(a)?(r.push(new zs(o,ZR(a))),i+=2):(r.push(new zs(o,{})),i++)}return new Ve(r,{})}function SH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ev(new Ve([],{}),0,r))}),e}function ZR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function JR(n,e,t){return n==t.path&&jr(e,t.parameters)}var Vu="imperative",zt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(zt||{}),nr=class{constructor(e,t){this.id=e,this.url=t}},Hu=class extends nr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=zt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ks=class extends nr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=zt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Un=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Un||{}),Cv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Cv||{}),mi=class extends nr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=zt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qs=class extends nr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=zt.NavigationSkipped}},qu=class extends nr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=zt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},jf=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Tv=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bv=class extends nr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=zt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Dv=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sv=class extends nr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Av=class{constructor(e){this.route=e,this.type=zt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rv=class{constructor(e){this.route=e,this.type=zt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nv=class{constructor(e){this.snapshot=e,this.type=zt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xv=class{constructor(e){this.snapshot=e,this.type=zt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mv=class{constructor(e){this.snapshot=e,this.type=zt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gu=class{constructor(e){this.snapshot=e,this.type=zt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var zu=class{},Da=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function AH(n,e){return n.providers&&!n._injector&&(n._injector=K_(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yr(n){return n.outlet||fe}function RH(n,e){let t=n.filter(r=>yr(r)===e);return t.push(...n.filter(r=>yr(r)!==e)),t}function Ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Pv=class{get injector(){return Ju(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Wf(this.rootInjector),this.attachRef=null}},Wf=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Pv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ne(zn))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Bf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=kv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=kv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Ov(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ov(e,this._root).map(t=>t.value)}};function kv(n,e){if(n===e.value)return e;for(let t of e.children){let r=kv(n,t);if(r)return r}return null}function Ov(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Ov(n,t);if(r.length)return r.unshift(e),r}return[]}var Vn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ia(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var $f=class extends Bf{constructor(e,t){super(e),this.snapshot=t,Gv(this,e)}toString(){return this.snapshot.toString()}};function mN(n){let e=NH(n),t=new Gt([new zs("",{})]),r=new Gt({}),i=new Gt({}),s=new Gt({}),o=new Gt(""),a=new Sa(t,r,s,o,i,fe,n,e.root);return a.snapshot=e.root,new $f(new Vn(a,[]),e)}function NH(n){let e={},t={},r={},i="",s=new Ca([],e,r,i,t,fe,n,null,{});return new qf("",new Vn(s,[]))}var Sa=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[Zu]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>ba(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>ba(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Hf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:U(U({},e.params),n.params),data:U(U({},e.data),n.data),resolve:U(U(U(U({},n.data),e.data),i?.data),n._resolvedData)}:r={params:U({},n.params),data:U({},n.data),resolve:U(U({},n.data),n._resolvedData??{})},i&&_N(i)&&(r.resolve[Zu]=i.title),r}var Ca=class{get title(){return this.data?.[Zu]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ba(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ba(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},qf=class extends Bf{constructor(e,t){super(t),this.url=e,Gv(this,t)}toString(){return yN(this._root)}};function Gv(n,e){e.value._routerState=n,e.children.forEach(t=>Gv(n,t))}function yN(n){let e=n.children.length>0?` { ${n.children.map(yN).join(", ")} } `:"";return`${n.value}${e}`}function mv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,jr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),jr(e.params,t.params)||n.paramsSubject.next(t.params),rH(e.url,t.url)||n.urlSubject.next(t.url),jr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Fv(n,e){let t=jr(n.params,e.params)&&aH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Fv(n.parent,e.parent))}function _N(n){return typeof n.title=="string"||n.title===null}var zv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.parentContexts=x(Wf),this.location=x(Du),this.changeDetector=x(Ji),this.inputBinder=x(Wv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Lv(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[di]})}}return n})(),Lv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sa?this.route:e===Wf?this.childContexts:this.parent.get(e,t)}},Wv=new $("");function xH(n,e,t){let r=Wu(n,e._root,t?t._root:void 0);return new $f(r,e)}function Wu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=MH(n,e,t);return new Vn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Wu(n,a)),o}}let r=PH(e.value),i=e.children.map(s=>Wu(n,s));return new Vn(r,i)}}function MH(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Wu(n,r,i);return Wu(n,r)})}function PH(n){return new Sa(new Gt(n.url),new Gt(n.params),new Gt(n.queryParams),new Gt(n.fragment),new Gt(n.data),n.outlet,n.component,n)}var Ku=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},vN="ngNavigationCancelingError";function Gf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Bu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wN(!1,Un.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vN]=!0,t.cancellationCode=e,t}function kH(n){return IN(n)&&Bu(n.url)}function IN(n){return!!n&&n[vN]}var OH=(n,e,t,r)=>K(i=>(new Vv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Vv=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),mv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ia(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ia(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ia(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ia(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Gu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new xv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(mv(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),mv(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},zf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ta=class{constructor(e,t){this.component=e,this.route=t}};function FH(n,e,t){let r=n._root,i=e?e._root:null;return Ou(r,i,t,[r.value])}function LH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ra(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!lS(n)?n:e.get(n):r}function Ou(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ia(e);return n.children.forEach(o=>{VH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Uu(a,t.getContext(o),i)),i}function VH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=UH(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new zf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ou(n,e,a?a.children:null,r,i):Ou(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ta(a.outlet.component,o))}else o&&Uu(e,a,i),i.canActivateChecks.push(new zf(r)),s.component?Ou(n,null,a?a.children:null,r,i):Ou(n,null,t,r,i);return i}function UH(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Ws(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ws(n.url,e.url)||!jr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fv(n,e)||!jr(n.queryParams,e.queryParams);case"paramsChange":default:return!Fv(n,e)}}function Uu(n,e,t){let r=Ia(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Uu(o,e.children.getContext(s),t):Uu(o,null,t):Uu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ta(e.outlet.component,i)):t.canDeactivateChecks.push(new Ta(null,i)):t.canDeactivateChecks.push(new Ta(null,i))}function Xu(n){return typeof n=="function"}function jH(n){return typeof n=="boolean"}function BH(n){return n&&Xu(n.canLoad)}function $H(n){return n&&Xu(n.canActivate)}function HH(n){return n&&Xu(n.canActivateChild)}function qH(n){return n&&Xu(n.canDeactivate)}function GH(n){return n&&Xu(n.canMatch)}function EN(n){return n instanceof ni||n?.name==="EmptyError"}var kf=Symbol("INITIAL_VALUE");function Aa(){return wn(n=>Ke(n.map(e=>e.pipe(ri(1),Xo(kf)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===kf)return kf;if(t===!1||zH(t))return t}return!0}),dn(e=>e!==kf),ri(1)))}function zH(n){return Bu(n)||n instanceof Ku}function WH(n,e){return wt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?X(ye(U({},t),{guardsResult:!0})):KH(o,r,i,n).pipe(wt(a=>a&&jH(a)?QH(r,s,n,e):X(a)),K(a=>ye(U({},t),{guardsResult:a})))})}function KH(n,e,t,r){return it(n).pipe(wt(i=>eq(i.component,i.route,t,e,r)),Nr(i=>i!==!0,!0))}function QH(n,e,t,r){return it(e).pipe(Cs(i=>Zo(ZH(i.route.parent,r),YH(i.route,r),XH(n,i.path,t),JH(n,i.route,t))),Nr(i=>i!==!0,!0))}function YH(n,e){return n!==null&&e&&e(new Mv(n)),X(!0)}function ZH(n,e){return n!==null&&e&&e(new Nv(n)),X(!0)}function JH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(s=>lh(()=>{let o=Ju(e)??t,a=Ra(s,o),c=$H(a)?a.canActivate(e,n):ci(o,()=>a(e,n));return es(c).pipe(Nr())}));return X(i).pipe(Aa())}function XH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>LH(o)).filter(o=>o!==null).map(o=>lh(()=>{let a=o.guards.map(c=>{let l=Ju(o.node)??t,d=Ra(c,l),f=HH(d)?d.canActivateChild(r,n):ci(l,()=>d(r,n));return es(f).pipe(Nr())});return X(a).pipe(Aa())}));return X(s).pipe(Aa())}function eq(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let c=Ju(e)??i,l=Ra(a,c),d=qH(l)?l.canDeactivate(n,e,t,r):ci(c,()=>l(n,e,t,r));return es(d).pipe(Nr())});return X(o).pipe(Aa())}function tq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let s=i.map(o=>{let a=Ra(o,n),c=BH(a)?a.canLoad(e,t):ci(n,()=>a(e,t));return es(c)});return X(s).pipe(Aa(),CN(r))}function CN(n){return qd(Ot(e=>{if(typeof e!="boolean")throw Gf(n,e)}),K(e=>e===!0))}function nq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let s=i.map(o=>{let a=Ra(o,n),c=GH(a)?a.canMatch(e,t):ci(n,()=>a(e,t));return es(c)});return X(s).pipe(Aa(),CN(r))}var Qu=class{constructor(e){this.segmentGroup=e||null}},Yu=class extends Error{constructor(e){super(),this.urlTree=e}};function wa(n){return Yo(new Qu(n))}function rq(n){return Yo(new Q(4e3,!1))}function iq(n){return Yo(wN(!1,Un.GuardRejected))}var Uv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[fe])return rq(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:y,data:w,title:R}=i,S=ci(s,()=>a({params:y,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(S instanceof yi)throw new Yu(S);t=S}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Yu(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new yi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ve(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},jv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sq(n,e,t,r,i){let s=TN(n,e,t);return s.matched?(r=AH(e,r),nq(r,e,t,i).pipe(K(o=>o===!0?s:U({},jv)))):X(s)}function TN(n,e,t){if(e.path==="**")return oq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?U({},jv):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||nH)(t,n,e);if(!i)return U({},jv);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?U(U({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function oq(n){return{matched:!0,parameters:n.length>0?rN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function XR(n,e,t,r){return t.length>0&&uq(n,t,r)?{segmentGroup:new Ve(e,cq(r,new Ve(t,n.children))),slicedSegments:[]}:t.length===0&&lq(n,t,r)?{segmentGroup:new Ve(n.segments,aq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ve(n.segments,n.children),slicedSegments:t}}function aq(n,e,t,r){let i={};for(let s of t)if(Kf(n,e,s)&&!r[yr(s)]){let o=new Ve([],{});i[yr(s)]=o}return U(U({},r),i)}function cq(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&yr(r)!==fe){let i=new Ve([],{});t[yr(r)]=i}return t}function uq(n,e,t){return t.some(r=>Kf(n,e,r)&&yr(r)!==fe)}function lq(n,e,t){return t.some(r=>Kf(n,e,r))}function Kf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function dq(n,e,t){return e.length===0&&!n.children[t]}var Bv=class{};function hq(n,e,t,r,i,s,o="emptyOnly"){return new $v(n,e,t,r,i,o,s).recognize()}var fq=31,$v=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Uv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=XR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new Vn(r,t),s=new qf("",i),o=IH(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Ca([],Object.freeze({}),Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(K(r=>({children:r,rootSnapshot:t})),ji(r=>{if(r instanceof Yu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Qu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(K(o=>o instanceof Vn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return it(s).pipe(Cs(o=>{let a=r.children[o],c=RH(t,o);return this.processSegmentGroup(e,c,a,o,i)}),ph((o,a)=>(o.push(...a),o)),Bi(null),cy(),wt(o=>{if(o===null)return wa(r);let a=bN(o);return pq(a),X(a)}))}processSegment(e,t,r,i,s,o,a){return it(t).pipe(Cs(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe(ji(l=>{if(l instanceof Qu)return X(null);throw l}))),Nr(c=>!!c),ji(c=>{if(EN(c))return dq(r,i,s)?X(new Bv):wa(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return yr(r)!==o&&(o===fe||!Kf(i,s,r))?wa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):wa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=TN(t,i,s);if(!c)return wa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>fq&&(this.allowRedirects=!1));let y=new Ca(s,l,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,eN(i),yr(i),i.component??i._loadedComponent??null,i,tN(i)),w=Hf(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(w.params),y.data=Object.freeze(w.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,y,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(wt(S=>this.processSegment(e,r,t,S.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=sq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(wn(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(wn(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:y}=c,w=new Ca(g,f,Object.freeze(U({},this.urlTree.queryParams)),this.urlTree.fragment,eN(r),yr(r),r.component??r._loadedComponent??null,r,tN(r)),R=Hf(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:O}=XR(t,g,y,l);if(O.length===0&&S.hasChildren())return this.processChildren(d,l,S,w).pipe(K(W=>new Vn(w,W)));if(l.length===0&&O.length===0)return X(new Vn(w,[]));let q=yr(r)===s;return this.processSegment(d,l,S,O,q?fe:s,!0,w).pipe(K(W=>new Vn(w,W instanceof Vn?[W]:[])))}))):wa(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):tq(e,t,r,this.urlSerializer).pipe(wt(i=>i?this.configLoader.loadChildren(e,t).pipe(Ot(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):iq(t))):X({routes:[],injector:e})}};function pq(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function gq(n){let e=n.value.routeConfig;return e&&e.path===""}function bN(n){let e=[],t=new Set;for(let r of n){if(!gq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bN(r.children);e.push(new Vn(r.value,i))}return e.filter(r=>!t.has(r))}function eN(n){return n.data||{}}function tN(n){return n.resolve||{}}function mq(n,e,t,r,i,s){return wt(o=>hq(n,e,t,r,o.extractedUrl,i,s).pipe(K(({state:a,tree:c})=>ye(U({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function yq(n,e){return wt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of DN(c))o.add(l);let a=0;return it(o).pipe(Cs(c=>s.has(c)?_q(c,r,n,e):(c.data=Hf(c,c.parent,n).resolve,X(void 0))),Ot(()=>a++),Jo(1),wt(c=>a===o.size?X(t):Mn))})}function DN(n){let e=n.children.map(t=>DN(t)).flat();return[n,...e]}function _q(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!_N(i)&&(s[Zu]=i.title),vq(s,n,e,r).pipe(K(o=>(n._resolvedData=o,n.data=Hf(n,n.parent,t).resolve,null)))}function vq(n,e,t,r){let i=vv(n);if(i.length===0)return X({});let s={};return it(i).pipe(wt(o=>wq(n[o],e,t,r).pipe(Nr(),Ot(a=>{if(a instanceof Ku)throw Gf(new ju,a);s[o]=a}))),Jo(1),oy(s),ji(o=>EN(o)?Mn:Yo(o)))}function wq(n,e,t,r){let i=Ju(e)??r,s=Ra(n,i),o=s.resolve?s.resolve(e,t):ci(i,()=>s(e,t));return es(o)}function yv(n){return wn(e=>{let t=n(e);return t?it(t).pipe(K(()=>e)):X(e)})}var SN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[Zu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>x(Iq),providedIn:"root"})}}return n})(),Iq=(()=>{class n extends SN{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ne(Mf))}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Kv=new $("",{providedIn:"root",factory:()=>({})}),Qv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ut({type:n,selectors:[["ng-component"]],standalone:!0,features:[jt],decls:1,vars:0,template:function(r,i){r&1&&Ue(0,"router-outlet")},dependencies:[zv],encapsulation:2})}}return n})();function Yv(n){let e=n.children&&n.children.map(Yv),t=e?ye(U({},n),{children:e}):U({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Qv),t}var Zv=new $(""),Eq=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(Z_)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=es(t.loadComponent()).pipe(K(AN),Ot(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),uu(()=>{this.componentLoaders.delete(t)})),i=new Go(r,()=>new at).pipe(qo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Cq(r,this.compiler,t,this.onLoadEndListener).pipe(uu(()=>{this.childrenLoaders.delete(r)})),o=new Go(s,()=>new at).pipe(qo());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Cq(n,e,t,r){return es(n.loadChildren()).pipe(K(AN),wt(i=>i instanceof wu||Array.isArray(i)?X(i):it(e.compileModuleAsync(i))),K(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Zv,[],{optional:!0,self:!0}).flat()),{routes:o.map(Yv),injector:s}}))}function Tq(n){return n&&typeof n=="object"&&"default"in n}function AN(n){return Tq(n)?n.default:n}var Jv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>x(bq),providedIn:"root"})}}return n})(),bq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dq=new $("");var Sq=new $(""),Aq=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new at,this.transitionAbortSubject=new at,this.configLoader=x(Eq),this.environmentInjector=x(zn),this.urlSerializer=x(qv),this.rootContexts=x(Wf),this.location=x(Nu),this.inputBindingEnabled=x(Wv,{optional:!0})!==null,this.titleStrategy=x(SN),this.options=x(Kv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(Jv),this.createViewTransition=x(Dq,{optional:!0}),this.navigationErrorHandler=x(Sq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Av(i)),r=i=>this.events.next(new Rv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ye(U(U({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Gt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Vu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dn(s=>s.id!==0),K(s=>ye(U({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),wn(s=>{let o=!1,a=!1;return X(s).pipe(wn(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Un.SupersededByNewNavigation),Mn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ye(U({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Qs(c.id,this.urlSerializer.serialize(c.rawUrl),f,Cv.IgnoredSameUrlNavigation)),c.resolve(!1),Mn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(wn(f=>{let g=this.transitions?.getValue();return this.events.next(new Hu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Mn:Promise.resolve(f)}),mq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ot(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ye(U({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new jf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:y,restoredState:w,extras:R}=c,S=new Hu(f,this.urlSerializer.serialize(g),y,w);this.events.next(S);let O=mN(this.rootComponentType).snapshot;return this.currentTransition=s=ye(U({},c),{targetSnapshot:O,urlAfterRedirects:g,extras:ye(U({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,X(s)}else{let f="";return this.events.next(new Qs(c.id,this.urlSerializer.serialize(c.extractedUrl),f,Cv.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Mn}}),Ot(c=>{let l=new Tv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=s=ye(U({},c),{guards:FH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),WH(this.environmentInjector,c=>this.events.next(c)),Ot(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Gf(this.urlSerializer,c.guardsResult);let l=new bv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),dn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Un.GuardRejected),!1)),yv(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(Ot(l=>{let d=new Dv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),wn(l=>{let d=!1;return X(l).pipe(yq(this.paramsInheritanceStrategy,this.environmentInjector),Ot({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Un.NoDataFromResolver)}}))}),Ot(l=>{let d=new Sv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),yv(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ot(g=>{d.component=g}),K(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Ke(l(c.targetSnapshot.root)).pipe(Bi(null),ri(1))}),yv(()=>this.afterPreactivation()),wn(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?it(d).pipe(K(()=>s)):X(s)}),K(c=>{let l=xH(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ye(U({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Ot(()=>{this.events.next(new zu)}),OH(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ri(1),Ot({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ks(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),Vt(this.transitionAbortSubject.pipe(Ot(c=>{throw c}))),uu(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Un.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),ji(c=>{if(a=!0,IN(c))this.events.next(new mi(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),kH(c)?this.events.next(new Da(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new qu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=ci(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof Ku){let{message:f,cancellationCode:g}=Gf(this.urlSerializer,d);this.events.next(new mi(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Da(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Mn}))}))}cancelNavigationTransition(t,r,i){let s=new mi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rq(n){return n!==Vu}var Nq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>x(xq),providedIn:"root"})}}return n})(),Hv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},xq=(()=>{class n extends Hv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:()=>x(Mq),providedIn:"root"})}}return n})(),Mq=(()=>{class n extends RN{constructor(){super(...arguments),this.location=x(Nu),this.urlSerializer=x(qv),this.options=x(Kv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(Jv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new yi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Hu)this.stateMemento=this.createStateMemento();else if(t instanceof Qs)this.rawUrlTree=r.initialUrl;else if(t instanceof jf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof zu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof mi&&(t.code===Un.GuardRejected||t.code===Un.NoDataFromResolver)?this.restoreHistory(r):t instanceof qu?this.restoreHistory(r,!0):t instanceof Ks&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof yi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=U(U({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=U(U({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Fu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Fu||{});function Pq(n,e){n.events.pipe(dn(t=>t instanceof Ks||t instanceof mi||t instanceof qu||t instanceof Qs),K(t=>t instanceof Ks||t instanceof Qs?Fu.COMPLETE:(t instanceof mi?t.code===Un.Redirect||t.code===Un.SupersededByNewNavigation:!1)?Fu.REDIRECTING:Fu.FAILED),dn(t=>t!==Fu.REDIRECTING),ri(1)).subscribe(()=>{e()})}function kq(n){throw n}var Oq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Fq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Qf=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(ff),this.stateManager=x(RN),this.options=x(Kv,{optional:!0})||{},this.pendingTasks=x(Vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(Aq),this.urlSerializer=x(qv),this.location=x(Nu),this.urlHandlingStrategy=x(Jv),this._events=new at,this.errorHandler=this.options.errorHandler||kq,this.navigated=!1,this.routeReuseStrategy=x(Nq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(Zv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Wv,{optional:!0}),this.eventsSubscription=new ft,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof mi&&r.code!==Un.Redirect&&r.code!==Un.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ks)this.navigated=!0;else if(r instanceof Da){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=U({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Rq(i.source)},o);this.scheduleNavigation(a,Vu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Vq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Vu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=U({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Yv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=U(U({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=hN(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return fN(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Bu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Vu,null,r)}navigate(t,r={skipLocationChange:!1}){return Lq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=U({},Oq):r===!1?i=U({},Fq):i=r,Bu(t))return QR(this.currentUrlTree,t,i);let s=this.parseUrl(t);return QR(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return Pq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Lq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function Vq(n){return!(n instanceof zu)&&!(n instanceof Da)}var Uq=new $("");function NN(n,...e){return Qe([{provide:Zv,multi:!0,useValue:n},[],{provide:Sa,useFactory:jq,deps:[Qf]},{provide:Y_,multi:!0,useFactory:Bq},e.map(t=>t.\u0275providers)])}function jq(n){return n.routerState.root}function Bq(){let n=x(we);return e=>{let t=n.get(qs);if(e!==t.components[0])return;let r=n.get(Qf),i=n.get($q);n.get(Hq)===1&&r.initialNavigation(),n.get(qq,null,ge.Optional)?.setUpPreloading(),n.get(Uq,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var $q=new $("",{factory:()=>new at}),Hq=new $("",{providedIn:"root",factory:()=>1});var qq=new $("");var xN=[];var zq="firebase",Wq="10.14.1";Y(zq,Wq,"app");var tt=new ai("ANGULARFIRE2_VERSION"),xa=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function Rt(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ct=(n,e)=>{let t=e?[e]:Md(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Dn=class{constructor(){return Ct(Kq)}},Kq="app-check";function Na(){}var Yf=class{zone;delegate;constructor(e,t=ey){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},Xv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Na,{},Na,Na)),t.pipe(Ot({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},mt=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Yf(Zone.current)),this.insideAngular=t.run(()=>new Yf(Zone.current,Qo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ne(te))};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zf(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Qq(n){return Zf().ngZone.runOutsideAngular(()=>n())}function Ys(n){return Zf().ngZone.run(()=>n())}function Yq(n){return Zq(Zf())(n)}function Zq(n){return function(t){return t=t.lift(new Xv(n.ngZone)),t.pipe(Ui(n.outsideAngular),Vi(n.insideAngular))}}var Jq=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ys(()=>n.apply(void 0,r))},xe=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Ys(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Na,{},Na,Na))),r[s]=Jq(r[s],t));let i=Qq(()=>n.apply(this,r));if(!e)if(i instanceof ae){let s=Zf();return i.pipe(Ui(s.outsideAngular),Vi(s.insideAngular))}else return Ys(()=>i);return i instanceof ae?i.pipe(Yq):i instanceof Promise?Ys(()=>new Promise((s,o)=>i.then(a=>Ys(()=>s(a)),a=>Ys(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Ys(()=>i)};var nt=class{constructor(e){return e}},ut=class{constructor(){return Md()}};function Xq(n){return n&&n.length===1?n[0]:new nt(Dt())}var ew=new $("angularfire2._apps"),eG={provide:nt,useFactory:Xq,deps:[[new se,ew]]},tG={provide:ut,deps:[[new se,ew]]};function nG(n){return(e,t)=>{let r=t.get(gr);Y("angularfire",tt.full,"core"),Y("angularfire",tt.full,"app"),Y("angular",_R.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new nt(i)}}function MN(n,...e){return Qe([eG,tG,{provide:ew,useFactory:nG(n),multi:!0,deps:[te,we,mt,...e]}])}var PN=xe(OD,!0);function KN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QN=KN,YN=new Dr("auth","Firebase",KN());var rp=new Ar("@firebase/auth");function rG(n,...e){rp.logLevel<=Jt.WARN&&rp.warn(`Auth (${_n}): ${n}`,...e)}function Xf(n,...e){rp.logLevel<=Jt.ERROR&&rp.error(`Auth (${_n}): ${n}`,...e)}function ns(n,...e){throw ww(n,...e)}function Js(n,...e){return ww(n,...e)}function ZN(n,e,t){let r=Object.assign(Object.assign({},QN()),{[e]:t});return new Dr("auth","Firebase",r).create(e,{appName:n.name})}function Zs(n){return ZN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ww(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YN.create(n,...e)}function oe(n,e,...t){if(!n)throw ww(e,...t)}function _i(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Xf(e),new Error(e)}function rs(n,e){n||_i(e)}function iw(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function iG(){return kN()==="http:"||kN()==="https:"}function kN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function sG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iG()||Kc()||"connection"in navigator)?navigator.onLine:!0}function oG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xs=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,rs(t>e,"Short delay should be less than long delay!"),this.isMobile=Wc()||Rd()}get(){return sG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Iw(n,e){rs(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var ip=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var aG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var cG=new Xs(3e4,6e4);function Ew(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Pa(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){return JN(n,i,()=>_(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=_s(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let y=Object.assign({method:e,headers:g},l);return DD()||(y.referrerPolicy="no-referrer"),ip.fetch()(XN(n,n.config.apiHost,t,f),y)}))})}function JN(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},aG),e);try{let i=new sw(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Jf(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Jf(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Jf(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Jf(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ZN(n,d,l);ns(n,d)}}catch(i){if(i instanceof yn)throw i;ns(n,"network-request-failed",{message:String(i)})}})}function uG(s,o,a,c){return _(this,arguments,function*(n,e,t,r,i={}){let l=yield Pa(n,e,t,r,i);return"mfaPendingCredential"in l&&ns(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function XN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Iw(n.config,i):`${n.config.apiScheme}://${i}`}var sw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Js(this.auth,"network-request-failed")),cG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Jf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Js(n,e,r);return i.customData._tokenResponse=t,i}function lG(n,e){return _(this,null,function*(){return Pa(n,"POST","/v1/accounts:delete",e)})}function ex(n,e){return _(this,null,function*(){return Pa(n,"POST","/v1/accounts:lookup",e)})}function el(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Cw(n,e=!1){return _(this,null,function*(){let t=Ee(n),r=yield t.getIdToken(e),i=Tw(r);oe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:el(tw(i.auth_time)),issuedAtTime:el(tw(i.iat)),expirationTime:el(tw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function tw(n){return Number(n)*1e3}function Tw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xf("JWT malformed, contained fewer than 3 sections"),null;try{let i=CD(t);return i?JSON.parse(i):(Xf("Failed to decode base64 JWT payload"),null)}catch(i){return Xf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ON(n){let e=Tw(n);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function nl(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof yn&&dG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function dG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var ow=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var rl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function sp(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield nl(n,ex(t,{idToken:r}));oe(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tx(s.providerUserInfo):[],a=hG(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new rl(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function bw(n){return _(this,null,function*(){let e=Ee(n);yield sp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function hG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tx(n){return n.map(e=>{var{providerId:t}=e,r=ty(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function fG(n,e){return _(this,null,function*(){let t=yield JN(n,{},()=>_(this,null,function*(){let r=_s({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=XN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",ip.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function pG(n,e){return _(this,null,function*(){return Pa(n,"POST","/v2/accounts:revokeToken",Ew(n,e))})}var tl=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ON(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){oe(e.length!==0,"internal-error");let t=ON(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield fG(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return _i("not implemented")}};function ts(n,e){oe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ma=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=ty(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ow(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new rl(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield nl(this,this.stsTokenManager.getToken(this.auth,e));return oe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Cw(this,e)}reload(){return bw(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield sp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(ti(this.auth.app))return Promise.reject(Zs(this.auth));let e=yield this.getIdToken();return yield nl(this,lG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,O=(l=t.createdAt)!==null&&l!==void 0?l:void 0,q=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:W,emailVerified:J,isAnonymous:$e,providerData:ee,stsTokenManager:C}=t;oe(W&&C,e,"internal-error");let v=tl.fromJSON(this.name,C);oe(typeof W=="string",e,"internal-error"),ts(f,e.name),ts(g,e.name),oe(typeof J=="boolean",e,"internal-error"),oe(typeof $e=="boolean",e,"internal-error"),ts(y,e.name),ts(w,e.name),ts(R,e.name),ts(S,e.name),ts(O,e.name),ts(q,e.name);let I=new n({uid:W,auth:e,email:g,emailVerified:J,displayName:f,isAnonymous:$e,photoURL:w,phoneNumber:y,tenantId:R,stsTokenManager:v,createdAt:O,lastLoginAt:q});return ee&&Array.isArray(ee)&&(I.providerData=ee.map(T=>Object.assign({},T))),S&&(I._redirectEventId=S),I}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new tl;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield sp(s),s})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];oe(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?tx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new tl;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new rl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var FN=new Map;function vi(n){rs(n instanceof Function,"Expected a class definition");let e=FN.get(n);return e?(rs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FN.set(n,e),e)}var gG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),aw=gG;function ep(n,e,t){return`firebase:${n}:${e}:${t}`}var op=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ep(this.userKey,i.apiKey,s),this.fullPersistenceKey=ep("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ma._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(vi(aw),e,r);let i=(yield Promise.all(t.map(l=>_(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||vi(aw),o=ep(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(o);if(d){let f=Ma._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>_(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function LN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ax(e))return"Blackberry";if(cx(e))return"Webos";if(rx(e))return"Safari";if((e.includes("chrome/")||ix(e))&&!e.includes("edge/"))return"Chrome";if(ox(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nx(n=Zt()){return/firefox\//i.test(n)}function rx(n=Zt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ix(n=Zt()){return/crios\//i.test(n)}function sx(n=Zt()){return/iemobile/i.test(n)}function ox(n=Zt()){return/android/i.test(n)}function ax(n=Zt()){return/blackberry/i.test(n)}function cx(n=Zt()){return/webos/i.test(n)}function Dw(n=Zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function mG(n=Zt()){var e;return Dw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yG(){return SD()&&document.documentMode===10}function ux(n=Zt()){return Dw(n)||ox(n)||cx(n)||ax(n)||/windows phone/i.test(n)||sx(n)}function lx(n,e=[]){let t;switch(n){case"Browser":t=LN(Zt());break;case"Worker":t=`${LN(Zt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_n}/${r}`}var cw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function _G(t){return _(this,arguments,function*(n,e={}){return Pa(n,"GET","/v2/passwordPolicy",Ew(n,e))})}var vG=6,uw=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:vG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var lw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ap(this),this.idTokenSubscription=new ap(this),this.beforeStateQueue=new cw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vi(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield op.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield ex(this,{idToken:e}),r=yield Ma._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(ti(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield sp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=oG()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(ti(this.app))return Promise.reject(Zs(this));let t=e?Ee(e):null;return t&&oe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return ti(this.app)?Promise.reject(Zs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ti(this.app)?Promise.reject(Zs(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(vi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield _G(this),t=new uw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield pG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&vi(e)||this._popupRedirectResolver;oe(t,this,"argument-error"),this.redirectPersistenceManager=yield op.create(this,[vi(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&rG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Sw(n){return Ee(n)}var ap=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=MD(t=>this.observer=t)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Aw={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function wG(n){Aw=n}function IG(n){return Aw.loadJS(n)}function EG(){return Aw.gapiScript}function dx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Rw(n,e){let t=bt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Jc(s,e??{}))return i;ns(i,"already-initialized")}return t.initialize({options:e})}function CG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(vi);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Nw(n,e,t){let r=Sw(n);oe(r._canInitEmulator,r,"emulator-config-failed"),oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=hx(e),{host:o,port:a}=TG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||bG()}function hx(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function TG(n){let e=hx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:VN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:VN(o)}}}function VN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function bG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var cp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,t){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}};function nw(n,e){return _(this,null,function*(){return uG(n,"POST","/v1/accounts:signInWithIdp",Ew(n,e))})}var up=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var dw=class extends up{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var il=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let s=yield Ma._fromIdTokenResponse(e,r,i),o=UN(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function UN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var hw=class n extends yn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function fx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?hw._fromErrorAndOperation(n,s,e,r):s})}function DG(n,e,t=!1){return _(this,null,function*(){let r=yield nl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return il._forOperation(n,"link",r)})}function SG(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(ti(r.app))return Promise.reject(Zs(r));let i="reauthenticate";try{let s=yield nl(n,fx(r,i,e,n),t);oe(s.idToken,r,"internal-error");let o=Tw(s.idToken);oe(o,r,"internal-error");let{sub:a}=o;return oe(n.uid===a,r,"user-mismatch"),il._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ns(r,"user-mismatch"),s}})}function AG(n,e,t=!1){return _(this,null,function*(){if(ti(n.app))return Promise.reject(Zs(n));let r="signIn",i=yield fx(n,r,e),s=yield il._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function pp(n,e,t,r){return Ee(n).onIdTokenChanged(e,t,r)}function xw(n,e,t){return Ee(n).beforeAuthStateChanged(e,t)}function gp(n,e,t,r){return Ee(n).onAuthStateChanged(e,t,r)}var lp="__sak";var dp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(lp,"1"),this.storage.removeItem(lp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var RG=1e3,NG=10,xG=(()=>{class n extends dp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ux(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);yG()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,NG):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},RG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield Oi(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield Oi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield Oi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),px=xG;var MG=(()=>{class n extends dp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Mw=MG;function PG(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var kG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>_(this,null,function*(){return d(r.origin,o)})),l=yield PG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function gx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var fw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=gx("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Br(){return window}function OG(n){Br().location.href=n}function mx(){return typeof Br().WorkerGlobalScope<"u"&&typeof Br().importScripts=="function"}function FG(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function LG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function VG(){return mx()?self:null}var yx="firebaseLocalStorageDb",UG=1,hp="firebaseLocalStorage",_x="fbase_key",eo=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function mp(n,e){return n.transaction([hp],e?"readwrite":"readonly").objectStore(hp)}function jG(){let n=indexedDB.deleteDatabase(yx);return new eo(n).toPromise()}function pw(){let n=indexedDB.open(yx,UG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(hp,{keyPath:_x})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(hp)?e(r):(r.close(),yield jG(),e(yield pw()))}))})}function jN(n,e,t){return _(this,null,function*(){let r=mp(n,!0).put({[_x]:e,value:t});return new eo(r).toPromise()})}function BG(n,e){return _(this,null,function*(){let t=mp(n,!1).get(e),r=yield new eo(t).toPromise();return r===void 0?null:r.value})}function BN(n,e){let t=mp(n,!0).delete(e);return new eo(t).toPromise()}var $G=800,HG=3,qG=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield pw(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>HG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return mx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=kG._getInstance(VG()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield FG(),!this.activeServiceWorker)return;this.sender=new fw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||LG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield pw();return yield jN(t,lp,"1"),yield BN(t,lp),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>jN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>BG(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>BN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(s=>{let o=mp(s,!1).getAll();return new eo(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),$G)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),vx=qG;var cie=dx("rcb"),uie=new Xs(3e4,6e4);function GG(n,e){return e?vi(e):(oe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var sl=class extends cp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return nw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return nw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return nw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function zG(n){return AG(n.auth,new sl(n),n.bypassAuthState)}function WG(n){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),SG(t,new sl(n),n.bypassAuthState)}function KG(n){return _(this,null,function*(){let{auth:e,user:t}=n;return oe(t,e,"internal-error"),DG(t,new sl(n),n.bypassAuthState)})}var gw=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zG;case"linkViaPopup":case"linkViaRedirect":return KG;case"reauthViaPopup":case"reauthViaRedirect":return WG;default:ns(this.auth,"internal-error")}}resolve(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var lie=new Xs(2e3,1e4);var QG="pendingRedirect",tp=new Map,mw=class n extends gw{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=tp.get(this.auth._key());if(!e){try{let r=(yield YG(this.resolver,this.auth))?yield Oi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}tp.set(this.auth._key(),e)}return this.bypassAuthState||tp.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return Oi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Oi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function YG(n,e){return _(this,null,function*(){let t=XG(e),r=JG(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function ZG(n,e){tp.set(n._key(),e)}function JG(n){return vi(n._redirectPersistence)}function XG(n){return ep(QG,n.config.apiKey,n.name)}function ez(n,e,t=!1){return _(this,null,function*(){if(ti(n.app))return Promise.reject(Zs(n));let r=Sw(n),i=GG(r,e),o=yield new mw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var tz=10*60*1e3,yw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Js(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tz&&this.cachedEventUids.clear(),this.cachedEventUids.has($N(e))}saveEventToCache(e){this.cachedEventUids.add($N(e)),this.lastProcessedEventTime=Date.now()}};function $N(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wx(n);default:return!1}}function rz(t){return _(this,arguments,function*(n,e={}){return Pa(n,"GET","/v1/projects",e)})}var iz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sz=/^https?/;function oz(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield rz(n);for(let t of e)try{if(az(t))return}catch{}ns(n,"unauthorized-domain")})}function az(n){let e=iw(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!sz.test(t))return!1;if(iz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var cz=new Xs(3e4,6e4);function HN(){let n=Br().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uz(n){return new Promise((e,t)=>{var r,i,s;function o(){HN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HN(),t(Js(n,"network-request-failed"))},timeout:cz.get()})}if(!((i=(r=Br().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Br().gapi)===null||s===void 0)&&s.load)o();else{let a=dx("iframefcb");return Br()[a]=()=>{gapi.load?o():t(Js(n,"network-request-failed"))},IG(`${EG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw np=null,e})}var np=null;function lz(n){return np=np||uz(n),np}var dz=new Xs(5e3,15e3),hz="__/auth/iframe",fz="emulator/auth/iframe",pz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mz(n){let e=n.config;oe(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Iw(e,fz):`https://${n.config.authDomain}/${hz}`,r={apiKey:e.apiKey,appName:n.name,v:_n},i=gz.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${_s(r).slice(1)}`}function yz(n){return _(this,null,function*(){let e=yield lz(n),t=Br().gapi;return oe(t,n,"internal-error"),e.open({where:document.body,url:mz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pz,dontclear:!0},r=>new Promise((i,s)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=Js(n,"network-request-failed"),a=Br().setTimeout(()=>{s(o)},dz.get());function c(){Br().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var _z={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vz=500,wz=600,Iz="_blank",Ez="http://localhost",fp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Cz(n,e,t,r=vz,i=wz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},_z),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Zt().toLowerCase();t&&(a=ix(l)?Iz:t),nx(l)&&(e=e||Ez,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[y,w])=>`${g}${y}=${w},`,"");if(mG(l)&&a!=="_self")return Tz(e||"",a),new fp(null);let f=window.open(e||"",a,d);oe(f,n,"popup-blocked");try{f.focus()}catch{}return new fp(f)}function Tz(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var bz="__/auth/handler",Dz="emulator/auth/handler",Sz=encodeURIComponent("fac");function qN(n,e,t,r,i,s){return _(this,null,function*(){oe(n.config.authDomain,n,"auth-domain-config-required"),oe(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_n,eventId:i};if(e instanceof up){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Yc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof dw){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${Sz}=${encodeURIComponent(c)}`:"";return`${Az(n)}?${_s(a).slice(1)}${l}`})}function Az({config:n}){return n.emulator?Iw(n,Dz):`https://${n.authDomain}/${bz}`}var rw="webStorageSupport",_w=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Mw,this._completeRedirectFn=ez,this._overrideRedirectResult=ZG}_openPopup(e,t,r,i){return _(this,null,function*(){var s;rs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield qN(e,t,r,iw(),i);return Cz(e,o,gx())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let s=yield qN(e,t,r,iw(),i);return OG(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(rs(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield yz(e),r=new yw(e);return t.register("authEvent",i=>(oe(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(rw,{type:rw},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[rw];o!==void 0&&t(!!o),ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ux()||rx()||Dw()}},Ix=_w;var GN="@firebase/auth",zN="1.7.9";var vw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Rz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Nz(n){vt(new _t("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lx(n)},l=new lw(r,i,s,c);return CG(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),vt(new _t("auth-internal",e=>{let t=Sw(e.getProvider("auth").getImmediate());return(r=>new vw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Y(GN,zN,Rz(n)),Y(GN,zN,"esm2017")}var xz=5*60,Mz=Vm("authIdTokenMaxAge")||xz,WN=null,Pz=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Mz)return;let i=t?.token;WN!==i&&(WN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Pw(n=Dt()){let e=bt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Rw(n,{popupRedirectResolver:Ix,persistence:[vx,px,Mw]}),r=Vm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=Pz(s.toString());xw(t,o,()=>o(t.currentUser)),pp(t,a=>o(a))}}let i=bD("auth");return i&&Nw(t,`http://${i}`),t}function kz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}wG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Js("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",kz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Nz("Browser");function Cx(n){return new ae(function(e){var t=gp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Tx="auth",to=class{constructor(e){return e}},_r=class{constructor(){return Ct(Tx)}};var kw=new $("angularfire2.auth-instances");function DW(n,e){let t=Rt(Tx,n,e);return t&&new to(t)}function SW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new to(r)}}var AW={provide:_r,deps:[[new se,kw]]},RW={provide:to,useFactory:DW,deps:[[new se,kw],nt]};function bx(n,...e){return Y("angularfire",tt.full,"auth"),Qe([RW,AW,{provide:kw,useFactory:SW(n),multi:!0,deps:[te,we,mt,ut,[new se,Dn],...e]}])}var Dx=xe(Cx,!0);var Sx=xe(Pw,!0);var yp="analytics",xW="firebase_id",MW="origin",PW=60*1e3,kW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Bw="https://www.googletagmanager.com/gtag/js";var gn=new Ar("@firebase/analytics");var OW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},jn=new Dr("analytics","Analytics",OW);function FW(n){if(!n.startsWith(Bw)){let e=jn.create("invalid-gtag-resource",{gtagURL:n});return gn.warn(e.message),""}return n}function kx(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function LW(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function VW(n,e){let t=LW("firebase-js-sdk-policy",{createScriptURL:FW}),r=document.createElement("script"),i=`${Bw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function UW(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function jW(n,e,t,r,i,s){return _(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield kx(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){gn.error(a)}n("config",i,s)})}function BW(n,e,t,r,i){return _(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield kx(t);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){gn.error(s)}})}function $W(n,e,t,r){function i(s,...o){return _(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield BW(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield jW(n,e,t,r,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){gn.error(a)}})}return i}function HW(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=$W(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function qW(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(Bw)&&t.src.includes(n))return t;return null}var GW=30,zW=1e3,Fw=class{constructor(e={},t=zW){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Ox=new Fw;function WW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function KW(n){return _(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:WW(r)},s=kW.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw jn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function QW(r){return _(this,arguments,function*(n,e=Ox,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw jn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw jn.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Lw;return setTimeout(()=>_(this,null,function*(){c.abort()}),t!==void 0?t:PW),Fx({appId:i,apiKey:s,measurementId:o},a,c,e)})}function Fx(s,o,a){return _(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=Ox){var c;let{appId:l,measurementId:d}=n;try{yield YW(r,e)}catch(f){if(d)return gn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield KW(n);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!ZW(g)){if(i.deleteThrottleMetadata(l),d)return gn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let y=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?eu(t,i.intervalMillis,GW):eu(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return i.setThrottleMetadata(l,w),gn.debug(`Calling attemptFetch again in ${y} millis`),Fx(n,w,r,i)}})}function YW(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(jn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function ZW(n){if(!(n instanceof yn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Lw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Vw;function JW(n,e,t,r,i){return _(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}function XW(n,e,t,r){return _(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var Uw;function e4(n){Uw=n}function t4(n){Vw=n}function n4(){return _(this,null,function*(){if(ei())try{yield ms()}catch(n){return gn.warn(jn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return gn.warn(jn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function r4(n,e,t,r,i,s,o){return _(this,null,function*(){var a;let c=QW(n);c.then(y=>{t[y.measurementId]=y.appId,n.options.measurementId&&y.measurementId!==n.options.measurementId&&gn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${y.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(y=>gn.error(y)),e.push(c);let l=n4().then(y=>{if(y)return r.getId()}),[d,f]=yield Promise.all([c,l]);qW(s)||VW(s,d.measurementId),Uw&&(i("consent","default",Uw),e4(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[MW]="firebase",g.update=!0,f!=null&&(g[xW]=f),i("config",d.measurementId,g),Vw&&(i("set",Vw),t4(void 0)),d.measurementId})}var jw=class{constructor(e){this.app=e}_delete(){return delete ka[this.app.options.appId],Promise.resolve()}},ka={},Ax=[],Rx={},Ow="dataLayer",i4="gtag",Nx,$w,xx=!1;function s4(){let n=[];if(Kc()&&n.push("This is a browser extension environment."),Qc()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=jn.create("invalid-analytics-context",{errorInfo:e});gn.warn(t.message)}}function o4(n,e,t){s4();let r=n.options.appId;if(!r)throw jn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)gn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw jn.create("no-api-key");if(ka[r]!=null)throw jn.create("already-exists",{id:r});if(!xx){UW(Ow);let{wrappedGtag:s,gtagCore:o}=HW(ka,Ax,Rx,Ow,i4);$w=s,Nx=o,xx=!0}return ka[r]=r4(n,Ax,Rx,e,Nx,Ow,t),new jw(n)}function Lx(n=Dt()){n=Ee(n);let e=bt(n,yp);return e.isInitialized()?e.getImmediate():Vx(n)}function Vx(n,e={}){let t=bt(n,yp);if(t.isInitialized()){let i=t.getImmediate();if(Jc(e,t.getOptions()))return i;throw jn.create("already-initialized")}return t.initialize({options:e})}function Ux(){return _(this,null,function*(){if(Kc()||!Qc()||!ei())return!1;try{return yield ms()}catch{return!1}})}function jx(n,e,t){n=Ee(n),XW($w,ka[n.app.options.appId],e,t).catch(r=>gn.error(r))}function Hw(n,e,t,r){n=Ee(n),JW($w,ka[n.app.options.appId],e,t,r).catch(i=>gn.error(i))}var Mx="@firebase/analytics",Px="0.10.8";function a4(){vt(new _t(yp,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return o4(r,i,t)},"PUBLIC")),vt(new _t("analytics-internal",n,"PRIVATE")),Y(Mx,Px),Y(Mx,Px,"esm2017");function n(e){try{let t=e.getProvider(yp).getImmediate();return{logEvent:(r,i,s)=>Hw(t,r,i,s)}}catch(t){throw jn.create("interop-component-reg-failed",{reason:t})}}}a4();var no=class{constructor(e){return e}},Hx="analytics",Gw=class{constructor(){return Ct(Hx)}};var zw="__angularfire_symbol__analyticsIsSupportedValue",qx="__angularfire_symbol__analyticsIsSupported";globalThis[qx]||=Ux().then(n=>globalThis[zw]=n).catch(()=>globalThis[zw]=!1);var _p={async:()=>globalThis[qx],sync:()=>{let n=globalThis[zw];if(n===void 0)throw new Error(xa("Analytics"));return n}},Gx=_p.async,zx=xe(Lx,!0);var c4=xe(Hw,!0);var u4=xe(jx,!0);var Kw=(()=>{class n{initialized;disposables=[];constructor(t,r,i){Y("angularfire",tt.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),Gx().then(()=>{let o=i.get(no);o?this.disposables=[Dx(t).subscribe(a=>{u4(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ne(to),ne(te),ne(we))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),l4="firebase_event_origin",d4="firebase_previous_class",h4="firebase_previous_id",f4="firebase_previous_screen",p4="firebase_screen_class",Bx="firebase_screen_id",g4="firebase_screen",Ww="outlet",m4="page_path",y4="page_title",ol="screen_class",$x="screen_name",_4="screen_view",v4="auto",w4="#",I4=Math.floor(Math.random()*(2**32-1))-2**31,qw={},E4=n=>{let e=[n[ol],n[Ww]].join(w4);if(qw.hasOwnProperty(e))return qw[e];{let t=I4++;return qw[e]=t,t}},C4=(n,e,t)=>n.events.pipe(dn(i=>i instanceof Gu)).pipe(wn(i=>{let o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return X(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[$x]:l,[m4]:`/${o}`,[l4]:v4,[g4]:l,[Ww]:i.snapshot.outlet};e&&(d[y4]=e.getTitle());let f=a.component;if(f){if(f===Qv){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return X(ye(U({},d),{[ol]:f}));if(f){let g=t.resolveComponentFactory(f);return X(ye(U({},d),{[ol]:g.selector}))}return X(null)}),dn(i=>!!i),K(i=>U({[p4]:i[ol],[Bx]:E4(i)},i)),ay(i=>i[Ww]),wt(i=>i.pipe(dh((s,o)=>JSON.stringify(s)===JSON.stringify(o)),Xo(void 0),fh(),K(([s,o])=>s?U({[d4]:s[ol],[f4]:s[$x],[h4]:s[Bx]},o):o)))),Wx=(()=>{class n{disposable;constructor(t,r,i,s,o,a){Y("angularfire",tt.full,"screen-tracking"),Gx().then(()=>{let c=a.get(no);!t||!c||s.runOutsideAngular(()=>{this.disposable=C4(t,r,i).pipe(wn(l=>_(this,null,function*(){return o&&(yield o.initialized),c4(c,_4,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ne(Qf,8),ne(Mf,8),ne(Wi),ne(te),ne(Kw,8),ne(we))};static \u0275prov=B({token:n,factory:n.\u0275fac})}return n})(),Qw=new $("angularfire2.analytics-instances");function T4(n,e){if(!_p.sync())return null;let t=Rt(Hx,n,e);return t&&new no(t)}function b4(n){return(e,t)=>{if(!_p.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new no(r)}}var D4={provide:Gw,deps:[[new se,Qw]]},S4={provide:no,useFactory:T4,deps:[[new se,Qw],nt]};function Kx(n,...e){return Y("angularfire",tt.full,"analytics"),Qe([S4,D4,{provide:Zi,useValue:_p.async,multi:!0},{provide:Qw,useFactory:b4(n),multi:!0,deps:[te,we,mt,ut,...e]}])}var Qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yx={};var is,Yw;(function(){var n;function e(C,v){function I(){}I.prototype=v.prototype,C.D=v.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(T,b,A){for(var E=Array(arguments.length-2),Zr=2;Zr<arguments.length;Zr++)E[Zr-2]=arguments[Zr];return v.prototype[b].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=C.g[0],I=C.g[1],b=C.g[2];var A=C.g[3],E=v+(A^I&(b^A))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(I^b))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^A)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~A))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var I=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=I;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(T[b++]=C.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=C[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var I=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=I&255,I/=256;for(this.u(C),C=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)C[I++]=this.g[v]>>>T&255;return C};function s(C,v){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=v(C)}function o(C,v){this.h=v;for(var I=[],T=!0,b=C.length-1;0<=b;b--){var A=C[b]|0;T&&A==v||(I[b]=A,T=!1)}this.g=I}var a={};function c(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return S(l(-C));for(var v=[],I=1,T=0;C>=I;T++)v[T]=C/I|0,I*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return S(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=f,b=0;b<C.length;b+=8){var A=Math.min(8,C.length-b),E=parseInt(C.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(I),T=T.add(l(E)))}return T}var f=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(R(this))return-S(this).m();for(var C=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(R(this))return"-"+S(this).toString(C);for(var v=l(Math.pow(C,6)),I=this,T="";;){var b=J(I,v).g;I=O(I,b.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=b,w(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}n.l=function(C){return C=O(this,C),R(C)?-1:w(C)?0:1};function S(C){for(var v=C.g.length,I=[],T=0;T<v;T++)I[T]=~C.g[T];return new o(I,~C.h).add(g)}n.abs=function(){return R(this)?S(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(C.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,I[b]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function O(C,v){return C.add(S(v))}n.j=function(C){if(w(this)||w(C))return f;if(R(this))return R(C)?S(this).j(S(C)):S(S(this).j(C));if(R(C))return S(this.j(S(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<C.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,Zr=C.i(b)>>>16,Ac=C.i(b)&65535;I[2*T+2*b]+=E*Ac,q(I,2*T+2*b),I[2*T+2*b+1]+=A*Ac,q(I,2*T+2*b+1),I[2*T+2*b+1]+=E*Zr,q(I,2*T+2*b+1),I[2*T+2*b+2]+=A*Zr,q(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function q(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function W(C,v){this.g=C,this.h=v}function J(C,v){if(w(v))throw Error("division by zero");if(w(C))return new W(f,f);if(R(C))return v=J(S(C),v),new W(S(v.g),S(v.h));if(R(v))return v=J(C,S(v)),new W(S(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(C);)I=$e(I),T=$e(T);var b=ee(I,1),A=ee(T,1);for(T=ee(T,2),I=ee(I,2);!w(T);){var E=A.add(T);0>=E.l(C)&&(b=b.add(I),A=E),T=ee(T,1),I=ee(I,1)}return v=O(C,b.j(v)),new W(b,v)}for(b=f;0<=C.l(v);){for(I=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),E=A.j(v);R(E)||0<E.l(C);)I-=T,A=l(I),E=A.j(v);w(A)&&(A=g),b=b.add(A),C=O(C,E)}return new W(b,C)}n.A=function(C){return J(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&C.i(T);return new o(I,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|C.i(T);return new o(I,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^C.i(T);return new o(I,this.h^C.h)};function $e(C){for(var v=C.g.length+1,I=[],T=0;T<v;T++)I[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(I,C.h)}function ee(C,v){var I=v>>5;v%=32;for(var T=C.g.length-I,b=[],A=0;A<T;A++)b[A]=0<v?C.i(A+I)>>>v|C.i(A+I+1)<<32-v:C.i(A+I);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Yw=Yx.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,is=Yx.Integer=o}).apply(typeof Qx<"u"?Qx:typeof self<"u"?self:typeof window<"u"?window:{});var vp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wi={};var Zw,A4,Oa,Jw,al,wp,Xw,eI,tI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof vp=="object"&&vp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function y(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var V=Array(arguments.length-2),He=2;He<arguments.length;He++)V[He-2]=arguments[He];return h.prototype[D].apply(m,V)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let V=0;V<N;V++)u[D+V]=m[V]}else u.push(m)}}class O{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(u){return/^[\s\xa0]*$/.test(u)}function W(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function J(u){return J[" "](u),u}J[" "]=function(){};var $e=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ee(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<I.length;N++)p=I[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=fm;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Zr{constructor(){this.h=this.g=null}add(h,p){let m=Ac.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Ac=new O(()=>new WF,u=>u.reset());class WF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Rc,Nc=!1,fm=new Zr,wb=()=>{let u=a.Promise.resolve(void 0);Rc=()=>{u.then(KF)}};var KF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=Ac;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Nc=!1};function xi(){this.s=this.s,this.C=this.C}xi.prototype.s=!1,xi.prototype.ma=function(){this.s||(this.s=!0,this.N())},xi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Wt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var QF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function xc(u,h){if(Wt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if($e){e:{try{J(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:YF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&xc.aa.h.call(this)}}w(xc,Wt);var YF={2:"touch",3:"pen",4:"mouse"};xc.prototype.h=function(){xc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Mc="closure_listenable_"+(1e6*Math.random()|0),ZF=0;function JF(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++ZF,this.da=this.fa=!1}function hd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function fd(u){this.src=u,this.g={},this.h=0}fd.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var V=gm(u,h,m,D);return-1<V?(h=u[V],p||(h.fa=!1)):(h=new JF(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function pm(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(hd(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function gm(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var mm="closure_lm_"+(1e6*Math.random()|0),ym={};function Ib(u,h,p,m,D){if(m&&m.once)return Cb(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)Ib(u,h[N],p,m,D);return null}return p=Im(p),u&&u[Mc]?u.K(h,p,l(m)?!!m.capture:!!m,D):Eb(u,h,p,!1,m,D)}function Eb(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var V=l(D)?!!D.capture:!!D,He=vm(u);if(He||(u[mm]=He=new fd(u)),p=He.add(h,p,m,V,N),p.proxy)return p;if(m=XF(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)QF||(D=V),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(bb(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function XF(){function u(p){return h.call(u.src,u.listener,p)}let h=eL;return u}function Cb(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)Cb(u,h[N],p,m,D);return null}return p=Im(p),u&&u[Mc]?u.L(h,p,l(m)?!!m.capture:!!m,D):Eb(u,h,p,!0,m,D)}function Tb(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)Tb(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=Im(p),u&&u[Mc]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=gm(N,p,m,D),-1<p&&(hd(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=vm(u))&&(h=u.g[h.toString()],u=-1,h&&(u=gm(h,p,m,D)),(p=-1<u?h[u]:null)&&_m(p))}function _m(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Mc])pm(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(bb(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=vm(h))?(pm(p,u),p.h==0&&(p.src=null,h[mm]=null)):hd(u)}}}function bb(u){return u in ym?ym[u]:ym[u]="on"+u}function eL(u,h){if(u.da)u=!0;else{h=new xc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&_m(u),u=p.call(m,h)}return u}function vm(u){return u=u[mm],u instanceof fd?u:null}var wm="__closure_events_fn_"+(1e9*Math.random()>>>0);function Im(u){return typeof u=="function"?u:(u[wm]||(u[wm]=function(h){return u.handleEvent(h)}),u[wm])}function Kt(){xi.call(this),this.i=new fd(this),this.M=this,this.F=null}w(Kt,xi),Kt.prototype[Mc]=!0,Kt.prototype.removeEventListener=function(u,h,p,m){Tb(this,u,h,p,m)};function an(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Wt(h,u);else if(h instanceof Wt)h.target=h.target||u;else{var D=h;h=new Wt(m,u),T(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var V=h.g=p[N];D=pd(V,m,!0,h)&&D}if(V=h.g=u,D=pd(V,m,!0,h)&&D,D=pd(V,m,!1,h)&&D,p)for(N=0;N<p.length;N++)V=h.g=p[N],D=pd(V,m,!1,h)&&D}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)hd(p[m]);delete u.g[h],u.h--}}this.F=null},Kt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Kt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function pd(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var V=h[N];if(V&&!V.da&&V.capture==p){var He=V.listener,qt=V.ha||V.src;V.fa&&pm(u.i,V),D=He.call(qt,m)!==!1&&D}}return D&&!m.defaultPrevented}function Db(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function Sb(u){u.g=Db(()=>{u.g=null,u.i&&(u.i=!1,Sb(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class tL extends xi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Sb(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pc(u){xi.call(this),this.h=u,this.g={}}w(Pc,xi);var Ab=[];function Rb(u){ee(u.g,function(h,p){this.g.hasOwnProperty(p)&&_m(h)},u),u.g={}}Pc.prototype.N=function(){Pc.aa.N.call(this),Rb(this)},Pc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Em=a.JSON.stringify,nL=a.JSON.parse,rL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Cm(){}Cm.prototype.h=null;function Nb(u){return u.h||(u.h=u.i())}function xb(){}var kc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tm(){Wt.call(this,"d")}w(Tm,Wt);function bm(){Wt.call(this,"c")}w(bm,Wt);var hs={},Mb=null;function gd(){return Mb=Mb||new Kt}hs.La="serverreachability";function Pb(u){Wt.call(this,hs.La,u)}w(Pb,Wt);function Oc(u){let h=gd();an(h,new Pb(h))}hs.STAT_EVENT="statevent";function kb(u,h){Wt.call(this,hs.STAT_EVENT,u),this.stat=h}w(kb,Wt);function cn(u){let h=gd();an(h,new kb(h,u))}hs.Ma="timingevent";function Ob(u,h){Wt.call(this,hs.Ma,u),this.size=h}w(Ob,Wt);function Fc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function Lc(){this.g=!0}Lc.prototype.xa=function(){this.g=!1};function iL(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var V="",He=N.split("&"),qt=0;qt<He.length;qt++){var Ne=He[qt].split("=");if(1<Ne.length){var Qt=Ne[0];Ne=Ne[1];var Yt=Qt.split("_");V=2<=Yt.length&&Yt[1]=="type"?V+(Qt+"="+Ne+"&"):V+(Qt+"=redacted&")}}else V=null;else V=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+V})}function sL(u,h,p,m,D,N,V){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+V})}function Mo(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+aL(u,p)+(m?" "+m:"")})}function oL(u,h){u.info(function(){return"TIMEOUT: "+h})}Lc.prototype.info=function(){};function aL(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var V=1;V<D.length;V++)D[V]=""}}}}return Em(p)}catch{return h}}var md={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Fb={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Dm;function yd(){}w(yd,Cm),yd.prototype.g=function(){return new XMLHttpRequest},yd.prototype.i=function(){return{}},Dm=new yd;function Mi(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new Pc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lb}function Lb(){this.i=null,this.g="",this.h=!1}var Vb={},Sm={};function Am(u,h,p){u.L=1,u.v=Id(Jr(h)),u.m=p,u.P=!0,Ub(u,null)}function Ub(u,h){u.F=Date.now(),_d(u),u.A=Jr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),Xb(p.i,"t",m),u.C=0,p=u.j.J,u.h=new Lb,u.g=yD(u.j,p?h:null,!u.m),0<u.O&&(u.M=new tL(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(Ab[0]=D.toString()),D=Ab);for(var N=0;N<D.length;N++){var V=Ib(p,D[N],m||h.handleEvent,!1,h.h||h);if(!V)break;h.g[V.key]=V}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),Oc(),iL(u.i,u.u,u.A,u.l,u.R,u.m)}Mi.prototype.ca=function(u){u=u.target;let h=this.M;h&&Xr(u)==3?h.j():this.Y(u)},Mi.prototype.Y=function(u){try{if(u==this.g)e:{let Yt=Xr(this.g);var h=this.g.Ba();let Oo=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||oD(this.g)))){this.J||Yt!=4||h==7||(h==8||0>=Oo?Oc(3):Oc(2)),Rm(this);var p=this.g.Z();this.X=p;t:if(jb(this)){var m=oD(this.g);u="";var D=m.length,N=Xr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fs(this),Vc(this);var V="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=p==200,sL(this.i,this.u,this.A,this.l,this.R,Yt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var He,qt=this.g;if((He=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(He)){var Ne=He;break t}}Ne=null}if(p=Ne)Mo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nm(this,p);else{this.o=!1,this.s=3,cn(12),fs(this),Vc(this);break e}}if(this.P){p=!0;let ur;for(;!this.J&&this.C<V.length;)if(ur=cL(this,V),ur==Sm){Yt==4&&(this.s=4,cn(14),p=!1),Mo(this.i,this.l,null,"[Incomplete Response]");break}else if(ur==Vb){this.s=4,cn(15),Mo(this.i,this.l,V,"[Invalid Chunk]"),p=!1;break}else Mo(this.i,this.l,ur,null),Nm(this,ur);if(jb(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||V.length!=0||this.h.h||(this.s=1,cn(16),p=!1),this.o=this.o&&p,!p)Mo(this.i,this.l,V,"[Invalid Chunked Response]"),fs(this),Vc(this);else if(0<V.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Fm(Qt),Qt.M=!0,cn(11))}}else Mo(this.i,this.l,V,null),Nm(this,V);Yt==4&&fs(this),this.o&&!this.J&&(Yt==4?fD(this.j,this):(this.o=!1,_d(this)))}else bL(this.g),p==400&&0<V.indexOf("Unknown SID")?(this.s=3,cn(12)):(this.s=0,cn(13)),fs(this),Vc(this)}}}catch{}finally{}};function jb(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function cL(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Sm:(p=Number(h.substring(p,m)),isNaN(p)?Vb:(m+=1,m+p>h.length?Sm:(h=h.slice(m,m+p),u.C=m+p,h)))}Mi.prototype.cancel=function(){this.J=!0,fs(this)};function _d(u){u.S=Date.now()+u.I,Bb(u,u.I)}function Bb(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Fc(g(u.ba,u),h)}function Rm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Mi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(oL(this.i,this.A),this.L!=2&&(Oc(),cn(17)),fs(this),this.s=2,Vc(this)):Bb(this,this.S-u)};function Vc(u){u.j.G==0||u.J||fD(u.j,u)}function fs(u){Rm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,Rb(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Nm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||xm(p.h,u))){if(!u.K&&xm(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Dd(p),Td(p);else break e;Om(p),cn(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Fc(g(p.Za,p),6e3));if(1>=qb(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else gs(p,11)}else if((u.K||p.g==u)&&Dd(p),!q(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Ne=D[h];if(p.T=Ne[0],Ne=Ne[1],p.G==2)if(Ne[0]=="c"){p.K=Ne[1],p.ia=Ne[2];let Qt=Ne[3];Qt!=null&&(p.la=Qt,p.j.info("VER="+p.la));let Yt=Ne[4];Yt!=null&&(p.Aa=Yt,p.j.info("SVER="+p.Aa));let Oo=Ne[5];Oo!=null&&typeof Oo=="number"&&0<Oo&&(m=1.5*Oo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let ur=u.g;if(ur){let Ad=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ad){var N=m.h;N.g||Ad.indexOf("spdy")==-1&&Ad.indexOf("quic")==-1&&Ad.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Mm(N,N.h),N.h=null))}if(m.D){let Lm=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Lm&&(m.ya=Lm,et(m.I,m.D,Lm))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var V=u;if(m.qa=mD(m,m.J?m.ia:null,m.W),V.K){Gb(m.h,V);var He=V,qt=m.L;qt&&(He.I=qt),He.B&&(Rm(He),_d(He)),m.g=V}else dD(m);0<p.i.length&&bd(p)}else Ne[0]!="stop"&&Ne[0]!="close"||gs(p,7);else p.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?gs(p,7):km(p):Ne[0]!="noop"&&p.l&&p.l.ta(Ne),p.v=0)}}Oc(4)}catch{}}var uL=class{constructor(u,h){this.g=u,this.map=h}};function $b(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hb(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function qb(u){return u.h?1:u.g?u.g.size:0}function xm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Mm(u,h){u.g?u.g.add(h):u.h=h}function Gb(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}$b.prototype.cancel=function(){if(this.i=zb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function zb(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function lL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function dL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function Wb(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=dL(u),m=lL(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var Kb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hL(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function ps(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof ps){this.h=u.h,vd(this,u.j),this.o=u.o,this.g=u.g,wd(this,u.s),this.l=u.l;var h=u.i,p=new Bc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Qb(this,p),this.m=u.m}else u&&(h=String(u).match(Kb))?(this.h=!1,vd(this,h[1]||"",!0),this.o=Uc(h[2]||""),this.g=Uc(h[3]||"",!0),wd(this,h[4]),this.l=Uc(h[5]||"",!0),Qb(this,h[6]||"",!0),this.m=Uc(h[7]||"")):(this.h=!1,this.i=new Bc(null,this.h))}ps.prototype.toString=function(){var u=[],h=this.j;h&&u.push(jc(h,Yb,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(jc(h,Yb,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(jc(p,p.charAt(0)=="/"?gL:pL,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",jc(p,yL)),u.join("")};function Jr(u){return new ps(u)}function vd(u,h,p){u.j=p?Uc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function wd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function Qb(u,h,p){h instanceof Bc?(u.i=h,_L(u.i,u.h)):(p||(h=jc(h,mL)),u.i=new Bc(h,u.h))}function et(u,h,p){u.i.set(h,p)}function Id(u){return et(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Uc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,fL),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function fL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Yb=/[#\/\?@]/g,pL=/[#\?:]/g,gL=/[#\?]/g,mL=/[#\?@]/g,yL=/#/g;function Bc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function Pi(u){u.g||(u.g=new Map,u.h=0,u.i&&hL(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Bc.prototype,n.add=function(u,h){Pi(this),this.i=null,u=Po(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function Zb(u,h){Pi(u),h=Po(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function Jb(u,h){return Pi(u),h=Po(u,h),u.g.has(h)}n.forEach=function(u,h){Pi(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},n.na=function(){Pi(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},n.V=function(u){Pi(this);let h=[];if(typeof u=="string")Jb(this,u)&&(h=h.concat(this.g.get(Po(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return Pi(this),this.i=null,u=Po(this,u),Jb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function Xb(u,h,p){Zb(u,h),0<p.length&&(u.i=null,u.g.set(Po(u,h),R(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),V=this.V(m);for(m=0;m<V.length;m++){var D=N;V[m]!==""&&(D+="="+encodeURIComponent(String(V[m]))),u.push(D)}}return this.i=u.join("&")};function Po(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function _L(u,h){h&&!u.j&&(Pi(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(Zb(this,m),Xb(this,D,p))},u)),u.j=h}function vL(u,h){let p=new Lc;if(a.Image){let m=new Image;m.onload=y(ki,p,"TestLoadImage: loaded",!0,h,m),m.onerror=y(ki,p,"TestLoadImage: error",!1,h,m),m.onabort=y(ki,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=y(ki,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function wL(u,h){let p=new Lc,m=new AbortController,D=setTimeout(()=>{m.abort(),ki(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?ki(p,"TestPingServer: ok",!0,h):ki(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),ki(p,"TestPingServer: error",!1,h)})}function ki(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function IL(){this.g=new rL}function EL(u,h,p){let m=p||"";try{Wb(u,function(D,N){let V=D;l(D)&&(V=Em(D)),h.push(m+N+"="+encodeURIComponent(V))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function $c(u){this.l=u.Ub||null,this.j=u.eb||!1}w($c,Cm),$c.prototype.g=function(){return new Ed(this.l,this.j)},$c.prototype.i=function(u){return function(){return u}}({});function Ed(u,h){Kt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ed,Kt),n=Ed.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,qc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,qc(this)),this.g&&(this.readyState=3,qc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;eD(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function eD(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Hc(this):qc(this),this.readyState==3&&eD(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Hc(this))},n.Qa=function(u){this.g&&(this.response=u,Hc(this))},n.ga=function(){this.g&&Hc(this)};function Hc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,qc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function qc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ed.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function tD(u){let h="";return ee(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function Pm(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=tD(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):et(u,h,p))}function ht(u){Kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ht,Kt);var CL=/^https?$/i,TL=["POST","PUT"];n=ht.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Dm.g(),this.v=this.o?Nb(this.o):Nb(Dm),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){nD(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(TL,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,V]of p)this.g.setRequestHeader(N,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sD(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){nD(this,N)}};function nD(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,rD(u),Cd(u)}function rD(u){u.A||(u.A=!0,an(u,"complete"),an(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,an(this,"complete"),an(this,"abort"),Cd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cd(this,!0)),ht.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?iD(this):this.bb())},n.bb=function(){iD(this)};function iD(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Xr(u)!=4||u.Z()!=2)){if(u.u&&Xr(u)==4)Db(u.Ea,0,u);else if(an(u,"readystatechange"),Xr(u)==4){u.h=!1;try{let V=u.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=V===0){var D=String(u.D).match(Kb)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!CL.test(D?D.toLowerCase():"")}p=m}if(p)an(u,"complete"),an(u,"success");else{u.m=6;try{var N=2<Xr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",rD(u)}}finally{Cd(u)}}}}function Cd(u,h){if(u.g){sD(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||an(u,"ready");try{p.onreadystatechange=m}catch{}}}function sD(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Xr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Xr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),nL(h)}};function oD(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function bL(u){let h={};u=(u.g&&2<=Xr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(q(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}C(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gc(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function aD(u){this.Aa=0,this.i=[],this.j=new Lc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gc("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gc("baseRetryDelayMs",5e3,u),this.cb=Gc("retryDelaySeedMs",1e4,u),this.Wa=Gc("forwardChannelMaxRetries",2,u),this.wa=Gc("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new $b(u&&u.concurrentRequestLimit),this.Da=new IL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=aD.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){cn(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=mD(this,null,this.W),bd(this)};function km(u){if(cD(u),u.G==3){var h=u.U++,p=Jr(u.I);if(et(p,"SID",u.K),et(p,"RID",h),et(p,"TYPE","terminate"),zc(u,p),h=new Mi(u,u.j,h),h.L=2,h.v=Id(Jr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=yD(h.j,null),h.g.ea(h.v)),h.F=Date.now(),_d(h)}gD(u)}function Td(u){u.g&&(Fm(u),u.g.cancel(),u.g=null)}function cD(u){Td(u),u.u&&(a.clearTimeout(u.u),u.u=null),Dd(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function bd(u){if(!Hb(u.h)&&!u.s){u.s=!0;var h=u.Ga;Rc||wb(),Nc||(Rc(),Nc=!0),fm.add(h,u),u.B=0}}function DL(u,h){return qb(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Fc(g(u.Ga,u,h),pD(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new Mi(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=lD(this,D,h),p=Jr(this.I),et(p,"RID",u),et(p,"CVER",22),this.D&&et(p,"X-HTTP-Session-Id",this.D),zc(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(tD(N)))+"&"+h:this.m&&Pm(p,this.m,N)),Mm(this.h,D),this.Ua&&et(p,"TYPE","init"),this.P?(et(p,"$req",h),et(p,"SID","null"),D.T=!0,Am(D,p,null)):Am(D,p,h),this.G=2}}else this.G==3&&(u?uD(this,u):this.i.length==0||Hb(this.h)||uD(this))};function uD(u,h){var p;h?p=h.l:p=u.U++;let m=Jr(u.I);et(m,"SID",u.K),et(m,"RID",p),et(m,"AID",u.T),zc(u,m),u.m&&u.o&&Pm(m,u.m,u.o),p=new Mi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=lD(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Mm(u.h,p),Am(p,m,h)}function zc(u,h){u.H&&ee(u.H,function(p,m){et(h,m,p)}),u.l&&Wb({},function(p,m){et(h,m,p)})}function lD(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let V=["count="+p];N==-1?0<p?(N=D[0].g,V.push("ofs="+N)):N=0:V.push("ofs="+N);let He=!0;for(let qt=0;qt<p;qt++){let Ne=D[qt].g,Qt=D[qt].map;if(Ne-=N,0>Ne)N=Math.max(0,D[qt].g-100),He=!1;else try{EL(Qt,V,"req"+Ne+"_")}catch{m&&m(Qt)}}if(He){m=V.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function dD(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Rc||wb(),Nc||(Rc(),Nc=!0),fm.add(h,u),u.v=0}}function Om(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Fc(g(u.Fa,u),pD(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,hD(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Fc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,cn(10),Td(this),hD(this))};function Fm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function hD(u){u.g=new Mi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Jr(u.qa);et(h,"RID","rpc"),et(h,"SID",u.K),et(h,"AID",u.T),et(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&et(h,"TO",u.ja),et(h,"TYPE","xmlhttp"),zc(u,h),u.m&&u.o&&Pm(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Id(Jr(h)),p.m=null,p.P=!0,Ub(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Td(this),Om(this),cn(19))};function Dd(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function fD(u,h){var p=null;if(u.g==h){Dd(u),Fm(u),u.g=null;var m=2}else if(xm(u.h,h))p=h.D,Gb(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=gd(),an(m,new Ob(m,p)),bd(u)}else dD(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&DL(u,h)||m==2&&Om(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:gs(u,5);break;case 4:gs(u,10);break;case 3:gs(u,6);break;default:gs(u,2)}}}function pD(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function gs(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new ps(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||vd(m,"https"),Id(m),D?vL(m.toString(),p):wL(m.toString(),p)}else cn(2);u.G=0,u.l&&u.l.sa(h),gD(u),cD(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),cn(2)):(this.j.info("Failed to ping google.com"),cn(1))};function gD(u){if(u.G=0,u.ka=[],u.l){let h=zb(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function mD(u,h,p){var m=p instanceof ps?Jr(p):new ps(p);if(m.g!="")h&&(m.g=h+"."+m.g),wd(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new ps(null);m&&vd(N,m),h&&(N.g=h),D&&wd(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&et(m,p,h),et(m,"VER",u.la),zc(u,m),m}function yD(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new ht(new $c({eb:p})):new ht(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function _D(){}n=_D.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Sd(){}Sd.prototype.g=function(u,h){return new xn(u,h)};function xn(u,h){Kt.call(this),this.g=new aD(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!q(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new ko(this)}w(xn,Kt),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){km(this.g)},xn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Em(u),u=p);h.i.push(new uL(h.Ya++,u)),h.G==3&&bd(h)},xn.prototype.N=function(){this.g.l=null,delete this.j,km(this.g),delete this.g,xn.aa.N.call(this)};function vD(u){Tm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(vD,Tm);function wD(){bm.call(this),this.status=1}w(wD,bm);function ko(u){this.g=u}w(ko,_D),ko.prototype.ua=function(){an(this.g,"a")},ko.prototype.ta=function(u){an(this.g,new vD(u))},ko.prototype.sa=function(u){an(this.g,new wD)},ko.prototype.ra=function(){an(this.g,"b")},Sd.prototype.createWebChannel=Sd.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,tI=wi.createWebChannelTransport=function(){return new Sd},eI=wi.getStatEventTarget=function(){return gd()},Xw=wi.Event=hs,wp=wi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},md.NO_ERROR=0,md.TIMEOUT=8,md.HTTP_ERROR=6,al=wi.ErrorCode=md,Fb.COMPLETE="complete",Jw=wi.EventType=Fb,xb.EventType=kc,kc.OPEN="a",kc.CLOSE="b",kc.ERROR="c",kc.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,Oa=wi.WebChannel=xb,A4=wi.FetchXmlHttpFactory=$c,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,Zw=wi.XhrIo=ht}).apply(typeof vp<"u"?vp:typeof self<"u"?self:typeof window<"u"?window:{});var Zx="@firebase/firestore";var Bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var ec="10.14.0";var ao=new Ar("@firebase/firestore");function cl(){return ao.logLevel}function z(n,...e){if(ao.logLevel<=Jt.DEBUG){let t=e.map(LE);ao.debug(`Firestore (${ec}): ${n}`,...t)}}function Ii(n,...e){if(ao.logLevel<=Jt.ERROR){let t=e.map(LE);ao.error(`Firestore (${ec}): ${n}`,...t)}}function $a(n,...e){if(ao.logLevel<=Jt.WARN){let t=e.map(LE);ao.warn(`Firestore (${ec}): ${n}`,...t)}}function LE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n="Unexpected state"){let e=`FIRESTORE (${ec}) INTERNAL ASSERTION FAILED: `+n;throw Ii(e),new Error(e)}function je(n,e){n||re()}function ue(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var qr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var bp=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},oI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}},aI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},cI=class{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){je(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new qr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new qr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>_(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new qr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(je(typeof r.accessToken=="string"),new bp(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return je(e===null||typeof e=="string"),new Bt(e)}},uI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},lI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new uI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},hI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){je(this.o===void 0);let r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(je(typeof t.token=="string"),this.R=t.token,new dI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function R4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Dp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=R4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Me(n,e){return n<e?-1:n>e?1:0}function Ha(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Tt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var he=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Tt(0,0))}static max(){return new n(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Sp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(),r===void 0?r=e.length-t:r>e.length-t&&re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},lt=class n extends Sp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},N4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Bn=class n extends Sp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return N4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(lt.fromString(e))}static fromName(e){return new n(lt.fromString(e).popFirst(5))}static empty(){return new n(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new lt(e.slice()))}};var fI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};fI.UNKNOWN_ID=-1;function x4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Tt(t+1,0):new Tt(t,r));return new co(i,Z.empty(),e)}function M4(n){return new co(n.readTime,n.key,-1)}var co=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),Z.empty(),-1)}static max(){return new n(he.max(),Z.empty(),-1)}};function P4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}var k4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Sl(n){return _(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==k4)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function O4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Al(n){return n.name==="IndexedDbTransactionError"}var MM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ig(n){return n==null}function pl(n){return n===0&&1/n==-1/0}function F4(n){return typeof n=="number"&&Number.isInteger(n)&&!pl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var L4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gse=[...L4,"documentOverlays"],V4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],U4=V4,j4=[...U4,"indexConfiguration","indexState","indexEntries"];var zse=[...j4,"globals"];function Jx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function tc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var yt=class n{constructor(e,t){this.comparator=e,this.root=t||Gr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Gr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ua(this.root,e,this.comparator,!0)}},Ua=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};Gr.EMPTY=null,Gr.RED=!0,Gr.BLACK=!1;Gr.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Gr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var en=class n{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ap(this.data.getIterator())}getIteratorFrom(e){return new Ap(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ap=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Hr=class n{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new n([])}unionWith(e){let t=new en(Bn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Rp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var tn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Rp("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};tn.EMPTY_BYTE_STRING=new tn("");var B4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ei(n){if(je(!!n),typeof n=="string"){let e=0,t=B4.exec(n);if(je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(n.seconds),nanos:st(n.nanos)}}function st(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function as(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}function VE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function UE(n){let e=n.mapValue.fields.__previous_value__;return VE(e)?UE(e):e}function gl(n){let e=Ei(n.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}var gI=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Np=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ip={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function uo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?VE(n)?4:OM(n)?9007199254740991:kM(n)?10:11:re()}function Kr(n,e){if(n===e)return!0;let t=uo(n);if(t!==uo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return gl(n).isEqual(gl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ei(i.timestampValue),a=Ei(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return as(i.bytesValue).isEqual(as(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return st(i.geoPointValue.latitude)===st(s.geoPointValue.latitude)&&st(i.geoPointValue.longitude)===st(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return st(i.integerValue)===st(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=st(i.doubleValue),a=st(s.doubleValue);return o===a?pl(o)===pl(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ha(n.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Jx(o)!==Jx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Kr(o[c],a[c])))return!1;return!0}(n,e);default:return re()}}function ml(n,e){return(n.values||[]).find(t=>Kr(t,e))!==void 0}function qa(n,e){if(n===e)return 0;let t=uo(n),r=uo(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=st(s.integerValue||s.doubleValue),c=st(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Xx(n.timestampValue,e.timestampValue);case 4:return Xx(gl(n),gl(e));case 5:return Me(n.stringValue,e.stringValue);case 6:return function(s,o){let a=as(s),c=as(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Me(a[l],c[l]);if(d!==0)return d}return Me(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Me(st(s.latitude),st(o.latitude));return a!==0?a:Me(st(s.longitude),st(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return eM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=Me(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:eM(y,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Ip.mapValue&&o===Ip.mapValue)return 0;if(s===Ip.mapValue)return 1;if(o===Ip.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=Me(c[f],d[f]);if(g!==0)return g;let y=qa(a[c[f]],l[d[f]]);if(y!==0)return y}return Me(c.length,d.length)}(n.mapValue,e.mapValue);default:throw re()}}function Xx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);let t=Ei(n),r=Ei(e),i=Me(t.seconds,r.seconds);return i!==0?i:Me(t.nanos,r.nanos)}function eM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=qa(t[i],r[i]);if(s)return s}return Me(t.length,r.length)}function Ga(n){return mI(n)}function mI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ei(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return as(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=mI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${mI(t.fields[o])}`;return i+"}"}(n.mapValue):re()}function tM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function yI(n){return!!n&&"integerValue"in n}function jE(n){return!!n&&"arrayValue"in n}function nM(n){return!!n&&"nullValue"in n}function rM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cp(n){return!!n&&"mapValue"in n}function kM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ll(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return tc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ll(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ll(n.arrayValue.values[t]);return e}return Object.assign({},n)}function OM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(t)}setAll(e){let t=Bn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ll(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Cp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Cp(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){tc(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(ll(this.value))}};function FM(n){let e=[];return tc(n.fields,(t,r)=>{let i=new Bn([t]);if(Cp(r)){let s=FM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new Hr(e)}var wr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var za=class{constructor(e,t){this.position=e,this.inclusive=t}};function iM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),t.key):r=qa(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Kr(n.position[t],e.position[t]))return!1;return!0}var Wa=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function $4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var xp=class{},Mt=class n extends xp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new vI(e,t,r):t==="array-contains"?new EI(e,r):t==="in"?new CI(e,r):t==="not-in"?new TI(e,r):t==="array-contains-any"?new bI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new wI(e,r):new II(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(qa(t,this.value)):t!==null&&uo(this.value)===uo(t)&&this.matchesComparison(qa(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ir=class n extends xp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return LM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function LM(n){return n.op==="and"}function VM(n){return H4(n)&&LM(n)}function H4(n){for(let e of n.filters)if(e instanceof Ir)return!1;return!0}function _I(n){if(n instanceof Mt)return n.field.canonicalString()+n.op.toString()+Ga(n.value);if(VM(n))return n.filters.map(e=>_I(e)).join(",");{let e=n.filters.map(t=>_I(t)).join(",");return`${n.op}(${e})`}}function UM(n,e){return n instanceof Mt?function(r,i){return i instanceof Mt&&r.op===i.op&&r.field.isEqual(i.field)&&Kr(r.value,i.value)}(n,e):n instanceof Ir?function(r,i){return i instanceof Ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&UM(o,i.filters[a]),!0):!1}(n,e):void re()}function jM(n){return n instanceof Mt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ga(t.value)}`}(n):n instanceof Ir?function(t){return t.op.toString()+" {"+t.getFilters().map(jM).join(" ,")+"}"}(n):"Filter"}var vI=class extends Mt{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},wI=class extends Mt{constructor(e,t){super(e,"in",t),this.keys=BM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},II=class extends Mt{constructor(e,t){super(e,"not-in",t),this.keys=BM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}var EI=class extends Mt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jE(t)&&ml(t.arrayValue,this.value)}},CI=class extends Mt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&ml(this.value.arrayValue,t)}},TI=class extends Mt{constructor(e,t){super(e,"not-in",t)}matches(e){if(ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!ml(this.value.arrayValue,t)}},bI=class extends Mt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jE(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ml(this.value.arrayValue,r))}};var DI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function oM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new DI(n,e,t,r,i,s,o)}function BE(n){let e=ue(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>_I(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ig(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ga(r)).join(",")),e.ue=t}return e.ue}function $E(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sM(n.startAt,e.startAt)&&sM(n.endAt,e.endAt)}function SI(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var lo=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function q4(n,e,t,r,i,s,o,a){return new lo(n,e,t,r,i,s,o,a)}function HE(n){return new lo(n)}function aM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $M(n){return n.collectionGroup!==null}function dl(n){let e=ue(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new en(Bn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Wa(s,r))}),t.has(Bn.keyField().canonicalString())||e.ce.push(new Wa(Bn.keyField(),r))}return e.ce}function zr(n){let e=ue(n);return e.le||(e.le=G4(e,dl(n))),e.le}function G4(n,e){if(n.limitType==="F")return oM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Wa(i.field,s)});let t=n.endAt?new za(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new za(n.startAt.position,n.startAt.inclusive):null;return oM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function AI(n,e){let t=n.filters.concat([e]);return new lo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function RI(n,e,t){return new lo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function sg(n,e){return $E(zr(n),zr(e))&&n.limitType===e.limitType}function HM(n){return`${BE(zr(n))}|lt:${n.limitType}`}function Fa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jM(i)).join(", ")}]`),ig(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ga(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ga(i)).join(",")),`Target(${r})`}(zr(n))}; limitType=${n.limitType})`}function og(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of dl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=iM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,dl(r),i)||r.endAt&&!function(o,a,c){let l=iM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,dl(r),i))}(n,e)}function z4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qM(n){return(e,t)=>{let r=!1;for(let i of dl(n)){let s=W4(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function W4(n,e,t){let r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?qa(c,l):re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var cs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){tc(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return PM(this.inner)}size(){return this.innerSize}};var K4=new yt(Z.comparator);function Ci(){return K4}var GM=new yt(Z.comparator);function ul(...n){let e=GM;for(let t of n)e=e.insert(t.key,t);return e}function zM(n){let e=GM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ro(){return hl()}function WM(){return hl()}function hl(){return new cs(n=>n.toString(),(n,e)=>n.isEqual(e))}var Q4=new yt(Z.comparator),Y4=new en(Z.comparator);function Ie(...n){let e=Y4;for(let t of n)e=e.add(t);return e}var Z4=new en(Me);function J4(){return Z4}function qE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pl(e)?"-0":e}}function KM(n){return{integerValue:""+n}}function X4(n,e){return F4(e)?KM(e):qE(n,e)}var Ka=class{constructor(){this._=void 0}};function e3(n,e,t){return n instanceof Qa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&VE(s)&&(s=UE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ho?YM(n,e):n instanceof fo?ZM(n,e):function(i,s){let o=QM(i,s),a=cM(o)+cM(i.Pe);return yI(o)&&yI(i.Pe)?KM(a):qE(i.serializer,a)}(n,e)}function t3(n,e,t){return n instanceof ho?YM(n,e):n instanceof fo?ZM(n,e):t}function QM(n,e){return n instanceof Ya?function(r){return yI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Qa=class extends Ka{},ho=class extends Ka{constructor(e){super(),this.elements=e}};function YM(n,e){let t=JM(e);for(let r of n.elements)t.some(i=>Kr(i,r))||t.push(r);return{arrayValue:{values:t}}}var fo=class extends Ka{constructor(e){super(),this.elements=e}};function ZM(n,e){let t=JM(e);for(let r of n.elements)t=t.filter(i=>!Kr(i,r));return{arrayValue:{values:t}}}var Ya=class extends Ka{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function cM(n){return st(n.integerValue||n.doubleValue)}function JM(n){return jE(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function n3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ho&&i instanceof ho||r instanceof fo&&i instanceof fo?Ha(r.elements,i.elements,Kr):r instanceof Ya&&i instanceof Ya?Kr(r.Pe,i.Pe):r instanceof Qa&&i instanceof Qa}(n.transform,e.transform)}var NI=class{constructor(e,t){this.version=e,this.transformResults=t}},oo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Tp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Za=class{};function XM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Mp(n.key,oo.none()):new po(n.key,n.data,oo.none());{let t=n.data,r=vr.empty(),i=new en(Bn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ti(n.key,r,new Hr(i.toArray()),oo.none())}}function r3(n,e,t){n instanceof po?function(i,s,o){let a=i.value.clone(),c=lM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Ti?function(i,s,o){if(!Tp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=lM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(eP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function fl(n,e,t,r){return n instanceof po?function(s,o,a,c){if(!Tp(s.precondition,o))return a;let l=s.value.clone(),d=dM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ti?function(s,o,a,c){if(!Tp(s.precondition,o))return a;let l=dM(s.fieldTransforms,c,o),d=o.data;return d.setAll(eP(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Tp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function i3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=QM(r.transform,i||null);s!=null&&(t===null&&(t=vr.empty()),t.set(r.field,s))}return t||null}function uM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ha(r,i,(s,o)=>n3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var po=class extends Za{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Ti=class extends Za{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function eP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function lM(n,e,t){let r=new Map;je(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,t3(o,a,t[i]))}return r}function dM(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,e3(s,o,e))}return r}var Mp=class extends Za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},xI=class extends Za{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var MI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&r3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=fl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=fl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=XM(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(t,r)=>uM(t,r))&&Ha(this.baseMutations,e.baseMutations,(t,r)=>uM(t,r))}},PI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){je(e.mutations.length===r.length);let i=function(){return Q4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var kI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var OI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Nt,De;function s3(n){switch(n){default:return re();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function tP(n){if(n===void 0)return Ii("GRPC error has no .code"),k.UNKNOWN;switch(n){case Nt.OK:return k.OK;case Nt.CANCELLED:return k.CANCELLED;case Nt.UNKNOWN:return k.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return k.INTERNAL;case Nt.UNAVAILABLE:return k.UNAVAILABLE;case Nt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Nt.NOT_FOUND:return k.NOT_FOUND;case Nt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Nt.ABORTED:return k.ABORTED;case Nt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Nt.DATA_LOSS:return k.DATA_LOSS;default:return re()}}(De=Nt||(Nt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";var hM=null;function o3(){return new TextEncoder}var a3=new is([4294967295,4294967295],0);function fM(n){let e=o3().encode(n),t=new Yw;return t.update(e),new Uint8Array(t.digest())}function pM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new is([t,r],0),new is([i,s],0)]}var FI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new io(`Invalid padding: ${t}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new io(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=is.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(is.fromNumber(r)));return i.compare(a3)===1&&(i=new is([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=fM(e),[r,i]=pM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=fM(e),[r,i]=pM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},io=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Pp=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,yl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new yt(Me),Ci(),Ie())}},yl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ie(),Ie(),Ie())}};var ja=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},kp=class{constructor(e,t){this.targetId=e,this.me=t}},Op=class{constructor(e,t,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Fp=class{constructor(){this.fe=0,this.ge=mM(),this.pe=tn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ie(),t=Ie(),r=Ie();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re()}}),new yl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=mM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},LI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ci(),this.qe=gM(),this.Qe=new yt(Me)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(SI(s))if(r===0){let o=new Z(s.path);this.Ue(t,o,wr.newNoDocument(o,he.min()))}else je(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}hM?.et(function(d,f,g,y,w){var R,S,O,q,W,J;let $e={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},ee=f.unchangedNames;return ee&&($e.bloomFilter={applied:w===0,hashCount:(R=ee?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(O=(S=ee?.bits)===null||S===void 0?void 0:S.bitmap)===null||O===void 0?void 0:O.length)!==null&&q!==void 0?q:0,padding:(J=(W=ee?.bits)===null||W===void 0?void 0:W.padding)!==null&&J!==void 0?J:0,mightContain:C=>{var v;return(v=y?.mightContain(C))!==null&&v!==void 0&&v}}),$e}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=as(r).toUint8Array()}catch(c){if(c instanceof Rp)return $a("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new FI(o,i,s)}catch(c){return $a(c instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&SI(a.target)){let c=new Z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,wr.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=Ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Pp(e,t,this.Qe,this.ke,r);return this.ke=Ci(),this.qe=gM(),this.Qe=new yt(Me),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Fp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new en(Me),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function gM(){return new yt(Z.comparator)}function mM(){return new yt(Z.comparator)}var c3={asc:"ASCENDING",desc:"DESCENDING"},u3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},l3={and:"AND",or:"OR"},VI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function UI(n,e){return n.useProto3Json||ig(e)?e:{value:e}}function Lp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function d3(n,e){return Lp(n,e.toTimestamp())}function Wr(n){return je(!!n),he.fromTimestamp(function(t){let r=Ei(t);return new Tt(r.seconds,r.nanos)}(n))}function GE(n,e){return jI(n,e).canonicalString()}function jI(n,e){let t=function(i){return new lt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rP(n){let e=lt.fromString(n);return je(cP(e)),e}function BI(n,e){return GE(n.databaseId,e.path)}function nI(n,e){let t=rP(e);if(t.get(1)!==n.databaseId.projectId)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(sP(t))}function iP(n,e){return GE(n.databaseId,e)}function h3(n){let e=rP(n);return e.length===4?lt.emptyPath():sP(e)}function $I(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sP(n){return je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function yM(n,e,t){return{name:BI(n,e),fields:t.value.mapValue.fields}}function f3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(je(d===void 0||typeof d=="string"),tn.fromBase64String(d||"")):(je(d===void 0||d instanceof Buffer||d instanceof Uint8Array),tn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?k.UNKNOWN:tP(l.code);return new G(d,l.message||"")}(o);t=new Op(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=nI(n,r.document.name),s=Wr(r.document.updateTime),o=r.document.createTime?Wr(r.document.createTime):he.min(),a=new vr({mapValue:{fields:r.document.fields}}),c=wr.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new ja(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=nI(n,r.document),s=r.readTime?Wr(r.readTime):he.min(),o=wr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new ja([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=nI(n,r.document),s=r.removedTargetIds||[];t=new ja([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new OI(i,s),a=r.targetId;t=new kp(a,o)}}return t}function p3(n,e){let t;if(e instanceof po)t={update:yM(n,e.key,e.value)};else if(e instanceof Mp)t={delete:BI(n,e.key)};else if(e instanceof Ti)t={update:yM(n,e.key,e.data),updateMask:C3(e.fieldMask)};else{if(!(e instanceof xI))return re();t={verify:BI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Qa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ho)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof fo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ya)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:d3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(n,e.precondition)),t}function g3(n,e){return n&&n.length>0?(je(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?Wr(i.updateTime):Wr(s);return o.isEqual(he.min())&&(o=Wr(s)),new NI(o,i.transformResults||[])}(t,e))):[]}function m3(n,e){return{documents:[iP(n,e.path)]}}function y3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iP(n,i);let s=function(l){if(l.length!==0)return aP(Ir.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:La(g.field),direction:w3(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=UI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function _3(n){let e=h3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){je(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=oP(f);return g instanceof Ir&&VM(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new Wa(Va(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,ig(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,y=f.values||[];return new za(y,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,y=f.values||[];return new za(y,g)}(t.endAt)),q4(e,i,o,s,a,"F",c,l)}function v3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Va(t.unaryFilter.field);return Mt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Va(t.unaryFilter.field);return Mt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Va(t.unaryFilter.field);return Mt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Va(t.unaryFilter.field);return Mt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(n):n.fieldFilter!==void 0?function(t){return Mt.create(Va(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ir.create(t.compositeFilter.filters.map(r=>oP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(t.compositeFilter.op))}(n):re()}function w3(n){return c3[n]}function I3(n){return u3[n]}function E3(n){return l3[n]}function La(n){return{fieldPath:n.canonicalString()}}function Va(n){return Bn.fromServerFormat(n.fieldPath)}function aP(n){return n instanceof Mt?function(t){if(t.op==="=="){if(rM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NAN"}};if(nM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NAN"}};if(nM(t.value))return{unaryFilter:{field:La(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(t.field),op:I3(t.op),value:t.value}}}(n):n instanceof Ir?function(t){let r=t.getFilters().map(i=>aP(i));return r.length===1?r[0]:{compositeFilter:{op:E3(t.op),filters:r}}}(n):re()}function C3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _l=class n{constructor(e,t,r,i,s=he.min(),o=he.min(),a=tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var HI=class{constructor(e){this.ct=e}};function T3(n){let e=_3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?RI(e,e.limit,"L"):e}var Vp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(st(e.integerValue));else if("doubleValue"in e){let r=st(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),pl(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ei(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(as(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?OM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):kM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(st(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Vp.vt=new Vp;var qI=class{constructor(){this.un=new GI}addToCollectionParentIndex(e,t){return this.un.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(co.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(co.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},GI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new en(lt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new en(lt.comparator)).toArray()}};var Kse=new Uint8Array(0);var $r=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};$r.DEFAULT_COLLECTION_PERCENTILE=10,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$r.DEFAULT=new $r(41943040,$r.DEFAULT_COLLECTION_PERCENTILE,$r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$r.DISABLED=new $r(-1,0,0);var vl=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var zI=class{constructor(){this.changes=new cs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var WI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var KI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&fl(r.mutation,i,Hr.empty(),Tt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){let i=ro();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=ul();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ro();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ci(),o=hl(),a=function(){return hl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Ti)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),fl(d.mutation,l,d.mutation.getFieldMask(),Tt.now())):o.set(l.key,Hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new WI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=hl(),i=new yt((o,a)=>o-a),s=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||Hr.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||Ie()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=WM();d.forEach(g=>{if(!s.has(g)){let y=XM(t.get(g),r.get(g));y!==null&&f.set(g,y),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$M(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):F.resolve(ro()),a=-1,c=s;return o.next(l=>F.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?F.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,Ie())).next(d=>({batchId:a,changes:zM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=ul();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=ul();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,c=>{let l=function(f,g){return new lo(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,wr.newInvalidDocument(d)))});let a=ul();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&fl(d.mutation,l,Hr.empty(),Tt.now()),og(t,l)&&(a=a.insert(c,l))}),a})}};var QI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return F.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}}(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:T3(i.bundledQuery),readTime:Wr(i.readTime)}}(t)),F.resolve()}};var YI=class{constructor(){this.overlays=new yt(Z.comparator),this.Ir=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ro();return F.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=ro(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new yt((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=ro(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=ro(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return F.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kI(t,r));let s=this.Ir.get(t);s===void 0&&(s=Ie(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var ZI=class{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var wl=class{constructor(){this.Tr=new en(xt.Er),this.dr=new en(xt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new xt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new xt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Z(new lt([])),r=new xt(t,e),i=new xt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Z(new lt([])),r=new xt(t,e),i=new xt(t,e+1),s=Ie();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new xt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},xt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Z.comparator(e.key,t.key)||Me(e.wr,t.wr)}static Ar(e,t){return Me(e.wr,t.wr)||Z.comparator(e.key,t.key)}};var JI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new en(xt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new MI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new xt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,t){return F.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new xt(t,0),i=new xt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new en(Me);return t.forEach(i=>{let s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Z.isDocumentKey(s)||(s=s.child(""));let o=new xt(new Z(s),0),a=new en(Me);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){je(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(t.mutations,i=>{let s=new xt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new xt(t,0),i=this.br.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var XI=class{constructor(e){this.Mr=e,this.docs=function(){return new yt(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=Ci();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ci(),o=t.path,a=new Z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||P4(M4(d),r)<=0||(i.has(d.key)||og(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,t,r,i){re()}Or(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eE(this)}getSize(e){return F.resolve(this.size)}},eE=class extends zI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var tE=class{constructor(e){this.persistence=e,this.Nr=new cs(t=>BE(t),$E),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new wl,this.targetCount=0,this.kr=vl.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),F.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new vl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.Kn(t),F.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(s).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.Br.containsKey(t))}};var nE=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new MM(0),this.Kr=!1,this.Kr=!0,this.$r=new ZI,this.referenceDelegate=e(this),this.Ur=new tE(this),this.indexManager=new qI,this.remoteDocumentCache=function(i){return new XI(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new HI(t),this.Gr=new QI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new YI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new JI(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new rE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},rE=class extends pI{constructor(e){super(),this.currentSequenceNumber=e}},iE=class n{constructor(e){this.persistence=e,this.Jr=new wl,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),F.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{let i=Z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,he.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return F.or([()=>F.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var sE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ie(),i=Ie();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var oE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var aE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return AD()?8:O4(Zt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new oE;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(cl()<=Jt.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Fa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(cl()<=Jt.DEBUG&&z("QueryEngine","Query:",Fa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(cl()<=Jt.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Fa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(t))):F.resolve())}Yi(e,t){if(aM(t))return F.resolve(null);let r=zr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=RI(t,null,"F"),r=zr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Ie(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,RI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return aM(t)||i.isEqual(he.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?F.resolve(null):(cl()<=Jt.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Fa(t)),this.rs(e,o,t,x4(i,-1)).next(a=>a))})}ts(e,t){let r=new en(qM(e));return t.forEach((i,s)=>{og(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return cl()<=Jt.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Fa(t)),this.Ji.getDocumentsMatchingQuery(e,t,co.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var cE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new yt(Me),this._s=new cs(s=>BE(s),$E),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function b3(n,e,t,r){return new cE(n,e,t,r)}function uP(n,e){return _(this,null,function*(){let t=ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=Ie();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function D3(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),y=F.resolve();return g.forEach(w=>{y=y.next(()=>d.getEntry(c,w)).next(R=>{let S=l.docVersions.get(w);je(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ie();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lP(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function S3(n,e){let t=ue(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let y=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(tn.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),i=i.insert(f,y),function(R,S,O){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:O.addedDocuments.size+O.modifiedDocuments.size+O.removedDocuments.size>0}(g,y,d)&&a.push(t.Ur.updateTargetData(s,y))});let c=Ci(),l=Ie();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(A3(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(he.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function A3(n,e,t){let r=Ie(),i=Ie();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ci();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function R3(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function N3(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,F.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new _l(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function uE(n,e,t){return _(this,null,function*(){let r=ue(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Al(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function _M(n,e,t){let r=ue(n),i=he.min(),s=Ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=ue(c),g=f._s.get(d);return g!==void 0?F.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,zr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:he.min(),t?s:Ie())).next(a=>(x3(r,z4(e),a),{documents:a,Ts:s})))}function x3(n,e,t){let r=n.us.get(e)||he.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var Up=class{constructor(){this.activeTargetIds=J4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lE=class{constructor(){this.so=new Up,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Up,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var dE=class{_o(e){}shutdown(){}};var jp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ep=null;function rI(){return Ep===null?Ep=function(){return 268435456+Math.round(2147483648*Math.random())}():Ep++,"0x"+Ep.toString(16)}var M3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var hE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Xt="WebChannelConnection",fE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=rI(),c=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(z("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw $a("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ec}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=M3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=rI();return new Promise((o,a)=>{let c=new Zw;c.setWithCredentials(!0),c.listenOnce(Jw.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case al.NO_ERROR:let d=c.getResponseJson();z(Xt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case al.TIMEOUT:z(Xt,`RPC '${e}' ${s} timed out`),a(new G(k.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:let f=c.getStatus();if(z(Xt,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let y=g?.error;if(y&&y.status&&y.message){let w=function(S){let O=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(O)>=0?O:k.UNKNOWN}(y.status);a(new G(w,y.message))}else a(new G(k.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(k.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{z(Xt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);z(Xt,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=rI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=tI(),a=eI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");z(Xt,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,y=!1,w=new hE({Io:S=>{y?z(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(z(Xt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),z(Xt,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),R=(S,O,q)=>{S.listen(O,W=>{try{q(W)}catch(J){setTimeout(()=>{throw J},0)}})};return R(f,Oa.EventType.OPEN,()=>{y||(z(Xt,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),R(f,Oa.EventType.CLOSE,()=>{y||(y=!0,z(Xt,`RPC '${e}' stream ${i} transport closed`),w.So())}),R(f,Oa.EventType.ERROR,S=>{y||(y=!0,$a(Xt,`RPC '${e}' stream ${i} transport errored:`,S),w.So(new G(k.UNAVAILABLE,"The operation could not be completed")))}),R(f,Oa.EventType.MESSAGE,S=>{var O;if(!y){let q=S.data[0];je(!!q);let W=q,J=W.error||((O=W[0])===null||O===void 0?void 0:O.error);if(J){z(Xt,`RPC '${e}' stream ${i} received error:`,J);let $e=J.status,ee=function(I){let T=Nt[I];if(T!==void 0)return tP(T)}($e),C=J.message;ee===void 0&&(ee=k.INTERNAL,C="Unknown error status: "+$e+" with message "+J.message),y=!0,w.So(new G(ee,C)),f.close()}else z(Xt,`RPC '${e}' stream ${i} received:`,q),w.bo(q)}}),R(a,Xw.STAT_EVENT,S=>{S.stat===wp.PROXY?z(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===wp.NOPROXY&&z(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function iI(){return typeof document<"u"?document:null}function ag(n){return new VI(n,!0)}var Bp=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var $p=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(Ii(t.toString()),Ii("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new G(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},pE=class extends $p{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=f3(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?Wr(o.readTime):he.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=$I(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=SI(c)?{documents:m3(s,c)}:{query:y3(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nP(s,o.resumeToken);let l=UI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=Lp(s,o.snapshotVersion.toTimestamp());let l=UI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=v3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=$I(this.serializer),t.removeTarget=e,this.a_(t)}},gE=class extends $p{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return je(!!e.streamToken),this.lastStreamToken=e.streamToken,je(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=g3(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=$I(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>p3(this.serializer,r))};this.a_(t)}};var mE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,jI(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(k.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,jI(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(k.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},yE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ii(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var _E=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>_(this,null,function*(){yo(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(c){return _(this,null,function*(){let l=ue(c);l.L_.add(4),yield Rl(l),l.q_.set("Unknown"),l.L_.delete(4),yield cg(l)})}(this))}))}),this.q_=new yE(r,i)}};function cg(n){return _(this,null,function*(){if(yo(n))for(let e of n.B_)yield e(!0)})}function Rl(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function dP(n,e){let t=ue(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),QE(t)?KE(t):nc(t).r_()&&WE(t,e))}function zE(n,e){let t=ue(n),r=nc(t);t.N_.delete(e),r.r_()&&hP(t,e),t.N_.size===0&&(r.r_()?r.o_():yo(t)&&t.q_.set("Unknown"))}function WE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}nc(n).A_(e)}function hP(n,e){n.Q_.xe(e),nc(n).R_(e)}function KE(n){n.Q_=new LI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),nc(n).start(),n.q_.v_()}function QE(n){return yo(n)&&!nc(n).n_()&&n.N_.size>0}function yo(n){return ue(n).L_.size===0}function fP(n){n.Q_=void 0}function P3(n){return _(this,null,function*(){n.q_.set("Online")})}function k3(n){return _(this,null,function*(){n.N_.forEach((e,t)=>{WE(n,e)})})}function O3(n,e){return _(this,null,function*(){fP(n),QE(n)?(n.q_.M_(e),KE(n)):n.q_.set("Unknown")})}function F3(n,e,t){return _(this,null,function*(){if(n.q_.set("Online"),e instanceof Op&&e.state===2&&e.cause)try{yield function(i,s){return _(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Hp(n,r)}else if(e instanceof ja?n.Q_.Ke(e):e instanceof kp?n.Q_.He(e):n.Q_.We(e),!t.isEqual(he.min()))try{let r=yield lP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(tn.EMPTY_BYTE_STRING,d.snapshotVersion)),hP(s,c);let f=new _l(d.target,c,l,d.sequenceNumber);WE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Hp(n,r)}})}function Hp(n,e,t){return _(this,null,function*(){if(!Al(e))throw e;n.L_.add(1),yield Rl(n),n.q_.set("Offline"),t||(t=()=>lP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield cg(n)}))})}function pP(n,e){return e().catch(t=>Hp(n,t,e))}function ug(n){return _(this,null,function*(){let e=ue(n),t=us(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;L3(e);)try{let i=yield R3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,V3(e,i)}catch(i){yield Hp(e,i)}gP(e)&&mP(e)})}function L3(n){return yo(n)&&n.O_.length<10}function V3(n,e){n.O_.push(e);let t=us(n);t.r_()&&t.V_&&t.m_(e.mutations)}function gP(n){return yo(n)&&!us(n).n_()&&n.O_.length>0}function mP(n){us(n).start()}function U3(n){return _(this,null,function*(){us(n).p_()})}function j3(n){return _(this,null,function*(){let e=us(n);for(let t of n.O_)e.m_(t.mutations)})}function B3(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=PI.from(r,e,t);yield pP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield ug(n)})}function $3(n,e){return _(this,null,function*(){e&&us(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(o){return s3(o)&&o!==k.ABORTED}(i.code)){let s=r.O_.shift();us(r).s_(),yield pP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield ug(r)}})}(n,e)),gP(n)&&mP(n)})}function vM(n,e){return _(this,null,function*(){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=yo(t);t.L_.add(3),yield Rl(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield cg(t)})}function H3(n,e){return _(this,null,function*(){let t=ue(n);e?(t.L_.delete(2),yield cg(t)):e||(t.L_.add(2),yield Rl(t),t.q_.set("Unknown"))})}function nc(n){return n.K_||(n.K_=function(t,r,i){let s=ue(t);return s.w_(),new pE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:P3.bind(null,n),Ro:k3.bind(null,n),mo:O3.bind(null,n),d_:F3.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.K_.s_(),QE(n)?KE(n):n.q_.set("Unknown")):(yield n.K_.stop(),fP(n))}))),n.K_}function us(n){return n.U_||(n.U_=function(t,r,i){let s=ue(t);return s.w_(),new gE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:U3.bind(null,n),mo:$3.bind(null,n),f_:j3.bind(null,n),g_:B3.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield ug(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var vE=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function YE(n,e){if(Ii("AsyncQueue",`${e}: ${n}`),Al(n))return new G(k.UNAVAILABLE,`${e}: ${n}`);throw n}var qp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=ul(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Gp=class{constructor(){this.W_=new yt(Z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ja=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,qp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var wE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},IE=class{constructor(){this.queries=wM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ue(t),s=i.queries;i.queries=wM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new G(k.ABORTED,"Firestore shutting down"))}};function wM(){return new cs(n=>HM(n),sg)}function yP(n,e){return _(this,null,function*(){let t=ue(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new wE,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=YE(o,`Initialization of query '${Fa(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&ZE(t)})}function _P(n,e){return _(this,null,function*(){let t=ue(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function q3(n,e){let t=ue(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ZE(t)}function G3(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function ZE(n){n.Y_.forEach(e=>{e.next()})}var EE,IM;(IM=EE||(EE={})).ea="default",IM.Cache="cache";var zp=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ja(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==EE.Cache}};var Wp=class{constructor(e){this.key=e}},Kp=class{constructor(e){this.key=e}},CE=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Ie(),this.mutatedKeys=Ie(),this.Aa=qM(e),this.Ra=new qp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Gp,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),y=og(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;g&&y?g.data.isEqual(y.data)?w!==R&&(r.track({type:3,doc:y}),S=!0):this.ga(g,y)||(r.track({type:2,doc:y}),S=!0,(c&&this.Aa(y,c)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),S=!0):g&&!y&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(y?(o=o.add(y),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(y,w){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return R(y)-R(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new Ja(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Gp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=Ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Kp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Wp(r))}),t}ba(e){this.Ta=e.Ts,this.da=Ie();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ja.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},TE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},bE=class{constructor(e){this.key=e,this.va=!1}},DE=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new cs(a=>HM(a),sg),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(Z.comparator),this.Na=new Map,this.La=new wl,this.Ba={},this.ka=new Map,this.qa=vl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function z3(n,e,t=!0){return _(this,null,function*(){let r=TP(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield vP(r,e,t,!0),i})}function W3(n,e){return _(this,null,function*(){let t=TP(n);yield vP(t,e,!0,!1)})}function vP(n,e,t,r){return _(this,null,function*(){let i=yield N3(n.localStore,zr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield K3(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&dP(n.remoteStore,i),a})}function K3(n,e,t,r,i){return _(this,null,function*(){n.Ka=(f,g,y)=>function(R,S,O,q){return _(this,null,function*(){let W=S.view.ma(O);W.ns&&(W=yield _M(R.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,W)));let J=q&&q.targetChanges.get(S.targetId),$e=q&&q.targetMismatches.get(S.targetId)!=null,ee=S.view.applyChanges(W,R.isPrimaryClient,J,$e);return CM(R,S.targetId,ee.wa),ee.snapshot})}(n,f,g,y);let s=yield _M(n.localStore,e,!0),o=new CE(e,s.Ts),a=o.ma(s.documents),c=yl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);CM(n,t,l.wa);let d=new TE(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function Q3(n,e,t){return _(this,null,function*(){let r=ue(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!sg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield uE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zE(r.remoteStore,i.targetId),SE(r,i.targetId)}).catch(Sl))):(SE(r,i.targetId),yield uE(r.localStore,i.targetId,!0))})}function Y3(n,e){return _(this,null,function*(){let t=ue(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zE(t.remoteStore,r.targetId))})}function Z3(n,e,t){return _(this,null,function*(){let r=i9(n);try{let i=yield function(o,a){let c=ue(o),l=Tt.now(),d=a.reduce((y,w)=>y.add(w.key),Ie()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let w=Ci(),R=Ie();return c.cs.getEntries(y,d).next(S=>{w=S,w.forEach((O,q)=>{q.isValidDocument()||(R=R.add(O))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,w)).next(S=>{f=S;let O=[];for(let q of a){let W=i3(q,f.get(q.key).overlayedDocument);W!=null&&O.push(new Ti(q.key,W,FM(W.value.mapValue),oo.exists(!0)))}return c.mutationQueue.addMutationBatch(y,l,O,a)}).next(S=>{g=S;let O=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(y,S.batchId,O)})}).then(()=>({batchId:g.batchId,changes:zM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new yt(Me)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Nl(r,i.changes),yield ug(r.remoteStore)}catch(i){let s=YE(i,"Failed to persist write");t.reject(s)}})}function wP(n,e){return _(this,null,function*(){let t=ue(n);try{let r=yield S3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?je(o.va):i.removedDocuments.size>0&&(je(o.va),o.va=!1))}),yield Nl(t,r,e)}catch(r){yield Sl(r)}})}function EM(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ue(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&ZE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function J3(n,e,t){return _(this,null,function*(){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new yt(Z.comparator);o=o.insert(s,wr.newNoDocument(s,he.min()));let a=Ie().add(s),c=new Pp(he.min(),new Map,new yt(Me),o,a);yield wP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),JE(r)}else yield uE(r.localStore,e,!1).then(()=>SE(r,e,t)).catch(Sl)})}function X3(n,e){return _(this,null,function*(){let t=ue(n),r=e.batch.batchId;try{let i=yield D3(t.localStore,e);EP(t,r,null),IP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Nl(t,i)}catch(i){yield Sl(i)}})}function e9(n,e,t){return _(this,null,function*(){let r=ue(n);try{let i=yield function(o,a){let c=ue(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>(je(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);EP(r,e,t),IP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Nl(r,i)}catch(i){yield Sl(i)}})}function IP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function EP(n,e,t){let r=ue(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function SE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||CP(n,r)})}function CP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(zE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),JE(n))}function CM(n,e,t){for(let r of t)r instanceof Wp?(n.La.addReference(r.key,e),t9(n,r)):r instanceof Kp?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||CP(n,r.key)):re()}function t9(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),JE(n))}function JE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Z(lt.fromString(e)),r=n.qa.next();n.Na.set(r,new bE(t)),n.Oa=n.Oa.insert(t,r),dP(n.remoteStore,new _l(zr(HE(t.path)),r,"TargetPurposeLimboResolution",MM.oe))}}function Nl(n,e,t){return _(this,null,function*(){let r=ue(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=sE.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return _(this,null,function*(){let d=ue(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>F.forEach(l,g=>F.forEach(g.$i,y=>d.persistence.referenceDelegate.addReference(f,g.targetId,y)).next(()=>F.forEach(g.Ui,y=>d.persistence.referenceDelegate.removeReference(f,g.targetId,y)))))}catch(f){if(!Al(f))throw f;z("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let y=d.os.get(g),w=y.snapshotVersion,R=y.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function n9(n,e){return _(this,null,function*(){let t=ue(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield uP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new G(k.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Nl(t,r.hs)}})}function r9(n,e){let t=ue(n),r=t.Na.get(e);if(r&&r.va)return Ie().add(r.key);{let i=Ie(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function TP(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=r9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=J3.bind(null,e),e.Ca.d_=q3.bind(null,e.eventManager),e.Ca.$a=G3.bind(null,e.eventManager),e}function i9(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=X3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e9.bind(null,e),e}var TM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return _(this,null,function*(){this.serializer=ag(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return b3(this.persistence,new aE,t.initialUser,this.serializer)}Ga(t){return new nE(iE.Zr,this.serializer)}Wa(t){return new lE}terminate(){return _(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var s9=(()=>{class n{initialize(t,r){return _(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>EM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=n9.bind(null,this.syncEngine),yield H3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new IE}()}createDatastore(t){let r=ag(t.databaseInfo.databaseId),i=function(o){return new fE(o)}(t.databaseInfo);return function(o,a,c,l){return new mE(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new _E(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>EM(this.syncEngine,r,0),function(){return jp.D()?new jp:new dE}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,f){let g=new DE(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return _(this,null,function*(){var t,r;yield function(s){return _(this,null,function*(){let o=ue(s);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Rl(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Qp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ii("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var AE=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=Dp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>_(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=YE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function sI(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield uP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function bM(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield o9(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vM(e.remoteStore,i)),n._onlineComponents=e})}function o9(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield sI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;$a("Error using user provided cache. Falling back to memory cache: "+t),yield sI(n,new TM)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield sI(n,new TM);return n._offlineComponents})}function bP(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield bM(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield bM(n,new s9))),n._onlineComponents})}function a9(n){return bP(n).then(e=>e.syncEngine)}function RE(n){return _(this,null,function*(){let e=yield bP(n),t=e.eventManager;return t.onListen=z3.bind(null,e.syncEngine),t.onUnlisten=Q3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=W3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Y3.bind(null,e.syncEngine),t})}function c9(n,e,t={}){let r=new qr;return n.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return function(s,o,a,c,l){let d=new Qp({next:g=>{d.Za(),o.enqueueAndForget(()=>_P(s,f)),g.fromCache&&c.source==="server"?l.reject(new G(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new zp(a,d,{includeMetadataChanges:!0,_a:!0});return yP(s,f)}(yield RE(n),n.asyncQueue,e,t,r)})),r.promise}function DP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var DM=new Map;function SP(n,e,t){if(!t)throw new G(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function u9(n,e,t,r){if(e===!0&&r===!0)throw new G(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SM(n){if(!Z.isDocumentKey(n))throw new G(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AM(n){if(Z.isDocumentKey(n))throw new G(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re()}function ss(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=lg(n);throw new G(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Yp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}u9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Xa=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yp(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oI;switch(r.type){case"firstParty":return new lI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return _(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=DM.get(t);r&&(z("ComponentProvider","Removing Datastore"),DM.delete(t),r.terminate())}(this),Promise.resolve()}};function AP(n,e,t,r={}){var i;let s=(n=ss(n,Xa))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&$a("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Bt.MOCK_USER;else{a=Lo(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new G(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bt(l)}n._authCredentials=new aI(new bp(a,c))}}var go=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Sn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},os=class n extends go{constructor(e,t,r){super(e,t,HE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Sn(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function RP(n,e,...t){if(n=Ee(n),SP("collection","path",e),n instanceof Xa){let r=lt.fromString(e,...t);return AM(r),new os(n,null,r)}{if(!(n instanceof Sn||n instanceof os))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(lt.fromString(e,...t));return AM(r),new os(n.firestore,null,r)}}function NP(n,e,...t){if(n=Ee(n),arguments.length===1&&(e=Dp.newId()),SP("doc","path",e),n instanceof Xa){let r=lt.fromString(e,...t);return SM(r),new Sn(n,null,new Z(r))}{if(!(n instanceof Sn||n instanceof os))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(lt.fromString(e,...t));return SM(r),new Sn(n.firestore,n instanceof os?n.converter:null,new Z(r))}}var Zp=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bp(this,"async_queue_retry"),this.Vu=()=>{let r=iI();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=iI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=iI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return _(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Al(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ii("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=vE.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}wu(){return _(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function RM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var mo=class extends Xa{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Zp,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return _(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Zp(e),this._firestoreClient=void 0,yield e}})}};function xP(n,e){let t=typeof n=="object"?n:Dt(),r=typeof n=="string"?n:e||"(default)",i=bt(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Fi("firestore");s&&AP(i,...s)}return i}function XE(n){if(n._terminated)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||l9(n),n._firestoreClient}function l9(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new gI(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,DP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new AE(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Il=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(tn.fromBase64String(e))}catch(t){throw new G(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var El=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Jp=class{constructor(e){this._methodName=e}};var Cl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}};var Tl=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var d9=/^__.*__$/,NE=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new po(e,this.data,t,this.fieldTransforms)}};function MP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var xE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Xp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(MP(this.Cu)&&d9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},ME=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ag(e)}Qu(e,t,r,i=!1){return new xE({Cu:e,methodName:t,qu:r,path:Bn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function PP(n){let e=n._freezeSettings(),t=ag(n._databaseId);return new ME(n._databaseId,!!e.ignoreUndefinedProperties,t)}function h9(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);FP("Data must be an object, but it was:",o,r);let a=kP(r,o),c,l;if(s.merge)c=new Hr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=p9(e,f,t);if(!o.contains(g))throw new G(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);m9(d,g)||d.push(g)}c=new Hr(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new NE(new vr(a),c,l)}function f9(n,e,t,r=!1){return eC(t,n.Qu(r?4:3,e))}function eC(n,e){if(OP(n=Ee(n)))return FP("Unsupported field value:",e,n),kP(n,e);if(n instanceof Jp)return function(r,i){if(!MP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=eC(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=Ee(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return X4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Tt.fromDate(r);return{timestampValue:Lp(i.serializer,s)}}if(r instanceof Tt){let s=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lp(i.serializer,s)}}if(r instanceof Cl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Il)return{bytesValue:nP(i.serializer,r._byteString)};if(r instanceof Sn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:GE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Tl)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return qE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${lg(r)}`)}(n,e)}function kP(n,e){let t={};return PM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):tc(n,(r,i)=>{let s=eC(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function OP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof Cl||n instanceof Il||n instanceof Sn||n instanceof Jp||n instanceof Tl)}function FP(n,e,t){if(!OP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=lg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function p9(n,e,t){if((e=Ee(e))instanceof El)return e._internalPath;if(typeof e=="string")return LP(n,e);throw Xp("Field path arguments must be of type string or ",n,!1,void 0,t)}var g9=new RegExp("[~\\*/\\[\\]]");function LP(n,e,t){if(e.search(g9)>=0)throw Xp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new El(...e.split("."))._internalPath}catch{throw Xp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xp(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new G(k.INVALID_ARGUMENT,a+n+c)}function m9(n,e){return n.some(t=>t.isEqual(e))}var eg=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new PE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(tC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},PE=class extends eg{data(){return super.data()}};function tC(n,e){return typeof e=="string"?LP(n,e):e instanceof El?e._internalPath:e._delegate._internalPath}function VP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bl=class{},kE=class extends bl{};function UP(n,e,...t){let r=[];e instanceof bl&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof OE).length,a=s.filter(c=>c instanceof tg).length;if(o>1||o>0&&a>0)throw new G(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var tg=class n extends kE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return BP(e._query,t),new go(e.firestore,e.converter,AI(e._query,t))}_parse(e){let t=PP(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){xM(f,d);let y=[];for(let w of f)y.push(NM(c,s,w));g={arrayValue:{values:y}}}else g=NM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||xM(f,d),g=f9(a,o,f,d==="in"||d==="not-in");return Mt.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function jP(n,e,t){let r=e,i=tC("where",n);return tg._create(i,r,t)}var OE=class n extends bl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ir.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)BP(o,c),o=AI(o,c)}(e._query,t),new go(e.firestore,e.converter,AI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function NM(n,e,t){if(typeof(t=Ee(t))=="string"){if(t==="")throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$M(e)&&t.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(lt.fromString(t));if(!Z.isDocumentKey(r))throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tM(n,new Z(r))}if(t instanceof Sn)return tM(n,t._key);throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lg(t)}.`)}function xM(n,e){if(!Array.isArray(n)||n.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BP(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var FE=class{convertValue(e,t="none"){switch(uo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return tc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>st(o.doubleValue));return new Tl(s)}convertGeoPoint(e){return new Cl(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=UE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(gl(e));default:return null}}convertTimestamp(e){let t=Ei(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=lt.fromString(e);je(cP(r));let i=new Np(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||Ii(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function y9(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var so=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ng=class extends eg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ba(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(tC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ba=class extends ng{data(e={}){return super.data(e)}},rg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new so(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ba(this._firestore,this._userDataWriter,r.key,r,new so(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ba(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ba(i._firestore,i._userDataWriter,a.doc.key,a.doc,new so(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:_9(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function _9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}var Dl=class extends FE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Il(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sn(this.firestore,null,t)}};function $P(n){n=ss(n,go);let e=ss(n.firestore,mo),t=XE(e),r=new Dl(e);return VP(n._query),c9(t,n._query).then(i=>new rg(e,r,n,i))}function HP(n,e,t){n=ss(n,Sn);let r=ss(n.firestore,mo),i=y9(n.converter,e,t);return v9(r,[h9(PP(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,oo.none())])}function nC(n,...e){var t,r,i;n=Ee(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||RM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(RM(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof Sn)l=ss(n.firestore,mo),d=HE(n._key.path),c={next:f=>{e[o]&&e[o](w9(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=ss(n,go);l=ss(f.firestore,mo),d=f._query;let g=new Dl(l);c={next:y=>{e[o]&&e[o](new rg(l,g,f,y))},error:e[o+1],complete:e[o+2]},VP(n._query)}return function(g,y,w,R){let S=new Qp(R),O=new zp(y,S,w);return g.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return yP(yield RE(g),O)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return _P(yield RE(g),O)}))}}(XE(l),d,a,c)}function v9(n,e){return function(r,i){let s=new qr;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Z3(yield a9(r),i,s)})),s.promise}(XE(n),e)}function w9(n,e,t){let r=t.docs.get(e._key),i=new Dl(n);return new ng(n,i,e._key,r,new so(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ec=i})(_n),vt(new _t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new mo(new cI(r.getProvider("auth-internal")),new hI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Np(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Y(Zx,"4.7.3",e),Y(Zx,"4.7.3","esm2017")})();var dg=function(){return dg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},dg.apply(this,arguments)};var C9={includeMetadataChanges:!1};function qP(n,e){return e===void 0&&(e=C9),new ae(function(t){var r=nC(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function GP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:dg(dg({},r),(t={},t[e.idField]=n.id,t))}function zP(n){return qP(n,{includeMetadataChanges:!0}).pipe(K(function(e){return e.docs}))}function WP(n,e){return e===void 0&&(e={}),zP(n).pipe(K(function(t){return t.map(function(r){return GP(r,e)})}))}var _o=class{constructor(e){return e}},KP="firestore",rC=class{constructor(){return Ct(KP)}};var iC=new $("angularfire2.firestore-instances");function T9(n,e){let t=Rt(KP,n,e);return t&&new _o(t)}function b9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _o(r)}}var D9={provide:rC,deps:[[new se,iC]]},S9={provide:_o,useFactory:T9,deps:[[new se,iC],nt]};function QP(n,...e){return Y("angularfire",tt.full,"fst"),Qe([S9,D9,{provide:iC,useFactory:b9(n),multi:!0,deps:[te,we,mt,ut,[new se,_r],[new se,Dn],...e]}])}var rr=xe(WP,!0);var ir=xe(RP,!0);var sC=xe(NP,!0);var oC=xe($P,!0);var YP=xe(xP,!0);var ZP=xe(UP,!0);var aC=xe(HP,!0);var JP=xe(jP,!0);var XP="@firebase/database",ek="1.0.8";var sT="";function A9(n){sT=n}var gC=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Lt(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Nd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var mC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Sr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Mk=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new gC(e)}}catch{}return new mC},wo=Mk("localStorage"),yC=Mk("sessionStorage");var oc=new Ar("@firebase/database"),R9=function(){let n=1;return function(){return n++}}(),Pk=function(n){let e=kD(n),t=new xD;t.update(e);let r=t.digest();return ID.encodeByteArray(r)},Hl=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Hl.apply(null,r):typeof r=="object"?e+=Lt(r):e+=r,e+=" "}return e},Io=null,tk=!0,N9=function(n,e){j(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(oc.logLevel=Jt.VERBOSE,Io=oc.log.bind(oc),e&&yC.set("logging_enabled",!0)):typeof n=="function"?Io=n:(Io=null,yC.remove("logging_enabled"))},nn=function(...n){if(tk===!0&&(tk=!1,Io===null&&yC.get("logging_enabled")===!0&&N9(!0)),Io){let e=Hl.apply(null,n);Io(e)}},ql=function(n){return function(...e){nn(n,...e)}},_C=function(...n){let e="FIREBASE INTERNAL ERROR: "+Hl(...n);oc.error(e)},Di=function(...n){let e=`FIREBASE FATAL ERROR: ${Hl(...n)}`;throw oc.error(e),new Error(e)},$n=function(...n){let e="FIREBASE WARNING: "+Hl(...n);oc.warn(e)},x9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&$n("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kk=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},M9=function(n){if(br()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},cc="[MIN_NAME]",Eo="[MAX_NAME]",gc=function(n,e){if(n===e)return 0;if(n===cc||e===Eo)return-1;if(e===cc||n===Eo)return 1;{let t=nk(n),r=nk(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},P9=function(n,e){return n===e?0:n<e?-1:1},xl=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Lt(e))},oT=function(n){if(typeof n!="object"||n===null)return Lt(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Lt(e[r]),t+=":",t+=oT(n[e[r]]);return t+="}",t},Ok=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function ar(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var Fk=function(n){j(!kk(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},k9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},O9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var F9=new RegExp("^-?(0*)\\d{1,10}$"),L9=-2147483648,V9=2147483647,nk=function(n){if(F9.test(n)){let e=Number(n);if(e>=L9&&e<=V9)return e}return null},Gl=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw $n("Exception was thrown by user callback.",t),e},Math.floor(0))}},U9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Fl=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var vC=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){$n(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var wC=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(nn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',$n(e)}},Ll=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),fg="5",Lk="v",Vk="s",Uk="r",jk="f",Bk=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$k="ls",Hk="p",IC="ac",qk="websocket",Gk="long_polling";var pg=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=wo.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&wo.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function j9(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function zk(n,e,t){j(typeof e=="string","typeof type must == string"),j(typeof t=="object","typeof params must == object");let r;if(e===qk)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===Gk)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);j9(n)&&(t.ns=n.namespace);let i=[];return ar(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var EC=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return TD(this.counters_)}};var cC={},uC={};function aT(n){let e=n.toString();return cC[e]||(cC[e]=new EC),cC[e]}function B9(n,e){let t=n.toString();return uC[t]||(uC[t]=e()),uC[t]}var CC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Gl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var rk="start",$9="close",H9="pLPCommand",q9="pRTLPCB",Wk="id",Kk="pw",Qk="ser",G9="cb",z9="seg",W9="ts",K9="d",Q9="dframe",Yk=1870,Zk=30,Y9=Yk-Zk,Z9=25e3,J9=3e4,TC=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ql(e),this.stats_=aT(t),this.urlFn=c=>(this.appCheckToken&&(c[IC]=this.appCheckToken),zk(t,Gk,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new CC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(J9)),M9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new bC((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===rk)this.id=a,this.password=c;else if(o===$9)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[rk]="t",r[Qk]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[G9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[Lk]=fg,this.transportSessionId&&(r[Vk]=this.transportSessionId),this.lastSessionId&&(r[$k]=this.lastSessionId),this.applicationId&&(r[Hk]=this.applicationId),this.appCheckToken&&(r[IC]=this.appCheckToken),typeof location<"u"&&location.hostname&&Bk.test(location.hostname)&&(r[Uk]=jk);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return br()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!k9()&&!O9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Lt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=ED(t),i=Ok(r,Y9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(br())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[Q9]="t",r[Wk]=e,r[Kk]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Lt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},bC=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,br())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=R9(),window[H9+this.uniqueCallbackIdentifier]=e,window[q9+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){nn("frame writing exception"),a.stack&&nn(a.stack),nn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||nn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Wk]=this.myID,e[Kk]=this.myPW,e[Qk]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Zk+r.length<=Yk;){let o=this.pendingSegs.shift();r=r+"&"+z9+i+"="+o.seg+"&"+W9+i+"="+o.ts+"&"+K9+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Z9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){br()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{nn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var X9=16384,e6=45e3,gg=null;typeof MozWebSocket<"u"?gg=MozWebSocket:typeof WebSocket<"u"&&(gg=WebSocket);var Ml=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ql(this.connId),this.stats_=aT(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[Lk]=fg,!br()&&typeof location<"u"&&location.hostname&&Bk.test(location.hostname)&&(a[Uk]=jk),r&&(a[Vk]=r),i&&(a[$k]=i),s&&(a[IC]=s),o&&(a[Hk]=o),zk(t,qk,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,wo.set("previous_websocket_failure",!0);try{let i;if(br()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${fg}/${sT}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new gg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&gg!==null&&!n.forceDisallow_}static previouslyFailed(){return wo.isInMemoryStorage||wo.get("previous_websocket_failure")===!0}markConnectionHealthy(){wo.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Nd(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(j(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Lt(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Ok(r,X9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(e6))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),t6=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[TC,Ml]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Ml&&Ml.isAvailable(),i=r&&!Ml.previouslyFailed();if(t.webSocketOnly&&(r||$n("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ml];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),n6=6e4,r6=5e3,i6=10*1024,s6=100*1024,lC="t",ik="d",o6="s",sk="r",a6="e",ok="o",ak="a",ck="n",uk="p",c6="h",DC=class{constructor(e,t,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ql("c:"+this.id+":"),this.transportManager_=new t6(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Fl(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>s6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>i6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(lC in e){let t=e[lC];t===ak?this.upgradeIfSecondaryHealthy_():t===sk?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===ok&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=xl("t",e),r=xl("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uk,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ak,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:ck,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=xl("t",e),r=xl("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=xl(lC,e);if(ik in e){let r=e[ik];if(t===c6){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===ck){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===o6?this.onConnectionShutdown_(r):t===sk?this.onReset_(r):t===a6?_C("Server Error: "+r):t===ok?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_C("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),fg!==r&&$n("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Fl(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(n6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Fl(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(r6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uk,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(wo.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var mg=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var yg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},j(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){j(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var _g=class n extends yg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Wc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return j(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var lk=32,dk=768,We=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Be(){return new We("")}function Se(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ds(n){return n.pieces_.length-n.pieceNum_}function rt(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new We(n.pieces_,e)}function Jk(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function u6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Xk(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function eO(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new We(e,0)}function $t(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof We)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new We(t,0)}function Te(n){return n.pieceNum_>=n.pieces_.length}function sr(n,e){let t=Se(n),r=Se(e);if(t===null)return e;if(t===r)return sr(rt(n),rt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tO(n,e){if(ds(n)!==ds(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Cr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ds(n)>ds(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var SC=class{constructor(e,t){this.errorPrefix_=t,this.parts_=Xk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xc(this.parts_[r]);nO(this)}};function l6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Xc(e),nO(n)}function d6(n){let e=n.parts_.pop();n.byteLength_-=Xc(e),n.parts_.length>0&&(n.byteLength_-=1)}function nO(n){if(n.byteLength_>dk)throw new Error(n.errorPrefix_+"has a key path longer than "+dk+" bytes ("+n.byteLength_+").");if(n.parts_.length>lk)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+lk+") or object contains a cycle "+vo(n))}function vo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var AC=class n extends yg{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return j(e==="visible","Unknown event type: "+e),[this.visible_]}};var Pl=1e3,h6=60*5*1e3,hk=30*1e3,f6=1.3,p6=3e4,g6="server_kill",fk=3,cT=(()=>{class n extends mg{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=ql("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Pl,this.maxReconnectDelay_=h6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!br())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");AC.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&_g.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Lt(o)),j(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Um,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),j(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),j(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Sr(t,"w")){let i=ys(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();$n(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||ND(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hk)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=RD(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),j(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Lt(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):_C("Unrecognized action received from server: "+Lt(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){j(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Pl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>p6&&(this.reconnectDelay_=Pl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*f6)}this.onConnectStatus_(!1)}establishConnection_(){return _(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){j(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,y]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?nn("getToken() completed but was canceled"):(nn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=y&&y.token,c=new DC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{$n(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(g6)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&$n(g),l())}}})}interrupt(t){nn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){nn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Yc(this.interruptReasons_)&&(this.reconnectDelay_=Pl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>oT(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new We(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){nn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fk&&(this.reconnectDelay_=hk,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){nn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fk&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";br()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+sT.replace(/\./g,"-")]=1,Wc()?t["framework.cordova"]=1:Rd()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=_g.getInstance().currentlyOnline();return Yc(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Ae=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var uc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Ae(cc,e),i=new Ae(cc,t);return this.compare(r,i)!==0}minPost(){return Ae.MIN}};var hg,vg=class extends uc{static get __EMPTY_NODE(){return hg}static set __EMPTY_NODE(e){hg=e}compare(e,t){return gc(e.name,t.name)}isDefinedOn(e){throw Fo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Ae.MIN}maxPost(){return new Ae(Eo,hg)}makePost(e,t){return j(typeof e=="string","KeyIndex indexValue must always be a string."),new Ae(e,hg)}toString(){return".key"}},ac=new vg;var ic=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Er=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??or.EMPTY_NODE,this.right=o??or.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return or.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return or.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),RC=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Er(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},or=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Er.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Er.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ic(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new ic(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new ic(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new ic(this.root_,null,this.comparator_,!0,e)}};or.EMPTY_NODE=new RC;function m6(n,e){return gc(n.name,e.name)}function uT(n,e){return gc(n,e)}var NC;function y6(n){NC=n}var rO=function(n){return typeof n=="number"?"number:"+Fk(n):"string:"+n},iO=function(n){if(n.isLeafNode()){let e=n.val();j(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sr(e,".sv"),"Priority must be a string or number.")}else j(n===NC||n.isEmpty(),"priority of unexpected type.");j(n===NC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var pk,lc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,j(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),iO(this.priorityNode_)}static set __childrenNodeConstructor(t){pk=t}static get __childrenNodeConstructor(){return pk}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Te(t)?this:Se(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=Se(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(j(i!==".priority"||ds(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(rt(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rO(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=Fk(this.value_):t+=this.value_,this.lazyHash_=Pk(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(j(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return j(s>=0,"Unknown leaf type: "+r),j(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),sO,oO;function _6(n){sO=n}function v6(n){oO=n}var xC=class extends uc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?gc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Ae.MIN}maxPost(){return new Ae(Eo,new lc("[PRIORITY-POST]",oO))}makePost(e,t){let r=sO(e);return new Ae(t,new lc("[PRIORITY-POST]",r))}toString(){return".priority"}},sn=new xC;var w6=Math.log(2),MC=class{constructor(e){let t=s=>parseInt(Math.log(s)/w6,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},wg=function(n,e,t,r){n.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=n[c],g=t?t(f):f,new Er(g,f.node,Er.BLACK,null,null);{let y=parseInt(d/2,10)+c,w=i(c,y),R=i(y+1,l);return f=n[y],g=t?t(f):f,new Er(g,f.node,Er.BLACK,w,R)}},s=function(c){let l=null,d=null,f=n.length,g=function(w,R){let S=f-w,O=f;f-=w;let q=i(S+1,O),W=n[S],J=t?t(W):W;y(new Er(J,W.node,R,null,q))},y=function(w){l?(l.left=w,l=w):(d=w,l=w)};for(let w=0;w<c.count;++w){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(w+1));R?g(S,Er.BLACK):(g(S,Er.BLACK),g(S,Er.RED))}return d},o=new MC(n.length),a=s(o);return new or(r||e,a)};var dC,rc={},dc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return j(rc&&sn,"ChildrenNode.ts has not been loaded"),dC=dC||new n({".priority":rc},{".priority":sn}),dC}get(e){let t=ys(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof or?t:null}hasIndex(e){return Sr(this.indexSet_,e.toString())}addIndex(e,t){j(e!==ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Ae.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=wg(r,e.getCompare()):a=rc;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,l)}addToIndexes(e,t){let r=Zc(this.indexes_,(i,s)=>{let o=ys(this.indexSet_,s);if(j(o,"Missing index implementation for "+s),i===rc)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(Ae.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),wg(a,o.getCompare())}else return rc;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Ae(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Zc(this.indexes_,i=>{if(i===rc)return i;{let s=t.get(e.name);return s?i.remove(new Ae(e.name,s)):i}});return new n(r,this.indexSet_)}};var kl,dt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&iO(this.priorityNode_),this.children_.isEmpty()&&j(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return kl||(kl=new n(new or(uT),null,dc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||kl}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?kl:r}}getChild(t){let r=Se(t);return r===null?this:this.getImmediateChild(r).getChild(rt(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(j(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Ae(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?kl:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=Se(t);if(i===null)return r;{j(Se(t)!==".priority"||ds(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(rt(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(sn,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+rO(this.getPriority().val())+":"),this.forEachChild(sn,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":Pk(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ae(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Ae(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Ae(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Ae.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Ae.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zl?-1:0}withIndex(t){if(t===ac||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===ac||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(sn),s=r.getIterator(sn),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===ac?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),PC=class extends dt{constructor(){super(new or(uT),dt.EMPTY_NODE,dc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dt.EMPTY_NODE}isEmpty(){return!1}},zl=new PC;Object.defineProperties(Ae,{MIN:{value:new Ae(cc,dt.EMPTY_NODE)},MAX:{value:new Ae(Eo,zl)}});vg.__EMPTY_NODE=dt.EMPTY_NODE;lc.__childrenNodeConstructor=dt;y6(zl);v6(zl);var I6=!0;function rn(n,e=null){if(n===null)return dt.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),j(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new lc(t,rn(e))}if(!(n instanceof Array)&&I6){let t=[],r=!1;if(ar(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=rn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Ae(o,c)))}}),t.length===0)return dt.EMPTY_NODE;let s=wg(t,m6,o=>o.name,uT);if(r){let o=wg(t,sn.getCompare());return new dt(s,rn(e),new dc({".priority":o},{".priority":sn}))}else return new dt(s,rn(e),dc.Default)}else{let t=dt.EMPTY_NODE;return ar(n,(r,i)=>{if(Sr(n,r)&&r.substring(0,1)!=="."){let s=rn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(rn(e))}}_6(rn);var kC=class extends uc{constructor(e){super(),this.indexPath_=e,j(!Te(e)&&Se(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?gc(e.name,t.name):s}makePost(e,t){let r=rn(e),i=dt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ae(t,i)}maxPost(){let e=dt.EMPTY_NODE.updateChild(this.indexPath_,zl);return new Ae(Eo,e)}toString(){return Xk(this.indexPath_,0).join("/")}};var OC=class extends uc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?gc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Ae.MIN}maxPost(){return Ae.MAX}makePost(e,t){let r=rn(e);return new Ae(t,r)}toString(){return".value"}},E6=new OC;function C6(n){return{type:"value",snapshotNode:n}}function T6(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function b6(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gk(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function D6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var FC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=sn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return j(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return j(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:cc}hasEnd(){return this.endSet_}getIndexEndValue(){return j(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return j(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Eo}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return j(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===sn}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function mk(n){let e={};if(n.isDefault())return e;let t;if(n.index_===sn?t="$priority":n.index_===E6?t="$value":n.index_===ac?t="$key":(j(n.index_ instanceof kC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Lt(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Lt(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Lt(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Lt(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Lt(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function yk(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==sn&&(e.i=n.index_.toString()),e}var LC=class n extends mg{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ql("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(j(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=mk(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),ys(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=mk(e._queryParams),r=e._path.toString(),i=new Um;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+_s(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Nd(a.responseText)}catch{$n("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&$n("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var VC=class{constructor(){this.rootNode_=dt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Ig(){return{value:null,children:new Map}}function aO(n,e,t){if(Te(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=Se(e);n.children.has(r)||n.children.set(r,Ig());let i=n.children.get(r);e=rt(e),aO(i,e,t)}}function UC(n,e,t){n.value!==null?t(e,n.value):S6(n,(r,i)=>{let s=new We(e.toString()+"/"+r);UC(i,s,t)})}function S6(n,e){n.children.forEach((t,r)=>{e(r,t)})}var jC=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&ar(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var _k=10*1e3,A6=30*1e3,R6=5*60*1e3,BC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new jC(e);let r=_k+(A6-_k)*Math.random();Fl(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;ar(e,(i,s)=>{s>0&&Sr(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Fl(this.reportStats_.bind(this),Math.floor(Math.random()*2*R6))}};var bi=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(bi||{});function cO(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uO(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lO(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var $C=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=bi.ACK_USER_WRITE,this.source=cO()}operationForChild(e){if(Te(this.path)){if(this.affectedTree.value!=null)return j(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new We(e));return new n(Be(),t,this.revert)}}else return j(Se(this.path)===e,"operationForChild called for unrelated child."),new n(rt(this.path),this.affectedTree,this.revert)}};var hc=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=bi.OVERWRITE}operationForChild(e){return Te(this.path)?new n(this.source,Be(),this.snap.getImmediateChild(e)):new n(this.source,rt(this.path),this.snap)}};var Eg=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=bi.MERGE}operationForChild(e){if(Te(this.path)){let t=this.children.subtree(new We(e));return t.isEmpty()?null:t.value?new hc(this.source,Be(),t.value):new n(this.source,Be(),t)}else return j(Se(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,rt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var jl=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;let t=Se(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function N6(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(D6(o.childName,o.snapshotNode))}),Ol(n,i,"child_removed",e,r,t),Ol(n,i,"child_added",e,r,t),Ol(n,i,"child_moved",s,r,t),Ol(n,i,"child_changed",e,r,t),Ol(n,i,"value",e,r,t),i}function Ol(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>M6(n,a,c)),o.forEach(a=>{let c=x6(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function x6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function M6(n,e,t){if(e.childName==null||t.childName==null)throw Fo("Should only compare child_ events.");let r=new Ae(e.childName,e.snapshotNode),i=new Ae(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function dO(n,e){return{eventCache:n,serverCache:e}}function Vl(n,e,t,r){return dO(new jl(e,t,r),n.serverCache)}function hO(n,e,t,r){return dO(n.eventCache,new jl(e,t,r))}function HC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Co(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var hC,P6=()=>(hC||(hC=new or(P9)),hC),An=class n{constructor(e,t=P6()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return ar(e,(r,i)=>{t=t.set(new We(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Be(),value:this.value};if(Te(e))return null;{let r=Se(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(rt(e),t);return s!=null?{path:$t(new We(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{let t=Se(e),r=this.children.get(t);return r!==null?r.subtree(rt(e)):new n(null)}}set(e,t){if(Te(e))return new n(t,this.children);{let r=Se(e),s=(this.children.get(r)||new n(null)).set(rt(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(Te(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=Se(e),r=this.children.get(t);if(r){let i=r.remove(rt(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(Te(e))return this.value;{let t=Se(e),r=this.children.get(t);return r?r.get(rt(e)):null}}setTree(e,t){if(Te(e))return t;{let r=Se(e),s=(this.children.get(r)||new n(null)).setTree(rt(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Be(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($t(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Be(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Te(e))return null;{let s=Se(e),o=this.children.get(s);return o?o.findOnPath_(rt(e),$t(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Be(),t)}foreachOnPath_(e,t,r){if(Te(e))return this;{this.value&&r(t,this.value);let i=Se(e),s=this.children.get(i);return s?s.foreachOnPath_(rt(e),$t(t,i),r):new n(null)}}foreach(e){this.foreach_(Be(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_($t(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Tr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new An(null))}};function Ul(n,e,t){if(Te(e))return new Tr(new An(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=sr(i,e);return s=s.updateChild(o,t),new Tr(n.writeTree_.set(i,s))}else{let i=new An(t),s=n.writeTree_.setTree(e,i);return new Tr(s)}}}function vk(n,e,t){let r=n;return ar(t,(i,s)=>{r=Ul(r,$t(e,i),s)}),r}function wk(n,e){if(Te(e))return Tr.empty();{let t=n.writeTree_.setTree(e,new An(null));return new Tr(t)}}function qC(n,e){return To(n,e)!=null}function To(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(sr(t.path,e)):null}function Ik(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(sn,(r,i)=>{e.push(new Ae(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ae(r,i.value))}),e}function ls(n,e){if(Te(e))return n;{let t=To(n,e);return t!=null?new Tr(new An(t)):new Tr(n.writeTree_.subtree(e))}}function GC(n){return n.writeTree_.isEmpty()}function fc(n,e){return fO(Be(),n.writeTree_,e)}function fO(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(j(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=fO($t(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild($t(n,".priority"),r)),t}}function pO(n,e){return vO(e,n)}function k6(n,e,t,r,i){j(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Ul(n.visibleWrites,e,t)),n.lastWriteId=r}function O6(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function F6(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);j(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&L6(a,r.path)?i=!1:Cr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return V6(n),!0;if(r.snap)n.visibleWrites=wk(n.visibleWrites,r.path);else{let a=r.children;ar(a,c=>{n.visibleWrites=wk(n.visibleWrites,$t(r.path,c))})}return!0}else return!1}function L6(n,e){if(n.snap)return Cr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Cr($t(n.path,t),e))return!0;return!1}function V6(n){n.visibleWrites=gO(n.allWrites,U6,Be()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function U6(n){return n.visible}function gO(n,e,t){let r=Tr.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Cr(t,o)?(a=sr(t,o),r=Ul(r,a,s.snap)):Cr(o,t)&&(a=sr(o,t),r=Ul(r,Be(),s.snap.getChild(a)));else if(s.children){if(Cr(t,o))a=sr(t,o),r=vk(r,a,s.children);else if(Cr(o,t))if(a=sr(o,t),Te(a))r=vk(r,Be(),s.children);else{let c=ys(s.children,Se(a));if(c){let l=c.getChild(rt(a));r=Ul(r,Be(),l)}}}else throw Fo("WriteRecord should have .snap or .children")}}return r}function mO(n,e,t,r,i){if(!r&&!i){let s=To(n.visibleWrites,e);if(s!=null)return s;{let o=ls(n.visibleWrites,e);if(GC(o))return t;if(t==null&&!qC(o,Be()))return null;{let a=t||dt.EMPTY_NODE;return fc(o,a)}}}else{let s=ls(n.visibleWrites,e);if(!i&&GC(s))return t;if(!i&&t==null&&!qC(s,Be()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Cr(l.path,e)||Cr(e,l.path))},a=gO(n.allWrites,o,e),c=t||dt.EMPTY_NODE;return fc(a,c)}}}function j6(n,e,t){let r=dt.EMPTY_NODE,i=To(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(sn,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=ls(n.visibleWrites,e);return t.forEachChild(sn,(o,a)=>{let c=fc(ls(s,new We(o)),a);r=r.updateImmediateChild(o,c)}),Ik(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ls(n.visibleWrites,e);return Ik(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function B6(n,e,t,r,i){j(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=$t(e,t);if(qC(n.visibleWrites,s))return null;{let o=ls(n.visibleWrites,s);return GC(o)?i.getChild(t):fc(o,i.getChild(t))}}function $6(n,e,t,r){let i=$t(e,t),s=To(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=ls(n.visibleWrites,i);return fc(o,r.getNode().getImmediateChild(t))}else return null}function H6(n,e){return To(n.visibleWrites,e)}function q6(n,e,t,r,i,s,o){let a,c=ls(n.visibleWrites,e),l=To(c,Be());if(l!=null)a=l;else if(t!=null)a=fc(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=g.getNext();for(;y&&d.length<i;)f(y,r)!==0&&d.push(y),y=g.getNext();return d}else return[]}function G6(){return{visibleWrites:Tr.empty(),allWrites:[],lastWriteId:-1}}function zC(n,e,t,r){return mO(n.writeTree,n.treePath,e,t,r)}function yO(n,e){return j6(n.writeTree,n.treePath,e)}function Ek(n,e,t,r){return B6(n.writeTree,n.treePath,e,t,r)}function Cg(n,e){return H6(n.writeTree,$t(n.treePath,e))}function z6(n,e,t,r,i,s){return q6(n.writeTree,n.treePath,e,t,r,i,s)}function lT(n,e,t){return $6(n.writeTree,n.treePath,e,t)}function _O(n,e){return vO($t(n.treePath,e),n.writeTree)}function vO(n,e){return{treePath:n,writeTree:e}}var WC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;j(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),j(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,gk(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,b6(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,T6(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,gk(r,e.snapshotNode,i.oldSnap));else throw Fo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var KC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},wO=new KC,Bl=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new jl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return lT(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Co(this.viewCache_),s=z6(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function W6(n,e){j(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),j(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function K6(n,e,t,r,i){let s=new WC,o,a;if(t.type===bi.OVERWRITE){let l=t;l.source.fromUser?o=QC(n,e,l.path,l.snap,r,i,s):(j(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Te(l.path),o=Tg(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===bi.MERGE){let l=t;l.source.fromUser?o=Y6(n,e,l.path,l.children,r,i,s):(j(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=YC(n,e,l.path,l.children,r,i,a,s))}else if(t.type===bi.ACK_USER_WRITE){let l=t;l.revert?o=X6(n,e,l.path,r,i,s):o=Z6(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===bi.LISTEN_COMPLETE)o=J6(n,e,t.path,r,s);else throw Fo("Unknown operation type: "+t.type);let c=s.getChanges();return Q6(e,o,c),{viewCache:o,changes:c}}function Q6(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=HC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(C6(HC(e)))}}function IO(n,e,t,r,i,s){let o=e.eventCache;if(Cg(r,t)!=null)return e;{let a,c;if(Te(t))if(j(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Co(e),d=l instanceof dt?l:dt.EMPTY_NODE,f=yO(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=zC(r,Co(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Se(t);if(l===".priority"){j(ds(t)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=Ek(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{let d=rt(t),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=Ek(r,t,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=lT(r,l,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return Vl(e,a,o.isFullyInitialized()||Te(t),n.filter.filtersNodes())}}function Tg(n,e,t,r,i,s,o,a){let c=e.serverCache,l,d=o?n.filter:n.filter.getIndexedFilter();if(Te(t))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let y=c.getNode().updateChild(t,r);l=d.updateFullNode(c.getNode(),y,null)}else{let y=Se(t);if(!c.isCompleteForPath(t)&&ds(t)>1)return e;let w=rt(t),S=c.getNode().getImmediateChild(y).updateChild(w,r);y===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),y,S,w,wO,null)}let f=hO(e,l,c.isFullyInitialized()||Te(t),d.filtersNodes()),g=new Bl(i,f,s);return IO(n,f,t,i,g,a)}function QC(n,e,t,r,i,s,o){let a=e.eventCache,c,l,d=new Bl(i,e,s);if(Te(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=Vl(e,l,!0,n.filter.filtersNodes());else{let f=Se(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=Vl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=rt(t),y=a.getNode().getImmediateChild(f),w;if(Te(g))w=r;else{let R=d.getCompleteChild(f);R!=null?Jk(g)===".priority"&&R.getChild(eO(g)).isEmpty()?w=R:w=R.updateChild(g,r):w=dt.EMPTY_NODE}if(y.equals(w))c=e;else{let R=n.filter.updateChild(a.getNode(),f,w,g,d,o);c=Vl(e,R,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function Ck(n,e){return n.eventCache.isCompleteForChild(e)}function Y6(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=$t(t,c);Ck(e,Se(d))&&(a=QC(n,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=$t(t,c);Ck(e,Se(d))||(a=QC(n,a,d,l,i,s,o))}),a}function Tk(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function YC(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Te(t)?l=r:l=new An(null).setTree(t,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let y=e.serverCache.getNode().getImmediateChild(f),w=Tk(n,y,g);c=Tg(n,c,new We(f),w,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let y=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!y){let w=e.serverCache.getNode().getImmediateChild(f),R=Tk(n,w,g);c=Tg(n,c,new We(f),R,i,s,o,a)}}),c}function Z6(n,e,t,r,i,s,o){if(Cg(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Te(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Tg(n,e,t,c.getNode().getChild(t),i,s,a,o);if(Te(t)){let l=new An(null);return c.getNode().forEachChild(ac,(d,f)=>{l=l.set(new We(d),f)}),YC(n,e,t,l,i,s,a,o)}else return e}else{let l=new An(null);return r.foreach((d,f)=>{let g=$t(t,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),YC(n,e,t,l,i,s,a,o)}}function J6(n,e,t,r,i){let s=e.serverCache,o=hO(e,s.getNode(),s.isFullyInitialized()||Te(t),s.isFiltered());return IO(n,o,t,r,wO,i)}function X6(n,e,t,r,i,s){let o;if(Cg(r,t)!=null)return e;{let a=new Bl(r,e,i),c=e.eventCache.getNode(),l;if(Te(t)||Se(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=zC(r,Co(e));else{let f=e.serverCache.getNode();j(f instanceof dt,"serverChildren would be complete if leaf node"),d=yO(r,f)}d=d,l=n.filter.updateFullNode(c,d,s)}else{let d=Se(t),f=lT(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=n.filter.updateChild(c,d,f,rt(t),a,s):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(c,d,dt.EMPTY_NODE,rt(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=zC(r,Co(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Cg(r,Be())!=null,Vl(e,l,o,n.filter.filtersNodes())}}function e5(n,e){let t=Co(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Te(e)&&!t.getImmediateChild(Se(e)).isEmpty())?t.getChild(e):null}function bk(n,e,t,r){e.type===bi.MERGE&&e.source.queryId!==null&&(j(Co(n.viewCache_),"We should always have a full cache before handling merges"),j(HC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=K6(n.processor_,i,e,t,r);return W6(n.processor_,s.viewCache),j(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,t5(n,s.changes,s.viewCache.eventCache.getNode(),null)}function t5(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return N6(n.eventGenerator_,e,t,i)}var Dk;function n5(n){j(!Dk,"__referenceConstructor has already been defined"),Dk=n}function dT(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return j(s!=null,"SyncTree gave us an op for an invalid query."),bk(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(bk(o,e,t,r));return s}}function hT(n,e){let t=null;for(let r of n.views.values())t=t||e5(r,e);return t}var Sk;function r5(n){j(!Sk,"__referenceConstructor has already been defined"),Sk=n}var bg=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new An(null),this.pendingWriteTree_=G6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function i5(n,e,t,r,i){return k6(n.pendingWriteTree_,e,t,r,i),i?Sg(n,new hc(cO(),e,t)):[]}function sc(n,e,t=!1){let r=O6(n.pendingWriteTree_,e);if(F6(n.pendingWriteTree_,e)){let s=new An(null);return r.snap!=null?s=s.set(Be(),!0):ar(r.children,o=>{s=s.set(new We(o),!0)}),Sg(n,new $C(r.path,s,t))}else return[]}function Dg(n,e,t){return Sg(n,new hc(uO(),e,t))}function s5(n,e,t){let r=An.fromObject(t);return Sg(n,new Eg(uO(),e,r))}function o5(n,e,t,r){let i=bO(n,r);if(i!=null){let s=DO(i),o=s.path,a=s.queryId,c=sr(o,e),l=new hc(lO(a),c,t);return SO(n,o,l)}else return[]}function a5(n,e,t,r){let i=bO(n,r);if(i){let s=DO(i),o=s.path,a=s.queryId,c=sr(o,e),l=An.fromObject(t),d=new Eg(lO(a),c,l);return SO(n,o,d)}else return[]}function EO(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=sr(o,e),l=hT(a,c);if(l)return l});return mO(i,e,s,t,!0)}function Sg(n,e){return CO(e,n.syncPointTree_,null,pO(n.pendingWriteTree_,Be()))}function CO(n,e,t,r){if(Te(n.path))return TO(n,e,t,r);{let i=e.get(Be());t==null&&i!=null&&(t=hT(i,Be()));let s=[],o=Se(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,d=_O(r,o);s=s.concat(CO(a,c,l,d))}return i&&(s=s.concat(dT(i,n,r,t))),s}}function TO(n,e,t,r){let i=e.get(Be());t==null&&i!=null&&(t=hT(i,Be()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=_O(r,o),d=n.operationForChild(o);d&&(s=s.concat(TO(d,a,c,l)))}),i&&(s=s.concat(dT(i,n,r,t))),s}function bO(n,e){return n.tagToQueryMap.get(e)}function DO(n){let e=n.indexOf("$");return j(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new We(n.substr(0,e))}}function SO(n,e,t){let r=n.syncPointTree_.get(e);j(r,"Missing sync point for query tag that we're tracking");let i=pO(n.pendingWriteTree_,e);return dT(r,t,i,null)}var ZC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},JC=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=$t(this.path_,e);return new n(this.syncTree_,t)}node(){return EO(this.syncTree_,this.path_)}},c5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Ak=function(n,e,t){if(!n||typeof n!="object")return n;if(j(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return u5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return l5(n[".sv"],e);j(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},u5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:j(!1,"Unexpected server value: "+n)}},l5=function(n,e,t){n.hasOwnProperty("increment")||j(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&j(!1,"Unexpected increment value: "+r);let i=e.node();if(j(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},d5=function(n,e,t,r){return fT(e,new JC(t,n),r)},h5=function(n,e,t){return fT(n,new ZC(e),t)};function fT(n,e,t){let r=n.getPriority().val(),i=Ak(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=Ak(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new lc(a,rn(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new lc(i))),o.forEachChild(sn,(a,c)=>{let l=fT(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var $l=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function pT(n,e){let t=e instanceof We?e:new We(e),r=n,i=Se(t);for(;i!==null;){let s=ys(r.node.children,i)||{children:{},childCount:0};r=new $l(i,r,s),t=rt(t),i=Se(t)}return r}function mc(n){return n.node.value}function AO(n,e){n.node.value=e,XC(n)}function RO(n){return n.node.childCount>0}function f5(n){return mc(n)===void 0&&!RO(n)}function Ag(n,e){ar(n.node.children,(t,r)=>{e(new $l(t,n,r))})}function NO(n,e,t,r){t&&!r&&e(n),Ag(n,i=>{NO(i,e,!0,r)}),t&&r&&e(n)}function p5(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Wl(n){return new We(n.parent===null?n.name:Wl(n.parent)+"/"+n.name)}function XC(n){n.parent!==null&&g5(n.parent,n.name,n)}function g5(n,e,t){let r=f5(t),i=Sr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,XC(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,XC(n))}var m5=/[\[\].#$\/\u0000-\u001F\u007F]/,y5=/[\[\].#$\u0000-\u001F\u007F]/,fC=10*1024*1024,xO=function(n){return typeof n=="string"&&n.length!==0&&!m5.test(n)},_5=function(n){return typeof n=="string"&&n.length!==0&&!y5.test(n)},v5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_5(n)};var MO=function(n,e,t){let r=t instanceof We?new SC(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+vo(r));if(typeof e=="function")throw new Error(n+"contains a function "+vo(r)+" with contents = "+e.toString());if(kk(e))throw new Error(n+"contains "+e.toString()+" "+vo(r));if(typeof e=="string"&&e.length>fC/3&&Xc(e)>fC)throw new Error(n+"contains a string greater than "+fC+" utf8 bytes "+vo(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(ar(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!xO(o)))throw new Error(n+" contains an invalid key ("+o+") "+vo(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);l6(r,o),MO(n,a,r),d6(r)}),i&&s)throw new Error(n+' contains ".value" child '+vo(r)+" in addition to actual children.")}};var w5=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xO(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!v5(t))throw new Error(PD(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var eT=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function I5(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!tO(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function bo(n,e,t){I5(n,t),E5(n,r=>Cr(r,e)||Cr(e,r))}function E5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(C5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function C5(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();Io&&nn("event: "+t.toString()),Gl(r)}}}var T5="repo_interrupt",b5=25,tT=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new eT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ig(),this.transactionQueueTree_=new $l,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function D5(n,e,t){if(n.stats_=aT(n.repoInfo_),n.forceRestClient_||U9())n.server_=new LC(n.repoInfo_,(r,i,s,o)=>{Rk(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>Nk(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Lt(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new cT(n.repoInfo_,e,(r,i,s,o)=>{Rk(n,r,i,s,o)},r=>{Nk(n,r)},r=>{A5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=B9(n.repoInfo_,()=>new BC(n.stats_,n.server_)),n.infoData_=new VC,n.infoSyncTree_=new bg({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=Dg(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),gT(n,"connected",!1),n.serverSyncTree_=new bg({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);bo(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function S5(n){let t=n.infoData_.getNode(new We(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function PO(n){return c5({timestamp:S5(n)})}function Rk(n,e,t,r,i){n.dataUpdateCount++;let s=new We(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=Zc(t,l=>rn(l));o=a5(n.serverSyncTree_,s,c,i)}else{let c=rn(t);o=o5(n.serverSyncTree_,s,c,i)}else if(r){let c=Zc(t,l=>rn(l));o=s5(n.serverSyncTree_,s,c)}else{let c=rn(t);o=Dg(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=yT(n,s)),bo(n.eventQueue_,a,o)}function Nk(n,e){gT(n,"connected",e),e===!1&&N5(n)}function A5(n,e){ar(e,(t,r)=>{gT(n,t,r)})}function gT(n,e,t){let r=new We("/.info/"+e),i=rn(t);n.infoData_.updateSnapshot(r,i);let s=Dg(n.infoSyncTree_,r,i);bo(n.eventQueue_,r,s)}function R5(n){return n.nextWriteId_++}function N5(n){kO(n,"onDisconnectEvents");let e=PO(n),t=Ig();UC(n.onDisconnect_,Be(),(i,s)=>{let o=d5(i,s,n.serverSyncTree_,e);aO(t,i,o)});let r=[];UC(t,Be(),(i,s)=>{r=r.concat(Dg(n.serverSyncTree_,i,s));let o=k5(n,i);yT(n,o)}),n.onDisconnect_=Ig(),bo(n.eventQueue_,Be(),r)}function x5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(T5)}function kO(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),nn(t,...e)}function OO(n,e,t){return EO(n.serverSyncTree_,e,t)||dt.EMPTY_NODE}function mT(n,e=n.transactionQueueTree_){if(e||Rg(n,e),mc(e)){let t=LO(n,e);j(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&M5(n,Wl(e),t)}else RO(e)&&Ag(e,t=>{mT(n,t)})}function M5(n,e,t){let r=t.map(l=>l.currentWriteId),i=OO(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let d=t[l];j(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=sr(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{kO(n,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(sc(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();Rg(n,pT(n.transactionQueueTree_,e)),mT(n,n.transactionQueueTree_),bo(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)Gl(f[g])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{$n("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}yT(n,e)}},o)}function yT(n,e){let t=FO(n,e),r=Wl(t),i=LO(n,t);return P5(n,i,r),r}function P5(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=sr(t,c.path),d=!1,f;if(j(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(sc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=b5)d=!0,f="maxretry",i=i.concat(sc(n.serverSyncTree_,c.currentWriteId,!0));else{let g=OO(n,c.path,o);c.currentInputSnapshot=g;let y=e[a].update(g.val());if(y!==void 0){MO("transaction failed: Data returned ",y,c.path);let w=rn(y);typeof y=="object"&&y!=null&&Sr(y,".priority")||(w=w.updatePriority(g.getPriority()));let S=c.currentWriteId,O=PO(n),q=h5(w,g,O);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=q,c.currentWriteId=R5(n),o.splice(o.indexOf(S),1),i=i.concat(i5(n.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(sc(n.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(sc(n.serverSyncTree_,c.currentWriteId,!0))}bo(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Rg(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Gl(r[a]);mT(n,n.transactionQueueTree_)}function FO(n,e){let t,r=n.transactionQueueTree_;for(t=Se(e);t!==null&&mc(r)===void 0;)r=pT(r,t),e=rt(e),t=Se(e);return r}function LO(n,e){let t=[];return VO(n,e,t),t.sort((r,i)=>r.order-i.order),t}function VO(n,e,t){let r=mc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Ag(e,i=>{VO(n,i,t)})}function Rg(n,e){let t=mc(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,AO(e,t.length>0?t:void 0)}Ag(e,r=>{Rg(n,r)})}function k5(n,e){let t=Wl(FO(n,e)),r=pT(n.transactionQueueTree_,e);return p5(r,i=>{pC(n,i)}),pC(n,r),NO(r,i=>{pC(n,i)}),t}function pC(n,e){let t=mc(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(j(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(j(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(sc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?AO(e,void 0):t.length=s+1,bo(n.eventQueue_,Wl(e),i);for(let o=0;o<r.length;o++)Gl(r[o])}}function O5(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function F5(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):$n(`Invalid query segment '${t}' in query '${n}'`)}return e}var xk=function(n,e){let t=L5(n),r=t.namespace;t.domain==="firebase.com"&&Di(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Di("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||x9();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new pg(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new We(t.pathString)}},L5=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=O5(n.substring(d,f)));let g=F5(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let y=e.slice(0,l);if(y.toLowerCase()==="localhost")t="localhost";else if(y.split(".").length<=2)t=y;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var nT=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Te(this._path)?null:Jk(this._path)}get ref(){return new pc(this._repo,this._path)}get _queryIdentifier(){let e=yk(this._queryParams),t=oT(e);return t==="{}"?"default":t}get _queryObject(){return yk(this._queryParams)}isEqual(e){if(e=Ee(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=tO(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+u6(this._path)}};var pc=class n extends nT{constructor(e,t){super(e,t,new FC,!1)}get parent(){let e=eO(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};n5(pc);r5(pc);var V5="FIREBASE_DATABASE_EMULATOR_HOST",rT={},U5=!1;function j5(n,e,t,r){n.repoInfo_=new pg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function B5(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Di("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),nn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=xk(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[V5]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=xk(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Ll(Ll.OWNER):new wC(n.name,n.options,e);w5("Invalid Firebase Database URL",o),Te(o.path)||Di("Database URL must point to the root of a Firebase Database (not including a child path).");let f=H5(a,n,d,new vC(n.name,t));return new iT(f,n)}function $5(n,e){let t=rT[e];(!t||t[n.key]!==n)&&Di(`Database ${e}(${n.repoInfo_}) has already been deleted.`),x5(n),delete t[n.key]}function H5(n,e,t,r){let i=rT[e.name];i||(i={},rT[e.name]=i);let s=i[n.toURLString()];return s&&Di("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new tT(n,U5,t,r),i[n.toURLString()]=s,s}var iT=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(D5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new pc(this._repo,Be())),this._rootInternal}_delete(){return this._rootInternal!==null&&($5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Di("Cannot call "+e+" on a deleted database.")}};function UO(n=Dt(),e){let t=bt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Fi("database");r&&jO(t,...r)}return t}function jO(n,e,t,r={}){n=Ee(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Di("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Di('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ll(Ll.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Lo(r.mockUserToken,n.app.options.projectId);s=new Ll(o)}j5(i,e,t,s)}function q5(n){A9(_n),vt(new _t("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return B5(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Y(XP,ek,n),Y(XP,ek,"esm2017")}cT.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};cT.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};q5();var Kl=class{constructor(e){return e}},BO="database",_T=class{constructor(){return Ct(BO)}};var vT=new $("angularfire2.database-instances");function G5(n,e){let t=Rt(BO,n,e);return t&&new Kl(t)}function z5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Kl(r)}}var W5={provide:_T,deps:[[new se,vT]]},K5={provide:Kl,useFactory:G5,deps:[[new se,vT],nt]};function $O(n,...e){return Y("angularfire",tt.full,"rtdb"),Qe([K5,W5,{provide:vT,useFactory:z5(n),multi:!0,deps:[te,we,mt,ut,[new se,_r],[new se,Dn],...e]}])}var HO=xe(UO,!0);var zO="functions";var wT=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return _(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return _(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return _(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return _(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var IT="us-central1";var ET=class{constructor(e,t,r,i,s=IT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new wT(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=IT}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function Q5(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var qO="@firebase/functions",GO="0.11.8";var Y5="auth-internal",Z5="app-check-internal",J5="messaging-internal";function X5(n,e){let t=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(Y5),a=r.getProvider(J5),c=r.getProvider(Z5);return new ET(s,o,a,c,i,n)};vt(new _t(zO,t,"PUBLIC").setMultipleInstances(!0)),Y(qO,GO,e),Y(qO,GO,"esm2017")}function WO(n=Dt(),e=IT){let r=bt(Ee(n),zO).getImmediate({identifier:e}),i=Fi("functions");return i&&KO(r,...i),r}function KO(n,e,t){Q5(Ee(n),e,t)}X5(fetch.bind(self));var Ql=class{constructor(e){return e}},QO="functions",CT=class{constructor(){return Ct(QO)}};var TT=new $("angularfire2.functions-instances");function e8(n,e){let t=Rt(QO,n,e);return t&&new Ql(t)}function t8(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ql(r)}}var n8={provide:CT,deps:[[new se,TT]]},r8={provide:Ql,useFactory:e8,deps:[[new se,TT],nt]};function YO(n,...e){return Y("angularfire",tt.full,"fn"),Qe([r8,n8,{provide:TT,useFactory:t8(n),multi:!0,deps:[te,we,mt,ut,[new se,_r],[new se,Dn],...e]}])}var ZO=xe(WO,!0);var i8="/firebase-messaging-sw.js",s8="/firebase-cloud-messaging-push-scope",r1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",o8="https://fcmregistrations.googleapis.com/v1",i1="google.c.a.c_id",a8="google.c.a.c_l",c8="google.c.a.ts",u8="google.c.a.e";var Ng=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Ng||{});function Si(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function l8(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var bT="fcm_token_details_db",d8=5,JO="fcm_token_object_Store";function h8(n){return _(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(bT))return null;let e=null;return(yield jm(bT,d8,{upgrade:(r,i,s,o)=>_(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(JO))return;let c=o.objectStore(JO),l=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Si(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Si(d.auth),p256dh:Si(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Si(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Si(d.auth),p256dh:Si(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Si(d.vapidKey)}}}}})})).close(),yield xd(bT),yield xd("fcm_vapid_details_db"),yield xd("undefined"),f8(e)?e:null})}function f8(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var p8="firebase-messaging-database",g8=1,Yl="firebase-messaging-store",DT=null;function s1(){return DT||(DT=jm(p8,g8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Yl)}}})),DT}function m8(n){return _(this,null,function*(){let e=o1(n),r=yield(yield s1()).transaction(Yl).objectStore(Yl).get(e);if(r)return r;{let i=yield h8(n.appConfig.senderId);if(i)return yield RT(n,i),i}})}function RT(n,e){return _(this,null,function*(){let t=o1(n),i=(yield s1()).transaction(Yl,"readwrite");return yield i.objectStore(Yl).put(e,t),yield i.done,e})}function o1({appConfig:n}){return n.appId}var y8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},mn=new Dr("messaging","Messaging",y8);function _8(n,e){return _(this,null,function*(){let t=yield xT(n),r=a1(e),i={method:"POST",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(NT(n.appConfig),i)).json()}catch(o){throw mn.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw mn.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw mn.create("token-subscribe-no-token");return s.token})}function v8(n,e){return _(this,null,function*(){let t=yield xT(n),r=a1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${NT(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw mn.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw mn.create("token-update-failed",{errorInfo:o})}if(!s.token)throw mn.create("token-update-no-token");return s.token})}function w8(n,e){return _(this,null,function*(){let r={method:"DELETE",headers:yield xT(n)};try{let s=yield(yield fetch(`${NT(n.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw mn.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw mn.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function NT({projectId:n}){return`${o8}/projects/${n}/registrations`}function xT(t){return _(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function a1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==r1&&(i.web.applicationPubKey=r),i}var I8=7*24*60*60*1e3;function E8(n){return _(this,null,function*(){let e=yield T8(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Si(e.getKey("auth")),p256dh:Si(e.getKey("p256dh"))},r=yield m8(n.firebaseDependencies);if(r){if(b8(r.subscriptionOptions,t))return Date.now()>=r.createTime+I8?C8(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield w8(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return XO(n.firebaseDependencies,t)}else return XO(n.firebaseDependencies,t)})}function C8(n,e){return _(this,null,function*(){try{let t=yield v8(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield RT(n.firebaseDependencies,r),t}catch(t){throw t}})}function XO(n,e){return _(this,null,function*(){let r={token:yield _8(n,e),createTime:Date.now(),subscriptionOptions:e};return yield RT(n,r),r.token})}function T8(n,e){return _(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l8(e)})})}function b8(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}function e1(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return D8(e,n),S8(e,n),A8(e,n),e}function D8(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let s=e.notification.icon;s&&(n.notification.icon=s)}function S8(n,e){e.data&&(n.data=e.data)}function A8(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function R8(n){return typeof n=="object"&&!!n&&i1 in n}N8("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function N8(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function x8(n){if(!n||!n.options)throw ST("App Configuration Object");if(!n.name)throw ST("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw ST(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ST(n){return mn.create("missing-app-config-values",{valueName:n})}var AT=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=x8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function M8(n){return _(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(i8,{scope:s8}),n.swRegistration.update().catch(()=>{})}catch(e){throw mn.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function P8(n,e){return _(this,null,function*(){if(!e&&!n.swRegistration&&(yield M8(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");n.swRegistration=e}})}function k8(n,e){return _(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=r1)})}function O8(n,e){return _(this,null,function*(){if(!navigator)throw mn.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw mn.create("permission-blocked");return yield k8(n,e?.vapidKey),yield P8(n,e?.serviceWorkerRegistration),E8(n)})}function F8(n,e,t){return _(this,null,function*(){let r=L8(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[i1],message_name:t[a8],message_time:t[c8],message_device_time:Math.floor(Date.now()/1e3)})})}function L8(n){switch(n){case Ng.NOTIFICATION_CLICKED:return"notification_open";case Ng.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function V8(n,e){return _(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Ng.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(e1(t)):n.onMessageHandler.next(e1(t)));let r=t.data;R8(r)&&r[u8]==="1"&&(yield F8(n,t.messageType,r))})}var t1="@firebase/messaging",n1="0.12.12";var U8=n=>{let e=new AT(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>V8(e,t)),e},j8=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>O8(e,r)}};function B8(){vt(new _t("messaging",U8,"PUBLIC")),vt(new _t("messaging-internal",j8,"PRIVATE")),Y(t1,n1),Y(t1,n1,"esm2017")}function MT(){return _(this,null,function*(){try{yield ms()}catch{return!1}return typeof window<"u"&&ei()&&Qc()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function c1(n=Dt()){return MT().then(e=>{if(!e)throw mn.create("unsupported-browser")},e=>{throw mn.create("indexed-db-unsupported")}),bt(Ee(n),"messaging").getImmediate()}B8();var Zl=class{constructor(e){return e}},u1="messaging",PT=class{constructor(){return Ct(u1)}};var l1="__angularfire_symbol__messagingIsSupported",kT="__angularfire_symbol__messagingIsSupportedValue";globalThis[l1]||=MT().then(n=>globalThis[kT]=n).catch(()=>globalThis[kT]=!1);var xg={async:()=>globalThis[l1],sync:()=>{let n=globalThis[kT];if(n===void 0)throw new Error(xa("Messaging"));return n}},OT=new $("angularfire2.messaging-instances");function $8(n,e){if(!xg.sync())return null;let t=Rt(u1,n,e);return t&&new Zl(t)}function H8(n){return(e,t)=>{if(!xg.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new Zl(r)}}var q8={provide:PT,deps:[[new se,OT]]},G8={provide:Zl,useFactory:$8,deps:[[new se,OT],nt]};function d1(n,...e){return Y("angularfire",tt.full,"fcm"),Qe([G8,q8,{provide:Zi,useValue:xg.async,multi:!0},{provide:OT,useFactory:H8(n),multi:!0,deps:[te,we,mt,ut,...e]}])}var uue=xg.async;var h1=xe(c1,!0);var Jl=class{constructor(e){return e}},f1="performance",FT=class{constructor(){return Ct(f1)}};var LT=new $("angularfire2.performance-instances");function z8(n,e,t){if(!sv(t))return null;let r=Rt(f1,n,e);return r&&new Jl(r)}function W8(n){return(e,t,r)=>{if(!sv(t))return null;let i=e.runOutsideAngular(()=>n(r));return new Jl(i)}}var K8={provide:FT,deps:[[new se,LT]]},Q8={provide:Jl,useFactory:z8,deps:[[new se,LT],nt,gr]};function p1(n,...e){return Y("angularfire",tt.full,"perf"),Qe([Q8,K8,{provide:LT,useFactory:W8(n),multi:!0,deps:[te,gr,we,mt,ut,...e]}])}var g1=xe(FD,!0);var I1="firebasestorage.googleapis.com",Y8="storageBucket",Z8=2*60*1e3,J8=10*60*1e3;var Qr=class n extends yn{constructor(e,t,r=0){super(VT(e),`Firebase Storage: ${t} (${VT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return VT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Ri=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(Ri||{});function VT(n){return"storage/"+n}function X8(){let n="An unknown error occurred, please check the error payload for server response.";return new Qr(Ri.UNKNOWN,n)}function eK(){return new Qr(Ri.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tK(){return new Qr(Ri.CANCELED,"User canceled the upload/download.")}function nK(n){return new Qr(Ri.INVALID_URL,"Invalid URL '"+n+"'.")}function rK(n){return new Qr(Ri.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function m1(n){return new Qr(Ri.INVALID_ARGUMENT,n)}function E1(){return new Qr(Ri.APP_DELETED,"The Firebase app was deleted.")}function iK(n){return new Qr(Ri.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ai=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw rK(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(J){J.path_=decodeURIComponent(J.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},R=t===I1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",O=new RegExp(`^https?://${R}/${i}/${S}`,"i"),W=[{regex:a,indices:c,postModify:s},{regex:y,indices:w,postModify:l},{regex:O,indices:{bucket:1,path:2},postModify:l}];for(let J=0;J<W.length;J++){let $e=W[J],ee=$e.regex.exec(e);if(ee){let C=ee[$e.indices.bucket],v=ee[$e.indices.path];v||(v=""),r=new n(C,v),$e.postModify(r);break}}if(r==null)throw nK(e);return r}},UT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function sK(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,n(y,c())},S)}function g(){s&&clearTimeout(s)}function y(S,...O){if(l){g();return}if(S){g(),d.call(null,S,...O);return}if(c()||o){g(),d.call(null,S,...O);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,f(W)}let w=!1;function R(S){w||(w=!0,g(),!l&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}function oK(n){n(!1)}function aK(n){return n!==void 0}function y1(n,e,t,r){if(r<e)throw m1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw m1(`Invalid value for '${n}'. Expected ${t} or less.`)}function cK(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var jT=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(jT||{});function uK(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var BT=class{constructor(e,t,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,w)=>{this.resolve_=y,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new yc(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===jT.NO_ERROR,c=s.getStatus();if(!a||uK(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===jT.ABORT;r(!1,new yc(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new yc(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());aK(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=X8();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?E1():tK();o(c)}else{let c=eK();o(c)}};this.canceled_?t(!1,new yc(!1,null,!0)):this.backoffId_=sK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&oK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},yc=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function lK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function dK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function fK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function pK(n,e,t,r,i,s,o=!0){let a=cK(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return hK(l,e),lK(l,t),dK(l,s),fK(l,r),new BT(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function gK(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function mK(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Due=256*1024;var $T=class n{constructor(e,t){this._service=e,t instanceof Ai?this._location=t:this._location=Ai.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mK(this._location.path)}get storage(){return this._service}get parent(){let e=gK(this._location.path);if(e===null)return null;let t=new Ai(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw iK(e)}};function _1(n,e){let t=e?.[Y8];return t==null?null:Ai.makeFromBucketSpec(t,n)}function yK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Lo(i,n.app.options.projectId))}var HT=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=I1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Z8,this._maxUploadRetryTime=J8,this._requests=new Set,i!=null?this._bucket=Ai.makeFromBucketSpec(i,this._host):this._bucket=_1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ai.makeFromBucketSpec(this._url,e):this._bucket=_1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){y1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){y1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return _(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return _(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $T(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new UT(E1());{let o=pK(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return _(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},v1="@firebase/storage",w1="0.13.2";var C1="storage";function T1(n=Dt(),e){n=Ee(n);let r=bt(n,C1).getImmediate({identifier:e}),i=Fi("storage");return i&&b1(r,...i),r}function b1(n,e,t,r={}){yK(n,e,t,r)}function _K(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new HT(t,r,i,e,_n)}function vK(){vt(new _t(C1,_K,"PUBLIC").setMultipleInstances(!0)),Y(v1,w1,""),Y(v1,w1,"esm2017")}vK();var Xl=class{constructor(e){return e}},D1="storage",qT=class{constructor(){return Ct(D1)}};var GT=new $("angularfire2.storage-instances");function wK(n,e){let t=Rt(D1,n,e);return t&&new Xl(t)}function IK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Xl(r)}}var EK={provide:qT,deps:[[new se,GT]]},CK={provide:Xl,useFactory:wK,deps:[[new se,GT],nt]};function S1(n,...e){return Y("angularfire",tt.full,"gcs"),Qe([CK,EK,{provide:GT,useFactory:IK(n),multi:!0,deps:[te,we,mt,ut,[new se,_r],[new se,Dn],...e]}])}var A1=xe(T1,!0);var zT="@firebase/remote-config",R1="0.4.9";var N1="remote-config";var TK={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Rn=new Dr("remoteconfig","Remote Config",TK);function x1(n=Dt()){return n=Ee(n),bt(n,N1).getImmediate()}function M1(n){let e=Ee(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var WT=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return _(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function bK(n=navigator){return n.languages&&n.languages[0]||n.language}var KT=class{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return _(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:bK()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((S,O)=>{e.signal.addEventListener(()=>{let q=new Error("The operation was aborted.");q.name="AbortError",O(q)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(S){let O="fetch-client-network";throw S?.name==="AbortError"&&(O="fetch-timeout"),Rn.create(O,{originalErrorMessage:S?.message})}let g=f.status,y=f.headers.get("ETag")||void 0,w,R;if(f.status===200){let S;try{S=yield f.json()}catch(O){throw Rn.create("fetch-client-parse",{originalErrorMessage:O?.message})}w=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(w={}),g!==304&&g!==200)throw Rn.create("fetch-status",{httpStatus:g});return{status:g,eTag:y,config:w}})}};function DK(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Rn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SK(n){if(!(n instanceof yn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var QT=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return _(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,s){return _(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield DK(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!SK(o))throw o;let a={throttleEndTimeMillis:Date.now()+eu(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var AK=60*1e3,RK=12*60*60*1e3,YT=class{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:AK,minimumFetchIntervalMillis:RK},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Mg(n,e){let t=n.target.error||void 0;return Rn.create(e,{originalErrorMessage:t&&t?.message})}var Do="app_namespace_store",NK="firebase_remote_config",xK=1;function MK(){return new Promise((n,e)=>{try{let t=indexedDB.open(NK,xK);t.onerror=r=>{e(Mg(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Do,{keyPath:"compositeKey"})}}}catch(t){e(Rn.create("storage-open",{originalErrorMessage:t?.message}))}})}var ZT=class{constructor(e,t,r,i=MK()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return _(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([Do],"readonly").objectStore(Do),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(Mg(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(Rn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,t){return _(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Do],"readwrite").objectStore(Do),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:t});l.onerror=d=>{s(Mg(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(Rn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return _(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([Do],"readwrite").objectStore(Do),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(Mg(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Rn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var JT=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return _(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function PK(){vt(new _t(N1,n,"PUBLIC").setMultipleInstances(!0)),Y(zT,R1),Y(zT,R1,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Rn.create("registration-window");if(!ei())throw Rn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Rn.create("registration-project-id");if(!o)throw Rn.create("registration-api-key");if(!a)throw Rn.create("registration-app-id");t=t||"firebase";let c=new ZT(a,r.name,t),l=new JT(c),d=new Ar(zT);d.logLevel=Jt.ERROR;let f=new KT(i,_n,t,s,o,a),g=new QT(f,c),y=new WT(g,c,l,d),w=new YT(r,y,l,c,d);return M1(w),w}}function P1(){return _(this,null,function*(){if(!ei())return!1;try{return yield ms()}catch{return!1}})}PK();var ed=class{constructor(e){return e}},k1="remote-config",XT=class{constructor(){return Ct(k1)}};var eb="__angularfire_symbol__remoteConfigIsSupportedValue",O1="__angularfire_symbol__remoteConfigIsSupported";globalThis[O1]||=P1().then(n=>globalThis[eb]=n).catch(()=>globalThis[eb]=!1);var Pg={async:()=>globalThis[O1],sync:()=>{let n=globalThis[eb];if(n===void 0)throw new Error(xa("RemoteConfig"));return n}},tb=new $("angularfire2.remote-config-instances");function kK(n,e){if(!Pg.sync())return null;let t=Rt(k1,n,e);return t&&new ed(t)}function OK(n){return(e,t)=>{if(!Pg.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new ed(r)}}var FK={provide:XT,deps:[[new se,tb]]},LK={provide:ed,useFactory:kK,deps:[[new se,tb],nt]};function F1(n,...e){return Y("angularfire",tt.full,"rc"),Qe([LK,FK,{provide:Zi,useValue:Pg.async,multi:!0},{provide:tb,useFactory:OK(n),multi:!0,deps:[te,we,mt,ut,...e]}])}var Cle=Pg.async;var L1=xe(x1,!0);var V1="@firebase/vertexai-preview",U1="0.0.4";var j1="vertexAI",B1="us-central1";var nb=class{constructor(e,t,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=t?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||B1}_delete(){return Promise.resolve()}};var rb=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(rb||{});var Rle=[rb.RECITATION,rb.SAFETY];function $1(n=Dt(),e){return n=Ee(n),bt(n,j1).getImmediate({identifier:e?.location||B1})}function VK(){vt(new _t(j1,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new nb(t,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),Y(V1,U1),Y(V1,U1,"esm2017")}VK();var td=class{constructor(e){return e}},H1="vertexai",ib=class{constructor(){return Ct(H1)}};var sb=new $("angularfire2.vertexai-instances");function UK(n,e){let t=Rt(H1,n,e);return t&&new td(t)}function jK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new td(r)}}var BK={provide:ib,deps:[[new se,sb]]},$K={provide:td,useFactory:UK,deps:[[new se,sb],nt]};function q1(n,...e){return Y("angularfire",tt.full,"vertexai"),Qe([$K,BK,{provide:sb,useFactory:jK(n),multi:!0,deps:[te,we,mt,ut,[new se,Dn],...e]}])}var G1=xe($1,!0);var z1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var W1={providers:[CR({eventCoalescing:!0}),NN(xN),MN(()=>PN(z1.firebaseConfig)),bx(()=>Sx()),Kx(()=>zx()),Wx,Kw,QP(()=>YP()),$O(()=>HO()),YO(()=>ZO()),d1(()=>h1()),p1(()=>g1()),S1(()=>A1()),F1(()=>L1()),q1(()=>G1())]};var Nn=class n{destroyRef=x(Yi);firestore=x(_o);destroyed=new at;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return _(this,null,function*(){let e=yield oC(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>t&&(t=s)}),(t+1).toString()})}createData(e,t){let r=sC(this.collectionRef,e);return aC(r,t)}updateData(e,t){return aC(sC(this.collectionRef,e),t,{merge:!0})}getDataById(e){return _(this,null,function*(){let t=ZP(this.collectionRef,JP("id","==",e)),r=yield oC(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function ot(n){n||(Xh(ot),n=x(Yi));let e=new ae(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(Vt(e))}function be(n,e){!e?.injector&&Xh(be);let t=e?.injector??x(we),r=new au(1),i=Ru(()=>{let s;try{s=n()}catch(o){Jn(()=>r.error(o));return}Jn(()=>r.next(s))},{injector:t,manualCleanup:!0});return t.get(Yi).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var Ht=class n extends Nn{collectionPath="/race-configs";collectionRef=ir(this.firestore,this.collectionPath);activeRaceConfig=ce(void 0);constructor(){super(),this.getAll().pipe(ot()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}getAll(){return rr(this.collectionRef).pipe(Vt(this.destroyed),K(e=>e.filter(t=>!t.deleted)))}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var HK=Math.pow(10,8)*24*60*60*1e3,Ade=-HK;var K1=864e5,kg=6e4,Og=36e5,Q1=1e3;var qK=3600;var Y1=qK*24,Rde=Y1*7,GK=Y1*365.2425,zK=GK/12,Nde=zK*3,ob=Symbol.for("constructDateFrom");function Hn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&ob in n?n[ob](e):n instanceof Date?new n.constructor(e):new Date(e)}function Pe(n,e){return Hn(e||n,n)}function Z1(n,e,t){let r=Pe(n,t?.in);return isNaN(e)?Hn(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function J1(n,e,t){let r=Pe(n,t?.in);if(isNaN(e))return Hn(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),s=Hn(t?.in||n,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function _c(n,e,t){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=Pe(n,t?.in),f=i||r?J1(d,i+r*12):d,g=o||s?Z1(f,o+s*7):f,y=c+a*60,R=(l+y*60)*1e3;return Hn(t?.in||n,+g+R)}function Fg(n,e,t){return Hn(t?.in||n,+Pe(n)+e)}function vc(n,e,t){return Fg(n,e*Og,t)}function ab(n){let e=Pe(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function on(n,...e){let t=Hn.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function cb(n,e){let t=Pe(n,e?.in);return t.setHours(0,0,0,0),t}function X1(n,e,t){let[r,i]=on(t?.in,n,e),s=cb(r),o=cb(i),a=+s-ab(s),c=+o-ab(o);return Math.round((a-c)/K1)}function So(n,e,t){let r=Pe(n,t?.in);return r.setTime(r.getTime()+e*kg),r}function eF(n,e,t){return Fg(n,e*1e3,t)}function Ao(n,e){let t=+Pe(n)-+Pe(e);return t<0?-1:t>0?1:t}function tF(n,e,t){let[r,i]=on(t?.in,n,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function nF(n,e,t){let[r,i]=on(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function iF(n,e,t){let[r,i]=on(t?.in,n,e),s=rF(r,i),o=Math.abs(X1(r,i));r.setDate(r.getDate()-s*o);let a=+(rF(r,i)===-s),c=s*(o-a);return c===0?0:c}function rF(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function wc(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function sF(n,e,t){let[r,i]=on(t?.in,n,e),s=(+r-+i)/Og;return wc(t?.roundingMethod)(s)}function Ni(n,e){return+Pe(n)-+Pe(e)}function Lg(n,e,t){let r=Ni(n,e)/kg;return wc(t?.roundingMethod)(r)}function oF(n,e){let t=Pe(n,e?.in);return t.setHours(23,59,59,999),t}function aF(n,e){let t=Pe(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function cF(n,e){let t=Pe(n,e?.in);return+oF(t,e)==+aF(t,e)}function uF(n,e,t){let[r,i,s]=on(t?.in,n,n,e),o=Ao(i,s),a=Math.abs(tF(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=Ao(i,s)===-o;cF(r)&&a===1&&Ao(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function lF(n,e,t){let r=Ni(n,e)/1e3;return wc(t?.roundingMethod)(r)}function dF(n,e,t){let[r,i]=on(t?.in,n,e),s=Ao(r,i),o=Math.abs(nF(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=Ao(r,i)===-s,c=s*(o-+a);return c===0?0:c}function hF(n,e){let[t,r]=on(n,e.start,e.end);return{start:t,end:r}}function ub(n,e){let{start:t,end:r}=hF(e?.in,n),i={},s=dF(r,t);s&&(i.years=s);let o=_c(t,{years:i.years}),a=uF(r,o);a&&(i.months=a);let c=_c(o,{months:i.months}),l=iF(r,c);l&&(i.days=l);let d=_c(c,{days:i.days}),f=sF(r,d);f&&(i.hours=f);let g=_c(d,{hours:i.hours}),y=Lg(r,g);y&&(i.minutes=y);let w=_c(g,{minutes:i.minutes}),R=lF(r,w);return R&&(i.seconds=R),i}function fF(n,e){return+Pe(n)>+Pe(e)}function pF(n,e){return+Pe(n)<+Pe(e)}function gF(n){return n*Q1}function mF(n,e,t){return So(n,-e,t)}var Pt=class n extends Nn{collectionPath="/races";collectionRef=ir(this.firestore,this.collectionPath);raceConfigService=x(Ht);activeRace=ce(void 0);endRaceDate=ce(void 0);constructor(){super(),Ke({races:this.getAll(),raceConfig:be(this.raceConfigService.activeRaceConfig)}).pipe(ot(),K(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e,t),i=r?vc(r.start.toDate(),t.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return _(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getAll(){return rr(this.collectionRef).pipe(Vt(this.destroyed),K(e=>e.filter(t=>!t.deleted)))}getActiveRace(e,t){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(vc(s.start.toDate(),t.durationHour)>=r)return s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function yF(n,e){if(!n||!e)return"--:--:--";let t=ub({end:e,start:n});return Vg(t)}function Ro(n){if(!n)return"--:--:--";let e=ub({end:n,start:new Date});return Vg(e)}function No(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return Vg(t)}function _F(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return Vg(t)}function vF(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return WK(r,t)}function WK(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"00:00:000":[nd(n.minutes),nd(n.seconds),KK(e)].join(":")}function Vg(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"00:00:00":[nd(n.hours),nd(n.minutes),nd(n.seconds)].join(":")}function nd(n){return n?n<10?`0${n}`:`${n}`:"00"}function KK(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var Yr=class n extends Nn{raceService=x(Pt);collectionPath="/stints";collectionRef=ir(this.firestore,this.collectionPath);activeRace=this.raceService.activeRace;stints=ce([]);activeStint=ce(void 0);constructor(){super(),this.getRaceStints().pipe(ot()).subscribe(e=>{this.stints.set(e);let t=this.getActiveStint(e);this.activeStint.set(t)})}getRaceStints(){return Ke({stints:rr(this.collectionRef),activeRace:be(this.activeRace)}).pipe(Vt(this.destroyed),K(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return _(this,null,function*(){return yield this.updateData(e.id,e),e})}getActiveStint(e){let t=e.sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime());for(let r of t)if(!r.endDate)return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var cr=class n extends Nn{collectionPath="/pits";collectionRef=ir(this.firestore,this.collectionPath);raceService=x(Pt);raceConfigService=x(Ht);activePit=ce(void 0);activePitRemainingMilliseconds=ce(void 0);lastRefuelPit=ce(void 0);pits=ce([]);completedDriverChanges=ce(0);lastDriverChangePit=ce(void 0);remainingDriverChanges=ce(0);constructor(){super(),Ke({pits:this.getRacePits(),activeRaceConfig:be(this.raceConfigService.activeRaceConfig),ping:ln(1e3)}).pipe(ot()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))}),this.getRacePits().pipe(ot()).subscribe(e=>{})}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getRacePits(){return Ke({pits:rr(this.collectionRef),activeRace:be(this.raceService.activeRace)}).pipe(Vt(this.destroyed),K(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}getActivePit(e){let t=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of t)if(!r.exitTime)return r}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return eF(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime!==void 0).sort((r,i)=>{let s=r.exitTime?r.exitTime.toDate().getTime():0;return(i.exitTime?i.exitTime.toDate().getTime():0)-s}).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let t=e.filter(r=>r.exitTime).sort((r,i)=>i.entryTime.toMillis()-r.entryTime.toMillis());for(let r of t)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.filter(t=>t.exitTime).reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ic=class n{raceService=x(Pt);stintService=x(Yr);pitService=x(cr);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;startRace(e){return _(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}pitIn(e,t,r){return _(this,null,function*(){let i=this.activeRace(),s=this.activeStint();if(i&&s){let o=this.createPit(s.driverId,e,i.id,t,r),a=yield this.pitService.create(o);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return _(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Tt.now(),i=yield this.startStint(e.id,t.exitDriverId,r);yield this.closeActivePit(i.startDate)}})}startStint(e,t,r){return _(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return _(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return _(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:Tt.now(),deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,raceId:e,startDate:r}}createPit(e,t,r,i,s){return{id:"1",entryDriverId:e,entryTime:Tt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:s,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};function QK(n,e){if(n&1){let t=ma();P(0,"button",2),Ye("click",function(){kn(t);let i=ke();return On(i.startRace())}),L(1," Start race "),M()}}function YK(n,e){if(n&1&&(P(0,"div",1),L(1),M()),n&2){let t=ke();H(),Re(" ",t.endRaceCountdown," ")}}var Ug=class n{raceService=x(Pt);raceManagerService=x(Ic);endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";constructor(){Ke({endRaceDate:be(this.endRaceDate),ping:ln(1e3)}).pipe(ot()).subscribe(e=>{this.endRaceCountdown=Ro(e.endRaceDate)})}startRace(){this.raceManagerService.startRace("1")}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-race"]],standalone:!0,features:[jt],decls:2,vars:1,consts:[[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"]],template:function(t,r){t&1&&gt(0,QK,2,0,"button",0)(1,YK,2,1,"div",1),t&2&&It(r.endRaceDate()?1:0)}})};var jg=class n{raceService=x(Pt);raceConfigService=x(Ht);pitService=x(cr);openingTime=ce(void 0);closingTime=ce(void 0);tyreChangeWindowOpen=ce(!1);remainingTyreChange=ce(0);constructor(){Ke({pits:be(this.pitService.pits),activeRace:be(this.raceService.activeRace),raceConfig:be(this.raceConfigService.activeRaceConfig),ping:ln(1e3)}).pipe(ot()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(vc(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(vc(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var ZK=n=>({"mb-2":n}),JK=n=>({"animate-bounce":n});function XK(n,e){if(n&1&&(P(0,"div",4),L(1),M()),n&2){let t=ke();H(),Re(" Remaining: ",t.remainingTyreChange()," ")}}function e7(n,e){n&1&&(P(0,"div",5),L(1," Completed! "),M())}function t7(n,e){if(n&1&&(P(0,"div",6),L(1," Window open "),M()),n&2){let t=ke();Ge("ngClass",Fn(1,JK,t.remainingTyreChange()>0))}}function n7(n,e){n&1&&(P(0,"div",7),L(1," Window closed "),M())}function r7(n,e){if(n&1&&(L(0),_a(1,"date")),n&2){let t=ke(2);Re(" ",va(1,1,t.openingTime(),"HH:mm:ss")," ")}}function i7(n,e){n&1&&L(0," --:--:-- ")}function s7(n,e){if(n&1&&(L(0),_a(1,"date")),n&2){let t=ke(2);Re(" ",va(1,1,t.closingTime(),"HH:mm:ss")," ")}}function o7(n,e){n&1&&L(0," --:--:-- ")}function a7(n,e){if(n&1&&(P(0,"div",8)(1,"div")(2,"div",9),L(3,"Opening time"),M(),P(4,"div",10),gt(5,r7,2,4)(6,i7,1,0),M()(),P(7,"div")(8,"div",11),L(9,"Opening in"),M(),P(10,"div",12),L(11),M()()(),Ue(12,"hr",13),P(13,"div",8)(14,"div")(15,"div",9),L(16,"Closing time"),M(),P(17,"div",10),gt(18,s7,2,4)(19,o7,1,0),M()(),P(20,"div")(21,"div",11),L(22,"Closing in"),M(),P(23,"div",12),L(24),M()()(),Ue(25,"hr",13),P(26,"div",14)(27,"div")(28,"div",9),L(29,"Remaining tyre change"),M(),P(30,"div",10),L(31),M()()()),n&2){let t=ke();H(5),It(t.openingTime()?5:6),H(6),Re(" ",t.countdownOpeningTime()," "),H(7),It(t.closingTime()?18:19),H(6),Re(" ",t.countdownClosingTime()," "),H(7),Re(" ",t.remainingTyreChange()," ")}}var Bg=class n{tyreService=x(jg);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=Ze(()=>Ro(this.tyreService.openingTime()));countdownClosingTime=Ze(()=>Ro(this.tyreService.closingTime()));isOpen=!0;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-tyre-change-window"]],standalone:!0,features:[jt],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1),Ye("click",function(){return r.isOpen=!r.isOpen}),P(2,"div",2),L(3,"\u{1F6DE} Tyre change"),M(),P(4,"div",3),gt(5,XK,2,1,"div",4)(6,e7,2,0,"div",5)(7,t7,2,3,"div",6)(8,n7,2,0,"div",7),M()(),gt(9,a7,32,5),M()),t&2&&(H(),Ge("ngClass",Fn(4,ZK,r.isOpen)),H(4),It(r.remainingTyreChange()>0?5:6),H(2),It(r.tyreChangeWindowOpen()?7:8),H(2),It(r.isOpen?9:-1))},dependencies:[Rf,tr]})};var $g=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[di,jt],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4),M()()(),Ue(5,"div",4),M()),t&2&&(H(),Ge("ngClass",r.batteryBorderColor),H(),df("width",r.charge,"%"),Ge("ngClass",r.batteryColor),H(2),js(r.charge),H(),Ge("ngClass",r.batteryBorderColor))},dependencies:[tr],changeDetection:0})};var RF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(ve(hi),ve(Lr))}}static{this.\u0275dir=ct({type:n})}}return n})(),ud=(()=>{class n extends RF{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,features:[bn]})}}return n})(),Dc=new $(""),c7={provide:Dc,useExisting:Qn(()=>hb),multi:!0},hb=(()=>{class n extends ud{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Ye("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[Ur([c7]),bn]})}}return n})(),u7={provide:Dc,useExisting:Qn(()=>Yg),multi:!0};function l7(){let n=gi()?gi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var d7=new $(""),Yg=(()=>{class n extends RF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!l7())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(hi),ve(Lr),ve(d7,8))}}static{this.\u0275dir=ct({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ye("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Ur([u7]),bn]})}}return n})();function lb(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Zg=new $(""),NF=new $("");function h7(n){return e=>{if(lb(e.value)||lb(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function f7(n){return lb(n.value)?{required:!0}:null}function wF(n){return null}function xF(n){return n!=null}function MF(n){return Hs(n)?it(n):n}function PF(n){let e={};return n.forEach(t=>{e=t!=null?U(U({},e),t):e}),Object.keys(e).length===0?null:e}function kF(n,e){return e.map(t=>t(n))}function p7(n){return!n.validate}function OF(n){return n.map(e=>p7(e)?e:t=>e.validate(t))}function g7(n){if(!n)return null;let e=n.filter(xF);return e.length==0?null:function(t){return PF(kF(t,e))}}function fb(n){return n!=null?g7(OF(n)):null}function m7(n){if(!n)return null;let e=n.filter(xF);return e.length==0?null:function(t){let r=kF(t,e).map(MF);return iy(r).pipe(K(PF))}}function pb(n){return n!=null?m7(OF(n)):null}function IF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function y7(n){return n._rawValidators}function _7(n){return n._rawAsyncValidators}function db(n){return n?Array.isArray(n)?n:[n]:[]}function qg(n,e){return Array.isArray(n)?n.includes(e):n===e}function EF(n,e){let t=db(e);return db(n).forEach(i=>{qg(t,i)||t.push(i)}),t}function CF(n,e){return db(e).filter(t=>!qg(n,t))}var Gg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=fb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Tc=class extends Gg{get formDirective(){return null}get path(){return null}},cd=class extends Gg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},zg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},v7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},ige=ye(U({},v7),{"[class.ng-submitted]":"isSubmitted"}),Jg=(()=>{class n extends zg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(cd,2))}}static{this.\u0275dir=ct({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&hf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[bn]})}}return n})(),Xg=(()=>{class n extends zg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(ve(Tc,10))}}static{this.\u0275dir=ct({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&hf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[bn]})}}return n})();var rd="VALID",Hg="INVALID",Ec="PENDING",id="DISABLED",bc=class{},Wg=class extends bc{constructor(e,t){super(),this.value=e,this.source=t}},od=class extends bc{constructor(e,t){super(),this.pristine=e,this.source=t}},ad=class extends bc{constructor(e,t){super(),this.touched=e,this.source=t}},Cc=class extends bc{constructor(e,t){super(),this.status=e,this.source=t}};function FF(n){return(em(n)?n.validators:n)||null}function w7(n){return Array.isArray(n)?fb(n):n||null}function LF(n,e){return(em(e)?e.asyncValidators:n)||null}function I7(n){return Array.isArray(n)?pb(n):n||null}function em(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function E7(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[t])throw new Q(1001,"")}function C7(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Q(1002,"")})}var Kg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ze(()=>this.statusReactive()),this.statusReactive=ce(void 0),this._pristine=Ze(()=>this.pristineReactive()),this.pristineReactive=ce(!0),this._touched=Ze(()=>this.touchedReactive()),this.touchedReactive=ce(!1),this._events=new at,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Jn(this.statusReactive)}set status(e){Jn(()=>this.statusReactive.set(e))}get valid(){return this.status===rd}get invalid(){return this.status===Hg}get pending(){return this.status==Ec}get disabled(){return this.status===id}get enabled(){return this.status!==id}get pristine(){return Jn(this.pristineReactive)}set pristine(e){Jn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Jn(this.touchedReactive)}set touched(e){Jn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(EF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(EF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CF(e,this._rawAsyncValidators))}hasValidator(e){return qg(this._rawValidators,e)}hasAsyncValidator(e){return qg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ad(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ad(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(U({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new od(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new od(!0,r))}markAsPending(e={}){this.status=Ec;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Cc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(U({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=id,this.errors=null,this._forEachChild(i=>{i.disable(ye(U({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,r)),this._events.next(new Cc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=rd,this._forEachChild(r=>{r.enable(ye(U({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(U({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===rd||this.status===Ec)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Wg(this.value,t)),this._events.next(new Cc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(U({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?id:rd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Ec,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=MF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Cc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?id:this.errors?Hg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ec)?Ec:this._anyControlsHaveStatus(Hg)?Hg:rd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new od(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ad(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){em(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=w7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=I7(this._rawAsyncValidators)}},Qg=class extends Kg{constructor(e,t,r){super(FF(t),LF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){C7(this,!0,e),Object.keys(e).forEach(r=>{E7(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var gb=new $("CallSetDisabledState",{providedIn:"root",factory:()=>mb}),mb="always";function T7(n,e){return[...e.path,n]}function VF(n,e,t=mb){UF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),D7(n,e),A7(n,e),S7(n,e),b7(n,e)}function TF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function b7(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function UF(n,e){let t=y7(n);e.validator!==null?n.setValidators(IF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=_7(n);e.asyncValidator!==null?n.setAsyncValidators(IF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();TF(e._rawValidators,i),TF(e._rawAsyncValidators,i)}function D7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&jF(n,e)})}function S7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&jF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function jF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function A7(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function R7(n,e){n==null,UF(n,e)}function N7(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function x7(n){return Object.getPrototypeOf(n.constructor)===ud}function M7(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function P7(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Yg?t=s:x7(s)?r=s:i=s}),i||r||t||null}var k7={provide:Tc,useExisting:Qn(()=>ld)},sd=Promise.resolve(),ld=(()=>{class n extends Tc{get submitted(){return Jn(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Ze(()=>this.submittedReactive()),this.submittedReactive=ce(!1),this._directives=new Set,this.ngSubmit=new St,this.form=new Qg({},fb(t),pb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){sd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),VF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){sd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){sd.then(()=>{let r=this._findContainer(t.path),i=new Qg({});R7(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){sd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){sd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),M7(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(ve(Zg,10),ve(NF,10),ve(gb,8))}}static{this.\u0275dir=ct({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ye("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ur([k7]),bn]})}}return n})();function bF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function DF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var O7=class extends Kg{constructor(e=null,t,r){super(FF(t),LF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),em(t)&&(t.nonNullable||t.initialValueIsDefault)&&(DF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){DF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var F7={provide:cd,useExisting:Qn(()=>dd)},SF=Promise.resolve(),dd=(()=>{class n extends cd{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new O7,this._registered=!1,this.name="",this.update=new St,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=P7(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),N7(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){SF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Au(r);SF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?T7(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(ve(Tc,9),ve(Zg,10),ve(NF,10),ve(Dc,10),ve(Ji,8),ve(gb,8))}}static{this.\u0275dir=ct({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ur([F7]),bn,di]})}}return n})(),tm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),L7={provide:Dc,useExisting:Qn(()=>yb),multi:!0},yb=(()=>{class n extends ud{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ye("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Ur([L7]),bn]})}}return n})();var V7={provide:Dc,useExisting:Qn(()=>nm),multi:!0};function BF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function U7(n){return n.split(":")[0]}var nm=(()=>{class n extends ud{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=BF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=U7(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ye("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ur([V7]),bn]})}}return n})(),$F=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(BF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(ve(Lr),ve(hi),ve(nm,9))}}static{this.\u0275dir=ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),j7={provide:Dc,useExisting:Qn(()=>HF),multi:!0};function AF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function B7(n){return n.split(":")[0]}var HF=(()=>{class n extends ud{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=B7(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ye("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ur([j7]),bn]})}}return n})(),qF=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(AF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(AF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(ve(Lr),ve(hi),ve(HF,9))}}static{this.\u0275dir=ct({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function $7(n){return typeof n=="number"?n:parseFloat(n)}var GF=(()=>{class n{constructor(){this._validator=wF}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wF,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=ct({type:n,features:[di]})}}return n})();var H7={provide:Zg,useExisting:Qn(()=>_b),multi:!0},_b=(()=>{class n extends GF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>$7(t),this.createValidator=t=>h7(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Su("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Ur([H7]),bn]})}}return n})(),q7={provide:Zg,useExisting:Qn(()=>vb),multi:!0};var vb=(()=>{class n extends GF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Au,this.createValidator=t=>f7}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=ct({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Su("required",i._enabled?"":null)},inputs:{required:"required"},features:[Ur([q7]),bn]})}}return n})();var G7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fs({type:n})}static{this.\u0275inj=Os({})}}return n})();var rm=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:gb,useValue:t.callSetDisabledState??mb}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fs({type:n})}static{this.\u0275inj=Os({imports:[G7]})}}return n})();var im=class n{raceService=x(Pt);pitService=x(cr);raceConfigService=x(Ht);lastRefuelTime=ce(void 0);emptyFuelTime=ce(void 0);remainingFuelPercentage=ce(100);remainingFuelLap=ce(100);constructor(){Ke({lastRefuelPit:be(this.pitService.lastRefuelPit),activeRace:be(this.raceService.activeRace),raceConfig:be(this.raceConfigService.activeRaceConfig),ping:ln(1e3)}).pipe(ot()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{if(t&&r){let i=e&&e.exitTime?e.exitTime.toDate():t.start.toDate();this.lastRefuelTime.set(i),this.emptyFuelTime.set(So(i,r.fuelDurationMinute)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r.fuelDurationMinute)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r.referenceLapTimeMillisecond))}else this.lastRefuelTime.set(void 0),this.emptyFuelTime.set(void 0),this.remainingFuelPercentage.set(100),this.remainingFuelLap.set(0)})}calculateRemainingFuelPercentage(e,t){if(!e)return 100;let i=Lg(e,new Date)/t*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}calculateRemainingFuelLaps(e,t){if(!e||!t)return 0;let r=Ni(e,new Date);return Math.floor(r/t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var z7=n=>({"mb-2":n}),W7=n=>({"animate-bounce":n});function K7(n,e){if(n&1&&(L(0),_a(1,"date")),n&2){let t=ke(2);Re(" ",va(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function Q7(n,e){n&1&&L(0," --:--:-- ")}function Y7(n,e){if(n&1&&(L(0),_a(1,"date")),n&2){let t=ke(2);Re(" ",va(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function Z7(n,e){n&1&&L(0," --:--:-- ")}function J7(n,e){if(n&1){let t=ma();P(0,"div",7)(1,"div")(2,"div",8),L(3,"Last refuel time"),M(),P(4,"div",9),gt(5,K7,2,4)(6,Q7,1,0),M()(),P(7,"div")(8,"div",10),L(9,"Since last refuel"),M(),P(10,"div",11),L(11),M()()(),Ue(12,"hr",12),P(13,"div",7)(14,"div")(15,"div",8),L(16,"Empty time"),M(),P(17,"div",9),gt(18,Y7,2,4)(19,Z7,1,0),M()(),P(20,"div")(21,"div",10),L(22,"Empty in"),M(),P(23,"div",11),L(24),M()()(),Ue(25,"hr",12),P(26,"div",13)(27,"div")(28,"div",8),L(29,"Remaining laps"),M(),P(30,"div",9),L(31),M()(),P(32,"div")(33,"div",10),L(34,"Fuel duration (min):"),M(),P(35,"div",14)(36,"button",15),Ye("click",function(){kn(t);let i=ke();return On(i.increaseFuelDuration())}),L(37,"+"),M(),P(38,"form",16),Ye("ngSubmit",function(){kn(t);let i=ke();return On(i.onSubmit())}),P(39,"input",17),$s("ngModelChange",function(i){kn(t);let s=ke();return ya(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),On(i)}),M()(),P(40,"button",18),Ye("click",function(){kn(t);let i=ke();return On(i.decreaseFuelDuration())}),L(41,"-"),M()()()()}if(n&2){let t=ke();H(5),It(t.lastRefuelTime()?5:6),H(6),Re(" ",t.sinceLastRefuel()," "),H(7),It(t.emptyFuelTime()?18:19),H(6),Re(" ",t.emptyFuelCountdown()," "),H(7),Re(" ",t.remainingFuelLap()," "),H(8),Bs("ngModel",t.fuelDurationMinute)}}var sm=class n{raceConfigService=x(Ht);fuelService=x(im);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=Ze(()=>Ro(this.emptyFuelTime()));sinceLastRefuel=Ze(()=>yF(this.lastRefuelTime(),new Date));warning=Ze(()=>this.remainingFuelPercentage()<=20);remainingColor=Ze(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){Ru(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-fuel"]],standalone:!0,features:[jt],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1),Ye("click",function(){return r.isOpen=!r.isOpen}),P(2,"div",2),L(3,"\u26FD\uFE0F Fuel"),M(),P(4,"div",3)(5,"div",4),L(6),M(),P(7,"div",5),L(8),M(),Ue(9,"app-battery",6),M()(),gt(10,J7,42,6),M()),t&2&&(H(),Ge("ngClass",Fn(8,z7,r.isOpen)),H(3),Ge("ngClass",Fn(10,W7,r.warning())),H(),Ge("ngClass",r.remainingColor()),H(),Re(" Laps: ",r.remainingFuelLap()," "),H(),Ge("ngClass",r.remainingColor()),H(),Re(" Empty: ",r.emptyFuelCountdown()," "),H(),Ge("charge",r.remainingFuelPercentage()),H(),It(r.isOpen?10:-1))},dependencies:[tr,Rf,$g,rm,tm,Yg,yb,Jg,Xg,vb,_b,dd,ld]})};var om=class n{raceService=x(Pt);pitService=x(cr);raceConfigService=x(Ht);activeRaceLogic=ce(void 0);constructor(){Ke({activeRace:be(this.raceService.activeRace),endRaceDate:be(this.raceService.endRaceDate),activeRaceConfig:be(this.raceConfigService.activeRaceConfig),remainingDriverChanges:be(this.pitService.remainingDriverChanges),lastDriverChangePit:be(this.pitService.lastDriverChangePit),ping:ln(1e3)}).pipe(ot()).subscribe(({activeRace:e,endRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,lastDriverChangePit:s})=>{e&&t&&r?this.activeRaceLogic.set(this.calculateRaceLogic(e,t,r,i,s)):this.activeRaceLogic.set(void 0)})}calculateRaceLogic(e,t,r,i,s){let o=new Date;if(o>=t)return{avgStintMillisecondsTime:void 0,laps:0,avgStintMillisecondsIfDriverChangedNow:void 0,lapsIfDriverChangeNow:0};let a=gF(r.minPitSeconds*i),c=Ni(t,o)-a,l=s?s.entryTime.toDate():e.start.toDate(),f=(Ni(t,l)-a)/(i+1),g=c/i;return{avgStintMillisecondsTime:f||void 0,laps:Math.floor(f/r.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:g||void 0,lapsIfDriverChangeNow:Math.floor(g/r.referenceLapTimeMillisecond)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var X7=n=>({"mb-2":n});function eQ(n,e){if(n&1&&(P(0,"div",3)(1,"div")(2,"div",4),L(3,"AVG stint time"),M(),P(4,"div",5),L(5),M()(),P(6,"div")(7,"div",6),L(8,"Laps"),M(),P(9,"div",7),L(10),M()()(),Ue(11,"hr",8),P(12,"div",9)(13,"div")(14,"div",4),L(15,"AVG stint time if driver change now"),M(),P(16,"div",5),L(17),M()(),P(18,"div")(19,"div",6),L(20,"Laps"),M(),P(21,"div",7),L(22),M()()()),n&2){let t=ke();H(5),Re(" ",t.AVGStintTime()," "),H(5),Re(" ",t.laps()," "),H(7),Re(" ",t.AVGStintTimeIfDriverChangeNow()," "),H(5),Re(" ",t.lapsIfDriverChangeNow()," ")}}var am=class n{raceLogicService=x(om);activeRaceLogic=this.raceLogicService.activeRaceLogic;AVGStintTime=Ze(()=>{let e=this.raceLogicService.activeRaceLogic();return e?No(e.avgStintMillisecondsTime):"--:--:--"});laps=Ze(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=Ze(()=>{let e=this.raceLogicService.activeRaceLogic();return e?No(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=Ze(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-race-logic"]],standalone:!0,features:[jt],decls:5,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1),Ye("click",function(){return r.isOpen=!r.isOpen}),P(2,"div",2),L(3,"\u{1F9E0} Race logic"),M()(),gt(4,eQ,23,4),M()),t&2&&(H(),Ge("ngClass",Fn(2,X7,r.isOpen)),H(3),It(r.isOpen?4:-1))},dependencies:[tr]})};var cm=class n extends Nn{collectionPath="/laps";collectionRef=ir(this.firestore,this.collectionPath);raceService=x(Pt);laps=ce([]);constructor(){super(),Ke({laps:this.getRaceLaps(),activeRace:be(this.raceService.activeRace)}).pipe(ot()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return Ke({laps:rr(this.collectionRef),activeRace:be(this.raceService.activeRace)}).pipe(Vt(this.destroyed),K(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return _(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var Sc=class n extends Nn{collectionPath="/drivers";collectionRef=ir(this.firestore,this.collectionPath);lapService=x(cm);stintService=x(Yr);raceConfigService=x(Ht);drivers=ce([]);driversReferenceLapTimeMap=ce(new Map);driversTimeOnTrackMap=ce(new Map);driversTimeOnTrackWarningMap=ce(new Map);driversTimeOnTrackWarningCount=Ze(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),Ke({drivers:this.getAll(),laps:be(this.lapService.laps),stints:be(this.stintService.stints),activeRaceConfig:be(this.raceConfigService.activeRaceConfig),ping:ln(1e3)}).pipe(ot()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i))})}getAll(){return rr(this.collectionRef).pipe(Vt(this.destroyed),K(e=>e.filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(s=>{r.set(s.id,0)});let i=e.reduce((s,o)=>(s[o.driverId]||(s[o.driverId]=[]),s[o.driverId].push(o.millisecondsTime),s),{});for(let s in i){let o=i[s],a=o.reduce((c,l)=>c+l,0)/o.length;r.set(s,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let s;i.endDate?s=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():s=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+s):r.set(i.driverId,s)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=t.minDriverOnTrackHour*60*60*1e3,s=t.maxDriverOnTrackHour*60*60*1e3,o=20*60*1e3;e.forEach((a,c)=>{let l=a<i,d=s-a<=o;r.set(c,l||d)})}return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var tQ=n=>({"mb-2":n}),nQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-100":e}),rQ=n=>({"bg-yellow-500 text-white":n});function iQ(n,e){if(n&1&&(P(0,"div",4),L(1),M()),n&2){let t=ke();H(),Re(" Time on track warning: ",t.driversTimeOnTrackWarningCount()," ")}}function sQ(n,e){n&1&&(P(0,"div",5),L(1," Time on track warning: Completed! "),M())}function oQ(n,e){if(n&1&&(P(0,"tr",9)(1,"td",10),L(2),M(),P(3,"td",10),L(4),M(),P(5,"td",11),L(6),M(),P(7,"td",11)(8,"div",12),L(9),M()()()),n&2){let t=e.$implicit,r=ke(2);Ge("ngClass",gR(6,nQ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),H(2),js(t.id),H(2),js(t.raceName),H(2),js(r.getDriverReferenceLapTime(t.id)),H(2),Ge("ngClass",Fn(9,rQ,r.getDriverTimeOnTrackWarning(t.id))),H(),Re(" ",r.getDriverTimeOnTrack(t.id)," ")}}function aQ(n,e){if(n&1&&(P(0,"table",6)(1,"thead")(2,"tr"),Ue(3,"th",7),P(4,"th",7),L(5,"Name"),M(),P(6,"th",7),L(7,"Reference lap time"),M(),P(8,"th",7),L(9,"Time on track"),M()()(),P(10,"tbody"),gt(11,oQ,10,11,"tr",8),M()()),n&2){let t=ke();H(11),Ge("ngForOf",t.drivers())}}var um=class n{driverService=x(Sc);stintService=x(Yr);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=Ze(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});isOpen=!0;getDriverReferenceLapTime(e){return vF(this.driverService.driversReferenceLapTimeMap().get(e))}getDriverTimeOnTrack(e){return No(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-driver"]],standalone:!0,features:[jt],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"min-w-full","bg-white"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-md","font-medium","text-gray-700"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-black","font-mono"],[1,"p-1","w-24","text-center","rounded",3,"ngClass"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1),Ye("click",function(){return r.isOpen=!r.isOpen}),P(2,"div",2),L(3,"\u{1F417} Drivers"),M(),P(4,"div",3),gt(5,iQ,2,1,"div",4)(6,sQ,2,0,"div",5),M()(),gt(7,aQ,12,1,"table",6),M()),t&2&&(H(),Ge("ngClass",Fn(3,tQ,r.isOpen)),H(4),It(r.driversTimeOnTrackWarningCount()>0?5:6),H(2),It(r.isOpen?7:-1))},dependencies:[tr,Af]})};var lm=class n{raceService=x(Pt);stintService=x(Yr);raceConfigService=x(Ht);open=ce(!1);openInMilliseconds=ce(void 0);constructor(){Ke({endRaceDate:be(this.raceService.endRaceDate),activeStint:be(this.stintService.activeStint),activeRaceConfig:be(this.raceConfigService.activeRaceConfig),ping:ln(1e3)}).pipe(ot()).subscribe(({endRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(void 0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return So(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,s=mF(e,r.pitLaneCloseBeforeEndRaceMinute),o=pF(i,s),a=So(t.startDate.toDate(),r.minStintMinute),c=fF(i,a);return o&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=B({token:n,factory:n.\u0275fac,providedIn:"root"})};var cQ=n=>({"mb-4":n});function uQ(n,e){if(n&1&&(P(0,"div",4),L(1),M()),n&2){let t=ke();H(),Re(" Remaining driver changes: ",t.remainingDriverChanges()," ")}}function lQ(n,e){n&1&&(P(0,"div",5),L(1," Driver changes completed! "),M())}function dQ(n,e){n&1&&(P(0,"div",5),L(1," Open "),M())}function hQ(n,e){n&1&&(P(0,"div",6),L(1," Closed "),M())}function fQ(n,e){if(n&1&&(P(0,"option",28),L(1),M()),n&2){let t=e.$implicit;Ge("value",t.id),H(),Q_("",t.id," - ",t.raceName,"")}}function pQ(n,e){if(n&1){let t=ma();P(0,"div",7)(1,"button",8),Ye("click",function(){kn(t);let i=ke();return On(i.pitIn())}),L(2," Pit in "),M(),P(3,"div",9),L(4),M(),P(5,"button",10),Ye("click",function(){kn(t);let i=ke();return On(i.pitOut())}),L(6," Pit out "),M()(),P(7,"div",11)(8,"form")(9,"div",12)(10,"select",13),$s("ngModelChange",function(i){kn(t);let s=ke();return ya(s.selectedDriver,i)||(s.selectedDriver=i),On(i)}),gt(11,fQ,2,3,"option",14),M(),P(12,"label",15),L(13,"New driver"),M()(),P(14,"div",16)(15,"div",12)(16,"input",17),$s("ngModelChange",function(i){kn(t);let s=ke();return ya(s.refueling,i)||(s.refueling=i),On(i)}),M(),P(17,"label",18),L(18,"Refueling"),M()(),P(19,"div",12)(20,"input",19),$s("ngModelChange",function(i){kn(t);let s=ke();return ya(s.tyreChange,i)||(s.tyreChange=i),On(i)}),M(),P(21,"label",20),L(22,"Tyre change"),M()()()()(),Ue(23,"hr",12),P(24,"div",21),L(25,"Driver changes"),M(),P(26,"div",22)(27,"div")(28,"div",23),L(29,"Completed"),M(),P(30,"div",24),L(31),M()(),P(32,"div")(33,"div",25),L(34,"Remaining"),M(),P(35,"div",26),L(36),M()()(),Ue(37,"hr",12),P(38,"div",27)(39,"div")(40,"div",23),L(41,"Open in"),M(),P(42,"div",24),L(43),M()(),P(44,"div"),Ue(45,"div",25)(46,"div",26),M()()}if(n&2){let t=ke();H(),Ge("disabled",!t.pitLaneOpen()),H(3),Re(" ",t.activePitRemainingMilliseconds()," "),H(),Ge("disabled",!t.activePit()),H(5),Bs("ngModel",t.selectedDriver),H(),Ge("ngForOf",t.drivers()),H(5),Bs("ngModel",t.refueling),H(4),Bs("ngModel",t.tyreChange),H(11),Re(" ",t.completedDriverChanges()," "),H(5),Re(" ",t.remainingDriverChanges()," "),H(7),Re(" ",t.pitLaneOpenInMilliseconds()," ")}}var dm=class n{pitLaneService=x(lm);pitService=x(cr);driverService=x(Sc);raceManagerService=x(Ic);pitLaneOpen=this.pitLaneService.open;activePit=this.pitService.activePit;remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;drivers=this.driverService.drivers;activePitRemainingMilliseconds=Ze(()=>_F(this.pitService.activePitRemainingMilliseconds()));pitLaneOpenInMilliseconds=Ze(()=>No(this.pitLaneService.openInMilliseconds()));isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";pitIn(){this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)}pitOut(){this.raceManagerService.pitOut(),this.tyreChange=!1,this.refueling=!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-pit-lane"]],standalone:!0,features:[jt],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"text-black","font-mono","py-2"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"flex","flex-col","items-center","mb-2"],[1,"mb-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","driverSelect",1,"ml-2"],[1,"flex","flex-col","items-center"],["type","checkbox","id","refueling","name","refueling",3,"ngModelChange","ngModel"],["for","refueling",1,"ml-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","ngModel"],["for","tyreChange",1,"ml-2"],[1,"font-semibold"],[1,"flex","justify-between","mb-3"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"flex","justify-between"],[3,"value"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1),Ye("click",function(){return r.isOpen=!r.isOpen}),P(2,"div",2),L(3,"\u{1F17F}\uFE0F Pit Lane"),M(),P(4,"div",3),gt(5,uQ,2,1,"div",4)(6,lQ,2,0,"div",5)(7,dQ,2,0,"div",5)(8,hQ,2,0,"div",6),M()(),gt(9,pQ,47,10),M()),t&2&&(H(),Ge("ngClass",Fn(4,cQ,r.isOpen)),H(4),It(r.remainingDriverChanges()>0?5:6),H(2),It(r.pitLaneOpen()?7:8),H(2),It(r.isOpen?9:-1))},dependencies:[tr,rm,tm,$F,qF,hb,nm,Jg,Xg,dd,ld,Af]})};var hm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ut({type:n,selectors:[["app-root"]],standalone:!0,features:[jt],decls:26,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(t,r){t&1&&(P(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),L(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),M()(),P(5,"div",4),Ue(6,"app-race"),M()(),P(7,"div",5)(8,"div",6)(9,"div",7),Ue(10,"app-tyre-change-window"),M(),P(11,"div",8),Ue(12,"app-driver"),M()(),P(13,"div",9)(14,"div",7),Ue(15,"app-fuel"),M(),P(16,"div",8),Ue(17,"app-pit-lane"),M()(),P(18,"div",9)(19,"div",7),Ue(20,"app-race-logic"),M()()(),P(21,"div",10)(22,"div",3),L(23,"Cremona kart circuit"),M(),Ue(24,"img",11),M()(),Ue(25,"router-outlet"))},dependencies:[zv,Ug,Bg,sm,am,um,dm]})};WR(hm,W1).catch(n=>console.error(n));
