import{$ as kt,A as xt,B as En,C as hu,D as it,E as yE,F as vE,G as Tn,H as Wr,I as Wo,J as Ko,K as Qo,L as Kr,M as IE,N as wE,O as EE,P as TE,Q as Yo,R as Zo,S as we,T as qe,U as _t,V as Cn,W as cf,X as fu,Y as ze,Z as Qe,_ as jn,a as V,aa as CE,b as Me,ba as Ye,c as pr,ca as pu,d as v,da as B,e as O,ea as bE,f as Hi,g as lE,h as dE,i as hE,j as fE,k as pE,l as gr,m as of,n as af,o as qi,p as mt,q as qo,r as gE,s as zo,t as du,u as mE,v as wn,w as _E,x as Un,y as Gr,z as Go}from"./chunk-VUN4IAWB.js";var lf=null;var uf=1,DE=Symbol("SIGNAL");function me(n){let e=lf;return lf=n,e}function SE(){return lf}var df={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function TM(n){if(!(mf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===uf)){if(!n.producerMustRecompute(n)&&!ff(n)){n.dirty=!1,n.lastCleanEpoch=uf;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=uf}}function hf(n){return n&&(n.nextProducerIndex=0),me(n)}function AE(n,e){if(me(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(mf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)gf(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function ff(n){_f(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(TM(t),r!==t.version))return!0}return!1}function pf(n){if(_f(n),mf(n))for(let e=0;e<n.producerNode.length;e++)gf(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function gf(n,e){if(CM(n),n.liveConsumerNode.length===1&&bM(n))for(let r=0;r<n.producerNode.length;r++)gf(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];_f(i),i.producerIndexOfThis[r]=e}}function mf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _f(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function CM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function bM(n){return n.producerNode!==void 0}function DM(){throw new Error}var SM=DM;function RE(n){SM=n}function ee(n){return typeof n=="function"}function zi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var gu=zi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Qr(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ee(r))try{r()}catch(s){e=s instanceof gu?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{NE(s)}catch(o){e=e??[],o instanceof gu?e=[...e,...o.errors]:e.push(o)}}if(e)throw new gu(e)}}add(e){var t;if(e&&e!==this)if(this.closed)NE(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Qr(t,e)}remove(e){let{_finalizers:t}=this;t&&Qr(t,e),e instanceof n&&e._removeParent(this)}};je.EMPTY=(()=>{let n=new je;return n.closed=!0,n})();var yf=je.EMPTY;function mu(n){return n instanceof je||n&&"closed"in n&&ee(n.remove)&&ee(n.add)&&ee(n.unsubscribe)}function NE(n){ee(n)?n():n.unsubscribe()}var an={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gi={setTimeout(n,e,...t){let{delegate:r}=Gi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function _u(n){Gi.setTimeout(()=>{let{onUnhandledError:e}=an;if(e)e(n);else throw n})}function Jo(){}var PE=vf("C",void 0,void 0);function ME(n){return vf("E",void 0,n)}function xE(n){return vf("N",n,void 0)}function vf(n,e,t){return{kind:n,value:e,error:t}}var Yr=null;function Wi(n){if(an.useDeprecatedSynchronousErrorHandling){let e=!Yr;if(e&&(Yr={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Yr;if(Yr=null,t)throw r}}else n()}function kE(n){an.useDeprecatedSynchronousErrorHandling&&Yr&&(Yr.errorThrown=!0,Yr.error=n)}var Zr=class extends je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,mu(e)&&e.add(this)):this.destination=NM}static create(e,t,r){return new Ki(e,t,r)}next(e){this.isStopped?wf(xE(e),this):this._next(e)}error(e){this.isStopped?wf(ME(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?wf(PE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},AM=Function.prototype.bind;function If(n,e){return AM.call(n,e)}var Ef=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yu(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yu(r)}else yu(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yu(t)}}},Ki=class extends Zr{constructor(e,t,r){super();let i;if(ee(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&an.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&If(e.next,s),error:e.error&&If(e.error,s),complete:e.complete&&If(e.complete,s)}):i=e}this.destination=new Ef(i)}};function yu(n){an.useDeprecatedSynchronousErrorHandling?kE(n):_u(n)}function RM(n){throw n}function wf(n,e){let{onStoppedNotification:t}=an;t&&Gi.setTimeout(()=>t(n,e))}var NM={closed:!0,next:Jo,error:RM,complete:Jo};var Qi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dt(n){return n}function vu(...n){return Tf(n)}function Tf(n){return n.length===0?Dt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var le=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=MM(t)?t:new Ki(t,r,i);return Wi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=OE(r),new r((i,s)=>{let o=new Ki({next:a=>{try{t(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Qi](){return this}pipe(...t){return Tf(t)(this)}toPromise(t){return t=OE(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function OE(n){var e;return(e=n??an.Promise)!==null&&e!==void 0?e:Promise}function PM(n){return n&&ee(n.next)&&ee(n.error)&&ee(n.complete)}function MM(n){return n&&n instanceof Zr||PM(n)&&mu(n)}function Cf(n){return ee(n?.lift)}function oe(n){return e=>{if(Cf(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(n,e,t,r,i){return new Xo(n,e,t,r,i)}var Xo=class extends Zr{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Yi(){return oe((n,e)=>{let t=null;n._refCount++;let r=ae(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Zi=class extends le{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Cf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new je;let t=this.getSubject();e.add(this.source.subscribe(ae(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=je.EMPTY)}return e}refCount(){return Yi()(this)}};var FE=zi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class n extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Iu(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new FE}next(t){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Wi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?yf:(this.currentObservers=null,s.push(t),new je(()=>{this.currentObservers=null,Qr(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new le;return t.source=this,t}}return n.create=(e,t)=>new Iu(e,t),n})(),Iu=class extends ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:yf}};var lt=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var bf={now(){return(bf.delegate||Date).now()},delegate:void 0};var wu=class extends je{constructor(e,t){super()}schedule(e,t=0){return this}};var ea={setInterval(n,e,...t){let{delegate:r}=ea;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=ea;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ji=class extends wu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return ea.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&ea.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Qr(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Xi=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Xi.now=bf.now;var es=class extends Xi{constructor(e,t=Xi.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Df=new es(Ji);var Eu=class extends Ji{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Tu=class extends es{};var Sf=new Tu(Eu);var $t=new le(n=>n.complete());function LE(n){return n&&ee(n.schedule)}function VE(n){return n[n.length-1]}function UE(n){return ee(VE(n))?n.pop():void 0}function mr(n){return LE(VE(n))?n.pop():void 0}function Af(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function BE(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function jE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jr(n){return this instanceof Jr?(this.v=n,this):new Jr(n)}function $E(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(E){return Promise.resolve(E).then(_,p)}}function a(_,E){r[_]&&(i[_]=function(N){return new Promise(function(A,M){s.push([_,N,A,M])>1||u(_,N)})},E&&(i[_]=E(i[_])))}function u(_,E){try{l(r[_](E))}catch(N){m(s[0][3],N)}}function l(_){_.value instanceof Jr?Promise.resolve(_.value.v).then(h,p):m(s[0][2],_)}function h(_){u("next",_)}function p(_){u("throw",_)}function m(_,E){_(E),s.shift(),s.length&&u(s[0][0],s[0][1])}}function HE(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof jE=="function"?jE(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,u){o=n[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Cu=n=>n&&typeof n.length=="number"&&typeof n!="function";function bu(n){return ee(n?.then)}function Du(n){return ee(n[Qi])}function Su(n){return Symbol.asyncIterator&&ee(n?.[Symbol.asyncIterator])}function Au(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ru=xM();function Nu(n){return ee(n?.[Ru])}function Pu(n){return $E(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Jr(t.read());if(i)return yield Jr(void 0);yield yield Jr(r)}}finally{t.releaseLock()}})}function Mu(n){return ee(n?.getReader)}function Ze(n){if(n instanceof le)return n;if(n!=null){if(Du(n))return kM(n);if(Cu(n))return OM(n);if(bu(n))return FM(n);if(Su(n))return qE(n);if(Nu(n))return LM(n);if(Mu(n))return VM(n)}throw Au(n)}function kM(n){return new le(e=>{let t=n[Qi]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function OM(n){return new le(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function FM(n){return new le(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,_u)})}function LM(n){return new le(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function qE(n){return new le(e=>{UM(n,e).catch(t=>e.error(t))})}function VM(n){return qE(Pu(n))}function UM(n,e){var t,r,i,s;return BE(this,void 0,void 0,function*(){try{for(t=HE(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ot(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function _r(n,e=0){return oe((t,r)=>{t.subscribe(ae(r,i=>Ot(r,n,()=>r.next(i),e),()=>Ot(r,n,()=>r.complete(),e),i=>Ot(r,n,()=>r.error(i),e)))})}function yr(n,e=0){return oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function zE(n,e){return Ze(n).pipe(yr(e),_r(e))}function GE(n,e){return Ze(n).pipe(yr(e),_r(e))}function WE(n,e){return new le(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function KE(n,e){return new le(t=>{let r;return Ot(t,e,()=>{r=n[Ru](),Ot(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>ee(r?.return)&&r.return()})}function xu(n,e){if(!n)throw new Error("Iterable cannot be null");return new le(t=>{Ot(t,e,()=>{let r=n[Symbol.asyncIterator]();Ot(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function QE(n,e){return xu(Pu(n),e)}function YE(n,e){if(n!=null){if(Du(n))return zE(n,e);if(Cu(n))return WE(n,e);if(bu(n))return GE(n,e);if(Su(n))return xu(n,e);if(Nu(n))return KE(n,e);if(Mu(n))return QE(n,e)}throw Au(n)}function Be(n,e){return e?YE(n,e):Ze(n)}function q(...n){let e=mr(n);return Be(n,e)}function ts(n,e){let t=ee(n)?n:()=>n,r=i=>i.error(t());return new le(e?i=>e.schedule(r,0,i):r)}function Rf(n){return!!n&&(n instanceof le||ee(n.lift)&&ee(n.subscribe))}var Bn=zi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function re(n,e){return oe((t,r)=>{let i=0;t.subscribe(ae(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:jM}=Array;function BM(n,e){return jM(e)?n(...e):n(e)}function ZE(n){return re(e=>BM(n,e))}var{isArray:$M}=Array,{getPrototypeOf:HM,prototype:qM,keys:zM}=Object;function JE(n){if(n.length===1){let e=n[0];if($M(e))return{args:e,keys:null};if(GM(e)){let t=zM(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function GM(n){return n&&typeof n=="object"&&HM(n)===qM}function XE(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function ku(...n){let e=mr(n),t=UE(n),{args:r,keys:i}=JE(n);if(r.length===0)return Be([],e);let s=new le(WM(r,e,i?o=>XE(i,o):Dt));return t?s.pipe(ZE(t)):s}function WM(n,e,t=Dt){return r=>{eT(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)eT(e,()=>{let l=Be(n[u],e),h=!1;l.subscribe(ae(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function eT(n,e,t){n?Ot(t,n,e):e()}function tT(n,e,t,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},_=N=>l<r?E(N):u.push(N),E=N=>{s&&e.next(N),l++;let A=!1;Ze(t(N,h++)).subscribe(ae(e,M=>{i?.(M),s?_(M):e.next(M)},()=>{A=!0},void 0,()=>{if(A)try{for(l--;u.length&&l<r;){let M=u.shift();o?Ot(e,o,()=>E(M)):E(M)}m()}catch(M){e.error(M)}}))};return n.subscribe(ae(e,_,()=>{p=!0,m()})),()=>{a?.()}}function Ge(n,e,t=1/0){return ee(e)?Ge((r,i)=>re((s,o)=>e(r,s,i,o))(Ze(n(r,i))),t):(typeof e=="number"&&(t=e),oe((r,i)=>tT(r,i,n,t)))}function Nf(n=1/0){return Ge(Dt,n)}function nT(){return Nf(1)}function ns(...n){return nT()(Be(n,mr(n)))}function Ou(n){return new le(e=>{Ze(n()).subscribe(e)})}function St(n,e){return oe((t,r)=>{let i=0;t.subscribe(ae(r,s=>n.call(e,s,i++)&&r.next(s)))})}function vr(n){return oe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(ae(t,void 0,void 0,o=>{s=Ze(n(o,vr(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function rT(n,e,t,r,i){return(s,o)=>{let a=t,u=e,l=0;s.subscribe(ae(o,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function Xr(n,e){return ee(e)?Ge(n,e,1):Ge(n,1)}function Ir(n){return oe((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function $n(n){return n<=0?()=>$t:oe((e,t)=>{let r=0;e.subscribe(ae(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Pf(n){return re(()=>n)}function Fu(n,e=Dt){return n=n??KM,oe((t,r)=>{let i,s=!0;t.subscribe(ae(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function KM(n,e){return n===e}function Lu(n=QM){return oe((e,t)=>{let r=!1;e.subscribe(ae(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function QM(){return new Bn}function ta(n){return oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function bn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?St((i,s)=>n(i,s,r)):Dt,$n(1),t?Ir(e):Lu(()=>new Bn))}function Mf(n,e,t,r){return oe((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,u=E=>{a.forEach(E),E(s)},l=E=>u(N=>N.error(E)),h=0,p=!1,m=new Xo(s,E=>{try{let N=n(E),A=a.get(N);if(!A){a.set(N,A=r?r():new ut);let M=_(N,A);if(s.next(M),t){let L=ae(A,()=>{A.complete(),L?.unsubscribe()},void 0,void 0,()=>a.delete(N));m.add(Ze(t(M)).subscribe(L))}}A.next(o?o(E):E)}catch(N){l(N)}},()=>u(E=>E.complete()),l,()=>a.clear(),()=>(p=!0,h===0));i.subscribe(m);function _(E,N){let A=new le(M=>{h++;let L=N.subscribe(M);return()=>{L.unsubscribe(),--h===0&&p&&m.unsubscribe()}});return A.key=E,A}})}function rs(n){return n<=0?()=>$t:oe((e,t)=>{let r=[];e.subscribe(ae(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function xf(n,e){let t=arguments.length>=2;return r=>r.pipe(n?St((i,s)=>n(i,s,r)):Dt,rs(1),t?Ir(e):Lu(()=>new Bn))}function Vu(){return oe((n,e)=>{let t,r=!1;n.subscribe(ae(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function Uu(n,e){return oe(rT(n,e,arguments.length>=2,!0))}function is(...n){let e=mr(n);return oe((t,r)=>{(e?ns(n,t,e):ns(n,t)).subscribe(r)})}function Ft(n,e){return oe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(ae(r,u=>{i?.unsubscribe();let l=0,h=s++;Ze(n(u,h)).subscribe(i=ae(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function kf(n){return oe((e,t)=>{Ze(n).subscribe(ae(t,()=>t.complete(),Jo)),!t.closed&&e.subscribe(t)})}function nt(n,e,t){let r=ee(n)||e||t?{next:n,error:e,complete:t}:n;return r?oe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(ae(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Dt}var G=class extends Error{constructor(e,t){super(Ap(e,t)),this.code=e}};function Ap(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function pl(n){return{toString:n}.toString()}var ju="__parameters__";function YM(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function ZM(n,e,t){return pl(()=>{let r=YM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(ju)?u[ju]:Object.defineProperty(u,ju,{value:[]})[ju];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function De(n){for(let e in n)if(n[e]===De)return e;throw Error("Could not find renamed property on target object.")}function Ht(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Ht).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function iT(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var JM=De({__forward_ref__:De});function jT(n){return n.__forward_ref__=jT,n.toString=function(){return Ht(this())},n}function Kt(n){return BT(n)?n():n}function BT(n){return typeof n=="function"&&n.hasOwnProperty(JM)&&n.__forward_ref__===jT}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gl(n){return sT(n,HT)||sT(n,qT)}function $T(n){return gl(n)!==null}function sT(n,e){return n.hasOwnProperty(e)?n[e]:null}function XM(n){let e=n&&(n[HT]||n[qT]);return e||null}function oT(n){return n&&(n.hasOwnProperty(aT)||n.hasOwnProperty(ex))?n[aT]:null}var HT=De({\u0275prov:De}),aT=De({\u0275inj:De}),qT=De({ngInjectableDef:De}),ex=De({ngInjectorDef:De}),U=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zT(n){return n&&!!n.\u0275providers}var tx=De({\u0275cmp:De}),nx=De({\u0275dir:De}),rx=De({\u0275pipe:De}),ix=De({\u0275mod:De}),Wu=De({\u0275fac:De}),ia=De({__NG_ELEMENT_ID__:De}),cT=De({__NG_ENV_ID__:De});function GT(n){return typeof n=="string"?n:n==null?"":String(n)}function sx(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():GT(n)}function ox(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new G(-200,n)}function Rp(n,e){throw new G(-201,!1)}var ce=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ce||{}),qf;function WT(){return qf}function Lt(n){let e=qf;return qf=n,e}function KT(n,e,t){let r=gl(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ce.Optional)return null;if(e!==void 0)return e;Rp(n,"Injector")}var ax={},sa=ax,zf="__NG_DI_FLAG__",Ku="ngTempTokenPath",cx="ngTokenPath",ux=/\n/gm,lx="\u0275",uT="__source",cs;function dx(){return cs}function wr(n){let e=cs;return cs=n,e}function hx(n,e=ce.Default){if(cs===void 0)throw new G(-203,!1);return cs===null?KT(n,void 0,e):cs.get(n,e&ce.Optional?null:void 0,e)}function K(n,e=ce.Default){return(WT()||hx)(Kt(n),e)}function F(n,e=ce.Default){return K(n,ml(e))}function ml(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Gf(n){let e=[];for(let t=0;t<n.length;t++){let r=Kt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=ce.Default;for(let o=0;o<r.length;o++){let a=r[o],u=px(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(K(i,s))}else e.push(K(r))}return e}function fx(n,e){return n[zf]=e,n.prototype[zf]=e,n}function px(n){return n[zf]}function gx(n,e,t,r){let i=n[Ku];throw e[uT]&&i.unshift(e[uT]),n.message=mx(`
`+n.message,i,t,r),n[cx]=i,n[Ku]=null,n}function mx(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==lx?n.slice(2):n;let i=Ht(e);if(Array.isArray(e))i=e.map(Ht).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ht(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(ux,`
  `)}`}var Y=fx(ZM("Optional"),8);function ni(n,e){let t=n.hasOwnProperty(Wu);return t?n[Wu]:null}function Np(n,e){n.forEach(t=>Array.isArray(t)?Np(t,e):e(t))}function QT(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Qu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}var oa={},ls=[],ds=new U(""),YT=new U("",-1),ZT=new U(""),Yu=class{get(e,t=sa){if(t===sa){let r=new Error(`NullInjectorError: No provider for ${Ht(e)}!`);throw r.name="NullInjectorError",r}return t}},JT=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(JT||{}),Sn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Sn||{}),Cr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Cr||{});function _x(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function Wf(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];vx(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function yx(n){return n===3||n===4||n===6}function vx(n){return n.charCodeAt(0)===64}function Pp(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?lT(n,t,i,null,e[++r]):lT(n,t,i,null,null))}}return n}function lT(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var XT="ng-template";function Ix(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&_x(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(Mp(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function Mp(n){return n.type===4&&n.value!==XT}function wx(n,e,t){let r=n.type===4&&!t?XT:n.value;return e===r}function Ex(n,e,t){let r=4,i=n.attrs,s=i!==null?bx(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!cn(r)&&!cn(u))return!1;if(o&&cn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!wx(n,u,t)||u===""&&e.length===1){if(cn(r))return!1;o=!0}}else if(r&8){if(i===null||!Ix(n,i,u,t)){if(cn(r))return!1;o=!0}}else{let l=e[++a],h=Tx(u,i,Mp(n),t);if(h===-1){if(cn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(cn(r))return!1;o=!0}}}}return cn(r)||o}function cn(n){return(n&1)===0}function Tx(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Dx(e,n)}function Cx(n,e,t=!1){for(let r=0;r<e.length;r++)if(Ex(n,e[r],t))return!0;return!1}function bx(n){for(let e=0;e<n.length;e++){let t=n[e];if(yx(t))return e}return n.length}function Dx(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function dT(n,e){return n?":not("+e.trim()+")":e}function Sx(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!cn(o)&&(e+=dT(s,i),i=""),r=o,s=s||!cn(r);t++}return i!==""&&(e+=dT(s,i)),e}function Ax(n){return n.map(Sx).join(",")}function Rx(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!cn(i))break;i=s}r++}return{attrs:e,classes:t}}function _l(n){return pl(()=>{let e=sC(n),t=Me(V({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===JT.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Sn.Emulated,styles:n.styles||ls,_:null,schemas:n.schemas||null,tView:null,id:""});oC(t);let r=n.dependencies;return t.directiveDefs=fT(r,!1),t.pipeDefs=fT(r,!0),t.id=Mx(t),t})}function Nx(n){return ri(n)||tC(n)}function Px(n){return n!==null}function hT(n,e){if(n==null)return oa;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Cr.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Cr.None?[r,a]:r,e[s]=o):t[s]=r}return t}function xp(n){return pl(()=>{let e=sC(n);return oC(e),e})}function eC(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function ri(n){return n[tx]||null}function tC(n){return n[nx]||null}function nC(n){return n[rx]||null}function rC(n){let e=ri(n)||tC(n)||nC(n);return e!==null?e.standalone:!1}function iC(n,e){let t=n[ix]||null;if(!t&&e===!0)throw new Error(`Type ${Ht(n)} does not have '\u0275mod' property.`);return t}function sC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||oa,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||ls,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:hT(n.inputs,e),outputs:hT(n.outputs),debugInfo:null}}function oC(n){n.features?.forEach(e=>e(n))}function fT(n,e){if(!n)return null;let t=e?nC:Nx;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(Px)}function Mx(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Re(n){return{\u0275providers:n}}function xx(...n){return{\u0275providers:aC(!0,n),\u0275fromNgModule:!0}}function aC(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return Np(e,o=>{let a=o;Kf(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&cC(i,s),t}function cC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];kp(i,s=>{e(s,r)})}}function Kf(n,e,t,r){if(n=Kt(n),!n)return!1;let i=null,s=oT(n),o=!s&&ri(n);if(!s&&!o){let u=n.ngModule;if(s=oT(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Kf(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Np(s.imports,h=>{Kf(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&cC(l,e)}if(!a){let l=ni(i)||(()=>new i);e({provide:i,useFactory:l,deps:ls},i),e({provide:ZT,useValue:i,multi:!0},i),e({provide:ds,useValue:()=>K(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=n;kp(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function kp(n,e){for(let t of n)zT(t)&&(t=t.\u0275providers),Array.isArray(t)?kp(t,e):e(t)}var kx=De({provide:String,useValue:De});function uC(n){return n!==null&&typeof n=="object"&&kx in n}function Ox(n){return!!(n&&n.useExisting)}function Fx(n){return!!(n&&n.useFactory)}function Qf(n){return typeof n=="function"}var yl=new U(""),$u={},Lx={},Of;function Op(){return Of===void 0&&(Of=new Yu),Of}var Zt=class{},aa=class extends Zt{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zf(e,o=>this.processProvider(o)),this.records.set(YT,ss(void 0,this)),i.has("environment")&&this.records.set(Zt,ss(void 0,this));let s=this.records.get(yl);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ZT,ls,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=wr(this),r=Lt(void 0),i;try{return e()}finally{wr(t),Lt(r)}}get(e,t=sa,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(cT))return e[cT](this);r=ml(r);let i,s=wr(this),o=Lt(void 0);try{if(!(r&ce.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Hx(e)&&gl(e);l&&this.injectableDefInScope(l)?u=ss(Yf(e),$u):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ce.Self?Op():this.parent;return t=r&ce.Optional&&t===sa?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Ku]=a[Ku]||[]).unshift(Ht(e)),s)throw a;return gx(a,e,"R3InjectorError",this.source)}else throw a}finally{Lt(o),wr(s)}}resolveInjectorInitializers(){let e=me(null),t=wr(this),r=Lt(void 0),i;try{let s=this.get(ds,ls,ce.Self);for(let o of s)o()}finally{wr(t),Lt(r),me(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ht(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=Kt(e);let t=Qf(e)?e:Kt(e&&e.provide),r=Ux(e);if(!Qf(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ss(void 0,$u,!0),i.factory=()=>Gf(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=me(null);try{return t.value===$u&&(t.value=Lx,t.value=t.factory()),typeof t.value=="object"&&t.value&&$x(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Kt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Yf(n){let e=gl(n),t=e!==null?e.factory:ni(n);if(t!==null)return t;if(n instanceof U)throw new G(204,!1);if(n instanceof Function)return Vx(n);throw new G(204,!1)}function Vx(n){if(n.length>0)throw new G(204,!1);let t=XM(n);return t!==null?()=>t.factory(n):()=>new n}function Ux(n){if(uC(n))return ss(void 0,n.useValue);{let e=jx(n);return ss(e,$u)}}function jx(n,e,t){let r;if(Qf(n)){let i=Kt(n);return ni(i)||Yf(i)}else if(uC(n))r=()=>Kt(n.useValue);else if(Fx(n))r=()=>n.useFactory(...Gf(n.deps||[]));else if(Ox(n))r=()=>K(Kt(n.useExisting));else{let i=Kt(n&&(n.useClass||n.provide));if(Bx(n))r=()=>new i(...Gf(n.deps));else return ni(i)||Yf(i)}return r}function ss(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Bx(n){return!!n.deps}function $x(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Hx(n){return typeof n=="function"||typeof n=="object"&&n instanceof U}function Zf(n,e){for(let t of n)Array.isArray(t)?Zf(t,e):t&&zT(t)?Zf(t.\u0275providers,e):e(t)}function Gn(n,e){n instanceof aa&&n.assertNotDestroyed();let t,r=wr(n),i=Lt(void 0);try{return e()}finally{wr(r),Lt(i)}}function qx(){return WT()!==void 0||dx()!=null}function zx(n){return typeof n=="function"}var Wn=0,ue=1,te=2,Nt=3,un=4,hn=5,ca=6,pT=7,Qt=8,hs=9,Hn=10,Jt=11,ua=12,gT=13,ma=14,ln=15,fs=16,os=17,ps=18,vl=19,lC=20,Tr=21,Ff=22,Yt=23,dn=25,dC=1;var ii=7,Zu=8,Ju=9,Rt=10,Xu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Xu||{});function ei(n){return Array.isArray(n)&&typeof n[dC]=="object"}function Kn(n){return Array.isArray(n)&&n[dC]===!0}function hC(n){return(n.flags&4)!==0}function Fp(n){return n.componentOffset>-1}function fC(n){return(n.flags&1)===1}function _a(n){return!!n.template}function Jf(n){return(n[te]&512)!==0}var Xf=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function pC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Il(){return gC}function gC(n){return n.type.prototype.ngOnChanges&&(n.setInput=Wx),Gx}Il.ngInherit=!0;function Gx(){let n=_C(this),e=n?.current;if(e){let t=n.previous;if(t===oa)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function Wx(n,e,t,r,i){let s=this.declaredInputs[r],o=_C(n)||Kx(n,{previous:oa,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Xf(l&&l.currentValue,t,u===oa),pC(n,e,i,t)}var mC="__ngSimpleChanges__";function _C(n){return n[mC]||null}function Kx(n,e){return n[mC]=e}var mT=null;var Er=function(n,e,t){mT?.(n,e,t)},Qx="svg",Yx="math";function qn(n){for(;Array.isArray(n);)n=n[Wn];return n}function Zx(n,e){return qn(e[n])}function Qn(n,e){return qn(e[n.index])}function yC(n,e){return n.data[e]}function Jx(n,e){return n[e]}function ya(n,e){let t=e[n];return ei(t)?t:t[Wn]}function Lp(n){return(n[te]&128)===128}function Xx(n){return Kn(n[Nt])}function la(n,e){return e==null?null:n[e]}function vC(n){n[os]=0}function IC(n){n[te]&1024||(n[te]|=1024,Lp(n)&&El(n))}function wl(n){return!!(n[te]&9216||n[Yt]?.dirty)}function ep(n){n[Hn].changeDetectionScheduler?.notify(8),n[te]&64&&(n[te]|=1024),wl(n)&&El(n)}function El(n){n[Hn].changeDetectionScheduler?.notify(0);let e=si(n);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!Lp(e)));)e=si(e)}function wC(n,e){if((n[te]&256)===256)throw new G(911,!1);n[Tr]===null&&(n[Tr]=[]),n[Tr].push(e)}function ek(n,e){if(n[Tr]===null)return;let t=n[Tr].indexOf(e);t!==-1&&n[Tr].splice(t,1)}function si(n){let e=n[Nt];return Kn(e)?e[Nt]:e}var Ee={lFrame:PC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var EC=!1;function tk(){return Ee.lFrame.elementDepthCount}function nk(){Ee.lFrame.elementDepthCount++}function rk(){Ee.lFrame.elementDepthCount--}function TC(){return Ee.bindingsEnabled}function ik(){return Ee.skipHydrationRootTNode!==null}function sk(n){return Ee.skipHydrationRootTNode===n}function ok(){Ee.skipHydrationRootTNode=null}function st(){return Ee.lFrame.lView}function ys(){return Ee.lFrame.tView}function Yn(){let n=CC();for(;n!==null&&n.type===64;)n=n.parent;return n}function CC(){return Ee.lFrame.currentTNode}function ak(){let n=Ee.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function va(n,e){let t=Ee.lFrame;t.currentTNode=n,t.isParent=e}function bC(){return Ee.lFrame.isParent}function ck(){Ee.lFrame.isParent=!1}function DC(){return EC}function _T(n){EC=n}function uk(){let n=Ee.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function lk(n){return Ee.lFrame.bindingIndex=n}function SC(){return Ee.lFrame.bindingIndex++}function dk(){return Ee.lFrame.inI18n}function hk(n,e){let t=Ee.lFrame;t.bindingIndex=t.bindingRootIndex=n,tp(e)}function fk(){return Ee.lFrame.currentDirectiveIndex}function tp(n){Ee.lFrame.currentDirectiveIndex=n}function AC(n){Ee.lFrame.currentQueryIndex=n}function pk(n){let e=n[ue];return e.type===2?e.declTNode:e.type===1?n[hn]:null}function RC(n,e,t){if(t&ce.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ce.Host);)if(i=pk(s),i===null||(s=s[ma],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=Ee.lFrame=NC();return r.currentTNode=e,r.lView=n,!0}function Vp(n){let e=NC(),t=n[ue];Ee.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function NC(){let n=Ee.lFrame,e=n===null?null:n.child;return e===null?PC(n):e}function PC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function MC(){let n=Ee.lFrame;return Ee.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var xC=MC;function Up(){let n=MC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Tl(){return Ee.lFrame.selectedIndex}function oi(n){Ee.lFrame.selectedIndex=n}function gk(){return Ee.lFrame.currentNamespace}var kC=!0;function jp(){return kC}function Bp(n){kC=n}function mk(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=gC(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function $p(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Hu(n,e,t){OC(n,e,3,t)}function qu(n,e,t,r){(n[te]&3)===t&&OC(n,e,t,r)}function Lf(n,e){let t=n[te];(t&3)===e&&(t&=16383,t+=1,n[te]=t)}function OC(n,e,t,r){let i=r!==void 0?n[os]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[os]+=65536),(a<s||s==-1)&&(_k(n,t,e,u),n[os]=(n[os]&4294901760)+u+2),u++}function yT(n,e){Er(4,n,e);let t=me(null);try{e.call(n)}finally{me(t),Er(5,n,e)}}function _k(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[te]>>14<n[os]>>16&&(n[te]&3)===e&&(n[te]+=16384,yT(a,s)):yT(a,s)}var us=-1,da=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function yk(n){return n instanceof da}function vk(n){return(n.flags&8)!==0}function Ik(n){return(n.flags&16)!==0}var Vf={},np=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=ml(r);let i=this.injector.get(e,Vf,r);return i!==Vf||t===Vf?i:this.parentInjector.get(e,t,r)}};function FC(n){return n!==us}function el(n){return n&32767}function wk(n){return n>>16}function tl(n,e){let t=wk(n),r=e;for(;t>0;)r=r[ma],t--;return r}var rp=!0;function nl(n){let e=rp;return rp=n,e}var Ek=256,LC=Ek-1,VC=5,Tk=0,Dn={};function Ck(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ia)&&(r=t[ia]),r==null&&(r=t[ia]=Tk++);let i=r&LC,s=1<<i;e.data[n+(i>>VC)]|=s}function UC(n,e){let t=jC(n,e);if(t!==-1)return t;let r=e[ue];r.firstCreatePass&&(n.injectorIndex=e.length,Uf(r.data,n),Uf(e,null),Uf(r.blueprint,null));let i=Hp(n,e),s=n.injectorIndex;if(FC(i)){let o=el(i),a=tl(i,e),u=a[ue].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Uf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function jC(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Hp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=zC(i),r===null)return us;if(t++,i=i[ma],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return us}function bk(n,e,t){Ck(n,e,t)}function BC(n,e,t){if(t&ce.Optional||n!==void 0)return n;Rp(e,"NodeInjector")}function $C(n,e,t,r){if(t&ce.Optional&&r===void 0&&(r=null),!(t&(ce.Self|ce.Host))){let i=n[hs],s=Lt(void 0);try{return i?i.get(e,r,t&ce.Optional):KT(e,r,t&ce.Optional)}finally{Lt(s)}}return BC(r,e,t)}function HC(n,e,t,r=ce.Default,i){if(n!==null){if(e[te]&2048&&!(r&ce.Self)){let o=Nk(n,e,t,r,Dn);if(o!==Dn)return o}let s=qC(n,e,t,r,Dn);if(s!==Dn)return s}return $C(e,t,r,i)}function qC(n,e,t,r,i){let s=Ak(t);if(typeof s=="function"){if(!RC(e,n,r))return r&ce.Host?BC(i,t,r):$C(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ce.Optional))Rp(t);else return o}finally{xC()}}else if(typeof s=="number"){let o=null,a=jC(n,e),u=us,l=r&ce.Host?e[ln][hn]:null;for((a===-1||r&ce.SkipSelf)&&(u=a===-1?Hp(n,e):e[a+8],u===us||!IT(r,!1)?a=-1:(o=e[ue],a=el(u),e=tl(u,e)));a!==-1;){let h=e[ue];if(vT(s,a,h.data)){let p=Dk(a,e,t,o,r,l);if(p!==Dn)return p}u=e[a+8],u!==us&&IT(r,e[ue].data[a+8]===l)&&vT(s,a,e)?(o=h,a=el(u),e=tl(u,e)):a=-1}}return i}function Dk(n,e,t,r,i,s){let o=e[ue],a=o.data[n+8],u=r==null?Fp(a)&&rp:r!=o&&(a.type&3)!==0,l=i&ce.Host&&s===a,h=Sk(a,o,t,u,l);return h!==null?ha(e,o,h,a):Dn}function Sk(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,u=n.directiveStart,l=n.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let _=p;_<m;_++){let E=o[_];if(_<u&&t===E||_>=u&&E.type===t)return _}if(i){let _=o[u];if(_&&_a(_)&&_.type===t)return u}return null}function ha(n,e,t,r){let i=n[t],s=e.data;if(yk(i)){let o=i;o.resolving&&ox(sx(s[t]));let a=nl(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?Lt(o.injectImpl):null,h=RC(n,r,ce.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&mk(t,s[t],e)}finally{l!==null&&Lt(l),nl(a),o.resolving=!1,xC()}}return i}function Ak(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ia)?n[ia]:void 0;return typeof e=="number"?e>=0?e&LC:Rk:e}function vT(n,e,t){let r=1<<n;return!!(t[e+(n>>VC)]&r)}function IT(n,e){return!(n&ce.Self)&&!(n&ce.Host&&e)}var ti=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return HC(this._tNode,this._lView,e,ml(r),t)}};function Rk(){return new ti(Yn(),st())}function qp(n){return pl(()=>{let e=n.prototype.constructor,t=e[Wu]||ip(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[Wu]||ip(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function ip(n){return BT(n)?()=>{let e=ip(Kt(n));return e&&e()}:ni(n)}function Nk(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=qC(s,o,t,r|ce.Self,Dn);if(a!==Dn)return a;let u=s.parent;if(!u){let l=o[lC];if(l){let h=l.get(t,Dn,r);if(h!==Dn)return h}u=zC(o),o=o[ma]}s=u}return i}function zC(n){let e=n[ue],t=e.type;return t===2?e.declTNode:t===1?n[hn]:null}function wT(n,e=null,t=null,r){let i=GC(n,e,t,r);return i.resolveInjectorInitializers(),i}function GC(n,e=null,t=null,r,i=new Set){let s=[t||ls,xx(n)];return r=r||(typeof n=="object"?void 0:Ht(n)),new aa(s,e||Op(),r||null,i)}var ve=class n{static{this.THROW_IF_NOT_FOUND=sa}static{this.NULL=new Yu}static create(e,t){if(Array.isArray(e))return wT({name:""},t,e,"");{let r=e.name??"";return wT({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>K(YT)})}static{this.__NG_ELEMENT_ID__=-1}};var Pk=new U("");Pk.__NG_ELEMENT_ID__=n=>{let e=Yn();if(e===null)throw new G(204,!1);if(e.type&2)return e.value;if(n&ce.Optional)return null;throw new G(204,!1)};var Mk="ngOriginalError";function jf(n){return n[Mk]}var WC=!0,KC=(()=>{class n{static{this.__NG_ELEMENT_ID__=xk}static{this.__NG_ENV_ID__=t=>t}}return n})(),sp=class extends KC{constructor(e){super(),this._lView=e}onDestroy(e){return wC(this._lView,e),()=>ek(this._lView,e)}};function xk(){return new sp(st())}var vs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var op=class extends ut{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,qx()&&(this.destroyRef=F(KC,{optional:!0})??void 0,this.pendingTasks=F(vs,{optional:!0})??void 0)}emit(e){let t=me(null);try{super.next(e)}finally{me(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},At=op;function rl(...n){}function QC(n){let e,t;function r(){n=rl;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function ET(n){return queueMicrotask(()=>n()),()=>{n=rl}}var zp="isAngularZone",il=zp+"_ID",kk=0,W=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new At(!1),this.onMicrotaskEmpty=new At(!1),this.onStable=new At(!1),this.onError=new At(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=WC}=e;if(typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,Lk(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(zp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new G(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Ok,rl,rl);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Ok={};function Gp(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Fk(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){QC(()=>{n.callbackScheduled=!1,ap(n),n.isCheckStableRunning=!0,Gp(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ap(n)}function Lk(n){let e=()=>{Fk(n)},t=kk++;n._inner=n._inner.fork({name:"angular",properties:{[zp]:!0,[il]:t,[il+t]:!0},onInvokeTask:(r,i,s,o,a,u)=>{if(Vk(u))return r.invokeTask(s,o,a,u);try{return TT(n),r.invokeTask(s,o,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),CT(n)}},onInvoke:(r,i,s,o,a,u,l)=>{try{return TT(n),r.invoke(s,o,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Uk(u)&&e(),CT(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,ap(n),Gp(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function ap(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function TT(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function CT(n){n._nesting--,Gp(n)}var cp=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new At,this.onMicrotaskEmpty=new At,this.onStable=new At,this.onError=new At}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Vk(n){return YC(n,"__ignore_ng_zone__")}function Uk(n){return YC(n,"__scheduler_tick__")}function YC(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var zn=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&jf(e);for(;t&&jf(t);)t=jf(t);return t||null}},jk=new U("",{providedIn:"root",factory:()=>{let n=F(W),e=F(zn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function Bk(){return Wp(Yn(),st())}function Wp(n,e){return new Cl(Qn(n,e))}var Cl=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=Bk}}return n})();function ZC(n){return(n.flags&128)===128}var JC=new Map,$k=0;function Hk(){return $k++}function qk(n){JC.set(n[vl],n)}function up(n){JC.delete(n[vl])}var bT="__ngContext__";function ai(n,e){ei(e)?(n[bT]=e[vl],qk(e)):n[bT]=e}function XC(n){return tb(n[ua])}function eb(n){return tb(n[un])}function tb(n){for(;n!==null&&!Kn(n);)n=n[un];return n}var lp;function nb(n){lp=n}function zk(){if(lp!==void 0)return lp;if(typeof document<"u")return document;throw new G(210,!1)}var Kp=new U("",{providedIn:"root",factory:()=>Gk}),Gk="ng",Qp=new U(""),fn=new U("",{providedIn:"platform",factory:()=>"unknown"});var Yp=new U("",{providedIn:"root",factory:()=>zk().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Wk="h",Kk="b";var Qk=()=>null;function Zp(n,e,t=!1){return Qk(n,e,t)}var rb=!1,Yk=new U("",{providedIn:"root",factory:()=>rb});function ib(n){return n instanceof Function?n():n}var ci=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ci||{}),Zk;function Jp(n,e){return Zk(n,e)}function as(n,e,t,r,i){if(r!=null){let s,o=!1;Kn(r)?s=r:ei(r)&&(o=!0,r=r[Wn]);let a=qn(r);n===0&&t!==null?i==null?cb(e,t,a):sl(e,t,a,i||null,!0):n===1&&t!==null?sl(e,t,a,i||null,!0):n===2?hO(e,a,o):n===3&&e.destroyNode(a),s!=null&&pO(e,n,s,t,i)}}function Jk(n,e){return n.createText(e)}function Xk(n,e,t){n.setValue(e,t)}function sb(n,e,t){return n.createElement(e,t)}function eO(n,e){ob(n,e),e[Wn]=null,e[hn]=null}function tO(n,e,t,r,i,s){r[Wn]=i,r[hn]=e,Dl(n,r,t,1,i,s)}function ob(n,e){e[Hn].changeDetectionScheduler?.notify(9),Dl(n,e,e[Jt],2,null,null)}function nO(n){let e=n[ua];if(!e)return Bf(n[ue],n);for(;e;){let t=null;if(ei(e))t=e[ua];else{let r=e[Rt];r&&(t=r)}if(!t){for(;e&&!e[un]&&e!==n;)ei(e)&&Bf(e[ue],e),e=e[Nt];e===null&&(e=n),ei(e)&&Bf(e[ue],e),t=e&&e[un]}e=t}}function rO(n,e,t,r){let i=Rt+r,s=t.length;r>0&&(t[i-1][un]=e),r<s-Rt?(e[un]=t[i],QT(t,Rt+r,e)):(t.push(e),e[un]=null),e[Nt]=t;let o=e[fs];o!==null&&t!==o&&ab(o,e);let a=e[ps];a!==null&&a.insertView(n),ep(e),e[te]|=128}function ab(n,e){let t=n[Ju],r=e[Nt];if(ei(r))n[te]|=Xu.HasTransplantedViews;else{let i=r[Nt][ln];e[ln]!==i&&(n[te]|=Xu.HasTransplantedViews)}t===null?n[Ju]=[e]:t.push(e)}function Xp(n,e){let t=n[Ju],r=t.indexOf(e);t.splice(r,1)}function fa(n,e){if(n.length<=Rt)return;let t=Rt+e,r=n[t];if(r){let i=r[fs];i!==null&&i!==n&&Xp(i,r),e>0&&(n[t-1][un]=r[un]);let s=Qu(n,Rt+e);eO(r[ue],r);let o=s[ps];o!==null&&o.detachView(s[ue]),r[Nt]=null,r[un]=null,r[te]&=-129}return r}function bl(n,e){if(!(e[te]&256)){let t=e[Jt];t.destroyNode&&Dl(n,e,t,3,null,null),nO(e)}}function Bf(n,e){if(e[te]&256)return;let t=me(null);try{e[te]&=-129,e[te]|=256,e[Yt]&&pf(e[Yt]),sO(n,e),iO(n,e),e[ue].type===1&&e[Jt].destroy();let r=e[fs];if(r!==null&&Kn(e[Nt])){r!==e[Nt]&&Xp(r,e);let i=e[ps];i!==null&&i.detachView(n)}up(e)}finally{me(t)}}function iO(n,e){let t=n.cleanup,r=e[pT];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[pT]=null);let i=e[Tr];if(i!==null){e[Tr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function sO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof da)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Er(4,a,u);try{u.call(a)}finally{Er(5,a,u)}}else{Er(4,i,s);try{s.call(i)}finally{Er(5,i,s)}}}}}function oO(n,e,t){return aO(n,e.parent,t)}function aO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Wn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Sn.None||s===Sn.Emulated)return null}return Qn(r,t)}}function sl(n,e,t,r,i){n.insertBefore(e,t,r,i)}function cb(n,e,t){n.appendChild(e,t)}function DT(n,e,t,r,i){r!==null?sl(n,e,t,r,i):cb(n,e,t)}function ub(n,e){return n.parentNode(e)}function cO(n,e){return n.nextSibling(e)}function uO(n,e,t){return dO(n,e,t)}function lO(n,e,t){return n.type&40?Qn(n,t):null}var dO=lO,ST;function eg(n,e,t,r){let i=oO(n,r,e),s=e[Jt],o=r.parent||e[hn],a=uO(o,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)DT(s,i,t[u],a,!1);else DT(s,i,t,a,!1);ST!==void 0&&ST(s,r,e,t,i)}function na(n,e){if(e!==null){let t=e.type;if(t&3)return Qn(e,n);if(t&4)return dp(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return na(n,r);{let i=n[e.index];return Kn(i)?dp(-1,i):qn(i)}}else{if(t&128)return na(n,e.next);if(t&32)return Jp(e,n)()||qn(n[e.index]);{let r=lb(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=si(n[ln]);return na(i,r)}else return na(n,e.next)}}}return null}function lb(n,e){if(e!==null){let r=n[ln][hn],i=e.projection;return r.projection[i]}return null}function dp(n,e){let t=Rt+n+1;if(t<e.length){let r=e[t],i=r[ue].firstChild;if(i!==null)return na(r,i)}return e[ii]}function hO(n,e,t){n.removeChild(null,e,t)}function tg(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(o&&e===0&&(a&&ai(qn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)tg(n,e,t.child,r,i,s,!1),as(e,n,i,a,s);else if(u&32){let l=Jp(t,r),h;for(;h=l();)as(e,n,i,h,s);as(e,n,i,a,s)}else u&16?fO(n,e,r,t,i,s):as(e,n,i,a,s);t=o?t.projectionNext:t.next}}function Dl(n,e,t,r,i,s){tg(t,r,n.firstChild,e,i,s,!1)}function fO(n,e,t,r,i,s){let o=t[ln],u=o[hn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];as(e,n,i,h,s)}else{let l=u,h=o[Nt];ZC(r)&&(l.flags|=128),tg(n,e,l,h,i,s,!0)}}function pO(n,e,t,r,i){let s=t[ii],o=qn(t);s!==o&&as(e,n,r,s,i);for(let a=Rt;a<t.length;a++){let u=t[a];Dl(u[ue],u,n,e,r,s)}}function gO(n,e,t){n.setAttribute(e,"style",t)}function db(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function hb(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&Wf(n,e,r),i!==null&&db(n,e,i),s!==null&&gO(n,e,s)}var Ia={};function ng(n=1){fb(ys(),st(),Tl()+n,!1)}function fb(n,e,t,r){if(!r)if((e[te]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Hu(e,s,t)}else{let s=n.preOrderHooks;s!==null&&qu(e,s,0,t)}oi(t)}function wa(n,e=ce.Default){let t=st();if(t===null)return K(n,e);let r=Yn();return HC(r,t,Kt(n),e)}function pb(n,e,t,r,i,s){let o=me(null);try{let a=null;i&Cr.SignalBased&&(a=e[r][DE]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Cr.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):pC(e,a,r,s)}finally{me(o)}}function mO(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)oi(~i);else{let s=i,o=t[++r],a=t[++r];hk(o,s);let u=e[s];a(2,u)}}}finally{oi(-1)}}function Sl(n,e,t,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Wn]=i,p[te]=r|4|128|8|64,(l!==null||n&&n[te]&2048)&&(p[te]|=2048),vC(p),p[Nt]=p[ma]=n,p[Qt]=t,p[Hn]=o||n&&n[Hn],p[Jt]=a||n&&n[Jt],p[hs]=u||n&&n[hs]||null,p[hn]=s,p[vl]=Hk(),p[ca]=h,p[lC]=l,p[ln]=e.type==2?n[ln]:p,p}function Al(n,e,t,r,i){let s=n.data[e];if(s===null)s=_O(n,e,t,r,i),dk()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=ak();s.injectorIndex=o===null?-1:o.injectorIndex}return va(s,!0),s}function _O(n,e,t,r,i){let s=CC(),o=bC(),a=o?s:s&&s.parent,u=n.data[e]=EO(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function gb(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function mb(n,e,t,r,i){let s=Tl(),o=r&2;try{oi(-1),o&&e.length>dn&&fb(n,e,dn,!1),Er(o?2:0,i),t(r,i)}finally{oi(s),Er(o?3:1,i)}}function _b(n,e,t){if(hC(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let u=t[o];a.contentQueries(1,u,o)}}}finally{me(r)}}}function yb(n,e,t){TC()&&(DO(n,e,t,Qn(t,e)),(t.flags&64)===64&&Tb(n,e,t))}function vb(n,e,t=Qn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function Ib(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=rg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function rg(n,e,t,r,i,s,o,a,u,l,h){let p=dn+r,m=p+i,_=yO(p,m),E=typeof l=="function"?l():l;return _[ue]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:E,incompleteFirstPass:!1,ssrId:h}}function yO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Ia);return t}function vO(n,e,t,r){let s=r.get(Yk,rb)||t===Sn.ShadowDom,o=n.selectRootElement(e,s);return IO(o),o}function IO(n){wO(n)}var wO=()=>null;function EO(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return ik()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function AT(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Cr.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?RT(r,t,l,a,u):RT(r,t,l,a)}return r}function RT(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function TO(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=t?t.get(p):null,_=m?m.inputs:null,E=m?m.outputs:null;u=AT(0,p.inputs,h,u,_),l=AT(1,p.outputs,h,l,E);let N=u!==null&&o!==null&&!Mp(e)?OO(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function wb(n,e,t,r){if(TC()){let i=r===null?null:{"":-1},s=AO(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Eb(n,e,t,o,i,a),i&&RO(t,r,i)}t.mergedAttrs=Pp(t.mergedAttrs,t.attrs)}function Eb(n,e,t,r,i,s){for(let l=0;l<r.length;l++)bk(UC(t,e),n,r[l].type);PO(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=gb(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=Pp(t.mergedAttrs,h.hostAttrs),MO(n,t,e,u,h),NO(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}TO(n,t,s)}function CO(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;bO(o)!=a&&o.push(a),o.push(t,r,s)}}function bO(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function DO(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;Fp(t)&&xO(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||UC(t,e),ai(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let u=n.data[a],l=ha(e,n,a,t);if(ai(l,e),o!==null&&kO(e,a-i,l,u,t,o),_a(u)){let h=ya(t.index,e);h[Qt]=ha(e,n,a,t)}}}function Tb(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=fk();try{oi(s);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];tp(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&SO(u,l)}}finally{oi(-1),tp(o)}}function SO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function AO(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(Cx(e,o.selectors,!1))if(r||(r=[]),_a(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;hp(n,e,u)}else r.unshift(o),hp(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function hp(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function RO(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function NO(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;_a(e)&&(t[""]=n)}}function PO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function MO(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=ni(i.type,!0)),o=new da(s,_a(i),wa);n.blueprint[r]=o,t[r]=o,CO(n,e,r,gb(n,t,i.hostVars,Ia),i)}function xO(n,e,t){let r=Qn(e,n),i=Ib(t),s=n[Hn].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=Rl(n,Sl(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function kO(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];pb(r,t,u,l,h,p)}}function OO(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function Cb(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function bb(n,e){let t=n.contentQueries;if(t!==null){let r=me(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];AC(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function Rl(n,e){return n[ua]?n[gT][un]=e:n[ua]=e,n[gT]=e,e}function fp(n,e,t){AC(0);let r=me(null);try{e(n,t)}finally{me(r)}}function FO(n,e){let t=n[hs],r=t?t.get(zn,null):null;r&&r.handleError(e)}function Db(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],u=t[s++],l=e[o],h=n.data[o];pb(h,l,r,a,u,i)}}function LO(n,e,t){let r=Zx(e,n);Xk(n[Jt],r,t)}function VO(n,e){let t=ya(e,n),r=t[ue];UO(r,t);let i=t[Wn];i!==null&&t[ca]===null&&(t[ca]=Zp(i,t[hs])),ig(r,t,t[Qt])}function UO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function ig(n,e,t){Vp(e);try{let r=n.viewQuery;r!==null&&fp(1,r,t);let i=n.template;i!==null&&mb(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[ps]?.finishViewCreation(n),n.staticContentQueries&&bb(n,e),n.staticViewQueries&&fp(2,n.viewQuery,t);let s=n.components;s!==null&&jO(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[te]&=-5,Up()}}function jO(n,e){for(let t=0;t<e.length;t++)VO(n,e[t])}function Sb(n,e,t,r){let i=me(null);try{let s=e.tView,a=n[te]&4096?4096:16,u=Sl(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[fs]=l;let h=n[ps];return h!==null&&(u[ps]=h.createEmbeddedView(s)),ig(s,u,t),u}finally{me(i)}}function BO(n,e){let t=Rt+e;if(t<n.length)return n[t]}function ol(n,e){return!e||e.firstChild===null||ZC(n)}function sg(n,e,t,r=!0){let i=e[ue];if(rO(i,e,n,t),r){let o=dp(t,n),a=e[Jt],u=ub(a,n[ii]);u!==null&&tO(i,n[hn],a,e,u,o)}let s=e[ca];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function $O(n,e){let t=fa(n,e);return t!==void 0&&bl(t[ue],t),t}function al(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(qn(s)),Kn(s)&&HO(s,r);let o=t.type;if(o&8)al(n,e,t.child,r);else if(o&32){let a=Jp(t,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=lb(e,t);if(Array.isArray(a))r.push(...a);else{let u=si(e[ln]);al(u[ue],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function HO(n,e){for(let t=Rt;t<n.length;t++){let r=n[t],i=r[ue].firstChild;i!==null&&al(r[ue],r,i,e)}n[ii]!==n[Wn]&&e.push(n[ii])}var Ab=[];function qO(n){return n[Yt]??zO(n)}function zO(n){let e=Ab.pop()??Object.create(WO);return e.lView=n,e}function GO(n){n.lView[Yt]!==n&&(n.lView=null,Ab.push(n))}var WO=Me(V({},df),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{El(n.lView)},consumerOnSignalRead(){this.lView[Yt]=this}});function KO(n){let e=n[Yt]??Object.create(QO);return e.lView=n,e}var QO=Me(V({},df),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=si(n.lView);for(;e&&!Rb(e[ue]);)e=si(e);e&&IC(e)},consumerOnSignalRead(){this.lView[Yt]=this}});function Rb(n){return n.type!==2}var YO=100;function Nb(n,e=!0,t=0){let r=n[Hn],i=r.rendererFactory,s=!1;s||i.begin?.();try{ZO(n,t)}catch(o){throw e&&FO(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function ZO(n,e){let t=DC();try{_T(!0),pp(n,e);let r=0;for(;wl(n);){if(r===YO)throw new G(103,!1);r++,pp(n,1)}}finally{_T(t)}}function JO(n,e,t,r){let i=e[te];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Hn].inlineEffectRunner?.flush(),Vp(e);let a=!0,u=null,l=null;s||(Rb(n)?(l=qO(e),u=hf(l)):SE()===null?(a=!1,l=KO(e),u=hf(l)):e[Yt]&&(pf(e[Yt]),e[Yt]=null));try{vC(e),lk(n.bindingStartIndex),t!==null&&mb(n,e,t,2,r);let h=(i&3)===3;if(!s)if(h){let _=n.preOrderCheckHooks;_!==null&&Hu(e,_,null)}else{let _=n.preOrderHooks;_!==null&&qu(e,_,0,null),Lf(e,0)}if(o||XO(e),Pb(e,0),n.contentQueries!==null&&bb(n,e),!s)if(h){let _=n.contentCheckHooks;_!==null&&Hu(e,_)}else{let _=n.contentHooks;_!==null&&qu(e,_,1),Lf(e,1)}mO(n,e);let p=n.components;p!==null&&xb(e,p,0);let m=n.viewQuery;if(m!==null&&fp(2,m,r),!s)if(h){let _=n.viewCheckHooks;_!==null&&Hu(e,_)}else{let _=n.viewHooks;_!==null&&qu(e,_,2),Lf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Ff]){for(let _ of e[Ff])_();e[Ff]=null}s||(e[te]&=-73)}catch(h){throw s||El(e),h}finally{l!==null&&(AE(l,u),a&&GO(l)),Up()}}function Pb(n,e){for(let t=XC(n);t!==null;t=eb(t))for(let r=Rt;r<t.length;r++){let i=t[r];Mb(i,e)}}function XO(n){for(let e=XC(n);e!==null;e=eb(e)){if(!(e[te]&Xu.HasTransplantedViews))continue;let t=e[Ju];for(let r=0;r<t.length;r++){let i=t[r];IC(i)}}}function e1(n,e,t){let r=ya(e,n);Mb(r,t)}function Mb(n,e){Lp(n)&&pp(n,e)}function pp(n,e){let r=n[ue],i=n[te],s=n[Yt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&ff(s)),o||=!1,s&&(s.dirty=!1),n[te]&=-9217,o)JO(r,n,r.template,n[Qt]);else if(i&8192){Pb(n,1);let a=r.components;a!==null&&xb(n,a,1)}}function xb(n,e,t){for(let r=0;r<e.length;r++)e1(n,e[r],t)}function kb(n,e){let t=DC()?64:1088;for(n[Hn].changeDetectionScheduler?.notify(e);n;){n[te]|=t;let r=si(n);if(Jf(n)&&!r)return n;n=r}return null}var gs=class{get rootNodes(){let e=this._lView,t=e[ue];return al(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(e){this._lView[Qt]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Nt];if(Kn(e)){let t=e[Zu],r=t?t.indexOf(this):-1;r>-1&&(fa(e,r),Qu(t,r))}this._attachedToViewContainer=!1}bl(this._lView[ue],this._lView)}onDestroy(e){wC(this._lView,e)}markForCheck(){kb(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[te]&=-129}reattach(){ep(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,Nb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Jf(this._lView),t=this._lView[fs];t!==null&&!e&&Xp(t,this._lView),ob(this._lView[ue],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e;let t=Jf(this._lView),r=this._lView[fs];r!==null&&!t&&ab(r,this._lView),ep(this._lView)}};var jK=new RegExp(`^(\\d+)*(${Kk}|${Wk})*(.*)`);var t1=()=>null;function cl(n,e){return t1(n,e)}var ms=class{},Nl=new U("",{providedIn:"root",factory:()=>!1});var Ob=new U(""),Fb=new U(""),gp=class{},ul=class{};function n1(n){let e=Error(`No component factory found for ${Ht(n)}.`);return e[r1]=n,e}var r1="ngComponent";var mp=class{resolveComponentFactory(e){throw n1(e)}},br=class{static{this.NULL=new mp}},_s=class{};var i1=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function _p(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=iT(i,a);else if(s==2){let u=a,l=e[++o];r=iT(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var ll=class extends br{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=ri(e);return new pa(t,this.ngModule)}};function NT(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Cr.None;e?t.push({propName:o,templateName:r,isSignal:(a&Cr.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function s1(n){let e=n.toLowerCase();return e==="svg"?Qx:e==="math"?Yx:null}var pa=class extends ul{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=NT(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return NT(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=Ax(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof Zt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new np(e,o):e,u=a.get(_s,null);if(u===null)throw new G(407,!1);let l=a.get(i1,null),h=a.get(ms,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",E=r?vO(m,r,this.componentDef.encapsulation,a):sb(m,_,s1(_)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let A=null;E!==null&&(A=Zp(E,a,!0));let M=rg(0,null,null,1,0,null,null,null,null,null,null),L=Sl(null,M,null,N,null,null,p,m,a,null,A);Vp(L);let H,J,Ne=null;try{let X=this.componentDef,T,y=null;X.findHostDirectiveDefs?(T=[],y=new Map,X.findHostDirectiveDefs(X,T,y),T.push(X)):T=[X];let I=o1(L,E);Ne=a1(I,E,X,T,L,p,m),J=yC(M,dn),E&&l1(m,X,E,r),t!==void 0&&d1(J,this.ngContentSelectors,t),H=u1(Ne,X,T,y,L,[h1]),ig(M,L,null)}catch(X){throw Ne!==null&&up(Ne),up(L),X}finally{Up()}return new yp(this.componentType,H,Wp(J,L),L,J)}finally{me(s)}}},yp=class extends gp{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new gs(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Db(s[ue],s,i,e,t),this.previousInputValues.set(e,t);let o=ya(this._tNode.index,s);kb(o,1)}}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function o1(n,e){let t=n[ue],r=dn;return n[r]=e,Al(t,r,2,"#host",null)}function a1(n,e,t,r,i,s,o){let a=i[ue];c1(r,n,e,o);let u=null;e!==null&&(u=Zp(e,i[hs]));let l=s.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Sl(i,Ib(t),null,h,i[n.index],n,s,l,null,null,u);return a.firstCreatePass&&hp(a,n,r.length-1),Rl(i,p),i[n.index]=p}function c1(n,e,t,r){for(let i of n)e.mergedAttrs=Pp(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(_p(e,e.mergedAttrs,!0),t!==null&&hb(r,t,e))}function u1(n,e,t,r,i,s){let o=Yn(),a=i[ue],u=Qn(o,i);Eb(a,i,o,t,null,r);for(let h=0;h<t.length;h++){let p=o.directiveStart+h,m=ha(i,a,p,o);ai(m,i)}Tb(a,i,o),u&&ai(u,i);let l=ha(i,a,o.directiveStart+o.componentOffset,o);if(n[Qt]=i[Qt]=l,s!==null)for(let h of s)h(l,e);return _b(a,o,i),l}function l1(n,e,t,r){if(r)Wf(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=Rx(e.selectors[0]);i&&Wf(n,t,i),s&&s.length>0&&db(n,t,s.join(" "))}}function d1(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function h1(){let n=Yn();$p(st()[ue],n)}var Pl=(()=>{class n{static{this.__NG_ELEMENT_ID__=f1}}return n})();function f1(){let n=Yn();return g1(n,st())}var p1=Pl,Lb=class extends p1{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Wp(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){let e=Hp(this._hostTNode,this._hostLView);if(FC(e)){let t=tl(e,this._hostLView),r=el(e),i=t[ue].data[r+8];return new ti(i,t)}else return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=PT(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Rt}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=cl(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,ol(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!zx(e),a;if(o)a=t;else{let E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}let u=o?e:new pa(ri(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(Zt,null);N&&(s=N)}let h=ri(u.componentType??{}),p=cl(this._lContainer,h?.id??null),m=p?.firstChild??null,_=u.create(l,i,m,s);return this.insertImpl(_.hostView,a,ol(this._hostTNode,p)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(Xx(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Nt],l=new Lb(u,u[hn],u[Nt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return sg(o,i,s,r),e.attachToViewContainerRef(),QT($f(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=PT(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=fa(this._lContainer,t);r&&(Qu($f(this._lContainer),t),bl(r[ue],r))}detach(e){let t=this._adjustIndex(e,-1),r=fa(this._lContainer,t);return r&&Qu($f(this._lContainer),t)!=null?new gs(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function PT(n){return n[Zu]}function $f(n){return n[Zu]||(n[Zu]=[])}function g1(n,e){let t,r=e[n.index];return Kn(r)?t=r:(t=Cb(r,e,null,n),e[n.index]=t,Rl(e,t)),_1(t,e,n,r),new Lb(t,n,e)}function m1(n,e){let t=n[Jt],r=t.createComment(""),i=Qn(e,n),s=ub(t,i);return sl(t,s,r,cO(t,i),!1),r}var _1=I1,y1=()=>!1;function v1(n,e,t){return y1(n,e,t)}function I1(n,e,t,r){if(n[ii])return;let i;t.type&8?i=qn(r):i=m1(e,t),n[ii]=i}var MT=new Set;function Ml(n){MT.has(n)||(MT.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var Dr=class{},ga=class{};var vp=class extends Dr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ll(this);let s=iC(e);this._bootstrapComponents=ib(s.bootstrap),this._r3Injector=GC(e,t,[{provide:Dr,useValue:this},{provide:br,useValue:this.componentFactoryResolver},...r],Ht(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ip=class extends ga{constructor(e){super(),this.moduleType=e}create(e){return new vp(this.moduleType,e,[])}};var dl=class extends Dr{constructor(e){super(),this.componentFactoryResolver=new ll(this),this.instance=null;let t=new aa([...e.providers,{provide:Dr,useValue:this},{provide:br,useValue:this.componentFactoryResolver}],e.parent||Op(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function og(n,e,t=null){return new dl({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function w1(n,e,t){return n[e]=t}function ag(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function E1(n){return(n.flags&32)===32}function T1(n,e,t,r,i,s,o,a,u){let l=e.consts,h=Al(e,n,4,o||null,a||null);wb(e,t,h,la(l,u)),$p(e,h);let p=h.tView=rg(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function xT(n,e,t,r,i,s,o,a,u,l){let h=t+dn,p=e.firstCreatePass?T1(h,e,n,r,i,s,o,a,u):e.data[h];va(p,!1);let m=C1(e,n,p,t);jp()&&eg(e,n,m,p),ai(m,n);let _=Cb(m,n,m,p);return n[h]=_,Rl(n,_),v1(_,p,n),fC(p)&&yb(e,n,p),u!=null&&vb(n,p,l),p}var C1=b1;function b1(n,e,t,r){return Bp(!0),e[Jt].createComment("")}var ra=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ra||{}),D1=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),kT=class n{constructor(){this.ngZone=F(W),this.scheduler=F(ms),this.errorHandler=F(zn,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ra.EarlyRead,ra.Write,ra.MixedReadWrite,ra.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}};function S1(n,e,t,r){return ag(n,SC(),t)?e+GT(t)+r:Ia}function OT(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Db(n,t,s[o],o,r)}var wp=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),s=this.detach(i);if(i-r>1){let o=this.detach(r);this.attach(r,s),this.attach(i,o)}else this.attach(r,s)}move(e,t){this.attach(t,this.detach(e))}};function Hf(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function A1(n,e,t){let r,i,s=0,o=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;s<=o&&s<=u;){let l=n.at(s),h=e[s],p=Hf(s,l,s,h,t);if(p!==0){p<0&&n.updateValue(s,h),s++;continue}let m=n.at(o),_=e[u],E=Hf(o,m,u,_,t);if(E!==0){E<0&&n.updateValue(o,_),o--,u--;continue}let N=t(s,l),A=t(o,m),M=t(s,h);if(Object.is(M,A)){let L=t(u,_);Object.is(L,N)?(n.swap(s,o),n.updateValue(o,_),u--,o--):n.move(o,s),n.updateValue(s,h),s++;continue}if(r??=new hl,i??=LT(n,s,o,t),Ep(n,r,s,M))n.updateValue(s,h),s++,o++;else if(i.has(M))r.set(N,n.detach(s)),o--;else{let L=n.create(s,e[s]);n.attach(s,L),s++,o++}}for(;s<=u;)FT(n,r,t,s,e[s]),s++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&s<=o;){let h=n.at(s),p=l.value,m=Hf(s,h,s,p,t);if(m!==0)m<0&&n.updateValue(s,p),s++,l=u.next();else{r??=new hl,i??=LT(n,s,o,t);let _=t(s,p);if(Ep(n,r,s,_))n.updateValue(s,p),s++,o++,l=u.next();else if(!i.has(_))n.attach(s,n.create(s,p)),s++,o++,l=u.next();else{let E=t(s,h);r.set(E,n.detach(s)),o--}}}for(;!l.done;)FT(n,r,t,n.length,l.value),l=u.next()}for(;s<=o;)n.destroy(n.detach(o--));r?.forEach(u=>{n.destroy(u)})}function Ep(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function FT(n,e,t,r,i){if(Ep(n,e,r,t(r,i)))n.updateValue(r,i);else{let s=n.create(r,i);n.attach(r,s)}}function LT(n,e,t,r){let i=new Set;for(let s=e;s<=t;s++)i.add(r(s,n.at(s)));return i}var hl=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};var Tp=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-Rt}};function Vb(n,e){return e}var Cp=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Ub(n,e,t,r,i,s,o,a,u,l,h,p,m){Ml("NgControlFlow");let _=st(),E=ys(),N=u!==void 0,A=st(),M=a?o.bind(A[ln][Qt]):o,L=new Cp(N,M);A[dn+n]=L,xT(_,E,n+1,e,t,r,i,la(E.consts,s)),N&&xT(_,E,n+2,u,l,h,p,la(E.consts,m))}var bp=class extends wp{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Rt}at(e){return this.getLView(e)[Qt].$implicit}attach(e,t){let r=t[ca];this.needsIndexUpdate||=e!==this.length,sg(this.lContainer,t,e,ol(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,R1(this.lContainer,e)}create(e,t){let r=cl(this.lContainer,this.templateTNode.tView.ssrId),i=Sb(this.hostLView,this.templateTNode,new Tp(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){bl(e[ue],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Qt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Qt].$index=e}getLView(e){return N1(this.lContainer,e)}};function jb(n){let e=me(null),t=Tl();try{let r=st(),i=r[ue],s=r[t],o=t+1,a=VT(r,o);if(s.liveCollection===void 0){let l=UT(i,o);s.liveCollection=new bp(a,r,l)}else s.liveCollection.reset();let u=s.liveCollection;if(A1(u,n,s.trackByFn),u.updateIndexes(),s.hasEmptyBlock){let l=SC(),h=u.length===0;if(ag(r,l,h)){let p=t+2,m=VT(r,p);if(h){let _=UT(i,p),E=cl(m,_.tView.ssrId),N=Sb(r,_,void 0,{dehydratedView:E});sg(m,N,0,ol(_,E))}else $O(m,0)}}}finally{me(e)}}function VT(n,e){return n[e]}function R1(n,e){return fa(n,e)}function N1(n,e){return BO(n,e)}function UT(n,e){return yC(n,e)}function P1(n,e,t,r,i,s){let o=e.consts,a=la(o,i),u=Al(e,n,2,r,a);return wb(e,t,u,la(o,s)),u.attrs!==null&&_p(u,u.attrs,!1),u.mergedAttrs!==null&&_p(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function Ar(n,e,t,r){let i=st(),s=ys(),o=dn+n,a=i[Jt],u=s.firstCreatePass?P1(o,s,i,e,t,r):s.data[o],l=M1(s,i,u,a,e,n);i[o]=l;let h=fC(u);return va(u,!0),hb(a,l,u),!E1(u)&&jp()&&eg(s,i,l,u),tk()===0&&ai(l,i),nk(),h&&(yb(s,i,u),_b(s,u,i)),r!==null&&vb(i,u),Ar}function Rr(){let n=Yn();bC()?ck():(n=n.parent,va(n,!1));let e=n;sk(e)&&ok(),rk();let t=ys();return t.firstCreatePass&&($p(t,n),hC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&vk(e)&&OT(t,e,st(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Ik(e)&&OT(t,e,st(),e.stylesWithoutHost,!1),Rr}function Ea(n,e,t,r){return Ar(n,e,t,r),Rr(),Ea}var M1=(n,e,t,r,i,s)=>(Bp(!0),sb(r,i,gk()));var fl="en-US";var x1=fl;function k1(n){typeof n=="string"&&(x1=n.toLowerCase().replace(/_/g,"-"))}function O1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function Is(n,e=""){let t=st(),r=ys(),i=n+dn,s=r.firstCreatePass?Al(r,i,1,e,null):r.data[i],o=F1(r,t,s,e,n);t[i]=o,jp()&&eg(r,t,o,s),va(s,!1)}var F1=(n,e,t,r,i)=>(Bp(!0),Jk(e[Jt],r));function cg(n){return Bb("",n,""),cg}function Bb(n,e,t){let r=st(),i=S1(r,n,e,t);return i!==Ia&&LO(r,Tl(),i),Bb}var L1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=aC(!1,t.type),i=r.length>0?og([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(K(Zt))})}}return n})();function xl(n){Ml("NgStandalone"),n.getStandaloneInjector=e=>e.get(L1).getOrCreateStandaloneInjector(n)}function V1(n,e){let t=n[e];return t===Ia?void 0:t}function U1(n,e,t,r,i,s){let o=e+t;return ag(n,o,i)?w1(n,o+1,s?r.call(s,i):r(i)):V1(n,o+1)}function $b(n,e){let t=ys(),r,i=n+dn;t.firstCreatePass?(r=j1(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=ni(r.type,!0)),o,a=Lt(wa);try{let u=nl(!1),l=s();return nl(u),O1(t,st(),i,l),l}finally{Lt(a)}}function j1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Hb(n,e,t){let r=n+dn,i=st(),s=Jx(i,r);return B1(i,r)?U1(i,uk(),e,s.transform,t,s):s.transform(t)}function B1(n,e){return n[ue].data[e].pure}var Sr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},qb=new Sr("18.2.13");var kl=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var zb=new U("");function ws(n){return!!n&&typeof n.then=="function"}function ug(n){return!!n&&typeof n.subscribe=="function"}var Nr=new U(""),Gb=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(Nr,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(ws(s))t.push(s);else if(ug(s)){let o=new Promise((a,u)=>{s.subscribe({complete:a,error:u})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),lg=new U("");function $1(){RE(()=>{throw new G(600,!1)})}function H1(n){return n.isBoundToModule}var q1=10;function z1(n,e,t){try{let r=t();return ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var ui=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(jk),this.afterRenderManager=F(D1),this.zonelessEnabled=F(Nl),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ut,this.afterTick=new ut,this.componentTypes=[],this.components=[],this.isStable=F(vs).hasPendingTasks.pipe(re(t=>!t)),this._injector=F(Zt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof ul;if(!this._injector.get(Gb).done){let m=!i&&rC(t),_=!1;throw new G(405,_)}let o;i?o=t:o=this._injector.get(br).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=H1(o)?void 0:this._injector.get(Dr),u=r||o.selector,l=o.create(ve.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(zb,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),zu(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new G(101,!1);let t=me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,me(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(_s,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<q1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)G1(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>wl(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;zu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(lg,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>zu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new G(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function G1(n,e,t,r){if(!t&&!wl(n))return;Nb(n,e,t&&!r?0:1)}var Dp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},dg=(()=>{class n{compileModuleSync(t){return new Ip(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=iC(t),s=ib(i.declarations).reduce((o,a)=>{let u=ri(a);return u&&o.push(new pa(u)),o},[]);return new Dp(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var W1=(()=>{class n{constructor(){this.zone=F(W),this.changeDetectionScheduler=F(ms),this.applicationRef=F(ui)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),K1=new U("",{factory:()=>!1});function Wb({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new W(Me(V({},Qb()),{scheduleInRootZone:t})),[{provide:W,useFactory:n},{provide:ds,multi:!0,useFactory:()=>{let r=F(W1,{optional:!0});return()=>r.initialize()}},{provide:ds,multi:!0,useFactory:()=>{let r=F(Q1);return()=>{r.initialize()}}},e===!0?{provide:Ob,useValue:!0}:[],{provide:Fb,useValue:t??WC}]}function Kb(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=Wb({ngZoneFactory:()=>{let i=Qb(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Ml("NgZone_CoalesceEvent"),new W(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Re([{provide:K1,useValue:!0},{provide:Nl,useValue:!1},r])}function Qb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var Q1=(()=>{class n{constructor(){this.subscription=new je,this.initialized=!1,this.zone=F(W),this.pendingTasks=F(vs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{W.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{W.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Y1=(()=>{class n{constructor(){this.appRef=F(ui),this.taskService=F(vs),this.ngZone=F(W),this.zonelessEnabled=F(Nl),this.disableScheduling=F(Ob,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new je,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(il):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(Fb,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof cp||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ET:QC;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(il+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ET(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Z1(){return typeof $localize<"u"&&$localize.locale||fl}var hg=new U("",{providedIn:"root",factory:()=>F(hg,ce.Optional|ce.SkipSelf)||Z1()});var Sp=new U("");function Bu(n){return!n.moduleRef}function J1(n){let e=Bu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(W);return t.run(()=>{Bu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(zn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Bu(n)){let s=()=>e.destroy(),o=n.platformInjector.get(Sp);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(Sp);o.add(s),n.moduleRef.onDestroy(()=>{zu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return z1(r,t,()=>{let s=e.get(Gb);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(hg,fl);if(k1(o||fl),Bu(n)){let a=e.get(ui);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return X1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function X1(n,e){let t=n.injector.get(ui);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new G(-403,!1);e.push(n)}var Gu=null;function eF(n=[],e){return ve.create({name:e,providers:[{provide:yl,useValue:"platform"},{provide:Sp,useValue:new Set([()=>Gu=null])},...n]})}function tF(n=[]){if(Gu)return Gu;let e=eF(n);return Gu=e,$1(),nF(e),e}function nF(n){n.get(Qp,null)?.forEach(t=>t())}var Es=(()=>{class n{static{this.__NG_ELEMENT_ID__=rF}}return n})();function rF(n){return iF(Yn(),st(),(n&16)===16)}function iF(n,e,t){if(Fp(n)&&!t){let r=ya(n.index,e);return new gs(r,r)}else if(n.type&175){let r=e[ln];return new gs(r,e)}return null}function Yb(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=tF(r),s=[Wb({}),{provide:ms,useExisting:Y1},...t||[]],o=new dl({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return J1({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function fg(n){let e=me(null);try{return n()}finally{me(e)}}var eD=null;function Cs(){return eD}function tD(n){eD??=n}var Ol=class{};var Xt=new U(""),nD=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(uF),providedIn:"platform"})}}return n})();var uF=(()=>{class n extends nD{constructor(){super(),this._doc=F(Xt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cs().getBaseHref(this._doc)}onPopState(t){let r=Cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Cs().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function rD(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Zb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function li(n){return n&&n[0]!=="?"?"?"+n:n}var Ll=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(iD),providedIn:"root"})}}return n})(),lF=new U(""),iD=(()=>{class n extends Ll{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Xt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return rD(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+li(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+li(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+li(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(K(nD),K(lF,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ta=(()=>{class n{constructor(t){this._subject=new At,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=fF(Zb(Jb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+li(r))}normalize(t){return n.stripTrailingSlash(hF(this._basePath,Jb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+li(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=li}static{this.joinWithSlash=rD}static{this.stripTrailingSlash=Zb}static{this.\u0275fac=function(r){return new(r||n)(K(Ll))}}static{this.\u0275prov=z({token:n,factory:()=>dF(),providedIn:"root"})}}return n})();function dF(){return new Ta(K(Ll))}function hF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Jb(n){return n.replace(/\/index.html$/,"")}function fF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function sD(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}function pF(n,e){return new G(2100,!1)}var pg=class{createSubscription(e,t){return fg(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){fg(()=>e.unsubscribe())}},gg=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},gF=new gg,mF=new pg,oD=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(ws(t))return gF;if(ug(t))return mF;throw pF(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(wa(Es,16))}}static{this.\u0275pipe=eC({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var yg="browser",_F="server";function vg(n){return n===yg}function Ig(n){return n===_F}var Fl=class{};var Tg=class extends Ol{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Cg=class n extends Tg{static makeCurrent(){tD(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=yF();return t==null?null:vF(t)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return sD(document.cookie,e)}},Ca=null;function yF(){return Ca=Ca||document.querySelector("base"),Ca?Ca.getAttribute("href"):null}function vF(n){return new URL(n,document.baseURI).pathname}var IF=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),bg=new U(""),lD=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new G(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(K(bg),K(W))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Vl=class{constructor(e){this._doc=e}},wg="ng-app-id",dD=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ig(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${wg}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(wg),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(wg,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(K(Xt),K(Kp),K(Yp,8),K(fn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Eg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Sg=/%COMP%/g,hD="%COMP%",wF=`_nghost-${hD}`,EF=`_ngcontent-${hD}`,TF=!0,CF=new U("",{providedIn:"root",factory:()=>TF});function bF(n){return EF.replace(Sg,n)}function DF(n){return wF.replace(Sg,n)}function fD(n,e){return e.map(t=>t.replace(Sg,n))}var aD=(()=>{class n{constructor(t,r,i,s,o,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Ig(a),this.defaultRenderer=new ba(t,o,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Sn.ShadowDom&&(r=Me(V({},r),{encapsulation:Sn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ul?i.applyToHost(t):i instanceof Da&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Sn.Emulated:s=new Ul(u,l,r,this.appId,h,o,a,p);break;case Sn.ShadowDom:return new Dg(u,l,t,r,o,a,this.nonce,p);default:s=new Da(u,l,r,h,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(K(lD),K(dD),K(Kp),K(CF),K(Xt),K(fn),K(W),K(Yp))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),ba=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Eg[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cD(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(cD(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=Eg[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Eg[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ci.DashCase|ci.Important)?e.style.setProperty(t,r,i&ci.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ci.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Cs().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cD(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Dg=class extends ba{constructor(e,t,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=fD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Da=class extends ba{constructor(e,t,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?fD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ul=class extends Da{constructor(e,t,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,t,r,s,o,a,u,l),this.contentAttr=bF(l),this.hostAttr=DF(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},SF=(()=>{class n extends Vl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(K(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),uD=["alt","control","meta","shift"],AF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},RF={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},NF=(()=>{class n extends Vl{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cs().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),uD.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let u={};return u.domEventName=i,u.fullKey=o,u}static matchEventFullKeyCode(t,r){let i=AF[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),uD.forEach(o=>{if(o!==i){let a=RF[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(K(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function pD(n,e){return Yb(V({rootComponent:n},PF(e)))}function PF(n){return{appProviders:[...FF,...n?.providers??[]],platformProviders:OF}}function MF(){Cg.makeCurrent()}function xF(){return new zn}function kF(){return nb(document),document}var OF=[{provide:fn,useValue:yg},{provide:Qp,useValue:MF,multi:!0},{provide:Xt,useFactory:kF,deps:[]}];var FF=[{provide:yl,useValue:"root"},{provide:zn,useFactory:xF,deps:[]},{provide:bg,useClass:SF,multi:!0,deps:[Xt,W,fn]},{provide:bg,useClass:NF,multi:!0,deps:[Xt]},aD,dD,lD,{provide:_s,useExisting:aD},{provide:Fl,useClass:IF,deps:[]},[]];var jl=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(K(Xt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var ie="primary",qa=Symbol("RouteTitle"),Mg=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ns(n){return new Mg(n)}function LF(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function VF(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!An(n[t],e[t]))return!1;return!0}function An(n,e){let t=n?xg(n):void 0,r=e?xg(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!TD(n[i],e[i]))return!1;return!0}function xg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function TD(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function CD(n){return n.length>0?n[n.length-1]:null}function Pr(n){return Rf(n)?n:ws(n)?Be(Promise.resolve(n)):q(n)}var UF={exact:DD,subset:SD},bD={exact:jF,subset:BF,ignored:()=>!0};function mD(n,e,t){return UF[t.paths](n.root,e.root,t.matrixParams)&&bD[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function jF(n,e){return An(n,e)}function DD(n,e,t){if(!hi(n.segments,e.segments)||!Hl(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!DD(n.children[r],e.children[r],t))return!1;return!0}function BF(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>TD(n[t],e[t]))}function SD(n,e,t){return AD(n,e,e.segments,t)}function AD(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!hi(i,t)||e.hasChildren()||!Hl(i,t,r))}else if(n.segments.length===t.length){if(!hi(n.segments,t)||!Hl(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!SD(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!hi(n.segments,i)||!Hl(n.segments,i,r)||!n.children[ie]?!1:AD(n.children[ie],e,s,r)}}function Hl(n,e,t){return e.every((r,i)=>bD[t](n[i].parameters,r.parameters))}var Jn=class{constructor(e=new Te([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ns(this.queryParams),this._queryParamMap}toString(){return qF.serialize(this)}},Te=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ql(this)}},di=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ns(this.parameters),this._parameterMap}toString(){return ND(this)}};function $F(n,e){return hi(n,e)&&n.every((t,r)=>An(t.parameters,e[r].parameters))}function hi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function HF(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ie&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ie&&(t=t.concat(e(i,r)))}),t}var im=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new xa,providedIn:"root"})}}return n})(),xa=class{parse(e){let t=new Og(e);return new Jn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Sa(e.root,!0)}`,r=WF(e.queryParams),i=typeof e.fragment=="string"?`#${zF(e.fragment)}`:"";return`${t}${r}${i}`}},qF=new xa;function ql(n){return n.segments.map(e=>ND(e)).join("/")}function Sa(n,e){if(!n.hasChildren())return ql(n);if(e){let t=n.children[ie]?Sa(n.children[ie],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==ie&&r.push(`${i}:${Sa(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=HF(n,(r,i)=>i===ie?[Sa(n.children[ie],!1)]:[`${i}:${Sa(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ie]!=null?`${ql(n)}/${t[0]}`:`${ql(n)}/(${t.join("//")})`}}function RD(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bl(n){return RD(n).replace(/%3B/gi,";")}function zF(n){return encodeURI(n)}function kg(n){return RD(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zl(n){return decodeURIComponent(n)}function _D(n){return zl(n.replace(/\+/g,"%20"))}function ND(n){return`${kg(n.path)}${GF(n.parameters)}`}function GF(n){return Object.entries(n).map(([e,t])=>`;${kg(e)}=${kg(t)}`).join("")}function WF(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Bl(t)}=${Bl(i)}`).join("&"):`${Bl(t)}=${Bl(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var KF=/^[^\/()?;#]+/;function Ag(n){let e=n.match(KF);return e?e[0]:""}var QF=/^[^\/()?;=#]+/;function YF(n){let e=n.match(QF);return e?e[0]:""}var ZF=/^[^=?&#]+/;function JF(n){let e=n.match(ZF);return e?e[0]:""}var XF=/^[^&#]+/;function eL(n){let e=n.match(XF);return e?e[0]:""}var Og=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ie]=new Te(e,t)),r}parseSegment(){let e=Ag(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new di(zl(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=YF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Ag(this.remaining);i&&(r=i,this.capture(r))}e[zl(t)]=zl(r)}parseQueryParam(e){let t=JF(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=eL(this.remaining);o&&(r=o,this.capture(r))}let i=_D(t),s=_D(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ag(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ie);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ie]:new Te([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function PD(n){return n.segments.length>0?new Te([],{[ie]:n}):n}function MD(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=MD(i);if(r===ie&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Te(n.segments,e);return tL(t)}function tL(n){if(n.numberOfChildren===1&&n.children[ie]){let e=n.children[ie];return new Te(n.segments.concat(e.segments),e.children)}return n}function ka(n){return n instanceof Jn}function nL(n,e,t=null,r=null){let i=xD(n);return kD(i,e,t,r)}function xD(n){let e;function t(s){let o={};for(let u of s.children){let l=t(u);o[u.outlet]=l}let a=new Te(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=PD(r);return e??i}function kD(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Rg(i,i,i,t,r);let s=rL(e);if(s.toRoot())return Rg(i,i,new Te([],{}),t,r);let o=iL(s,i,n),a=o.processChildren?Na(o.segmentGroup,o.index,s.commands):FD(o.segmentGroup,o.index,s.commands);return Rg(i,o.segmentGroup,a,t,r)}function Gl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Oa(n){return typeof n=="object"&&n!=null&&n.outlets}function Rg(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=OD(n,e,t);let a=PD(MD(o));return new Jn(a,s,i)}function OD(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=OD(s,e,t)}),new Te(n.segments,r)}var Wl=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Gl(r[0]))throw new G(4003,!1);let i=r.find(Oa);if(i&&i!==CD(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Wl(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Wl(t,e,r)}var Ss=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function iL(n,e,t){if(n.isAbsolute)return new Ss(e,!0,0);if(!t)return new Ss(e,!1,NaN);if(t.parent===null)return new Ss(t,!0,0);let r=Gl(n.commands[0])?0:1,i=t.segments.length-1+r;return sL(t,i,n.numberOfDoubleDots)}function sL(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new Ss(r,!1,i-s)}function oL(n){return Oa(n[0])?n[0].outlets:{[ie]:n}}function FD(n,e,t){if(n??=new Te([],{}),n.segments.length===0&&n.hasChildren())return Na(n,e,t);let r=aL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Te(n.segments.slice(0,r.pathIndex),{});return s.children[ie]=new Te(n.segments.slice(r.pathIndex),n.children),Na(s,0,i)}else return r.match&&i.length===0?new Te(n.segments,{}):r.match&&!n.hasChildren()?Fg(n,e,t):r.match?Na(n,0,i):Fg(n,e,t)}function Na(n,e,t){if(t.length===0)return new Te(n.segments,{});{let r=oL(t),i={};if(Object.keys(r).some(s=>s!==ie)&&n.children[ie]&&n.numberOfChildren===1&&n.children[ie].segments.length===0){let s=Na(n.children[ie],e,t);return new Te(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=FD(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Te(n.segments,i)}}function aL(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Oa(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!vD(u,l,o))return s;r+=2}else{if(!vD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Fg(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Oa(s)){let u=cL(s.outlets);return new Te(r,u)}if(i===0&&Gl(t[0])){let u=n.segments[e];r.push(new di(u.path,yD(t[0]))),i++;continue}let o=Oa(s)?s.outlets[ie]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Gl(a)?(r.push(new di(o,yD(a))),i+=2):(r.push(new di(o,{})),i++)}return new Te(r,{})}function cL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Fg(new Te([],{}),0,r))}),e}function yD(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function vD(n,e,t){return n==t.path&&An(e,t.parameters)}var Pa="imperative",dt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(dt||{}),en=class{constructor(e,t){this.id=e,this.url=t}},Fa=class extends en{constructor(e,t,r="imperative",i=null){super(e,t),this.type=dt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},fi=class extends en{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=dt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},zt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(zt||{}),Lg=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Lg||{}),Zn=class extends en{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},pi=class extends en{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=dt.NavigationSkipped}},La=class extends en{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=dt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kl=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vg=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ug=class extends en{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=dt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},jg=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bg=class extends en{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=dt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$g=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hg=class{constructor(e){this.route=e,this.type=dt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qg=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zg=class{constructor(e){this.snapshot=e,this.type=dt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gg=class{constructor(e){this.snapshot=e,this.type=dt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Va=class{constructor(e){this.snapshot=e,this.type=dt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ua=class{},Ps=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function uL(n,e){return n.providers&&!n._injector&&(n._injector=og(n.providers,e,`Route: ${n.path}`)),n._injector??e}function pn(n){return n.outlet||ie}function lL(n,e){let t=n.filter(r=>pn(r)===e);return t.push(...n.filter(r=>pn(r)!==e)),t}function za(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Wg=class{get injector(){return za(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new td(this.rootInjector),this.attachRef=null}},td=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Wg(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(K(Zt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ql=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Kg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Kg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Qg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Qg(e,this._root).map(t=>t.value)}};function Kg(n,e){if(n===e.value)return e;for(let t of e.children){let r=Kg(n,t);if(r)return r}return null}function Qg(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Qg(n,t);if(r.length)return r.unshift(e),r}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ds(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Yl=class extends Ql{constructor(e,t){super(e),this.snapshot=t,sm(this,e)}toString(){return this.snapshot.toString()}};function LD(n){let e=dL(n),t=new lt([new di("",{})]),r=new lt({}),i=new lt({}),s=new lt({}),o=new lt(""),a=new Ms(t,r,s,o,i,ie,n,e.root);return a.snapshot=e.root,new Yl(new qt(a,[]),e)}function dL(n){let e={},t={},r={},i="",s=new As([],e,r,i,t,ie,n,null,{});return new Jl("",new qt(s,[]))}var Ms=class{constructor(e,t,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(re(l=>l[qa]))??q(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(e=>Ns(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(e=>Ns(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Zl(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),n.params),data:V(V({},e.data),n.data),resolve:V(V(V(V({},n.data),e.data),i?.data),n._resolvedData)}:r={params:V({},n.params),data:V({},n.data),resolve:V(V({},n.data),n._resolvedData??{})},i&&UD(i)&&(r.resolve[qa]=i.title),r}var As=class{get title(){return this.data?.[qa]}constructor(e,t,r,i,s,o,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ns(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ns(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Jl=class extends Ql{constructor(e,t){super(t),this.url=e,sm(this,t)}toString(){return VD(this._root)}};function sm(n,e){e.value._routerState=n,e.children.forEach(t=>sm(n,t))}function VD(n){let e=n.children.length>0?` { ${n.children.map(VD).join(", ")} } `:"";return`${n.value}${e}`}function Ng(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,An(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),An(e.params,t.params)||n.paramsSubject.next(t.params),VF(e.url,t.url)||n.urlSubject.next(t.url),An(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Yg(n,e){let t=An(n.params,e.params)&&$F(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Yg(n.parent,e.parent))}function UD(n){return typeof n.title=="string"||n.title===null}var om=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ie,this.activateEvents=new At,this.deactivateEvents=new At,this.attachEvents=new At,this.detachEvents=new At,this.parentContexts=F(td),this.location=F(Pl),this.changeDetector=F(Es),this.inputBinder=F(am,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Zg(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=xp({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Il]})}}return n})(),Zg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ms?this.route:e===td?this.childContexts:this.parent.get(e,t)}},am=new U("");function hL(n,e,t){let r=ja(n,e._root,t?t._root:void 0);return new Yl(r,e)}function ja(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=fL(n,e,t);return new qt(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ja(n,a)),o}}let r=pL(e.value),i=e.children.map(s=>ja(n,s));return new qt(r,i)}}function fL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ja(n,r,i);return ja(n,r)})}function pL(n){return new Ms(new lt(n.url),new lt(n.params),new lt(n.queryParams),new lt(n.fragment),new lt(n.data),n.outlet,n.component,n)}var Ba=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},jD="ngNavigationCancelingError";function Xl(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ka(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=BD(!1,zt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function BD(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[jD]=!0,t.cancellationCode=e,t}function gL(n){return $D(n)&&ka(n.url)}function $D(n){return!!n&&n[jD]}var mL=(n,e,t,r)=>re(i=>(new Jg(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Jg=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ng(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ds(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ds(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ds(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Va(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zg(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(Ng(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ng(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},ed=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rs=class{constructor(e,t){this.component=e,this.route=t}};function _L(n,e,t){let r=n._root,i=e?e._root:null;return Aa(r,i,t,[r.value])}function yL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ks(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!$T(n)?n:e.get(n):r}function Aa(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ds(e);return n.children.forEach(o=>{vL(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Ma(a,t.getContext(o),i)),i}function vL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=IL(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new ed(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Aa(n,e,a?a.children:null,r,i):Aa(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rs(a.outlet.component,o))}else o&&Ma(e,a,i),i.canActivateChecks.push(new ed(r)),s.component?Aa(n,null,a?a.children:null,r,i):Aa(n,null,t,r,i);return i}function IL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!hi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!hi(n.url,e.url)||!An(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yg(n,e)||!An(n.queryParams,e.queryParams);case"paramsChange":default:return!Yg(n,e)}}function Ma(n,e,t){let r=Ds(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Ma(o,e.children.getContext(s),t):Ma(o,null,t):Ma(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rs(e.outlet.component,i)):t.canDeactivateChecks.push(new Rs(null,i)):t.canDeactivateChecks.push(new Rs(null,i))}function Ga(n){return typeof n=="function"}function wL(n){return typeof n=="boolean"}function EL(n){return n&&Ga(n.canLoad)}function TL(n){return n&&Ga(n.canActivate)}function CL(n){return n&&Ga(n.canActivateChild)}function bL(n){return n&&Ga(n.canDeactivate)}function DL(n){return n&&Ga(n.canMatch)}function HD(n){return n instanceof Bn||n?.name==="EmptyError"}var $l=Symbol("INITIAL_VALUE");function xs(){return Ft(n=>ku(n.map(e=>e.pipe($n(1),is($l)))).pipe(re(e=>{for(let t of e)if(t!==!0){if(t===$l)return $l;if(t===!1||SL(t))return t}return!0}),St(e=>e!==$l),$n(1)))}function SL(n){return ka(n)||n instanceof Ba}function AL(n,e){return Ge(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?q(Me(V({},t),{guardsResult:!0})):RL(o,r,i,n).pipe(Ge(a=>a&&wL(a)?NL(r,s,n,e):q(a)),re(a=>Me(V({},t),{guardsResult:a})))})}function RL(n,e,t,r){return Be(n).pipe(Ge(i=>OL(i.component,i.route,t,e,r)),bn(i=>i!==!0,!0))}function NL(n,e,t,r){return Be(e).pipe(Xr(i=>ns(ML(i.route.parent,r),PL(i.route,r),kL(n,i.path,t),xL(n,i.route,t))),bn(i=>i!==!0,!0))}function PL(n,e){return n!==null&&e&&e(new Gg(n)),q(!0)}function ML(n,e){return n!==null&&e&&e(new qg(n)),q(!0)}function xL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return q(!0);let i=r.map(s=>Ou(()=>{let o=za(e)??t,a=ks(s,o),u=TL(a)?a.canActivate(e,n):Gn(o,()=>a(e,n));return Pr(u).pipe(bn())}));return q(i).pipe(xs())}function kL(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>yL(o)).filter(o=>o!==null).map(o=>Ou(()=>{let a=o.guards.map(u=>{let l=za(o.node)??t,h=ks(u,l),p=CL(h)?h.canActivateChild(r,n):Gn(l,()=>h(r,n));return Pr(p).pipe(bn())});return q(a).pipe(xs())}));return q(s).pipe(xs())}function OL(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return q(!0);let o=s.map(a=>{let u=za(e)??i,l=ks(a,u),h=bL(l)?l.canDeactivate(n,e,t,r):Gn(u,()=>l(n,e,t,r));return Pr(h).pipe(bn())});return q(o).pipe(xs())}function FL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return q(!0);let s=i.map(o=>{let a=ks(o,n),u=EL(a)?a.canLoad(e,t):Gn(n,()=>a(e,t));return Pr(u)});return q(s).pipe(xs(),qD(r))}function qD(n){return vu(nt(e=>{if(typeof e!="boolean")throw Xl(n,e)}),re(e=>e===!0))}function LL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return q(!0);let s=i.map(o=>{let a=ks(o,n),u=DL(a)?a.canMatch(e,t):Gn(n,()=>a(e,t));return Pr(u)});return q(s).pipe(xs(),qD(r))}var $a=class{constructor(e){this.segmentGroup=e||null}},Ha=class extends Error{constructor(e){super(),this.urlTree=e}};function bs(n){return ts(new $a(n))}function VL(n){return ts(new G(4e3,!1))}function UL(n){return ts(BD(!1,zt.GuardRejected))}var Xg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return q(r);if(i.numberOfChildren>1||!i.children[ie])return VL(`${e.redirectTo}`);i=i.children[ie]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:_,data:E,title:N}=i,A=Gn(s,()=>a({params:_,data:E,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:N}));if(A instanceof Jn)throw new Ha(A);t=A}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new Ha(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new Jn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Te(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},em={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jL(n,e,t,r,i){let s=zD(n,e,t);return s.matched?(r=uL(e,r),LL(r,e,t,i).pipe(re(o=>o===!0?s:V({},em)))):q(s)}function zD(n,e,t){if(e.path==="**")return BL(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?V({},em):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||LF)(t,n,e);if(!i)return V({},em);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function BL(n){return{matched:!0,parameters:n.length>0?CD(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function ID(n,e,t,r){return t.length>0&&qL(n,t,r)?{segmentGroup:new Te(e,HL(r,new Te(t,n.children))),slicedSegments:[]}:t.length===0&&zL(n,t,r)?{segmentGroup:new Te(n.segments,$L(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Te(n.segments,n.children),slicedSegments:t}}function $L(n,e,t,r){let i={};for(let s of t)if(nd(n,e,s)&&!r[pn(s)]){let o=new Te([],{});i[pn(s)]=o}return V(V({},r),i)}function HL(n,e){let t={};t[ie]=e;for(let r of n)if(r.path===""&&pn(r)!==ie){let i=new Te([],{});t[pn(r)]=i}return t}function qL(n,e,t){return t.some(r=>nd(n,e,r)&&pn(r)!==ie)}function zL(n,e,t){return t.some(r=>nd(n,e,r))}function nd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function GL(n,e,t){return e.length===0&&!n.children[t]}var tm=class{};function WL(n,e,t,r,i,s,o="emptyOnly"){return new nm(n,e,t,r,i,o,s).recognize()}var KL=31,nm=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Xg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=ID(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(re(({children:t,rootSnapshot:r})=>{let i=new qt(r,t),s=new Jl("",i),o=nL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new As([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ie,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ie,t).pipe(re(r=>({children:r,rootSnapshot:t})),vr(r=>{if(r instanceof Ha)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof $a?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(re(o=>o instanceof qt?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return Be(s).pipe(Xr(o=>{let a=r.children[o],u=lL(t,o);return this.processSegmentGroup(e,u,a,o,i)}),Uu((o,a)=>(o.push(...a),o)),Ir(null),xf(),Ge(o=>{if(o===null)return bs(r);let a=GD(o);return QL(a),q(a)}))}processSegment(e,t,r,i,s,o,a){return Be(t).pipe(Xr(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,s,o,a).pipe(vr(l=>{if(l instanceof $a)return q(null);throw l}))),bn(u=>!!u),vr(u=>{if(HD(u))return GL(r,i,s)?q(new tm):bs(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,u){return pn(r)!==o&&(o===ie||!nd(i,s,r))?bs(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,u):bs(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=zD(t,i,s);if(!u)return bs(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>KL&&(this.allowRedirects=!1));let _=new As(s,l,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,wD(i),pn(i),i.component??i._loadedComponent??null,i,ED(i)),E=Zl(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(E.params),_.data=Object.freeze(E.data);let N=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,_,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(Ge(A=>this.processSegment(e,r,t,A.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=jL(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Ft(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ft(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:_}=u,E=new As(m,p,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,wD(r),pn(r),r.component??r._loadedComponent??null,r,ED(r)),N=Zl(E,o,this.paramsInheritanceStrategy);E.params=Object.freeze(N.params),E.data=Object.freeze(N.data);let{segmentGroup:A,slicedSegments:M}=ID(t,m,_,l);if(M.length===0&&A.hasChildren())return this.processChildren(h,l,A,E).pipe(re(H=>new qt(E,H)));if(l.length===0&&M.length===0)return q(new qt(E,[]));let L=pn(r)===s;return this.processSegment(h,l,A,M,L?ie:s,!0,E).pipe(re(H=>new qt(E,H instanceof qt?[H]:[])))}))):bs(t)))}getChildConfig(e,t,r){return t.children?q({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?q({routes:t._loadedRoutes,injector:t._loadedInjector}):FL(e,t,r,this.urlSerializer).pipe(Ge(i=>i?this.configLoader.loadChildren(e,t).pipe(nt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):UL(t))):q({routes:[],injector:e})}};function QL(n){n.sort((e,t)=>e.value.outlet===ie?-1:t.value.outlet===ie?1:e.value.outlet.localeCompare(t.value.outlet))}function YL(n){let e=n.value.routeConfig;return e&&e.path===""}function GD(n){let e=[],t=new Set;for(let r of n){if(!YL(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=GD(r.children);e.push(new qt(r.value,i))}return e.filter(r=>!t.has(r))}function wD(n){return n.data||{}}function ED(n){return n.resolve||{}}function ZL(n,e,t,r,i,s){return Ge(o=>WL(n,e,t,r,o.extractedUrl,i,s).pipe(re(({state:a,tree:u})=>Me(V({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function JL(n,e){return Ge(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return q(t);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of WD(u))o.add(l);let a=0;return Be(o).pipe(Xr(u=>s.has(u)?XL(u,r,n,e):(u.data=Zl(u,u.parent,n).resolve,q(void 0))),nt(()=>a++),rs(1),Ge(u=>a===o.size?q(t):$t))})}function WD(n){let e=n.children.map(t=>WD(t)).flat();return[n,...e]}function XL(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!UD(i)&&(s[qa]=i.title),eV(s,n,e,r).pipe(re(o=>(n._resolvedData=o,n.data=Zl(n,n.parent,t).resolve,null)))}function eV(n,e,t,r){let i=xg(n);if(i.length===0)return q({});let s={};return Be(i).pipe(Ge(o=>tV(n[o],e,t,r).pipe(bn(),nt(a=>{if(a instanceof Ba)throw Xl(new xa,a);s[o]=a}))),rs(1),Pf(s),vr(o=>HD(o)?$t:ts(o)))}function tV(n,e,t,r){let i=za(e)??r,s=ks(n,i),o=s.resolve?s.resolve(e,t):Gn(i,()=>s(e,t));return Pr(o)}function Pg(n){return Ft(e=>{let t=n(e);return t?Be(t).pipe(re(()=>e)):q(e)})}var KD=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===ie);return r}getResolvedTitleForRoute(t){return t.data[qa]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(nV),providedIn:"root"})}}return n})(),nV=(()=>{class n extends KD{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(K(jl))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cm=new U("",{providedIn:"root",factory:()=>({})}),um=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=_l({type:n,selectors:[["ng-component"]],standalone:!0,features:[xl],decls:1,vars:0,template:function(r,i){r&1&&Ea(0,"router-outlet")},dependencies:[om],encapsulation:2})}}return n})();function lm(n){let e=n.children&&n.children.map(lm),t=e?Me(V({},n),{children:e}):V({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ie&&(t.component=um),t}var dm=new U(""),rV=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(dg)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return q(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Pr(t.loadComponent()).pipe(re(QD),nt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),ta(()=>{this.componentLoaders.delete(t)})),i=new Zi(r,()=>new ut).pipe(Yi());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return q({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=iV(r,this.compiler,t,this.onLoadEndListener).pipe(ta(()=>{this.childrenLoaders.delete(r)})),o=new Zi(s,()=>new ut).pipe(Yi());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function iV(n,e,t,r){return Pr(n.loadChildren()).pipe(re(QD),Ge(i=>i instanceof ga||Array.isArray(i)?q(i):Be(e.compileModuleAsync(i))),re(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(dm,[],{optional:!0,self:!0}).flat()),{routes:o.map(lm),injector:s}}))}function sV(n){return n&&typeof n=="object"&&"default"in n}function QD(n){return sV(n)?n.default:n}var hm=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(oV),providedIn:"root"})}}return n})(),oV=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),aV=new U("");var cV=new U(""),uV=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=F(rV),this.environmentInjector=F(Zt),this.urlSerializer=F(im),this.rootContexts=F(td),this.location=F(Ta),this.inputBindingEnabled=F(am,{optional:!0})!==null,this.titleStrategy=F(KD),this.options=F(cm,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(hm),this.createViewTransition=F(aV,{optional:!0}),this.navigationErrorHandler=F(cV,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>q(void 0),this.rootComponentType=null;let t=i=>this.events.next(new $g(i)),r=i=>this.events.next(new Hg(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(Me(V(V({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Pa,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(St(s=>s.id!==0),re(s=>Me(V({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ft(s=>{let o=!1,a=!1;return q(s).pipe(Ft(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",zt.SupersededByNewNavigation),$t;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?Me(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new pi(u.id,this.urlSerializer.serialize(u.rawUrl),p,Lg.IgnoredSameUrlNavigation)),u.resolve(!1),$t}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return q(u).pipe(Ft(p=>{let m=this.transitions?.getValue();return this.events.next(new Fa(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?$t:Promise.resolve(p)}),ZL(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),nt(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=Me(V({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new Kl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:_,restoredState:E,extras:N}=u,A=new Fa(p,this.urlSerializer.serialize(m),_,E);this.events.next(A);let M=LD(this.rootComponentType).snapshot;return this.currentTransition=s=Me(V({},u),{targetSnapshot:M,urlAfterRedirects:m,extras:Me(V({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,q(s)}else{let p="";return this.events.next(new pi(u.id,this.urlSerializer.serialize(u.extractedUrl),p,Lg.IgnoredByUrlHandlingStrategy)),u.resolve(!1),$t}}),nt(u=>{let l=new Vg(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),re(u=>(this.currentTransition=s=Me(V({},u),{guards:_L(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),AL(this.environmentInjector,u=>this.events.next(u)),nt(u=>{if(s.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Xl(this.urlSerializer,u.guardsResult);let l=new Ug(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),St(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",zt.GuardRejected),!1)),Pg(u=>{if(u.guards.canActivateChecks.length)return q(u).pipe(nt(l=>{let h=new jg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Ft(l=>{let h=!1;return q(l).pipe(JL(this.paramsInheritanceStrategy,this.environmentInjector),nt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",zt.NoDataFromResolver)}}))}),nt(l=>{let h=new Bg(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Pg(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(nt(m=>{h.component=m}),re(()=>{})));for(let m of h.children)p.push(...l(m));return p};return ku(l(u.targetSnapshot.root)).pipe(Ir(null),$n(1))}),Pg(()=>this.afterPreactivation()),Ft(()=>{let{currentSnapshot:u,targetSnapshot:l}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Be(h).pipe(re(()=>s)):q(s)}),re(u=>{let l=hL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=Me(V({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),nt(()=>{this.events.next(new Ua)}),mL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),$n(1),nt({next:u=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{o=!0}}),kf(this.transitionAbortSubject.pipe(nt(u=>{throw u}))),ta(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",zt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),vr(u=>{if(a=!0,$D(u))this.events.next(new Zn(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),gL(u)?this.events.next(new Ps(u.url,u.navigationBehaviorOptions)):s.resolve(!1);else{let l=new La(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0);try{let h=Gn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof Ba){let{message:p,cancellationCode:m}=Xl(this.urlSerializer,h);this.events.next(new Zn(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Ps(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);s.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(h)}}return $t}))}))}cancelNavigationTransition(t,r,i){let s=new Zn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function lV(n){return n!==Pa}var dV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(hV),providedIn:"root"})}}return n})(),rm=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},hV=(()=>{class n extends rm{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=qp(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),YD=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>F(fV),providedIn:"root"})}}return n})(),fV=(()=>{class n extends YD{constructor(){super(...arguments),this.location=F(Ta),this.urlSerializer=F(im),this.options=F(cm,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(hm),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Jn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=LD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Fa)this.stateMemento=this.createStateMemento();else if(t instanceof pi)this.rawUrlTree=r.initialUrl;else if(t instanceof Kl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Ua?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Zn&&(t.code===zt.GuardRejected||t.code===zt.NoDataFromResolver)?this.restoreHistory(r):t instanceof La?this.restoreHistory(r,!0):t instanceof fi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Jn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=V(V({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=V(V({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=qp(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ra=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ra||{});function pV(n,e){n.events.pipe(St(t=>t instanceof fi||t instanceof Zn||t instanceof La||t instanceof pi),re(t=>t instanceof fi||t instanceof pi?Ra.COMPLETE:(t instanceof Zn?t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation:!1)?Ra.REDIRECTING:Ra.FAILED),St(t=>t!==Ra.REDIRECTING),$n(1)).subscribe(()=>{e()})}function gV(n){throw n}var mV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_V={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},rd=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(kl),this.stateManager=F(YD),this.options=F(cm,{optional:!0})||{},this.pendingTasks=F(vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(uV),this.urlSerializer=F(im),this.location=F(Ta),this.urlHandlingStrategy=F(hm),this._events=new ut,this.errorHandler=this.options.errorHandler||gV,this.navigated=!1,this.routeReuseStrategy=F(dV),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(dm,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(am,{optional:!0}),this.eventsSubscription=new je,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Zn&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof fi)this.navigated=!0;else if(r instanceof Ps){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=V({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||lV(i.source)},o);this.scheduleNavigation(a,Pa,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}vV(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Pa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let u=V({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(lm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:o,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=V(V({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=xD(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return kD(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ka(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Pa,null,r)}navigate(t,r={skipLocationChange:!1}){return yV(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=V({},mV):r===!1?i=V({},_V):i=r,ka(t))return mD(this.currentUrlTree,t,i);let s=this.parseUrl(t);return mD(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,u,l;o?(a=o.resolve,u=o.reject,l=o.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return pV(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function yV(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new G(4008,!1)}function vV(n){return!(n instanceof Ua)&&!(n instanceof Ps)}var IV=new U("");function ZD(n,...e){return Re([{provide:dm,multi:!0,useValue:n},[],{provide:Ms,useFactory:wV,deps:[rd]},{provide:lg,multi:!0,useFactory:EV},e.map(t=>t.\u0275providers)])}function wV(n){return n.routerState.root}function EV(){let n=F(ve);return e=>{let t=n.get(ui);if(e!==t.components[0])return;let r=n.get(rd),i=n.get(TV);n.get(CV)===1&&r.initialNavigation(),n.get(bV,null,ce.Optional)?.setUpPreloading(),n.get(IV,null,ce.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var TV=new U("",{factory:()=>new ut}),CV=new U("",{providedIn:"root",factory:()=>1});var bV=new U("");var JD=[];var SV="firebase",AV="10.14.1";B(SV,AV,"app");var xe=new Sr("ANGULARFIRE2_VERSION"),Fs=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function Je(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var We=(n,e)=>{let t=e?[e]:pu(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Vt=class{constructor(){return We(RV)}},RV="app-check";function Os(){}var id=class{zone;delegate;constructor(e,t=Sf){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},fm=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Os,{},Os,Os)),t.pipe(nt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},$e=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new id(Zone.current)),this.insideAngular=t.run(()=>new id(Zone.current,Df)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(K(W))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function sd(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function NV(n){return sd().ngZone.runOutsideAngular(()=>n())}function gi(n){return sd().ngZone.run(()=>n())}function PV(n){return MV(sd())(n)}function MV(n){return function(t){return t=t.lift(new fm(n.ngZone)),t.pipe(yr(n.outsideAngular),_r(n.insideAngular))}}var xV=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),gi(()=>n.apply(void 0,r))},Se=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=gi(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Os,{},Os,Os))),r[s]=xV(r[s],t));let i=NV(()=>n.apply(this,r));if(!e)if(i instanceof le){let s=sd();return i.pipe(yr(s.outsideAngular),_r(s.insideAngular))}else return gi(()=>i);return i instanceof le?i.pipe(PV):i instanceof Promise?gi(()=>new Promise((s,o)=>i.then(a=>gi(()=>s(a)),a=>gi(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:gi(()=>i)};var ke=class{constructor(e){return e}},Le=class{constructor(){return pu()}};function kV(n){return n&&n.length===1?n[0]:new ke(Ye())}var pm=new U("angularfire2._apps"),OV={provide:ke,useFactory:kV,deps:[[new Y,pm]]},FV={provide:Le,deps:[[new Y,pm]]};function LV(n){return(e,t)=>{let r=t.get(fn);B("angularfire",xe.full,"core"),B("angularfire",xe.full,"app"),B("angular",qb.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ke(i)}}function XD(n,...e){return Re([OV,FV,{provide:pm,useFactory:LV(n),multi:!0,deps:[W,ve,$e,...e]}])}var eS=Se(CE,!0);function gS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var mS=gS,_S=new En("auth","Firebase",gS());var dd=new Cn("@firebase/auth");function VV(n,...e){dd.logLevel<=_t.WARN&&dd.warn(`Auth (${kt}): ${n}`,...e)}function ad(n,...e){dd.logLevel<=_t.ERROR&&dd.error(`Auth (${kt}): ${n}`,...e)}function xr(n,...e){throw km(n,...e)}function _i(n,...e){return km(n,...e)}function yS(n,e,t){let r=Object.assign(Object.assign({},mS()),{[e]:t});return new En("auth","Firebase",r).create(e,{appName:n.name})}function mi(n){return yS(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function km(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return _S.create(n,...e)}function Z(n,e,...t){if(!n)throw km(e,...t)}function Xn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ad(e),new Error(e)}function kr(n,e){n||Xn(e)}function ym(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function UV(){return tS()==="http:"||tS()==="https:"}function tS(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function jV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UV()||zo()||"connection"in navigator)?navigator.onLine:!0}function BV(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var yi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=qo()||du()}get(){return jV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Om(n,e){kr(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var hd=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $V={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HV=new yi(3e4,6e4);function Fm(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Vs(s,o,a,u){return v(this,arguments,function*(n,e,t,r,i={}){return vS(n,i,()=>v(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=Kr(Object.assign({key:n.config.apiKey},h)).slice(1),m=yield n._getAdditionalHeaders();m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:m},l);return gE()||(_.referrerPolicy="no-referrer"),hd.fetch()(IS(n,n.config.apiHost,t,p),_)}))})}function vS(n,e,t){return v(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},$V),e);try{let i=new vm(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw od(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw od(n,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw od(n,"email-already-in-use",o);if(u==="USER_DISABLED")throw od(n,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw yS(n,h,l);xr(n,h)}}catch(i){if(i instanceof xt)throw i;xr(n,"network-request-failed",{message:String(i)})}})}function qV(s,o,a,u){return v(this,arguments,function*(n,e,t,r,i={}){let l=yield Vs(n,e,t,r,i);return"mfaPendingCredential"in l&&xr(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function IS(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Om(n.config,i):`${n.config.apiScheme}://${i}`}var vm=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(_i(this.auth,"network-request-failed")),HV.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function od(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=_i(n,e,r);return i.customData._tokenResponse=t,i}function zV(n,e){return v(this,null,function*(){return Vs(n,"POST","/v1/accounts:delete",e)})}function wS(n,e){return v(this,null,function*(){return Vs(n,"POST","/v1/accounts:lookup",e)})}function Wa(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Lm(n,e=!1){return v(this,null,function*(){let t=we(n),r=yield t.getIdToken(e),i=Vm(r);Z(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Wa(gm(i.auth_time)),issuedAtTime:Wa(gm(i.iat)),expirationTime:Wa(gm(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function gm(n){return Number(n)*1e3}function Vm(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ad("JWT malformed, contained fewer than 3 sections"),null;try{let i=hE(t);return i?JSON.parse(i):(ad("Failed to decode base64 JWT payload"),null)}catch(i){return ad("Caught error parsing JWT payload as JSON",i?.toString()),null}}function nS(n){let e=Vm(n);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Qa(n,e,t=!1){return v(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof xt&&GV(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function GV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Im=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>v(this,null,function*(){yield this.iteration()}),t)}iteration(){return v(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ya=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wa(this.lastLoginAt),this.creationTime=Wa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function fd(n){return v(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Qa(n,wS(t,{idToken:r}));Z(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ES(s.providerUserInfo):[],a=WV(n.providerData,o),u=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ya(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,p)})}function Um(n){return v(this,null,function*(){let e=we(n);yield fd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function WV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ES(n){return n.map(e=>{var{providerId:t}=e,r=Af(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function KV(n,e){return v(this,null,function*(){let t=yield vS(n,{},()=>v(this,null,function*(){let r=Kr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=IS(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function QV(n,e){return v(this,null,function*(){return Vs(n,"POST","/v2/accounts:revokeToken",Fm(n,e))})}var Ka=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):nS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Z(e.length!==0,"internal-error");let t=nS(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return v(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return v(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield KV(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Z(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Z(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Xn("not implemented")}};function Mr(n,e){Z(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ls=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=Af(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Im(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ya(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return v(this,null,function*(){let t=yield Qa(this,this.stsTokenManager.getToken(this.auth,e));return Z(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Lm(this,e)}reload(){return Um(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return v(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield fd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return v(this,null,function*(){if(jn(this.auth.app))return Promise.reject(mi(this.auth));let e=yield this.getIdToken();return yield Qa(this,zV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,m=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,E=(o=t.photoURL)!==null&&o!==void 0?o:void 0,N=(a=t.tenantId)!==null&&a!==void 0?a:void 0,A=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,M=(l=t.createdAt)!==null&&l!==void 0?l:void 0,L=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:J,isAnonymous:Ne,providerData:X,stsTokenManager:T}=t;Z(H&&T,e,"internal-error");let y=Ka.fromJSON(this.name,T);Z(typeof H=="string",e,"internal-error"),Mr(p,e.name),Mr(m,e.name),Z(typeof J=="boolean",e,"internal-error"),Z(typeof Ne=="boolean",e,"internal-error"),Mr(_,e.name),Mr(E,e.name),Mr(N,e.name),Mr(A,e.name),Mr(M,e.name),Mr(L,e.name);let I=new n({uid:H,auth:e,email:m,emailVerified:J,displayName:p,isAnonymous:Ne,photoURL:E,phoneNumber:_,tenantId:N,stsTokenManager:y,createdAt:M,lastLoginAt:L});return X&&Array.isArray(X)&&(I.providerData=X.map(C=>Object.assign({},C))),A&&(I._redirectEventId=A),I}static _fromIdTokenResponse(e,t,r=!1){return v(this,null,function*(){let i=new Ka;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield fd(s),s})}static _fromGetAccountInfoResponse(e,t,r){return v(this,null,function*(){let i=t.users[0];Z(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?ES(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Ka;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ya(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var rS=new Map;function er(n){kr(n instanceof Function,"Expected a class definition");let e=rS.get(n);return e?(kr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,rS.set(n,e),e)}var YV=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return v(this,null,function*(){return!0})}_set(t,r){return v(this,null,function*(){this.storage[t]=r})}_get(t){return v(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return v(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),wm=YV;function cd(n,e,t){return`firebase:${n}:${e}:${t}`}var pd=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=cd(this.userKey,i.apiKey,s),this.fullPersistenceKey=cd("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return v(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ls._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return v(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return v(this,null,function*(){if(!t.length)return new n(er(wm),e,r);let i=(yield Promise.all(t.map(l=>v(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||er(wm),o=cd(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let p=Ls._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new n(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>v(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function iS(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(DS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(TS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AS(e))return"Blackberry";if(RS(e))return"Webos";if(CS(e))return"Safari";if((e.includes("chrome/")||bS(e))&&!e.includes("edge/"))return"Chrome";if(SS(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function TS(n=mt()){return/firefox\//i.test(n)}function CS(n=mt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bS(n=mt()){return/crios\//i.test(n)}function DS(n=mt()){return/iemobile/i.test(n)}function SS(n=mt()){return/android/i.test(n)}function AS(n=mt()){return/blackberry/i.test(n)}function RS(n=mt()){return/webos/i.test(n)}function jm(n=mt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZV(n=mt()){var e;return jm(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JV(){return mE()&&document.documentMode===10}function NS(n=mt()){return jm(n)||SS(n)||RS(n)||AS(n)||/windows phone/i.test(n)||DS(n)}function PS(n,e=[]){let t;switch(n){case"Browser":t=iS(mt());break;case"Worker":t=`${iS(mt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${kt}/${r}`}var Em=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return v(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function XV(t){return v(this,arguments,function*(n,e={}){return Vs(n,"GET","/v2/passwordPolicy",Fm(n,e))})}var eU=6,Tm=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:eU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Cm=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gd(this),this.idTokenSubscription=new gd(this),this.beforeStateQueue=new Em(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_S,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=er(t)),this._initializationPromise=this.queue(()=>v(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield pd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return v(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return v(this,null,function*(){try{let t=yield wS(this,{idToken:e}),r=yield Ls._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return v(this,null,function*(){var t;if(jn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return v(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return v(this,null,function*(){try{yield fd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=BV()}_delete(){return v(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return v(this,null,function*(){if(jn(this.app))return Promise.reject(mi(this));let t=e?we(e):null;return t&&Z(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return v(this,null,function*(){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>v(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return v(this,null,function*(){return jn(this.app)?Promise.reject(mi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return jn(this.app)?Promise.reject(mi(this)):this.queue(()=>v(this,null,function*(){yield this.assertedPersistence.setPersistence(er(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return v(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return v(this,null,function*(){let e=yield XV(this),t=new Tm(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new En("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return v(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield QV(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return v(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return v(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&er(e)||this._popupRedirectResolver;Z(t,this,"argument-error"),this.redirectPersistenceManager=yield pd.create(this,[er(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return v(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>v(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return v(this,null,function*(){if(e===this.currentUser)return this.queue(()=>v(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(t);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return v(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return v(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return v(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&VV(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Bm(n){return we(n)}var gd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=wE(t=>this.observer=t)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var $m={loadJS(){return v(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function tU(n){$m=n}function nU(n){return $m.loadJS(n)}function rU(){return $m.gapiScript}function MS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Hm(n,e){let t=Qe(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Qo(s,e??{}))return i;xr(i,"already-initialized")}return t.initialize({options:e})}function iU(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(er);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function qm(n,e,t){let r=Bm(n);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=xS(e),{host:o,port:a}=sU(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||oU()}function xS(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function sU(n){let e=xS(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:sS(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:sS(o)}}}function sS(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function oU(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var md=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,t){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}};function mm(n,e){return v(this,null,function*(){return qV(n,"POST","/v1/accounts:signInWithIdp",Fm(n,e))})}var _d=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var bm=class extends _d{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Za=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return v(this,null,function*(){let s=yield Ls._fromIdTokenResponse(e,r,i),o=oS(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return v(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=oS(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function oS(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Dm=class n extends xt{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function kS(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Dm._fromErrorAndOperation(n,s,e,r):s})}function aU(n,e,t=!1){return v(this,null,function*(){let r=yield Qa(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Za._forOperation(n,"link",r)})}function cU(n,e,t=!1){return v(this,null,function*(){let{auth:r}=n;if(jn(r.app))return Promise.reject(mi(r));let i="reauthenticate";try{let s=yield Qa(n,kS(r,i,e,n),t);Z(s.idToken,r,"internal-error");let o=Vm(s.idToken);Z(o,r,"internal-error");let{sub:a}=o;return Z(n.uid===a,r,"user-mismatch"),Za._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&xr(r,"user-mismatch"),s}})}function uU(n,e,t=!1){return v(this,null,function*(){if(jn(n.app))return Promise.reject(mi(n));let r="signIn",i=yield kS(n,r,e),s=yield Za._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Ed(n,e,t,r){return we(n).onIdTokenChanged(e,t,r)}function zm(n,e,t){return we(n).beforeAuthStateChanged(e,t)}function Td(n,e,t,r){return we(n).onAuthStateChanged(e,t,r)}var yd="__sak";var vd=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yd,"1"),this.storage.removeItem(yd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var lU=1e3,dU=10,hU=(()=>{class n extends vd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=NS(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);JV()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,dU):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},lU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return v(this,null,function*(){yield pr(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return v(this,null,function*(){let r=yield pr(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return v(this,null,function*(){yield pr(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),OS=hU;var fU=(()=>{class n extends vd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Gm=fU;function pU(n){return Promise.all(n.map(e=>v(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var gU=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return v(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>v(this,null,function*(){return h(r.origin,o)})),l=yield pU(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function FS(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Sm=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return v(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=FS("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Rn(){return window}function mU(n){Rn().location.href=n}function LS(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}function _U(){return v(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function yU(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function vU(){return LS()?self:null}var VS="firebaseLocalStorageDb",IU=1,Id="firebaseLocalStorage",US="fbase_key",vi=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Cd(n,e){return n.transaction([Id],e?"readwrite":"readonly").objectStore(Id)}function wU(){let n=indexedDB.deleteDatabase(VS);return new vi(n).toPromise()}function Am(){let n=indexedDB.open(VS,IU);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Id,{keyPath:US})}catch(i){t(i)}}),n.addEventListener("success",()=>v(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Id)?e(r):(r.close(),yield wU(),e(yield Am()))}))})}function aS(n,e,t){return v(this,null,function*(){let r=Cd(n,!0).put({[US]:e,value:t});return new vi(r).toPromise()})}function EU(n,e){return v(this,null,function*(){let t=Cd(n,!1).get(e),r=yield new vi(t).toPromise();return r===void 0?null:r.value})}function cS(n,e){let t=Cd(n,!0).delete(e);return new vi(t).toPromise()}var TU=800,CU=3,bU=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return v(this,null,function*(){return this.db?this.db:(this.db=yield Am(),this.db)})}_withRetries(t){return v(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>CU)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return v(this,null,function*(){return LS()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return v(this,null,function*(){this.receiver=gU._getInstance(vU()),this.receiver._subscribe("keyChanged",(t,r)=>v(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>v(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return v(this,null,function*(){var t,r;if(this.activeServiceWorker=yield _U(),!this.activeServiceWorker)return;this.sender=new Sm(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return v(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||yU()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return v(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Am();return yield aS(t,yd,"1"),yield cS(t,yd),!0}catch{}return!1})}_withPendingWrite(t){return v(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(i=>aS(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return v(this,null,function*(){let r=yield this._withRetries(i=>EU(i,t));return this.localCache[t]=r,r})}_remove(t){return v(this,null,function*(){return this._withPendingWrite(()=>v(this,null,function*(){return yield this._withRetries(r=>cS(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return v(this,null,function*(){let t=yield this._withRetries(s=>{let o=Cd(s,!1).getAll();return new vi(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>v(this,null,function*(){return this._poll()}),TU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),jS=bU;var YQ=MS("rcb"),ZQ=new yi(3e4,6e4);function DU(n,e){return e?er(e):(Z(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Ja=class extends md{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mm(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mm(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mm(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function SU(n){return uU(n.auth,new Ja(n),n.bypassAuthState)}function AU(n){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),cU(t,new Ja(n),n.bypassAuthState)}function RU(n){return v(this,null,function*(){let{auth:e,user:t}=n;return Z(t,e,"internal-error"),aU(t,new Ja(n),n.bypassAuthState)})}var Rm=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>v(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return v(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return SU;case"linkViaPopup":case"linkViaRedirect":return RU;case"reauthViaPopup":case"reauthViaRedirect":return AU;default:xr(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var JQ=new yi(2e3,1e4);var NU="pendingRedirect",ud=new Map,Nm=class n extends Rm{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return v(this,null,function*(){let e=ud.get(this.auth._key());if(!e){try{let r=(yield PU(this.resolver,this.auth))?yield pr(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ud.set(this.auth._key(),e)}return this.bypassAuthState||ud.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return v(this,null,function*(){if(e.type==="signInViaRedirect")return pr(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,pr(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return v(this,null,function*(){})}cleanUp(){}};function PU(n,e){return v(this,null,function*(){let t=kU(e),r=xU(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function MU(n,e){ud.set(n._key(),e)}function xU(n){return er(n._redirectPersistence)}function kU(n){return cd(NU,n.config.apiKey,n.name)}function OU(n,e,t=!1){return v(this,null,function*(){if(jn(n.app))return Promise.reject(mi(n));let r=Bm(n),i=DU(r,e),o=yield new Nm(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var FU=10*60*1e3,Pm=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!LU(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!BS(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(_i(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FU&&this.cachedEventUids.clear(),this.cachedEventUids.has(uS(e))}saveEventToCache(e){this.cachedEventUids.add(uS(e)),this.lastProcessedEventTime=Date.now()}};function uS(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function BS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function LU(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return BS(n);default:return!1}}function VU(t){return v(this,arguments,function*(n,e={}){return Vs(n,"GET","/v1/projects",e)})}var UU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jU=/^https?/;function BU(n){return v(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield VU(n);for(let t of e)try{if($U(t))return}catch{}xr(n,"unauthorized-domain")})}function $U(n){let e=ym(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!jU.test(t))return!1;if(UU.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var HU=new yi(3e4,6e4);function lS(){let n=Rn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function qU(n){return new Promise((e,t)=>{var r,i,s;function o(){lS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lS(),t(_i(n,"network-request-failed"))},timeout:HU.get()})}if(!((i=(r=Rn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Rn().gapi)===null||s===void 0)&&s.load)o();else{let a=MS("iframefcb");return Rn()[a]=()=>{gapi.load?o():t(_i(n,"network-request-failed"))},nU(`${rU()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw ld=null,e})}var ld=null;function zU(n){return ld=ld||qU(n),ld}var GU=new yi(5e3,15e3),WU="__/auth/iframe",KU="emulator/auth/iframe",QU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},YU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZU(n){let e=n.config;Z(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Om(e,KU):`https://${n.config.authDomain}/${WU}`,r={apiKey:e.apiKey,appName:n.name,v:kt},i=YU.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Kr(r).slice(1)}`}function JU(n){return v(this,null,function*(){let e=yield zU(n),t=Rn().gapi;return Z(t,n,"internal-error"),e.open({where:document.body,url:ZU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QU,dontclear:!0},r=>new Promise((i,s)=>v(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=_i(n,"network-request-failed"),a=Rn().setTimeout(()=>{s(o)},GU.get());function u(){Rn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var XU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ej=500,tj=600,nj="_blank",rj="http://localhost",wd=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ij(n,e,t,r=ej,i=tj){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},XU),{width:r.toString(),height:i.toString(),top:s,left:o}),l=mt().toLowerCase();t&&(a=bS(l)?nj:t),TS(l)&&(e=e||rj,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[_,E])=>`${m}${_}=${E},`,"");if(ZV(l)&&a!=="_self")return sj(e||"",a),new wd(null);let p=window.open(e||"",a,h);Z(p,n,"popup-blocked");try{p.focus()}catch{}return new wd(p)}function sj(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var oj="__/auth/handler",aj="emulator/auth/handler",cj=encodeURIComponent("fac");function dS(n,e,t,r,i,s){return v(this,null,function*(){Z(n.config.authDomain,n,"auth-domain-config-required"),Z(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:kt,eventId:i};if(e instanceof _d){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Wo(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof bm){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield n._getAppCheckToken(),l=u?`#${cj}=${encodeURIComponent(u)}`:"";return`${uj(n)}?${Kr(a).slice(1)}${l}`})}function uj({config:n}){return n.emulator?Om(n,aj):`https://${n.authDomain}/${oj}`}var _m="webStorageSupport",Mm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gm,this._completeRedirectFn=OU,this._overrideRedirectResult=MU}_openPopup(e,t,r,i){return v(this,null,function*(){var s;kr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield dS(e,t,r,ym(),i);return ij(e,o,FS())})}_openRedirect(e,t,r,i){return v(this,null,function*(){yield this._originValidation(e);let s=yield dS(e,t,r,ym(),i);return mU(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(kr(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return v(this,null,function*(){let t=yield JU(e),r=new Pm(e);return t.register("authEvent",i=>(Z(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_m,{type:_m},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[_m];o!==void 0&&t(!!o),xr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return NS()||CS()||jm()}},$S=Mm;var hS="@firebase/auth",fS="1.7.9";var xm=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return v(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function lj(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function dj(n){ze(new qe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PS(n)},l=new Cm(r,i,s,u);return iU(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),ze(new qe("auth-internal",e=>{let t=Bm(e.getProvider("auth").getImmediate());return(r=>new xm(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),B(hS,fS,lj(n)),B(hS,fS,"esm2017")}var hj=5*60,fj=of("authIdTokenMaxAge")||hj,pS=null,pj=n=>e=>v(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>fj)return;let i=t?.token;pS!==i&&(pS=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Wm(n=Ye()){let e=Qe(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Hm(n,{popupRedirectResolver:$S,persistence:[jS,OS,Gm]}),r=of("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=pj(s.toString());zm(t,o,()=>o(t.currentUser)),Ed(t,a=>o(a))}}let i=pE("auth");return i&&qm(t,`http://${i}`),t}function gj(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}tU({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=_i("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",gj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});dj("Browser");function qS(n){return new le(function(e){var t=Td(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var zS="auth",Ii=class{constructor(e){return e}},gn=class{constructor(){return We(zS)}};var Km=new U("angularfire2.auth-instances");function aB(n,e){let t=Je(zS,n,e);return t&&new Ii(t)}function cB(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ii(r)}}var uB={provide:gn,deps:[[new Y,Km]]},lB={provide:Ii,useFactory:aB,deps:[[new Y,Km],ke]};function GS(n,...e){return B("angularfire",xe.full,"auth"),Re([lB,uB,{provide:Km,useFactory:cB(n),multi:!0,deps:[W,ve,$e,Le,[new Y,Vt],...e]}])}var WS=Se(qS,!0);var KS=Se(Wm,!0);var bd="analytics",hB="firebase_id",fB="origin",pB=60*1e3,gB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",t_="https://www.googletagmanager.com/gtag/js";var Pt=new Cn("@firebase/analytics");var mB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Gt=new En("analytics","Analytics",mB);function _B(n){if(!n.startsWith(t_)){let e=Gt.create("invalid-gtag-resource",{gtagURL:n});return Pt.warn(e.message),""}return n}function tA(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function yB(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function vB(n,e){let t=yB("firebase-js-sdk-policy",{createScriptURL:_B}),r=document.createElement("script"),i=`${t_}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function IB(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function wB(n,e,t,r,i,s){return v(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let u=(yield tA(t)).find(l=>l.measurementId===i);u&&(yield e[u.appId])}}catch(a){Pt.error(a)}n("config",i,s)})}function EB(n,e,t,r,i){return v(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield tA(t);for(let u of o){let l=a.find(p=>p.measurementId===u),h=l&&e[l.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){Pt.error(s)}})}function TB(n,e,t,r){function i(s,...o){return v(this,null,function*(){try{if(s==="event"){let[a,u]=o;yield EB(n,e,t,a,u)}else if(s==="config"){let[a,u]=o;yield wB(n,e,t,r,a,u)}else if(s==="consent"){let[a,u]=o;n("consent",a,u)}else if(s==="get"){let[a,u,l]=o;n("get",a,u,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){Pt.error(a)}})}return i}function CB(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=TB(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function bB(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(t_)&&t.src.includes(n))return t;return null}var DB=30,SB=1e3,Ym=class{constructor(e={},t=SB){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},nA=new Ym;function AB(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function RB(n){return v(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:AB(r)},s=gB.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let u=yield o.json();!((e=u.error)===null||e===void 0)&&e.message&&(a=u.error.message)}catch{}throw Gt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function NB(r){return v(this,arguments,function*(n,e=nA,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw Gt.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw Gt.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Zm;return setTimeout(()=>v(this,null,function*(){u.abort()}),t!==void 0?t:pB),rA({appId:i,apiKey:s,measurementId:o},a,u,e)})}function rA(s,o,a){return v(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=nA){var u;let{appId:l,measurementId:h}=n;try{yield PB(r,e)}catch(p){if(h)return Pt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw p}try{let p=yield RB(n);return i.deleteThrottleMetadata(l),p}catch(p){let m=p;if(!MB(m)){if(i.deleteThrottleMetadata(l),h)return Pt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:h};throw p}let _=Number((u=m?.customData)===null||u===void 0?void 0:u.httpStatus)===503?Zo(t,i.intervalMillis,DB):Zo(t,i.intervalMillis),E={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return i.setThrottleMetadata(l,E),Pt.debug(`Calling attemptFetch again in ${_} millis`),rA(n,E,r,i)}})}function PB(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Gt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function MB(n){if(!(n instanceof xt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Zm=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Jm;function xB(n,e,t,r,i){return v(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}function kB(n,e,t,r){return v(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var Xm;function OB(n){Xm=n}function FB(n){Jm=n}function LB(){return v(this,null,function*(){if(Un())try{yield Gr()}catch(n){return Pt.warn(Gt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Pt.warn(Gt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function VB(n,e,t,r,i,s,o){return v(this,null,function*(){var a;let u=NB(n);u.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&Pt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>Pt.error(_)),e.push(u);let l=LB().then(_=>{if(_)return r.getId()}),[h,p]=yield Promise.all([u,l]);bB(s)||vB(s,h.measurementId),Xm&&(i("consent","default",Xm),OB(void 0)),i("js",new Date);let m=(a=o?.config)!==null&&a!==void 0?a:{};return m[fB]="firebase",m.update=!0,p!=null&&(m[hB]=p),i("config",h.measurementId,m),Jm&&(i("set",Jm),FB(void 0)),h.measurementId})}var e_=class{constructor(e){this.app=e}_delete(){return delete Us[this.app.options.appId],Promise.resolve()}},Us={},QS=[],YS={},Qm="dataLayer",UB="gtag",ZS,n_,JS=!1;function jB(){let n=[];if(zo()&&n.push("This is a browser extension environment."),Go()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Gt.create("invalid-analytics-context",{errorInfo:e});Pt.warn(t.message)}}function BB(n,e,t){jB();let r=n.options.appId;if(!r)throw Gt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Pt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Gt.create("no-api-key");if(Us[r]!=null)throw Gt.create("already-exists",{id:r});if(!JS){IB(Qm);let{wrappedGtag:s,gtagCore:o}=CB(Us,QS,YS,Qm,UB);n_=s,ZS=o,JS=!0}return Us[r]=VB(n,QS,YS,e,ZS,Qm,t),new e_(n)}function iA(n=Ye()){n=we(n);let e=Qe(n,bd);return e.isInitialized()?e.getImmediate():sA(n)}function sA(n,e={}){let t=Qe(n,bd);if(t.isInitialized()){let i=t.getImmediate();if(Qo(e,t.getOptions()))return i;throw Gt.create("already-initialized")}return t.initialize({options:e})}function oA(){return v(this,null,function*(){if(zo()||!Go()||!Un())return!1;try{return yield Gr()}catch{return!1}})}function aA(n,e,t){n=we(n),kB(n_,Us[n.app.options.appId],e,t).catch(r=>Pt.error(r))}function r_(n,e,t,r){n=we(n),xB(n_,Us[n.app.options.appId],e,t,r).catch(i=>Pt.error(i))}var XS="@firebase/analytics",eA="0.10.8";function $B(){ze(new qe(bd,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return BB(r,i,t)},"PUBLIC")),ze(new qe("analytics-internal",n,"PRIVATE")),B(XS,eA),B(XS,eA,"esm2017");function n(e){try{let t=e.getProvider(bd).getImmediate();return{logEvent:(r,i,s)=>r_(t,r,i,s)}}catch(t){throw Gt.create("interop-component-reg-failed",{reason:t})}}}$B();var wi=class{constructor(e){return e}},lA="analytics",s_=class{constructor(){return We(lA)}};var o_="__angularfire_symbol__analyticsIsSupportedValue",dA="__angularfire_symbol__analyticsIsSupported";globalThis[dA]||=oA().then(n=>globalThis[o_]=n).catch(()=>globalThis[o_]=!1);var Dd={async:()=>globalThis[dA],sync:()=>{let n=globalThis[o_];if(n===void 0)throw new Error(Fs("Analytics"));return n}},hA=Dd.async,fA=Se(iA,!0);var HB=Se(r_,!0);var qB=Se(aA,!0);var c_=(()=>{class n{initialized;disposables=[];constructor(t,r,i){B("angularfire",xe.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),hA().then(()=>{let o=i.get(wi);o?this.disposables=[WS(t).subscribe(a=>{qB(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(K(Ii),K(W),K(ve))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),zB="firebase_event_origin",GB="firebase_previous_class",WB="firebase_previous_id",KB="firebase_previous_screen",QB="firebase_screen_class",cA="firebase_screen_id",YB="firebase_screen",a_="outlet",ZB="page_path",JB="page_title",Xa="screen_class",uA="screen_name",XB="screen_view",e$="auto",t$="#",n$=Math.floor(Math.random()*(2**32-1))-2**31,i_={},r$=n=>{let e=[n[Xa],n[a_]].join(t$);if(i_.hasOwnProperty(e))return i_[e];{let t=n$++;return i_[e]=t,t}},i$=(n,e,t)=>n.events.pipe(St(i=>i instanceof Va)).pipe(Ft(i=>{let o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,m=>m.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(m=>m).find(m=>m.outlet===i.snapshot.outlet);if(!a)return q(null);let u=a;for(;u.firstChild;)u=u.firstChild;let l=u.pathFromRoot.map(m=>m.routeConfig?.path).filter(m=>m).join("/")||"/",h={[uA]:l,[ZB]:`/${o}`,[zB]:e$,[YB]:l,[a_]:i.snapshot.outlet};e&&(h[JB]=e.getTitle());let p=a.component;if(p){if(p===um){let m=i.snapshot;for(;m.firstChild;)m=m.firstChild;p=m.component}}else p=i.snapshot.component;if(typeof p=="string")return q(Me(V({},h),{[Xa]:p}));if(p){let m=t.resolveComponentFactory(p);return q(Me(V({},h),{[Xa]:m.selector}))}return q(null)}),St(i=>!!i),re(i=>V({[QB]:i[Xa],[cA]:r$(i)},i)),Mf(i=>i[a_]),Ge(i=>i.pipe(Fu((s,o)=>JSON.stringify(s)===JSON.stringify(o)),is(void 0),Vu(),re(([s,o])=>s?V({[GB]:s[Xa],[KB]:s[uA],[WB]:s[cA]},o):o)))),pA=(()=>{class n{disposable;constructor(t,r,i,s,o,a){B("angularfire",xe.full,"screen-tracking"),hA().then(()=>{let u=a.get(wi);!t||!u||s.runOutsideAngular(()=>{this.disposable=i$(t,r,i).pipe(Ft(l=>v(this,null,function*(){return o&&(yield o.initialized),HB(u,XB,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(K(rd,8),K(jl,8),K(br),K(W),K(c_,8),K(ve))};static \u0275prov=z({token:n,factory:n.\u0275fac})}return n})(),u_=new U("angularfire2.analytics-instances");function s$(n,e){if(!Dd.sync())return null;let t=Je(lA,n,e);return t&&new wi(t)}function o$(n){return(e,t)=>{if(!Dd.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new wi(r)}}var a$={provide:s_,deps:[[new Y,u_]]},c$={provide:wi,useFactory:s$,deps:[[new Y,u_],ke]};function gA(n,...e){return B("angularfire",xe.full,"analytics"),Re([c$,a$,{provide:Nr,useValue:Dd.async,multi:!0},{provide:u_,useFactory:o$(n),multi:!0,deps:[W,ve,$e,Le,...e]}])}var mA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_A={};var Or,l_;(function(){var n;function e(T,y){function I(){}I.prototype=y.prototype,T.D=y.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(C,b,S){for(var w=Array(arguments.length-2),Fn=2;Fn<arguments.length;Fn++)w[Fn-2]=arguments[Fn];return y.prototype[b].apply(C,w)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,y,I){I||(I=0);var C=Array(16);if(typeof y=="string")for(var b=0;16>b;++b)C[b]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(b=0;16>b;++b)C[b]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=T.g[0],I=T.g[1],b=T.g[2];var S=T.g[3],w=y+(S^I&(b^S))+C[0]+3614090360&4294967295;y=I+(w<<7&4294967295|w>>>25),w=S+(b^y&(I^b))+C[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=b+(I^S&(y^I))+C[2]+606105819&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(y^b&(S^y))+C[3]+3250441966&4294967295,I=b+(w<<22&4294967295|w>>>10),w=y+(S^I&(b^S))+C[4]+4118548399&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(b^y&(I^b))+C[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=b+(I^S&(y^I))+C[6]+2821735955&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(y^b&(S^y))+C[7]+4249261313&4294967295,I=b+(w<<22&4294967295|w>>>10),w=y+(S^I&(b^S))+C[8]+1770035416&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(b^y&(I^b))+C[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=b+(I^S&(y^I))+C[10]+4294925233&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(y^b&(S^y))+C[11]+2304563134&4294967295,I=b+(w<<22&4294967295|w>>>10),w=y+(S^I&(b^S))+C[12]+1804603682&4294967295,y=I+(w<<7&4294967295|w>>>25),w=S+(b^y&(I^b))+C[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=b+(I^S&(y^I))+C[14]+2792965006&4294967295,b=S+(w<<17&4294967295|w>>>15),w=I+(y^b&(S^y))+C[15]+1236535329&4294967295,I=b+(w<<22&4294967295|w>>>10),w=y+(b^S&(I^b))+C[1]+4129170786&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(y^I))+C[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=b+(y^I&(S^y))+C[11]+643717713&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(b^S))+C[0]+3921069994&4294967295,I=b+(w<<20&4294967295|w>>>12),w=y+(b^S&(I^b))+C[5]+3593408605&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(y^I))+C[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=b+(y^I&(S^y))+C[15]+3634488961&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(b^S))+C[4]+3889429448&4294967295,I=b+(w<<20&4294967295|w>>>12),w=y+(b^S&(I^b))+C[9]+568446438&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(y^I))+C[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=b+(y^I&(S^y))+C[3]+4107603335&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(b^S))+C[8]+1163531501&4294967295,I=b+(w<<20&4294967295|w>>>12),w=y+(b^S&(I^b))+C[13]+2850285829&4294967295,y=I+(w<<5&4294967295|w>>>27),w=S+(I^b&(y^I))+C[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=b+(y^I&(S^y))+C[7]+1735328473&4294967295,b=S+(w<<14&4294967295|w>>>18),w=I+(S^y&(b^S))+C[12]+2368359562&4294967295,I=b+(w<<20&4294967295|w>>>12),w=y+(I^b^S)+C[5]+4294588738&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^b)+C[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=b+(S^y^I)+C[11]+1839030562&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^y)+C[14]+4259657740&4294967295,I=b+(w<<23&4294967295|w>>>9),w=y+(I^b^S)+C[1]+2763975236&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^b)+C[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=b+(S^y^I)+C[7]+4139469664&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^y)+C[10]+3200236656&4294967295,I=b+(w<<23&4294967295|w>>>9),w=y+(I^b^S)+C[13]+681279174&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^b)+C[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=b+(S^y^I)+C[3]+3572445317&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^y)+C[6]+76029189&4294967295,I=b+(w<<23&4294967295|w>>>9),w=y+(I^b^S)+C[9]+3654602809&4294967295,y=I+(w<<4&4294967295|w>>>28),w=S+(y^I^b)+C[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=b+(S^y^I)+C[15]+530742520&4294967295,b=S+(w<<16&4294967295|w>>>16),w=I+(b^S^y)+C[2]+3299628645&4294967295,I=b+(w<<23&4294967295|w>>>9),w=y+(b^(I|~S))+C[0]+4096336452&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~b))+C[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=b+(y^(S|~I))+C[14]+2878612391&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~y))+C[5]+4237533241&4294967295,I=b+(w<<21&4294967295|w>>>11),w=y+(b^(I|~S))+C[12]+1700485571&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~b))+C[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=b+(y^(S|~I))+C[10]+4293915773&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~y))+C[1]+2240044497&4294967295,I=b+(w<<21&4294967295|w>>>11),w=y+(b^(I|~S))+C[8]+1873313359&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~b))+C[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=b+(y^(S|~I))+C[6]+2734768916&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~y))+C[13]+1309151649&4294967295,I=b+(w<<21&4294967295|w>>>11),w=y+(b^(I|~S))+C[4]+4149444226&4294967295,y=I+(w<<6&4294967295|w>>>26),w=S+(I^(y|~b))+C[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=b+(y^(S|~I))+C[2]+718787259&4294967295,b=S+(w<<15&4294967295|w>>>17),w=I+(S^(b|~y))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(b+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+b&4294967295,T.g[3]=T.g[3]+S&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var I=y-this.blockSize,C=this.B,b=this.h,S=0;S<y;){if(b==0)for(;S<=I;)i(this,T,S),S+=this.blockSize;if(typeof T=="string"){for(;S<y;)if(C[b++]=T.charCodeAt(S++),b==this.blockSize){i(this,C),b=0;break}}else for(;S<y;)if(C[b++]=T[S++],b==this.blockSize){i(this,C),b=0;break}}this.h=b,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var I=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=I&255,I/=256;for(this.u(T),T=Array(16),y=I=0;4>y;++y)for(var C=0;32>C;C+=8)T[I++]=this.g[y]>>>C&255;return T};function s(T,y){var I=a;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=y(T)}function o(T,y){this.h=y;for(var I=[],C=!0,b=T.length-1;0<=b;b--){var S=T[b]|0;C&&S==y||(I[b]=S,C=!1)}this.g=I}var a={};function u(T){return-128<=T&&128>T?s(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return p;if(0>T)return A(l(-T));for(var y=[],I=1,C=0;T>=I;C++)y[C]=T/I|0,I*=4294967296;return new o(y,0)}function h(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return A(h(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(y,8)),C=p,b=0;b<T.length;b+=8){var S=Math.min(8,T.length-b),w=parseInt(T.substring(b,b+S),y);8>S?(S=l(Math.pow(y,S)),C=C.j(S).add(l(w))):(C=C.j(I),C=C.add(l(w)))}return C}var p=u(0),m=u(1),_=u(16777216);n=o.prototype,n.m=function(){if(N(this))return-A(this).m();for(var T=0,y=1,I=0;I<this.g.length;I++){var C=this.i(I);T+=(0<=C?C:4294967296+C)*y,y*=4294967296}return T},n.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(E(this))return"0";if(N(this))return"-"+A(this).toString(T);for(var y=l(Math.pow(T,6)),I=this,C="";;){var b=J(I,y).g;I=M(I,b.j(y));var S=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=b,E(I))return S+C;for(;6>S.length;)S="0"+S;C=S+C}},n.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function E(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function N(T){return T.h==-1}n.l=function(T){return T=M(this,T),N(T)?-1:E(T)?0:1};function A(T){for(var y=T.g.length,I=[],C=0;C<y;C++)I[C]=~T.g[C];return new o(I,~T.h).add(m)}n.abs=function(){return N(this)?A(this):this},n.add=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0,b=0;b<=y;b++){var S=C+(this.i(b)&65535)+(T.i(b)&65535),w=(S>>>16)+(this.i(b)>>>16)+(T.i(b)>>>16);C=w>>>16,S&=65535,w&=65535,I[b]=w<<16|S}return new o(I,I[I.length-1]&-2147483648?-1:0)};function M(T,y){return T.add(A(y))}n.j=function(T){if(E(this)||E(T))return p;if(N(this))return N(T)?A(this).j(A(T)):A(A(this).j(T));if(N(T))return A(this.j(A(T)));if(0>this.l(_)&&0>T.l(_))return l(this.m()*T.m());for(var y=this.g.length+T.g.length,I=[],C=0;C<2*y;C++)I[C]=0;for(C=0;C<this.g.length;C++)for(var b=0;b<T.g.length;b++){var S=this.i(C)>>>16,w=this.i(C)&65535,Fn=T.i(b)>>>16,bo=T.i(b)&65535;I[2*C+2*b]+=w*bo,L(I,2*C+2*b),I[2*C+2*b+1]+=S*bo,L(I,2*C+2*b+1),I[2*C+2*b+1]+=w*Fn,L(I,2*C+2*b+1),I[2*C+2*b+2]+=S*Fn,L(I,2*C+2*b+2)}for(C=0;C<y;C++)I[C]=I[2*C+1]<<16|I[2*C];for(C=y;C<2*y;C++)I[C]=0;return new o(I,0)};function L(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function H(T,y){this.g=T,this.h=y}function J(T,y){if(E(y))throw Error("division by zero");if(E(T))return new H(p,p);if(N(T))return y=J(A(T),y),new H(A(y.g),A(y.h));if(N(y))return y=J(T,A(y)),new H(A(y.g),y.h);if(30<T.g.length){if(N(T)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var I=m,C=y;0>=C.l(T);)I=Ne(I),C=Ne(C);var b=X(I,1),S=X(C,1);for(C=X(C,2),I=X(I,2);!E(C);){var w=S.add(C);0>=w.l(T)&&(b=b.add(I),S=w),C=X(C,1),I=X(I,1)}return y=M(T,b.j(y)),new H(b,y)}for(b=p;0<=T.l(y);){for(I=Math.max(1,Math.floor(T.m()/y.m())),C=Math.ceil(Math.log(I)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),S=l(I),w=S.j(y);N(w)||0<w.l(T);)I-=C,S=l(I),w=S.j(y);E(S)&&(S=m),b=b.add(S),T=M(T,w)}return new H(b,T)}n.A=function(T){return J(this,T).h},n.and=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)&T.i(C);return new o(I,this.h&T.h)},n.or=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)|T.i(C);return new o(I,this.h|T.h)},n.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],C=0;C<y;C++)I[C]=this.i(C)^T.i(C);return new o(I,this.h^T.h)};function Ne(T){for(var y=T.g.length+1,I=[],C=0;C<y;C++)I[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(I,T.h)}function X(T,y){var I=y>>5;y%=32;for(var C=T.g.length-I,b=[],S=0;S<C;S++)b[S]=0<y?T.i(S+I)>>>y|T.i(S+I+1)<<32-y:T.i(S+I);return new o(b,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,l_=_A.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Or=_A.Integer=o}).apply(typeof mA<"u"?mA:typeof self<"u"?self:typeof window<"u"?window:{});var Sd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tr={};var d_,u$,js,h_,ec,Ad,f_,p_,g_;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sd=="object"&&Sd];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var R=f++;return{value:d(R,c[R]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function _(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function E(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,R){for(var x=Array(arguments.length-2),be=2;be<arguments.length;be++)x[be-2]=arguments[be];return d.prototype[D].apply(g,x)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function A(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,R=g.length||0;c.length=D+R;for(let x=0;x<R;x++)c[D+x]=g[x]}else c.push(g)}}class M{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function L(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function J(c){return J[" "](c),c}J[" "]=function(){};var Ne=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function T(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let R=0;R<I.length;R++)f=I[R],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=kh;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Fn{constructor(){this.h=this.g=null}add(d,f){let g=bo.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var bo=new M(()=>new HP,c=>c.reset());class HP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Do,So=!1,kh=new Fn,uw=()=>{let c=a.Promise.resolve(void 0);Do=()=>{c.then(qP)}};var qP=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=bo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}So=!1};function lr(){this.s=this.s,this.C=this.C}lr.prototype.s=!1,lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ht(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}ht.prototype.h=function(){this.defaultPrevented=!0};var zP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ao(c,d){if(ht.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ne){e:{try{J(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:GP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ao.aa.h.call(this)}}E(Ao,ht);var GP={2:"touch",3:"pen",4:"mouse"};Ao.prototype.h=function(){Ao.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ro="closure_listenable_"+(1e6*Math.random()|0),WP=0;function KP(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++WP,this.da=this.fa=!1}function Kc(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Qc(c){this.src=c,this.g={},this.h=0}Qc.prototype.add=function(c,d,f,g,D){var R=c.toString();c=this.g[R],c||(c=this.g[R]=[],this.h++);var x=Fh(c,d,g,D);return-1<x?(d=c[x],f||(d.fa=!1)):(d=new KP(d,this.src,R,!!g,D),d.fa=f,c.push(d)),d};function Oh(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),R;(R=0<=D)&&Array.prototype.splice.call(g,D,1),R&&(Kc(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Fh(c,d,f,g){for(var D=0;D<c.length;++D){var R=c[D];if(!R.da&&R.listener==d&&R.capture==!!f&&R.ha==g)return D}return-1}var Lh="closure_lm_"+(1e6*Math.random()|0),Vh={};function lw(c,d,f,g,D){if(g&&g.once)return hw(c,d,f,g,D);if(Array.isArray(d)){for(var R=0;R<d.length;R++)lw(c,d[R],f,g,D);return null}return f=$h(f),c&&c[Ro]?c.K(d,f,l(g)?!!g.capture:!!g,D):dw(c,d,f,!1,g,D)}function dw(c,d,f,g,D,R){if(!d)throw Error("Invalid event type");var x=l(D)?!!D.capture:!!D,be=jh(c);if(be||(c[Lh]=be=new Qc(c)),f=be.add(d,f,g,x,R),f.proxy)return f;if(g=QP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)zP||(D=x),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(pw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function QP(){function c(f){return d.call(c.src,c.listener,f)}let d=YP;return c}function hw(c,d,f,g,D){if(Array.isArray(d)){for(var R=0;R<d.length;R++)hw(c,d[R],f,g,D);return null}return f=$h(f),c&&c[Ro]?c.L(d,f,l(g)?!!g.capture:!!g,D):dw(c,d,f,!0,g,D)}function fw(c,d,f,g,D){if(Array.isArray(d))for(var R=0;R<d.length;R++)fw(c,d[R],f,g,D);else g=l(g)?!!g.capture:!!g,f=$h(f),c&&c[Ro]?(c=c.i,d=String(d).toString(),d in c.g&&(R=c.g[d],f=Fh(R,f,g,D),-1<f&&(Kc(R[f]),Array.prototype.splice.call(R,f,1),R.length==0&&(delete c.g[d],c.h--)))):c&&(c=jh(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Fh(d,f,g,D)),(f=-1<c?d[c]:null)&&Uh(f))}function Uh(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ro])Oh(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(pw(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=jh(d))?(Oh(f,c),f.h==0&&(f.src=null,d[Lh]=null)):Kc(c)}}}function pw(c){return c in Vh?Vh[c]:Vh[c]="on"+c}function YP(c,d){if(c.da)c=!0;else{d=new Ao(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Uh(c),c=f.call(g,d)}return c}function jh(c){return c=c[Lh],c instanceof Qc?c:null}var Bh="__closure_events_fn_"+(1e9*Math.random()>>>0);function $h(c){return typeof c=="function"?c:(c[Bh]||(c[Bh]=function(d){return c.handleEvent(d)}),c[Bh])}function ft(){lr.call(this),this.i=new Qc(this),this.M=this,this.F=null}E(ft,lr),ft.prototype[Ro]=!0,ft.prototype.removeEventListener=function(c,d,f,g){fw(this,c,d,f,g)};function Ct(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new ht(d,c);else if(d instanceof ht)d.target=d.target||c;else{var D=d;d=new ht(g,c),C(d,D)}if(D=!0,f)for(var R=f.length-1;0<=R;R--){var x=d.g=f[R];D=Yc(x,g,!0,d)&&D}if(x=d.g=c,D=Yc(x,g,!0,d)&&D,D=Yc(x,g,!1,d)&&D,f)for(R=0;R<f.length;R++)x=d.g=f[R],D=Yc(x,g,!1,d)&&D}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Kc(f[g]);delete c.g[d],c.h--}}this.F=null},ft.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},ft.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Yc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,R=0;R<d.length;++R){var x=d[R];if(x&&!x.da&&x.capture==f){var be=x.listener,ct=x.ha||x.src;x.fa&&Oh(c.i,x),D=be.call(ct,g)!==!1&&D}}return D&&!g.defaultPrevented}function gw(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function mw(c){c.g=gw(()=>{c.g=null,c.i&&(c.i=!1,mw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class ZP extends lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:mw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function No(c){lr.call(this),this.h=c,this.g={}}E(No,lr);var _w=[];function yw(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&Uh(d)},c),c.g={}}No.prototype.N=function(){No.aa.N.call(this),yw(this)},No.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Hh=a.JSON.stringify,JP=a.JSON.parse,XP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function qh(){}qh.prototype.h=null;function vw(c){return c.h||(c.h=c.i())}function Iw(){}var Po={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function zh(){ht.call(this,"d")}E(zh,ht);function Gh(){ht.call(this,"c")}E(Gh,ht);var $r={},ww=null;function Zc(){return ww=ww||new ft}$r.La="serverreachability";function Ew(c){ht.call(this,$r.La,c)}E(Ew,ht);function Mo(c){let d=Zc();Ct(d,new Ew(d))}$r.STAT_EVENT="statevent";function Tw(c,d){ht.call(this,$r.STAT_EVENT,c),this.stat=d}E(Tw,ht);function bt(c){let d=Zc();Ct(d,new Tw(d,c))}$r.Ma="timingevent";function Cw(c,d){ht.call(this,$r.Ma,c),this.size=d}E(Cw,ht);function xo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function ko(){this.g=!0}ko.prototype.xa=function(){this.g=!1};function eM(c,d,f,g,D,R){c.info(function(){if(c.g)if(R)for(var x="",be=R.split("&"),ct=0;ct<be.length;ct++){var ye=be[ct].split("=");if(1<ye.length){var pt=ye[0];ye=ye[1];var gt=pt.split("_");x=2<=gt.length&&gt[1]=="type"?x+(pt+"="+ye+"&"):x+(pt+"=redacted&")}}else x=null;else x=R;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+x})}function tM(c,d,f,g,D,R,x){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+R+" "+x})}function Ui(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+rM(c,f)+(g?" "+g:"")})}function nM(c,d){c.info(function(){return"TIMEOUT: "+d})}ko.prototype.info=function(){};function rM(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var R=D[0];if(R!="noop"&&R!="stop"&&R!="close")for(var x=1;x<D.length;x++)D[x]=""}}}}return Hh(f)}catch{return d}}var Jc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wh;function Xc(){}E(Xc,qh),Xc.prototype.g=function(){return new XMLHttpRequest},Xc.prototype.i=function(){return{}},Wh=new Xc;function dr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new No(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Dw}function Dw(){this.i=null,this.g="",this.h=!1}var Sw={},Kh={};function Qh(c,d,f){c.L=1,c.v=ru(Ln(d)),c.m=f,c.P=!0,Aw(c,null)}function Aw(c,d){c.F=Date.now(),eu(c),c.A=Ln(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),$w(f.i,"t",g),c.C=0,f=c.j.J,c.h=new Dw,c.g=oE(c.j,f?d:null,!c.m),0<c.O&&(c.M=new ZP(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(_w[0]=D.toString()),D=_w);for(var R=0;R<D.length;R++){var x=lw(f,D[R],g||d.handleEvent,!1,d.h||d);if(!x)break;d.g[x.key]=x}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Mo(),eM(c.i,c.u,c.A,c.l,c.R,c.m)}dr.prototype.ca=function(c){c=c.target;let d=this.M;d&&Vn(c)==3?d.j():this.Y(c)},dr.prototype.Y=function(c){try{if(c==this.g)e:{let gt=Vn(this.g);var d=this.g.Ba();let $i=this.g.Z();if(!(3>gt)&&(gt!=3||this.g&&(this.h.h||this.g.oa()||Qw(this.g)))){this.J||gt!=4||d==7||(d==8||0>=$i?Mo(3):Mo(2)),Yh(this);var f=this.g.Z();this.X=f;t:if(Rw(this)){var g=Qw(this.g);c="";var D=g.length,R=Vn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Hr(this),Oo(this);var x="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(R&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,x=this.h.g}else x=this.g.oa();if(this.o=f==200,tM(this.i,this.u,this.A,this.l,this.R,gt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var be,ct=this.g;if((be=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(be)){var ye=be;break t}}ye=null}if(f=ye)Ui(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zh(this,f);else{this.o=!1,this.s=3,bt(12),Hr(this),Oo(this);break e}}if(this.P){f=!0;let on;for(;!this.J&&this.C<x.length;)if(on=iM(this,x),on==Kh){gt==4&&(this.s=4,bt(14),f=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Sw){this.s=4,bt(15),Ui(this.i,this.l,x,"[Invalid Chunk]"),f=!1;break}else Ui(this.i,this.l,on,null),Zh(this,on);if(Rw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gt!=4||x.length!=0||this.h.h||(this.s=1,bt(16),f=!1),this.o=this.o&&f,!f)Ui(this.i,this.l,x,"[Invalid Chunked Response]"),Hr(this),Oo(this);else if(0<x.length&&!this.W){this.W=!0;var pt=this.j;pt.g==this&&pt.ba&&!pt.M&&(pt.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),rf(pt),pt.M=!0,bt(11))}}else Ui(this.i,this.l,x,null),Zh(this,x);gt==4&&Hr(this),this.o&&!this.J&&(gt==4?nE(this.j,this):(this.o=!1,eu(this)))}else wM(this.g),f==400&&0<x.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),Hr(this),Oo(this)}}}catch{}finally{}};function Rw(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function iM(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Kh:(f=Number(d.substring(f,g)),isNaN(f)?Sw:(g+=1,g+f>d.length?Kh:(d=d.slice(g,g+f),c.C=g+f,d)))}dr.prototype.cancel=function(){this.J=!0,Hr(this)};function eu(c){c.S=Date.now()+c.I,Nw(c,c.I)}function Nw(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=xo(m(c.ba,c),d)}function Yh(c){c.B&&(a.clearTimeout(c.B),c.B=null)}dr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(nM(this.i,this.A),this.L!=2&&(Mo(),bt(17)),Hr(this),this.s=2,Oo(this)):Nw(this,this.S-c)};function Oo(c){c.j.G==0||c.J||nE(c.j,c)}function Hr(c){Yh(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,yw(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Zh(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Jh(f.h,c))){if(!c.K&&Jh(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)cu(f),ou(f);else break e;nf(f),bt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=xo(m(f.Za,f),6e3));if(1>=xw(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else zr(f,11)}else if((c.K||f.g==c)&&cu(f),!L(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let ye=D[d];if(f.T=ye[0],ye=ye[1],f.G==2)if(ye[0]=="c"){f.K=ye[1],f.ia=ye[2];let pt=ye[3];pt!=null&&(f.la=pt,f.j.info("VER="+f.la));let gt=ye[4];gt!=null&&(f.Aa=gt,f.j.info("SVER="+f.Aa));let $i=ye[5];$i!=null&&typeof $i=="number"&&0<$i&&(g=1.5*$i,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let on=c.g;if(on){let lu=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lu){var R=g.h;R.g||lu.indexOf("spdy")==-1&&lu.indexOf("quic")==-1&&lu.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Xh(R,R.h),R.h=null))}if(g.D){let sf=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;sf&&(g.ya=sf,Pe(g.I,g.D,sf))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var x=c;if(g.qa=sE(g,g.J?g.ia:null,g.W),x.K){kw(g.h,x);var be=x,ct=g.L;ct&&(be.I=ct),be.B&&(Yh(be),eu(be)),g.g=x}else eE(g);0<f.i.length&&au(f)}else ye[0]!="stop"&&ye[0]!="close"||zr(f,7);else f.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?zr(f,7):tf(f):ye[0]!="noop"&&f.l&&f.l.ta(ye),f.v=0)}}Mo(4)}catch{}}var sM=class{constructor(c,d){this.g=c,this.map=d}};function Pw(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mw(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xw(c){return c.h?1:c.g?c.g.size:0}function Jh(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Xh(c,d){c.g?c.g.add(d):c.h=d}function kw(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}Pw.prototype.cancel=function(){if(this.i=Ow(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function Ow(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function oM(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function aM(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function Fw(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=aM(c),g=oM(c),D=g.length,R=0;R<D;R++)d.call(void 0,g[R],f&&f[R],c)}var Lw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cM(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var R=c[f].substring(0,g);D=c[f].substring(g+1)}else R=c[f];d(R,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function qr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof qr){this.h=c.h,tu(this,c.j),this.o=c.o,this.g=c.g,nu(this,c.s),this.l=c.l;var d=c.i,f=new Vo;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Vw(this,f),this.m=c.m}else c&&(d=String(c).match(Lw))?(this.h=!1,tu(this,d[1]||"",!0),this.o=Fo(d[2]||""),this.g=Fo(d[3]||"",!0),nu(this,d[4]),this.l=Fo(d[5]||"",!0),Vw(this,d[6]||"",!0),this.m=Fo(d[7]||"")):(this.h=!1,this.i=new Vo(null,this.h))}qr.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Lo(d,Uw,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Lo(d,Uw,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Lo(f,f.charAt(0)=="/"?dM:lM,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Lo(f,fM)),c.join("")};function Ln(c){return new qr(c)}function tu(c,d,f){c.j=f?Fo(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function nu(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function Vw(c,d,f){d instanceof Vo?(c.i=d,pM(c.i,c.h)):(f||(d=Lo(d,hM)),c.i=new Vo(d,c.h))}function Pe(c,d,f){c.i.set(d,f)}function ru(c){return Pe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Fo(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Lo(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,uM),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function uM(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Uw=/[#\/\?@]/g,lM=/[#\?:]/g,dM=/[#\?]/g,hM=/[#\?@]/g,fM=/#/g;function Vo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function hr(c){c.g||(c.g=new Map,c.h=0,c.i&&cM(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Vo.prototype,n.add=function(c,d){hr(this),this.i=null,c=ji(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function jw(c,d){hr(c),d=ji(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function Bw(c,d){return hr(c),d=ji(c,d),c.g.has(d)}n.forEach=function(c,d){hr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},n.na=function(){hr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let R=0;R<D.length;R++)f.push(d[g])}return f},n.V=function(c){hr(this);let d=[];if(typeof c=="string")Bw(this,c)&&(d=d.concat(this.g.get(ji(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return hr(this),this.i=null,c=ji(this,c),Bw(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function $w(c,d,f){jw(c,d),0<f.length&&(c.i=null,c.g.set(ji(c,d),N(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let R=encodeURIComponent(String(g)),x=this.V(g);for(g=0;g<x.length;g++){var D=R;x[g]!==""&&(D+="="+encodeURIComponent(String(x[g]))),c.push(D)}}return this.i=c.join("&")};function ji(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function pM(c,d){d&&!c.j&&(hr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(jw(this,g),$w(this,D,f))},c)),c.j=d}function gM(c,d){let f=new ko;if(a.Image){let g=new Image;g.onload=_(fr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=_(fr,f,"TestLoadImage: error",!1,d,g),g.onabort=_(fr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=_(fr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function mM(c,d){let f=new ko,g=new AbortController,D=setTimeout(()=>{g.abort(),fr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(R=>{clearTimeout(D),R.ok?fr(f,"TestPingServer: ok",!0,d):fr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),fr(f,"TestPingServer: error",!1,d)})}function fr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function _M(){this.g=new XP}function yM(c,d,f){let g=f||"";try{Fw(c,function(D,R){let x=D;l(D)&&(x=Hh(D)),d.push(g+R+"="+encodeURIComponent(x))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function Uo(c){this.l=c.Ub||null,this.j=c.eb||!1}E(Uo,qh),Uo.prototype.g=function(){return new iu(this.l,this.j)},Uo.prototype.i=function(c){return function(){return c}}({});function iu(c,d){ft.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(iu,ft),n=iu.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Bo(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,jo(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bo(this)),this.g&&(this.readyState=3,Bo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hw(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hw(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?jo(this):Bo(this),this.readyState==3&&Hw(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,jo(this))},n.Qa=function(c){this.g&&(this.response=c,jo(this))},n.ga=function(){this.g&&jo(this)};function jo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Bo(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Bo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(iu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qw(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function ef(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=qw(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Pe(c,d,f))}function Ue(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Ue,ft);var vM=/^https?$/i,IM=["POST","PUT"];n=Ue.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wh.g(),this.v=this.o?vw(this.o):vw(Wh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(R){zw(this,R);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let R of g.keys())f.set(R,g.get(R));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IM,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[R,x]of f)this.g.setRequestHeader(R,x);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Kw(this),this.u=!0,this.g.send(c),this.u=!1}catch(R){zw(this,R)}};function zw(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,Gw(c),su(c)}function Gw(c){c.A||(c.A=!0,Ct(c,"complete"),Ct(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ct(this,"complete"),Ct(this,"abort"),su(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),su(this,!0)),Ue.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ww(this):this.bb())},n.bb=function(){Ww(this)};function Ww(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Vn(c)!=4||c.Z()!=2)){if(c.u&&Vn(c)==4)gw(c.Ea,0,c);else if(Ct(c,"readystatechange"),Vn(c)==4){c.h=!1;try{let x=c.Z();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=x===0){var D=String(c.D).match(Lw)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!vM.test(D?D.toLowerCase():"")}f=g}if(f)Ct(c,"complete"),Ct(c,"success");else{c.m=6;try{var R=2<Vn(c)?c.g.statusText:""}catch{R=""}c.l=R+" ["+c.Z()+"]",Gw(c)}}finally{su(c)}}}}function su(c,d){if(c.g){Kw(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Ct(c,"ready");try{f.onreadystatechange=g}catch{}}}function Kw(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Vn(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Vn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),JP(d)}};function Qw(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function wM(c){let d={};c=(c.g&&2<=Vn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(L(c[g]))continue;var f=b(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let R=d[D]||[];d[D]=R,R.push(f)}T(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $o(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function Yw(c){this.Aa=0,this.i=[],this.j=new ko,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$o("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$o("baseRetryDelayMs",5e3,c),this.cb=$o("retryDelaySeedMs",1e4,c),this.Wa=$o("forwardChannelMaxRetries",2,c),this.wa=$o("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Pw(c&&c.concurrentRequestLimit),this.Da=new _M,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Yw.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){bt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=sE(this,null,this.W),au(this)};function tf(c){if(Zw(c),c.G==3){var d=c.U++,f=Ln(c.I);if(Pe(f,"SID",c.K),Pe(f,"RID",d),Pe(f,"TYPE","terminate"),Ho(c,f),d=new dr(c,c.j,d),d.L=2,d.v=ru(Ln(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=oE(d.j,null),d.g.ea(d.v)),d.F=Date.now(),eu(d)}iE(c)}function ou(c){c.g&&(rf(c),c.g.cancel(),c.g=null)}function Zw(c){ou(c),c.u&&(a.clearTimeout(c.u),c.u=null),cu(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function au(c){if(!Mw(c.h)&&!c.s){c.s=!0;var d=c.Ga;Do||uw(),So||(Do(),So=!0),kh.add(d,c),c.B=0}}function EM(c,d){return xw(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=xo(m(c.Ga,c,d),rE(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new dr(this,this.j,c),R=this.o;if(this.S&&(R?(R=y(R),C(R,this.S)):R=this.S),this.m!==null||this.O||(D.H=R,R=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=Xw(this,D,d),f=Ln(this.I),Pe(f,"RID",c),Pe(f,"CVER",22),this.D&&Pe(f,"X-HTTP-Session-Id",this.D),Ho(this,f),R&&(this.O?d="headers="+encodeURIComponent(String(qw(R)))+"&"+d:this.m&&ef(f,this.m,R)),Xh(this.h,D),this.Ua&&Pe(f,"TYPE","init"),this.P?(Pe(f,"$req",d),Pe(f,"SID","null"),D.T=!0,Qh(D,f,null)):Qh(D,f,d),this.G=2}}else this.G==3&&(c?Jw(this,c):this.i.length==0||Mw(this.h)||Jw(this))};function Jw(c,d){var f;d?f=d.l:f=c.U++;let g=Ln(c.I);Pe(g,"SID",c.K),Pe(g,"RID",f),Pe(g,"AID",c.T),Ho(c,g),c.m&&c.o&&ef(g,c.m,c.o),f=new dr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=Xw(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Xh(c.h,f),Qh(f,g,d)}function Ho(c,d){c.H&&X(c.H,function(f,g){Pe(d,g,f)}),c.l&&Fw({},function(f,g){Pe(d,g,f)})}function Xw(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let R=-1;for(;;){let x=["count="+f];R==-1?0<f?(R=D[0].g,x.push("ofs="+R)):R=0:x.push("ofs="+R);let be=!0;for(let ct=0;ct<f;ct++){let ye=D[ct].g,pt=D[ct].map;if(ye-=R,0>ye)R=Math.max(0,D[ct].g-100),be=!1;else try{yM(pt,x,"req"+ye+"_")}catch{g&&g(pt)}}if(be){g=x.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function eE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Do||uw(),So||(Do(),So=!0),kh.add(d,c),c.v=0}}function nf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=xo(m(c.Fa,c),rE(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,tE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=xo(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),ou(this),tE(this))};function rf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function tE(c){c.g=new dr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Ln(c.qa);Pe(d,"RID","rpc"),Pe(d,"SID",c.K),Pe(d,"AID",c.T),Pe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Pe(d,"TO",c.ja),Pe(d,"TYPE","xmlhttp"),Ho(c,d),c.m&&c.o&&ef(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=ru(Ln(d)),f.m=null,f.P=!0,Aw(f,c)}n.Za=function(){this.C!=null&&(this.C=null,ou(this),nf(this),bt(19))};function cu(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function nE(c,d){var f=null;if(c.g==d){cu(c),rf(c),c.g=null;var g=2}else if(Jh(c.h,d))f=d.D,kw(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Zc(),Ct(g,new Cw(g,f)),au(c)}else eE(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&EM(c,d)||g==2&&nf(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:zr(c,5);break;case 4:zr(c,10);break;case 3:zr(c,6);break;default:zr(c,2)}}}function rE(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function zr(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new qr(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||tu(g,"https"),ru(g),D?gM(g.toString(),f):mM(g.toString(),f)}else bt(2);c.G=0,c.l&&c.l.sa(d),iE(c),Zw(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function iE(c){if(c.G=0,c.ka=[],c.l){let d=Ow(c.h);(d.length!=0||c.i.length!=0)&&(A(c.ka,d),A(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function sE(c,d,f){var g=f instanceof qr?Ln(f):new qr(f);if(g.g!="")d&&(g.g=d+"."+g.g),nu(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var R=new qr(null);g&&tu(R,g),d&&(R.g=d),D&&nu(R,D),f&&(R.l=f),g=R}return f=c.D,d=c.ya,f&&d&&Pe(g,f,d),Pe(g,"VER",c.la),Ho(c,g),g}function oE(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ue(new Uo({eb:f})):new Ue(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function aE(){}n=aE.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function uu(){}uu.prototype.g=function(c,d){return new Bt(c,d)};function Bt(c,d){ft.call(this),this.g=new Yw(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!L(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!L(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Bi(this)}E(Bt,ft),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){tf(this.g)},Bt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Hh(c),c=f);d.i.push(new sM(d.Ya++,c)),d.G==3&&au(d)},Bt.prototype.N=function(){this.g.l=null,delete this.j,tf(this.g),delete this.g,Bt.aa.N.call(this)};function cE(c){zh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}E(cE,zh);function uE(){Gh.call(this),this.status=1}E(uE,Gh);function Bi(c){this.g=c}E(Bi,aE),Bi.prototype.ua=function(){Ct(this.g,"a")},Bi.prototype.ta=function(c){Ct(this.g,new cE(c))},Bi.prototype.sa=function(c){Ct(this.g,new uE)},Bi.prototype.ra=function(){Ct(this.g,"b")},uu.prototype.createWebChannel=uu.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,g_=tr.createWebChannelTransport=function(){return new uu},p_=tr.getStatEventTarget=function(){return Zc()},f_=tr.Event=$r,Ad=tr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Jc.NO_ERROR=0,Jc.TIMEOUT=8,Jc.HTTP_ERROR=6,ec=tr.ErrorCode=Jc,bw.COMPLETE="complete",h_=tr.EventType=bw,Iw.EventType=Po,Po.OPEN="a",Po.CLOSE="b",Po.ERROR="c",Po.MESSAGE="d",ft.prototype.listen=ft.prototype.K,js=tr.WebChannel=Iw,u$=tr.FetchXmlHttpFactory=Uo,Ue.prototype.listenOnce=Ue.prototype.L,Ue.prototype.getLastError=Ue.prototype.Ka,Ue.prototype.getLastErrorCode=Ue.prototype.Ba,Ue.prototype.getStatus=Ue.prototype.Z,Ue.prototype.getResponseJson=Ue.prototype.Oa,Ue.prototype.getResponseText=Ue.prototype.oa,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Ha,d_=tr.XhrIo=Ue}).apply(typeof Sd<"u"?Sd:typeof self<"u"?self:typeof window<"u"?window:{});var yA="@firebase/firestore";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var ao="10.14.0";var Di=new Cn("@firebase/firestore");function tc(){return Di.logLevel}function j(n,...e){if(Di.logLevel<=_t.DEBUG){let t=e.map(Ky);Di.debug(`Firestore (${ao}): ${n}`,...t)}}function rr(n,...e){if(Di.logLevel<=_t.ERROR){let t=e.map(Ky);Di.error(`Firestore (${ao}): ${n}`,...t)}}function Qs(n,...e){if(Di.logLevel<=_t.WARN){let t=e.map(Ky);Di.warn(`Firestore (${ao}): ${n}`,...t)}}function Ky(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function ne(n="Unexpected state"){let e=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: `+n;throw rr(e),new Error(e)}function He(n,e){n||ne()}function fe(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},$=class extends xt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Fr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var xd=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},w_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}},E_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},T_=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),s=new Fr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Fr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>v(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Fr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(He(typeof r.accessToken=="string"),new xd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string"),new ot(e)}},C_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},b_=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new C_(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},D_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},S_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){He(this.o===void 0);let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(He(typeof t.token=="string"),this.R=t.token,new D_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function l$(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var A_=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=l$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function Ie(n,e){return n<e?-1:n>e?1:0}function Ys(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var tn=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new $(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new tn(0,0))}static max(){return new n(new tn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var kd=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&ne(),r===void 0?r=e.length-t:r>e.length-t&&ne(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},tt=class n extends kd{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new $(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},d$=/^[_a-zA-Z][_a-zA-Z0-9]*$/,mn=class n extends kd{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return d$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new $(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new $(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new $(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new $(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Q=class n{constructor(e){this.path=e}static fromPath(e){return new n(tt.fromString(e))}static fromName(e){return new n(tt.fromString(e).popFirst(5))}static empty(){return new n(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return tt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new tt(e.slice()))}};var R_=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};R_.UNKNOWN_ID=-1;function h$(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new tn(t+1,0):new tn(t,r));return new Si(i,Q.empty(),e)}function f$(n){return new Si(n.readTime,n.key,-1)}var Si=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),Q.empty(),-1)}static max(){return new n(se.max(),Q.empty(),-1)}};function p$(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Q.comparator(n.documentKey,e.documentKey),t!==0?t:Ie(n.largestBatchId,e.largestBatchId))}var g$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",N_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qy(n){return v(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==g$)throw n;j("LocalStore","Unexpectedly lost primary lease")})}var P=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ne(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},u=>r(u))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;t(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function m$(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ic(n){return n.name==="IndexedDbTransactionError"}var JA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function sh(n){return n==null}function Od(n){return n===0&&1/n==-1/0}var _$=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],k7=[..._$,"documentOverlays"],y$=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],v$=y$,I$=[...v$,"indexConfiguration","indexState","indexEntries"];var O7=[...I$,"globals"];function vA(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oh(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function w$(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ke=class n{constructor(e,t){this.comparator=e,this.root=t||Pn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new qs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new qs(this.root,e,this.comparator,!1)}getReverseIterator(){return new qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new qs(this.root,e,this.comparator,!0)}},qs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Pn=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ne();let e=this.left.check();if(e!==this.right.check())throw ne();return e+(this.isRed()?0:1)}};Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw ne()}get value(){throw ne()}get color(){throw ne()}get left(){throw ne()}get right(){throw ne()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var vt=class n{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fd(this.data.getIterator())}getIteratorFrom(e){return new Fd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Fd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ei=class n{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new n([])}unionWith(e){let t=new vt(mn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Ld=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ld("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var E$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ir(n){if(He(!!n),typeof n=="string"){let e=0,t=E$.exec(n);if(He(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Fe(n.seconds),nanos:Fe(n.nanos)}}function Fe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Lr(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}function Yy(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Zy(n){let e=n.mapValue.fields.__previous_value__;return Yy(e)?Zy(e):e}function cc(n){let e=ir(n.mapValue.fields.__local_write_time__.timestampValue);return new tn(e.seconds,e.nanos)}var P_=class{constructor(e,t,r,i,s,o,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Vd=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ai(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Yy(n)?4:e0(n)?9007199254740991:XA(n)?10:11:ne()}function xn(n,e){if(n===e)return!0;let t=Ai(n);if(t!==Ai(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cc(n).isEqual(cc(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ir(i.timestampValue),a=ir(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return Lr(i.bytesValue).isEqual(Lr(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Fe(i.geoPointValue.latitude)===Fe(s.geoPointValue.latitude)&&Fe(i.geoPointValue.longitude)===Fe(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Fe(i.integerValue)===Fe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Fe(i.doubleValue),a=Fe(s.doubleValue);return o===a?Od(o)===Od(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Ys(n.arrayValue.values||[],e.arrayValue.values||[],xn);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(vA(o)!==vA(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!xn(o[u],a[u])))return!1;return!0}(n,e);default:return ne()}}function uc(n,e){return(n.values||[]).find(t=>xn(t,e))!==void 0}function Zs(n,e){if(n===e)return 0;let t=Ai(n),r=Ai(e);if(t!==r)return Ie(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ie(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Fe(s.integerValue||s.doubleValue),u=Fe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return IA(n.timestampValue,e.timestampValue);case 4:return IA(cc(n),cc(e));case 5:return Ie(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Lr(s),u=Lr(o);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=Ie(a[l],u[l]);if(h!==0)return h}return Ie(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=Ie(Fe(s.latitude),Fe(o.latitude));return a!==0?a:Ie(Fe(s.longitude),Fe(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return wA(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,u,l,h;let p=s.fields||{},m=o.fields||{},_=(a=p.value)===null||a===void 0?void 0:a.arrayValue,E=(u=m.value)===null||u===void 0?void 0:u.arrayValue,N=Ie(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((h=E?.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:wA(_,E)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Rd.mapValue&&o===Rd.mapValue)return 0;if(s===Rd.mapValue)return 1;if(o===Rd.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=Ie(u[p],h[p]);if(m!==0)return m;let _=Zs(a[u[p]],l[h[p]]);if(_!==0)return _}return Ie(u.length,h.length)}(n.mapValue,e.mapValue);default:throw ne()}}function IA(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ie(n,e);let t=ir(n),r=ir(e),i=Ie(t.seconds,r.seconds);return i!==0?i:Ie(t.nanos,r.nanos)}function wA(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Zs(t[i],r[i]);if(s)return s}return Ie(t.length,r.length)}function Js(n){return M_(n)}function M_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=ir(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Lr(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=M_(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${M_(t.fields[o])}`;return i+"}"}(n.mapValue):ne()}function x_(n){return!!n&&"integerValue"in n}function Jy(n){return!!n&&"arrayValue"in n}function EA(n){return!!n&&"nullValue"in n}function TA(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function m_(n){return!!n&&"mapValue"in n}function XA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return oh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=rc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function e0(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!m_(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=rc(t)}setAll(e){let t=mn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=rc(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());m_(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];m_(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){oh(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(rc(this.value))}};var _n=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),nr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),nr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),nr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Xs=class{constructor(e,t){this.position=e,this.inclusive=t}};function CA(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),t.key):r=Zs(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bA(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xn(n.position[t],e.position[t]))return!1;return!0}var eo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function T$(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Ud=class{},rt=class n extends Ud{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new O_(e,t,r):t==="array-contains"?new V_(e,r):t==="in"?new U_(e,r):t==="not-in"?new j_(e,r):t==="array-contains-any"?new B_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new F_(e,r):new L_(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Zs(t,this.value)):t!==null&&Ai(this.value)===Ai(t)&&this.matchesComparison(Zs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},kn=class n extends Ud{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return t0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function t0(n){return n.op==="and"}function n0(n){return C$(n)&&t0(n)}function C$(n){for(let e of n.filters)if(e instanceof kn)return!1;return!0}function k_(n){if(n instanceof rt)return n.field.canonicalString()+n.op.toString()+Js(n.value);if(n0(n))return n.filters.map(e=>k_(e)).join(",");{let e=n.filters.map(t=>k_(t)).join(",");return`${n.op}(${e})`}}function r0(n,e){return n instanceof rt?function(r,i){return i instanceof rt&&r.op===i.op&&r.field.isEqual(i.field)&&xn(r.value,i.value)}(n,e):n instanceof kn?function(r,i){return i instanceof kn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&r0(o,i.filters[a]),!0):!1}(n,e):void ne()}function i0(n){return n instanceof rt?function(t){return`${t.field.canonicalString()} ${t.op} ${Js(t.value)}`}(n):n instanceof kn?function(t){return t.op.toString()+" {"+t.getFilters().map(i0).join(" ,")+"}"}(n):"Filter"}var O_=class extends rt{constructor(e,t,r){super(e,t,r),this.key=Q.fromName(r.referenceValue)}matches(e){let t=Q.comparator(e.key,this.key);return this.matchesComparison(t)}},F_=class extends rt{constructor(e,t){super(e,"in",t),this.keys=s0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},L_=class extends rt{constructor(e,t){super(e,"not-in",t),this.keys=s0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function s0(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Q.fromName(r.referenceValue))}var V_=class extends rt{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Jy(t)&&uc(t.arrayValue,this.value)}},U_=class extends rt{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&uc(this.value.arrayValue,t)}},j_=class extends rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(uc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!uc(this.value.arrayValue,t)}},B_=class extends rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Jy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>uc(this.value.arrayValue,r))}};var $_=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function DA(n,e=null,t=[],r=[],i=null,s=null,o=null){return new $_(n,e,t,r,i,s,o)}function Xy(n){let e=fe(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>k_(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),sh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Js(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Js(r)).join(",")),e.ue=t}return e.ue}function ev(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!T$(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!r0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!bA(n.startAt,e.startAt)&&bA(n.endAt,e.endAt)}function H_(n){return Q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var to=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function b$(n,e,t,r,i,s,o,a){return new to(n,e,t,r,i,s,o,a)}function tv(n){return new to(n)}function SA(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function D$(n){return n.collectionGroup!==null}function ic(n){let e=fe(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new vt(mn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new eo(s,r))}),t.has(mn.keyField().canonicalString())||e.ce.push(new eo(mn.keyField(),r))}return e.ce}function Mn(n){let e=fe(n);return e.le||(e.le=S$(e,ic(n))),e.le}function S$(n,e){if(n.limitType==="F")return DA(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new eo(i.field,s)});let t=n.endAt?new Xs(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Xs(n.startAt.position,n.startAt.inclusive):null;return DA(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function q_(n,e,t){return new to(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ah(n,e){return ev(Mn(n),Mn(e))&&n.limitType===e.limitType}function o0(n){return`${Xy(Mn(n))}|lt:${n.limitType}`}function Bs(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>i0(i)).join(", ")}]`),sh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Js(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Js(i)).join(",")),`Target(${r})`}(Mn(n))}; limitType=${n.limitType})`}function ch(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of ic(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=CA(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,ic(r),i)||r.endAt&&!function(o,a,u){let l=CA(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,ic(r),i))}(n,e)}function A$(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function a0(n){return(e,t)=>{let r=!1;for(let i of ic(n)){let s=R$(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function R$(n,e,t){let r=n.field.isKeyField()?Q.comparator(e.key,t.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Zs(u,l):ne()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ne()}}var Vr=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oh(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return w$(this.inner)}size(){return this.innerSize}};var N$=new Ke(Q.comparator);function Ur(){return N$}var c0=new Ke(Q.comparator);function nc(...n){let e=c0;for(let t of n)e=e.insert(t.key,t);return e}function P$(n){let e=c0;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ti(){return sc()}function u0(){return sc()}function sc(){return new Vr(n=>n.toString(),(n,e)=>n.isEqual(e))}var L7=new Ke(Q.comparator),M$=new vt(Q.comparator);function _e(...n){let e=M$;for(let t of n)e=e.add(t);return e}var x$=new vt(Ie);function k$(){return x$}function O$(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Od(e)?"-0":e}}function F$(n){return{integerValue:""+n}}var no=class{constructor(){this._=void 0}};function L$(n,e,t){return n instanceof lc?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Yy(s)&&(s=Zy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof ro?l0(n,e):n instanceof io?d0(n,e):function(i,s){let o=U$(i,s),a=AA(o)+AA(i.Pe);return x_(o)&&x_(i.Pe)?F$(a):O$(i.serializer,a)}(n,e)}function V$(n,e,t){return n instanceof ro?l0(n,e):n instanceof io?d0(n,e):t}function U$(n,e){return n instanceof dc?function(r){return x_(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var lc=class extends no{},ro=class extends no{constructor(e){super(),this.elements=e}};function l0(n,e){let t=h0(e);for(let r of n.elements)t.some(i=>xn(i,r))||t.push(r);return{arrayValue:{values:t}}}var io=class extends no{constructor(e){super(),this.elements=e}};function d0(n,e){let t=h0(e);for(let r of n.elements)t=t.filter(i=>!xn(i,r));return{arrayValue:{values:t}}}var dc=class extends no{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function AA(n){return Fe(n.integerValue||n.doubleValue)}function h0(n){return Jy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function j$(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof ro&&i instanceof ro||r instanceof io&&i instanceof io?Ys(r.elements,i.elements,xn):r instanceof dc&&i instanceof dc?xn(r.Pe,i.Pe):r instanceof lc&&i instanceof lc}(n.transform,e.transform)}var oc=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Pd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var hc=class{};function f0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new z_(n.key,oc.none()):new fc(n.key,n.data,oc.none());{let t=n.data,r=nr.empty(),i=new vt(mn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new so(n.key,r,new Ei(i.toArray()),oc.none())}}function B$(n,e,t){n instanceof fc?function(i,s,o){let a=i.value.clone(),u=NA(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof so?function(i,s,o){if(!Pd(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=NA(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(p0(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ac(n,e,t,r){return n instanceof fc?function(s,o,a,u){if(!Pd(s.precondition,o))return a;let l=s.value.clone(),h=PA(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof so?function(s,o,a,u){if(!Pd(s.precondition,o))return a;let l=PA(s.fieldTransforms,u,o),h=o.data;return h.setAll(p0(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(s,o,a){return Pd(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function RA(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ys(r,i,(s,o)=>j$(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var fc=class extends hc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},so=class extends hc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function p0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function NA(n,e,t){let r=new Map;He(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,V$(o,a,t[i]))}return r}function PA(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,L$(s,o,e))}return r}var z_=class extends hc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};var G_=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&B$(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ac(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=u0();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let u=f0(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_e())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(t,r)=>RA(t,r))&&Ys(this.baseMutations,e.baseMutations,(t,r)=>RA(t,r))}};var W_=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var K_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Xe,he;function g0(n){if(n===void 0)return rr("GRPC error has no .code"),k.UNKNOWN;switch(n){case Xe.OK:return k.OK;case Xe.CANCELLED:return k.CANCELLED;case Xe.UNKNOWN:return k.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return k.INTERNAL;case Xe.UNAVAILABLE:return k.UNAVAILABLE;case Xe.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Xe.NOT_FOUND:return k.NOT_FOUND;case Xe.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Xe.ABORTED:return k.ABORTED;case Xe.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Xe.DATA_LOSS:return k.DATA_LOSS;default:return ne()}}(he=Xe||(Xe={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";var MA=null;function $$(){return new TextEncoder}var H$=new Or([4294967295,4294967295],0);function xA(n){let e=$$().encode(n),t=new l_;return t.update(e),new Uint8Array(t.digest())}function kA(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Or([t,r],0),new Or([i,s],0)]}var Q_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ci(`Invalid padding: ${t}`);if(r<0)throw new Ci(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ci(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ci(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Or.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(Or.fromNumber(r)));return i.compare(H$)===1&&(i=new Or([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=xA(e),[r,i]=kA(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=xA(e),[r,i]=kA(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Ci=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var jd=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new Ke(Ie),Ur(),_e())}},pc=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,_e(),_e(),_e())}};var zs=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Bd=class{constructor(e,t){this.targetId=e,this.me=t}},$d=class{constructor(e,t,r=It.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Hd=class{constructor(){this.fe=0,this.ge=FA(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=_e(),t=_e(),r=_e();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ne()}}),new pc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=FA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,He(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Y_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ur(),this.qe=OA(),this.Qe=new Ke(Ie)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:ne()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(H_(s))if(r===0){let o=new Q(s.path);this.Ue(t,o,_n.newNoDocument(o,se.min()))}else He(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}MA?.et(function(h,p,m,_,E){var N,A,M,L,H,J;let Ne={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(Ne.bloomFilter={applied:E===0,hashCount:(N=X?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(L=(M=(A=X?.bits)===null||A===void 0?void 0:A.bitmap)===null||M===void 0?void 0:M.length)!==null&&L!==void 0?L:0,padding:(J=(H=X?.bits)===null||H===void 0?void 0:H.padding)!==null&&J!==void 0?J:0,mightContain:T=>{var y;return(y=_?.mightContain(T))!==null&&y!==void 0&&y}}),Ne}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=Lr(r).toUint8Array()}catch(u){if(u instanceof Ld)return Qs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Q_(o,i,s)}catch(u){return Qs(u instanceof Ci?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&H_(a.target)){let u=new Q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,_n.newNoDocument(u,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=_e();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new jd(e,t,this.Qe,this.ke,r);return this.ke=Ur(),this.qe=OA(),this.Qe=new Ke(Ie),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Hd,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new vt(Ie),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||j("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Hd),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function OA(){return new Ke(Q.comparator)}function FA(){return new Ke(Q.comparator)}var q$={asc:"ASCENDING",desc:"DESCENDING"},z$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},G$={and:"AND",or:"OR"},Z_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function J_(n,e){return n.useProto3Json||sh(e)?e:{value:e}}function W$(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function K$(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Gs(n){return He(!!n),se.fromTimestamp(function(t){let r=ir(t);return new tn(r.seconds,r.nanos)}(n))}function Q$(n,e){return X_(n,e).canonicalString()}function X_(n,e){let t=function(i){return new tt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function m0(n){let e=tt.fromString(n);return He(w0(e)),e}function __(n,e){let t=m0(e);if(t.get(1)!==n.databaseId.projectId)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new $(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Q(y0(t))}function _0(n,e){return Q$(n.databaseId,e)}function Y$(n){let e=m0(n);return e.length===4?tt.emptyPath():y0(e)}function LA(n){return new tt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function y0(n){return He(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Z$(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:ne()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(He(h===void 0||typeof h=="string"),It.fromBase64String(h||"")):(He(h===void 0||h instanceof Buffer||h instanceof Uint8Array),It.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?k.UNKNOWN:g0(l.code);return new $(h,l.message||"")}(o);t=new $d(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=__(n,r.document.name),s=Gs(r.document.updateTime),o=r.document.createTime?Gs(r.document.createTime):se.min(),a=new nr({mapValue:{fields:r.document.fields}}),u=_n.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new zs(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=__(n,r.document),s=r.readTime?Gs(r.readTime):se.min(),o=_n.newNoDocument(i,s),a=r.removedTargetIds||[];t=new zs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=__(n,r.document),s=r.removedTargetIds||[];t=new zs([],s,i,null)}else{if(!("filter"in e))return ne();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new K_(i,s),a=r.targetId;t=new Bd(a,o)}}return t}function J$(n,e){return{documents:[_0(n,e.path)]}}function X$(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=_0(n,i);let s=function(l){if(l.length!==0)return I0(kn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:$s(m.field),direction:n2(m.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=J_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function e2(n){let e=Y$(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){He(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){let m=v0(p);return m instanceof kn&&n0(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(E){return new eo(Hs(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,sh(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,_=p.values||[];return new Xs(_,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,_=p.values||[];return new Xs(_,m)}(t.endAt)),b$(e,i,o,s,a,"F",u,l)}function t2(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function v0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Hs(t.unaryFilter.field);return rt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Hs(t.unaryFilter.field);return rt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Hs(t.unaryFilter.field);return rt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Hs(t.unaryFilter.field);return rt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ne()}}(n):n.fieldFilter!==void 0?function(t){return rt.create(Hs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ne()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return kn.create(t.compositeFilter.filters.map(r=>v0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ne()}}(t.compositeFilter.op))}(n):ne()}function n2(n){return q$[n]}function r2(n){return z$[n]}function i2(n){return G$[n]}function $s(n){return{fieldPath:n.canonicalString()}}function Hs(n){return mn.fromServerFormat(n.fieldPath)}function I0(n){return n instanceof rt?function(t){if(t.op==="=="){if(TA(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NAN"}};if(EA(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(TA(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NAN"}};if(EA(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(t.field),op:r2(t.op),value:t.value}}}(n):n instanceof kn?function(t){let r=t.getFilters().map(i=>I0(i));return r.length===1?r[0]:{compositeFilter:{op:i2(t.op),filters:r}}}(n):ne()}function w0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var gc=class n{constructor(e,t,r,i,s=se.min(),o=se.min(),a=It.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ey=class{constructor(e){this.ct=e}};function s2(n){let e=e2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?q_(e,e.limit,"L"):e}var qd=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Fe(e.integerValue));else if("doubleValue"in e){let r=Fe(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Od(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=ir(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Lr(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?e0(e)?this.dt(t,Number.MAX_SAFE_INTEGER):XA(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):ne()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Fe(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};qd.vt=new qd;var ty=class{constructor(){this.un=new ny}addToCollectionParentIndex(e,t){return this.un.add(t),P.resolve()}getCollectionParents(e,t){return P.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return P.resolve()}deleteFieldIndex(e,t){return P.resolve()}deleteAllFieldIndexes(e){return P.resolve()}createTargetIndexes(e,t){return P.resolve()}getDocumentsMatchingTarget(e,t){return P.resolve(null)}getIndexType(e,t){return P.resolve(0)}getFieldIndexes(e,t){return P.resolve([])}getNextCollectionGroupToUpdate(e){return P.resolve(null)}getMinOffset(e,t){return P.resolve(Si.min())}getMinOffsetFromCollectionGroup(e,t){return P.resolve(Si.min())}updateCollectionGroup(e,t,r){return P.resolve()}updateIndexEntries(e,t){return P.resolve()}},ny=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vt(tt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vt(tt.comparator)).toArray()}};var V7=new Uint8Array(0);var Nn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(41943040,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);var mc=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var ry=class{constructor(){this.changes=new Vr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?P.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var iy=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var sy=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ac(r.mutation,i,Ei.empty(),tn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,_e()).next(()=>r))}getLocalViewOfDocuments(e,t,r=_e()){let i=Ti();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=nc();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=Ti();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,_e()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=Ur(),o=sc(),a=function(){return sc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof so)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),ac(h.mutation,l,h.mutation.getFieldMask(),tn.now())):o.set(l.key,Ei.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new iy(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=sc(),i=new Ke((o,a)=>o-a),s=_e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||Ei.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||_e()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=u0();h.forEach(m=>{if(!s.has(m)){let _=f0(t.get(m),r.get(m));_!==null&&p.set(m,_),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return P.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):D$(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):P.resolve(Ti()),a=-1,u=s;return o.next(l=>P.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?P.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,_e())).next(h=>({batchId:a,changes:P$(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Q(t)).next(r=>{let i=nc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=nc();return this.indexManager.getCollectionParents(e,s).next(a=>P.forEach(a,u=>{let l=function(p,m){return new to(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,_n.newInvalidDocument(h)))});let a=nc();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&ac(h.mutation,l,Ei.empty(),tn.now()),ch(t,l)&&(a=a.insert(u,l))}),a})}};var oy=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return P.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Gs(i.createTime)}}(t)),P.resolve()}getNamedQuery(e,t){return P.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:s2(i.bundledQuery),readTime:Gs(i.readTime)}}(t)),P.resolve()}};var ay=class{constructor(){this.overlays=new Ke(Q.comparator),this.Ir=new Map}getOverlay(e,t){return P.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Ti();return P.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),P.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),P.resolve()}getOverlaysForCollection(e,t,r){let i=Ti(),s=t.length+1,o=new Q(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return P.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ke((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Ti(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Ti(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return P.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new W_(t,r));let s=this.Ir.get(t);s===void 0&&(s=_e(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var cy=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return P.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,P.resolve()}};var _c=class{constructor(){this.Tr=new vt(et.Er),this.dr=new vt(et.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new et(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new et(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Q(new tt([])),r=new et(t,e),i=new et(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Q(new tt([])),r=new et(t,e),i=new et(t,e+1),s=_e();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new et(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},et=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Q.comparator(e.key,t.key)||Ie(e.wr,t.wr)}static Ar(e,t){return Ie(e.wr,t.wr)||Q.comparator(e.key,t.key)}};var uy=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new vt(et.Er)}checkEmpty(e){return P.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new G_(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new et(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return P.resolve(o)}lookupMutationBatch(e,t){return P.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return P.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return P.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return P.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new et(t,0),i=new et(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),P.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vt(Ie);return t.forEach(i=>{let s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),P.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Q.isDocumentKey(s)||(s=s.child(""));let o=new et(new Q(s),0),a=new vt(Ie);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},o),P.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){He(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return P.forEach(t.mutations,i=>{let s=new et(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new et(t,0),i=this.br.firstAfterOrEqual(r);return P.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,P.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var ly=class{constructor(e){this.Mr=e,this.docs=function(){return new Ke(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return P.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=Ur();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_n.newInvalidDocument(i))}),P.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Ur(),o=t.path,a=new Q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||p$(f$(h),r)<=0||(i.has(h.key)||ch(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return P.resolve(s)}getAllFromCollectionGroup(e,t,r,i){ne()}Or(e,t){return P.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new dy(this)}getSize(e){return P.resolve(this.size)}},dy=class extends ry{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),P.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var hy=class{constructor(e){this.persistence=e,this.Nr=new Vr(t=>Xy(t),ev),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Lr=0,this.Br=new _c,this.targetCount=0,this.kr=mc.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),P.resolve()}getLastRemoteSnapshotVersion(e){return P.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return P.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),P.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),P.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new mc(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,P.resolve()}updateTargetData(e,t){return this.Kn(t),P.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,P.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),P.waitFor(s).next(()=>i)}getTargetCount(e){return P.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return P.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),P.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),P.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),P.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return P.resolve(r)}containsKey(e,t){return P.resolve(this.Br.containsKey(t))}};var fy=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new JA(0),this.Kr=!1,this.Kr=!0,this.$r=new cy,this.referenceDelegate=e(this),this.Ur=new hy(this),this.indexManager=new ty,this.remoteDocumentCache=function(i){return new ly(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ey(t),this.Gr=new oy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ay,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new uy(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){j("MemoryPersistence","Starting transaction:",e);let i=new py(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return P.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},py=class extends N_{constructor(e){super(),this.currentSequenceNumber=e}},gy=class n{constructor(e){this.persistence=e,this.Jr=new _c,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw ne()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),P.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),P.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),P.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return P.forEach(this.Xr,r=>{let i=Q.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,se.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return P.or([()=>P.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var my=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=_e(),i=_e();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var _y=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var yy=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _E()?8:m$(mt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new _y;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(tc()<=_t.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Bs(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),P.resolve()):(tc()<=_t.DEBUG&&j("QueryEngine","Query:",Bs(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(tc()<=_t.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Bs(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mn(t))):P.resolve())}Yi(e,t){if(SA(t))return P.resolve(null);let r=Mn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=q_(t,null,"F"),r=Mn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=_e(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,o,u.readTime)?this.Yi(e,q_(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return SA(t)||i.isEqual(se.min())?P.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?P.resolve(null):(tc()<=_t.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Bs(t)),this.rs(e,o,t,h$(i,-1)).next(a=>a))})}ts(e,t){let r=new vt(a0(e));return t.forEach((i,s)=>{ch(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return tc()<=_t.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Bs(t)),this.Ji.getDocumentsMatchingQuery(e,t,Si.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var vy=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ke(Ie),this._s=new Vr(s=>Xy(s),ev),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sy(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function o2(n,e,t,r){return new vy(n,e,t,r)}function E0(n,e){return v(this,null,function*(){let t=fe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=_e();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function T0(n){let e=fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function a2(n,e){let t=fe(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(s,h.addedDocuments,p)));let _=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(It.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),function(N,A,M){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(m,_,h)&&a.push(t.Ur.updateTargetData(s,_))});let u=Ur(),l=_e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(c2(s,o,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(se.min())){let h=t.Ur.getLastRemoteSnapshotVersion(s).next(p=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return P.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(t.os=i,s))}function c2(n,e,t){let r=_e(),i=_e();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=Ur();return t.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:o,Is:i}})}function u2(n,e){let t=fe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,P.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new gc(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function Iy(n,e,t){return v(this,null,function*(){let r=fe(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ic(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function VA(n,e,t){let r=fe(n),i=se.min(),s=_e();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=fe(u),m=p._s.get(h);return m!==void 0?P.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,o,Mn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:se.min(),t?s:_e())).next(a=>(l2(r,A$(e),a),{documents:a,Ts:s})))}function l2(n,e,t){let r=n.us.get(e)||se.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var zd=class{constructor(){this.activeTargetIds=k$()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var wy=class{constructor(){this.so=new zd,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new zd,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ey=class{_o(e){}shutdown(){}};var Gd=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Nd=null;function y_(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}var d2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ty=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var yt="WebChannelConnection",Cy=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=y_(),u=this.xo(t,r.toUriEncodedString());j("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,u,l,i).then(h=>(j("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Qs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ao}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=d2[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=y_();return new Promise((o,a)=>{let u=new d_;u.setWithCredentials(!0),u.listenOnce(h_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case ec.NO_ERROR:let h=u.getResponseJson();j(yt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case ec.TIMEOUT:j(yt,`RPC '${e}' ${s} timed out`),a(new $(k.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:let p=u.getStatus();if(j(yt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let _=m?.error;if(_&&_.status&&_.message){let E=function(A){let M=A.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(M)>=0?M:k.UNKNOWN}(_.status);a(new $(E,_.message))}else a(new $(k.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new $(k.UNAVAILABLE,"Connection failed."));break;default:ne()}}finally{j(yt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(yt,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=y_(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=g_(),a=p_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=s.join("");j(yt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,_=!1,E=new Ty({Io:A=>{_?j(yt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(j(yt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(yt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},To:()=>p.close()}),N=(A,M,L)=>{A.listen(M,H=>{try{L(H)}catch(J){setTimeout(()=>{throw J},0)}})};return N(p,js.EventType.OPEN,()=>{_||(j(yt,`RPC '${e}' stream ${i} transport opened.`),E.yo())}),N(p,js.EventType.CLOSE,()=>{_||(_=!0,j(yt,`RPC '${e}' stream ${i} transport closed`),E.So())}),N(p,js.EventType.ERROR,A=>{_||(_=!0,Qs(yt,`RPC '${e}' stream ${i} transport errored:`,A),E.So(new $(k.UNAVAILABLE,"The operation could not be completed")))}),N(p,js.EventType.MESSAGE,A=>{var M;if(!_){let L=A.data[0];He(!!L);let H=L,J=H.error||((M=H[0])===null||M===void 0?void 0:M.error);if(J){j(yt,`RPC '${e}' stream ${i} received error:`,J);let Ne=J.status,X=function(I){let C=Xe[I];if(C!==void 0)return g0(C)}(Ne),T=J.message;X===void 0&&(X=k.INTERNAL,T="Unknown error status: "+Ne+" with message "+J.message),_=!0,E.So(new $(X,T)),p.close()}else j(yt,`RPC '${e}' stream ${i} received:`,L),E.bo(L)}}),N(a,f_.STAT_EVENT,A=>{A.stat===Ad.PROXY?j(yt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Ad.NOPROXY&&j(yt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}};function v_(){return typeof document<"u"?document:null}function C0(n){return new Z_(n,!0)}var Wd=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var by=class{constructor(e,t,r,i,s,o,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Wd(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return v(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return v(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return v(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(rr(t.toString()),rr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new $(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>v(this,null,function*(){this.state=0,this.start()}))}I_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Dy=class extends by{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=Z$(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?Gs(o.readTime):se.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=LA(this.serializer),t.addTarget=function(s,o){let a,u=o.target;if(a=H_(u)?{documents:J$(s,u)}:{query:X$(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=K$(s,o.resumeToken);let l=J_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=W$(s,o.snapshotVersion.toTimestamp());let l=J_(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=t2(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=LA(this.serializer),t.removeTarget=e,this.a_(t)}};var Sy=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,X_(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new $(k.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,X_(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(k.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Ay=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rr(t),this.D_=!1):j("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Ry=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>v(this,null,function*(){Ec(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return v(this,null,function*(){let l=fe(u);l.L_.add(4),yield wc(l),l.q_.set("Unknown"),l.L_.delete(4),yield uh(l)})}(this))}))}),this.q_=new Ay(r,i)}};function uh(n){return v(this,null,function*(){if(Ec(n))for(let e of n.B_)yield e(!0)})}function wc(n){return v(this,null,function*(){for(let e of n.B_)yield e(!1)})}function b0(n,e){let t=fe(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),sv(t)?iv(t):co(t).r_()&&rv(t,e))}function nv(n,e){let t=fe(n),r=co(t);t.N_.delete(e),r.r_()&&D0(t,e),t.N_.size===0&&(r.r_()?r.o_():Ec(t)&&t.q_.set("Unknown"))}function rv(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}co(n).A_(e)}function D0(n,e){n.Q_.xe(e),co(n).R_(e)}function iv(n){n.Q_=new Y_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),co(n).start(),n.q_.v_()}function sv(n){return Ec(n)&&!co(n).n_()&&n.N_.size>0}function Ec(n){return fe(n).L_.size===0}function S0(n){n.Q_=void 0}function h2(n){return v(this,null,function*(){n.q_.set("Online")})}function f2(n){return v(this,null,function*(){n.N_.forEach((e,t)=>{rv(n,e)})})}function p2(n,e){return v(this,null,function*(){S0(n),sv(n)?(n.q_.M_(e),iv(n)):n.q_.set("Unknown")})}function g2(n,e,t){return v(this,null,function*(){if(n.q_.set("Online"),e instanceof $d&&e.state===2&&e.cause)try{yield function(i,s){return v(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield UA(n,r)}else if(e instanceof zs?n.Q_.Ke(e):e instanceof Bd?n.Q_.He(e):n.Q_.We(e),!t.isEqual(se.min()))try{let r=yield T0(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.N_.get(l);h&&s.N_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.N_.get(u);if(!h)return;s.N_.set(u,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),D0(s,u);let p=new gc(h.target,u,l,h.sequenceNumber);rv(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield UA(n,r)}})}function UA(n,e,t){return v(this,null,function*(){if(!Ic(e))throw e;n.L_.add(1),yield wc(n),n.q_.set("Offline"),t||(t=()=>T0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>v(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield uh(n)}))})}function jA(n,e){return v(this,null,function*(){let t=fe(n);t.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Ec(t);t.L_.add(3),yield wc(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield uh(t)})}function m2(n,e){return v(this,null,function*(){let t=fe(n);e?(t.L_.delete(2),yield uh(t)):e||(t.L_.add(2),yield wc(t),t.q_.set("Unknown"))})}function co(n){return n.K_||(n.K_=function(t,r,i){let s=fe(t);return s.w_(),new Dy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:h2.bind(null,n),Ro:f2.bind(null,n),mo:p2.bind(null,n),d_:g2.bind(null,n)}),n.B_.push(e=>v(this,null,function*(){e?(n.K_.s_(),sv(n)?iv(n):n.q_.set("Unknown")):(yield n.K_.stop(),S0(n))}))),n.K_}var Ny=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function A0(n,e){if(rr("AsyncQueue",`${e}: ${n}`),Ic(n))return new $(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Kd=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Q.comparator(t.key,r.key):(t,r)=>Q.comparator(t.key,r.key),this.keyedMap=nc(),this.sortedSet=new Ke(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Qd=class{constructor(){this.W_=new Ke(Q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):ne():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},oo=class n{constructor(e,t,r,i,s,o,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Kd.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Py=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},My=class{constructor(){this.queries=BA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=fe(t),s=i.queries;i.queries=BA(),s.forEach((o,a)=>{for(let u of a.j_)u.onError(r)})})(this,new $(k.ABORTED,"Firestore shutting down"))}};function BA(){return new Vr(n=>o0(n),ah)}function _2(n,e){return v(this,null,function*(){let t=fe(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Py,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=A0(o,`Initialization of query '${Bs(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&ov(t)})}function y2(n,e){return v(this,null,function*(){let t=fe(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function v2(n,e){let t=fe(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&ov(t)}function I2(n,e,t){let r=fe(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function ov(n){n.Y_.forEach(e=>{e.next()})}var xy,$A;($A=xy||(xy={})).ea="default",$A.Cache="cache";var ky=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new oo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==xy.Cache}};var Yd=class{constructor(e){this.key=e}},Zd=class{constructor(e){this.key=e}},Oy=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=_e(),this.mutatedKeys=_e(),this.Aa=a0(e),this.Ra=new Kd(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Qd,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),_=ch(this.query,p)?p:null,E=!!m&&this.mutatedKeys.has(m.key),N=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),A=!1;m&&_?m.data.isEqual(_.data)?E!==N&&(r.track({type:3,doc:_}),A=!0):this.ga(m,_)||(r.track({type:2,doc:_}),A=!0,(u&&this.Aa(_,u)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!m&&_?(r.track({type:0,doc:_}),A=!0):m&&!_&&(r.track({type:1,doc:m}),A=!0,(u||l)&&(a=!0)),A&&(_?(o=o.add(_),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((h,p)=>function(_,E){let N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne()}};return N(_)-N(E)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,o.length!==0||l?{snapshot:new oo(this.query,e.Ra,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Qd,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=_e(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Zd(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Yd(r))}),t}ba(e){this.Ta=e.Ts,this.da=_e();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return oo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Fy=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ly=class{constructor(e){this.key=e,this.va=!1}},Vy=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Vr(a=>o0(a),ah),this.Ma=new Map,this.xa=new Set,this.Oa=new Ke(Q.comparator),this.Na=new Map,this.La=new _c,this.Ba={},this.ka=new Map,this.qa=mc.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function w2(n,e,t=!0){return v(this,null,function*(){let r=x0(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield R0(r,e,t,!0),i})}function E2(n,e){return v(this,null,function*(){let t=x0(n);yield R0(t,e,!0,!1)})}function R0(n,e,t,r){return v(this,null,function*(){let i=yield u2(n.localStore,Mn(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield T2(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&b0(n.remoteStore,i),a})}function T2(n,e,t,r,i){return v(this,null,function*(){n.Ka=(p,m,_)=>function(N,A,M,L){return v(this,null,function*(){let H=A.view.ma(M);H.ns&&(H=yield VA(N.localStore,A.query,!1).then(({documents:T})=>A.view.ma(T,H)));let J=L&&L.targetChanges.get(A.targetId),Ne=L&&L.targetMismatches.get(A.targetId)!=null,X=A.view.applyChanges(H,N.isPrimaryClient,J,Ne);return qA(N,A.targetId,X.wa),X.snapshot})}(n,p,m,_);let s=yield VA(n.localStore,e,!0),o=new Oy(e,s.Ts),a=o.ma(s.documents),u=pc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,u);qA(n,t,l.wa);let h=new Fy(e,t,o);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function C2(n,e,t){return v(this,null,function*(){let r=fe(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!ah(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Iy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&nv(r.remoteStore,i.targetId),Uy(r,i.targetId)}).catch(Qy))):(Uy(r,i.targetId),yield Iy(r.localStore,i.targetId,!0))})}function b2(n,e){return v(this,null,function*(){let t=fe(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nv(t.remoteStore,r.targetId))})}function N0(n,e){return v(this,null,function*(){let t=fe(n);try{let r=yield a2(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&(He(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?He(o.va):i.removedDocuments.size>0&&(He(o.va),o.va=!1))}),yield M0(t,r,e)}catch(r){yield Qy(r)}})}function HA(n,e,t){let r=fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=fe(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&ov(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function D2(n,e,t){return v(this,null,function*(){let r=fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new Ke(Q.comparator);o=o.insert(s,_n.newNoDocument(s,se.min()));let a=_e().add(s),u=new jd(se.min(),new Map,new Ke(Ie),o,a);yield N0(r,u),r.Oa=r.Oa.remove(s),r.Na.delete(e),av(r)}else yield Iy(r.localStore,e,!1).then(()=>Uy(r,e,t)).catch(Qy)})}function Uy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||P0(n,r)})}function P0(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(nv(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),av(n))}function qA(n,e,t){for(let r of t)r instanceof Yd?(n.La.addReference(r.key,e),S2(n,r)):r instanceof Zd?(j("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||P0(n,r.key)):ne()}function S2(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(j("SyncEngine","New document in limbo: "+t),n.xa.add(r),av(n))}function av(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Q(tt.fromString(e)),r=n.qa.next();n.Na.set(r,new Ly(t)),n.Oa=n.Oa.insert(t,r),b0(n.remoteStore,new gc(Mn(tv(t.path)),r,"TargetPurposeLimboResolution",JA.oe))}}function M0(n,e,t){return v(this,null,function*(){let r=fe(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=my.Wi(u.targetId,l);s.push(p)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(u,l){return v(this,null,function*(){let h=fe(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>P.forEach(l,m=>P.forEach(m.$i,_=>h.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>P.forEach(m.Ui,_=>h.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Ic(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let _=h.os.get(m),E=_.snapshotVersion,N=_.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,N)}}})}(r.localStore,s))})}function A2(n,e){return v(this,null,function*(){let t=fe(n);if(!t.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield E0(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(u=>{u.reject(new $(k.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield M0(t,r.hs)}})}function R2(n,e){let t=fe(n),r=t.Na.get(e);if(r&&r.va)return _e().add(r.key);{let i=_e(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function x0(n){let e=fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=N0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=R2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=D2.bind(null,e),e.Ca.d_=v2.bind(null,e.eventManager),e.Ca.$a=I2.bind(null,e.eventManager),e}var zA=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return v(this,null,function*(){this.serializer=C0(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return o2(this.persistence,new yy,t.initialUser,this.serializer)}Ga(t){return new fy(gy.Zr,this.serializer)}Wa(t){return new wy}terminate(){return v(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var N2=(()=>{class n{initialize(t,r){return v(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>HA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=A2.bind(null,this.syncEngine),yield m2(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new My}()}createDatastore(t){let r=C0(t.databaseInfo.databaseId),i=function(o){return new Cy(o)}(t.databaseInfo);return function(o,a,u,l){return new Sy(o,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,u){return new Ry(i,s,o,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>HA(this.syncEngine,r,0),function(){return Gd.D()?new Gd:new Ey}())}createSyncEngine(t,r){return function(s,o,a,u,l,h,p){let m=new Vy(s,o,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return v(this,null,function*(){var t,r;yield function(s){return v(this,null,function*(){let o=fe(s);j("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield wc(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var jy=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):rr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var By=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ot.UNAUTHENTICATED,this.clientId=A_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>v(this,null,function*(){j("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(j("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>v(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=A0(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function I_(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>v(this,null,function*(){r.isEqual(i)||(yield E0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function GA(n,e){return v(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield P2(n);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>jA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>jA(e.remoteStore,i)),n._onlineComponents=e})}function P2(n){return v(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield I_(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Qs("Error using user provided cache. Falling back to memory cache: "+t),yield I_(n,new zA)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield I_(n,new zA);return n._offlineComponents})}function M2(n){return v(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield GA(n,n._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield GA(n,new N2))),n._onlineComponents})}function WA(n){return v(this,null,function*(){let e=yield M2(n),t=e.eventManager;return t.onListen=w2.bind(null,e.syncEngine),t.onUnlisten=C2.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=E2.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=b2.bind(null,e.syncEngine),t})}function k0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var KA=new Map;function x2(n,e,t){if(!t)throw new $(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function k2(n,e,t,r){if(e===!0&&r===!0)throw new $(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QA(n){if(Q.isDocumentKey(n))throw new $(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function O2(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":ne()}function Md(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new $(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=O2(n);throw new $(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Jd=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}k2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new $(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},yc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jd({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new w_;switch(r.type){case"firstParty":return new b_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return v(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=KA.get(t);r&&(j("ComponentProvider","Removing Datastore"),KA.delete(t),r.terminate())}(this),Promise.resolve()}};function O0(n,e,t,r={}){var i;let s=(n=Md(n,yc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ot.MOCK_USER;else{a=qi(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new $(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ot(l)}n._authCredentials=new E_(new xd(a,u))}}var Xd=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ri=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ws=class n extends Xd{constructor(e,t,r){super(e,t,tv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ri(this.firestore,null,new Q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function F0(n,e,...t){if(n=we(n),x2("collection","path",e),n instanceof yc){let r=tt.fromString(e,...t);return QA(r),new Ws(n,null,r)}{if(!(n instanceof Ri||n instanceof Ws))throw new $(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(tt.fromString(e,...t));return QA(r),new Ws(n.firestore,null,r)}}var eh=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Wd(this,"async_queue_retry"),this.Vu=()=>{let r=v_();r&&j("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=v_();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=v_();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Fr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return v(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ic(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=Ny.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&ne()}verifyOperationInProgress(){}wu(){return v(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function YA(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var vc=class extends yc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new eh,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return v(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new eh(e),this._firestoreClient=void 0,yield e}})}};function L0(n,e){let t=typeof n=="object"?n:Ye(),r=typeof n=="string"?n:e||"(default)",i=Qe(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=gr("firestore");s&&O0(i,...s)}return i}function F2(n){if(n._terminated)throw new $(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||L2(n),n._firestoreClient}function L2(n){var e,t,r;let i=n._freezeSettings(),s=function(a,u,l,h){return new P_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,k0(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new By(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}var $y=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new $(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var th=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new $(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Hy=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new $(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new $(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}};var qy=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var V2=new RegExp("[~\\*/\\[\\]]");function U2(n,e,t){if(e.search(V2)>=0)throw ZA(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new th(...e.split("."))._internalPath}catch{throw ZA(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZA(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new $(k.INVALID_ARGUMENT,a+n+u)}var nh=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ri(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new zy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(V0("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},zy=class extends nh{data(){return super.data()}};function V0(n,e){return typeof e=="string"?U2(n,e):e instanceof th?e._internalPath:e._delegate._internalPath}function j2(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new $(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Gy=class{convertValue(e,t="none"){switch(Ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ne()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return oh(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>Fe(o.doubleValue));return new qy(s)}convertGeoPoint(e){return new Hy(Fe(e.latitude),Fe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Zy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(cc(e));default:return null}}convertTimestamp(e){let t=ir(e);return new tn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=tt.fromString(e);He(w0(r));let i=new Vd(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(t)||rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};var bi=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rh=class extends nh{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(V0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ks=class extends rh{data(e={}){return super.data(e)}},Wy=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new bi(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ks(this._firestore,this._userDataWriter,r.key,r,new bi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new $(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new bi(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:B2(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function B2(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne()}}var ih=class extends Gy{constructor(e){super(),this.firestore=e}convertBytes(e){return new $y(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ri(this.firestore,null,t)}};function cv(n,...e){var t,r,i;n=we(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||YA(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(YA(e[o])){let p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ri)l=Md(n.firestore,vc),h=tv(n._key.path),u={next:p=>{e[o]&&e[o]($2(l,n,p))},error:e[o+1],complete:e[o+2]};else{let p=Md(n,Xd);l=Md(p.firestore,vc),h=p._query;let m=new ih(l);u={next:_=>{e[o]&&e[o](new Wy(l,m,p,_))},error:e[o+1],complete:e[o+2]},j2(n._query)}return function(m,_,E,N){let A=new jy(N),M=new ky(_,A,E);return m.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return _2(yield WA(m),M)})),()=>{A.Za(),m.asyncQueue.enqueueAndForget(()=>v(this,null,function*(){return y2(yield WA(m),M)}))}}(F2(l),h,a,u)}function $2(n,e,t){let r=t.docs.get(e._key),i=new ih(n);return new rh(n,i,e._key,r,new bi(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ao=i})(kt),ze(new qe("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new vc(new T_(r.getProvider("auth-internal")),new S_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new $(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vd(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),B(yA,"4.7.3",e),B(yA,"4.7.3","esm2017")})();var lh=function(){return lh=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},lh.apply(this,arguments)};var z2={includeMetadataChanges:!1};function U0(n,e){return e===void 0&&(e=z2),new le(function(t){var r=cv(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function j0(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:lh(lh({},r),(t={},t[e.idField]=n.id,t))}function B0(n){return U0(n,{includeMetadataChanges:!0}).pipe(re(function(e){return e.docs}))}function $0(n,e){return e===void 0&&(e={}),B0(n).pipe(re(function(t){return t.map(function(r){return j0(r,e)})}))}var Ni=class{constructor(e){return e}},H0="firestore",uv=class{constructor(){return We(H0)}};var lv=new U("angularfire2.firestore-instances");function G2(n,e){let t=Je(H0,n,e);return t&&new Ni(t)}function W2(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Ni(r)}}var K2={provide:uv,deps:[[new Y,lv]]},Q2={provide:Ni,useFactory:G2,deps:[[new Y,lv],ke]};function q0(n,...e){return B("angularfire",xe.full,"fst"),Re([Q2,K2,{provide:lv,useFactory:W2(n),multi:!0,deps:[W,ve,$e,Le,[new Y,gn],[new Y,Vt],...e]}])}var z0=Se($0,!0);var G0=Se(F0,!0);var W0=Se(L0,!0);var K0="@firebase/database",Q0="1.0.8";var cI="";function Y2(n){cI=n}var yv=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),it(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:hu(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var vv=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Tn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var SR=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yv(e)}}catch{}return new vv},Mi=SR("localStorage"),Iv=SR("sessionStorage");var fo=new Cn("@firebase/database"),Z2=function(){let n=1;return function(){return n++}}(),AR=function(n){let e=TE(n),t=new IE;t.update(e);let r=t.digest();return lE.encodeByteArray(r)},Oc=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Oc.apply(null,r):typeof r=="object"?e+=it(r):e+=r,e+=" "}return e},xi=null,Y0=!0,J2=function(n,e){O(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(fo.logLevel=_t.VERBOSE,xi=fo.log.bind(fo),e&&Iv.set("logging_enabled",!0)):typeof n=="function"?xi=n:(xi=null,Iv.remove("logging_enabled"))},wt=function(...n){if(Y0===!0&&(Y0=!1,xi===null&&Iv.get("logging_enabled")===!0&&J2(!0)),xi){let e=Oc.apply(null,n);xi(e)}},Fc=function(n){return function(...e){wt(n,...e)}},wv=function(...n){let e="FIREBASE INTERNAL ERROR: "+Oc(...n);fo.error(e)},or=function(...n){let e=`FIREBASE FATAL ERROR: ${Oc(...n)}`;throw fo.error(e),new Error(e)},Wt=function(...n){let e="FIREBASE WARNING: "+Oc(...n);fo.warn(e)},X2=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Wt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},RR=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},eH=function(n){if(wn()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},go="[MIN_NAME]",ki="[MAX_NAME]",Eo=function(n,e){if(n===e)return 0;if(n===go||e===ki)return-1;if(e===go||n===ki)return 1;{let t=Z0(n),r=Z0(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},tH=function(n,e){return n===e?0:n<e?-1:1},Tc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+it(e))},uI=function(n){if(typeof n!="object"||n===null)return it(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=it(e[r]),t+=":",t+=uI(n[e[r]]);return t+="}",t},NR=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function sn(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var PR=function(n){O(!RR(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,u;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(u=t;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let h=l.join(""),p="";for(u=0;u<64;u+=8){let m=parseInt(h.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},nH=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},rH=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var iH=new RegExp("^-?(0*)\\d{1,10}$"),sH=-2147483648,oH=2147483647,Z0=function(n){if(iH.test(n)){let e=Number(n);if(e>=sH&&e<=oH)return e}return null},Lc=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw Wt("Exception was thrown by user callback.",t),e},Math.floor(0))}},aH=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Ac=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var Ev=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Wt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Tv=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(wt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wt(e)}},Rc=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),hh="5",MR="v",xR="s",kR="r",OR="f",FR=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LR="ls",VR="p",Cv="ac",UR="websocket",jR="long_polling";var fh=class{constructor(e,t,r,i,s=!1,o="",a=!1,u=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Mi.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Mi.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function cH(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function BR(n,e,t){O(typeof e=="string","typeof type must == string"),O(typeof t=="object","typeof params must == object");let r;if(e===UR)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===jR)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);cH(n)&&(t.ns=n.namespace);let i=[];return sn(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var bv=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Tn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return fE(this.counters_)}};var dv={},hv={};function lI(n){let e=n.toString();return dv[e]||(dv[e]=new bv),dv[e]}function uH(n,e){let t=n.toString();return hv[t]||(hv[t]=e()),hv[t]}var Dv=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Lc(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var J0="start",lH="close",dH="pLPCommand",hH="pRTLPCB",$R="id",HR="pw",qR="ser",fH="cb",pH="seg",gH="ts",mH="d",_H="dframe",zR=1870,GR=30,yH=zR-GR,vH=25e3,IH=3e4,Sv=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fc(e),this.stats_=lI(t),this.urlFn=u=>(this.appCheckToken&&(u[Cv]=this.appCheckToken),BR(t,jR,u))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Dv(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IH)),eH(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Av((...s)=>{let[o,a,u,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===J0)this.id=a,this.password=u;else if(o===lH)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[J0]="t",r[qR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[fH]=this.scriptTagHolder.uniqueCallbackIdentifier),r[MR]=hh,this.transportSessionId&&(r[xR]=this.transportSessionId),this.lastSessionId&&(r[LR]=this.lastSessionId),this.applicationId&&(r[VR]=this.applicationId),this.appCheckToken&&(r[Cv]=this.appCheckToken),typeof location<"u"&&location.hostname&&FR.test(location.hostname)&&(r[kR]=OR);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return wn()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!nH()&&!rH()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=it(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=dE(t),i=NR(r,yH);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(wn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[_H]="t",r[$R]=e,r[HR]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=it(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},Av=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,wn())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Z2(),window[dH+this.uniqueCallbackIdentifier]=e,window[hH+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){wt("frame writing exception"),a.stack&&wt(a.stack),wt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||wt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[$R]=this.myID,e[HR]=this.myPW,e[qR]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+GR+r.length<=zR;){let o=this.pendingSegs.shift();r=r+"&"+pH+i+"="+o.seg+"&"+gH+i+"="+o.ts+"&"+mH+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(vH)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){wn()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{wt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var wH=16384,EH=45e3,ph=null;typeof MozWebSocket<"u"?ph=MozWebSocket:typeof WebSocket<"u"&&(ph=WebSocket);var Cc=(()=>{class n{constructor(t,r,i,s,o,a,u){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fc(this.connId),this.stats_=lI(r),this.connURL=n.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[MR]=hh,!wn()&&typeof location<"u"&&location.hostname&&FR.test(location.hostname)&&(a[kR]=OR),r&&(a[xR]=r),i&&(a[LR]=i),s&&(a[Cv]=s),o&&(a[VR]=o),BR(t,UR,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Mi.set("previous_websocket_failure",!0);try{let i;if(wn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${hh}/${cI}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new ph(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&ph!==null&&!n.forceDisallow_}static previouslyFailed(){return Mi.isInMemoryStorage||Mi.get("previous_websocket_failure")===!0}markConnectionHealthy(){Mi.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=hu(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(O(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=it(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=NR(r,wH);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(EH))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),TH=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Sv,Cc]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=Cc&&Cc.isAvailable(),i=r&&!Cc.previouslyFailed();if(t.webSocketOnly&&(r||Wt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Cc];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),CH=6e4,bH=5e3,DH=10*1024,SH=100*1024,fv="t",X0="d",AH="s",eR="r",RH="e",tR="o",nR="a",rR="n",iR="p",NH="h",Rv=class{constructor(e,t,r,i,s,o,a,u,l,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fc("c:"+this.id+":"),this.transportManager_=new TH(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ac(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SH?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DH?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fv in e){let t=e[fv];t===nR?this.upgradeIfSecondaryHealthy_():t===eR?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===tR&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Tc("t",e),r=Tc("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:iR,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nR,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:rR,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Tc("t",e),r=Tc("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Tc(fv,e);if(X0 in e){let r=e[X0];if(t===NH){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===rR){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===AH?this.onConnectionShutdown_(r):t===eR?this.onReset_(r):t===RH?wv("Server Error: "+r):t===tR?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wv("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),hh!==r&&Wt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ac(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(CH))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ac(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(bH))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:iR,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Mi.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var gh=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var mh=class{constructor(e){this.allowedEvents_=e,this.listeners_={},O(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){O(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var _h=class n extends mh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!qo()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return O(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var sR=32,oR=768,Ae=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ce(){return new Ae("")}function pe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Br(n){return n.pieces_.length-n.pieceNum_}function Oe(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ae(n.pieces_,e)}function WR(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function PH(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function KR(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function QR(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ae(e,0)}function at(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ae)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ae(t,0)}function de(n){return n.pieceNum_>=n.pieces_.length}function nn(n,e){let t=pe(n),r=pe(e);if(t===null)return e;if(t===r)return nn(Oe(n),Oe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function YR(n,e){if(Br(n)!==Br(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function vn(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Br(n)>Br(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var Nv=class{constructor(e,t){this.errorPrefix_=t,this.parts_=KR(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Yo(this.parts_[r]);ZR(this)}};function MH(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=Yo(e),ZR(n)}function xH(n){let e=n.parts_.pop();n.byteLength_-=Yo(e),n.parts_.length>0&&(n.byteLength_-=1)}function ZR(n){if(n.byteLength_>oR)throw new Error(n.errorPrefix_+"has a key path longer than "+oR+" bytes ("+n.byteLength_+").");if(n.parts_.length>sR)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+sR+") or object contains a cycle "+Pi(n))}function Pi(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var Pv=class n extends mh{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return O(e==="visible","Unknown event type: "+e),[this.visible_]}};var bc=1e3,kH=60*5*1e3,aR=30*1e3,OH=1.3,FH=3e4,LH="server_kill",cR=3,dI=(()=>{class n extends gh{constructor(t,r,i,s,o,a,u,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Fc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bc,this.maxReconnectDelay_=kH,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!wn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Pv.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&_h.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(it(o)),O(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new af,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),O(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,u=>{let l=u.d,h=u.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",u),h!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Tn(t,"w")){let i=Wr(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Wt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||vE(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=aR)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=yE(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),O(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+it(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):wv("Unrecognized action received from server: "+it(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){O(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=bc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>FH&&(this.reconnectDelay_=bc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*OH)}this.onConnectStatus_(!1)}establishConnection_(){return v(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},h=function(m){O(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,_]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?wt("getToken() completed but was canceled"):(wt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=_&&_.token,u=new Rv(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,E=>{Wt(E+" ("+this.repoInfo_.toString()+")"),this.interrupt(LH)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&Wt(m),l())}}})}interrupt(t){wt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){wt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Wo(this.interruptReasons_)&&(this.reconnectDelay_=bc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>uI(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Ae(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){wt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cR&&(this.reconnectDelay_=aR,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){wt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cR&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";wn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+cI.replace(/\./g,"-")]=1,qo()?t["framework.cordova"]=1:du()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=_h.getInstance().currentlyOnline();return Wo(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),ge=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var mo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new ge(go,e),i=new ge(go,t);return this.compare(r,i)!==0}minPost(){return ge.MIN}};var dh,yh=class extends mo{static get __EMPTY_NODE(){return dh}static set __EMPTY_NODE(e){dh=e}compare(e,t){return Eo(e.name,t.name)}isDefinedOn(e){throw Hi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return ge.MIN}maxPost(){return new ge(ki,dh)}makePost(e,t){return O(typeof e=="string","KeyIndex indexValue must always be a string."),new ge(e,dh)}toString(){return".key"}},po=new yh;var lo=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},yn=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??rn.EMPTY_NODE,this.right=o??rn.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return rn.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return rn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),Mv=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new yn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},rn=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,yn.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,yn.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new lo(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new lo(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new lo(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new lo(this.root_,null,this.comparator_,!0,e)}};rn.EMPTY_NODE=new Mv;function VH(n,e){return Eo(n.name,e.name)}function hI(n,e){return Eo(n,e)}var xv;function UH(n){xv=n}var JR=function(n){return typeof n=="number"?"number:"+PR(n):"string:"+n},XR=function(n){if(n.isLeafNode()){let e=n.val();O(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Tn(e,".sv"),"Priority must be a string or number.")}else O(n===xv||n.isEmpty(),"priority of unexpected type.");O(n===xv||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var uR,_o=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,O(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),XR(this.priorityNode_)}static set __childrenNodeConstructor(t){uR=t}static get __childrenNodeConstructor(){return uR}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return de(t)?this:pe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=pe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(O(i!==".priority"||Br(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+JR(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=PR(this.value_):t+=this.value_,this.lazyHash_=AR(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(O(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return O(s>=0,"Unknown leaf type: "+r),O(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),eN,tN;function jH(n){eN=n}function BH(n){tN=n}var kv=class extends mo{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?Eo(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return ge.MIN}maxPost(){return new ge(ki,new _o("[PRIORITY-POST]",tN))}makePost(e,t){let r=eN(e);return new ge(t,new _o("[PRIORITY-POST]",r))}toString(){return".priority"}},Tt=new kv;var $H=Math.log(2),Ov=class{constructor(e){let t=s=>parseInt(Math.log(s)/$H,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},vh=function(n,e,t,r){n.sort(e);let i=function(u,l){let h=l-u,p,m;if(h===0)return null;if(h===1)return p=n[u],m=t?t(p):p,new yn(m,p.node,yn.BLACK,null,null);{let _=parseInt(h/2,10)+u,E=i(u,_),N=i(_+1,l);return p=n[_],m=t?t(p):p,new yn(m,p.node,yn.BLACK,E,N)}},s=function(u){let l=null,h=null,p=n.length,m=function(E,N){let A=p-E,M=p;p-=E;let L=i(A+1,M),H=n[A],J=t?t(H):H;_(new yn(J,H.node,N,null,L))},_=function(E){l?(l.left=E,l=E):(h=E,l=E)};for(let E=0;E<u.count;++E){let N=u.nextBitIsOne(),A=Math.pow(2,u.count-(E+1));N?m(A,yn.BLACK):(m(A,yn.BLACK),m(A,yn.RED))}return h},o=new Ov(n.length),a=s(o);return new rn(r||e,a)};var pv,uo={},yo=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return O(uo&&Tt,"ChildrenNode.ts has not been loaded"),pv=pv||new n({".priority":uo},{".priority":Tt}),pv}get(e){let t=Wr(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof rn?t:null}hasIndex(e){return Tn(this.indexSet_,e.toString())}addIndex(e,t){O(e!==po,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(ge.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=vh(r,e.getCompare()):a=uo;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let h=Object.assign({},this.indexes_);return h[u]=a,new n(h,l)}addToIndexes(e,t){let r=Ko(this.indexes_,(i,s)=>{let o=Wr(this.indexSet_,s);if(O(o,"Missing index implementation for "+s),i===uo)if(o.isDefinedOn(e.node)){let a=[],u=t.getIterator(ge.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),vh(a,o.getCompare())}else return uo;else{let a=t.get(e.name),u=i;return a&&(u=u.remove(new ge(e.name,a))),u.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=Ko(this.indexes_,i=>{if(i===uo)return i;{let s=t.get(e.name);return s?i.remove(new ge(e.name,s)):i}});return new n(r,this.indexSet_)}};var Dc,Ve=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&XR(this.priorityNode_),this.children_.isEmpty()&&O(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Dc||(Dc=new n(new rn(hI),null,yo.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Dc}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?Dc:r}}getChild(t){let r=pe(t);return r===null?this:this.getImmediateChild(r).getChild(Oe(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(O(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new ge(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Dc:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=pe(t);if(i===null)return r;{O(pe(t)!==".priority"||Br(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Oe(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Tt,(a,u)=>{r[a]=u.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+JR(this.getPriority().val())+":"),this.forEachChild(Tt,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":AR(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ge(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new ge(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new ge(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,ge.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,ge.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vc?-1:0}withIndex(t){if(t===po||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===po||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Tt),s=r.getIterator(Tt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===po?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),Fv=class extends Ve{constructor(){super(new rn(hI),Ve.EMPTY_NODE,yo.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ve.EMPTY_NODE}isEmpty(){return!1}},Vc=new Fv;Object.defineProperties(ge,{MIN:{value:new ge(go,Ve.EMPTY_NODE)},MAX:{value:new ge(ki,Vc)}});yh.__EMPTY_NODE=Ve.EMPTY_NODE;_o.__childrenNodeConstructor=Ve;UH(Vc);BH(Vc);var HH=!0;function Et(n,e=null){if(n===null)return Ve.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),O(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new _o(t,Et(e))}if(!(n instanceof Array)&&HH){let t=[],r=!1;if(sn(n,(o,a)=>{if(o.substring(0,1)!=="."){let u=Et(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),t.push(new ge(o,u)))}}),t.length===0)return Ve.EMPTY_NODE;let s=vh(t,VH,o=>o.name,hI);if(r){let o=vh(t,Tt.getCompare());return new Ve(s,Et(e),new yo({".priority":o},{".priority":Tt}))}else return new Ve(s,Et(e),yo.Default)}else{let t=Ve.EMPTY_NODE;return sn(n,(r,i)=>{if(Tn(n,r)&&r.substring(0,1)!=="."){let s=Et(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Et(e))}}jH(Et);var Lv=class extends mo{constructor(e){super(),this.indexPath_=e,O(!de(e)&&pe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?Eo(e.name,t.name):s}makePost(e,t){let r=Et(e),i=Ve.EMPTY_NODE.updateChild(this.indexPath_,r);return new ge(t,i)}maxPost(){let e=Ve.EMPTY_NODE.updateChild(this.indexPath_,Vc);return new ge(ki,e)}toString(){return KR(this.indexPath_,0).join("/")}};var Vv=class extends mo{compare(e,t){let r=e.node.compareTo(t.node);return r===0?Eo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return ge.MIN}maxPost(){return ge.MAX}makePost(e,t){let r=Et(e);return new ge(t,r)}toString(){return".value"}},qH=new Vv;function zH(n){return{type:"value",snapshotNode:n}}function GH(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function WH(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function lR(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function KH(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var Uv=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return O(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return O(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:go}hasEnd(){return this.endSet_}getIndexEndValue(){return O(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return O(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ki}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return O(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Tt}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function dR(n){let e={};if(n.isDefault())return e;let t;if(n.index_===Tt?t="$priority":n.index_===qH?t="$value":n.index_===po?t="$key":(O(n.index_ instanceof Lv,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=it(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=it(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+it(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=it(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+it(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function hR(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Tt&&(e.i=n.index_.toString()),e}var jv=class n extends gh{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Fc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(O(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let u=dR(e._queryParams);this.restRequest_(s+".json",u,(l,h)=>{let p=h;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),Wr(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=dR(e._queryParams),r=e._path.toString(),i=new af;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Kr(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=hu(a.responseText)}catch{Wt("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&Wt("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var Bv=class{constructor(){this.rootNode_=Ve.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Ih(){return{value:null,children:new Map}}function nN(n,e,t){if(de(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=pe(e);n.children.has(r)||n.children.set(r,Ih());let i=n.children.get(r);e=Oe(e),nN(i,e,t)}}function $v(n,e,t){n.value!==null?t(e,n.value):QH(n,(r,i)=>{let s=new Ae(e.toString()+"/"+r);$v(i,s,t)})}function QH(n,e){n.children.forEach((t,r)=>{e(r,t)})}var Hv=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&sn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var fR=10*1e3,YH=30*1e3,ZH=5*60*1e3,qv=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Hv(e);let r=fR+(YH-fR)*Math.random();Ac(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;sn(e,(i,s)=>{s>0&&Tn(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),Ac(this.reportStats_.bind(this),Math.floor(Math.random()*2*ZH))}};var sr=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(sr||{});function rN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function iN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var zv=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=sr.ACK_USER_WRITE,this.source=rN()}operationForChild(e){if(de(this.path)){if(this.affectedTree.value!=null)return O(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ae(e));return new n(Ce(),t,this.revert)}}else return O(pe(this.path)===e,"operationForChild called for unrelated child."),new n(Oe(this.path),this.affectedTree,this.revert)}};var vo=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=sr.OVERWRITE}operationForChild(e){return de(this.path)?new n(this.source,Ce(),this.snap.getImmediateChild(e)):new n(this.source,Oe(this.path),this.snap)}};var wh=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=sr.MERGE}operationForChild(e){if(de(this.path)){let t=this.children.subtree(new Ae(e));return t.isEmpty()?null:t.value?new vo(this.source,Ce(),t.value):new n(this.source,Ce(),t)}else return O(pe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Mc=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(de(e))return this.isFullyInitialized()&&!this.filtered_;let t=pe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function JH(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(KH(o.childName,o.snapshotNode))}),Sc(n,i,"child_removed",e,r,t),Sc(n,i,"child_added",e,r,t),Sc(n,i,"child_moved",s,r,t),Sc(n,i,"child_changed",e,r,t),Sc(n,i,"value",e,r,t),i}function Sc(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,u)=>eq(n,a,u)),o.forEach(a=>{let u=XH(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,n.query_))})})}function XH(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function eq(n,e,t){if(e.childName==null||t.childName==null)throw Hi("Should only compare child_ events.");let r=new ge(e.childName,e.snapshotNode),i=new ge(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function oN(n,e){return{eventCache:n,serverCache:e}}function Nc(n,e,t,r){return oN(new Mc(e,t,r),n.serverCache)}function aN(n,e,t,r){return oN(n.eventCache,new Mc(e,t,r))}function Gv(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Oi(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var gv,tq=()=>(gv||(gv=new rn(tH)),gv),Ut=class n{constructor(e,t=tq()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return sn(e,(r,i)=>{t=t.set(new Ae(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ce(),value:this.value};if(de(e))return null;{let r=pe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Oe(e),t);return s!=null?{path:at(new Ae(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(de(e))return this;{let t=pe(e),r=this.children.get(t);return r!==null?r.subtree(Oe(e)):new n(null)}}set(e,t){if(de(e))return new n(t,this.children);{let r=pe(e),s=(this.children.get(r)||new n(null)).set(Oe(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(de(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=pe(e),r=this.children.get(t);if(r){let i=r.remove(Oe(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(de(e))return this.value;{let t=pe(e),r=this.children.get(t);return r?r.get(Oe(e)):null}}setTree(e,t){if(de(e))return t;{let r=pe(e),s=(this.children.get(r)||new n(null)).setTree(Oe(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Ce(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(at(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ce(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(de(e))return null;{let s=pe(e),o=this.children.get(s);return o?o.findOnPath_(Oe(e),at(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ce(),t)}foreachOnPath_(e,t,r){if(de(e))return this;{this.value&&r(t,this.value);let i=pe(e),s=this.children.get(i);return s?s.foreachOnPath_(Oe(e),at(t,i),r):new n(null)}}foreach(e){this.foreach_(Ce(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(at(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var In=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Ut(null))}};function Pc(n,e,t){if(de(e))return new In(new Ut(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=nn(i,e);return s=s.updateChild(o,t),new In(n.writeTree_.set(i,s))}else{let i=new Ut(t),s=n.writeTree_.setTree(e,i);return new In(s)}}}function pR(n,e,t){let r=n;return sn(t,(i,s)=>{r=Pc(r,at(e,i),s)}),r}function gR(n,e){if(de(e))return In.empty();{let t=n.writeTree_.setTree(e,new Ut(null));return new In(t)}}function Wv(n,e){return Fi(n,e)!=null}function Fi(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(nn(t.path,e)):null}function mR(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Tt,(r,i)=>{e.push(new ge(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ge(r,i.value))}),e}function jr(n,e){if(de(e))return n;{let t=Fi(n,e);return t!=null?new In(new Ut(t)):new In(n.writeTree_.subtree(e))}}function Kv(n){return n.writeTree_.isEmpty()}function Io(n,e){return cN(Ce(),n.writeTree_,e)}function cN(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(O(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=cN(at(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild(at(n,".priority"),r)),t}}function uN(n,e){return pN(e,n)}function nq(n,e,t,r,i){O(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Pc(n.visibleWrites,e,t)),n.lastWriteId=r}function rq(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function iq(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);O(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&sq(a,r.path)?i=!1:vn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return oq(n),!0;if(r.snap)n.visibleWrites=gR(n.visibleWrites,r.path);else{let a=r.children;sn(a,u=>{n.visibleWrites=gR(n.visibleWrites,at(r.path,u))})}return!0}else return!1}function sq(n,e){if(n.snap)return vn(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&vn(at(n.path,t),e))return!0;return!1}function oq(n){n.visibleWrites=lN(n.allWrites,aq,Ce()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function aq(n){return n.visible}function lN(n,e,t){let r=In.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)vn(t,o)?(a=nn(t,o),r=Pc(r,a,s.snap)):vn(o,t)&&(a=nn(o,t),r=Pc(r,Ce(),s.snap.getChild(a)));else if(s.children){if(vn(t,o))a=nn(t,o),r=pR(r,a,s.children);else if(vn(o,t))if(a=nn(o,t),de(a))r=pR(r,Ce(),s.children);else{let u=Wr(s.children,pe(a));if(u){let l=u.getChild(Oe(a));r=Pc(r,Ce(),l)}}}else throw Hi("WriteRecord should have .snap or .children")}}return r}function dN(n,e,t,r,i){if(!r&&!i){let s=Fi(n.visibleWrites,e);if(s!=null)return s;{let o=jr(n.visibleWrites,e);if(Kv(o))return t;if(t==null&&!Wv(o,Ce()))return null;{let a=t||Ve.EMPTY_NODE;return Io(o,a)}}}else{let s=jr(n.visibleWrites,e);if(!i&&Kv(s))return t;if(!i&&t==null&&!Wv(s,Ce()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(vn(l.path,e)||vn(e,l.path))},a=lN(n.allWrites,o,e),u=t||Ve.EMPTY_NODE;return Io(a,u)}}}function cq(n,e,t){let r=Ve.EMPTY_NODE,i=Fi(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Tt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=jr(n.visibleWrites,e);return t.forEachChild(Tt,(o,a)=>{let u=Io(jr(s,new Ae(o)),a);r=r.updateImmediateChild(o,u)}),mR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=jr(n.visibleWrites,e);return mR(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function uq(n,e,t,r,i){O(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=at(e,t);if(Wv(n.visibleWrites,s))return null;{let o=jr(n.visibleWrites,s);return Kv(o)?i.getChild(t):Io(o,i.getChild(t))}}function lq(n,e,t,r){let i=at(e,t),s=Fi(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=jr(n.visibleWrites,i);return Io(o,r.getNode().getImmediateChild(t))}else return null}function dq(n,e){return Fi(n.visibleWrites,e)}function hq(n,e,t,r,i,s,o){let a,u=jr(n.visibleWrites,e),l=Fi(u,Ce());if(l!=null)a=l;else if(t!=null)a=Io(u,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=m.getNext();for(;_&&h.length<i;)p(_,r)!==0&&h.push(_),_=m.getNext();return h}else return[]}function fq(){return{visibleWrites:In.empty(),allWrites:[],lastWriteId:-1}}function Qv(n,e,t,r){return dN(n.writeTree,n.treePath,e,t,r)}function hN(n,e){return cq(n.writeTree,n.treePath,e)}function _R(n,e,t,r){return uq(n.writeTree,n.treePath,e,t,r)}function Eh(n,e){return dq(n.writeTree,at(n.treePath,e))}function pq(n,e,t,r,i,s){return hq(n.writeTree,n.treePath,e,t,r,i,s)}function fI(n,e,t){return lq(n.writeTree,n.treePath,e,t)}function fN(n,e){return pN(at(n.treePath,e),n.writeTree)}function pN(n,e){return{treePath:n,writeTree:e}}var Yv=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;O(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),O(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,lR(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,WH(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,GH(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,lR(r,e.snapshotNode,i.oldSnap));else throw Hi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var Zv=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},gN=new Zv,xc=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Mc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fI(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Oi(this.viewCache_),s=pq(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function gq(n,e){O(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),O(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function mq(n,e,t,r,i){let s=new Yv,o,a;if(t.type===sr.OVERWRITE){let l=t;l.source.fromUser?o=Jv(n,e,l.path,l.snap,r,i,s):(O(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!de(l.path),o=Th(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===sr.MERGE){let l=t;l.source.fromUser?o=yq(n,e,l.path,l.children,r,i,s):(O(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=Xv(n,e,l.path,l.children,r,i,a,s))}else if(t.type===sr.ACK_USER_WRITE){let l=t;l.revert?o=wq(n,e,l.path,r,i,s):o=vq(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===sr.LISTEN_COMPLETE)o=Iq(n,e,t.path,r,s);else throw Hi("Unknown operation type: "+t.type);let u=s.getChanges();return _q(e,o,u),{viewCache:o,changes:u}}function _q(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Gv(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(zH(Gv(e)))}}function mN(n,e,t,r,i,s){let o=e.eventCache;if(Eh(r,t)!=null)return e;{let a,u;if(de(t))if(O(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Oi(e),h=l instanceof Ve?l:Ve.EMPTY_NODE,p=hN(r,h);a=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=Qv(r,Oi(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=pe(t);if(l===".priority"){O(Br(t)===1,"Can't have a priority with additional path components");let h=o.getNode();u=e.serverCache.getNode();let p=_R(r,t,h,u);p!=null?a=n.filter.updatePriority(h,p):a=o.getNode()}else{let h=Oe(t),p;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();let m=_R(r,t,o.getNode(),u);m!=null?p=o.getNode().getImmediateChild(l).updateChild(h,m):p=o.getNode().getImmediateChild(l)}else p=fI(r,l,e.serverCache);p!=null?a=n.filter.updateChild(o.getNode(),l,p,h,i,s):a=o.getNode()}}return Nc(e,a,o.isFullyInitialized()||de(t),n.filter.filtersNodes())}}function Th(n,e,t,r,i,s,o,a){let u=e.serverCache,l,h=o?n.filter:n.filter.getIndexedFilter();if(de(t))l=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){let _=u.getNode().updateChild(t,r);l=h.updateFullNode(u.getNode(),_,null)}else{let _=pe(t);if(!u.isCompleteForPath(t)&&Br(t)>1)return e;let E=Oe(t),A=u.getNode().getImmediateChild(_).updateChild(E,r);_===".priority"?l=h.updatePriority(u.getNode(),A):l=h.updateChild(u.getNode(),_,A,E,gN,null)}let p=aN(e,l,u.isFullyInitialized()||de(t),h.filtersNodes()),m=new xc(i,p,s);return mN(n,p,t,i,m,a)}function Jv(n,e,t,r,i,s,o){let a=e.eventCache,u,l,h=new xc(i,e,s);if(de(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Nc(e,l,!0,n.filter.filtersNodes());else{let p=pe(t);if(p===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),u=Nc(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Oe(t),_=a.getNode().getImmediateChild(p),E;if(de(m))E=r;else{let N=h.getCompleteChild(p);N!=null?WR(m)===".priority"&&N.getChild(QR(m)).isEmpty()?E=N:E=N.updateChild(m,r):E=Ve.EMPTY_NODE}if(_.equals(E))u=e;else{let N=n.filter.updateChild(a.getNode(),p,E,m,h,o);u=Nc(e,N,a.isFullyInitialized(),n.filter.filtersNodes())}}}return u}function yR(n,e){return n.eventCache.isCompleteForChild(e)}function yq(n,e,t,r,i,s,o){let a=e;return r.foreach((u,l)=>{let h=at(t,u);yR(e,pe(h))&&(a=Jv(n,a,h,l,i,s,o))}),r.foreach((u,l)=>{let h=at(t,u);yR(e,pe(h))||(a=Jv(n,a,h,l,i,s,o))}),a}function vR(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function Xv(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;de(t)?l=r:l=new Ut(null).setTree(t,r);let h=e.serverCache.getNode();return l.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){let _=e.serverCache.getNode().getImmediateChild(p),E=vR(n,_,m);u=Th(n,u,new Ae(p),E,i,s,o,a)}}),l.children.inorderTraversal((p,m)=>{let _=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!_){let E=e.serverCache.getNode().getImmediateChild(p),N=vR(n,E,m);u=Th(n,u,new Ae(p),N,i,s,o,a)}}),u}function vq(n,e,t,r,i,s,o){if(Eh(i,t)!=null)return e;let a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(de(t)&&u.isFullyInitialized()||u.isCompleteForPath(t))return Th(n,e,t,u.getNode().getChild(t),i,s,a,o);if(de(t)){let l=new Ut(null);return u.getNode().forEachChild(po,(h,p)=>{l=l.set(new Ae(h),p)}),Xv(n,e,t,l,i,s,a,o)}else return e}else{let l=new Ut(null);return r.foreach((h,p)=>{let m=at(t,h);u.isCompleteForPath(m)&&(l=l.set(h,u.getNode().getChild(m)))}),Xv(n,e,t,l,i,s,a,o)}}function Iq(n,e,t,r,i){let s=e.serverCache,o=aN(e,s.getNode(),s.isFullyInitialized()||de(t),s.isFiltered());return mN(n,o,t,r,gN,i)}function wq(n,e,t,r,i,s){let o;if(Eh(r,t)!=null)return e;{let a=new xc(r,e,i),u=e.eventCache.getNode(),l;if(de(t)||pe(t)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=Qv(r,Oi(e));else{let p=e.serverCache.getNode();O(p instanceof Ve,"serverChildren would be complete if leaf node"),h=hN(r,p)}h=h,l=n.filter.updateFullNode(u,h,s)}else{let h=pe(t),p=fI(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=u.getImmediateChild(h)),p!=null?l=n.filter.updateChild(u,h,p,Oe(t),a,s):e.eventCache.getNode().hasChild(h)?l=n.filter.updateChild(u,h,Ve.EMPTY_NODE,Oe(t),a,s):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Qv(r,Oi(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Eh(r,Ce())!=null,Nc(e,l,o,n.filter.filtersNodes())}}function Eq(n,e){let t=Oi(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!de(e)&&!t.getImmediateChild(pe(e)).isEmpty())?t.getChild(e):null}function IR(n,e,t,r){e.type===sr.MERGE&&e.source.queryId!==null&&(O(Oi(n.viewCache_),"We should always have a full cache before handling merges"),O(Gv(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=mq(n.processor_,i,e,t,r);return gq(n.processor_,s.viewCache),O(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,Tq(n,s.changes,s.viewCache.eventCache.getNode(),null)}function Tq(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return JH(n.eventGenerator_,e,t,i)}var wR;function Cq(n){O(!wR,"__referenceConstructor has already been defined"),wR=n}function pI(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return O(s!=null,"SyncTree gave us an op for an invalid query."),IR(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(IR(o,e,t,r));return s}}function gI(n,e){let t=null;for(let r of n.views.values())t=t||Eq(r,e);return t}var ER;function bq(n){O(!ER,"__referenceConstructor has already been defined"),ER=n}var Ch=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Ut(null),this.pendingWriteTree_=fq(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function Dq(n,e,t,r,i){return nq(n.pendingWriteTree_,e,t,r,i),i?Dh(n,new vo(rN(),e,t)):[]}function ho(n,e,t=!1){let r=rq(n.pendingWriteTree_,e);if(iq(n.pendingWriteTree_,e)){let s=new Ut(null);return r.snap!=null?s=s.set(Ce(),!0):sn(r.children,o=>{s=s.set(new Ae(o),!0)}),Dh(n,new zv(r.path,s,t))}else return[]}function bh(n,e,t){return Dh(n,new vo(iN(),e,t))}function Sq(n,e,t){let r=Ut.fromObject(t);return Dh(n,new wh(iN(),e,r))}function Aq(n,e,t,r){let i=IN(n,r);if(i!=null){let s=wN(i),o=s.path,a=s.queryId,u=nn(o,e),l=new vo(sN(a),u,t);return EN(n,o,l)}else return[]}function Rq(n,e,t,r){let i=IN(n,r);if(i){let s=wN(i),o=s.path,a=s.queryId,u=nn(o,e),l=Ut.fromObject(t),h=new wh(sN(a),u,l);return EN(n,o,h)}else return[]}function _N(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let u=nn(o,e),l=gI(a,u);if(l)return l});return dN(i,e,s,t,!0)}function Dh(n,e){return yN(e,n.syncPointTree_,null,uN(n.pendingWriteTree_,Ce()))}function yN(n,e,t,r){if(de(n.path))return vN(n,e,t,r);{let i=e.get(Ce());t==null&&i!=null&&(t=gI(i,Ce()));let s=[],o=pe(n.path),a=n.operationForChild(o),u=e.children.get(o);if(u&&a){let l=t?t.getImmediateChild(o):null,h=fN(r,o);s=s.concat(yN(a,u,l,h))}return i&&(s=s.concat(pI(i,n,r,t))),s}}function vN(n,e,t,r){let i=e.get(Ce());t==null&&i!=null&&(t=gI(i,Ce()));let s=[];return e.children.inorderTraversal((o,a)=>{let u=t?t.getImmediateChild(o):null,l=fN(r,o),h=n.operationForChild(o);h&&(s=s.concat(vN(h,a,u,l)))}),i&&(s=s.concat(pI(i,n,r,t))),s}function IN(n,e){return n.tagToQueryMap.get(e)}function wN(n){let e=n.indexOf("$");return O(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ae(n.substr(0,e))}}function EN(n,e,t){let r=n.syncPointTree_.get(e);O(r,"Missing sync point for query tag that we're tracking");let i=uN(n.pendingWriteTree_,e);return pI(r,t,i,null)}var eI=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},tI=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=at(this.path_,e);return new n(this.syncTree_,t)}node(){return _N(this.syncTree_,this.path_)}},Nq=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},TR=function(n,e,t){if(!n||typeof n!="object")return n;if(O(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return Pq(n[".sv"],e,t);if(typeof n[".sv"]=="object")return Mq(n[".sv"],e);O(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},Pq=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:O(!1,"Unexpected server value: "+n)}},Mq=function(n,e,t){n.hasOwnProperty("increment")||O(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&O(!1,"Unexpected increment value: "+r);let i=e.node();if(O(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},xq=function(n,e,t,r){return mI(e,new tI(t,n),r)},kq=function(n,e,t){return mI(n,new eI(e),t)};function mI(n,e,t){let r=n.getPriority().val(),i=TR(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=TR(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new _o(a,Et(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new _o(i))),o.forEachChild(Tt,(a,u)=>{let l=mI(u,e.getImmediateChild(a),t);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}var kc=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function _I(n,e){let t=e instanceof Ae?e:new Ae(e),r=n,i=pe(t);for(;i!==null;){let s=Wr(r.node.children,i)||{children:{},childCount:0};r=new kc(i,r,s),t=Oe(t),i=pe(t)}return r}function To(n){return n.node.value}function TN(n,e){n.node.value=e,nI(n)}function CN(n){return n.node.childCount>0}function Oq(n){return To(n)===void 0&&!CN(n)}function Sh(n,e){sn(n.node.children,(t,r)=>{e(new kc(t,n,r))})}function bN(n,e,t,r){t&&!r&&e(n),Sh(n,i=>{bN(i,e,!0,r)}),t&&r&&e(n)}function Fq(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Uc(n){return new Ae(n.parent===null?n.name:Uc(n.parent)+"/"+n.name)}function nI(n){n.parent!==null&&Lq(n.parent,n.name,n)}function Lq(n,e,t){let r=Oq(t),i=Tn(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,nI(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,nI(n))}var Vq=/[\[\].#$\/\u0000-\u001F\u007F]/,Uq=/[\[\].#$\u0000-\u001F\u007F]/,mv=10*1024*1024,DN=function(n){return typeof n=="string"&&n.length!==0&&!Vq.test(n)},jq=function(n){return typeof n=="string"&&n.length!==0&&!Uq.test(n)},Bq=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),jq(n)};var SN=function(n,e,t){let r=t instanceof Ae?new Nv(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Pi(r));if(typeof e=="function")throw new Error(n+"contains a function "+Pi(r)+" with contents = "+e.toString());if(RR(e))throw new Error(n+"contains "+e.toString()+" "+Pi(r));if(typeof e=="string"&&e.length>mv/3&&Yo(e)>mv)throw new Error(n+"contains a string greater than "+mv+" utf8 bytes "+Pi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(sn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!DN(o)))throw new Error(n+" contains an invalid key ("+o+") "+Pi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MH(r,o),SN(n,a,r),xH(r)}),i&&s)throw new Error(n+' contains ".value" child '+Pi(r)+" in addition to actual children.")}};var $q=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!DN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!Bq(t))throw new Error(EE(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var rI=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Hq(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!YR(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Li(n,e,t){Hq(n,t),qq(n,r=>vn(r,e)||vn(e,r))}function qq(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(zq(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function zq(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();xi&&wt("event: "+t.toString()),Lc(r)}}}var Gq="repo_interrupt",Wq=25,iI=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rI,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ih(),this.transactionQueueTree_=new kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function Kq(n,e,t){if(n.stats_=lI(n.repoInfo_),n.forceRestClient_||aH())n.server_=new jv(n.repoInfo_,(r,i,s,o)=>{CR(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bR(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{it(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new dI(n.repoInfo_,e,(r,i,s,o)=>{CR(n,r,i,s,o)},r=>{bR(n,r)},r=>{Yq(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=uH(n.repoInfo_,()=>new qv(n.stats_,n.server_)),n.infoData_=new Bv,n.infoSyncTree_=new Ch({startListening:(r,i,s,o)=>{let a=[],u=n.infoData_.getNode(r._path);return u.isEmpty()||(a=bh(n.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),yI(n,"connected",!1),n.serverSyncTree_=new Ch({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,u)=>{let l=o(a,u);Li(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function Qq(n){let t=n.infoData_.getNode(new Ae(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function AN(n){return Nq({timestamp:Qq(n)})}function CR(n,e,t,r,i){n.dataUpdateCount++;let s=new Ae(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let u=Ko(t,l=>Et(l));o=Rq(n.serverSyncTree_,s,u,i)}else{let u=Et(t);o=Aq(n.serverSyncTree_,s,u,i)}else if(r){let u=Ko(t,l=>Et(l));o=Sq(n.serverSyncTree_,s,u)}else{let u=Et(t);o=bh(n.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=II(n,s)),Li(n.eventQueue_,a,o)}function bR(n,e){yI(n,"connected",e),e===!1&&Jq(n)}function Yq(n,e){sn(e,(t,r)=>{yI(n,t,r)})}function yI(n,e,t){let r=new Ae("/.info/"+e),i=Et(t);n.infoData_.updateSnapshot(r,i);let s=bh(n.infoSyncTree_,r,i);Li(n.eventQueue_,r,s)}function Zq(n){return n.nextWriteId_++}function Jq(n){RN(n,"onDisconnectEvents");let e=AN(n),t=Ih();$v(n.onDisconnect_,Ce(),(i,s)=>{let o=xq(i,s,n.serverSyncTree_,e);nN(t,i,o)});let r=[];$v(t,Ce(),(i,s)=>{r=r.concat(bh(n.serverSyncTree_,i,s));let o=nz(n,i);II(n,o)}),n.onDisconnect_=Ih(),Li(n.eventQueue_,Ce(),r)}function Xq(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Gq)}function RN(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),wt(t,...e)}function NN(n,e,t){return _N(n.serverSyncTree_,e,t)||Ve.EMPTY_NODE}function vI(n,e=n.transactionQueueTree_){if(e||Ah(n,e),To(e)){let t=MN(n,e);O(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&ez(n,Uc(e),t)}else CN(e)&&Sh(e,t=>{vI(n,t)})}function ez(n,e,t){let r=t.map(l=>l.currentWriteId),i=NN(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let h=t[l];O(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=nn(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),u=e;n.server_.put(u.toString(),a,l=>{RN(n,"transaction put response",{path:u.toString(),status:l});let h=[];if(l==="ok"){let p=[];for(let m=0;m<t.length;m++)t[m].status=2,h=h.concat(ho(n.serverSyncTree_,t[m].currentWriteId)),t[m].onComplete&&p.push(()=>t[m].onComplete(null,!0,t[m].currentOutputSnapshotResolved)),t[m].unwatcher();Ah(n,_I(n.transactionQueueTree_,e)),vI(n,n.transactionQueueTree_),Li(n.eventQueue_,e,h);for(let m=0;m<p.length;m++)Lc(p[m])}else{if(l==="datastale")for(let p=0;p<t.length;p++)t[p].status===3?t[p].status=4:t[p].status=0;else{Wt("transaction at "+u.toString()+" failed: "+l);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=l}II(n,e)}},o)}function II(n,e){let t=PN(n,e),r=Uc(t),i=MN(n,t);return tz(n,i,r),r}function tz(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let u=e[a],l=nn(t,u.path),h=!1,p;if(O(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,p=u.abortReason,i=i.concat(ho(n.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=Wq)h=!0,p="maxretry",i=i.concat(ho(n.serverSyncTree_,u.currentWriteId,!0));else{let m=NN(n,u.path,o);u.currentInputSnapshot=m;let _=e[a].update(m.val());if(_!==void 0){SN("transaction failed: Data returned ",_,u.path);let E=Et(_);typeof _=="object"&&_!=null&&Tn(_,".priority")||(E=E.updatePriority(m.getPriority()));let A=u.currentWriteId,M=AN(n),L=kq(E,m,M);u.currentOutputSnapshotRaw=E,u.currentOutputSnapshotResolved=L,u.currentWriteId=Zq(n),o.splice(o.indexOf(A),1),i=i.concat(Dq(n.serverSyncTree_,u.path,L,u.currentWriteId,u.applyLocally)),i=i.concat(ho(n.serverSyncTree_,A,!0))}else h=!0,p="nodata",i=i.concat(ho(n.serverSyncTree_,u.currentWriteId,!0))}Li(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}Ah(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Lc(r[a]);vI(n,n.transactionQueueTree_)}function PN(n,e){let t,r=n.transactionQueueTree_;for(t=pe(e);t!==null&&To(r)===void 0;)r=_I(r,t),e=Oe(e),t=pe(e);return r}function MN(n,e){let t=[];return xN(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xN(n,e,t){let r=To(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Sh(e,i=>{xN(n,i,t)})}function Ah(n,e){let t=To(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,TN(e,t.length>0?t:void 0)}Sh(e,r=>{Ah(n,r)})}function nz(n,e){let t=Uc(PN(n,e)),r=_I(n.transactionQueueTree_,e);return Fq(r,i=>{_v(n,i)}),_v(n,r),bN(r,i=>{_v(n,i)}),t}function _v(n,e){let t=To(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(O(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(O(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(ho(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?TN(e,void 0):t.length=s+1,Li(n.eventQueue_,Uc(e),i);for(let o=0;o<r.length;o++)Lc(r[o])}}function rz(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function iz(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Wt(`Invalid query segment '${t}' in query '${n}'`)}return e}var DR=function(n,e){let t=sz(n),r=t.namespace;t.domain==="firebase.com"&&or(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||X2();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new fh(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ae(t.pathString)}},sz=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",u=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let h=n.indexOf("/");h===-1&&(h=n.length);let p=n.indexOf("?");p===-1&&(p=n.length),e=n.substring(0,Math.min(h,p)),h<p&&(i=rz(n.substring(h,p)));let m=iz(n.substring(Math.min(n.length,p)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")t="localhost";else if(_.split(".").length<=2)t=_;else{let E=e.indexOf(".");r=e.substring(0,E).toLowerCase(),t=e.substring(E+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var sI=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return de(this._path)?null:WR(this._path)}get ref(){return new wo(this._repo,this._path)}get _queryIdentifier(){let e=hR(this._queryParams),t=uI(e);return t==="{}"?"default":t}get _queryObject(){return hR(this._queryParams)}isEqual(e){if(e=we(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=YR(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+PH(this._path)}};var wo=class n extends sI{constructor(e,t){super(e,t,new Uv,!1)}get parent(){let e=QR(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};Cq(wo);bq(wo);var oz="FIREBASE_DATABASE_EMULATOR_HOST",oI={},az=!1;function cz(n,e,t,r){n.repoInfo_=new fh(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function uz(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),wt("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=DR(s,i),a=o.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[oz]),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=DR(s,i),a=o.repoInfo):u=!o.repoInfo.secure;let h=i&&u?new Rc(Rc.OWNER):new Tv(n.name,n.options,e);$q("Invalid Firebase Database URL",o),de(o.path)||or("Database URL must point to the root of a Firebase Database (not including a child path).");let p=dz(a,n,h,new Ev(n.name,t));return new aI(p,n)}function lz(n,e){let t=oI[e];(!t||t[n.key]!==n)&&or(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Xq(n),delete t[n.key]}function dz(n,e,t,r){let i=oI[e.name];i||(i={},oI[e.name]=i);let s=i[n.toURLString()];return s&&or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new iI(n,az,t,r),i[n.toURLString()]=s,s}var aI=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(Kq(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wo(this._repo,Ce())),this._rootInternal}_delete(){return this._rootInternal!==null&&(lz(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&or("Cannot call "+e+" on a deleted database.")}};function kN(n=Ye(),e){let t=Qe(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=gr("database");r&&ON(t,...r)}return t}function ON(n,e,t,r={}){n=we(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&or("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Rc(Rc.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:qi(r.mockUserToken,n.app.options.projectId);s=new Rc(o)}cz(i,e,t,s)}function hz(n){Y2(kt),ze(new qe("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return uz(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),B(K0,Q0,n),B(K0,Q0,"esm2017")}dI.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};dI.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};hz();var jc=class{constructor(e){return e}},FN="database",wI=class{constructor(){return We(FN)}};var EI=new U("angularfire2.database-instances");function fz(n,e){let t=Je(FN,n,e);return t&&new jc(t)}function pz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new jc(r)}}var gz={provide:wI,deps:[[new Y,EI]]},mz={provide:jc,useFactory:fz,deps:[[new Y,EI],ke]};function LN(n,...e){return B("angularfire",xe.full,"rtdb"),Re([mz,gz,{provide:EI,useFactory:pz(n),multi:!0,deps:[W,ve,$e,Le,[new Y,gn],[new Y,Vt],...e]}])}var VN=Se(kN,!0);var BN="functions";var TI=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return v(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return v(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return v(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return v(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var CI="us-central1";var bI=class{constructor(e,t,r,i,s=CI,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new TI(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=CI}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function _z(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var UN="@firebase/functions",jN="0.11.8";var yz="auth-internal",vz="app-check-internal",Iz="messaging-internal";function wz(n,e){let t=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(yz),a=r.getProvider(Iz),u=r.getProvider(vz);return new bI(s,o,a,u,i,n)};ze(new qe(BN,t,"PUBLIC").setMultipleInstances(!0)),B(UN,jN,e),B(UN,jN,"esm2017")}function $N(n=Ye(),e=CI){let r=Qe(we(n),BN).getImmediate({identifier:e}),i=gr("functions");return i&&HN(r,...i),r}function HN(n,e,t){_z(we(n),e,t)}wz(fetch.bind(self));var Bc=class{constructor(e){return e}},qN="functions",DI=class{constructor(){return We(qN)}};var SI=new U("angularfire2.functions-instances");function Ez(n,e){let t=Je(qN,n,e);return t&&new Bc(t)}function Tz(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Bc(r)}}var Cz={provide:DI,deps:[[new Y,SI]]},bz={provide:Bc,useFactory:Ez,deps:[[new Y,SI],ke]};function zN(n,...e){return B("angularfire",xe.full,"fn"),Re([bz,Cz,{provide:SI,useFactory:Tz(n),multi:!0,deps:[W,ve,$e,Le,[new Y,gn],[new Y,Vt],...e]}])}var GN=Se($N,!0);var Dz="/firebase-messaging-sw.js",Sz="/firebase-cloud-messaging-push-scope",JN="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Az="https://fcmregistrations.googleapis.com/v1",XN="google.c.a.c_id",Rz="google.c.a.c_l",Nz="google.c.a.ts",Pz="google.c.a.e";var Rh=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(Rh||{});function ar(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Mz(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var AI="fcm_token_details_db",xz=5,WN="fcm_token_object_Store";function kz(n){return v(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(AI))return null;let e=null;return(yield cf(AI,xz,{upgrade:(r,i,s,o)=>v(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(WN))return;let u=o.objectStore(WN),l=yield u.index("fcmSenderId").get(n);if(yield u.clear(),!!l){if(i===2){let h=l;if(!h.auth||!h.p256dh||!h.endpoint)return;e={token:h.fcmToken,createTime:(a=h.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:h.auth,p256dh:h.p256dh,endpoint:h.endpoint,swScope:h.swScope,vapidKey:typeof h.vapidKey=="string"?h.vapidKey:ar(h.vapidKey)}}}else if(i===3){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ar(h.auth),p256dh:ar(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ar(h.vapidKey)}}}else if(i===4){let h=l;e={token:h.fcmToken,createTime:h.createTime,subscriptionOptions:{auth:ar(h.auth),p256dh:ar(h.p256dh),endpoint:h.endpoint,swScope:h.swScope,vapidKey:ar(h.vapidKey)}}}}})})).close(),yield fu(AI),yield fu("fcm_vapid_details_db"),yield fu("undefined"),Oz(e)?e:null})}function Oz(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var Fz="firebase-messaging-database",Lz=1,$c="firebase-messaging-store",RI=null;function eP(){return RI||(RI=cf(Fz,Lz,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore($c)}}})),RI}function Vz(n){return v(this,null,function*(){let e=tP(n),r=yield(yield eP()).transaction($c).objectStore($c).get(e);if(r)return r;{let i=yield kz(n.appConfig.senderId);if(i)return yield MI(n,i),i}})}function MI(n,e){return v(this,null,function*(){let t=tP(n),i=(yield eP()).transaction($c,"readwrite");return yield i.objectStore($c).put(e,t),yield i.done,e})}function tP({appConfig:n}){return n.appId}var Uz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Mt=new En("messaging","Messaging",Uz);function jz(n,e){return v(this,null,function*(){let t=yield kI(n),r=nP(e),i={method:"POST",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(xI(n.appConfig),i)).json()}catch(o){throw Mt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Mt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw Mt.create("token-subscribe-no-token");return s.token})}function Bz(n,e){return v(this,null,function*(){let t=yield kI(n),r=nP(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${xI(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw Mt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw Mt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw Mt.create("token-update-no-token");return s.token})}function $z(n,e){return v(this,null,function*(){let r={method:"DELETE",headers:yield kI(n)};try{let s=yield(yield fetch(`${xI(n.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw Mt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw Mt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function xI({projectId:n}){return`${Az}/projects/${n}/registrations`}function kI(t){return v(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function nP({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==JN&&(i.web.applicationPubKey=r),i}var Hz=7*24*60*60*1e3;function qz(n){return v(this,null,function*(){let e=yield Gz(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ar(e.getKey("auth")),p256dh:ar(e.getKey("p256dh"))},r=yield Vz(n.firebaseDependencies);if(r){if(Wz(r.subscriptionOptions,t))return Date.now()>=r.createTime+Hz?zz(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield $z(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return KN(n.firebaseDependencies,t)}else return KN(n.firebaseDependencies,t)})}function zz(n,e){return v(this,null,function*(){try{let t=yield Bz(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield MI(n.firebaseDependencies,r),t}catch(t){throw t}})}function KN(n,e){return v(this,null,function*(){let r={token:yield jz(n,e),createTime:Date.now(),subscriptionOptions:e};return yield MI(n,r),r.token})}function Gz(n,e){return v(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Mz(e)})})}function Wz(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}function QN(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return Kz(e,n),Qz(e,n),Yz(e,n),e}function Kz(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let s=e.notification.icon;s&&(n.notification.icon=s)}function Qz(n,e){e.data&&(n.data=e.data)}function Yz(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);let u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(n.fcmOptions.analyticsLabel=u)}function Zz(n){return typeof n=="object"&&!!n&&XN in n}Jz("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function Jz(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function Xz(n){if(!n||!n.options)throw NI("App Configuration Object");if(!n.name)throw NI("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw NI(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function NI(n){return Mt.create("missing-app-config-values",{valueName:n})}var PI=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=Xz(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function eG(n){return v(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(Dz,{scope:Sz}),n.swRegistration.update().catch(()=>{})}catch(e){throw Mt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function tG(n,e){return v(this,null,function*(){if(!e&&!n.swRegistration&&(yield eG(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Mt.create("invalid-sw-registration");n.swRegistration=e}})}function nG(n,e){return v(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=JN)})}function rG(n,e){return v(this,null,function*(){if(!navigator)throw Mt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw Mt.create("permission-blocked");return yield nG(n,e?.vapidKey),yield tG(n,e?.serviceWorkerRegistration),qz(n)})}function iG(n,e,t){return v(this,null,function*(){let r=sG(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[XN],message_name:t[Rz],message_time:t[Nz],message_device_time:Math.floor(Date.now()/1e3)})})}function sG(n){switch(n){case Rh.NOTIFICATION_CLICKED:return"notification_open";case Rh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function oG(n,e){return v(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Rh.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(QN(t)):n.onMessageHandler.next(QN(t)));let r=t.data;Zz(r)&&r[Pz]==="1"&&(yield iG(n,t.messageType,r))})}var YN="@firebase/messaging",ZN="0.12.12";var aG=n=>{let e=new PI(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>oG(e,t)),e},cG=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>rG(e,r)}};function uG(){ze(new qe("messaging",aG,"PUBLIC")),ze(new qe("messaging-internal",cG,"PRIVATE")),B(YN,ZN),B(YN,ZN,"esm2017")}function OI(){return v(this,null,function*(){try{yield Gr()}catch{return!1}return typeof window<"u"&&Un()&&Go()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function rP(n=Ye()){return OI().then(e=>{if(!e)throw Mt.create("unsupported-browser")},e=>{throw Mt.create("indexed-db-unsupported")}),Qe(we(n),"messaging").getImmediate()}uG();var Hc=class{constructor(e){return e}},iP="messaging",FI=class{constructor(){return We(iP)}};var sP="__angularfire_symbol__messagingIsSupported",LI="__angularfire_symbol__messagingIsSupportedValue";globalThis[sP]||=OI().then(n=>globalThis[LI]=n).catch(()=>globalThis[LI]=!1);var Nh={async:()=>globalThis[sP],sync:()=>{let n=globalThis[LI];if(n===void 0)throw new Error(Fs("Messaging"));return n}},VI=new U("angularfire2.messaging-instances");function lG(n,e){if(!Nh.sync())return null;let t=Je(iP,n,e);return t&&new Hc(t)}function dG(n){return(e,t)=>{if(!Nh.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new Hc(r)}}var hG={provide:FI,deps:[[new Y,VI]]},fG={provide:Hc,useFactory:lG,deps:[[new Y,VI],ke]};function oP(n,...e){return B("angularfire",xe.full,"fcm"),Re([fG,hG,{provide:Nr,useValue:Nh.async,multi:!0},{provide:VI,useFactory:dG(n),multi:!0,deps:[W,ve,$e,Le,...e]}])}var iee=Nh.async;var aP=Se(rP,!0);var qc=class{constructor(e){return e}},cP="performance",UI=class{constructor(){return We(cP)}};var jI=new U("angularfire2.performance-instances");function pG(n,e,t){if(!vg(t))return null;let r=Je(cP,n,e);return r&&new qc(r)}function gG(n){return(e,t,r)=>{if(!vg(t))return null;let i=e.runOutsideAngular(()=>n(r));return new qc(i)}}var mG={provide:UI,deps:[[new Y,jI]]},_G={provide:qc,useFactory:pG,deps:[[new Y,jI],ke,fn]};function uP(n,...e){return B("angularfire",xe.full,"perf"),Re([_G,mG,{provide:jI,useFactory:gG(n),multi:!0,deps:[W,fn,ve,$e,Le,...e]}])}var lP=Se(bE,!0);var mP="firebasestorage.googleapis.com",yG="storageBucket",vG=2*60*1e3,IG=10*60*1e3;var On=class n extends xt{constructor(e,t,r=0){super(BI(e),`Firebase Storage: ${t} (${BI(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return BI(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},ur=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(ur||{});function BI(n){return"storage/"+n}function wG(){let n="An unknown error occurred, please check the error payload for server response.";return new On(ur.UNKNOWN,n)}function EG(){return new On(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TG(){return new On(ur.CANCELED,"User canceled the upload/download.")}function CG(n){return new On(ur.INVALID_URL,"Invalid URL '"+n+"'.")}function bG(n){return new On(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function dP(n){return new On(ur.INVALID_ARGUMENT,n)}function _P(){return new On(ur.APP_DELETED,"The Firebase app was deleted.")}function DG(n){return new On(ur.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var cr=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw bG(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(J){J.path_=decodeURIComponent(J.path)}let h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),E={bucket:1,path:3},N=t===mP?"(?:storage.googleapis.com|storage.cloud.google.com)":t,A="([^?#]*)",M=new RegExp(`^https?://${N}/${i}/${A}`,"i"),H=[{regex:a,indices:u,postModify:s},{regex:_,indices:E,postModify:l},{regex:M,indices:{bucket:1,path:2},postModify:l}];for(let J=0;J<H.length;J++){let Ne=H[J],X=Ne.regex.exec(e);if(X){let T=X[Ne.indices.bucket],y=X[Ne.indices.path];y||(y=""),r=new n(T,y),Ne.postModify(r);break}}if(r==null)throw CG(e);return r}},$I=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function SG(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...A){l||(l=!0,e.apply(null,A))}function p(A){i=setTimeout(()=>{i=null,n(_,u())},A)}function m(){s&&clearTimeout(s)}function _(A,...M){if(l){m();return}if(A){m(),h.call(null,A,...M);return}if(u()||o){m(),h.call(null,A,...M);return}r<64&&(r*=2);let H;a===1?(a=2,H=0):H=(r+Math.random())*1e3,p(H)}let E=!1;function N(A){E||(E=!0,m(),!l&&(i!==null?(A||(a=2),clearTimeout(i),p(0)):A||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},t),N}function AG(n){n(!1)}function RG(n){return n!==void 0}function hP(n,e,t,r){if(r<e)throw dP(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dP(`Invalid value for '${n}'. Expected ${t} or less.`)}function NG(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var HI=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}(HI||{});function PG(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var qI=class{constructor(e,t,r,i,s,o,a,u,l,h,p,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,E)=>{this.resolve_=_,this.reject_=E,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Co(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===HI.NO_ERROR,u=s.getStatus();if(!a||PG(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===HI.ABORT;r(!1,new Co(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new Co(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());RG(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=wG();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?_P():TG();o(u)}else{let u=EG();o(u)}};this.canceled_?t(!1,new Co(!1,null,!0)):this.backoffId_=SG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Co=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function MG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function xG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function OG(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function FG(n,e,t,r,i,s,o=!0){let a=NG(n.urlParams),u=n.url+a,l=Object.assign({},n.headers);return kG(l,e),MG(l,t),xG(l,s),OG(l,r),new qI(u,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function LG(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function VG(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var wee=256*1024;var zI=class n{constructor(e,t){this._service=e,t instanceof cr?this._location=t:this._location=cr.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new cr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return VG(this._location.path)}get storage(){return this._service}get parent(){let e=LG(this._location.path);if(e===null)return null;let t=new cr(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw DG(e)}};function fP(n,e){let t=e?.[yG];return t==null?null:cr.makeFromBucketSpec(t,n)}function UG(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:qi(i,n.app.options.projectId))}var GI=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=mP,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vG,this._maxUploadRetryTime=IG,this._requests=new Set,i!=null?this._bucket=cr.makeFromBucketSpec(i,this._host):this._bucket=fP(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=cr.makeFromBucketSpec(this._url,e):this._bucket=fP(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){hP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){hP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return v(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return v(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zI(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new $I(_P());{let o=FG(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return v(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},pP="@firebase/storage",gP="0.13.2";var yP="storage";function vP(n=Ye(),e){n=we(n);let r=Qe(n,yP).getImmediate({identifier:e}),i=gr("storage");return i&&IP(r,...i),r}function IP(n,e,t,r={}){UG(n,e,t,r)}function jG(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new GI(t,r,i,e,kt)}function BG(){ze(new qe(yP,jG,"PUBLIC").setMultipleInstances(!0)),B(pP,gP,""),B(pP,gP,"esm2017")}BG();var zc=class{constructor(e){return e}},wP="storage",WI=class{constructor(){return We(wP)}};var KI=new U("angularfire2.storage-instances");function $G(n,e){let t=Je(wP,n,e);return t&&new zc(t)}function HG(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new zc(r)}}var qG={provide:WI,deps:[[new Y,KI]]},zG={provide:zc,useFactory:$G,deps:[[new Y,KI],ke]};function EP(n,...e){return B("angularfire",xe.full,"gcs"),Re([zG,qG,{provide:KI,useFactory:HG(n),multi:!0,deps:[W,ve,$e,Le,[new Y,gn],[new Y,Vt],...e]}])}var TP=Se(vP,!0);var QI="@firebase/remote-config",CP="0.4.9";var bP="remote-config";var GG={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},jt=new En("remoteconfig","Remote Config",GG);function DP(n=Ye()){return n=we(n),Qe(n,bP).getImmediate()}function SP(n){let e=we(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var YI=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return v(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function WG(n=navigator){return n.languages&&n.languages[0]||n.language}var ZI=class{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return v(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:WG()},u={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,u),h=new Promise((A,M)=>{e.signal.addEventListener(()=>{let L=new Error("The operation was aborted.");L.name="AbortError",M(L)})}),p;try{yield Promise.race([l,h]),p=yield l}catch(A){let M="fetch-client-network";throw A?.name==="AbortError"&&(M="fetch-timeout"),jt.create(M,{originalErrorMessage:A?.message})}let m=p.status,_=p.headers.get("ETag")||void 0,E,N;if(p.status===200){let A;try{A=yield p.json()}catch(M){throw jt.create("fetch-client-parse",{originalErrorMessage:M?.message})}E=A.entries,N=A.state}if(N==="INSTANCE_STATE_UNSPECIFIED"?m=500:N==="NO_CHANGE"?m=304:(N==="NO_TEMPLATE"||N==="EMPTY_CONFIG")&&(E={}),m!==304&&m!==200)throw jt.create("fetch-status",{httpStatus:m});return{status:m,eTag:_,config:E}})}};function KG(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(jt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QG(n){if(!(n instanceof xt)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var JI=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return v(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,s){return v(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield KG(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!QG(o))throw o;let a={throttleEndTimeMillis:Date.now()+Zo(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var YG=60*1e3,ZG=12*60*60*1e3,XI=class{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:YG,minimumFetchIntervalMillis:ZG},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Ph(n,e){let t=n.target.error||void 0;return jt.create(e,{originalErrorMessage:t&&t?.message})}var Vi="app_namespace_store",JG="firebase_remote_config",XG=1;function eW(){return new Promise((n,e)=>{try{let t=indexedDB.open(JG,XG);t.onerror=r=>{e(Ph(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Vi,{keyPath:"compositeKey"})}}}catch(t){e(jt.create("storage-open",{originalErrorMessage:t?.message}))}})}var ew=class{constructor(e,t,r,i=eW()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return v(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([Vi],"readonly").objectStore(Vi),a=this.createCompositeKey(e);try{let u=o.get(a);u.onerror=l=>{i(Ph(l,"storage-get"))},u.onsuccess=l=>{let h=l.target.result;r(h?h.value:void 0)}}catch(u){i(jt.create("storage-get",{originalErrorMessage:u?.message}))}})})}set(e,t){return v(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([Vi],"readwrite").objectStore(Vi),u=this.createCompositeKey(e);try{let l=a.put({compositeKey:u,value:t});l.onerror=h=>{s(Ph(h,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(jt.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return v(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([Vi],"readwrite").objectStore(Vi),a=this.createCompositeKey(e);try{let u=o.delete(a);u.onerror=l=>{i(Ph(l,"storage-delete"))},u.onsuccess=()=>{r()}}catch(u){i(jt.create("storage-delete",{originalErrorMessage:u?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var tw=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return v(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function tW(){ze(new qe(bP,n,"PUBLIC").setMultipleInstances(!0)),B(QI,CP),B(QI,CP,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jt.create("registration-window");if(!Un())throw jt.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw jt.create("registration-project-id");if(!o)throw jt.create("registration-api-key");if(!a)throw jt.create("registration-app-id");t=t||"firebase";let u=new ew(a,r.name,t),l=new tw(u),h=new Cn(QI);h.logLevel=_t.ERROR;let p=new ZI(i,kt,t,s,o,a),m=new JI(p,u),_=new YI(m,u,l,h),E=new XI(r,_,l,u,h);return SP(E),E}}function AP(){return v(this,null,function*(){if(!Un())return!1;try{return yield Gr()}catch{return!1}})}tW();var Gc=class{constructor(e){return e}},RP="remote-config",nw=class{constructor(){return We(RP)}};var rw="__angularfire_symbol__remoteConfigIsSupportedValue",NP="__angularfire_symbol__remoteConfigIsSupported";globalThis[NP]||=AP().then(n=>globalThis[rw]=n).catch(()=>globalThis[rw]=!1);var Mh={async:()=>globalThis[NP],sync:()=>{let n=globalThis[rw];if(n===void 0)throw new Error(Fs("RemoteConfig"));return n}},iw=new U("angularfire2.remote-config-instances");function nW(n,e){if(!Mh.sync())return null;let t=Je(RP,n,e);return t&&new Gc(t)}function rW(n){return(e,t)=>{if(!Mh.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new Gc(r)}}var iW={provide:nw,deps:[[new Y,iw]]},sW={provide:Gc,useFactory:nW,deps:[[new Y,iw],ke]};function PP(n,...e){return B("angularfire",xe.full,"rc"),Re([sW,iW,{provide:Nr,useValue:Mh.async,multi:!0},{provide:iw,useFactory:rW(n),multi:!0,deps:[W,ve,$e,Le,...e]}])}var yte=Mh.async;var MP=Se(DP,!0);var xP="@firebase/vertexai-preview",kP="0.0.4";var OP="vertexAI",FP="us-central1";var sw=class{constructor(e,t,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=t?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||FP}_delete(){return Promise.resolve()}};var ow=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(ow||{});var Cte=[ow.RECITATION,ow.SAFETY];function LP(n=Ye(),e){return n=we(n),Qe(n,OP).getImmediate({identifier:e?.location||FP})}function oW(){ze(new qe(OP,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new sw(t,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),B(xP,kP),B(xP,kP,"esm2017")}oW();var Wc=class{constructor(e){return e}},VP="vertexai",aw=class{constructor(){return We(VP)}};var cw=new U("angularfire2.vertexai-instances");function aW(n,e){let t=Je(VP,n,e);return t&&new Wc(t)}function cW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Wc(r)}}var uW={provide:aw,deps:[[new Y,cw]]},lW={provide:Wc,useFactory:aW,deps:[[new Y,cw],ke]};function UP(n,...e){return B("angularfire",xe.full,"vertexai"),Re([lW,uW,{provide:cw,useFactory:cW(n),multi:!0,deps:[W,ve,$e,Le,[new Y,Vt],...e]}])}var jP=Se(LP,!0);var BP={firebaseConfig:{apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""},production:!0};var $P={providers:[Kb({eventCoalescing:!0}),ZD(JD),XD(()=>eS(BP.firebaseConfig)),GS(()=>KS()),gA(()=>fA()),pA,c_,q0(()=>W0()),LN(()=>VN()),zN(()=>GN()),oP(()=>aP()),uP(()=>lP()),EP(()=>TP()),PP(()=>MP()),UP(()=>jP())]};function dW(n,e){if(n&1&&(Ar(0,"li"),Is(1),Rr()),n&2){let t=e.$implicit;ng(),cg(t.description)}}var xh=class n{firestore=F(Ni);items$;constructor(){let e=G0(this.firestore,"items");this.items$=z0(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=_l({type:n,selectors:[["app-root"]],standalone:!0,features:[xl],decls:14,vars:2,consts:[[1,"container","mx-auto"],[1,"text-center","py-4","text-gray-800"],[1,"text-3xl"]],template:function(t,r){t&1&&(Ar(0,"div",0)(1,"div",1)(2,"div",2),Is(3,"I Wild Boar Racing sono pronti a scatenarsi!"),Rr(),Ar(4,"div"),Is(5,"La "),Ar(6,"b"),Is(7,"DashBoar"),Rr(),Is(8," \xE8 quasi pronta a ruggire...\u{1F417}"),Rr()(),Ar(9,"ul"),Ub(10,dW,2,1,"li",null,Vb),$b(12,"async"),Rr()(),Ea(13,"router-outlet")),t&2&&(ng(10),jb(Hb(12,0,r.items$)))},dependencies:[om,oD]})};pD(xh,$P).catch(n=>console.error(n));
