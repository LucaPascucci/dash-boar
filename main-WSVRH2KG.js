import{$ as vn,A as yn,B as Dr,C as Fd,D as Ut,E as Mb,F as Pb,G as Sr,H as Ts,I as su,J as ou,K as au,L as bs,M as Ob,N as kb,O as Fb,P as Lb,Q as cu,R as uu,S as De,T as vt,U as Jt,V as Ar,W as $m,X as Ld,Y as wt,Z as bt,_ as ei,a as j,aa as Vb,b as ye,ba as Dt,c as Li,ca as Vd,d as y,da as Y,e as B,ea as Ub,f as jo,g as Tb,h as bb,i as Db,j as Sb,k as Ab,l as Vi,m as jm,n as Bm,o as Bo,p as Zt,q as nu,r as Rb,s as ru,t as kd,u as Nb,v as br,w as xb,x as Xr,y as Cs,z as iu}from"./chunk-VUN4IAWB.js";function jb(n,e){return Object.is(n,e)}var Ft=null,lu=!1,Ud=1,Rr=Symbol("SIGNAL");function Se(n){let e=Ft;return Ft=n,e}function Bb(){return Ft}function TL(){return lu}var $o={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function zm(n){if(lu)throw new Error("");if(Ft===null)return;Ft.consumerOnSignalRead(n);let e=Ft.nextProducerIndex++;if(Gd(Ft),e<Ft.producerNode.length&&Ft.producerNode[e]!==n&&du(Ft)){let t=Ft.producerNode[e];qd(t,Ft.producerIndexOfThis[e])}Ft.producerNode[e]!==n&&(Ft.producerNode[e]=n,Ft.producerIndexOfThis[e]=du(Ft)?zb(n,Ft,e):0),Ft.producerLastReadVersion[e]=n.version}function bL(){Ud++}function $b(n){if(!(du(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ud)){if(!n.producerMustRecompute(n)&&!$d(n)){n.dirty=!1,n.lastCleanEpoch=Ud;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Ud}}function Hb(n){if(n.liveConsumerNode===void 0)return;let e=lu;lu=!0;try{for(let t of n.liveConsumerNode)t.dirty||Gb(t)}finally{lu=e}}function qb(){return Ft?.consumerAllowSignalWrites!==!1}function Gb(n){n.dirty=!0,Hb(n),n.consumerMarkedDirty?.(n)}function hu(n){return n&&(n.nextProducerIndex=0),Se(n)}function Bd(n,e){if(Se(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(du(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)qd(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function $d(n){Gd(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||($b(t),r!==t.version))return!0}return!1}function Hd(n){if(Gd(n),du(n))for(let e=0;e<n.producerNode.length;e++)qd(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zb(n,e,t){if(Wb(n),n.liveConsumerNode.length===0&&Kb(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=zb(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function qd(n,e){if(Wb(n),n.liveConsumerNode.length===1&&Kb(n))for(let r=0;r<n.producerNode.length;r++)qd(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Gd(i),i.producerIndexOfThis[r]=e}}function du(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Gd(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Wb(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Kb(n){return n.producerNode!==void 0}function Qb(n){let e=Object.create(DL);e.computation=n;let t=()=>{if($b(e),zm(e),e.value===jd)throw e.error;return e.value};return t[Rr]=e,t}var Hm=Symbol("UNSET"),qm=Symbol("COMPUTING"),jd=Symbol("ERRORED"),DL=ye(j({},$o),{value:Hm,dirty:!0,error:null,equal:jb,producerMustRecompute(n){return n.value===Hm||n.value===qm},producerRecomputeValue(n){if(n.value===qm)throw new Error("Detected cycle in computations.");let e=n.value;n.value=qm;let t=hu(n),r;try{r=n.computation()}catch(i){r=jd,n.error=i}finally{Bd(n,t)}if(e!==Hm&&e!==jd&&r!==jd&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function SL(){throw new Error}var Yb=SL;function Zb(){Yb()}function Jb(n){Yb=n}var AL=null;function Xb(n){let e=Object.create(tD);e.value=n;let t=()=>(zm(e),e.value);return t[Rr]=e,t}function Wm(n,e){qb()||Zb(),n.equal(n.value,e)||(n.value=e,RL(n))}function eD(n,e){qb()||Zb(),Wm(n,e(n.value))}var tD=ye(j({},$o),{equal:jb,value:void 0});function RL(n){n.version++,bL(),Hb(n),AL?.()}function nD(n,e,t){let r=Object.create(NL);t&&(r.consumerAllowSignalWrites=!0),r.fn=n,r.schedule=e;let i=c=>{r.cleanupFn=c};function s(c){return c.fn===null&&c.schedule===null}function o(c){s(c)||(Hd(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=Gm)}let a=()=>{if(r.fn===null)return;if(TL())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(r.dirty=!1,r.hasRun&&!$d(r))return;r.hasRun=!0;let c=hu(r);try{r.cleanupFn(),r.cleanupFn=Gm,r.fn(i)}finally{Bd(r,c)}};return r.ref={notify:()=>Gb(r),run:a,cleanup:()=>r.cleanupFn(),destroy:()=>o(r),[Rr]:r},r.ref}var Gm=()=>{},NL=ye(j({},$o),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{n.schedule!==null&&n.schedule(n.ref)},hasRun:!1,cleanupFn:Gm});function le(n){return typeof n=="function"}function Ho(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var zd=Ho(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Ds(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var gt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let s of t)s.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(s){e=s instanceof zd?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{rD(s)}catch(o){e=e??[],o instanceof zd?e=[...e,...o.errors]:e.push(o)}}if(e)throw new zd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)rD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Ds(t,e)}remove(e){let{_finalizers:t}=this;t&&Ds(t,e),e instanceof n&&e._removeParent(this)}};gt.EMPTY=(()=>{let n=new gt;return n.closed=!0,n})();var Km=gt.EMPTY;function Wd(n){return n instanceof gt||n&&"closed"in n&&le(n.remove)&&le(n.add)&&le(n.unsubscribe)}function rD(n){le(n)?n():n.unsubscribe()}var lr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qo={setTimeout(n,e,...t){let{delegate:r}=qo;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=qo;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kd(n){qo.setTimeout(()=>{let{onUnhandledError:e}=lr;if(e)e(n);else throw n})}function fu(){}var iD=Qm("C",void 0,void 0);function sD(n){return Qm("E",void 0,n)}function oD(n){return Qm("N",n,void 0)}function Qm(n,e,t){return{kind:n,value:e,error:t}}var Ss=null;function Go(n){if(lr.useDeprecatedSynchronousErrorHandling){let e=!Ss;if(e&&(Ss={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Ss;if(Ss=null,t)throw r}}else n()}function aD(n){lr.useDeprecatedSynchronousErrorHandling&&Ss&&(Ss.errorThrown=!0,Ss.error=n)}var As=class extends gt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wd(e)&&e.add(this)):this.destination=PL}static create(e,t,r){return new zo(e,t,r)}next(e){this.isStopped?Zm(oD(e),this):this._next(e)}error(e){this.isStopped?Zm(sD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zm(iD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},xL=Function.prototype.bind;function Ym(n,e){return xL.call(n,e)}var Jm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Qd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Qd(r)}else Qd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Qd(t)}}},zo=class extends As{constructor(e,t,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&lr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Ym(e.next,s),error:e.error&&Ym(e.error,s),complete:e.complete&&Ym(e.complete,s)}):i=e}this.destination=new Jm(i)}};function Qd(n){lr.useDeprecatedSynchronousErrorHandling?aD(n):Kd(n)}function ML(n){throw n}function Zm(n,e){let{onStoppedNotification:t}=lr;t&&qo.setTimeout(()=>t(n,e))}var PL={closed:!0,next:fu,error:ML,complete:fu};var Wo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ln(n){return n}function Yd(...n){return Xm(n)}function Xm(n){return n.length===0?ln:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ce=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let s=kL(t)?t:new zo(t,r,i);return Go(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=cD(r),new r((i,s)=>{let o=new zo({next:a=>{try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Wo](){return this}pipe(...t){return Xm(t)(this)}toPromise(t){return t=cD(t),new t((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function cD(n){var e;return(e=n??lr.Promise)!==null&&e!==void 0?e:Promise}function OL(n){return n&&le(n.next)&&le(n.error)&&le(n.complete)}function kL(n){return n&&n instanceof As||OL(n)&&Wd(n)}function e_(n){return le(n?.lift)}function pe(n){return e=>{if(e_(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new pu(n,e,t,r,i)}var pu=class extends As{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ko(){return pe((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Qo=class extends ce{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,e_(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new gt;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=gt.EMPTY)}return e}refCount(){return Ko()(this)}};var uD=Ho(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class n extends ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Zd(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new uD}next(t){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Go(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Km:(this.currentObservers=null,s.push(t),new gt(()=>{this.currentObservers=null,Ds(s,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){let t=new ce;return t.source=this,t}}return n.create=(e,t)=>new Zd(e,t),n})(),Zd=class extends ut{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Km}};var Gt=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var gu={now(){return(gu.delegate||Date).now()},delegate:void 0};var mu=class extends ut{constructor(e=1/0,t=1/0,r=gu){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){let o=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=o;c+=2)a=c;a&&r.splice(0,a+1)}}};var Jd=class extends gt{constructor(e,t){super()}schedule(e,t=0){return this}};var _u={setInterval(n,e,...t){let{delegate:r}=_u;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=_u;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Yo=class extends Jd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return _u.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&_u.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Ds(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Zo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Zo.now=gu.now;var Jo=class extends Zo{constructor(e,t=Zo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Xo=new Jo(Yo),t_=Xo;var Xd=class extends Yo{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var eh=class extends Jo{};var n_=new eh(Xd);var Ln=new ce(n=>n.complete());function th(n){return n&&le(n.schedule)}function lD(n){return n[n.length-1]}function nh(n){return le(lD(n))?n.pop():void 0}function Ui(n){return th(lD(n))?n.pop():void 0}function r_(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function hD(n,e,t,r){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(d){try{l(r.next(d))}catch(f){o(f)}}function c(d){try{l(r.throw(d))}catch(f){o(f)}}function l(d){d.done?s(d.value):i(d.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function dD(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rs(n){return this instanceof Rs?(this.v=n,this):new Rs(n)}function fD(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(_){return function(w){return Promise.resolve(w).then(_,f)}}function a(_,w){r[_]&&(i[_]=function(R){return new Promise(function(S,F){s.push([_,R,S,F])>1||c(_,R)})},w&&(i[_]=w(i[_])))}function c(_,w){try{l(r[_](w))}catch(R){g(s[0][3],R)}}function l(_){_.value instanceof Rs?Promise.resolve(_.value.v).then(d,f):g(s[0][2],_)}function d(_){c("next",_)}function f(_){c("throw",_)}function g(_,w){_(w),s.shift(),s.length&&c(s[0][0],s[0][1])}}function pD(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof dD=="function"?dD(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(s){t[s]=n[s]&&function(o){return new Promise(function(a,c){o=n[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var rh=n=>n&&typeof n.length=="number"&&typeof n!="function";function ih(n){return le(n?.then)}function sh(n){return le(n[Wo])}function oh(n){return Symbol.asyncIterator&&le(n?.[Symbol.asyncIterator])}function ah(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function FL(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ch=FL();function uh(n){return le(n?.[ch])}function lh(n){return fD(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Rs(t.read());if(i)return yield Rs(void 0);yield yield Rs(r)}}finally{t.releaseLock()}})}function dh(n){return le(n?.getReader)}function mt(n){if(n instanceof ce)return n;if(n!=null){if(sh(n))return LL(n);if(rh(n))return VL(n);if(ih(n))return UL(n);if(oh(n))return gD(n);if(uh(n))return jL(n);if(dh(n))return BL(n)}throw ah(n)}function LL(n){return new ce(e=>{let t=n[Wo]();if(le(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function VL(n){return new ce(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function UL(n){return new ce(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Kd)})}function jL(n){return new ce(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function gD(n){return new ce(e=>{$L(n,e).catch(t=>e.error(t))})}function BL(n){return gD(lh(n))}function $L(n,e){var t,r,i,s;return hD(this,void 0,void 0,function*(){try{for(t=pD(n);r=yield t.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})}function wn(n,e,t,r=0,i=!1){let s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function ji(n,e=0){return pe((t,r)=>{t.subscribe(de(r,i=>wn(r,n,()=>r.next(i),e),()=>wn(r,n,()=>r.complete(),e),i=>wn(r,n,()=>r.error(i),e)))})}function Bi(n,e=0){return pe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function mD(n,e){return mt(n).pipe(Bi(e),ji(e))}function _D(n,e){return mt(n).pipe(Bi(e),ji(e))}function yD(n,e){return new ce(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function vD(n,e){return new ce(t=>{let r;return wn(t,e,()=>{r=n[ch](),wn(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){t.error(o);return}s?t.complete():t.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function hh(n,e){if(!n)throw new Error("Iterable cannot be null");return new ce(t=>{wn(t,e,()=>{let r=n[Symbol.asyncIterator]();wn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function wD(n,e){return hh(lh(n),e)}function ID(n,e){if(n!=null){if(sh(n))return mD(n,e);if(rh(n))return yD(n,e);if(ih(n))return _D(n,e);if(oh(n))return hh(n,e);if(uh(n))return vD(n,e);if(dh(n))return wD(n,e)}throw ah(n)}function ot(n,e){return e?ID(n,e):mt(n)}function X(...n){let e=Ui(n);return ot(n,e)}function ea(n,e){let t=le(n)?n:()=>n,r=i=>i.error(t());return new ce(e?i=>e.schedule(r,0,i):r)}function i_(n){return!!n&&(n instanceof ce||le(n.lift)&&le(n.subscribe))}var ti=Ho(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ED(n){return n instanceof Date&&!isNaN(n)}function K(n,e){return pe((t,r)=>{let i=0;t.subscribe(de(r,s=>{r.next(n.call(e,s,i++))}))})}var{isArray:HL}=Array;function qL(n,e){return HL(e)?n(...e):n(e)}function fh(n){return K(e=>qL(n,e))}var{isArray:GL}=Array,{getPrototypeOf:zL,prototype:WL,keys:KL}=Object;function ph(n){if(n.length===1){let e=n[0];if(GL(e))return{args:e,keys:null};if(QL(e)){let t=KL(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function QL(n){return n&&typeof n=="object"&&zL(n)===WL}function gh(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Je(...n){let e=Ui(n),t=nh(n),{args:r,keys:i}=ph(n);if(r.length===0)return ot([],e);let s=new ce(YL(r,e,i?o=>gh(i,o):ln));return t?s.pipe(fh(t)):s}function YL(n,e,t=ln){return r=>{CD(e,()=>{let{length:i}=n,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)CD(e,()=>{let l=ot(n[c],e),d=!1;l.subscribe(de(r,f=>{s[c]=f,d||(d=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function CD(n,e,t){n?wn(t,n,e):e()}function TD(n,e,t,r,i,s,o,a){let c=[],l=0,d=0,f=!1,g=()=>{f&&!c.length&&!l&&e.complete()},_=R=>l<r?w(R):c.push(R),w=R=>{s&&e.next(R),l++;let S=!1;mt(t(R,d++)).subscribe(de(e,F=>{i?.(F),s?_(F):e.next(F)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;c.length&&l<r;){let F=c.shift();o?wn(e,o,()=>w(F)):w(F)}g()}catch(F){e.error(F)}}))};return n.subscribe(de(e,_,()=>{f=!0,g()})),()=>{a?.()}}function It(n,e,t=1/0){return le(e)?It((r,i)=>K((s,o)=>e(r,s,i,o))(mt(n(r,i))),t):(typeof e=="number"&&(t=e),pe((r,i)=>TD(r,i,n,t)))}function s_(n=1/0){return It(ln,n)}function bD(){return s_(1)}function ta(...n){return bD()(ot(n,Ui(n)))}function mh(n){return new ce(e=>{mt(n()).subscribe(e)})}function o_(...n){let e=nh(n),{args:t,keys:r}=ph(n),i=new ce(s=>{let{length:o}=t;if(!o){s.complete();return}let a=new Array(o),c=o,l=o;for(let d=0;d<o;d++){let f=!1;mt(t[d]).subscribe(de(s,g=>{f||(f=!0,l--),a[d]=g},()=>c--,void 0,()=>{(!c||!f)&&(l||s.next(r?gh(r,a):a),s.complete())}))}});return e?i.pipe(fh(e)):i}function a_(n=0,e,t=t_){let r=-1;return e!=null&&(th(e)?t=e:r=e),new ce(i=>{let s=ED(n)?+n-t.now():n;s<0&&(s=0);let o=0;return t.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function dn(n=0,e=Xo){return n<0&&(n=0),a_(n,n,e)}function hn(n,e){return pe((t,r)=>{let i=0;t.subscribe(de(r,s=>n.call(e,s,i++)&&r.next(s)))})}function $i(n){return pe((e,t)=>{let r=null,i=!1,s;r=e.subscribe(de(t,void 0,void 0,o=>{s=mt(n(o,$i(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function DD(n,e,t,r,i){return(s,o)=>{let a=t,c=e,l=0;s.subscribe(de(o,d=>{let f=l++;c=a?n(c,d,f):(a=!0,d),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function Ns(n,e){return le(e)?It(n,e,1):It(n,1)}function Hi(n){return pe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function ni(n){return n<=0?()=>Ln:pe((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function c_(n){return K(()=>n)}function _h(n,e=ln){return n=n??ZL,pe((t,r)=>{let i,s=!0;t.subscribe(de(r,o=>{let a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function ZL(n,e){return n===e}function yh(n=JL){return pe((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function JL(){return new ti}function yu(n){return pe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Nr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):ln,ni(1),t?Hi(e):yh(()=>new ti))}function u_(n,e,t,r){return pe((i,s)=>{let o;!e||typeof e=="function"?o=e:{duration:t,element:o,connector:r}=e;let a=new Map,c=w=>{a.forEach(w),w(s)},l=w=>c(R=>R.error(w)),d=0,f=!1,g=new pu(s,w=>{try{let R=n(w),S=a.get(R);if(!S){a.set(R,S=r?r():new ut);let F=_(R,S);if(s.next(F),t){let q=de(S,()=>{S.complete(),q?.unsubscribe()},void 0,void 0,()=>a.delete(R));g.add(mt(t(F)).subscribe(q))}}S.next(o?o(w):w)}catch(R){l(R)}},()=>c(w=>w.complete()),l,()=>a.clear(),()=>(f=!0,d===0));i.subscribe(g);function _(w,R){let S=new ce(F=>{d++;let q=R.subscribe(F);return()=>{q.unsubscribe(),--d===0&&f&&g.unsubscribe()}});return S.key=w,S}})}function na(n){return n<=0?()=>Ln:pe((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function l_(n,e){let t=arguments.length>=2;return r=>r.pipe(n?hn((i,s)=>n(i,s,r)):ln,na(1),t?Hi(e):yh(()=>new ti))}function vh(){return pe((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let s=t;t=i,r&&e.next([s,i]),r=!0}))})}function wh(n,e){return pe(DD(n,e,arguments.length>=2,!0))}function ra(...n){let e=Ui(n);return pe((t,r)=>{(e?ta(n,t,e):ta(n,t)).subscribe(r)})}function In(n,e){return pe((t,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();t.subscribe(de(r,c=>{i?.unsubscribe();let l=0,d=s++;mt(n(c,d)).subscribe(i=de(r,f=>r.next(e?e(c,f,d,l++):f),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function jt(n){return pe((e,t)=>{mt(n).subscribe(de(t,()=>t.complete(),fu)),!t.closed&&e.subscribe(t)})}function Lt(n,e,t){let r=le(n)||e||t?{next:n,error:e,complete:t}:n;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(de(s,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),s.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):ln}var XL="https://g.co/ng/security#xss",Q=class extends Error{constructor(e,t){super(my(e,t)),this.code=e}};function my(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Nu(n){return{toString:n}.toString()}var Ih="__parameters__";function eV(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function dS(n,e,t){return Nu(()=>{let r=eV(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,l,d){let f=c.hasOwnProperty(Ih)?c[Ih]:Object.defineProperty(c,Ih,{value:[]})[Ih];for(;f.length<=d;)f.push(null);return(f[d]=f[d]||[]).push(o),c}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var vu=globalThis;function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function tV(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Cn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(Cn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function SD(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var nV=Ke({__forward_ref__:Ke});function Zn(n){return n.__forward_ref__=Zn,n.toString=function(){return Cn(this())},n}function fn(n){return hS(n)?n():n}function hS(n){return typeof n=="function"&&n.hasOwnProperty(nV)&&n.__forward_ref__===Zn}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function $s(n){return{providers:n.providers||[],imports:n.imports||[]}}function nf(n){return AD(n,pS)||AD(n,gS)}function fS(n){return nf(n)!==null}function AD(n,e){return n.hasOwnProperty(e)?n[e]:null}function rV(n){let e=n&&(n[pS]||n[gS]);return e||null}function RD(n){return n&&(n.hasOwnProperty(ND)||n.hasOwnProperty(iV))?n[ND]:null}var pS=Ke({\u0275prov:Ke}),ND=Ke({\u0275inj:Ke}),gS=Ke({ngInjectableDef:Ke}),iV=Ke({ngInjectorDef:Ke}),H=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function mS(n){return n&&!!n.\u0275providers}var sV=Ke({\u0275cmp:Ke}),oV=Ke({\u0275dir:Ke}),aV=Ke({\u0275pipe:Ke}),cV=Ke({\u0275mod:Ke}),xh=Ke({\u0275fac:Ke}),Eu=Ke({__NG_ELEMENT_ID__:Ke}),xD=Ke({__NG_ENV_ID__:Ke});function _y(n){return typeof n=="string"?n:n==null?"":String(n)}function uV(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():_y(n)}function lV(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new Q(-200,n)}function yy(n,e){throw new Q(-201,!1)}var ge=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(ge||{}),T_;function _S(){return T_}function En(n){let e=T_;return T_=n,e}function yS(n,e,t){let r=nf(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&ge.Optional)return null;if(e!==void 0)return e;yy(n,"Injector")}var dV={},Cu=dV,b_="__NG_DI_FLAG__",Mh="ngTempTokenPath",hV="ngTokenPath",fV=/\n/gm,pV="\u0275",MD="__source",aa;function gV(){return aa}function qi(n){let e=aa;return aa=n,e}function mV(n,e=ge.Default){if(aa===void 0)throw new Q(-203,!1);return aa===null?yS(n,void 0,e):aa.get(n,e&ge.Optional?null:void 0,e)}function ne(n,e=ge.Default){return(_S()||mV)(fn(n),e)}function x(n,e=ge.Default){return ne(n,rf(e))}function rf(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function D_(n){let e=[];for(let t=0;t<n.length;t++){let r=fn(n[t]);if(Array.isArray(r)){if(r.length===0)throw new Q(900,!1);let i,s=ge.Default;for(let o=0;o<r.length;o++){let a=r[o],c=_V(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(ne(i,s))}else e.push(ne(r))}return e}function vS(n,e){return n[b_]=e,n.prototype[b_]=e,n}function _V(n){return n[b_]}function yV(n,e,t,r){let i=n[Mh];throw e[MD]&&i.unshift(e[MD]),n.message=vV(`
`+n.message,i,t,r),n[hV]=i,n[Mh]=null,n}function vV(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==pV?n.slice(2):n;let i=Cn(e);if(Array.isArray(e))i=e.map(Cn).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Cn(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(fV,`
  `)}`}var se=vS(dS("Optional"),8);var wS=vS(dS("SkipSelf"),4);function Ps(n,e){let t=n.hasOwnProperty(xh);return t?n[xh]:null}function vy(n,e){n.forEach(t=>Array.isArray(t)?vy(t,e):e(t))}function IS(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Ph(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function wV(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let s=i-2;n[i]=n[s],i--}n[e]=t,n[e+1]=r}}function IV(n,e,t){let r=xu(n,e);return r>=0?n[r|1]=t:(r=~r,wV(n,r,e,t)),r}function d_(n,e){let t=xu(n,e);if(t>=0)return n[t|1]}function xu(n,e){return EV(n,e,1)}function EV(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}var ua={},zn=[],la=new H(""),ES=new H("",-1),CS=new H(""),Oh=class{get(e,t=Cu){if(t===Cu){let r=new Error(`NullInjectorError: No provider for ${Cn(e)}!`);throw r.name="NullInjectorError",r}return t}},TS=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(TS||{}),Pr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Pr||{}),Wi=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Wi||{});function CV(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function S_(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{let s=i,o=t[++r];bV(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function TV(n){return n===3||n===4||n===6}function bV(n){return n.charCodeAt(0)===64}function Tu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?PD(n,t,i,null,e[++r]):PD(n,t,i,null,null))}}return n}function PD(n,e,t,r,i){let s=0,o=n.length;if(e===-1)o=-1;else for(;s<n.length;){let a=n[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<n.length;){let a=n[s];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[s+1]=i);return}else if(r===n[s+1]){n[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),r!==null&&n.splice(s++,0,r),i!==null&&n.splice(s++,0,i)}var bS="ng-template";function DV(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&CV(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(wy(n))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===t)return!0}return!1}function wy(n){return n.type===4&&n.value!==bS}function SV(n,e,t){let r=n.type===4&&!t?bS:n.value;return e===r}function AV(n,e,t){let r=4,i=n.attrs,s=i!==null?xV(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!dr(r)&&!dr(c))return!1;if(o&&dr(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!SV(n,c,t)||c===""&&e.length===1){if(dr(r))return!1;o=!0}}else if(r&8){if(i===null||!DV(n,i,c,t)){if(dr(r))return!1;o=!0}}else{let l=e[++a],d=RV(c,i,wy(n),t);if(d===-1){if(dr(r))return!1;o=!0;continue}if(l!==""){let f;if(d>s?f="":f=i[d+1].toLowerCase(),r&2&&l!==f){if(dr(r))return!1;o=!0}}}}return dr(r)||o}function dr(n){return(n&1)===0}function RV(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){let o=e[i];if(o===n)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return MV(e,n)}function NV(n,e,t=!1){for(let r=0;r<e.length;r++)if(AV(n,e[r],t))return!0;return!1}function xV(n){for(let e=0;e<n.length;e++){let t=n[e];if(TV(t))return e}return n.length}function MV(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function OD(n,e){return n?":not("+e.trim()+")":e}function PV(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if(typeof o=="string")if(r&2){let a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!dr(o)&&(e+=OD(s,i),i=""),r=o,s=s||!dr(r);t++}return i!==""&&(e+=OD(s,i)),e}function OV(n){return n.map(PV).join(",")}function kV(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let s=n[r];if(typeof s=="string")i===2?s!==""&&e.push(s,n[++r]):i===8&&t.push(s);else{if(!dr(i))break;i=s}r++}return{attrs:e,classes:t}}function At(n){return Nu(()=>{let e=xS(n),t=ye(j({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===TS.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Pr.Emulated,styles:n.styles||zn,_:null,schemas:n.schemas||null,tView:null,id:""});MS(t);let r=n.dependencies;return t.directiveDefs=FD(r,!1),t.pipeDefs=FD(r,!0),t.id=VV(t),t})}function FV(n){return Os(n)||SS(n)}function LV(n){return n!==null}function Hs(n){return Nu(()=>({type:n.type,bootstrap:n.bootstrap||zn,declarations:n.declarations||zn,imports:n.imports||zn,exports:n.exports||zn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kD(n,e){if(n==null)return ua;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],s,o,a=Wi.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(t[s]=a!==Wi.None?[r,a]:r,e[s]=o):t[s]=r}return t}function lt(n){return Nu(()=>{let e=xS(n);return MS(e),e})}function DS(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Os(n){return n[sV]||null}function SS(n){return n[oV]||null}function AS(n){return n[aV]||null}function RS(n){let e=Os(n)||SS(n)||AS(n);return e!==null?e.standalone:!1}function NS(n,e){let t=n[cV]||null;if(!t&&e===!0)throw new Error(`Type ${Cn(n)} does not have '\u0275mod' property.`);return t}function xS(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ua,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||zn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:kD(n.inputs,e),outputs:kD(n.outputs),debugInfo:null}}function MS(n){n.features?.forEach(e=>e(n))}function FD(n,e){if(!n)return null;let t=e?AS:FV;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(LV)}function VV(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Xe(n){return{\u0275providers:n}}function UV(...n){return{\u0275providers:PS(!0,n),\u0275fromNgModule:!0}}function PS(n,...e){let t=[],r=new Set,i,s=o=>{t.push(o)};return vy(e,o=>{let a=o;A_(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&OS(i,s),t}function OS(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Iy(i,s=>{e(s,r)})}}function A_(n,e,t,r){if(n=fn(n),!n)return!1;let i=null,s=RD(n),o=!s&&Os(n);if(!s&&!o){let c=n.ngModule;if(s=RD(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=n}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of c)A_(l,e,t,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{vy(s.imports,d=>{A_(d,e,t,r)&&(l||=[],l.push(d))})}finally{}l!==void 0&&OS(l,e)}if(!a){let l=Ps(i)||(()=>new i);e({provide:i,useFactory:l,deps:zn},i),e({provide:CS,useValue:i,multi:!0},i),e({provide:la,useValue:()=>ne(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let l=n;Iy(c,d=>{e(d,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Iy(n,e){for(let t of n)mS(t)&&(t=t.\u0275providers),Array.isArray(t)?Iy(t,e):e(t)}var jV=Ke({provide:String,useValue:Ke});function kS(n){return n!==null&&typeof n=="object"&&jV in n}function BV(n){return!!(n&&n.useExisting)}function $V(n){return!!(n&&n.useFactory)}function da(n){return typeof n=="function"}function HV(n){return!!n.useClass}var sf=new H(""),bh={},qV={},h_;function Ey(){return h_===void 0&&(h_=new Oh),h_}var Kn=class{},bu=class extends Kn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,N_(e,o=>this.processProvider(o)),this.records.set(ES,ia(void 0,this)),i.has("environment")&&this.records.set(Kn,ia(void 0,this));let s=this.records.get(sf);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(CS,zn,ge.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Se(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Se(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=qi(this),r=En(void 0),i;try{return e()}finally{qi(t),En(r)}}get(e,t=Cu,r=ge.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(xD))return e[xD](this);r=rf(r);let i,s=qi(this),o=En(void 0);try{if(!(r&ge.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=QV(e)&&nf(e);l&&this.injectableDefInScope(l)?c=ia(R_(e),bh):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&ge.Self?Ey():this.parent;return t=r&ge.Optional&&t===Cu?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Mh]=a[Mh]||[]).unshift(Cn(e)),s)throw a;return yV(a,e,"R3InjectorError",this.source)}else throw a}finally{En(o),qi(s)}}resolveInjectorInitializers(){let e=Se(null),t=qi(this),r=En(void 0),i;try{let s=this.get(la,zn,ge.Self);for(let o of s)o()}finally{qi(t),En(r),Se(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Cn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Q(205,!1)}processProvider(e){e=fn(e);let t=da(e)?e:fn(e&&e.provide),r=zV(e);if(!da(e)&&e.multi===!0){let i=this.records.get(t);i||(i=ia(void 0,bh,!0),i.factory=()=>D_(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Se(null);try{return t.value===bh&&(t.value=qV,t.value=t.factory()),typeof t.value=="object"&&t.value&&KV(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Se(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=fn(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function R_(n){let e=nf(n),t=e!==null?e.factory:Ps(n);if(t!==null)return t;if(n instanceof H)throw new Q(204,!1);if(n instanceof Function)return GV(n);throw new Q(204,!1)}function GV(n){if(n.length>0)throw new Q(204,!1);let t=rV(n);return t!==null?()=>t.factory(n):()=>new n}function zV(n){if(kS(n))return ia(void 0,n.useValue);{let e=FS(n);return ia(e,bh)}}function FS(n,e,t){let r;if(da(n)){let i=fn(n);return Ps(i)||R_(i)}else if(kS(n))r=()=>fn(n.useValue);else if($V(n))r=()=>n.useFactory(...D_(n.deps||[]));else if(BV(n))r=()=>ne(fn(n.useExisting));else{let i=fn(n&&(n.useClass||n.provide));if(WV(n))r=()=>new i(...D_(n.deps));else return Ps(i)||R_(i)}return r}function ia(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function WV(n){return!!n.deps}function KV(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function QV(n){return typeof n=="function"||typeof n=="object"&&n instanceof H}function N_(n,e){for(let t of n)Array.isArray(t)?N_(t,e):t&&mS(t)?N_(t.\u0275providers,e):e(t)}function ai(n,e){n instanceof bu&&n.assertNotDestroyed();let t,r=qi(n),i=En(void 0);try{return e()}finally{qi(r),En(i)}}function LS(){return _S()!==void 0||gV()!=null}function of(n){if(!LS())throw new Q(-203,!1)}function YV(n){return typeof n=="function"}var ci=0,me=1,ie=2,pn=3,hr=4,fr=5,kh=6,Fh=7,Qn=8,ha=9,ri=10,Vt=11,Du=12,LD=13,va=14,Or=15,fa=16,sa=17,pa=18,af=19,VS=20,Gi=21,Dh=22,Wn=23,Yn=25,US=1;var ks=7,Lh=8,Vh=9,Vn=10,Uh=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Uh||{});function zi(n){return Array.isArray(n)&&typeof n[US]=="object"}function ui(n){return Array.isArray(n)&&n[US]===!0}function jS(n){return(n.flags&4)!==0}function cf(n){return n.componentOffset>-1}function Cy(n){return(n.flags&1)===1}function Ki(n){return!!n.template}function x_(n){return(n[ie]&512)!==0}var M_=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function BS(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function li(){return $S}function $S(n){return n.type.prototype.ngOnChanges&&(n.setInput=JV),ZV}li.ngInherit=!0;function ZV(){let n=qS(this),e=n?.current;if(e){let t=n.previous;if(t===ua)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function JV(n,e,t,r,i){let s=this.declaredInputs[r],o=qS(n)||XV(n,{previous:ua,current:null}),a=o.current||(o.current={}),c=o.previous,l=c[s];a[s]=new M_(l&&l.currentValue,t,c===ua),BS(n,e,i,t)}var HS="__ngSimpleChanges__";function qS(n){return n[HS]||null}function XV(n,e){return n[HS]=e}var VD=null;var xr=function(n,e,t){VD?.(n,e,t)},eU="svg",tU="math";function kr(n){for(;Array.isArray(n);)n=n[ci];return n}function GS(n,e){return kr(e[n])}function Jn(n,e){return kr(e[n.index])}function Ty(n,e){return n.data[e]}function nU(n,e){return n[e]}function Zi(n,e){let t=e[n];return zi(t)?t:t[ci]}function by(n){return(n[ie]&128)===128}function rU(n){return ui(n[pn])}function jh(n,e){return e==null?null:n[e]}function zS(n){n[sa]=0}function WS(n){n[ie]&1024||(n[ie]|=1024,by(n)&&lf(n))}function iU(n,e){for(;n>0;)e=e[va],n--;return e}function uf(n){return!!(n[ie]&9216||n[Wn]?.dirty)}function P_(n){n[ri].changeDetectionScheduler?.notify(8),n[ie]&64&&(n[ie]|=1024),uf(n)&&lf(n)}function lf(n){n[ri].changeDetectionScheduler?.notify(0);let e=Fs(n);for(;e!==null&&!(e[ie]&8192||(e[ie]|=8192,!by(e)));)e=Fs(e)}function KS(n,e){if((n[ie]&256)===256)throw new Q(911,!1);n[Gi]===null&&(n[Gi]=[]),n[Gi].push(e)}function sU(n,e){if(n[Gi]===null)return;let t=n[Gi].indexOf(e);t!==-1&&n[Gi].splice(t,1)}function Fs(n){let e=n[pn];return ui(e)?e[pn]:e}var ve={lFrame:rA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var QS=!1;function oU(){return ve.lFrame.elementDepthCount}function aU(){ve.lFrame.elementDepthCount++}function cU(){ve.lFrame.elementDepthCount--}function YS(){return ve.bindingsEnabled}function uU(){return ve.skipHydrationRootTNode!==null}function lU(n){return ve.skipHydrationRootTNode===n}function dU(){ve.skipHydrationRootTNode=null}function je(){return ve.lFrame.lView}function Tn(){return ve.lFrame.tView}function bn(n){return ve.lFrame.contextLView=n,n[Qn]}function Dn(n){return ve.lFrame.contextLView=null,n}function Sn(){let n=ZS();for(;n!==null&&n.type===64;)n=n.parent;return n}function ZS(){return ve.lFrame.currentTNode}function hU(){let n=ve.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Mu(n,e){let t=ve.lFrame;t.currentTNode=n,t.isParent=e}function JS(){return ve.lFrame.isParent}function fU(){ve.lFrame.isParent=!1}function XS(){return QS}function UD(n){QS=n}function Dy(){let n=ve.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function pU(n){return ve.lFrame.bindingIndex=n}function Pu(){return ve.lFrame.bindingIndex++}function gU(n){let e=ve.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function mU(){return ve.lFrame.inI18n}function _U(n,e){let t=ve.lFrame;t.bindingIndex=t.bindingRootIndex=n,O_(e)}function yU(){return ve.lFrame.currentDirectiveIndex}function O_(n){ve.lFrame.currentDirectiveIndex=n}function vU(n){let e=ve.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function eA(n){ve.lFrame.currentQueryIndex=n}function wU(n){let e=n[me];return e.type===2?e.declTNode:e.type===1?n[fr]:null}function tA(n,e,t){if(t&ge.SkipSelf){let i=e,s=n;for(;i=i.parent,i===null&&!(t&ge.Host);)if(i=wU(s),i===null||(s=s[va],i.type&10))break;if(i===null)return!1;e=i,n=s}let r=ve.lFrame=nA();return r.currentTNode=e,r.lView=n,!0}function Sy(n){let e=nA(),t=n[me];ve.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function nA(){let n=ve.lFrame,e=n===null?null:n.child;return e===null?rA(n):e}function rA(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function iA(){let n=ve.lFrame;return ve.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var sA=iA;function Ay(){let n=iA();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function IU(n){return(ve.lFrame.contextLView=iU(n,ve.lFrame.contextLView))[Qn]}function wa(){return ve.lFrame.selectedIndex}function Ls(n){ve.lFrame.selectedIndex=n}function Ry(){let n=ve.lFrame;return Ty(n.tView,n.selectedIndex)}function EU(){return ve.lFrame.currentNamespace}var oA=!0;function Ny(){return oA}function xy(n){oA=n}function CU(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=$S(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}function My(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),d!=null&&(n.destroyHooks??=[]).push(t,d)}}function Sh(n,e,t){aA(n,e,3,t)}function Ah(n,e,t,r){(n[ie]&3)===t&&aA(n,e,t,r)}function f_(n,e){let t=n[ie];(t&3)===e&&(t&=16383,t+=1,n[ie]=t)}function aA(n,e,t,r){let i=r!==void 0?n[sa]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[sa]+=65536),(a<s||s==-1)&&(TU(n,t,e,c),n[sa]=(n[sa]&4294901760)+c+2),c++}function jD(n,e){xr(4,n,e);let t=Se(null);try{e.call(n)}finally{Se(t),xr(5,n,e)}}function TU(n,e,t,r){let i=t[r]<0,s=t[r+1],o=i?-t[r]:t[r],a=n[o];i?n[ie]>>14<n[sa]>>16&&(n[ie]&3)===e&&(n[ie]+=16384,jD(a,s)):jD(a,s)}var ca=-1,Vs=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function bU(n){return n instanceof Vs}function DU(n){return(n.flags&8)!==0}function SU(n){return(n.flags&16)!==0}var p_={},k_=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=rf(r);let i=this.injector.get(e,p_,r);return i!==p_||t===p_?i:this.parentInjector.get(e,t,r)}};function cA(n){return n!==ca}function Bh(n){return n&32767}function AU(n){return n>>16}function $h(n,e){let t=AU(n),r=e;for(;t>0;)r=r[va],t--;return r}var F_=!0;function Hh(n){let e=F_;return F_=n,e}var RU=256,uA=RU-1,lA=5,NU=0,Mr={};function xU(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Eu)&&(r=t[Eu]),r==null&&(r=t[Eu]=NU++);let i=r&uA,s=1<<i;e.data[n+(i>>lA)]|=s}function qh(n,e){let t=dA(n,e);if(t!==-1)return t;let r=e[me];r.firstCreatePass&&(n.injectorIndex=e.length,g_(r.data,n),g_(e,null),g_(r.blueprint,null));let i=Py(n,e),s=n.injectorIndex;if(cA(i)){let o=Bh(i),a=$h(i,e),c=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|c[o+l]}return e[s+8]=i,s}function g_(n,e){n.push(0,0,0,0,0,0,0,0,e)}function dA(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Py(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=mA(i),r===null)return ca;if(t++,i=i[va],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ca}function L_(n,e,t){xU(n,e,t)}function hA(n,e,t){if(t&ge.Optional||n!==void 0)return n;yy(e,"NodeInjector")}function fA(n,e,t,r){if(t&ge.Optional&&r===void 0&&(r=null),!(t&(ge.Self|ge.Host))){let i=n[ha],s=En(void 0);try{return i?i.get(e,r,t&ge.Optional):yS(e,r,t&ge.Optional)}finally{En(s)}}return hA(r,e,t)}function pA(n,e,t,r=ge.Default,i){if(n!==null){if(e[ie]&2048&&!(r&ge.Self)){let o=FU(n,e,t,r,Mr);if(o!==Mr)return o}let s=gA(n,e,t,r,Mr);if(s!==Mr)return s}return fA(e,t,r,i)}function gA(n,e,t,r,i){let s=OU(t);if(typeof s=="function"){if(!tA(e,n,r))return r&ge.Host?hA(i,t,r):fA(e,t,r,i);try{let o;if(o=s(r),o==null&&!(r&ge.Optional))yy(t);else return o}finally{sA()}}else if(typeof s=="number"){let o=null,a=dA(n,e),c=ca,l=r&ge.Host?e[Or][fr]:null;for((a===-1||r&ge.SkipSelf)&&(c=a===-1?Py(n,e):e[a+8],c===ca||!$D(r,!1)?a=-1:(o=e[me],a=Bh(c),e=$h(c,e)));a!==-1;){let d=e[me];if(BD(s,a,d.data)){let f=MU(a,e,t,o,r,l);if(f!==Mr)return f}c=e[a+8],c!==ca&&$D(r,e[me].data[a+8]===l)&&BD(s,a,e)?(o=d,a=Bh(c),e=$h(c,e)):a=-1}}return i}function MU(n,e,t,r,i,s){let o=e[me],a=o.data[n+8],c=r==null?cf(a)&&F_:r!=o&&(a.type&3)!==0,l=i&ge.Host&&s===a,d=PU(a,o,t,c,l);return d!==null?ga(e,o,d,a):Mr}function PU(n,e,t,r,i){let s=n.providerIndexes,o=e.data,a=s&1048575,c=n.directiveStart,l=n.directiveEnd,d=s>>20,f=r?a:a+d,g=i?a+d:l;for(let _=f;_<g;_++){let w=o[_];if(_<c&&t===w||_>=c&&w.type===t)return _}if(i){let _=o[c];if(_&&Ki(_)&&_.type===t)return c}return null}function ga(n,e,t,r){let i=n[t],s=e.data;if(bU(i)){let o=i;o.resolving&&lV(uV(s[t]));let a=Hh(o.canSeeViewProviders);o.resolving=!0;let c,l=o.injectImpl?En(o.injectImpl):null,d=tA(n,r,ge.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&CU(t,s[t],e)}finally{l!==null&&En(l),Hh(a),o.resolving=!1,sA()}}return i}function OU(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Eu)?n[Eu]:void 0;return typeof e=="number"?e>=0?e&uA:kU:e}function BD(n,e,t){let r=1<<n;return!!(t[e+(n>>lA)]&r)}function $D(n,e){return!(n&ge.Self)&&!(n&ge.Host&&e)}var Ms=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return pA(this._tNode,this._lView,e,rf(r),t)}};function kU(){return new Ms(Sn(),je())}function pr(n){return Nu(()=>{let e=n.prototype.constructor,t=e[xh]||V_(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let s=i[xh]||V_(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function V_(n){return hS(n)?()=>{let e=V_(fn(n));return e&&e()}:Ps(n)}function FU(n,e,t,r,i){let s=n,o=e;for(;s!==null&&o!==null&&o[ie]&2048&&!(o[ie]&512);){let a=gA(s,o,t,r|ge.Self,Mr);if(a!==Mr)return a;let c=s.parent;if(!c){let l=o[VS];if(l){let d=l.get(t,Mr,r);if(d!==Mr)return d}c=mA(o),o=o[va]}s=c}return i}function mA(n){let e=n[me],t=e.type;return t===2?e.declTNode:t===1?n[fr]:null}function HD(n,e=null,t=null,r){let i=_A(n,e,t,r);return i.resolveInjectorInitializers(),i}function _A(n,e=null,t=null,r,i=new Set){let s=[t||zn,UV(n)];return r=r||(typeof n=="object"?void 0:Cn(n)),new bu(s,e||Ey(),r||null,i)}var Ee=class n{static{this.THROW_IF_NOT_FOUND=Cu}static{this.NULL=new Oh}static create(e,t){if(Array.isArray(e))return HD({name:""},t,e,"");{let r=e.name??"";return HD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:n,providedIn:"any",factory:()=>ne(ES)})}static{this.__NG_ELEMENT_ID__=-1}};var LU=new H("");LU.__NG_ELEMENT_ID__=n=>{let e=Sn();if(e===null)throw new Q(204,!1);if(e.type&2)return e.value;if(n&ge.Optional)return null;throw new Q(204,!1)};var VU="ngOriginalError";function m_(n){return n[VU]}var yA=!0,Ji=(()=>{class n{static{this.__NG_ELEMENT_ID__=UU}static{this.__NG_ENV_ID__=t=>t}}return n})(),U_=class extends Ji{constructor(e){super(),this._lView=e}onDestroy(e){return KS(this._lView,e),()=>sU(this._lView,e)}};function UU(){return new U_(je())}var qs=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Gt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})();var j_=class extends ut{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,LS()&&(this.destroyRef=x(Ji,{optional:!0})??void 0,this.pendingTasks=x(qs,{optional:!0})??void 0)}emit(e){let t=Se(null);try{super.next(e)}finally{Se(t)}}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof gt&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},St=j_;function Gh(...n){}function vA(n){let e,t;function r(){n=Gh;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function qD(n){return queueMicrotask(()=>n()),()=>{n=Gh}}var Oy="isAngularZone",zh=Oy+"_ID",jU=0,te=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new St(!1),this.onMicrotaskEmpty=new St(!1),this.onStable=new St(!1),this.onError=new St(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=yA}=e;if(typeof Zone>"u")throw new Q(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,HU(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Oy)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new Q(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new Q(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,BU,Gh,Gh);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},BU={};function ky(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function $U(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){vA(()=>{n.callbackScheduled=!1,B_(n),n.isCheckStableRunning=!0,ky(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),B_(n)}function HU(n){let e=()=>{$U(n)},t=jU++;n._inner=n._inner.fork({name:"angular",properties:{[Oy]:!0,[zh]:t,[zh+t]:!0},onInvokeTask:(r,i,s,o,a,c)=>{if(qU(c))return r.invokeTask(s,o,a,c);try{return GD(n),r.invokeTask(s,o,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),zD(n)}},onInvoke:(r,i,s,o,a,c,l)=>{try{return GD(n),r.invoke(s,o,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!GU(c)&&e(),zD(n)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(n._hasPendingMicrotasks=o.microTask,B_(n),ky(n)):o.change=="macroTask"&&(n.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),n.runOutsideAngular(()=>n.onError.emit(o)),!1)})}function B_(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function GD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function zD(n){n._nesting--,ky(n)}var $_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new St,this.onMicrotaskEmpty=new St,this.onStable=new St,this.onError=new St}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function qU(n){return wA(n,"__ignore_ng_zone__")}function GU(n){return wA(n,"__scheduler_tick__")}function wA(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Fr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&m_(e);for(;t&&m_(t);)t=m_(t);return t||null}},zU=new H("",{providedIn:"root",factory:()=>{let n=x(te),e=x(Fr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function WU(){return df(Sn(),je())}function df(n,e){return new Lr(Jn(n,e))}var Lr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=WU}}return n})();function IA(n){return(n.flags&128)===128}var EA=new Map,KU=0;function QU(){return KU++}function YU(n){EA.set(n[af],n)}function H_(n){EA.delete(n[af])}var WD="__ngContext__";function Us(n,e){zi(e)?(n[WD]=e[af],YU(e)):n[WD]=e}function CA(n){return bA(n[Du])}function TA(n){return bA(n[hr])}function bA(n){for(;n!==null&&!ui(n);)n=n[hr];return n}var q_;function DA(n){q_=n}function ZU(){if(q_!==void 0)return q_;if(typeof document<"u")return document;throw new Q(210,!1)}var Fy=new H("",{providedIn:"root",factory:()=>JU}),JU="ng",Ly=new H(""),gr=new H("",{providedIn:"platform",factory:()=>"unknown"});var Vy=new H("",{providedIn:"root",factory:()=>ZU().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var XU="h",ej="b";var tj=()=>null;function Uy(n,e,t=!1){return tj(n,e,t)}var SA=!1,nj=new H("",{providedIn:"root",factory:()=>SA});var G_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${XL})`}};function jy(n){return n instanceof G_?n.changingThisBreaksApplicationSecurity:n}function AA(n){return n instanceof Function?n():n}var ii=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(ii||{}),rj;function By(n,e){return rj(n,e)}function oa(n,e,t,r,i){if(r!=null){let s,o=!1;ui(r)?s=r:zi(r)&&(o=!0,r=r[ci]);let a=kr(r);n===0&&t!==null?i==null?MA(e,t,a):Kh(e,t,a,i||null,!0):n===1&&t!==null?Kh(e,t,a,i||null,!0):n===2?yj(e,a,o):n===3&&e.destroyNode(a),s!=null&&wj(e,n,s,t,i)}}function ij(n,e){return n.createText(e)}function sj(n,e,t){n.setValue(e,t)}function RA(n,e,t){return n.createElement(e,t)}function oj(n,e){NA(n,e),e[ci]=null,e[fr]=null}function aj(n,e,t,r,i,s){r[ci]=i,r[fr]=e,hf(n,r,t,1,i,s)}function NA(n,e){e[ri].changeDetectionScheduler?.notify(9),hf(n,e,e[Vt],2,null,null)}function cj(n){let e=n[Du];if(!e)return __(n[me],n);for(;e;){let t=null;if(zi(e))t=e[Du];else{let r=e[Vn];r&&(t=r)}if(!t){for(;e&&!e[hr]&&e!==n;)zi(e)&&__(e[me],e),e=e[pn];e===null&&(e=n),zi(e)&&__(e[me],e),t=e&&e[hr]}e=t}}function uj(n,e,t,r){let i=Vn+r,s=t.length;r>0&&(t[i-1][hr]=e),r<s-Vn?(e[hr]=t[i],IS(t,Vn+r,e)):(t.push(e),e[hr]=null),e[pn]=t;let o=e[fa];o!==null&&t!==o&&xA(o,e);let a=e[pa];a!==null&&a.insertView(n),P_(e),e[ie]|=128}function xA(n,e){let t=n[Vh],r=e[pn];if(zi(r))n[ie]|=Uh.HasTransplantedViews;else{let i=r[pn][Or];e[Or]!==i&&(n[ie]|=Uh.HasTransplantedViews)}t===null?n[Vh]=[e]:t.push(e)}function $y(n,e){let t=n[Vh],r=t.indexOf(e);t.splice(r,1)}function Wh(n,e){if(n.length<=Vn)return;let t=Vn+e,r=n[t];if(r){let i=r[fa];i!==null&&i!==n&&$y(i,r),e>0&&(n[t-1][hr]=r[hr]);let s=Ph(n,Vn+e);oj(r[me],r);let o=s[pa];o!==null&&o.detachView(s[me]),r[pn]=null,r[hr]=null,r[ie]&=-129}return r}function Hy(n,e){if(!(e[ie]&256)){let t=e[Vt];t.destroyNode&&hf(n,e,t,3,null,null),cj(e)}}function __(n,e){if(e[ie]&256)return;let t=Se(null);try{e[ie]&=-129,e[ie]|=256,e[Wn]&&Hd(e[Wn]),dj(n,e),lj(n,e),e[me].type===1&&e[Vt].destroy();let r=e[fa];if(r!==null&&ui(e[pn])){r!==e[pn]&&$y(r,e);let i=e[pa];i!==null&&i.detachView(n)}H_(e)}finally{Se(t)}}function lj(n,e){let t=n.cleanup,r=e[Fh];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[t[s+1]];t[s].call(o)}r!==null&&(e[Fh]=null);let i=e[Gi];if(i!==null){e[Gi]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function dj(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Vs)){let s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];xr(4,a,c);try{c.call(a)}finally{xr(5,a,c)}}else{xr(4,i,s);try{s.call(i)}finally{xr(5,i,s)}}}}}function hj(n,e,t){return fj(n,e.parent,t)}function fj(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[ci];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=n.data[r.directiveStart+i];if(s===Pr.None||s===Pr.Emulated)return null}return Jn(r,t)}}function Kh(n,e,t,r,i){n.insertBefore(e,t,r,i)}function MA(n,e,t){n.appendChild(e,t)}function KD(n,e,t,r,i){r!==null?Kh(n,e,t,r,i):MA(n,e,t)}function PA(n,e){return n.parentNode(e)}function pj(n,e){return n.nextSibling(e)}function gj(n,e,t){return _j(n,e,t)}function mj(n,e,t){return n.type&40?Jn(n,t):null}var _j=mj,QD;function qy(n,e,t,r){let i=hj(n,r,e),s=e[Vt],o=r.parent||e[fr],a=gj(o,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)KD(s,i,t[c],a,!1);else KD(s,i,t,a,!1);QD!==void 0&&QD(s,r,e,t,i)}function wu(n,e){if(e!==null){let t=e.type;if(t&3)return Jn(e,n);if(t&4)return z_(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return wu(n,r);{let i=n[e.index];return ui(i)?z_(-1,i):kr(i)}}else{if(t&128)return wu(n,e.next);if(t&32)return By(e,n)()||kr(n[e.index]);{let r=OA(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Fs(n[Or]);return wu(i,r)}else return wu(n,e.next)}}}return null}function OA(n,e){if(e!==null){let r=n[Or][fr],i=e.projection;return r.projection[i]}return null}function z_(n,e){let t=Vn+n+1;if(t<e.length){let r=e[t],i=r[me].firstChild;if(i!==null)return wu(r,i)}return e[ks]}function yj(n,e,t){n.removeChild(null,e,t)}function Gy(n,e,t,r,i,s,o){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(o&&e===0&&(a&&Us(kr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Gy(n,e,t.child,r,i,s,!1),oa(e,n,i,a,s);else if(c&32){let l=By(t,r),d;for(;d=l();)oa(e,n,i,d,s);oa(e,n,i,a,s)}else c&16?vj(n,e,r,t,i,s):oa(e,n,i,a,s);t=o?t.projectionNext:t.next}}function hf(n,e,t,r,i,s){Gy(t,r,n.firstChild,e,i,s,!1)}function vj(n,e,t,r,i,s){let o=t[Or],c=o[fr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];oa(e,n,i,d,s)}else{let l=c,d=o[pn];IA(r)&&(l.flags|=128),Gy(n,e,l,d,i,s,!0)}}function wj(n,e,t,r,i){let s=t[ks],o=kr(t);s!==o&&oa(e,n,r,s,i);for(let a=Vn;a<t.length;a++){let c=t[a];hf(c[me],c,n,e,r,s)}}function Ij(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=r.indexOf("-")===-1?void 0:ii.DashCase;i==null?n.removeStyle(t,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=ii.Important),n.setStyle(t,r,i,s))}}function Ej(n,e,t){n.setAttribute(e,"style",t)}function kA(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function FA(n,e,t){let{mergedAttrs:r,classes:i,styles:s}=t;r!==null&&S_(n,e,r),i!==null&&kA(n,e,i),s!==null&&Ej(n,e,s)}var Xi={};function U(n=1){LA(Tn(),je(),wa()+n,!1)}function LA(n,e,t,r){if(!r)if((e[ie]&3)===3){let s=n.preOrderCheckHooks;s!==null&&Sh(e,s,t)}else{let s=n.preOrderHooks;s!==null&&Ah(e,s,0,t)}Ls(t)}function we(n,e=ge.Default){let t=je();if(t===null)return ne(n,e);let r=Sn();return pA(r,t,fn(n),e)}function VA(n,e,t,r,i,s){let o=Se(null);try{let a=null;i&Wi.SignalBased&&(a=e[r][Rr]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Wi.HasDecoratorInputTransform&&(s=n.inputTransforms[r].call(e,s)),n.setInput!==null?n.setInput(e,a,s,t,r):BS(e,a,r,s)}finally{Se(o)}}function Cj(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Ls(~i);else{let s=i,o=t[++r],a=t[++r];_U(o,s);let c=e[s];a(2,c)}}}finally{Ls(-1)}}function ff(n,e,t,r,i,s,o,a,c,l,d){let f=e.blueprint.slice();return f[ci]=i,f[ie]=r|4|128|8|64,(l!==null||n&&n[ie]&2048)&&(f[ie]|=2048),zS(f),f[pn]=f[va]=n,f[Qn]=t,f[ri]=o||n&&n[ri],f[Vt]=a||n&&n[Vt],f[ha]=c||n&&n[ha]||null,f[fr]=s,f[af]=QU(),f[kh]=d,f[VS]=l,f[Or]=e.type==2?n[Or]:f,f}function pf(n,e,t,r,i){let s=n.data[e];if(s===null)s=Tj(n,e,t,r,i),mU()&&(s.flags|=32);else if(s.type&64){s.type=t,s.value=r,s.attrs=i;let o=hU();s.injectorIndex=o===null?-1:o.injectorIndex}return Mu(s,!0),s}function Tj(n,e,t,r,i){let s=ZS(),o=JS(),a=o?s:s&&s.parent,c=n.data[e]=Rj(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function UA(n,e,t,r){if(t===0)return-1;let i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function jA(n,e,t,r,i){let s=wa(),o=r&2;try{Ls(-1),o&&e.length>Yn&&LA(n,e,Yn,!1),xr(o?2:0,i),t(r,i)}finally{Ls(s),xr(o?3:1,i)}}function BA(n,e,t){if(jS(e)){let r=Se(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=n.data[o];if(a.contentQueries){let c=t[o];a.contentQueries(1,c,o)}}}finally{Se(r)}}}function $A(n,e,t){YS()&&(kj(n,e,t,Jn(t,e)),(t.flags&64)===64&&KA(n,e,t))}function HA(n,e,t=Jn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?t(e,n):n[o];n[i++]=a}}}function qA(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=zy(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function zy(n,e,t,r,i,s,o,a,c,l,d){let f=Yn+r,g=f+i,_=bj(f,g),w=typeof l=="function"?l():l;return _[me]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:w,incompleteFirstPass:!1,ssrId:d}}function bj(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Xi);return t}function Dj(n,e,t,r){let s=r.get(nj,SA)||t===Pr.ShadowDom,o=n.selectRootElement(e,s);return Sj(o),o}function Sj(n){Aj(n)}var Aj=()=>null;function Rj(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return uU()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function YD(n,e,t,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Wi.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}n===0?ZD(r,t,l,a,c):ZD(r,t,l,a)}return r}function ZD(n,e,t,r,i){let s;n.hasOwnProperty(t)?(s=n[t]).push(e,r):s=n[t]=[e,r],i!==void 0&&s.push(i)}function Nj(n,e,t){let r=e.directiveStart,i=e.directiveEnd,s=n.data,o=e.attrs,a=[],c=null,l=null;for(let d=r;d<i;d++){let f=s[d],g=t?t.get(f):null,_=g?g.inputs:null,w=g?g.outputs:null;c=YD(0,f.inputs,d,c,_),l=YD(1,f.outputs,d,l,w);let R=c!==null&&o!==null&&!wy(e)?zj(c,d,o):null;a.push(R)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function xj(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function GA(n,e,t,r,i,s,o,a){let c=Jn(e,t),l=e.inputs,d;!a&&l!=null&&(d=l[r])?(Wy(n,t,d,r,i),cf(e)&&Mj(t,e.index)):e.type&3?(r=xj(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function Mj(n,e){let t=Zi(e,n);t[ie]&16||(t[ie]|=64)}function zA(n,e,t,r){if(YS()){let i=r===null?null:{"":-1},s=Lj(n,t),o,a;s===null?o=a=null:[o,a]=s,o!==null&&WA(n,e,t,o,i,a),i&&Vj(t,r,i)}t.mergedAttrs=Tu(t.mergedAttrs,t.attrs)}function WA(n,e,t,r,i,s){for(let l=0;l<r.length;l++)L_(qh(t,e),n,r[l].type);jj(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let d=r[l];d.providersResolver&&d.providersResolver(d)}let o=!1,a=!1,c=UA(n,e,r.length,null);for(let l=0;l<r.length;l++){let d=r[l];t.mergedAttrs=Tu(t.mergedAttrs,d.hostAttrs),Bj(n,t,e,c,d),Uj(c,d,i),d.contentQueries!==null&&(t.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(t.flags|=64);let f=d.type.prototype;!o&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(f.ngOnChanges||f.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}Nj(n,t,s)}function Pj(n,e,t,r,i){let s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;o===null&&(o=n.hostBindingOpCodes=[]);let a=~e.index;Oj(o)!=a&&o.push(a),o.push(t,r,s)}}function Oj(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function kj(n,e,t,r){let i=t.directiveStart,s=t.directiveEnd;cf(t)&&$j(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||qh(t,e),Us(r,e);let o=t.initialInputs;for(let a=i;a<s;a++){let c=n.data[a],l=ga(e,n,a,t);if(Us(l,e),o!==null&&Gj(e,a-i,l,c,t,o),Ki(c)){let d=Zi(t.index,e);d[Qn]=ga(e,n,a,t)}}}function KA(n,e,t){let r=t.directiveStart,i=t.directiveEnd,s=t.index,o=yU();try{Ls(s);for(let a=r;a<i;a++){let c=n.data[a],l=e[a];O_(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Fj(c,l)}}finally{Ls(-1),O_(o)}}function Fj(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Lj(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let s=0;s<t.length;s++){let o=t[s];if(NV(e,o.selectors,!1))if(r||(r=[]),Ki(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;W_(n,e,c)}else r.unshift(o),W_(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function W_(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Vj(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let s=t[e[i+1]];if(s==null)throw new Q(-301,!1);r.push(e[i],s)}}}function Uj(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Ki(e)&&(t[""]=n)}}function jj(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Bj(n,e,t,r,i){n.data[r]=i;let s=i.factory||(i.factory=Ps(i.type,!0)),o=new Vs(s,Ki(i),we);n.blueprint[r]=o,t[r]=o,Pj(n,e,r,UA(n,t,i.hostVars,Xi),i)}function $j(n,e,t){let r=Jn(e,n),i=qA(t),s=n[ri].rendererFactory,o=16;t.signals?o=4096:t.onPush&&(o=64);let a=gf(n,ff(n,i,null,o,r,e,null,s.createRenderer(r,t),null,null,null));n[e.index]=a}function Hj(n,e,t,r,i,s){let o=Jn(n,e);qj(e[Vt],o,s,n.value,t,r,i)}function qj(n,e,t,r,i,s,o){if(s==null)n.removeAttribute(e,i,t);else{let a=o==null?_y(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}function Gj(n,e,t,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],l=o[a++],d=o[a++],f=o[a++];VA(r,t,c,l,d,f)}}function zj(n,e,t){let r=null,i=0;for(;i<t.length;){let s=t[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(n.hasOwnProperty(s)){r===null&&(r=[]);let o=n[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],t[i+1]);break}}i+=2}return r}function QA(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function YA(n,e){let t=n.contentQueries;if(t!==null){let r=Se(null);try{for(let i=0;i<t.length;i+=2){let s=t[i],o=t[i+1];if(o!==-1){let a=n.data[o];eA(s),a.contentQueries(2,e[o],o)}}}finally{Se(r)}}}function gf(n,e){return n[Du]?n[LD][hr]=e:n[Du]=e,n[LD]=e,e}function K_(n,e,t){eA(0);let r=Se(null);try{e(n,t)}finally{Se(r)}}function Wj(n){return n[Fh]??=[]}function Kj(n){return n.cleanup??=[]}function ZA(n,e){let t=n[ha],r=t?t.get(Fr,null):null;r&&r.handleError(e)}function Wy(n,e,t,r,i){for(let s=0;s<t.length;){let o=t[s++],a=t[s++],c=t[s++],l=e[o],d=n.data[o];VA(d,l,r,a,c,i)}}function Qj(n,e,t){let r=GS(e,n);sj(n[Vt],r,t)}function Yj(n,e){let t=Zi(e,n),r=t[me];Zj(r,t);let i=t[ci];i!==null&&t[kh]===null&&(t[kh]=Uy(i,t[ha])),Ky(r,t,t[Qn])}function Zj(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Ky(n,e,t){Sy(e);try{let r=n.viewQuery;r!==null&&K_(1,r,t);let i=n.template;i!==null&&jA(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[pa]?.finishViewCreation(n),n.staticContentQueries&&YA(n,e),n.staticViewQueries&&K_(2,n.viewQuery,t);let s=n.components;s!==null&&Jj(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ie]&=-5,Ay()}}function Jj(n,e){for(let t=0;t<e.length;t++)Yj(n,e[t])}function JA(n,e,t,r){let i=Se(null);try{let s=e.tView,a=n[ie]&4096?4096:16,c=ff(n,s,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[fa]=l;let d=n[pa];return d!==null&&(c[pa]=d.createEmbeddedView(s)),Ky(s,c,t),c}finally{Se(i)}}function Xj(n,e){let t=Vn+e;if(t<n.length)return n[t]}function Q_(n,e){return!e||e.firstChild===null||IA(n)}function XA(n,e,t,r=!0){let i=e[me];if(uj(i,e,n,t),r){let o=z_(t,n),a=e[Vt],c=PA(a,n[ks]);c!==null&&aj(i,n[fr],a,e,c,o)}let s=e[kh];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function e2(n,e){let t=Wh(n,e);return t!==void 0&&Hy(t[me],t),t}function Qh(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let s=e[t.index];s!==null&&r.push(kr(s)),ui(s)&&t2(s,r);let o=t.type;if(o&8)Qh(n,e,t.child,r);else if(o&32){let a=By(t,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=OA(e,t);if(Array.isArray(a))r.push(...a);else{let c=Fs(e[Or]);Qh(c[me],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function t2(n,e){for(let t=Vn;t<n.length;t++){let r=n[t],i=r[me].firstChild;i!==null&&Qh(r[me],r,i,e)}n[ks]!==n[ci]&&e.push(n[ks])}var eR=[];function n2(n){return n[Wn]??r2(n)}function r2(n){let e=eR.pop()??Object.create(s2);return e.lView=n,e}function i2(n){n.lView[Wn]!==n&&(n.lView=null,eR.push(n))}var s2=ye(j({},$o),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{lf(n.lView)},consumerOnSignalRead(){this.lView[Wn]=this}});function o2(n){let e=n[Wn]??Object.create(a2);return e.lView=n,e}var a2=ye(j({},$o),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=Fs(n.lView);for(;e&&!tR(e[me]);)e=Fs(e);e&&WS(e)},consumerOnSignalRead(){this.lView[Wn]=this}});function tR(n){return n.type!==2}var c2=100;function nR(n,e=!0,t=0){let r=n[ri],i=r.rendererFactory,s=!1;s||i.begin?.();try{u2(n,t)}catch(o){throw e&&ZA(n,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function u2(n,e){let t=XS();try{UD(!0),Y_(n,e);let r=0;for(;uf(n);){if(r===c2)throw new Q(103,!1);r++,Y_(n,1)}}finally{UD(t)}}function l2(n,e,t,r){let i=e[ie];if((i&256)===256)return;let s=!1,o=!1;!s&&e[ri].inlineEffectRunner?.flush(),Sy(e);let a=!0,c=null,l=null;s||(tR(n)?(l=n2(e),c=hu(l)):Bb()===null?(a=!1,l=o2(e),c=hu(l)):e[Wn]&&(Hd(e[Wn]),e[Wn]=null));try{zS(e),pU(n.bindingStartIndex),t!==null&&jA(n,e,t,2,r);let d=(i&3)===3;if(!s)if(d){let _=n.preOrderCheckHooks;_!==null&&Sh(e,_,null)}else{let _=n.preOrderHooks;_!==null&&Ah(e,_,0,null),f_(e,0)}if(o||d2(e),rR(e,0),n.contentQueries!==null&&YA(n,e),!s)if(d){let _=n.contentCheckHooks;_!==null&&Sh(e,_)}else{let _=n.contentHooks;_!==null&&Ah(e,_,1),f_(e,1)}Cj(n,e);let f=n.components;f!==null&&sR(e,f,0);let g=n.viewQuery;if(g!==null&&K_(2,g,r),!s)if(d){let _=n.viewCheckHooks;_!==null&&Sh(e,_)}else{let _=n.viewHooks;_!==null&&Ah(e,_,2),f_(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Dh]){for(let _ of e[Dh])_();e[Dh]=null}s||(e[ie]&=-73)}catch(d){throw s||lf(e),d}finally{l!==null&&(Bd(l,c),a&&i2(l)),Ay()}}function rR(n,e){for(let t=CA(n);t!==null;t=TA(t))for(let r=Vn;r<t.length;r++){let i=t[r];iR(i,e)}}function d2(n){for(let e=CA(n);e!==null;e=TA(e)){if(!(e[ie]&Uh.HasTransplantedViews))continue;let t=e[Vh];for(let r=0;r<t.length;r++){let i=t[r];WS(i)}}}function h2(n,e,t){let r=Zi(e,n);iR(r,t)}function iR(n,e){by(n)&&Y_(n,e)}function Y_(n,e){let r=n[me],i=n[ie],s=n[Wn],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&$d(s)),o||=!1,s&&(s.dirty=!1),n[ie]&=-9217,o)l2(r,n,r.template,n[Qn]);else if(i&8192){rR(n,1);let a=r.components;a!==null&&sR(n,a,1)}}function sR(n,e,t){for(let r=0;r<e.length;r++)h2(n,e[r],t)}function Qy(n,e){let t=XS()?64:1088;for(n[ri].changeDetectionScheduler?.notify(e);n;){n[ie]|=t;let r=Fs(n);if(x_(n)&&!r)return n;n=r}return null}var js=class{get rootNodes(){let e=this._lView,t=e[me];return Qh(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qn]}set context(e){this._lView[Qn]=e}get destroyed(){return(this._lView[ie]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[pn];if(ui(e)){let t=e[Lh],r=t?t.indexOf(this):-1;r>-1&&(Wh(e,r),Ph(t,r))}this._attachedToViewContainer=!1}Hy(this._lView[me],this._lView)}onDestroy(e){KS(this._lView,e)}markForCheck(){Qy(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ie]&=-129}reattach(){P_(this._lView),this._lView[ie]|=128}detectChanges(){this._lView[ie]|=1024,nR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Q(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=x_(this._lView),t=this._lView[fa];t!==null&&!e&&$y(t,this._lView),NA(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Q(902,!1);this._appRef=e;let t=x_(this._lView),r=this._lView[fa];r!==null&&!t&&xA(r,this._lView),P_(this._lView)}},Yy=(()=>{class n{static{this.__NG_ELEMENT_ID__=g2}}return n})(),f2=Yy,p2=class extends f2{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=JA(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new js(i)}};function g2(){return m2(Sn(),je())}function m2(n,e){return n.type&4?new p2(e,n,df(n,e)):null}var pne=new RegExp(`^(\\d+)*(${ej}|${XU})*(.*)`);var _2=()=>null;function Z_(n,e){return _2(n,e)}var ma=class{},mf=new H("",{providedIn:"root",factory:()=>!1});var oR=new H(""),aR=new H(""),J_=class{},Yh=class{};function y2(n){let e=Error(`No component factory found for ${Cn(n)}.`);return e[v2]=n,e}var v2="ngComponent";var X_=class{resolveComponentFactory(e){throw y2(e)}},Qi=class{static{this.NULL=new X_}},_a=class{},di=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>w2()}}return n})();function w2(){let n=je(),e=Sn(),t=Zi(e.index,n);return(zi(t)?t:n)[Vt]}var I2=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>null})}}return n})();function ey(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=SD(i,a);else if(s==2){let c=a,l=e[++o];r=SD(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var Zh=class extends Qi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Os(e);return new Su(t,this.ngModule)}};function JD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Wi.None;e?t.push({propName:o,templateName:r,isSignal:(a&Wi.SignalBased)!==0}):t.push({propName:o,templateName:r})}return t}function E2(n){let e=n.toLowerCase();return e==="svg"?eU:e==="math"?tU:null}var Su=class extends Yh{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=JD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return JD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=OV(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=Se(null);try{i=i||this.ngModule;let o=i instanceof Kn?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new k_(e,o):e,c=a.get(_a,null);if(c===null)throw new Q(407,!1);let l=a.get(I2,null),d=a.get(ma,null),f={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:d},g=c.createRenderer(null,this.componentDef),_=this.componentDef.selectors[0][0]||"div",w=r?Dj(g,r,this.componentDef.encapsulation,a):RA(g,_,E2(_)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let S=null;w!==null&&(S=Uy(w,a,!0));let F=zy(0,null,null,1,0,null,null,null,null,null,null),q=ff(null,F,null,R,null,null,f,g,a,null,S);Sy(q);let W,J,ze=null;try{let ee=this.componentDef,C,v=null;ee.findHostDirectiveDefs?(C=[],v=new Map,ee.findHostDirectiveDefs(ee,C,v),C.push(ee)):C=[ee];let I=C2(q,w);ze=T2(I,w,ee,C,q,f,g),J=Ty(F,Yn),w&&S2(g,ee,w,r),t!==void 0&&A2(J,this.ngContentSelectors,t),W=D2(ze,ee,C,v,q,[R2]),Ky(F,q,null)}catch(ee){throw ze!==null&&H_(ze),H_(q),ee}finally{Ay()}return new ty(this.componentType,W,df(J,q),q,J)}finally{Se(s)}}},ty=class extends J_{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new js(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let s=this._rootLView;Wy(s[me],s,i,e,t),this.previousInputValues.set(e,t);let o=Zi(this._tNode.index,s);Qy(o,1)}}get injector(){return new Ms(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function C2(n,e){let t=n[me],r=Yn;return n[r]=e,pf(t,r,2,"#host",null)}function T2(n,e,t,r,i,s,o){let a=i[me];b2(r,n,e,o);let c=null;e!==null&&(c=Uy(e,i[ha]));let l=s.rendererFactory.createRenderer(e,t),d=16;t.signals?d=4096:t.onPush&&(d=64);let f=ff(i,qA(t),null,d,i[n.index],n,s,l,null,null,c);return a.firstCreatePass&&W_(a,n,r.length-1),gf(i,f),i[n.index]=f}function b2(n,e,t,r){for(let i of n)e.mergedAttrs=Tu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(ey(e,e.mergedAttrs,!0),t!==null&&FA(r,t,e))}function D2(n,e,t,r,i,s){let o=Sn(),a=i[me],c=Jn(o,i);WA(a,i,o,t,null,r);for(let d=0;d<t.length;d++){let f=o.directiveStart+d,g=ga(i,a,f,o);Us(g,i)}KA(a,i,o),c&&Us(c,i);let l=ga(i,a,o.directiveStart+o.componentOffset,o);if(n[Qn]=i[Qn]=l,s!==null)for(let d of s)d(l,e);return BA(a,o,i),l}function S2(n,e,t,r){if(r)S_(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=kV(e.selectors[0]);i&&S_(n,t,i),s&&s.length>0&&kA(n,t,s.join(" "))}}function A2(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let s=t[i];r.push(s!=null?Array.from(s):null)}}function R2(){let n=Sn();My(je()[me],n)}var Ou=(()=>{class n{static{this.__NG_ELEMENT_ID__=N2}}return n})();function N2(){let n=Sn();return M2(n,je())}var x2=Ou,cR=class extends x2{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return df(this._hostTNode,this._hostLView)}get injector(){return new Ms(this._hostTNode,this._hostLView)}get parentInjector(){let e=Py(this._hostTNode,this._hostLView);if(cA(e)){let t=$h(e,this._hostLView),r=Bh(e),i=t[me].data[r+8];return new Ms(i,t)}else return new Ms(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=XD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Vn}createEmbeddedView(e,t,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Z_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},s,o);return this.insertImpl(a,i,Q_(this._hostTNode,o)),a}createComponent(e,t,r,i,s){let o=e&&!YV(e),a;if(o)a=t;else{let w=t||{};a=w.index,r=w.injector,i=w.projectableNodes,s=w.environmentInjector||w.ngModuleRef}let c=o?e:new Su(Os(e)),l=r||this.parentInjector;if(!s&&c.ngModule==null){let R=(o?l:this.parentInjector).get(Kn,null);R&&(s=R)}let d=Os(c.componentType??{}),f=Z_(this._lContainer,d?.id??null),g=f?.firstChild??null,_=c.create(l,i,g,s);return this.insertImpl(_.hostView,a,Q_(this._hostTNode,f)),_}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(rU(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[pn],l=new cR(c,c[fr],c[pn]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(t),o=this._lContainer;return XA(o,i,s,r),e.attachToViewContainerRef(),IS(y_(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=XD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Wh(this._lContainer,t);r&&(Ph(y_(this._lContainer),t),Hy(r[me],r))}detach(e){let t=this._adjustIndex(e,-1),r=Wh(this._lContainer,t);return r&&Ph(y_(this._lContainer),t)!=null?new js(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function XD(n){return n[Lh]}function y_(n){return n[Lh]||(n[Lh]=[])}function M2(n,e){let t,r=e[n.index];return ui(r)?t=r:(t=QA(r,e,null,n),e[n.index]=t,gf(e,t)),O2(t,e,n,r),new cR(t,n,e)}function P2(n,e){let t=n[Vt],r=t.createComment(""),i=Jn(e,n),s=PA(t,i);return Kh(t,s,r,pj(t,i),!1),r}var O2=L2,k2=()=>!1;function F2(n,e,t){return k2(n,e,t)}function L2(n,e,t,r){if(n[ks])return;let i;t.type&8?i=kr(r):i=P2(e,t),n[ks]=i}var eS=new Set;function Gs(n){eS.has(n)||(eS.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function V2(n){return typeof n=="function"&&n[Rr]!==void 0}function oe(n,e){Gs("NgSignals");let t=Xb(n),r=t[Rr];return e?.equal&&(r.equal=e.equal),t.set=i=>Wm(r,i),t.update=i=>eD(r,i),t.asReadonly=U2.bind(t),t}function U2(){let n=this[Rr];if(n.readonlyFn===void 0){let e=()=>this();e[Rr]=n,n.readonlyFn=e}return n.readonlyFn}function uR(n){return V2(n)&&typeof n.set=="function"}function j2(n){return Object.getPrototypeOf(n.prototype).constructor}function An(n){let e=j2(n.type),t=!0,r=[n];for(;e;){let i;if(Ki(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Q(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let o=n;o.inputs=Eh(n.inputs),o.inputTransforms=Eh(n.inputTransforms),o.declaredInputs=Eh(n.declaredInputs),o.outputs=Eh(n.outputs);let a=i.hostBindings;a&&G2(n,a);let c=i.viewQuery,l=i.contentQueries;if(c&&H2(n,c),l&&q2(n,l),B2(n,i),tV(n.outputs,i.outputs),Ki(i)&&i.data.animation){let d=n.data;d.animation=(d.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(n),a===An&&(t=!1)}}e=Object.getPrototypeOf(e)}$2(r)}function B2(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function $2(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Tu(i.hostAttrs,t=Tu(t,i.hostAttrs))}}function Eh(n){return n===ua?{}:n===zn?[]:n}function H2(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function q2(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,s)=>{e(r,i,s),t(r,i,s)}:n.contentQueries=e}function G2(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}var Yi=class{},Au=class{};var ny=class extends Yi{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Zh(this);let s=NS(e);this._bootstrapComponents=AA(s.bootstrap),this._r3Injector=_A(e,t,[{provide:Yi,useValue:this},{provide:Qi,useValue:this.componentFactoryResolver},...r],Cn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ry=class extends Au{constructor(e){super(),this.moduleType=e}create(e){return new ny(this.moduleType,e,[])}};var Jh=class extends Yi{constructor(e){super(),this.componentFactoryResolver=new Zh(this),this.instance=null;let t=new bu([...e.providers,{provide:Yi,useValue:this},{provide:Qi,useValue:this.componentFactoryResolver}],e.parent||Ey(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Zy(n,e,t=null){return new Jh({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function lR(n){return W2(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function z2(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function W2(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function dR(n,e,t){return n[e]=t}function si(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function K2(n,e,t,r){let i=si(n,e,t);return si(n,e+1,r)||i}function Q2(n){return(n.flags&32)===32}function Y2(n,e,t,r,i,s,o,a,c){let l=e.consts,d=pf(e,n,4,o||null,a||null);zA(e,t,d,jh(l,c)),My(e,d);let f=d.tView=zy(2,d,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,d),f.queries=e.queries.embeddedTView(d)),d}function Z2(n,e,t,r,i,s,o,a,c,l){let d=t+Yn,f=e.firstCreatePass?Y2(d,e,n,r,i,s,o,a,c):e.data[d];Mu(f,!1);let g=J2(e,n,f,t);Ny()&&qy(e,n,g,f),Us(g,n);let _=QA(g,n,g,f);return n[d]=_,gf(n,_),F2(_,f,n),Cy(f)&&$A(e,n,f),c!=null&&HA(n,f,l),f}function Be(n,e,t,r,i,s,o,a){let c=je(),l=Tn(),d=jh(l.consts,s);return Z2(c,l,n,e,t,r,i,d,o,a),Be}var J2=X2;function X2(n,e,t,r){return xy(!0),e[Vt].createComment("")}var Iu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Iu||{}),eB=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})(),tS=class n{constructor(){this.ngZone=x(te),this.scheduler=x(ma),this.errorHandler=x(Fr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[Iu.EarlyRead,Iu.Write,Iu.MixedReadWrite,Iu.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}};function ku(n,e,t,r){let i=je(),s=Pu();if(si(i,s,e)){let o=Tn(),a=Ry();Hj(a,i,n,e,t,r)}return ku}function tB(n,e,t,r){return si(n,Pu(),t)?e+_y(t)+r:Xi}function Ch(n,e){return n<<17|e<<2}function Bs(n){return n>>17&32767}function nB(n){return(n&2)==2}function rB(n,e){return n&131071|e<<17}function iy(n){return n|2}function ya(n){return(n&131068)>>2}function v_(n,e){return n&-131069|e<<2}function iB(n){return(n&1)===1}function sy(n){return n|1}function sB(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bs(o),c=ya(o);n[r]=t;let l=!1,d;if(Array.isArray(t)){let f=t;d=f[1],(d===null||xu(f,d)>0)&&(l=!0)}else d=t;if(i)if(c!==0){let g=Bs(n[a+1]);n[r+1]=Ch(g,a),g!==0&&(n[g+1]=v_(n[g+1],r)),n[a+1]=rB(n[a+1],r)}else n[r+1]=Ch(a,0),a!==0&&(n[a+1]=v_(n[a+1],r)),a=r;else n[r+1]=Ch(c,0),a===0?a=r:n[c+1]=v_(n[c+1],r),c=r;l&&(n[r+1]=iy(n[r+1])),nS(n,d,r,!0),nS(n,d,r,!1),oB(e,d,n,r,s),o=Ch(a,c),s?e.classBindings=o:e.styleBindings=o}function oB(n,e,t,r,i){let s=i?n.residualClasses:n.residualStyles;s!=null&&typeof e=="string"&&xu(s,e)>=0&&(t[r+1]=sy(t[r+1]))}function nS(n,e,t,r){let i=n[t+1],s=e===null,o=r?Bs(i):ya(i),a=!1;for(;o!==0&&(a===!1||s);){let c=n[o],l=n[o+1];aB(c,e)&&(a=!0,n[o+1]=r?sy(l):iy(l)),o=r?Bs(l):ya(l)}a&&(n[t+1]=r?iy(i):sy(i))}function aB(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?xu(n,e)>=0:!1}function Ce(n,e,t){let r=je(),i=Pu();if(si(r,i,e)){let s=Tn(),o=Ry();GA(s,o,r,n,e,r[Vt],t,!1)}return Ce}function rS(n,e,t,r,i){let s=e.inputs,o=i?"class":"style";Wy(n,t,s[o],o,r)}function _f(n,e,t){return hR(n,e,t,!1),_f}function yf(n,e){return hR(n,e,null,!0),yf}function hR(n,e,t,r){let i=je(),s=Tn(),o=gU(2);if(s.firstUpdatePass&&uB(s,n,o,r),e!==Xi&&si(i,o,e)){let a=s.data[wa()];pB(s,a,i,i[Vt],n,i[o+1]=gB(e,t),r,o)}}function cB(n,e){return e>=n.expandoStartIndex}function uB(n,e,t,r){let i=n.data;if(i[t+1]===null){let s=i[wa()],o=cB(n,t);mB(s,r)&&e===null&&!o&&(e=!1),e=lB(i,s,e,r),sB(i,s,e,t,o,r)}}function lB(n,e,t,r){let i=vU(n),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=w_(null,n,e,t,r),t=Ru(t,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||n[o]!==i)if(t=w_(i,n,e,t,r),s===null){let c=dB(n,e,r);c!==void 0&&Array.isArray(c)&&(c=w_(null,n,e,c[1],r),c=Ru(c,e.attrs,r),hB(n,e,r,c))}else s=fB(n,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),t}function dB(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ya(r)!==0)return n[Bs(r)]}function hB(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Bs(i)]=r}function fB(n,e,t){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=n[s].hostAttrs;r=Ru(r,o,t)}return Ru(r,e.attrs,t)}function w_(n,e,t,r,i){let s=null,o=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<o&&(s=e[a],r=Ru(r,s.hostAttrs,i),s!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Ru(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),IV(n,o,t?!0:e[++s]))}return n===void 0?null:n}function pB(n,e,t,r,i,s,o,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],d=iB(l)?iS(c,e,t,i,ya(l),o):void 0;if(!Xh(d)){Xh(s)||nB(l)&&(s=iS(c,null,t,i,a,o));let f=GS(wa(),t);Ij(r,o,f,i,s)}}function iS(n,e,t,r,i,s){let o=e===null,a;for(;i>0;){let c=n[i],l=Array.isArray(c),d=l?c[1]:c,f=d===null,g=t[i+1];g===Xi&&(g=f?zn:void 0);let _=f?d_(g,r):d===r?g:void 0;if(l&&!Xh(_)&&(_=d_(c,r)),Xh(_)&&(a=_,o))return a;let w=n[i+1];i=o?Bs(w):ya(w)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=d_(c,r))}return a}function Xh(n){return n!==void 0}function gB(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Cn(jy(n)))),n}function mB(n,e){return(n.flags&(e?8:16))!==0}function et(n,e){Gs("NgControlFlow");let t=je(),r=Pu(),i=t[r]!==Xi?t[r]:-1,s=i!==-1?sS(t,Yn+i):void 0,o=0;if(si(t,r,n)){let a=Se(null);try{if(s!==void 0&&e2(s,o),n!==-1){let c=Yn+n,l=sS(t,c),d=_B(t[me],c),f=Z_(l,d.tView.ssrId),g=JA(t,d,e,{dehydratedView:f});XA(l,g,o,Q_(d,f))}}finally{Se(a)}}else if(s!==void 0){let a=Xj(s,o);a!==void 0&&(a[Qn]=e)}}function sS(n,e){return n[e]}function _B(n,e){return Ty(n,e)}function yB(n,e,t,r,i,s){let o=e.consts,a=jh(o,i),c=pf(e,n,2,r,a);return zA(e,t,c,jh(o,s)),c.attrs!==null&&ey(c,c.attrs,!1),c.mergedAttrs!==null&&ey(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function M(n,e,t,r){let i=je(),s=Tn(),o=Yn+n,a=i[Vt],c=s.firstCreatePass?yB(o,s,i,e,t,r):s.data[o],l=vB(s,i,c,a,e,n);i[o]=l;let d=Cy(c);return Mu(c,!0),FA(a,l,c),!Q2(c)&&Ny()&&qy(s,i,l,c),oU()===0&&Us(l,i),aU(),d&&($A(s,i,c),BA(s,c,i)),r!==null&&HA(i,c),M}function P(){let n=Sn();JS()?fU():(n=n.parent,Mu(n,!1));let e=n;lU(e)&&dU(),cU();let t=Tn();return t.firstCreatePass&&(My(t,n),jS(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&DU(e)&&rS(t,e,je(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&SU(e)&&rS(t,e,je(),e.stylesWithoutHost,!1),P}function Ie(n,e,t,r){return M(n,e,t,r),P(),Ie}var vB=(n,e,t,r,i,s)=>(xy(!0),RA(r,i,EU()));function zs(){return je()}var xs=void 0;function wB(n){let e=n,t=Math.floor(Math.abs(n)),r=n.toString().replace(/^[^.]*\.?/,"").length;return t===1&&r===0?1:5}var IB=["en",[["a","p"],["AM","PM"],xs],[["AM","PM"],xs,xs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],xs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],xs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",xs,"{1} 'at' {0}",xs],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",wB],I_={};function Xn(n){let e=EB(n),t=oS(e);if(t)return t;let r=e.split("-")[0];if(t=oS(r),t)return t;if(r==="en")return IB;throw new Q(701,!1)}function oS(n){return n in I_||(I_[n]=vu.ng&&vu.ng.common&&vu.ng.common.locales&&vu.ng.common.locales[n]),I_[n]}var Et=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Et||{});function EB(n){return n.toLowerCase().replace(/_/g,"-")}var ef="en-US";var CB=ef;function TB(n){typeof n=="string"&&(CB=n.toLowerCase().replace(/_/g,"-"))}var bB=(n,e,t)=>{};function He(n,e,t,r){let i=je(),s=Tn(),o=Sn();return fR(s,i,i[Vt],o,n,e,r),He}function DB(n,e,t,r){let i=n.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===t&&i[s+1]===r){let a=e[Fh],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function fR(n,e,t,r,i,s,o){let a=Cy(r),l=n.firstCreatePass&&Kj(n),d=e[Qn],f=Wj(e),g=!0;if(r.type&3||o){let R=Jn(r,e),S=o?o(R):R,F=f.length,q=o?J=>o(kr(J[r.index])):r.index,W=null;if(!o&&a&&(W=DB(n,e,i,r.index)),W!==null){let J=W.__ngLastListenerFn__||W;J.__ngNextListenerFn__=s,W.__ngLastListenerFn__=s,g=!1}else{s=cS(r,e,d,s),bB(R,i,s);let J=t.listen(S,i,s);f.push(s,J),l&&l.push(i,q,F,F+1)}}else s=cS(r,e,d,s);let _=r.outputs,w;if(g&&_!==null&&(w=_[i])){let R=w.length;if(R)for(let S=0;S<R;S+=2){let F=w[S],q=w[S+1],ze=e[F][q].subscribe(s),ee=f.length;f.push(s,ze),l&&l.push(i,r.index,ee,-(ee+1))}}}function aS(n,e,t,r){let i=Se(null);try{return xr(6,e,t),t(r)!==!1}catch(s){return ZA(n,s),!1}finally{xr(7,e,t),Se(i)}}function cS(n,e,t,r){return function i(s){if(s===Function)return r;let o=n.componentOffset>-1?Zi(n.index,e):e;Qy(o,5);let a=aS(e,t,r,s),c=i.__ngNextListenerFn__;for(;c;)a=aS(e,t,c,s)&&a,c=c.__ngNextListenerFn__;return a}}function _e(n=1){return IU(n)}function SB(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function O(n,e=""){let t=je(),r=Tn(),i=n+Yn,s=r.firstCreatePass?pf(r,i,1,e,null):r.data[i],o=AB(r,t,s,e,n);t[i]=o,Ny()&&qy(r,t,o,s),Mu(s,!1)}var AB=(n,e,t,r,i)=>(xy(!0),ij(e[Vt],r));function hi(n){return Te("",n,""),hi}function Te(n,e,t){let r=je(),i=tB(r,n,e,t);return i!==Xi&&Qj(r,wa(),i),Te}function fi(n,e,t){uR(e)&&(e=e());let r=je(),i=Pu();if(si(r,i,e)){let s=Tn(),o=Ry();GA(s,o,r,n,e,r[Vt],t,!1)}return fi}function es(n,e){let t=uR(n);return t&&n.set(e),t}function pi(n,e){let t=je(),r=Tn(),i=Sn();return fR(r,t,t[Vt],i,n,e),pi}function RB(n,e,t){let r=Tn();if(r.firstCreatePass){let i=Ki(n);oy(t,r.data,r.blueprint,i,!0),oy(e,r.data,r.blueprint,i,!1)}}function oy(n,e,t,r,i){if(n=fn(n),Array.isArray(n))for(let s=0;s<n.length;s++)oy(n[s],e,t,r,i);else{let s=Tn(),o=je(),a=Sn(),c=da(n)?n:fn(n.provide),l=FS(n),d=a.providerIndexes&1048575,f=a.directiveStart,g=a.providerIndexes>>20;if(da(n)||!n.multi){let _=new Vs(l,i,we),w=C_(c,e,i?d:d+g,f);w===-1?(L_(qh(a,o),s,c),E_(s,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(_),o.push(_)):(t[w]=_,o[w]=_)}else{let _=C_(c,e,d+g,f),w=C_(c,e,d,d+g),R=_>=0&&t[_],S=w>=0&&t[w];if(i&&!S||!i&&!R){L_(qh(a,o),s,c);let F=MB(i?xB:NB,t.length,i,r,l);!i&&S&&(t[w].providerFactory=F),E_(s,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(F),o.push(F)}else{let F=pR(t[i?w:_],l,!i&&r);E_(s,n,_>-1?_:w,F)}!i&&r&&S&&t[w].componentProviders++}}}function E_(n,e,t,r){let i=da(e),s=HV(e);if(i||s){let c=(s?fn(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let d=l.indexOf(t);d===-1?l.push(t,[r,c]):l[d+1].push(r,c)}else l.push(t,c)}}}function pR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function C_(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function NB(n,e,t,r){return ay(this.multi,[])}function xB(n,e,t,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ga(t,t[me],this.providerFactory.index,r);s=a.slice(0,o),ay(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],ay(i,s);return s}function ay(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function MB(n,e,t,r,i){let s=new Vs(n,t,we);return s.multi=[],s.index=e,s.componentProviders=0,pR(s,i,r&&!t),s}function Vr(n,e=[]){return t=>{t.providersResolver=(r,i)=>RB(r,i?i(n):n,e)}}var PB=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=PS(!1,t.type),i=r.length>0?Zy([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(ne(Kn))})}}return n})();function Rt(n){Gs("NgStandalone"),n.getStandaloneInjector=e=>e.get(PB).getOrCreateStandaloneInjector(n)}function Xt(n,e,t,r){return OB(je(),Dy(),n,e,t,r)}function gR(n,e,t,r,i){return _R(je(),Dy(),n,e,t,r,i)}function mR(n,e){let t=n[e];return t===Xi?void 0:t}function OB(n,e,t,r,i,s){let o=e+t;return si(n,o,i)?dR(n,o+1,s?r.call(s,i):r(i)):mR(n,o+1)}function _R(n,e,t,r,i,s,o){let a=e+t;return K2(n,a,i,s)?dR(n,a+2,o?r.call(o,i,s):r(i,s)):mR(n,a+2)}function Ia(n,e){let t=Tn(),r,i=n+Yn;t.firstCreatePass?(r=kB(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let s=r.factory||(r.factory=Ps(r.type,!0)),o,a=En(we);try{let c=Hh(!1),l=s();return Hh(c),SB(t,je(),i,l),l}finally{En(a)}}function kB(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Ea(n,e,t,r){let i=n+Yn,s=je(),o=nU(s,i);return FB(s,i)?_R(s,Dy(),e,o.transform,t,r,o):o.transform(t,r)}function FB(n,e){return n[me].data[e].pure}var oi=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},yR=new oi("18.2.13");var vf=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var vR=new H("");function Ws(n){return!!n&&typeof n.then=="function"}function wR(n){return!!n&&typeof n.subscribe=="function"}var ts=new H(""),IR=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=x(ts,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let s=i();if(Ws(s))t.push(s);else if(wR(s)){let o=new Promise((a,c)=>{s.subscribe({complete:a,error:c})});t.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Jy=new H("");function LB(){Jb(()=>{throw new Q(600,!1)})}function VB(n){return n.isBoundToModule}var UB=10;function jB(n,e,t){try{let r=t();return Ws(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Ks=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=x(zU),this.afterRenderManager=x(eB),this.zonelessEnabled=x(mf),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ut,this.afterTick=new ut,this.componentTypes=[],this.components=[],this.isStable=x(qs).hasPendingTasks.pipe(K(t=>!t)),this._injector=x(Kn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof Yh;if(!this._injector.get(IR).done){let g=!i&&RS(t),_=!1;throw new Q(405,_)}let o;i?o=t:o=this._injector.get(Qi).resolveComponentFactory(t),this.componentTypes.push(o.componentType);let a=VB(o)?void 0:this._injector.get(Yi),c=r||o.selector,l=o.create(Ee.NULL,[],c,a),d=l.location.nativeElement,f=l.injector.get(vR,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Rh(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new Q(101,!1);let t=Se(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Se(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(_a,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<UB;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)BB(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>uf(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Rh(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Jy,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Rh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Q(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Rh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function BB(n,e,t,r){if(!t&&!uf(n))return;nR(n,e,t&&!r?0:1)}var cy=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Xy=(()=>{class n{compileModuleSync(t){return new ry(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=NS(t),s=AA(i.declarations).reduce((o,a)=>{let c=Os(a);return c&&o.push(new Su(c)),o},[]);return new cy(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $B=(()=>{class n{constructor(){this.zone=x(te),this.changeDetectionScheduler=x(ma),this.applicationRef=x(Ks)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),HB=new H("",{factory:()=>!1});function ER({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new te(ye(j({},TR()),{scheduleInRootZone:t})),[{provide:te,useFactory:n},{provide:la,multi:!0,useFactory:()=>{let r=x($B,{optional:!0});return()=>r.initialize()}},{provide:la,multi:!0,useFactory:()=>{let r=x(qB);return()=>{r.initialize()}}},e===!0?{provide:oR,useValue:!0}:[],{provide:aR,useValue:t??yA}]}function CR(n){let e=n?.ignoreChangesOutsideZone,t=n?.scheduleInRootZone,r=ER({ngZoneFactory:()=>{let i=TR(n);return i.scheduleInRootZone=t,i.shouldCoalesceEventChangeDetection&&Gs("NgZone_CoalesceEvent"),new te(i)},ignoreChangesOutsideZone:e,scheduleInRootZone:t});return Xe([{provide:HB,useValue:!0},{provide:mf,useValue:!1},r])}function TR(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var qB=(()=>{class n{constructor(){this.subscription=new gt,this.initialized=!1,this.zone=x(te),this.pendingTasks=x(qs)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{te.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{te.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var GB=(()=>{class n{constructor(){this.appRef=x(Ks),this.taskService=x(qs),this.ngZone=x(te),this.zonelessEnabled=x(mf),this.disableScheduling=x(oR,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new gt,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(zh):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(x(aR,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof $_||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?qD:vA;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(zh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,qD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function zB(){return typeof $localize<"u"&&$localize.locale||ef}var wf=new H("",{providedIn:"root",factory:()=>x(wf,ge.Optional|ge.SkipSelf)||zB()});var uy=new H("");function Th(n){return!n.moduleRef}function WB(n){let e=Th(n)?n.r3Injector:n.moduleRef.injector,t=e.get(te);return t.run(()=>{Th(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Fr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:s=>{r.handleError(s)}})}),Th(n)){let s=()=>e.destroy(),o=n.platformInjector.get(uy);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>n.moduleRef.destroy(),o=n.platformInjector.get(uy);o.add(s),n.moduleRef.onDestroy(()=>{Rh(n.allPlatformModules,n.moduleRef),i.unsubscribe(),o.delete(s)})}return jB(r,t,()=>{let s=e.get(IR);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(wf,ef);if(TB(o||ef),Th(n)){let a=e.get(Ks);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return KB(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function KB(n,e){let t=n.injector.get(Ks);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new Q(-403,!1);e.push(n)}var Nh=null;function QB(n=[],e){return Ee.create({name:e,providers:[{provide:sf,useValue:"platform"},{provide:uy,useValue:new Set([()=>Nh=null])},...n]})}function YB(n=[]){if(Nh)return Nh;let e=QB(n);return Nh=e,LB(),ZB(e),e}function ZB(n){n.get(Ly,null)?.forEach(t=>t())}var ns=(()=>{class n{static{this.__NG_ELEMENT_ID__=JB}}return n})();function JB(n){return XB(Sn(),je(),(n&16)===16)}function XB(n,e,t){if(cf(n)&&!t){let r=Zi(n.index,e);return new js(r,r)}else if(n.type&175){let r=e[Or];return new js(r,e)}return null}var ly=class{constructor(){}supports(e){return lR(e)}create(e){return new dy(e)}},e$=(n,e)=>e,dy=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||e$}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){let o=!r||t&&t.currentIndex<uS(r,i,s)?t:r,a=uS(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,d=c-i;if(l!=d){for(let g=0;g<l;g++){let _=g<s.length?s[g]:s[g]=0,w=_+g;d<=w&&w<l&&(s[g]=_+1)}let f=o.previousIndex;s[f]=d-l}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!lR(e))throw new Q(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,s,o,a),r=!0):(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)),t=t._next}else i=0,z2(e,a=>{o=this._trackByFn(i,a),t===null||!Object.is(t.trackById,o)?(t=this._mismatch(t,a,o,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new hy(t,r),s,i)),e}_verifyReinsertion(e,t,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new tf),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new tf),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},hy=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},fy=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},tf=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new fy,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function uS(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function lS(){return new ev([new ly])}var ev=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:lS})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||lS()),deps:[[n,new wS,new se]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new Q(901,!1)}}return n})();function bR(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=YB(r),s=[ER({}),{provide:ma,useExisting:GB},...t||[]],o=new Jh({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return WB({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Fu(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function qe(n,e){Gs("NgSignals");let t=Qb(n);return e?.equal&&(t[Rr].equal=e.equal),t}function er(n){let e=Se(null);try{return n()}finally{Se(e)}}var t$=new H("",{providedIn:"root",factory:()=>x(n$)}),n$=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new py})}}return n})(),py=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=x(qs),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let t=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(t),this.taskId=null})}}enqueue(e){let t=e.creationZone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}},gy=class{constructor(e,t,r,i,s,o){this.scheduler=e,this.effectFn=t,this.creationZone=r,this.injector=s,this.watcher=nD(a=>this.runEffect(a),()=>this.schedule(),o),this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(t){this.injector.get(Fr,null,{optional:!0})?.handleError(t)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function Lu(n,e){Gs("NgSignals"),!e?.injector&&of(Lu);let t=e?.injector??x(Ee),r=e?.manualCleanup!==!0?t.get(Ji):null,i=new gy(t.get(t$),n,typeof Zone>"u"?null:Zone.current,r,t,e?.allowSignalWrites??!1),s=t.get(ns,null,{optional:!0});return!s||!(s._lView[ie]&8)?i.watcher.notify():(s._lView[Dh]??=[]).push(i.watcher.notify),i}var xR=null;function _i(){return xR}function MR(n){xR??=n}var Rf=class{};var nr=new H(""),PR=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>x(s$),providedIn:"platform"})}}return n})();var s$=(()=>{class n extends PR{constructor(){super(),this._doc=x(nr),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return _i().getBaseHref(this._doc)}onPopState(t){let r=_i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=_i().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function OR(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function DR(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Qs(n){return n&&n[0]!=="?"?"?"+n:n}var Mf=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>x(kR),providedIn:"root"})}}return n})(),o$=new H(""),kR=(()=>{class n extends Mf{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??x(nr).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return OR(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Qs(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+Qs(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+Qs(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ne(PR),ne(o$,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Vu=(()=>{class n{constructor(t){this._subject=new St,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=u$(DR(SR(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Qs(r))}normalize(t){return n.stripTrailingSlash(c$(this._basePath,SR(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qs(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Qs(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Qs}static{this.joinWithSlash=OR}static{this.stripTrailingSlash=DR}static{this.\u0275fac=function(r){return new(r||n)(ne(Mf))}}static{this.\u0275prov=$({token:n,factory:()=>a$(),providedIn:"root"})}}return n})();function a$(){return new Vu(ne(Mf))}function c$(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function SR(n){return n.replace(/\/index.html$/,"")}function u$(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var gn=function(n){return n[n.Format=0]="Format",n[n.Standalone=1]="Standalone",n}(gn||{}),Ye=function(n){return n[n.Narrow=0]="Narrow",n[n.Abbreviated=1]="Abbreviated",n[n.Wide=2]="Wide",n[n.Short=3]="Short",n}(Ye||{}),Un=function(n){return n[n.Short=0]="Short",n[n.Medium=1]="Medium",n[n.Long=2]="Long",n[n.Full=3]="Full",n}(Un||{}),rs={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function l$(n){return Xn(n)[Et.LocaleId]}function d$(n,e,t){let r=Xn(n),i=[r[Et.DayPeriodsFormat],r[Et.DayPeriodsStandalone]],s=tr(i,e);return tr(s,t)}function h$(n,e,t){let r=Xn(n),i=[r[Et.DaysFormat],r[Et.DaysStandalone]],s=tr(i,e);return tr(s,t)}function f$(n,e,t){let r=Xn(n),i=[r[Et.MonthsFormat],r[Et.MonthsStandalone]],s=tr(i,e);return tr(s,t)}function p$(n,e){let r=Xn(n)[Et.Eras];return tr(r,e)}function If(n,e){let t=Xn(n);return tr(t[Et.DateFormat],e)}function Ef(n,e){let t=Xn(n);return tr(t[Et.TimeFormat],e)}function Cf(n,e){let r=Xn(n)[Et.DateTimeFormat];return tr(r,e)}function Pf(n,e){let t=Xn(n),r=t[Et.NumberSymbols][e];if(typeof r>"u"){if(e===rs.CurrencyDecimal)return t[Et.NumberSymbols][rs.Decimal];if(e===rs.CurrencyGroup)return t[Et.NumberSymbols][rs.Group]}return r}function FR(n){if(!n[Et.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Et.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function g$(n){let e=Xn(n);return FR(e),(e[Et.ExtraData][2]||[]).map(r=>typeof r=="string"?tv(r):[tv(r[0]),tv(r[1])])}function m$(n,e,t){let r=Xn(n);FR(r);let i=[r[Et.ExtraData][0],r[Et.ExtraData][1]],s=tr(i,e)||[];return tr(s,t)||[]}function tr(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function tv(n){let[e,t]=n.split(":");return{hours:+e,minutes:+t}}var _$=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Tf={},y$=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,mi=function(n){return n[n.Short=0]="Short",n[n.ShortGMT=1]="ShortGMT",n[n.Long=2]="Long",n[n.Extended=3]="Extended",n}(mi||{}),Ve=function(n){return n[n.FullYear=0]="FullYear",n[n.Month=1]="Month",n[n.Date=2]="Date",n[n.Hours=3]="Hours",n[n.Minutes=4]="Minutes",n[n.Seconds=5]="Seconds",n[n.FractionalSeconds=6]="FractionalSeconds",n[n.Day=7]="Day",n}(Ve||{}),Le=function(n){return n[n.DayPeriods=0]="DayPeriods",n[n.Days=1]="Days",n[n.Months=2]="Months",n[n.Eras=3]="Eras",n}(Le||{});function v$(n,e,t,r){let i=A$(n);e=gi(t,e)||e;let o=[],a;for(;e;)if(a=y$.exec(e),a){o=o.concat(a.slice(1));let d=o.pop();if(!d)break;e=d}else{o.push(e);break}let c=i.getTimezoneOffset();r&&(c=VR(r,c),i=S$(i,r,!0));let l="";return o.forEach(d=>{let f=b$(d);l+=f?f(i,t,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Nf(n,e,t){let r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function gi(n,e){let t=l$(n);if(Tf[t]??={},Tf[t][e])return Tf[t][e];let r="";switch(e){case"shortDate":r=If(n,Un.Short);break;case"mediumDate":r=If(n,Un.Medium);break;case"longDate":r=If(n,Un.Long);break;case"fullDate":r=If(n,Un.Full);break;case"shortTime":r=Ef(n,Un.Short);break;case"mediumTime":r=Ef(n,Un.Medium);break;case"longTime":r=Ef(n,Un.Long);break;case"fullTime":r=Ef(n,Un.Full);break;case"short":let i=gi(n,"shortTime"),s=gi(n,"shortDate");r=bf(Cf(n,Un.Short),[i,s]);break;case"medium":let o=gi(n,"mediumTime"),a=gi(n,"mediumDate");r=bf(Cf(n,Un.Medium),[o,a]);break;case"long":let c=gi(n,"longTime"),l=gi(n,"longDate");r=bf(Cf(n,Un.Long),[c,l]);break;case"full":let d=gi(n,"fullTime"),f=gi(n,"fullDate");r=bf(Cf(n,Un.Full),[d,f]);break}return r&&(Tf[t][e]=r),r}function bf(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return e!=null&&r in e?e[r]:t})),n}function mr(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=-n+1:(n=-n,s=t));let o=String(n);for(;o.length<e;)o="0"+o;return r&&(o=o.slice(o.length-e)),s+o}function w$(n,e){return mr(n,3).substring(0,e)}function Nt(n,e,t=0,r=!1,i=!1){return function(s,o){let a=I$(n,s);if((t>0||a>-t)&&(a+=t),n===Ve.Hours)a===0&&t===-12&&(a=12);else if(n===Ve.FractionalSeconds)return w$(a,e);let c=Pf(o,rs.MinusSign);return mr(a,e,c,r,i)}}function I$(n,e){switch(n){case Ve.FullYear:return e.getFullYear();case Ve.Month:return e.getMonth();case Ve.Date:return e.getDate();case Ve.Hours:return e.getHours();case Ve.Minutes:return e.getMinutes();case Ve.Seconds:return e.getSeconds();case Ve.FractionalSeconds:return e.getMilliseconds();case Ve.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}function tt(n,e,t=gn.Format,r=!1){return function(i,s){return E$(i,s,n,e,t,r)}}function E$(n,e,t,r,i,s){switch(t){case Le.Months:return f$(e,i,r)[n.getMonth()];case Le.Days:return h$(e,i,r)[n.getDay()];case Le.DayPeriods:let o=n.getHours(),a=n.getMinutes();if(s){let l=g$(e),d=m$(e,i,r),f=l.findIndex(g=>{if(Array.isArray(g)){let[_,w]=g,R=o>=_.hours&&a>=_.minutes,S=o<w.hours||o===w.hours&&a<w.minutes;if(_.hours<w.hours){if(R&&S)return!0}else if(R||S)return!0}else if(g.hours===o&&g.minutes===a)return!0;return!1});if(f!==-1)return d[f]}return d$(e,i,r)[o<12?0:1];case Le.Eras:return p$(e,r)[n.getFullYear()<=0?0:1];default:let c=t;throw new Error(`unexpected translation type ${c}`)}}function Df(n){return function(e,t,r){let i=-1*r,s=Pf(t,rs.MinusSign),o=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case mi.Short:return(i>=0?"+":"")+mr(o,2,s)+mr(Math.abs(i%60),2,s);case mi.ShortGMT:return"GMT"+(i>=0?"+":"")+mr(o,1,s);case mi.Long:return"GMT"+(i>=0?"+":"")+mr(o,2,s)+":"+mr(Math.abs(i%60),2,s);case mi.Extended:return r===0?"Z":(i>=0?"+":"")+mr(o,2,s)+":"+mr(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}var C$=0,Af=4;function T$(n){let e=Nf(n,C$,1).getDay();return Nf(n,0,1+(e<=Af?Af:Af+7)-e)}function LR(n){let e=n.getDay(),t=e===0?-3:Af-e;return Nf(n.getFullYear(),n.getMonth(),n.getDate()+t)}function nv(n,e=!1){return function(t,r){let i;if(e){let s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,o=t.getDate();i=1+Math.floor((o+s)/7)}else{let s=LR(t),o=T$(s.getFullYear()),a=s.getTime()-o.getTime();i=1+Math.round(a/6048e5)}return mr(i,n,Pf(r,rs.MinusSign))}}function Sf(n,e=!1){return function(t,r){let s=LR(t).getFullYear();return mr(s,n,Pf(r,rs.MinusSign),e)}}var rv={};function b$(n){if(rv[n])return rv[n];let e;switch(n){case"G":case"GG":case"GGG":e=tt(Le.Eras,Ye.Abbreviated);break;case"GGGG":e=tt(Le.Eras,Ye.Wide);break;case"GGGGG":e=tt(Le.Eras,Ye.Narrow);break;case"y":e=Nt(Ve.FullYear,1,0,!1,!0);break;case"yy":e=Nt(Ve.FullYear,2,0,!0,!0);break;case"yyy":e=Nt(Ve.FullYear,3,0,!1,!0);break;case"yyyy":e=Nt(Ve.FullYear,4,0,!1,!0);break;case"Y":e=Sf(1);break;case"YY":e=Sf(2,!0);break;case"YYY":e=Sf(3);break;case"YYYY":e=Sf(4);break;case"M":case"L":e=Nt(Ve.Month,1,1);break;case"MM":case"LL":e=Nt(Ve.Month,2,1);break;case"MMM":e=tt(Le.Months,Ye.Abbreviated);break;case"MMMM":e=tt(Le.Months,Ye.Wide);break;case"MMMMM":e=tt(Le.Months,Ye.Narrow);break;case"LLL":e=tt(Le.Months,Ye.Abbreviated,gn.Standalone);break;case"LLLL":e=tt(Le.Months,Ye.Wide,gn.Standalone);break;case"LLLLL":e=tt(Le.Months,Ye.Narrow,gn.Standalone);break;case"w":e=nv(1);break;case"ww":e=nv(2);break;case"W":e=nv(1,!0);break;case"d":e=Nt(Ve.Date,1);break;case"dd":e=Nt(Ve.Date,2);break;case"c":case"cc":e=Nt(Ve.Day,1);break;case"ccc":e=tt(Le.Days,Ye.Abbreviated,gn.Standalone);break;case"cccc":e=tt(Le.Days,Ye.Wide,gn.Standalone);break;case"ccccc":e=tt(Le.Days,Ye.Narrow,gn.Standalone);break;case"cccccc":e=tt(Le.Days,Ye.Short,gn.Standalone);break;case"E":case"EE":case"EEE":e=tt(Le.Days,Ye.Abbreviated);break;case"EEEE":e=tt(Le.Days,Ye.Wide);break;case"EEEEE":e=tt(Le.Days,Ye.Narrow);break;case"EEEEEE":e=tt(Le.Days,Ye.Short);break;case"a":case"aa":case"aaa":e=tt(Le.DayPeriods,Ye.Abbreviated);break;case"aaaa":e=tt(Le.DayPeriods,Ye.Wide);break;case"aaaaa":e=tt(Le.DayPeriods,Ye.Narrow);break;case"b":case"bb":case"bbb":e=tt(Le.DayPeriods,Ye.Abbreviated,gn.Standalone,!0);break;case"bbbb":e=tt(Le.DayPeriods,Ye.Wide,gn.Standalone,!0);break;case"bbbbb":e=tt(Le.DayPeriods,Ye.Narrow,gn.Standalone,!0);break;case"B":case"BB":case"BBB":e=tt(Le.DayPeriods,Ye.Abbreviated,gn.Format,!0);break;case"BBBB":e=tt(Le.DayPeriods,Ye.Wide,gn.Format,!0);break;case"BBBBB":e=tt(Le.DayPeriods,Ye.Narrow,gn.Format,!0);break;case"h":e=Nt(Ve.Hours,1,-12);break;case"hh":e=Nt(Ve.Hours,2,-12);break;case"H":e=Nt(Ve.Hours,1);break;case"HH":e=Nt(Ve.Hours,2);break;case"m":e=Nt(Ve.Minutes,1);break;case"mm":e=Nt(Ve.Minutes,2);break;case"s":e=Nt(Ve.Seconds,1);break;case"ss":e=Nt(Ve.Seconds,2);break;case"S":e=Nt(Ve.FractionalSeconds,1);break;case"SS":e=Nt(Ve.FractionalSeconds,2);break;case"SSS":e=Nt(Ve.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Df(mi.Short);break;case"ZZZZZ":e=Df(mi.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Df(mi.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Df(mi.Long);break;default:return null}return rv[n]=e,e}function VR(n,e){n=n.replace(/:/g,"");let t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function D$(n,e){return n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+e),n}function S$(n,e,t){let r=t?-1:1,i=n.getTimezoneOffset(),s=VR(e,i);return D$(n,r*(s-i))}function A$(n){if(AR(n))return n;if(typeof n=="number"&&!isNaN(n))return new Date(n);if(typeof n=="string"){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){let[i,s=1,o=1]=n.split("-").map(a=>+a);return Nf(i,s-1,o)}let t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(_$))return R$(r)}let e=new Date(n);if(!AR(e))throw new Error(`Unable to convert "${n}" into a date`);return e}function R$(n){let e=new Date(0),t=0,r=0,i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));let o=Number(n[4]||0)-t,a=Number(n[5]||0)-r,c=Number(n[6]||0),l=Math.floor(parseFloat("0."+(n[7]||0))*1e3);return s.call(e,o,a,c,l),e}function AR(n){return n instanceof Date&&!isNaN(n.valueOf())}function UR(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,s]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var iv=/\s+/,RR=[],Rn=(()=>{class n{constructor(t,r){this._ngEl=t,this._renderer=r,this.initialClasses=RR,this.stateMap=new Map}set klass(t){this.initialClasses=t!=null?t.trim().split(iv):RR}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(iv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(iv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static{this.\u0275fac=function(r){return new(r||n)(we(Lr),we(di))}}static{this.\u0275dir=lt({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return n})();var sv=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ca=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new sv(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),NR(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);NR(s,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(we(Ou),we(Yy),we(ev))}}static{this.\u0275dir=lt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function NR(n,e){n.context.$implicit=e.item}function N$(n,e){return new Q(2100,!1)}var x$="mediumDate",M$=new H(""),P$=new H(""),Of=(()=>{class n{constructor(t,r,i){this.locale=t,this.defaultTimezone=r,this.defaultOptions=i}transform(t,r,i,s){if(t==null||t===""||t!==t)return null;try{let o=r??this.defaultOptions?.dateFormat??x$,a=i??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return v$(t,o,s||this.locale,a)}catch(o){throw N$(n,o.message)}}static{this.\u0275fac=function(r){return new(r||n)(we(wf,16),we(M$,24),we(P$,24))}}static{this.\u0275pipe=DS({name:"date",type:n,pure:!0,standalone:!0})}}return n})();var ov="browser",O$="server";function av(n){return n===ov}function cv(n){return n===O$}var xf=class{};var dv=class extends Rf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hv=class n extends dv{static makeCurrent(){MR(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=k$();return t==null?null:F$(t)}resetBaseElement(){Uu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return UR(document.cookie,e)}},Uu=null;function k$(){return Uu=Uu||document.querySelector("base"),Uu?Uu.getAttribute("href"):null}function F$(n){return new URL(n,document.baseURI).pathname}var L$=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),fv=new H(""),HR=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new Q(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ne(fv),ne(te))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),kf=class{constructor(e){this._doc=e}},uv="ng-app-id",qR=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=cv(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${uv}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(uv),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(uv,this.appId),t.appendChild(o),o}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ne(nr),ne(Fy),ne(Vy,8),ne(gr))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),lv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},gv=/%COMP%/g,GR="%COMP%",V$=`_nghost-${GR}`,U$=`_ngcontent-${GR}`,j$=!0,B$=new H("",{providedIn:"root",factory:()=>j$});function $$(n){return U$.replace(gv,n)}function H$(n){return V$.replace(gv,n)}function zR(n,e){return e.map(t=>t.replace(gv,n))}var jR=(()=>{class n{constructor(t,r,i,s,o,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=cv(a),this.defaultRenderer=new ju(t,o,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Pr.ShadowDom&&(r=ye(j({},r),{encapsulation:Pr.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Ff?i.applyToHost(t):i instanceof Bu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,f=this.platformIsServer;switch(r.encapsulation){case Pr.Emulated:s=new Ff(c,l,r,this.appId,d,o,a,f);break;case Pr.ShadowDom:return new pv(c,l,t,r,o,a,this.nonce,f);default:s=new Bu(c,l,r,d,o,a,f);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ne(HR),ne(qR),ne(Fy),ne(B$),ne(nr),ne(gr),ne(te),ne(Vy))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),ju=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(lv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(BR(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(BR(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new Q(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let s=lv[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=lv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(ii.DashCase|ii.Important)?e.style.setProperty(t,r,i&ii.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&ii.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=_i().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function BR(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var pv=class extends ju{constructor(e,t,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=zR(i.id,i.styles);for(let d of l){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=d,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Bu=class extends ju{constructor(e,t,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=c?zR(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ff=class extends Bu{constructor(e,t,r,i,s,o,a,c){let l=i+"-"+r.id;super(e,t,r,s,o,a,c,l),this.contentAttr=$$(l),this.hostAttr=H$(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},q$=(()=>{class n extends kf{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(ne(nr))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),$R=["alt","control","meta","shift"],G$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z$={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},W$=(()=>{class n extends kf{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_i().onAndCancel(t,s.domEventName,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=n._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),$R.forEach(l=>{let d=r.indexOf(l);d>-1&&(r.splice(d,1),o+=l+".")}),o+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=i,c.fullKey=o,c}static matchEventFullKeyCode(t,r){let i=G$[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$R.forEach(o=>{if(o!==i){let a=z$[o];a(t)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ne(nr))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function WR(n,e){return bR(j({rootComponent:n},K$(e)))}function K$(n){return{appProviders:[...X$,...n?.providers??[]],platformProviders:J$}}function Q$(){hv.makeCurrent()}function Y$(){return new Fr}function Z$(){return DA(document),document}var J$=[{provide:gr,useValue:ov},{provide:Ly,useValue:Q$,multi:!0},{provide:nr,useFactory:Z$,deps:[]}];var X$=[{provide:sf,useValue:"root"},{provide:Fr,useFactory:Y$,deps:[]},{provide:fv,useClass:q$,multi:!0,deps:[nr,te,gr]},{provide:fv,useClass:W$,multi:!0,deps:[nr]},jR,qR,HR,{provide:_a,useExisting:jR},{provide:xf,useClass:L$,deps:[]},[]];var Lf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ne(nr))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var fe="primary",sl=Symbol("RouteTitle"),wv=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ra(n){return new wv(n)}function eH(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=n[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function tH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ur(n[t],e[t]))return!1;return!0}function Ur(n,e){let t=n?Iv(n):void 0,r=e?Iv(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!nN(n[i],e[i]))return!1;return!0}function Iv(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function nN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}else return n===e}function rN(n){return n.length>0?n[n.length-1]:null}function is(n){return i_(n)?n:Ws(n)?ot(Promise.resolve(n)):X(n)}var nH={exact:sN,subset:oN},iN={exact:rH,subset:iH,ignored:()=>!0};function QR(n,e,t){return nH[t.paths](n.root,e.root,t.matrixParams)&&iN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function rH(n,e){return Ur(n,e)}function sN(n,e,t){if(!Zs(n.segments,e.segments)||!jf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!sN(n.children[r],e.children[r],t))return!1;return!0}function iH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nN(n[t],e[t]))}function oN(n,e,t){return aN(n,e,e.segments,t)}function aN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Zs(i,t)||e.hasChildren()||!jf(i,t,r))}else if(n.segments.length===t.length){if(!Zs(n.segments,t)||!jf(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!oN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Zs(n.segments,i)||!jf(n.segments,i,r)||!n.children[fe]?!1:aN(n.children[fe],e,s,r)}}function jf(n,e,t){return e.every((r,i)=>iN[t](n[i].parameters,r.parameters))}var vi=class{constructor(e=new Ue([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ra(this.queryParams),this._queryParamMap}toString(){return aH.serialize(this)}},Ue=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Bf(this)}},Ys=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ra(this.parameters),this._parameterMap}toString(){return uN(this)}};function sH(n,e){return Zs(n,e)&&n.every((t,r)=>Ur(t.parameters,e[r].parameters))}function Zs(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function oH(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===fe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==fe&&(t=t.concat(e(i,r)))}),t}var zv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new Ku,providedIn:"root"})}}return n})(),Ku=class{parse(e){let t=new Cv(e);return new vi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${$u(e.root,!0)}`,r=lH(e.queryParams),i=typeof e.fragment=="string"?`#${cH(e.fragment)}`:"";return`${t}${r}${i}`}},aH=new Ku;function Bf(n){return n.segments.map(e=>uN(e)).join("/")}function $u(n,e){if(!n.hasChildren())return Bf(n);if(e){let t=n.children[fe]?$u(n.children[fe],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==fe&&r.push(`${i}:${$u(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=oH(n,(r,i)=>i===fe?[$u(n.children[fe],!1)]:[`${i}:${$u(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[fe]!=null?`${Bf(n)}/${t[0]}`:`${Bf(n)}/(${t.join("//")})`}}function cN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Vf(n){return cN(n).replace(/%3B/gi,";")}function cH(n){return encodeURI(n)}function Ev(n){return cN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $f(n){return decodeURIComponent(n)}function YR(n){return $f(n.replace(/\+/g,"%20"))}function uN(n){return`${Ev(n.path)}${uH(n.parameters)}`}function uH(n){return Object.entries(n).map(([e,t])=>`;${Ev(e)}=${Ev(t)}`).join("")}function lH(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Vf(t)}=${Vf(i)}`).join("&"):`${Vf(t)}=${Vf(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var dH=/^[^\/()?;#]+/;function mv(n){let e=n.match(dH);return e?e[0]:""}var hH=/^[^\/()?;=#]+/;function fH(n){let e=n.match(hH);return e?e[0]:""}var pH=/^[^=?&#]+/;function gH(n){let e=n.match(pH);return e?e[0]:""}var mH=/^[^&#]+/;function _H(n){let e=n.match(mH);return e?e[0]:""}var Cv=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ue([],{}):new Ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[fe]=new Ue(e,t)),r}parseSegment(){let e=mv(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Q(4009,!1);return this.capture(e),new Ys($f(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=fH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=mv(this.remaining);i&&(r=i,this.capture(r))}e[$f(t)]=$f(r)}parseQueryParam(e){let t=gH(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=_H(this.remaining);o&&(r=o,this.capture(r))}let i=YR(t),s=YR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=mv(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Q(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=fe);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[fe]:new Ue([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Q(4011,!1)}};function lN(n){return n.segments.length>0?new Ue([],{[fe]:n}):n}function dN(n){let e={};for(let[r,i]of Object.entries(n.children)){let s=dN(i);if(r===fe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let t=new Ue(n.segments,e);return yH(t)}function yH(n){if(n.numberOfChildren===1&&n.children[fe]){let e=n.children[fe];return new Ue(n.segments.concat(e.segments),e.children)}return n}function Qu(n){return n instanceof vi}function vH(n,e,t=null,r=null){let i=hN(n);return fN(i,e,t,r)}function hN(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new Ue(s.url,o);return s===n&&(e=a),a}let r=t(n.root),i=lN(r);return e??i}function fN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return _v(i,i,i,t,r);let s=wH(e);if(s.toRoot())return _v(i,i,new Ue([],{}),t,r);let o=IH(s,i,n),a=o.processChildren?Gu(o.segmentGroup,o.index,s.commands):gN(o.segmentGroup,o.index,s.commands);return _v(i,o.segmentGroup,a,t,r)}function Hf(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Yu(n){return typeof n=="object"&&n!=null&&n.outlets}function _v(n,e,t,r,i){let s={};r&&Object.entries(r).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===e?o=t:o=pN(n,e,t);let a=lN(dN(o));return new vi(a,s,i)}function pN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,s])=>{s===e?r[i]=t:r[i]=pN(s,e,t)}),new Ue(n.segments,r)}var qf=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Hf(r[0]))throw new Q(4003,!1);let i=r.find(Yu);if(i&&i!==rN(r))throw new Q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wH(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new qf(!0,0,n);let e=0,t=!1,r=n.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new qf(t,e,r)}var Da=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function IH(n,e,t){if(n.isAbsolute)return new Da(e,!0,0);if(!t)return new Da(e,!1,NaN);if(t.parent===null)return new Da(t,!0,0);let r=Hf(n.commands[0])?0:1,i=t.segments.length-1+r;return EH(t,i,n.numberOfDoubleDots)}function EH(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Q(4005,!1);i=r.segments.length}return new Da(r,!1,i-s)}function CH(n){return Yu(n[0])?n[0].outlets:{[fe]:n}}function gN(n,e,t){if(n??=new Ue([],{}),n.segments.length===0&&n.hasChildren())return Gu(n,e,t);let r=TH(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let s=new Ue(n.segments.slice(0,r.pathIndex),{});return s.children[fe]=new Ue(n.segments.slice(r.pathIndex),n.children),Gu(s,0,i)}else return r.match&&i.length===0?new Ue(n.segments,{}):r.match&&!n.hasChildren()?Tv(n,e,t):r.match?Gu(n,0,i):Tv(n,e,t)}function Gu(n,e,t){if(t.length===0)return new Ue(n.segments,{});{let r=CH(t),i={};if(Object.keys(r).some(s=>s!==fe)&&n.children[fe]&&n.numberOfChildren===1&&n.children[fe].segments.length===0){let s=Gu(n.children[fe],e,t);return new Ue(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=gN(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ue(n.segments,i)}}function TH(n,e,t){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;let o=n.segments[i],a=t[r];if(Yu(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!JR(c,l,o))return s;r+=2}else{if(!JR(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Tv(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let s=t[i];if(Yu(s)){let c=bH(s.outlets);return new Ue(r,c)}if(i===0&&Hf(t[0])){let c=n.segments[e];r.push(new Ys(c.path,ZR(t[0]))),i++;continue}let o=Yu(s)?s.outlets[fe]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Hf(a)?(r.push(new Ys(o,ZR(a))),i+=2):(r.push(new Ys(o,{})),i++)}return new Ue(r,{})}function bH(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Tv(new Ue([],{}),0,r))}),e}function ZR(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function JR(n,e,t){return n==t.path&&Ur(e,t.parameters)}var zu="imperative",zt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(zt||{}),rr=class{constructor(e,t){this.id=e,this.url=t}},Zu=class extends rr{constructor(e,t,r="imperative",i=null){super(e,t),this.type=zt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Js=class extends rr{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=zt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Bn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Bn||{}),bv=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(bv||{}),yi=class extends rr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=zt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xs=class extends rr{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=zt.NavigationSkipped}},Ju=class extends rr{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=zt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Gf=class extends rr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Dv=class extends rr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sv=class extends rr{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=zt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Av=class extends rr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Rv=class extends rr{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=zt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Nv=class{constructor(e){this.route=e,this.type=zt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},xv=class{constructor(e){this.route=e,this.type=zt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Mv=class{constructor(e){this.snapshot=e,this.type=zt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Pv=class{constructor(e){this.snapshot=e,this.type=zt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ov=class{constructor(e){this.snapshot=e,this.type=zt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xu=class{constructor(e){this.snapshot=e,this.type=zt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var el=class{},Na=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function DH(n,e){return n.providers&&!n._injector&&(n._injector=Zy(n.providers,e,`Route: ${n.path}`)),n._injector??e}function _r(n){return n.outlet||fe}function SH(n,e){let t=n.filter(r=>_r(r)===e);return t.push(...n.filter(r=>_r(r)!==e)),t}function ol(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var kv=class{get injector(){return ol(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Jf(this.rootInjector),this.attachRef=null}},Jf=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kv(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ne(Kn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Fv(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Fv(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Lv(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Lv(e,this._root).map(t=>t.value)}};function Fv(n,e){if(n===e.value)return e;for(let t of e.children){let r=Fv(n,t);if(r)return r}return null}function Lv(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Lv(n,t);if(r.length)return r.unshift(e),r}return[]}var jn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ba(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Wf=class extends zf{constructor(e,t){super(e),this.snapshot=t,Wv(this,e)}toString(){return this.snapshot.toString()}};function mN(n){let e=AH(n),t=new Gt([new Ys("",{})]),r=new Gt({}),i=new Gt({}),s=new Gt({}),o=new Gt(""),a=new xa(t,r,s,o,i,fe,n,e.root);return a.snapshot=e.root,new Wf(new jn(a,[]),e)}function AH(n){let e={},t={},r={},i="",s=new Sa([],e,r,i,t,fe,n,null,{});return new Qf("",new jn(s,[]))}var xa=class{constructor(e,t,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(K(l=>l[sl]))??X(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(K(e=>Ra(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(K(e=>Ra(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Kf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),n.params),data:j(j({},e.data),n.data),resolve:j(j(j(j({},n.data),e.data),i?.data),n._resolvedData)}:r={params:j({},n.params),data:j({},n.data),resolve:j(j({},n.data),n._resolvedData??{})},i&&yN(i)&&(r.resolve[sl]=i.title),r}var Sa=class{get title(){return this.data?.[sl]}constructor(e,t,r,i,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ra(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ra(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Qf=class extends zf{constructor(e,t){super(t),this.url=e,Wv(this,t)}toString(){return _N(this._root)}};function Wv(n,e){e.value._routerState=n,e.children.forEach(t=>Wv(n,t))}function _N(n){let e=n.children.length>0?` { ${n.children.map(_N).join(", ")} } `:"";return`${n.value}${e}`}function yv(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ur(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ur(e.params,t.params)||n.paramsSubject.next(t.params),tH(e.url,t.url)||n.urlSubject.next(t.url),Ur(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Vv(n,e){let t=Ur(n.params,e.params)&&sH(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Vv(n.parent,e.parent))}function yN(n){return typeof n.title=="string"||n.title===null}var Kv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=fe,this.activateEvents=new St,this.deactivateEvents=new St,this.attachEvents=new St,this.detachEvents=new St,this.parentContexts=x(Jf),this.location=x(Ou),this.changeDetector=x(ns),this.inputBinder=x(Qv,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Q(4013,!1);this._activatedRoute=t;let i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Uv(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=lt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[li]})}}return n})(),Uv=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===xa?this.route:e===Jf?this.childContexts:this.parent.get(e,t)}},Qv=new H("");function RH(n,e,t){let r=tl(n,e._root,t?t._root:void 0);return new Wf(r,e)}function tl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=NH(n,e,t);return new jn(r,i)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>tl(n,a)),o}}let r=xH(e.value),i=e.children.map(s=>tl(n,s));return new jn(r,i)}}function NH(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return tl(n,r,i);return tl(n,r)})}function xH(n){return new xa(new Gt(n.url),new Gt(n.params),new Gt(n.queryParams),new Gt(n.fragment),new Gt(n.data),n.outlet,n.component,n)}var nl=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},vN="ngNavigationCancelingError";function Yf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Qu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wN(!1,Bn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function wN(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[vN]=!0,t.cancellationCode=e,t}function MH(n){return IN(n)&&Qu(n.url)}function IN(n){return!!n&&n[vN]}var PH=(n,e,t,r)=>K(i=>(new jv(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),jv=class{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yv(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ba(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ba(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=ba(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ba(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Xu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Pv(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,s=t?t.value:null;if(yv(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),yv(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},Zf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Aa=class{constructor(e,t){this.component=e,this.route=t}};function OH(n,e,t){let r=n._root,i=e?e._root:null;return Hu(r,i,t,[r.value])}function kH(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Pa(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!fS(n)?n:e.get(n):r}function Hu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ba(e);return n.children.forEach(o=>{FH(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wu(a,t.getContext(o),i)),i}function FH(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=LH(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Zf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Hu(n,e,a?a.children:null,r,i):Hu(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Aa(a.outlet.component,o))}else o&&Wu(e,a,i),i.canActivateChecks.push(new Zf(r)),s.component?Hu(n,null,a?a.children:null,r,i):Hu(n,null,t,r,i);return i}function LH(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Zs(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Zs(n.url,e.url)||!Ur(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vv(n,e)||!Ur(n.queryParams,e.queryParams);case"paramsChange":default:return!Vv(n,e)}}function Wu(n,e,t){let r=ba(n),i=n.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Wu(o,e.children.getContext(s),t):Wu(o,null,t):Wu(o,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Aa(e.outlet.component,i)):t.canDeactivateChecks.push(new Aa(null,i)):t.canDeactivateChecks.push(new Aa(null,i))}function al(n){return typeof n=="function"}function VH(n){return typeof n=="boolean"}function UH(n){return n&&al(n.canLoad)}function jH(n){return n&&al(n.canActivate)}function BH(n){return n&&al(n.canActivateChild)}function $H(n){return n&&al(n.canDeactivate)}function HH(n){return n&&al(n.canMatch)}function EN(n){return n instanceof ti||n?.name==="EmptyError"}var Uf=Symbol("INITIAL_VALUE");function Ma(){return In(n=>Je(n.map(e=>e.pipe(ni(1),ra(Uf)))).pipe(K(e=>{for(let t of e)if(t!==!0){if(t===Uf)return Uf;if(t===!1||qH(t))return t}return!0}),hn(e=>e!==Uf),ni(1)))}function qH(n){return Qu(n)||n instanceof nl}function GH(n,e){return It(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?X(ye(j({},t),{guardsResult:!0})):zH(o,r,i,n).pipe(It(a=>a&&VH(a)?WH(r,s,n,e):X(a)),K(a=>ye(j({},t),{guardsResult:a})))})}function zH(n,e,t,r){return ot(n).pipe(It(i=>JH(i.component,i.route,t,e,r)),Nr(i=>i!==!0,!0))}function WH(n,e,t,r){return ot(e).pipe(Ns(i=>ta(QH(i.route.parent,r),KH(i.route,r),ZH(n,i.path,t),YH(n,i.route,t))),Nr(i=>i!==!0,!0))}function KH(n,e){return n!==null&&e&&e(new Ov(n)),X(!0)}function QH(n,e){return n!==null&&e&&e(new Mv(n)),X(!0)}function YH(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return X(!0);let i=r.map(s=>mh(()=>{let o=ol(e)??t,a=Pa(s,o),c=jH(a)?a.canActivate(e,n):ai(o,()=>a(e,n));return is(c).pipe(Nr())}));return X(i).pipe(Ma())}function ZH(n,e,t){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>kH(o)).filter(o=>o!==null).map(o=>mh(()=>{let a=o.guards.map(c=>{let l=ol(o.node)??t,d=Pa(c,l),f=BH(d)?d.canActivateChild(r,n):ai(l,()=>d(r,n));return is(f).pipe(Nr())});return X(a).pipe(Ma())}));return X(s).pipe(Ma())}function JH(n,e,t,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let c=ol(e)??i,l=Pa(a,c),d=$H(l)?l.canDeactivate(n,e,t,r):ai(c,()=>l(n,e,t,r));return is(d).pipe(Nr())});return X(o).pipe(Ma())}function XH(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return X(!0);let s=i.map(o=>{let a=Pa(o,n),c=UH(a)?a.canLoad(e,t):ai(n,()=>a(e,t));return is(c)});return X(s).pipe(Ma(),CN(r))}function CN(n){return Yd(Lt(e=>{if(typeof e!="boolean")throw Yf(n,e)}),K(e=>e===!0))}function eq(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return X(!0);let s=i.map(o=>{let a=Pa(o,n),c=HH(a)?a.canMatch(e,t):ai(n,()=>a(e,t));return is(c)});return X(s).pipe(Ma(),CN(r))}var rl=class{constructor(e){this.segmentGroup=e||null}},il=class extends Error{constructor(e){super(),this.urlTree=e}};function Ta(n){return ea(new rl(n))}function tq(n){return ea(new Q(4e3,!1))}function nq(n){return ea(wN(!1,Bn.GuardRejected))}var Bv=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return X(r);if(i.numberOfChildren>1||!i.children[fe])return tq(`${e.redirectTo}`);i=i.children[fe]}}applyRedirectCommands(e,t,r,i,s){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,params:_,data:w,title:R}=i,S=ai(s,()=>a({params:_,data:w,queryParams:c,fragment:l,routeConfig:d,url:f,outlet:g,title:R}));if(S instanceof vi)throw new il(S);t=S}let o=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new il(o);return o}applyRedirectCreateUrlTree(e,t,r,i){let s=this.createSegmentGroup(e,t.root,r,i);return new vi(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){let s=this.createSegments(e,t.segments,r,i),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new Ue(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Q(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},$v={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rq(n,e,t,r,i){let s=TN(n,e,t);return s.matched?(r=DH(e,r),eq(r,e,t,i).pipe(K(o=>o===!0?s:j({},$v)))):X(s)}function TN(n,e,t){if(e.path==="**")return iq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?j({},$v):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||eH)(t,n,e);if(!i)return j({},$v);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?j(j({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function iq(n){return{matched:!0,parameters:n.length>0?rN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function XR(n,e,t,r){return t.length>0&&aq(n,t,r)?{segmentGroup:new Ue(e,oq(r,new Ue(t,n.children))),slicedSegments:[]}:t.length===0&&cq(n,t,r)?{segmentGroup:new Ue(n.segments,sq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Ue(n.segments,n.children),slicedSegments:t}}function sq(n,e,t,r){let i={};for(let s of t)if(Xf(n,e,s)&&!r[_r(s)]){let o=new Ue([],{});i[_r(s)]=o}return j(j({},r),i)}function oq(n,e){let t={};t[fe]=e;for(let r of n)if(r.path===""&&_r(r)!==fe){let i=new Ue([],{});t[_r(r)]=i}return t}function aq(n,e,t){return t.some(r=>Xf(n,e,r)&&_r(r)!==fe)}function cq(n,e,t){return t.some(r=>Xf(n,e,r))}function Xf(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function uq(n,e,t){return e.length===0&&!n.children[t]}var Hv=class{};function lq(n,e,t,r,i,s,o="emptyOnly"){return new qv(n,e,t,r,i,o,s).recognize()}var dq=31,qv=class{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Bv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Q(4002,`'${e.segmentGroup}'`)}recognize(){let e=XR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(K(({children:t,rootSnapshot:r})=>{let i=new jn(r,t),s=new Qf("",i),o=vH(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let t=new Sa([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,fe,t).pipe(K(r=>({children:r,rootSnapshot:t})),$i(r=>{if(r instanceof il)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof rl?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,s):this.processSegment(e,t,r,r.segments,i,!0,s).pipe(K(o=>o instanceof jn?[o]:[]))}processChildren(e,t,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ot(s).pipe(Ns(o=>{let a=r.children[o],c=SH(t,o);return this.processSegmentGroup(e,c,a,o,i)}),wh((o,a)=>(o.push(...a),o)),Hi(null),l_(),It(o=>{if(o===null)return Ta(r);let a=bN(o);return hq(a),X(a)}))}processSegment(e,t,r,i,s,o,a){return ot(t).pipe(Ns(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,s,o,a).pipe($i(l=>{if(l instanceof rl)return X(null);throw l}))),Nr(c=>!!c),$i(c=>{if(EN(c))return uq(r,i,s)?X(new Hv):Ta(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,s,o,a,c){return _r(r)!==o&&(o===fe||!Xf(i,s,r))?Ta(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o,c):Ta(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o,a){let{matched:c,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:g}=TN(t,i,s);if(!c)return Ta(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>dq&&(this.allowRedirects=!1));let _=new Sa(s,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,eN(i),_r(i),i.component??i._loadedComponent??null,i,tN(i)),w=Kf(_,a,this.paramsInheritanceStrategy);_.params=Object.freeze(w.params),_.data=Object.freeze(w.data);let R=this.applyRedirects.applyRedirectCommands(d,i.redirectTo,f,_,e);return this.applyRedirects.lineralizeSegments(i,R).pipe(It(S=>this.processSegment(e,r,t,S.concat(g),o,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a=rq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(In(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(In(({routes:l})=>{let d=r._loadedInjector??e,{parameters:f,consumedSegments:g,remainingSegments:_}=c,w=new Sa(g,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,eN(r),_r(r),r.component??r._loadedComponent??null,r,tN(r)),R=Kf(w,o,this.paramsInheritanceStrategy);w.params=Object.freeze(R.params),w.data=Object.freeze(R.data);let{segmentGroup:S,slicedSegments:F}=XR(t,g,_,l);if(F.length===0&&S.hasChildren())return this.processChildren(d,l,S,w).pipe(K(W=>new jn(w,W)));if(l.length===0&&F.length===0)return X(new jn(w,[]));let q=_r(r)===s;return this.processSegment(d,l,S,F,q?fe:s,!0,w).pipe(K(W=>new jn(w,W instanceof jn?[W]:[])))}))):Ta(t)))}getChildConfig(e,t,r){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):XH(e,t,r,this.urlSerializer).pipe(It(i=>i?this.configLoader.loadChildren(e,t).pipe(Lt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):nq(t))):X({routes:[],injector:e})}};function hq(n){n.sort((e,t)=>e.value.outlet===fe?-1:t.value.outlet===fe?1:e.value.outlet.localeCompare(t.value.outlet))}function fq(n){let e=n.value.routeConfig;return e&&e.path===""}function bN(n){let e=[],t=new Set;for(let r of n){if(!fq(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=bN(r.children);e.push(new jn(r.value,i))}return e.filter(r=>!t.has(r))}function eN(n){return n.data||{}}function tN(n){return n.resolve||{}}function pq(n,e,t,r,i,s){return It(o=>lq(n,e,t,r,o.extractedUrl,i,s).pipe(K(({state:a,tree:c})=>ye(j({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function gq(n,e){return It(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return X(t);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of DN(c))o.add(l);let a=0;return ot(o).pipe(Ns(c=>s.has(c)?mq(c,r,n,e):(c.data=Kf(c,c.parent,n).resolve,X(void 0))),Lt(()=>a++),na(1),It(c=>a===o.size?X(t):Ln))})}function DN(n){let e=n.children.map(t=>DN(t)).flat();return[n,...e]}function mq(n,e,t,r){let i=n.routeConfig,s=n._resolve;return i?.title!==void 0&&!yN(i)&&(s[sl]=i.title),_q(s,n,e,r).pipe(K(o=>(n._resolvedData=o,n.data=Kf(n,n.parent,t).resolve,null)))}function _q(n,e,t,r){let i=Iv(n);if(i.length===0)return X({});let s={};return ot(i).pipe(It(o=>yq(n[o],e,t,r).pipe(Nr(),Lt(a=>{if(a instanceof nl)throw Yf(new Ku,a);s[o]=a}))),na(1),c_(s),$i(o=>EN(o)?Ln:ea(o)))}function yq(n,e,t,r){let i=ol(e)??r,s=Pa(n,i),o=s.resolve?s.resolve(e,t):ai(i,()=>s(e,t));return is(o)}function vv(n){return In(e=>{let t=n(e);return t?ot(t).pipe(K(()=>e)):X(e)})}var SN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===fe);return r}getResolvedTitleForRoute(t){return t.data[sl]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>x(vq),providedIn:"root"})}}return n})(),vq=(()=>{class n extends SN{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ne(Lf))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yv=new H("",{providedIn:"root",factory:()=>({})}),Zv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=At({type:n,selectors:[["ng-component"]],standalone:!0,features:[Rt],decls:1,vars:0,template:function(r,i){r&1&&Ie(0,"router-outlet")},dependencies:[Kv],encapsulation:2})}}return n})();function Jv(n){let e=n.children&&n.children.map(Jv),t=e?ye(j({},n),{children:e}):j({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==fe&&(t.component=Zv),t}var Xv=new H(""),wq=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=x(Xy)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return X(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=is(t.loadComponent()).pipe(K(AN),Lt(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),yu(()=>{this.componentLoaders.delete(t)})),i=new Qo(r,()=>new ut).pipe(Ko());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=Iq(r,this.compiler,t,this.onLoadEndListener).pipe(yu(()=>{this.childrenLoaders.delete(r)})),o=new Qo(s,()=>new ut).pipe(Ko());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Iq(n,e,t,r){return is(n.loadChildren()).pipe(K(AN),It(i=>i instanceof Au||Array.isArray(i)?X(i):ot(e.compileModuleAsync(i))),K(i=>{r&&r(n);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(t).injector,o=s.get(Xv,[],{optional:!0,self:!0}).flat()),{routes:o.map(Jv),injector:s}}))}function Eq(n){return n&&typeof n=="object"&&"default"in n}function AN(n){return Eq(n)?n.default:n}var ew=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>x(Cq),providedIn:"root"})}}return n})(),Cq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Tq=new H("");var bq=new H(""),Dq=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ut,this.transitionAbortSubject=new ut,this.configLoader=x(wq),this.environmentInjector=x(Kn),this.urlSerializer=x(zv),this.rootContexts=x(Jf),this.location=x(Vu),this.inputBindingEnabled=x(Qv,{optional:!0})!==null,this.titleStrategy=x(SN),this.options=x(Yv,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=x(ew),this.createViewTransition=x(Tq,{optional:!0}),this.navigationErrorHandler=x(bq,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Nv(i)),r=i=>this.events.next(new xv(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(ye(j(j({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Gt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:zu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hn(s=>s.id!==0),K(s=>ye(j({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),In(s=>{let o=!1,a=!1;return X(s).pipe(In(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Bn.SupersededByNewNavigation),Ln;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ye(j({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&d!=="reload"){let f="";return this.events.next(new Xs(c.id,this.urlSerializer.serialize(c.rawUrl),f,bv.IgnoredSameUrlNavigation)),c.resolve(!1),Ln}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return X(c).pipe(In(f=>{let g=this.transitions?.getValue();return this.events.next(new Zu(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Ln:Promise.resolve(f)}),pq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Lt(f=>{s.targetSnapshot=f.targetSnapshot,s.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation=ye(j({},this.currentNavigation),{finalUrl:f.urlAfterRedirects});let g=new Gf(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:f,extractedUrl:g,source:_,restoredState:w,extras:R}=c,S=new Zu(f,this.urlSerializer.serialize(g),_,w);this.events.next(S);let F=mN(this.rootComponentType).snapshot;return this.currentTransition=s=ye(j({},c),{targetSnapshot:F,urlAfterRedirects:g,extras:ye(j({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,X(s)}else{let f="";return this.events.next(new Xs(c.id,this.urlSerializer.serialize(c.extractedUrl),f,bv.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ln}}),Lt(c=>{let l=new Dv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),K(c=>(this.currentTransition=s=ye(j({},c),{guards:OH(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),GH(this.environmentInjector,c=>this.events.next(c)),Lt(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Yf(this.urlSerializer,c.guardsResult);let l=new Sv(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),hn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Bn.GuardRejected),!1)),vv(c=>{if(c.guards.canActivateChecks.length)return X(c).pipe(Lt(l=>{let d=new Av(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),In(l=>{let d=!1;return X(l).pipe(gq(this.paramsInheritanceStrategy,this.environmentInjector),Lt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",Bn.NoDataFromResolver)}}))}),Lt(l=>{let d=new Rv(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),vv(c=>{let l=d=>{let f=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&f.push(this.configLoader.loadComponent(d.routeConfig).pipe(Lt(g=>{d.component=g}),K(()=>{})));for(let g of d.children)f.push(...l(g));return f};return Je(l(c.targetSnapshot.root)).pipe(Hi(null),ni(1))}),vv(()=>this.afterPreactivation()),In(()=>{let{currentSnapshot:c,targetSnapshot:l}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?ot(d).pipe(K(()=>s)):X(s)}),K(c=>{let l=RH(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ye(j({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,s}),Lt(()=>{this.events.next(new el)}),PH(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ni(1),Lt({next:c=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Js(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{o=!0}}),jt(this.transitionAbortSubject.pipe(Lt(c=>{throw c}))),yu(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Bn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),$i(c=>{if(a=!0,IN(c))this.events.next(new yi(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),MH(c)?this.events.next(new Na(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let l=new Ju(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=ai(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(d instanceof nl){let{message:f,cancellationCode:g}=Yf(this.urlSerializer,d);this.events.next(new yi(s.id,this.urlSerializer.serialize(s.extractedUrl),f,g)),this.events.next(new Na(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(l);let f=t.errorHandler(c);s.resolve(!!f)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return Ln}))}))}cancelNavigationTransition(t,r,i){let s=new yi(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Sq(n){return n!==zu}var Aq=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>x(Rq),providedIn:"root"})}}return n})(),Gv=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Rq=(()=>{class n extends Gv{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),RN=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>x(Nq),providedIn:"root"})}}return n})(),Nq=(()=>{class n extends RN{constructor(){super(...arguments),this.location=x(Vu),this.urlSerializer=x(zv),this.options=x(Yv,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=x(ew),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new vi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=mN(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Zu)this.stateMemento=this.createStateMemento();else if(t instanceof Xs)this.rawUrlTree=r.initialUrl;else if(t instanceof Gf){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof el?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof yi&&(t.code===Bn.GuardRejected||t.code===Bn.NoDataFromResolver)?this.restoreHistory(r):t instanceof Ju?this.restoreHistory(r,!0):t instanceof Js&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof vi?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=j(j({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=j(j({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qu=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(qu||{});function xq(n,e){n.events.pipe(hn(t=>t instanceof Js||t instanceof yi||t instanceof Ju||t instanceof Xs),K(t=>t instanceof Js||t instanceof Xs?qu.COMPLETE:(t instanceof yi?t.code===Bn.Redirect||t.code===Bn.SupersededByNewNavigation:!1)?qu.REDIRECTING:qu.FAILED),hn(t=>t!==qu.REDIRECTING),ni(1)).subscribe(()=>{e()})}function Mq(n){throw n}var Pq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ep=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=x(vf),this.stateManager=x(RN),this.options=x(Yv,{optional:!0})||{},this.pendingTasks=x(qs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=x(Dq),this.urlSerializer=x(zv),this.location=x(Vu),this.urlHandlingStrategy=x(ew),this._events=new ut,this.errorHandler=this.options.errorHandler||Mq,this.navigated=!1,this.routeReuseStrategy=x(Aq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=x(Xv,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!x(Qv,{optional:!0}),this.eventsSubscription=new gt,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof yi&&r.code!==Bn.Redirect&&r.code!==Bn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Js)this.navigated=!0;else if(r instanceof Na){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Sq(i.source)},o);this.scheduleNavigation(a,zu,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Fq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=j({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Jv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:o,d=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":d=j(j({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let f;try{let g=i?i.snapshot:this.routerState.snapshot.root;f=hN(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),f=this.currentUrlTree.root}return fN(f,t,d,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Qu(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,zu,null,r)}navigate(t,r={skipLocationChange:!1}){return kq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=j({},Pq):r===!1?i=j({},Oq):i=r,Qu(t))return QR(this.currentUrlTree,t,i);let s=this.parseUrl(t);return QR(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,c,l;o?(a=o.resolve,c=o.reject,l=o.promise):l=new Promise((f,g)=>{a=f,c=g});let d=this.pendingTasks.add();return xq(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(f=>Promise.reject(f))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function kq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Q(4008,!1)}function Fq(n){return!(n instanceof el)&&!(n instanceof Na)}var Lq=new H("");function NN(n,...e){return Xe([{provide:Xv,multi:!0,useValue:n},[],{provide:xa,useFactory:Vq,deps:[ep]},{provide:Jy,multi:!0,useFactory:Uq},e.map(t=>t.\u0275providers)])}function Vq(n){return n.routerState.root}function Uq(){let n=x(Ee);return e=>{let t=n.get(Ks);if(e!==t.components[0])return;let r=n.get(ep),i=n.get(jq);n.get(Bq)===1&&r.initialNavigation(),n.get($q,null,ge.Optional)?.setUpPreloading(),n.get(Lq,null,ge.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var jq=new H("",{factory:()=>new ut}),Bq=new H("",{providedIn:"root",factory:()=>1});var $q=new H("");var xN=[];var qq="firebase",Gq="10.14.1";Y(qq,Gq,"app");var rt=new oi("ANGULARFIRE2_VERSION"),ka=n=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${n} in the constructor, first ensure that ${n} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${n})\`.`;function xt(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ct=(n,e)=>{let t=e?[e]:Vd(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Nn=class{constructor(){return Ct(zq)}},zq="app-check";function Oa(){}var tp=class{zone;delegate;constructor(e,t=n_){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,t,r)}},tw=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oa,{},Oa,Oa)),t.pipe(Lt({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},_t=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new tp(Zone.current)),this.insideAngular=t.run(()=>new tp(Zone.current,Xo)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ne(te))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function np(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function Wq(n){return np().ngZone.runOutsideAngular(()=>n())}function eo(n){return np().ngZone.run(()=>n())}function Kq(n){return Qq(np())(n)}function Qq(n){return function(t){return t=t.lift(new tw(n.ngZone)),t.pipe(Bi(n.outsideAngular),ji(n.insideAngular))}}var Yq=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),eo(()=>n.apply(void 0,r))},Oe=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=eo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oa,{},Oa,Oa))),r[s]=Yq(r[s],t));let i=Wq(()=>n.apply(this,r));if(!e)if(i instanceof ce){let s=np();return i.pipe(Bi(s.outsideAngular),ji(s.insideAngular))}else return eo(()=>i);return i instanceof ce?i.pipe(Kq):i instanceof Promise?eo(()=>new Promise((s,o)=>i.then(a=>eo(()=>s(a)),a=>eo(()=>o(a))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:eo(()=>i)};var it=class{constructor(e){return e}},dt=class{constructor(){return Vd()}};function Zq(n){return n&&n.length===1?n[0]:new it(Dt())}var nw=new H("angularfire2._apps"),Jq={provide:it,useFactory:Zq,deps:[[new se,nw]]},Xq={provide:dt,deps:[[new se,nw]]};function eG(n){return(e,t)=>{let r=t.get(gr);Y("angularfire",rt.full,"core"),Y("angularfire",rt.full,"app"),Y("angular",yR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new it(i)}}function MN(n,...e){return Xe([Jq,Xq,{provide:nw,useFactory:eG(n),multi:!0,deps:[te,Ee,_t,...e]}])}var PN=Oe(Vb,!0);function KN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var QN=KN,YN=new Dr("auth","Firebase",KN());var cp=new Ar("@firebase/auth");function tG(n,...e){cp.logLevel<=Jt.WARN&&cp.warn(`Auth (${vn}): ${n}`,...e)}function ip(n,...e){cp.logLevel<=Jt.ERROR&&cp.error(`Auth (${vn}): ${n}`,...e)}function os(n,...e){throw Ew(n,...e)}function no(n,...e){return Ew(n,...e)}function ZN(n,e,t){let r=Object.assign(Object.assign({},QN()),{[e]:t});return new Dr("auth","Firebase",r).create(e,{appName:n.name})}function to(n){return ZN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ew(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return YN.create(n,...e)}function ae(n,e,...t){if(!n)throw Ew(e,...t)}function wi(n){let e="INTERNAL ASSERTION FAILED: "+n;throw ip(e),new Error(e)}function as(n,e){n||wi(e)}function ow(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function nG(){return ON()==="http:"||ON()==="https:"}function ON(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function rG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nG()||ru()||"connection"in navigator)?navigator.onLine:!0}function iG(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ro=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,as(t>e,"Short delay should be less than long delay!"),this.isMobile=nu()||kd()}get(){return rG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Cw(n,e){as(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var up=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var sG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var oG=new ro(3e4,6e4);function Tw(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function La(s,o,a,c){return y(this,arguments,function*(n,e,t,r,i={}){return JN(n,i,()=>y(this,null,function*(){let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});let f=bs(Object.assign({key:n.config.apiKey},d)).slice(1),g=yield n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);let _=Object.assign({method:e,headers:g},l);return Rb()||(_.referrerPolicy="no-referrer"),up.fetch()(XN(n,n.config.apiHost,t,f),_)}))})}function JN(n,e,t){return y(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},sG),e);try{let i=new aw(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw rp(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rp(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw rp(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw rp(n,"user-disabled",o);let d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw ZN(n,d,l);os(n,d)}}catch(i){if(i instanceof yn)throw i;os(n,"network-request-failed",{message:String(i)})}})}function aG(s,o,a,c){return y(this,arguments,function*(n,e,t,r,i={}){let l=yield La(n,e,t,r,i);return"mfaPendingCredential"in l&&os(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function XN(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Cw(n.config,i):`${n.config.apiScheme}://${i}`}var aw=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(no(this.auth,"network-request-failed")),oG.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function rp(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=no(n,e,r);return i.customData._tokenResponse=t,i}function cG(n,e){return y(this,null,function*(){return La(n,"POST","/v1/accounts:delete",e)})}function ex(n,e){return y(this,null,function*(){return La(n,"POST","/v1/accounts:lookup",e)})}function cl(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bw(n,e=!1){return y(this,null,function*(){let t=De(n),r=yield t.getIdToken(e),i=Dw(r);ae(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:cl(rw(i.auth_time)),issuedAtTime:cl(rw(i.iat)),expirationTime:cl(rw(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function rw(n){return Number(n)*1e3}function Dw(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return ip("JWT malformed, contained fewer than 3 sections"),null;try{let i=Db(t);return i?JSON.parse(i):(ip("Failed to decode base64 JWT payload"),null)}catch(i){return ip("Caught error parsing JWT payload as JSON",i?.toString()),null}}function kN(n){let e=Dw(n);return ae(e,"internal-error"),ae(typeof e.exp<"u","internal-error"),ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function ll(n,e,t=!1){return y(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof yn&&uG(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function uG({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var cw=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>y(this,null,function*(){yield this.iteration()}),t)}iteration(){return y(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var dl=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=cl(this.lastLoginAt),this.creationTime=cl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lp(n){return y(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield ll(n,ex(t,{idToken:r}));ae(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tx(s.providerUserInfo):[],a=lG(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dl(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,f)})}function Sw(n){return y(this,null,function*(){let e=De(n);yield lp(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function lG(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tx(n){return n.map(e=>{var{providerId:t}=e,r=r_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function dG(n,e){return y(this,null,function*(){let t=yield JN(n,{},()=>y(this,null,function*(){let r=bs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,o=XN(n,i,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",up.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function hG(n,e){return y(this,null,function*(){return La(n,"POST","/v2/accounts:revokeToken",Tw(n,e))})}var ul=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ae(e.idToken,"internal-error"),ae(typeof e.idToken<"u","internal-error"),ae(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kN(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ae(e.length!==0,"internal-error");let t=kN(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return y(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return y(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield dG(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,o=new n;return r&&(ae(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ae(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ae(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return wi("not implemented")}};function ss(n,e){ae(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Fa=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=r_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cw(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new dl(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return y(this,null,function*(){let t=yield ll(this,this.stsTokenManager.getToken(this.auth,e));return ae(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return bw(this,e)}reload(){return Sw(this)}_assign(e){this!==e&&(ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return y(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield lp(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return y(this,null,function*(){if(ei(this.auth.app))return Promise.reject(to(this.auth));let e=yield this.getIdToken();return yield ll(this,cG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,o,a,c,l,d;let f=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,_=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(o=t.photoURL)!==null&&o!==void 0?o:void 0,R=(a=t.tenantId)!==null&&a!==void 0?a:void 0,S=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,F=(l=t.createdAt)!==null&&l!==void 0?l:void 0,q=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:W,emailVerified:J,isAnonymous:ze,providerData:ee,stsTokenManager:C}=t;ae(W&&C,e,"internal-error");let v=ul.fromJSON(this.name,C);ae(typeof W=="string",e,"internal-error"),ss(f,e.name),ss(g,e.name),ae(typeof J=="boolean",e,"internal-error"),ae(typeof ze=="boolean",e,"internal-error"),ss(_,e.name),ss(w,e.name),ss(R,e.name),ss(S,e.name),ss(F,e.name),ss(q,e.name);let I=new n({uid:W,auth:e,email:g,emailVerified:J,displayName:f,isAnonymous:ze,photoURL:w,phoneNumber:_,tenantId:R,stsTokenManager:v,createdAt:F,lastLoginAt:q});return ee&&Array.isArray(ee)&&(I.providerData=ee.map(T=>Object.assign({},T))),S&&(I._redirectEventId=S),I}static _fromIdTokenResponse(e,t,r=!1){return y(this,null,function*(){let i=new ul;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lp(s),s})}static _fromGetAccountInfoResponse(e,t,r){return y(this,null,function*(){let i=t.users[0];ae(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?tx(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ul;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new dl(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var FN=new Map;function Ii(n){as(n instanceof Function,"Expected a class definition");let e=FN.get(n);return e?(as(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,FN.set(n,e),e)}var fG=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return y(this,null,function*(){return!0})}_set(t,r){return y(this,null,function*(){this.storage[t]=r})}_get(t){return y(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return y(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),uw=fG;function sp(n,e,t){return`firebase:${n}:${e}:${t}`}var dp=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sp(this.userKey,i.apiKey,s),this.fullPersistenceKey=sp("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return y(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Fa._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return y(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return y(this,null,function*(){if(!t.length)return new n(Ii(uw),e,r);let i=(yield Promise.all(t.map(l=>y(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Ii(uw),o=sp(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let d=yield l._get(o);if(d){let f=Fa._fromJSON(e,d);l!==s&&(a=f),s=l;break}}catch{}let c=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>y(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,r))})}};function LN(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ax(e))return"Blackberry";if(cx(e))return"Webos";if(rx(e))return"Safari";if((e.includes("chrome/")||ix(e))&&!e.includes("edge/"))return"Chrome";if(ox(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function nx(n=Zt()){return/firefox\//i.test(n)}function rx(n=Zt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ix(n=Zt()){return/crios\//i.test(n)}function sx(n=Zt()){return/iemobile/i.test(n)}function ox(n=Zt()){return/android/i.test(n)}function ax(n=Zt()){return/blackberry/i.test(n)}function cx(n=Zt()){return/webos/i.test(n)}function Aw(n=Zt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function pG(n=Zt()){var e;return Aw(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gG(){return Nb()&&document.documentMode===10}function ux(n=Zt()){return Aw(n)||ox(n)||cx(n)||ax(n)||/windows phone/i.test(n)||sx(n)}function lx(n,e=[]){let t;switch(n){case"Browser":t=LN(Zt());break;case"Worker":t=`${LN(Zt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${vn}/${r}`}var lw=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return y(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function mG(t){return y(this,arguments,function*(n,e={}){return La(n,"GET","/v2/passwordPolicy",Tw(n,e))})}var _G=6,dw=class{constructor(e){var t,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:_G,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var hw=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hp(this),this.idTokenSubscription=new hp(this),this.beforeStateQueue=new lw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ii(t)),this._initializationPromise=this.queue(()=>y(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield dp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return y(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return y(this,null,function*(){try{let t=yield ex(this,{idToken:e}),r=yield Fa._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return y(this,null,function*(){var t;if(ei(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ae(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return y(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return y(this,null,function*(){try{yield lp(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=iG()}_delete(){return y(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return y(this,null,function*(){if(ei(this.app))return Promise.reject(to(this));let t=e?De(e):null;return t&&ae(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return y(this,null,function*(){if(!this._deleted)return e&&ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>y(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return y(this,null,function*(){return ei(this.app)?Promise.reject(to(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return ei(this.app)?Promise.reject(to(this)):this.queue(()=>y(this,null,function*(){yield this.assertedPersistence.setPersistence(Ii(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return y(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return y(this,null,function*(){let e=yield mG(this),t=new dw(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Dr("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return y(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield hG(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return y(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return y(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Ii(e)||this._popupRedirectResolver;ae(t,this,"argument-error"),this.redirectPersistenceManager=yield dp.create(this,[Ii(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return y(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>y(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return y(this,null,function*(){if(e===this.currentUser)return this.queue(()=>y(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ae(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return y(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return y(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return y(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&tG(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Rw(n){return De(n)}var hp=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=kb(t=>this.observer=t)}get next(){return ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Nw={loadJS(){return y(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yG(n){Nw=n}function vG(n){return Nw.loadJS(n)}function wG(){return Nw.gapiScript}function dx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function xw(n,e){let t=bt(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(au(s,e??{}))return i;os(i,"already-initialized")}return t.initialize({options:e})}function IG(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Ii);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Mw(n,e,t){let r=Rw(n);ae(r._canInitEmulator,r,"emulator-config-failed"),ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=hx(e),{host:o,port:a}=EG(e),c=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||CG()}function hx(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function EG(n){let e=hx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:VN(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:VN(o)}}}function VN(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function CG(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var fp=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return wi("not implemented")}_getIdTokenResponse(e){return wi("not implemented")}_linkToIdToken(e,t){return wi("not implemented")}_getReauthenticationResolver(e){return wi("not implemented")}};function iw(n,e){return y(this,null,function*(){return aG(n,"POST","/v1/accounts:signInWithIdp",Tw(n,e))})}var pp=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var fw=class extends pp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var hl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return y(this,null,function*(){let s=yield Fa._fromIdTokenResponse(e,r,i),o=UN(r);return new n({user:s,providerId:o,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return y(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=UN(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function UN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var pw=class n extends yn{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function fx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?pw._fromErrorAndOperation(n,s,e,r):s})}function TG(n,e,t=!1){return y(this,null,function*(){let r=yield ll(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return hl._forOperation(n,"link",r)})}function bG(n,e,t=!1){return y(this,null,function*(){let{auth:r}=n;if(ei(r.app))return Promise.reject(to(r));let i="reauthenticate";try{let s=yield ll(n,fx(r,i,e,n),t);ae(s.idToken,r,"internal-error");let o=Dw(s.idToken);ae(o,r,"internal-error");let{sub:a}=o;return ae(n.uid===a,r,"user-mismatch"),hl._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&os(r,"user-mismatch"),s}})}function DG(n,e,t=!1){return y(this,null,function*(){if(ei(n.app))return Promise.reject(to(n));let r="signIn",i=yield fx(n,r,e),s=yield hl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function vp(n,e,t,r){return De(n).onIdTokenChanged(e,t,r)}function Pw(n,e,t){return De(n).beforeAuthStateChanged(e,t)}function wp(n,e,t,r){return De(n).onAuthStateChanged(e,t,r)}var gp="__sak";var mp=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(gp,"1"),this.storage.removeItem(gp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var SG=1e3,AG=10,RG=(()=>{class n extends mp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ux(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);gG()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,AG):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},SG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return y(this,null,function*(){yield Li(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return y(this,null,function*(){let r=yield Li(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return y(this,null,function*(){yield Li(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),px=RG;var NG=(()=>{class n extends mp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ow=NG;function xG(n){return Promise.all(n.map(e=>y(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var MG=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return y(this,null,function*(){let r=t,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let c=Array.from(a).map(d=>y(this,null,function*(){return d(r.origin,o)})),l=yield xG(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function gx(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var gw=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return y(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=gx("",20);i.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){let g=f;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function jr(){return window}function PG(n){jr().location.href=n}function mx(){return typeof jr().WorkerGlobalScope<"u"&&typeof jr().importScripts=="function"}function OG(){return y(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function kG(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FG(){return mx()?self:null}var _x="firebaseLocalStorageDb",LG=1,_p="firebaseLocalStorage",yx="fbase_key",io=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Ip(n,e){return n.transaction([_p],e?"readwrite":"readonly").objectStore(_p)}function VG(){let n=indexedDB.deleteDatabase(_x);return new io(n).toPromise()}function mw(){let n=indexedDB.open(_x,LG);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(_p,{keyPath:yx})}catch(i){t(i)}}),n.addEventListener("success",()=>y(this,null,function*(){let r=n.result;r.objectStoreNames.contains(_p)?e(r):(r.close(),yield VG(),e(yield mw()))}))})}function jN(n,e,t){return y(this,null,function*(){let r=Ip(n,!0).put({[yx]:e,value:t});return new io(r).toPromise()})}function UG(n,e){return y(this,null,function*(){let t=Ip(n,!1).get(e),r=yield new io(t).toPromise();return r===void 0?null:r.value})}function BN(n,e){let t=Ip(n,!0).delete(e);return new io(t).toPromise()}var jG=800,BG=3,$G=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return y(this,null,function*(){return this.db?this.db:(this.db=yield mw(),this.db)})}_withRetries(t){return y(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>BG)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return y(this,null,function*(){return mx()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return y(this,null,function*(){this.receiver=MG._getInstance(FG()),this.receiver._subscribe("keyChanged",(t,r)=>y(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>y(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return y(this,null,function*(){var t,r;if(this.activeServiceWorker=yield OG(),!this.activeServiceWorker)return;this.sender=new gw(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return y(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||kG()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return y(this,null,function*(){try{if(!indexedDB)return!1;let t=yield mw();return yield jN(t,gp,"1"),yield BN(t,gp),!0}catch{}return!1})}_withPendingWrite(t){return y(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(i=>jN(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return y(this,null,function*(){let r=yield this._withRetries(i=>UG(i,t));return this.localCache[t]=r,r})}_remove(t){return y(this,null,function*(){return this._withPendingWrite(()=>y(this,null,function*(){return yield this._withRetries(r=>BN(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return y(this,null,function*(){let t=yield this._withRetries(s=>{let o=Ip(s,!1).getAll();return new io(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>y(this,null,function*(){return this._poll()}),jG)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),vx=$G;var gie=dx("rcb"),mie=new ro(3e4,6e4);function HG(n,e){return e?Ii(e):(ae(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var fl=class extends fp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return iw(e,this._buildIdpRequest())}_linkToIdToken(e,t){return iw(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return iw(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function qG(n){return DG(n.auth,new fl(n),n.bypassAuthState)}function GG(n){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),bG(t,new fl(n),n.bypassAuthState)}function zG(n){return y(this,null,function*(){let{auth:e,user:t}=n;return ae(t,e,"internal-error"),TG(t,new fl(n),n.bypassAuthState)})}var _w=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>y(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return y(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qG;case"linkViaPopup":case"linkViaRedirect":return zG;case"reauthViaPopup":case"reauthViaRedirect":return GG;default:os(this.auth,"internal-error")}}resolve(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){as(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var _ie=new ro(2e3,1e4);var WG="pendingRedirect",op=new Map,yw=class n extends _w{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return y(this,null,function*(){let e=op.get(this.auth._key());if(!e){try{let r=(yield KG(this.resolver,this.auth))?yield Li(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}op.set(this.auth._key(),e)}return this.bypassAuthState||op.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return y(this,null,function*(){if(e.type==="signInViaRedirect")return Li(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Li(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return y(this,null,function*(){})}cleanUp(){}};function KG(n,e){return y(this,null,function*(){let t=ZG(e),r=YG(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function QG(n,e){op.set(n._key(),e)}function YG(n){return Ii(n._redirectPersistence)}function ZG(n){return sp(WG,n.config.apiKey,n.name)}function JG(n,e,t=!1){return y(this,null,function*(){if(ei(n.app))return Promise.reject(to(n));let r=Rw(n),i=HG(r,e),o=yield new yw(r,i,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var XG=10*60*1e3,vw=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ez(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!wx(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(no(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XG&&this.cachedEventUids.clear(),this.cachedEventUids.has($N(e))}saveEventToCache(e){this.cachedEventUids.add($N(e)),this.lastProcessedEventTime=Date.now()}};function $N(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function wx({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function ez(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wx(n);default:return!1}}function tz(t){return y(this,arguments,function*(n,e={}){return La(n,"GET","/v1/projects",e)})}var nz=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rz=/^https?/;function iz(n){return y(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield tz(n);for(let t of e)try{if(sz(t))return}catch{}os(n,"unauthorized-domain")})}function sz(n){let e=ow(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rz.test(t))return!1;if(nz.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var oz=new ro(3e4,6e4);function HN(){let n=jr().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function az(n){return new Promise((e,t)=>{var r,i,s;function o(){HN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{HN(),t(no(n,"network-request-failed"))},timeout:oz.get()})}if(!((i=(r=jr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=jr().gapi)===null||s===void 0)&&s.load)o();else{let a=dx("iframefcb");return jr()[a]=()=>{gapi.load?o():t(no(n,"network-request-failed"))},vG(`${wG()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw ap=null,e})}var ap=null;function cz(n){return ap=ap||az(n),ap}var uz=new ro(5e3,15e3),lz="__/auth/iframe",dz="emulator/auth/iframe",hz={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fz=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pz(n){let e=n.config;ae(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Cw(e,dz):`https://${n.config.authDomain}/${lz}`,r={apiKey:e.apiKey,appName:n.name,v:vn},i=fz.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${bs(r).slice(1)}`}function gz(n){return y(this,null,function*(){let e=yield cz(n),t=jr().gapi;return ae(t,n,"internal-error"),e.open({where:document.body,url:pz(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hz,dontclear:!0},r=>new Promise((i,s)=>y(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=no(n,"network-request-failed"),a=jr().setTimeout(()=>{s(o)},uz.get());function c(){jr().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{s(o)})})))})}var mz={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_z=500,yz=600,vz="_blank",wz="http://localhost",yp=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Iz(n,e,t,r=_z,i=yz){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},mz),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Zt().toLowerCase();t&&(a=ix(l)?vz:t),nx(l)&&(e=e||wz,c.scrollbars="yes");let d=Object.entries(c).reduce((g,[_,w])=>`${g}${_}=${w},`,"");if(pG(l)&&a!=="_self")return Ez(e||"",a),new yp(null);let f=window.open(e||"",a,d);ae(f,n,"popup-blocked");try{f.focus()}catch{}return new yp(f)}function Ez(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Cz="__/auth/handler",Tz="emulator/auth/handler",bz=encodeURIComponent("fac");function qN(n,e,t,r,i,s){return y(this,null,function*(){ae(n.config.authDomain,n,"auth-domain-config-required"),ae(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:vn,eventId:i};if(e instanceof pp){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",su(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[d,f]of Object.entries(s||{}))o[d]=f}if(e instanceof fw){let d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${bz}=${encodeURIComponent(c)}`:"";return`${Dz(n)}?${bs(a).slice(1)}${l}`})}function Dz({config:n}){return n.emulator?Cw(n,Tz):`https://${n.authDomain}/${Cz}`}var sw="webStorageSupport",ww=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ow,this._completeRedirectFn=JG,this._overrideRedirectResult=QG}_openPopup(e,t,r,i){return y(this,null,function*(){var s;as((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield qN(e,t,r,ow(),i);return Iz(e,o,gx())})}_openRedirect(e,t,r,i){return y(this,null,function*(){yield this._originValidation(e);let s=yield qN(e,t,r,ow(),i);return PG(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(as(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return y(this,null,function*(){let t=yield gz(e),r=new vw(e);return t.register("authEvent",i=>(ae(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sw,{type:sw},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[sw];o!==void 0&&t(!!o),os(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=iz(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ux()||rx()||Aw()}},Ix=ww;var GN="@firebase/auth",zN="1.7.9";var Iw=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return y(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Sz(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Az(n){wt(new vt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ae(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lx(n)},l=new hw(r,i,s,c);return IG(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),wt(new vt("auth-internal",e=>{let t=Rw(e.getProvider("auth").getImmediate());return(r=>new Iw(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Y(GN,zN,Sz(n)),Y(GN,zN,"esm2017")}var Rz=5*60,Nz=jm("authIdTokenMaxAge")||Rz,WN=null,xz=n=>e=>y(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Nz)return;let i=t?.token;WN!==i&&(WN=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function kw(n=Dt()){let e=bt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=xw(n,{popupRedirectResolver:Ix,persistence:[vx,px,Ow]}),r=jm("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=xz(s.toString());Pw(t,o,()=>o(t.currentUser)),vp(t,a=>o(a))}}let i=Ab("auth");return i&&Mw(t,`http://${i}`),t}function Mz(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}yG({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=no("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",Mz().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Az("Browser");function Cx(n){return new ce(function(e){var t=wp(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Tx="auth",so=class{constructor(e){return e}},yr=class{constructor(){return Ct(Tx)}};var Fw=new H("angularfire2.auth-instances");function TW(n,e){let t=xt(Tx,n,e);return t&&new so(t)}function bW(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new so(r)}}var DW={provide:yr,deps:[[new se,Fw]]},SW={provide:so,useFactory:TW,deps:[[new se,Fw],it]};function bx(n,...e){return Y("angularfire",rt.full,"auth"),Xe([SW,DW,{provide:Fw,useFactory:bW(n),multi:!0,deps:[te,Ee,_t,dt,[new se,Nn],...e]}])}var Dx=Oe(Cx,!0);var Sx=Oe(kw,!0);var Ep="analytics",RW="firebase_id",NW="origin",xW=60*1e3,MW="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Hw="https://www.googletagmanager.com/gtag/js";var mn=new Ar("@firebase/analytics");var PW={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},$n=new Dr("analytics","Analytics",PW);function OW(n){if(!n.startsWith(Hw)){let e=$n.create("invalid-gtag-resource",{gtagURL:n});return mn.warn(e.message),""}return n}function Ox(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function kW(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function FW(n,e){let t=kW("firebase-js-sdk-policy",{createScriptURL:OW}),r=document.createElement("script"),i=`${Hw}?l=${n}&id=${e}`;r.src=t?t?.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function LW(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function VW(n,e,t,r,i,s){return y(this,null,function*(){let o=r[i];try{if(o)yield e[o];else{let c=(yield Ox(t)).find(l=>l.measurementId===i);c&&(yield e[c.appId])}}catch(a){mn.error(a)}n("config",i,s)})}function UW(n,e,t,r,i){return y(this,null,function*(){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);let a=yield Ox(t);for(let c of o){let l=a.find(f=>f.measurementId===c),d=l&&e[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){mn.error(s)}})}function jW(n,e,t,r){function i(s,...o){return y(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield UW(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield VW(n,e,t,r,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){mn.error(a)}})}return i}function BW(n,e,t,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=jW(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}function $W(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(Hw)&&t.src.includes(n))return t;return null}var HW=30,qW=1e3,Vw=class{constructor(e={},t=qW){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},kx=new Vw;function GW(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function zW(n){return y(this,null,function*(){var e;let{appId:t,apiKey:r}=n,i={method:"GET",headers:GW(r)},s=MW.replace("{app-id}",t),o=yield fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw $n.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function WW(r){return y(this,arguments,function*(n,e=kx,t){let{appId:i,apiKey:s,measurementId:o}=n.options;if(!i)throw $n.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw $n.create("no-api-key")}let a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Uw;return setTimeout(()=>y(this,null,function*(){c.abort()}),t!==void 0?t:xW),Fx({appId:i,apiKey:s,measurementId:o},a,c,e)})}function Fx(s,o,a){return y(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=kx){var c;let{appId:l,measurementId:d}=n;try{yield KW(r,e)}catch(f){if(d)return mn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:l,measurementId:d};throw f}try{let f=yield zW(n);return i.deleteThrottleMetadata(l),f}catch(f){let g=f;if(!QW(g)){if(i.deleteThrottleMetadata(l),d)return mn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:l,measurementId:d};throw f}let _=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?uu(t,i.intervalMillis,HW):uu(t,i.intervalMillis),w={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return i.setThrottleMetadata(l,w),mn.debug(`Calling attemptFetch again in ${_} millis`),Fx(n,w,r,i)}})}function KW(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r($n.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function QW(n){if(!(n instanceof yn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Uw=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var jw;function YW(n,e,t,r,i){return y(this,null,function*(){if(i&&i.global){n("event",t,r);return}else{let s=yield e,o=Object.assign(Object.assign({},r),{send_to:s});n("event",t,o)}})}function ZW(n,e,t,r){return y(this,null,function*(){if(r&&r.global)return n("set",{user_id:t}),Promise.resolve();{let i=yield e;n("config",i,{update:!0,user_id:t})}})}var Bw;function JW(n){Bw=n}function XW(n){jw=n}function e4(){return y(this,null,function*(){if(Xr())try{yield Cs()}catch(n){return mn.warn($n.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return mn.warn($n.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function t4(n,e,t,r,i,s,o){return y(this,null,function*(){var a;let c=WW(n);c.then(_=>{t[_.measurementId]=_.appId,n.options.measurementId&&_.measurementId!==n.options.measurementId&&mn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${_.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(_=>mn.error(_)),e.push(c);let l=e4().then(_=>{if(_)return r.getId()}),[d,f]=yield Promise.all([c,l]);$W(s)||FW(s,d.measurementId),Bw&&(i("consent","default",Bw),JW(void 0)),i("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[NW]="firebase",g.update=!0,f!=null&&(g[RW]=f),i("config",d.measurementId,g),jw&&(i("set",jw),XW(void 0)),d.measurementId})}var $w=class{constructor(e){this.app=e}_delete(){return delete Va[this.app.options.appId],Promise.resolve()}},Va={},Ax=[],Rx={},Lw="dataLayer",n4="gtag",Nx,qw,xx=!1;function r4(){let n=[];if(ru()&&n.push("This is a browser extension environment."),iu()||n.push("Cookies are not available."),n.length>0){let e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=$n.create("invalid-analytics-context",{errorInfo:e});mn.warn(t.message)}}function i4(n,e,t){r4();let r=n.options.appId;if(!r)throw $n.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)mn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw $n.create("no-api-key");if(Va[r]!=null)throw $n.create("already-exists",{id:r});if(!xx){LW(Lw);let{wrappedGtag:s,gtagCore:o}=BW(Va,Ax,Rx,Lw,n4);qw=s,Nx=o,xx=!0}return Va[r]=t4(n,Ax,Rx,e,Nx,Lw,t),new $w(n)}function Lx(n=Dt()){n=De(n);let e=bt(n,Ep);return e.isInitialized()?e.getImmediate():Vx(n)}function Vx(n,e={}){let t=bt(n,Ep);if(t.isInitialized()){let i=t.getImmediate();if(au(e,t.getOptions()))return i;throw $n.create("already-initialized")}return t.initialize({options:e})}function Ux(){return y(this,null,function*(){if(ru()||!iu()||!Xr())return!1;try{return yield Cs()}catch{return!1}})}function jx(n,e,t){n=De(n),ZW(qw,Va[n.app.options.appId],e,t).catch(r=>mn.error(r))}function Gw(n,e,t,r){n=De(n),YW(qw,Va[n.app.options.appId],e,t,r).catch(i=>mn.error(i))}var Mx="@firebase/analytics",Px="0.10.8";function s4(){wt(new vt(Ep,(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return i4(r,i,t)},"PUBLIC")),wt(new vt("analytics-internal",n,"PRIVATE")),Y(Mx,Px),Y(Mx,Px,"esm2017");function n(e){try{let t=e.getProvider(Ep).getImmediate();return{logEvent:(r,i,s)=>Gw(t,r,i,s)}}catch(t){throw $n.create("interop-component-reg-failed",{reason:t})}}}s4();var oo=class{constructor(e){return e}},Hx="analytics",Ww=class{constructor(){return Ct(Hx)}};var Kw="__angularfire_symbol__analyticsIsSupportedValue",qx="__angularfire_symbol__analyticsIsSupported";globalThis[qx]||=Ux().then(n=>globalThis[Kw]=n).catch(()=>globalThis[Kw]=!1);var Cp={async:()=>globalThis[qx],sync:()=>{let n=globalThis[Kw];if(n===void 0)throw new Error(ka("Analytics"));return n}},Gx=Cp.async,zx=Oe(Lx,!0);var o4=Oe(Gw,!0);var a4=Oe(jx,!0);var Yw=(()=>{class n{initialized;disposables=[];constructor(t,r,i){Y("angularfire",rt.full,"user-tracking");let s;this.initialized=r.runOutsideAngular(()=>new Promise(o=>{s=o})),Gx().then(()=>{let o=i.get(oo);o?this.disposables=[Dx(t).subscribe(a=>{a4(o,a?.uid),s()})]:s()})}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}static \u0275fac=function(r){return new(r||n)(ne(so),ne(te),ne(Ee))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),c4="firebase_event_origin",u4="firebase_previous_class",l4="firebase_previous_id",d4="firebase_previous_screen",h4="firebase_screen_class",Bx="firebase_screen_id",f4="firebase_screen",Qw="outlet",p4="page_path",g4="page_title",pl="screen_class",$x="screen_name",m4="screen_view",_4="auto",y4="#",v4=Math.floor(Math.random()*(2**32-1))-2**31,zw={},w4=n=>{let e=[n[pl],n[Qw]].join(y4);if(zw.hasOwnProperty(e))return zw[e];{let t=v4++;return zw[e]=t,t}},I4=(n,e,t)=>n.events.pipe(hn(i=>i instanceof Xu)).pipe(In(i=>{let o=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,g=>g.replace("://",":///"))).root.children[i.snapshot.outlet]?.toString()||"",a=n.routerState.root.children.map(g=>g).find(g=>g.outlet===i.snapshot.outlet);if(!a)return X(null);let c=a;for(;c.firstChild;)c=c.firstChild;let l=c.pathFromRoot.map(g=>g.routeConfig?.path).filter(g=>g).join("/")||"/",d={[$x]:l,[p4]:`/${o}`,[c4]:_4,[f4]:l,[Qw]:i.snapshot.outlet};e&&(d[g4]=e.getTitle());let f=a.component;if(f){if(f===Zv){let g=i.snapshot;for(;g.firstChild;)g=g.firstChild;f=g.component}}else f=i.snapshot.component;if(typeof f=="string")return X(ye(j({},d),{[pl]:f}));if(f){let g=t.resolveComponentFactory(f);return X(ye(j({},d),{[pl]:g.selector}))}return X(null)}),hn(i=>!!i),K(i=>j({[h4]:i[pl],[Bx]:w4(i)},i)),u_(i=>i[Qw]),It(i=>i.pipe(_h((s,o)=>JSON.stringify(s)===JSON.stringify(o)),ra(void 0),vh(),K(([s,o])=>s?j({[u4]:s[pl],[d4]:s[$x],[l4]:s[Bx]},o):o)))),Wx=(()=>{class n{disposable;constructor(t,r,i,s,o,a){Y("angularfire",rt.full,"screen-tracking"),Gx().then(()=>{let c=a.get(oo);!t||!c||s.runOutsideAngular(()=>{this.disposable=I4(t,r,i).pipe(In(l=>y(this,null,function*(){return o&&(yield o.initialized),o4(c,m4,l)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}static \u0275fac=function(r){return new(r||n)(ne(ep,8),ne(Lf,8),ne(Qi),ne(te),ne(Yw,8),ne(Ee))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Zw=new H("angularfire2.analytics-instances");function E4(n,e){if(!Cp.sync())return null;let t=xt(Hx,n,e);return t&&new oo(t)}function C4(n){return(e,t)=>{if(!Cp.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new oo(r)}}var T4={provide:Ww,deps:[[new se,Zw]]},b4={provide:oo,useFactory:E4,deps:[[new se,Zw],it]};function Kx(n,...e){return Y("angularfire",rt.full,"analytics"),Xe([b4,T4,{provide:ts,useValue:Cp.async,multi:!0},{provide:Zw,useFactory:C4(n),multi:!0,deps:[te,Ee,_t,dt,...e]}])}var Qx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Yx={};var cs,Jw;(function(){var n;function e(C,v){function I(){}I.prototype=v.prototype,C.D=v.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(T,b,A){for(var E=Array(arguments.length-2),Yr=2;Yr<arguments.length;Yr++)E[Yr-2]=arguments[Yr];return v.prototype[b].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var b=0;16>b;++b)T[b]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(b=0;16>b;++b)T[b]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=C.g[0],I=C.g[1],b=C.g[2];var A=C.g[3],E=v+(A^I&(b^A))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[1]+3905402710&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[2]+606105819&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[3]+3250441966&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[5]+1200080426&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[6]+2821735955&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[7]+4249261313&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[9]+2336552879&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[10]+4294925233&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[11]+2304563134&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(A^I&(b^A))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=A+(b^v&(I^b))+T[13]+4254626195&4294967295,A=v+(E<<12&4294967295|E>>>20),E=b+(I^A&(v^I))+T[14]+2792965006&4294967295,b=A+(E<<17&4294967295|E>>>15),E=I+(v^b&(A^v))+T[15]+1236535329&4294967295,I=b+(E<<22&4294967295|E>>>10),E=v+(b^A&(I^b))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[6]+3225465664&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[11]+643717713&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[0]+3921069994&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[10]+38016083&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[15]+3634488961&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[4]+3889429448&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[14]+3275163606&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[3]+4107603335&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[8]+1163531501&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(b^A&(I^b))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=A+(I^b&(v^I))+T[2]+4243563512&4294967295,A=v+(E<<9&4294967295|E>>>23),E=b+(v^I&(A^v))+T[7]+1735328473&4294967295,b=A+(E<<14&4294967295|E>>>18),E=I+(A^v&(b^A))+T[12]+2368359562&4294967295,I=b+(E<<20&4294967295|E>>>12),E=v+(I^b^A)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[8]+2272392833&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[11]+1839030562&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[14]+4259657740&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[4]+1272893353&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[7]+4139469664&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[10]+3200236656&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[0]+3936430074&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[3]+3572445317&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[6]+76029189&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(I^b^A)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=A+(v^I^b)+T[12]+3873151461&4294967295,A=v+(E<<11&4294967295|E>>>21),E=b+(A^v^I)+T[15]+530742520&4294967295,b=A+(E<<16&4294967295|E>>>16),E=I+(b^A^v)+T[2]+3299628645&4294967295,I=b+(E<<23&4294967295|E>>>9),E=v+(b^(I|~A))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[7]+1126891415&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[14]+2878612391&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[5]+4237533241&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[3]+2399980690&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[10]+4293915773&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[1]+2240044497&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[15]+4264355552&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[6]+2734768916&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[13]+1309151649&4294967295,I=b+(E<<21&4294967295|E>>>11),E=v+(b^(I|~A))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=A+(I^(v|~b))+T[11]+3174756917&4294967295,A=v+(E<<10&4294967295|E>>>22),E=b+(v^(A|~I))+T[2]+718787259&4294967295,b=A+(E<<15&4294967295|E>>>17),E=I+(A^(b|~v))+T[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(b+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+A&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var I=v-this.blockSize,T=this.B,b=this.h,A=0;A<v;){if(b==0)for(;A<=I;)i(this,C,A),A+=this.blockSize;if(typeof C=="string"){for(;A<v;)if(T[b++]=C.charCodeAt(A++),b==this.blockSize){i(this,T),b=0;break}}else for(;A<v;)if(T[b++]=C[A++],b==this.blockSize){i(this,T),b=0;break}}this.h=b,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var I=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=I&255,I/=256;for(this.u(C),C=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)C[I++]=this.g[v]>>>T&255;return C};function s(C,v){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=v(C)}function o(C,v){this.h=v;for(var I=[],T=!0,b=C.length-1;0<=b;b--){var A=C[b]|0;T&&A==v||(I[b]=A,T=!1)}this.g=I}var a={};function c(C){return-128<=C&&128>C?s(C,function(v){return new o([v|0],0>v?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return S(l(-C));for(var v=[],I=1,T=0;C>=I;T++)v[T]=C/I|0,I*=4294967296;return new o(v,0)}function d(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return S(d(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),T=f,b=0;b<C.length;b+=8){var A=Math.min(8,C.length-b),E=parseInt(C.substring(b,b+A),v);8>A?(A=l(Math.pow(v,A)),T=T.j(A).add(l(E))):(T=T.j(I),T=T.add(l(E)))}return T}var f=c(0),g=c(1),_=c(16777216);n=o.prototype,n.m=function(){if(R(this))return-S(this).m();for(var C=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);C+=(0<=T?T:4294967296+T)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(R(this))return"-"+S(this).toString(C);for(var v=l(Math.pow(C,6)),I=this,T="";;){var b=J(I,v).g;I=F(I,b.j(v));var A=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=b,w(I))return A+T;for(;6>A.length;)A="0"+A;T=A+T}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function R(C){return C.h==-1}n.l=function(C){return C=F(this,C),R(C)?-1:w(C)?0:1};function S(C){for(var v=C.g.length,I=[],T=0;T<v;T++)I[T]=~C.g[T];return new o(I,~C.h).add(g)}n.abs=function(){return R(this)?S(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0,b=0;b<=v;b++){var A=T+(this.i(b)&65535)+(C.i(b)&65535),E=(A>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);T=E>>>16,A&=65535,E&=65535,I[b]=E<<16|A}return new o(I,I[I.length-1]&-2147483648?-1:0)};function F(C,v){return C.add(S(v))}n.j=function(C){if(w(this)||w(C))return f;if(R(this))return R(C)?S(this).j(S(C)):S(S(this).j(C));if(R(C))return S(this.j(S(C)));if(0>this.l(_)&&0>C.l(_))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var b=0;b<C.g.length;b++){var A=this.i(T)>>>16,E=this.i(T)&65535,Yr=C.i(b)>>>16,Lc=C.i(b)&65535;I[2*T+2*b]+=E*Lc,q(I,2*T+2*b),I[2*T+2*b+1]+=A*Lc,q(I,2*T+2*b+1),I[2*T+2*b+1]+=E*Yr,q(I,2*T+2*b+1),I[2*T+2*b+2]+=A*Yr,q(I,2*T+2*b+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new o(I,0)};function q(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function W(C,v){this.g=C,this.h=v}function J(C,v){if(w(v))throw Error("division by zero");if(w(C))return new W(f,f);if(R(C))return v=J(S(C),v),new W(S(v.g),S(v.h));if(R(v))return v=J(C,S(v)),new W(S(v.g),v.h);if(30<C.g.length){if(R(C)||R(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,T=v;0>=T.l(C);)I=ze(I),T=ze(T);var b=ee(I,1),A=ee(T,1);for(T=ee(T,2),I=ee(I,2);!w(T);){var E=A.add(T);0>=E.l(C)&&(b=b.add(I),A=E),T=ee(T,1),I=ee(I,1)}return v=F(C,b.j(v)),new W(b,v)}for(b=f;0<=C.l(v);){for(I=Math.max(1,Math.floor(C.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),A=l(I),E=A.j(v);R(E)||0<E.l(C);)I-=T,A=l(I),E=A.j(v);w(A)&&(A=g),b=b.add(A),C=F(C,E)}return new W(b,C)}n.A=function(C){return J(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&C.i(T);return new o(I,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|C.i(T);return new o(I,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^C.i(T);return new o(I,this.h^C.h)};function ze(C){for(var v=C.g.length+1,I=[],T=0;T<v;T++)I[T]=C.i(T)<<1|C.i(T-1)>>>31;return new o(I,C.h)}function ee(C,v){var I=v>>5;v%=32;for(var T=C.g.length-I,b=[],A=0;A<T;A++)b[A]=0<v?C.i(A+I)>>>v|C.i(A+I+1)<<32-v:C.i(A+I);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Jw=Yx.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,cs=Yx.Integer=o}).apply(typeof Qx<"u"?Qx:typeof self<"u"?self:typeof window<"u"?window:{});var Tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ei={};var Xw,D4,Ua,eI,gl,bp,tI,nI,rI;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,h,p){return u==Array.prototype||u==Object.prototype||(u[h]=p.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tp=="object"&&Tp];for(var h=0;h<u.length;++h){var p=u[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function i(u,h){if(h)e:{var p=r;u=u.split(".");for(var m=0;m<u.length-1;m++){var D=u[m];if(!(D in p))break e;p=p[D]}u=u[u.length-1],m=p[u],h=h(m),h!=m&&h!=null&&e(p,u,{configurable:!0,writable:!0,value:h})}}function s(u,h){u instanceof String&&(u+="");var p=0,m=!1,D={next:function(){if(!m&&p<u.length){var N=p++;return{value:h(N,u[N]),done:!1}}return m=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(u){return u||function(){return s(this,function(h,p){return p})}});var o=o||{},a=this||self;function c(u){var h=typeof u;return h=h!="object"?h:u?Array.isArray(u)?"array":h:"null",h=="array"||h=="object"&&typeof u.length=="number"}function l(u){var h=typeof u;return h=="object"&&u!=null||h=="function"}function d(u,h,p){return u.call.apply(u.bind,arguments)}function f(u,h,p){if(!u)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,m),u.apply(h,D)}}return function(){return u.apply(h,arguments)}}function g(u,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,g.apply(null,arguments)}function _(u,h){var p=Array.prototype.slice.call(arguments,1);return function(){var m=p.slice();return m.push.apply(m,arguments),u.apply(this,m)}}function w(u,h){function p(){}p.prototype=h.prototype,u.aa=h.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(m,D,N){for(var V=Array(arguments.length-2),We=2;We<arguments.length;We++)V[We-2]=arguments[We];return h.prototype[D].apply(m,V)}}function R(u){let h=u.length;if(0<h){let p=Array(h);for(let m=0;m<h;m++)p[m]=u[m];return p}return[]}function S(u,h){for(let p=1;p<arguments.length;p++){let m=arguments[p];if(c(m)){let D=u.length||0,N=m.length||0;u.length=D+N;for(let V=0;V<N;V++)u[D+V]=m[V]}else u.push(m)}}class F{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function q(u){return/^[\s\xa0]*$/.test(u)}function W(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function J(u){return J[" "](u),u}J[" "]=function(){};var ze=W().indexOf("Gecko")!=-1&&!(W().toLowerCase().indexOf("webkit")!=-1&&W().indexOf("Edge")==-1)&&!(W().indexOf("Trident")!=-1||W().indexOf("MSIE")!=-1)&&W().indexOf("Edge")==-1;function ee(u,h,p){for(let m in u)h.call(p,u[m],m,u)}function C(u,h){for(let p in u)h.call(void 0,u[p],p,u)}function v(u){let h={};for(let p in u)h[p]=u[p];return h}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(u,h){let p,m;for(let D=1;D<arguments.length;D++){m=arguments[D];for(p in m)u[p]=m[p];for(let N=0;N<I.length;N++)p=I[N],Object.prototype.hasOwnProperty.call(m,p)&&(u[p]=m[p])}}function b(u){var h=1;u=u.split(":");let p=[];for(;0<h&&u.length;)p.push(u.shift()),h--;return u.length&&p.push(u.join(":")),p}function A(u){a.setTimeout(()=>{throw u},0)}function E(){var u=gm;let h=null;return u.g&&(h=u.g,u.g=u.g.next,u.g||(u.h=null),h.next=null),h}class Yr{constructor(){this.h=this.g=null}add(h,p){let m=Lc.get();m.set(h,p),this.h?this.h.next=m:this.g=m,this.h=m}}var Lc=new F(()=>new qF,u=>u.reset());class qF{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Vc,Uc=!1,gm=new Yr,C0=()=>{let u=a.Promise.resolve(void 0);Vc=()=>{u.then(GF)}};var GF=()=>{for(var u;u=E();){try{u.h.call(u.g)}catch(p){A(p)}var h=Lc;h.j(u),100>h.h&&(h.h++,u.next=h.g,h.g=u)}Uc=!1};function Pi(){this.s=this.s,this.C=this.C}Pi.prototype.s=!1,Pi.prototype.ma=function(){this.s||(this.s=!0,this.N())},Pi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Wt(u,h){this.type=u,this.g=this.target=h,this.defaultPrevented=!1}Wt.prototype.h=function(){this.defaultPrevented=!0};var zF=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,h=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,h),a.removeEventListener("test",p,h)}catch{}return u}();function jc(u,h){if(Wt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,m=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=h,h=u.relatedTarget){if(ze){e:{try{J(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else p=="mouseover"?h=u.fromElement:p=="mouseout"&&(h=u.toElement);this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:WF[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&jc.aa.h.call(this)}}w(jc,Wt);var WF={2:"touch",3:"pen",4:"mouse"};jc.prototype.h=function(){jc.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Bc="closure_listenable_"+(1e6*Math.random()|0),KF=0;function QF(u,h,p,m,D){this.listener=u,this.proxy=null,this.src=h,this.type=p,this.capture=!!m,this.ha=D,this.key=++KF,this.da=this.fa=!1}function yd(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function vd(u){this.src=u,this.g={},this.h=0}vd.prototype.add=function(u,h,p,m,D){var N=u.toString();u=this.g[N],u||(u=this.g[N]=[],this.h++);var V=_m(u,h,m,D);return-1<V?(h=u[V],p||(h.fa=!1)):(h=new QF(h,this.src,N,!!m,D),h.fa=p,u.push(h)),h};function mm(u,h){var p=h.type;if(p in u.g){var m=u.g[p],D=Array.prototype.indexOf.call(m,h,void 0),N;(N=0<=D)&&Array.prototype.splice.call(m,D,1),N&&(yd(h),u.g[p].length==0&&(delete u.g[p],u.h--))}}function _m(u,h,p,m){for(var D=0;D<u.length;++D){var N=u[D];if(!N.da&&N.listener==h&&N.capture==!!p&&N.ha==m)return D}return-1}var ym="closure_lm_"+(1e6*Math.random()|0),vm={};function T0(u,h,p,m,D){if(m&&m.once)return D0(u,h,p,m,D);if(Array.isArray(h)){for(var N=0;N<h.length;N++)T0(u,h[N],p,m,D);return null}return p=Cm(p),u&&u[Bc]?u.K(h,p,l(m)?!!m.capture:!!m,D):b0(u,h,p,!1,m,D)}function b0(u,h,p,m,D,N){if(!h)throw Error("Invalid event type");var V=l(D)?!!D.capture:!!D,We=Im(u);if(We||(u[ym]=We=new vd(u)),p=We.add(h,p,m,V,N),p.proxy)return p;if(m=YF(),p.proxy=m,m.src=u,m.listener=p,u.addEventListener)zF||(D=V),D===void 0&&(D=!1),u.addEventListener(h.toString(),m,D);else if(u.attachEvent)u.attachEvent(A0(h.toString()),m);else if(u.addListener&&u.removeListener)u.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return p}function YF(){function u(p){return h.call(u.src,u.listener,p)}let h=ZF;return u}function D0(u,h,p,m,D){if(Array.isArray(h)){for(var N=0;N<h.length;N++)D0(u,h[N],p,m,D);return null}return p=Cm(p),u&&u[Bc]?u.L(h,p,l(m)?!!m.capture:!!m,D):b0(u,h,p,!0,m,D)}function S0(u,h,p,m,D){if(Array.isArray(h))for(var N=0;N<h.length;N++)S0(u,h[N],p,m,D);else m=l(m)?!!m.capture:!!m,p=Cm(p),u&&u[Bc]?(u=u.i,h=String(h).toString(),h in u.g&&(N=u.g[h],p=_m(N,p,m,D),-1<p&&(yd(N[p]),Array.prototype.splice.call(N,p,1),N.length==0&&(delete u.g[h],u.h--)))):u&&(u=Im(u))&&(h=u.g[h.toString()],u=-1,h&&(u=_m(h,p,m,D)),(p=-1<u?h[u]:null)&&wm(p))}function wm(u){if(typeof u!="number"&&u&&!u.da){var h=u.src;if(h&&h[Bc])mm(h.i,u);else{var p=u.type,m=u.proxy;h.removeEventListener?h.removeEventListener(p,m,u.capture):h.detachEvent?h.detachEvent(A0(p),m):h.addListener&&h.removeListener&&h.removeListener(m),(p=Im(h))?(mm(p,u),p.h==0&&(p.src=null,h[ym]=null)):yd(u)}}}function A0(u){return u in vm?vm[u]:vm[u]="on"+u}function ZF(u,h){if(u.da)u=!0;else{h=new jc(h,this);var p=u.listener,m=u.ha||u.src;u.fa&&wm(u),u=p.call(m,h)}return u}function Im(u){return u=u[ym],u instanceof vd?u:null}var Em="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cm(u){return typeof u=="function"?u:(u[Em]||(u[Em]=function(h){return u.handleEvent(h)}),u[Em])}function Kt(){Pi.call(this),this.i=new vd(this),this.M=this,this.F=null}w(Kt,Pi),Kt.prototype[Bc]=!0,Kt.prototype.removeEventListener=function(u,h,p,m){S0(this,u,h,p,m)};function cn(u,h){var p,m=u.F;if(m)for(p=[];m;m=m.F)p.push(m);if(u=u.M,m=h.type||h,typeof h=="string")h=new Wt(h,u);else if(h instanceof Wt)h.target=h.target||u;else{var D=h;h=new Wt(m,u),T(h,D)}if(D=!0,p)for(var N=p.length-1;0<=N;N--){var V=h.g=p[N];D=wd(V,m,!0,h)&&D}if(V=h.g=u,D=wd(V,m,!0,h)&&D,D=wd(V,m,!1,h)&&D,p)for(N=0;N<p.length;N++)V=h.g=p[N],D=wd(V,m,!1,h)&&D}Kt.prototype.N=function(){if(Kt.aa.N.call(this),this.i){var u=this.i,h;for(h in u.g){for(var p=u.g[h],m=0;m<p.length;m++)yd(p[m]);delete u.g[h],u.h--}}this.F=null},Kt.prototype.K=function(u,h,p,m){return this.i.add(String(u),h,!1,p,m)},Kt.prototype.L=function(u,h,p,m){return this.i.add(String(u),h,!0,p,m)};function wd(u,h,p,m){if(h=u.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,N=0;N<h.length;++N){var V=h[N];if(V&&!V.da&&V.capture==p){var We=V.listener,qt=V.ha||V.src;V.fa&&mm(u.i,V),D=We.call(qt,m)!==!1&&D}}return D&&!m.defaultPrevented}function R0(u,h,p){if(typeof u=="function")p&&(u=g(u,p));else if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:a.setTimeout(u,h||0)}function N0(u){u.g=R0(()=>{u.g=null,u.i&&(u.i=!1,N0(u))},u.l);let h=u.h;u.h=null,u.m.apply(null,h)}class JF extends Pi{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:N0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $c(u){Pi.call(this),this.h=u,this.g={}}w($c,Pi);var x0=[];function M0(u){ee(u.g,function(h,p){this.g.hasOwnProperty(p)&&wm(h)},u),u.g={}}$c.prototype.N=function(){$c.aa.N.call(this),M0(this)},$c.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Tm=a.JSON.stringify,XF=a.JSON.parse,eL=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function bm(){}bm.prototype.h=null;function P0(u){return u.h||(u.h=u.i())}function O0(){}var Hc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Dm(){Wt.call(this,"d")}w(Dm,Wt);function Sm(){Wt.call(this,"c")}w(Sm,Wt);var vs={},k0=null;function Id(){return k0=k0||new Kt}vs.La="serverreachability";function F0(u){Wt.call(this,vs.La,u)}w(F0,Wt);function qc(u){let h=Id();cn(h,new F0(h))}vs.STAT_EVENT="statevent";function L0(u,h){Wt.call(this,vs.STAT_EVENT,u),this.stat=h}w(L0,Wt);function un(u){let h=Id();cn(h,new L0(h,u))}vs.Ma="timingevent";function V0(u,h){Wt.call(this,vs.Ma,u),this.size=h}w(V0,Wt);function Gc(u,h){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},h)}function zc(){this.g=!0}zc.prototype.xa=function(){this.g=!1};function tL(u,h,p,m,D,N){u.info(function(){if(u.g)if(N)for(var V="",We=N.split("&"),qt=0;qt<We.length;qt++){var Pe=We[qt].split("=");if(1<Pe.length){var Qt=Pe[0];Pe=Pe[1];var Yt=Qt.split("_");V=2<=Yt.length&&Yt[1]=="type"?V+(Qt+"="+Pe+"&"):V+(Qt+"=redacted&")}}else V=null;else V=N;return"XMLHTTP REQ ("+m+") [attempt "+D+"]: "+h+`
`+p+`
`+V})}function nL(u,h,p,m,D,N,V){u.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+D+"]: "+h+`
`+p+`
`+N+" "+V})}function Fo(u,h,p,m){u.info(function(){return"XMLHTTP TEXT ("+h+"): "+iL(u,p)+(m?" "+m:"")})}function rL(u,h){u.info(function(){return"TIMEOUT: "+h})}zc.prototype.info=function(){};function iL(u,h){if(!u.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var m=p[u];if(!(2>m.length)){var D=m[1];if(Array.isArray(D)&&!(1>D.length)){var N=D[0];if(N!="noop"&&N!="stop"&&N!="close")for(var V=1;V<D.length;V++)D[V]=""}}}}return Tm(p)}catch{return h}}var Ed={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},U0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Am;function Cd(){}w(Cd,bm),Cd.prototype.g=function(){return new XMLHttpRequest},Cd.prototype.i=function(){return{}},Am=new Cd;function Oi(u,h,p,m){this.j=u,this.i=h,this.l=p,this.R=m||1,this.U=new $c(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new j0}function j0(){this.i=null,this.g="",this.h=!1}var B0={},Rm={};function Nm(u,h,p){u.L=1,u.v=Sd(Zr(h)),u.m=p,u.P=!0,$0(u,null)}function $0(u,h){u.F=Date.now(),Td(u),u.A=Zr(u.v);var p=u.A,m=u.R;Array.isArray(m)||(m=[String(m)]),nb(p.i,"t",m),u.C=0,p=u.j.J,u.h=new j0,u.g=wb(u.j,p?h:null,!u.m),0<u.O&&(u.M=new JF(g(u.Y,u,u.g),u.O)),h=u.U,p=u.g,m=u.ca;var D="readystatechange";Array.isArray(D)||(D&&(x0[0]=D.toString()),D=x0);for(var N=0;N<D.length;N++){var V=T0(p,D[N],m||h.handleEvent,!1,h.h||h);if(!V)break;h.g[V.key]=V}h=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,h)):(u.u="GET",u.g.ea(u.A,u.u,null,h)),qc(),tL(u.i,u.u,u.A,u.l,u.R,u.m)}Oi.prototype.ca=function(u){u=u.target;let h=this.M;h&&Jr(u)==3?h.j():this.Y(u)},Oi.prototype.Y=function(u){try{if(u==this.g)e:{let Yt=Jr(this.g);var h=this.g.Ba();let Uo=this.g.Z();if(!(3>Yt)&&(Yt!=3||this.g&&(this.h.h||this.g.oa()||ub(this.g)))){this.J||Yt!=4||h==7||(h==8||0>=Uo?qc(3):qc(2)),xm(this);var p=this.g.Z();this.X=p;t:if(H0(this)){var m=ub(this.g);u="";var D=m.length,N=Jr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ws(this),Wc(this);var V="";break t}this.h.i=new a.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,u+=this.h.i.decode(m[h],{stream:!(N&&h==D-1)});m.length=0,this.h.g+=u,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=p==200,nL(this.i,this.u,this.A,this.l,this.R,Yt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var We,qt=this.g;if((We=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(We)){var Pe=We;break t}}Pe=null}if(p=Pe)Fo(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mm(this,p);else{this.o=!1,this.s=3,un(12),ws(this),Wc(this);break e}}if(this.P){p=!0;let ur;for(;!this.J&&this.C<V.length;)if(ur=sL(this,V),ur==Rm){Yt==4&&(this.s=4,un(14),p=!1),Fo(this.i,this.l,null,"[Incomplete Response]");break}else if(ur==B0){this.s=4,un(15),Fo(this.i,this.l,V,"[Invalid Chunk]"),p=!1;break}else Fo(this.i,this.l,ur,null),Mm(this,ur);if(H0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Yt!=4||V.length!=0||this.h.h||(this.s=1,un(16),p=!1),this.o=this.o&&p,!p)Fo(this.i,this.l,V,"[Invalid Chunked Response]"),ws(this),Wc(this);else if(0<V.length&&!this.W){this.W=!0;var Qt=this.j;Qt.g==this&&Qt.ba&&!Qt.M&&(Qt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Vm(Qt),Qt.M=!0,un(11))}}else Fo(this.i,this.l,V,null),Mm(this,V);Yt==4&&ws(this),this.o&&!this.J&&(Yt==4?mb(this.j,this):(this.o=!1,Td(this)))}else EL(this.g),p==400&&0<V.indexOf("Unknown SID")?(this.s=3,un(12)):(this.s=0,un(13)),ws(this),Wc(this)}}}catch{}finally{}};function H0(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function sL(u,h){var p=u.C,m=h.indexOf(`
`,p);return m==-1?Rm:(p=Number(h.substring(p,m)),isNaN(p)?B0:(m+=1,m+p>h.length?Rm:(h=h.slice(m,m+p),u.C=m+p,h)))}Oi.prototype.cancel=function(){this.J=!0,ws(this)};function Td(u){u.S=Date.now()+u.I,q0(u,u.I)}function q0(u,h){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Gc(g(u.ba,u),h)}function xm(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Oi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(rL(this.i,this.A),this.L!=2&&(qc(),un(17)),ws(this),this.s=2,Wc(this)):q0(this,this.S-u)};function Wc(u){u.j.G==0||u.J||mb(u.j,u)}function ws(u){xm(u);var h=u.M;h&&typeof h.ma=="function"&&h.ma(),u.M=null,M0(u.U),u.g&&(h=u.g,u.g=null,h.abort(),h.ma())}function Mm(u,h){try{var p=u.j;if(p.G!=0&&(p.g==u||Pm(p.h,u))){if(!u.K&&Pm(p.h,u)&&p.G==3){try{var m=p.Da.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var D=m;if(D[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Md(p),Nd(p);else break e;Lm(p),un(18)}}else p.za=D[1],0<p.za-p.T&&37500>D[2]&&p.F&&p.v==0&&!p.C&&(p.C=Gc(g(p.Za,p),6e3));if(1>=W0(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Es(p,11)}else if((u.K||p.g==u)&&Md(p),!q(h))for(D=p.Da.g.parse(h),h=0;h<D.length;h++){let Pe=D[h];if(p.T=Pe[0],Pe=Pe[1],p.G==2)if(Pe[0]=="c"){p.K=Pe[1],p.ia=Pe[2];let Qt=Pe[3];Qt!=null&&(p.la=Qt,p.j.info("VER="+p.la));let Yt=Pe[4];Yt!=null&&(p.Aa=Yt,p.j.info("SVER="+p.Aa));let Uo=Pe[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(m=1.5*Uo,p.L=m,p.j.info("backChannelRequestTimeoutMs_="+m)),m=p;let ur=u.g;if(ur){let Od=ur.g?ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Od){var N=m.h;N.g||Od.indexOf("spdy")==-1&&Od.indexOf("quic")==-1&&Od.indexOf("h2")==-1||(N.j=N.l,N.g=new Set,N.h&&(Om(N,N.h),N.h=null))}if(m.D){let Um=ur.g?ur.g.getResponseHeader("X-HTTP-Session-Id"):null;Um&&(m.ya=Um,nt(m.I,m.D,Um))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),m=p;var V=u;if(m.qa=vb(m,m.J?m.ia:null,m.W),V.K){K0(m.h,V);var We=V,qt=m.L;qt&&(We.I=qt),We.B&&(xm(We),Td(We)),m.g=V}else pb(m);0<p.i.length&&xd(p)}else Pe[0]!="stop"&&Pe[0]!="close"||Es(p,7);else p.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?Es(p,7):Fm(p):Pe[0]!="noop"&&p.l&&p.l.ta(Pe),p.v=0)}}qc(4)}catch{}}var oL=class{constructor(u,h){this.g=u,this.map=h}};function G0(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function z0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function W0(u){return u.h?1:u.g?u.g.size:0}function Pm(u,h){return u.h?u.h==h:u.g?u.g.has(h):!1}function Om(u,h){u.g?u.g.add(h):u.h=h}function K0(u,h){u.h&&u.h==h?u.h=null:u.g&&u.g.has(h)&&u.g.delete(h)}G0.prototype.cancel=function(){if(this.i=Q0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Q0(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let h=u.i;for(let p of u.g.values())h=h.concat(p.D);return h}return R(u.i)}function aL(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var h=[],p=u.length,m=0;m<p;m++)h.push(u[m]);return h}h=[],p=0;for(m in u)h[p++]=u[m];return h}function cL(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var h=[];u=u.length;for(var p=0;p<u;p++)h.push(p);return h}h=[],p=0;for(let m in u)h[p++]=m;return h}}}function Y0(u,h){if(u.forEach&&typeof u.forEach=="function")u.forEach(h,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,h,void 0);else for(var p=cL(u),m=aL(u),D=m.length,N=0;N<D;N++)h.call(void 0,m[N],p&&p[N],u)}var Z0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uL(u,h){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var m=u[p].indexOf("="),D=null;if(0<=m){var N=u[p].substring(0,m);D=u[p].substring(m+1)}else N=u[p];h(N,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Is(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Is){this.h=u.h,bd(this,u.j),this.o=u.o,this.g=u.g,Dd(this,u.s),this.l=u.l;var h=u.i,p=new Yc;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),J0(this,p),this.m=u.m}else u&&(h=String(u).match(Z0))?(this.h=!1,bd(this,h[1]||"",!0),this.o=Kc(h[2]||""),this.g=Kc(h[3]||"",!0),Dd(this,h[4]),this.l=Kc(h[5]||"",!0),J0(this,h[6]||"",!0),this.m=Kc(h[7]||"")):(this.h=!1,this.i=new Yc(null,this.h))}Is.prototype.toString=function(){var u=[],h=this.j;h&&u.push(Qc(h,X0,!0),":");var p=this.g;return(p||h=="file")&&(u.push("//"),(h=this.o)&&u.push(Qc(h,X0,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(Qc(p,p.charAt(0)=="/"?hL:dL,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",Qc(p,pL)),u.join("")};function Zr(u){return new Is(u)}function bd(u,h,p){u.j=p?Kc(h,!0):h,u.j&&(u.j=u.j.replace(/:$/,""))}function Dd(u,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);u.s=h}else u.s=null}function J0(u,h,p){h instanceof Yc?(u.i=h,gL(u.i,u.h)):(p||(h=Qc(h,fL)),u.i=new Yc(h,u.h))}function nt(u,h,p){u.i.set(h,p)}function Sd(u){return nt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Kc(u,h){return u?h?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Qc(u,h,p){return typeof u=="string"?(u=encodeURI(u).replace(h,lL),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lL(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var X0=/[#\/\?@]/g,dL=/[#\?:]/g,hL=/[#\?]/g,fL=/[#\?@]/g,pL=/#/g;function Yc(u,h){this.h=this.g=null,this.i=u||null,this.j=!!h}function ki(u){u.g||(u.g=new Map,u.h=0,u.i&&uL(u.i,function(h,p){u.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}n=Yc.prototype,n.add=function(u,h){ki(this),this.i=null,u=Lo(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(h),this.h+=1,this};function eb(u,h){ki(u),h=Lo(u,h),u.g.has(h)&&(u.i=null,u.h-=u.g.get(h).length,u.g.delete(h))}function tb(u,h){return ki(u),h=Lo(u,h),u.g.has(h)}n.forEach=function(u,h){ki(this),this.g.forEach(function(p,m){p.forEach(function(D){u.call(h,D,m,this)},this)},this)},n.na=function(){ki(this);let u=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let m=0;m<h.length;m++){let D=u[m];for(let N=0;N<D.length;N++)p.push(h[m])}return p},n.V=function(u){ki(this);let h=[];if(typeof u=="string")tb(this,u)&&(h=h.concat(this.g.get(Lo(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)h=h.concat(u[p])}return h},n.set=function(u,h){return ki(this),this.i=null,u=Lo(this,u),tb(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[h]),this.h+=1,this},n.get=function(u,h){return u?(u=this.V(u),0<u.length?String(u[0]):h):h};function nb(u,h,p){eb(u,h),0<p.length&&(u.i=null,u.g.set(Lo(u,h),R(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var m=h[p];let N=encodeURIComponent(String(m)),V=this.V(m);for(m=0;m<V.length;m++){var D=N;V[m]!==""&&(D+="="+encodeURIComponent(String(V[m]))),u.push(D)}}return this.i=u.join("&")};function Lo(u,h){return h=String(h),u.j&&(h=h.toLowerCase()),h}function gL(u,h){h&&!u.j&&(ki(u),u.i=null,u.g.forEach(function(p,m){var D=m.toLowerCase();m!=D&&(eb(this,m),nb(this,D,p))},u)),u.j=h}function mL(u,h){let p=new zc;if(a.Image){let m=new Image;m.onload=_(Fi,p,"TestLoadImage: loaded",!0,h,m),m.onerror=_(Fi,p,"TestLoadImage: error",!1,h,m),m.onabort=_(Fi,p,"TestLoadImage: abort",!1,h,m),m.ontimeout=_(Fi,p,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=u}else h(!1)}function _L(u,h){let p=new zc,m=new AbortController,D=setTimeout(()=>{m.abort(),Fi(p,"TestPingServer: timeout",!1,h)},1e4);fetch(u,{signal:m.signal}).then(N=>{clearTimeout(D),N.ok?Fi(p,"TestPingServer: ok",!0,h):Fi(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),Fi(p,"TestPingServer: error",!1,h)})}function Fi(u,h,p,m,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),m(p)}catch{}}function yL(){this.g=new eL}function vL(u,h,p){let m=p||"";try{Y0(u,function(D,N){let V=D;l(D)&&(V=Tm(D)),h.push(m+N+"="+encodeURIComponent(V))})}catch(D){throw h.push(m+"type="+encodeURIComponent("_badmap")),D}}function Zc(u){this.l=u.Ub||null,this.j=u.eb||!1}w(Zc,bm),Zc.prototype.g=function(){return new Ad(this.l,this.j)},Zc.prototype.i=function(u){return function(){return u}}({});function Ad(u,h){Kt.call(this),this.D=u,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ad,Kt),n=Ad.prototype,n.open=function(u,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=h,this.readyState=1,Xc(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(h.body=u),(this.D||a).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jc(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Xc(this)),this.g&&(this.readyState=3,Xc(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rb(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function rb(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var h=u.value?u.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!u.done}))&&(this.response=this.responseText+=h)}u.done?Jc(this):Xc(this),this.readyState==3&&rb(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,Jc(this))},n.Qa=function(u){this.g&&(this.response=u,Jc(this))},n.ga=function(){this.g&&Jc(this)};function Jc(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Xc(u)}n.setRequestHeader=function(u,h){this.u.append(u,h)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=h.next();return u.join(`\r
`)};function Xc(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Ad.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ib(u){let h="";return ee(u,function(p,m){h+=m,h+=":",h+=p,h+=`\r
`}),h}function km(u,h,p){e:{for(m in p){var m=!1;break e}m=!0}m||(p=ib(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):nt(u,h,p))}function pt(u){Kt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(pt,Kt);var wL=/^https?$/i,IL=["POST","PUT"];n=pt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,h,p,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);h=h?h.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Am.g(),this.v=this.o?P0(this.o):P0(Am),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(u),!0),this.B=!1}catch(N){sb(this,N);return}if(u=p||"",p=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var D in m)p.set(D,m[D]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let N of m.keys())p.set(N,m.get(N));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(p.keys()).find(N=>N.toLowerCase()=="content-type"),D=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IL,h,void 0))||m||D||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[N,V]of p)this.g.setRequestHeader(N,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cb(this),this.u=!0,this.g.send(u),this.u=!1}catch(N){sb(this,N)}};function sb(u,h){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=h,u.m=5,ob(u),Rd(u)}function ob(u){u.A||(u.A=!0,cn(u,"complete"),cn(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,cn(this,"complete"),cn(this,"abort"),Rd(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rd(this,!0)),pt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?ab(this):this.bb())},n.bb=function(){ab(this)};function ab(u){if(u.h&&typeof o<"u"&&(!u.v[1]||Jr(u)!=4||u.Z()!=2)){if(u.u&&Jr(u)==4)R0(u.Ea,0,u);else if(cn(u,"readystatechange"),Jr(u)==4){u.h=!1;try{let V=u.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var m;if(m=V===0){var D=String(u.D).match(Z0)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),m=!wL.test(D?D.toLowerCase():"")}p=m}if(p)cn(u,"complete"),cn(u,"success");else{u.m=6;try{var N=2<Jr(u)?u.g.statusText:""}catch{N=""}u.l=N+" ["+u.Z()+"]",ob(u)}}finally{Rd(u)}}}}function Rd(u,h){if(u.g){cb(u);let p=u.g,m=u.v[0]?()=>{}:null;u.g=null,u.v=null,h||cn(u,"ready");try{p.onreadystatechange=m}catch{}}}function cb(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function Jr(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<Jr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var h=this.g.responseText;return u&&h.indexOf(u)==0&&(h=h.substring(u.length)),XF(h)}};function ub(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function EL(u){let h={};u=(u.g&&2<=Jr(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<u.length;m++){if(q(u[m]))continue;var p=b(u[m]);let D=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let N=h[D]||[];h[D]=N,N.push(p)}C(h,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function eu(u,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||h}function lb(u){this.Aa=0,this.i=[],this.j=new zc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=eu("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=eu("baseRetryDelayMs",5e3,u),this.cb=eu("retryDelaySeedMs",1e4,u),this.Wa=eu("forwardChannelMaxRetries",2,u),this.wa=eu("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new G0(u&&u.concurrentRequestLimit),this.Da=new yL,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=lb.prototype,n.la=8,n.G=1,n.connect=function(u,h,p,m){un(0),this.W=u,this.H=h||{},p&&m!==void 0&&(this.H.OSID=p,this.H.OAID=m),this.F=this.X,this.I=vb(this,null,this.W),xd(this)};function Fm(u){if(db(u),u.G==3){var h=u.U++,p=Zr(u.I);if(nt(p,"SID",u.K),nt(p,"RID",h),nt(p,"TYPE","terminate"),tu(u,p),h=new Oi(u,u.j,h),h.L=2,h.v=Sd(Zr(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=h.v,p=!0),p||(h.g=wb(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Td(h)}yb(u)}function Nd(u){u.g&&(Vm(u),u.g.cancel(),u.g=null)}function db(u){Nd(u),u.u&&(a.clearTimeout(u.u),u.u=null),Md(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function xd(u){if(!z0(u.h)&&!u.s){u.s=!0;var h=u.Ga;Vc||C0(),Uc||(Vc(),Uc=!0),gm.add(h,u),u.B=0}}function CL(u,h){return W0(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=h.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Gc(g(u.Ga,u,h),_b(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let D=new Oi(this,this.j,u),N=this.o;if(this.S&&(N?(N=v(N),T(N,this.S)):N=this.S),this.m!==null||this.O||(D.H=N,N=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var m=this.i[p];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=fb(this,D,h),p=Zr(this.I),nt(p,"RID",u),nt(p,"CVER",22),this.D&&nt(p,"X-HTTP-Session-Id",this.D),tu(this,p),N&&(this.O?h="headers="+encodeURIComponent(String(ib(N)))+"&"+h:this.m&&km(p,this.m,N)),Om(this.h,D),this.Ua&&nt(p,"TYPE","init"),this.P?(nt(p,"$req",h),nt(p,"SID","null"),D.T=!0,Nm(D,p,null)):Nm(D,p,h),this.G=2}}else this.G==3&&(u?hb(this,u):this.i.length==0||z0(this.h)||hb(this))};function hb(u,h){var p;h?p=h.l:p=u.U++;let m=Zr(u.I);nt(m,"SID",u.K),nt(m,"RID",p),nt(m,"AID",u.T),tu(u,m),u.m&&u.o&&km(m,u.m,u.o),p=new Oi(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),h&&(u.i=h.D.concat(u.i)),h=fb(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Om(u.h,p),Nm(p,m,h)}function tu(u,h){u.H&&ee(u.H,function(p,m){nt(h,m,p)}),u.l&&Y0({},function(p,m){nt(h,m,p)})}function fb(u,h,p){p=Math.min(u.i.length,p);var m=u.l?g(u.l.Na,u.l,u):null;e:{var D=u.i;let N=-1;for(;;){let V=["count="+p];N==-1?0<p?(N=D[0].g,V.push("ofs="+N)):N=0:V.push("ofs="+N);let We=!0;for(let qt=0;qt<p;qt++){let Pe=D[qt].g,Qt=D[qt].map;if(Pe-=N,0>Pe)N=Math.max(0,D[qt].g-100),We=!1;else try{vL(Qt,V,"req"+Pe+"_")}catch{m&&m(Qt)}}if(We){m=V.join("&");break e}}}return u=u.i.splice(0,p),h.D=u,m}function pb(u){if(!u.g&&!u.u){u.Y=1;var h=u.Fa;Vc||C0(),Uc||(Vc(),Uc=!0),gm.add(h,u),u.v=0}}function Lm(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Gc(g(u.Fa,u),_b(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,gb(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Gc(g(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,un(10),Nd(this),gb(this))};function Vm(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function gb(u){u.g=new Oi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var h=Zr(u.qa);nt(h,"RID","rpc"),nt(h,"SID",u.K),nt(h,"AID",u.T),nt(h,"CI",u.F?"0":"1"),!u.F&&u.ja&&nt(h,"TO",u.ja),nt(h,"TYPE","xmlhttp"),tu(u,h),u.m&&u.o&&km(h,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=Sd(Zr(h)),p.m=null,p.P=!0,$0(p,u)}n.Za=function(){this.C!=null&&(this.C=null,Nd(this),Lm(this),un(19))};function Md(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function mb(u,h){var p=null;if(u.g==h){Md(u),Vm(u),u.g=null;var m=2}else if(Pm(u.h,h))p=h.D,K0(u.h,h),m=1;else return;if(u.G!=0){if(h.o)if(m==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var D=u.B;m=Id(),cn(m,new V0(m,p)),xd(u)}else pb(u);else if(D=h.s,D==3||D==0&&0<h.X||!(m==1&&CL(u,h)||m==2&&Lm(u)))switch(p&&0<p.length&&(h=u.h,h.i=h.i.concat(p)),D){case 1:Es(u,5);break;case 4:Es(u,10);break;case 3:Es(u,6);break;default:Es(u,2)}}}function _b(u,h){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*h}function Es(u,h){if(u.j.info("Error code "+h),h==2){var p=g(u.fb,u),m=u.Xa;let D=!m;m=new Is(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bd(m,"https"),Sd(m),D?mL(m.toString(),p):_L(m.toString(),p)}else un(2);u.G=0,u.l&&u.l.sa(h),yb(u),db(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),un(2)):(this.j.info("Failed to ping google.com"),un(1))};function yb(u){if(u.G=0,u.ka=[],u.l){let h=Q0(u.h);(h.length!=0||u.i.length!=0)&&(S(u.ka,h),S(u.ka,u.i),u.h.i.length=0,R(u.i),u.i.length=0),u.l.ra()}}function vb(u,h,p){var m=p instanceof Is?Zr(p):new Is(p);if(m.g!="")h&&(m.g=h+"."+m.g),Dd(m,m.s);else{var D=a.location;m=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var N=new Is(null);m&&bd(N,m),h&&(N.g=h),D&&Dd(N,D),p&&(N.l=p),m=N}return p=u.D,h=u.ya,p&&h&&nt(m,p,h),nt(m,"VER",u.la),tu(u,m),m}function wb(u,h,p){if(h&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=u.Ca&&!u.pa?new pt(new Zc({eb:p})):new pt(u.pa),h.Ha(u.J),h}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ib(){}n=Ib.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Pd(){}Pd.prototype.g=function(u,h){return new Fn(u,h)};function Fn(u,h){Kt.call(this),this.g=new lb(h),this.l=u,this.h=h&&h.messageUrlParams||null,u=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(u?u["X-WebChannel-Content-Type"]=h.messageContentType:u={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(u?u["X-WebChannel-Client-Profile"]=h.va:u={"X-WebChannel-Client-Profile":h.va}),this.g.S=u,(u=h&&h.Sb)&&!q(u)&&(this.g.m=u),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!q(h)&&(this.g.D=h,u=this.h,u!==null&&h in u&&(u=this.h,h in u&&delete u[h])),this.j=new Vo(this)}w(Fn,Kt),Fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Fn.prototype.close=function(){Fm(this.g)},Fn.prototype.o=function(u){var h=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Tm(u),u=p);h.i.push(new oL(h.Ya++,u)),h.G==3&&xd(h)},Fn.prototype.N=function(){this.g.l=null,delete this.j,Fm(this.g),delete this.g,Fn.aa.N.call(this)};function Eb(u){Dm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var h=u.__sm__;if(h){e:{for(let p in h){u=p;break e}u=void 0}(this.i=u)&&(u=this.i,h=h!==null&&u in h?h[u]:void 0),this.data=h}else this.data=u}w(Eb,Dm);function Cb(){Sm.call(this),this.status=1}w(Cb,Sm);function Vo(u){this.g=u}w(Vo,Ib),Vo.prototype.ua=function(){cn(this.g,"a")},Vo.prototype.ta=function(u){cn(this.g,new Eb(u))},Vo.prototype.sa=function(u){cn(this.g,new Cb)},Vo.prototype.ra=function(){cn(this.g,"b")},Pd.prototype.createWebChannel=Pd.prototype.g,Fn.prototype.send=Fn.prototype.o,Fn.prototype.open=Fn.prototype.m,Fn.prototype.close=Fn.prototype.close,rI=Ei.createWebChannelTransport=function(){return new Pd},nI=Ei.getStatEventTarget=function(){return Id()},tI=Ei.Event=vs,bp=Ei.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ed.NO_ERROR=0,Ed.TIMEOUT=8,Ed.HTTP_ERROR=6,gl=Ei.ErrorCode=Ed,U0.COMPLETE="complete",eI=Ei.EventType=U0,O0.EventType=Hc,Hc.OPEN="a",Hc.CLOSE="b",Hc.ERROR="c",Hc.MESSAGE="d",Kt.prototype.listen=Kt.prototype.K,Ua=Ei.WebChannel=O0,D4=Ei.FetchXmlHttpFactory=Zc,pt.prototype.listenOnce=pt.prototype.L,pt.prototype.getLastError=pt.prototype.Ka,pt.prototype.getLastErrorCode=pt.prototype.Ba,pt.prototype.getStatus=pt.prototype.Z,pt.prototype.getResponseJson=pt.prototype.Oa,pt.prototype.getResponseText=pt.prototype.oa,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Ha,Xw=Ei.XhrIo=pt}).apply(typeof Tp<"u"?Tp:typeof self<"u"?self:typeof window<"u"?window:{});var Zx="@firebase/firestore";var Bt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");var ic="10.14.0";var ho=new Ar("@firebase/firestore");function ml(){return ho.logLevel}function z(n,...e){if(ho.logLevel<=Jt.DEBUG){let t=e.map(UE);ho.debug(`Firestore (${ic}): ${n}`,...t)}}function Ci(n,...e){if(ho.logLevel<=Jt.ERROR){let t=e.map(UE);ho.error(`Firestore (${ic}): ${n}`,...t)}}function za(n,...e){if(ho.logLevel<=Jt.WARN){let t=e.map(UE);ho.warn(`Firestore (${ic}): ${n}`,...t)}}function UE(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function re(n="Unexpected state"){let e=`FIRESTORE (${ic}) INTERNAL ASSERTION FAILED: `+n;throw Ci(e),new Error(e)}function $e(n,e){n||re()}function ue(n,e){return n}var k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends yn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Hr=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Np=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Bt.UNAUTHENTICATED))}shutdown(){}},uI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},lI=class{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>y(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?($e(typeof r.accessToken=="string"),new Np(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string"),new Bt(e)}},dI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},hI=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dI(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},fI=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},pI=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){$e(this.o===void 0);let r=s=>{s.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?($e(typeof t.token=="string"),this.R=t.token,new fI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function S4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var xp=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=S4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ke(n,e){return n<e?-1:n>e?1:0}function Wa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Tt=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var he=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Tt(0,0))}static max(){return new n(new Tt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mp=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&re(),r===void 0?r=e.length-t:r>e.length-t&&re(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ht=class n extends Mp{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new G(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},A4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hn=class n extends Mp{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return A4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Z=class n{constructor(e){this.path=e}static fromPath(e){return new n(ht.fromString(e))}static fromName(e){return new n(ht.fromString(e).popFirst(5))}static empty(){return new n(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ht(e.slice()))}};var gI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};gI.UNKNOWN_ID=-1;function R4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Tt(t+1,0):new Tt(t,r));return new fo(i,Z.empty(),e)}function N4(n){return new fo(n.readTime,n.key,-1)}var fo=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(he.min(),Z.empty(),-1)}static max(){return new n(he.max(),Z.empty(),-1)}};function x4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Z.comparator(n.documentKey,e.documentKey),t!==0?t:ke(n.largestBatchId,e.largestBatchId))}var M4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",mI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kl(n){return y(this,null,function*(){if(n.code!==k.FAILED_PRECONDITION||n.message!==M4)throw n;z("LocalStore","Unexpectedly lost primary lease")})}var L=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&re(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},c=>r(c))}),o=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(d=>{o[l]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function P4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fl(n){return n.name==="IndexedDbTransactionError"}var MM=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ug(n){return n==null}function El(n){return n===0&&1/n==-1/0}function O4(n){return typeof n=="number"&&Number.isInteger(n)&&!El(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var k4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Jse=[...k4,"documentOverlays"],F4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],L4=F4,V4=[...L4,"indexConfiguration","indexState","indexEntries"];var Xse=[...V4,"globals"];function Jx(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sc(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function PM(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var yt=class n{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}},Ha=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},qr=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw re();let e=this.left.check();if(e!==this.right.check())throw re();return e+(this.isRed()?0:1)}};qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1;qr.EMPTY=new class{constructor(){this.size=0}get key(){throw re()}get value(){throw re()}get color(){throw re()}get left(){throw re()}get right(){throw re()}copy(e,t,r,i,s){return this}insert(e,t,r){return new qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var tn=class n{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pp(this.data.getIterator())}getIteratorFrom(e){return new Pp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Pp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var $r=class n{constructor(e){this.fields=e,e.sort(Hn.comparator)}static empty(){return new n([])}unionWith(e){let t=new tn(Hn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Op=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var nn=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Op("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};nn.EMPTY_BYTE_STRING=new nn("");var U4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(n){if($e(!!n),typeof n=="string"){let e=0,t=U4.exec(n);if($e(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:at(n.seconds),nanos:at(n.nanos)}}function at(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ds(n){return typeof n=="string"?nn.fromBase64String(n):nn.fromUint8Array(n)}function jE(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function BE(n){let e=n.mapValue.fields.__previous_value__;return jE(e)?BE(e):e}function Cl(n){let e=Ti(n.mapValue.fields.__local_write_time__.timestampValue);return new Tt(e.seconds,e.nanos)}var _I=class{constructor(e,t,r,i,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},kp=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Dp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jE(n)?4:kM(n)?9007199254740991:OM(n)?10:11:re()}function Wr(n,e){if(n===e)return!0;let t=po(n);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cl(n).isEqual(Cl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ti(i.timestampValue),a=Ti(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ds(i.bytesValue).isEqual(ds(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return at(i.geoPointValue.latitude)===at(s.geoPointValue.latitude)&&at(i.geoPointValue.longitude)===at(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return at(i.integerValue)===at(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=at(i.doubleValue),a=at(s.doubleValue);return o===a?El(o)===El(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Wa(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Jx(o)!==Jx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Wr(o[c],a[c])))return!1;return!0}(n,e);default:return re()}}function Tl(n,e){return(n.values||[]).find(t=>Wr(t,e))!==void 0}function Ka(n,e){if(n===e)return 0;let t=po(n),r=po(e);if(t!==r)return ke(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ke(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=at(s.integerValue||s.doubleValue),c=at(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return Xx(n.timestampValue,e.timestampValue);case 4:return Xx(Cl(n),Cl(e));case 5:return ke(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ds(s),c=ds(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=ke(a[l],c[l]);if(d!==0)return d}return ke(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ke(at(s.latitude),at(o.latitude));return a!==0?a:ke(at(s.longitude),at(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return eM(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,c,l,d;let f=s.fields||{},g=o.fields||{},_=(a=f.value)===null||a===void 0?void 0:a.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,R=ke(((l=_?.values)===null||l===void 0?void 0:l.length)||0,((d=w?.values)===null||d===void 0?void 0:d.length)||0);return R!==0?R:eM(_,w)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===Dp.mapValue&&o===Dp.mapValue)return 0;if(s===Dp.mapValue)return 1;if(o===Dp.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let f=0;f<c.length&&f<d.length;++f){let g=ke(c[f],d[f]);if(g!==0)return g;let _=Ka(a[c[f]],l[d[f]]);if(_!==0)return _}return ke(c.length,d.length)}(n.mapValue,e.mapValue);default:throw re()}}function Xx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ke(n,e);let t=Ti(n),r=Ti(e),i=ke(t.seconds,r.seconds);return i!==0?i:ke(t.nanos,r.nanos)}function eM(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=Ka(t[i],r[i]);if(s)return s}return ke(t.length,r.length)}function Qa(n){return yI(n)}function yI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ti(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ds(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=yI(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${yI(t.fields[o])}`;return i+"}"}(n.mapValue):re()}function tM(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function vI(n){return!!n&&"integerValue"in n}function $E(n){return!!n&&"arrayValue"in n}function nM(n){return!!n&&"nullValue"in n}function rM(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ap(n){return!!n&&"mapValue"in n}function OM(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function yl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return sc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var vr=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ap(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yl(t)}setAll(e){let t=Hn.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=yl(o):i.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());Ap(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Ap(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){sc(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(yl(this.value))}};function FM(n){let e=[];return sc(n.fields,(t,r)=>{let i=new Hn([t]);if(Ap(r)){let s=FM(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new $r(e)}var wr=class n{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,he.min(),he.min(),he.min(),vr.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,he.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,he.min(),he.min(),vr.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,he.min(),he.min(),vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ya=class{constructor(e,t){this.position=e,this.inclusive=t}};function iM(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],o=n.position[i];if(s.field.isKeyField()?r=Z.comparator(Z.fromName(o.referenceValue),t.key):r=Ka(o,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sM(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}var Za=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function j4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Fp=class{},Ot=class n extends Fp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new II(e,t,r):t==="array-contains"?new TI(e,r):t==="in"?new bI(e,r):t==="not-in"?new DI(e,r):t==="array-contains-any"?new SI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new EI(e,r):new CI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ka(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(Ka(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return re()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Ir=class n extends Fp{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return LM(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function LM(n){return n.op==="and"}function VM(n){return B4(n)&&LM(n)}function B4(n){for(let e of n.filters)if(e instanceof Ir)return!1;return!0}function wI(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Qa(n.value);if(VM(n))return n.filters.map(e=>wI(e)).join(",");{let e=n.filters.map(t=>wI(t)).join(",");return`${n.op}(${e})`}}function UM(n,e){return n instanceof Ot?function(r,i){return i instanceof Ot&&r.op===i.op&&r.field.isEqual(i.field)&&Wr(r.value,i.value)}(n,e):n instanceof Ir?function(r,i){return i instanceof Ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&UM(o,i.filters[a]),!0):!1}(n,e):void re()}function jM(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${Qa(t.value)}`}(n):n instanceof Ir?function(t){return t.op.toString()+" {"+t.getFilters().map(jM).join(" ,")+"}"}(n):"Filter"}var II=class extends Ot{constructor(e,t,r){super(e,t,r),this.key=Z.fromName(r.referenceValue)}matches(e){let t=Z.comparator(e.key,this.key);return this.matchesComparison(t)}},EI=class extends Ot{constructor(e,t){super(e,"in",t),this.keys=BM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},CI=class extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=BM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function BM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Z.fromName(r.referenceValue))}var TI=class extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return $E(t)&&Tl(t.arrayValue,this.value)}},bI=class extends Ot{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Tl(this.value.arrayValue,t)}},DI=class extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Tl(this.value.arrayValue,t)}},SI=class extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!$E(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tl(this.value.arrayValue,r))}};var AI=class{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function oM(n,e=null,t=[],r=[],i=null,s=null,o=null){return new AI(n,e,t,r,i,s,o)}function HE(n){let e=ue(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>wI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ug(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Qa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Qa(r)).join(",")),e.ue=t}return e.ue}function qE(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!j4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!UM(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!sM(n.startAt,e.startAt)&&sM(n.endAt,e.endAt)}function RI(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var go=class{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function $4(n,e,t,r,i,s,o,a){return new go(n,e,t,r,i,s,o,a)}function GE(n){return new go(n)}function aM(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function $M(n){return n.collectionGroup!==null}function vl(n){let e=ue(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(Hn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Za(s,r))}),t.has(Hn.keyField().canonicalString())||e.ce.push(new Za(Hn.keyField(),r))}return e.ce}function Gr(n){let e=ue(n);return e.le||(e.le=H4(e,vl(n))),e.le}function H4(n,e){if(n.limitType==="F")return oM(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Za(i.field,s)});let t=n.endAt?new Ya(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ya(n.startAt.position,n.startAt.inclusive):null;return oM(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function NI(n,e){let t=n.filters.concat([e]);return new go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function xI(n,e,t){return new go(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lg(n,e){return qE(Gr(n),Gr(e))&&n.limitType===e.limitType}function HM(n){return`${HE(Gr(n))}|lt:${n.limitType}`}function ja(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>jM(i)).join(", ")}]`),ug(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Qa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Qa(i)).join(",")),`Target(${r})`}(Gr(n))}; limitType=${n.limitType})`}function dg(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of vl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let l=iM(o,a,c);return o.inclusive?l<=0:l<0}(r.startAt,vl(r),i)||r.endAt&&!function(o,a,c){let l=iM(o,a,c);return o.inclusive?l>=0:l>0}(r.endAt,vl(r),i))}(n,e)}function q4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function qM(n){return(e,t)=>{let r=!1;for(let i of vl(n)){let s=G4(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function G4(n,e,t){let r=n.field.isKeyField()?Z.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Ka(c,l):re()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return re()}}var hs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){sc(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return PM(this.inner)}size(){return this.innerSize}};var z4=new yt(Z.comparator);function bi(){return z4}var GM=new yt(Z.comparator);function _l(...n){let e=GM;for(let t of n)e=e.insert(t.key,t);return e}function zM(n){let e=GM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ao(){return wl()}function WM(){return wl()}function wl(){return new hs(n=>n.toString(),(n,e)=>n.isEqual(e))}var W4=new yt(Z.comparator),K4=new tn(Z.comparator);function be(...n){let e=K4;for(let t of n)e=e.add(t);return e}var Q4=new tn(ke);function Y4(){return Q4}function zE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:El(e)?"-0":e}}function KM(n){return{integerValue:""+n}}function Z4(n,e){return O4(e)?KM(e):zE(n,e)}var Ja=class{constructor(){this._=void 0}};function J4(n,e,t){return n instanceof Xa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&jE(s)&&(s=BE(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof mo?YM(n,e):n instanceof _o?ZM(n,e):function(i,s){let o=QM(i,s),a=cM(o)+cM(i.Pe);return vI(o)&&vI(i.Pe)?KM(a):zE(i.serializer,a)}(n,e)}function X4(n,e,t){return n instanceof mo?YM(n,e):n instanceof _o?ZM(n,e):t}function QM(n,e){return n instanceof ec?function(r){return vI(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Xa=class extends Ja{},mo=class extends Ja{constructor(e){super(),this.elements=e}};function YM(n,e){let t=JM(e);for(let r of n.elements)t.some(i=>Wr(i,r))||t.push(r);return{arrayValue:{values:t}}}var _o=class extends Ja{constructor(e){super(),this.elements=e}};function ZM(n,e){let t=JM(e);for(let r of n.elements)t=t.filter(i=>!Wr(i,r));return{arrayValue:{values:t}}}var ec=class extends Ja{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function cM(n){return at(n.integerValue||n.doubleValue)}function JM(n){return $E(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function e3(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof mo&&i instanceof mo||r instanceof _o&&i instanceof _o?Wa(r.elements,i.elements,Wr):r instanceof ec&&i instanceof ec?Wr(r.Pe,i.Pe):r instanceof Xa&&i instanceof Xa}(n.transform,e.transform)}var MI=class{constructor(e,t){this.version=e,this.transformResults=t}},lo=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Rp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var tc=class{};function XM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Lp(n.key,lo.none()):new yo(n.key,n.data,lo.none());{let t=n.data,r=vr.empty(),i=new tn(Hn.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Di(n.key,r,new $r(i.toArray()),lo.none())}}function t3(n,e,t){n instanceof yo?function(i,s,o){let a=i.value.clone(),c=lM(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Di?function(i,s,o){if(!Rp(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=lM(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(eP(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Il(n,e,t,r){return n instanceof yo?function(s,o,a,c){if(!Rp(s.precondition,o))return a;let l=s.value.clone(),d=dM(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof Di?function(s,o,a,c){if(!Rp(s.precondition,o))return a;let l=dM(s.fieldTransforms,c,o),d=o.data;return d.setAll(eP(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,r):function(s,o,a){return Rp(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function n3(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=QM(r.transform,i||null);s!=null&&(t===null&&(t=vr.empty()),t.set(r.field,s))}return t||null}function uM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Wa(r,i,(s,o)=>e3(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yo=class extends tc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Di=class extends tc{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function eP(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function lM(n,e,t){let r=new Map;$e(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,X4(o,a,t[i]))}return r}function dM(n,e,t){let r=new Map;for(let i of n){let s=i.transform,o=t.data.field(i.field);r.set(i.field,J4(s,o,e))}return r}var Lp=class extends tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},PI=class extends tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var OI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&t3(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Il(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Il(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=WM();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;let c=XM(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),be())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,(t,r)=>uM(t,r))&&Wa(this.baseMutations,e.baseMutations,(t,r)=>uM(t,r))}},kI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){$e(e.mutations.length===r.length);let i=function(){return W4}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new n(e,t,r,i)}};var FI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var LI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Mt,Ne;function r3(n){switch(n){default:return re();case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0}}function tP(n){if(n===void 0)return Ci("GRPC error has no .code"),k.UNKNOWN;switch(n){case Mt.OK:return k.OK;case Mt.CANCELLED:return k.CANCELLED;case Mt.UNKNOWN:return k.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return k.INTERNAL;case Mt.UNAVAILABLE:return k.UNAVAILABLE;case Mt.UNAUTHENTICATED:return k.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case Mt.NOT_FOUND:return k.NOT_FOUND;case Mt.ALREADY_EXISTS:return k.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return k.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case Mt.ABORTED:return k.ABORTED;case Mt.OUT_OF_RANGE:return k.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return k.UNIMPLEMENTED;case Mt.DATA_LOSS:return k.DATA_LOSS;default:return re()}}(Ne=Mt||(Mt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";var hM=null;function i3(){return new TextEncoder}var s3=new cs([4294967295,4294967295],0);function fM(n){let e=i3().encode(n),t=new Jw;return t.update(e),new Uint8Array(t.digest())}function pM(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new cs([t,r],0),new cs([i,s],0)]}var VI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new co(`Invalid padding: ${t}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new co(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=cs.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(cs.fromNumber(r)));return i.compare(s3)===1&&(i=new cs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=fM(e),[r,i]=pM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=fM(e),[r,i]=pM(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},co=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vp=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(he.min(),i,new yt(ke),bi(),be())}},bl=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,be(),be(),be())}};var qa=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},Up=class{constructor(e,t){this.targetId=e,this.me=t}},jp=class{constructor(e,t,r=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Bp=class{constructor(){this.fe=0,this.ge=mM(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=be(),t=be(),r=be();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:re()}}),new bl(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=mM()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,$e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},UI=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=bi(),this.qe=gM(),this.Qe=new yt(ke)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:re()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(RI(s))if(r===0){let o=new Z(s.path);this.Ue(t,o,wr.newNoDocument(o,he.min()))}else $e(r===1);else{let o=this.Ye(t);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}hM?.et(function(d,f,g,_,w){var R,S,F,q,W,J;let ze={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},ee=f.unchangedNames;return ee&&(ze.bloomFilter={applied:w===0,hashCount:(R=ee?.hashCount)!==null&&R!==void 0?R:0,bitmapLength:(q=(F=(S=ee?.bits)===null||S===void 0?void 0:S.bitmap)===null||F===void 0?void 0:F.length)!==null&&q!==void 0?q:0,padding:(J=(W=ee?.bits)===null||W===void 0?void 0:W.padding)!==null&&J!==void 0?J:0,mightContain:C=>{var v;return(v=_?.mightContain(C))!==null&&v!==void 0&&v}}),ze}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,o,a;try{o=ds(r).toUint8Array()}catch(c){if(c instanceof Op)return za("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new VI(o,i,s)}catch(c){return za(c instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&RI(a.target)){let c=new Z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,wr.newNoDocument(c,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let r=be();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Vp(e,t,this.Qe,this.ke,r);return this.ke=bi(),this.qe=gM(),this.Qe=new yt(ke),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Bp,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new tn(ke),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||z("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bp),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function gM(){return new yt(Z.comparator)}function mM(){return new yt(Z.comparator)}var o3={asc:"ASCENDING",desc:"DESCENDING"},a3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c3={and:"AND",or:"OR"},jI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function BI(n,e){return n.useProto3Json||ug(e)?e:{value:e}}function $p(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u3(n,e){return $p(n,e.toTimestamp())}function zr(n){return $e(!!n),he.fromTimestamp(function(t){let r=Ti(t);return new Tt(r.seconds,r.nanos)}(n))}function WE(n,e){return $I(n,e).canonicalString()}function $I(n,e){let t=function(i){return new ht(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function rP(n){let e=ht.fromString(n);return $e(cP(e)),e}function HI(n,e){return WE(n.databaseId,e.path)}function iI(n,e){let t=rP(e);if(t.get(1)!==n.databaseId.projectId)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new G(k.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Z(sP(t))}function iP(n,e){return WE(n.databaseId,e)}function l3(n){let e=rP(n);return e.length===4?ht.emptyPath():sP(e)}function qI(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sP(n){return $e(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function _M(n,e,t){return{name:HI(n,e),fields:t.value.mapValue.fields}}function d3(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:re()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?($e(d===void 0||typeof d=="string"),nn.fromBase64String(d||"")):($e(d===void 0||d instanceof Buffer||d instanceof Uint8Array),nn.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let d=l.code===void 0?k.UNKNOWN:tP(l.code);return new G(d,l.message||"")}(o);t=new jp(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=iI(n,r.document.name),s=zr(r.document.updateTime),o=r.document.createTime?zr(r.document.createTime):he.min(),a=new vr({mapValue:{fields:r.document.fields}}),c=wr.newFoundDocument(i,s,o,a),l=r.targetIds||[],d=r.removedTargetIds||[];t=new qa(l,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=iI(n,r.document),s=r.readTime?zr(r.readTime):he.min(),o=wr.newNoDocument(i,s),a=r.removedTargetIds||[];t=new qa([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=iI(n,r.document),s=r.removedTargetIds||[];t=new qa([],s,i,null)}else{if(!("filter"in e))return re();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new LI(i,s),a=r.targetId;t=new Up(a,o)}}return t}function h3(n,e){let t;if(e instanceof yo)t={update:_M(n,e.key,e.value)};else if(e instanceof Lp)t={delete:HI(n,e.key)};else if(e instanceof Di)t={update:_M(n,e.key,e.data),updateMask:I3(e.fieldMask)};else{if(!(e instanceof PI))return re();t={verify:HI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof Xa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof mo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof _o)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ec)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw re()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:re()}(n,e.precondition)),t}function f3(n,e){return n&&n.length>0?($e(e!==void 0),n.map(t=>function(i,s){let o=i.updateTime?zr(i.updateTime):zr(s);return o.isEqual(he.min())&&(o=zr(s)),new MI(o,i.transformResults||[])}(t,e))):[]}function p3(n,e){return{documents:[iP(n,e.path)]}}function g3(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=iP(n,i);let s=function(l){if(l.length!==0)return aP(Ir.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(g){return{field:Ba(g.field),direction:y3(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=BI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function m3(n){let e=l3(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){$e(r===1);let d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=function(f){let g=oP(f);return g instanceof Ir&&VM(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(w){return new Za($a(w.field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,ug(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,_=f.values||[];return new Ya(_,g)}(t.startAt));let l=null;return t.endAt&&(l=function(f){let g=!f.before,_=f.values||[];return new Ya(_,g)}(t.endAt)),$4(e,i,o,s,a,"F",c,l)}function _3(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return re()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function oP(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=$a(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=$a(t.unaryFilter.field);return Ot.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=$a(t.unaryFilter.field);return Ot.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=$a(t.unaryFilter.field);return Ot.create(o,"!=",{nullValue:"NULL_VALUE"});default:return re()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create($a(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return re()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Ir.create(t.compositeFilter.filters.map(r=>oP(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return re()}}(t.compositeFilter.op))}(n):re()}function y3(n){return o3[n]}function v3(n){return a3[n]}function w3(n){return c3[n]}function Ba(n){return{fieldPath:n.canonicalString()}}function $a(n){return Hn.fromServerFormat(n.fieldPath)}function aP(n){return n instanceof Ot?function(t){if(t.op==="=="){if(rM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NAN"}};if(nM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(rM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NAN"}};if(nM(t.value))return{unaryFilter:{field:Ba(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ba(t.field),op:v3(t.op),value:t.value}}}(n):n instanceof Ir?function(t){let r=t.getFilters().map(i=>aP(i));return r.length===1?r[0]:{compositeFilter:{op:w3(t.op),filters:r}}}(n):re()}function I3(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Dl=class n{constructor(e,t,r,i,s=he.min(),o=he.min(),a=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var GI=class{constructor(e){this.ct=e}};function E3(n){let e=m3({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?xI(e,e.limit,"L"):e}var Hp=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(at(e.integerValue));else if("doubleValue"in e){let r=at(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),El(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ti(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ds(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?kM(e)?this.dt(t,Number.MAX_SAFE_INTEGER):OM(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):re()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(at(a)),this.Vt(o,t),this.Tt(s[o],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),Z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Hp.vt=new Hp;var zI=class{constructor(){this.un=new WI}addToCollectionParentIndex(e,t){return this.un.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(fo.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(fo.min())}updateCollectionGroup(e,t,r){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}},WI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(ht.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(ht.comparator)).toArray()}};var toe=new Uint8Array(0);var Br=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(41943040,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);var Sl=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var KI=class{constructor(){this.changes=new hs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?L.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var QI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var YI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Il(r.mutation,i,$r.empty(),Tt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=be()){let i=ao();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=_l();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let r=ao();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,be()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=bi(),o=wl(),a=function(){return wl()}();return t.forEach((c,l)=>{let d=r.get(l.key);i.has(l.key)&&(d===void 0||d.mutation instanceof Di)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),Il(d.mutation,l,d.mutation.getFieldMask(),Tt.now())):o.set(l.key,$r.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),t.forEach((l,d)=>{var f;return a.set(l,new QI(d,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let r=wl(),i=new yt((o,a)=>o-a),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let d=r.get(c)||$r.empty();d=a.applyToLocalView(l,d),r.set(c,d);let f=(i.get(a.batchId)||be()).add(c);i=i.insert(a.batchId,f)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,f=WM();d.forEach(g=>{if(!s.has(g)){let _=XM(t.get(g),r.get(g));_!==null&&f.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):$M(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):L.resolve(ao()),a=-1,c=s;return o.next(l=>L.forEach(l,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,be())).next(d=>({batchId:a,changes:zM(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Z(t)).next(r=>{let i=_l();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,o=_l();return this.indexManager.getCollectionParents(e,s).next(a=>L.forEach(a,c=>{let l=function(f,g){return new go(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(d=>{d.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,wr.newInvalidDocument(d)))});let a=_l();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&Il(d.mutation,l,$r.empty(),Tt.now()),dg(t,l)&&(a=a.insert(c,l))}),a})}};var ZI=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return L.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:zr(i.createTime)}}(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:E3(i.bundledQuery),readTime:zr(i.readTime)}}(t)),L.resolve()}};var JI=class{constructor(){this.overlays=new yt(Z.comparator),this.Ir=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){let r=ao();return L.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),L.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,t,r){let i=ao(),s=t.length+1,o=new Z(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return L.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new yt((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let d=s.get(l.largestBatchId);d===null&&(d=ao(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=ao(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=i)););return L.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new FI(t,r));let s=this.Ir.get(t);s===void 0&&(s=be(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var XI=class{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}};var Al=class{constructor(){this.Tr=new tn(Pt.Er),this.dr=new tn(Pt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new Pt(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Pt(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new Z(new ht([])),r=new Pt(t,e),i=new Pt(t,e+1),s=[];return this.dr.forEachInRange([r,i],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new Z(new ht([])),r=new Pt(t,e),i=new Pt(t,e+1),s=be();return this.dr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Pt(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Pt=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return Z.comparator(e.key,t.key)||ke(e.wr,t.wr)}static Ar(e,t){return ke(e.wr,t.wr)||Z.comparator(e.key,t.key)}};var eE=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new tn(Pt.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new OI(s,t,r,i);this.mutationQueue.push(o);for(let a of i)this.br=this.br.add(new Pt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,t){return L.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return L.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Pt(t,0),i=new Pt(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],o=>{let a=this.Dr(o.wr);s.push(a)}),L.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(ke);return t.forEach(i=>{let s=new Pt(i,0),o=new Pt(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;Z.isDocumentKey(s)||(s=s.child(""));let o=new Pt(new Z(s),0),a=new tn(ke);return this.br.forEachWhile(c=>{let l=c.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(c.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){$e(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(t.mutations,i=>{let s=new Pt(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new Pt(t,0),i=this.br.firstAfterOrEqual(r);return L.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var tE=class{constructor(e){this.Mr=e,this.docs=function(){return new yt(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return L.resolve(r?r.document.mutableCopy():wr.newInvalidDocument(t))}getEntries(e,t){let r=bi();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():wr.newInvalidDocument(i))}),L.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=bi(),o=t.path,a=new Z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||x4(N4(d),r)<=0||(i.has(d.key)||dg(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return L.resolve(s)}getAllFromCollectionGroup(e,t,r,i){re()}Or(e,t){return L.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new nE(this)}getSize(e){return L.resolve(this.size)}},nE=class extends KI{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),L.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var rE=class{constructor(e){this.persistence=e,this.Nr=new hs(t=>HE(t),qE),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Al,this.targetCount=0,this.kr=Sl.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),L.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Sl(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Kn(t),L.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),L.waitFor(s).next(()=>i)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return L.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),L.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),L.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),L.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return L.resolve(r)}containsKey(e,t){return L.resolve(this.Br.containsKey(t))}};var iE=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new MM(0),this.Kr=!1,this.Kr=!0,this.$r=new XI,this.referenceDelegate=e(this),this.Ur=new rE(this),this.indexManager=new zI,this.remoteDocumentCache=function(i){return new tE(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new GI(t),this.Gr=new ZI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new eE(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){z("MemoryPersistence","Starting transaction:",e);let i=new sE(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},sE=class extends mI{constructor(e){super(),this.currentSequenceNumber=e}},oE=class n{constructor(e){this.persistence=e,this.Jr=new Al,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw re()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),L.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{let i=Z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,he.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return L.or([()=>L.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var aE=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=be(),i=be();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var cE=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var uE=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return xb()?8:P4(Zt())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cE;return this.Xi(e,t,o).next(a=>{if(s.result=a,this.zi)return this.es(e,t,o,a.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ml()<=Jt.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",ja(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(ml()<=Jt.DEBUG&&z("QueryEngine","Query:",ja(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ml()<=Jt.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",ja(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):L.resolve())}Yi(e,t){if(aM(t))return L.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=xI(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=be(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let l=this.ts(t,a);return this.ns(t,l,o,c.readTime)?this.Yi(e,xI(t,null,"F")):this.rs(e,l,t,c)}))})))}Zi(e,t,r,i){return aM(t)||i.isEqual(he.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let o=this.ts(t,s);return this.ns(t,o,r,i)?L.resolve(null):(ml()<=Jt.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ja(t)),this.rs(e,o,t,R4(i,-1)).next(a=>a))})}ts(e,t){let r=new tn(qM(e));return t.forEach((i,s)=>{dg(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return ml()<=Jt.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",ja(t)),this.Ji.getDocumentsMatchingQuery(e,t,fo.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var lE=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new yt(ke),this._s=new hs(s=>HE(s),qE),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YI(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function C3(n,e,t,r){return new lE(n,e,t,r)}function uP(n,e){return y(this,null,function*(){let t=ue(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=be();for(let l of i){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(l=>({hs:l,removedBatchIds:o,addedBatchIds:a}))})})})}function T3(n,e){let t=ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let f=l.batch,g=f.keys(),_=L.resolve();return g.forEach(w=>{_=_.next(()=>d.getEntry(c,w)).next(R=>{let S=l.docVersions.get(w);$e(S!==null),R.version.compareTo(S)<0&&(f.applyToRemoteDocument(R,l),R.isValidDocument()&&(R.setReadTime(l.commitVersion),d.addEntry(R)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=be();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function lP(n){let e=ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function b3(n,e){let t=ue(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((d,f)=>{let g=i.get(f);if(!g)return;a.push(t.Ur.removeMatchingKeys(s,d.removedDocuments,f).next(()=>t.Ur.addMatchingKeys(s,d.addedDocuments,f)));let _=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?_=_.withResumeToken(nn.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,r)),i=i.insert(f,_),function(R,S,F){return R.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:F.addedDocuments.size+F.modifiedDocuments.size+F.removedDocuments.size>0}(g,_,d)&&a.push(t.Ur.updateTargetData(s,_))});let c=bi(),l=be();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(D3(s,o,e.documentUpdates).next(d=>{c=d.Ps,l=d.Is})),!r.isEqual(he.min())){let d=t.Ur.getLastRemoteSnapshotVersion(s).next(f=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.os=i,s))}function D3(n,e,t){let r=be(),i=be();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=bi();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(he.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{Ps:o,Is:i}})}function S3(n,e){let t=ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function A3(n,e){let t=ue(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,L.resolve(i)):t.Ur.allocateTargetId(r).next(o=>(i=new Dl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function dE(n,e,t){return y(this,null,function*(){let r=ue(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Fl(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function yM(n,e,t){let r=ue(n),i=he.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let f=ue(c),g=f._s.get(d);return g!==void 0?L.resolve(f.os.get(g)):f.Ur.getTargetData(l,d)}(r,o,Gr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,t?i:he.min(),t?s:be())).next(a=>(R3(r,q4(e),a),{documents:a,Ts:s})))}function R3(n,e,t){let r=n.us.get(e)||he.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var qp=class{constructor(){this.activeTargetIds=Y4()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hE=class{constructor(){this.so=new qp,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fE=class{_o(e){}shutdown(){}};var Gp=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sp=null;function sI(){return Sp===null?Sp=function(){return 268435456+Math.round(2147483648*Math.random())}():Sp++,"0x"+Sp.toString(16)}var N3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var pE=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var en="WebChannelConnection",gE=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,o){let a=sI(),c=this.xo(t,r.toUriEncodedString());z("RestConnection",`Sending RPC '${t}' ${a}:`,c,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,s,o),this.No(t,c,l,i).then(d=>(z("RestConnection",`Received RPC '${t}' ${a}: `,d),d),d=>{throw za("RestConnection",`RPC '${t}' ${a} failed with error: `,d,"url: ",c,"request:",i),d})}Lo(t,r,i,s,o,a){return this.Mo(t,r,i,s,o)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ic}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}xo(t,r){let i=N3[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=sI();return new Promise((o,a)=>{let c=new Xw;c.setWithCredentials(!0),c.listenOnce(eI.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case gl.NO_ERROR:let d=c.getResponseJson();z(en,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),o(d);break;case gl.TIMEOUT:z(en,`RPC '${e}' ${s} timed out`),a(new G(k.DEADLINE_EXCEEDED,"Request time out"));break;case gl.HTTP_ERROR:let f=c.getStatus();if(z(en,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let _=g?.error;if(_&&_.status&&_.message){let w=function(S){let F=S.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(F)>=0?F:k.UNKNOWN}(_.status);a(new G(w,_.message))}else a(new G(k.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(k.UNAVAILABLE,"Connection failed."));break;default:re()}}finally{z(en,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);z(en,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=sI(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rI(),a=nI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let d=s.join("");z(en,`Creating RPC '${e}' stream ${i}: ${d}`,c);let f=o.createWebChannel(d,c),g=!1,_=!1,w=new pE({Io:S=>{_?z(en,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(g||(z(en,`Opening RPC '${e}' stream ${i} transport.`),f.open(),g=!0),z(en,`RPC '${e}' stream ${i} sending:`,S),f.send(S))},To:()=>f.close()}),R=(S,F,q)=>{S.listen(F,W=>{try{q(W)}catch(J){setTimeout(()=>{throw J},0)}})};return R(f,Ua.EventType.OPEN,()=>{_||(z(en,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),R(f,Ua.EventType.CLOSE,()=>{_||(_=!0,z(en,`RPC '${e}' stream ${i} transport closed`),w.So())}),R(f,Ua.EventType.ERROR,S=>{_||(_=!0,za(en,`RPC '${e}' stream ${i} transport errored:`,S),w.So(new G(k.UNAVAILABLE,"The operation could not be completed")))}),R(f,Ua.EventType.MESSAGE,S=>{var F;if(!_){let q=S.data[0];$e(!!q);let W=q,J=W.error||((F=W[0])===null||F===void 0?void 0:F.error);if(J){z(en,`RPC '${e}' stream ${i} received error:`,J);let ze=J.status,ee=function(I){let T=Mt[I];if(T!==void 0)return tP(T)}(ze),C=J.message;ee===void 0&&(ee=k.INTERNAL,C="Unknown error status: "+ze+" with message "+J.message),_=!0,w.So(new G(ee,C)),f.close()}else z(en,`RPC '${e}' stream ${i} received:`,q),w.bo(q)}}),R(a,tI.STAT_EVENT,S=>{S.stat===bp.PROXY?z(en,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===bp.NOPROXY&&z(en,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}};function oI(){return typeof document<"u"?document:null}function hg(n){return new jI(n,!0)}var zp=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&z("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Wp=class{constructor(e,t,r,i,s,o,a,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new zp(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return y(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return y(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return y(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===k.RESOURCE_EXHAUSTED?(Ci(t.toString()),Ci("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new G(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>y(this,null,function*(){this.state=0,this.start()}))}I_(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},mE=class extends Wp{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=d3(this.serializer,e),r=function(s){if(!("targetChange"in s))return he.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?he.min():o.readTime?zr(o.readTime):he.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=qI(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=RI(c)?{documents:p3(s,c)}:{query:g3(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=nP(s,o.resumeToken);let l=BI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(he.min())>0){a.readTime=$p(s,o.snapshotVersion.toTimestamp());let l=BI(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=_3(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=qI(this.serializer),t.removeTarget=e,this.a_(t)}},_E=class extends Wp{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return $e(!!e.streamToken),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){$e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=f3(e.writeResults,e.commitTime),r=zr(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=qI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>h3(this.serializer,r))};this.a_(t)}};var yE=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,$I(t,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(k.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,$I(t,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(k.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},vE=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ci(t),this.D_=!1):z("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var wE=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{r.enqueueAndForget(()=>y(this,null,function*(){Io(this)&&(z("RemoteStore","Restarting streams for network reachability change."),yield function(c){return y(this,null,function*(){let l=ue(c);l.L_.add(4),yield Ll(l),l.q_.set("Unknown"),l.L_.delete(4),yield fg(l)})}(this))}))}),this.q_=new vE(r,i)}};function fg(n){return y(this,null,function*(){if(Io(n))for(let e of n.B_)yield e(!0)})}function Ll(n){return y(this,null,function*(){for(let e of n.B_)yield e(!1)})}function dP(n,e){let t=ue(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),ZE(t)?YE(t):oc(t).r_()&&QE(t,e))}function KE(n,e){let t=ue(n),r=oc(t);t.N_.delete(e),r.r_()&&hP(t,e),t.N_.size===0&&(r.r_()?r.o_():Io(t)&&t.q_.set("Unknown"))}function QE(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oc(n).A_(e)}function hP(n,e){n.Q_.xe(e),oc(n).R_(e)}function YE(n){n.Q_=new UI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),oc(n).start(),n.q_.v_()}function ZE(n){return Io(n)&&!oc(n).n_()&&n.N_.size>0}function Io(n){return ue(n).L_.size===0}function fP(n){n.Q_=void 0}function x3(n){return y(this,null,function*(){n.q_.set("Online")})}function M3(n){return y(this,null,function*(){n.N_.forEach((e,t)=>{QE(n,e)})})}function P3(n,e){return y(this,null,function*(){fP(n),ZE(n)?(n.q_.M_(e),YE(n)):n.q_.set("Unknown")})}function O3(n,e,t){return y(this,null,function*(){if(n.q_.set("Online"),e instanceof jp&&e.state===2&&e.cause)try{yield function(i,s){return y(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kp(n,r)}else if(e instanceof qa?n.Q_.Ke(e):e instanceof Up?n.Q_.He(e):n.Q_.We(e),!t.isEqual(he.min()))try{let r=yield lP(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){let a=s.Q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.N_.get(l);d&&s.N_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.N_.get(c);if(!d)return;s.N_.set(c,d.withResumeToken(nn.EMPTY_BYTE_STRING,d.snapshotVersion)),hP(s,c);let f=new Dl(d.target,c,l,d.sequenceNumber);QE(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){z("RemoteStore","Failed to raise snapshot:",r),yield Kp(n,r)}})}function Kp(n,e,t){return y(this,null,function*(){if(!Fl(e))throw e;n.L_.add(1),yield Ll(n),n.q_.set("Offline"),t||(t=()=>lP(n.localStore)),n.asyncQueue.enqueueRetryable(()=>y(this,null,function*(){z("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield fg(n)}))})}function pP(n,e){return e().catch(t=>Kp(n,t,e))}function pg(n){return y(this,null,function*(){let e=ue(n),t=fs(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;k3(e);)try{let i=yield S3(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,F3(e,i)}catch(i){yield Kp(e,i)}gP(e)&&mP(e)})}function k3(n){return Io(n)&&n.O_.length<10}function F3(n,e){n.O_.push(e);let t=fs(n);t.r_()&&t.V_&&t.m_(e.mutations)}function gP(n){return Io(n)&&!fs(n).n_()&&n.O_.length>0}function mP(n){fs(n).start()}function L3(n){return y(this,null,function*(){fs(n).p_()})}function V3(n){return y(this,null,function*(){let e=fs(n);for(let t of n.O_)e.m_(t.mutations)})}function U3(n,e,t){return y(this,null,function*(){let r=n.O_.shift(),i=kI.from(r,e,t);yield pP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield pg(n)})}function j3(n,e){return y(this,null,function*(){e&&fs(n).V_&&(yield function(r,i){return y(this,null,function*(){if(function(o){return r3(o)&&o!==k.ABORTED}(i.code)){let s=r.O_.shift();fs(r).s_(),yield pP(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield pg(r)}})}(n,e)),gP(n)&&mP(n)})}function vM(n,e){return y(this,null,function*(){let t=ue(n);t.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");let r=Io(t);t.L_.add(3),yield Ll(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield fg(t)})}function B3(n,e){return y(this,null,function*(){let t=ue(n);e?(t.L_.delete(2),yield fg(t)):e||(t.L_.add(2),yield Ll(t),t.q_.set("Unknown"))})}function oc(n){return n.K_||(n.K_=function(t,r,i){let s=ue(t);return s.w_(),new mE(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:x3.bind(null,n),Ro:M3.bind(null,n),mo:P3.bind(null,n),d_:O3.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.K_.s_(),ZE(n)?YE(n):n.q_.set("Unknown")):(yield n.K_.stop(),fP(n))}))),n.K_}function fs(n){return n.U_||(n.U_=function(t,r,i){let s=ue(t);return s.w_(),new _E(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:L3.bind(null,n),mo:j3.bind(null,n),f_:V3.bind(null,n),g_:U3.bind(null,n)}),n.B_.push(e=>y(this,null,function*(){e?(n.U_.s_(),yield pg(n)):(yield n.U_.stop(),n.O_.length>0&&(z("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var IE=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let o=Date.now()+r,a=new n(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function JE(n,e){if(Ci("AsyncQueue",`${e}: ${n}`),Fl(n))return new G(k.UNAVAILABLE,`${e}: ${n}`);throw n}var Qp=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Z.comparator(t.key,r.key):(t,r)=>Z.comparator(t.key,r.key),this.keyedMap=_l(),this.sortedSet=new yt(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Yp=class{constructor(){this.W_=new yt(Z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):re():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},nc=class n{constructor(e,t,r,i,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,Qp.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var EE=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},CE=class{constructor(){this.queries=wM(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=ue(t),s=i.queries;i.queries=wM(),s.forEach((o,a)=>{for(let c of a.j_)c.onError(r)})})(this,new G(k.ABORTED,"Firestore shutting down"))}};function wM(){return new hs(n=>HM(n),lg)}function _P(n,e){return y(this,null,function*(){let t=ue(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new EE,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(o){let a=JE(o,`Initialization of query '${ja(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&XE(t)})}function yP(n,e){return y(this,null,function*(){let t=ue(n),r=e.query,i=3,s=t.queries.get(r);if(s){let o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function $3(n,e){let t=ue(n),r=!1;for(let i of e){let s=i.query,o=t.queries.get(s);if(o){for(let a of o.j_)a.X_(i)&&(r=!0);o.z_=i}}r&&XE(t)}function H3(n,e,t){let r=ue(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function XE(n){n.Y_.forEach(e=>{e.next()})}var TE,IM;(IM=TE||(TE={})).ea="default",IM.Cache="cache";var Zp=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new nc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=nc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==TE.Cache}};var Jp=class{constructor(e){this.key=e}},Xp=class{constructor(e){this.key=e}},bE=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=be(),this.mutatedKeys=be(),this.Aa=qM(e),this.Ra=new Qp(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Yp,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{let g=i.get(d),_=dg(this.query,f)?f:null,w=!!g&&this.mutatedKeys.has(g.key),R=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations),S=!1;g&&_?g.data.isEqual(_.data)?w!==R&&(r.track({type:3,doc:_}),S=!0):this.ga(g,_)||(r.track({type:2,doc:_}),S=!0,(c&&this.Aa(_,c)>0||l&&this.Aa(_,l)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),S=!0):g&&!_&&(r.track({type:1,doc:g}),S=!0,(c||l)&&(a=!0)),S&&(_?(o=o.add(_),s=R?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let o=e.fa.G_();o.sort((d,f)=>function(_,w){let R=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return re()}};return R(_)-R(w)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,l=c!==this.Ea;return this.Ea=c,o.length!==0||l?{snapshot:new nc(this.query,e.Ra,s,o,e.mutatedKeys,c===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yp,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=be(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new Xp(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Jp(r))}),t}ba(e){this.Ta=e.Ts,this.da=be();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nc.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},DE=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},SE=class{constructor(e){this.key=e,this.va=!1}},AE=class{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new hs(a=>HM(a),lg),this.Ma=new Map,this.xa=new Set,this.Oa=new yt(Z.comparator),this.Na=new Map,this.La=new Al,this.Ba={},this.ka=new Map,this.qa=Sl.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function q3(n,e,t=!0){return y(this,null,function*(){let r=TP(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield vP(r,e,t,!0),i})}function G3(n,e){return y(this,null,function*(){let t=TP(n);yield vP(t,e,!0,!1)})}function vP(n,e,t,r){return y(this,null,function*(){let i=yield A3(n.localStore,Gr(e)),s=i.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t),a;return r&&(a=yield z3(n,e,s,o==="current",i.resumeToken)),n.isPrimaryClient&&t&&dP(n.remoteStore,i),a})}function z3(n,e,t,r,i){return y(this,null,function*(){n.Ka=(f,g,_)=>function(R,S,F,q){return y(this,null,function*(){let W=S.view.ma(F);W.ns&&(W=yield yM(R.localStore,S.query,!1).then(({documents:C})=>S.view.ma(C,W)));let J=q&&q.targetChanges.get(S.targetId),ze=q&&q.targetMismatches.get(S.targetId)!=null,ee=S.view.applyChanges(W,R.isPrimaryClient,J,ze);return CM(R,S.targetId,ee.wa),ee.snapshot})}(n,f,g,_);let s=yield yM(n.localStore,e,!0),o=new bE(e,s.Ts),a=o.ma(s.documents),c=bl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=o.applyChanges(a,n.isPrimaryClient,c);CM(n,t,l.wa);let d=new DE(e,t,o);return n.Fa.set(e,d),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function W3(n,e,t){return y(this,null,function*(){let r=ue(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(o=>!lg(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dE(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&KE(r.remoteStore,i.targetId),RE(r,i.targetId)}).catch(kl))):(RE(r,i.targetId),yield dE(r.localStore,i.targetId,!0))})}function K3(n,e){return y(this,null,function*(){let t=ue(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),KE(t.remoteStore,r.targetId))})}function Q3(n,e,t){return y(this,null,function*(){let r=n9(n);try{let i=yield function(o,a){let c=ue(o),l=Tt.now(),d=a.reduce((_,w)=>_.add(w.key),be()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let w=bi(),R=be();return c.cs.getEntries(_,d).next(S=>{w=S,w.forEach((F,q)=>{q.isValidDocument()||(R=R.add(F))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,w)).next(S=>{f=S;let F=[];for(let q of a){let W=n3(q,f.get(q.key).overlayedDocument);W!=null&&F.push(new Di(q.key,W,FM(W.value.mapValue),lo.exists(!0)))}return c.mutationQueue.addMutationBatch(_,l,F,a)}).next(S=>{g=S;let F=S.applyToLocalDocumentSet(f,R);return c.documentOverlayCache.saveOverlays(_,S.batchId,F)})}).then(()=>({batchId:g.batchId,changes:zM(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let l=o.Ba[o.currentUser.toKey()];l||(l=new yt(ke)),l=l.insert(a,c),o.Ba[o.currentUser.toKey()]=l}(r,i.batchId,t),yield Vl(r,i.changes),yield pg(r.remoteStore)}catch(i){let s=JE(i,"Failed to persist write");t.reject(s)}})}function wP(n,e){return y(this,null,function*(){let t=ue(n);try{let r=yield b3(t.localStore,e);e.targetChanges.forEach((i,s)=>{let o=t.Na.get(s);o&&($e(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.va=!0:i.modifiedDocuments.size>0?$e(o.va):i.removedDocuments.size>0&&($e(o.va),o.va=!1))}),yield Vl(t,r,e)}catch(r){yield kl(r)}})}function EM(n,e,t){let r=ue(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,o)=>{let a=o.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=ue(o);c.onlineState=a;let l=!1;c.queries.forEach((d,f)=>{for(let g of f.j_)g.Z_(a)&&(l=!0)}),l&&XE(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Y3(n,e,t){return y(this,null,function*(){let r=ue(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let o=new yt(Z.comparator);o=o.insert(s,wr.newNoDocument(s,he.min()));let a=be().add(s),c=new Vp(he.min(),new Map,new yt(ke),o,a);yield wP(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),eC(r)}else yield dE(r.localStore,e,!1).then(()=>RE(r,e,t)).catch(kl)})}function Z3(n,e){return y(this,null,function*(){let t=ue(n),r=e.batch.batchId;try{let i=yield T3(t.localStore,e);EP(t,r,null),IP(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Vl(t,i)}catch(i){yield kl(i)}})}function J3(n,e,t){return y(this,null,function*(){let r=ue(n);try{let i=yield function(o,a){let c=ue(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(f=>($e(f!==null),d=f.keys(),c.mutationQueue.removeMutationBatch(l,f))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(r.localStore,e);EP(r,e,t),IP(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Vl(r,i)}catch(i){yield kl(i)}})}function IP(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function EP(n,e,t){let r=ue(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function RE(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||CP(n,r)})}function CP(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(KE(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),eC(n))}function CM(n,e,t){for(let r of t)r instanceof Jp?(n.La.addReference(r.key,e),X3(n,r)):r instanceof Xp?(z("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||CP(n,r.key)):re()}function X3(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(z("SyncEngine","New document in limbo: "+t),n.xa.add(r),eC(n))}function eC(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new Z(ht.fromString(e)),r=n.qa.next();n.Na.set(r,new SE(t)),n.Oa=n.Oa.insert(t,r),dP(n.remoteStore,new Dl(Gr(GE(t.path)),r,"TargetPurposeLimboResolution",MM.oe))}}function Vl(n,e,t){return y(this,null,function*(){let r=ue(n),i=[],s=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,c)=>{o.push(r.Ka(c,e,t).then(l=>{var d;if((l||t)&&r.isPrimaryClient){let f=l?!l.fromCache:(d=t?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(l){i.push(l);let f=aE.Wi(c.targetId,l);s.push(f)}}))}),yield Promise.all(o),r.Ca.d_(i),yield function(c,l){return y(this,null,function*(){let d=ue(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(l,g=>L.forEach(g.$i,_=>d.persistence.referenceDelegate.addReference(f,g.targetId,_)).next(()=>L.forEach(g.Ui,_=>d.persistence.referenceDelegate.removeReference(f,g.targetId,_)))))}catch(f){if(!Fl(f))throw f;z("LocalStore","Failed to update sequence numbers: "+f)}for(let f of l){let g=f.targetId;if(!f.fromCache){let _=d.os.get(g),w=_.snapshotVersion,R=_.withLastLimboFreeSnapshotVersion(w);d.os=d.os.insert(g,R)}}})}(r.localStore,s))})}function e9(n,e){return y(this,null,function*(){let t=ue(n);if(!t.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());let r=yield uP(t.localStore,e);t.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(c=>{c.reject(new G(k.CANCELLED,o))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vl(t,r.hs)}})}function t9(n,e){let t=ue(n),r=t.Na.get(e);if(r&&r.va)return be().add(r.key);{let i=be(),s=t.Ma.get(e);if(!s)return i;for(let o of s){let a=t.Fa.get(o);i=i.unionWith(a.view.Va)}return i}}function TP(n){let e=ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=wP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=t9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y3.bind(null,e),e.Ca.d_=$3.bind(null,e.eventManager),e.Ca.$a=H3.bind(null,e.eventManager),e}function n9(n){let e=ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Z3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=J3.bind(null,e),e}var TM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return y(this,null,function*(){this.serializer=hg(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return C3(this.persistence,new uE,t.initialUser,this.serializer)}Ga(t){return new iE(oE.Zr,this.serializer)}Wa(t){return new hE}terminate(){return y(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var r9=(()=>{class n{initialize(t,r){return y(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>EM(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=e9.bind(null,this.syncEngine),yield B3(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new CE}()}createDatastore(t){let r=hg(t.databaseInfo.databaseId),i=function(o){return new gE(o)}(t.databaseInfo);return function(o,a,c,l){return new yE(o,a,c,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,s,o,a,c){return new wE(i,s,o,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>EM(this.syncEngine,r,0),function(){return Gp.D()?new Gp:new fE}())}createSyncEngine(t,r){return function(s,o,a,c,l,d,f){let g=new AE(s,o,a,c,l,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return y(this,null,function*(){var t,r;yield function(s){return y(this,null,function*(){let o=ue(s);z("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield Ll(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var eg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ci("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var NE=class{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,o=>y(this,null,function*(){z("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>y(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=JE(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function aI(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>y(this,null,function*(){r.isEqual(i)||(yield uP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function bM(n,e){return y(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield i9(n);z("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>vM(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>vM(e.remoteStore,i)),n._onlineComponents=e})}function i9(n){return y(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){z("FirestoreClient","Using user provided OfflineComponentProvider");try{yield aI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===k.FAILED_PRECONDITION||i.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;za("Error using user provided cache. Falling back to memory cache: "+t),yield aI(n,new TM)}}else z("FirestoreClient","Using default OfflineComponentProvider"),yield aI(n,new TM);return n._offlineComponents})}function bP(n){return y(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(z("FirestoreClient","Using user provided OnlineComponentProvider"),yield bM(n,n._uninitializedComponentsProvider._online)):(z("FirestoreClient","Using default OnlineComponentProvider"),yield bM(n,new r9))),n._onlineComponents})}function s9(n){return bP(n).then(e=>e.syncEngine)}function xE(n){return y(this,null,function*(){let e=yield bP(n),t=e.eventManager;return t.onListen=q3.bind(null,e.syncEngine),t.onUnlisten=W3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=G3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=K3.bind(null,e.syncEngine),t})}function o9(n,e,t={}){let r=new Hr;return n.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return function(s,o,a,c,l){let d=new eg({next:g=>{d.Za(),o.enqueueAndForget(()=>yP(s,f)),g.fromCache&&c.source==="server"?l.reject(new G(k.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),f=new Zp(a,d,{includeMetadataChanges:!0,_a:!0});return _P(s,f)}(yield xE(n),n.asyncQueue,e,t,r)})),r.promise}function DP(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var DM=new Map;function SP(n,e,t){if(!t)throw new G(k.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function a9(n,e,t,r){if(e===!0&&r===!0)throw new G(k.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function SM(n){if(!Z.isDocumentKey(n))throw new G(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function AM(n){if(Z.isDocumentKey(n))throw new G(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":re()}function us(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new G(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=gg(n);throw new G(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var tg=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DP((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(k.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},rc=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new cI;switch(r.type){case"firstParty":return new hI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return y(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=DM.get(t);r&&(z("ComponentProvider","Removing Datastore"),DM.delete(t),r.terminate())}(this),Promise.resolve()}};function AP(n,e,t,r={}){var i;let s=(n=us(n,rc))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&za("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Bt.MOCK_USER;else{a=Bo(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new G(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Bt(l)}n._authCredentials=new uI(new Np(a,c))}}var vo=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},xn=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ls=class n extends vo{constructor(e,t,r){super(e,t,GE(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function RP(n,e,...t){if(n=De(n),SP("collection","path",e),n instanceof rc){let r=ht.fromString(e,...t);return AM(r),new ls(n,null,r)}{if(!(n instanceof xn||n instanceof ls))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ht.fromString(e,...t));return AM(r),new ls(n.firestore,null,r)}}function NP(n,e,...t){if(n=De(n),arguments.length===1&&(e=xp.newId()),SP("doc","path",e),n instanceof rc){let r=ht.fromString(e,...t);return SM(r),new xn(n,null,new Z(r))}{if(!(n instanceof xn||n instanceof ls))throw new G(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ht.fromString(e,...t));return SM(r),new xn(n.firestore,n instanceof ls?n.converter:null,new Z(r))}}var ng=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new zp(this,"async_queue_retry"),this.Vu=()=>{let r=oI();r&&z("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=oI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=oI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new Hr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return y(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Fl(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ci("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=IE.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&re()}verifyOperationInProgress(){}wu(){return y(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function RM(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var wo=class extends rc{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ng,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return y(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ng(e),this._firestoreClient=void 0,yield e}})}};function xP(n,e){let t=typeof n=="object"?n:Dt(),r=typeof n=="string"?n:e||"(default)",i=bt(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Vi("firestore");s&&AP(i,...s)}return i}function tC(n){if(n._terminated)throw new G(k.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||c9(n),n._firestoreClient}function c9(n){var e,t,r;let i=n._freezeSettings(),s=function(a,c,l,d){return new _I(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,DP(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new NE(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var Rl=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(nn.fromBase64String(e))}catch(t){throw new G(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Nl=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var rg=class{constructor(e){this._methodName=e}};var xl=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}};var Ml=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var u9=/^__.*__$/,ME=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,t,this.fieldTransforms):new yo(e,this.data,t,this.fieldTransforms)}};function MP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw re()}}var PE=class n{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ig(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(MP(this.Cu)&&u9.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},OE=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||hg(e)}Qu(e,t,r,i=!1){return new PE({Cu:e,methodName:t,qu:r,path:Hn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function PP(n){let e=n._freezeSettings(),t=hg(n._databaseId);return new OE(n._databaseId,!!e.ignoreUndefinedProperties,t)}function l9(n,e,t,r,i,s={}){let o=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);FP("Data must be an object, but it was:",o,r);let a=OP(r,o),c,l;if(s.merge)c=new $r(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let f of s.mergeFields){let g=h9(e,f,t);if(!o.contains(g))throw new G(k.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);p9(d,g)||d.push(g)}c=new $r(d),l=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,l=o.fieldTransforms;return new ME(new vr(a),c,l)}function d9(n,e,t,r=!1){return nC(t,n.Qu(r?4:3,e))}function nC(n,e){if(kP(n=De(n)))return FP("Unsupported field value:",e,n),OP(n,e);if(n instanceof rg)return function(r,i){if(!MP(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=nC(a,i.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=De(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Tt.fromDate(r);return{timestampValue:$p(i.serializer,s)}}if(r instanceof Tt){let s=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$p(i.serializer,s)}}if(r instanceof xl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rl)return{bytesValue:nP(i.serializer,r._byteString)};if(r instanceof xn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:WE(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ml)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Bu("VectorValues must only contain numeric values.");return zE(a.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${gg(r)}`)}(n,e)}function OP(n,e){let t={};return PM(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sc(n,(r,i)=>{let s=nC(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function kP(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof xl||n instanceof Rl||n instanceof xn||n instanceof rg||n instanceof Ml)}function FP(n,e,t){if(!kP(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=gg(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function h9(n,e,t){if((e=De(e))instanceof Nl)return e._internalPath;if(typeof e=="string")return LP(n,e);throw ig("Field path arguments must be of type string or ",n,!1,void 0,t)}var f9=new RegExp("[~\\*/\\[\\]]");function LP(n,e,t){if(e.search(f9)>=0)throw ig(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Nl(...e.split("."))._internalPath}catch{throw ig(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ig(n,e,t,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new G(k.INVALID_ARGUMENT,a+n+c)}function p9(n,e){return n.some(t=>t.isEqual(e))}var sg=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new kE(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(rC("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},kE=class extends sg{data(){return super.data()}};function rC(n,e){return typeof e=="string"?LP(n,e):e instanceof Nl?e._internalPath:e._delegate._internalPath}function VP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(k.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pl=class{},FE=class extends Pl{};function UP(n,e,...t){let r=[];e instanceof Pl&&r.push(e),r=r.concat(t),function(s){let o=s.filter(c=>c instanceof LE).length,a=s.filter(c=>c instanceof og).length;if(o>1||o>0&&a>0)throw new G(k.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var og=class n extends FE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return BP(e._query,t),new vo(e.firestore,e.converter,NI(e._query,t))}_parse(e){let t=PP(e.firestore);return function(s,o,a,c,l,d,f){let g;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(k.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){xM(f,d);let _=[];for(let w of f)_.push(NM(c,s,w));g={arrayValue:{values:_}}}else g=NM(c,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||xM(f,d),g=d9(a,o,f,d==="in"||d==="not-in");return Ot.create(l,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function jP(n,e,t){let r=e,i=rC("where",n);return og._create(i,r,t)}var LE=class n extends Pl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Ir.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)BP(o,c),o=NI(o,c)}(e._query,t),new vo(e.firestore,e.converter,NI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function NM(n,e,t){if(typeof(t=De(t))=="string"){if(t==="")throw new G(k.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!$M(e)&&t.indexOf("/")!==-1)throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ht.fromString(t));if(!Z.isDocumentKey(r))throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tM(n,new Z(r))}if(t instanceof xn)return tM(n,t._key);throw new G(k.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gg(t)}.`)}function xM(n,e){if(!Array.isArray(n)||n.length===0)throw new G(k.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BP(n,e){let t=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G(k.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(k.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var VE=class{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ds(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw re()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return sc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>at(o.doubleValue));return new Ml(s)}convertGeoPoint(e){return new xl(at(e.latitude),at(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=BE(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Cl(e));default:return null}}convertTimestamp(e){let t=Ti(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ht.fromString(e);$e(cP(r));let i=new kp(r.get(1),r.get(3)),s=new Z(r.popFirst(5));return i.isEqual(t)||Ci(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function g9(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var uo=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ag=class extends sg{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Ga(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(rC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Ga=class extends ag{data(e={}){return super.data(e)}},cg=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new uo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Ga(this._firestore,this._userDataWriter,r.key,r,new uo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new Ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new Ga(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uo(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:m9(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function m9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return re()}}var Ol=class extends VE{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}};function $P(n){n=us(n,vo);let e=us(n.firestore,wo),t=tC(e),r=new Ol(e);return VP(n._query),o9(t,n._query).then(i=>new cg(e,r,n,i))}function HP(n,e,t){n=us(n,xn);let r=us(n.firestore,wo),i=g9(n.converter,e,t);return _9(r,[l9(PP(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,lo.none())])}function iC(n,...e){var t,r,i;n=De(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||RM(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(RM(e[o])){let f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let c,l,d;if(n instanceof xn)l=us(n.firestore,wo),d=GE(n._key.path),c={next:f=>{e[o]&&e[o](y9(l,n,f))},error:e[o+1],complete:e[o+2]};else{let f=us(n,vo);l=us(f.firestore,wo),d=f._query;let g=new Ol(l);c={next:_=>{e[o]&&e[o](new cg(l,g,f,_))},error:e[o+1],complete:e[o+2]},VP(n._query)}return function(g,_,w,R){let S=new eg(R),F=new Zp(_,S,w);return g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return _P(yield xE(g),F)})),()=>{S.Za(),g.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return yP(yield xE(g),F)}))}}(tC(l),d,a,c)}function _9(n,e){return function(r,i){let s=new Hr;return r.asyncQueue.enqueueAndForget(()=>y(this,null,function*(){return Q3(yield s9(r),i,s)})),s.promise}(tC(n),e)}function y9(n,e,t){let r=t.docs.get(e._key),i=new Ol(n);return new ag(n,i,e._key,r,new uo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){ic=i})(vn),wt(new vt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new wo(new lI(r.getProvider("auth-internal")),new pI(r.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kp(l.options.projectId,d)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Y(Zx,"4.7.3",e),Y(Zx,"4.7.3","esm2017")})();var mg=function(){return mg=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},mg.apply(this,arguments)};var I9={includeMetadataChanges:!1};function qP(n,e){return e===void 0&&(e=I9),new ce(function(t){var r=iC(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function GP(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:mg(mg({},r),(t={},t[e.idField]=n.id,t))}function zP(n){return qP(n,{includeMetadataChanges:!0}).pipe(K(function(e){return e.docs}))}function WP(n,e){return e===void 0&&(e={}),zP(n).pipe(K(function(t){return t.map(function(r){return GP(r,e)})}))}var Eo=class{constructor(e){return e}},KP="firestore",sC=class{constructor(){return Ct(KP)}};var oC=new H("angularfire2.firestore-instances");function E9(n,e){let t=xt(KP,n,e);return t&&new Eo(t)}function C9(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Eo(r)}}var T9={provide:sC,deps:[[new se,oC]]},b9={provide:Eo,useFactory:E9,deps:[[new se,oC],it]};function QP(n,...e){return Y("angularfire",rt.full,"fst"),Xe([b9,T9,{provide:oC,useFactory:C9(n),multi:!0,deps:[te,Ee,_t,dt,[new se,yr],[new se,Nn],...e]}])}var ir=Oe(WP,!0);var sr=Oe(RP,!0);var aC=Oe(NP,!0);var cC=Oe($P,!0);var YP=Oe(xP,!0);var ZP=Oe(UP,!0);var uC=Oe(HP,!0);var JP=Oe(jP,!0);var XP="@firebase/database",eO="1.0.8";var aT="";function D9(n){aT=n}var _C=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Ut(t))}get(e){let t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:Fd(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var yC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Sr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var MO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){let e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new _C(e)}}catch{}return new yC},To=MO("localStorage"),vC=MO("sessionStorage");var lc=new Ar("@firebase/database"),S9=function(){let n=1;return function(){return n++}}(),PO=function(n){let e=Lb(n),t=new Ob;t.update(e);let r=t.digest();return Tb.encodeByteArray(r)},Zl=function(...n){let e="";for(let t=0;t<n.length;t++){let r=n[t];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Zl.apply(null,r):typeof r=="object"?e+=Ut(r):e+=r,e+=" "}return e},bo=null,tO=!0,A9=function(n,e){B(!e||n===!0||n===!1,"Can't turn on custom loggers persistently."),n===!0?(lc.logLevel=Jt.VERBOSE,bo=lc.log.bind(lc),e&&vC.set("logging_enabled",!0)):typeof n=="function"?bo=n:(bo=null,vC.remove("logging_enabled"))},rn=function(...n){if(tO===!0&&(tO=!1,bo===null&&vC.get("logging_enabled")===!0&&A9(!0)),bo){let e=Zl.apply(null,n);bo(e)}},Jl=function(n){return function(...e){rn(n,...e)}},wC=function(...n){let e="FIREBASE INTERNAL ERROR: "+Zl(...n);lc.error(e)},Ai=function(...n){let e=`FIREBASE FATAL ERROR: ${Zl(...n)}`;throw lc.error(e),new Error(e)},qn=function(...n){let e="FIREBASE WARNING: "+Zl(...n);lc.warn(e)},R9=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&qn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},OO=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},N9=function(n){if(br()||document.readyState==="complete")n();else{let e=!1,t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},hc="[MIN_NAME]",Do="[MAX_NAME]",vc=function(n,e){if(n===e)return 0;if(n===hc||e===Do)return-1;if(e===hc||n===Do)return 1;{let t=nO(n),r=nO(e);return t!==null?r!==null?t-r===0?n.length-e.length:t-r:-1:r!==null?1:n<e?-1:1}},x9=function(n,e){return n===e?0:n<e?-1:1},Ul=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+Ut(e))},cT=function(n){if(typeof n!="object"||n===null)return Ut(n);let e=[];for(let r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)r!==0&&(t+=","),t+=Ut(e[r]),t+=":",t+=cT(n[e[r]]);return t+="}",t},kO=function(n,e){let t=n.length;if(t<=e)return[n];let r=[];for(let i=0;i<t;i+=e)i+e>t?r.push(n.substring(i,t)):r.push(n.substring(i,i+e));return r};function cr(n,e){for(let t in n)n.hasOwnProperty(t)&&e(t,n[t])}var FO=function(n){B(!OO(n),"Invalid JSON number");let e=11,t=52,r=(1<<e-1)-1,i,s,o,a,c;n===0?(s=0,o=0,i=1/n===-1/0?1:0):(i=n<0,n=Math.abs(n),n>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,t-a)-Math.pow(2,t))):(s=0,o=Math.round(n/Math.pow(2,1-r-t))));let l=[];for(c=t;c;c-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(c=e;c;c-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let d=l.join(""),f="";for(c=0;c<64;c+=8){let g=parseInt(d.substr(c,8),2).toString(16);g.length===1&&(g="0"+g),f=f+g}return f.toLowerCase()},M9=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},P9=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var O9=new RegExp("^-?(0*)\\d{1,10}$"),k9=-2147483648,F9=2147483647,nO=function(n){if(O9.test(n)){let e=Number(n);if(e>=k9&&e<=F9)return e}return null},Xl=function(n){try{n()}catch(e){setTimeout(()=>{let t=e.stack||"";throw qn("Exception was thrown by user callback.",t),e},Math.floor(0))}},L9=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ql=function(n,e){let t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};var IC=class{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)===null||t===void 0||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){qn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var EC=class{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(rn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',qn(e)}},Gl=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}n.OWNER="owner";return n})(),yg="5",LO="v",VO="s",UO="r",jO="f",BO=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,$O="ls",HO="p",CC="ac",qO="websocket",GO="long_polling";var vg=class{constructor(e,t,r,i,s=!1,o="",a=!1,c=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=c,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=To.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&To.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}};function V9(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function zO(n,e,t){B(typeof e=="string","typeof type must == string"),B(typeof t=="object","typeof params must == object");let r;if(e===qO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===GO)r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);V9(n)&&(t.ns=n.namespace);let i=[];return cr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var TC=class{constructor(){this.counters_={}}incrementCounter(e,t=1){Sr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Sb(this.counters_)}};var lC={},dC={};function uT(n){let e=n.toString();return lC[e]||(lC[e]=new TC),lC[e]}function U9(n,e){let t=n.toString();return dC[t]||(dC[t]=e()),dC[t]}var bC=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Xl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var rO="start",j9="close",B9="pLPCommand",$9="pRTLPCB",WO="id",KO="pw",QO="ser",H9="cb",q9="seg",G9="ts",z9="d",W9="dframe",YO=1870,ZO=30,K9=YO-ZO,Q9=25e3,Y9=3e4,DC=class n{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Jl(e),this.stats_=uT(t),this.urlFn=c=>(this.appCheckToken&&(c[CC]=this.appCheckToken),zO(t,GO,c))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Y9)),N9(()=>{if(this.isClosed_)return;this.scriptTagHolder=new SC((...s)=>{let[o,a,c,l,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===rO)this.id=a,this.password=c;else if(o===j9)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[rO]="t",r[QO]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[H9]=this.scriptTagHolder.uniqueCallbackIdentifier),r[LO]=yg,this.transportSessionId&&(r[VO]=this.transportSessionId),this.lastSessionId&&(r[$O]=this.lastSessionId),this.applicationId&&(r[HO]=this.applicationId),this.appCheckToken&&(r[CC]=this.appCheckToken),typeof location<"u"&&location.hostname&&BO.test(location.hostname)&&(r[UO]=jO);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){n.forceAllow_=!0}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){return br()?!1:n.forceAllow_?!0:!n.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!M9()&&!P9()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let t=Ut(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);let r=bb(t),i=kO(r,K9);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(br())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[W9]="t",r[WO]=e,r[KO]=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let t=Ut(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}},SC=class n{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,br())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=S9(),window[B9+this.uniqueCallbackIdentifier]=e,window[$9+this.uniqueCallbackIdentifier]=t,this.myIFrame=n.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){rn("frame writing exception"),a.stack&&rn(a.stack),rn(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||rn("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[WO]=this.myID,e[KO]=this.myPW,e[QO]=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ZO+r.length<=YO;){let o=this.pendingSegs.shift();r=r+"&"+q9+i+"="+o.seg+"&"+G9+i+"="+o.ts+"&"+z9+i+"="+o.d,i++}return t=t+r,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);let r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(Q9)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,t){br()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{rn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var Z9=16384,J9=45e3,wg=null;typeof MozWebSocket<"u"?wg=MozWebSocket:typeof WebSocket<"u"&&(wg=WebSocket);var jl=(()=>{class n{constructor(t,r,i,s,o,a,c){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Jl(this.connId),this.stats_=uT(r),this.connURL=n.connectionURL_(r,a,c,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){let a={};return a[LO]=yg,!br()&&typeof location<"u"&&location.hostname&&BO.test(location.hostname)&&(a[UO]=jO),r&&(a[VO]=r),i&&(a[$O]=i),s&&(a[CC]=s),o&&(a[HO]=o),zO(t,qO,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,To.set("previous_websocket_failure",!0);try{let i;if(br()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${yg}/${aT}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new wg(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&wg!==null&&!n.forceDisallow_}static previouslyFailed(){return To.isInMemoryStorage||To.get("previous_websocket_failure")===!0}markConnectionHealthy(){To.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Fd(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(B(this.frames===null,"We already have a frame buffer"),t.length<=6){let r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;let r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();let r=Ut(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=kO(r,Z9);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(J9))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4;return n})(),X9=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[DC,jl]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){let r=jl&&jl.isAvailable(),i=r&&!jl.previouslyFailed();if(t.webSocketOnly&&(r||qn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[jl];else{let s=this.transports_=[];for(let o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}n.globalTransportInitialized_=!1;return n})(),e6=6e4,t6=5e3,n6=10*1024,r6=100*1024,hC="t",iO="d",i6="s",sO="r",s6="e",oO="o",aO="a",cO="n",uO="p",o6="h",AC=class{constructor(e,t,r,i,s,o,a,c,l,d){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=c,this.onKill_=l,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Jl("c:"+this.id+":"),this.transportManager_=new X9(t),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ql(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>r6?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>n6?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){let t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(hC in e){let t=e[hC];t===aO?this.upgradeIfSecondaryHealthy_():t===sO?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===oO&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let t=Ul("t",e),r=Ul("d",e);if(t==="c")this.onSecondaryControl_(r);else if(t==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:uO,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:aO,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:cO,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let t=Ul("t",e),r=Ul("d",e);t==="c"?this.onControl_(r):t==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let t=Ul(hC,e);if(iO in e){let r=e[iO];if(t===o6){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(t===cO){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===i6?this.onConnectionShutdown_(r):t===sO?this.onReset_(r):t===s6?wC("Server Error: "+r):t===oO?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wC("Unknown control packet command: "+t)}}onHandshake_(e){let t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),yg!==r&&qn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),ql(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(e6))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ql(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(t6))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:uO,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(To.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ig=class{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}};var Eg=class{constructor(e){this.allowedEvents_=e,this.listeners_={},B(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});let i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){B(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}};var Cg=class n extends Eg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!nu()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new n}getInitialEvent(e){return B(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var lO=32,dO=768,Ze=class{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}};function Ge(){return new Ze("")}function xe(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gs(n){return n.pieces_.length-n.pieceNum_}function st(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Ze(n.pieces_,e)}function JO(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function a6(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function XO(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function ek(n){if(n.pieceNum_>=n.pieces_.length)return null;let e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Ze(e,0)}function $t(n,e){let t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Ze)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Ze(t,0)}function Ae(n){return n.pieceNum_>=n.pieces_.length}function or(n,e){let t=xe(n),r=xe(e);if(t===null)return e;if(t===r)return or(st(n),st(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function tk(n,e){if(gs(n)!==gs(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Cr(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(gs(n)>gs(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}var RC=class{constructor(e,t){this.errorPrefix_=t,this.parts_=XO(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=cu(this.parts_[r]);nk(this)}};function c6(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=cu(e),nk(n)}function u6(n){let e=n.parts_.pop();n.byteLength_-=cu(e),n.parts_.length>0&&(n.byteLength_-=1)}function nk(n){if(n.byteLength_>dO)throw new Error(n.errorPrefix_+"has a key path longer than "+dO+" bytes ("+n.byteLength_+").");if(n.parts_.length>lO)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+lO+") or object contains a cycle "+Co(n))}function Co(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}var NC=class n extends Eg{constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new n}getInitialEvent(e){return B(e==="visible","Unknown event type: "+e),[this.visible_]}};var Bl=1e3,l6=60*5*1e3,hO=30*1e3,d6=1.3,h6=3e4,f6="server_kill",fO=3,lT=(()=>{class n extends Ig{constructor(t,r,i,s,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=n.nextPersistentConnectionId_++,this.log_=Jl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Bl,this.maxReconnectDelay_=l6,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!br())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");NC.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&Cg.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){let s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_(Ut(o)),B(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();let r=new Bm,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{let c=a.d;a.s==="ok"?r.resolve(c):r.reject(c)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(t,r,i,s){this.initConnection_();let o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),B(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let c={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,c),this.connected_&&this.sendListen_(c)}sendGet_(t){let r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){let r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest(a,o,c=>{let l=c.d,d=c.s;n.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",c),d!=="ok"&&this.removeListen_(i,s),t.onComplete&&t.onComplete(d,l))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&Sr(t,"w")){let i=Ts(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();qn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||Pb(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=hO)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let t=this.authToken_,r=Mb(t)?"auth":"gauth",i={cred:t};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===t&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{let r=t.s,i=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){let i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),B(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);let o={p:t},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++;let c=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(c):this.log_("Buffering put: "+r)}sendPut_(t){let r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){let r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+Ut(t));let r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):wC("Unrecognized action received from server: "+Ut(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){B(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Bl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Bl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>h6&&(this.reconnectDelay_=Bl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let t=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*d6)}this.onConnectStatus_(!1)}establishConnection_(){return y(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,a=!1,c=null,l=function(){c?c.close():(a=!0,i())},d=function(g){B(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(g)};this.realtime_={close:l,sendRequest:d};let f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[g,_]=yield Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);a?rn("getToken() completed but was canceled"):(rn("getToken() completed. Creating connection."),this.authToken_=g&&g.accessToken,this.appCheckToken_=_&&_.token,c=new AC(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,w=>{qn(w+" ("+this.repoInfo_.toString()+")"),this.interrupt(f6)},o))}catch(g){this.log_("Failed to get token: "+g),a||(this.repoInfo_.nodeAdmin&&qn(g),l())}}})}interrupt(t){rn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){rn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],su(this.interruptReasons_)&&(this.reconnectDelay_=Bl,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){let r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){let r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;r?i=r.map(o=>cT(o)).join("$"):i="default";let s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){let i=new Ze(t).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){rn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fO&&(this.reconnectDelay_=hO,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){rn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fO&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let t of this.listens.values())for(let r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){let t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){let t={},r="js";br()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),t["sdk."+r+"."+aT.replace(/\./g,"-")]=1,nu()?t["framework.cordova"]=1:kd()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){let t=Cg.getInstance().currentlyOnline();return su(this.interruptReasons_)&&t}}n.nextPersistentConnectionId_=0,n.nextConnectionId_=0;return n})(),Me=class n{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new n(e,t)}};var fc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){let r=new Me(hc,e),i=new Me(hc,t);return this.compare(r,i)!==0}minPost(){return Me.MIN}};var _g,Tg=class extends fc{static get __EMPTY_NODE(){return _g}static set __EMPTY_NODE(e){_g=e}compare(e,t){return vc(e.name,t.name)}isDefinedOn(e){throw jo("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Me.MIN}maxPost(){return new Me(Do,_g)}makePost(e,t){return B(typeof e=="string","KeyIndex indexValue must always be a string."),new Me(e,_g)}toString(){return".key"}},dc=new Tg;var cc=class{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=t?r(e.key,t):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Er=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ar.EMPTY_NODE,this.right=o??ar.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this,o=i(t,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(t,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ar.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(t,i.key)===0){if(i.right.isEmpty())return ar.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){let t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){let t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})(),xC=class{copy(e,t,r,i,s){return this}insert(e,t,r){return new Er(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ar=class n{constructor(e,t=n.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new n(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Er.BLACK,null,null))}remove(e){return new n(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Er.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),t===0)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();)if(t=this.comparator_(e,r.key),t===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else t<0?r=r.left:t>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new cc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new cc(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new cc(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new cc(this.root_,null,this.comparator_,!0,e)}};ar.EMPTY_NODE=new xC;function p6(n,e){return vc(n.name,e.name)}function dT(n,e){return vc(n,e)}var MC;function g6(n){MC=n}var rk=function(n){return typeof n=="number"?"number:"+FO(n):"string:"+n},ik=function(n){if(n.isLeafNode()){let e=n.val();B(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Sr(e,".sv"),"Priority must be a string or number.")}else B(n===MC||n.isEmpty(),"priority of unexpected type.");B(n===MC||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var pO,pc=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,B(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),ik(this.priorityNode_)}static set __childrenNodeConstructor(t){pO=t}static get __childrenNodeConstructor(){return pO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Ae(t)?this:xe(t)===".priority"?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){let i=xe(t);return i===null?r:r.isEmpty()&&i!==".priority"?this:(B(i!==".priority"||gs(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(st(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+rk(this.priorityNode_.val())+":");let r=typeof this.value_;t+=r+":",r==="number"?t+=FO(this.value_):t+=this.value_,this.lazyHash_=PO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:(B(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){let r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return B(s>=0,"Unknown leaf type: "+r),B(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){let r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}n.VALUE_TYPE_ORDER=["object","boolean","number","string"];return n})(),sk,ok;function m6(n){sk=n}function _6(n){ok=n}var PC=class extends fc{compare(e,t){let r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return s===0?vc(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Me.MIN}maxPost(){return new Me(Do,new pc("[PRIORITY-POST]",ok))}makePost(e,t){let r=sk(e);return new Me(t,new pc("[PRIORITY-POST]",r))}toString(){return".priority"}},on=new PC;var y6=Math.log(2),OC=class{constructor(e){let t=s=>parseInt(Math.log(s)/y6,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},bg=function(n,e,t,r){n.sort(e);let i=function(c,l){let d=l-c,f,g;if(d===0)return null;if(d===1)return f=n[c],g=t?t(f):f,new Er(g,f.node,Er.BLACK,null,null);{let _=parseInt(d/2,10)+c,w=i(c,_),R=i(_+1,l);return f=n[_],g=t?t(f):f,new Er(g,f.node,Er.BLACK,w,R)}},s=function(c){let l=null,d=null,f=n.length,g=function(w,R){let S=f-w,F=f;f-=w;let q=i(S+1,F),W=n[S],J=t?t(W):W;_(new Er(J,W.node,R,null,q))},_=function(w){l?(l.left=w,l=w):(d=w,l=w)};for(let w=0;w<c.count;++w){let R=c.nextBitIsOne(),S=Math.pow(2,c.count-(w+1));R?g(S,Er.BLACK):(g(S,Er.BLACK),g(S,Er.RED))}return d},o=new OC(n.length),a=s(o);return new ar(r||e,a)};var fC,ac={},gc=class n{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return B(ac&&on,"ChildrenNode.ts has not been loaded"),fC=fC||new n({".priority":ac},{".priority":on}),fC}get(e){let t=Ts(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ar?t:null}hasIndex(e){return Sr(this.indexSet_,e.toString())}addIndex(e,t){B(e!==dc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=t.getIterator(Me.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=bg(r,e.getCompare()):a=ac;let c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;let d=Object.assign({},this.indexes_);return d[c]=a,new n(d,l)}addToIndexes(e,t){let r=ou(this.indexes_,(i,s)=>{let o=Ts(this.indexSet_,s);if(B(o,"Missing index implementation for "+s),i===ac)if(o.isDefinedOn(e.node)){let a=[],c=t.getIterator(Me.Wrap),l=c.getNext();for(;l;)l.name!==e.name&&a.push(l),l=c.getNext();return a.push(e),bg(a,o.getCompare())}else return ac;else{let a=t.get(e.name),c=i;return a&&(c=c.remove(new Me(e.name,a))),c.insert(e,e.node)}});return new n(r,this.indexSet_)}removeFromIndexes(e,t){let r=ou(this.indexes_,i=>{if(i===ac)return i;{let s=t.get(e.name);return s?i.remove(new Me(e.name,s)):i}});return new n(r,this.indexSet_)}};var $l,ft=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ik(this.priorityNode_),this.children_.isEmpty()&&B(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $l||($l=new n(new ar(dT),null,gc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$l}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{let r=this.children_.get(t);return r===null?$l:r}}getChild(t){let r=xe(t);return r===null?this:this.getImmediateChild(r).getChild(st(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(B(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{let i=new Me(t,r),s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?$l:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){let i=xe(t);if(i===null)return r;{B(xe(t)!==".priority"||gs(t)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(st(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(on,(a,c)=>{r[a]=c.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){let a=[];for(let c in r)a[c]=r[c];return a}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+rk(this.getPriority().val())+":"),this.forEachChild(on,(r,i)=>{let s=i.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":PO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Me(t,r));return o?o.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(t){let r=this.getFirstChildName(t);return r?new Me(r,this.children_.get(r)):null}getLastChildName(t){let r=this.resolveIndex_(t);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(t){let r=this.getLastChildName(t);return r?new Me(r,this.children_.get(r)):null}forEachChild(t,r){let i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{let s=this.children_.getIteratorFrom(t.name,Me.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{let s=this.children_.getReverseIteratorFrom(t.name,Me.Wrap),o=s.peek();for(;o!=null&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ed?-1:0}withIndex(t){if(t===dc||this.indexMap_.hasIndex(t))return this;{let r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===dc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{let r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(on),s=r.getIterator(on),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(t){return t===dc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})(),kC=class extends ft{constructor(){super(new ar(dT),ft.EMPTY_NODE,gc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ft.EMPTY_NODE}isEmpty(){return!1}},ed=new kC;Object.defineProperties(Me,{MIN:{value:new Me(hc,ft.EMPTY_NODE)},MAX:{value:new Me(Do,ed)}});Tg.__EMPTY_NODE=ft.EMPTY_NODE;pc.__childrenNodeConstructor=ft;g6(ed);_6(ed);var v6=!0;function sn(n,e=null){if(n===null)return ft.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),B(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){let t=n;return new pc(t,sn(e))}if(!(n instanceof Array)&&v6){let t=[],r=!1;if(cr(n,(o,a)=>{if(o.substring(0,1)!=="."){let c=sn(a);c.isEmpty()||(r=r||!c.getPriority().isEmpty(),t.push(new Me(o,c)))}}),t.length===0)return ft.EMPTY_NODE;let s=bg(t,p6,o=>o.name,dT);if(r){let o=bg(t,on.getCompare());return new ft(s,sn(e),new gc({".priority":o},{".priority":on}))}else return new ft(s,sn(e),gc.Default)}else{let t=ft.EMPTY_NODE;return cr(n,(r,i)=>{if(Sr(n,r)&&r.substring(0,1)!=="."){let s=sn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(sn(e))}}m6(sn);var FC=class extends fc{constructor(e){super(),this.indexPath_=e,B(!Ae(e)&&xe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){let r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return s===0?vc(e.name,t.name):s}makePost(e,t){let r=sn(e),i=ft.EMPTY_NODE.updateChild(this.indexPath_,r);return new Me(t,i)}maxPost(){let e=ft.EMPTY_NODE.updateChild(this.indexPath_,ed);return new Me(Do,e)}toString(){return XO(this.indexPath_,0).join("/")}};var LC=class extends fc{compare(e,t){let r=e.node.compareTo(t.node);return r===0?vc(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Me.MIN}maxPost(){return Me.MAX}makePost(e,t){let r=sn(e);return new Me(t,r)}toString(){return".value"}},w6=new LC;function I6(n){return{type:"value",snapshotNode:n}}function E6(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function C6(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function gO(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function T6(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}var VC=class n{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=on}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return B(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return B(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:hc}hasEnd(){return this.endSet_}getIndexEndValue(){return B(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return B(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Do}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return B(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===on}copy(){let e=new n;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function mO(n){let e={};if(n.isDefault())return e;let t;if(n.index_===on?t="$priority":n.index_===w6?t="$value":n.index_===dc?t="$key":(B(n.index_ instanceof FC,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=Ut(t),n.startSet_){let r=n.startAfterSet_?"startAfter":"startAt";e[r]=Ut(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+Ut(n.indexStartName_))}if(n.endSet_){let r=n.endBeforeSet_?"endBefore":"endAt";e[r]=Ut(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+Ut(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function _O(n){let e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==on&&(e.i=n.index_.toString()),e}var UC=class n extends Ig{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Jl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(B(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=n.getListenId_(e,r),a={};this.listens_[o]=a;let c=mO(e._queryParams);this.restRequest_(s+".json",c,(l,d)=>{let f=d;if(l===404&&(f=null,l=null),l===null&&this.onDataUpdate_(s,f,!1,r),Ts(this.listens_,o)===a){let g;l?l===401?g="permission_denied":g="rest_error:"+l:g="ok",i(g,null)}})}unlisten(e,t){let r=n.getListenId_(e,t);delete this.listens_[r]}get(e){let t=mO(e._queryParams),r=e._path.toString(),i=new Bm;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+bs(t);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let c=null;if(a.status>=200&&a.status<300){try{c=Fd(a.responseText)}catch{qn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,c)}else a.status!==401&&a.status!==404&&qn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var jC=class{constructor(){this.rootNode_=ft.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}};function Dg(){return{value:null,children:new Map}}function ak(n,e,t){if(Ae(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{let r=xe(e);n.children.has(r)||n.children.set(r,Dg());let i=n.children.get(r);e=st(e),ak(i,e,t)}}function BC(n,e,t){n.value!==null?t(e,n.value):b6(n,(r,i)=>{let s=new Ze(e.toString()+"/"+r);BC(i,s,t)})}function b6(n,e){n.children.forEach((t,r)=>{e(r,t)})}var $C=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),t=Object.assign({},e);return this.last_&&cr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}};var yO=10*1e3,D6=30*1e3,S6=5*60*1e3,HC=class{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new $C(e);let r=yO+(D6-yO)*Math.random();ql(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),t={},r=!1;cr(e,(i,s)=>{s>0&&Sr(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),ql(this.reportStats_.bind(this),Math.floor(Math.random()*2*S6))}};var Si=function(n){return n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",n}(Si||{});function ck(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function uk(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function lk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}var qC=class n{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Si.ACK_USER_WRITE,this.source=ck()}operationForChild(e){if(Ae(this.path)){if(this.affectedTree.value!=null)return B(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let t=this.affectedTree.subtree(new Ze(e));return new n(Ge(),t,this.revert)}}else return B(xe(this.path)===e,"operationForChild called for unrelated child."),new n(st(this.path),this.affectedTree,this.revert)}};var mc=class n{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Si.OVERWRITE}operationForChild(e){return Ae(this.path)?new n(this.source,Ge(),this.snap.getImmediateChild(e)):new n(this.source,st(this.path),this.snap)}};var Sg=class n{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Si.MERGE}operationForChild(e){if(Ae(this.path)){let t=this.children.subtree(new Ze(e));return t.isEmpty()?null:t.value?new mc(this.source,Ge(),t.value):new n(this.source,Ge(),t)}else return B(xe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new n(this.source,st(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Kl=class{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Ae(e))return this.isFullyInitialized()&&!this.filtered_;let t=xe(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function A6(n,e,t,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(T6(o.childName,o.snapshotNode))}),Hl(n,i,"child_removed",e,r,t),Hl(n,i,"child_added",e,r,t),Hl(n,i,"child_moved",s,r,t),Hl(n,i,"child_changed",e,r,t),Hl(n,i,"value",e,r,t),i}function Hl(n,e,t,r,i,s){let o=r.filter(a=>a.type===t);o.sort((a,c)=>N6(n,a,c)),o.forEach(a=>{let c=R6(n,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(c,n.query_))})})}function R6(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function N6(n,e,t){if(e.childName==null||t.childName==null)throw jo("Should only compare child_ events.");let r=new Me(e.childName,e.snapshotNode),i=new Me(t.childName,t.snapshotNode);return n.index_.compare(r,i)}function dk(n,e){return{eventCache:n,serverCache:e}}function zl(n,e,t,r){return dk(new Kl(e,t,r),n.serverCache)}function hk(n,e,t,r){return dk(n.eventCache,new Kl(e,t,r))}function GC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function So(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}var pC,x6=()=>(pC||(pC=new ar(x9)),pC),Mn=class n{constructor(e,t=x6()){this.value=e,this.children=t}static fromObject(e){let t=new n(null);return cr(e,(r,i)=>{t=t.set(new Ze(r),i)}),t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:Ge(),value:this.value};if(Ae(e))return null;{let r=xe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(st(e),t);return s!=null?{path:$t(new Ze(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Ae(e))return this;{let t=xe(e),r=this.children.get(t);return r!==null?r.subtree(st(e)):new n(null)}}set(e,t){if(Ae(e))return new n(t,this.children);{let r=xe(e),s=(this.children.get(r)||new n(null)).set(st(e),t),o=this.children.insert(r,s);return new n(this.value,o)}}remove(e){if(Ae(e))return this.children.isEmpty()?new n(null):new n(null,this.children);{let t=xe(e),r=this.children.get(t);if(r){let i=r.remove(st(e)),s;return i.isEmpty()?s=this.children.remove(t):s=this.children.insert(t,i),this.value===null&&s.isEmpty()?new n(null):new n(this.value,s)}else return this}}get(e){if(Ae(e))return this.value;{let t=xe(e),r=this.children.get(t);return r?r.get(st(e)):null}}setTree(e,t){if(Ae(e))return t;{let r=xe(e),s=(this.children.get(r)||new n(null)).setTree(st(e),t),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new n(this.value,o)}}fold(e){return this.fold_(Ge(),e)}fold_(e,t){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_($t(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Ge(),t)}findOnPath_(e,t,r){let i=this.value?r(t,this.value):!1;if(i)return i;if(Ae(e))return null;{let s=xe(e),o=this.children.get(s);return o?o.findOnPath_(st(e),$t(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Ge(),t)}foreachOnPath_(e,t,r){if(Ae(e))return this;{this.value&&r(t,this.value);let i=xe(e),s=this.children.get(i);return s?s.foreachOnPath_(st(e),$t(t,i),r):new n(null)}}foreach(e){this.foreach_(Ge(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_($t(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}};var Tr=class n{constructor(e){this.writeTree_=e}static empty(){return new n(new Mn(null))}};function Wl(n,e,t){if(Ae(e))return new Tr(new Mn(t));{let r=n.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=or(i,e);return s=s.updateChild(o,t),new Tr(n.writeTree_.set(i,s))}else{let i=new Mn(t),s=n.writeTree_.setTree(e,i);return new Tr(s)}}}function vO(n,e,t){let r=n;return cr(t,(i,s)=>{r=Wl(r,$t(e,i),s)}),r}function wO(n,e){if(Ae(e))return Tr.empty();{let t=n.writeTree_.setTree(e,new Mn(null));return new Tr(t)}}function zC(n,e){return Ao(n,e)!=null}function Ao(n,e){let t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(or(t.path,e)):null}function IO(n){let e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(on,(r,i)=>{e.push(new Me(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Me(r,i.value))}),e}function ps(n,e){if(Ae(e))return n;{let t=Ao(n,e);return t!=null?new Tr(new Mn(t)):new Tr(n.writeTree_.subtree(e))}}function WC(n){return n.writeTree_.isEmpty()}function _c(n,e){return fk(Ge(),n.writeTree_,e)}function fk(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(B(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):t=fk($t(n,i),s,t)}),!t.getChild(n).isEmpty()&&r!==null&&(t=t.updateChild($t(n,".priority"),r)),t}}function pk(n,e){return vk(e,n)}function M6(n,e,t,r,i){B(r>n.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Wl(n.visibleWrites,e,t)),n.lastWriteId=r}function P6(n,e){for(let t=0;t<n.allWrites.length;t++){let r=n.allWrites[t];if(r.writeId===e)return r}return null}function O6(n,e){let t=n.allWrites.findIndex(a=>a.writeId===e);B(t>=0,"removeWrite called with nonexistent writeId.");let r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){let a=n.allWrites[o];a.visible&&(o>=t&&k6(a,r.path)?i=!1:Cr(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return F6(n),!0;if(r.snap)n.visibleWrites=wO(n.visibleWrites,r.path);else{let a=r.children;cr(a,c=>{n.visibleWrites=wO(n.visibleWrites,$t(r.path,c))})}return!0}else return!1}function k6(n,e){if(n.snap)return Cr(n.path,e);for(let t in n.children)if(n.children.hasOwnProperty(t)&&Cr($t(n.path,t),e))return!0;return!1}function F6(n){n.visibleWrites=gk(n.allWrites,L6,Ge()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function L6(n){return n.visible}function gk(n,e,t){let r=Tr.empty();for(let i=0;i<n.length;++i){let s=n[i];if(e(s)){let o=s.path,a;if(s.snap)Cr(t,o)?(a=or(t,o),r=Wl(r,a,s.snap)):Cr(o,t)&&(a=or(o,t),r=Wl(r,Ge(),s.snap.getChild(a)));else if(s.children){if(Cr(t,o))a=or(t,o),r=vO(r,a,s.children);else if(Cr(o,t))if(a=or(o,t),Ae(a))r=vO(r,Ge(),s.children);else{let c=Ts(s.children,xe(a));if(c){let l=c.getChild(st(a));r=Wl(r,Ge(),l)}}}else throw jo("WriteRecord should have .snap or .children")}}return r}function mk(n,e,t,r,i){if(!r&&!i){let s=Ao(n.visibleWrites,e);if(s!=null)return s;{let o=ps(n.visibleWrites,e);if(WC(o))return t;if(t==null&&!zC(o,Ge()))return null;{let a=t||ft.EMPTY_NODE;return _c(o,a)}}}else{let s=ps(n.visibleWrites,e);if(!i&&WC(s))return t;if(!i&&t==null&&!zC(s,Ge()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Cr(l.path,e)||Cr(e,l.path))},a=gk(n.allWrites,o,e),c=t||ft.EMPTY_NODE;return _c(a,c)}}}function V6(n,e,t){let r=ft.EMPTY_NODE,i=Ao(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(on,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){let s=ps(n.visibleWrites,e);return t.forEachChild(on,(o,a)=>{let c=_c(ps(s,new Ze(o)),a);r=r.updateImmediateChild(o,c)}),IO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=ps(n.visibleWrites,e);return IO(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function U6(n,e,t,r,i){B(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=$t(e,t);if(zC(n.visibleWrites,s))return null;{let o=ps(n.visibleWrites,s);return WC(o)?i.getChild(t):_c(o,i.getChild(t))}}function j6(n,e,t,r){let i=$t(e,t),s=Ao(n.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(t)){let o=ps(n.visibleWrites,i);return _c(o,r.getNode().getImmediateChild(t))}else return null}function B6(n,e){return Ao(n.visibleWrites,e)}function $6(n,e,t,r,i,s,o){let a,c=ps(n.visibleWrites,e),l=Ao(c,Ge());if(l!=null)a=l;else if(t!=null)a=_c(c,t);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],f=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),_=g.getNext();for(;_&&d.length<i;)f(_,r)!==0&&d.push(_),_=g.getNext();return d}else return[]}function H6(){return{visibleWrites:Tr.empty(),allWrites:[],lastWriteId:-1}}function KC(n,e,t,r){return mk(n.writeTree,n.treePath,e,t,r)}function _k(n,e){return V6(n.writeTree,n.treePath,e)}function EO(n,e,t,r){return U6(n.writeTree,n.treePath,e,t,r)}function Ag(n,e){return B6(n.writeTree,$t(n.treePath,e))}function q6(n,e,t,r,i,s){return $6(n.writeTree,n.treePath,e,t,r,i,s)}function hT(n,e,t){return j6(n.writeTree,n.treePath,e,t)}function yk(n,e){return vk($t(n.treePath,e),n.writeTree)}function vk(n,e){return{treePath:n,writeTree:e}}var QC=class{constructor(){this.changeMap=new Map}trackChildChange(e){let t=e.type,r=e.childName;B(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),B(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(t==="child_added"&&s==="child_removed")this.changeMap.set(r,gO(r,e.snapshotNode,i.snapshotNode));else if(t==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(t==="child_removed"&&s==="child_changed")this.changeMap.set(r,C6(r,i.oldSnap));else if(t==="child_changed"&&s==="child_added")this.changeMap.set(r,E6(r,e.snapshotNode));else if(t==="child_changed"&&s==="child_changed")this.changeMap.set(r,gO(r,e.snapshotNode,i.oldSnap));else throw jo("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var YC=class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}},wk=new YC,Ql=class{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){let t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Kl(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hT(this.writes_,e,r)}}getChildAfterChild(e,t,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:So(this.viewCache_),s=q6(this.writes_,i,t,1,r,e);return s.length===0?null:s[0]}};function G6(n,e){B(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),B(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function z6(n,e,t,r,i){let s=new QC,o,a;if(t.type===Si.OVERWRITE){let l=t;l.source.fromUser?o=ZC(n,e,l.path,l.snap,r,i,s):(B(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!Ae(l.path),o=Rg(n,e,l.path,l.snap,r,i,a,s))}else if(t.type===Si.MERGE){let l=t;l.source.fromUser?o=K6(n,e,l.path,l.children,r,i,s):(B(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=JC(n,e,l.path,l.children,r,i,a,s))}else if(t.type===Si.ACK_USER_WRITE){let l=t;l.revert?o=Z6(n,e,l.path,r,i,s):o=Q6(n,e,l.path,l.affectedTree,r,i,s)}else if(t.type===Si.LISTEN_COMPLETE)o=Y6(n,e,t.path,r,s);else throw jo("Unknown operation type: "+t.type);let c=s.getChanges();return W6(e,o,c),{viewCache:o,changes:c}}function W6(n,e,t){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=GC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(I6(GC(e)))}}function Ik(n,e,t,r,i,s){let o=e.eventCache;if(Ag(r,t)!=null)return e;{let a,c;if(Ae(t))if(B(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=So(e),d=l instanceof ft?l:ft.EMPTY_NODE,f=_k(r,d);a=n.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{let l=KC(r,So(e));a=n.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=xe(t);if(l===".priority"){B(gs(t)===1,"Can't have a priority with additional path components");let d=o.getNode();c=e.serverCache.getNode();let f=EO(r,t,d,c);f!=null?a=n.filter.updatePriority(d,f):a=o.getNode()}else{let d=st(t),f;if(o.isCompleteForChild(l)){c=e.serverCache.getNode();let g=EO(r,t,o.getNode(),c);g!=null?f=o.getNode().getImmediateChild(l).updateChild(d,g):f=o.getNode().getImmediateChild(l)}else f=hT(r,l,e.serverCache);f!=null?a=n.filter.updateChild(o.getNode(),l,f,d,i,s):a=o.getNode()}}return zl(e,a,o.isFullyInitialized()||Ae(t),n.filter.filtersNodes())}}function Rg(n,e,t,r,i,s,o,a){let c=e.serverCache,l,d=o?n.filter:n.filter.getIndexedFilter();if(Ae(t))l=d.updateFullNode(c.getNode(),r,null);else if(d.filtersNodes()&&!c.isFiltered()){let _=c.getNode().updateChild(t,r);l=d.updateFullNode(c.getNode(),_,null)}else{let _=xe(t);if(!c.isCompleteForPath(t)&&gs(t)>1)return e;let w=st(t),S=c.getNode().getImmediateChild(_).updateChild(w,r);_===".priority"?l=d.updatePriority(c.getNode(),S):l=d.updateChild(c.getNode(),_,S,w,wk,null)}let f=hk(e,l,c.isFullyInitialized()||Ae(t),d.filtersNodes()),g=new Ql(i,f,s);return Ik(n,f,t,i,g,a)}function ZC(n,e,t,r,i,s,o){let a=e.eventCache,c,l,d=new Ql(i,e,s);if(Ae(t))l=n.filter.updateFullNode(e.eventCache.getNode(),r,o),c=zl(e,l,!0,n.filter.filtersNodes());else{let f=xe(t);if(f===".priority")l=n.filter.updatePriority(e.eventCache.getNode(),r),c=zl(e,l,a.isFullyInitialized(),a.isFiltered());else{let g=st(t),_=a.getNode().getImmediateChild(f),w;if(Ae(g))w=r;else{let R=d.getCompleteChild(f);R!=null?JO(g)===".priority"&&R.getChild(ek(g)).isEmpty()?w=R:w=R.updateChild(g,r):w=ft.EMPTY_NODE}if(_.equals(w))c=e;else{let R=n.filter.updateChild(a.getNode(),f,w,g,d,o);c=zl(e,R,a.isFullyInitialized(),n.filter.filtersNodes())}}}return c}function CO(n,e){return n.eventCache.isCompleteForChild(e)}function K6(n,e,t,r,i,s,o){let a=e;return r.foreach((c,l)=>{let d=$t(t,c);CO(e,xe(d))&&(a=ZC(n,a,d,l,i,s,o))}),r.foreach((c,l)=>{let d=$t(t,c);CO(e,xe(d))||(a=ZC(n,a,d,l,i,s,o))}),a}function TO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function JC(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c=e,l;Ae(t)?l=r:l=new Mn(null).setTree(t,r);let d=e.serverCache.getNode();return l.children.inorderTraversal((f,g)=>{if(d.hasChild(f)){let _=e.serverCache.getNode().getImmediateChild(f),w=TO(n,_,g);c=Rg(n,c,new Ze(f),w,i,s,o,a)}}),l.children.inorderTraversal((f,g)=>{let _=!e.serverCache.isCompleteForChild(f)&&g.value===null;if(!d.hasChild(f)&&!_){let w=e.serverCache.getNode().getImmediateChild(f),R=TO(n,w,g);c=Rg(n,c,new Ze(f),R,i,s,o,a)}}),c}function Q6(n,e,t,r,i,s,o){if(Ag(i,t)!=null)return e;let a=e.serverCache.isFiltered(),c=e.serverCache;if(r.value!=null){if(Ae(t)&&c.isFullyInitialized()||c.isCompleteForPath(t))return Rg(n,e,t,c.getNode().getChild(t),i,s,a,o);if(Ae(t)){let l=new Mn(null);return c.getNode().forEachChild(dc,(d,f)=>{l=l.set(new Ze(d),f)}),JC(n,e,t,l,i,s,a,o)}else return e}else{let l=new Mn(null);return r.foreach((d,f)=>{let g=$t(t,d);c.isCompleteForPath(g)&&(l=l.set(d,c.getNode().getChild(g)))}),JC(n,e,t,l,i,s,a,o)}}function Y6(n,e,t,r,i){let s=e.serverCache,o=hk(e,s.getNode(),s.isFullyInitialized()||Ae(t),s.isFiltered());return Ik(n,o,t,r,wk,i)}function Z6(n,e,t,r,i,s){let o;if(Ag(r,t)!=null)return e;{let a=new Ql(r,e,i),c=e.eventCache.getNode(),l;if(Ae(t)||xe(t)===".priority"){let d;if(e.serverCache.isFullyInitialized())d=KC(r,So(e));else{let f=e.serverCache.getNode();B(f instanceof ft,"serverChildren would be complete if leaf node"),d=_k(r,f)}d=d,l=n.filter.updateFullNode(c,d,s)}else{let d=xe(t),f=hT(r,d,e.serverCache);f==null&&e.serverCache.isCompleteForChild(d)&&(f=c.getImmediateChild(d)),f!=null?l=n.filter.updateChild(c,d,f,st(t),a,s):e.eventCache.getNode().hasChild(d)?l=n.filter.updateChild(c,d,ft.EMPTY_NODE,st(t),a,s):l=c,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=KC(r,So(e)),o.isLeafNode()&&(l=n.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Ag(r,Ge())!=null,zl(e,l,o,n.filter.filtersNodes())}}function J6(n,e){let t=So(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Ae(e)&&!t.getImmediateChild(xe(e)).isEmpty())?t.getChild(e):null}function bO(n,e,t,r){e.type===Si.MERGE&&e.source.queryId!==null&&(B(So(n.viewCache_),"We should always have a full cache before handling merges"),B(GC(n.viewCache_),"Missing event cache, even though we have a server cache"));let i=n.viewCache_,s=z6(n.processor_,i,e,t,r);return G6(n.processor_,s.viewCache),B(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,X6(n,s.changes,s.viewCache.eventCache.getNode(),null)}function X6(n,e,t,r){let i=r?[r]:n.eventRegistrations_;return A6(n.eventGenerator_,e,t,i)}var DO;function e5(n){B(!DO,"__referenceConstructor has already been defined"),DO=n}function fT(n,e,t,r){let i=e.source.queryId;if(i!==null){let s=n.views.get(i);return B(s!=null,"SyncTree gave us an op for an invalid query."),bO(s,e,t,r)}else{let s=[];for(let o of n.views.values())s=s.concat(bO(o,e,t,r));return s}}function pT(n,e){let t=null;for(let r of n.views.values())t=t||J6(r,e);return t}var SO;function t5(n){B(!SO,"__referenceConstructor has already been defined"),SO=n}var Ng=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Mn(null),this.pendingWriteTree_=H6(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function n5(n,e,t,r,i){return M6(n.pendingWriteTree_,e,t,r,i),i?Mg(n,new mc(ck(),e,t)):[]}function uc(n,e,t=!1){let r=P6(n.pendingWriteTree_,e);if(O6(n.pendingWriteTree_,e)){let s=new Mn(null);return r.snap!=null?s=s.set(Ge(),!0):cr(r.children,o=>{s=s.set(new Ze(o),!0)}),Mg(n,new qC(r.path,s,t))}else return[]}function xg(n,e,t){return Mg(n,new mc(uk(),e,t))}function r5(n,e,t){let r=Mn.fromObject(t);return Mg(n,new Sg(uk(),e,r))}function i5(n,e,t,r){let i=bk(n,r);if(i!=null){let s=Dk(i),o=s.path,a=s.queryId,c=or(o,e),l=new mc(lk(a),c,t);return Sk(n,o,l)}else return[]}function s5(n,e,t,r){let i=bk(n,r);if(i){let s=Dk(i),o=s.path,a=s.queryId,c=or(o,e),l=Mn.fromObject(t),d=new Sg(lk(a),c,l);return Sk(n,o,d)}else return[]}function Ek(n,e,t){let i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{let c=or(o,e),l=pT(a,c);if(l)return l});return mk(i,e,s,t,!0)}function Mg(n,e){return Ck(e,n.syncPointTree_,null,pk(n.pendingWriteTree_,Ge()))}function Ck(n,e,t,r){if(Ae(n.path))return Tk(n,e,t,r);{let i=e.get(Ge());t==null&&i!=null&&(t=pT(i,Ge()));let s=[],o=xe(n.path),a=n.operationForChild(o),c=e.children.get(o);if(c&&a){let l=t?t.getImmediateChild(o):null,d=yk(r,o);s=s.concat(Ck(a,c,l,d))}return i&&(s=s.concat(fT(i,n,r,t))),s}}function Tk(n,e,t,r){let i=e.get(Ge());t==null&&i!=null&&(t=pT(i,Ge()));let s=[];return e.children.inorderTraversal((o,a)=>{let c=t?t.getImmediateChild(o):null,l=yk(r,o),d=n.operationForChild(o);d&&(s=s.concat(Tk(d,a,c,l)))}),i&&(s=s.concat(fT(i,n,r,t))),s}function bk(n,e){return n.tagToQueryMap.get(e)}function Dk(n){let e=n.indexOf("$");return B(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Ze(n.substr(0,e))}}function Sk(n,e,t){let r=n.syncPointTree_.get(e);B(r,"Missing sync point for query tag that we're tracking");let i=pk(n.pendingWriteTree_,e);return fT(r,t,i,null)}var XC=class n{constructor(e){this.node_=e}getImmediateChild(e){let t=this.node_.getImmediateChild(e);return new n(t)}node(){return this.node_}},eT=class n{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){let t=$t(this.path_,e);return new n(this.syncTree_,t)}node(){return Ek(this.syncTree_,this.path_)}},o5=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},AO=function(n,e,t){if(!n||typeof n!="object")return n;if(B(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return a5(n[".sv"],e,t);if(typeof n[".sv"]=="object")return c5(n[".sv"],e);B(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},a5=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:B(!1,"Unexpected server value: "+n)}},c5=function(n,e,t){n.hasOwnProperty("increment")||B(!1,"Unexpected server value: "+JSON.stringify(n,null,2));let r=n.increment;typeof r!="number"&&B(!1,"Unexpected increment value: "+r);let i=e.node();if(B(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},u5=function(n,e,t,r){return gT(e,new eT(t,n),r)},l5=function(n,e,t){return gT(n,new XC(e),t)};function gT(n,e,t){let r=n.getPriority().val(),i=AO(r,e.getImmediateChild(".priority"),t),s;if(n.isLeafNode()){let o=n,a=AO(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new pc(a,sn(i)):n}else{let o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new pc(i))),o.forEachChild(on,(a,c)=>{let l=gT(c,e.getImmediateChild(a),t);l!==c&&(s=s.updateImmediateChild(a,l))}),s}}var Yl=class{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}};function mT(n,e){let t=e instanceof Ze?e:new Ze(e),r=n,i=xe(t);for(;i!==null;){let s=Ts(r.node.children,i)||{children:{},childCount:0};r=new Yl(i,r,s),t=st(t),i=xe(t)}return r}function wc(n){return n.node.value}function Ak(n,e){n.node.value=e,tT(n)}function Rk(n){return n.node.childCount>0}function d5(n){return wc(n)===void 0&&!Rk(n)}function Pg(n,e){cr(n.node.children,(t,r)=>{e(new Yl(t,n,r))})}function Nk(n,e,t,r){t&&!r&&e(n),Pg(n,i=>{Nk(i,e,!0,r)}),t&&r&&e(n)}function h5(n,e,t){let r=t?n:n.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function td(n){return new Ze(n.parent===null?n.name:td(n.parent)+"/"+n.name)}function tT(n){n.parent!==null&&f5(n.parent,n.name,n)}function f5(n,e,t){let r=d5(t),i=Sr(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,tT(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,tT(n))}var p5=/[\[\].#$\/\u0000-\u001F\u007F]/,g5=/[\[\].#$\u0000-\u001F\u007F]/,gC=10*1024*1024,xk=function(n){return typeof n=="string"&&n.length!==0&&!p5.test(n)},m5=function(n){return typeof n=="string"&&n.length!==0&&!g5.test(n)},_5=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),m5(n)};var Mk=function(n,e,t){let r=t instanceof Ze?new RC(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Co(r));if(typeof e=="function")throw new Error(n+"contains a function "+Co(r)+" with contents = "+e.toString());if(OO(e))throw new Error(n+"contains "+e.toString()+" "+Co(r));if(typeof e=="string"&&e.length>gC/3&&cu(e)>gC)throw new Error(n+"contains a string greater than "+gC+" utf8 bytes "+Co(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(cr(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!xk(o)))throw new Error(n+" contains an invalid key ("+o+") "+Co(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);c6(r,o),Mk(n,a,r),u6(r)}),i&&s)throw new Error(n+' contains ".value" child '+Co(r)+" in addition to actual children.")}};var y5=function(n,e){let t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!xk(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!_5(t))throw new Error(Fb(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var nT=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function v5(n,e){let t=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();t!==null&&!tk(s,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function Ro(n,e,t){v5(n,t),w5(n,r=>Cr(r,e)||Cr(e,r))}function w5(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){let i=n.eventLists_[r];if(i){let s=i.path;e(s)?(I5(n.eventLists_[r]),n.eventLists_[r]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function I5(n){for(let e=0;e<n.events.length;e++){let t=n.events[e];if(t!==null){n.events[e]=null;let r=t.getEventRunner();bo&&rn("event: "+t.toString()),Xl(r)}}}var E5="repo_interrupt",C5=25,rT=class{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new nT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dg(),this.transactionQueueTree_=new Yl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function T5(n,e,t){if(n.stats_=uT(n.repoInfo_),n.forceRestClient_||L9())n.server_=new UC(n.repoInfo_,(r,i,s,o)=>{RO(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>NO(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ut(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new lT(n.repoInfo_,e,(r,i,s,o)=>{RO(n,r,i,s,o)},r=>{NO(n,r)},r=>{D5(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=U9(n.repoInfo_,()=>new HC(n.stats_,n.server_)),n.infoData_=new jC,n.infoSyncTree_=new Ng({startListening:(r,i,s,o)=>{let a=[],c=n.infoData_.getNode(r._path);return c.isEmpty()||(a=xg(n.infoSyncTree_,r._path,c),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),_T(n,"connected",!1),n.serverSyncTree_=new Ng({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,c)=>{let l=o(a,c);Ro(n.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}function b5(n){let t=n.infoData_.getNode(new Ze(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Pk(n){return o5({timestamp:b5(n)})}function RO(n,e,t,r,i){n.dataUpdateCount++;let s=new Ze(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){let c=ou(t,l=>sn(l));o=s5(n.serverSyncTree_,s,c,i)}else{let c=sn(t);o=i5(n.serverSyncTree_,s,c,i)}else if(r){let c=ou(t,l=>sn(l));o=r5(n.serverSyncTree_,s,c)}else{let c=sn(t);o=xg(n.serverSyncTree_,s,c)}let a=s;o.length>0&&(a=vT(n,s)),Ro(n.eventQueue_,a,o)}function NO(n,e){_T(n,"connected",e),e===!1&&A5(n)}function D5(n,e){cr(e,(t,r)=>{_T(n,t,r)})}function _T(n,e,t){let r=new Ze("/.info/"+e),i=sn(t);n.infoData_.updateSnapshot(r,i);let s=xg(n.infoSyncTree_,r,i);Ro(n.eventQueue_,r,s)}function S5(n){return n.nextWriteId_++}function A5(n){Ok(n,"onDisconnectEvents");let e=Pk(n),t=Dg();BC(n.onDisconnect_,Ge(),(i,s)=>{let o=u5(i,s,n.serverSyncTree_,e);ak(t,i,o)});let r=[];BC(t,Ge(),(i,s)=>{r=r.concat(xg(n.serverSyncTree_,i,s));let o=M5(n,i);vT(n,o)}),n.onDisconnect_=Dg(),Ro(n.eventQueue_,Ge(),r)}function R5(n){n.persistentConnection_&&n.persistentConnection_.interrupt(E5)}function Ok(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),rn(t,...e)}function kk(n,e,t){return Ek(n.serverSyncTree_,e,t)||ft.EMPTY_NODE}function yT(n,e=n.transactionQueueTree_){if(e||Og(n,e),wc(e)){let t=Lk(n,e);B(t.length>0,"Sending zero length transaction queue"),t.every(i=>i.status===0)&&N5(n,td(e),t)}else Rk(e)&&Pg(e,t=>{yT(n,t)})}function N5(n,e,t){let r=t.map(l=>l.currentWriteId),i=kk(n,e,r),s=i,o=i.hash();for(let l=0;l<t.length;l++){let d=t[l];B(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let f=or(e,d.path);s=s.updateChild(f,d.currentOutputSnapshotRaw)}let a=s.val(!0),c=e;n.server_.put(c.toString(),a,l=>{Ok(n,"transaction put response",{path:c.toString(),status:l});let d=[];if(l==="ok"){let f=[];for(let g=0;g<t.length;g++)t[g].status=2,d=d.concat(uc(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&f.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();Og(n,mT(n.transactionQueueTree_,e)),yT(n,n.transactionQueueTree_),Ro(n.eventQueue_,e,d);for(let g=0;g<f.length;g++)Xl(f[g])}else{if(l==="datastale")for(let f=0;f<t.length;f++)t[f].status===3?t[f].status=4:t[f].status=0;else{qn("transaction at "+c.toString()+" failed: "+l);for(let f=0;f<t.length;f++)t[f].status=4,t[f].abortReason=l}vT(n,e)}},o)}function vT(n,e){let t=Fk(n,e),r=td(t),i=Lk(n,t);return x5(n,i,r),r}function x5(n,e,t){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let c=e[a],l=or(t,c.path),d=!1,f;if(B(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,f=c.abortReason,i=i.concat(uc(n.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=C5)d=!0,f="maxretry",i=i.concat(uc(n.serverSyncTree_,c.currentWriteId,!0));else{let g=kk(n,c.path,o);c.currentInputSnapshot=g;let _=e[a].update(g.val());if(_!==void 0){Mk("transaction failed: Data returned ",_,c.path);let w=sn(_);typeof _=="object"&&_!=null&&Sr(_,".priority")||(w=w.updatePriority(g.getPriority()));let S=c.currentWriteId,F=Pk(n),q=l5(w,g,F);c.currentOutputSnapshotRaw=w,c.currentOutputSnapshotResolved=q,c.currentWriteId=S5(n),o.splice(o.indexOf(S),1),i=i.concat(n5(n.serverSyncTree_,c.path,q,c.currentWriteId,c.applyLocally)),i=i.concat(uc(n.serverSyncTree_,S,!0))}else d=!0,f="nodata",i=i.concat(uc(n.serverSyncTree_,c.currentWriteId,!0))}Ro(n.eventQueue_,t,i),i=[],d&&(e[a].status=2,function(g){setTimeout(g,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(f==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(f),!1,null))))}Og(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Xl(r[a]);yT(n,n.transactionQueueTree_)}function Fk(n,e){let t,r=n.transactionQueueTree_;for(t=xe(e);t!==null&&wc(r)===void 0;)r=mT(r,t),e=st(e),t=xe(e);return r}function Lk(n,e){let t=[];return Vk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function Vk(n,e,t){let r=wc(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);Pg(e,i=>{Vk(n,i,t)})}function Og(n,e){let t=wc(e);if(t){let r=0;for(let i=0;i<t.length;i++)t[i].status!==2&&(t[r]=t[i],r++);t.length=r,Ak(e,t.length>0?t:void 0)}Pg(e,r=>{Og(n,r)})}function M5(n,e){let t=td(Fk(n,e)),r=mT(n.transactionQueueTree_,e);return h5(r,i=>{mC(n,i)}),mC(n,r),Nk(r,i=>{mC(n,i)}),t}function mC(n,e){let t=wc(e);if(t){let r=[],i=[],s=-1;for(let o=0;o<t.length;o++)t[o].status===3||(t[o].status===1?(B(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):(B(t[o].status===0,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(uc(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Ak(e,void 0):t.length=s+1,Ro(n.eventQueue_,td(e),i);for(let o=0;o<r.length;o++)Xl(r[o])}}function P5(n){let e="",t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function O5(n){let e={};n.charAt(0)==="?"&&(n=n.substring(1));for(let t of n.split("&")){if(t.length===0)continue;let r=t.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):qn(`Invalid query segment '${t}' in query '${n}'`)}return e}var xO=function(n,e){let t=k5(n),r=t.namespace;t.domain==="firebase.com"&&Ai(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&t.domain!=="localhost"&&Ai("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||R9();let i=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new vg(t.host,t.secure,r,i,e,"",r!==t.subdomain),path:new Ze(t.pathString)}},k5=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",c=443;if(typeof n=="string"){let l=n.indexOf("//");l>=0&&(a=n.substring(0,l-1),n=n.substring(l+2));let d=n.indexOf("/");d===-1&&(d=n.length);let f=n.indexOf("?");f===-1&&(f=n.length),e=n.substring(0,Math.min(d,f)),d<f&&(i=P5(n.substring(d,f)));let g=O5(n.substring(Math.min(n.length,f)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",c=parseInt(e.substring(l+1),10)):l=e.length;let _=e.slice(0,l);if(_.toLowerCase()==="localhost")t="localhost";else if(_.split(".").length<=2)t=_;else{let w=e.indexOf(".");r=e.substring(0,w).toLowerCase(),t=e.substring(w+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:c,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var iT=class n{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Ae(this._path)?null:JO(this._path)}get ref(){return new yc(this._repo,this._path)}get _queryIdentifier(){let e=_O(this._queryParams),t=cT(e);return t==="{}"?"default":t}get _queryObject(){return _O(this._queryParams)}isEqual(e){if(e=De(e),!(e instanceof n))return!1;let t=this._repo===e._repo,r=tk(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+a6(this._path)}};var yc=class n extends iT{constructor(e,t){super(e,t,new VC,!1)}get parent(){let e=ek(this._path);return e===null?null:new n(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};e5(yc);t5(yc);var F5="FIREBASE_DATABASE_EMULATOR_HOST",sT={},L5=!1;function V5(n,e,t,r){n.repoInfo_=new vg(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}function U5(n,e,t,r,i){let s=r||n.options.databaseURL;s===void 0&&(n.options.projectId||Ai("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let o=xO(s,i),a=o.repoInfo,c,l;typeof process<"u"&&process.env&&(l=process.env[F5]),l?(c=!0,s=`http://${l}?ns=${a.namespace}`,o=xO(s,i),a=o.repoInfo):c=!o.repoInfo.secure;let d=i&&c?new Gl(Gl.OWNER):new EC(n.name,n.options,e);y5("Invalid Firebase Database URL",o),Ae(o.path)||Ai("Database URL must point to the root of a Firebase Database (not including a child path).");let f=B5(a,n,d,new IC(n.name,t));return new oT(f,n)}function j5(n,e){let t=sT[e];(!t||t[n.key]!==n)&&Ai(`Database ${e}(${n.repoInfo_}) has already been deleted.`),R5(n),delete t[n.key]}function B5(n,e,t,r){let i=sT[e.name];i||(i={},sT[e.name]=i);let s=i[n.toURLString()];return s&&Ai("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new rT(n,L5,t,r),i[n.toURLString()]=s,s}var oT=class{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(T5(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new yc(this._repo,Ge())),this._rootInternal}_delete(){return this._rootInternal!==null&&(j5(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ai("Cannot call "+e+" on a deleted database.")}};function Uk(n=Dt(),e){let t=bt(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){let r=Vi("database");r&&jk(t,...r)}return t}function jk(n,e,t,r={}){n=De(n),n._checkNotDeleted("useEmulator"),n._instanceStarted&&Ai("Cannot call useEmulator() after instance has already been initialized.");let i=n._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ai('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Gl(Gl.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Bo(r.mockUserToken,n.app.options.projectId);s=new Gl(o)}V5(i,e,t,s)}function $5(n){D9(vn),wt(new vt("database",(e,{instanceIdentifier:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return U5(r,i,s,t)},"PUBLIC").setMultipleInstances(!0)),Y(XP,eO,n),Y(XP,eO,"esm2017")}lT.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};lT.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};$5();var nd=class{constructor(e){return e}},Bk="database",wT=class{constructor(){return Ct(Bk)}};var IT=new H("angularfire2.database-instances");function H5(n,e){let t=xt(Bk,n,e);return t&&new nd(t)}function q5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nd(r)}}var G5={provide:wT,deps:[[new se,IT]]},z5={provide:nd,useFactory:H5,deps:[[new se,IT],it]};function $k(n,...e){return Y("angularfire",rt.full,"rtdb"),Xe([z5,G5,{provide:IT,useFactory:q5(n),multi:!0,deps:[te,Ee,_t,dt,[new se,yr],[new se,Nn],...e]}])}var Hk=Oe(Uk,!0);var zk="functions";var ET=class{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}getAuthToken(){return y(this,null,function*(){if(this.auth)try{let e=yield this.auth.getToken();return e?.accessToken}catch{return}})}getMessagingToken(){return y(this,null,function*(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return yield this.messaging.getToken()}catch{return}})}getAppCheckToken(e){return y(this,null,function*(){if(this.appCheck){let t=e?yield this.appCheck.getLimitedUseToken():yield this.appCheck.getToken();return t.error?null:t.token}return null})}getContext(e){return y(this,null,function*(){let t=yield this.getAuthToken(),r=yield this.getMessagingToken(),i=yield this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}})}};var CT="us-central1";var TT=class{constructor(e,t,r,i,s=CT,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new ET(t,r,i),this.cancelAllRequests=new Promise(a=>{this.deleteService=()=>Promise.resolve(a())});try{let a=new URL(s);this.customDomain=a.origin+(a.pathname==="/"?"":a.pathname),this.region=CT}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){let t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function W5(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}var qk="@firebase/functions",Gk="0.11.8";var K5="auth-internal",Q5="app-check-internal",Y5="messaging-internal";function Z5(n,e){let t=(r,{instanceIdentifier:i})=>{let s=r.getProvider("app").getImmediate(),o=r.getProvider(K5),a=r.getProvider(Y5),c=r.getProvider(Q5);return new TT(s,o,a,c,i,n)};wt(new vt(zk,t,"PUBLIC").setMultipleInstances(!0)),Y(qk,Gk,e),Y(qk,Gk,"esm2017")}function Wk(n=Dt(),e=CT){let r=bt(De(n),zk).getImmediate({identifier:e}),i=Vi("functions");return i&&Kk(r,...i),r}function Kk(n,e,t){W5(De(n),e,t)}Z5(fetch.bind(self));var rd=class{constructor(e){return e}},Qk="functions",bT=class{constructor(){return Ct(Qk)}};var DT=new H("angularfire2.functions-instances");function J5(n,e){let t=xt(Qk,n,e);return t&&new rd(t)}function X5(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new rd(r)}}var e8={provide:bT,deps:[[new se,DT]]},t8={provide:rd,useFactory:J5,deps:[[new se,DT],it]};function Yk(n,...e){return Y("angularfire",rt.full,"fn"),Xe([t8,e8,{provide:DT,useFactory:X5(n),multi:!0,deps:[te,Ee,_t,dt,[new se,yr],[new se,Nn],...e]}])}var Zk=Oe(Wk,!0);var n8="/firebase-messaging-sw.js",r8="/firebase-cloud-messaging-push-scope",r1="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",i8="https://fcmregistrations.googleapis.com/v1",i1="google.c.a.c_id",s8="google.c.a.c_l",o8="google.c.a.ts",a8="google.c.a.e";var kg=function(n){return n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",n}(kg||{});function Ri(n){let e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function c8(n){let e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var ST="fcm_token_details_db",u8=5,Jk="fcm_token_object_Store";function l8(n){return y(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(ST))return null;let e=null;return(yield $m(ST,u8,{upgrade:(r,i,s,o)=>y(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(Jk))return;let c=o.objectStore(Jk),l=yield c.index("fcmSenderId").get(n);if(yield c.clear(),!!l){if(i===2){let d=l;if(!d.auth||!d.p256dh||!d.endpoint)return;e={token:d.fcmToken,createTime:(a=d.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:d.auth,p256dh:d.p256dh,endpoint:d.endpoint,swScope:d.swScope,vapidKey:typeof d.vapidKey=="string"?d.vapidKey:Ri(d.vapidKey)}}}else if(i===3){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ri(d.auth),p256dh:Ri(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ri(d.vapidKey)}}}else if(i===4){let d=l;e={token:d.fcmToken,createTime:d.createTime,subscriptionOptions:{auth:Ri(d.auth),p256dh:Ri(d.p256dh),endpoint:d.endpoint,swScope:d.swScope,vapidKey:Ri(d.vapidKey)}}}}})})).close(),yield Ld(ST),yield Ld("fcm_vapid_details_db"),yield Ld("undefined"),d8(e)?e:null})}function d8(n){if(!n||!n.subscriptionOptions)return!1;let{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var h8="firebase-messaging-database",f8=1,id="firebase-messaging-store",AT=null;function s1(){return AT||(AT=$m(h8,f8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(id)}}})),AT}function p8(n){return y(this,null,function*(){let e=o1(n),r=yield(yield s1()).transaction(id).objectStore(id).get(e);if(r)return r;{let i=yield l8(n.appConfig.senderId);if(i)return yield xT(n,i),i}})}function xT(n,e){return y(this,null,function*(){let t=o1(n),i=(yield s1()).transaction(id,"readwrite");return yield i.objectStore(id).put(e,t),yield i.done,e})}function o1({appConfig:n}){return n.appId}var g8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},_n=new Dr("messaging","Messaging",g8);function m8(n,e){return y(this,null,function*(){let t=yield PT(n),r=a1(e),i={method:"POST",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(MT(n.appConfig),i)).json()}catch(o){throw _n.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw _n.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw _n.create("token-subscribe-no-token");return s.token})}function _8(n,e){return y(this,null,function*(){let t=yield PT(n),r=a1(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${MT(n.appConfig)}/${e.token}`,i)).json()}catch(o){throw _n.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw _n.create("token-update-failed",{errorInfo:o})}if(!s.token)throw _n.create("token-update-no-token");return s.token})}function y8(n,e){return y(this,null,function*(){let r={method:"DELETE",headers:yield PT(n)};try{let s=yield(yield fetch(`${MT(n.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw _n.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw _n.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function MT({projectId:n}){return`${i8}/projects/${n}/registrations`}function PT(t){return y(this,arguments,function*({appConfig:n,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function a1({p256dh:n,auth:e,endpoint:t,vapidKey:r}){let i={web:{endpoint:t,auth:e,p256dh:n}};return r!==r1&&(i.web.applicationPubKey=r),i}var v8=7*24*60*60*1e3;function w8(n){return y(this,null,function*(){let e=yield E8(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ri(e.getKey("auth")),p256dh:Ri(e.getKey("p256dh"))},r=yield p8(n.firebaseDependencies);if(r){if(C8(r.subscriptionOptions,t))return Date.now()>=r.createTime+v8?I8(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield y8(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Xk(n.firebaseDependencies,t)}else return Xk(n.firebaseDependencies,t)})}function I8(n,e){return y(this,null,function*(){try{let t=yield _8(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield xT(n.firebaseDependencies,r),t}catch(t){throw t}})}function Xk(n,e){return y(this,null,function*(){let r={token:yield m8(n,e),createTime:Date.now(),subscriptionOptions:e};return yield xT(n,r),r.token})}function E8(n,e){return y(this,null,function*(){let t=yield n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:c8(e)})})}function C8(n,e){let t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}function e1(n){let e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return T8(e,n),b8(e,n),D8(e,n),e}function T8(n,e){if(!e.notification)return;n.notification={};let t=e.notification.title;t&&(n.notification.title=t);let r=e.notification.body;r&&(n.notification.body=r);let i=e.notification.image;i&&(n.notification.image=i);let s=e.notification.icon;s&&(n.notification.icon=s)}function b8(n,e){e.data&&(n.data=e.data)}function D8(n,e){var t,r,i,s,o;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(n.fcmOptions.link=a);let c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}function S8(n){return typeof n=="object"&&!!n&&i1 in n}A8("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function A8(n,e){let t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function R8(n){if(!n||!n.options)throw RT("App Configuration Object");if(!n.name)throw RT("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(let r of e)if(!t[r])throw RT(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function RT(n){return _n.create("missing-app-config-values",{valueName:n})}var NT=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=R8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};function N8(n){return y(this,null,function*(){try{n.swRegistration=yield navigator.serviceWorker.register(n8,{scope:r8}),n.swRegistration.update().catch(()=>{})}catch(e){throw _n.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function x8(n,e){return y(this,null,function*(){if(!e&&!n.swRegistration&&(yield N8(n)),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw _n.create("invalid-sw-registration");n.swRegistration=e}})}function M8(n,e){return y(this,null,function*(){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=r1)})}function P8(n,e){return y(this,null,function*(){if(!navigator)throw _n.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw _n.create("permission-blocked");return yield M8(n,e?.vapidKey),yield x8(n,e?.serviceWorkerRegistration),w8(n)})}function O8(n,e,t){return y(this,null,function*(){let r=k8(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[i1],message_name:t[s8],message_time:t[o8],message_device_time:Math.floor(Date.now()/1e3)})})}function k8(n){switch(n){case kg.NOTIFICATION_CLICKED:return"notification_open";case kg.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function F8(n,e){return y(this,null,function*(){let t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===kg.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(e1(t)):n.onMessageHandler.next(e1(t)));let r=t.data;S8(r)&&r[a8]==="1"&&(yield O8(n,t.messageType,r))})}var t1="@firebase/messaging",n1="0.12.12";var L8=n=>{let e=new NT(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>F8(e,t)),e},V8=n=>{let e=n.getProvider("messaging").getImmediate();return{getToken:r=>P8(e,r)}};function U8(){wt(new vt("messaging",L8,"PUBLIC")),wt(new vt("messaging-internal",V8,"PRIVATE")),Y(t1,n1),Y(t1,n1,"esm2017")}function OT(){return y(this,null,function*(){try{yield Cs()}catch{return!1}return typeof window<"u"&&Xr()&&iu()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function c1(n=Dt()){return OT().then(e=>{if(!e)throw _n.create("unsupported-browser")},e=>{throw _n.create("indexed-db-unsupported")}),bt(De(n),"messaging").getImmediate()}U8();var sd=class{constructor(e){return e}},u1="messaging",kT=class{constructor(){return Ct(u1)}};var l1="__angularfire_symbol__messagingIsSupported",FT="__angularfire_symbol__messagingIsSupportedValue";globalThis[l1]||=OT().then(n=>globalThis[FT]=n).catch(()=>globalThis[FT]=!1);var Fg={async:()=>globalThis[l1],sync:()=>{let n=globalThis[FT];if(n===void 0)throw new Error(ka("Messaging"));return n}},LT=new H("angularfire2.messaging-instances");function j8(n,e){if(!Fg.sync())return null;let t=xt(u1,n,e);return t&&new sd(t)}function B8(n){return(e,t)=>{if(!Fg.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new sd(r)}}var $8={provide:kT,deps:[[new se,LT]]},H8={provide:sd,useFactory:j8,deps:[[new se,LT],it]};function d1(n,...e){return Y("angularfire",rt.full,"fcm"),Xe([H8,$8,{provide:ts,useValue:Fg.async,multi:!0},{provide:LT,useFactory:B8(n),multi:!0,deps:[te,Ee,_t,dt,...e]}])}var mue=Fg.async;var h1=Oe(c1,!0);var od=class{constructor(e){return e}},f1="performance",VT=class{constructor(){return Ct(f1)}};var UT=new H("angularfire2.performance-instances");function q8(n,e,t){if(!av(t))return null;let r=xt(f1,n,e);return r&&new od(r)}function G8(n){return(e,t,r)=>{if(!av(t))return null;let i=e.runOutsideAngular(()=>n(r));return new od(i)}}var z8={provide:VT,deps:[[new se,UT]]},W8={provide:od,useFactory:q8,deps:[[new se,UT],it,gr]};function p1(n,...e){return Y("angularfire",rt.full,"perf"),Xe([W8,z8,{provide:UT,useFactory:G8(n),multi:!0,deps:[te,gr,Ee,_t,dt,...e]}])}var g1=Oe(Ub,!0);var I1="firebasestorage.googleapis.com",K8="storageBucket",Q8=2*60*1e3,Y8=10*60*1e3;var Kr=class n extends yn{constructor(e,t,r=0){super(jT(e),`Firebase Storage: ${t} (${jT(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jT(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},xi=function(n){return n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment",n}(xi||{});function jT(n){return"storage/"+n}function Z8(){let n="An unknown error occurred, please check the error payload for server response.";return new Kr(xi.UNKNOWN,n)}function J8(){return new Kr(xi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function X8(){return new Kr(xi.CANCELED,"User canceled the upload/download.")}function eK(n){return new Kr(xi.INVALID_URL,"Invalid URL '"+n+"'.")}function tK(n){return new Kr(xi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function m1(n){return new Kr(xi.INVALID_ARGUMENT,n)}function E1(){return new Kr(xi.APP_DELETED,"The Firebase app was deleted.")}function nK(n){return new Kr(xi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var Ni=class n{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=n.makeFromUrl(e,t)}catch{return new n(e,"")}if(r.path==="")return r;throw tK(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(J){J.path.charAt(J.path.length-1)==="/"&&(J.path_=J.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function l(J){J.path_=decodeURIComponent(J.path)}let d="v[A-Za-z0-9_]+",f=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${f}/${d}/b/${i}/o${g}`,"i"),w={bucket:1,path:3},R=t===I1?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",F=new RegExp(`^https?://${R}/${i}/${S}`,"i"),W=[{regex:a,indices:c,postModify:s},{regex:_,indices:w,postModify:l},{regex:F,indices:{bucket:1,path:2},postModify:l}];for(let J=0;J<W.length;J++){let ze=W[J],ee=ze.regex.exec(e);if(ee){let C=ee[ze.indices.bucket],v=ee[ze.indices.path];v||(v=""),r=new n(C,v),ze.postModify(r);break}}if(r==null)throw eK(e);return r}},BT=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function rK(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let l=!1;function d(...S){l||(l=!0,e.apply(null,S))}function f(S){i=setTimeout(()=>{i=null,n(_,c())},S)}function g(){s&&clearTimeout(s)}function _(S,...F){if(l){g();return}if(S){g(),d.call(null,S,...F);return}if(c()||o){g(),d.call(null,S,...F);return}r<64&&(r*=2);let W;a===1?(a=2,W=0):W=(r+Math.random())*1e3,f(W)}let w=!1;function R(S){w||(w=!0,g(),!l&&(i!==null?(S||(a=2),clearTimeout(i),f(0)):S||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,R(!0)},t),R}function iK(n){n(!1)}function sK(n){return n!==void 0}function _1(n,e,t,r){if(r<e)throw m1(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw m1(`Invalid value for '${n}'. Expected ${t} or less.`)}function oK(n){let e=encodeURIComponent,t="?";for(let r in n)if(n.hasOwnProperty(r)){let i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var $T=function(n){return n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",n}($T||{});function aK(n,e){let t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}var HT=class{constructor(e,t,r,i,s,o,a,c,l,d,f,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=l,this.progressCallback_=d,this.connectionFactory_=f,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,w)=>{this.resolve_=_,this.reject_=w,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new Ic(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===$T.NO_ERROR,c=s.getStatus();if(!a||aK(c,this.additionalRetryCodes_)&&this.retry){let d=s.getErrorCode()===$T.ABORT;r(!1,new Ic(!1,null,d));return}let l=this.successCodes_.indexOf(c)!==-1;r(!0,new Ic(l,s))})},t=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());sK(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=Z8();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?E1():X8();o(c)}else{let c=J8();o(c)}};this.canceled_?t(!1,new Ic(!1,null,!0)):this.backoffId_=rK(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&iK(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},Ic=class{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}};function cK(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function uK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lK(n,e){e&&(n["X-Firebase-GMPID"]=e)}function dK(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function hK(n,e,t,r,i,s,o=!0){let a=oK(n.urlParams),c=n.url+a,l=Object.assign({},n.headers);return lK(l,e),cK(l,t),uK(l,s),dK(l,r),new HT(c,n.method,l,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}function fK(n){if(n.length===0)return null;let e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function pK(n){let e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}var Pue=256*1024;var qT=class n{constructor(e,t){this._service=e,t instanceof Ni?this._location=t:this._location=Ni.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new n(e,t)}get root(){let e=new Ni(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return pK(this._location.path)}get storage(){return this._service}get parent(){let e=fK(this._location.path);if(e===null)return null;let t=new Ni(this._location.bucket,e);return new n(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw nK(e)}};function y1(n,e){let t=e?.[K8];return t==null?null:Ni.makeFromBucketSpec(t,n)}function gK(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";let{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:Bo(i,n.app.options.projectId))}var GT=class{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=I1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Q8,this._maxUploadRetryTime=Y8,this._requests=new Set,i!=null?this._bucket=Ni.makeFromBucketSpec(i,this._host):this._bucket=y1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ni.makeFromBucketSpec(this._url,e):this._bucket=y1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return y(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=yield e.getToken();if(t!==null)return t.accessToken}return null})}_getAppCheckToken(){return y(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new qT(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new BT(E1());{let o=hK(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){return y(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()})}},v1="@firebase/storage",w1="0.13.2";var C1="storage";function T1(n=Dt(),e){n=De(n);let r=bt(n,C1).getImmediate({identifier:e}),i=Vi("storage");return i&&b1(r,...i),r}function b1(n,e,t,r={}){gK(n,e,t,r)}function mK(n,{instanceIdentifier:e}){let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new GT(t,r,i,e,vn)}function _K(){wt(new vt(C1,mK,"PUBLIC").setMultipleInstances(!0)),Y(v1,w1,""),Y(v1,w1,"esm2017")}_K();var ad=class{constructor(e){return e}},D1="storage",zT=class{constructor(){return Ct(D1)}};var WT=new H("angularfire2.storage-instances");function yK(n,e){let t=xt(D1,n,e);return t&&new ad(t)}function vK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ad(r)}}var wK={provide:zT,deps:[[new se,WT]]},IK={provide:ad,useFactory:yK,deps:[[new se,WT],it]};function S1(n,...e){return Y("angularfire",rt.full,"gcs"),Xe([IK,wK,{provide:WT,useFactory:vK(n),multi:!0,deps:[te,Ee,_t,dt,[new se,yr],[new se,Nn],...e]}])}var A1=Oe(T1,!0);var KT="@firebase/remote-config",R1="0.4.9";var N1="remote-config";var EK={"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"},Pn=new Dr("remoteconfig","Remote Config",EK);function x1(n=Dt()){return n=De(n),bt(n,N1).getImmediate()}function M1(n){let e=De(n);return e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0})),e._initializePromise}var QT=class{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;let r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return r;e.eTag=r&&r.eTag;let i=yield this.client.fetch(e),s=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return i.status===200&&s.push(this.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})}};function CK(n=navigator){return n.languages&&n.languages[0]||n.language}var YT=class{constructor(e,t,r,i,s,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=o}fetch(e){return y(this,null,function*(){let[t,r]=yield Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),s=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,o={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:r,app_id:this.appId,language_code:CK()},c={method:"POST",headers:o,body:JSON.stringify(a)},l=fetch(s,c),d=new Promise((S,F)=>{e.signal.addEventListener(()=>{let q=new Error("The operation was aborted.");q.name="AbortError",F(q)})}),f;try{yield Promise.race([l,d]),f=yield l}catch(S){let F="fetch-client-network";throw S?.name==="AbortError"&&(F="fetch-timeout"),Pn.create(F,{originalErrorMessage:S?.message})}let g=f.status,_=f.headers.get("ETag")||void 0,w,R;if(f.status===200){let S;try{S=yield f.json()}catch(F){throw Pn.create("fetch-client-parse",{originalErrorMessage:F?.message})}w=S.entries,R=S.state}if(R==="INSTANCE_STATE_UNSPECIFIED"?g=500:R==="NO_CHANGE"?g=304:(R==="NO_TEMPLATE"||R==="EMPTY_CONFIG")&&(w={}),g!==304&&g!==200)throw Pn.create("fetch-status",{httpStatus:g});return{status:g,eTag:_,config:w}})}};function TK(n,e){return new Promise((t,r)=>{let i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function bK(n){if(!(n instanceof yn)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var ZT=class{constructor(e,t){this.client=e,this.storage=t}fetch(e){return y(this,null,function*(){let t=(yield this.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)})}attemptFetch(i,s){return y(this,arguments,function*(e,{throttleEndTimeMillis:t,backoffCount:r}){yield TK(e.signal,t);try{let o=yield this.client.fetch(e);return yield this.storage.deleteThrottleMetadata(),o}catch(o){if(!bK(o))throw o;let a={throttleEndTimeMillis:Date.now()+uu(r),backoffCount:r+1};return yield this.storage.setThrottleMetadata(a),this.attemptFetch(e,a)}})}};var DK=60*1e3,SK=12*60*60*1e3,JT=class{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:DK,minimumFetchIntervalMillis:SK},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}};function Lg(n,e){let t=n.target.error||void 0;return Pn.create(e,{originalErrorMessage:t&&t?.message})}var No="app_namespace_store",AK="firebase_remote_config",RK=1;function NK(){return new Promise((n,e)=>{try{let t=indexedDB.open(AK,RK);t.onerror=r=>{e(Lg(r,"storage-open"))},t.onsuccess=r=>{n(r.target.result)},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(No,{keyPath:"compositeKey"})}}}catch(t){e(Pn.create("storage-open",{originalErrorMessage:t?.message}))}})}var XT=class{constructor(e,t,r,i=NK()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([No],"readonly").objectStore(No),a=this.createCompositeKey(e);try{let c=o.get(a);c.onerror=l=>{i(Lg(l,"storage-get"))},c.onsuccess=l=>{let d=l.target.result;r(d?d.value:void 0)}}catch(c){i(Pn.create("storage-get",{originalErrorMessage:c?.message}))}})})}set(e,t){return y(this,null,function*(){let r=yield this.openDbPromise;return new Promise((i,s)=>{let a=r.transaction([No],"readwrite").objectStore(No),c=this.createCompositeKey(e);try{let l=a.put({compositeKey:c,value:t});l.onerror=d=>{s(Lg(d,"storage-set"))},l.onsuccess=()=>{i()}}catch(l){s(Pn.create("storage-set",{originalErrorMessage:l?.message}))}})})}delete(e){return y(this,null,function*(){let t=yield this.openDbPromise;return new Promise((r,i)=>{let o=t.transaction([No],"readwrite").objectStore(No),a=this.createCompositeKey(e);try{let c=o.delete(a);c.onerror=l=>{i(Lg(l,"storage-delete"))},c.onsuccess=()=>{r()}}catch(c){i(Pn.create("storage-delete",{originalErrorMessage:c?.message}))}})})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}};var e0=class{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){return y(this,null,function*(){let e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),i=yield e;i&&(this.lastFetchStatus=i);let s=yield t;s&&(this.lastSuccessfulFetchTimestampMillis=s);let o=yield r;o&&(this.activeConfig=o)})}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}};function xK(){wt(new vt(N1,n,"PUBLIC").setMultipleInstances(!0)),Y(KT,R1),Y(KT,R1,"esm2017");function n(e,{instanceIdentifier:t}){let r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Pn.create("registration-window");if(!Xr())throw Pn.create("indexed-db-unavailable");let{projectId:s,apiKey:o,appId:a}=r.options;if(!s)throw Pn.create("registration-project-id");if(!o)throw Pn.create("registration-api-key");if(!a)throw Pn.create("registration-app-id");t=t||"firebase";let c=new XT(a,r.name,t),l=new e0(c),d=new Ar(KT);d.logLevel=Jt.ERROR;let f=new YT(i,vn,t,s,o,a),g=new ZT(f,c),_=new QT(g,c,l,d),w=new JT(r,_,l,c,d);return M1(w),w}}function P1(){return y(this,null,function*(){if(!Xr())return!1;try{return yield Cs()}catch{return!1}})}xK();var cd=class{constructor(e){return e}},O1="remote-config",t0=class{constructor(){return Ct(O1)}};var n0="__angularfire_symbol__remoteConfigIsSupportedValue",k1="__angularfire_symbol__remoteConfigIsSupported";globalThis[k1]||=P1().then(n=>globalThis[n0]=n).catch(()=>globalThis[n0]=!1);var Vg={async:()=>globalThis[k1],sync:()=>{let n=globalThis[n0];if(n===void 0)throw new Error(ka("RemoteConfig"));return n}},r0=new H("angularfire2.remote-config-instances");function MK(n,e){if(!Vg.sync())return null;let t=xt(O1,n,e);return t&&new cd(t)}function PK(n){return(e,t)=>{if(!Vg.sync())return null;let r=e.runOutsideAngular(()=>n(t));return new cd(r)}}var OK={provide:t0,deps:[[new se,r0]]},kK={provide:cd,useFactory:MK,deps:[[new se,r0],it]};function F1(n,...e){return Y("angularfire",rt.full,"rc"),Xe([kK,OK,{provide:ts,useValue:Vg.async,multi:!0},{provide:r0,useFactory:PK(n),multi:!0,deps:[te,Ee,_t,dt,...e]}])}var Nle=Vg.async;var L1=Oe(x1,!0);var V1="@firebase/vertexai-preview",U1="0.0.4";var j1="vertexAI",B1="us-central1";var i0=class{constructor(e,t,r,i){var s;this.app=e,this.options=i;let o=r?.getImmediate({optional:!0}),a=t?.getImmediate({optional:!0});this.auth=a||null,this.appCheck=o||null,this.location=((s=this.options)===null||s===void 0?void 0:s.location)||B1}_delete(){return Promise.resolve()}};var s0=function(n){return n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n}(s0||{});var Fle=[s0.RECITATION,s0.SAFETY];function $1(n=Dt(),e){return n=De(n),bt(n,j1).getImmediate({identifier:e?.location||B1})}function FK(){wt(new vt(j1,(n,{instanceIdentifier:e})=>{let t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new i0(t,r,i,{location:e})},"PUBLIC").setMultipleInstances(!0)),Y(V1,U1),Y(V1,U1,"esm2017")}FK();var ud=class{constructor(e){return e}},H1="vertexai",o0=class{constructor(){return Ct(H1)}};var a0=new H("angularfire2.vertexai-instances");function LK(n,e){let t=xt(H1,n,e);return t&&new ud(t)}function VK(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ud(r)}}var UK={provide:o0,deps:[[new se,a0]]},jK={provide:ud,useFactory:LK,deps:[[new se,a0],it]};function q1(n,...e){return Y("angularfire",rt.full,"vertexai"),Xe([jK,UK,{provide:a0,useFactory:VK(n),multi:!0,deps:[te,Ee,_t,dt,[new se,Nn],...e]}])}var G1=Oe($1,!0);var z1={firebaseConfig:{apiKey:"AIzaSyBggO56pZ3V5jgNnv_4i_CpUbgU_iGvcsk",authDomain:"dash-boar-7ee0d.firebaseapp.com",projectId:"dash-boar-7ee0d",storageBucket:"dash-boar-7ee0d.firebasestorage.app",messagingSenderId:"325394396819",appId:"1:325394396819:web:e9673769b33be96849bf66",measurementId:"G-V0X3V5XKL2"},production:!0};var W1={providers:[CR({eventCoalescing:!0}),NN(xN),MN(()=>PN(z1.firebaseConfig)),bx(()=>Sx()),Kx(()=>zx()),Wx,Yw,QP(()=>YP()),$k(()=>Hk()),Yk(()=>Zk()),d1(()=>h1()),p1(()=>g1()),S1(()=>A1()),F1(()=>L1()),q1(()=>G1())]};var On=class n{destroyRef=x(Ji);firestore=x(Eo);destroyed=new ut;constructor(){this.destroyRef.onDestroy(()=>{this.destroyed.next(),this.destroyed.complete()})}generateNextId(){return y(this,null,function*(){let e=yield cC(this.collectionRef),t=0;return e.forEach(r=>{let i=r.data(),s=parseInt(i.id,10);!isNaN(s)&&s>t&&(t=s)}),(t+1).toString()})}createData(e,t){let r=aC(this.collectionRef,e);return uC(r,t)}updateData(e,t){return uC(aC(this.collectionRef,e),t,{merge:!0})}getDataById(e){return y(this,null,function*(){let t=ZP(this.collectionRef,JP("id","==",e)),r=yield cC(t);if(!r.empty)return r.docs[0].data()})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function ct(n){n||(of(ct),n=x(Ji));let e=new ce(t=>n.onDestroy(t.next.bind(t)));return t=>t.pipe(jt(e))}function Re(n,e){!e?.injector&&of(Re);let t=e?.injector??x(Ee),r=new mu(1),i=Lu(()=>{let s;try{s=n()}catch(o){er(()=>r.error(o));return}er(()=>r.next(s))},{injector:t,manualCleanup:!0});return t.get(Ji).onDestroy(()=>{i.destroy(),r.complete()}),r.asObservable()}var Ht=class n extends On{collectionPath="/race-configs";collectionRef=sr(this.firestore,this.collectionPath);activeRaceConfig=oe(void 0);constructor(){super(),this.getAll().pipe(ct()).subscribe(e=>{e.length>0&&this.activeRaceConfig.set(e.at(0))})}getAll(){return ir(this.collectionRef).pipe(jt(this.destroyed),K(e=>e.filter(t=>!t.deleted)))}updateFuelDurationMinute(e){let t=this.activeRaceConfig();return t?(t.fuelDurationMinute=e,this.updateData(t.id,t)):Promise.resolve()}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var BK=Math.pow(10,8)*24*60*60*1e3,kde=-BK;var K1=864e5,Ug=6e4,jg=36e5,Q1=1e3;var $K=3600;var Y1=$K*24,Fde=Y1*7,HK=Y1*365.2425,qK=HK/12,Lde=qK*3,c0=Symbol.for("constructDateFrom");function Gn(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&c0 in n?n[c0](e):n instanceof Date?new n.constructor(e):new Date(e)}function Fe(n,e){return Gn(e||n,n)}function Z1(n,e,t){let r=Fe(n,t?.in);return isNaN(e)?Gn(t?.in||n,NaN):(e&&r.setDate(r.getDate()+e),r)}function J1(n,e,t){let r=Fe(n,t?.in);if(isNaN(e))return Gn(t?.in||n,NaN);if(!e)return r;let i=r.getDate(),s=Gn(t?.in||n,r.getTime());s.setMonth(r.getMonth()+e+1,0);let o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function Ec(n,e,t){let{years:r=0,months:i=0,weeks:s=0,days:o=0,hours:a=0,minutes:c=0,seconds:l=0}=e,d=Fe(n,t?.in),f=i||r?J1(d,i+r*12):d,g=o||s?Z1(f,o+s*7):f,_=c+a*60,R=(l+_*60)*1e3;return Gn(t?.in||n,+g+R)}function Bg(n,e,t){return Gn(t?.in||n,+Fe(n)+e)}function Cc(n,e,t){return Bg(n,e*jg,t)}function u0(n){let e=Fe(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function an(n,...e){let t=Gn.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function l0(n,e){let t=Fe(n,e?.in);return t.setHours(0,0,0,0),t}function X1(n,e,t){let[r,i]=an(t?.in,n,e),s=l0(r),o=l0(i),a=+s-u0(s),c=+o-u0(o);return Math.round((a-c)/K1)}function xo(n,e,t){let r=Fe(n,t?.in);return r.setTime(r.getTime()+e*Ug),r}function eF(n,e,t){return Bg(n,e*1e3,t)}function Mo(n,e){let t=+Fe(n)-+Fe(e);return t<0?-1:t>0?1:t}function tF(n,e,t){let[r,i]=an(t?.in,n,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function nF(n,e,t){let[r,i]=an(t?.in,n,e);return r.getFullYear()-i.getFullYear()}function iF(n,e,t){let[r,i]=an(t?.in,n,e),s=rF(r,i),o=Math.abs(X1(r,i));r.setDate(r.getDate()-s*o);let a=+(rF(r,i)===-s),c=s*(o-a);return c===0?0:c}function rF(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Tc(n){return e=>{let r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function sF(n,e,t){let[r,i]=an(t?.in,n,e),s=(+r-+i)/jg;return Tc(t?.roundingMethod)(s)}function Mi(n,e){return+Fe(n)-+Fe(e)}function $g(n,e,t){let r=Mi(n,e)/Ug;return Tc(t?.roundingMethod)(r)}function oF(n,e){let t=Fe(n,e?.in);return t.setHours(23,59,59,999),t}function aF(n,e){let t=Fe(n,e?.in),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function cF(n,e){let t=Fe(n,e?.in);return+oF(t,e)==+aF(t,e)}function uF(n,e,t){let[r,i,s]=an(t?.in,n,n,e),o=Mo(i,s),a=Math.abs(tF(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let c=Mo(i,s)===-o;cF(r)&&a===1&&Mo(r,s)===1&&(c=!1);let l=o*(a-+c);return l===0?0:l}function lF(n,e,t){let r=Mi(n,e)/1e3;return Tc(t?.roundingMethod)(r)}function dF(n,e,t){let[r,i]=an(t?.in,n,e),s=Mo(r,i),o=Math.abs(nF(r,i));r.setFullYear(1584),i.setFullYear(1584);let a=Mo(r,i)===-s,c=s*(o-+a);return c===0?0:c}function hF(n,e){let[t,r]=an(n,e.start,e.end);return{start:t,end:r}}function d0(n,e){let{start:t,end:r}=hF(e?.in,n),i={},s=dF(r,t);s&&(i.years=s);let o=Ec(t,{years:i.years}),a=uF(r,o);a&&(i.months=a);let c=Ec(o,{months:i.months}),l=iF(r,c);l&&(i.days=l);let d=Ec(c,{days:i.days}),f=sF(r,d);f&&(i.hours=f);let g=Ec(d,{hours:i.hours}),_=$g(r,g);_&&(i.minutes=_);let w=Ec(g,{minutes:i.minutes}),R=lF(r,w);return R&&(i.seconds=R),i}function fF(n,e){return+Fe(n)>+Fe(e)}function pF(n,e){return+Fe(n)<+Fe(e)}function gF(n){return n*Q1}function mF(n,e,t){return xo(n,-e,t)}var kt=class n extends On{collectionPath="/races";collectionRef=sr(this.firestore,this.collectionPath);raceConfigService=x(Ht);activeRace=oe(void 0);endRaceDate=oe(void 0);constructor(){super(),Je({races:this.getAll(),raceConfig:Re(this.raceConfigService.activeRaceConfig)}).pipe(ct(),K(({races:e,raceConfig:t})=>{if(e&&t){let r=this.getActiveRace(e,t),i=r?Cc(r.start.toDate(),t.durationHour):void 0;return{activeRace:r,endRaceDate:i}}return{activeRace:void 0,endRaceDate:void 0}})).subscribe(e=>{this.activeRace.set(e.activeRace),this.endRaceDate.set(e.endRaceDate)})}create(e){return y(this,null,function*(){return this.activeRace()!==void 0?(console.warn("Race already active -> "+this.activeRace()),Promise.resolve()):(e.id=yield this.generateNextId(),yield this.createData(e.id,e),e)})}updateRace(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getAll(){return ir(this.collectionRef).pipe(jt(this.destroyed),K(e=>e.filter(t=>!t.deleted)))}getActiveRace(e,t){let r=new Date,i=e.sort((s,o)=>o.start.toDate().getTime()-s.start.toDate().getTime());for(let s of i)if(Cc(s.start.toDate(),t.durationHour)>=r)return s}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function _F(n,e){if(!n||!e)return"--:--:--";let t=d0({end:e,start:n});return Hg(t)}function Po(n){if(!n)return"--:--:--";let e=d0({end:n,start:new Date});return Hg(e)}function ms(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={hours:Math.floor(e/3600),minutes:Math.floor(e%3600/60),seconds:e%60};return Hg(t)}function yF(n){if(!n||n<0)return"--:--:--";let e=Math.floor(n/1e3),t={minutes:Math.floor(e%3600/60),seconds:e%60};return Hg(t)}function vF(n){if(!n||n<0)return"--:--:---";let e=Math.floor(n/1e3),t=n%1e3,r={minutes:Math.floor(e/60),seconds:e%60};return GK(r,t)}function GK(n,e){return n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"00:00:000":[ld(n.minutes),ld(n.seconds),zK(e)].join(":")}function Hg(n){return n.hours&&n.hours<0||n.minutes&&n.minutes<0||n.seconds&&n.seconds<0?"00:00:00":[ld(n.hours),ld(n.minutes),ld(n.seconds)].join(":")}function ld(n){return n?n<10?`0${n}`:`${n}`:"00"}function zK(n){return n<10?`00${n}`:n<100?`0${n}`:`${n}`}var Qr=class n extends On{raceService=x(kt);collectionPath="/stints";collectionRef=sr(this.firestore,this.collectionPath);activeRace=this.raceService.activeRace;stints=oe([]);activeStint=oe(void 0);constructor(){super(),this.getRaceStints().pipe(ct()).subscribe(e=>{this.stints.set(e);let t=this.getActiveStint(e);this.activeStint.set(t)})}getRaceStints(){return Je({stints:ir(this.collectionRef),activeRace:Re(this.activeRace)}).pipe(jt(this.destroyed),K(({stints:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return y(this,null,function*(){return yield this.updateData(e.id,e),e})}getActiveStint(e){let t=e.sort((r,i)=>i.startDate.toDate().getTime()-r.startDate.toDate().getTime());for(let r of t)if(!r.endDate)return r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var kn=class n extends On{collectionPath="/pits";collectionRef=sr(this.firestore,this.collectionPath);raceService=x(kt);raceConfigService=x(Ht);activePit=oe(void 0);activePitRemainingMilliseconds=oe(0);lastRefuelPit=oe(void 0);pits=oe([]);completedDriverChanges=oe(0);lastDriverChangePit=oe(void 0);remainingDriverChanges=oe(0);constructor(){super(),Je({pits:this.getRacePits(),activeRaceConfig:Re(this.raceConfigService.activeRaceConfig),ping:dn(1e3)}).pipe(ct()).subscribe(({pits:e,activeRaceConfig:t})=>{this.pits.set(e),this.activePit.set(this.getActivePit(e)),this.activePitRemainingMilliseconds.set(this.calculateActivePitRemainingMilliseconds(e,t)),this.lastRefuelPit.set(this.getLastRefuelPit(e)),this.lastDriverChangePit.set(this.getLastDriverChangePit(e)),this.completedDriverChanges.set(this.calculateCompletedDriverChanges(e)),this.remainingDriverChanges.set(this.calculateRemainingDriverChanges(e,t))}),this.getRacePits().pipe(ct()).subscribe(e=>{})}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}update(e){return this.updateData(e.id,e)}getById(e){return this.getDataById(e)}getRacePits(){return Je({pits:ir(this.collectionRef),activeRace:Re(this.raceService.activeRace)}).pipe(jt(this.destroyed),K(({pits:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}getActivePit(e){let t=e.sort((r,i)=>i.entryTime.toDate().getTime()-r.entryTime.toDate().getTime());for(let r of t)if(!r.exitTime)return r}calculateActivePitRemainingMilliseconds(e,t){if(!t)return 0;let r=this.getActivePit(e);if(r){let i=new Date().getTime();return eF(r.entryTime.toDate(),t.minPitSeconds).getTime()-i}return 0}getLastRefuelPit(e){return e.filter(r=>r.refuel&&r.exitTime!==void 0).sort((r,i)=>{let s=r.exitTime?r.exitTime.toDate().getTime():0;return(i.exitTime?i.exitTime.toDate().getTime():0)-s}).at(0)}getLastDriverChangePit(e){if(e.length===0)return;let t=e.filter(r=>r.exitTime).sort((r,i)=>i.entryTime.toMillis()-r.entryTime.toMillis());for(let r of t)if(r.entryDriverId!==r.exitDriverId)return r}calculateCompletedDriverChanges(e){return e.filter(t=>t.exitTime).reduce((t,r)=>t+(r.entryDriverId!==r.exitDriverId?1:0),0)}calculateRemainingDriverChanges(e,t){return t?Math.max(0,t.minDriverChange-this.calculateCompletedDriverChanges(e)):0}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var bc=class n{raceService=x(kt);stintService=x(Qr);pitService=x(kn);activeRace=this.raceService.activeRace;activeStint=this.stintService.activeStint;activePit=this.pitService.activePit;startRace(e){return y(this,null,function*(){let t=this.createRace(),r=yield this.raceService.create(t);r&&(yield this.startStint(r.id,e,r.start))})}pitIn(e,t,r){return y(this,null,function*(){let i=this.activeRace(),s=this.activeStint();if(i&&s){let o=this.createPit(s.driverId,e,i.id,t,r),a=yield this.pitService.create(o);yield this.closeActiveStint(a.entryTime)}})}pitOut(){return y(this,null,function*(){let e=this.activeRace(),t=this.activePit();if(e&&t){let r=Tt.now(),i=yield this.startStint(e.id,t.exitDriverId,r);yield this.closeActivePit(i.startDate)}})}startStint(e,t,r){return y(this,null,function*(){let i=this.createStint(e,t,r);return yield this.stintService.create(i),i})}closeActiveStint(e){return y(this,null,function*(){let t=this.activeStint();t&&(t.endDate=e,yield this.stintService.update(t))})}closeActivePit(e){return y(this,null,function*(){let t=this.activePit();t&&(t.exitTime=e,yield this.pitService.update(t))})}createRace(){return{id:"1",start:Tt.now(),deleted:!1}}createStint(e,t,r){return{id:"1",deleted:!1,driverId:t,endDate:null,raceId:e,startDate:r}}createPit(e,t,r,i,s){return{id:"1",entryDriverId:e,entryTime:Tt.now(),exitDriverId:t,exitTime:null,raceId:r,refuel:i,tyreChange:s,deleted:!1}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var RF=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(we(di),we(Lr))}}static{this.\u0275dir=lt({type:n})}}return n})(),_d=(()=>{class n extends RF{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,features:[An]})}}return n})(),Nc=new H(""),WK={provide:Nc,useExisting:Zn(()=>p0),multi:!0},p0=(()=>{class n extends _d{writeValue(t){this.setProperty("checked",t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&He("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[Vr([WK]),An]})}}return n})(),KK={provide:Nc,useExisting:Zn(()=>Zg),multi:!0};function QK(){let n=_i()?_i().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var YK=new H(""),Zg=(()=>{class n extends RF{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!QK())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(we(di),we(Lr),we(YK,8))}}static{this.\u0275dir=lt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&He("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Vr([KK]),An]})}}return n})();function h0(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Jg=new H(""),NF=new H("");function ZK(n){return e=>{if(h0(e.value)||h0(n))return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function JK(n){return h0(n.value)?{required:!0}:null}function wF(n){return null}function xF(n){return n!=null}function MF(n){return Ws(n)?ot(n):n}function PF(n){let e={};return n.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function OF(n,e){return e.map(t=>t(n))}function XK(n){return!n.validate}function kF(n){return n.map(e=>XK(e)?e:t=>e.validate(t))}function e7(n){if(!n)return null;let e=n.filter(xF);return e.length==0?null:function(t){return PF(OF(t,e))}}function g0(n){return n!=null?e7(kF(n)):null}function t7(n){if(!n)return null;let e=n.filter(xF);return e.length==0?null:function(t){let r=OF(t,e).map(MF);return o_(r).pipe(K(PF))}}function m0(n){return n!=null?t7(kF(n)):null}function IF(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function n7(n){return n._rawValidators}function r7(n){return n._rawAsyncValidators}function f0(n){return n?Array.isArray(n)?n:[n]:[]}function Gg(n,e){return Array.isArray(n)?n.includes(e):n===e}function EF(n,e){let t=f0(e);return f0(n).forEach(i=>{Gg(t,i)||t.push(i)}),t}function CF(n,e){return f0(e).filter(t=>!Gg(n,t))}var zg=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=g0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=m0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ac=class extends zg{get formDirective(){return null}get path(){return null}},md=class extends zg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Wg=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},i7={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lpe=ye(j({},i7),{"[class.ng-submitted]":"isSubmitted"}),xc=(()=>{class n extends Wg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(we(md,2))}}static{this.\u0275dir=lt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&yf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[An]})}}return n})(),Mc=(()=>{class n extends Wg{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(we(Ac,10))}}static{this.\u0275dir=lt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&yf("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[An]})}}return n})();var dd="VALID",qg="INVALID",Dc="PENDING",hd="DISABLED",Rc=class{},Kg=class extends Rc{constructor(e,t){super(),this.value=e,this.source=t}},pd=class extends Rc{constructor(e,t){super(),this.pristine=e,this.source=t}},gd=class extends Rc{constructor(e,t){super(),this.touched=e,this.source=t}},Sc=class extends Rc{constructor(e,t){super(),this.status=e,this.source=t}};function FF(n){return(Xg(n)?n.validators:n)||null}function s7(n){return Array.isArray(n)?g0(n):n||null}function LF(n,e){return(Xg(e)?e.asyncValidators:n)||null}function o7(n){return Array.isArray(n)?m0(n):n||null}function Xg(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function a7(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Q(1e3,"");if(!r[t])throw new Q(1001,"")}function c7(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Q(1002,"")})}var Qg=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=qe(()=>this.statusReactive()),this.statusReactive=oe(void 0),this._pristine=qe(()=>this.pristineReactive()),this.pristineReactive=oe(!0),this._touched=qe(()=>this.touchedReactive()),this.touchedReactive=oe(!1),this._events=new ut,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return er(this.statusReactive)}set status(e){er(()=>this.statusReactive.set(e))}get valid(){return this.status===dd}get invalid(){return this.status===qg}get pending(){return this.status==Dc}get disabled(){return this.status===hd}get enabled(){return this.status!==hd}get pristine(){return er(this.pristineReactive)}set pristine(e){er(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return er(this.touchedReactive)}set touched(e){er(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(EF(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(EF(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(CF(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(CF(e,this._rawAsyncValidators))}hasValidator(e){return Gg(this._rawValidators,e)}hasAsyncValidator(e){return Gg(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new gd(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new gd(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(j({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new pd(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new pd(!0,r))}markAsPending(e={}){this.status=Dc;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=hd,this.errors=null,this._forEachChild(i=>{i.disable(ye(j({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kg(this.value,r)),this._events.next(new Sc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=dd,this._forEachChild(r=>{r.enable(ye(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===dd||this.status===Dc)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Kg(this.value,t)),this._events.next(new Sc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?hd:dd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Dc,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=MF(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new St,this.statusChanges=new St}_calculateStatus(){return this._allControlsDisabled()?hd:this.errors?qg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dc)?Dc:this._anyControlsHaveStatus(qg)?qg:dd}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new pd(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new gd(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=s7(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=o7(this._rawAsyncValidators)}},Yg=class extends Qg{constructor(e,t,r){super(FF(t),LF(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){c7(this,!0,e),Object.keys(e).forEach(r=>{a7(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var _0=new H("CallSetDisabledState",{providedIn:"root",factory:()=>y0}),y0="always";function u7(n,e){return[...e.path,n]}function VF(n,e,t=y0){UF(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),d7(n,e),f7(n,e),h7(n,e),l7(n,e)}function TF(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function l7(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function UF(n,e){let t=n7(n);e.validator!==null?n.setValidators(IF(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=r7(n);e.asyncValidator!==null?n.setAsyncValidators(IF(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();TF(e._rawValidators,i),TF(e._rawAsyncValidators,i)}function d7(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&jF(n,e)})}function h7(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&jF(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function jF(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function f7(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function p7(n,e){n==null,UF(n,e)}function g7(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function m7(n){return Object.getPrototypeOf(n.constructor)===_d}function _7(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function y7(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Zg?t=s:m7(s)?r=s:i=s}),i||r||t||null}var v7={provide:Ac,useExisting:Zn(()=>Oo)},fd=Promise.resolve(),Oo=(()=>{class n extends Ac{get submitted(){return er(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=qe(()=>this.submittedReactive()),this.submittedReactive=oe(!1),this._directives=new Set,this.ngSubmit=new St,this.form=new Yg({},g0(t),m0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){fd.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),VF(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){fd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){fd.then(()=>{let r=this._findContainer(t.path),i=new Yg({});p7(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){fd.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){fd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),_7(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(we(Jg,10),we(NF,10),we(_0,8))}}static{this.\u0275dir=lt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&He("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Vr([v7]),An]})}}return n})();function bF(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function DF(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var w7=class extends Qg{constructor(e=null,t,r){super(FF(t),LF(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(DF(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bF(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bF(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){DF(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var I7={provide:md,useExisting:Zn(()=>ko)},SF=Promise.resolve(),ko=(()=>{class n extends md{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new w7,this._registered=!1,this.name="",this.update=new St,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=y7(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),g7(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){VF(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){SF.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Fu(r);SF.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?u7(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(we(Ac,9),we(Jg,10),we(NF,10),we(Nc,10),we(ns,8),we(_0,8))}}static{this.\u0275dir=lt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Vr([I7]),An,li]})}}return n})(),Pc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=lt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})(),E7={provide:Nc,useExisting:Zn(()=>v0),multi:!0},v0=(()=>{class n extends _d{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&He("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Vr([E7]),An]})}}return n})();var C7={provide:Nc,useExisting:Zn(()=>Oc),multi:!0};function BF(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function T7(n){return n.split(":")[0]}var Oc=(()=>{class n extends _d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),i=BF(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=T7(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&He("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vr([C7]),An]})}}return n})(),em=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(BF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(we(Lr),we(di),we(Oc,9))}}static{this.\u0275dir=lt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),b7={provide:Nc,useExisting:Zn(()=>$F),multi:!0};function AF(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function D7(n){return n.split(":")[0]}var $F=(()=>{class n extends _d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let c=o[a],l=this._getOptionValue(c.value);i.push(l)}}else{let o=r.options;for(let a=0;a<o.length;a++){let c=o[a];if(c.selected){let l=this._getOptionValue(c.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=D7(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&He("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Vr([b7]),An]})}}return n})(),tm=(()=>{class n{constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(AF(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(AF(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(we(Lr),we(di),we($F,9))}}static{this.\u0275dir=lt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();function S7(n){return typeof n=="number"?n:parseFloat(n)}var HF=(()=>{class n{constructor(){this._validator=wF}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):wF,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=lt({type:n,features:[li]})}}return n})();var A7={provide:Jg,useExisting:Zn(()=>w0),multi:!0},w0=(()=>{class n extends HF{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>S7(t),this.createValidator=t=>ZK(t)}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ku("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[Vr([A7]),An]})}}return n})(),R7={provide:Jg,useExisting:Zn(()=>I0),multi:!0};var I0=(()=>{class n extends HF{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Fu,this.createValidator=t=>JK}enabled(t){return t}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=pr(n)))(i||n)}})()}static{this.\u0275dir=lt({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ku("required",i._enabled?"":null)},inputs:{required:"required"},features:[Vr([R7]),An]})}}return n})();var N7=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Hs({type:n})}static{this.\u0275inj=$s({})}}return n})();var kc=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_0,useValue:t.callSetDisabledState??y0}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Hs({type:n})}static{this.\u0275inj=$s({imports:[N7]})}}return n})();var nm=class n extends On{collectionPath="/laps";collectionRef=sr(this.firestore,this.collectionPath);raceService=x(kt);laps=oe([]);constructor(){super(),Je({laps:this.getRaceLaps(),activeRace:Re(this.raceService.activeRace)}).pipe(ct()).subscribe(e=>this.laps.set(e.laps))}getRaceLaps(){return Je({laps:ir(this.collectionRef),activeRace:Re(this.raceService.activeRace)}).pipe(jt(this.destroyed),K(({laps:e,activeRace:t})=>t?e.filter(r=>!r.deleted&&r.raceId===t.id):[]))}create(e){return y(this,null,function*(){return e.id=yield this.generateNextId(),yield this.createData(e.id,e),e})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var _s=class n extends On{collectionPath="/drivers";collectionRef=sr(this.firestore,this.collectionPath);lapService=x(nm);stintService=x(Qr);raceConfigService=x(Ht);drivers=oe([]);driversReferenceLapTimeMap=oe(new Map);driversTimeOnTrackMap=oe(new Map);driversTimeOnTrackWarningMap=oe(new Map);driversStintCountMap=oe(new Map);driversTimeOnTrackWarningCount=qe(()=>{let e=this.driversTimeOnTrackWarningMap(),t=0;return e.forEach(r=>{r&&t++}),t});constructor(){super(),Je({drivers:this.getAll(),laps:Re(this.lapService.laps),stints:Re(this.stintService.stints),activeRaceConfig:Re(this.raceConfigService.activeRaceConfig),ping:dn(1e3)}).pipe(ct()).subscribe(({drivers:e,laps:t,stints:r,activeRaceConfig:i})=>{this.drivers.set(e),this.driversReferenceLapTimeMap.set(this.createDriverReferenceLapTimeMap(t,e)),this.driversTimeOnTrackMap.set(this.createDriverTrackTimeMap(r,e)),this.driversTimeOnTrackWarningMap.set(this.createDriversTimeOnTrackWarningMap(this.driversTimeOnTrackMap(),i)),this.driversStintCountMap.set(this.createDriverStintCountMap(r,e))})}getAll(){return ir(this.collectionRef).pipe(jt(this.destroyed),K(e=>e.filter(t=>!t.deleted)))}createDriverReferenceLapTimeMap(e,t){let r=new Map;t.forEach(s=>{r.set(s.id,0)});let i=e.reduce((s,o)=>(s[o.driverId]||(s[o.driverId]=[]),s[o.driverId].push(o.millisecondsTime),s),{});for(let s in i){let o=i[s],a=o.reduce((c,l)=>c+l,0)/o.length;r.set(s,a)}return r}createDriverTrackTimeMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{let s;i.endDate?s=i.endDate.toDate().getTime()-i.startDate.toDate().getTime():s=new Date().getTime()-i.startDate.toDate().getTime(),r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+s):r.set(i.driverId,s)}),r}createDriversTimeOnTrackWarningMap(e,t){let r=new Map;if(t){let i=t.minDriverOnTrackHour*60*60*1e3,s=t.maxDriverOnTrackHour*60*60*1e3,o=20*60*1e3;e.forEach((a,c)=>{let l=a<i,d=s-a<=o;r.set(c,l||d)})}return r}createDriverStintCountMap(e,t){let r=new Map;return t.forEach(i=>{r.set(i.id,0)}),e.forEach(i=>{r.has(i.driverId)?r.set(i.driverId,r.get(i.driverId)+1):r.set(i.driverId,1)}),r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};function x7(n,e){if(n&1&&(M(0,"option",7),O(1),P()),n&2){let t=e.$implicit;Ce("value",t.id),U(),Te(" ",t.raceName," ")}}function M7(n,e){if(n&1){let t=zs();M(0,"div",0)(1,"div",2)(2,"form")(3,"label",3),O(4,"Start driver"),P(),M(5,"select",4),pi("ngModelChange",function(i){bn(t);let s=_e();return es(s.selectedDriver,i)||(s.selectedDriver=i),Dn(i)}),Be(6,x7,2,2,"option",5),P()()(),M(7,"button",6),He("click",function(){bn(t);let i=_e();return Dn(i.startRace())}),O(8," Start race "),P()()}if(n&2){let t=_e();U(5),fi("ngModel",t.selectedDriver),U(),Ce("ngForOf",t.drivers())}}function P7(n,e){if(n&1&&(M(0,"div",1),O(1),P()),n&2){let t=_e();U(),Te(" ",t.endRaceCountdown," ")}}var rm=class n{raceService=x(kt);raceManagerService=x(bc);driverService=x(_s);drivers=this.driverService.drivers;endRaceDate=this.raceService.endRaceDate;endRaceCountdown="--:--:--";selectedDriver="1";constructor(){Je({endRaceDate:Re(this.endRaceDate),ping:dn(1e3)}).pipe(ct()).subscribe(e=>{this.endRaceCountdown=Po(e.endRaceDate)})}startRace(){this.raceManagerService.startRace(this.selectedDriver)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-race"]],standalone:!0,features:[Rt],decls:2,vars:1,consts:[[1,"flex","items-center","justify-center"],[1,"text-2xl","md:text-4xl","font-bold","font-mono","dark:text-white"],[1,"font-bold","mr-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[1,"bg-green-500","hover:bg-green-700","text-white","font-bold","py-2","px-4","rounded",3,"click"],[3,"value"]],template:function(t,r){t&1&&Be(0,M7,9,2,"div",0)(1,P7,2,1,"div",1),t&2&&et(r.endRaceDate()?1:0)},dependencies:[kc,Pc,em,tm,Oc,xc,Mc,ko,Oo,Ca]})};var Fc=class n{raceService=x(kt);raceConfigService=x(Ht);pitService=x(kn);openingTime=oe(void 0);closingTime=oe(void 0);tyreChangeWindowOpen=oe(!1);remainingTyreChange=oe(0);constructor(){Je({pits:Re(this.pitService.pits),activeRace:Re(this.raceService.activeRace),raceConfig:Re(this.raceConfigService.activeRaceConfig),ping:dn(1e3)}).pipe(ct()).subscribe(({pits:e,activeRace:t,raceConfig:r})=>{t&&r?(this.openingTime.set(Cc(t.start.toDate(),r.startTyreChangeWindowHour)),this.closingTime.set(Cc(t.start.toDate(),r.endTyreChangeWindowHour)),this.tyreChangeWindowOpen.set(this.isTyreChangeWindowOpen(this.openingTime(),this.closingTime()))):(this.openingTime.set(void 0),this.closingTime.set(void 0),this.tyreChangeWindowOpen.set(!1)),r&&this.remainingTyreChange.set(this.calculateRemainingTyreChange(e,r.minTyreChange))})}isTyreChangeWindowOpen(e,t){if(e&&t){let r=new Date;return r>=e&&r<=t}return!1}calculateRemainingTyreChange(e,t){let r=e.filter(i=>i.tyreChange&&i.exitTime).length;return t-r}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var O7=n=>({"mb-2":n}),k7=n=>({"animate-bounce":n});function F7(n,e){if(n&1&&(M(0,"div",4),O(1),P()),n&2){let t=_e();U(),Te(" Remaining: ",t.remainingTyreChange()," ")}}function L7(n,e){n&1&&(M(0,"div",5),O(1," Completed! "),P())}function V7(n,e){if(n&1&&(M(0,"div",6),O(1," Window open "),P()),n&2){let t=_e();Ce("ngClass",Xt(1,k7,t.remainingTyreChange()>0))}}function U7(n,e){n&1&&(M(0,"div",7),O(1," Window closed "),P())}function j7(n,e){if(n&1&&(O(0),Ia(1,"date")),n&2){let t=_e(2);Te(" ",Ea(1,1,t.openingTime(),"HH:mm:ss")," ")}}function B7(n,e){n&1&&O(0," --:--:-- ")}function $7(n,e){if(n&1&&(O(0),Ia(1,"date")),n&2){let t=_e(2);Te(" ",Ea(1,1,t.closingTime(),"HH:mm:ss")," ")}}function H7(n,e){n&1&&O(0," --:--:-- ")}function q7(n,e){if(n&1&&(M(0,"div",8)(1,"div")(2,"div",9),O(3,"Opening time"),P(),M(4,"div",10),Be(5,j7,2,4)(6,B7,1,0),P()(),M(7,"div")(8,"div",11),O(9,"Opening in"),P(),M(10,"div",12),O(11),P()()(),Ie(12,"hr",13),M(13,"div",14)(14,"div")(15,"div",9),O(16,"Closing time"),P(),M(17,"div",10),Be(18,$7,2,4)(19,H7,1,0),P()(),M(20,"div")(21,"div",11),O(22,"Closing in"),P(),M(23,"div",12),O(24),P()()()),n&2){let t=_e();U(5),et(t.openingTime()?5:6),U(6),Te(" ",t.countdownOpeningTime()," "),U(7),et(t.closingTime()?18:19),U(6),Te(" ",t.countdownClosingTime()," ")}}var im=class n{tyreService=x(Fc);openingTime=this.tyreService.openingTime;closingTime=this.tyreService.closingTime;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;countdownOpeningTime=qe(()=>Po(this.tyreService.openingTime()));countdownClosingTime=qe(()=>Po(this.tyreService.closingTime()));isOpen=!1;constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-tyre-change-window"]],standalone:!0,features:[Rt],decls:10,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1),He("click",function(){return r.isOpen=!r.isOpen}),M(2,"div",2),O(3,"\u{1F6DE} Tyre change"),P(),M(4,"div",3),Be(5,F7,2,1,"div",4)(6,L7,2,0,"div",5)(7,V7,2,3,"div",6)(8,U7,2,0,"div",7),P()(),Be(9,q7,25,4),P()),t&2&&(U(),Ce("ngClass",Xt(4,O7,r.isOpen)),U(4),et(r.remainingTyreChange()>0?5:6),U(2),et(r.tyreChangeWindowOpen()?7:8),U(2),et(r.isOpen?9:-1))},dependencies:[Of,Rn]})};var sm=class n{charge=100;batteryColor="bg-green-500";batteryBorderColor="border-gray-200";ngOnChanges(e){this.batteryColor=this.getBackgroundColor(this.charge),this.batteryBorderColor=this.getBorderColor(this.charge)}getBackgroundColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}getBorderColor(e){return e<=10?"border-red-500":e<=25?"border-orange-500":"border-gray-200"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-battery"]],inputs:{charge:"charge"},standalone:!0,features:[li,Rt],decls:6,vars:6,consts:[[1,"w-16","lg:w-20","h-8","grid","grid-cols-6","items-center"],[1,"shadow","col-span-5","rounded","border-2","flex","relative",3,"ngClass"],[1,"cursor-default","leading-none","rounded-sm","flex","items-center","m-0.5","py-3",3,"ngClass"],[1,"absolute","right-2","text-black","font-semibold","font-mono"],[1,"ml-0.5","border-r-8","w-1","h-4","rounded-r",3,"ngClass"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),O(4),P()()(),Ie(5,"div",4),P()),t&2&&(U(),Ce("ngClass",r.batteryBorderColor),U(),_f("width",r.charge,"%"),Ce("ngClass",r.batteryColor),U(2),hi(r.charge),U(),Ce("ngClass",r.batteryBorderColor))},dependencies:[Rn],changeDetection:0})};var om=class n{raceService=x(kt);pitService=x(kn);raceConfigService=x(Ht);lastRefuelTime=oe(void 0);emptyFuelTime=oe(void 0);remainingFuelPercentage=oe(100);remainingFuelLap=oe(100);constructor(){Je({lastRefuelPit:Re(this.pitService.lastRefuelPit),activeRace:Re(this.raceService.activeRace),raceConfig:Re(this.raceConfigService.activeRaceConfig),ping:dn(1e3)}).pipe(ct()).subscribe(({lastRefuelPit:e,activeRace:t,raceConfig:r})=>{if(t&&r){let i=e&&e.exitTime?e.exitTime.toDate():t.start.toDate();this.lastRefuelTime.set(i),this.emptyFuelTime.set(xo(i,r.fuelDurationMinute)),this.remainingFuelPercentage.set(this.calculateRemainingFuelPercentage(this.emptyFuelTime(),r.fuelDurationMinute)),this.remainingFuelLap.set(this.calculateRemainingFuelLaps(this.emptyFuelTime(),r.referenceLapTimeMillisecond))}else this.lastRefuelTime.set(void 0),this.emptyFuelTime.set(void 0),this.remainingFuelPercentage.set(100),this.remainingFuelLap.set(0)})}calculateRemainingFuelPercentage(e,t){if(!e)return 100;let i=$g(e,new Date)/t*100,s=Math.max(0,Math.min(i,100));return parseFloat(s.toFixed(0))}calculateRemainingFuelLaps(e,t){if(!e||!t)return 0;let r=Mi(e,new Date);return Math.floor(r/t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var G7=n=>({"mb-2":n}),z7=n=>({"animate-bounce":n});function W7(n,e){if(n&1&&(O(0),Ia(1,"date")),n&2){let t=_e(2);Te(" ",Ea(1,1,t.lastRefuelTime(),"HH:mm:ss")," ")}}function K7(n,e){n&1&&O(0," --:--:-- ")}function Q7(n,e){if(n&1&&(O(0),Ia(1,"date")),n&2){let t=_e(2);Te(" ",Ea(1,1,t.emptyFuelTime(),"HH:mm:ss")," ")}}function Y7(n,e){n&1&&O(0," --:--:-- ")}function Z7(n,e){if(n&1){let t=zs();M(0,"div",7)(1,"div")(2,"div",8),O(3,"Last refuel time"),P(),M(4,"div",9),Be(5,W7,2,4)(6,K7,1,0),P()(),M(7,"div")(8,"div",10),O(9,"Since last refuel"),P(),M(10,"div",11),O(11),P()()(),Ie(12,"hr",12),M(13,"div",7)(14,"div")(15,"div",8),O(16,"Empty time"),P(),M(17,"div",9),Be(18,Q7,2,4)(19,Y7,1,0),P()(),M(20,"div")(21,"div",10),O(22,"Empty in"),P(),M(23,"div",11),O(24),P()()(),Ie(25,"hr",12),M(26,"div",13)(27,"div")(28,"div",8),O(29,"Remaining laps"),P(),M(30,"div",9),O(31),P()(),M(32,"div")(33,"div",10),O(34,"Fuel duration (min):"),P(),M(35,"div",14)(36,"button",15),He("click",function(){bn(t);let i=_e();return Dn(i.increaseFuelDuration())}),O(37,"+"),P(),M(38,"form",16),He("ngSubmit",function(){bn(t);let i=_e();return Dn(i.onSubmit())}),M(39,"input",17),pi("ngModelChange",function(i){bn(t);let s=_e();return es(s.fuelDurationMinute,i)||(s.fuelDurationMinute=i),Dn(i)}),P()(),M(40,"button",18),He("click",function(){bn(t);let i=_e();return Dn(i.decreaseFuelDuration())}),O(41,"-"),P()()()()}if(n&2){let t=_e();U(5),et(t.lastRefuelTime()?5:6),U(6),Te(" ",t.sinceLastRefuel()," "),U(7),et(t.emptyFuelTime()?18:19),U(6),Te(" ",t.emptyFuelCountdown()," "),U(7),Te(" ",t.remainingFuelLap()," "),U(8),fi("ngModel",t.fuelDurationMinute)}}var am=class n{raceConfigService=x(Ht);fuelService=x(om);remainingFuelPercentage=this.fuelService.remainingFuelPercentage;remainingFuelLap=this.fuelService.remainingFuelLap;emptyFuelTime=this.fuelService.emptyFuelTime;lastRefuelTime=this.fuelService.lastRefuelTime;emptyFuelCountdown=qe(()=>Po(this.emptyFuelTime()));sinceLastRefuel=qe(()=>_F(this.lastRefuelTime(),new Date));warning=qe(()=>this.remainingFuelPercentage()<=20);remainingColor=qe(()=>this.getRemainingColor(this.remainingFuelPercentage()));isOpen=!0;fuelDurationMinute=0;constructor(){Lu(()=>{let e=this.raceConfigService.activeRaceConfig();e&&(this.fuelDurationMinute=e.fuelDurationMinute)})}onSubmit(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute)}increaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute+1)}decreaseFuelDuration(){this.raceConfigService.updateFuelDurationMinute(this.fuelDurationMinute-1)}getRemainingColor(e){return e<=10?"bg-red-500":e<=25?"bg-orange-500":e<=50?"bg-yellow-500":"bg-green-500"}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-fuel"]],standalone:!0,features:[Rt],decls:11,vars:12,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center",3,"ngClass"],[1,"px-2","py-1","rounded-lg","text-center","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[1,"px-2","py-1","w-36","rounded-lg","text-left","text-white","font-medium","mr-1","hover:cursor-default",3,"ngClass"],[3,"charge"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"],[1,"flex","justify-end"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","mr-1","rounded",3,"click"],[1,"text-right",3,"ngSubmit"],["type","number","id","fuelDuration","name","fuelDuration","required","","min","1",1,"border","rounded-lg","px-2","py-1","w-20","text-right",3,"ngModelChange","ngModel"],[1,"bg-gray-200","hover:bg-gray-300","active:bg-gray-400","text-black","px-4","ml-1","rounded",3,"click"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1),He("click",function(){return r.isOpen=!r.isOpen}),M(2,"div",2),O(3,"\u26FD\uFE0F Fuel"),P(),M(4,"div",3)(5,"div",4),O(6),P(),M(7,"div",5),O(8),P(),Ie(9,"app-battery",6),P()(),Be(10,Z7,42,6),P()),t&2&&(U(),Ce("ngClass",Xt(8,G7,r.isOpen)),U(3),Ce("ngClass",Xt(10,z7,r.warning())),U(),Ce("ngClass",r.remainingColor()),U(),Te(" Laps: ",r.remainingFuelLap()," "),U(),Ce("ngClass",r.remainingColor()),U(),Te(" Empty: ",r.emptyFuelCountdown()," "),U(),Ce("charge",r.remainingFuelPercentage()),U(),et(r.isOpen?10:-1))},dependencies:[Rn,Of,sm,kc,Pc,Zg,v0,xc,Mc,I0,w0,ko,Oo]})};var cm=class n{raceService=x(kt);pitService=x(kn);raceConfigService=x(Ht);activeRaceLogic=oe(void 0);constructor(){Je({activeRace:Re(this.raceService.activeRace),endRaceDate:Re(this.raceService.endRaceDate),activeRaceConfig:Re(this.raceConfigService.activeRaceConfig),remainingDriverChanges:Re(this.pitService.remainingDriverChanges),lastDriverChangePit:Re(this.pitService.lastDriverChangePit),ping:dn(1e3)}).pipe(ct()).subscribe(({activeRace:e,endRaceDate:t,activeRaceConfig:r,remainingDriverChanges:i,lastDriverChangePit:s})=>{e&&t&&r?this.activeRaceLogic.set(this.calculateRaceLogic(e,t,r,i,s)):this.activeRaceLogic.set(void 0)})}calculateRaceLogic(e,t,r,i,s){let o=new Date;if(o>=t)return{avgStintMillisecondsTime:void 0,laps:0,avgStintMillisecondsIfDriverChangedNow:void 0,lapsIfDriverChangeNow:0};let a=gF(r.minPitSeconds*i),c=Mi(t,o)-a,l=s?s.entryTime.toDate():e.start.toDate(),f=(Mi(t,l)-a)/(i+1),g=c/i;return{avgStintMillisecondsTime:f||void 0,laps:Math.floor(f/r.referenceLapTimeMillisecond),avgStintMillisecondsIfDriverChangedNow:g||void 0,lapsIfDriverChangeNow:Math.floor(g/r.referenceLapTimeMillisecond)}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var J7=n=>({"mb-2":n});function X7(n,e){if(n&1&&(M(0,"div",3)(1,"div")(2,"div",4),O(3,"Optimized AVG time"),P(),M(4,"div",5),O(5),P()(),M(6,"div")(7,"div",6),O(8,"Laps"),P(),M(9,"div",7),O(10),P()()(),Ie(11,"hr",8),M(12,"div",9)(13,"div")(14,"div",4),O(15," Optimized AVG time "),M(16,"strong"),O(17,"if driver change now"),P()(),M(18,"div",5),O(19),P()(),M(20,"div")(21,"div",6),O(22,"Laps"),P(),M(23,"div",7),O(24),P()()()),n&2){let t=_e();U(5),Te(" ",t.AVGStintTime()," "),U(5),Te(" ",t.laps()," "),U(9),Te(" ",t.AVGStintTimeIfDriverChangeNow()," "),U(5),Te(" ",t.lapsIfDriverChangeNow()," ")}}var um=class n{raceLogicService=x(cm);AVGStintTime=qe(()=>{let e=this.raceLogicService.activeRaceLogic();return e?ms(e.avgStintMillisecondsTime):"--:--:--"});laps=qe(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.laps:0});AVGStintTimeIfDriverChangeNow=qe(()=>{let e=this.raceLogicService.activeRaceLogic();return e?ms(e.avgStintMillisecondsIfDriverChangedNow):"--:--:--"});lapsIfDriverChangeNow=qe(()=>{let e=this.raceLogicService.activeRaceLogic();return e?e.lapsIfDriverChangeNow:0});isOpen=!0;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-stint-optimizer"]],standalone:!0,features:[Rt],decls:5,vars:4,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"],[1,"mb-2"],[1,"flex","justify-between"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1),He("click",function(){return r.isOpen=!r.isOpen}),M(2,"div",2),O(3,"\u{1F9E0} Stint optimizer"),P()(),Be(4,X7,25,4),P()),t&2&&(U(),Ce("ngClass",Xt(2,J7,r.isOpen)),U(3),et(r.isOpen?4:-1))},dependencies:[Rn]})};var eQ=n=>({"mb-2":n}),tQ=(n,e)=>({"bg-green-100 font-semibold":n,"hover:bg-gray-50":e}),nQ=n=>({"bg-yellow-500 text-white":n});function rQ(n,e){if(n&1&&(M(0,"div",4),O(1),P()),n&2){let t=_e();U(),Te(" Time on track warning: ",t.driversTimeOnTrackWarningCount()," ")}}function iQ(n,e){n&1&&(M(0,"div",5),O(1," Time on track warning: Completed! "),P())}function sQ(n,e){if(n&1&&(M(0,"tr",14)(1,"td",15),O(2),P(),M(3,"td",15),O(4),P(),M(5,"td",12),O(6),P(),M(7,"th",11),O(8),P(),M(9,"td",12)(10,"div",16),O(11),P()()()),n&2){let t=e.$implicit,r=_e(2);Ce("ngClass",gR(7,tQ,t.id===r.activeStintDriverId(),t.id!==r.activeStintDriverId())),U(2),hi(t.id),U(2),hi(t.raceName),U(2),hi(r.getDriverReferenceLapTime(t.id)),U(2),Te(" ",r.getDriverStintCount(t.id),""),U(2),Ce("ngClass",Xt(10,nQ,r.getDriverTimeOnTrackWarning(t.id))),U(),Te(" ",r.getDriverTimeOnTrack(t.id)," ")}}function oQ(n,e){if(n&1&&(M(0,"table",6)(1,"thead")(2,"tr"),Ie(3,"th",7),M(4,"th",7),O(5,"Name"),P(),M(6,"th",7),O(7,"Reference lap time"),P(),M(8,"th",7),O(9,"Stint"),P(),M(10,"th",7),O(11,"Time on track"),P()()(),M(12,"tbody"),Be(13,sQ,12,12,"tr",8),M(14,"tr",9)(15,"td",10),O(16,"Totals"),P(),M(17,"td",11),O(18),P(),M(19,"td",12)(20,"div",13),O(21),P()()()()()),n&2){let t=_e();U(13),Ce("ngForOf",t.drivers()),U(5),hi(t.totalStints()),U(3),hi(t.totalTimeOnTrack())}}var lm=class n{driverService=x(_s);stintService=x(Qr);drivers=this.driverService.drivers;driversTimeOnTrackWarningCount=this.driverService.driversTimeOnTrackWarningCount;activeStintDriverId=qe(()=>{let e=this.stintService.activeStint();if(e)return e.driverId});totalStints=qe(()=>{let e=this.driverService.driversStintCountMap(),t=0;return e.forEach(r=>{t+=r}),t});totalTimeOnTrack=qe(()=>{let e=this.driverService.driversTimeOnTrackMap(),t=0;return e.forEach(r=>{t+=r}),ms(t)});isOpen=!0;getDriverReferenceLapTime(e){return vF(this.driverService.driversReferenceLapTimeMap().get(e))}getDriverTimeOnTrack(e){return ms(this.driverService.driversTimeOnTrackMap().get(e))}getDriverTimeOnTrackWarning(e){return this.driverService.driversTimeOnTrackWarningMap().get(e)||!1}getDriverStintCount(e){return this.driverService.driversStintCountMap().get(e)||0}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-driver"]],standalone:!0,features:[Rt],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"min-w-full","bg-white"],[1,"py-2","px-3","border-b","border-gray-200","text-left","text-md","font-medium","text-gray-700"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"bg-gray-100","font-bold"],["colspan","3",1,"py-2","px-3","border-b","border-gray-200","text-black"],[1,"py-2","px-3","border-b","border-gray-200","text-black","text-left","font-mono"],[1,"py-2","px-3","border-b","border-gray-200","text-black","font-mono"],[1,"p-1","w-24","text-center","rounded"],[3,"ngClass"],[1,"py-2","px-3","border-b","border-gray-200","text-black"],[1,"p-1","w-24","text-center","rounded",3,"ngClass"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1),He("click",function(){return r.isOpen=!r.isOpen}),M(2,"div",2),O(3,"\u{1F417} Drivers"),P(),M(4,"div",3),Be(5,rQ,2,1,"div",4)(6,iQ,2,0,"div",5),P()(),Be(7,oQ,22,3,"table",6),P()),t&2&&(U(),Ce("ngClass",Xt(3,eQ,r.isOpen)),U(4),et(r.driversTimeOnTrackWarningCount()>0?5:6),U(2),et(r.isOpen?7:-1))},dependencies:[Rn,Ca]})};var dm=class n{raceService=x(kt);stintService=x(Qr);raceConfigService=x(Ht);open=oe(!1);openInMilliseconds=oe(0);constructor(){Je({endRaceDate:Re(this.raceService.endRaceDate),activeStint:Re(this.stintService.activeStint),activeRaceConfig:Re(this.raceConfigService.activeRaceConfig),ping:dn(1e3)}).pipe(ct()).subscribe(({endRaceDate:e,activeStint:t,activeRaceConfig:r})=>{e&&t&&r?(this.open.set(this.calculatePitLaneOpen(e,t,r)),this.openInMilliseconds.set(this.calculatePitLaneOpenInMilliseconds(t,r))):(this.open.set(!1),this.openInMilliseconds.set(0))})}calculatePitLaneOpenInMilliseconds(e,t){let r=new Date().getTime();return xo(e.startDate.toDate(),t.minStintMinute).getTime()-r}calculatePitLaneOpen(e,t,r){let i=new Date,s=mF(e,r.pitLaneCloseBeforeEndRaceMinute),o=pF(i,s),a=xo(t.startDate.toDate(),r.minStintMinute),c=fF(i,a);return o&&c}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var aQ=n=>({"mb-4":n}),cQ=n=>({"animate-bounce":n});function uQ(n,e){if(n&1&&(M(0,"div",3),O(1),P()),n&2){let t=_e();U(),Te(" Open in: ",t.pitLaneOpenInMillisecondsString()," ")}}function lQ(n,e){n&1&&(M(0,"div",3),O(1," Open "),P())}function dQ(n,e){n&1&&(M(0,"div",5),O(1," Closed "),P())}function hQ(n,e){if(n&1&&(M(0,"option",19),O(1),P()),n&2){let t=e.$implicit;Ce("value",t.id),U(),Te(" ",t.raceName," ")}}function fQ(n,e){if(n&1){let t=zs();M(0,"div",10),O(1,"PIT SETTINGS"),P(),M(2,"form")(3,"div",11)(4,"label",12),O(5,"\u{1F417} Driver"),P(),M(6,"select",13),pi("ngModelChange",function(i){bn(t);let s=_e(2);return es(s.selectedDriver,i)||(s.selectedDriver=i),Dn(i)}),Be(7,hQ,2,2,"option",14),P()(),M(8,"div",11)(9,"label",15),O(10,"\u26FD\uFE0F Refueling"),P(),M(11,"input",16),pi("ngModelChange",function(i){bn(t);let s=_e(2);return es(s.refueling,i)||(s.refueling=i),Dn(i)}),P()(),M(12,"div",11)(13,"label",17),O(14,"\u{1F6DE} Tyre change"),P(),M(15,"input",18),pi("ngModelChange",function(i){bn(t);let s=_e(2);return es(s.tyreChange,i)||(s.tyreChange=i),Dn(i)}),P()()()}if(n&2){let t=_e(2);U(6),Ce("disabled",t.activePit()!==void 0),fi("ngModel",t.selectedDriver),U(),Ce("ngForOf",t.drivers()),U(4),Ce("disabled",t.activePit()!==void 0),fi("ngModel",t.refueling),U(4),Ce("disabled",t.activePit()!==void 0||!t.tyreChangeWindowOpen()||t.remainingTyreChange()<=0),fi("ngModel",t.tyreChange)}}function pQ(n,e){if(n&1&&(M(0,"div",20),O(1),P()),n&2){let t=_e(3);Ce("ngClass",Xt(2,cQ,t.activePitRemainingMilliseconds()<1e4)),U(),Te(" Pit out enabled in: ",t.activePitRemainingMillisecondsString()," ")}}function gQ(n,e){n&1&&(M(0,"div",21),O(1," Pit out ready! "),P())}function mQ(n,e){if(n&1&&Be(0,pQ,2,4,"div",20)(1,gQ,2,0,"div",21),n&2){let t=_e(2);et(t.activePitRemainingMilliseconds()>0?0:1)}}function _Q(n,e){if(n&1){let t=zs();M(0,"div",6),Be(1,fQ,16,7)(2,mQ,2,1),P(),M(3,"div",7)(4,"button",8),He("click",function(){bn(t);let i=_e();return Dn(i.pitIn())}),O(5," Pit in "),P(),M(6,"button",9),He("click",function(){bn(t);let i=_e();return Dn(i.pitOut())}),O(7," Pit out "),P()()}if(n&2){let t=_e();U(),et(t.activePit()?2:1),U(3),Ce("disabled",!t.pitLaneOpen()),U(2),Ce("disabled",!t.activePit()||t.activePit()&&t.activePitRemainingMilliseconds()>0)}}var hm=class n{pitLaneService=x(dm);pitService=x(kn);driverService=x(_s);raceManagerService=x(bc);tyreService=x(Fc);pitLaneOpen=this.pitLaneService.open;pitLaneOpenInMilliseconds=this.pitLaneService.openInMilliseconds;pitLaneOpenInMillisecondsString=qe(()=>ms(this.pitLaneService.openInMilliseconds()));activePit=this.pitService.activePit;activePitRemainingMilliseconds=this.pitService.activePitRemainingMilliseconds;activePitRemainingMillisecondsString=qe(()=>yF(this.pitService.activePitRemainingMilliseconds()));drivers=this.driverService.drivers;remainingTyreChange=this.tyreService.remainingTyreChange;tyreChangeWindowOpen=this.tyreService.tyreChangeWindowOpen;isOpen=!0;refueling=!1;tyreChange=!1;selectedDriver="1";pitIn(){this.raceManagerService.pitIn(this.selectedDriver,this.refueling,this.tyreChange)}pitOut(){this.raceManagerService.pitOut(),this.tyreChange=!1,this.refueling=!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-pit-lane"]],standalone:!0,features:[Rt],decls:9,vars:6,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","items-center"],[1,"bg-red-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","flex-col","items-center","mb-2"],[1,"flex","justify-between"],[1,"bg-green-500","hover:bg-green-700","disabled:bg-green-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"bg-red-500","hover:bg-red-700","disabled:bg-red-200","text-white","font-bold","py-2","px-4","rounded",3,"click","disabled"],[1,"font-semibold","mb-2"],[1,"mb-2"],["for","driverSelect",1,"mr-2"],["id","driverSelect","name","driverSelect",1,"border","rounded","p-1",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","refueling",1,"mr-2"],["type","checkbox","id","refueling","name","refueling",3,"ngModelChange","disabled","ngModel"],["for","tyreChange",1,"mr-2"],["type","checkbox","id","tyreChange","name","tyreChange",3,"ngModelChange","disabled","ngModel"],[3,"value"],[1,"bg-yellow-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default",3,"ngClass"],[1,"bg-green-500","p-2","rounded-lg","text-white","text-center","text-xl","font-black","hover:cursor-default"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1),He("click",function(){return r.isOpen=!r.isOpen}),M(2,"div",2),O(3,"\u{1F17F}\uFE0F Pit Lane"),P(),Be(4,uQ,2,1,"div",3),M(5,"div",4),Be(6,lQ,2,0,"div",3)(7,dQ,2,0,"div",5),P()(),Be(8,_Q,8,3),P()),t&2&&(U(),Ce("ngClass",Xt(4,aQ,r.isOpen)),U(3),et(r.pitLaneOpenInMilliseconds()>0?4:-1),U(2),et(r.pitLaneOpen()?6:7),U(2),et(r.isOpen?8:-1))},dependencies:[Rn,kc,Pc,em,tm,p0,Oc,xc,Mc,ko,Oo,Ca]})};var yQ=n=>({"mb-2":n});function vQ(n,e){if(n&1&&(M(0,"div",4),O(1),P()),n&2){let t=_e();U(),Te(" Remaining: ",t.remainingDriverChanges()," ")}}function wQ(n,e){n&1&&(M(0,"div",5),O(1," Completed! "),P())}function IQ(n,e){if(n&1&&(M(0,"div",6)(1,"div")(2,"div",7),O(3,"Competed"),P(),M(4,"div",8),O(5),P()(),M(6,"div")(7,"div",9),O(8,"Remaining"),P(),M(9,"div",10),O(10),P()()()),n&2){let t=_e();U(5),Te(" ",t.completedDriverChanges()," "),U(5),Te(" ",t.remainingDriverChanges()," ")}}var fm=class n{pitService=x(kn);remainingDriverChanges=this.pitService.remainingDriverChanges;completedDriverChanges=this.pitService.completedDriverChanges;isOpen=!1;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-driver-change"]],standalone:!0,features:[Rt],decls:8,vars:5,consts:[[1,"bg-white","shadow-md","rounded-lg","p-2","md:p-3","lg:p-4","w-auto","mx-auto","border","hover:shadow-xl"],[1,"flex","justify-between","items-center","hover:cursor-pointer",3,"click","ngClass"],[1,"text-lg","lg:text-xl","font-bold"],[1,"flex","items-center"],[1,"bg-yellow-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"bg-green-500","px-2","py-1","rounded-lg","text-white","text-center","font-medium","mr-1","hover:cursor-default"],[1,"flex","justify-between","mb-2"],[1,"text-gray-600"],[1,"text-black","font-mono"],[1,"text-gray-600","text-right"],[1,"text-black","font-mono","text-right"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1),He("click",function(){return r.isOpen=!r.isOpen}),M(2,"div",2),O(3,"\u{1F504} Driver change"),P(),M(4,"div",3),Be(5,vQ,2,1,"div",4)(6,wQ,2,0,"div",5),P()(),Be(7,IQ,11,2,"div",6),P()),t&2&&(U(),Ce("ngClass",Xt(3,yQ,r.isOpen)),U(4),et(r.remainingDriverChanges()>0?5:6),U(2),et(r.isOpen?7:-1))},dependencies:[Rn]})};var pm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=At({type:n,selectors:[["app-root"]],standalone:!0,features:[Rt],decls:54,vars:0,consts:[[1,"w-full","h-full","min-h-full","dark:bg-black"],[1,"p-4","grid","grid-cols-2","lg:grid-cols-3","gap-3"],[1,"flex","items-center"],[1,"text-xl","md:text-3xl","dark:text-white","font-semibold"],[1,"text-right","lg:text-center"],[1,"mx-4","grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-3","mb-4"],[1,"flex-col","md:h-fit"],[1,"mb-3","lg:mb-4"],[1,"lg:mb-4"],[1,"flex-col"],[1,"flex","flex-col","justify-center","items-center"],["src","assets/cremona_circuit.jpg","alt","Circuito",1,"max-w-sm","md:max-w-md"]],template:function(t,r){t&1&&(M(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),O(4,"\u{1F3CE}\uFE0F dash-boar \u{1F417}"),P()(),M(5,"div",4),Ie(6,"app-race"),P()(),M(7,"div",5)(8,"div",6)(9,"div",7),Ie(10,"app-tyre-change-window"),P(),M(11,"div",8),Ie(12,"app-driver"),P()(),M(13,"div",9)(14,"div",7),Ie(15,"app-fuel"),P(),M(16,"div",8),Ie(17,"app-pit-lane"),P()(),M(18,"div",9)(19,"div",7),Ie(20,"app-stint-optimizer"),P(),M(21,"div",8),Ie(22,"app-driver-change"),P(),M(23,"div",8)(24,"strong"),O(25,"TODO:"),P(),Ie(26,"br"),O(27," - Fuel: calcolo giri rimanenti anche quando non \xE8 avviata la gara"),Ie(28,"br"),O(29," - \u2705 Pit lane: animare pit out quando si avvicina il la possibilit\xE0 di uscire dai box"),Ie(30,"br"),O(31," - Pit lane: Sincronizzare setup pit tra dispositivi"),Ie(32,"br"),O(33," - \u2705 Pit lane: spostare setup pit sopra i tasti"),Ie(34,"br"),O(35," - \u2705 Pit lane: disabilitare tyre change se -> gi\xE0 fatti oppure se fuori dalla finestra temporale di cambio gomme"),Ie(36,"br"),O(37," - \u2705 Drivers: Aggiungere numero di stint fatti per ogni pilota"),Ie(38,"br"),O(39," - Componente per gestione reference lap time"),Ie(40,"br"),O(41," - \u2705 Race: gestione pilota di partenza"),Ie(42,"br"),O(43," - Componente per visualizzazione stint corrente e storico"),Ie(44,"br"),O(45," - Componente per visualizzazione storico pit"),Ie(46,"br"),O(47," - \u2705 Componente driver changes per monitorare rimanenze/completati"),Ie(48,"br"),P()()(),M(49,"div",10)(50,"div",3),O(51,"Cremona kart circuit"),P(),Ie(52,"img",11),P()(),Ie(53,"router-outlet"))},dependencies:[Kv,rm,im,am,um,lm,hm,fm]})};WR(pm,W1).catch(n=>console.error(n));
